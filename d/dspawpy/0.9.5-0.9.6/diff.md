# Comparing `tmp/dspawpy-0.9.5-py3-none-any.whl.zip` & `tmp/dspawpy-0.9.6-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,22 +1,22 @@
-Zip file size: 73019 bytes, number of entries: 20
--rw-rw-rw-  2.0 fat       22 b- defN 23-May-19 08:41 dspawpy/__init__.py
--rw-rw-rw-  2.0 fat    29208 b- defN 23-Apr-25 05:34 dspawpy/plot.py
+Zip file size: 72855 bytes, number of entries: 20
+-rw-rw-rw-  2.0 fat       23 b- defN 23-May-26 05:38 dspawpy/__init__.py
+-rw-rw-rw-  2.0 fat    29208 b- defN 23-May-23 06:07 dspawpy/plot.py
 -rw-rw-rw-  2.0 fat        0 b- defN 23-Apr-04 06:32 dspawpy/analysis/__init__.py
--rw-rw-rw-  2.0 fat    21567 b- defN 23-May-11 06:31 dspawpy/analysis/aimdtools.py
--rw-rw-rw-  2.0 fat    20152 b- defN 23-Apr-04 06:32 dspawpy/analysis/vacf.py
--rw-rw-rw-  2.0 fat        0 b- defN 23-Apr-04 06:32 dspawpy/diffusion/__init__.py
--rw-rw-rw-  2.0 fat     3592 b- defN 23-Apr-26 09:25 dspawpy/diffusion/neb.py
--rw-rw-rw-  2.0 fat    53467 b- defN 23-Apr-26 09:25 dspawpy/diffusion/nebtools.py
--rw-rw-rw-  2.0 fat    11045 b- defN 23-Apr-25 05:34 dspawpy/diffusion/pathfinder.py
+-rw-rw-rw-  2.0 fat    21567 b- defN 23-May-23 06:07 dspawpy/analysis/aimdtools.py
+-rw-rw-rw-  2.0 fat    20152 b- defN 23-May-23 06:07 dspawpy/analysis/vacf.py
+-rw-rw-rw-  2.0 fat        0 b- defN 23-May-23 06:07 dspawpy/diffusion/__init__.py
+-rw-rw-rw-  2.0 fat     3592 b- defN 23-May-23 06:07 dspawpy/diffusion/neb.py
+-rw-rw-rw-  2.0 fat    53467 b- defN 23-May-23 06:07 dspawpy/diffusion/nebtools.py
+-rw-rw-rw-  2.0 fat    11045 b- defN 23-May-23 06:07 dspawpy/diffusion/pathfinder.py
 -rw-rw-rw-  2.0 fat        0 b- defN 23-Apr-04 08:25 dspawpy/io/__init__.py
--rw-rw-rw-  2.0 fat    53355 b- defN 23-May-19 06:22 dspawpy/io/read.py
--rw-rw-rw-  2.0 fat     7721 b- defN 23-Apr-25 05:46 dspawpy/io/read_json.py
--rw-rw-rw-  2.0 fat    10536 b- defN 23-May-19 03:14 dspawpy/io/structure.py
--rw-rw-rw-  2.0 fat    25239 b- defN 23-May-15 08:44 dspawpy/io/utils.py
--rw-rw-rw-  2.0 fat    25391 b- defN 23-May-17 10:21 dspawpy/io/write.py
--rw-rw-rw-  2.0 fat     1761 b- defN 23-Apr-25 05:51 dspawpy/io/write_json.py
--rw-rw-rw-  2.0 fat     2823 b- defN 23-May-19 08:41 dspawpy-0.9.5.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 23-May-19 08:41 dspawpy-0.9.5.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        8 b- defN 23-May-19 08:41 dspawpy-0.9.5.dist-info/top_level.txt
-?rw-rw-r--  2.0 fat     1583 b- defN 23-May-19 08:41 dspawpy-0.9.5.dist-info/RECORD
-20 files, 267562 bytes uncompressed, 70469 bytes compressed:  73.7%
+-rw-rw-rw-  2.0 fat    53355 b- defN 23-May-23 06:07 dspawpy/io/read.py
+-rw-rw-rw-  2.0 fat     7721 b- defN 23-May-23 06:07 dspawpy/io/read_json.py
+-rw-rw-rw-  2.0 fat     9880 b- defN 23-May-23 06:07 dspawpy/io/structure.py
+-rw-rw-rw-  2.0 fat    25239 b- defN 23-May-23 06:07 dspawpy/io/utils.py
+-rw-rw-rw-  2.0 fat    25391 b- defN 23-May-23 06:07 dspawpy/io/write.py
+-rw-rw-rw-  2.0 fat     1761 b- defN 23-May-23 06:07 dspawpy/io/write_json.py
+-rw-rw-rw-  2.0 fat     2904 b- defN 23-May-26 05:39 dspawpy-0.9.6.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-May-26 05:39 dspawpy-0.9.6.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        8 b- defN 23-May-26 05:39 dspawpy-0.9.6.dist-info/top_level.txt
+?rw-rw-r--  2.0 fat     1582 b- defN 23-May-26 05:39 dspawpy-0.9.6.dist-info/RECORD
+20 files, 266987 bytes uncompressed, 70305 bytes compressed:  73.7%
```

## zipnote {}

```diff
@@ -42,20 +42,20 @@
 
 Filename: dspawpy/io/write.py
 Comment: 
 
 Filename: dspawpy/io/write_json.py
 Comment: 
 
-Filename: dspawpy-0.9.5.dist-info/METADATA
+Filename: dspawpy-0.9.6.dist-info/METADATA
 Comment: 
 
-Filename: dspawpy-0.9.5.dist-info/WHEEL
+Filename: dspawpy-0.9.6.dist-info/WHEEL
 Comment: 
 
-Filename: dspawpy-0.9.5.dist-info/top_level.txt
+Filename: dspawpy-0.9.6.dist-info/top_level.txt
 Comment: 
 
-Filename: dspawpy-0.9.5.dist-info/RECORD
+Filename: dspawpy-0.9.6.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## dspawpy/__init__.py

```diff
@@ -1 +1 @@
-__version__ = "0.9.5"
+__version__ = "0.9.6"
```

## dspawpy/io/read.py

```diff
@@ -48,15 +48,15 @@
     [{'start_index': 0, 'end_index': 100, 'name': 'R-G'}, {'start_index': 101, 'end_index': 201, 'name': 'G-X'}]
 
     如果希望通过指定wannier.json来处理瓦尼尔能带，需要额外指定syst_dir参数
 
     >>> band = get_band_data(band_dir='wannier.json', syst_dir='system.json')
     """
     if efermi is not None and zero_to_fermi:
-        raise ValueError('efermi and zero_to_fermi should not be set at the same time!')
+        raise ValueError("efermi and zero_to_fermi should not be set at the same time!")
     if band_dir.endswith(".h5"):
         band = load_h5(band_dir)
         raw = h5py.File(band_dir, "r").keys()
         if "/WannBandInfo/NumberOfBand" in raw:
             (
                 structure,
                 kpoints,
```

## dspawpy/io/structure.py

```diff
@@ -66,32 +66,15 @@
 
     >>> pymatgen_Structures = build_Structures_from_datafile(datafile=['aimd1.h5','aimd2.h5'])
     """
     dfs = []
     if isinstance(datafile, list):  # 续算模式，给的是多个文件
         dfs = datafile
     else:  # 单次计算模式，处理单个文件
-        if datafile.split(".")[-1] in [
-            "h5",
-            "json",
-            "as",
-            "hzw",
-            "cif",
-            "poscar",
-            "cssr",
-            "xsf",
-            "mcsqs",
-            "prismatic",
-            "yaml",
-            "fleur-inpgen",
-        ]:
-            df = datafile
-        else:
-            raise NotImplementedError(f"{datafile}文件类型暂时无法读取")
-        dfs.append(df)
+        dfs.append(datafile)
 
     # 读取结构数据
     pymatgen_Structures = []
     for df in dfs:
         structure_list = _get_structure_list(df, si, ele, ai)
         pymatgen_Structures.extend(structure_list)
 
@@ -119,28 +102,15 @@
     # create Structure structure_list from aimd.h5
     fmt = df.split(".")[-1]
     if fmt == "as":
         strs = [_from_dspaw_as(df)]
     elif fmt == "hzw":
         print("build from hzw file may lack mag & fix info!")
         strs = [_from_hzw(df)]
-    elif fmt in [
-        "cif",
-        "poscar",
-        "cssr",
-        "xsf",
-        "mcsqs",
-        "prismatic",
-        "yaml",
-        "fleur-inpgen",
-    ]:
-        strs = [Structure.from_file(df)]
-    else:
-        assert df.endswith(".h5") or df.endswith(".json"), "expecting h5/json file"
-
+    elif fmt == "h5" or fmt == "json":
         Nstep, elements, positions, lattices, D_mag_fix = get_sinfo(
             datafile=df, si=si, ele=ele, ai=ai
         )  # returned positions, not scaled-positions
         # remove _ from elements
         elements = [re.sub(r"_", "", e) for e in elements]
 
         strs = []
@@ -160,14 +130,17 @@
                     Structure(
                         lattices[i],
                         elements,
                         positions[i],
                         coords_are_cartesian=True,
                     )
                 )
+    else:
+        strs = [Structure.from_file(df)]
+
     return strs
 
 
 def _from_dspaw_as(as_file: str = "structure.as") -> Structure:
     """从DSPAW的as结构文件中读取结构信息
 
     Parameters
```

## Comparing `dspawpy-0.9.5.dist-info/METADATA` & `dspawpy-0.9.6.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: dspawpy
-Version: 0.9.5
+Version: 0.9.6
 Summary: Tools for dspaw
 Home-page: http://www.hzwtech.com/
 Author: Hzwtech
 License: MIT
 Requires-Python: >=3
 Description-Content-Type: text/markdown
 Requires-Dist: pymatgen (>=2021.2.8.1)
@@ -28,14 +28,18 @@
 
 再重新用pip安装。
 
 详见 https://stackoverflow.com/questions/75542688/conda-installed-pip-failed-to-find-packages/75542962#75542962
 
 ## 版本更新简述
 
+### 0.9.6
+
+- BUG修复：pymatgen支持的几类结构文件的读取接口
+
 ### 0.9.5
 
 - 重要变更： get_band_data 的 shift_efermi 参数改名为 zero_to_fermi
 
 ### 0.9.4
 
 - 新增功能： get_band_data 增加 shift_efermi 参数
```

## Comparing `dspawpy-0.9.5.dist-info/RECORD` & `dspawpy-0.9.6.dist-info/RECORD`

 * *Files 8% similar despite different names*

```diff
@@ -1,20 +1,20 @@
-dspawpy/__init__.py,sha256=ORAtCCI2THBDcdzIbh6oBsoshDvkkmXUWpmO4Q5McAk,22
+dspawpy/__init__.py,sha256=DUP796j17_h9tFqkdOpSu_66sw_6eSK4S2hN7yd9i9o,23
 dspawpy/plot.py,sha256=ocLkU08WfMb2fyETrBSSZvxZFSg2sPX8rLusXZLT5BM,29208
 dspawpy/analysis/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 dspawpy/analysis/aimdtools.py,sha256=72N58P2EBA5z8EZwaY1W6ab8ZGZVwefQCjME8490HqU,21567
 dspawpy/analysis/vacf.py,sha256=g5IS6Q7QGYa17XBVnYEH-MubGSpkUsDPpMaI_ELacw4,20152
 dspawpy/diffusion/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 dspawpy/diffusion/neb.py,sha256=U6J7lSlE_xp1rCON5mgfWWi5DFHVZYVb5xjqLlGxXXI,3592
 dspawpy/diffusion/nebtools.py,sha256=tfQCQPUmZKELz7ImwyiJiiFfXahC9U3doarExspL-DU,53467
 dspawpy/diffusion/pathfinder.py,sha256=HhCVoh42Q2qIksBAruZ1atULfR5D55uzZvbaCtUxSig,11045
 dspawpy/io/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-dspawpy/io/read.py,sha256=9suIgyZ8UBdSkKhYq9dkRfBcCoiaQBKCMl7NzG1LRW4,53355
+dspawpy/io/read.py,sha256=ZDcow03EV2TGBnQ8cO68r3a0l4P1wqh99W1xWFofZLc,53355
 dspawpy/io/read_json.py,sha256=2bcNQP51SR2yMyFE7c2TIutYp93K8IH-dpLmH5yy4bo,7721
-dspawpy/io/structure.py,sha256=8W-vsSXA-TGWMdmK4TlihsZLpLfZhGuGSL6YqI_C5uA,10536
+dspawpy/io/structure.py,sha256=HenUYKsB4YRa8I5F_WtlZ5Mq226cOGQXmHx2BpXi2qI,9880
 dspawpy/io/utils.py,sha256=ff2182s8KQWQ53bHYdlWuXuN3lkDLAH6zrNub1t_9wA,25239
 dspawpy/io/write.py,sha256=8oQikD6Iyo7Bxy5_1Fl7SaSyZK3o6oBCwC82Raqa9cY,25391
 dspawpy/io/write_json.py,sha256=n3GhdDnFFtW7eY4U5u7czdlpbSWnsGP7WUD5eS1ZmqI,1761
-dspawpy-0.9.5.dist-info/METADATA,sha256=_KH4RY35rniRJ6S953_vEnvTG1TO3ZKllKoI25LQOPE,2823
-dspawpy-0.9.5.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-dspawpy-0.9.5.dist-info/top_level.txt,sha256=esEMNTnd880qHE4wkZVKM3gzqZMuOobS886owAyaUmA,8
-dspawpy-0.9.5.dist-info/RECORD,,
+dspawpy-0.9.6.dist-info/METADATA,sha256=7OP0zcmKL90pnCExlyd-1PC08z9Xd-2c4c-qSZoo9nQ,2904
+dspawpy-0.9.6.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+dspawpy-0.9.6.dist-info/top_level.txt,sha256=esEMNTnd880qHE4wkZVKM3gzqZMuOobS886owAyaUmA,8
+dspawpy-0.9.6.dist-info/RECORD,,
```

