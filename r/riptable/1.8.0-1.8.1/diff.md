# Comparing `tmp/riptable-1.8.0.tar.gz` & `tmp/riptable-1.8.1.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "riptable-1.8.0.tar", last modified: Thu May 18 15:30:25 2023, max compression
+gzip compressed data, was "riptable-1.8.1.tar", last modified: Fri May 26 16:19:06 2023, max compression
```

## Comparing `riptable-1.8.0.tar` & `riptable-1.8.1.tar`

### file list

```diff
@@ -1,263 +1,263 @@
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.596562 riptable-1.8.0/
--rw-rw-rw-   0        0        0      291 2023-05-18 15:17:21.000000 riptable-1.8.0/.editorconfig
--rw-rw-rw-   0        0        0      196 2023-05-18 15:17:21.000000 riptable-1.8.0/.gitattributes
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:23.633970 riptable-1.8.0/.github/
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:23.649595 riptable-1.8.0/.github/workflows/
--rw-rw-rw-   0        0        0     7747 2023-05-18 15:17:21.000000 riptable-1.8.0/.github/workflows/python-package.yml
--rw-rw-rw-   0        0        0     2110 2023-05-18 15:17:21.000000 riptable-1.8.0/.gitignore
--rw-rw-rw-   0        0        0      309 2023-05-18 15:17:21.000000 riptable-1.8.0/BUILDNOTES.txt
--rw-rw-rw-   0        0        0     2634 2023-05-18 15:17:21.000000 riptable-1.8.0/LICENSE
--rw-rw-rw-   0        0        0     3464 2023-05-18 15:17:21.000000 riptable-1.8.0/LICENSES-thirdparty.md
--rw-rw-rw-   0        0        0      196 2023-05-18 15:17:21.000000 riptable-1.8.0/MANIFEST.in
--rw-rw-rw-   0        0        0      659 2023-05-18 15:30:25.580975 riptable-1.8.0/PKG-INFO
--rw-rw-rw-   0        0        0     6083 2023-05-18 15:17:21.000000 riptable-1.8.0/README.md
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:23.649595 riptable-1.8.0/conda_recipe/
--rw-rw-rw-   0        0        0       19 2023-05-18 15:17:21.000000 riptable-1.8.0/conda_recipe/conda_build_config.yaml
--rw-rw-rw-   0        0        0     1804 2023-05-18 15:17:21.000000 riptable-1.8.0/conda_recipe/meta.yaml
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:23.649595 riptable-1.8.0/dev_tools/
--rw-rw-rw-   0        0        0     3944 2023-05-18 15:17:21.000000 riptable-1.8.0/dev_tools/gen_requirements.py
--rw-rw-rw-   0        0        0    25367 2023-05-18 15:17:21.000000 riptable-1.8.0/dev_tools/validate_docstrings.py
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:23.649595 riptable-1.8.0/docs/
--rw-rw-rw-   0        0        0      901 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/CONTRIBUTING.md
--rw-rw-rw-   0        0        0      658 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/Makefile
--rw-rw-rw-   0        0        0     2979 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/THREADING.md
--rwxrwxrwx   0        0        0      799 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/make.bat
--rw-rw-rw-   0        0        0     1085 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/riptable_logo.PNG
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:23.665221 riptable-1.8.0/docs/source/
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:23.665221 riptable-1.8.0/docs/source/_static/
--rw-rw-rw-   0        0        0        0 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/_static/.keep
--rw-rw-rw-   0        0        0    14482 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/benchmarking.rst
--rw-rw-rw-   0        0        0     4478 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/conf.py
--rw-rw-rw-   0        0        0      487 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/index.rst
--rw-rw-rw-   0        0        0       68 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/modules.rst
--rw-rw-rw-   0        0        0     6795 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/riptable.rst
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:24.485772 riptable-1.8.0/docs/source/tutorial/
--rw-rw-rw-   0        0        0    23344 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/RiptableExercises.ipynb
--rw-rw-rw-   0        0        0    95601 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/RiptableSolutions.ipynb
--rw-rw-rw-   0        0        0    35605 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/output_11_0.png
--rw-rw-rw-   0        0        0     5827 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/output_13_0.png
--rw-rw-rw-   0        0        0    60197 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/output_15_0.png
--rw-rw-rw-   0        0        0   148394 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/output_25_0.png
--rw-rw-rw-   0        0        0   100101 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/output_27_0.png
--rw-rw-rw-   0        0        0    16998 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/perf-may-suffer.png
--rw-rw-rw-   0        0        0    45876 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/rt_autocomplete.png
--rw-rw-rw-   0        0        0    24063 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/rt_autocomplete_internal.png
--rw-rw-rw-   0        0        0    12995 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/rt_dataset.svg
--rw-rw-rw-   0        0        0    21979 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/rt_dataset_indices.svg
--rw-rw-rw-   0        0        0     6885 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/rt_fastarray.svg
--rw-rw-rw-   0        0        0    83328 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/split-apply-combine-gray.svg
--rw-rw-rw-   0        0        0      770 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial.rst
--rw-rw-rw-   0        0        0    13974 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_accums.rst
--rw-rw-rw-   0        0        0     3913 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_cat_adv_instantiation.rst
--rw-rw-rw-   0        0        0     2914 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_cat_reduce.rst
--rw-rw-rw-   0        0        0    49655 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_categoricals.rst
--rw-rw-rw-   0        0        0     7129 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_concat.rst
--rw-rw-rw-   0        0        0    35411 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_datasets.rst
--rw-rw-rw-   0        0        0    32677 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_datetimes.rst
--rw-rw-rw-   0        0        0    15663 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_filters.rst
--rw-rw-rw-   0        0        0    13353 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_intro.rst
--rw-rw-rw-   0        0        0    13589 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_io.rst
--rw-rw-rw-   0        0        0    19446 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_merge.rst
--rw-rw-rw-   0        0        0    13841 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_missing_data.rst
--rw-rw-rw-   0        0        0      820 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_numpy_rt.rst
--rw-rw-rw-   0        0        0     2173 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_performance.rst
--rw-rw-rw-   0        0        0     4168 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_reshape.rst
--rw-rw-rw-   0        0        0     5501 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_sample_data.rst
--rw-rw-rw-   0        0        0    12285 2023-05-18 15:17:21.000000 riptable-1.8.0/docs/source/tutorial/tutorial_visualize.rst
--rw-rw-rw-   0        0        0      236 2023-05-18 15:17:21.000000 riptable-1.8.0/environment.yml
--rw-rw-rw-   0        0        0     3372 2023-05-18 15:17:21.000000 riptable-1.8.0/pyproject.toml
--rw-rw-rw-   0        0        0       47 2023-05-18 15:17:21.000000 riptable-1.8.0/requirements.txt
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:24.532605 riptable-1.8.0/riptable/
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:24.548231 riptable-1.8.0/riptable/Utils/
--rw-rw-rw-   0        0        0        2 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/__init__.py
--rw-rw-rw-   0        0        0    25494 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/appdirs.py
--rw-rw-rw-   0        0        0     9278 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/common.py
--rw-rw-rw-   0        0        0     8728 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/conversion_utils.py
--rw-rw-rw-   0        0        0    21765 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/display_options.py
--rw-rw-rw-   0        0        0    13165 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/ipython_utils.py
--rw-rw-rw-   0        0        0     2250 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/pandas_utils.py
--rw-rw-rw-   0        0        0    18073 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/rt_display_nested.py
--rw-rw-rw-   0        0        0    14097 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/rt_display_properties.py
--rw-rw-rw-   0        0        0     3764 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/rt_metadata.py
--rw-rw-rw-   0        0        0    18355 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/rt_testdata.py
--rw-rw-rw-   0        0        0    11396 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/rt_testing.py
--rw-rw-rw-   0        0        0      501 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/teamcity_helper.py
--rw-rw-rw-   0        0        0     3056 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/Utils/terminalsize.py
--rw-rw-rw-   0        0        0     6318 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/__init__.py
--rw-rw-rw-   0        0        0       21 2023-05-18 15:30:23.000000 riptable-1.8.0/riptable/_version.py
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.487160 riptable-1.8.0/riptable/benchmarks/
--rw-rw-rw-   0        0        0     3959 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/__init__.py
--rw-rw-rw-   0        0        0      109 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/__main__.py
--rw-rw-rw-   0        0        0     8894 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/analysis.py
--rw-rw-rw-   0        0        0      725 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/bench_categorical.py
--rw-rw-rw-   0        0        0    11417 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/bench_grouping.py
--rw-rw-rw-   0        0        0    20287 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/bench_merge.py
--rw-rw-rw-   0        0        0    24715 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/bench_numpy.py
--rw-rw-rw-   0        0        0     1079 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/bench_operators.py
--rw-rw-rw-   0        0        0    46367 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/bench_primops.py
--rw-rw-rw-   0        0        0     6962 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/benchmark.py
--rw-rw-rw-   0        0        0    15951 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/main.py
--rw-rw-rw-   0        0        0     9889 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/rand_data.py
--rw-rw-rw-   0        0        0    19557 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/rand_keydata.py
--rw-rw-rw-   0        0        0      914 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/results.py
--rw-rw-rw-   0        0        0    13245 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/benchmarks/runner.py
--rw-rw-rw-   0        0        0     1475 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/config.py
--rw-rw-rw-   0        0        0     2685 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/conftest.py
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.502792 riptable-1.8.0/riptable/hypothesis_tests/
--rw-rw-rw-   0        0        0        9 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/__init__.py
--rw-rw-rw-   0        0        0     2938 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/conftest.py
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.502792 riptable-1.8.0/riptable/hypothesis_tests/strategies/
--rw-rw-rw-   0        0        0        0 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/strategies/__init__.py
--rw-rw-rw-   0        0        0    19383 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/strategies/categorical_strategy.py
--rw-rw-rw-   0        0        0    21811 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/strategies/helper_strategies.py
--rw-rw-rw-   0        0        0    11783 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/test_categorical_property.py
--rw-rw-rw-   0        0        0    86304 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/test_riptide_numpy_equivalency.py
--rw-rw-rw-   0        0        0     3108 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/test_rt_numpy_property.py
--rw-rw-rw-   0        0        0    10986 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/test_sds_property.py
--rw-rw-rw-   0        0        0    12991 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/hypothesis_tests/test_ufunc_unary.py
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.502792 riptable-1.8.0/riptable/numba/
--rw-rw-rw-   0        0        0      224 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/numba/__init__.py
--rw-rw-rw-   0        0        0     2391 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/numba/indexing.py
--rw-rw-rw-   0        0        0     9430 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/numba/invalid_values.py
--rw-rw-rw-   0        0        0    50018 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_accum2.py
--rw-rw-rw-   0        0        0    19871 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_accumtable.py
--rw-rw-rw-   0        0        0     3810 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_algos.py
--rw-rw-rw-   0        0        0    24445 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_bin.py
--rw-rw-rw-   0        0        0   265037 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_categorical.py
--rw-rw-rw-   0        0        0     1078 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_compressedarray.py
--rw-rw-rw-   0        0        0     5824 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_csv.py
--rw-rw-rw-   0        0        0   285318 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_dataset.py
--rw-rw-rw-   0        0        0   274981 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_datetime.py
--rw-rw-rw-   0        0        0   106189 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_display.py
--rw-rw-rw-   0        0        0     2116 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_ema.py
--rw-rw-rw-   0        0        0    32335 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_enum.py
--rw-rw-rw-   0        0        0   243511 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_fastarray.py
--rw-rw-rw-   0        0        0    24106 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_fastarraynumba.py
--rw-rw-rw-   0        0        0    29850 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_groupby.py
--rw-rw-rw-   0        0        0    18239 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_groupbykeys.py
--rw-rw-rw-   0        0        0    27756 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_groupbynumba.py
--rw-rw-rw-   0        0        0   141314 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_groupbyops.py
--rw-rw-rw-   0        0        0   161893 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_grouping.py
--rw-rw-rw-   0        0        0    29767 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_hstack.py
--rw-rw-rw-   0        0        0     3345 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_imatrix.py
--rw-rw-rw-   0        0        0     4797 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_io.py
--rw-rw-rw-   0        0        0    23024 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_itemcontainer.py
--rw-rw-rw-   0        0        0    12139 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_ledger.py
--rw-rw-rw-   0        0        0    24924 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_matplotlib.py
--rw-rw-rw-   0        0        0   208519 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_merge.py
--rw-rw-rw-   0        0        0    92846 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_merge_asof.py
--rw-rw-rw-   0        0        0    11689 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_meta.py
--rw-rw-rw-   0        0        0    32625 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_misc.py
--rw-rw-rw-   0        0        0     1059 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_mlutils.py
--rw-rw-rw-   0        0        0    34329 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_multiset.py
--rw-rw-rw-   0        0        0   195884 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_numpy.py
--rw-rw-rw-   0        0        0    26902 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_pdataset.py
--rw-rw-rw-   0        0        0     1204 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_pgroupby.py
--rw-rw-rw-   0        0        0   135828 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_sds.py
--rw-rw-rw-   0        0        0     4463 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_sharedmemory.py
--rw-rw-rw-   0        0        0     2979 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_sort_cache.py
--rw-rw-rw-   0        0        0     7062 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_stats.py
--rw-rw-rw-   0        0        0    54140 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_str.py
--rw-rw-rw-   0        0        0   196468 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_struct.py
--rw-rw-rw-   0        0        0    17616 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_timers.py
--rw-rw-rw-   0        0        0    42160 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_timezone.py
--rw-rw-rw-   0        0        0    39281 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/rt_utils.py
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.502792 riptable-1.8.0/riptable/test_tooling_integration/
--rw-rw-rw-   0        0        0       71 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/test_tooling_integration/__init__.py
--rw-rw-rw-   0        0        0    11006 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/test_tooling_integration/ipykernel_integration_test.py
--rw-rw-rw-   0        0        0    38590 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/test_tooling_integration/ipython_compatibility_test.py
--rw-rw-rw-   0        0        0    14870 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/test_tooling_integration/ipython_integration_test.py
--rw-rw-rw-   0        0        0      742 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/test_tooling_integration/run.py
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.518434 riptable-1.8.0/riptable/test_tooling_integration/test_display/
--rw-rw-rw-   0        0        0        9 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/test_tooling_integration/test_display/__init__.py
--rw-rw-rw-   0        0        0     1604 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/test_tooling_integration/test_display/test_display.py
--rw-rw-rw-   0        0        0     4668 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/test_tooling_integration/test_display/vnu_checker.py
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.518434 riptable-1.8.0/riptable/testing/
--rw-rw-rw-   0        0        0    14911 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/testing/array_assert.py
--rw-rw-rw-   0        0        0     5788 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/testing/randgen.py
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.580975 riptable-1.8.0/riptable/tests/
--rw-rw-rw-   0        0        0       27 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/__init__.py
--rw-rw-rw-   0        0        0     6648 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/generator_categorical_unit_test.py
--rw-rw-rw-   0        0        0     6460 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/generator_groupby_unit_test.py
--rw-rw-rw-   0        0        0     3937 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/groupby_categorical_unit_test_parameters.py
--rw-rw-rw-   0        0        0     5078 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/groupby_unit_test_parameters.py
--rw-rw-rw-   0        0        0      593 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/run.py
--rw-rw-rw-   0        0        0     1387 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/runall.py
--rw-rw-rw-   0        0        0    27732 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_accum2.py
--rw-rw-rw-   0        0        0     5081 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_accumtable.py
--rw-rw-rw-   0        0        0    20470 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_apply.py
--rw-rw-rw-   0        0        0     8459 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_base_function.py
--rw-rw-rw-   0        0        0     2553 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_bitcount.py
--rw-rw-rw-   0        0        0   140008 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical.py
--rw-rw-rw-   0        0        0    19605 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_autotest_aggregated_functions.py
--rw-rw-rw-   0        0        0     1141 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_base_index.py
--rw-rw-rw-   0        0        0     3312 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_dtype.py
--rw-rw-rw-   0        0        0    16622 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_filter_invalid.py
--rw-rw-rw-   0        0        0     4124 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_functions.py
--rw-rw-rw-   0        0        0    38234 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_groupby.py
--rw-rw-rw-   0        0        0     3430 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_keywords.py
--rw-rw-rw-   0        0        0     3544 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_modify.py
--rw-rw-rw-   0        0        0    11486 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_ordered.py
--rw-rw-rw-   0        0        0     5883 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_setitem.py
--rw-rw-rw-   0        0        0     7248 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_sort_order.py
--rw-rw-rw-   0        0        0    19221 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_categorical_values.py
--rw-rw-rw-   0        0        0     7283 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_conversion_utils.py
--rw-rw-rw-   0        0        0     4894 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_csv.py
--rw-rw-rw-   0        0        0     7141 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_cut.py
--rw-rw-rw-   0        0        0    99865 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_dataset.py
--rw-rw-rw-   0        0        0    20218 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_dataset_slicing.py
--rw-rw-rw-   0        0        0    17510 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_date.py
--rw-rw-rw-   0        0        0   112583 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_datetime.py
--rw-rw-rw-   0        0        0    15278 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_datetime_math.py
--rw-rw-rw-   0        0        0    69259 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_fastarray.py
--rw-rw-rw-   0        0        0     6396 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_fastarray_bn.py
--rw-rw-rw-   0        0        0     3120 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_fastarray_constructor.py
--rw-rw-rw-   0        0        0    25041 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_fastarray_functions.py
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:25.580975 riptable-1.8.0/riptable/tests/test_files/
--rw-rw-rw-   0        0        0      739 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_files/groupby1_ex3.pickle
--rw-rw-rw-   0        0        0     2328 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_files/unicode_ex1.csv
--rw-rw-rw-   0        0        0     2334 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_files/unicode_ex2.csv
--rw-rw-rw-   0        0        0     2474 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_files/unicode_ex3.csv
--rw-rw-rw-   0        0        0     6831 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_flatten.py
--rw-rw-rw-   0        0        0    34515 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_groupby.py
--rw-rw-rw-   0        0        0   161516 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_groupby_autotest_aggregated_functions.py
--rw-rw-rw-   0        0        0     5890 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_groupby_functions.py
--rw-rw-rw-   0        0        0     3443 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_groupby_simple_multikey.py
--rw-rw-rw-   0        0        0    56802 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_groupbyops.py
--rw-rw-rw-   0        0        0    25055 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_grouping.py
--rw-rw-rw-   0        0        0      105 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_hstack.py
--rw-rw-rw-   0        0        0    20277 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_interop_pyarrow.py
--rw-rw-rw-   0        0        0    23502 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_ismember.py
--rw-rw-rw-   0        0        0    12625 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_lexsort.py
--rw-rw-rw-   0        0        0   244975 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_merge.py
--rw-rw-rw-   0        0        0    24228 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_merge_asof.py
--rw-rw-rw-   0        0        0     7247 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_meta.py
--rw-rw-rw-   0        0        0    11644 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_multiset.py
--rw-rw-rw-   0        0        0     1086 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_pandas_utils.py
--rw-rw-rw-   0        0        0    11835 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_pdataset.py
--rw-rw-rw-   0        0        0     3664 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_pgroupby.py
--rw-rw-rw-   0        0        0     5298 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_restore_subclass.py
--rw-rw-rw-   0        0        0     7000 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_riptide_cpp.py
--rw-rw-rw-   0        0        0    21887 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_rtnumpy.py
--rw-rw-rw-   0        0        0     5435 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_rtutils.py
--rw-rw-rw-   0        0        0    76781 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_saveload.py
--rw-rw-rw-   0        0        0     1504 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_scalar.py
--rw-rw-rw-   0        0        0     3528 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_sds.py
--rw-rw-rw-   0        0        0    39970 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_sprint_fastarray.py
--rw-rw-rw-   0        0        0    26324 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_str.py
--rw-rw-rw-   0        0        0    33302 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_struct.py
--rw-rw-rw-   0        0        0      791 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_timewindow.py
--rw-rw-rw-   0        0        0    92837 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_ufunc2.py
--rw-rw-rw-   0        0        0     4828 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_unique.py
--rw-rw-rw-   0        0        0     5654 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/test_utils.py
--rw-rw-rw-   0        0        0     3380 2023-05-18 15:17:21.000000 riptable-1.8.0/riptable/tests/utils.py
-drwxrwxrwx   0        0        0        0 2023-05-18 15:30:24.532605 riptable-1.8.0/riptable.egg-info/
--rw-rw-rw-   0        0        0      659 2023-05-18 15:30:23.000000 riptable-1.8.0/riptable.egg-info/PKG-INFO
--rw-rw-rw-   0        0        0     7978 2023-05-18 15:30:23.000000 riptable-1.8.0/riptable.egg-info/SOURCES.txt
--rw-rw-rw-   0        0        0        1 2023-05-18 15:30:23.000000 riptable-1.8.0/riptable.egg-info/dependency_links.txt
--rw-rw-rw-   0        0        0        2 2023-05-18 15:30:23.000000 riptable-1.8.0/riptable.egg-info/not-zip-safe
--rw-rw-rw-   0        0        0       99 2023-05-18 15:30:23.000000 riptable-1.8.0/riptable.egg-info/requires.txt
--rw-rw-rw-   0        0        0        9 2023-05-18 15:30:23.000000 riptable-1.8.0/riptable.egg-info/top_level.txt
--rw-rw-rw-   0        0        0       51 2023-05-18 15:17:21.000000 riptable-1.8.0/runtest.py
--rw-rw-rw-   0        0        0       42 2023-05-18 15:30:25.596562 riptable-1.8.0/setup.cfg
--rw-rw-rw-   0        0        0     1506 2023-05-18 15:17:21.000000 riptable-1.8.0/setup.py
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.879575 riptable-1.8.1/
+-rw-rw-rw-   0        0        0      291 2023-05-26 16:05:42.000000 riptable-1.8.1/.editorconfig
+-rw-rw-rw-   0        0        0      196 2023-05-26 16:05:42.000000 riptable-1.8.1/.gitattributes
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.613237 riptable-1.8.1/.github/
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.628864 riptable-1.8.1/.github/workflows/
+-rw-rw-rw-   0        0        0     7747 2023-05-26 16:05:42.000000 riptable-1.8.1/.github/workflows/python-package.yml
+-rw-rw-rw-   0        0        0     2110 2023-05-26 16:05:42.000000 riptable-1.8.1/.gitignore
+-rw-rw-rw-   0        0        0      309 2023-05-26 16:05:42.000000 riptable-1.8.1/BUILDNOTES.txt
+-rw-rw-rw-   0        0        0     2634 2023-05-26 16:05:42.000000 riptable-1.8.1/LICENSE
+-rw-rw-rw-   0        0        0     3464 2023-05-26 16:05:42.000000 riptable-1.8.1/LICENSES-thirdparty.md
+-rw-rw-rw-   0        0        0      196 2023-05-26 16:05:42.000000 riptable-1.8.1/MANIFEST.in
+-rw-rw-rw-   0        0        0      659 2023-05-26 16:19:06.879575 riptable-1.8.1/PKG-INFO
+-rw-rw-rw-   0        0        0     6083 2023-05-26 16:05:42.000000 riptable-1.8.1/README.md
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.628864 riptable-1.8.1/conda_recipe/
+-rw-rw-rw-   0        0        0       19 2023-05-26 16:05:42.000000 riptable-1.8.1/conda_recipe/conda_build_config.yaml
+-rw-rw-rw-   0        0        0     1804 2023-05-26 16:05:42.000000 riptable-1.8.1/conda_recipe/meta.yaml
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.644487 riptable-1.8.1/dev_tools/
+-rw-rw-rw-   0        0        0     3965 2023-05-26 16:05:42.000000 riptable-1.8.1/dev_tools/gen_requirements.py
+-rw-rw-rw-   0        0        0    25367 2023-05-26 16:05:42.000000 riptable-1.8.1/dev_tools/validate_docstrings.py
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.644487 riptable-1.8.1/docs/
+-rw-rw-rw-   0        0        0      901 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/CONTRIBUTING.md
+-rw-rw-rw-   0        0        0      658 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/Makefile
+-rw-rw-rw-   0        0        0     2979 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/THREADING.md
+-rwxrwxrwx   0        0        0      799 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/make.bat
+-rw-rw-rw-   0        0        0     1085 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/riptable_logo.PNG
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.644487 riptable-1.8.1/docs/source/
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.644487 riptable-1.8.1/docs/source/_static/
+-rw-rw-rw-   0        0        0        0 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/_static/.keep
+-rw-rw-rw-   0        0        0    14482 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/benchmarking.rst
+-rw-rw-rw-   0        0        0     4478 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/conf.py
+-rw-rw-rw-   0        0        0      487 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/index.rst
+-rw-rw-rw-   0        0        0       68 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/modules.rst
+-rw-rw-rw-   0        0        0     6795 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/riptable.rst
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.675751 riptable-1.8.1/docs/source/tutorial/
+-rw-rw-rw-   0        0        0    23344 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/RiptableExercises.ipynb
+-rw-rw-rw-   0        0        0    95601 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/RiptableSolutions.ipynb
+-rw-rw-rw-   0        0        0    35605 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/output_11_0.png
+-rw-rw-rw-   0        0        0     5827 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/output_13_0.png
+-rw-rw-rw-   0        0        0    60197 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/output_15_0.png
+-rw-rw-rw-   0        0        0   148394 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/output_25_0.png
+-rw-rw-rw-   0        0        0   100101 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/output_27_0.png
+-rw-rw-rw-   0        0        0    16998 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/perf-may-suffer.png
+-rw-rw-rw-   0        0        0    45876 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/rt_autocomplete.png
+-rw-rw-rw-   0        0        0    24063 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/rt_autocomplete_internal.png
+-rw-rw-rw-   0        0        0    12995 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/rt_dataset.svg
+-rw-rw-rw-   0        0        0    21979 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/rt_dataset_indices.svg
+-rw-rw-rw-   0        0        0     6885 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/rt_fastarray.svg
+-rw-rw-rw-   0        0        0    83328 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/split-apply-combine-gray.svg
+-rw-rw-rw-   0        0        0      770 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/tutorial.rst
+-rw-rw-rw-   0        0        0    13974 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/tutorial_accums.rst
+-rw-rw-rw-   0        0        0     3913 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/tutorial_cat_adv_instantiation.rst
+-rw-rw-rw-   0        0        0     2914 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/tutorial_cat_reduce.rst
+-rw-rw-rw-   0        0        0    49655 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/tutorial_categoricals.rst
+-rw-rw-rw-   0        0        0     7129 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/tutorial_concat.rst
+-rw-rw-rw-   0        0        0    35411 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/tutorial_datasets.rst
+-rw-rw-rw-   0        0        0    32677 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/tutorial_datetimes.rst
+-rw-rw-rw-   0        0        0    15663 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/tutorial_filters.rst
+-rw-rw-rw-   0        0        0    13353 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/tutorial_intro.rst
+-rw-rw-rw-   0        0        0    13589 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/tutorial_io.rst
+-rw-rw-rw-   0        0        0    19446 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/tutorial_merge.rst
+-rw-rw-rw-   0        0        0    13841 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/tutorial_missing_data.rst
+-rw-rw-rw-   0        0        0      820 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/tutorial_numpy_rt.rst
+-rw-rw-rw-   0        0        0     2173 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/tutorial_performance.rst
+-rw-rw-rw-   0        0        0     4168 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/tutorial_reshape.rst
+-rw-rw-rw-   0        0        0     5501 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/tutorial_sample_data.rst
+-rw-rw-rw-   0        0        0    12285 2023-05-26 16:05:42.000000 riptable-1.8.1/docs/source/tutorial/tutorial_visualize.rst
+-rw-rw-rw-   0        0        0      236 2023-05-26 16:05:42.000000 riptable-1.8.1/environment.yml
+-rw-rw-rw-   0        0        0     3372 2023-05-26 16:05:42.000000 riptable-1.8.1/pyproject.toml
+-rw-rw-rw-   0        0        0       47 2023-05-26 16:05:42.000000 riptable-1.8.1/requirements.txt
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.738235 riptable-1.8.1/riptable/
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.753861 riptable-1.8.1/riptable/Utils/
+-rw-rw-rw-   0        0        0        2 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/Utils/__init__.py
+-rw-rw-rw-   0        0        0    25494 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/Utils/appdirs.py
+-rw-rw-rw-   0        0        0     9278 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/Utils/common.py
+-rw-rw-rw-   0        0        0     8728 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/Utils/conversion_utils.py
+-rw-rw-rw-   0        0        0    21765 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/Utils/display_options.py
+-rw-rw-rw-   0        0        0    13165 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/Utils/ipython_utils.py
+-rw-rw-rw-   0        0        0     2250 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/Utils/pandas_utils.py
+-rw-rw-rw-   0        0        0    18069 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/Utils/rt_display_nested.py
+-rw-rw-rw-   0        0        0    14095 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/Utils/rt_display_properties.py
+-rw-rw-rw-   0        0        0     3762 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/Utils/rt_metadata.py
+-rw-rw-rw-   0        0        0    18357 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/Utils/rt_testdata.py
+-rw-rw-rw-   0        0        0    11396 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/Utils/rt_testing.py
+-rw-rw-rw-   0        0        0      501 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/Utils/teamcity_helper.py
+-rw-rw-rw-   0        0        0     3056 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/Utils/terminalsize.py
+-rw-rw-rw-   0        0        0     6318 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/__init__.py
+-rw-rw-rw-   0        0        0       21 2023-05-26 16:19:06.000000 riptable-1.8.1/riptable/_version.py
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.769499 riptable-1.8.1/riptable/benchmarks/
+-rw-rw-rw-   0        0        0     3959 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/benchmarks/__init__.py
+-rw-rw-rw-   0        0        0      109 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/benchmarks/__main__.py
+-rw-rw-rw-   0        0        0     8894 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/benchmarks/analysis.py
+-rw-rw-rw-   0        0        0      725 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/benchmarks/bench_categorical.py
+-rw-rw-rw-   0        0        0    11417 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/benchmarks/bench_grouping.py
+-rw-rw-rw-   0        0        0    20287 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/benchmarks/bench_merge.py
+-rw-rw-rw-   0        0        0    24713 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/benchmarks/bench_numpy.py
+-rw-rw-rw-   0        0        0     1079 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/benchmarks/bench_operators.py
+-rw-rw-rw-   0        0        0    46363 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/benchmarks/bench_primops.py
+-rw-rw-rw-   0        0        0     6962 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/benchmarks/benchmark.py
+-rw-rw-rw-   0        0        0    15951 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/benchmarks/main.py
+-rw-rw-rw-   0        0        0     9889 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/benchmarks/rand_data.py
+-rw-rw-rw-   0        0        0    19555 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/benchmarks/rand_keydata.py
+-rw-rw-rw-   0        0        0      914 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/benchmarks/results.py
+-rw-rw-rw-   0        0        0    13247 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/benchmarks/runner.py
+-rw-rw-rw-   0        0        0     1475 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/config.py
+-rw-rw-rw-   0        0        0     2685 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/conftest.py
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.769499 riptable-1.8.1/riptable/hypothesis_tests/
+-rw-rw-rw-   0        0        0        9 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/hypothesis_tests/__init__.py
+-rw-rw-rw-   0        0        0     2938 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/hypothesis_tests/conftest.py
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.785115 riptable-1.8.1/riptable/hypothesis_tests/strategies/
+-rw-rw-rw-   0        0        0        0 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/hypothesis_tests/strategies/__init__.py
+-rw-rw-rw-   0        0        0    19383 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/hypothesis_tests/strategies/categorical_strategy.py
+-rw-rw-rw-   0        0        0    21811 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/hypothesis_tests/strategies/helper_strategies.py
+-rw-rw-rw-   0        0        0    11783 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/hypothesis_tests/test_categorical_property.py
+-rw-rw-rw-   0        0        0    86304 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/hypothesis_tests/test_riptide_numpy_equivalency.py
+-rw-rw-rw-   0        0        0     3108 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/hypothesis_tests/test_rt_numpy_property.py
+-rw-rw-rw-   0        0        0    10986 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/hypothesis_tests/test_sds_property.py
+-rw-rw-rw-   0        0        0    12991 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/hypothesis_tests/test_ufunc_unary.py
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.785115 riptable-1.8.1/riptable/numba/
+-rw-rw-rw-   0        0        0      224 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/numba/__init__.py
+-rw-rw-rw-   0        0        0     2909 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/numba/indexing.py
+-rw-rw-rw-   0        0        0     9430 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/numba/invalid_values.py
+-rw-rw-rw-   0        0        0    50008 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_accum2.py
+-rw-rw-rw-   0        0        0    19869 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_accumtable.py
+-rw-rw-rw-   0        0        0     3812 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_algos.py
+-rw-rw-rw-   0        0        0    24445 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_bin.py
+-rw-rw-rw-   0        0        0   265096 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_categorical.py
+-rw-rw-rw-   0        0        0     1076 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_compressedarray.py
+-rw-rw-rw-   0        0        0     5758 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_csv.py
+-rw-rw-rw-   0        0        0   285318 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_dataset.py
+-rw-rw-rw-   0        0        0   274969 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_datetime.py
+-rw-rw-rw-   0        0        0   106187 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_display.py
+-rw-rw-rw-   0        0        0     2116 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_ema.py
+-rw-rw-rw-   0        0        0    32335 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_enum.py
+-rw-rw-rw-   0        0        0   246482 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_fastarray.py
+-rw-rw-rw-   0        0        0    24106 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_fastarraynumba.py
+-rw-rw-rw-   0        0        0    29848 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_groupby.py
+-rw-rw-rw-   0        0        0    18239 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_groupbykeys.py
+-rw-rw-rw-   0        0        0    27752 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_groupbynumba.py
+-rw-rw-rw-   0        0        0   141314 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_groupbyops.py
+-rw-rw-rw-   0        0        0   161869 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_grouping.py
+-rw-rw-rw-   0        0        0    29765 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_hstack.py
+-rw-rw-rw-   0        0        0     3345 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_imatrix.py
+-rw-rw-rw-   0        0        0     4797 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_io.py
+-rw-rw-rw-   0        0        0    23024 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_itemcontainer.py
+-rw-rw-rw-   0        0        0    12137 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_ledger.py
+-rw-rw-rw-   0        0        0    24920 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_matplotlib.py
+-rw-rw-rw-   0        0        0   208519 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_merge.py
+-rw-rw-rw-   0        0        0    93114 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_merge_asof.py
+-rw-rw-rw-   0        0        0    11689 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_meta.py
+-rw-rw-rw-   0        0        0    32617 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_misc.py
+-rw-rw-rw-   0        0        0     1059 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_mlutils.py
+-rw-rw-rw-   0        0        0    34329 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_multiset.py
+-rw-rw-rw-   0        0        0   195890 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_numpy.py
+-rw-rw-rw-   0        0        0    26902 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_pdataset.py
+-rw-rw-rw-   0        0        0     1204 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_pgroupby.py
+-rw-rw-rw-   0        0        0   135842 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_sds.py
+-rw-rw-rw-   0        0        0     4463 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_sharedmemory.py
+-rw-rw-rw-   0        0        0     2979 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_sort_cache.py
+-rw-rw-rw-   0        0        0     7060 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_stats.py
+-rw-rw-rw-   0        0        0    54138 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_str.py
+-rw-rw-rw-   0        0        0   196456 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_struct.py
+-rw-rw-rw-   0        0        0    17614 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_timers.py
+-rw-rw-rw-   0        0        0    42160 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_timezone.py
+-rw-rw-rw-   0        0        0    39281 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/rt_utils.py
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.785115 riptable-1.8.1/riptable/test_tooling_integration/
+-rw-rw-rw-   0        0        0       71 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/test_tooling_integration/__init__.py
+-rw-rw-rw-   0        0        0    11006 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/test_tooling_integration/ipykernel_integration_test.py
+-rw-rw-rw-   0        0        0    38590 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/test_tooling_integration/ipython_compatibility_test.py
+-rw-rw-rw-   0        0        0    14870 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/test_tooling_integration/ipython_integration_test.py
+-rw-rw-rw-   0        0        0      742 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/test_tooling_integration/run.py
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.785115 riptable-1.8.1/riptable/test_tooling_integration/test_display/
+-rw-rw-rw-   0        0        0        9 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/test_tooling_integration/test_display/__init__.py
+-rw-rw-rw-   0        0        0     1604 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/test_tooling_integration/test_display/test_display.py
+-rw-rw-rw-   0        0        0     4668 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/test_tooling_integration/test_display/vnu_checker.py
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.800736 riptable-1.8.1/riptable/testing/
+-rw-rw-rw-   0        0        0    14911 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/testing/array_assert.py
+-rw-rw-rw-   0        0        0     5788 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/testing/randgen.py
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.863951 riptable-1.8.1/riptable/tests/
+-rw-rw-rw-   0        0        0       27 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/__init__.py
+-rw-rw-rw-   0        0        0     6646 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/generator_categorical_unit_test.py
+-rw-rw-rw-   0        0        0     6456 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/generator_groupby_unit_test.py
+-rw-rw-rw-   0        0        0     3933 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/groupby_categorical_unit_test_parameters.py
+-rw-rw-rw-   0        0        0     5076 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/groupby_unit_test_parameters.py
+-rw-rw-rw-   0        0        0      593 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/run.py
+-rw-rw-rw-   0        0        0     1387 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/runall.py
+-rw-rw-rw-   0        0        0    27730 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_accum2.py
+-rw-rw-rw-   0        0        0     5075 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_accumtable.py
+-rw-rw-rw-   0        0        0    20462 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_apply.py
+-rw-rw-rw-   0        0        0     8459 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_base_function.py
+-rw-rw-rw-   0        0        0     2553 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_bitcount.py
+-rw-rw-rw-   0        0        0   140662 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_categorical.py
+-rw-rw-rw-   0        0        0    19605 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_categorical_autotest_aggregated_functions.py
+-rw-rw-rw-   0        0        0     1141 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_categorical_base_index.py
+-rw-rw-rw-   0        0        0     3312 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_categorical_dtype.py
+-rw-rw-rw-   0        0        0    16622 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_categorical_filter_invalid.py
+-rw-rw-rw-   0        0        0     4124 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_categorical_functions.py
+-rw-rw-rw-   0        0        0    38234 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_categorical_groupby.py
+-rw-rw-rw-   0        0        0     3430 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_categorical_keywords.py
+-rw-rw-rw-   0        0        0     3544 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_categorical_modify.py
+-rw-rw-rw-   0        0        0    11480 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_categorical_ordered.py
+-rw-rw-rw-   0        0        0     5883 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_categorical_setitem.py
+-rw-rw-rw-   0        0        0     7248 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_categorical_sort_order.py
+-rw-rw-rw-   0        0        0    19221 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_categorical_values.py
+-rw-rw-rw-   0        0        0     7283 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_conversion_utils.py
+-rw-rw-rw-   0        0        0     4894 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_csv.py
+-rw-rw-rw-   0        0        0     7141 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_cut.py
+-rw-rw-rw-   0        0        0    99757 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_dataset.py
+-rw-rw-rw-   0        0        0    20216 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_dataset_slicing.py
+-rw-rw-rw-   0        0        0    17508 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_date.py
+-rw-rw-rw-   0        0        0   112577 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_datetime.py
+-rw-rw-rw-   0        0        0    15276 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_datetime_math.py
+-rw-rw-rw-   0        0        0    69259 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_fastarray.py
+-rw-rw-rw-   0        0        0     6396 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_fastarray_bn.py
+-rw-rw-rw-   0        0        0     3120 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_fastarray_constructor.py
+-rw-rw-rw-   0        0        0    25031 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_fastarray_functions.py
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.879575 riptable-1.8.1/riptable/tests/test_files/
+-rw-rw-rw-   0        0        0      739 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_files/groupby1_ex3.pickle
+-rw-rw-rw-   0        0        0     2328 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_files/unicode_ex1.csv
+-rw-rw-rw-   0        0        0     2334 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_files/unicode_ex2.csv
+-rw-rw-rw-   0        0        0     2474 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_files/unicode_ex3.csv
+-rw-rw-rw-   0        0        0     6831 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_flatten.py
+-rw-rw-rw-   0        0        0    34515 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_groupby.py
+-rw-rw-rw-   0        0        0   161516 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_groupby_autotest_aggregated_functions.py
+-rw-rw-rw-   0        0        0     5882 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_groupby_functions.py
+-rw-rw-rw-   0        0        0     3443 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_groupby_simple_multikey.py
+-rw-rw-rw-   0        0        0    56796 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_groupbyops.py
+-rw-rw-rw-   0        0        0    25055 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_grouping.py
+-rw-rw-rw-   0        0        0      105 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_hstack.py
+-rw-rw-rw-   0        0        0    20277 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_interop_pyarrow.py
+-rw-rw-rw-   0        0        0    23500 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_ismember.py
+-rw-rw-rw-   0        0        0    12621 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_lexsort.py
+-rw-rw-rw-   0        0        0   244975 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_merge.py
+-rw-rw-rw-   0        0        0    24228 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_merge_asof.py
+-rw-rw-rw-   0        0        0     7247 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_meta.py
+-rw-rw-rw-   0        0        0    11644 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_multiset.py
+-rw-rw-rw-   0        0        0     1086 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_pandas_utils.py
+-rw-rw-rw-   0        0        0    11833 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_pdataset.py
+-rw-rw-rw-   0        0        0     3664 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_pgroupby.py
+-rw-rw-rw-   0        0        0     5296 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_restore_subclass.py
+-rw-rw-rw-   0        0        0     7000 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_riptide_cpp.py
+-rw-rw-rw-   0        0        0    21887 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_rtnumpy.py
+-rw-rw-rw-   0        0        0     5435 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_rtutils.py
+-rw-rw-rw-   0        0        0    80879 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_saveload.py
+-rw-rw-rw-   0        0        0     1504 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_scalar.py
+-rw-rw-rw-   0        0        0     3528 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_sds.py
+-rw-rw-rw-   0        0        0    40713 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_sprint_fastarray.py
+-rw-rw-rw-   0        0        0    26324 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_str.py
+-rw-rw-rw-   0        0        0    33302 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_struct.py
+-rw-rw-rw-   0        0        0      791 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_timewindow.py
+-rw-rw-rw-   0        0        0    92861 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_ufunc2.py
+-rw-rw-rw-   0        0        0     4828 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_unique.py
+-rw-rw-rw-   0        0        0     5654 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/test_utils.py
+-rw-rw-rw-   0        0        0     3380 2023-05-26 16:05:42.000000 riptable-1.8.1/riptable/tests/utils.py
+drwxrwxrwx   0        0        0        0 2023-05-26 16:19:06.738235 riptable-1.8.1/riptable.egg-info/
+-rw-rw-rw-   0        0        0      659 2023-05-26 16:19:06.000000 riptable-1.8.1/riptable.egg-info/PKG-INFO
+-rw-rw-rw-   0        0        0     7978 2023-05-26 16:19:06.000000 riptable-1.8.1/riptable.egg-info/SOURCES.txt
+-rw-rw-rw-   0        0        0        1 2023-05-26 16:19:06.000000 riptable-1.8.1/riptable.egg-info/dependency_links.txt
+-rw-rw-rw-   0        0        0        2 2023-05-26 16:19:06.000000 riptable-1.8.1/riptable.egg-info/not-zip-safe
+-rw-rw-rw-   0        0        0       99 2023-05-26 16:19:06.000000 riptable-1.8.1/riptable.egg-info/requires.txt
+-rw-rw-rw-   0        0        0        9 2023-05-26 16:19:06.000000 riptable-1.8.1/riptable.egg-info/top_level.txt
+-rw-rw-rw-   0        0        0       51 2023-05-26 16:05:42.000000 riptable-1.8.1/runtest.py
+-rw-rw-rw-   0        0        0       42 2023-05-26 16:19:06.879575 riptable-1.8.1/setup.cfg
+-rw-rw-rw-   0        0        0     1506 2023-05-26 16:05:42.000000 riptable-1.8.1/setup.py
```

### Comparing `riptable-1.8.0/.github/workflows/python-package.yml` & `riptable-1.8.1/.github/workflows/python-package.yml`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/.gitignore` & `riptable-1.8.1/.gitignore`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/LICENSE` & `riptable-1.8.1/LICENSE`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/LICENSES-thirdparty.md` & `riptable-1.8.1/LICENSES-thirdparty.md`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/PKG-INFO` & `riptable-1.8.1/PKG-INFO`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: riptable
-Version: 1.8.0
+Version: 1.8.1
 Summary: Python Package for riptable studies framework
 Home-page: https://github.com/rtosholdings/riptable
 Author: RTOS Holdings
 Author-email: rtosholdings-bot@sig.com
 Classifier: Development Status :: 4 - Beta
 Classifier: Programming Language :: Python :: 3
 Classifier: Programming Language :: Python :: 3.8
```

### Comparing `riptable-1.8.0/README.md` & `riptable-1.8.1/README.md`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/conda_recipe/meta.yaml` & `riptable-1.8.1/conda_recipe/meta.yaml`

 * *Files 0% similar despite different names*

```diff
@@ -15,15 +15,15 @@
     - python {{ python}}
     - setuptools_scm
   run:
     - python
     - riptide_cpp >=1.12.2,<2 # run with any (compatible) version in this range
     - pandas >=1.0,<3.0
     - ansi2html >=1.5.2
-    - numpy >=1.22
+    - numpy >=1.23
     - numba >=0.56.2
     - python-dateutil
 
 test:
   source_files:
     - riptable
   requires:
```

### Comparing `riptable-1.8.0/dev_tools/gen_requirements.py` & `riptable-1.8.1/dev_tools/gen_requirements.py`

 * *Files 2% similar despite different names*

```diff
@@ -16,15 +16,15 @@
 def is_python(major: int, minor: int) -> bool:
     ver = sys.version_info
     return ver.major == major and ver.minor == minor
 
 
 _ABSEIL_REQ = "abseil-cpp==20220623.*"
 _BENCHMARK_REQ = "benchmark>=1.7,<1.8"
-_NUMPY_REQ = "numpy>=1.22"
+_NUMPY_REQ = "numpy>=1.23"
 _TBB_VER = "==2021.6.*"
 _TBB_REQ = "tbb" + _TBB_VER
 _TBB_DEVEL_REQ = "tbb-devel" + _TBB_VER
 _ZSTD_REQ = "zstd>=1.5.2,<1.6"
 
 # Host toolchain requirements to build riptable.
 # This also includes requirements to build riptide_cpp from source, if necessary.
@@ -61,14 +61,19 @@
     "numba>=0.56.2",
     _NUMPY_REQ,
     "pandas>=1.0,<3.0",
     "python-dateutil",
     _TBB_REQ,
 ]
 
+# Black formatting requirements.
+black_reqs = [
+    "black==23.*",
+]
+
 # Flake8 style guide requirements.
 flake8_reqs = [
     "flake8==6.*",
 ]
 
 # Complete test requirements for riptable tests.
 tests_reqs = [
@@ -93,18 +98,14 @@
         "sphinx-autoapi",
         "nbsphinx",
     ]
     + runtime_reqs
     + tests_reqs
 )
 
-# Black formatting requirements.
-black_reqs = [
-    "black==22.*",
-]
 
 # Docstrings validation requirements.
 # Validation requires complete riptable for iteration and evaluating examples.
 docstrings_reqs = (
     [
         "numpydoc",
         "tomli",
@@ -124,14 +125,15 @@
 # Complete developer requirements.
 developer_reqs = (
     [
         "setuptools_scm",
     ]
     + black_reqs
     + conda_reqs
+    + flake8_reqs
     + pydocstyle_reqs
     + pypi_reqs
     + runtime_reqs
     + tests_reqs
     + toolchain_reqs
 )
```

### Comparing `riptable-1.8.0/dev_tools/validate_docstrings.py` & `riptable-1.8.1/dev_tools/validate_docstrings.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/CONTRIBUTING.md` & `riptable-1.8.1/docs/CONTRIBUTING.md`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/Makefile` & `riptable-1.8.1/docs/Makefile`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/THREADING.md` & `riptable-1.8.1/docs/THREADING.md`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/make.bat` & `riptable-1.8.1/docs/make.bat`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/riptable_logo.PNG` & `riptable-1.8.1/docs/riptable_logo.PNG`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/benchmarking.rst` & `riptable-1.8.1/docs/source/benchmarking.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/conf.py` & `riptable-1.8.1/docs/source/conf.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/riptable.rst` & `riptable-1.8.1/docs/source/riptable.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/RiptableExercises.ipynb` & `riptable-1.8.1/docs/source/tutorial/RiptableExercises.ipynb`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/RiptableSolutions.ipynb` & `riptable-1.8.1/docs/source/tutorial/RiptableSolutions.ipynb`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/output_11_0.png` & `riptable-1.8.1/docs/source/tutorial/output_11_0.png`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/output_13_0.png` & `riptable-1.8.1/docs/source/tutorial/output_13_0.png`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/output_15_0.png` & `riptable-1.8.1/docs/source/tutorial/output_15_0.png`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/output_25_0.png` & `riptable-1.8.1/docs/source/tutorial/output_25_0.png`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/output_27_0.png` & `riptable-1.8.1/docs/source/tutorial/output_27_0.png`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/perf-may-suffer.png` & `riptable-1.8.1/docs/source/tutorial/perf-may-suffer.png`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/rt_autocomplete.png` & `riptable-1.8.1/docs/source/tutorial/rt_autocomplete.png`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/rt_autocomplete_internal.png` & `riptable-1.8.1/docs/source/tutorial/rt_autocomplete_internal.png`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/rt_dataset.svg` & `riptable-1.8.1/docs/source/tutorial/rt_dataset.svg`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/rt_dataset_indices.svg` & `riptable-1.8.1/docs/source/tutorial/rt_dataset_indices.svg`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/rt_fastarray.svg` & `riptable-1.8.1/docs/source/tutorial/rt_fastarray.svg`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/split-apply-combine-gray.svg` & `riptable-1.8.1/docs/source/tutorial/split-apply-combine-gray.svg`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/tutorial.rst` & `riptable-1.8.1/docs/source/tutorial/tutorial.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/tutorial_accums.rst` & `riptable-1.8.1/docs/source/tutorial/tutorial_accums.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/tutorial_cat_adv_instantiation.rst` & `riptable-1.8.1/docs/source/tutorial/tutorial_cat_adv_instantiation.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/tutorial_cat_reduce.rst` & `riptable-1.8.1/docs/source/tutorial/tutorial_cat_reduce.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/tutorial_categoricals.rst` & `riptable-1.8.1/docs/source/tutorial/tutorial_categoricals.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/tutorial_concat.rst` & `riptable-1.8.1/docs/source/tutorial/tutorial_concat.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/tutorial_datasets.rst` & `riptable-1.8.1/docs/source/tutorial/tutorial_datasets.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/tutorial_datetimes.rst` & `riptable-1.8.1/docs/source/tutorial/tutorial_datetimes.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/tutorial_filters.rst` & `riptable-1.8.1/docs/source/tutorial/tutorial_filters.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/tutorial_intro.rst` & `riptable-1.8.1/docs/source/tutorial/tutorial_intro.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/tutorial_io.rst` & `riptable-1.8.1/docs/source/tutorial/tutorial_io.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/tutorial_merge.rst` & `riptable-1.8.1/docs/source/tutorial/tutorial_merge.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/tutorial_missing_data.rst` & `riptable-1.8.1/docs/source/tutorial/tutorial_missing_data.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/tutorial_numpy_rt.rst` & `riptable-1.8.1/docs/source/tutorial/tutorial_numpy_rt.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/tutorial_performance.rst` & `riptable-1.8.1/docs/source/tutorial/tutorial_performance.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/tutorial_reshape.rst` & `riptable-1.8.1/docs/source/tutorial/tutorial_reshape.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/tutorial_sample_data.rst` & `riptable-1.8.1/docs/source/tutorial/tutorial_sample_data.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/docs/source/tutorial/tutorial_visualize.rst` & `riptable-1.8.1/docs/source/tutorial/tutorial_visualize.rst`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/pyproject.toml` & `riptable-1.8.1/pyproject.toml`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/Utils/appdirs.py` & `riptable-1.8.1/riptable/Utils/appdirs.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/Utils/common.py` & `riptable-1.8.1/riptable/Utils/common.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/Utils/conversion_utils.py` & `riptable-1.8.1/riptable/Utils/conversion_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/Utils/display_options.py` & `riptable-1.8.1/riptable/Utils/display_options.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/Utils/ipython_utils.py` & `riptable-1.8.1/riptable/Utils/ipython_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/Utils/pandas_utils.py` & `riptable-1.8.1/riptable/Utils/pandas_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/Utils/rt_display_nested.py` & `riptable-1.8.1/riptable/Utils/rt_display_nested.py`

 * *Files 0% similar despite different names*

```diff
@@ -151,15 +151,14 @@
         """Render the tree into string suitable for console output.
 
         :param tree: A tree."""
         return "\n".join(self.render(self.traverse.get_root(tree)))
 
 
 class DisplayNested:
-
     inline_svg = {
         "array": '<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 50 50" enable-background="new 0 0 50 50"><path d="M 7 2 L 7 3 L 7 47 L 7 48 L 8 48 L 42 48 L 43 48 L 43 47 L 43 15 L 43 14.59375 L 42.71875 14.28125 L 30.71875 2.28125 L 30.40625 2 L 30 2 L 8 2 L 7 2 z M 9 4 L 29 4 L 29 15 L 29 16 L 30 16 L 41 16 L 41 46 L 9 46 L 9 4 z M 31 5.4375 L 39.5625 14 L 31 14 L 31 5.4375 z"/></svg>',
         "object": '<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="2 2 28 28"><path d="M 16 4 C 9.3844276 4 4 9.3844276 4 16 C 4 22.615572 9.3844276 28 16 28 C 22.615572 28 28 22.615572 28 16 C 28 9.3844276 22.615572 4 16 4 z M 16 6 C 21.534692 6 26 10.465308 26 16 C 26 21.534692 21.534692 26 16 26 C 10.465308 26 6 21.534692 6 16 C 6 10.465308 10.465308 6 16 6 z M 22 16 C 22 19.325562 19.325562 22 16 22 L 16 24 C 20.406438 24 24 20.406438 24 16 L 22 16 z"/></svg>',
         "container": '<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 50 50"><path d="M 25 0 C 19.3545 0 14.230156 1.0122381 10.4375 2.71875 C 8.5411719 3.5720059 6.9801672 4.6031002 5.84375 5.8125 C 4.7073328 7.0218998 4 8.4567299 4 10 L 4 19.8125 A 1.0001 1.0001 0 0 0 4 20 L 4 29.8125 A 1.0001 1.0001 0 0 0 4 30 L 4 39 C 4 40.54327 4.7073328 41.9781 5.84375 43.1875 C 6.9801672 44.3969 8.5411719 45.427994 10.4375 46.28125 C 14.230156 47.987762 19.3545 49 25 49 C 30.6455 49 35.769844 47.987762 39.5625 46.28125 C 41.458828 45.427994 43.019833 44.3969 44.15625 43.1875 C 45.292667 41.9781 46 40.54327 46 39 L 46 20 L 46 19.90625 L 46 10 C 46 8.4567299 45.292667 7.0218998 44.15625 5.8125 C 43.019833 4.6031002 41.458828 3.5720059 39.5625 2.71875 C 35.769844 1.0122381 30.6455 0 25 0 z M 25 2 C 30.4025 2 35.273406 3.0122619 38.71875 4.5625 C 40.441422 5.3376191 41.800167 6.2431811 42.6875 7.1875 C 43.574833 8.1318189 44 9.0567701 44 10 C 44 10.94323 43.574833 11.868181 42.6875 12.8125 C 41.800167 13.756819 40.441422 14.662381 38.71875 15.4375 C 35.273406 16.987738 30.4025 18 25 18 C 19.5975 18 14.726594 16.987738 11.28125 15.4375 C 9.5585781 14.662381 8.1998328 13.756819 7.3125 12.8125 C 6.4251672 11.868181 6 10.94323 6 10 C 6 9.0567701 6.4251672 8.1318189 7.3125 7.1875 C 8.1998328 6.2431811 9.5585781 5.3376191 11.28125 4.5625 C 14.726594 3.0122619 19.5975 2 25 2 z M 6 14.34375 C 7.1223185 15.486391 8.6228131 16.464729 10.4375 17.28125 C 14.230156 18.987762 19.3545 20 25 20 C 30.6455 20 35.769844 18.987762 39.5625 17.28125 C 41.377187 16.464729 42.877682 15.486391 44 14.34375 L 44 19.84375 A 1.0001 1.0001 0 0 0 44 19.9375 L 44 20 C 44 20.94323 43.574833 21.868181 42.6875 22.8125 C 41.800167 23.756819 40.441422 24.662381 38.71875 25.4375 C 35.273406 26.987738 30.4025 28 25 28 C 19.5975 28 14.726594 26.987738 11.28125 25.4375 C 9.5585781 24.662381 8.1998328 23.756819 7.3125 22.8125 C 6.4251672 21.868181 6 20.94323 6 20 A 1.0001 1.0001 0 0 0 6 19.8125 L 6 14.34375 z M 6 24.34375 C 7.1223185 25.486391 8.6228131 26.464729 10.4375 27.28125 C 14.230156 28.987762 19.3545 30 25 30 C 30.6455 30 35.769844 28.987762 39.5625 27.28125 C 41.377187 26.464729 42.877682 25.486391 44 24.34375 L 44 29.84375 A 1.0001 1.0001 0 0 0 44 29.9375 L 44 30 C 44 30.94323 43.574833 31.868181 42.6875 32.8125 C 41.800167 33.756819 40.441422 34.662381 38.71875 35.4375 C 35.273406 36.987738 30.4025 38 25 38 C 19.5975 38 14.726594 36.987738 11.28125 35.4375 C 9.5585781 34.662381 8.1998328 33.756819 7.3125 32.8125 C 6.4251672 31.868181 6 30.94323 6 30 A 1.0001 1.0001 0 0 0 6 29.8125 L 6 24.34375 z M 6 34.34375 C 7.1223185 35.486391 8.6228131 36.464729 10.4375 37.28125 C 14.230156 38.987762 19.3545 40 25 40 C 30.6455 40 35.769844 38.987762 39.5625 37.28125 C 41.377187 36.464729 42.877682 35.486391 44 34.34375 L 44 39 C 44 39.94323 43.574833 40.868181 42.6875 41.8125 C 41.800167 42.756819 40.441422 43.662381 38.71875 44.4375 C 35.273406 45.987738 30.4025 47 25 47 C 19.5975 47 14.726594 45.987738 11.28125 44.4375 C 9.5585781 43.662381 8.1998328 42.756819 7.3125 41.8125 C 6.4251672 40.868181 6 39.94323 6 39 L 6 34.34375 z"/></svg>',
     }
 
     def __init__(self):
@@ -188,15 +187,14 @@
 
         if not len(data):
             return
 
         maxlen = len(max(list(data.keys()), key=len))
 
         for k, v in data.items():
-
             info_indent = " " * (maxlen - len(k) + 1)
 
             if hasattr(v, "items"):
                 name = f"{k}" if info else f"{k} ({type(v).__name__})"
                 self._map_asciitree(v, structure, name=name, info=info)
 
             else:
```

### Comparing `riptable-1.8.0/riptable/Utils/rt_display_properties.py` & `riptable-1.8.1/riptable/Utils/rt_display_properties.py`

 * *Files 0% similar despite different names*

```diff
@@ -36,15 +36,14 @@
         decoration=None,
         convert=None,
         convert_format=None,
         format_string=None,
         timezone_str=None,
         maxwidth=None,
     ):
-
         self.length = length
         self.justification = justification
         self.invalid = invalid
         self.can_have_spaces = can_have_spaces
         self.html = html
         self.color = color
         self.decoration = decoration
```

### Comparing `riptable-1.8.0/riptable/Utils/rt_metadata.py` & `riptable-1.8.1/riptable/Utils/rt_metadata.py`

 * *Files 0% similar despite different names*

```diff
@@ -57,15 +57,14 @@
     Returns a dictionary of meta data defaults.
     """
     id = getattr(TypeId, cls.__name__)
     return version_dict[vnum][id]
 
 
 class MetaData:
-
     default_dict = {"name": "", "typeid": TypeId.Default}
 
     def __init__(self, metadict={}):
         self._dict = self.default_dict.copy()
 
         if isinstance(metadict, MetaData):
             self._dict = metadict._dict
```

### Comparing `riptable-1.8.0/riptable/Utils/rt_testdata.py` & `riptable-1.8.1/riptable/Utils/rt_testdata.py`

 * *Files 0% similar despite different names*

```diff
@@ -34,14 +34,15 @@
     _bytes_fa = None
     _unicode_fa = None
     _flt_fa = None
     _flt_fa2 = None
     _str_map = None
 
     _rand_bool = None
+
     # ------------------DATASETS-------------------------------------------
     # ---------------------------------------------------------------------
     @property
     def dataset_numeric(cls):
         # possibly reset dataset with new length
         if cls._dataset_numeric is not None and cls._dataset_numeric._nrows != cls.length:
             cls._dataset_numeric = None
```

### Comparing `riptable-1.8.0/riptable/Utils/rt_testing.py` & `riptable-1.8.1/riptable/Utils/rt_testing.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/Utils/terminalsize.py` & `riptable-1.8.1/riptable/Utils/terminalsize.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/__init__.py` & `riptable-1.8.1/riptable/__init__.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/benchmarks/__init__.py` & `riptable-1.8.1/riptable/benchmarks/__init__.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/benchmarks/analysis.py` & `riptable-1.8.1/riptable/benchmarks/analysis.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/benchmarks/bench_categorical.py` & `riptable-1.8.1/riptable/benchmarks/bench_categorical.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/benchmarks/bench_grouping.py` & `riptable-1.8.1/riptable/benchmarks/bench_grouping.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/benchmarks/bench_merge.py` & `riptable-1.8.1/riptable/benchmarks/bench_merge.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/benchmarks/bench_numpy.py` & `riptable-1.8.1/riptable/benchmarks/bench_numpy.py`

 * *Files 0% similar despite different names*

```diff
@@ -169,15 +169,14 @@
     asizes=DEFAULT_ARRAY_SIZES,
     threads=DEFAULT_THREADS,
     loops=10,
     ratio=True,
     recycle=True,
     scalar=False,
 ):
-
     return benchmark(
         funcs=funcs,
         dtypes=dtypes,
         asizes=asizes,
         threads=threads,
         loops=loops,
         ratio=ratio,
```

### Comparing `riptable-1.8.0/riptable/benchmarks/bench_operators.py` & `riptable-1.8.1/riptable/benchmarks/bench_operators.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/benchmarks/bench_primops.py` & `riptable-1.8.1/riptable/benchmarks/bench_primops.py`

 * *Files 0% similar despite different names*

```diff
@@ -1076,15 +1076,14 @@
             # Allocate an array to hold the raw timing data.
             # TODO: Change to use TimeSpan?
             timing_data = empty(iters, dtype=np.int64)
             for is_warmup in (True, False):
                 loop_count = warmup_iters if is_warmup else iters
 
                 for i in range(loop_count):
-
                     start_time_ns = timestamper()
 
                     # invocation of actual actual function
                     op(arr1, arr2)
 
                     ### Store the timing results (if this was a real invocation).
                     call_nanos = timestamper() - start_time_ns
@@ -1179,15 +1178,14 @@
             # TODO: Change to use TimeSpan?
             timing_data = empty(iters, dtype=np.int64)
 
             for is_warmup in (True, False):
                 loop_count = warmup_iters if is_warmup else iters
 
                 for i in range(loop_count):
-
                     start_time_ns = timestamper()
 
                     # invocation of actual actual function
                     op(arr1, arr2)
 
                     ### Store the timing results (if this was a real invocation).
                     call_nanos = timestamper() - start_time_ns
```

### Comparing `riptable-1.8.0/riptable/benchmarks/benchmark.py` & `riptable-1.8.1/riptable/benchmarks/benchmark.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/benchmarks/main.py` & `riptable-1.8.1/riptable/benchmarks/main.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/benchmarks/rand_data.py` & `riptable-1.8.1/riptable/benchmarks/rand_data.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/benchmarks/rand_keydata.py` & `riptable-1.8.1/riptable/benchmarks/rand_keydata.py`

 * *Files 0% similar despite different names*

```diff
@@ -464,15 +464,14 @@
     def c_error(self, arr):
         return abs(self.c_metric(arr) - self.c)
 
     def d_error(self, arr):
         return abs(self.d_metric(arr) - self.d)
 
     def _evaluate(self, x, out, *args, **kwargs):
-
         # objectives
         se = np.apply_along_axis(self.s_error, 1, x)
         ce = np.apply_along_axis(self.c_error, 1, x)
         de = np.apply_along_axis(self.d_error, 1, x)
 
         # constraints
         g1 = self.lo - x
```

### Comparing `riptable-1.8.0/riptable/benchmarks/results.py` & `riptable-1.8.1/riptable/benchmarks/results.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/benchmarks/runner.py` & `riptable-1.8.1/riptable/benchmarks/runner.py`

 * *Files 0% similar despite different names*

```diff
@@ -43,14 +43,15 @@
 
 implementation_colname: str = "impl"
 """
 Name to use in benchmark _comparison_ Datasets for the column holding the
 implementation name.
 """
 
+
 # TODO move this into a settings library file.
 def set_thread(thread_count):
     # Consdier setting wake up threads to the number of worker threads, i.e.
     # thread_count minus the main thread.
     rc.SetThreadWakeUp(thread_count)
```

### Comparing `riptable-1.8.0/riptable/config.py` & `riptable-1.8.1/riptable/config.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/conftest.py` & `riptable-1.8.1/riptable/conftest.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/hypothesis_tests/conftest.py` & `riptable-1.8.1/riptable/hypothesis_tests/conftest.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/hypothesis_tests/strategies/categorical_strategy.py` & `riptable-1.8.1/riptable/hypothesis_tests/strategies/categorical_strategy.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/hypothesis_tests/strategies/helper_strategies.py` & `riptable-1.8.1/riptable/hypothesis_tests/strategies/helper_strategies.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/hypothesis_tests/test_categorical_property.py` & `riptable-1.8.1/riptable/hypothesis_tests/test_categorical_property.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/hypothesis_tests/test_riptide_numpy_equivalency.py` & `riptable-1.8.1/riptable/hypothesis_tests/test_riptide_numpy_equivalency.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/hypothesis_tests/test_rt_numpy_property.py` & `riptable-1.8.1/riptable/hypothesis_tests/test_rt_numpy_property.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/hypothesis_tests/test_sds_property.py` & `riptable-1.8.1/riptable/hypothesis_tests/test_sds_property.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/hypothesis_tests/test_ufunc_unary.py` & `riptable-1.8.1/riptable/hypothesis_tests/test_ufunc_unary.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/numba/indexing.py` & `riptable-1.8.1/riptable/numba/indexing.py`

 * *Files 14% similar despite different names*

```diff
@@ -6,15 +6,14 @@
 from typing import Optional
 
 import numpy as np
 import numpy.typing as npt
 import numba as nb
 
 
-@nb.generated_jit(nopython=True)
 def deref_idx(deref: Optional[np.ndarray], idx: np.integer):
     """
     A numba function for turning an 'indirect' index into a true index if a deference idx exists.
 
     This main use of this function is to seamlessly deal with the existence/non-existence
     of ``iGroup`` (from a `Grouping` object).
 
@@ -32,21 +31,33 @@
         the index to grab (or to be returned if deref is None).
 
     Returns
     -------
     int
         `idx` if `deref` is ``None``; otherwise ``deref[idx]``.
     """
+    raise RuntimeError("Unexpected call")
+
+
+@nb.extending.overload(deref_idx, nopython=True)
+def _deref_idx(deref: Optional[np.ndarray], idx: np.integer):
     if isinstance(deref, nb.types.NoneType):
-        return lambda deref, idx: idx
+
+        def fn(deref: Optional[np.ndarray], idx: np.integer):
+            return idx
+
+        return fn
     else:
-        return lambda deref, idx: deref[idx]
+
+        def fn(deref: Optional[np.ndarray], idx: np.integer):
+            return deref[idx]
+
+        return fn
 
 
-@nb.generated_jit(nopython=True)
 def scalar_or_lookup(val: np.ndarray, idx: np.integer):
     """
     Allows a numba-based function to accept either a scalar value or an array for some parameter.
     Scalars are passed through, but if an array is provided, the array element at the specified index is returned.
 
     For example, in a numba-based function operating over grouped data (with a `Grouping`),
     the function could accept a scalar parameter; by using `scalar_or_lookup`, the code can
@@ -58,11 +69,24 @@
     val
     idx
 
     Returns
     -------
     retval
     """
+    raise RuntimeError("Unexpected call")
+
+
+@nb.extending.overload(scalar_or_lookup, nopython=True)
+def _scalar_or_lookup(val: np.ndarray, idx: np.integer):
     if isinstance(val, nb.types.Array):
-        return lambda val, idx: val[idx]
+
+        def fn(val: np.ndarray, idx: np.integer):
+            return val[idx]
+
+        return fn
     else:
-        return lambda val, idx: val
+
+        def fn(val: np.ndarray, idx: np.integer):
+            return val
+
+        return fn
```

### Comparing `riptable-1.8.0/riptable/numba/invalid_values.py` & `riptable-1.8.1/riptable/numba/invalid_values.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_accum2.py` & `riptable-1.8.1/riptable/rt_accum2.py`

 * *Files 2% similar despite different names*

```diff
@@ -439,15 +439,14 @@
 
         If there are badrows, then filter_rows is set to the row indexes that are bad
         If there are badcols, then filter_cols is set to the col indexes that are bad
         filter_rows is a fancy index or none
         """
 
         if callable(func):
-
             row_count, col_count = imatrix.shape
 
             # horizontal add
             # print("im0", imatrix.nansum())
             totalsY = func(imatrix, axis=1)  # [showfilter_base:]
 
             # vertical func operation
@@ -697,18 +696,16 @@
         # get a negative boolean filter
         newfilterX = cls._calc_badslots(cat_cols, badcols, filter, False)
         newfilterY = cls._calc_badslots(cat_rows, badrows, filter, False)
 
         newfilter = None
         # first check for any row and col filters
         if badrows is not None or badcols is not None:
-
             # the common filter is already merged into the row or col filter
             if badrows is not None and badcols is not None:
-
                 # both col and row filter are in use so combine the filters
                 newfilter = newfilterX & newfilterY
             else:
                 if badrows is not None:
                     newfilter = newfilterY
                 else:
                     newfilter = newfilterX
@@ -1073,15 +1070,14 @@
             # multiple inputs, so use multiset
             # get the row and colkeys
             gbkeys = self._get_gbkeys()
             colkeys = self._cat_cols.grouping_dict
 
             ms = TypeRegister.Multiset({})
             for i, v in enumerate(accum_dict.keys()):
-
                 # Accum2 uses two categoricals for rows and cols
                 # dont bother to calculate the row or col keys
                 # the row keys are the gbkeys
                 if v not in gbkeys and v not in colkeys:
                     result = self._stack_dataset(
                         accum_list[i], origdict[v], funcNum, func_param=func_param, tups=tups, **kwargs
                     )
@@ -1095,15 +1091,14 @@
             print("No data was calculated")
             return None
 
     # ---------------------------------------------------------------
     def apply_reduce(
         self, userfunc, *args, dataset=None, label_keys=None, func_param=None, dtype=None, transform=False, **kwargs
     ):
-
         """
         Accum2:apply_reduce calls Grouping:apply_helper
 
         Parameters
         ----------
         userfunc : callable
             A callable that takes a contiguous array as its first argument, and returns a scalar
```

### Comparing `riptable-1.8.0/riptable/rt_accumtable.py` & `riptable-1.8.1/riptable/rt_accumtable.py`

 * *Files 0% similar despite different names*

```diff
@@ -494,15 +494,15 @@
     if not isinstance(filt_list, list):
         filt_list = [filt_list for _ in val_list]
 
     # Compute accum
     temp_cat = Categorical(full(cat.shape[0], 1, dtype=np.int8), ["NotGrouped"])  # This was playa.utils.onescol
     accum = Accum2(cat, temp_cat)
 
-    for (val, name, filt, func) in zip(val_list, name_list, filt_list, func_list):
+    for val, name, filt, func in zip(val_list, name_list, filt_list, func_list):
         func_name = func
         func = getattr(accum, func_name)
         if isinstance(val, list):  # Special cases
             if isinstance(val[1], str):  # Named cases
                 if val[1] in "pP":  # accum_ratiop type
                     curr_data = accum_ratiop(cat, temp_cat, val[0], filt, func_name, "T", False, False)
                 else:
```

### Comparing `riptable-1.8.0/riptable/rt_algos.py` & `riptable-1.8.1/riptable/rt_algos.py`

 * *Files 0% similar despite different names*

```diff
@@ -31,14 +31,15 @@
 
     Returns
     -------
     Tuple containing two items:
     - list of fixed indices, or array of fixed contiguous indices.
     - stacked unique values
     """
+
     # ------------------------------------------------------------
     def index_fixups(oldcats, newcats):
         # funnel for ismember in merge_index
         fixups = [ismember(oc, newcats, base_index=1)[1] for oc in oldcats]
         fixups = [hstack([TypeRegister.FastArray([0]), f]) for f in fixups]
         return fixups
```

### Comparing `riptable-1.8.0/riptable/rt_bin.py` & `riptable-1.8.1/riptable/rt_bin.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_categorical.py` & `riptable-1.8.1/riptable/rt_categorical.py`

 * *Files 0% similar despite different names*

```diff
@@ -3788,18 +3788,21 @@
         FastArray([ True,  True, False, False, False])
 
         See Also
         --------
         pandas.Categorical.isin()
         """
         x = values
+        if isinstance(x, set):
+            x = list(x)
 
         if isinstance(x, Categorical):
             if x.ismultikey:
                 return ismember(self, x)[0]
+
         # handle enum + non-categorical with grouping
         elif self.isenum:
             return self.grouping.isin(x)
 
         elif isinstance(values, (bool, np.bool_, bytes, str, int, np.integer, float, np.floating)):
             x = np.array([x])
         # numpy will find the common dtype (strings will always win)
```

### Comparing `riptable-1.8.0/riptable/rt_compressedarray.py` & `riptable-1.8.1/riptable/rt_compressedarray.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,14 +1,13 @@
 import numpy as np
 
 from .rt_fastarray import FastArray
 
 
 class CompressedArray(FastArray):
-
     allowed_funcs = ["decompress", "view"]
 
     def __new__(cls, arr):
         if isinstance(arr, np.ndarray):
             arr.setflags(write=False)
         else:
             raise TypeError(f"Compressed array must be constructed from numpy array, not {type(arr)}")
```

### Comparing `riptable-1.8.0/riptable/rt_csv.py` & `riptable-1.8.1/riptable/rt_csv.py`

 * *Files 1% similar despite different names*

```diff
@@ -57,16 +57,14 @@
     (version=1) 5.605156s (default if pandas not available)
     (version=2) 8.370234s
     (version=3) 6.994191s
     (version=4) 3.642205s (only available if pandas is available, default if so)
     """
     try:
         import pandas as pd
-
-        from .Utils.pandas_utils import dataset_from_pandas_df
     except ImportError:
         pd = None
     if converters is None:
         converters = dict()
     if version is None:
         version = 4 if pd is not None else 1
     if pd is None and version == 4:
```

### Comparing `riptable-1.8.0/riptable/rt_dataset.py` & `riptable-1.8.1/riptable/rt_dataset.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_datetime.py` & `riptable-1.8.1/riptable/rt_datetime.py`

 * *Files 0% similar despite different names*

```diff
@@ -489,15 +489,14 @@
     DateTimeNano([20180201 01:23:45.000000000, 20180207 12:34:56.000000000, 20180512 23:22:21.000000000])
 
     """
     nano_times = rc.TimeStringToNanos(timestring)
     if date is None:
         result = TimeSpan(nano_times)
     else:
-
         if isinstance(date, (str, bytes)):
             date = TypeRegister.FastArray([date])
 
         date = rc.DateStringToNanos(date)
         result = date + nano_times
         result = DateTimeNano(result, from_tz=from_tz, to_tz=to_tz)
 
@@ -1271,18 +1270,16 @@
 
     def __new__(cls, arr, from_matlab=False, format=None):
         instance = None
         if isinstance(arr, list) or np.isscalar(arr):
             arr = FastArray(arr)
 
         if isinstance(arr, np.ndarray):
-
             # if this the same class, do nothing
             if not isinstance(arr, Date):
-
                 # sometimes matlab dates are categoricals
                 if isinstance(arr, TypeRegister.Categorical):
                     try:
                         cats = arr.category_array
                         # flip to correct integer before re-expanding
                         if cats.dtype.char in ("U", "S"):
                             cats = cls._convert_datestring(cats).astype(np.int32, copy=False)
@@ -4313,15 +4310,14 @@
         # create a timezone object to handle daylight savings, any necessary conversion, etc.
         _timezone = TypeRegister.TimeZone(from_tz=from_tz, to_tz=to_tz)
 
         if from_matlab:
             instance = cls._convert_matlab_days(arr, _timezone)
         else:
             if start_date is not None:
-
                 if not isinstance(arr, np.ndarray):
                     arr = FastArray(arr)
                 # if array was strings, interpret as timespan
                 # numeric arrays will also be interpretted as timespan
                 if arr.dtype.char in "US":
                     arr = TimeSpan(arr)
 
@@ -4340,15 +4336,14 @@
                         f"Start date must be string in format YYYYMMDD or Date object. Got type {type(start_date)}"
                     )
 
             instance = None
             if isinstance(arr, list) or np.isscalar(arr):
                 arr = FastArray(arr)
             if isinstance(arr, np.ndarray):
-
                 if arr.dtype.char == "O":
                     # possibly python datetime object
                     if isinstance(arr[0], dt):
                         # warn if it will take more than 1 second
                         if len(arr) > 750_000:
                             warnings.warn(f"Python is converting {len(arr)} datetime objects. Performance may suffer.")
                         arr = np.array([t.isoformat() for t in arr], dtype="datetime64[ns]")
@@ -6226,15 +6221,14 @@
             values = values * mult
 
         return values
 
     # ------------------------------------------------------------
     @staticmethod
     def display_item(nanosecs, itemformat=None):
-
         if itemformat is not None:
             length = itemformat.length
         else:
             length = DisplayLength.Short
 
         if length == DisplayLength.Medium:
             return TimeSpan.display_item_unit(nanosecs)
```

### Comparing `riptable-1.8.0/riptable/rt_display.py` & `riptable-1.8.1/riptable/rt_display.py`

 * *Files 0% similar despite different names*

```diff
@@ -265,15 +265,14 @@
         row_numbers=None,
         right_cols=None,
         badrows=None,
         badcols=None,
         styles=None,
         callback=None,
     ):
-
         """
         Step 1: save all parameters into self namespace, as build_result_table is broken down into several functions.
         Step 2: if set_view has been called, only display the specified columns. if sort_values has been called, move those columns to the front.
         Step 3: build a row mask. if the table is too large to display, pull the first and last rows for display. if a sorted index is present, apply it.
         Step 4: measure the table.
         groupby key columns will always be included. fit as many columns as possible into the console. if the display is for html, defaults have been set to a hard-coded console width. other console width is detected upon each display. if there are too many columns to display, a column break will be set.
         Step 5: build the table.
@@ -1320,14 +1319,15 @@
         If the user changes their self.options.COL_ALL to True, all columns will be displayed on the same line.
         **Note:** this will break console display for large tables and should only be used in jupyter lab now.
 
         **in progress**
         If the user requested all columns to be shown - regardless of width, the display will split them up into
         separate views with the maximum columns per line.
         """
+
         # ----------------------------------
         def build_break_column(nrows):
             # Builds a break column using the number of rows.
             # build_column() will add a row_break if necessary.
             breakstring = "..."
             col = np.full(nrows, breakstring).view(TypeRegister.FastArray)
             footer = [breakstring]
@@ -1862,15 +1862,14 @@
         color=None,
         header="",
         align=DisplayJustification.Right,
         html=False,
         itemformat=None,
         footer=None,
     ):
-
         # column data
         self._header = header
         self._data = data
         self._footer = footer
 
         # extra info
         self._row_break = row_break
```

### Comparing `riptable-1.8.0/riptable/rt_ema.py` & `riptable-1.8.1/riptable/rt_ema.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_enum.py` & `riptable-1.8.1/riptable/rt_enum.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_fastarray.py` & `riptable-1.8.1/riptable/rt_fastarray.py`

 * *Files 0% similar despite different names*

```diff
@@ -171,15050 +171,15236 @@
 00000aa0: 2e61 6e79 3a20 5245 4455 4345 5f46 554e  .any: REDUCE_FUN
 00000ab0: 4354 494f 4e53 2e52 4544 5543 455f 414e  CTIONS.REDUCE_AN
 00000ac0: 592c 0d0a 2020 2020 2320 6e70 2e61 6c6c  Y,..    # np.all
 00000ad0: 3a20 5245 4455 4345 5f46 554e 4354 494f  : REDUCE_FUNCTIO
 00000ae0: 4e53 2e52 4544 5543 455f 414c 4c2c 0d0a  NS.REDUCE_ALL,..
 00000af0: 7d0d 0a0d 0a69 6d70 6f72 7420 6d61 7468  }....import math
 00000b00: 0d0a 0d0a 696d 706f 7274 206e 756d 6261  ....import numba
-00000b10: 2061 7320 6e62 0d0a 0d0a 0d0a 406e 622e   as nb......@nb.
-00000b20: 6765 6e65 7261 7465 645f 6a69 7428 290d  generated_jit().
-00000b30: 0a64 6566 205f 6973 6e61 6e28 7829 3a0d  .def _isnan(x):.
-00000b40: 0a20 2020 2069 6620 7820 3d3d 206e 622e  .    if x == nb.
-00000b50: 696e 7438 3a0d 0a20 2020 2020 2020 2072  int8:..        r
-00000b60: 6574 7572 6e20 6c61 6d62 6461 2078 3a20  eturn lambda x: 
-00000b70: 7820 3d3d 206e 622e 696e 7438 282d 3132  x == nb.int8(-12
-00000b80: 3829 0d0a 2020 2020 656c 6966 2078 203d  8)..    elif x =
-00000b90: 3d20 6e62 2e69 6e74 3136 3a0d 0a20 2020  = nb.int16:..   
-00000ba0: 2020 2020 2072 6574 7572 6e20 6c61 6d62       return lamb
-00000bb0: 6461 2078 3a20 7820 3d3d 206e 622e 696e  da x: x == nb.in
-00000bc0: 7431 3628 2d33 3237 3638 290d 0a20 2020  t16(-32768)..   
-00000bd0: 2065 6c69 6620 7820 3d3d 206e 622e 696e   elif x == nb.in
-00000be0: 7433 323a 0d0a 2020 2020 2020 2020 7265  t32:..        re
-00000bf0: 7475 726e 206c 616d 6264 6120 783a 2078  turn lambda x: x
-00000c00: 203d 3d20 6e62 2e69 6e74 3332 2830 7838   == nb.int32(0x8
-00000c10: 3030 3030 3030 3029 0d0a 2020 2020 656c  0000000)..    el
-00000c20: 6966 2078 203d 3d20 6e62 2e69 6e74 3634  if x == nb.int64
-00000c30: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
-00000c40: 6e20 6c61 6d62 6461 2078 3a20 7820 3d3d  n lambda x: x ==
-00000c50: 206e 622e 696e 7436 3428 3078 3830 3030   nb.int64(0x8000
-00000c60: 3030 3030 3030 3030 3030 3030 290d 0a20  000000000000).. 
-00000c70: 2020 2065 6c69 6620 7820 3d3d 206e 622e     elif x == nb.
-00000c80: 7569 6e74 383a 0d0a 2020 2020 2020 2020  uint8:..        
-00000c90: 7265 7475 726e 206c 616d 6264 6120 783a  return lambda x:
-00000ca0: 2078 203d 3d20 6e62 2e75 696e 7438 2830   x == nb.uint8(0
-00000cb0: 7846 4629 0d0a 2020 2020 656c 6966 2078  xFF)..    elif x
-00000cc0: 203d 3d20 6e62 2e75 696e 7431 363a 0d0a   == nb.uint16:..
-00000cd0: 2020 2020 2020 2020 7265 7475 726e 206c          return l
-00000ce0: 616d 6264 6120 783a 2078 203d 3d20 6e62  ambda x: x == nb
-00000cf0: 2e75 696e 7431 3628 3078 4646 4646 290d  .uint16(0xFFFF).
+00000b10: 2061 7320 6e62 0d0a 0d0a 0d0a 6465 6620   as nb......def 
+00000b20: 5f69 736e 616e 2878 293a 0d0a 2020 2020  _isnan(x):..    
+00000b30: 7261 6973 6520 5275 6e74 696d 6545 7272  raise RuntimeErr
+00000b40: 6f72 2822 556e 6578 7065 6374 6564 2063  or("Unexpected c
+00000b50: 616c 6c22 290d 0a0d 0a0d 0a40 6e62 2e65  all")......@nb.e
+00000b60: 7874 656e 6469 6e67 2e6f 7665 726c 6f61  xtending.overloa
+00000b70: 6428 5f69 736e 616e 290d 0a64 6566 205f  d(_isnan)..def _
+00000b80: 5f69 736e 616e 2878 293a 0d0a 2020 2020  _isnan(x):..    
+00000b90: 6966 2078 203d 3d20 6e62 2e69 6e74 383a  if x == nb.int8:
+00000ba0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00000bb0: 206c 616d 6264 6120 783a 2078 203d 3d20   lambda x: x == 
+00000bc0: 6e62 2e69 6e74 3828 2d31 3238 290d 0a20  nb.int8(-128).. 
+00000bd0: 2020 2065 6c69 6620 7820 3d3d 206e 622e     elif x == nb.
+00000be0: 696e 7431 363a 0d0a 2020 2020 2020 2020  int16:..        
+00000bf0: 7265 7475 726e 206c 616d 6264 6120 783a  return lambda x:
+00000c00: 2078 203d 3d20 6e62 2e69 6e74 3136 282d   x == nb.int16(-
+00000c10: 3332 3736 3829 0d0a 2020 2020 656c 6966  32768)..    elif
+00000c20: 2078 203d 3d20 6e62 2e69 6e74 3332 3a0d   x == nb.int32:.
+00000c30: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00000c40: 6c61 6d62 6461 2078 3a20 7820 3d3d 206e  lambda x: x == n
+00000c50: 622e 696e 7433 3228 3078 3830 3030 3030  b.int32(0x800000
+00000c60: 3030 290d 0a20 2020 2065 6c69 6620 7820  00)..    elif x 
+00000c70: 3d3d 206e 622e 696e 7436 343a 0d0a 2020  == nb.int64:..  
+00000c80: 2020 2020 2020 7265 7475 726e 206c 616d        return lam
+00000c90: 6264 6120 783a 2078 203d 3d20 6e62 2e69  bda x: x == nb.i
+00000ca0: 6e74 3634 2830 7838 3030 3030 3030 3030  nt64(0x800000000
+00000cb0: 3030 3030 3030 3029 0d0a 2020 2020 656c  0000000)..    el
+00000cc0: 6966 2078 203d 3d20 6e62 2e75 696e 7438  if x == nb.uint8
+00000cd0: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
+00000ce0: 6e20 6c61 6d62 6461 2078 3a20 7820 3d3d  n lambda x: x ==
+00000cf0: 206e 622e 7569 6e74 3828 3078 4646 290d   nb.uint8(0xFF).
 00000d00: 0a20 2020 2065 6c69 6620 7820 3d3d 206e  .    elif x == n
-00000d10: 622e 7569 6e74 3332 3a0d 0a20 2020 2020  b.uint32:..     
+00000d10: 622e 7569 6e74 3136 3a0d 0a20 2020 2020  b.uint16:..     
 00000d20: 2020 2072 6574 7572 6e20 6c61 6d62 6461     return lambda
 00000d30: 2078 3a20 7820 3d3d 206e 622e 7569 6e74   x: x == nb.uint
-00000d40: 3332 2830 7846 4646 4646 4646 4629 0d0a  32(0xFFFFFFFF)..
-00000d50: 2020 2020 656c 6966 2078 203d 3d20 6e62      elif x == nb
-00000d60: 2e75 696e 7436 343a 0d0a 2020 2020 2020  .uint64:..      
-00000d70: 2020 7265 7475 726e 206c 616d 6264 6120    return lambda 
-00000d80: 783a 2078 203d 3d20 6e62 2e75 696e 7436  x: x == nb.uint6
-00000d90: 3428 3078 4646 4646 4646 4646 4646 4646  4(0xFFFFFFFFFFFF
-00000da0: 4646 4646 290d 0a20 2020 2065 6c73 653a  FFFF)..    else:
-00000db0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00000dc0: 206c 616d 6264 6120 783a 206d 6174 682e   lambda x: math.
-00000dd0: 6973 6e61 6e28 7829 0d0a 0d0a 0d0a 406e  isnan(x)......@n
-00000de0: 622e 6e6a 6974 2870 6172 616c 6c65 6c3d  b.njit(parallel=
-00000df0: 5472 7565 290d 0a64 6566 205f 666e 616e  True)..def _fnan
-00000e00: 7375 6d68 656c 7065 7228 782c 2066 696c  sumhelper(x, fil
-00000e10: 7465 7229 3a0d 0a20 2020 2072 6574 203d  ter):..    ret =
-00000e20: 2030 0d0a 2020 2020 6c65 6e67 7468 203d   0..    length =
-00000e30: 2030 0d0a 2020 2020 666f 7220 6920 696e   0..    for i in
-00000e40: 206e 622e 7072 616e 6765 286c 656e 2878   nb.prange(len(x
-00000e50: 2929 3a0d 0a20 2020 2020 2020 2069 6620  )):..        if 
-00000e60: 6669 6c74 6572 5b69 5d20 616e 6420 6e6f  filter[i] and no
-00000e70: 7420 5f69 736e 616e 2878 5b69 5d29 3a0d  t _isnan(x[i]):.
-00000e80: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00000e90: 202b 3d20 785b 695d 0d0a 2020 2020 2020   += x[i]..      
-00000ea0: 2020 2020 2020 6c65 6e67 7468 202b 3d20        length += 
-00000eb0: 310d 0a20 2020 2072 6574 7572 6e20 2872  1..    return (r
-00000ec0: 6574 2c20 6c65 6e67 7468 290d 0a0d 0a0d  et, length).....
-00000ed0: 0a64 6566 205f 666e 616e 7375 6d28 782c  .def _fnansum(x,
-00000ee0: 2066 696c 7465 7229 3a0d 0a20 2020 2072   filter):..    r
-00000ef0: 6574 7572 6e20 5f66 6e61 6e73 756d 6865  eturn _fnansumhe
-00000f00: 6c70 6572 2878 2c20 6669 6c74 6572 295b  lper(x, filter)[
-00000f10: 305d 0d0a 0d0a 0d0a 6465 6620 5f66 6e61  0]......def _fna
-00000f20: 6e6d 6561 6e28 782c 2066 696c 7465 7229  nmean(x, filter)
-00000f30: 3a0d 0a20 2020 2028 746f 742c 206e 2920  :..    (tot, n) 
-00000f40: 3d20 5f66 6e61 6e73 756d 6865 6c70 6572  = _fnansumhelper
-00000f50: 2878 2c20 6669 6c74 6572 290d 0a20 2020  (x, filter)..   
-00000f60: 2072 6574 7572 6e20 746f 7420 2f20 6e0d   return tot / n.
-00000f70: 0a0d 0a0d 0a40 6e62 2e6e 6a69 7428 7061  .....@nb.njit(pa
-00000f80: 7261 6c6c 656c 3d54 7275 6529 0d0a 6465  rallel=True)..de
-00000f90: 6620 5f66 6e61 6e76 6172 2878 2c20 6669  f _fnanvar(x, fi
-00000fa0: 6c74 6572 293a 0d0a 2020 2020 6162 6320  lter):..    abc 
-00000fb0: 3d20 302e 300d 0a20 2020 206c 656e 6774  = 0.0..    lengt
-00000fc0: 6820 3d20 300d 0a0d 0a20 2020 2066 6f72  h = 0....    for
-00000fd0: 2069 2069 6e20 6e62 2e70 7261 6e67 6528   i in nb.prange(
-00000fe0: 6c65 6e28 7829 293a 0d0a 2020 2020 2020  len(x)):..      
-00000ff0: 2020 6966 2066 696c 7465 725b 695d 2061    if filter[i] a
-00001000: 6e64 206e 6f74 205f 6973 6e61 6e28 785b  nd not _isnan(x[
-00001010: 695d 293a 0d0a 2020 2020 2020 2020 2020  i]):..          
-00001020: 2020 6162 6320 2b3d 2078 5b69 5d0d 0a20    abc += x[i].. 
-00001030: 2020 2020 2020 2020 2020 206c 656e 6774             lengt
-00001040: 6820 2b3d 2031 0d0a 0d0a 2020 2020 6d65  h += 1....    me
-00001050: 616e 203d 2061 6263 202f 206c 656e 6774  an = abc / lengt
-00001060: 680d 0a0d 0a20 2020 2072 6574 203d 2030  h....    ret = 0
-00001070: 2e30 0d0a 0d0a 2020 2020 666f 7220 6920  .0....    for i 
-00001080: 696e 206e 622e 7072 616e 6765 286c 656e  in nb.prange(len
-00001090: 2878 2929 3a0d 0a20 2020 2020 2020 2069  (x)):..        i
-000010a0: 6620 6669 6c74 6572 5b69 5d20 616e 6420  f filter[i] and 
-000010b0: 6e6f 7420 5f69 736e 616e 2878 5b69 5d29  not _isnan(x[i])
-000010c0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-000010d0: 6574 202b 3d20 2878 5b69 5d20 2d20 6d65  et += (x[i] - me
-000010e0: 616e 2920 2a2a 2032 0d0a 2020 2020 6966  an) ** 2..    if
-000010f0: 206c 656e 6774 6820 3e20 313a 0d0a 2020   length > 1:..  
-00001100: 2020 2020 2020 7265 7475 726e 2072 6574        return ret
-00001110: 202f 2028 6c65 6e67 7468 202d 2031 290d   / (length - 1).
-00001120: 0a20 2020 2069 6620 6c65 6e67 7468 203d  .    if length =
-00001130: 3d20 313a 0d0a 2020 2020 2020 2020 7265  = 1:..        re
-00001140: 7475 726e 206e 702e 4e61 4e0d 0a20 2020  turn np.NaN..   
-00001150: 2069 6620 6c65 6e67 7468 203d 3d20 303a   if length == 0:
-00001160: 0d0a 2020 2020 2020 2020 7261 6973 6520  ..        raise 
-00001170: 5661 6c75 6545 7272 6f72 2822 5472 6965  ValueError("Trie
-00001180: 6420 746f 2074 616b 6520 7468 6520 7661  d to take the va
-00001190: 7269 616e 6365 206f 6620 616e 2065 6d70  riance of an emp
-000011a0: 7479 2061 7272 6179 2e22 290d 0a0d 0a0d  ty array.").....
-000011b0: 0a64 6566 205f 666e 616e 7374 6428 782c  .def _fnanstd(x,
-000011c0: 2066 696c 7465 7229 3a0d 0a20 2020 2072   filter):..    r
-000011d0: 6574 7572 6e20 6d61 7468 2e73 7172 7428  eturn math.sqrt(
-000011e0: 5f66 6e61 6e76 6172 2878 2c20 6669 6c74  _fnanvar(x, filt
-000011f0: 6572 2929 0d0a 0d0a 0d0a 406e 622e 6e6a  er))......@nb.nj
-00001200: 6974 2870 6172 616c 6c65 6c3d 5472 7565  it(parallel=True
-00001210: 290d 0a64 6566 205f 6673 756d 6865 6c70  )..def _fsumhelp
-00001220: 6572 2878 2c20 6669 6c74 6572 293a 0d0a  er(x, filter):..
-00001230: 2020 2020 7265 7420 3d20 300d 0a20 2020      ret = 0..   
-00001240: 206c 656e 6774 6820 3d20 300d 0a20 2020   length = 0..   
-00001250: 2066 6f72 2069 2069 6e20 6e62 2e70 7261   for i in nb.pra
-00001260: 6e67 6528 6c65 6e28 7829 293a 0d0a 2020  nge(len(x)):..  
-00001270: 2020 2020 2020 6966 2066 696c 7465 725b        if filter[
-00001280: 695d 3a0d 0a20 2020 2020 2020 2020 2020  i]:..           
-00001290: 2072 6574 202b 3d20 785b 695d 0d0a 2020   ret += x[i]..  
-000012a0: 2020 2020 2020 2020 2020 6c65 6e67 7468            length
-000012b0: 202b 3d20 310d 0a20 2020 2072 6574 7572   += 1..    retur
-000012c0: 6e20 2872 6574 2c20 6c65 6e67 7468 290d  n (ret, length).
-000012d0: 0a0d 0a0d 0a64 6566 205f 6673 756d 2878  .....def _fsum(x
-000012e0: 2c20 6669 6c74 6572 293a 0d0a 2020 2020  , filter):..    
-000012f0: 7265 7475 726e 205f 6673 756d 6865 6c70  return _fsumhelp
-00001300: 6572 2878 2c20 6669 6c74 6572 295b 305d  er(x, filter)[0]
-00001310: 0d0a 0d0a 0d0a 6465 6620 5f66 6d65 616e  ......def _fmean
-00001320: 2878 2c20 6669 6c74 6572 293a 0d0a 2020  (x, filter):..  
-00001330: 2020 2874 6f74 2c20 6e29 203d 205f 6673    (tot, n) = _fs
-00001340: 756d 6865 6c70 6572 2878 2c20 6669 6c74  umhelper(x, filt
-00001350: 6572 290d 0a20 2020 2072 6574 7572 6e20  er)..    return 
-00001360: 746f 7420 2f20 6e0d 0a0d 0a0d 0a40 6e62  tot / n......@nb
-00001370: 2e6e 6a69 7428 7061 7261 6c6c 656c 3d54  .njit(parallel=T
-00001380: 7275 6529 0d0a 6465 6620 5f66 7661 7228  rue)..def _fvar(
-00001390: 782c 2066 696c 7465 7229 3a0d 0a20 2020  x, filter):..   
-000013a0: 2061 6263 203d 2030 2e30 0d0a 2020 2020   abc = 0.0..    
-000013b0: 6c65 6e67 7468 203d 2030 0d0a 0d0a 2020  length = 0....  
-000013c0: 2020 666f 7220 6920 696e 206e 622e 7072    for i in nb.pr
-000013d0: 616e 6765 286c 656e 2878 2929 3a0d 0a20  ange(len(x)):.. 
-000013e0: 2020 2020 2020 2069 6620 6669 6c74 6572         if filter
-000013f0: 5b69 5d3a 0d0a 2020 2020 2020 2020 2020  [i]:..          
-00001400: 2020 6162 6320 2b3d 2078 5b69 5d0d 0a20    abc += x[i].. 
-00001410: 2020 2020 2020 2020 2020 206c 656e 6774             lengt
-00001420: 6820 2b3d 2031 0d0a 0d0a 2020 2020 6d65  h += 1....    me
-00001430: 616e 203d 2061 6263 202f 206c 656e 6774  an = abc / lengt
-00001440: 680d 0a0d 0a20 2020 2072 6574 203d 2030  h....    ret = 0
-00001450: 2e30 0d0a 0d0a 2020 2020 666f 7220 6920  .0....    for i 
-00001460: 696e 206e 622e 7072 616e 6765 286c 656e  in nb.prange(len
-00001470: 2878 2929 3a0d 0a20 2020 2020 2020 2069  (x)):..        i
-00001480: 6620 6669 6c74 6572 5b69 5d3a 0d0a 2020  f filter[i]:..  
-00001490: 2020 2020 2020 2020 2020 7265 7420 2b3d            ret +=
-000014a0: 2028 785b 695d 202d 206d 6561 6e29 202a   (x[i] - mean) *
-000014b0: 2a20 320d 0a20 2020 2069 6620 6c65 6e67  * 2..    if leng
-000014c0: 7468 203e 2031 3a0d 0a20 2020 2020 2020  th > 1:..       
-000014d0: 2072 6574 7572 6e20 7265 7420 2f20 286c   return ret / (l
-000014e0: 656e 6774 6820 2d20 3129 0d0a 2020 2020  ength - 1)..    
-000014f0: 6966 206c 656e 6774 6820 3d3d 2031 3a0d  if length == 1:.
-00001500: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00001510: 6e70 2e4e 614e 0d0a 2020 2020 6966 206c  np.NaN..    if l
-00001520: 656e 6774 6820 3d3d 2030 3a0d 0a20 2020  ength == 0:..   
-00001530: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
-00001540: 4572 726f 7228 2254 7269 6564 2074 6f20  Error("Tried to 
-00001550: 7461 6b65 2074 6865 2076 6172 6961 6e63  take the varianc
-00001560: 6520 6f66 2061 6e20 656d 7074 7920 6172  e of an empty ar
-00001570: 7261 792e 2229 0d0a 0d0a 0d0a 6465 6620  ray.")......def 
-00001580: 5f66 7374 6428 782c 2066 696c 7465 7229  _fstd(x, filter)
-00001590: 3a0d 0a20 2020 2072 6574 7572 6e20 6d61  :..    return ma
-000015a0: 7468 2e73 7172 7428 5f66 7661 7228 782c  th.sqrt(_fvar(x,
-000015b0: 2066 696c 7465 7229 290d 0a0d 0a0d 0a23   filter))......#
-000015c0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
-000015d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000015e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000015f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
-00001600: 0a64 6566 2046 415f 4652 4f4d 5f55 494e  .def FA_FROM_UIN
-00001610: 5438 2875 696e 7438 6172 7229 3a0d 0a20  T8(uint8arr):.. 
-00001620: 2020 2022 2222 0d0a 2020 2020 5573 6564     """..    Used
-00001630: 2069 6e20 6465 2d70 6963 6b6c 696e 670d   in de-pickling.
-00001640: 0a20 2020 2022 2222 0d0a 2020 2020 7265  .    """..    re
-00001650: 7475 726e 2072 632e 436f 6d70 7265 7373  turn rc.Compress
-00001660: 4465 636f 6d70 7265 7373 4172 7261 7973  DecompressArrays
-00001670: 285b 7569 6e74 3861 7272 5d2c 2031 295b  ([uint8arr], 1)[
-00001680: 305d 0d0a 0d0a 0d0a 2320 2d2d 2d2d 2d2d  0]......# ------
-00001690: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000016a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000016b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000016c0: 2d2d 2d2d 2d2d 2d2d 0d0a 6465 6620 4641  --------..def FA
-000016d0: 5f46 524f 4d5f 4259 5445 5354 5249 4e47  _FROM_BYTESTRING
-000016e0: 2862 7974 6573 7472 696e 6729 3a0d 0a20  (bytestring):.. 
-000016f0: 2020 2022 2222 0d0a 2020 2020 5573 6564     """..    Used
-00001700: 2069 6e20 6465 2d70 6963 6b6c 696e 6720   in de-pickling 
-00001710: 7768 656e 2074 6f73 7472 696e 6728 2920  when tostring() 
-00001720: 7573 6564 2028 6375 7272 656e 746c 7920  used (currently 
-00001730: 6469 7361 626c 6564 290d 0a20 2020 2022  disabled)..    "
-00001740: 2222 0d0a 2020 2020 7265 7475 726e 2046  ""..    return F
-00001750: 415f 4652 4f4d 5f55 494e 5438 286e 702e  A_FROM_UINT8(np.
-00001760: 6672 6f6d 6275 6666 6572 2862 7974 6573  frombuffer(bytes
-00001770: 7472 696e 672c 2064 7479 7065 3d6e 702e  tring, dtype=np.
-00001780: 7569 6e74 3829 290d 0a0d 0a0d 0a23 202d  uint8))......# -
-00001790: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000017a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000017b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000017c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a64  -------------..d
-000017d0: 6566 206c 6f67 6963 616c 5f66 696e 645f  ef logical_find_
-000017e0: 636f 6d6d 6f6e 5f74 7970 6528 6172 7261  common_type(arra
-000017f0: 7974 7970 6573 2c20 7363 616c 6172 7479  ytypes, scalarty
-00001800: 7065 732c 2073 6361 6c61 7276 616c 293a  pes, scalarval):
-00001810: 0d0a 2020 2020 2222 220d 0a20 2020 2061  ..    """..    a
-00001820: 7373 756d 6573 206f 6e65 2073 6361 6c61  ssumes one scala
-00001830: 7220 616e 6420 6f6e 6520 6172 7261 790d  r and one array.
-00001840: 0a0d 0a20 2020 2022 2222 0d0a 2020 2020  ...    """..    
-00001850: 7363 616c 6172 203d 2073 6361 6c61 7274  scalar = scalart
-00001860: 7970 6573 5b30 5d0d 0a20 2020 2061 7272  ypes[0]..    arr
-00001870: 6179 203d 2061 7272 6179 7479 7065 735b  ay = arraytypes[
-00001880: 305d 0d0a 0d0a 2020 2020 756e 7369 676e  0]....    unsign
-00001890: 6564 203d 2046 616c 7365 0d0a 2020 2020  ed = False..    
-000018a0: 6973 696e 7465 6765 7220 3d20 4661 6c73  isinteger = Fals
-000018b0: 650d 0a0d 0a20 2020 2023 2054 4a44 2074  e....    # TJD t
-000018c0: 6869 7320 726f 7574 696e 6520 6e65 6564  his routine need
-000018d0: 7320 746f 2062 6520 7265 7772 6974 7465  s to be rewritte
-000018e0: 6e0d 0a20 2020 2023 2063 616e 2063 6865  n..    # can che
-000018f0: 636b 2069 7369 6e73 7461 6e63 6528 7363  ck isinstance(sc
-00001900: 616c 6172 2c28 6e70 2e69 6e74 6567 6572  alar,(np.integer
-00001910: 2c20 696e 7429 290d 0a0d 0a20 2020 2023  , int))....    #
-00001920: 2069 6620 7468 6973 2063 6f6d 6573 2069   if this comes i
-00001930: 6e20 6173 206e 702e 696e 7436 3420 616e  n as np.int64 an
-00001940: 6420 6e6f 7420 6120 6474 7970 652c 2077  d not a dtype, w
-00001950: 6520 636f 6e76 6572 7420 746f 2061 2064  e convert to a d
-00001960: 7479 7065 0d0a 2020 2020 6966 206e 6f74  type..    if not
-00001970: 2068 6173 6174 7472 2873 6361 6c61 722c   hasattr(scalar,
-00001980: 2022 6368 6172 2229 3a0d 0a20 2020 2020   "char"):..     
-00001990: 2020 2073 6361 6c61 7220 3d20 6e70 2e64     scalar = np.d
-000019a0: 7479 7065 2873 6361 6c61 7229 0d0a 0d0a  type(scalar)....
-000019b0: 2020 2020 6966 2073 6361 6c61 722e 6368      if scalar.ch
-000019c0: 6172 2069 6e20 4e75 6d70 7943 6861 7254  ar in NumpyCharT
-000019d0: 7970 6573 2e55 6e73 6967 6e65 6449 6e74  ypes.UnsignedInt
-000019e0: 6567 6572 3a0d 0a20 2020 2020 2020 2075  eger:..        u
-000019f0: 6e73 6967 6e65 6420 3d20 5472 7565 0d0a  nsigned = True..
-00001a00: 2020 2020 2020 2020 6973 696e 7465 6765          isintege
-00001a10: 7220 3d20 5472 7565 0d0a 2020 2020 6966  r = True..    if
-00001a20: 2073 6361 6c61 722e 6368 6172 2069 6e20   scalar.char in 
-00001a30: 4e75 6d70 7943 6861 7254 7970 6573 2e49  NumpyCharTypes.I
-00001a40: 6e74 6567 6572 3a0d 0a20 2020 2020 2020  nteger:..       
-00001a50: 2069 7369 6e74 6567 6572 203d 2054 7275   isinteger = Tru
-00001a60: 650d 0a0d 0a20 2020 2069 6620 6e6f 7420  e....    if not 
-00001a70: 6973 696e 7465 6765 723a 0d0a 2020 2020  isinteger:..    
-00001a80: 2020 2020 2320 676f 2062 7920 6e75 6d70      # go by nump
-00001a90: 7920 7570 7363 616c 6520 7275 6c65 730d  y upscale rules.
-00001aa0: 0a20 2020 2020 2020 2023 204e 4f54 453a  .        # NOTE:
-00001ab0: 2073 686f 756c 6420 636f 6e73 6964 6572   should consider
-00001ac0: 2061 6c6c 6f77 696e 6720 696e 7465 6765   allowing intege
-00001ad0: 7220 5e20 5472 7565 202d 2d20 6f72 2063  r ^ True -- or c
-00001ae0: 6861 6e67 696e 6720 6120 626f 6f6c 2073  hanging a bool s
-00001af0: 6361 6c61 7220 746f 2061 6e20 696e 740d  calar to an int.
-00001b00: 0a20 2020 2020 2020 2023 2070 7269 6e74  .        # print
-00001b10: 2822 7075 6e74 696e 6720 6e6f 7420 696e  ("punting not in
-00001b20: 7465 6765 7220 7363 616c 6172 222c 2073  teger scalar", s
-00001b30: 6361 6c61 7229 0d0a 2020 2020 2020 2020  calar)..        
-00001b40: 7265 7475 726e 206e 702e 6669 6e64 5f63  return np.find_c
-00001b50: 6f6d 6d6f 6e5f 7479 7065 2861 7272 6179  ommon_type(array
-00001b60: 7479 7065 732c 2073 6361 6c61 7274 7970  types, scalartyp
-00001b70: 6573 290d 0a0d 0a20 2020 2075 6e73 6967  es)....    unsig
-00001b80: 6e65 6420 3d20 4661 6c73 650d 0a20 2020  ned = False..   
-00001b90: 2069 7369 6e74 6567 6572 203d 2046 616c   isinteger = Fal
-00001ba0: 7365 0d0a 0d0a 2020 2020 7472 793a 0d0a  se....    try:..
-00001bb0: 2020 2020 2020 2020 6966 2061 7272 6179          if array
-00001bc0: 2e63 6861 7220 696e 204e 756d 7079 4368  .char in NumpyCh
-00001bd0: 6172 5479 7065 732e 556e 7369 676e 6564  arTypes.Unsigned
-00001be0: 496e 7465 6765 723a 0d0a 2020 2020 2020  Integer:..      
-00001bf0: 2020 2020 2020 756e 7369 676e 6564 203d        unsigned =
-00001c00: 2054 7275 650d 0a20 2020 2020 2020 2020   True..         
-00001c10: 2020 2069 7369 6e74 6567 6572 203d 2054     isinteger = T
-00001c20: 7275 650d 0a20 2020 2020 2020 2069 6620  rue..        if 
-00001c30: 6172 7261 792e 6368 6172 2069 6e20 4e75  array.char in Nu
-00001c40: 6d70 7943 6861 7254 7970 6573 2e49 6e74  mpyCharTypes.Int
-00001c50: 6567 6572 3a0d 0a20 2020 2020 2020 2020  eger:..         
-00001c60: 2020 2069 7369 6e74 6567 6572 203d 2054     isinteger = T
-00001c70: 7275 650d 0a20 2020 2065 7863 6570 743a  rue..    except:
-00001c80: 0d0a 2020 2020 2020 2020 7061 7373 0d0a  ..        pass..
-00001c90: 0d0a 2020 2020 2320 6966 2069 7369 6e73  ..    # if isins
-00001ca0: 7461 6e63 6528 6172 7261 792c 2069 6e74  tance(array, int
-00001cb0: 293a 0d0a 2020 2020 2320 2020 2069 7369  ):..    #    isi
-00001cc0: 6e74 6567 6572 203d 2054 7275 650d 0a0d  nteger = True...
-00001cd0: 0a20 2020 2023 2049 4620 4152 5241 5920  .    # IF ARRAY 
-00001ce0: 4953 2055 4e53 4947 4e45 4420 4259 2053  IS UNSIGNED BY S
-00001cf0: 4341 4c41 5220 4953 2053 4947 4e45 4420  CALAR IS SIGNED 
-00001d00: 7570 6361 7374 0d0a 0d0a 2020 2020 6966  upcast....    if
-00001d10: 206e 6f74 2069 7369 6e74 6567 6572 3a0d   not isinteger:.
-00001d20: 0a20 2020 2020 2020 2023 2067 6f20 6279  .        # go by
-00001d30: 206e 756d 7079 2075 7073 6361 6c65 2072   numpy upscale r
-00001d40: 756c 6573 0d0a 2020 2020 2020 2020 2320  ules..        # 
-00001d50: 4e4f 5445 3a20 7368 6f75 6c64 2063 6f6e  NOTE: should con
-00001d60: 7369 6465 7220 616c 6c6f 7769 6e67 2069  sider allowing i
-00001d70: 6e74 6567 6572 205e 2054 7275 6520 2d2d  nteger ^ True --
-00001d80: 206f 7220 6368 616e 6769 6e67 2061 2062   or changing a b
-00001d90: 6f6f 6c20 7363 616c 6172 2074 6f20 616e  ool scalar to an
-00001da0: 2069 6e74 0d0a 2020 2020 2020 2020 2320   int..        # 
-00001db0: 7072 696e 7428 2270 756e 7469 6e67 206e  print("punting n
-00001dc0: 6f74 2069 6e74 6567 6572 2061 7272 6179  ot integer array
-00001dd0: 222c 2061 7272 6179 290d 0a20 2020 2020  ", array)..     
-00001de0: 2020 2072 6574 7572 6e20 6e70 2e66 696e     return np.fin
-00001df0: 645f 636f 6d6d 6f6e 5f74 7970 6528 6172  d_common_type(ar
-00001e00: 7261 7974 7970 6573 2c20 7363 616c 6172  raytypes, scalar
-00001e10: 7479 7065 7329 0d0a 0d0a 2020 2020 6669  types)....    fi
-00001e20: 6e61 6c20 3d20 4e6f 6e65 0d0a 0d0a 2020  nal = None....  
-00001e30: 2020 7363 616c 6172 7661 6c20 3d20 696e    scalarval = in
-00001e40: 7428 7363 616c 6172 7661 6c29 0d0a 0d0a  t(scalarval)....
-00001e50: 2020 2020 2320 4465 7465 726d 696e 6520      # Determine 
-00001e60: 7468 6520 706f 7373 6962 6c65 2069 6e74  the possible int
-00001e70: 6567 6572 2075 7073 6361 6c69 6e67 2062  eger upscaling b
-00001e80: 6173 6564 206f 6e20 7468 6520 7363 616c  ased on the scal
-00001e90: 6172 2076 616c 7565 0d0a 2020 2020 6966  ar value..    if
-00001ea0: 2075 6e73 6967 6e65 643a 0d0a 2020 2020   unsigned:..    
-00001eb0: 2020 2020 6966 2073 6361 6c61 7276 616c      if scalarval
-00001ec0: 203c 3d20 3235 353a 0d0a 2020 2020 2020   <= 255:..      
-00001ed0: 2020 2020 2020 6669 6e61 6c20 3d20 6e70        final = np
-00001ee0: 2e75 696e 7438 0d0a 2020 2020 2020 2020  .uint8..        
-00001ef0: 656c 6966 2073 6361 6c61 7276 616c 203c  elif scalarval <
-00001f00: 3d20 3635 3533 353a 0d0a 2020 2020 2020  = 65535:..      
-00001f10: 2020 2020 2020 6669 6e61 6c20 3d20 6e70        final = np
-00001f20: 2e75 696e 7431 360d 0a20 2020 2020 2020  .uint16..       
-00001f30: 2065 6c69 6620 7363 616c 6172 7661 6c20   elif scalarval 
-00001f40: 3c3d 2028 322a 2a33 3220 2d20 3129 3a0d  <= (2**32 - 1):.
-00001f50: 0a20 2020 2020 2020 2020 2020 2066 696e  .            fin
-00001f60: 616c 203d 206e 702e 7569 6e74 3332 0d0a  al = np.uint32..
-00001f70: 2020 2020 2020 2020 656c 6966 2073 6361          elif sca
-00001f80: 6c61 7276 616c 203c 3d20 2832 2a2a 3634  larval <= (2**64
-00001f90: 202d 2031 293a 0d0a 2020 2020 2020 2020   - 1):..        
-00001fa0: 2020 2020 6669 6e61 6c20 3d20 6e70 2e75      final = np.u
-00001fb0: 696e 7436 340d 0a20 2020 2020 2020 2065  int64..        e
-00001fc0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00001fd0: 2020 6669 6e61 6c20 3d20 6e70 2e66 6c6f    final = np.flo
-00001fe0: 6174 3634 0d0a 2020 2020 656c 7365 3a0d  at64..    else:.
-00001ff0: 0a20 2020 2020 2020 2069 6620 7363 616c  .        if scal
-00002000: 6172 7661 6c20 3e3d 202d 3132 3820 616e  arval >= -128 an
-00002010: 6420 7363 616c 6172 7661 6c20 3c3d 2031  d scalarval <= 1
-00002020: 3237 3a0d 0a20 2020 2020 2020 2020 2020  27:..           
-00002030: 2066 696e 616c 203d 206e 702e 696e 7438   final = np.int8
-00002040: 0d0a 2020 2020 2020 2020 656c 6966 2073  ..        elif s
-00002050: 6361 6c61 7276 616c 203e 3d20 2d33 3237  calarval >= -327
-00002060: 3638 2061 6e64 2073 6361 6c61 7276 616c  68 and scalarval
-00002070: 203c 3d20 3332 3736 373a 0d0a 2020 2020   <= 32767:..    
-00002080: 2020 2020 2020 2020 6669 6e61 6c20 3d20          final = 
-00002090: 6e70 2e69 6e74 3136 0d0a 2020 2020 2020  np.int16..      
-000020a0: 2020 656c 6966 2073 6361 6c61 7276 616c    elif scalarval
-000020b0: 203e 3d20 2d28 322a 2a33 3129 2061 6e64   >= -(2**31) and
-000020c0: 2073 6361 6c61 7276 616c 203c 3d20 2832   scalarval <= (2
-000020d0: 2a2a 3331 202d 2031 293a 0d0a 2020 2020  **31 - 1):..    
-000020e0: 2020 2020 2020 2020 6669 6e61 6c20 3d20          final = 
-000020f0: 6e70 2e69 6e74 3332 0d0a 2020 2020 2020  np.int32..      
-00002100: 2020 656c 6966 2073 6361 6c61 7276 616c    elif scalarval
-00002110: 203e 3d20 2d28 322a 2a36 3329 2061 6e64   >= -(2**63) and
-00002120: 2073 6361 6c61 7276 616c 203c 3d20 2832   scalarval <= (2
-00002130: 2a2a 3633 202d 2031 293a 0d0a 2020 2020  **63 - 1):..    
-00002140: 2020 2020 2020 2020 6669 6e61 6c20 3d20          final = 
-00002150: 6e70 2e69 6e74 3634 0d0a 2020 2020 2020  np.int64..      
-00002160: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00002170: 2020 2020 2066 696e 616c 203d 206e 702e       final = np.
-00002180: 666c 6f61 7436 340d 0a0d 0a20 2020 2066  float64....    f
-00002190: 696e 616c 203d 206e 702e 6474 7970 6528  inal = np.dtype(
-000021a0: 6669 6e61 6c29 0d0a 0d0a 2020 2020 2320  final)....    # 
-000021b0: 646f 206e 6f74 2061 6c6c 6f77 2064 6f77  do not allow dow
-000021c0: 6e63 6173 7469 6e67 0d0a 2020 2020 6966  ncasting..    if
-000021d0: 2061 7272 6179 2e6e 756d 203c 2066 696e   array.num < fin
-000021e0: 616c 2e6e 756d 3a0d 0a20 2020 2020 2020  al.num:..       
-000021f0: 2023 2070 7269 6e74 2822 7265 7475 726e   # print("return
-00002200: 696e 6720 6669 6e61 6c22 2c20 6669 6e61  ing final", fina
-00002210: 6c29 0d0a 2020 2020 2020 2020 7265 7475  l)..        retu
-00002220: 726e 2066 696e 616c 0d0a 0d0a 2020 2020  rn final....    
-00002230: 7265 7475 726e 2061 7272 6179 0d0a 0d0a  return array....
-00002240: 2020 2020 2320 6966 2074 7970 6528 6172      # if type(ar
-00002250: 6773 5b30 5d29 2069 6e20 5363 616c 6172  gs[0]) in Scalar
-00002260: 5479 7065 3a0d 0a20 2020 2023 2020 2020  Type:..    #    
-00002270: 7072 696e 7428 2263 6f6e 7665 7274 696e  print("convertin
-00002280: 6720 6172 6732 2074 6f20 222c 2066 696e  g arg2 to ", fin
-00002290: 616c 5f64 7479 7065 290d 0a20 2020 2023  al_dtype)..    #
-000022a0: 2020 2020 6172 6773 5b31 5d20 3d20 6172      args[1] = ar
-000022b0: 6773 5b31 5d2e 6173 7479 7065 2866 696e  gs[1].astype(fin
-000022c0: 616c 5f64 7479 7065 293b 0d0a 2020 2020  al_dtype);..    
-000022d0: 2320 656c 7365 3a0d 0a20 2020 2023 2020  # else:..    #  
-000022e0: 2020 7072 696e 7428 2263 6f6e 7665 7274    print("convert
-000022f0: 696e 6720 6172 6731 2074 6f20 222c 2066  ing arg1 to ", f
-00002300: 696e 616c 5f64 7479 7065 290d 0a20 2020  inal_dtype)..   
-00002310: 2023 2020 2020 6172 6773 5b30 5d20 3d20   #    args[0] = 
-00002320: 6172 6773 5b30 5d2e 6173 7479 7065 2866  args[0].astype(f
-00002330: 696e 616c 5f64 7479 7065 293b 0d0a 0d0a  inal_dtype);....
-00002340: 0d0a 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ..# ------------
-00002350: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00002360: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00002370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00002380: 2d2d 0d0a 6465 6620 5f41 5354 5950 4528  --..def _ASTYPE(
-00002390: 7365 6c66 2c20 6474 7970 6529 3a0d 0a20  self, dtype):.. 
-000023a0: 2020 2022 2222 696e 7465 726e 616c 2063     """internal c
-000023b0: 616c 6c20 6672 6f6d 2061 7272 6179 5f75  all from array_u
-000023c0: 6675 6e63 2074 6f20 636f 6e76 6572 7420  func to convert 
-000023d0: 6172 7261 7973 2e20 2072 6574 7572 6e73  arrays.  returns
-000023e0: 206e 756d 7079 2061 7272 6179 7322 2222   numpy arrays"""
-000023f0: 0d0a 2020 2020 2320 7265 7475 726e 2073  ..    # return s
-00002400: 656c 662e 6173 7479 7065 2864 7479 7065  elf.astype(dtype
-00002410: 290d 0a20 2020 2074 6f5f 6e75 6d20 3d20  )..    to_num = 
-00002420: 6474 7970 652e 6e75 6d0d 0a20 2020 2069  dtype.num..    i
-00002430: 6620 7365 6c66 2e64 7479 7065 2e6e 756d  f self.dtype.num
-00002440: 203c 3d20 3133 2061 6e64 2074 6f5f 6e75   <= 13 and to_nu
-00002450: 6d20 3c3d 2031 333a 0d0a 2020 2020 2020  m <= 13:..      
-00002460: 2020 6966 2046 6173 7441 7272 6179 2e53    if FastArray.S
-00002470: 6166 6543 6f6e 7665 7273 696f 6e73 3a0d  afeConversions:.
-00002480: 0a20 2020 2020 2020 2020 2020 2023 2070  .            # p
-00002490: 6572 666f 726d 2061 2073 6166 6520 636f  erform a safe co
-000024a0: 6e76 6572 7369 6f6e 2075 6e64 6572 7374  nversion underst
-000024b0: 616e 6469 6e67 2073 656e 7469 6e65 6c73  anding sentinels
-000024c0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-000024d0: 7475 726e 2054 7970 6552 6567 6973 7465  turn TypeRegiste
-000024e0: 722e 4d61 7468 4c65 6467 6572 2e5f 4153  r.MathLedger._AS
-000024f0: 5f46 415f 5459 5045 2873 656c 662c 2074  _FA_TYPE(self, t
-00002500: 6f5f 6e75 6d29 2e5f 6e70 0d0a 2020 2020  o_num)._np..    
-00002510: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00002520: 2020 2020 2020 2023 2070 6572 666f 726d         # perform
-00002530: 2075 6e73 6166 6520 636f 6e76 6572 7369   unsafe conversi
-00002540: 6f6e 204e 4f54 2075 6e64 6572 7374 616e  on NOT understan
-00002550: 6469 6e67 2073 656e 7469 6e65 6c73 0d0a  ding sentinels..
-00002560: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00002570: 726e 2054 7970 6552 6567 6973 7465 722e  rn TypeRegister.
-00002580: 4d61 7468 4c65 6467 6572 2e5f 4153 5f46  MathLedger._AS_F
-00002590: 415f 5459 5045 5f55 4e53 4146 4528 7365  A_TYPE_UNSAFE(se
-000025a0: 6c66 2c20 746f 5f6e 756d 292e 5f6e 700d  lf, to_num)._np.
-000025b0: 0a0d 0a20 2020 2072 6574 7572 6e20 7365  ...    return se
-000025c0: 6c66 2e61 7374 7970 6528 6474 7970 6529  lf.astype(dtype)
-000025d0: 0d0a 0d0a 0d0a 2320 2d2d 2d2d 2d2d 2d2d  ......# --------
-000025e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000025f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00002600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00002610: 2d2d 2d2d 2d2d 0d0a 2320 2d2d 2d2d 2d2d  ------..# ------
-00002620: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00000d40: 3136 2830 7846 4646 4629 0d0a 2020 2020  16(0xFFFF)..    
+00000d50: 656c 6966 2078 203d 3d20 6e62 2e75 696e  elif x == nb.uin
+00000d60: 7433 323a 0d0a 2020 2020 2020 2020 7265  t32:..        re
+00000d70: 7475 726e 206c 616d 6264 6120 783a 2078  turn lambda x: x
+00000d80: 203d 3d20 6e62 2e75 696e 7433 3228 3078   == nb.uint32(0x
+00000d90: 4646 4646 4646 4646 290d 0a20 2020 2065  FFFFFFFF)..    e
+00000da0: 6c69 6620 7820 3d3d 206e 622e 7569 6e74  lif x == nb.uint
+00000db0: 3634 3a0d 0a20 2020 2020 2020 2072 6574  64:..        ret
+00000dc0: 7572 6e20 6c61 6d62 6461 2078 3a20 7820  urn lambda x: x 
+00000dd0: 3d3d 206e 622e 7569 6e74 3634 2830 7846  == nb.uint64(0xF
+00000de0: 4646 4646 4646 4646 4646 4646 4646 4629  FFFFFFFFFFFFFFF)
+00000df0: 0d0a 2020 2020 656c 7365 3a0d 0a20 2020  ..    else:..   
+00000e00: 2020 2020 2072 6574 7572 6e20 6c61 6d62       return lamb
+00000e10: 6461 2078 3a20 6d61 7468 2e69 736e 616e  da x: math.isnan
+00000e20: 2878 290d 0a0d 0a0d 0a40 6e62 2e6e 6a69  (x)......@nb.nji
+00000e30: 7428 7061 7261 6c6c 656c 3d54 7275 6529  t(parallel=True)
+00000e40: 0d0a 6465 6620 5f66 6e61 6e73 756d 6865  ..def _fnansumhe
+00000e50: 6c70 6572 2878 2c20 6669 6c74 6572 293a  lper(x, filter):
+00000e60: 0d0a 2020 2020 7265 7420 3d20 300d 0a20  ..    ret = 0.. 
+00000e70: 2020 206c 656e 6774 6820 3d20 300d 0a20     length = 0.. 
+00000e80: 2020 2066 6f72 2069 2069 6e20 6e62 2e70     for i in nb.p
+00000e90: 7261 6e67 6528 6c65 6e28 7829 293a 0d0a  range(len(x)):..
+00000ea0: 2020 2020 2020 2020 6966 2066 696c 7465          if filte
+00000eb0: 725b 695d 2061 6e64 206e 6f74 205f 6973  r[i] and not _is
+00000ec0: 6e61 6e28 785b 695d 293a 0d0a 2020 2020  nan(x[i]):..    
+00000ed0: 2020 2020 2020 2020 7265 7420 2b3d 2078          ret += x
+00000ee0: 5b69 5d0d 0a20 2020 2020 2020 2020 2020  [i]..           
+00000ef0: 206c 656e 6774 6820 2b3d 2031 0d0a 2020   length += 1..  
+00000f00: 2020 7265 7475 726e 2028 7265 742c 206c    return (ret, l
+00000f10: 656e 6774 6829 0d0a 0d0a 0d0a 6465 6620  ength)......def 
+00000f20: 5f66 6e61 6e73 756d 2878 2c20 6669 6c74  _fnansum(x, filt
+00000f30: 6572 293a 0d0a 2020 2020 7265 7475 726e  er):..    return
+00000f40: 205f 666e 616e 7375 6d68 656c 7065 7228   _fnansumhelper(
+00000f50: 782c 2066 696c 7465 7229 5b30 5d0d 0a0d  x, filter)[0]...
+00000f60: 0a0d 0a64 6566 205f 666e 616e 6d65 616e  ...def _fnanmean
+00000f70: 2878 2c20 6669 6c74 6572 293a 0d0a 2020  (x, filter):..  
+00000f80: 2020 2874 6f74 2c20 6e29 203d 205f 666e    (tot, n) = _fn
+00000f90: 616e 7375 6d68 656c 7065 7228 782c 2066  ansumhelper(x, f
+00000fa0: 696c 7465 7229 0d0a 2020 2020 7265 7475  ilter)..    retu
+00000fb0: 726e 2074 6f74 202f 206e 0d0a 0d0a 0d0a  rn tot / n......
+00000fc0: 406e 622e 6e6a 6974 2870 6172 616c 6c65  @nb.njit(paralle
+00000fd0: 6c3d 5472 7565 290d 0a64 6566 205f 666e  l=True)..def _fn
+00000fe0: 616e 7661 7228 782c 2066 696c 7465 7229  anvar(x, filter)
+00000ff0: 3a0d 0a20 2020 2061 6263 203d 2030 2e30  :..    abc = 0.0
+00001000: 0d0a 2020 2020 6c65 6e67 7468 203d 2030  ..    length = 0
+00001010: 0d0a 0d0a 2020 2020 666f 7220 6920 696e  ....    for i in
+00001020: 206e 622e 7072 616e 6765 286c 656e 2878   nb.prange(len(x
+00001030: 2929 3a0d 0a20 2020 2020 2020 2069 6620  )):..        if 
+00001040: 6669 6c74 6572 5b69 5d20 616e 6420 6e6f  filter[i] and no
+00001050: 7420 5f69 736e 616e 2878 5b69 5d29 3a0d  t _isnan(x[i]):.
+00001060: 0a20 2020 2020 2020 2020 2020 2061 6263  .            abc
+00001070: 202b 3d20 785b 695d 0d0a 2020 2020 2020   += x[i]..      
+00001080: 2020 2020 2020 6c65 6e67 7468 202b 3d20        length += 
+00001090: 310d 0a0d 0a20 2020 206d 6561 6e20 3d20  1....    mean = 
+000010a0: 6162 6320 2f20 6c65 6e67 7468 0d0a 0d0a  abc / length....
+000010b0: 2020 2020 7265 7420 3d20 302e 300d 0a0d      ret = 0.0...
+000010c0: 0a20 2020 2066 6f72 2069 2069 6e20 6e62  .    for i in nb
+000010d0: 2e70 7261 6e67 6528 6c65 6e28 7829 293a  .prange(len(x)):
+000010e0: 0d0a 2020 2020 2020 2020 6966 2066 696c  ..        if fil
+000010f0: 7465 725b 695d 2061 6e64 206e 6f74 205f  ter[i] and not _
+00001100: 6973 6e61 6e28 785b 695d 293a 0d0a 2020  isnan(x[i]):..  
+00001110: 2020 2020 2020 2020 2020 7265 7420 2b3d            ret +=
+00001120: 2028 785b 695d 202d 206d 6561 6e29 202a   (x[i] - mean) *
+00001130: 2a20 320d 0a20 2020 2069 6620 6c65 6e67  * 2..    if leng
+00001140: 7468 203e 2031 3a0d 0a20 2020 2020 2020  th > 1:..       
+00001150: 2072 6574 7572 6e20 7265 7420 2f20 286c   return ret / (l
+00001160: 656e 6774 6820 2d20 3129 0d0a 2020 2020  ength - 1)..    
+00001170: 6966 206c 656e 6774 6820 3d3d 2031 3a0d  if length == 1:.
+00001180: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00001190: 6e70 2e4e 614e 0d0a 2020 2020 6966 206c  np.NaN..    if l
+000011a0: 656e 6774 6820 3d3d 2030 3a0d 0a20 2020  ength == 0:..   
+000011b0: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
+000011c0: 4572 726f 7228 2254 7269 6564 2074 6f20  Error("Tried to 
+000011d0: 7461 6b65 2074 6865 2076 6172 6961 6e63  take the varianc
+000011e0: 6520 6f66 2061 6e20 656d 7074 7920 6172  e of an empty ar
+000011f0: 7261 792e 2229 0d0a 0d0a 0d0a 6465 6620  ray.")......def 
+00001200: 5f66 6e61 6e73 7464 2878 2c20 6669 6c74  _fnanstd(x, filt
+00001210: 6572 293a 0d0a 2020 2020 7265 7475 726e  er):..    return
+00001220: 206d 6174 682e 7371 7274 285f 666e 616e   math.sqrt(_fnan
+00001230: 7661 7228 782c 2066 696c 7465 7229 290d  var(x, filter)).
+00001240: 0a0d 0a0d 0a40 6e62 2e6e 6a69 7428 7061  .....@nb.njit(pa
+00001250: 7261 6c6c 656c 3d54 7275 6529 0d0a 6465  rallel=True)..de
+00001260: 6620 5f66 7375 6d68 656c 7065 7228 782c  f _fsumhelper(x,
+00001270: 2066 696c 7465 7229 3a0d 0a20 2020 2072   filter):..    r
+00001280: 6574 203d 2030 0d0a 2020 2020 6c65 6e67  et = 0..    leng
+00001290: 7468 203d 2030 0d0a 2020 2020 666f 7220  th = 0..    for 
+000012a0: 6920 696e 206e 622e 7072 616e 6765 286c  i in nb.prange(l
+000012b0: 656e 2878 2929 3a0d 0a20 2020 2020 2020  en(x)):..       
+000012c0: 2069 6620 6669 6c74 6572 5b69 5d3a 0d0a   if filter[i]:..
+000012d0: 2020 2020 2020 2020 2020 2020 7265 7420              ret 
+000012e0: 2b3d 2078 5b69 5d0d 0a20 2020 2020 2020  += x[i]..       
+000012f0: 2020 2020 206c 656e 6774 6820 2b3d 2031       length += 1
+00001300: 0d0a 2020 2020 7265 7475 726e 2028 7265  ..    return (re
+00001310: 742c 206c 656e 6774 6829 0d0a 0d0a 0d0a  t, length)......
+00001320: 6465 6620 5f66 7375 6d28 782c 2066 696c  def _fsum(x, fil
+00001330: 7465 7229 3a0d 0a20 2020 2072 6574 7572  ter):..    retur
+00001340: 6e20 5f66 7375 6d68 656c 7065 7228 782c  n _fsumhelper(x,
+00001350: 2066 696c 7465 7229 5b30 5d0d 0a0d 0a0d   filter)[0].....
+00001360: 0a64 6566 205f 666d 6561 6e28 782c 2066  .def _fmean(x, f
+00001370: 696c 7465 7229 3a0d 0a20 2020 2028 746f  ilter):..    (to
+00001380: 742c 206e 2920 3d20 5f66 7375 6d68 656c  t, n) = _fsumhel
+00001390: 7065 7228 782c 2066 696c 7465 7229 0d0a  per(x, filter)..
+000013a0: 2020 2020 7265 7475 726e 2074 6f74 202f      return tot /
+000013b0: 206e 0d0a 0d0a 0d0a 406e 622e 6e6a 6974   n......@nb.njit
+000013c0: 2870 6172 616c 6c65 6c3d 5472 7565 290d  (parallel=True).
+000013d0: 0a64 6566 205f 6676 6172 2878 2c20 6669  .def _fvar(x, fi
+000013e0: 6c74 6572 293a 0d0a 2020 2020 6162 6320  lter):..    abc 
+000013f0: 3d20 302e 300d 0a20 2020 206c 656e 6774  = 0.0..    lengt
+00001400: 6820 3d20 300d 0a0d 0a20 2020 2066 6f72  h = 0....    for
+00001410: 2069 2069 6e20 6e62 2e70 7261 6e67 6528   i in nb.prange(
+00001420: 6c65 6e28 7829 293a 0d0a 2020 2020 2020  len(x)):..      
+00001430: 2020 6966 2066 696c 7465 725b 695d 3a0d    if filter[i]:.
+00001440: 0a20 2020 2020 2020 2020 2020 2061 6263  .            abc
+00001450: 202b 3d20 785b 695d 0d0a 2020 2020 2020   += x[i]..      
+00001460: 2020 2020 2020 6c65 6e67 7468 202b 3d20        length += 
+00001470: 310d 0a0d 0a20 2020 206d 6561 6e20 3d20  1....    mean = 
+00001480: 6162 6320 2f20 6c65 6e67 7468 0d0a 0d0a  abc / length....
+00001490: 2020 2020 7265 7420 3d20 302e 300d 0a0d      ret = 0.0...
+000014a0: 0a20 2020 2066 6f72 2069 2069 6e20 6e62  .    for i in nb
+000014b0: 2e70 7261 6e67 6528 6c65 6e28 7829 293a  .prange(len(x)):
+000014c0: 0d0a 2020 2020 2020 2020 6966 2066 696c  ..        if fil
+000014d0: 7465 725b 695d 3a0d 0a20 2020 2020 2020  ter[i]:..       
+000014e0: 2020 2020 2072 6574 202b 3d20 2878 5b69       ret += (x[i
+000014f0: 5d20 2d20 6d65 616e 2920 2a2a 2032 0d0a  ] - mean) ** 2..
+00001500: 2020 2020 6966 206c 656e 6774 6820 3e20      if length > 
+00001510: 313a 0d0a 2020 2020 2020 2020 7265 7475  1:..        retu
+00001520: 726e 2072 6574 202f 2028 6c65 6e67 7468  rn ret / (length
+00001530: 202d 2031 290d 0a20 2020 2069 6620 6c65   - 1)..    if le
+00001540: 6e67 7468 203d 3d20 313a 0d0a 2020 2020  ngth == 1:..    
+00001550: 2020 2020 7265 7475 726e 206e 702e 4e61      return np.Na
+00001560: 4e0d 0a20 2020 2069 6620 6c65 6e67 7468  N..    if length
+00001570: 203d 3d20 303a 0d0a 2020 2020 2020 2020   == 0:..        
+00001580: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
+00001590: 2822 5472 6965 6420 746f 2074 616b 6520  ("Tried to take 
+000015a0: 7468 6520 7661 7269 616e 6365 206f 6620  the variance of 
+000015b0: 616e 2065 6d70 7479 2061 7272 6179 2e22  an empty array."
+000015c0: 290d 0a0d 0a0d 0a64 6566 205f 6673 7464  )......def _fstd
+000015d0: 2878 2c20 6669 6c74 6572 293a 0d0a 2020  (x, filter):..  
+000015e0: 2020 7265 7475 726e 206d 6174 682e 7371    return math.sq
+000015f0: 7274 285f 6676 6172 2878 2c20 6669 6c74  rt(_fvar(x, filt
+00001600: 6572 2929 0d0a 0d0a 0d0a 2320 2d2d 2d2d  er))......# ----
+00001610: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001620: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001640: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 6465 6620  ----------..def 
+00001650: 4641 5f46 524f 4d5f 5549 4e54 3828 7569  FA_FROM_UINT8(ui
+00001660: 6e74 3861 7272 293a 0d0a 2020 2020 2222  nt8arr):..    ""
+00001670: 220d 0a20 2020 2055 7365 6420 696e 2064  "..    Used in d
+00001680: 652d 7069 636b 6c69 6e67 0d0a 2020 2020  e-pickling..    
+00001690: 2222 220d 0a20 2020 2072 6574 7572 6e20  """..    return 
+000016a0: 7263 2e43 6f6d 7072 6573 7344 6563 6f6d  rc.CompressDecom
+000016b0: 7072 6573 7341 7272 6179 7328 5b75 696e  pressArrays([uin
+000016c0: 7438 6172 725d 2c20 3129 5b30 5d0d 0a0d  t8arr], 1)[0]...
+000016d0: 0a0d 0a23 202d 2d2d 2d2d 2d2d 2d2d 2d2d  ...# -----------
+000016e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000016f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001700: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001710: 2d2d 2d0d 0a64 6566 2046 415f 4652 4f4d  ---..def FA_FROM
+00001720: 5f42 5954 4553 5452 494e 4728 6279 7465  _BYTESTRING(byte
+00001730: 7374 7269 6e67 293a 0d0a 2020 2020 2222  string):..    ""
+00001740: 220d 0a20 2020 2055 7365 6420 696e 2064  "..    Used in d
+00001750: 652d 7069 636b 6c69 6e67 2077 6865 6e20  e-pickling when 
+00001760: 746f 7374 7269 6e67 2829 2075 7365 6420  tostring() used 
+00001770: 2863 7572 7265 6e74 6c79 2064 6973 6162  (currently disab
+00001780: 6c65 6429 0d0a 2020 2020 2222 220d 0a20  led)..    """.. 
+00001790: 2020 2072 6574 7572 6e20 4641 5f46 524f     return FA_FRO
+000017a0: 4d5f 5549 4e54 3828 6e70 2e66 726f 6d62  M_UINT8(np.fromb
+000017b0: 7566 6665 7228 6279 7465 7374 7269 6e67  uffer(bytestring
+000017c0: 2c20 6474 7970 653d 6e70 2e75 696e 7438  , dtype=np.uint8
+000017d0: 2929 0d0a 0d0a 0d0a 2320 2d2d 2d2d 2d2d  ))......# ------
+000017e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000017f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001800: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001810: 2d2d 2d2d 2d2d 2d2d 0d0a 6465 6620 6c6f  --------..def lo
+00001820: 6769 6361 6c5f 6669 6e64 5f63 6f6d 6d6f  gical_find_commo
+00001830: 6e5f 7479 7065 2861 7272 6179 7479 7065  n_type(arraytype
+00001840: 732c 2073 6361 6c61 7274 7970 6573 2c20  s, scalartypes, 
+00001850: 7363 616c 6172 7661 6c29 3a0d 0a20 2020  scalarval):..   
+00001860: 2022 2222 0d0a 2020 2020 6173 7375 6d65   """..    assume
+00001870: 7320 6f6e 6520 7363 616c 6172 2061 6e64  s one scalar and
+00001880: 206f 6e65 2061 7272 6179 0d0a 0d0a 2020   one array....  
+00001890: 2020 2222 220d 0a20 2020 2073 6361 6c61    """..    scala
+000018a0: 7220 3d20 7363 616c 6172 7479 7065 735b  r = scalartypes[
+000018b0: 305d 0d0a 2020 2020 6172 7261 7920 3d20  0]..    array = 
+000018c0: 6172 7261 7974 7970 6573 5b30 5d0d 0a0d  arraytypes[0]...
+000018d0: 0a20 2020 2075 6e73 6967 6e65 6420 3d20  .    unsigned = 
+000018e0: 4661 6c73 650d 0a20 2020 2069 7369 6e74  False..    isint
+000018f0: 6567 6572 203d 2046 616c 7365 0d0a 0d0a  eger = False....
+00001900: 2020 2020 2320 544a 4420 7468 6973 2072      # TJD this r
+00001910: 6f75 7469 6e65 206e 6565 6473 2074 6f20  outine needs to 
+00001920: 6265 2072 6577 7269 7474 656e 0d0a 2020  be rewritten..  
+00001930: 2020 2320 6361 6e20 6368 6563 6b20 6973    # can check is
+00001940: 696e 7374 616e 6365 2873 6361 6c61 722c  instance(scalar,
+00001950: 286e 702e 696e 7465 6765 722c 2069 6e74  (np.integer, int
+00001960: 2929 0d0a 0d0a 2020 2020 2320 6966 2074  ))....    # if t
+00001970: 6869 7320 636f 6d65 7320 696e 2061 7320  his comes in as 
+00001980: 6e70 2e69 6e74 3634 2061 6e64 206e 6f74  np.int64 and not
+00001990: 2061 2064 7479 7065 2c20 7765 2063 6f6e   a dtype, we con
+000019a0: 7665 7274 2074 6f20 6120 6474 7970 650d  vert to a dtype.
+000019b0: 0a20 2020 2069 6620 6e6f 7420 6861 7361  .    if not hasa
+000019c0: 7474 7228 7363 616c 6172 2c20 2263 6861  ttr(scalar, "cha
+000019d0: 7222 293a 0d0a 2020 2020 2020 2020 7363  r"):..        sc
+000019e0: 616c 6172 203d 206e 702e 6474 7970 6528  alar = np.dtype(
+000019f0: 7363 616c 6172 290d 0a0d 0a20 2020 2069  scalar)....    i
+00001a00: 6620 7363 616c 6172 2e63 6861 7220 696e  f scalar.char in
+00001a10: 204e 756d 7079 4368 6172 5479 7065 732e   NumpyCharTypes.
+00001a20: 556e 7369 676e 6564 496e 7465 6765 723a  UnsignedInteger:
+00001a30: 0d0a 2020 2020 2020 2020 756e 7369 676e  ..        unsign
+00001a40: 6564 203d 2054 7275 650d 0a20 2020 2020  ed = True..     
+00001a50: 2020 2069 7369 6e74 6567 6572 203d 2054     isinteger = T
+00001a60: 7275 650d 0a20 2020 2069 6620 7363 616c  rue..    if scal
+00001a70: 6172 2e63 6861 7220 696e 204e 756d 7079  ar.char in Numpy
+00001a80: 4368 6172 5479 7065 732e 496e 7465 6765  CharTypes.Intege
+00001a90: 723a 0d0a 2020 2020 2020 2020 6973 696e  r:..        isin
+00001aa0: 7465 6765 7220 3d20 5472 7565 0d0a 0d0a  teger = True....
+00001ab0: 2020 2020 6966 206e 6f74 2069 7369 6e74      if not isint
+00001ac0: 6567 6572 3a0d 0a20 2020 2020 2020 2023  eger:..        #
+00001ad0: 2067 6f20 6279 206e 756d 7079 2075 7073   go by numpy ups
+00001ae0: 6361 6c65 2072 756c 6573 0d0a 2020 2020  cale rules..    
+00001af0: 2020 2020 2320 4e4f 5445 3a20 7368 6f75      # NOTE: shou
+00001b00: 6c64 2063 6f6e 7369 6465 7220 616c 6c6f  ld consider allo
+00001b10: 7769 6e67 2069 6e74 6567 6572 205e 2054  wing integer ^ T
+00001b20: 7275 6520 2d2d 206f 7220 6368 616e 6769  rue -- or changi
+00001b30: 6e67 2061 2062 6f6f 6c20 7363 616c 6172  ng a bool scalar
+00001b40: 2074 6f20 616e 2069 6e74 0d0a 2020 2020   to an int..    
+00001b50: 2020 2020 2320 7072 696e 7428 2270 756e      # print("pun
+00001b60: 7469 6e67 206e 6f74 2069 6e74 6567 6572  ting not integer
+00001b70: 2073 6361 6c61 7222 2c20 7363 616c 6172   scalar", scalar
+00001b80: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00001b90: 6e20 6e70 2e66 696e 645f 636f 6d6d 6f6e  n np.find_common
+00001ba0: 5f74 7970 6528 6172 7261 7974 7970 6573  _type(arraytypes
+00001bb0: 2c20 7363 616c 6172 7479 7065 7329 0d0a  , scalartypes)..
+00001bc0: 0d0a 2020 2020 756e 7369 676e 6564 203d  ..    unsigned =
+00001bd0: 2046 616c 7365 0d0a 2020 2020 6973 696e   False..    isin
+00001be0: 7465 6765 7220 3d20 4661 6c73 650d 0a0d  teger = False...
+00001bf0: 0a20 2020 2074 7279 3a0d 0a20 2020 2020  .    try:..     
+00001c00: 2020 2069 6620 6172 7261 792e 6368 6172     if array.char
+00001c10: 2069 6e20 4e75 6d70 7943 6861 7254 7970   in NumpyCharTyp
+00001c20: 6573 2e55 6e73 6967 6e65 6449 6e74 6567  es.UnsignedInteg
+00001c30: 6572 3a0d 0a20 2020 2020 2020 2020 2020  er:..           
+00001c40: 2075 6e73 6967 6e65 6420 3d20 5472 7565   unsigned = True
+00001c50: 0d0a 2020 2020 2020 2020 2020 2020 6973  ..            is
+00001c60: 696e 7465 6765 7220 3d20 5472 7565 0d0a  integer = True..
+00001c70: 2020 2020 2020 2020 6966 2061 7272 6179          if array
+00001c80: 2e63 6861 7220 696e 204e 756d 7079 4368  .char in NumpyCh
+00001c90: 6172 5479 7065 732e 496e 7465 6765 723a  arTypes.Integer:
+00001ca0: 0d0a 2020 2020 2020 2020 2020 2020 6973  ..            is
+00001cb0: 696e 7465 6765 7220 3d20 5472 7565 0d0a  integer = True..
+00001cc0: 2020 2020 6578 6365 7074 3a0d 0a20 2020      except:..   
+00001cd0: 2020 2020 2070 6173 730d 0a0d 0a20 2020       pass....   
+00001ce0: 2023 2069 6620 6973 696e 7374 616e 6365   # if isinstance
+00001cf0: 2861 7272 6179 2c20 696e 7429 3a0d 0a20  (array, int):.. 
+00001d00: 2020 2023 2020 2020 6973 696e 7465 6765     #    isintege
+00001d10: 7220 3d20 5472 7565 0d0a 0d0a 2020 2020  r = True....    
+00001d20: 2320 4946 2041 5252 4159 2049 5320 554e  # IF ARRAY IS UN
+00001d30: 5349 474e 4544 2042 5920 5343 414c 4152  SIGNED BY SCALAR
+00001d40: 2049 5320 5349 474e 4544 2075 7063 6173   IS SIGNED upcas
+00001d50: 740d 0a0d 0a20 2020 2069 6620 6e6f 7420  t....    if not 
+00001d60: 6973 696e 7465 6765 723a 0d0a 2020 2020  isinteger:..    
+00001d70: 2020 2020 2320 676f 2062 7920 6e75 6d70      # go by nump
+00001d80: 7920 7570 7363 616c 6520 7275 6c65 730d  y upscale rules.
+00001d90: 0a20 2020 2020 2020 2023 204e 4f54 453a  .        # NOTE:
+00001da0: 2073 686f 756c 6420 636f 6e73 6964 6572   should consider
+00001db0: 2061 6c6c 6f77 696e 6720 696e 7465 6765   allowing intege
+00001dc0: 7220 5e20 5472 7565 202d 2d20 6f72 2063  r ^ True -- or c
+00001dd0: 6861 6e67 696e 6720 6120 626f 6f6c 2073  hanging a bool s
+00001de0: 6361 6c61 7220 746f 2061 6e20 696e 740d  calar to an int.
+00001df0: 0a20 2020 2020 2020 2023 2070 7269 6e74  .        # print
+00001e00: 2822 7075 6e74 696e 6720 6e6f 7420 696e  ("punting not in
+00001e10: 7465 6765 7220 6172 7261 7922 2c20 6172  teger array", ar
+00001e20: 7261 7929 0d0a 2020 2020 2020 2020 7265  ray)..        re
+00001e30: 7475 726e 206e 702e 6669 6e64 5f63 6f6d  turn np.find_com
+00001e40: 6d6f 6e5f 7479 7065 2861 7272 6179 7479  mon_type(arrayty
+00001e50: 7065 732c 2073 6361 6c61 7274 7970 6573  pes, scalartypes
+00001e60: 290d 0a0d 0a20 2020 2066 696e 616c 203d  )....    final =
+00001e70: 204e 6f6e 650d 0a0d 0a20 2020 2073 6361   None....    sca
+00001e80: 6c61 7276 616c 203d 2069 6e74 2873 6361  larval = int(sca
+00001e90: 6c61 7276 616c 290d 0a0d 0a20 2020 2023  larval)....    #
+00001ea0: 2044 6574 6572 6d69 6e65 2074 6865 2070   Determine the p
+00001eb0: 6f73 7369 626c 6520 696e 7465 6765 7220  ossible integer 
+00001ec0: 7570 7363 616c 696e 6720 6261 7365 6420  upscaling based 
+00001ed0: 6f6e 2074 6865 2073 6361 6c61 7220 7661  on the scalar va
+00001ee0: 6c75 650d 0a20 2020 2069 6620 756e 7369  lue..    if unsi
+00001ef0: 676e 6564 3a0d 0a20 2020 2020 2020 2069  gned:..        i
+00001f00: 6620 7363 616c 6172 7661 6c20 3c3d 2032  f scalarval <= 2
+00001f10: 3535 3a0d 0a20 2020 2020 2020 2020 2020  55:..           
+00001f20: 2066 696e 616c 203d 206e 702e 7569 6e74   final = np.uint
+00001f30: 380d 0a20 2020 2020 2020 2065 6c69 6620  8..        elif 
+00001f40: 7363 616c 6172 7661 6c20 3c3d 2036 3535  scalarval <= 655
+00001f50: 3335 3a0d 0a20 2020 2020 2020 2020 2020  35:..           
+00001f60: 2066 696e 616c 203d 206e 702e 7569 6e74   final = np.uint
+00001f70: 3136 0d0a 2020 2020 2020 2020 656c 6966  16..        elif
+00001f80: 2073 6361 6c61 7276 616c 203c 3d20 2832   scalarval <= (2
+00001f90: 2a2a 3332 202d 2031 293a 0d0a 2020 2020  **32 - 1):..    
+00001fa0: 2020 2020 2020 2020 6669 6e61 6c20 3d20          final = 
+00001fb0: 6e70 2e75 696e 7433 320d 0a20 2020 2020  np.uint32..     
+00001fc0: 2020 2065 6c69 6620 7363 616c 6172 7661     elif scalarva
+00001fd0: 6c20 3c3d 2028 322a 2a36 3420 2d20 3129  l <= (2**64 - 1)
+00001fe0: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
+00001ff0: 696e 616c 203d 206e 702e 7569 6e74 3634  inal = np.uint64
+00002000: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
+00002010: 0a20 2020 2020 2020 2020 2020 2066 696e  .            fin
+00002020: 616c 203d 206e 702e 666c 6f61 7436 340d  al = np.float64.
+00002030: 0a20 2020 2065 6c73 653a 0d0a 2020 2020  .    else:..    
+00002040: 2020 2020 6966 2073 6361 6c61 7276 616c      if scalarval
+00002050: 203e 3d20 2d31 3238 2061 6e64 2073 6361   >= -128 and sca
+00002060: 6c61 7276 616c 203c 3d20 3132 373a 0d0a  larval <= 127:..
+00002070: 2020 2020 2020 2020 2020 2020 6669 6e61              fina
+00002080: 6c20 3d20 6e70 2e69 6e74 380d 0a20 2020  l = np.int8..   
+00002090: 2020 2020 2065 6c69 6620 7363 616c 6172       elif scalar
+000020a0: 7661 6c20 3e3d 202d 3332 3736 3820 616e  val >= -32768 an
+000020b0: 6420 7363 616c 6172 7661 6c20 3c3d 2033  d scalarval <= 3
+000020c0: 3237 3637 3a0d 0a20 2020 2020 2020 2020  2767:..         
+000020d0: 2020 2066 696e 616c 203d 206e 702e 696e     final = np.in
+000020e0: 7431 360d 0a20 2020 2020 2020 2065 6c69  t16..        eli
+000020f0: 6620 7363 616c 6172 7661 6c20 3e3d 202d  f scalarval >= -
+00002100: 2832 2a2a 3331 2920 616e 6420 7363 616c  (2**31) and scal
+00002110: 6172 7661 6c20 3c3d 2028 322a 2a33 3120  arval <= (2**31 
+00002120: 2d20 3129 3a0d 0a20 2020 2020 2020 2020  - 1):..         
+00002130: 2020 2066 696e 616c 203d 206e 702e 696e     final = np.in
+00002140: 7433 320d 0a20 2020 2020 2020 2065 6c69  t32..        eli
+00002150: 6620 7363 616c 6172 7661 6c20 3e3d 202d  f scalarval >= -
+00002160: 2832 2a2a 3633 2920 616e 6420 7363 616c  (2**63) and scal
+00002170: 6172 7661 6c20 3c3d 2028 322a 2a36 3320  arval <= (2**63 
+00002180: 2d20 3129 3a0d 0a20 2020 2020 2020 2020  - 1):..         
+00002190: 2020 2066 696e 616c 203d 206e 702e 696e     final = np.in
+000021a0: 7436 340d 0a20 2020 2020 2020 2065 6c73  t64..        els
+000021b0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+000021c0: 6669 6e61 6c20 3d20 6e70 2e66 6c6f 6174  final = np.float
+000021d0: 3634 0d0a 0d0a 2020 2020 6669 6e61 6c20  64....    final 
+000021e0: 3d20 6e70 2e64 7479 7065 2866 696e 616c  = np.dtype(final
+000021f0: 290d 0a0d 0a20 2020 2023 2064 6f20 6e6f  )....    # do no
+00002200: 7420 616c 6c6f 7720 646f 776e 6361 7374  t allow downcast
+00002210: 696e 670d 0a20 2020 2069 6620 6172 7261  ing..    if arra
+00002220: 792e 6e75 6d20 3c20 6669 6e61 6c2e 6e75  y.num < final.nu
+00002230: 6d3a 0d0a 2020 2020 2020 2020 2320 7072  m:..        # pr
+00002240: 696e 7428 2272 6574 7572 6e69 6e67 2066  int("returning f
+00002250: 696e 616c 222c 2066 696e 616c 290d 0a20  inal", final).. 
+00002260: 2020 2020 2020 2072 6574 7572 6e20 6669         return fi
+00002270: 6e61 6c0d 0a0d 0a20 2020 2072 6574 7572  nal....    retur
+00002280: 6e20 6172 7261 790d 0a0d 0a20 2020 2023  n array....    #
+00002290: 2069 6620 7479 7065 2861 7267 735b 305d   if type(args[0]
+000022a0: 2920 696e 2053 6361 6c61 7254 7970 653a  ) in ScalarType:
+000022b0: 0d0a 2020 2020 2320 2020 2070 7269 6e74  ..    #    print
+000022c0: 2822 636f 6e76 6572 7469 6e67 2061 7267  ("converting arg
+000022d0: 3220 746f 2022 2c20 6669 6e61 6c5f 6474  2 to ", final_dt
+000022e0: 7970 6529 0d0a 2020 2020 2320 2020 2061  ype)..    #    a
+000022f0: 7267 735b 315d 203d 2061 7267 735b 315d  rgs[1] = args[1]
+00002300: 2e61 7374 7970 6528 6669 6e61 6c5f 6474  .astype(final_dt
+00002310: 7970 6529 3b0d 0a20 2020 2023 2065 6c73  ype);..    # els
+00002320: 653a 0d0a 2020 2020 2320 2020 2070 7269  e:..    #    pri
+00002330: 6e74 2822 636f 6e76 6572 7469 6e67 2061  nt("converting a
+00002340: 7267 3120 746f 2022 2c20 6669 6e61 6c5f  rg1 to ", final_
+00002350: 6474 7970 6529 0d0a 2020 2020 2320 2020  dtype)..    #   
+00002360: 2061 7267 735b 305d 203d 2061 7267 735b   args[0] = args[
+00002370: 305d 2e61 7374 7970 6528 6669 6e61 6c5f  0].astype(final_
+00002380: 6474 7970 6529 3b0d 0a0d 0a0d 0a23 202d  dtype);......# -
+00002390: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000023a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000023b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000023c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a64  -------------..d
+000023d0: 6566 205f 4153 5459 5045 2873 656c 662c  ef _ASTYPE(self,
+000023e0: 2064 7479 7065 293a 0d0a 2020 2020 2222   dtype):..    ""
+000023f0: 2269 6e74 6572 6e61 6c20 6361 6c6c 2066  "internal call f
+00002400: 726f 6d20 6172 7261 795f 7566 756e 6320  rom array_ufunc 
+00002410: 746f 2063 6f6e 7665 7274 2061 7272 6179  to convert array
+00002420: 732e 2020 7265 7475 726e 7320 6e75 6d70  s.  returns nump
+00002430: 7920 6172 7261 7973 2222 220d 0a20 2020  y arrays"""..   
+00002440: 2023 2072 6574 7572 6e20 7365 6c66 2e61   # return self.a
+00002450: 7374 7970 6528 6474 7970 6529 0d0a 2020  stype(dtype)..  
+00002460: 2020 746f 5f6e 756d 203d 2064 7479 7065    to_num = dtype
+00002470: 2e6e 756d 0d0a 2020 2020 6966 2073 656c  .num..    if sel
+00002480: 662e 6474 7970 652e 6e75 6d20 3c3d 2031  f.dtype.num <= 1
+00002490: 3320 616e 6420 746f 5f6e 756d 203c 3d20  3 and to_num <= 
+000024a0: 3133 3a0d 0a20 2020 2020 2020 2069 6620  13:..        if 
+000024b0: 4661 7374 4172 7261 792e 5361 6665 436f  FastArray.SafeCo
+000024c0: 6e76 6572 7369 6f6e 733a 0d0a 2020 2020  nversions:..    
+000024d0: 2020 2020 2020 2020 2320 7065 7266 6f72          # perfor
+000024e0: 6d20 6120 7361 6665 2063 6f6e 7665 7273  m a safe convers
+000024f0: 696f 6e20 756e 6465 7273 7461 6e64 696e  ion understandin
+00002500: 6720 7365 6e74 696e 656c 730d 0a20 2020  g sentinels..   
+00002510: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00002520: 5479 7065 5265 6769 7374 6572 2e4d 6174  TypeRegister.Mat
+00002530: 684c 6564 6765 722e 5f41 535f 4641 5f54  hLedger._AS_FA_T
+00002540: 5950 4528 7365 6c66 2c20 746f 5f6e 756d  YPE(self, to_num
+00002550: 292e 5f6e 700d 0a20 2020 2020 2020 2065  )._np..        e
+00002560: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00002570: 2020 2320 7065 7266 6f72 6d20 756e 7361    # perform unsa
+00002580: 6665 2063 6f6e 7665 7273 696f 6e20 4e4f  fe conversion NO
+00002590: 5420 756e 6465 7273 7461 6e64 696e 6720  T understanding 
+000025a0: 7365 6e74 696e 656c 730d 0a20 2020 2020  sentinels..     
+000025b0: 2020 2020 2020 2072 6574 7572 6e20 5479         return Ty
+000025c0: 7065 5265 6769 7374 6572 2e4d 6174 684c  peRegister.MathL
+000025d0: 6564 6765 722e 5f41 535f 4641 5f54 5950  edger._AS_FA_TYP
+000025e0: 455f 554e 5341 4645 2873 656c 662c 2074  E_UNSAFE(self, t
+000025f0: 6f5f 6e75 6d29 2e5f 6e70 0d0a 0d0a 2020  o_num)._np....  
+00002600: 2020 7265 7475 726e 2073 656c 662e 6173    return self.as
+00002610: 7479 7065 2864 7479 7065 290d 0a0d 0a0d  type(dtype).....
+00002620: 0a23 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .# -------------
 00002630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00002640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00002650: 2d2d 2d2d 2d2d 2d2d 0d0a 636c 6173 7320  --------..class 
-00002660: 4661 7374 4172 7261 7928 6e70 2e6e 6461  FastArray(np.nda
-00002670: 7272 6179 293a 0d0a 2020 2020 2222 220d  rray):..    """.
-00002680: 0a0d 0a20 2020 2041 2060 4661 7374 4172  ...    A `FastAr
-00002690: 7261 7960 2069 7320 6120 312d 6469 6d65  ray` is a 1-dime
-000026a0: 6e73 696f 6e61 6c20 6172 7261 7920 6f66  nsional array of
-000026b0: 2069 7465 6d73 2074 6861 7420 6172 6520   items that are 
-000026c0: 7468 6520 7361 6d65 2064 6174 6120 7479  the same data ty
-000026d0: 7065 2e0d 0a0d 0a20 2020 2042 6563 6175  pe.....    Becau
-000026e0: 7365 2069 7427 7320 6120 7375 6263 6c61  se it's a subcla
-000026f0: 7373 206f 6620 4e75 6d50 7927 7320 606e  ss of NumPy's `n
-00002700: 756d 7079 2e6e 6461 7272 6179 602c 2061  umpy.ndarray`, a
-00002710: 6c6c 2060 606e 6461 7272 6179 6060 2066  ll ``ndarray`` f
-00002720: 756e 6374 696f 6e73 2061 6e64 2061 7474  unctions and att
-00002730: 7269 6275 7465 730d 0a20 2020 2063 616e  ributes..    can
-00002740: 2062 6520 7573 6564 2077 6974 6820 6046   be used with `F
-00002750: 6173 7441 7272 6179 6020 6f62 6a65 6374  astArray` object
-00002760: 732e 2048 6f77 6576 6572 2c20 5269 7074  s. However, Ript
-00002770: 6162 6c65 206f 7074 696d 697a 6573 206d  able optimizes m
-00002780: 616e 7920 6f66 204e 756d 5079 2773 0d0a  any of NumPy's..
-00002790: 2020 2020 6675 6e63 7469 6f6e 7320 746f      functions to
-000027a0: 206d 616b 6520 7468 656d 2066 6173 7465   make them faste
-000027b0: 7220 616e 6420 6d6f 7265 206d 656d 6f72  r and more memor
-000027c0: 792d 6566 6669 6369 656e 742e 2052 6970  y-efficient. Rip
-000027d0: 7461 626c 6520 6861 7320 616c 736f 2061  table has also a
-000027e0: 6464 6564 0d0a 2020 2020 736f 6d65 206d  dded..    some m
-000027f0: 6574 686f 6473 2e0d 0a0d 0a20 2020 2060  ethods.....    `
-00002800: 4661 7374 4172 7261 7960 206f 626a 6563  FastArray` objec
-00002810: 7473 2077 6974 6820 6d6f 7265 2074 6861  ts with more tha
-00002820: 6e20 3120 6469 6d65 6e73 696f 6e20 6172  n 1 dimension ar
-00002830: 6520 6e6f 7420 7375 7070 6f72 7465 642e  e not supported.
-00002840: 0d0a 0d0a 2020 2020 5365 6520 604e 756d  ....    See `Num
-00002850: 5079 2773 0d0a 2020 2020 646f 6373 203c  Py's..    docs <
-00002860: 6874 7470 733a 2f2f 6e75 6d70 792e 6f72  https://numpy.or
-00002870: 672f 6465 7664 6f63 732f 7265 6665 7265  g/devdocs/refere
-00002880: 6e63 652f 6765 6e65 7261 7465 642f 6e75  nce/generated/nu
-00002890: 6d70 792e 6e64 6172 7261 792e 6874 6d6c  mpy.ndarray.html
-000028a0: 3e60 5f20 666f 720d 0a20 2020 2064 6574  >`_ for..    det
-000028b0: 6169 6c73 206f 6e20 616c 6c20 6060 6e64  ails on all ``nd
-000028c0: 6172 7261 7960 6020 6d65 7468 6f64 7320  array`` methods 
-000028d0: 616e 6420 6174 7472 6962 7574 6573 2e0d  and attributes..
-000028e0: 0a0d 0a20 2020 2050 6172 616d 6574 6572  ...    Parameter
-000028f0: 730d 0a20 2020 202d 2d2d 2d2d 2d2d 2d2d  s..    ---------
-00002900: 2d0d 0a20 2020 2061 7272 203a 2061 7272  -..    arr : arr
-00002910: 6179 2c20 6974 6572 6162 6c65 2c20 6f72  ay, iterable, or
-00002920: 2073 6361 6c61 7220 7661 6c75 650d 0a20   scalar value.. 
-00002930: 2020 2020 2020 2043 6f6e 7461 696e 7320         Contains 
-00002940: 6461 7461 2074 6f20 6265 2073 746f 7265  data to be store
-00002950: 6420 696e 2074 6865 2060 4661 7374 4172  d in the `FastAr
-00002960: 7261 7960 2e0d 0a0d 0a20 2020 202a 2a6b  ray`.....    **k
-00002970: 7761 7267 730d 0a20 2020 2020 2020 2041  wargs..        A
-00002980: 6464 6974 696f 6e61 6c20 6b65 7977 6f72  dditional keywor
-00002990: 6420 6172 6775 6d65 6e74 7320 746f 2062  d arguments to b
-000029a0: 6520 7061 7373 6564 2074 6f20 7468 6520  e passed to the 
-000029b0: 6675 6e63 7469 6f6e 2e0d 0a0d 0a20 2020  function.....   
-000029c0: 204e 6f74 6573 0d0a 2020 2020 2d2d 2d2d   Notes..    ----
-000029d0: 2d0d 0a20 2020 2054 6f20 696d 7072 6f76  -..    To improv
-000029e0: 6520 7065 7266 6f72 6d61 6e63 652c 2060  e performance, `
-000029f0: 4661 7374 4172 7261 7960 206f 626a 6563  FastArray` objec
-00002a00: 7473 2074 616b 6520 6f76 6572 2073 6f6d  ts take over som
-00002a10: 6520 6f66 204e 756d 5079 2773 2075 6e69  e of NumPy's uni
-00002a20: 7665 7273 616c 2066 756e 6374 696f 6e73  versal functions
-00002a30: 0d0a 2020 2020 2875 6675 6e63 7329 2c20  ..    (ufuncs), 
-00002a40: 7573 6520 6172 7261 7920 7265 6379 636c  use array recycl
-00002a50: 696e 6720 616e 6420 6d75 6c74 6970 6c65  ing and multiple
-00002a60: 2074 6872 6561 6473 2c20 616e 6420 7061   threads, and pa
-00002a70: 7373 2063 6572 7461 696e 206d 6574 686f  ss certain metho
-00002a80: 6420 6361 6c6c 7320 746f 0d0a 2020 2020  d calls to..    
-00002a90: 6042 6f74 746c 656e 6563 6b20 3c68 7474  `Bottleneck <htt
-00002aa0: 7073 3a2f 2f6b 7767 6f6f 646d 616e 2e67  ps://kwgoodman.g
-00002ab0: 6974 6875 622e 696f 2f62 6f74 746c 656e  ithub.io/bottlen
-00002ac0: 6563 6b2d 646f 632f 696e 6465 782e 6874  eck-doc/index.ht
-00002ad0: 6d6c 3e60 5f2e 0d0a 0d0a 2020 2020 4e6f  ml>`_.....    No
-00002ae0: 7465 2074 6861 7420 7768 656e 6576 6572  te that whenever
-00002af0: 2052 6970 7461 626c 6520 6861 7320 696d   Riptable has im
-00002b00: 706c 656d 656e 7465 6420 6974 7320 6f77  plemented its ow
-00002b10: 6e20 7665 7273 696f 6e20 6f66 0d0a 2020  n version of..  
-00002b20: 2020 616e 2065 7869 7374 696e 6720 4e75    an existing Nu
-00002b30: 6d50 7920 6d65 7468 6f64 2c20 6120 6361  mPy method, a ca
-00002b40: 6c6c 2074 6f20 7468 6520 4e75 6d50 7920  ll to the NumPy 
-00002b50: 6d65 7468 6f64 2072 6573 756c 7473 2069  method results i
-00002b60: 6e20 6120 6361 6c6c 2074 6f20 7468 650d  n a call to the.
-00002b70: 0a20 2020 206f 7074 696d 697a 6564 2052  .    optimized R
-00002b80: 6970 7461 626c 6520 7665 7273 696f 6e20  iptable version 
-00002b90: 696e 7374 6561 642e 2057 6520 656e 636f  instead. We enco
-00002ba0: 7572 6167 6520 7573 6572 7320 746f 2064  urage users to d
-00002bb0: 6972 6563 746c 7920 6361 6c6c 2074 6865  irectly call the
-00002bc0: 2052 6970 7461 626c 650d 0a20 2020 206d   Riptable..    m
-00002bd0: 6574 686f 6420 696e 206f 7264 6572 2074  ethod in order t
-00002be0: 6f20 6176 6f69 6420 616e 7920 636f 6e66  o avoid any conf
-00002bf0: 7573 696f 6e20 6173 2074 6f20 7768 6174  usion as to what
-00002c00: 206d 6574 686f 6420 6973 2061 6374 7561   method is actua
-00002c10: 6c6c 7920 6265 696e 6720 6361 6c6c 6564  lly being called
-00002c20: 2e0d 0a0d 0a20 2020 2053 6565 2074 6865  .....    See the
-00002c30: 206c 6973 7420 6f66 2060 4e75 6d50 7920   list of `NumPy 
-00002c40: 4d65 7468 6f64 7320 4f70 7469 6d69 7a65  Methods Optimize
-00002c50: 6420 6279 2052 6970 7461 626c 6520 666f  d by Riptable fo
-00002c60: 7220 4661 7374 4172 7261 7973 0d0a 2020  r FastArrays..  
-00002c70: 2020 3c68 7474 7073 3a74 7574 6f72 6961    <https:tutoria
-00002c80: 6c5f 6e75 6d70 795f 7274 2e68 746d 6c3e  l_numpy_rt.html>
-00002c90: 605f 2e0d 0a0d 0a0d 0a20 2020 2045 7861  `_.......    Exa
-00002ca0: 6d70 6c65 730d 0a20 2020 202d 2d2d 2d2d  mples..    -----
-00002cb0: 2d2d 2d0d 0a20 2020 202a 2a43 6f6e 7374  ---..    **Const
-00002cc0: 7275 6374 2061 2046 6173 7441 7272 6179  ruct a FastArray
-00002cd0: 2a2a 0d0a 0d0a 2020 2020 5061 7373 2061  **....    Pass a
-00002ce0: 206c 6973 7420 746f 2074 6865 2063 6f6e   list to the con
-00002cf0: 7374 7275 6374 6f72 3a0d 0a0d 0a20 2020  structor:....   
-00002d00: 203e 3e3e 2072 742e 4661 7374 4172 7261   >>> rt.FastArra
-00002d10: 7928 5b31 2c20 322c 2033 2c20 342c 2035  y([1, 2, 3, 4, 5
-00002d20: 5d29 0d0a 2020 2020 4661 7374 4172 7261  ])..    FastArra
-00002d30: 7928 5b31 2c20 322c 2033 2c20 342c 2035  y([1, 2, 3, 4, 5
-00002d40: 5d29 0d0a 0d0a 2020 2020 3e3e 3e20 234e  ])....    >>> #N
-00002d50: 4f54 453a 2072 742e 4641 2061 6c73 6f20  OTE: rt.FA also 
-00002d60: 776f 726b 732e 0d0a 2020 2020 3e3e 3e20  works...    >>> 
-00002d70: 7274 2e46 4128 5b31 2e30 2c20 322e 302c  rt.FA([1.0, 2.0,
-00002d80: 2033 2e30 2c20 342e 302c 2035 2e30 5d29   3.0, 4.0, 5.0])
-00002d90: 0d0a 2020 2020 4661 7374 4172 7261 7928  ..    FastArray(
-00002da0: 5b31 2e2c 2032 2e2c 2033 2e2c 2034 2e2c  [1., 2., 3., 4.,
-00002db0: 2035 2e5d 290d 0a0d 0a20 2020 204f 7220   5.])....    Or 
-00002dc0: 7573 6520 6120 7574 696c 6974 7920 6675  use a utility fu
-00002dd0: 6e63 7469 6f6e 3a0d 0a0d 0a20 2020 203e  nction:....    >
-00002de0: 3e3e 2072 742e 6675 6c6c 2831 302c 2030  >> rt.full(10, 0
-00002df0: 2e37 290d 0a20 2020 2046 6173 7441 7272  .7)..    FastArr
-00002e00: 6179 285b 302e 372c 2030 2e37 2c20 302e  ay([0.7, 0.7, 0.
-00002e10: 372c 2030 2e37 2c20 302e 372c 2030 2e37  7, 0.7, 0.7, 0.7
-00002e20: 2c20 302e 372c 2030 2e37 2c20 302e 372c  , 0.7, 0.7, 0.7,
-00002e30: 2030 2e37 5d29 0d0a 0d0a 2020 2020 3e3e   0.7])....    >>
-00002e40: 3e20 7274 2e61 7261 6e67 6528 3130 290d  > rt.arange(10).
-00002e50: 0a20 2020 2046 6173 7441 7272 6179 285b  .    FastArray([
-00002e60: 302c 2031 2c20 322c 2033 2c20 342c 2035  0, 1, 2, 3, 4, 5
-00002e70: 2c20 362c 2037 2c20 382c 2039 5d29 0d0a  , 6, 7, 8, 9])..
-00002e80: 0d0a 2020 2020 596f 7520 6361 6e20 6f70  ..    You can op
-00002e90: 7469 6f6e 616c 6c79 2073 7065 6369 6679  tionally specify
-00002ea0: 2061 2064 6174 6120 7479 7065 3a0d 0a0d   a data type:...
-00002eb0: 0a20 2020 203e 3e3e 2078 203d 2072 742e  .    >>> x = rt.
-00002ec0: 4661 7374 4172 7261 7928 5b33 2c20 362c  FastArray([3, 6,
-00002ed0: 2031 305d 2c20 2064 7479 7065 203d 2072   10],  dtype = r
-00002ee0: 742e 666c 6f61 7436 3429 0d0a 2020 2020  t.float64)..    
-00002ef0: 3e3e 3e20 782c 2078 2e64 7479 7065 0d0a  >>> x, x.dtype..
-00002f00: 2020 2020 2846 6173 7441 7272 6179 285b      (FastArray([
-00002f10: 2033 2e2c 2020 362e 2c20 3130 2e5d 292c   3.,  6., 10.]),
-00002f20: 2064 7479 7065 2827 666c 6f61 7436 3427   dtype('float64'
-00002f30: 2929 0d0a 0d0a 2020 2020 3e3e 3e20 2320  ))....    >>> # 
-00002f40: 5573 696e 6720 6120 7374 7269 6e67 2073  Using a string s
-00002f50: 686f 7274 6375 743a 0d0a 2020 2020 3e3e  hortcut:..    >>
-00002f60: 3e20 7820 3d20 7274 2e46 6173 7441 7272  > x = rt.FastArr
-00002f70: 6179 285b 332c 362c 3130 5d2c 2020 6474  ay([3,6,10],  dt
-00002f80: 7970 6520 3d20 2766 6c6f 6174 3634 2729  ype = 'float64')
-00002f90: 0d0a 2020 2020 3e3e 3e20 782c 2078 2e64  ..    >>> x, x.d
-00002fa0: 7479 7065 0d0a 2020 2020 2846 6173 7441  type..    (FastA
-00002fb0: 7272 6179 285b 2033 2e2c 2020 362e 2c20  rray([ 3.,  6., 
-00002fc0: 3130 2e5d 292c 2064 7479 7065 2827 666c  10.]), dtype('fl
-00002fd0: 6f61 7436 3427 2929 0d0a 0d0a 2020 2020  oat64'))....    
-00002fe0: 4279 2064 6566 6175 6c74 2c20 6368 6172  By default, char
-00002ff0: 6163 7465 7273 2061 7265 2073 746f 7265  acters are store
-00003000: 6420 6173 2062 7974 6520 7374 7269 6e67  d as byte string
-00003010: 732e 2057 6865 6e20 6060 756e 6963 6f64  s. When ``unicod
-00003020: 653d 5472 7565 6060 2c0d 0a20 2020 2074  e=True``,..    t
-00003030: 6865 2060 4661 7374 4172 7261 7960 2061  he `FastArray` a
-00003040: 6c6c 6f77 7320 556e 6963 6f64 6520 6368  llows Unicode ch
-00003050: 6172 6163 7465 7273 2e0d 0a0d 0a20 2020  aracters.....   
-00003060: 203e 3e3e 2072 742e 4641 286c 6973 7428   >>> rt.FA(list(
-00003070: 2761 6263 2729 2c20 756e 6963 6f64 653d  'abc'), unicode=
-00003080: 5472 7565 290d 0a20 2020 2046 6173 7441  True)..    FastA
-00003090: 7272 6179 285b 2761 272c 2027 6227 2c20  rray(['a', 'b', 
-000030a0: 2763 275d 2c20 6474 7970 653d 273c 5531  'c'], dtype='<U1
-000030b0: 2729 0d0a 0d0a 2020 2020 546f 2063 6f6e  ')....    To con
-000030c0: 7665 7274 2061 6e20 6578 6973 7469 6e67  vert an existing
-000030d0: 204e 756d 5079 2061 7272 6179 2c20 7573   NumPy array, us
-000030e0: 6520 7468 6520 6046 6173 7441 7272 6179  e the `FastArray
-000030f0: 6020 636f 6e73 7472 7563 746f 722e 0d0a  ` constructor...
-00003100: 0d0a 2020 2020 3e3e 3e20 6e70 5f61 7272  ..    >>> np_arr
-00003110: 203d 206e 702e 6172 7261 7928 5b31 2c20   = np.array([1, 
-00003120: 322c 2033 5d29 0d0a 2020 2020 3e3e 3e20  2, 3])..    >>> 
-00003130: 7274 2e46 4128 6e70 5f61 7272 290d 0a20  rt.FA(np_arr).. 
-00003140: 2020 2046 6173 7441 7272 6179 285b 312c     FastArray([1,
-00003150: 2032 2c20 335d 290d 0a0d 0a20 2020 2054   2, 3])....    T
-00003160: 6f20 7669 6577 2074 6865 204e 756d 5079  o view the NumPy
-00003170: 2061 7272 6179 2061 7320 6120 6046 6173   array as a `Fas
-00003180: 7441 7272 6179 6020 2877 6869 6368 2069  tArray` (which i
-00003190: 7320 736c 6967 6874 6c79 206c 6573 7320  s slightly less 
-000031a0: 6578 7065 6e73 6976 6520 7468 616e 0d0a  expensive than..
-000031b0: 2020 2020 7573 696e 6720 7468 6520 636f      using the co
-000031c0: 6e73 7472 7563 746f 7229 2c20 7573 6520  nstructor), use 
-000031d0: 7468 6520 6076 6965 7760 206d 6574 686f  the `view` metho
-000031e0: 642e 0d0a 0d0a 2020 2020 3e3e 3e20 6661  d.....    >>> fa
-000031f0: 203d 206e 705f 6172 722e 7669 6577 2846   = np_arr.view(F
-00003200: 4129 0d0a 2020 2020 3e3e 3e20 6661 0d0a  A)..    >>> fa..
-00003210: 2020 2020 4661 7374 4172 7261 7928 5b31      FastArray([1
-00003220: 2c20 322c 2033 5d29 0d0a 0d0a 2020 2020  , 2, 3])....    
-00003230: 546f 2076 6965 7720 6974 2061 7320 6120  To view it as a 
-00003240: 4e75 6d50 7920 6172 7261 7920 6167 6169  NumPy array agai
-00003250: 6e3a 0d0a 0d0a 2020 2020 3e3e 3e20 6661  n:....    >>> fa
-00003260: 2e76 6965 7728 6e70 2e6e 6461 7272 6179  .view(np.ndarray
-00003270: 290d 0a20 2020 2061 7272 6179 285b 312c  )..    array([1,
-00003280: 2032 2c20 335d 290d 0a0d 0a20 2020 203e   2, 3])....    >
-00003290: 3e3e 2023 2041 6c74 6572 6e61 7469 7665  >> # Alternative
-000032a0: 6c79 3a0d 0a20 2020 203e 3e3e 2066 612e  ly:..    >>> fa.
-000032b0: 5f6e 700d 0a20 2020 2061 7272 6179 285b  _np..    array([
-000032c0: 312c 2032 2c20 335d 290d 0a0d 0a20 2020  1, 2, 3])....   
-000032d0: 202a 2a47 6574 2061 2053 7562 7365 7420   **Get a Subset 
-000032e0: 6f66 2061 2046 6173 7441 7272 6179 2a2a  of a FastArray**
-000032f0: 0d0a 0d0a 2020 2020 596f 7520 6361 6e20  ....    You can 
-00003300: 7573 6520 7374 616e 6461 7264 2050 7974  use standard Pyt
-00003310: 686f 6e20 736c 6963 696e 6720 6e6f 7461  hon slicing nota
-00003320: 7469 6f6e 206f 7220 6661 6e63 7920 696e  tion or fancy in
-00003330: 6465 7869 6e67 2074 6f20 6163 6365 7373  dexing to access
-00003340: 2061 0d0a 2020 2020 7375 6273 6574 206f   a..    subset o
-00003350: 6620 6120 6046 6173 7441 7272 6179 602e  f a `FastArray`.
-00003360: 0d0a 0d0a 2020 2020 3e3e 3e20 2320 4372  ....    >>> # Cr
-00003370: 6561 7465 2061 2046 6173 7441 7272 6179  eate a FastArray
-00003380: 3a0d 0a20 2020 203e 3e3e 2061 7272 6179  :..    >>> array
-00003390: 203d 2072 742e 6172 616e 6765 2838 292a   = rt.arange(8)*
-000033a0: 2a32 0d0a 2020 2020 3e3e 3e20 6172 7261  *2..    >>> arra
-000033b0: 790d 0a20 2020 2046 6173 7441 7272 6179  y..    FastArray
-000033c0: 285b 302c 2031 2c20 342c 2039 2c20 3136  ([0, 1, 4, 9, 16
-000033d0: 2c20 3235 2c20 3336 2c20 3439 5d29 0d0a  , 25, 36, 49])..
-000033e0: 2020 2020 3e3e 3e20 2320 5573 6520 5079      >>> # Use Py
-000033f0: 7468 6f6e 2073 6c69 6369 6e67 2074 6f20  thon slicing to 
-00003400: 6765 7420 656c 656d 656e 7473 2032 2c20  get elements 2, 
-00003410: 332c 2061 6e64 2034 3a0d 0a20 2020 203e  3, and 4:..    >
-00003420: 3e3e 2061 7272 6179 5b32 3a35 5d0d 0a20  >> array[2:5].. 
-00003430: 2020 2046 6173 7441 7272 6179 285b 342c     FastArray([4,
-00003440: 2039 2c20 3136 5d29 0d0a 0d0a 2020 2020   9, 16])....    
-00003450: 3e3e 3e20 2320 5573 6520 6661 6e63 7920  >>> # Use fancy 
-00003460: 696e 6465 7869 6e67 2074 6f20 6765 7420  indexing to get 
-00003470: 656c 656d 656e 7473 2032 2c20 342c 2061  elements 2, 4, a
-00003480: 6e64 2031 2028 696e 2074 6861 7420 6f72  nd 1 (in that or
-00003490: 6465 7229 3a0d 0a20 2020 203e 3e3e 2061  der):..    >>> a
-000034a0: 7272 6179 5b5b 322c 2034 2c20 315d 5d0d  rray[[2, 4, 1]].
-000034b0: 0a20 2020 2046 6173 7441 7272 6179 285b  .    FastArray([
-000034c0: 342c 2031 362c 2031 5d29 0d0a 0d0a 2020  4, 16, 1])....  
-000034d0: 2020 466f 7220 6d6f 7265 2064 6574 6169    For more detai
-000034e0: 6c73 2c20 7365 6520 7468 6520 6578 616d  ls, see the exam
-000034f0: 706c 6573 2066 6f72 2031 2d64 696d 656e  ples for 1-dimen
-00003500: 7369 6f6e 616c 2061 7272 6179 7320 696e  sional arrays in
-00003510: 204e 756d 5079 2773 2064 6f63 733a 0d0a   NumPy's docs:..
-00003520: 2020 2020 6049 6e64 6578 696e 6720 6f6e      `Indexing on
-00003530: 206e 6461 7272 6179 7320 3c68 7474 7073   ndarrays <https
-00003540: 3a2f 2f6e 756d 7079 2e6f 7267 2f64 6f63  ://numpy.org/doc
-00003550: 2f73 7461 626c 652f 7573 6572 2f62 6173  /stable/user/bas
-00003560: 6963 732e 696e 6465 7869 6e67 2e68 746d  ics.indexing.htm
-00003570: 6c3e 605f 2e0d 0a0d 0a20 2020 204e 6f74  l>`_.....    Not
-00003580: 6520 7468 6174 2073 6c69 6369 6e67 2063  e that slicing c
-00003590: 7265 6174 6573 2061 2076 6965 7720 6f66  reates a view of
-000035a0: 2074 6865 2061 7272 6179 2061 6e64 2064   the array and d
-000035b0: 6f65 7320 6e6f 7420 636f 7079 2074 6865  oes not copy the
-000035c0: 2075 6e64 6572 6c79 696e 6720 6461 7461   underlying data
-000035d0: 3b0d 0a20 2020 206d 6f64 6966 7969 6e67  ;..    modifying
-000035e0: 2074 6865 2073 6c69 6365 206d 6f64 6966   the slice modif
-000035f0: 6965 7320 7468 6520 6f72 6967 696e 616c  ies the original
-00003600: 2061 7272 6179 2e20 4661 6e63 7920 696e   array. Fancy in
-00003610: 6465 7869 6e67 2063 7265 6174 6573 2061  dexing creates a
-00003620: 2063 6f70 7920 6f66 0d0a 2020 2020 7468   copy of..    th
-00003630: 6520 6578 7472 6163 7465 6420 6461 7461  e extracted data
-00003640: 3b20 6d6f 6469 6679 696e 6720 7468 6973  ; modifying this
-00003650: 2061 7272 6179 2064 6f65 7320 6e6f 7420   array does not 
-00003660: 6d6f 6469 6679 2074 6865 206f 7269 6769  modify the origi
-00003670: 6e61 6c20 6172 7261 792e 0d0a 0d0a 2020  nal array.....  
-00003680: 2020 596f 7520 6361 6e20 616c 736f 2070    You can also p
-00003690: 6173 7320 6120 426f 6f6c 6561 6e20 6d61  ass a Boolean ma
-000036a0: 736b 2061 7272 6179 2e0d 0a0d 0a20 2020  sk array.....   
-000036b0: 203e 3e3e 2023 2043 7265 6174 6520 6120   >>> # Create a 
-000036c0: 426f 6f6c 6561 6e20 6d61 736b 3a0d 0a20  Boolean mask:.. 
-000036d0: 2020 203e 3e3e 2065 7665 6e4d 6173 6b20     >>> evenMask 
-000036e0: 3d20 2861 7272 6179 2025 2032 203d 3d20  = (array % 2 == 
-000036f0: 3029 0d0a 2020 2020 3e3e 3e20 6576 656e  0)..    >>> even
-00003700: 4d61 736b 0d0a 2020 2020 4661 7374 4172  Mask..    FastAr
-00003710: 7261 7928 5b54 7275 652c 2046 616c 7365  ray([True, False
-00003720: 2c20 5472 7565 2c20 4661 6c73 652c 2054  , True, False, T
-00003730: 7275 652c 2046 616c 7365 2c20 5472 7565  rue, False, True
-00003740: 2c20 4661 6c73 655d 290d 0a20 2020 203e  , False])..    >
-00003750: 3e3e 2023 2049 6e64 6578 2075 7369 6e67  >> # Index using
-00003760: 2074 6865 2042 6f6f 6c65 616e 206d 6173   the Boolean mas
-00003770: 6b3a 0d0a 2020 2020 3e3e 3e20 6172 7261  k:..    >>> arra
-00003780: 795b 6576 656e 4d61 736b 5d0d 0a20 2020  y[evenMask]..   
-00003790: 2046 6173 7441 7272 6179 285b 302c 2034   FastArray([0, 4
-000037a0: 2c20 3136 2c20 3336 5d29 0d0a 0d0a 2020  , 16, 36])....  
-000037b0: 2020 2a2a 486f 7720 746f 2053 7562 636c    **How to Subcl
-000037c0: 6173 7320 4661 7374 4172 7261 792a 2a0d  ass FastArray**.
-000037d0: 0a0d 0a20 2020 2049 6e63 6c75 6465 2074  ...    Include t
-000037e0: 6865 2072 6571 7569 7265 6420 636c 6173  he required clas
-000037f0: 7320 6465 6669 6e69 7469 6f6e 3a0d 0a0d  s definition:...
-00003800: 0a20 2020 203e 3e3e 2063 6c61 7373 2054  .    >>> class T
-00003810: 6573 7453 7562 636c 6173 7328 4661 7374  estSubclass(Fast
-00003820: 4172 7261 7929 3a0d 0a20 2020 202e 2e2e  Array):..    ...
-00003830: 2020 2020 2064 6566 205f 5f6e 6577 5f5f       def __new__
-00003840: 2863 6c73 2c20 6172 722c 202a 2a61 7267  (cls, arr, **arg
-00003850: 7329 3a0d 0a20 2020 202e 2e2e 2020 2020  s):..    ...    
-00003860: 2020 2020 2023 2042 6566 6f72 6520 7468       # Before th
-00003870: 6973 2063 616c 6c2c 2061 7272 206e 6565  is call, arr nee
-00003880: 6473 2074 6f20 6265 2061 206e 702e 6e64  ds to be a np.nd
-00003890: 6172 7261 7920 696e 7374 616e 6365 2e0d  array instance..
-000038a0: 0a20 2020 202e 2e2e 2020 2020 2020 2020  .    ...        
-000038b0: 2072 6574 7572 6e20 6172 722e 7669 6577   return arr.view
-000038c0: 2863 6c73 290d 0a20 2020 202e 2e2e 2020  (cls)..    ...  
-000038d0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-000038e0: 7365 6c66 2c20 6172 722c 202a 2a61 7267  self, arr, **arg
-000038f0: 7329 3a0d 0a20 2020 202e 2e2e 2020 2020  s):..    ...    
-00003900: 2020 2020 2070 6173 730d 0a0d 0a20 2020       pass....   
-00003910: 2049 6620 7468 6520 7375 6263 6c61 7373   If the subclass
-00003920: 2069 7320 636f 6d70 7574 6162 6c65 2c20   is computable, 
-00003930: 796f 7520 6d69 6768 7420 6465 6669 6e65  you might define
-00003940: 2079 6f75 7220 6f77 6e20 6d61 7468 206f   your own math o
-00003950: 7065 7261 7469 6f6e 732e 2049 6e20 7468  perations. In th
-00003960: 6573 650d 0a20 2020 206f 7065 7261 7469  ese..    operati
-00003970: 6f6e 732c 2079 6f75 206d 6967 6874 2064  ons, you might d
-00003980: 6566 696e 6520 7768 6174 2074 6865 2073  efine what the s
-00003990: 7562 636c 6173 7320 6361 6e20 6265 2063  ubclass can be c
-000039a0: 6f6d 7075 7465 6420 7769 7468 2e20 466f  omputed with. Fo
-000039b0: 7220 6578 616d 706c 6573 206f 660d 0a20  r examples of.. 
-000039c0: 2020 206e 6577 2064 6566 696e 6974 696f     new definitio
-000039d0: 6e73 2c20 7365 6520 7468 6520 6044 6174  ns, see the `Dat
-000039e0: 6554 696d 654e 616e 6f60 2063 6c61 7373  eTimeNano` class
-000039f0: 2e0d 0a0d 0a20 2020 2043 6f6d 6d6f 6e20  .....    Common 
-00003a00: 6f70 6572 6174 696f 6e73 2074 6f20 686f  operations to ho
-00003a10: 6f6b 2061 7265 2063 6f6d 7061 7269 736f  ok are compariso
-00003a20: 6e73 2028 6060 5f5f 6571 5f5f 2829 6060  ns (``__eq__()``
-00003a30: 2c20 6060 5f5f 6e65 5f5f 2829 6060 2c20  , ``__ne__()``, 
-00003a40: 6060 5f5f 6774 5f5f 2829 6060 2c0d 0a20  ``__gt__()``,.. 
-00003a50: 2020 2060 605f 5f6c 745f 5f28 2960 602c     ``__lt__()``,
-00003a60: 2060 605f 5f6c 655f 5f28 2960 602c 2060   ``__le__()``, `
-00003a70: 605f 5f67 655f 5f28 2960 6029 2061 6e64  `__ge__()``) and
-00003a80: 2062 6173 6963 206d 6174 6820 6675 6e63   basic math func
-00003a90: 7469 6f6e 7320 2860 605f 5f61 6464 5f5f  tions (``__add__
-00003aa0: 2829 6060 2c0d 0a20 2020 2060 605f 5f73  ()``,..    ``__s
-00003ab0: 7562 5f5f 2829 6060 2c20 6060 5f5f 6d75  ub__()``, ``__mu
-00003ac0: 6c5f 5f28 2960 602c 2065 7463 2e29 2e0d  l__()``, etc.)..
-00003ad0: 0a0d 0a20 2020 2042 7261 636b 6574 2069  ...    Bracket i
-00003ae0: 6e64 6578 696e 6720 6f70 6572 6174 696f  ndexing operatio
-00003af0: 6e73 2061 7265 2076 6572 7920 636f 6d6d  ns are very comm
-00003b00: 6f6e 2e20 4966 2074 6865 2073 7562 636c  on. If the subcl
-00003b10: 6173 7320 6e65 6564 7320 746f 2073 6574  ass needs to set
-00003b20: 206f 7220 7265 7475 726e 0d0a 2020 2020   or return..    
-00003b30: 6120 7661 6c75 6520 6f74 6865 7220 7468  a value other th
-00003b40: 616e 2074 6861 7420 696e 2074 6865 2075  an that in the u
-00003b50: 6e64 6572 6c79 696e 6720 6172 7261 792c  nderlying array,
-00003b60: 2079 6f75 206e 6565 6420 746f 2074 616b   you need to tak
-00003b70: 6520 6f76 6572 0d0a 2020 2020 605f 5f67  e over..    `__g
-00003b80: 6574 6974 656d 5f5f 2829 6020 6f72 2060  etitem__()` or `
-00003b90: 5f5f 7365 7469 7465 6d5f 5f28 2960 2e0d  __setitem__()`..
-00003ba0: 0a0d 0a20 2020 2049 6e64 6578 696e 6720  ...    Indexing 
-00003bb0: 6973 2061 6c73 6f20 7573 6564 2069 6e20  is also used in 
-00003bc0: 6469 7370 6c61 792e 2046 6f72 2072 6567  display. For reg
-00003bd0: 756c 6172 2063 6f6e 736f 6c65 2f6e 6f74  ular console/not
-00003be0: 6562 6f6f 6b20 6469 7370 6c61 792c 2079  ebook display, y
-00003bf0: 6f75 206e 6565 6420 746f 0d0a 2020 2020  ou need to..    
-00003c00: 7461 6b65 206f 7665 723a 0d0a 0d0a 2020  take over:....  
-00003c10: 2020 2a20 605f 5f72 6570 725f 5f28 2960    * `__repr__()`
-00003c20: 0d0a 2020 2020 2a20 605f 5f73 7472 5f5f  ..    * `__str__
-00003c30: 2829 600d 0a20 2020 202a 2060 5f72 6570  ()`..    * `_rep
-00003c40: 725f 6874 6d6c 5f28 2960 2028 666f 7220  r_html_()` (for 
-00003c50: 4a75 7079 7465 724c 6162 2061 6e64 204a  JupyterLab and J
-00003c60: 7570 7974 6572 206e 6f74 6562 6f6f 6b73  upyter notebooks
-00003c70: 290d 0a0d 0a20 2020 2049 6620 7468 6520  )....    If the 
-00003c80: 6172 7261 7920 6973 2062 6569 6e67 2064  array is being d
-00003c90: 6973 706c 6179 6564 2069 6e20 6120 6044  isplayed in a `D
-00003ca0: 6174 6173 6574 6020 616e 6420 796f 7520  ataset` and you 
-00003cb0: 7265 7175 6972 6520 6365 7274 6169 6e20  require certain 
-00003cc0: 666f 726d 6174 7469 6e67 2c20 796f 750d  formatting, you.
-00003cd0: 0a20 2020 206e 6565 6420 746f 2064 6566  .    need to def
-00003ce0: 696e 6520 7477 6f20 6d6f 7265 206d 6574  ine two more met
-00003cf0: 686f 6473 3a0d 0a0d 0a20 2020 2060 6064  hods:....    ``d
-00003d00: 6973 706c 6179 5f71 7565 7279 5f70 726f  isplay_query_pro
-00003d10: 7065 7274 6965 7328 2960 600d 0a20 2020  perties()``..   
-00003d20: 2020 2020 2052 6574 7572 6e73 2061 6e20       Returns an 
-00003d30: 6049 7465 6d46 6f72 6d61 7460 206f 626a  `ItemFormat` obj
-00003d40: 6563 7420 2873 6565 2060 7274 2e55 7469  ect (see `rt.Uti
-00003d50: 6c73 2e72 745f 6469 7370 6c61 795f 7072  ls.rt_display_pr
-00003d60: 6f70 6572 7469 6573 6029 0d0a 0d0a 2020  operties`)....  
-00003d70: 2020 6060 6469 7370 6c61 795f 636f 6e76    ``display_conv
-00003d80: 6572 745f 6675 6e63 2829 6060 0d0a 2020  ert_func()``..  
-00003d90: 2020 2020 2020 5468 6520 636f 6e76 6572        The conver
-00003da0: 7369 6f6e 2066 756e 6374 696f 6e20 7265  sion function re
-00003db0: 7475 726e 6564 2062 7920 6060 6469 7370  turned by ``disp
-00003dc0: 6c61 795f 7175 6572 795f 7072 6f70 6572  lay_query_proper
-00003dd0: 7469 6573 2829 6060 0d0a 2020 2020 2020  ties()``..      
-00003de0: 2020 6d75 7374 2072 6574 7572 6e20 6120    must return a 
-00003df0: 7374 7269 6e67 2e20 4561 6368 2069 7465  string. Each ite
-00003e00: 6d20 6265 696e 6720 6469 7370 6c61 7965  m being displaye
-00003e10: 642c 2074 6865 2072 6573 756c 7420 6f66  d, the result of
-00003e20: 2060 605f 5f67 6574 6974 656d 5f5f 2829   ``__getitem__()
-00003e30: 6060 0d0a 2020 2020 2020 2020 6174 2061  ``..        at a
-00003e40: 2073 696e 676c 6520 696e 6465 782c 2077   single index, w
-00003e50: 696c 6c20 676f 2074 6872 6f75 6768 2074  ill go through t
-00003e60: 6869 7320 6675 6e63 7469 6f6e 2069 6e64  his function ind
-00003e70: 6976 6964 7561 6c6c 792c 2061 6363 6f6d  ividually, accom
-00003e80: 7061 6e69 6564 2062 790d 0a20 2020 2020  panied by..     
-00003e90: 2020 2061 6e20 6049 7465 6d46 6f72 6d61     an `ItemForma
-00003ea0: 7460 206f 626a 6563 742e 0d0a 0d0a 2020  t` object.....  
-00003eb0: 2020 4d61 6e79 2052 6970 7461 626c 6520    Many Riptable 
-00003ec0: 6f70 6572 6174 696f 6e73 206e 6565 6420  operations need 
-00003ed0: 746f 2072 6574 7572 6e20 6172 7261 7973  to return arrays
-00003ee0: 206f 6620 7468 6520 7361 6d65 2063 6c61   of the same cla
-00003ef0: 7373 2074 6865 7920 7265 6365 6976 6564  ss they received
-00003f00: 2e20 546f 0d0a 2020 2020 656e 7375 7265  . To..    ensure
-00003f10: 2074 6861 7420 796f 7572 2073 7562 636c   that your subcl
-00003f20: 6173 7320 7769 6c6c 2072 6574 6169 6e20  ass will retain 
-00003f30: 6974 7320 7370 6563 6961 6c20 7072 6f70  its special prop
-00003f40: 6572 7469 6573 2c20 796f 7520 6e65 6564  erties, you need
-00003f50: 2074 6f20 7461 6b65 206f 7665 720d 0a20   to take over.. 
-00003f60: 2020 2060 6e65 7763 6c61 7373 6672 6f6d     `newclassfrom
-00003f70: 696e 7374 616e 6365 2829 602e 2046 6169  instance()`. Fai
-00003f80: 6c75 7265 2074 6f20 7461 6b65 2074 6869  lure to take thi
-00003f90: 7320 6f76 6572 2077 696c 6c20 6f66 7465  s over will ofte
-00003fa0: 6e20 7265 7375 6c74 2069 6e20 616e 206f  n result in an o
-00003fb0: 626a 6563 740d 0a20 2020 2077 6974 6820  bject..    with 
-00003fc0: 756e 696e 6974 6961 6c69 7a65 6420 7661  uninitialized va
-00003fd0: 7269 6162 6c65 732e 0d0a 0d0a 2020 2020  riables.....    
-00003fe0: 6063 6f70 7928 2960 2069 7320 616e 6f74  `copy()` is anot
-00003ff0: 6865 7220 6d65 7468 6f64 2074 6861 7420  her method that 
-00004000: 6973 2063 616c 6c65 6420 6765 6e65 7269  is called generi
-00004010: 6361 6c6c 7920 696e 2052 6970 7461 626c  cally in Riptabl
-00004020: 6520 726f 7574 696e 6573 2c20 616e 640d  e routines, and.
-00004030: 0a20 2020 206e 6565 6473 2074 6f20 6265  .    needs to be
-00004040: 2074 616b 656e 206f 7665 7220 746f 2072   taken over to r
-00004050: 6574 6169 6e20 7375 6263 6c61 7373 2070  etain subclass p
-00004060: 726f 7065 7274 6965 732e 0d0a 0d0a 2020  roperties.....  
-00004070: 2020 466f 7220 6120 7669 6577 206f 6620    For a view of 
-00004080: 7468 6520 756e 6465 726c 7969 6e67 2060  the underlying `
-00004090: 4661 7374 4172 7261 7960 2c20 796f 7520  FastArray`, you 
-000040a0: 6361 6e20 7573 6520 7468 6520 605f 6661  can use the `_fa
-000040b0: 6020 7072 6f70 6572 7479 2e0d 0a20 2020  ` property...   
-000040c0: 2022 2222 0d0a 0d0a 2020 2020 2320 4465   """....    # De
-000040d0: 6669 6e65 7320 6120 6765 6e65 7269 6320  fines a generic 
-000040e0: 6e70 2e6e 6461 7272 6179 2073 7562 636c  np.ndarray subcl
-000040f0: 6173 732c 2074 6861 7420 6361 6e20 6361  ass, that can ca
-00004100: 6368 6520 6e75 6d70 7920 6172 7261 7973  che numpy arrays
-00004110: 0d0a 2020 2020 2320 5374 6174 6963 2043  ..    # Static C
-00004120: 6c61 7373 2056 4152 4941 424c 4553 0d0a  lass VARIABLES..
-00004130: 0d0a 2020 2020 2320 6368 616e 6765 2074  ..    # change t
-00004140: 6869 7320 746f 2073 686f 7720 6f72 206c  his to show or l
-00004150: 6573 7320 7661 6c75 6573 206f 6e20 5f5f  ess values on __
-00004160: 7265 7072 5f5f 0d0a 2020 2020 4d41 585f  repr__..    MAX_
-00004170: 4449 5350 4c41 595f 4c45 4e20 3d20 3130  DISPLAY_LEN = 10
-00004180: 0d0a 0d0a 2020 2020 2320 7365 7420 746f  ....    # set to
-00004190: 2032 206f 7220 3320 666f 7220 6578 7472   2 or 3 for extr
-000041a0: 6120 6465 6275 6720 696e 666f 726d 6174  a debug informat
-000041b0: 696f 6e0d 0a20 2020 2056 6572 626f 7365  ion..    Verbose
-000041c0: 203d 2031 0d0a 0d0a 2020 2020 2320 7365   = 1....    # se
-000041d0: 7420 746f 2074 7275 6520 666f 7220 7265  t to true for re
-000041e0: 7573 696e 6720 6e75 6d70 7920 6172 7261  using numpy arra
-000041f0: 7973 2069 6e73 7465 6164 206f 6620 6465  ys instead of de
-00004200: 6c65 7469 6e67 2074 6865 6d20 636f 6d70  leting them comp
-00004210: 6c65 7465 6c79 0d0a 2020 2020 5265 6379  letely..    Recy
-00004220: 636c 6520 3d20 5472 7565 0d0a 0d0a 2020  cle = True....  
-00004230: 2020 2320 7365 7420 746f 2074 7275 6520    # set to true 
-00004240: 746f 2070 7265 7365 7276 6520 7365 6e74  to preserve sent
-00004250: 696e 656c 7320 6475 7269 6e67 2069 6e74  inels during int
-00004260: 6572 6e61 6c20 6172 7261 795f 7566 756e  ernal array_ufun
-00004270: 6320 6361 6c63 756c 6174 696f 6e73 0d0a  c calculations..
-00004280: 2020 2020 5361 6665 436f 6e76 6572 7369      SafeConversi
-00004290: 6f6e 7320 3d20 5472 7565 0d0a 0d0a 2020  ons = True....  
-000042a0: 2020 2320 7365 7420 746f 2066 616c 7365    # set to false
-000042b0: 2074 6f20 6265 206a 7573 7420 6e6f 726d   to be just norm
-000042c0: 616c 206e 756d 7079 0d0a 2020 2020 4661  al numpy..    Fa
-000042d0: 7374 6572 5546 756e 6320 3d20 5472 7565  sterUFunc = True
-000042e0: 0d0a 0d0a 2020 2020 4e45 575f 4152 5241  ....    NEW_ARRA
-000042f0: 595f 4655 4e43 5449 4f4e 5f45 4e41 424c  Y_FUNCTION_ENABL
-00004300: 4544 203d 2046 616c 7365 0d0a 2020 2020  ED = False..    
-00004310: 2222 2245 6e61 626c 6520 696d 706c 656d  """Enable implem
-00004320: 656e 7461 7469 6f6e 206f 6620 6172 7261  entation of arra
-00004330: 7920 6675 6e63 7469 6f6e 2070 726f 746f  y function proto
-00004340: 636f 6c20 2864 6566 6175 6c74 2046 616c  col (default Fal
-00004350: 7365 292e 2222 220d 0a0d 0a20 2020 2023  se)."""....    #
-00004360: 2030 3d51 7569 6574 2c20 313d 5761 726e   0=Quiet, 1=Warn
-00004370: 2c20 323d 4578 6365 7074 696f 6e0d 0a20  , 2=Exception.. 
-00004380: 2020 2057 6172 6e69 6e67 4c65 7665 6c20     WarningLevel 
-00004390: 3d20 310d 0a0d 0a20 2020 2023 2073 6574  = 1....    # set
-000043a0: 2074 6f20 7472 7565 2074 6f20 6e6f 7420   to true to not 
-000043b0: 616c 6c6f 7720 6172 6172 7973 2077 6520  allow ararys we 
-000043c0: 646f 206e 6f74 2073 7570 706f 7274 0d0a  do not support..
-000043d0: 2020 2020 4e6f 546f 6c65 7261 6e63 6520      NoTolerance 
-000043e0: 3d20 4661 6c73 650d 0a0d 0a20 2020 2023  = False....    #
-000043f0: 2073 6574 2074 6f20 6661 6c73 6520 746f   set to false to
-00004400: 206e 6f74 2063 6f6d 7072 6573 7320 7768   not compress wh
-00004410: 656e 2070 6963 6b6c 696e 670d 0a20 2020  en pickling..   
-00004420: 2043 6f6d 7072 6573 7350 6963 6b6c 6520   CompressPickle 
-00004430: 3d20 5472 7565 0d0a 0d0a 2020 2020 2320  = True....    # 
-00004440: 6120 6469 6374 696f 6e61 7279 2074 6f20  a dictionary to 
-00004450: 6176 6f69 6420 7265 7065 6174 696e 6720  avoid repeating 
-00004460: 7761 726e 696e 6773 2069 6e20 6d75 6c74  warnings in mult
-00004470: 6970 6c65 2070 6c61 6365 730d 0a20 2020  iple places..   
-00004480: 2023 2054 4f44 4f3a 2077 7261 7020 7468   # TODO: wrap th
-00004490: 6973 2069 6e20 6120 636c 6173 7320 736f  is in a class so
-000044a0: 2074 6861 7420 7761 726e 696e 6773 2063   that warnings c
-000044b0: 616e 2062 6520 7475 726e 6564 206f 6e2f  an be turned on/
-000044c0: 6f66 660d 0a20 2020 2057 6172 6e69 6e67  off..    Warning
-000044d0: 4469 6374 203d 207b 0d0a 2020 2020 2020  Dict = {..      
-000044e0: 2020 226d 756c 7469 706c 655f 6469 6d65    "multiple_dime
-000044f0: 6e73 696f 6e73 223a 2022 4661 7374 4172  nsions": "FastAr
-00004500: 7261 7920 636f 6e74 6169 6e73 2074 776f  ray contains two
-00004510: 206f 7220 6d6f 7265 2064 696d 656e 7369   or more dimensi
-00004520: 6f6e 7320 6772 6561 7465 7220 7468 616e  ons greater than
-00004530: 206f 6e65 202d 2073 6861 7065 3a7b 7d2e   one - shape:{}.
-00004540: 2020 5072 6f62 6c65 6d73 206d 6179 206f    Problems may o
-00004550: 6363 7572 2e22 0d0a 2020 2020 7d0d 0a0d  ccur."..    }...
-00004560: 0a20 2020 2023 2046 6f72 2072 6564 7563  .    # For reduc
-00004570: 7469 6f6e 206f 7065 7261 7469 6f6e 732c  tion operations,
-00004580: 2074 6865 2069 6465 6e74 6974 7920 656c   the identity el
-00004590: 656d 656e 7420 6f66 2074 6865 206f 7065  ement of the ope
-000045a0: 7261 7469 6f6e 2028 666f 7220 6f70 6572  ration (for oper
-000045b0: 6174 696f 6e73 0d0a 2020 2020 2320 7768  ations..    # wh
-000045c0: 6572 6520 7375 6368 2061 6e20 656c 656d  ere such an elem
-000045d0: 656e 7420 6973 2064 6566 696e 6564 292e  ent is defined).
-000045e0: 0d0a 2020 2020 2320 4e2e 422e 2041 7320  ..    # N.B. As 
-000045f0: 6f66 206e 756d 7079 2031 2e31 3920 6974  of numpy 1.19 it
-00004600: 2064 6f65 7320 6e6f 7420 6170 7065 6172   does not appear
-00004610: 2074 6865 7265 2773 2061 2073 7472 6169   there's a strai
-00004620: 6768 7466 6f72 7761 7264 2077 6179 206f  ghtforward way o
-00004630: 6620 6765 7474 696e 6720 6672 6f6d 0d0a  f getting from..
-00004640: 2020 2020 2320 2020 736f 6d65 7468 696e      #   somethin
-00004650: 6720 6c69 6b65 2060 606e 702e 7375 6d60  g like ``np.sum`
-00004660: 6020 6261 636b 2074 6f20 6060 6e70 2e61  ` back to ``np.a
-00004670: 6464 6060 2c20 6672 6f6d 2077 6869 6368  dd``, from which
-00004680: 2077 6520 636f 756c 6420 6765 7420 7468   we could get th
-00004690: 6520 2e69 6465 6e74 6974 7920 7072 6f70  e .identity prop
-000046a0: 6572 7479 2e0d 0a20 2020 2023 2020 2049  erty...    #   I
-000046b0: 6620 7468 6174 2065 7665 7220 6368 616e  f that ever chan
-000046c0: 6765 732c 2074 6869 7320 6469 6374 696f  ges, this dictio
-000046d0: 6e61 7279 2077 6f75 6c64 206e 6f20 6c6f  nary would no lo
-000046e0: 6e67 6572 2062 6520 6e65 6365 7373 6172  nger be necessar
-000046f0: 7920 736f 2069 7420 6361 6e2b 7368 6f75  y so it can+shou
-00004700: 6c64 2062 6520 7265 6d6f 7665 642e 0d0a  ld be removed...
-00004710: 2020 2020 5f72 6564 7563 655f 6f70 5f69      _reduce_op_i
-00004720: 6465 6e74 6974 795f 7661 6c75 653a 204d  dentity_value: M
-00004730: 6170 7069 6e67 5b52 4544 5543 455f 4655  apping[REDUCE_FU
-00004740: 4e43 5449 4f4e 532c 2041 6e79 5d20 3d20  NCTIONS, Any] = 
-00004750: 7b0d 0a20 2020 2020 2020 2052 4544 5543  {..        REDUC
-00004760: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
-00004770: 4345 5f41 4c4c 3a20 5472 7565 2c20 2023  CE_ALL: True,  #
-00004780: 206e 702e 616c 6c28 6e70 2e61 7272 6179   np.all(np.array
-00004790: 285b 5d29 290d 0a20 2020 2020 2020 2052  ([]))..        R
-000047a0: 4544 5543 455f 4655 4e43 5449 4f4e 532e  EDUCE_FUNCTIONS.
-000047b0: 5245 4455 4345 5f41 4e59 3a20 4661 6c73  REDUCE_ANY: Fals
-000047c0: 652c 2020 2320 6e70 2e61 6e79 286e 702e  e,  # np.any(np.
-000047d0: 6172 7261 7928 5b5d 2929 0d0a 2020 2020  array([]))..    
-000047e0: 2020 2020 5245 4455 4345 5f46 554e 4354      REDUCE_FUNCT
-000047f0: 494f 4e53 2e52 4544 5543 455f 4e41 4e53  IONS.REDUCE_NANS
-00004800: 554d 3a20 6e70 2e61 6464 2e69 6465 6e74  UM: np.add.ident
-00004810: 6974 792c 0d0a 2020 2020 2020 2020 5245  ity,..        RE
-00004820: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
-00004830: 4544 5543 455f 5355 4d3a 206e 702e 6164  EDUCE_SUM: np.ad
-00004840: 642e 6964 656e 7469 7479 2c0d 0a20 2020  d.identity,..   
-00004850: 207d 0d0a 0d0a 2020 2020 2320 2d2d 2d2d   }....    # ----
-00004860: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000048a0: 2d2d 2d2d 2d2d 0d0a 2020 2020 636c 6173  ------..    clas
-000048b0: 7320 5f41 7272 6179 4675 6e63 7469 6f6e  s _ArrayFunction
-000048c0: 4865 6c70 6572 3a0d 0a20 2020 2020 2020  Helper:..       
-000048d0: 2023 2054 4f44 4f20 6164 6420 7573 6167   # TODO add usag
-000048e0: 6520 6578 616d 706c 6573 0d0a 2020 2020  e examples..    
-000048f0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00004900: 2041 7272 6179 2066 756e 6374 696f 6e20   Array function 
-00004910: 6865 6c70 6572 2069 7320 7265 7370 6f6e  helper is respon
-00004920: 7369 626c 6520 6d61 696e 7461 696e 696e  sible maintainin
-00004930: 6720 7468 6520 6172 7261 7920 6675 6e63  g the array func
-00004940: 7469 6f6e 2070 726f 746f 636f 6c20 6172  tion protocol ar
-00004950: 7261 7920 696d 706c 656d 656e 7461 7469  ray implementati
-00004960: 6f6e 7320 696e 2074 6865 0d0a 2020 2020  ons in the..    
-00004970: 2020 2020 666f 726d 206f 6620 7468 6520      form of the 
-00004980: 666f 6c6c 6f77 696e 6720 4150 493a 0d0a  following API:..
-00004990: 0d0a 2020 2020 2020 2020 2d20 6765 745f  ..        - get_
-000049a0: 6172 7261 795f 6675 6e63 7469 6f6e 3a20  array_function: 
-000049b0: 6769 7665 6e20 7468 6520 4e75 6d70 7920  given the Numpy 
-000049c0: 6675 6e63 7469 6f6e 2c20 7265 7475 726e  function, return
-000049d0: 7320 6f76 6572 7269 6464 656e 2061 7272  s overridden arr
-000049e0: 6179 2066 756e 6374 696f 6e0d 0a20 2020  ay function..   
-000049f0: 2020 2020 202d 2067 6574 5f61 7272 6179       - get_array
-00004a00: 5f66 756e 6374 696f 6e5f 7479 7065 5f63  _function_type_c
-00004a10: 6f6d 7061 7469 6269 6c69 7479 5f63 6865  ompatibility_che
-00004a20: 636b 3a20 6769 7665 6e20 7468 6520 4e75  ck: given the Nu
-00004a30: 6d70 7920 6675 6e63 7469 6f6e 2c20 7265  mpy function, re
-00004a40: 7475 726e 7320 6f76 6572 7269 6464 656e  turns overridden
-00004a50: 2061 7272 6179 2066 756e 6374 696f 6e20   array function 
-00004a60: 7479 7065 2063 6f6d 7061 7469 6269 6c69  type compatibili
-00004a70: 7479 2063 6865 636b 0d0a 2020 2020 2020  ty check..      
-00004a80: 2020 2d20 7265 6769 7374 6572 5f61 7272    - register_arr
-00004a90: 6179 5f66 756e 6374 696f 6e3a 2061 2066  ay_function: a f
-00004aa0: 756e 6374 696f 6e20 6465 636f 7261 746f  unction decorato
-00004ab0: 7220 7768 6f73 6520 6172 6775 6d65 6e74  r whose argument
-00004ac0: 2069 7320 7468 6520 4e75 6d70 7920 6675   is the Numpy fu
-00004ad0: 6e63 7469 6f6e 2074 6f20 6f76 6572 7269  nction to overri
-00004ae0: 6465 2061 6e64 2074 6865 2066 756e 6374  de and the funct
-00004af0: 696f 6e20 7468 6174 2077 696c 6c20 6f76  ion that will ov
-00004b00: 6572 7269 6465 2069 740d 0a20 2020 2020  erride it..     
-00004b10: 2020 202d 2072 6567 6973 7465 725f 6172     - register_ar
-00004b20: 7261 795f 6675 6e63 7469 6f6e 5f74 7970  ray_function_typ
-00004b30: 655f 636f 6d70 6174 6962 696c 6974 793a  e_compatibility:
-00004b40: 2073 696d 696c 6172 2074 6f20 7265 6769   similar to regi
-00004b50: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
-00004b60: 696f 6e2c 2062 7574 2067 7561 7264 7320  ion, but guards 
-00004b70: 6167 6169 6e73 7420 696e 636f 6d70 6174  against incompat
-00004b80: 6962 6c65 2061 7272 6179 2066 756e 6374  ible array funct
-00004b90: 696f 6e20 7072 6f74 6f63 6f6c 2074 7970  ion protocol typ
-00004ba0: 6520 6172 6775 6d65 6e74 7320 666f 7220  e arguments for 
-00004bb0: 7468 6520 6769 7665 6e20 4e75 6d70 7920  the given Numpy 
-00004bc0: 6675 6e63 7469 6f6e 0d0a 2020 2020 2020  function..      
-00004bd0: 2020 2d20 6465 7265 6769 7374 6572 3a20    - deregister: 
-00004be0: 6465 7265 6769 7374 7261 7469 6f6e 206f  deregistration o
-00004bf0: 6620 7468 6520 4e75 6d70 7920 6675 6e63  f the Numpy func
-00004c00: 7469 6f6e 2061 6e64 2074 7970 6520 636f  tion and type co
-00004c10: 6d70 6174 6962 696c 6974 7920 6f76 6572  mpatibility over
-00004c20: 7269 6465 0d0a 2020 2020 2020 2020 2d20  ride..        - 
-00004c30: 6465 7265 6769 7374 6572 5f61 7272 6179  deregister_array
-00004c40: 5f66 756e 6374 696f 6e5f 7479 7065 5f63  _function_type_c
-00004c50: 6f6d 7061 7469 6269 6c69 7479 3a20 6465  ompatibility: de
-00004c60: 7265 6769 7374 7261 7469 6f6e 206f 6620  registration of 
-00004c70: 4e75 6d70 7920 6675 6e63 7469 6f6e 2074  Numpy function t
-00004c80: 7970 6520 636f 6d70 6174 6962 696c 6974  ype compatibilit
-00004c90: 7920 6f76 6572 7269 6465 0d0a 0d0a 2020  y override....  
-00004ca0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00004cb0: 2020 2023 2054 4f44 4f20 6465 7369 676e     # TODO design
-00004cc0: 2063 6f6e 7369 6465 7261 7469 6f6e 202d   consideration -
-00004cd0: 2075 7369 6e67 2061 2073 696e 676c 6520   using a single 
-00004ce0: 6469 6374 2077 6974 6820 7475 706c 6520  dict with tuple 
-00004cf0: 7479 7065 2063 6f6d 7061 7469 6269 6c69  type compatibili
-00004d00: 7479 2061 6e64 2072 6564 6972 6563 7465  ty and redirecte
-00004d10: 6420 6361 6c6c 6162 6c65 730d 0a20 2020  d callables..   
-00004d20: 2020 2020 2023 2077 6865 7265 2061 2064       # where a d
-00004d30: 6566 6175 6c74 2074 7970 6520 636f 6d70  efault type comp
-00004d40: 6174 6962 696c 6974 7920 6368 6563 6b20  atibility check 
-00004d50: 6361 6e20 6265 2074 6865 2064 6566 6175  can be the defau
-00004d60: 6c74 2076 616c 7565 0d0a 2020 2020 2020  lt value..      
-00004d70: 2020 2320 6120 6469 6374 696f 6e61 7279    # a dictionary
-00004d80: 2074 6861 7420 6d61 7073 206e 756d 7079   that maps numpy
-00004d90: 2066 756e 6374 696f 6e73 2074 6f20 6f75   functions to ou
-00004da0: 7220 6375 7374 6f6d 2076 6172 6961 6e74  r custom variant
-00004db0: 730d 0a20 2020 2020 2020 2048 414e 444c  s..        HANDL
-00004dc0: 4544 5f46 554e 4354 494f 4e53 3a20 4469  ED_FUNCTIONS: Di
-00004dd0: 6374 5b63 616c 6c61 626c 652c 2063 616c  ct[callable, cal
-00004de0: 6c61 626c 655d 203d 207b 7d0d 0a20 2020  lable] = {}..   
-00004df0: 2020 2020 2022 2222 4469 6374 696f 6e61       """Dictiona
-00004e00: 7279 206f 6620 4e75 6d70 7920 4150 4920  ry of Numpy API 
-00004e10: 6675 6e63 7469 6f6e 2077 6974 6820 6f76  function with ov
-00004e20: 6572 7269 6464 656e 2066 756e 6374 696f  erridden functio
-00004e30: 6e73 2e22 2222 0d0a 2020 2020 2020 2020  ns."""..        
-00004e40: 4841 4e44 4c45 445f 5459 5045 5f43 4f4d  HANDLED_TYPE_COM
-00004e50: 5041 5449 4249 4c49 5459 5f43 4845 434b  PATIBILITY_CHECK
-00004e60: 3a20 4469 6374 5b63 616c 6c61 626c 652c  : Dict[callable,
-00004e70: 2063 616c 6c61 626c 655d 203d 207b 7d0d   callable] = {}.
-00004e80: 0a20 2020 2020 2020 2022 2222 4469 6374  .        """Dict
-00004e90: 696f 6e61 7279 206f 6620 7479 7065 2063  ionary of type c
-00004ea0: 6f6d 7061 7469 6269 6c69 7479 2066 756e  ompatibility fun
-00004eb0: 6374 696f 6e73 2070 6572 2065 6163 6820  ctions per each 
-00004ec0: 4e75 6d70 7920 4150 4920 6f76 6572 7269  Numpy API overri
-00004ed0: 6464 656e 2066 756e 6374 696f 6e2e 2222  dden function.""
-00004ee0: 220d 0a0d 0a20 2020 2020 2020 2040 636c  "....        @cl
-00004ef0: 6173 736d 6574 686f 640d 0a20 2020 2020  assmethod..     
-00004f00: 2020 2064 6566 2067 6574 5f61 7272 6179     def get_array
-00004f10: 5f66 756e 6374 696f 6e28 636c 732c 206e  _function(cls, n
-00004f20: 705f 6675 6e63 7469 6f6e 3a20 4361 6c6c  p_function: Call
-00004f30: 6162 6c65 2920 2d3e 204f 7074 696f 6e61  able) -> Optiona
-00004f40: 6c5b 4361 6c6c 6162 6c65 5d3a 0d0a 2020  l[Callable]:..  
-00004f50: 2020 2020 2020 2020 2020 2222 220d 0a20            """.. 
-00004f60: 2020 2020 2020 2020 2020 2047 6976 656e             Given
-00004f70: 2074 6865 204e 756d 7079 2066 756e 6374   the Numpy funct
-00004f80: 696f 6e2c 2072 6574 7572 6e73 206f 7665  ion, returns ove
-00004f90: 7272 6964 6465 6e20 6172 7261 7920 6675  rridden array fu
-00004fa0: 6e63 7469 6f6e 2069 6620 696d 706c 656d  nction if implem
-00004fb0: 656e 7465 642c 206f 7468 6572 7769 7365  ented, otherwise
-00004fc0: 204e 6f6e 652e 0d0a 0d0a 2020 2020 2020   None.....      
-00004fd0: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
-00004fe0: 0d0a 2020 2020 2020 2020 2020 2020 2d2d  ..            --
-00004ff0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
-00005000: 2020 2020 2020 6e70 5f66 756e 6374 696f        np_functio
-00005010: 6e3a 2063 616c 6c61 626c 650d 0a20 2020  n: callable..   
-00005020: 2020 2020 2020 2020 2020 2020 2054 6865               The
-00005030: 206f 7665 7272 6964 6465 6e20 4e75 6d70   overridden Nump
-00005040: 7920 6172 7261 7920 6675 6e63 7469 6f6e  y array function
-00005050: 2e0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
-00005060: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
-00005070: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-00005080: 2020 2020 2020 2020 2020 2063 616c 6c61             calla
-00005090: 626c 652c 206f 7074 696f 6e61 6c0d 0a20  ble, optional.. 
-000050a0: 2020 2020 2020 2020 2020 2020 2020 2054                 T
-000050b0: 6865 206f 7665 7272 6964 6465 6e20 6675  he overridden fu
-000050c0: 6e63 7469 6f6e 2061 7320 6120 6361 6c6c  nction as a call
-000050d0: 6162 6c65 206f 7220 4e6f 6e65 2069 6620  able or None if 
-000050e0: 6974 2773 206e 6f74 2069 6d70 6c65 6d65  it's not impleme
-000050f0: 6e74 6564 2e0d 0a20 2020 2020 2020 2020  nted...         
-00005100: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00005110: 2020 2020 7265 7475 726e 2063 6c73 2e48      return cls.H
-00005120: 414e 444c 4544 5f46 554e 4354 494f 4e53  ANDLED_FUNCTIONS
-00005130: 2e67 6574 286e 705f 6675 6e63 7469 6f6e  .get(np_function
-00005140: 2c20 4e6f 6e65 290d 0a0d 0a20 2020 2020  , None)....     
-00005150: 2020 2040 636c 6173 736d 6574 686f 640d     @classmethod.
-00005160: 0a20 2020 2020 2020 2064 6566 2067 6574  .        def get
-00005170: 5f61 7272 6179 5f66 756e 6374 696f 6e5f  _array_function_
-00005180: 7479 7065 5f63 6f6d 7061 7469 6269 6c69  type_compatibili
-00005190: 7479 5f63 6865 636b 2863 6c73 2c20 6e70  ty_check(cls, np
-000051a0: 5f66 756e 6374 696f 6e3a 2043 616c 6c61  _function: Calla
-000051b0: 626c 6529 202d 3e20 4f70 7469 6f6e 616c  ble) -> Optional
-000051c0: 5b43 616c 6c61 626c 655d 3a0d 0a20 2020  [Callable]:..   
-000051d0: 2020 2020 2020 2020 2022 2222 0d0a 2020           """..  
-000051e0: 2020 2020 2020 2020 2020 4769 7665 6e20            Given 
-000051f0: 7468 6520 4e75 6d70 7920 6675 6e63 7469  the Numpy functi
-00005200: 6f6e 2c20 7265 7475 726e 7320 7468 6520  on, returns the 
-00005210: 636f 7272 6573 706f 6e64 696e 6720 6172  corresponding ar
-00005220: 7261 7920 6675 6e63 7469 6f6e 2074 7970  ray function typ
-00005230: 6520 636f 6d70 6174 6962 696c 6974 7920  e compatibility 
-00005240: 6361 6c6c 6162 6c65 2c20 6f74 6865 7277  callable, otherw
-00005250: 6973 6520 4e6f 6e65 2e0d 0a0d 0a20 2020  ise None.....   
-00005260: 2020 2020 2020 2020 2050 6172 616d 6574           Paramet
-00005270: 6572 730d 0a20 2020 2020 2020 2020 2020  ers..           
-00005280: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
-00005290: 2020 2020 2020 2020 206e 705f 6675 6e63           np_func
-000052a0: 7469 6f6e 3a20 6361 6c6c 6162 6c65 0d0a  tion: callable..
-000052b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000052c0: 5468 6520 6f76 6572 7269 6464 656e 204e  The overridden N
-000052d0: 756d 7079 2061 7272 6179 2066 756e 6374  umpy array funct
-000052e0: 696f 6e2e 0d0a 0d0a 2020 2020 2020 2020  ion.....        
-000052f0: 2020 2020 5265 7475 726e 730d 0a20 2020      Returns..   
-00005300: 2020 2020 2020 2020 202d 2d2d 2d2d 2d2d           -------
-00005310: 0d0a 2020 2020 2020 2020 2020 2020 6361  ..            ca
-00005320: 6c6c 6162 6c65 2c20 6f70 7469 6f6e 616c  llable, optional
-00005330: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005340: 2020 5468 6520 6f76 6572 7269 6464 656e    The overridden
-00005350: 2074 7970 6520 636f 6d70 6174 6962 696c   type compatibil
-00005360: 6974 7920 6675 6e63 7469 6f6e 2061 7320  ity function as 
-00005370: 6120 6361 6c6c 6162 6c65 206f 7220 4e6f  a callable or No
-00005380: 6e65 2069 6620 6974 2773 206e 6f74 2069  ne if it's not i
-00005390: 6d70 6c65 6d65 6e74 6564 2e0d 0a20 2020  mplemented...   
-000053a0: 2020 2020 2020 2020 2022 2222 0d0a 2020           """..  
-000053b0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000053c0: 2063 6c73 2e48 414e 444c 4544 5f54 5950   cls.HANDLED_TYP
-000053d0: 455f 434f 4d50 4154 4942 494c 4954 595f  E_COMPATIBILITY_
-000053e0: 4348 4543 4b2e 6765 7428 6e70 5f66 756e  CHECK.get(np_fun
-000053f0: 6374 696f 6e2c 204e 6f6e 6529 0d0a 0d0a  ction, None)....
-00005400: 2020 2020 2020 2020 4063 6c61 7373 6d65          @classme
-00005410: 7468 6f64 0d0a 2020 2020 2020 2020 6465  thod..        de
-00005420: 6620 7265 6769 7374 6572 5f61 7272 6179  f register_array
-00005430: 5f66 756e 6374 696f 6e28 636c 732c 206e  _function(cls, n
-00005440: 705f 6675 6e63 7469 6f6e 3a20 4361 6c6c  p_function: Call
-00005450: 6162 6c65 2920 2d3e 2043 616c 6c61 626c  able) -> Callabl
-00005460: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00005470: 2222 220d 0a20 2020 2020 2020 2020 2020  """..           
-00005480: 2020 4120 6675 6e63 7469 6f6e 2064 6563    A function dec
-00005490: 6f72 6174 6f72 2077 686f 7365 2061 7267  orator whose arg
-000054a0: 756d 656e 7420 6973 2074 6865 204e 756d  ument is the Num
-000054b0: 7079 2066 756e 6374 696f 6e20 746f 206f  py function to o
-000054c0: 7665 7272 6964 6520 616e 6420 7468 6520  verride and the 
-000054d0: 6675 6e63 7469 6f6e 2074 6861 7420 7769  function that wi
-000054e0: 6c6c 206f 7665 7272 6964 6520 6974 2e0d  ll override it..
-000054f0: 0a20 2020 2020 2020 2020 2020 2020 5468  .             Th
-00005500: 6973 2072 6567 6973 7465 7273 2074 6865  is registers the
-00005510: 2060 6e70 5f66 756e 6374 696f 6e60 2077   `np_function` w
-00005520: 6974 6820 7468 6520 6675 6e63 7469 6f6e  ith the function
-00005530: 2074 6861 7420 6974 2064 6563 6f72 6174   that it decorat
-00005540: 6573 2e0d 0a0d 0a20 2020 2020 2020 2020  es.....         
-00005550: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
-00005560: 2020 2020 2020 2020 2020 202d 2d2d 2d2d             -----
-00005570: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2020  -----..         
-00005580: 2020 206e 705f 6675 6e63 7469 6f6e 3a20     np_function: 
-00005590: 6361 6c6c 6162 6c65 0d0a 2020 2020 2020  callable..      
-000055a0: 2020 2020 2020 2020 2020 5468 6520 6f76            The ov
-000055b0: 6572 7269 6464 656e 204e 756d 7079 2061  erridden Numpy a
-000055c0: 7272 6179 2066 756e 6374 696f 6e2e 0d0a  rray function...
-000055d0: 0d0a 2020 2020 2020 2020 2020 2020 5265  ..            Re
-000055e0: 7475 726e 730d 0a20 2020 2020 2020 2020  turns..         
-000055f0: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
-00005600: 2020 2020 2020 2020 6361 6c6c 6162 6c65          callable
-00005610: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005620: 2020 5468 6520 6465 636f 7261 746f 7220    The decorator 
-00005630: 7468 6174 2072 6567 6973 7465 7273 2060  that registers `
-00005640: 6e70 5f66 756e 6374 696f 6e60 2077 6974  np_function` wit
-00005650: 6820 7468 6520 6465 636f 7261 7465 6420  h the decorated 
-00005660: 6675 6e63 7469 6f6e 2e0d 0a20 2020 2020  function...     
-00005670: 2020 2020 2020 2022 2222 0d0a 0d0a 2020         """....  
-00005680: 2020 2020 2020 2020 2020 2320 4077 7261            # @wra
-00005690: 7073 286e 705f 6675 6e63 7469 6f6e 290d  ps(np_function).
-000056a0: 0a20 2020 2020 2020 2020 2020 2064 6566  .            def
-000056b0: 2064 6563 6f72 6174 6f72 2866 756e 6329   decorator(func)
-000056c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-000056d0: 2020 2063 6c73 2e48 414e 444c 4544 5f46     cls.HANDLED_F
-000056e0: 554e 4354 494f 4e53 5b6e 705f 6675 6e63  UNCTIONS[np_func
-000056f0: 7469 6f6e 5d20 3d20 6675 6e63 0d0a 2020  tion] = func..  
-00005700: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00005710: 206c 6f67 6765 722e 6973 456e 6162 6c65   logger.isEnable
-00005720: 6446 6f72 286c 6f67 6769 6e67 2e44 4542  dFor(logging.DEB
-00005730: 5547 293a 0d0a 2020 2020 2020 2020 2020  UG):..          
-00005740: 2020 2020 2020 2020 2020 6c6f 6767 6572            logger
-00005750: 2e64 6562 7567 280d 0a20 2020 2020 2020  .debug(..       
-00005760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005770: 2066 227b 636c 732e 5f5f 6e61 6d65 5f5f   f"{cls.__name__
-00005780: 7d2e 7265 6769 7374 6572 5f61 7272 6179  }.register_array
-00005790: 5f66 756e 6374 696f 6e3a 2072 6567 6973  _function: regis
-000057a0: 7465 7265 6420 7b72 6570 7228 6675 6e63  tered {repr(func
-000057b0: 2e5f 5f6e 616d 655f 5f29 7d20 696e 2070  .__name__)} in p
-000057c0: 6c61 6365 206f 6620 7b6e 705f 6675 6e63  lace of {np_func
-000057d0: 7469 6f6e 2e5f 5f6e 616d 655f 5f7d 220d  tion.__name__}".
-000057e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000057f0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-00005800: 2020 2020 2020 2020 7265 7475 726e 2066          return f
-00005810: 756e 630d 0a0d 0a20 2020 2020 2020 2020  unc....         
-00005820: 2020 2072 6574 7572 6e20 6465 636f 7261     return decora
-00005830: 746f 720d 0a0d 0a20 2020 2020 2020 2040  tor....        @
-00005840: 636c 6173 736d 6574 686f 640d 0a20 2020  classmethod..   
-00005850: 2020 2020 2064 6566 2072 6567 6973 7465       def registe
-00005860: 725f 6172 7261 795f 6675 6e63 7469 6f6e  r_array_function
-00005870: 5f74 7970 655f 636f 6d70 6174 6962 696c  _type_compatibil
-00005880: 6974 7928 636c 732c 206e 705f 6675 6e63  ity(cls, np_func
-00005890: 7469 6f6e 3a20 4361 6c6c 6162 6c65 2920  tion: Callable) 
-000058a0: 2d3e 2043 616c 6c61 626c 653a 0d0a 2020  -> Callable:..  
-000058b0: 2020 2020 2020 2020 2020 2222 220d 0a20            """.. 
-000058c0: 2020 2020 2020 2020 2020 2054 6869 7320             This 
-000058d0: 7265 6769 7374 6572 7320 7468 6520 7479  registers the ty
-000058e0: 7065 2063 6f6d 7061 7469 6269 6c69 7479  pe compatibility
-000058f0: 2063 6865 636b 2066 6f72 2074 6865 2060   check for the `
-00005900: 6e70 5f66 756e 6374 696f 6e60 2077 6974  np_function` wit
-00005910: 6820 7468 6520 6675 6e63 7469 6f6e 2074  h the function t
-00005920: 6861 7420 6974 2064 6563 6f72 6174 6573  hat it decorates
-00005930: 2e0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
-00005940: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
-00005950: 2020 2020 2020 2020 202d 2d2d 2d2d 2d2d           -------
-00005960: 2d2d 2d0d 0a20 2020 2020 2020 2020 2020  ---..           
-00005970: 206e 705f 6675 6e63 7469 6f6e 3a20 6361   np_function: ca
-00005980: 6c6c 6162 6c65 0d0a 2020 2020 2020 2020  llable..        
-00005990: 2020 2020 2020 2020 5468 6520 6f76 6572          The over
-000059a0: 7269 6464 656e 204e 756d 7079 2061 7272  ridden Numpy arr
-000059b0: 6179 2066 756e 6374 696f 6e2e 0d0a 0d0a  ay function.....
-000059c0: 2020 2020 2020 2020 2020 2020 5265 7475              Retu
-000059d0: 726e 730d 0a20 2020 2020 2020 2020 2020  rns..           
-000059e0: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
-000059f0: 2020 2020 2020 6361 6c6c 6162 6c65 0d0a        callable..
-00005a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005a10: 5468 6520 6465 636f 7261 746f 7220 7468  The decorator th
-00005a20: 6174 2072 6567 6973 7465 7273 2074 6865  at registers the
-00005a30: 2074 7970 6520 636f 6d70 6174 6962 696c   type compatibil
-00005a40: 6974 7920 6368 6563 6b20 666f 7220 7468  ity check for th
-00005a50: 6520 606e 705f 6675 6e63 7469 6f6e 6020  e `np_function` 
-00005a60: 7769 7468 2074 6865 2064 6563 6f72 6174  with the decorat
-00005a70: 6564 2066 756e 6374 696f 6e2e 0d0a 2020  ed function...  
-00005a80: 2020 2020 2020 2020 2020 2222 220d 0a0d            """...
-00005a90: 0a20 2020 2020 2020 2020 2020 2023 2040  .            # @
-00005aa0: 7772 6170 7328 6e70 5f66 756e 6374 696f  wraps(np_functio
-00005ab0: 6e29 0d0a 2020 2020 2020 2020 2020 2020  n)..            
-00005ac0: 6465 6620 6465 636f 7261 746f 7228 6368  def decorator(ch
-00005ad0: 6563 6b5f 7479 7065 5f63 6f6d 7061 7469  eck_type_compati
-00005ae0: 6269 6c69 7479 293a 0d0a 2020 2020 2020  bility):..      
-00005af0: 2020 2020 2020 2020 2020 636c 732e 4841            cls.HA
-00005b00: 4e44 4c45 445f 5459 5045 5f43 4f4d 5041  NDLED_TYPE_COMPA
-00005b10: 5449 4249 4c49 5459 5f43 4845 434b 5b6e  TIBILITY_CHECK[n
-00005b20: 705f 6675 6e63 7469 6f6e 5d20 3d20 6368  p_function] = ch
-00005b30: 6563 6b5f 7479 7065 5f63 6f6d 7061 7469  eck_type_compati
-00005b40: 6269 6c69 7479 0d0a 2020 2020 2020 2020  bility..        
-00005b50: 2020 2020 2020 2020 6966 206c 6f67 6765          if logge
-00005b60: 722e 6973 456e 6162 6c65 6446 6f72 286c  r.isEnabledFor(l
-00005b70: 6f67 6769 6e67 2e44 4542 5547 293a 0d0a  ogging.DEBUG):..
-00005b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005b90: 2020 2020 6c6f 6767 6572 2e64 6562 7567      logger.debug
-00005ba0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00005bb0: 2020 2020 2020 2020 2020 2066 227b 636c             f"{cl
-00005bc0: 732e 5f5f 6e61 6d65 5f5f 7d2e 7265 6769  s.__name__}.regi
-00005bd0: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
-00005be0: 696f 6e5f 7479 7065 5f63 6f6d 7061 7469  ion_type_compati
-00005bf0: 6269 6c69 7479 3a20 7265 6769 7374 6572  bility: register
-00005c00: 6564 2074 7970 6520 636f 6d70 6174 6962  ed type compatib
-00005c10: 696c 6974 7920 6368 6563 6b20 7b72 6570  ility check {rep
-00005c20: 7228 6368 6563 6b5f 7479 7065 5f63 6f6d  r(check_type_com
-00005c30: 7061 7469 6269 6c69 7479 297d 2066 6f72  patibility)} for
-00005c40: 2061 7272 6179 2066 756e 6374 696f 6e20   array function 
-00005c50: 7b6e 705f 6675 6e63 7469 6f6e 2e5f 5f6e  {np_function.__n
-00005c60: 616d 655f 5f7d 220d 0a20 2020 2020 2020  ame__}"..       
-00005c70: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
-00005c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005c90: 7265 7475 726e 2063 6865 636b 5f74 7970  return check_typ
-00005ca0: 655f 636f 6d70 6174 6962 696c 6974 790d  e_compatibility.
-00005cb0: 0a0d 0a20 2020 2020 2020 2020 2020 2072  ...            r
-00005cc0: 6574 7572 6e20 6465 636f 7261 746f 720d  eturn decorator.
-00005cd0: 0a0d 0a20 2020 2020 2020 2040 636c 6173  ...        @clas
-00005ce0: 736d 6574 686f 640d 0a20 2020 2020 2020  smethod..       
-00005cf0: 2064 6566 2064 6572 6567 6973 7465 725f   def deregister_
-00005d00: 6172 7261 795f 6675 6e63 7469 6f6e 2863  array_function(c
-00005d10: 6c73 2c20 6e70 5f66 756e 6374 696f 6e3a  ls, np_function:
-00005d20: 2043 616c 6c61 626c 6529 202d 3e20 4e6f   Callable) -> No
-00005d30: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-00005d40: 2022 2222 0d0a 2020 2020 2020 2020 2020   """..          
-00005d50: 2020 4465 7265 6769 7374 7261 7469 6f6e    Deregistration
-00005d60: 206f 6620 7468 6520 4e75 6d70 7920 6675   of the Numpy fu
-00005d70: 6e63 7469 6f6e 2061 6e64 2074 7970 6520  nction and type 
-00005d80: 636f 6d70 6174 6962 696c 6974 7920 6f76  compatibility ov
-00005d90: 6572 7269 6465 2e0d 0a0d 0a20 2020 2020  erride.....     
-00005da0: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
-00005db0: 730d 0a20 2020 2020 2020 2020 2020 202d  s..            -
-00005dc0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020  ---------..     
-00005dd0: 2020 2020 2020 206e 705f 6675 6e63 7469         np_functi
-00005de0: 6f6e 3a20 6361 6c6c 6162 6c65 0d0a 2020  on: callable..  
-00005df0: 2020 2020 2020 2020 2020 2020 2020 5468                Th
-00005e00: 6520 6f76 6572 7269 6464 656e 204e 756d  e overridden Num
-00005e10: 7079 2061 7272 6179 2066 756e 6374 696f  py array functio
-00005e20: 6e2e 0d0a 2020 2020 2020 2020 2020 2020  n...            
-00005e30: 2222 220d 0a20 2020 2020 2020 2020 2020  """..           
-00005e40: 2069 6620 636c 732e 6765 745f 6172 7261   if cls.get_arra
-00005e50: 795f 6675 6e63 7469 6f6e 286e 705f 6675  y_function(np_fu
-00005e60: 6e63 7469 6f6e 2920 6973 206e 6f74 204e  nction) is not N
-00005e70: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-00005e80: 2020 2020 2020 6966 206c 6f67 6765 722e        if logger.
-00005e90: 6973 456e 6162 6c65 6446 6f72 286c 6f67  isEnabledFor(log
-00005ea0: 6769 6e67 2e44 4542 5547 293a 0d0a 2020  ging.DEBUG):..  
-00005eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005ec0: 2020 6c6f 6767 6572 2e64 6562 7567 2866    logger.debug(f
-00005ed0: 227b 636c 732e 5f5f 6e61 6d65 5f5f 7d2e  "{cls.__name__}.
-00005ee0: 6465 7265 6769 7374 6572 5f61 7272 6179  deregister_array
-00005ef0: 5f66 756e 6374 696f 6e3a 2064 6572 6567  _function: dereg
-00005f00: 6973 7465 7265 6420 7b72 6570 7228 6e70  istered {repr(np
-00005f10: 5f66 756e 6374 696f 6e2e 5f5f 6e61 6d65  _function.__name
-00005f20: 5f5f 297d 2229 0d0a 2020 2020 2020 2020  __)}")..        
-00005f30: 2020 2020 2020 2020 6465 6c20 636c 732e          del cls.
-00005f40: 4841 4e44 4c45 445f 4655 4e43 5449 4f4e  HANDLED_FUNCTION
-00005f50: 535b 6e70 5f66 756e 6374 696f 6e5d 0d0a  S[np_function]..
-00005f60: 0d0a 2020 2020 2020 2020 4063 6c61 7373  ..        @class
-00005f70: 6d65 7468 6f64 0d0a 2020 2020 2020 2020  method..        
-00005f80: 6465 6620 6465 7265 6769 7374 6572 5f61  def deregister_a
-00005f90: 7272 6179 5f66 756e 6374 696f 6e5f 7479  rray_function_ty
-00005fa0: 7065 5f63 6f6d 7061 7469 6269 6c69 7479  pe_compatibility
-00005fb0: 2863 6c73 2c20 6e70 5f66 756e 6374 696f  (cls, np_functio
-00005fc0: 6e3a 2043 616c 6c61 626c 6529 202d 3e20  n: Callable) -> 
-00005fd0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-00005fe0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00005ff0: 2020 2020 4465 7265 6769 7374 7261 7469      Deregistrati
-00006000: 6f6e 206f 6620 7468 6520 4e75 6d70 7920  on of the Numpy 
-00006010: 6675 6e63 7469 6f6e 2061 6e64 2074 7970  function and typ
-00006020: 6520 636f 6d70 6174 6962 696c 6974 7920  e compatibility 
-00006030: 6f76 6572 7269 6465 2e0d 0a0d 0a20 2020  override.....   
-00006040: 2020 2020 2020 2020 2050 6172 616d 6574           Paramet
-00006050: 6572 730d 0a20 2020 2020 2020 2020 2020  ers..           
-00006060: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
-00006070: 2020 2020 2020 2020 206e 705f 6675 6e63           np_func
-00006080: 7469 6f6e 3a20 6361 6c6c 6162 6c65 0d0a  tion: callable..
-00006090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000060a0: 5468 6520 6f76 6572 7269 6464 656e 204e  The overridden N
-000060b0: 756d 7079 2061 7272 6179 2066 756e 6374  umpy array funct
-000060c0: 696f 6e2e 0d0a 2020 2020 2020 2020 2020  ion...          
-000060d0: 2020 2222 220d 0a20 2020 2020 2020 2020    """..         
-000060e0: 2020 2069 6620 636c 732e 4841 4e44 4c45     if cls.HANDLE
-000060f0: 445f 5459 5045 5f43 4f4d 5041 5449 4249  D_TYPE_COMPATIBI
-00006100: 4c49 5459 5f43 4845 434b 2e67 6574 286e  LITY_CHECK.get(n
-00006110: 705f 6675 6e63 7469 6f6e 2c20 4e6f 6e65  p_function, None
-00006120: 2920 6973 206e 6f74 204e 6f6e 653a 0d0a  ) is not None:..
-00006130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006140: 6966 206c 6f67 6765 722e 6973 456e 6162  if logger.isEnab
-00006150: 6c65 6446 6f72 286c 6f67 6769 6e67 2e44  ledFor(logging.D
-00006160: 4542 5547 293a 0d0a 2020 2020 2020 2020  EBUG):..        
-00006170: 2020 2020 2020 2020 2020 2020 6c6f 6767              logg
-00006180: 6572 2e64 6562 7567 280d 0a20 2020 2020  er.debug(..     
-00006190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000061a0: 2020 2066 227b 636c 732e 5f5f 6e61 6d65     f"{cls.__name
-000061b0: 5f5f 7d2e 6465 7265 6769 7374 6572 5f61  __}.deregister_a
-000061c0: 7272 6179 5f66 756e 6374 696f 6e5f 7479  rray_function_ty
-000061d0: 7065 5f63 6f6d 7061 7469 6269 6c69 7479  pe_compatibility
-000061e0: 3a20 6465 7265 6769 7374 6572 6564 207b  : deregistered {
-000061f0: 7265 7072 286e 705f 6675 6e63 7469 6f6e  repr(np_function
-00006200: 2e5f 5f6e 616d 655f 5f29 7d22 0d0a 2020  .__name__)}"..  
-00006210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006220: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
-00006230: 2020 2020 2064 656c 2063 6c73 2e48 414e       del cls.HAN
-00006240: 444c 4544 5f54 5950 455f 434f 4d50 4154  DLED_TYPE_COMPAT
-00006250: 4942 494c 4954 595f 4348 4543 4b5b 6e70  IBILITY_CHECK[np
-00006260: 5f66 756e 6374 696f 6e5d 0d0a 0d0a 2020  _function]....  
-00006270: 2020 2020 2020 4063 6c61 7373 6d65 7468        @classmeth
-00006280: 6f64 0d0a 2020 2020 2020 2020 6465 6620  od..        def 
-00006290: 6465 7265 6769 7374 6572 2863 6c73 2c20  deregister(cls, 
-000062a0: 6e70 5f66 756e 6374 696f 6e3a 2043 616c  np_function: Cal
-000062b0: 6c61 626c 6529 202d 3e20 4e6f 6e65 3a0d  lable) -> None:.
-000062c0: 0a20 2020 2020 2020 2020 2020 2063 6c73  .            cls
-000062d0: 2e64 6572 6567 6973 7465 725f 6172 7261  .deregister_arra
-000062e0: 795f 6675 6e63 7469 6f6e 286e 705f 6675  y_function(np_fu
-000062f0: 6e63 7469 6f6e 290d 0a20 2020 2020 2020  nction)..       
-00006300: 2020 2020 2063 6c73 2e64 6572 6567 6973       cls.deregis
-00006310: 7465 725f 6172 7261 795f 6675 6e63 7469  ter_array_functi
-00006320: 6f6e 5f74 7970 655f 636f 6d70 6174 6962  on_type_compatib
-00006330: 696c 6974 7928 6e70 5f66 756e 6374 696f  ility(np_functio
-00006340: 6e29 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  n)....    # ----
-00006350: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006360: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006380: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006390: 2d2d 2d2d 2d2d 0d0a 2020 2020 4063 6c61  ------..    @cla
-000063a0: 7373 6d65 7468 6f64 0d0a 2020 2020 6465  ssmethod..    de
-000063b0: 6620 5f70 6f73 7369 626c 795f 7761 726e  f _possibly_warn
-000063c0: 2863 6c73 2c20 7761 726e 696e 675f 7374  (cls, warning_st
-000063d0: 7269 6e67 3a20 7374 7229 202d 3e20 4f70  ring: str) -> Op
-000063e0: 7469 6f6e 616c 5b62 6f6f 6c5d 3a0d 0a20  tional[bool]:.. 
-000063f0: 2020 2020 2020 2069 6620 636c 732e 5761         if cls.Wa
-00006400: 726e 696e 674c 6576 656c 203d 3d20 303a  rningLevel == 0:
-00006410: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-00006420: 7475 726e 2046 616c 7365 0d0a 2020 2020  turn False..    
-00006430: 2020 2020 6966 2063 6c73 2e57 6172 6e69      if cls.Warni
-00006440: 6e67 4c65 7665 6c20 3d3d 2031 3a0d 0a20  ngLevel == 1:.. 
-00006450: 2020 2020 2020 2020 2020 2077 6172 6e69             warni
-00006460: 6e67 732e 7761 726e 2877 6172 6e69 6e67  ngs.warn(warning
-00006470: 5f73 7472 696e 6729 0d0a 2020 2020 2020  _string)..      
-00006480: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
-00006490: 650d 0a20 2020 2020 2020 2072 6169 7365  e..        raise
-000064a0: 2054 7970 6545 7272 6f72 2877 6172 6e69   TypeError(warni
-000064b0: 6e67 5f73 7472 696e 6729 0d0a 0d0a 2020  ng_string)....  
-000064c0: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
-000064d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000064e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000064f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006500: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
-00006510: 2020 2020 6465 6620 5f5f 6e65 775f 5f28      def __new__(
-00006520: 636c 732c 2061 7272 2c20 2a2a 6b77 6172  cls, arr, **kwar
-00006530: 6773 2920 2d3e 2046 6173 7441 7272 6179  gs) -> FastArray
-00006540: 3a0d 0a20 2020 2020 2020 2061 6c6c 6f77  :..        allow
-00006550: 5f75 6e69 636f 6465 203d 206b 7761 7267  _unicode = kwarg
-00006560: 732e 6765 7428 2275 6e69 636f 6465 222c  s.get("unicode",
-00006570: 2046 616c 7365 290d 0a20 2020 2020 2020   False)..       
-00006580: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-00006590: 2020 2064 656c 206b 7761 7267 735b 2275     del kwargs["u
-000065a0: 6e69 636f 6465 225d 0d0a 2020 2020 2020  nicode"]..      
-000065b0: 2020 6578 6365 7074 3a0d 0a20 2020 2020    except:..     
-000065c0: 2020 2020 2020 2070 6173 730d 0a20 2020         pass..   
-000065d0: 2020 2020 2023 2049 6620 616c 7265 6164       # If alread
-000065e0: 7920 6120 6e75 6d70 7920 6172 7261 7920  y a numpy array 
-000065f0: 6e6f 206e 6565 6420 746f 2063 616c 6c20  no need to call 
-00006600: 6173 616e 790d 0a20 2020 2020 2020 2069  asany..        i
-00006610: 6620 6973 696e 7374 616e 6365 2861 7272  f isinstance(arr
-00006620: 2c20 6e70 2e6e 6461 7272 6179 2920 616e  , np.ndarray) an
-00006630: 6420 6c65 6e28 6b77 6172 6773 2920 3d3d  d len(kwargs) ==
-00006640: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
-00006650: 2069 6e73 7461 6e63 6520 3d20 6172 720d   instance = arr.
-00006660: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00006670: 6973 696e 7374 616e 6365 2869 6e73 7461  isinstance(insta
-00006680: 6e63 652c 2063 6c73 2920 616e 6420 696e  nce, cls) and in
-00006690: 7374 616e 6365 2e64 7479 7065 2e63 6861  stance.dtype.cha
-000066a0: 7220 213d 2022 5522 3a0d 0a20 2020 2020  r != "U":..     
-000066b0: 2020 2020 2020 2020 2020 2069 6620 696e             if in
-000066c0: 7374 616e 6365 2e64 7479 7065 2e63 6861  stance.dtype.cha
-000066d0: 7220 6e6f 7420 696e 204e 756d 7079 4368  r not in NumpyCh
-000066e0: 6172 5479 7065 732e 5375 7070 6f72 7465  arTypes.Supporte
-000066f0: 643a 0d0a 2020 2020 2020 2020 2020 2020  d:..            
-00006700: 2020 2020 2020 2020 636c 732e 5f70 6f73          cls._pos
-00006710: 7369 626c 795f 7761 726e 280d 0a20 2020  sibly_warn(..   
-00006720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006730: 2020 2020 2066 2246 6173 7441 7272 6179       f"FastArray
-00006740: 2063 6f6e 7461 696e 7320 616e 2075 6e73   contains an uns
-00006750: 7570 706f 7274 6564 2074 7970 6520 277b  upported type '{
-00006760: 696e 7374 616e 6365 2e64 7479 7065 7d27  instance.dtype}'
-00006770: 2e20 2050 726f 626c 656d 7320 6d61 7920  .  Problems may 
-00006780: 6f63 6375 722e 2020 436f 6e73 6964 6572  occur.  Consider
-00006790: 2063 6174 6567 6f72 6963 616c 732e 220d   categoricals.".
-000067a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000067b0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-000067c0: 2020 2020 2020 2020 2320 6966 2061 6c72          # if alr
-000067d0: 6561 6479 2061 2046 6173 7441 7272 6179  eady a FastArray
-000067e0: 2c20 646f 206e 6f74 2072 6577 7261 7020  , do not rewrap 
-000067f0: 7468 6973 0d0a 2020 2020 2020 2020 2020  this..          
-00006800: 2020 2020 2020 7265 7475 726e 2069 6e73        return ins
-00006810: 7461 6e63 650d 0a20 2020 2020 2020 2065  tance..        e
-00006820: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00006830: 2020 2320 666c 6970 2074 6865 206c 6973    # flip the lis
-00006840: 7420 6f72 206f 7468 6572 206f 626a 6563  t or other objec
-00006850: 7420 746f 2061 206e 756d 7079 2061 7272  t to a numpy arr
-00006860: 6179 0d0a 2020 2020 2020 2020 2020 2020  ay..            
-00006870: 696e 7374 616e 6365 203d 206e 702e 6173  instance = np.as
-00006880: 616e 7961 7272 6179 2861 7272 2c20 2a2a  anyarray(arr, **
-00006890: 6b77 6172 6773 290d 0a0d 0a20 2020 2020  kwargs)....     
-000068a0: 2020 2069 6620 6e6f 7420 616c 6c6f 775f     if not allow_
-000068b0: 756e 6963 6f64 6520 616e 6420 696e 7374  unicode and inst
-000068c0: 616e 6365 2e64 7479 7065 2e63 6861 7220  ance.dtype.char 
-000068d0: 3d3d 2022 5522 3a0d 0a20 2020 2020 2020  == "U":..       
-000068e0: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
-000068f0: 2020 2020 2020 2020 2020 2069 6e73 7461             insta
-00006900: 6e63 6520 3d20 6e70 2e61 7361 7272 6179  nce = np.asarray
-00006910: 2869 6e73 7461 6e63 652c 2064 7479 7065  (instance, dtype
-00006920: 3d22 5322 290d 0a20 2020 2020 2020 2020  ="S")..         
-00006930: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
-00006940: 2020 2020 2020 2020 2020 2020 7061 7373              pass
-00006950: 0d0a 0d0a 2020 2020 2020 2020 6966 206c  ....        if l
-00006960: 656e 2869 6e73 7461 6e63 652e 7368 6170  en(instance.shap
-00006970: 6529 203d 3d20 303a 0d0a 2020 2020 2020  e) == 0:..      
-00006980: 2020 2020 2020 6966 2069 6e73 7461 6e63        if instanc
-00006990: 652e 6474 7970 652e 6368 6172 2069 6e20  e.dtype.char in 
-000069a0: 4e75 6d70 7943 6861 7254 7970 6573 2e53  NumpyCharTypes.S
-000069b0: 7570 706f 7274 6564 3a0d 0a20 2020 2020  upported:..     
-000069c0: 2020 2020 2020 2020 2020 2069 6e73 7461             insta
-000069d0: 6e63 6520 3d20 6e70 2e61 7361 6e79 6172  nce = np.asanyar
-000069e0: 7261 7928 5b69 6e73 7461 6e63 655d 2c20  ray([instance], 
-000069f0: 2a2a 6b77 6172 6773 290d 0a20 2020 2020  **kwargs)..     
-00006a00: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00006a10: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00006a20: 6e70 2e61 7361 7272 6179 206f 6e20 6120  np.asarray on a 
-00006a30: 7365 7420 7769 6c6c 2072 6574 7572 6e20  set will return 
-00006a40: 616e 206f 626a 6563 7420 6f66 2031 0d0a  an object of 1..
-00006a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006a60: 6966 2069 7369 6e73 7461 6e63 6528 6172  if isinstance(ar
-00006a70: 722c 2073 6574 293a 0d0a 2020 2020 2020  r, set):..      
-00006a80: 2020 2020 2020 2020 2020 2020 2020 696e                in
-00006a90: 7374 616e 6365 203d 206e 702e 6173 6172  stance = np.asar
-00006aa0: 7261 7928 6c69 7374 2861 7272 292c 202a  ray(list(arr), *
-00006ab0: 2a6b 7761 7267 7329 0d0a 2020 2020 2020  *kwargs)..      
-00006ac0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-00006ad0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006ae0: 2020 2020 2072 6169 7365 2054 7970 6545       raise TypeE
-00006af0: 7272 6f72 2866 2246 6173 7441 7272 6179  rror(f"FastArray
-00006b00: 2063 616e 6e6f 7420 696e 6974 6961 6c69   cannot initiali
-00006b10: 7a65 207b 6172 727d 2229 0d0a 0d0a 2020  ze {arr}")....  
-00006b20: 2020 2020 2020 6966 2069 6e73 7461 6e63        if instanc
-00006b30: 652e 6e64 696d 203e 2031 3a0d 0a20 2020  e.ndim > 1:..   
-00006b40: 2020 2020 2020 2020 2023 206f 6e6c 7920           # only 
-00006b50: 6f6e 6520 6469 6d65 6e73 696f 6e20 6361  one dimension ca
-00006b60: 6e20 6265 2067 7265 6174 6572 2074 6861  n be greater tha
-00006b70: 6e20 6f6e 650d 0a20 2020 2020 2020 2020  n one..         
-00006b80: 2020 2069 6620 636c 732e 5f63 6865 636b     if cls._check
-00006b90: 5f6e 6469 6d28 696e 7374 616e 6365 2920  _ndim(instance) 
-00006ba0: 3e20 313a 0d0a 2020 2020 2020 2020 2020  > 1:..          
-00006bb0: 2020 2020 2020 636c 732e 5f70 6f73 7369        cls._possi
-00006bc0: 626c 795f 7761 726e 2846 6173 7441 7272  bly_warn(FastArr
-00006bd0: 6179 2e57 6172 6e69 6e67 4469 6374 5b22  ay.WarningDict["
-00006be0: 6d75 6c74 6970 6c65 5f64 696d 656e 7369  multiple_dimensi
-00006bf0: 6f6e 7322 5d2e 666f 726d 6174 2869 6e73  ons"].format(ins
-00006c00: 7461 6e63 652e 7368 6170 6529 290d 0a20  tance.shape)).. 
-00006c10: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00006c20: 2077 6172 6e69 6e67 732e 7761 726e 2866   warnings.warn(f
-00006c30: 2246 6173 7441 7272 6179 2063 6f6e 7461  "FastArray conta
-00006c40: 696e 7320 7477 6f20 6f72 206d 6f72 6520  ins two or more 
-00006c50: 6469 6d65 6e73 696f 6e73 2067 7265 6174  dimensions great
-00006c60: 6572 2074 6861 6e20 6f6e 6520 2d20 7368  er than one - sh
-00006c70: 6170 653a 7b69 6e73 7461 6e63 652e 7368  ape:{instance.sh
-00006c80: 6170 657d 2e20 2050 726f 626c 656d 7320  ape}.  Problems 
-00006c90: 6d61 7920 6f63 6375 722e 2229 0d0a 2020  may occur.")..  
-00006ca0: 2020 2020 2020 656c 6966 206e 6f74 2028        elif not (
-00006cb0: 696e 7374 616e 6365 2e66 6c61 6773 2e66  instance.flags.f
-00006cc0: 5f63 6f6e 7469 6775 6f75 7320 6f72 2069  _contiguous or i
-00006cd0: 6e73 7461 6e63 652e 666c 6167 732e 635f  nstance.flags.c_
-00006ce0: 636f 6e74 6967 756f 7573 293a 0d0a 2020  contiguous):..  
-00006cf0: 2020 2020 2020 2020 2020 2320 636f 7079            # copy
-00006d00: 2073 686f 756c 6420 656c 696d 696e 6174   should eliminat
-00006d10: 6520 7374 7269 6465 7320 7072 6f62 6c65  e strides proble
-00006d20: 6d0d 0a20 2020 2020 2020 2020 2020 2069  m..            i
-00006d30: 6e73 7461 6e63 6520 3d20 696e 7374 616e  nstance = instan
-00006d40: 6365 2e63 6f70 7928 290d 0a20 2020 2020  ce.copy()..     
-00006d50: 2020 2020 2020 2063 6c73 2e5f 706f 7373         cls._poss
-00006d60: 6962 6c79 5f77 6172 6e28 6622 4661 7374  ibly_warn(f"Fast
-00006d70: 4172 7261 7920 696e 6974 6961 6c69 7a65  Array initialize
-00006d80: 6420 7769 7468 2073 7472 6964 6573 2e22  d with strides."
-00006d90: 290d 0a0d 0a20 2020 2020 2020 2023 2066  )....        # f
-00006da0: 6f72 2061 7272 6179 7320 7468 6174 2063  or arrays that c
-00006db0: 616e 2063 6175 7365 2070 726f 626c 656d  an cause problem
-00006dc0: 7320 6275 7420 7765 2061 6c6c 6f77 206e  s but we allow n
-00006dd0: 6f77 0d0a 2020 2020 2020 2020 6966 2063  ow..        if c
-00006de0: 6c73 2e4e 6f54 6f6c 6572 616e 6365 3a0d  ls.NoTolerance:.
-00006df0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00006e00: 6e6f 7420 2869 6e73 7461 6e63 652e 666c  not (instance.fl
-00006e10: 6167 732e 665f 636f 6e74 6967 756f 7573  ags.f_contiguous
-00006e20: 206f 7220 696e 7374 616e 6365 2e66 6c61   or instance.fla
-00006e30: 6773 2e63 5f63 6f6e 7469 6775 6f75 7329  gs.c_contiguous)
-00006e40: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00006e50: 2020 2023 2063 6f70 7920 7368 6f75 6c64     # copy should
-00006e60: 2065 6c69 6d69 6e61 7465 2073 7472 6964   eliminate strid
-00006e70: 6573 2070 726f 626c 656d 0d0a 2020 2020  es problem..    
-00006e80: 2020 2020 2020 2020 2020 2020 696e 7374              inst
-00006e90: 616e 6365 203d 2069 6e73 7461 6e63 652e  ance = instance.
-00006ea0: 636f 7079 2829 0d0a 2020 2020 2020 2020  copy()..        
-00006eb0: 2020 2020 2020 2020 636c 732e 5f70 6f73          cls._pos
-00006ec0: 7369 626c 795f 7761 726e 2866 2246 6173  sibly_warn(f"Fas
-00006ed0: 7441 7272 6179 2069 6e69 7469 616c 697a  tArray initializ
-00006ee0: 6564 2077 6974 6820 7374 7269 6465 732e  ed with strides.
-00006ef0: 2229 0d0a 0d0a 2020 2020 2020 2020 6966  ")....        if
-00006f00: 2069 6e73 7461 6e63 652e 6474 7970 652e   instance.dtype.
-00006f10: 6368 6172 206e 6f74 2069 6e20 4e75 6d70  char not in Nump
-00006f20: 7943 6861 7254 7970 6573 2e53 7570 706f  yCharTypes.Suppo
-00006f30: 7274 6564 3a0d 0a20 2020 2020 2020 2020  rted:..         
-00006f40: 2020 2063 6c73 2e5f 706f 7373 6962 6c79     cls._possibly
-00006f50: 5f77 6172 6e28 0d0a 2020 2020 2020 2020  _warn(..        
-00006f60: 2020 2020 2020 2020 6622 4661 7374 4172          f"FastAr
-00006f70: 7261 7920 636f 6e74 6169 6e73 2061 6e20  ray contains an 
-00006f80: 756e 7375 7070 6f72 7465 6420 7479 7065  unsupported type
-00006f90: 2027 7b69 6e73 7461 6e63 652e 6474 7970   '{instance.dtyp
-00006fa0: 657d 272e 2020 5072 6f62 6c65 6d73 206d  e}'.  Problems m
-00006fb0: 6179 206f 6363 7572 2e20 2043 6f6e 7369  ay occur.  Consi
-00006fc0: 6465 7220 6361 7465 676f 7269 6361 6c73  der categoricals
-00006fd0: 2e22 0d0a 2020 2020 2020 2020 2020 2020  ."..            
-00006fe0: 290d 0a0d 0a20 2020 2020 2020 2072 6574  )....        ret
-00006ff0: 7572 6e20 696e 7374 616e 6365 2e76 6965  urn instance.vie
-00007000: 7728 636c 7329 0d0a 0d0a 2020 2020 6465  w(cls)....    de
-00007010: 6620 5f5f 6172 7261 795f 6669 6e61 6c69  f __array_finali
-00007020: 7a65 5f5f 2873 656c 662c 206f 626a 293a  ze__(self, obj):
-00007030: 0d0a 2020 2020 2020 2020 2222 2246 696e  ..        """Fin
-00007040: 616c 697a 6573 2073 656c 6620 6672 6f6d  alizes self from
-00007050: 206f 7468 6572 2c20 6361 6c6c 6564 2061   other, called a
-00007060: 7320 7061 7274 206f 6620 6e64 6172 7261  s part of ndarra
-00007070: 792e 5f5f 6e65 775f 5f28 2922 2222 0d0a  y.__new__()"""..
-00007080: 2020 2020 2020 2020 6966 206f 626a 2069          if obj i
-00007090: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
-000070a0: 2020 2020 2072 6574 7572 6e0d 0a20 2020       return..   
-000070b0: 2020 2020 2066 726f 6d5f 7065 6572 203d       from_peer =
-000070c0: 2069 7369 6e73 7461 6e63 6528 6f62 6a2c   isinstance(obj,
-000070d0: 2046 6173 7441 7272 6179 290d 0a20 2020   FastArray)..   
-000070e0: 2020 2020 2069 6620 6672 6f6d 5f70 6565       if from_pee
-000070f0: 7220 616e 6420 6861 7361 7474 7228 6f62  r and hasattr(ob
-00007100: 6a2c 2022 5f6e 616d 6522 293a 0d0a 2020  j, "_name"):..  
-00007110: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
-00007120: 6e61 6d65 203d 206f 626a 2e5f 6e61 6d65  name = obj._name
-00007130: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
-00007140: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007150: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007160: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007170: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007180: 2d2d 2d2d 0d0a 2020 2020 6465 6620 5f5f  ----..    def __
-00007190: 7265 6475 6365 5f5f 2873 656c 6629 3a0d  reduce__(self):.
-000071a0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-000071b0: 2020 2020 2020 5573 6564 2066 6f72 2070        Used for p
-000071c0: 6963 6b6c 696e 672e 0d0a 2020 2020 2020  ickling...      
-000071d0: 2020 466f 7220 6a75 7374 2061 2046 6173    For just a Fas
-000071e0: 7441 7272 6179 2077 6520 7061 7373 2062  tArray we pass b
-000071f0: 6163 6b20 7468 6520 7669 6577 206f 6620  ack the view of 
-00007200: 7468 6520 6e70 2e6e 6461 7272 6179 2c20  the np.ndarray, 
-00007210: 7768 6963 6820 7468 656e 206b 6e6f 7773  which then knows
-00007220: 2068 6f77 2074 6f20 7069 636b 6c65 2069   how to pickle i
-00007230: 7473 656c 662e 0d0a 2020 2020 2020 2020  tself...        
-00007240: 4e4f 5445 3a20 4920 7468 696e 6b20 7468  NOTE: I think th
-00007250: 6572 6520 6973 2061 2066 6173 7465 7220  ere is a faster 
-00007260: 7761 792e 2e20 706f 7373 6962 6c65 2072  way.. possible r
-00007270: 6574 7572 6e69 6e67 2061 2062 7974 6520  eturning a byte 
-00007280: 7374 7269 6e67 2e0d 0a20 2020 2020 2020  string...       
-00007290: 2022 2222 0d0a 2020 2020 2020 2020 636c   """..        cl
-000072a0: 7320 3d20 7479 7065 2873 656c 6629 0d0a  s = type(self)..
-000072b0: 0d0a 2020 2020 2020 2020 2320 6368 6563  ..        # chec
-000072c0: 6b20 6966 2073 7562 636c 6173 7365 6420  k if subclassed 
-000072d0: 726f 7574 696e 6520 6b6e 6f77 7320 686f  routine knows ho
-000072e0: 7720 746f 2073 6572 6961 6c69 7a65 2069  w to serialize i
-000072f0: 7473 656c 660d 0a20 2020 2020 2020 2069  tself..        i
-00007300: 6620 6861 7361 7474 7228 7365 6c66 2c20  f hasattr(self, 
-00007310: 225f 6275 696c 645f 7364 735f 6d65 7461  "_build_sds_meta
-00007320: 5f64 6174 6122 293a 0d0a 2020 2020 2020  _data"):..      
-00007330: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
-00007340: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
-00007350: 203d 2073 656c 662e 5f6e 616d 650d 0a20   = self._name.. 
-00007360: 2020 2020 2020 2020 2020 2065 7863 6570             excep
-00007370: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
-00007380: 2020 2020 6e61 6d65 203d 2022 756e 6b6e      name = "unkn
-00007390: 6f77 6e22 0d0a 0d0a 2020 2020 2020 2020  own"....        
-000073a0: 2020 2020 7475 7073 203d 2073 656c 662e      tups = self.
-000073b0: 5f62 7569 6c64 5f73 6473 5f6d 6574 615f  _build_sds_meta_
-000073c0: 6461 7461 286e 616d 6529 0d0a 2020 2020  data(name)..    
-000073d0: 2020 2020 2020 2020 7265 7475 726e 2028          return (
-000073e0: 636c 732e 5f6c 6f61 645f 6672 6f6d 5f73  cls._load_from_s
-000073f0: 6473 5f6d 6574 615f 6461 7461 2c20 286e  ds_meta_data, (n
-00007400: 616d 652c 2073 656c 662e 7669 6577 2846  ame, self.view(F
-00007410: 6173 7441 7272 6179 292c 2074 7570 735b  astArray), tups[
-00007420: 315d 2c20 7475 7073 5b30 5d29 290d 0a0d  1], tups[0]))...
-00007430: 0a20 2020 2020 2020 2023 2073 6574 2074  .        # set t
-00007440: 6f20 7472 7565 2074 6f20 7475 726e 2063  o true to turn c
-00007450: 6f6d 7072 6573 7369 6f6e 206f 6e0d 0a20  ompression on.. 
-00007460: 2020 2020 2020 2069 6620 636c 732e 436f         if cls.Co
-00007470: 6d70 7265 7373 5069 636b 6c65 2061 6e64  mpressPickle and
-00007480: 206c 656e 2873 656c 6629 203e 2030 3a0d   len(self) > 0:.
-00007490: 0a20 2020 2020 2020 2020 2020 2023 2063  .            # c
-000074a0: 7265 6174 6520 6120 7369 6e67 6c65 2063  reate a single c
-000074b0: 6f6d 7072 6573 7365 6420 6172 7261 7920  ompressed array 
-000074c0: 6f66 2075 696e 7438 0d0a 2020 2020 2020  of uint8..      
-000074d0: 2020 2020 2020 6361 7272 203d 2072 632e        carr = rc.
-000074e0: 436f 6d70 7265 7373 4465 636f 6d70 7265  CompressDecompre
-000074f0: 7373 4172 7261 7973 285b 7365 6c66 5d2c  ssArrays([self],
-00007500: 2030 295b 305d 0d0a 2020 2020 2020 2020   0)[0]..        
-00007510: 2020 2020 7265 7475 726e 2028 4641 5f46      return (FA_F
-00007520: 524f 4d5f 5549 4e54 382c 2028 6361 7272  ROM_UINT8, (carr
-00007530: 2e76 6965 7728 6e70 2e6e 6461 7272 6179  .view(np.ndarray
-00007540: 292c 2929 0d0a 2020 2020 2020 2020 656c  ),))..        el
-00007550: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00007560: 2072 6574 7572 6e20 280d 0a20 2020 2020   return (..     
-00007570: 2020 2020 2020 2020 2020 2063 6c73 2e5f             cls._
-00007580: 5f6e 6577 5f5f 2c0d 0a20 2020 2020 2020  _new__,..       
-00007590: 2020 2020 2020 2020 2028 0d0a 2020 2020           (..    
-000075a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000075b0: 636c 732c 0d0a 2020 2020 2020 2020 2020  cls,..          
-000075c0: 2020 2020 2020 2020 2020 7365 6c66 2e76            self.v
-000075d0: 6965 7728 6e70 2e6e 6461 7272 6179 292c  iew(np.ndarray),
-000075e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000075f0: 2020 292c 0d0a 2020 2020 2020 2020 2020    ),..          
-00007600: 2020 290d 0a0d 0a20 2020 2023 202d 2d2d    )....    # ---
-00007610: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007620: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007650: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2040 636c  -------..    @cl
-00007660: 6173 736d 6574 686f 640d 0a20 2020 2064  assmethod..    d
-00007670: 6566 205f 6368 6563 6b5f 6e64 696d 2863  ef _check_ndim(c
-00007680: 6c73 2c20 696e 7374 616e 6365 293a 0d0a  ls, instance):..
-00007690: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-000076a0: 2020 2020 2049 7465 7261 7465 7320 7468       Iterates th
-000076b0: 726f 7567 6820 6469 6d65 6e73 696f 6e73  rough dimensions
-000076c0: 206f 6620 616e 2061 7272 6179 2c20 636f   of an array, co
-000076d0: 756e 7469 6e67 2068 6f77 206d 616e 7920  unting how many 
-000076e0: 6469 6d65 6e73 696f 6e73 2068 6176 6520  dimensions have 
-000076f0: 7661 6c75 6573 2067 7265 6174 6572 2074  values greater t
-00007700: 6861 6e20 312e 0d0a 2020 2020 2020 2020  han 1...        
-00007710: 5072 6f62 6c65 6d73 206d 6179 206f 6363  Problems may occ
-00007720: 7572 6520 7769 7468 206d 756c 7469 6469  ure with multidi
-00007730: 6d65 6e73 696f 6e61 6c20 4661 7374 4172  mensional FastAr
-00007740: 7261 7973 2c20 616e 6420 7468 6520 7573  rays, and the us
-00007750: 6572 2077 696c 6c20 6265 2077 6172 6e65  er will be warne
-00007760: 642e 0d0a 2020 2020 2020 2020 2222 220d  d...        """.
-00007770: 0a20 2020 2020 2020 2069 6e64 6578 203d  .        index =
-00007780: 2030 0d0a 2020 2020 2020 2020 6162 6f76   0..        abov
-00007790: 656f 6e65 203d 2030 0d0a 2020 2020 2020  eone = 0..      
-000077a0: 2020 7768 696c 6520 696e 6465 7820 3c20    while index < 
-000077b0: 696e 7374 616e 6365 2e6e 6469 6d3a 0d0a  instance.ndim:..
-000077c0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-000077d0: 6e73 7461 6e63 652e 7368 6170 655b 696e  nstance.shape[in
-000077e0: 6465 785d 203e 2031 3a0d 0a20 2020 2020  dex] > 1:..     
-000077f0: 2020 2020 2020 2020 2020 2061 626f 7665             above
-00007800: 6f6e 6520 2b3d 2031 0d0a 2020 2020 2020  one += 1..      
-00007810: 2020 2020 2020 696e 6465 7820 2b3d 2031        index += 1
-00007820: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00007830: 2061 626f 7665 6f6e 650d 0a0d 0a20 2020   aboveone....   
-00007840: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
-00007850: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007860: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
-00007890: 2020 2064 6566 2067 6574 5f6e 616d 6528     def get_name(
-000078a0: 7365 6c66 2920 2d3e 2073 7472 3a0d 0a20  self) -> str:.. 
-000078b0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-000078c0: 2020 2020 4765 7420 7468 6520 6e61 6d65      Get the name
-000078d0: 2074 6861 7427 7320 6173 7369 676e 6564   that's assigned
-000078e0: 2074 6f20 6120 6046 6173 7441 7272 6179   to a `FastArray
-000078f0: 602e 0d0a 0d0a 2020 2020 2020 2020 5768  `.....        Wh
-00007900: 656e 2061 2060 4661 7374 4172 7261 7960  en a `FastArray`
-00007910: 206f 626a 6563 7420 6973 2063 7265 6174   object is creat
-00007920: 6564 2c20 6974 2068 6173 206e 6f20 6e61  ed, it has no na
-00007930: 6d65 2e20 4974 2063 616e 2062 6520 6173  me. It can be as
-00007940: 7369 676e 6564 2061 206e 616d 650d 0a20  signed a name.. 
-00007950: 2020 2020 2020 2076 6961 2060 7365 745f         via `set_
-00007960: 6e61 6d65 602e 2046 6f72 2064 6574 6169  name`. For detai
-00007970: 6c73 2c20 7365 6520 3a6d 6574 683a 6046  ls, see :meth:`F
-00007980: 6173 7441 7272 6179 2e73 6574 5f6e 616d  astArray.set_nam
-00007990: 6560 2e0d 0a0d 0a20 2020 2020 2020 2052  e`.....        R
-000079a0: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
-000079b0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-000079c0: 2073 7472 206f 7220 4e6f 6e65 0d0a 2020   str or None..  
-000079d0: 2020 2020 2020 2020 2020 5468 6520 6173            The as
-000079e0: 7369 676e 6564 206e 616d 652c 206f 7220  signed name, or 
-000079f0: 4e6f 6e65 2069 6620 7468 6520 6172 7261  None if the arra
-00007a00: 7920 6861 7320 6e6f 7420 6265 656e 206e  y has not been n
-00007a10: 616d 6564 2e0d 0a0d 0a20 2020 2020 2020  amed.....       
-00007a20: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
-00007a30: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-00007a40: 2020 2020 2046 6173 7441 7272 6179 2e73       FastArray.s
-00007a50: 6574 5f6e 616d 650d 0a0d 0a20 2020 2020  et_name....     
-00007a60: 2020 2045 7861 6d70 6c65 730d 0a20 2020     Examples..   
-00007a70: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
-00007a80: 2020 2020 2020 2041 7373 6967 6e20 7468         Assign th
-00007a90: 6520 6046 6173 7441 7272 6179 6020 6120  e `FastArray` a 
-00007aa0: 6e61 6d65 2075 7369 6e67 203a 6d65 7468  name using :meth
-00007ab0: 3a60 4661 7374 4172 7261 792e 7365 745f  :`FastArray.set_
-00007ac0: 6e61 6d65 603a 0d0a 0d0a 2020 2020 2020  name`:....      
-00007ad0: 2020 3e3e 3e20 6120 3d20 7274 2e61 7261    >>> a = rt.ara
-00007ae0: 6e67 6528 3529 0d0a 2020 2020 2020 2020  nge(5)..        
-00007af0: 3e3e 3e20 612e 7365 745f 6e61 6d65 2827  >>> a.set_name('
-00007b00: 4641 204e 616d 6527 290d 0a20 2020 2020  FA Name')..     
-00007b10: 2020 2046 6173 7441 7272 6179 285b 302c     FastArray([0,
-00007b20: 2031 2c20 322c 2033 2c20 345d 290d 0a0d   1, 2, 3, 4])...
-00007b30: 0a20 2020 2020 2020 2047 6574 2074 6865  .        Get the
-00007b40: 206e 616d 653a 0d0a 0d0a 2020 2020 2020   name:....      
-00007b50: 2020 3e3e 3e20 612e 6765 745f 6e61 6d65    >>> a.get_name
-00007b60: 2829 0d0a 2020 2020 2020 2020 2746 4120  ()..        'FA 
-00007b70: 4e61 6d65 270d 0a20 2020 2020 2020 2022  Name'..        "
-00007b80: 2222 0d0a 2020 2020 2020 2020 6e61 6d65  ""..        name
-00007b90: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
-00007ba0: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-00007bb0: 2020 206e 616d 6520 3d20 7365 6c66 2e5f     name = self._
-00007bc0: 6e61 6d65 0d0a 2020 2020 2020 2020 6578  name..        ex
-00007bd0: 6365 7074 3a0d 0a20 2020 2020 2020 2020  cept:..         
-00007be0: 2020 2070 6173 730d 0a20 2020 2020 2020     pass..       
-00007bf0: 2072 6574 7572 6e20 6e61 6d65 0d0a 0d0a   return name....
-00007c00: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
-00007c10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007c20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007c30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007c40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007c50: 0d0a 2020 2020 6465 6620 7365 745f 6e61  ..    def set_na
-00007c60: 6d65 2873 656c 662c 206e 616d 6529 202d  me(self, name) -
-00007c70: 3e20 4661 7374 4172 7261 793a 0d0a 2020  > FastArray:..  
-00007c80: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00007c90: 2020 2041 7373 6967 6e20 6120 6e61 6d65     Assign a name
-00007ca0: 2074 6f20 6120 6046 6173 7441 7272 6179   to a `FastArray
-00007cb0: 602e 0d0a 0d0a 2020 2020 2020 2020 4120  `.....        A 
-00007cc0: 6046 6173 7441 7272 6179 6020 6973 2061  `FastArray` is a
-00007cd0: 2077 7261 7070 6572 2061 726f 756e 6420   wrapper around 
-00007ce0: 6120 4e75 6d50 7920 606e 6461 7272 6179  a NumPy `ndarray
-00007cf0: 602e 2057 6865 6e20 6120 6046 6173 7441  `. When a `FastA
-00007d00: 7272 6179 6020 6973 0d0a 2020 2020 2020  rray` is..      
-00007d10: 2020 6372 6561 7465 642c 2069 7420 6861    created, it ha
-00007d20: 7320 6e6f 206e 616d 652e 2059 6f75 2063  s no name. You c
-00007d30: 616e 2061 7373 6967 6e20 6974 2061 206e  an assign it a n
-00007d40: 616d 6520 7573 696e 6720 6073 6574 5f6e  ame using `set_n
-00007d50: 616d 6560 2e0d 0a0d 0a20 2020 2020 2020  ame`.....       
-00007d60: 202a 2a49 6e74 6572 6163 7469 6f6e 7320   **Interactions 
-00007d70: 7769 7468 2044 6174 6173 6574 204f 626a  with Dataset Obj
-00007d80: 6563 7473 2a2a 0d0a 0d0a 2020 2020 2020  ects**....      
-00007d90: 2020 5768 656e 2061 6e20 756e 6e61 6d65    When an unname
-00007da0: 6420 6046 6173 7441 7272 6179 6020 6973  d `FastArray` is
-00007db0: 2061 6464 6564 2074 6f20 6120 6044 6174   added to a `Dat
-00007dc0: 6173 6574 603a 0d0a 0d0a 2020 2020 2020  aset`:....      
-00007dd0: 2020 2d20 5468 6520 6046 6173 7441 7272    - The `FastArr
-00007de0: 6179 6020 696e 6865 7269 7473 2074 6865  ay` inherits the
-00007df0: 206e 616d 6520 6f66 2074 6865 2060 4461   name of the `Da
-00007e00: 7461 7365 7460 2063 6f6c 756d 6e2e 0d0a  taset` column...
-00007e10: 2020 2020 2020 2020 2d20 4361 6c6c 696e          - Callin
-00007e20: 6720 6060 6661 2e73 6574 5f6e 616d 6560  g ``fa.set_name`
-00007e30: 6020 6f72 2060 6064 732e 636f 6c2e 7365  ` or ``ds.col.se
-00007e40: 745f 6e61 6d65 6060 2c20 6f72 2063 6861  t_name``, or cha
-00007e50: 6e67 696e 6720 7468 6520 6469 7370 6c61  nging the displa
-00007e60: 7965 640d 0a20 2020 2020 2020 2020 2063  yed..          c
-00007e70: 6f6c 756d 6e20 6e61 6d65 2076 6961 2060  olumn name via `
-00007e80: 6064 732e 636f 6c5f 7265 6e61 6d65 6060  `ds.col_rename``
-00007e90: 2c20 6368 616e 6765 7320 7468 6520 6e61  , changes the na
-00007ea0: 6d65 2061 7373 6967 6e65 6420 746f 2074  me assigned to t
-00007eb0: 6865 0d0a 2020 2020 2020 2020 2020 6046  he..          `F
-00007ec0: 6173 7441 7272 6179 602e 0d0a 0d0a 2020  astArray`.....  
-00007ed0: 2020 2020 2020 2020 2020 2d20 4e6f 7465            - Note
-00007ee0: 2074 6861 7420 6361 6c6c 696e 6720 6060   that calling ``
-00007ef0: 6661 2e73 6574 5f6e 616d 6560 6020 6f72  fa.set_name`` or
-00007f00: 2060 6064 732e 636f 6c2e 7365 745f 6e61   ``ds.col.set_na
-00007f10: 6d65 6060 2064 6f65 736e 2774 2063 6861  me`` doesn't cha
-00007f20: 6e67 6520 7468 650d 0a20 2020 2020 2020  nge the..       
-00007f30: 2020 2020 2020 2064 6973 706c 6179 6564         displayed
-00007f40: 2063 6f6c 756d 6e20 6e61 6d65 2e0d 0a0d   column name....
-00007f50: 0a20 2020 2020 2020 2057 6865 6e20 6120  .        When a 
-00007f60: 6e61 6d65 6420 6046 6173 7441 7272 6179  named `FastArray
-00007f70: 6020 6973 2061 6464 6564 2074 6f20 6120  ` is added to a 
-00007f80: 6044 6174 6173 6574 603a 0d0a 0d0a 2020  `Dataset`:....  
-00007f90: 2020 2020 2020 2d20 4120 6e65 7720 6046        - A new `F
-00007fa0: 6173 7441 7272 6179 6020 696e 7374 616e  astArray` instan
-00007fb0: 6365 2069 7320 6372 6561 7465 6420 7468  ce is created th
-00007fc0: 6174 2069 6e68 6572 6974 7320 7468 6520  at inherits the 
-00007fd0: 6044 6174 6173 6574 6020 636f 6c75 6d6e  `Dataset` column
-00007fe0: 206e 616d 652e 0d0a 2020 2020 2020 2020   name...        
-00007ff0: 2d20 4361 6c6c 696e 6720 6060 6473 2e63  - Calling ``ds.c
-00008000: 6f6c 2e73 6574 5f6e 616d 6560 6020 6f72  ol.set_name`` or
-00008010: 2063 6861 6e67 696e 6720 7468 6520 6469   changing the di
-00008020: 7370 6c61 7965 6420 636f 6c75 6d6e 206e  splayed column n
-00008030: 616d 6520 7669 610d 0a20 2020 2020 2020  ame via..       
-00008040: 2020 2060 6064 732e 636f 6c5f 7265 6e61     ``ds.col_rena
-00008050: 6d65 6060 2063 6861 6e67 6573 2074 6865  me`` changes the
-00008060: 206e 6577 2069 6e73 7461 6e63 6527 7320   new instance's 
-00008070: 6e61 6d65 2e0d 0a20 2020 2020 2020 202d  name...        -
-00008080: 2043 616c 6c69 6e67 2060 7365 745f 6e61   Calling `set_na
-00008090: 6d65 6020 6f6e 2074 6865 206f 7269 6769  me` on the origi
-000080a0: 6e61 6c20 6046 6173 7441 7272 6179 6020  nal `FastArray` 
-000080b0: 696e 7374 616e 6365 2063 6861 6e67 6573  instance changes
-000080c0: 206f 6e6c 7920 7468 6174 2069 6e73 7461   only that insta
-000080d0: 6e63 6527 730d 0a20 2020 2020 2020 2020  nce's..         
-000080e0: 206e 616d 652e 0d0a 0d0a 2020 2020 2020   name.....      
-000080f0: 2020 496e 2062 6f74 6820 6361 7365 732c    In both cases,
-00008100: 2074 6865 204e 756d 5079 2061 7272 6179   the NumPy array
-00008110: 2075 6e64 6572 6c79 696e 6720 7468 6520   underlying the 
-00008120: 6046 6173 7441 7272 6179 6020 6973 2073  `FastArray` is s
-00008130: 6861 7265 6420 2d2d 2063 6861 6e67 6573  hared -- changes
-00008140: 0d0a 2020 2020 2020 2020 746f 2069 7473  ..        to its
-00008150: 2076 616c 7565 7320 6170 7065 6172 2069   values appear i
-00008160: 6e20 7468 6520 6044 6174 6173 6574 6020  n the `Dataset` 
-00008170: 636f 6c75 6d6e 2c20 616e 6420 7669 6365  column, and vice
-00008180: 2d76 6572 7361 2e0d 0a0d 0a20 2020 2020  -versa.....     
-00008190: 2020 202a 2a49 6e74 6572 6163 7469 6f6e     **Interaction
-000081a0: 7320 7769 7468 2046 6173 7441 7272 6179  s with FastArray
-000081b0: 204f 626a 6563 7473 2a2a 0d0a 0d0a 2020   Objects**....  
-000081c0: 2020 2020 2020 2d20 5768 656e 2061 2060        - When a `
-000081d0: 4661 7374 4172 7261 7960 2069 7320 6372  FastArray` is cr
-000081e0: 6561 7465 6420 6173 2061 2076 6965 7720  eated as a view 
-000081f0: 6f66 2061 6e6f 7468 6572 2c20 6e61 6d65  of another, name
-00008200: 6420 6046 6173 7441 7272 6179 602c 2074  d `FastArray`, t
-00008210: 6865 206e 6577 0d0a 2020 2020 2020 2020  he new..        
-00008220: 2020 6046 6173 7441 7272 6179 6020 696e    `FastArray` in
-00008230: 7374 616e 6365 2069 6e68 6572 6974 7320  stance inherits 
-00008240: 7468 6520 6e61 6d65 2066 726f 6d20 7468  the name from th
-00008250: 6520 6f72 6967 696e 616c 2060 4661 7374  e original `Fast
-00008260: 4172 7261 7960 2e0d 0a20 2020 2020 2020  Array`...       
-00008270: 202d 2057 6865 7468 6572 2074 6865 206f   - Whether the o
-00008280: 7269 6769 6e61 6c20 6046 6173 7441 7272  riginal `FastArr
-00008290: 6179 6020 6973 206e 616d 6564 206f 7220  ay` is named or 
-000082a0: 756e 6e61 6d65 642c 2063 616c 6c69 6e67  unnamed, calling
-000082b0: 2060 7365 745f 6e61 6d65 6020 6f6e 0d0a   `set_name` on..
-000082c0: 2020 2020 2020 2020 2020 6569 7468 6572            either
-000082d0: 2060 4661 7374 4172 7261 7960 2064 6f65   `FastArray` doe
-000082e0: 7320 6e6f 7420 6368 616e 6765 2074 6865  s not change the
-000082f0: 206e 616d 6520 6f66 2074 6865 206f 7468   name of the oth
-00008300: 6572 2060 4661 7374 4172 7261 7960 2e0d  er `FastArray`..
-00008310: 0a0d 0a20 2020 2020 2020 2050 6172 616d  ...        Param
-00008320: 6574 6572 730d 0a20 2020 2020 2020 202d  eters..        -
-00008330: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020  ---------..     
-00008340: 2020 206e 616d 6520 3a20 7374 720d 0a20     name : str.. 
-00008350: 2020 2020 2020 2020 2020 2054 6865 206e             The n
-00008360: 616d 6520 746f 2061 7373 6967 6e20 746f  ame to assign to
-00008370: 2074 6865 2060 4661 7374 4172 7261 7960   the `FastArray`
-00008380: 2e0d 0a0d 0a20 2020 2020 2020 2052 6574  .....        Ret
-00008390: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
-000083a0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2060  -----..        `
-000083b0: 4661 7374 4172 7261 7960 0d0a 2020 2020  FastArray`..    
-000083c0: 2020 2020 2020 2020 5468 6520 6046 6173          The `Fas
-000083d0: 7441 7272 6179 6020 6973 2072 6574 7572  tArray` is retur
-000083e0: 6e65 642e 2054 6865 206e 616d 6520 6361  ned. The name ca
-000083f0: 6e20 6265 2061 6363 6573 7365 6420 7573  n be accessed us
-00008400: 696e 670d 0a20 2020 2020 2020 2020 2020  ing..           
-00008410: 203a 6d65 7468 3a60 4661 7374 4172 7261   :meth:`FastArra
-00008420: 792e 6765 745f 6e61 6d65 602e 0d0a 0d0a  y.get_name`.....
-00008430: 2020 2020 2020 2020 5365 6520 416c 736f          See Also
-00008440: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-00008450: 2d2d 0d0a 2020 2020 2020 2020 4661 7374  --..        Fast
-00008460: 4172 7261 792e 6765 745f 6e61 6d65 0d0a  Array.get_name..
-00008470: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
-00008480: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
-00008490: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
-000084a0: 3e20 6120 3d20 7274 2e61 7261 6e67 6528  > a = rt.arange(
-000084b0: 3529 0d0a 2020 2020 2020 2020 3e3e 3e20  5)..        >>> 
-000084c0: 612e 7365 745f 6e61 6d65 2827 4641 204e  a.set_name('FA N
-000084d0: 616d 6527 290d 0a20 2020 2020 2020 2046  ame')..        F
-000084e0: 6173 7441 7272 6179 285b 302c 2031 2c20  astArray([0, 1, 
-000084f0: 322c 2033 2c20 345d 290d 0a0d 0a20 2020  2, 3, 4])....   
-00008500: 2020 2020 2059 6f75 2063 616e 2067 6574       You can get
-00008510: 2074 6865 206e 616d 6520 7573 696e 6720   the name using 
-00008520: 3a6d 6574 683a 6046 6173 7441 7272 6179  :meth:`FastArray
-00008530: 2e67 6574 5f6e 616d 6560 3a0d 0a0d 0a20  .get_name`:.... 
-00008540: 2020 2020 2020 203e 3e3e 2061 2e67 6574         >>> a.get
-00008550: 5f6e 616d 6528 290d 0a20 2020 2020 2020  _name()..       
-00008560: 2027 4641 204e 616d 6527 0d0a 0d0a 2020   'FA Name'....  
-00008570: 2020 2020 2020 5768 656e 2061 6e20 756e        When an un
-00008580: 6e61 6d65 6420 6046 6173 7441 7272 6179  named `FastArray
-00008590: 6020 6973 2061 6464 6564 2074 6f20 6120  ` is added to a 
-000085a0: 6044 6174 6173 6574 6020 636f 6c75 6d6e  `Dataset` column
-000085b0: 2c20 7468 6520 6046 6173 7441 7272 6179  , the `FastArray
-000085c0: 600d 0a20 2020 2020 2020 2069 6e68 6572  `..        inher
-000085d0: 6974 7320 7468 6520 6e61 6d65 206f 6620  its the name of 
-000085e0: 7468 6520 636f 6c75 6d6e 2e0d 0a0d 0a20  the column..... 
-000085f0: 2020 2020 2020 203e 3e3e 2061 203d 2072         >>> a = r
-00008600: 742e 4661 7374 4172 7261 7928 5b31 2c20  t.FastArray([1, 
-00008610: 322c 2033 5d29 0d0a 2020 2020 2020 2020  2, 3])..        
-00008620: 3e3e 3e20 6473 203d 2072 742e 4461 7461  >>> ds = rt.Data
-00008630: 7365 7428 290d 0a20 2020 2020 2020 203e  set()..        >
-00008640: 3e3e 2064 732e 436f 6c75 6d6e 5f4e 616d  >> ds.Column_Nam
-00008650: 6520 3d20 610d 0a20 2020 2020 2020 203e  e = a..        >
-00008660: 3e3e 2061 2e67 6574 5f6e 616d 6528 290d  >> a.get_name().
-00008670: 0a20 2020 2020 2020 2027 436f 6c75 6d6e  .        'Column
-00008680: 5f4e 616d 6527 0d0a 0d0a 2020 2020 2020  _Name'....      
-00008690: 2020 4361 6c6c 696e 6720 6060 6473 2e63    Calling ``ds.c
-000086a0: 6f6c 2e73 6574 5f6e 616d 6560 6020 6368  ol.set_name`` ch
-000086b0: 616e 6765 7320 7468 6520 6e61 6d65 2061  anges the name a
-000086c0: 7373 6967 6e65 6420 746f 2074 6865 2060  ssigned to the `
-000086d0: 4661 7374 4172 7261 7960 0d0a 2020 2020  FastArray`..    
-000086e0: 2020 2020 2862 7574 206e 6f74 2074 6865      (but not the
-000086f0: 2064 6973 706c 6179 6564 2063 6f6c 756d   displayed colum
-00008700: 6e20 6e61 6d65 292e 0d0a 0d0a 2020 2020  n name).....    
-00008710: 2020 2020 3e3e 3e20 6473 2e43 6f6c 756d      >>> ds.Colum
-00008720: 6e5f 4e61 6d65 2e73 6574 5f6e 616d 6528  n_Name.set_name(
-00008730: 274e 6577 204e 616d 6527 290d 0a20 2020  'New Name')..   
-00008740: 2020 2020 203e 3e3e 2061 2e67 6574 5f6e       >>> a.get_n
-00008750: 616d 6528 290d 0a20 2020 2020 2020 2027  ame()..        '
-00008760: 4e65 7720 4e61 6d65 270d 0a20 2020 2020  New Name'..     
-00008770: 2020 203e 3e3e 2064 730d 0a20 2020 2020     >>> ds..     
-00008780: 2020 2023 2020 2043 6f6c 756d 6e5f 4e61     #   Column_Na
-00008790: 6d65 0d0a 2020 2020 2020 2020 2d20 2020  me..        -   
-000087a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
-000087b0: 2020 2020 2030 2020 2020 2020 2020 2020       0          
-000087c0: 2020 2031 0d0a 2020 2020 2020 2020 3120     1..        1 
-000087d0: 2020 2020 2020 2020 2020 2020 320d 0a20              2.. 
-000087e0: 2020 2020 2020 2032 2020 2020 2020 2020         2        
-000087f0: 2020 2020 2033 0d0a 0d0a 2020 2020 2020       3....      
-00008800: 2020 5768 656e 2061 206e 616d 6564 2060    When a named `
-00008810: 4661 7374 4172 7261 7960 2069 7320 6164  FastArray` is ad
-00008820: 6465 6420 746f 2061 2060 4461 7461 7365  ded to a `Datase
-00008830: 7460 2063 6f6c 756d 6e2c 2061 206e 6577  t` column, a new
-00008840: 2060 4661 7374 4172 7261 7960 0d0a 2020   `FastArray`..  
-00008850: 2020 2020 2020 696e 7374 616e 6365 2069        instance i
-00008860: 7320 6372 6561 7465 6420 7468 6174 2069  s created that i
-00008870: 6e68 6572 6974 7320 7468 6520 636f 6c75  nherits the colu
-00008880: 6d6e 206e 616d 652e 2054 6865 206f 7269  mn name. The ori
-00008890: 6769 6e61 6c20 696e 7374 616e 6365 2069  ginal instance i
-000088a0: 730d 0a20 2020 2020 2020 206e 6f74 2072  s..        not r
-000088b0: 656e 616d 6564 2e0d 0a0d 0a20 2020 2020  enamed.....     
-000088c0: 2020 203e 3e3e 2061 203d 2072 742e 4661     >>> a = rt.Fa
-000088d0: 7374 4172 7261 7928 5b31 2c20 322c 2033  stArray([1, 2, 3
-000088e0: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
-000088f0: 612e 7365 745f 6e61 6d65 2827 4641 204e  a.set_name('FA N
-00008900: 616d 6527 290d 0a20 2020 2020 2020 203e  ame')..        >
-00008910: 3e3e 2064 7320 3d20 7274 2e44 6174 6173  >> ds = rt.Datas
-00008920: 6574 2829 0d0a 2020 2020 2020 2020 3e3e  et()..        >>
-00008930: 3e20 6473 2e43 6f6c 756d 6e5f 4e61 6d65  > ds.Column_Name
-00008940: 203d 2061 0d0a 2020 2020 2020 2020 3e3e   = a..        >>
-00008950: 3e20 6473 2e43 6f6c 756d 6e5f 4e61 6d65  > ds.Column_Name
-00008960: 2e67 6574 5f6e 616d 6528 290d 0a20 2020  .get_name()..   
-00008970: 2020 2020 2027 436f 6c75 6d6e 5f4e 616d       'Column_Nam
-00008980: 6527 0d0a 2020 2020 2020 2020 3e3e 3e20  e'..        >>> 
-00008990: 612e 6765 745f 6e61 6d65 2829 0d0a 2020  a.get_name()..  
-000089a0: 2020 2020 2020 2746 4120 4e61 6d65 270d        'FA Name'.
-000089b0: 0a0d 0a20 2020 2020 2020 2043 6861 6e67  ...        Chang
-000089c0: 696e 6720 7468 6520 6469 7370 6c61 7965  ing the displaye
-000089d0: 6420 636f 6c75 6d6e 206e 616d 6520 6166  d column name af
-000089e0: 6665 6374 7320 7468 6520 6e61 6d65 206f  fects the name o
-000089f0: 6620 7468 6520 6e65 7720 696e 7374 616e  f the new instan
-00008a00: 6365 2c0d 0a20 2020 2020 2020 2062 7574  ce,..        but
-00008a10: 206e 6f74 2074 6865 206e 616d 6520 6f66   not the name of
-00008a20: 2074 6865 206f 7269 6769 6e61 6c20 6046   the original `F
-00008a30: 6173 7441 7272 6179 602e 0d0a 0d0a 2020  astArray`.....  
-00008a40: 2020 2020 2020 3e3e 3e20 6473 2e63 6f6c        >>> ds.col
-00008a50: 5f72 656e 616d 6528 2743 6f6c 756d 6e5f  _rename('Column_
-00008a60: 4e61 6d65 272c 2027 4e65 775f 436f 6c75  Name', 'New_Colu
-00008a70: 6d6e 2729 0d0a 2020 2020 2020 2020 3e3e  mn')..        >>
-00008a80: 3e20 6473 2e4e 6577 5f43 6f6c 756d 6e2e  > ds.New_Column.
-00008a90: 6765 745f 6e61 6d65 2829 0d0a 2020 2020  get_name()..    
-00008aa0: 2020 2020 274e 6577 5f43 6f6c 756d 6e27      'New_Column'
-00008ab0: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-00008ac0: 6765 745f 6e61 6d65 2829 0d0a 2020 2020  get_name()..    
-00008ad0: 2020 2020 2746 4120 4e61 6d65 270d 0a20      'FA Name'.. 
-00008ae0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00008af0: 2020 2020 7365 6c66 2e5f 6e61 6d65 203d      self._name =
-00008b00: 206e 616d 650d 0a20 2020 2020 2020 2072   name..        r
-00008b10: 6574 7572 6e20 7365 6c66 0d0a 0d0a 2020  eturn self....  
-00008b20: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
-00008b30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00008b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00008b50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00008b60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
-00008b70: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
-00008b80: 640d 0a20 2020 2064 6566 205f 4661 7374  d..    def _Fast
-00008b90: 4675 6e63 7469 6f6e 734f 6e28 293a 0d0a  FunctionsOn():..
-00008ba0: 2020 2020 2020 2020 6966 2046 6173 7441          if FastA
-00008bb0: 7272 6179 2e56 6572 626f 7365 203e 2030  rray.Verbose > 0
-00008bc0: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
-00008bd0: 7269 6e74 2866 2246 4153 5446 554e 4320  rint(f"FASTFUNC 
-00008be0: 4f4e 3a20 6661 7374 6675 6e63 2077 6173  ON: fastfunc was
-00008bf0: 207b 4661 7374 4172 7261 792e 4661 7374   {FastArray.Fast
-00008c00: 6572 5546 756e 637d 2229 0d0a 2020 2020  erUFunc}")..    
-00008c10: 2020 2020 4661 7374 4172 7261 792e 4661      FastArray.Fa
-00008c20: 7374 6572 5546 756e 6320 3d20 5472 7565  sterUFunc = True
-00008c30: 0d0a 0d0a 2020 2020 4073 7461 7469 636d  ....    @staticm
-00008c40: 6574 686f 640d 0a20 2020 2064 6566 205f  ethod..    def _
-00008c50: 4661 7374 4675 6e63 7469 6f6e 734f 6666  FastFunctionsOff
-00008c60: 2829 3a0d 0a20 2020 2020 2020 2069 6620  ():..        if 
-00008c70: 4661 7374 4172 7261 792e 5665 7262 6f73  FastArray.Verbos
-00008c80: 6520 3e20 303a 0d0a 2020 2020 2020 2020  e > 0:..        
-00008c90: 2020 2020 7072 696e 7428 6622 4641 5354      print(f"FAST
-00008ca0: 4655 4e43 204f 4646 3a20 6661 7374 6675  FUNC OFF: fastfu
-00008cb0: 6e63 2077 6173 207b 4661 7374 4172 7261  nc was {FastArra
-00008cc0: 792e 4661 7374 6572 5546 756e 637d 2229  y.FasterUFunc}")
-00008cd0: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-00008ce0: 7261 792e 4661 7374 6572 5546 756e 6320  ray.FasterUFunc 
-00008cf0: 3d20 4661 6c73 650d 0a0d 0a20 2020 2040  = False....    @
-00008d00: 7072 6f70 6572 7479 0d0a 2020 2020 6465  property..    de
-00008d10: 6620 5f6e 7028 7365 6c66 2920 2d3e 206e  f _np(self) -> n
-00008d20: 702e 6e64 6172 7261 793a 0d0a 2020 2020  p.ndarray:..    
-00008d30: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00008d40: 2052 6574 7572 6e20 6120 4e75 6d50 7920   Return a NumPy 
-00008d50: 6172 7261 7920 7669 6577 206f 6620 7468  array view of th
-00008d60: 6520 696e 7075 7420 6046 6173 7441 7272  e input `FastArr
-00008d70: 6179 602e 0d0a 0d0a 2020 2020 2020 2020  ay`.....        
-00008d80: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
-00008d90: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
-00008da0: 2020 6e75 6d70 792e 6e64 6172 7261 790d    numpy.ndarray.
-00008db0: 0a20 2020 2020 2020 2020 2020 2041 204e  .            A N
-00008dc0: 756d 5079 2061 7272 6179 2076 6965 7720  umPy array view 
-00008dd0: 6f66 2074 6865 2069 6e70 7574 2060 4661  of the input `Fa
-00008de0: 7374 4172 7261 7960 2e0d 0a0d 0a20 2020  stArray`.....   
-00008df0: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
-00008e00: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-00008e10: 0a20 2020 2020 2020 2046 6173 7461 7272  .        Fastarr
-00008e20: 6179 2e76 6965 7720 3a20 5669 6577 2061  ay.view : View a
-00008e30: 204e 756d 5079 2061 7272 6179 2061 7320   NumPy array as 
-00008e40: 6120 6046 6173 7441 7272 6179 602e 0d0a  a `FastArray`...
-00008e50: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
-00008e60: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
-00008e70: 2d2d 2d2d 0d0a 2020 2020 2020 2020 5265  ----..        Re
-00008e80: 7475 726e 2061 204e 756d 5079 2061 7272  turn a NumPy arr
-00008e90: 6179 2076 6965 7720 666f 7220 616e 2069  ay view for an i
-00008ea0: 6e74 6567 6572 2060 4661 7374 4172 7261  nteger `FastArra
-00008eb0: 7960 3a0d 0a0d 0a20 2020 2020 2020 203e  y`:....        >
-00008ec0: 3e3e 2061 203d 2072 742e 4641 285b 312c  >> a = rt.FA([1,
-00008ed0: 2032 2c20 332c 2034 2c20 355d 290d 0a20   2, 3, 4, 5]).. 
-00008ee0: 2020 2020 2020 203e 3e3e 2061 0d0a 2020         >>> a..  
-00008ef0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
-00008f00: 5b31 2c20 322c 2033 2c20 342c 2035 5d29  [1, 2, 3, 4, 5])
-00008f10: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-00008f20: 5f6e 700d 0a20 2020 2020 2020 2061 7272  _np..        arr
-00008f30: 6179 285b 312c 2032 2c20 332c 2034 2c20  ay([1, 2, 3, 4, 
-00008f40: 355d 290d 0a0d 0a20 2020 2020 2020 2055  5])....        U
-00008f50: 7064 6174 6520 7468 6520 6046 6173 7441  pdate the `FastA
-00008f60: 7272 6179 6020 7573 696e 6720 7468 6520  rray` using the 
-00008f70: 4e75 6d50 7920 6172 7261 7920 7669 6577  NumPy array view
-00008f80: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
-00008f90: 206e 7076 6965 7720 3d20 612e 5f6e 700d   npview = a._np.
-00008fa0: 0a20 2020 2020 2020 203e 3e3e 206e 7076  .        >>> npv
-00008fb0: 6965 775b 325d 203d 2031 300d 0a20 2020  iew[2] = 10..   
-00008fc0: 2020 2020 203e 3e3e 2061 0d0a 2020 2020       >>> a..    
-00008fd0: 2020 2020 4661 7374 4172 7261 7928 5b20      FastArray([ 
-00008fe0: 312c 2020 322c 2031 302c 2020 342c 2020  1,  2, 10,  4,  
-00008ff0: 355d 290d 0a20 2020 2020 2020 2022 2222  5])..        """
-00009000: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00009010: 2073 656c 662e 7669 6577 286e 702e 6e64   self.view(np.nd
-00009020: 6172 7261 7929 0d0a 0d0a 2020 2020 4073  array)....    @s
-00009030: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
-00009040: 2064 6566 205f 5630 2829 3a0d 0a20 2020   def _V0():..   
-00009050: 2020 2020 2070 7269 6e74 2822 7365 7474       print("sett
-00009060: 696e 6720 7665 7262 6f73 6520 6c65 7665  ing verbose leve
-00009070: 6c20 746f 2030 2229 0d0a 2020 2020 2020  l to 0")..      
-00009080: 2020 4661 7374 4172 7261 792e 5665 7262    FastArray.Verb
-00009090: 6f73 6520 3d20 300d 0a20 2020 2020 2020  ose = 0..       
-000090a0: 2072 6574 7572 6e20 4661 7374 4172 7261   return FastArra
-000090b0: 792e 5665 7262 6f73 650d 0a0d 0a20 2020  y.Verbose....   
-000090c0: 2040 7374 6174 6963 6d65 7468 6f64 0d0a   @staticmethod..
-000090d0: 2020 2020 6465 6620 5f56 3128 293a 0d0a      def _V1():..
-000090e0: 2020 2020 2020 2020 7072 696e 7428 2273          print("s
-000090f0: 6574 7469 6e67 2076 6572 626f 7365 206c  etting verbose l
-00009100: 6576 656c 2074 6f20 3122 290d 0a20 2020  evel to 1")..   
-00009110: 2020 2020 2046 6173 7441 7272 6179 2e56       FastArray.V
-00009120: 6572 626f 7365 203d 2031 0d0a 2020 2020  erbose = 1..    
-00009130: 2020 2020 7265 7475 726e 2046 6173 7441      return FastA
-00009140: 7272 6179 2e56 6572 626f 7365 0d0a 0d0a  rray.Verbose....
-00009150: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
-00009160: 640d 0a20 2020 2064 6566 205f 5632 2829  d..    def _V2()
-00009170: 3a0d 0a20 2020 2020 2020 2070 7269 6e74  :..        print
-00009180: 2822 7365 7474 696e 6720 7665 7262 6f73  ("setting verbos
-00009190: 6520 6c65 7665 6c20 746f 2032 2229 0d0a  e level to 2")..
-000091a0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-000091b0: 792e 5665 7262 6f73 6520 3d20 320d 0a20  y.Verbose = 2.. 
-000091c0: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
-000091d0: 7374 4172 7261 792e 5665 7262 6f73 650d  stArray.Verbose.
-000091e0: 0a0d 0a20 2020 2040 7374 6174 6963 6d65  ...    @staticme
-000091f0: 7468 6f64 0d0a 2020 2020 6465 6620 5f4f  thod..    def _O
-00009200: 4e28 293a 0d0a 2020 2020 2020 2020 2222  N():..        ""
-00009210: 220d 0a20 2020 2020 2020 2065 6e61 626c  "..        enabl
-00009220: 6520 696e 7465 7263 6570 7469 6e67 2061  e intercepting a
-00009230: 7272 6179 2075 6675 6e63 0d0a 2020 2020  rray ufunc..    
-00009240: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00009250: 2072 6574 7572 6e20 4661 7374 4172 7261   return FastArra
-00009260: 792e 5f46 6173 7446 756e 6374 696f 6e73  y._FastFunctions
-00009270: 4f6e 2829 0d0a 0d0a 2020 2020 4073 7461  On()....    @sta
-00009280: 7469 636d 6574 686f 640d 0a20 2020 2064  ticmethod..    d
-00009290: 6566 205f 4f46 4628 293a 0d0a 2020 2020  ef _OFF():..    
-000092a0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-000092b0: 2064 6973 6162 6c65 2069 6e74 6572 6365   disable interce
-000092c0: 7074 696e 6720 6f66 2061 7272 6179 2075  pting of array u
-000092d0: 6675 6e63 0d0a 2020 2020 2020 2020 2222  func..        ""
-000092e0: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
-000092f0: 6e20 4661 7374 4172 7261 792e 5f46 6173  n FastArray._Fas
-00009300: 7446 756e 6374 696f 6e73 4f66 6628 290d  tFunctionsOff().
-00009310: 0a0d 0a20 2020 2040 7374 6174 6963 6d65  ...    @staticme
-00009320: 7468 6f64 0d0a 2020 2020 6465 6620 5f54  thod..    def _T
-00009330: 4f4e 2829 3a0d 0a20 2020 2020 2020 2070  ON():..        p
-00009340: 7269 6e74 2822 5468 7265 6164 696e 6720  rint("Threading 
-00009350: 6f6e 2229 0d0a 2020 2020 2020 2020 7265  on")..        re
-00009360: 7475 726e 2072 632e 5468 7265 6164 696e  turn rc.Threadin
-00009370: 674d 6f64 6528 3029 0d0a 0d0a 2020 2020  gMode(0)....    
-00009380: 4073 7461 7469 636d 6574 686f 640d 0a20  @staticmethod.. 
-00009390: 2020 2064 6566 205f 544f 4646 2829 3a0d     def _TOFF():.
-000093a0: 0a20 2020 2020 2020 2070 7269 6e74 2822  .        print("
-000093b0: 5468 7265 6164 696e 6720 6f66 6622 290d  Threading off").
-000093c0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000093d0: 7263 2e54 6872 6561 6469 6e67 4d6f 6465  rc.ThreadingMode
-000093e0: 2831 290d 0a0d 0a20 2020 2040 7374 6174  (1)....    @stat
-000093f0: 6963 6d65 7468 6f64 0d0a 2020 2020 6465  icmethod..    de
-00009400: 6620 5f52 4f4e 2871 7569 6574 3d46 616c  f _RON(quiet=Fal
-00009410: 7365 293a 0d0a 2020 2020 2020 2020 2222  se):..        ""
-00009420: 220d 0a20 2020 2020 2020 2054 7572 6e20  "..        Turn 
-00009430: 6f6e 2072 6563 7963 6c69 6e67 2e0d 0a0d  on recycling....
-00009440: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
-00009450: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
-00009460: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-00009470: 2071 7569 6574 3a20 626f 6f6c 2c20 6f70   quiet: bool, op
-00009480: 7469 6f6e 616c 0d0a 0d0a 2020 2020 2020  tional....      
-00009490: 2020 5265 7475 726e 730d 0a20 2020 2020    Returns..     
-000094a0: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
-000094b0: 2020 2020 5472 7565 2069 6620 7265 6379      True if recy
-000094c0: 636c 696e 6720 7761 7320 7072 6576 696f  cling was previo
-000094d0: 7573 6c79 206f 6e2c 2065 6c73 6520 4661  usly on, else Fa
-000094e0: 6c73 650d 0a20 2020 2020 2020 2022 2222  lse..        """
-000094f0: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
-00009500: 2071 7569 6574 3a0d 0a20 2020 2020 2020   quiet:..       
-00009510: 2020 2020 2070 7269 6e74 2822 5265 6379       print("Recy
-00009520: 636c 696e 6720 6e75 6d70 7920 6172 7261  cling numpy arra
-00009530: 7973 206f 6e22 290d 0a20 2020 2020 2020  ys on")..       
-00009540: 2072 6573 756c 7420 3d20 7263 2e53 6574   result = rc.Set
-00009550: 5265 6379 636c 654d 6f64 6528 3029 0d0a  RecycleMode(0)..
-00009560: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-00009570: 792e 5265 6379 636c 6520 3d20 5472 7565  y.Recycle = True
-00009580: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00009590: 2072 6573 756c 740d 0a0d 0a20 2020 2040   result....    @
-000095a0: 7374 6174 6963 6d65 7468 6f64 0d0a 2020  staticmethod..  
-000095b0: 2020 6465 6620 5f52 4f46 4628 7175 6965    def _ROFF(quie
-000095c0: 743d 4661 6c73 6529 3a0d 0a20 2020 2020  t=False):..     
-000095d0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-000095e0: 5475 726e 206f 6666 2072 6563 7963 6c69  Turn off recycli
-000095f0: 6e67 2e0d 0a0d 0a20 2020 2020 2020 2050  ng.....        P
-00009600: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
-00009610: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
-00009620: 2020 2020 2020 2071 7569 6574 3a20 626f         quiet: bo
-00009630: 6f6c 2c20 6f70 7469 6f6e 616c 0d0a 0d0a  ol, optional....
-00009640: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
-00009650: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00009660: 0d0a 2020 2020 2020 2020 5472 7565 2069  ..        True i
-00009670: 6620 7265 6379 636c 696e 6720 7761 7320  f recycling was 
-00009680: 7072 6576 696f 7573 6c79 206f 6e2c 2065  previously on, e
-00009690: 6c73 6520 4661 6c73 650d 0a20 2020 2020  lse False..     
-000096a0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-000096b0: 6966 206e 6f74 2071 7569 6574 3a0d 0a20  if not quiet:.. 
-000096c0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-000096d0: 2822 5265 6379 636c 696e 6720 6e75 6d70  ("Recycling nump
-000096e0: 7920 6172 7261 7973 206f 6666 2229 0d0a  y arrays off")..
-000096f0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00009700: 2072 632e 5365 7452 6563 7963 6c65 4d6f   rc.SetRecycleMo
-00009710: 6465 2831 290d 0a20 2020 2020 2020 2046  de(1)..        F
-00009720: 6173 7441 7272 6179 2e52 6563 7963 6c65  astArray.Recycle
-00009730: 203d 2046 616c 7365 0d0a 2020 2020 2020   = False..      
-00009740: 2020 7265 7475 726e 2072 6573 756c 740d    return result.
-00009750: 0a0d 0a20 2020 2040 7374 6174 6963 6d65  ...    @staticme
-00009760: 7468 6f64 0d0a 2020 2020 6465 6620 5f52  thod..    def _R
-00009770: 4455 4d50 2829 3a0d 0a20 2020 2020 2020  DUMP():..       
-00009780: 2022 2222 0d0a 2020 2020 2020 2020 4469   """..        Di
-00009790: 7370 6c61 7973 2074 6f20 7365 7276 6572  splays to server
-000097a0: 2773 2073 7464 6f75 740d 0a0d 0a20 2020  's stdout....   
-000097b0: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
-000097c0: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-000097d0: 2020 2020 2020 2054 6f74 616c 2073 697a         Total siz
-000097e0: 6520 6f66 2069 7465 6d73 206e 6f74 2069  e of items not i
-000097f0: 6e20 7573 650d 0a20 2020 2020 2020 2022  n use..        "
-00009800: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
-00009810: 726e 2072 632e 5265 6379 636c 6544 756d  rn rc.RecycleDum
-00009820: 7028 290d 0a0d 0a20 2020 2040 7374 6174  p()....    @stat
-00009830: 6963 6d65 7468 6f64 0d0a 2020 2020 6465  icmethod..    de
-00009840: 6620 5f47 434e 4f57 2874 696d 656f 7574  f _GCNOW(timeout
-00009850: 3a20 696e 7420 3d20 3029 3a0d 0a20 2020  : int = 0):..   
-00009860: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00009870: 2020 5061 7373 2074 6865 2067 6172 6261    Pass the garba
-00009880: 6765 2063 6f6c 6c65 6374 6f72 2074 696d  ge collector tim
-00009890: 656f 7574 2076 616c 7565 2074 6f20 636c  eout value to cl
-000098a0: 6561 6e75 702e 0d0a 2020 2020 2020 2020  eanup...        
-000098b0: 5061 7373 696e 6720 3020 7769 6c6c 2066  Passing 0 will f
-000098c0: 6f72 6365 2061 6e20 696d 6d65 6469 6174  orce an immediat
-000098d0: 6520 6761 7262 6167 6520 636f 6c6c 6563  e garbage collec
-000098e0: 7469 6f6e 2e0d 0a0d 0a20 2020 2020 2020  tion.....       
-000098f0: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
-00009900: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
-00009910: 2020 2044 6963 7469 6f6e 6172 7920 6f66     Dictionary of
-00009920: 206d 656d 6f72 7920 6865 7572 6973 7469   memory heuristi
-00009930: 6373 2069 6e63 6c75 6469 6e67 2027 546f  cs including 'To
-00009940: 7461 6c44 656c 6574 6564 270d 0a20 2020  talDeleted'..   
-00009950: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00009960: 2020 696d 706f 7274 2067 630d 0a0d 0a20    import gc.... 
-00009970: 2020 2020 2020 2067 632e 636f 6c6c 6563         gc.collec
-00009980: 7428 290d 0a20 2020 2020 2020 2072 6573  t()..        res
-00009990: 756c 7420 3d20 7263 2e52 6563 7963 6c65  ult = rc.Recycle
-000099a0: 4761 7262 6167 6543 6f6c 6c65 6374 4e6f  GarbageCollectNo
-000099b0: 7728 7469 6d65 6f75 7429 0d0a 2020 2020  w(timeout)..    
-000099c0: 2020 2020 746f 7461 6c44 656c 6574 6564      totalDeleted
-000099d0: 203d 2072 6573 756c 745b 2254 6f74 616c   = result["Total
-000099e0: 4465 6c65 7465 6422 5d0d 0a20 2020 2020  Deleted"]..     
-000099f0: 2020 2069 6620 746f 7461 6c44 656c 6574     if totalDelet
-00009a00: 6564 203e 2030 3a0d 0a20 2020 2020 2020  ed > 0:..       
-00009a10: 2020 2020 2046 6173 7441 7272 6179 2e5f       FastArray._
-00009a20: 4743 4e4f 5728 7469 6d65 6f75 7429 0d0a  GCNOW(timeout)..
-00009a30: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00009a40: 6573 756c 740d 0a0d 0a20 2020 2040 7374  esult....    @st
-00009a50: 6174 6963 6d65 7468 6f64 0d0a 2020 2020  aticmethod..    
-00009a60: 6465 6620 5f47 4353 4554 2874 696d 656f  def _GCSET(timeo
-00009a70: 7574 3a20 696e 7420 3d20 3130 3029 3a0d  ut: int = 100):.
-00009a80: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00009a90: 2020 2020 2020 5061 7373 2074 6865 2067        Pass the g
-00009aa0: 6172 6261 6765 2063 6f6c 6c65 6374 6f72  arbage collector
-00009ab0: 2074 696d 656f 7574 2076 616c 7565 2074   timeout value t
-00009ac0: 6f20 6578 7069 7265 0d0a 2020 2020 2020  o expire..      
-00009ad0: 2020 5468 6520 7469 6d65 6f75 7420 7661    The timeout va
-00009ae0: 6c75 6520 6973 2072 6f75 6768 6c79 2069  lue is roughly i
-00009af0: 6e20 322f 3520 7365 6373 0d0a 2020 2020  n 2/5 secs..    
-00009b00: 2020 2020 4120 7661 6c75 6520 6f66 2031      A value of 1
-00009b10: 3030 2069 7320 7573 7561 6c6c 7920 6162  00 is usually ab
-00009b20: 6f75 7420 3430 2073 6563 6f6e 6473 0d0a  out 40 seconds..
-00009b30: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-00009b40: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-00009b50: 2d2d 0d0a 2020 2020 2020 2020 5072 6576  --..        Prev
-00009b60: 696f 7573 2074 696d 6573 7061 6e0d 0a20  ious timespan.. 
-00009b70: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00009b80: 2020 2020 7265 7475 726e 2072 632e 5265      return rc.Re
-00009b90: 6379 636c 6553 6574 4761 7262 6167 6543  cycleSetGarbageC
-00009ba0: 6f6c 6c65 6374 5469 6d65 6f75 7428 7469  ollectTimeout(ti
-00009bb0: 6d65 6f75 7429 0d0a 0d0a 2020 2020 4073  meout)....    @s
-00009bc0: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
-00009bd0: 2064 6566 205f 4c4f 4e28 293a 0d0a 2020   def _LON():..  
-00009be0: 2020 2020 2020 2222 2254 7572 6e20 7468        """Turn th
-00009bf0: 6520 6d61 7468 206c 6564 6765 7220 6f6e  e math ledger on
-00009c00: 2074 6f20 7265 636f 7264 2061 6c6c 2061   to record all a
-00009c10: 7272 6179 206d 6174 6820 726f 7574 696e  rray math routin
-00009c20: 6573 2222 220d 0a20 2020 2020 2020 2072  es"""..        r
-00009c30: 6574 7572 6e20 5479 7065 5265 6769 7374  eturn TypeRegist
-00009c40: 6572 2e4d 6174 684c 6564 6765 722e 5f4c  er.MathLedger._L
-00009c50: 6564 6765 724f 6e28 290d 0a0d 0a20 2020  edgerOn()....   
-00009c60: 2040 7374 6174 6963 6d65 7468 6f64 0d0a   @staticmethod..
-00009c70: 2020 2020 6465 6620 5f4c 4f46 4628 293a      def _LOFF():
-00009c80: 0d0a 2020 2020 2020 2020 2222 2254 7572  ..        """Tur
-00009c90: 6e20 7468 6520 6d61 7468 206c 6564 6765  n the math ledge
-00009ca0: 7220 6f66 6622 2222 0d0a 2020 2020 2020  r off"""..      
-00009cb0: 2020 7265 7475 726e 2054 7970 6552 6567    return TypeReg
-00009cc0: 6973 7465 722e 4d61 7468 4c65 6467 6572  ister.MathLedger
-00009cd0: 2e5f 4c65 6467 6572 4f66 6628 290d 0a0d  ._LedgerOff()...
-00009ce0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
-00009cf0: 6f64 0d0a 2020 2020 6465 6620 5f4c 4455  od..    def _LDU
-00009d00: 4d50 2864 6174 6173 6574 3d54 7275 6529  MP(dataset=True)
-00009d10: 3a0d 0a20 2020 2020 2020 2022 2222 5072  :..        """Pr
-00009d20: 696e 7420 6f75 7420 7468 6520 6d61 7468  int out the math
-00009d30: 206c 6564 6765 7222 2222 0d0a 2020 2020   ledger"""..    
-00009d40: 2020 2020 7265 7475 726e 2054 7970 6552      return TypeR
-00009d50: 6567 6973 7465 722e 4d61 7468 4c65 6467  egister.MathLedg
-00009d60: 6572 2e5f 4c65 6467 6572 4475 6d70 2864  er._LedgerDump(d
-00009d70: 6174 6173 6574 3d64 6174 6173 6574 290d  ataset=dataset).
-00009d80: 0a0d 0a20 2020 2040 7374 6174 6963 6d65  ...    @staticme
-00009d90: 7468 6f64 0d0a 2020 2020 6465 6620 5f4c  thod..    def _L
-00009da0: 4455 4d50 4628 6669 6c65 6e61 6d65 293a  DUMPF(filename):
-00009db0: 0d0a 2020 2020 2020 2020 2222 2253 6176  ..        """Sav
-00009dc0: 6520 7468 6520 6d61 7468 206c 6564 6765  e the math ledge
-00009dd0: 7220 746f 2061 2066 696c 6522 2222 0d0a  r to a file"""..
-00009de0: 2020 2020 2020 2020 7265 7475 726e 2054          return T
-00009df0: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
-00009e00: 4c65 6467 6572 2e5f 4c65 6467 6572 4475  Ledger._LedgerDu
-00009e10: 6d70 4669 6c65 2866 696c 656e 616d 6529  mpFile(filename)
-00009e20: 0d0a 0d0a 2020 2020 4073 7461 7469 636d  ....    @staticm
-00009e30: 6574 686f 640d 0a20 2020 2064 6566 205f  ethod..    def _
-00009e40: 4c43 4c45 4152 2829 3a0d 0a20 2020 2020  LCLEAR():..     
-00009e50: 2020 2022 2222 436c 6561 7220 616c 6c20     """Clear all 
-00009e60: 7468 6520 656e 7472 6965 7320 696e 2074  the entries in t
-00009e70: 6865 206d 6174 6820 6c65 6467 6572 2222  he math ledger""
-00009e80: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
-00009e90: 6e20 5479 7065 5265 6769 7374 6572 2e4d  n TypeRegister.M
-00009ea0: 6174 684c 6564 6765 722e 5f4c 6564 6765  athLedger._Ledge
-00009eb0: 7243 6c65 6172 2829 0d0a 0d0a 2020 2020  rClear()....    
-00009ec0: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
-00009ed0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009ee0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009ef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009f00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
-00009f10: 2020 6465 6620 5f5f 7365 7469 7465 6d5f    def __setitem_
-00009f20: 5f28 7365 6c66 2c20 666c 642c 2076 616c  _(self, fld, val
-00009f30: 7565 293a 0d0a 2020 2020 2020 2020 2222  ue):..        ""
-00009f40: 220d 0a20 2020 2020 2020 2055 7365 6420  "..        Used 
-00009f50: 6f6e 2074 6865 206c 6566 7420 6861 6e64  on the left hand
-00009f60: 2073 6964 6520 6f66 0d0a 2020 2020 2020   side of..      
-00009f70: 2020 6172 725b 666c 645d 203d 2076 616c    arr[fld] = val
-00009f80: 7565 0d0a 0d0a 2020 2020 2020 2020 5468  ue....        Th
-00009f90: 6973 2072 6f75 7469 6e65 2074 7269 6573  is routine tries
-00009fa0: 2074 6f20 636f 6e76 6572 7420 696e 7661   to convert inva
-00009fb0: 6c69 6420 6474 7970 6573 2074 6f20 7468  lid dtypes to th
-00009fc0: 6174 2069 6e76 616c 6964 7320 6172 6520  at invalids are 
-00009fd0: 7072 6573 6572 7665 6420 7768 656e 2073  preserved when s
-00009fe0: 6574 7469 6e67 0d0a 2020 2020 2020 2020  etting..        
-00009ff0: 5468 6520 6d62 7365 7420 706f 7274 696f  The mbset portio
-0000a000: 6e20 6f66 2074 6869 7320 6973 206e 6f20  n of this is no 
-0000a010: 7772 6974 7465 6e20 2877 6869 6368 2077  written (which w
-0000a020: 696c 6c20 6e6f 7420 7261 6973 6520 616e  ill not raise an
-0000a030: 2069 6e64 6578 6572 726f 7220 6f6e 206f   indexerror on o
-0000a040: 7574 206f 6620 626f 756e 6473 290d 0a0d  ut of bounds)...
-0000a050: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
-0000a060: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
-0000a070: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-0000a080: 2066 6c64 3a20 7363 616c 6172 2c20 626f   fld: scalar, bo
-0000a090: 6f6c 6561 6e2c 2066 616e 6379 2069 6e64  olean, fancy ind
-0000a0a0: 6578 206d 6173 6b2c 2073 6c69 6365 2c20  ex mask, slice, 
-0000a0b0: 7365 7175 656e 6365 2c20 6f72 206c 6973  sequence, or lis
-0000a0c0: 740d 0a20 2020 2020 2020 2076 616c 7565  t..        value
-0000a0d0: 3a20 7363 616c 6172 2c20 7365 7175 656e  : scalar, sequen
-0000a0e0: 6365 206f 7220 6461 7461 7365 7420 7661  ce or dataset va
-0000a0f0: 6c75 6520 6173 2066 6f6c 6c6f 7773 0d0a  lue as follows..
-0000a100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a110: 7365 7175 656e 6365 2063 616e 2062 6520  sequence can be 
-0000a120: 6c69 7374 2c20 7475 706c 652c 206e 702e  list, tuple, np.
-0000a130: 6e64 6172 7261 792c 2046 6173 7441 7272  ndarray, FastArr
-0000a140: 6179 0d0a 0d0a 2020 2020 2020 2020 5261  ay....        Ra
-0000a150: 6973 6573 0d0a 2020 2020 2020 2020 2d2d  ises..        --
-0000a160: 2d2d 2d2d 0d0a 2020 2020 2020 2020 496e  ----..        In
-0000a170: 6465 7845 7272 6f72 0d0a 0d0a 2020 2020  dexError....    
-0000a180: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-0000a190: 206e 6577 7661 6c75 6520 3d20 4e6f 6e65   newvalue = None
-0000a1a0: 0d0a 0d0a 2020 2020 2020 2020 2320 7472  ....        # tr
-0000a1b0: 7920 746f 206d 616b 6520 616e 2061 7272  y to make an arr
-0000a1c0: 6179 2c20 6576 656e 2069 6620 6172 7261  ay, even if arra
-0000a1d0: 7920 6f66 2031 0d0a 2020 2020 2020 2020  y of 1..        
-0000a1e0: 6966 206e 702e 6973 7363 616c 6172 2876  if np.isscalar(v
-0000a1f0: 616c 7565 293a 0d0a 2020 2020 2020 2020  alue):..        
-0000a200: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
-0000a210: 7461 6e63 6528 7661 6c75 652c 2028 7374  tance(value, (st
-0000a220: 722c 2062 7974 6573 2c20 6e70 2e62 7974  r, bytes, np.byt
-0000a230: 6573 5f2c 206e 702e 7374 725f 2929 3a0d  es_, np.str_)):.
-0000a240: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a250: 2023 2063 6f6e 7665 7274 2074 6f20 6172   # convert to ar
-0000a260: 7261 7920 6f66 2031 2069 7465 6d0d 0a20  ray of 1 item.. 
-0000a270: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-0000a280: 6577 7661 6c75 6520 3d20 4661 7374 4172  ewvalue = FastAr
-0000a290: 7261 7928 5b76 616c 7565 5d29 0d0a 2020  ray([value])..  
-0000a2a0: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
-0000a2b0: 7461 6e63 6528 7661 6c75 652c 2028 6c69  tance(value, (li
-0000a2c0: 7374 2c20 7475 706c 6529 293a 0d0a 2020  st, tuple)):..  
-0000a2d0: 2020 2020 2020 2020 2020 2320 636f 6e76            # conv
-0000a2e0: 6572 7420 746f 206e 756d 7079 2061 7272  ert to numpy arr
-0000a2f0: 6179 0d0a 2020 2020 2020 2020 2020 2020  ay..            
-0000a300: 6e65 7776 616c 7565 203d 2046 6173 7441  newvalue = FastA
-0000a310: 7272 6179 2876 616c 7565 2c20 756e 6963  rray(value, unic
-0000a320: 6f64 653d 5472 7565 290d 0a20 2020 2020  ode=True)..     
-0000a330: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
-0000a340: 6365 2876 616c 7565 2c20 6e70 2e6e 6461  ce(value, np.nda
-0000a350: 7272 6179 293a 0d0a 2020 2020 2020 2020  rray):..        
-0000a360: 2020 2020 2320 6a75 7374 2072 6566 6572      # just refer
-0000a370: 656e 6365 2069 740d 0a20 2020 2020 2020  ence it..       
-0000a380: 2020 2020 206e 6577 7661 6c75 6520 3d20       newvalue = 
-0000a390: 7661 6c75 650d 0a0d 0a20 2020 2020 2020  value....       
-0000a3a0: 2069 6620 6e65 7776 616c 7565 2069 7320   if newvalue is 
-0000a3b0: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
-0000a3c0: 2020 2020 2020 2023 206e 6f77 2077 6520         # now we 
-0000a3d0: 6861 7665 2061 206e 756d 7079 2061 7272  have a numpy arr
-0000a3e0: 6179 2e2e 2063 6f6e 7665 7274 2074 6865  ay.. convert the
-0000a3f0: 2064 7479 7065 2074 6f20 6d61 7463 6820   dtype to match 
-0000a400: 7573 0d0a 2020 2020 2020 2020 2020 2020  us..            
-0000a410: 2320 7468 6973 2073 686f 756c 6420 7461  # this should ta
-0000a420: 6b65 2063 6172 6520 6f66 2069 6e76 616c  ke care of inval
-0000a430: 6964 730d 0a20 2020 2020 2020 2020 2020  ids..           
-0000a440: 2023 2063 6f6e 7665 7274 2066 6972 7374   # convert first
-0000a450: 2031 3420 636f 6d6d 6f6e 2074 7970 6573   14 common types
-0000a460: 2028 626f 6f6c 2c20 696e 7473 2c20 666c   (bool, ints, fl
-0000a470: 6f61 7473 290d 0a20 2020 2020 2020 2020  oats)..         
-0000a480: 2020 2069 6620 6e65 7776 616c 7565 2e64     if newvalue.d
-0000a490: 7479 7065 2021 3d20 7365 6c66 2e64 7479  type != self.dty
-0000a4a0: 7065 2061 6e64 206e 6577 7661 6c75 652e  pe and newvalue.
-0000a4b0: 6474 7970 652e 6e75 6d20 3c3d 2031 333a  dtype.num <= 13:
-0000a4c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a4d0: 2020 6e65 7776 616c 7565 203d 206e 6577    newvalue = new
-0000a4e0: 7661 6c75 652e 6173 7479 7065 2873 656c  value.astype(sel
-0000a4f0: 662e 6474 7970 6529 0d0a 0d0a 2020 2020  f.dtype)....    
-0000a500: 2020 2020 2020 2020 2320 6368 6563 6b20          # check 
-0000a510: 666f 7220 626f 6f6c 6561 6e20 6172 7261  for boolean arra
-0000a520: 7920 7369 6e63 6520 7765 2064 6f20 6e6f  y since we do no
-0000a530: 7420 6861 6e64 6c65 2066 616e 6379 2069  t handle fancy i
-0000a540: 6e64 6578 2079 6574 0d0a 2020 2020 2020  ndex yet..      
-0000a550: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-0000a560: 6e63 6528 666c 642c 206e 702e 6e64 6172  nce(fld, np.ndar
-0000a570: 7261 7929 2061 6e64 2066 6c64 2e64 7479  ray) and fld.dty
-0000a580: 7065 2e6e 756d 203d 3d20 303a 0d0a 2020  pe.num == 0:..  
-0000a590: 2020 2020 2020 2020 2020 2020 2020 6973                is
-0000a5a0: 5f75 6e73 7570 706f 7274 6564 203d 2073  _unsupported = s
-0000a5b0: 656c 662e 5f69 735f 6e6f 745f 7375 7070  elf._is_not_supp
-0000a5c0: 6f72 7465 6428 6e65 7776 616c 7565 290d  orted(newvalue).
-0000a5d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a5e0: 2069 6620 6973 5f75 6e73 7570 706f 7274   if is_unsupport
-0000a5f0: 6564 3a0d 0a20 2020 2020 2020 2020 2020  ed:..           
-0000a600: 2020 2020 2020 2020 2023 206d 616b 6520           # make 
-0000a610: 6974 2063 6f6e 7469 6775 6f75 732c 2069  it contiguous, i
-0000a620: 6e20 6361 7365 2074 6861 7427 7320 7468  n case that's th
-0000a630: 6520 7072 6f62 6c65 6d3f 0d0a 2020 2020  e problem?..    
+00002650: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00002660: 2d0d 0a23 202d 2d2d 2d2d 2d2d 2d2d 2d2d  -..# -----------
+00002670: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00002680: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00002690: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000026a0: 2d2d 2d0d 0a63 6c61 7373 2046 6173 7441  ---..class FastA
+000026b0: 7272 6179 286e 702e 6e64 6172 7261 7929  rray(np.ndarray)
+000026c0: 3a0d 0a20 2020 2022 2222 0d0a 0d0a 2020  :..    """....  
+000026d0: 2020 4120 6046 6173 7441 7272 6179 6020    A `FastArray` 
+000026e0: 6973 2061 2031 2d64 696d 656e 7369 6f6e  is a 1-dimension
+000026f0: 616c 2061 7272 6179 206f 6620 6974 656d  al array of item
+00002700: 7320 7468 6174 2061 7265 2074 6865 2073  s that are the s
+00002710: 616d 6520 6461 7461 2074 7970 652e 0d0a  ame data type...
+00002720: 0d0a 2020 2020 4265 6361 7573 6520 6974  ..    Because it
+00002730: 2773 2061 2073 7562 636c 6173 7320 6f66  's a subclass of
+00002740: 204e 756d 5079 2773 2060 6e75 6d70 792e   NumPy's `numpy.
+00002750: 6e64 6172 7261 7960 2c20 616c 6c20 6060  ndarray`, all ``
+00002760: 6e64 6172 7261 7960 6020 6675 6e63 7469  ndarray`` functi
+00002770: 6f6e 7320 616e 6420 6174 7472 6962 7574  ons and attribut
+00002780: 6573 0d0a 2020 2020 6361 6e20 6265 2075  es..    can be u
+00002790: 7365 6420 7769 7468 2060 4661 7374 4172  sed with `FastAr
+000027a0: 7261 7960 206f 626a 6563 7473 2e20 486f  ray` objects. Ho
+000027b0: 7765 7665 722c 2052 6970 7461 626c 6520  wever, Riptable 
+000027c0: 6f70 7469 6d69 7a65 7320 6d61 6e79 206f  optimizes many o
+000027d0: 6620 4e75 6d50 7927 730d 0a20 2020 2066  f NumPy's..    f
+000027e0: 756e 6374 696f 6e73 2074 6f20 6d61 6b65  unctions to make
+000027f0: 2074 6865 6d20 6661 7374 6572 2061 6e64   them faster and
+00002800: 206d 6f72 6520 6d65 6d6f 7279 2d65 6666   more memory-eff
+00002810: 6963 6965 6e74 2e20 5269 7074 6162 6c65  icient. Riptable
+00002820: 2068 6173 2061 6c73 6f20 6164 6465 640d   has also added.
+00002830: 0a20 2020 2073 6f6d 6520 6d65 7468 6f64  .    some method
+00002840: 732e 0d0a 0d0a 2020 2020 6046 6173 7441  s.....    `FastA
+00002850: 7272 6179 6020 6f62 6a65 6374 7320 7769  rray` objects wi
+00002860: 7468 206d 6f72 6520 7468 616e 2031 2064  th more than 1 d
+00002870: 696d 656e 7369 6f6e 2061 7265 206e 6f74  imension are not
+00002880: 2073 7570 706f 7274 6564 2e0d 0a0d 0a20   supported..... 
+00002890: 2020 2053 6565 2060 4e75 6d50 7927 730d     See `NumPy's.
+000028a0: 0a20 2020 2064 6f63 7320 3c68 7474 7073  .    docs <https
+000028b0: 3a2f 2f6e 756d 7079 2e6f 7267 2f64 6576  ://numpy.org/dev
+000028c0: 646f 6373 2f72 6566 6572 656e 6365 2f67  docs/reference/g
+000028d0: 656e 6572 6174 6564 2f6e 756d 7079 2e6e  enerated/numpy.n
+000028e0: 6461 7272 6179 2e68 746d 6c3e 605f 2066  darray.html>`_ f
+000028f0: 6f72 0d0a 2020 2020 6465 7461 696c 7320  or..    details 
+00002900: 6f6e 2061 6c6c 2060 606e 6461 7272 6179  on all ``ndarray
+00002910: 6060 206d 6574 686f 6473 2061 6e64 2061  `` methods and a
+00002920: 7474 7269 6275 7465 732e 0d0a 0d0a 2020  ttributes.....  
+00002930: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
+00002940: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+00002950: 2020 6172 7220 3a20 6172 7261 792c 2069    arr : array, i
+00002960: 7465 7261 626c 652c 206f 7220 7363 616c  terable, or scal
+00002970: 6172 2076 616c 7565 0d0a 2020 2020 2020  ar value..      
+00002980: 2020 436f 6e74 6169 6e73 2064 6174 6120    Contains data 
+00002990: 746f 2062 6520 7374 6f72 6564 2069 6e20  to be stored in 
+000029a0: 7468 6520 6046 6173 7441 7272 6179 602e  the `FastArray`.
+000029b0: 0d0a 0d0a 2020 2020 2a2a 6b77 6172 6773  ....    **kwargs
+000029c0: 0d0a 2020 2020 2020 2020 4164 6469 7469  ..        Additi
+000029d0: 6f6e 616c 206b 6579 776f 7264 2061 7267  onal keyword arg
+000029e0: 756d 656e 7473 2074 6f20 6265 2070 6173  uments to be pas
+000029f0: 7365 6420 746f 2074 6865 2066 756e 6374  sed to the funct
+00002a00: 696f 6e2e 0d0a 0d0a 2020 2020 4e6f 7465  ion.....    Note
+00002a10: 730d 0a20 2020 202d 2d2d 2d2d 0d0a 2020  s..    -----..  
+00002a20: 2020 546f 2069 6d70 726f 7665 2070 6572    To improve per
+00002a30: 666f 726d 616e 6365 2c20 6046 6173 7441  formance, `FastA
+00002a40: 7272 6179 6020 6f62 6a65 6374 7320 7461  rray` objects ta
+00002a50: 6b65 206f 7665 7220 736f 6d65 206f 6620  ke over some of 
+00002a60: 4e75 6d50 7927 7320 756e 6976 6572 7361  NumPy's universa
+00002a70: 6c20 6675 6e63 7469 6f6e 730d 0a20 2020  l functions..   
+00002a80: 2028 7566 756e 6373 292c 2075 7365 2061   (ufuncs), use a
+00002a90: 7272 6179 2072 6563 7963 6c69 6e67 2061  rray recycling a
+00002aa0: 6e64 206d 756c 7469 706c 6520 7468 7265  nd multiple thre
+00002ab0: 6164 732c 2061 6e64 2070 6173 7320 6365  ads, and pass ce
+00002ac0: 7274 6169 6e20 6d65 7468 6f64 2063 616c  rtain method cal
+00002ad0: 6c73 2074 6f0d 0a20 2020 2060 426f 7474  ls to..    `Bott
+00002ae0: 6c65 6e65 636b 203c 6874 7470 733a 2f2f  leneck <https://
+00002af0: 6b77 676f 6f64 6d61 6e2e 6769 7468 7562  kwgoodman.github
+00002b00: 2e69 6f2f 626f 7474 6c65 6e65 636b 2d64  .io/bottleneck-d
+00002b10: 6f63 2f69 6e64 6578 2e68 746d 6c3e 605f  oc/index.html>`_
+00002b20: 2e0d 0a0d 0a20 2020 204e 6f74 6520 7468  .....    Note th
+00002b30: 6174 2077 6865 6e65 7665 7220 5269 7074  at whenever Ript
+00002b40: 6162 6c65 2068 6173 2069 6d70 6c65 6d65  able has impleme
+00002b50: 6e74 6564 2069 7473 206f 776e 2076 6572  nted its own ver
+00002b60: 7369 6f6e 206f 660d 0a20 2020 2061 6e20  sion of..    an 
+00002b70: 6578 6973 7469 6e67 204e 756d 5079 206d  existing NumPy m
+00002b80: 6574 686f 642c 2061 2063 616c 6c20 746f  ethod, a call to
+00002b90: 2074 6865 204e 756d 5079 206d 6574 686f   the NumPy metho
+00002ba0: 6420 7265 7375 6c74 7320 696e 2061 2063  d results in a c
+00002bb0: 616c 6c20 746f 2074 6865 0d0a 2020 2020  all to the..    
+00002bc0: 6f70 7469 6d69 7a65 6420 5269 7074 6162  optimized Riptab
+00002bd0: 6c65 2076 6572 7369 6f6e 2069 6e73 7465  le version inste
+00002be0: 6164 2e20 5765 2065 6e63 6f75 7261 6765  ad. We encourage
+00002bf0: 2075 7365 7273 2074 6f20 6469 7265 6374   users to direct
+00002c00: 6c79 2063 616c 6c20 7468 6520 5269 7074  ly call the Ript
+00002c10: 6162 6c65 0d0a 2020 2020 6d65 7468 6f64  able..    method
+00002c20: 2069 6e20 6f72 6465 7220 746f 2061 766f   in order to avo
+00002c30: 6964 2061 6e79 2063 6f6e 6675 7369 6f6e  id any confusion
+00002c40: 2061 7320 746f 2077 6861 7420 6d65 7468   as to what meth
+00002c50: 6f64 2069 7320 6163 7475 616c 6c79 2062  od is actually b
+00002c60: 6569 6e67 2063 616c 6c65 642e 0d0a 0d0a  eing called.....
+00002c70: 2020 2020 5365 6520 7468 6520 6c69 7374      See the list
+00002c80: 206f 6620 604e 756d 5079 204d 6574 686f   of `NumPy Metho
+00002c90: 6473 204f 7074 696d 697a 6564 2062 7920  ds Optimized by 
+00002ca0: 5269 7074 6162 6c65 2066 6f72 2046 6173  Riptable for Fas
+00002cb0: 7441 7272 6179 730d 0a20 2020 203c 6874  tArrays..    <ht
+00002cc0: 7470 733a 7475 746f 7269 616c 5f6e 756d  tps:tutorial_num
+00002cd0: 7079 5f72 742e 6874 6d6c 3e60 5f2e 0d0a  py_rt.html>`_...
+00002ce0: 0d0a 0d0a 2020 2020 4578 616d 706c 6573  ....    Examples
+00002cf0: 0d0a 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a  ..    --------..
+00002d00: 2020 2020 2a2a 436f 6e73 7472 7563 7420      **Construct 
+00002d10: 6120 4661 7374 4172 7261 792a 2a0d 0a0d  a FastArray**...
+00002d20: 0a20 2020 2050 6173 7320 6120 6c69 7374  .    Pass a list
+00002d30: 2074 6f20 7468 6520 636f 6e73 7472 7563   to the construc
+00002d40: 746f 723a 0d0a 0d0a 2020 2020 3e3e 3e20  tor:....    >>> 
+00002d50: 7274 2e46 6173 7441 7272 6179 285b 312c  rt.FastArray([1,
+00002d60: 2032 2c20 332c 2034 2c20 355d 290d 0a20   2, 3, 4, 5]).. 
+00002d70: 2020 2046 6173 7441 7272 6179 285b 312c     FastArray([1,
+00002d80: 2032 2c20 332c 2034 2c20 355d 290d 0a0d   2, 3, 4, 5])...
+00002d90: 0a20 2020 203e 3e3e 2023 4e4f 5445 3a20  .    >>> #NOTE: 
+00002da0: 7274 2e46 4120 616c 736f 2077 6f72 6b73  rt.FA also works
+00002db0: 2e0d 0a20 2020 203e 3e3e 2072 742e 4641  ...    >>> rt.FA
+00002dc0: 285b 312e 302c 2032 2e30 2c20 332e 302c  ([1.0, 2.0, 3.0,
+00002dd0: 2034 2e30 2c20 352e 305d 290d 0a20 2020   4.0, 5.0])..   
+00002de0: 2046 6173 7441 7272 6179 285b 312e 2c20   FastArray([1., 
+00002df0: 322e 2c20 332e 2c20 342e 2c20 352e 5d29  2., 3., 4., 5.])
+00002e00: 0d0a 0d0a 2020 2020 4f72 2075 7365 2061  ....    Or use a
+00002e10: 2075 7469 6c69 7479 2066 756e 6374 696f   utility functio
+00002e20: 6e3a 0d0a 0d0a 2020 2020 3e3e 3e20 7274  n:....    >>> rt
+00002e30: 2e66 756c 6c28 3130 2c20 302e 3729 0d0a  .full(10, 0.7)..
+00002e40: 2020 2020 4661 7374 4172 7261 7928 5b30      FastArray([0
+00002e50: 2e37 2c20 302e 372c 2030 2e37 2c20 302e  .7, 0.7, 0.7, 0.
+00002e60: 372c 2030 2e37 2c20 302e 372c 2030 2e37  7, 0.7, 0.7, 0.7
+00002e70: 2c20 302e 372c 2030 2e37 2c20 302e 375d  , 0.7, 0.7, 0.7]
+00002e80: 290d 0a0d 0a20 2020 203e 3e3e 2072 742e  )....    >>> rt.
+00002e90: 6172 616e 6765 2831 3029 0d0a 2020 2020  arange(10)..    
+00002ea0: 4661 7374 4172 7261 7928 5b30 2c20 312c  FastArray([0, 1,
+00002eb0: 2032 2c20 332c 2034 2c20 352c 2036 2c20   2, 3, 4, 5, 6, 
+00002ec0: 372c 2038 2c20 395d 290d 0a0d 0a20 2020  7, 8, 9])....   
+00002ed0: 2059 6f75 2063 616e 206f 7074 696f 6e61   You can optiona
+00002ee0: 6c6c 7920 7370 6563 6966 7920 6120 6461  lly specify a da
+00002ef0: 7461 2074 7970 653a 0d0a 0d0a 2020 2020  ta type:....    
+00002f00: 3e3e 3e20 7820 3d20 7274 2e46 6173 7441  >>> x = rt.FastA
+00002f10: 7272 6179 285b 332c 2036 2c20 3130 5d2c  rray([3, 6, 10],
+00002f20: 2020 6474 7970 6520 3d20 7274 2e66 6c6f    dtype = rt.flo
+00002f30: 6174 3634 290d 0a20 2020 203e 3e3e 2078  at64)..    >>> x
+00002f40: 2c20 782e 6474 7970 650d 0a20 2020 2028  , x.dtype..    (
+00002f50: 4661 7374 4172 7261 7928 5b20 332e 2c20  FastArray([ 3., 
+00002f60: 2036 2e2c 2031 302e 5d29 2c20 6474 7970   6., 10.]), dtyp
+00002f70: 6528 2766 6c6f 6174 3634 2729 290d 0a0d  e('float64'))...
+00002f80: 0a20 2020 203e 3e3e 2023 2055 7369 6e67  .    >>> # Using
+00002f90: 2061 2073 7472 696e 6720 7368 6f72 7463   a string shortc
+00002fa0: 7574 3a0d 0a20 2020 203e 3e3e 2078 203d  ut:..    >>> x =
+00002fb0: 2072 742e 4661 7374 4172 7261 7928 5b33   rt.FastArray([3
+00002fc0: 2c36 2c31 305d 2c20 2064 7479 7065 203d  ,6,10],  dtype =
+00002fd0: 2027 666c 6f61 7436 3427 290d 0a20 2020   'float64')..   
+00002fe0: 203e 3e3e 2078 2c20 782e 6474 7970 650d   >>> x, x.dtype.
+00002ff0: 0a20 2020 2028 4661 7374 4172 7261 7928  .    (FastArray(
+00003000: 5b20 332e 2c20 2036 2e2c 2031 302e 5d29  [ 3.,  6., 10.])
+00003010: 2c20 6474 7970 6528 2766 6c6f 6174 3634  , dtype('float64
+00003020: 2729 290d 0a0d 0a20 2020 2042 7920 6465  '))....    By de
+00003030: 6661 756c 742c 2063 6861 7261 6374 6572  fault, character
+00003040: 7320 6172 6520 7374 6f72 6564 2061 7320  s are stored as 
+00003050: 6279 7465 2073 7472 696e 6773 2e20 5768  byte strings. Wh
+00003060: 656e 2060 6075 6e69 636f 6465 3d54 7275  en ``unicode=Tru
+00003070: 6560 602c 0d0a 2020 2020 7468 6520 6046  e``,..    the `F
+00003080: 6173 7441 7272 6179 6020 616c 6c6f 7773  astArray` allows
+00003090: 2055 6e69 636f 6465 2063 6861 7261 6374   Unicode charact
+000030a0: 6572 732e 0d0a 0d0a 2020 2020 3e3e 3e20  ers.....    >>> 
+000030b0: 7274 2e46 4128 6c69 7374 2827 6162 6327  rt.FA(list('abc'
+000030c0: 292c 2075 6e69 636f 6465 3d54 7275 6529  ), unicode=True)
+000030d0: 0d0a 2020 2020 4661 7374 4172 7261 7928  ..    FastArray(
+000030e0: 5b27 6127 2c20 2762 272c 2027 6327 5d2c  ['a', 'b', 'c'],
+000030f0: 2064 7479 7065 3d27 3c55 3127 290d 0a0d   dtype='<U1')...
+00003100: 0a20 2020 2054 6f20 636f 6e76 6572 7420  .    To convert 
+00003110: 616e 2065 7869 7374 696e 6720 4e75 6d50  an existing NumP
+00003120: 7920 6172 7261 792c 2075 7365 2074 6865  y array, use the
+00003130: 2060 4661 7374 4172 7261 7960 2063 6f6e   `FastArray` con
+00003140: 7374 7275 6374 6f72 2e0d 0a0d 0a20 2020  structor.....   
+00003150: 203e 3e3e 206e 705f 6172 7220 3d20 6e70   >>> np_arr = np
+00003160: 2e61 7272 6179 285b 312c 2032 2c20 335d  .array([1, 2, 3]
+00003170: 290d 0a20 2020 203e 3e3e 2072 742e 4641  )..    >>> rt.FA
+00003180: 286e 705f 6172 7229 0d0a 2020 2020 4661  (np_arr)..    Fa
+00003190: 7374 4172 7261 7928 5b31 2c20 322c 2033  stArray([1, 2, 3
+000031a0: 5d29 0d0a 0d0a 2020 2020 546f 2076 6965  ])....    To vie
+000031b0: 7720 7468 6520 4e75 6d50 7920 6172 7261  w the NumPy arra
+000031c0: 7920 6173 2061 2060 4661 7374 4172 7261  y as a `FastArra
+000031d0: 7960 2028 7768 6963 6820 6973 2073 6c69  y` (which is sli
+000031e0: 6768 746c 7920 6c65 7373 2065 7870 656e  ghtly less expen
+000031f0: 7369 7665 2074 6861 6e0d 0a20 2020 2075  sive than..    u
+00003200: 7369 6e67 2074 6865 2063 6f6e 7374 7275  sing the constru
+00003210: 6374 6f72 292c 2075 7365 2074 6865 2060  ctor), use the `
+00003220: 7669 6577 6020 6d65 7468 6f64 2e0d 0a0d  view` method....
+00003230: 0a20 2020 203e 3e3e 2066 6120 3d20 6e70  .    >>> fa = np
+00003240: 5f61 7272 2e76 6965 7728 4641 290d 0a20  _arr.view(FA).. 
+00003250: 2020 203e 3e3e 2066 610d 0a20 2020 2046     >>> fa..    F
+00003260: 6173 7441 7272 6179 285b 312c 2032 2c20  astArray([1, 2, 
+00003270: 335d 290d 0a0d 0a20 2020 2054 6f20 7669  3])....    To vi
+00003280: 6577 2069 7420 6173 2061 204e 756d 5079  ew it as a NumPy
+00003290: 2061 7272 6179 2061 6761 696e 3a0d 0a0d   array again:...
+000032a0: 0a20 2020 203e 3e3e 2066 612e 7669 6577  .    >>> fa.view
+000032b0: 286e 702e 6e64 6172 7261 7929 0d0a 2020  (np.ndarray)..  
+000032c0: 2020 6172 7261 7928 5b31 2c20 322c 2033    array([1, 2, 3
+000032d0: 5d29 0d0a 0d0a 2020 2020 3e3e 3e20 2320  ])....    >>> # 
+000032e0: 416c 7465 726e 6174 6976 656c 793a 0d0a  Alternatively:..
+000032f0: 2020 2020 3e3e 3e20 6661 2e5f 6e70 0d0a      >>> fa._np..
+00003300: 2020 2020 6172 7261 7928 5b31 2c20 322c      array([1, 2,
+00003310: 2033 5d29 0d0a 0d0a 2020 2020 2a2a 4765   3])....    **Ge
+00003320: 7420 6120 5375 6273 6574 206f 6620 6120  t a Subset of a 
+00003330: 4661 7374 4172 7261 792a 2a0d 0a0d 0a20  FastArray**.... 
+00003340: 2020 2059 6f75 2063 616e 2075 7365 2073     You can use s
+00003350: 7461 6e64 6172 6420 5079 7468 6f6e 2073  tandard Python s
+00003360: 6c69 6369 6e67 206e 6f74 6174 696f 6e20  licing notation 
+00003370: 6f72 2066 616e 6379 2069 6e64 6578 696e  or fancy indexin
+00003380: 6720 746f 2061 6363 6573 7320 610d 0a20  g to access a.. 
+00003390: 2020 2073 7562 7365 7420 6f66 2061 2060     subset of a `
+000033a0: 4661 7374 4172 7261 7960 2e0d 0a0d 0a20  FastArray`..... 
+000033b0: 2020 203e 3e3e 2023 2043 7265 6174 6520     >>> # Create 
+000033c0: 6120 4661 7374 4172 7261 793a 0d0a 2020  a FastArray:..  
+000033d0: 2020 3e3e 3e20 6172 7261 7920 3d20 7274    >>> array = rt
+000033e0: 2e61 7261 6e67 6528 3829 2a2a 320d 0a20  .arange(8)**2.. 
+000033f0: 2020 203e 3e3e 2061 7272 6179 0d0a 2020     >>> array..  
+00003400: 2020 4661 7374 4172 7261 7928 5b30 2c20    FastArray([0, 
+00003410: 312c 2034 2c20 392c 2031 362c 2032 352c  1, 4, 9, 16, 25,
+00003420: 2033 362c 2034 395d 290d 0a20 2020 203e   36, 49])..    >
+00003430: 3e3e 2023 2055 7365 2050 7974 686f 6e20  >> # Use Python 
+00003440: 736c 6963 696e 6720 746f 2067 6574 2065  slicing to get e
+00003450: 6c65 6d65 6e74 7320 322c 2033 2c20 616e  lements 2, 3, an
+00003460: 6420 343a 0d0a 2020 2020 3e3e 3e20 6172  d 4:..    >>> ar
+00003470: 7261 795b 323a 355d 0d0a 2020 2020 4661  ray[2:5]..    Fa
+00003480: 7374 4172 7261 7928 5b34 2c20 392c 2031  stArray([4, 9, 1
+00003490: 365d 290d 0a0d 0a20 2020 203e 3e3e 2023  6])....    >>> #
+000034a0: 2055 7365 2066 616e 6379 2069 6e64 6578   Use fancy index
+000034b0: 696e 6720 746f 2067 6574 2065 6c65 6d65  ing to get eleme
+000034c0: 6e74 7320 322c 2034 2c20 616e 6420 3120  nts 2, 4, and 1 
+000034d0: 2869 6e20 7468 6174 206f 7264 6572 293a  (in that order):
+000034e0: 0d0a 2020 2020 3e3e 3e20 6172 7261 795b  ..    >>> array[
+000034f0: 5b32 2c20 342c 2031 5d5d 0d0a 2020 2020  [2, 4, 1]]..    
+00003500: 4661 7374 4172 7261 7928 5b34 2c20 3136  FastArray([4, 16
+00003510: 2c20 315d 290d 0a0d 0a20 2020 2046 6f72  , 1])....    For
+00003520: 206d 6f72 6520 6465 7461 696c 732c 2073   more details, s
+00003530: 6565 2074 6865 2065 7861 6d70 6c65 7320  ee the examples 
+00003540: 666f 7220 312d 6469 6d65 6e73 696f 6e61  for 1-dimensiona
+00003550: 6c20 6172 7261 7973 2069 6e20 4e75 6d50  l arrays in NumP
+00003560: 7927 7320 646f 6373 3a0d 0a20 2020 2060  y's docs:..    `
+00003570: 496e 6465 7869 6e67 206f 6e20 6e64 6172  Indexing on ndar
+00003580: 7261 7973 203c 6874 7470 733a 2f2f 6e75  rays <https://nu
+00003590: 6d70 792e 6f72 672f 646f 632f 7374 6162  mpy.org/doc/stab
+000035a0: 6c65 2f75 7365 722f 6261 7369 6373 2e69  le/user/basics.i
+000035b0: 6e64 6578 696e 672e 6874 6d6c 3e60 5f2e  ndexing.html>`_.
+000035c0: 0d0a 0d0a 2020 2020 4e6f 7465 2074 6861  ....    Note tha
+000035d0: 7420 736c 6963 696e 6720 6372 6561 7465  t slicing create
+000035e0: 7320 6120 7669 6577 206f 6620 7468 6520  s a view of the 
+000035f0: 6172 7261 7920 616e 6420 646f 6573 206e  array and does n
+00003600: 6f74 2063 6f70 7920 7468 6520 756e 6465  ot copy the unde
+00003610: 726c 7969 6e67 2064 6174 613b 0d0a 2020  rlying data;..  
+00003620: 2020 6d6f 6469 6679 696e 6720 7468 6520    modifying the 
+00003630: 736c 6963 6520 6d6f 6469 6669 6573 2074  slice modifies t
+00003640: 6865 206f 7269 6769 6e61 6c20 6172 7261  he original arra
+00003650: 792e 2046 616e 6379 2069 6e64 6578 696e  y. Fancy indexin
+00003660: 6720 6372 6561 7465 7320 6120 636f 7079  g creates a copy
+00003670: 206f 660d 0a20 2020 2074 6865 2065 7874   of..    the ext
+00003680: 7261 6374 6564 2064 6174 613b 206d 6f64  racted data; mod
+00003690: 6966 7969 6e67 2074 6869 7320 6172 7261  ifying this arra
+000036a0: 7920 646f 6573 206e 6f74 206d 6f64 6966  y does not modif
+000036b0: 7920 7468 6520 6f72 6967 696e 616c 2061  y the original a
+000036c0: 7272 6179 2e0d 0a0d 0a20 2020 2059 6f75  rray.....    You
+000036d0: 2063 616e 2061 6c73 6f20 7061 7373 2061   can also pass a
+000036e0: 2042 6f6f 6c65 616e 206d 6173 6b20 6172   Boolean mask ar
+000036f0: 7261 792e 0d0a 0d0a 2020 2020 3e3e 3e20  ray.....    >>> 
+00003700: 2320 4372 6561 7465 2061 2042 6f6f 6c65  # Create a Boole
+00003710: 616e 206d 6173 6b3a 0d0a 2020 2020 3e3e  an mask:..    >>
+00003720: 3e20 6576 656e 4d61 736b 203d 2028 6172  > evenMask = (ar
+00003730: 7261 7920 2520 3220 3d3d 2030 290d 0a20  ray % 2 == 0).. 
+00003740: 2020 203e 3e3e 2065 7665 6e4d 6173 6b0d     >>> evenMask.
+00003750: 0a20 2020 2046 6173 7441 7272 6179 285b  .    FastArray([
+00003760: 5472 7565 2c20 4661 6c73 652c 2054 7275  True, False, Tru
+00003770: 652c 2046 616c 7365 2c20 5472 7565 2c20  e, False, True, 
+00003780: 4661 6c73 652c 2054 7275 652c 2046 616c  False, True, Fal
+00003790: 7365 5d29 0d0a 2020 2020 3e3e 3e20 2320  se])..    >>> # 
+000037a0: 496e 6465 7820 7573 696e 6720 7468 6520  Index using the 
+000037b0: 426f 6f6c 6561 6e20 6d61 736b 3a0d 0a20  Boolean mask:.. 
+000037c0: 2020 203e 3e3e 2061 7272 6179 5b65 7665     >>> array[eve
+000037d0: 6e4d 6173 6b5d 0d0a 2020 2020 4661 7374  nMask]..    Fast
+000037e0: 4172 7261 7928 5b30 2c20 342c 2031 362c  Array([0, 4, 16,
+000037f0: 2033 365d 290d 0a0d 0a20 2020 202a 2a48   36])....    **H
+00003800: 6f77 2074 6f20 5375 6263 6c61 7373 2046  ow to Subclass F
+00003810: 6173 7441 7272 6179 2a2a 0d0a 0d0a 2020  astArray**....  
+00003820: 2020 496e 636c 7564 6520 7468 6520 7265    Include the re
+00003830: 7175 6972 6564 2063 6c61 7373 2064 6566  quired class def
+00003840: 696e 6974 696f 6e3a 0d0a 0d0a 2020 2020  inition:....    
+00003850: 3e3e 3e20 636c 6173 7320 5465 7374 5375  >>> class TestSu
+00003860: 6263 6c61 7373 2846 6173 7441 7272 6179  bclass(FastArray
+00003870: 293a 0d0a 2020 2020 2e2e 2e20 2020 2020  ):..    ...     
+00003880: 6465 6620 5f5f 6e65 775f 5f28 636c 732c  def __new__(cls,
+00003890: 2061 7272 2c20 2a2a 6172 6773 293a 0d0a   arr, **args):..
+000038a0: 2020 2020 2e2e 2e20 2020 2020 2020 2020      ...         
+000038b0: 2320 4265 666f 7265 2074 6869 7320 6361  # Before this ca
+000038c0: 6c6c 2c20 6172 7220 6e65 6564 7320 746f  ll, arr needs to
+000038d0: 2062 6520 6120 6e70 2e6e 6461 7272 6179   be a np.ndarray
+000038e0: 2069 6e73 7461 6e63 652e 0d0a 2020 2020   instance...    
+000038f0: 2e2e 2e20 2020 2020 2020 2020 7265 7475  ...         retu
+00003900: 726e 2061 7272 2e76 6965 7728 636c 7329  rn arr.view(cls)
+00003910: 0d0a 2020 2020 2e2e 2e20 2020 2020 6465  ..    ...     de
+00003920: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
+00003930: 2061 7272 2c20 2a2a 6172 6773 293a 0d0a   arr, **args):..
+00003940: 2020 2020 2e2e 2e20 2020 2020 2020 2020      ...         
+00003950: 7061 7373 0d0a 0d0a 2020 2020 4966 2074  pass....    If t
+00003960: 6865 2073 7562 636c 6173 7320 6973 2063  he subclass is c
+00003970: 6f6d 7075 7461 626c 652c 2079 6f75 206d  omputable, you m
+00003980: 6967 6874 2064 6566 696e 6520 796f 7572  ight define your
+00003990: 206f 776e 206d 6174 6820 6f70 6572 6174   own math operat
+000039a0: 696f 6e73 2e20 496e 2074 6865 7365 0d0a  ions. In these..
+000039b0: 2020 2020 6f70 6572 6174 696f 6e73 2c20      operations, 
+000039c0: 796f 7520 6d69 6768 7420 6465 6669 6e65  you might define
+000039d0: 2077 6861 7420 7468 6520 7375 6263 6c61   what the subcla
+000039e0: 7373 2063 616e 2062 6520 636f 6d70 7574  ss can be comput
+000039f0: 6564 2077 6974 682e 2046 6f72 2065 7861  ed with. For exa
+00003a00: 6d70 6c65 7320 6f66 0d0a 2020 2020 6e65  mples of..    ne
+00003a10: 7720 6465 6669 6e69 7469 6f6e 732c 2073  w definitions, s
+00003a20: 6565 2074 6865 2060 4461 7465 5469 6d65  ee the `DateTime
+00003a30: 4e61 6e6f 6020 636c 6173 732e 0d0a 0d0a  Nano` class.....
+00003a40: 2020 2020 436f 6d6d 6f6e 206f 7065 7261      Common opera
+00003a50: 7469 6f6e 7320 746f 2068 6f6f 6b20 6172  tions to hook ar
+00003a60: 6520 636f 6d70 6172 6973 6f6e 7320 2860  e comparisons (`
+00003a70: 605f 5f65 715f 5f28 2960 602c 2060 605f  `__eq__()``, ``_
+00003a80: 5f6e 655f 5f28 2960 602c 2060 605f 5f67  _ne__()``, ``__g
+00003a90: 745f 5f28 2960 602c 0d0a 2020 2020 6060  t__()``,..    ``
+00003aa0: 5f5f 6c74 5f5f 2829 6060 2c20 6060 5f5f  __lt__()``, ``__
+00003ab0: 6c65 5f5f 2829 6060 2c20 6060 5f5f 6765  le__()``, ``__ge
+00003ac0: 5f5f 2829 6060 2920 616e 6420 6261 7369  __()``) and basi
+00003ad0: 6320 6d61 7468 2066 756e 6374 696f 6e73  c math functions
+00003ae0: 2028 6060 5f5f 6164 645f 5f28 2960 602c   (``__add__()``,
+00003af0: 0d0a 2020 2020 6060 5f5f 7375 625f 5f28  ..    ``__sub__(
+00003b00: 2960 602c 2060 605f 5f6d 756c 5f5f 2829  )``, ``__mul__()
+00003b10: 6060 2c20 6574 632e 292e 0d0a 0d0a 2020  ``, etc.).....  
+00003b20: 2020 4272 6163 6b65 7420 696e 6465 7869    Bracket indexi
+00003b30: 6e67 206f 7065 7261 7469 6f6e 7320 6172  ng operations ar
+00003b40: 6520 7665 7279 2063 6f6d 6d6f 6e2e 2049  e very common. I
+00003b50: 6620 7468 6520 7375 6263 6c61 7373 206e  f the subclass n
+00003b60: 6565 6473 2074 6f20 7365 7420 6f72 2072  eeds to set or r
+00003b70: 6574 7572 6e0d 0a20 2020 2061 2076 616c  eturn..    a val
+00003b80: 7565 206f 7468 6572 2074 6861 6e20 7468  ue other than th
+00003b90: 6174 2069 6e20 7468 6520 756e 6465 726c  at in the underl
+00003ba0: 7969 6e67 2061 7272 6179 2c20 796f 7520  ying array, you 
+00003bb0: 6e65 6564 2074 6f20 7461 6b65 206f 7665  need to take ove
+00003bc0: 720d 0a20 2020 2060 5f5f 6765 7469 7465  r..    `__getite
+00003bd0: 6d5f 5f28 2960 206f 7220 605f 5f73 6574  m__()` or `__set
+00003be0: 6974 656d 5f5f 2829 602e 0d0a 0d0a 2020  item__()`.....  
+00003bf0: 2020 496e 6465 7869 6e67 2069 7320 616c    Indexing is al
+00003c00: 736f 2075 7365 6420 696e 2064 6973 706c  so used in displ
+00003c10: 6179 2e20 466f 7220 7265 6775 6c61 7220  ay. For regular 
+00003c20: 636f 6e73 6f6c 652f 6e6f 7465 626f 6f6b  console/notebook
+00003c30: 2064 6973 706c 6179 2c20 796f 7520 6e65   display, you ne
+00003c40: 6564 2074 6f0d 0a20 2020 2074 616b 6520  ed to..    take 
+00003c50: 6f76 6572 3a0d 0a0d 0a20 2020 202a 2060  over:....    * `
+00003c60: 5f5f 7265 7072 5f5f 2829 600d 0a20 2020  __repr__()`..   
+00003c70: 202a 2060 5f5f 7374 725f 5f28 2960 0d0a   * `__str__()`..
+00003c80: 2020 2020 2a20 605f 7265 7072 5f68 746d      * `_repr_htm
+00003c90: 6c5f 2829 6020 2866 6f72 204a 7570 7974  l_()` (for Jupyt
+00003ca0: 6572 4c61 6220 616e 6420 4a75 7079 7465  erLab and Jupyte
+00003cb0: 7220 6e6f 7465 626f 6f6b 7329 0d0a 0d0a  r notebooks)....
+00003cc0: 2020 2020 4966 2074 6865 2061 7272 6179      If the array
+00003cd0: 2069 7320 6265 696e 6720 6469 7370 6c61   is being displa
+00003ce0: 7965 6420 696e 2061 2060 4461 7461 7365  yed in a `Datase
+00003cf0: 7460 2061 6e64 2079 6f75 2072 6571 7569  t` and you requi
+00003d00: 7265 2063 6572 7461 696e 2066 6f72 6d61  re certain forma
+00003d10: 7474 696e 672c 2079 6f75 0d0a 2020 2020  tting, you..    
+00003d20: 6e65 6564 2074 6f20 6465 6669 6e65 2074  need to define t
+00003d30: 776f 206d 6f72 6520 6d65 7468 6f64 733a  wo more methods:
+00003d40: 0d0a 0d0a 2020 2020 6060 6469 7370 6c61  ....    ``displa
+00003d50: 795f 7175 6572 795f 7072 6f70 6572 7469  y_query_properti
+00003d60: 6573 2829 6060 0d0a 2020 2020 2020 2020  es()``..        
+00003d70: 5265 7475 726e 7320 616e 2060 4974 656d  Returns an `Item
+00003d80: 466f 726d 6174 6020 6f62 6a65 6374 2028  Format` object (
+00003d90: 7365 6520 6072 742e 5574 696c 732e 7274  see `rt.Utils.rt
+00003da0: 5f64 6973 706c 6179 5f70 726f 7065 7274  _display_propert
+00003db0: 6965 7360 290d 0a0d 0a20 2020 2060 6064  ies`)....    ``d
+00003dc0: 6973 706c 6179 5f63 6f6e 7665 7274 5f66  isplay_convert_f
+00003dd0: 756e 6328 2960 600d 0a20 2020 2020 2020  unc()``..       
+00003de0: 2054 6865 2063 6f6e 7665 7273 696f 6e20   The conversion 
+00003df0: 6675 6e63 7469 6f6e 2072 6574 7572 6e65  function returne
+00003e00: 6420 6279 2060 6064 6973 706c 6179 5f71  d by ``display_q
+00003e10: 7565 7279 5f70 726f 7065 7274 6965 7328  uery_properties(
+00003e20: 2960 600d 0a20 2020 2020 2020 206d 7573  )``..        mus
+00003e30: 7420 7265 7475 726e 2061 2073 7472 696e  t return a strin
+00003e40: 672e 2045 6163 6820 6974 656d 2062 6569  g. Each item bei
+00003e50: 6e67 2064 6973 706c 6179 6564 2c20 7468  ng displayed, th
+00003e60: 6520 7265 7375 6c74 206f 6620 6060 5f5f  e result of ``__
+00003e70: 6765 7469 7465 6d5f 5f28 2960 600d 0a20  getitem__()``.. 
+00003e80: 2020 2020 2020 2061 7420 6120 7369 6e67         at a sing
+00003e90: 6c65 2069 6e64 6578 2c20 7769 6c6c 2067  le index, will g
+00003ea0: 6f20 7468 726f 7567 6820 7468 6973 2066  o through this f
+00003eb0: 756e 6374 696f 6e20 696e 6469 7669 6475  unction individu
+00003ec0: 616c 6c79 2c20 6163 636f 6d70 616e 6965  ally, accompanie
+00003ed0: 6420 6279 0d0a 2020 2020 2020 2020 616e  d by..        an
+00003ee0: 2060 4974 656d 466f 726d 6174 6020 6f62   `ItemFormat` ob
+00003ef0: 6a65 6374 2e0d 0a0d 0a20 2020 204d 616e  ject.....    Man
+00003f00: 7920 5269 7074 6162 6c65 206f 7065 7261  y Riptable opera
+00003f10: 7469 6f6e 7320 6e65 6564 2074 6f20 7265  tions need to re
+00003f20: 7475 726e 2061 7272 6179 7320 6f66 2074  turn arrays of t
+00003f30: 6865 2073 616d 6520 636c 6173 7320 7468  he same class th
+00003f40: 6579 2072 6563 6569 7665 642e 2054 6f0d  ey received. To.
+00003f50: 0a20 2020 2065 6e73 7572 6520 7468 6174  .    ensure that
+00003f60: 2079 6f75 7220 7375 6263 6c61 7373 2077   your subclass w
+00003f70: 696c 6c20 7265 7461 696e 2069 7473 2073  ill retain its s
+00003f80: 7065 6369 616c 2070 726f 7065 7274 6965  pecial propertie
+00003f90: 732c 2079 6f75 206e 6565 6420 746f 2074  s, you need to t
+00003fa0: 616b 6520 6f76 6572 0d0a 2020 2020 606e  ake over..    `n
+00003fb0: 6577 636c 6173 7366 726f 6d69 6e73 7461  ewclassfrominsta
+00003fc0: 6e63 6528 2960 2e20 4661 696c 7572 6520  nce()`. Failure 
+00003fd0: 746f 2074 616b 6520 7468 6973 206f 7665  to take this ove
+00003fe0: 7220 7769 6c6c 206f 6674 656e 2072 6573  r will often res
+00003ff0: 756c 7420 696e 2061 6e20 6f62 6a65 6374  ult in an object
+00004000: 0d0a 2020 2020 7769 7468 2075 6e69 6e69  ..    with unini
+00004010: 7469 616c 697a 6564 2076 6172 6961 626c  tialized variabl
+00004020: 6573 2e0d 0a0d 0a20 2020 2060 636f 7079  es.....    `copy
+00004030: 2829 6020 6973 2061 6e6f 7468 6572 206d  ()` is another m
+00004040: 6574 686f 6420 7468 6174 2069 7320 6361  ethod that is ca
+00004050: 6c6c 6564 2067 656e 6572 6963 616c 6c79  lled generically
+00004060: 2069 6e20 5269 7074 6162 6c65 2072 6f75   in Riptable rou
+00004070: 7469 6e65 732c 2061 6e64 0d0a 2020 2020  tines, and..    
+00004080: 6e65 6564 7320 746f 2062 6520 7461 6b65  needs to be take
+00004090: 6e20 6f76 6572 2074 6f20 7265 7461 696e  n over to retain
+000040a0: 2073 7562 636c 6173 7320 7072 6f70 6572   subclass proper
+000040b0: 7469 6573 2e0d 0a0d 0a20 2020 2046 6f72  ties.....    For
+000040c0: 2061 2076 6965 7720 6f66 2074 6865 2075   a view of the u
+000040d0: 6e64 6572 6c79 696e 6720 6046 6173 7441  nderlying `FastA
+000040e0: 7272 6179 602c 2079 6f75 2063 616e 2075  rray`, you can u
+000040f0: 7365 2074 6865 2060 5f66 6160 2070 726f  se the `_fa` pro
+00004100: 7065 7274 792e 0d0a 2020 2020 2222 220d  perty...    """.
+00004110: 0a0d 0a20 2020 2023 2044 6566 696e 6573  ...    # Defines
+00004120: 2061 2067 656e 6572 6963 206e 702e 6e64   a generic np.nd
+00004130: 6172 7261 7920 7375 6263 6c61 7373 2c20  array subclass, 
+00004140: 7468 6174 2063 616e 2063 6163 6865 206e  that can cache n
+00004150: 756d 7079 2061 7272 6179 730d 0a20 2020  umpy arrays..   
+00004160: 2023 2053 7461 7469 6320 436c 6173 7320   # Static Class 
+00004170: 5641 5249 4142 4c45 530d 0a0d 0a20 2020  VARIABLES....   
+00004180: 2023 2063 6861 6e67 6520 7468 6973 2074   # change this t
+00004190: 6f20 7368 6f77 206f 7220 6c65 7373 2076  o show or less v
+000041a0: 616c 7565 7320 6f6e 205f 5f72 6570 725f  alues on __repr_
+000041b0: 5f0d 0a20 2020 204d 4158 5f44 4953 504c  _..    MAX_DISPL
+000041c0: 4159 5f4c 454e 203d 2031 300d 0a0d 0a20  AY_LEN = 10.... 
+000041d0: 2020 2023 2073 6574 2074 6f20 3220 6f72     # set to 2 or
+000041e0: 2033 2066 6f72 2065 7874 7261 2064 6562   3 for extra deb
+000041f0: 7567 2069 6e66 6f72 6d61 7469 6f6e 0d0a  ug information..
+00004200: 2020 2020 5665 7262 6f73 6520 3d20 310d      Verbose = 1.
+00004210: 0a0d 0a20 2020 2023 2073 6574 2074 6f20  ...    # set to 
+00004220: 7472 7565 2066 6f72 2072 6575 7369 6e67  true for reusing
+00004230: 206e 756d 7079 2061 7272 6179 7320 696e   numpy arrays in
+00004240: 7374 6561 6420 6f66 2064 656c 6574 696e  stead of deletin
+00004250: 6720 7468 656d 2063 6f6d 706c 6574 656c  g them completel
+00004260: 790d 0a20 2020 2052 6563 7963 6c65 203d  y..    Recycle =
+00004270: 2054 7275 650d 0a0d 0a20 2020 2023 2073   True....    # s
+00004280: 6574 2074 6f20 7472 7565 2074 6f20 7072  et to true to pr
+00004290: 6573 6572 7665 2073 656e 7469 6e65 6c73  eserve sentinels
+000042a0: 2064 7572 696e 6720 696e 7465 726e 616c   during internal
+000042b0: 2061 7272 6179 5f75 6675 6e63 2063 616c   array_ufunc cal
+000042c0: 6375 6c61 7469 6f6e 730d 0a20 2020 2053  culations..    S
+000042d0: 6166 6543 6f6e 7665 7273 696f 6e73 203d  afeConversions =
+000042e0: 2054 7275 650d 0a0d 0a20 2020 2023 2073   True....    # s
+000042f0: 6574 2074 6f20 6661 6c73 6520 746f 2062  et to false to b
+00004300: 6520 6a75 7374 206e 6f72 6d61 6c20 6e75  e just normal nu
+00004310: 6d70 790d 0a20 2020 2046 6173 7465 7255  mpy..    FasterU
+00004320: 4675 6e63 203d 2054 7275 650d 0a0d 0a20  Func = True.... 
+00004330: 2020 204e 4557 5f41 5252 4159 5f46 554e     NEW_ARRAY_FUN
+00004340: 4354 494f 4e5f 454e 4142 4c45 4420 3d20  CTION_ENABLED = 
+00004350: 4661 6c73 650d 0a20 2020 2022 2222 456e  False..    """En
+00004360: 6162 6c65 2069 6d70 6c65 6d65 6e74 6174  able implementat
+00004370: 696f 6e20 6f66 2061 7272 6179 2066 756e  ion of array fun
+00004380: 6374 696f 6e20 7072 6f74 6f63 6f6c 2028  ction protocol (
+00004390: 6465 6661 756c 7420 4661 6c73 6529 2e22  default False)."
+000043a0: 2222 0d0a 0d0a 2020 2020 2320 303d 5175  ""....    # 0=Qu
+000043b0: 6965 742c 2031 3d57 6172 6e2c 2032 3d45  iet, 1=Warn, 2=E
+000043c0: 7863 6570 7469 6f6e 0d0a 2020 2020 5761  xception..    Wa
+000043d0: 726e 696e 674c 6576 656c 203d 2031 0d0a  rningLevel = 1..
+000043e0: 0d0a 2020 2020 2320 7365 7420 746f 2074  ..    # set to t
+000043f0: 7275 6520 746f 206e 6f74 2061 6c6c 6f77  rue to not allow
+00004400: 2061 7261 7279 7320 7765 2064 6f20 6e6f   ararys we do no
+00004410: 7420 7375 7070 6f72 740d 0a20 2020 204e  t support..    N
+00004420: 6f54 6f6c 6572 616e 6365 203d 2046 616c  oTolerance = Fal
+00004430: 7365 0d0a 0d0a 2020 2020 2320 7365 7420  se....    # set 
+00004440: 746f 2066 616c 7365 2074 6f20 6e6f 7420  to false to not 
+00004450: 636f 6d70 7265 7373 2077 6865 6e20 7069  compress when pi
+00004460: 636b 6c69 6e67 0d0a 2020 2020 436f 6d70  ckling..    Comp
+00004470: 7265 7373 5069 636b 6c65 203d 2054 7275  ressPickle = Tru
+00004480: 650d 0a0d 0a20 2020 2023 2061 2064 6963  e....    # a dic
+00004490: 7469 6f6e 6172 7920 746f 2061 766f 6964  tionary to avoid
+000044a0: 2072 6570 6561 7469 6e67 2077 6172 6e69   repeating warni
+000044b0: 6e67 7320 696e 206d 756c 7469 706c 6520  ngs in multiple 
+000044c0: 706c 6163 6573 0d0a 2020 2020 2320 544f  places..    # TO
+000044d0: 444f 3a20 7772 6170 2074 6869 7320 696e  DO: wrap this in
+000044e0: 2061 2063 6c61 7373 2073 6f20 7468 6174   a class so that
+000044f0: 2077 6172 6e69 6e67 7320 6361 6e20 6265   warnings can be
+00004500: 2074 7572 6e65 6420 6f6e 2f6f 6666 0d0a   turned on/off..
+00004510: 2020 2020 5761 726e 696e 6744 6963 7420      WarningDict 
+00004520: 3d20 7b0d 0a20 2020 2020 2020 2022 6d75  = {..        "mu
+00004530: 6c74 6970 6c65 5f64 696d 656e 7369 6f6e  ltiple_dimension
+00004540: 7322 3a20 2246 6173 7441 7272 6179 2063  s": "FastArray c
+00004550: 6f6e 7461 696e 7320 7477 6f20 6f72 206d  ontains two or m
+00004560: 6f72 6520 6469 6d65 6e73 696f 6e73 2067  ore dimensions g
+00004570: 7265 6174 6572 2074 6861 6e20 6f6e 6520  reater than one 
+00004580: 2d20 7368 6170 653a 7b7d 2e20 2050 726f  - shape:{}.  Pro
+00004590: 626c 656d 7320 6d61 7920 6f63 6375 722e  blems may occur.
+000045a0: 220d 0a20 2020 207d 0d0a 0d0a 2020 2020  "..    }....    
+000045b0: 2320 466f 7220 7265 6475 6374 696f 6e20  # For reduction 
+000045c0: 6f70 6572 6174 696f 6e73 2c20 7468 6520  operations, the 
+000045d0: 6964 656e 7469 7479 2065 6c65 6d65 6e74  identity element
+000045e0: 206f 6620 7468 6520 6f70 6572 6174 696f   of the operatio
+000045f0: 6e20 2866 6f72 206f 7065 7261 7469 6f6e  n (for operation
+00004600: 730d 0a20 2020 2023 2077 6865 7265 2073  s..    # where s
+00004610: 7563 6820 616e 2065 6c65 6d65 6e74 2069  uch an element i
+00004620: 7320 6465 6669 6e65 6429 2e0d 0a20 2020  s defined)...   
+00004630: 2023 204e 2e42 2e20 4173 206f 6620 6e75   # N.B. As of nu
+00004640: 6d70 7920 312e 3139 2069 7420 646f 6573  mpy 1.19 it does
+00004650: 206e 6f74 2061 7070 6561 7220 7468 6572   not appear ther
+00004660: 6527 7320 6120 7374 7261 6967 6874 666f  e's a straightfo
+00004670: 7277 6172 6420 7761 7920 6f66 2067 6574  rward way of get
+00004680: 7469 6e67 2066 726f 6d0d 0a20 2020 2023  ting from..    #
+00004690: 2020 2073 6f6d 6574 6869 6e67 206c 696b     something lik
+000046a0: 6520 6060 6e70 2e73 756d 6060 2062 6163  e ``np.sum`` bac
+000046b0: 6b20 746f 2060 606e 702e 6164 6460 602c  k to ``np.add``,
+000046c0: 2066 726f 6d20 7768 6963 6820 7765 2063   from which we c
+000046d0: 6f75 6c64 2067 6574 2074 6865 202e 6964  ould get the .id
+000046e0: 656e 7469 7479 2070 726f 7065 7274 792e  entity property.
+000046f0: 0d0a 2020 2020 2320 2020 4966 2074 6861  ..    #   If tha
+00004700: 7420 6576 6572 2063 6861 6e67 6573 2c20  t ever changes, 
+00004710: 7468 6973 2064 6963 7469 6f6e 6172 7920  this dictionary 
+00004720: 776f 756c 6420 6e6f 206c 6f6e 6765 7220  would no longer 
+00004730: 6265 206e 6563 6573 7361 7279 2073 6f20  be necessary so 
+00004740: 6974 2063 616e 2b73 686f 756c 6420 6265  it can+should be
+00004750: 2072 656d 6f76 6564 2e0d 0a20 2020 205f   removed...    _
+00004760: 7265 6475 6365 5f6f 705f 6964 656e 7469  reduce_op_identi
+00004770: 7479 5f76 616c 7565 3a20 4d61 7070 696e  ty_value: Mappin
+00004780: 675b 5245 4455 4345 5f46 554e 4354 494f  g[REDUCE_FUNCTIO
+00004790: 4e53 2c20 416e 795d 203d 207b 0d0a 2020  NS, Any] = {..  
+000047a0: 2020 2020 2020 5245 4455 4345 5f46 554e        REDUCE_FUN
+000047b0: 4354 494f 4e53 2e52 4544 5543 455f 414c  CTIONS.REDUCE_AL
+000047c0: 4c3a 2054 7275 652c 2020 2320 6e70 2e61  L: True,  # np.a
+000047d0: 6c6c 286e 702e 6172 7261 7928 5b5d 2929  ll(np.array([]))
+000047e0: 0d0a 2020 2020 2020 2020 5245 4455 4345  ..        REDUCE
+000047f0: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
+00004800: 455f 414e 593a 2046 616c 7365 2c20 2023  E_ANY: False,  #
+00004810: 206e 702e 616e 7928 6e70 2e61 7272 6179   np.any(np.array
+00004820: 285b 5d29 290d 0a20 2020 2020 2020 2052  ([]))..        R
+00004830: 4544 5543 455f 4655 4e43 5449 4f4e 532e  EDUCE_FUNCTIONS.
+00004840: 5245 4455 4345 5f4e 414e 5355 4d3a 206e  REDUCE_NANSUM: n
+00004850: 702e 6164 642e 6964 656e 7469 7479 2c0d  p.add.identity,.
+00004860: 0a20 2020 2020 2020 2052 4544 5543 455f  .        REDUCE_
+00004870: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
+00004880: 5f53 554d 3a20 6e70 2e61 6464 2e69 6465  _SUM: np.add.ide
+00004890: 6e74 6974 792c 0d0a 2020 2020 7d0d 0a0d  ntity,..    }...
+000048a0: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+000048b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000048c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000048d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000048e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000048f0: 2d0d 0a20 2020 2063 6c61 7373 205f 4172  -..    class _Ar
+00004900: 7261 7946 756e 6374 696f 6e48 656c 7065  rayFunctionHelpe
+00004910: 723a 0d0a 2020 2020 2020 2020 2320 544f  r:..        # TO
+00004920: 444f 2061 6464 2075 7361 6765 2065 7861  DO add usage exa
+00004930: 6d70 6c65 730d 0a20 2020 2020 2020 2022  mples..        "
+00004940: 2222 0d0a 2020 2020 2020 2020 4172 7261  ""..        Arra
+00004950: 7920 6675 6e63 7469 6f6e 2068 656c 7065  y function helpe
+00004960: 7220 6973 2072 6573 706f 6e73 6962 6c65  r is responsible
+00004970: 206d 6169 6e74 6169 6e69 6e67 2074 6865   maintaining the
+00004980: 2061 7272 6179 2066 756e 6374 696f 6e20   array function 
+00004990: 7072 6f74 6f63 6f6c 2061 7272 6179 2069  protocol array i
+000049a0: 6d70 6c65 6d65 6e74 6174 696f 6e73 2069  mplementations i
+000049b0: 6e20 7468 650d 0a20 2020 2020 2020 2066  n the..        f
+000049c0: 6f72 6d20 6f66 2074 6865 2066 6f6c 6c6f  orm of the follo
+000049d0: 7769 6e67 2041 5049 3a0d 0a0d 0a20 2020  wing API:....   
+000049e0: 2020 2020 202d 2067 6574 5f61 7272 6179       - get_array
+000049f0: 5f66 756e 6374 696f 6e3a 2067 6976 656e  _function: given
+00004a00: 2074 6865 204e 756d 7079 2066 756e 6374   the Numpy funct
+00004a10: 696f 6e2c 2072 6574 7572 6e73 206f 7665  ion, returns ove
+00004a20: 7272 6964 6465 6e20 6172 7261 7920 6675  rridden array fu
+00004a30: 6e63 7469 6f6e 0d0a 2020 2020 2020 2020  nction..        
+00004a40: 2d20 6765 745f 6172 7261 795f 6675 6e63  - get_array_func
+00004a50: 7469 6f6e 5f74 7970 655f 636f 6d70 6174  tion_type_compat
+00004a60: 6962 696c 6974 795f 6368 6563 6b3a 2067  ibility_check: g
+00004a70: 6976 656e 2074 6865 204e 756d 7079 2066  iven the Numpy f
+00004a80: 756e 6374 696f 6e2c 2072 6574 7572 6e73  unction, returns
+00004a90: 206f 7665 7272 6964 6465 6e20 6172 7261   overridden arra
+00004aa0: 7920 6675 6e63 7469 6f6e 2074 7970 6520  y function type 
+00004ab0: 636f 6d70 6174 6962 696c 6974 7920 6368  compatibility ch
+00004ac0: 6563 6b0d 0a20 2020 2020 2020 202d 2072  eck..        - r
+00004ad0: 6567 6973 7465 725f 6172 7261 795f 6675  egister_array_fu
+00004ae0: 6e63 7469 6f6e 3a20 6120 6675 6e63 7469  nction: a functi
+00004af0: 6f6e 2064 6563 6f72 6174 6f72 2077 686f  on decorator who
+00004b00: 7365 2061 7267 756d 656e 7420 6973 2074  se argument is t
+00004b10: 6865 204e 756d 7079 2066 756e 6374 696f  he Numpy functio
+00004b20: 6e20 746f 206f 7665 7272 6964 6520 616e  n to override an
+00004b30: 6420 7468 6520 6675 6e63 7469 6f6e 2074  d the function t
+00004b40: 6861 7420 7769 6c6c 206f 7665 7272 6964  hat will overrid
+00004b50: 6520 6974 0d0a 2020 2020 2020 2020 2d20  e it..        - 
+00004b60: 7265 6769 7374 6572 5f61 7272 6179 5f66  register_array_f
+00004b70: 756e 6374 696f 6e5f 7479 7065 5f63 6f6d  unction_type_com
+00004b80: 7061 7469 6269 6c69 7479 3a20 7369 6d69  patibility: simi
+00004b90: 6c61 7220 746f 2072 6567 6973 7465 725f  lar to register_
+00004ba0: 6172 7261 795f 6675 6e63 7469 6f6e 2c20  array_function, 
+00004bb0: 6275 7420 6775 6172 6473 2061 6761 696e  but guards again
+00004bc0: 7374 2069 6e63 6f6d 7061 7469 626c 6520  st incompatible 
+00004bd0: 6172 7261 7920 6675 6e63 7469 6f6e 2070  array function p
+00004be0: 726f 746f 636f 6c20 7479 7065 2061 7267  rotocol type arg
+00004bf0: 756d 656e 7473 2066 6f72 2074 6865 2067  uments for the g
+00004c00: 6976 656e 204e 756d 7079 2066 756e 6374  iven Numpy funct
+00004c10: 696f 6e0d 0a20 2020 2020 2020 202d 2064  ion..        - d
+00004c20: 6572 6567 6973 7465 723a 2064 6572 6567  eregister: dereg
+00004c30: 6973 7472 6174 696f 6e20 6f66 2074 6865  istration of the
+00004c40: 204e 756d 7079 2066 756e 6374 696f 6e20   Numpy function 
+00004c50: 616e 6420 7479 7065 2063 6f6d 7061 7469  and type compati
+00004c60: 6269 6c69 7479 206f 7665 7272 6964 650d  bility override.
+00004c70: 0a20 2020 2020 2020 202d 2064 6572 6567  .        - dereg
+00004c80: 6973 7465 725f 6172 7261 795f 6675 6e63  ister_array_func
+00004c90: 7469 6f6e 5f74 7970 655f 636f 6d70 6174  tion_type_compat
+00004ca0: 6962 696c 6974 793a 2064 6572 6567 6973  ibility: deregis
+00004cb0: 7472 6174 696f 6e20 6f66 204e 756d 7079  tration of Numpy
+00004cc0: 2066 756e 6374 696f 6e20 7479 7065 2063   function type c
+00004cd0: 6f6d 7061 7469 6269 6c69 7479 206f 7665  ompatibility ove
+00004ce0: 7272 6964 650d 0a0d 0a20 2020 2020 2020  rride....       
+00004cf0: 2022 2222 0d0a 2020 2020 2020 2020 2320   """..        # 
+00004d00: 544f 444f 2064 6573 6967 6e20 636f 6e73  TODO design cons
+00004d10: 6964 6572 6174 696f 6e20 2d20 7573 696e  ideration - usin
+00004d20: 6720 6120 7369 6e67 6c65 2064 6963 7420  g a single dict 
+00004d30: 7769 7468 2074 7570 6c65 2074 7970 6520  with tuple type 
+00004d40: 636f 6d70 6174 6962 696c 6974 7920 616e  compatibility an
+00004d50: 6420 7265 6469 7265 6374 6564 2063 616c  d redirected cal
+00004d60: 6c61 626c 6573 0d0a 2020 2020 2020 2020  lables..        
+00004d70: 2320 7768 6572 6520 6120 6465 6661 756c  # where a defaul
+00004d80: 7420 7479 7065 2063 6f6d 7061 7469 6269  t type compatibi
+00004d90: 6c69 7479 2063 6865 636b 2063 616e 2062  lity check can b
+00004da0: 6520 7468 6520 6465 6661 756c 7420 7661  e the default va
+00004db0: 6c75 650d 0a20 2020 2020 2020 2023 2061  lue..        # a
+00004dc0: 2064 6963 7469 6f6e 6172 7920 7468 6174   dictionary that
+00004dd0: 206d 6170 7320 6e75 6d70 7920 6675 6e63   maps numpy func
+00004de0: 7469 6f6e 7320 746f 206f 7572 2063 7573  tions to our cus
+00004df0: 746f 6d20 7661 7269 616e 7473 0d0a 2020  tom variants..  
+00004e00: 2020 2020 2020 4841 4e44 4c45 445f 4655        HANDLED_FU
+00004e10: 4e43 5449 4f4e 533a 2044 6963 745b 6361  NCTIONS: Dict[ca
+00004e20: 6c6c 6162 6c65 2c20 6361 6c6c 6162 6c65  llable, callable
+00004e30: 5d20 3d20 7b7d 0d0a 2020 2020 2020 2020  ] = {}..        
+00004e40: 2222 2244 6963 7469 6f6e 6172 7920 6f66  """Dictionary of
+00004e50: 204e 756d 7079 2041 5049 2066 756e 6374   Numpy API funct
+00004e60: 696f 6e20 7769 7468 206f 7665 7272 6964  ion with overrid
+00004e70: 6465 6e20 6675 6e63 7469 6f6e 732e 2222  den functions.""
+00004e80: 220d 0a20 2020 2020 2020 2048 414e 444c  "..        HANDL
+00004e90: 4544 5f54 5950 455f 434f 4d50 4154 4942  ED_TYPE_COMPATIB
+00004ea0: 494c 4954 595f 4348 4543 4b3a 2044 6963  ILITY_CHECK: Dic
+00004eb0: 745b 6361 6c6c 6162 6c65 2c20 6361 6c6c  t[callable, call
+00004ec0: 6162 6c65 5d20 3d20 7b7d 0d0a 2020 2020  able] = {}..    
+00004ed0: 2020 2020 2222 2244 6963 7469 6f6e 6172      """Dictionar
+00004ee0: 7920 6f66 2074 7970 6520 636f 6d70 6174  y of type compat
+00004ef0: 6962 696c 6974 7920 6675 6e63 7469 6f6e  ibility function
+00004f00: 7320 7065 7220 6561 6368 204e 756d 7079  s per each Numpy
+00004f10: 2041 5049 206f 7665 7272 6964 6465 6e20   API overridden 
+00004f20: 6675 6e63 7469 6f6e 2e22 2222 0d0a 0d0a  function."""....
+00004f30: 2020 2020 2020 2020 4063 6c61 7373 6d65          @classme
+00004f40: 7468 6f64 0d0a 2020 2020 2020 2020 6465  thod..        de
+00004f50: 6620 6765 745f 6172 7261 795f 6675 6e63  f get_array_func
+00004f60: 7469 6f6e 2863 6c73 2c20 6e70 5f66 756e  tion(cls, np_fun
+00004f70: 6374 696f 6e3a 2043 616c 6c61 626c 6529  ction: Callable)
+00004f80: 202d 3e20 4f70 7469 6f6e 616c 5b43 616c   -> Optional[Cal
+00004f90: 6c61 626c 655d 3a0d 0a20 2020 2020 2020  lable]:..       
+00004fa0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00004fb0: 2020 2020 2020 4769 7665 6e20 7468 6520        Given the 
+00004fc0: 4e75 6d70 7920 6675 6e63 7469 6f6e 2c20  Numpy function, 
+00004fd0: 7265 7475 726e 7320 6f76 6572 7269 6464  returns overridd
+00004fe0: 656e 2061 7272 6179 2066 756e 6374 696f  en array functio
+00004ff0: 6e20 6966 2069 6d70 6c65 6d65 6e74 6564  n if implemented
+00005000: 2c20 6f74 6865 7277 6973 6520 4e6f 6e65  , otherwise None
+00005010: 2e0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
+00005020: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
+00005030: 2020 2020 2020 2020 202d 2d2d 2d2d 2d2d           -------
+00005040: 2d2d 2d0d 0a20 2020 2020 2020 2020 2020  ---..           
+00005050: 206e 705f 6675 6e63 7469 6f6e 3a20 6361   np_function: ca
+00005060: 6c6c 6162 6c65 0d0a 2020 2020 2020 2020  llable..        
+00005070: 2020 2020 2020 2020 5468 6520 6f76 6572          The over
+00005080: 7269 6464 656e 204e 756d 7079 2061 7272  ridden Numpy arr
+00005090: 6179 2066 756e 6374 696f 6e2e 0d0a 0d0a  ay function.....
+000050a0: 2020 2020 2020 2020 2020 2020 5265 7475              Retu
+000050b0: 726e 730d 0a20 2020 2020 2020 2020 2020  rns..           
+000050c0: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
+000050d0: 2020 2020 2020 6361 6c6c 6162 6c65 2c20        callable, 
+000050e0: 6f70 7469 6f6e 616c 0d0a 2020 2020 2020  optional..      
+000050f0: 2020 2020 2020 2020 2020 5468 6520 6f76            The ov
+00005100: 6572 7269 6464 656e 2066 756e 6374 696f  erridden functio
+00005110: 6e20 6173 2061 2063 616c 6c61 626c 6520  n as a callable 
+00005120: 6f72 204e 6f6e 6520 6966 2069 7427 7320  or None if it's 
+00005130: 6e6f 7420 696d 706c 656d 656e 7465 642e  not implemented.
+00005140: 0d0a 2020 2020 2020 2020 2020 2020 2222  ..            ""
+00005150: 220d 0a20 2020 2020 2020 2020 2020 2072  "..            r
+00005160: 6574 7572 6e20 636c 732e 4841 4e44 4c45  eturn cls.HANDLE
+00005170: 445f 4655 4e43 5449 4f4e 532e 6765 7428  D_FUNCTIONS.get(
+00005180: 6e70 5f66 756e 6374 696f 6e2c 204e 6f6e  np_function, Non
+00005190: 6529 0d0a 0d0a 2020 2020 2020 2020 4063  e)....        @c
+000051a0: 6c61 7373 6d65 7468 6f64 0d0a 2020 2020  lassmethod..    
+000051b0: 2020 2020 6465 6620 6765 745f 6172 7261      def get_arra
+000051c0: 795f 6675 6e63 7469 6f6e 5f74 7970 655f  y_function_type_
+000051d0: 636f 6d70 6174 6962 696c 6974 795f 6368  compatibility_ch
+000051e0: 6563 6b28 636c 732c 206e 705f 6675 6e63  eck(cls, np_func
+000051f0: 7469 6f6e 3a20 4361 6c6c 6162 6c65 2920  tion: Callable) 
+00005200: 2d3e 204f 7074 696f 6e61 6c5b 4361 6c6c  -> Optional[Call
+00005210: 6162 6c65 5d3a 0d0a 2020 2020 2020 2020  able]:..        
+00005220: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00005230: 2020 2020 2047 6976 656e 2074 6865 204e       Given the N
+00005240: 756d 7079 2066 756e 6374 696f 6e2c 2072  umpy function, r
+00005250: 6574 7572 6e73 2074 6865 2063 6f72 7265  eturns the corre
+00005260: 7370 6f6e 6469 6e67 2061 7272 6179 2066  sponding array f
+00005270: 756e 6374 696f 6e20 7479 7065 2063 6f6d  unction type com
+00005280: 7061 7469 6269 6c69 7479 2063 616c 6c61  patibility calla
+00005290: 626c 652c 206f 7468 6572 7769 7365 204e  ble, otherwise N
+000052a0: 6f6e 652e 0d0a 0d0a 2020 2020 2020 2020  one.....        
+000052b0: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
+000052c0: 2020 2020 2020 2020 2020 2020 2d2d 2d2d              ----
+000052d0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+000052e0: 2020 2020 6e70 5f66 756e 6374 696f 6e3a      np_function:
+000052f0: 2063 616c 6c61 626c 650d 0a20 2020 2020   callable..     
+00005300: 2020 2020 2020 2020 2020 2054 6865 206f             The o
+00005310: 7665 7272 6964 6465 6e20 4e75 6d70 7920  verridden Numpy 
+00005320: 6172 7261 7920 6675 6e63 7469 6f6e 2e0d  array function..
+00005330: 0a0d 0a20 2020 2020 2020 2020 2020 2052  ...            R
+00005340: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
+00005350: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
+00005360: 2020 2020 2020 2020 2063 616c 6c61 626c           callabl
+00005370: 652c 206f 7074 696f 6e61 6c0d 0a20 2020  e, optional..   
+00005380: 2020 2020 2020 2020 2020 2020 2054 6865               The
+00005390: 206f 7665 7272 6964 6465 6e20 7479 7065   overridden type
+000053a0: 2063 6f6d 7061 7469 6269 6c69 7479 2066   compatibility f
+000053b0: 756e 6374 696f 6e20 6173 2061 2063 616c  unction as a cal
+000053c0: 6c61 626c 6520 6f72 204e 6f6e 6520 6966  lable or None if
+000053d0: 2069 7427 7320 6e6f 7420 696d 706c 656d   it's not implem
+000053e0: 656e 7465 642e 0d0a 2020 2020 2020 2020  ented...        
+000053f0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00005400: 2020 2020 2072 6574 7572 6e20 636c 732e       return cls.
+00005410: 4841 4e44 4c45 445f 5459 5045 5f43 4f4d  HANDLED_TYPE_COM
+00005420: 5041 5449 4249 4c49 5459 5f43 4845 434b  PATIBILITY_CHECK
+00005430: 2e67 6574 286e 705f 6675 6e63 7469 6f6e  .get(np_function
+00005440: 2c20 4e6f 6e65 290d 0a0d 0a20 2020 2020  , None)....     
+00005450: 2020 2040 636c 6173 736d 6574 686f 640d     @classmethod.
+00005460: 0a20 2020 2020 2020 2064 6566 2072 6567  .        def reg
+00005470: 6973 7465 725f 6172 7261 795f 6675 6e63  ister_array_func
+00005480: 7469 6f6e 2863 6c73 2c20 6e70 5f66 756e  tion(cls, np_fun
+00005490: 6374 696f 6e3a 2043 616c 6c61 626c 6529  ction: Callable)
+000054a0: 202d 3e20 4361 6c6c 6162 6c65 3a0d 0a20   -> Callable:.. 
+000054b0: 2020 2020 2020 2020 2020 2022 2222 0d0a             """..
+000054c0: 2020 2020 2020 2020 2020 2020 2041 2066               A f
+000054d0: 756e 6374 696f 6e20 6465 636f 7261 746f  unction decorato
+000054e0: 7220 7768 6f73 6520 6172 6775 6d65 6e74  r whose argument
+000054f0: 2069 7320 7468 6520 4e75 6d70 7920 6675   is the Numpy fu
+00005500: 6e63 7469 6f6e 2074 6f20 6f76 6572 7269  nction to overri
+00005510: 6465 2061 6e64 2074 6865 2066 756e 6374  de and the funct
+00005520: 696f 6e20 7468 6174 2077 696c 6c20 6f76  ion that will ov
+00005530: 6572 7269 6465 2069 742e 0d0a 2020 2020  erride it...    
+00005540: 2020 2020 2020 2020 2054 6869 7320 7265           This re
+00005550: 6769 7374 6572 7320 7468 6520 606e 705f  gisters the `np_
+00005560: 6675 6e63 7469 6f6e 6020 7769 7468 2074  function` with t
+00005570: 6865 2066 756e 6374 696f 6e20 7468 6174  he function that
+00005580: 2069 7420 6465 636f 7261 7465 732e 0d0a   it decorates...
+00005590: 0d0a 2020 2020 2020 2020 2020 2020 5061  ..            Pa
+000055a0: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+000055b0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
+000055c0: 0d0a 2020 2020 2020 2020 2020 2020 6e70  ..            np
+000055d0: 5f66 756e 6374 696f 6e3a 2063 616c 6c61  _function: calla
+000055e0: 626c 650d 0a20 2020 2020 2020 2020 2020  ble..           
+000055f0: 2020 2020 2054 6865 206f 7665 7272 6964       The overrid
+00005600: 6465 6e20 4e75 6d70 7920 6172 7261 7920  den Numpy array 
+00005610: 6675 6e63 7469 6f6e 2e0d 0a0d 0a20 2020  function.....   
+00005620: 2020 2020 2020 2020 2052 6574 7572 6e73           Returns
+00005630: 0d0a 2020 2020 2020 2020 2020 2020 2d2d  ..            --
+00005640: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2020  -----..         
+00005650: 2020 2063 616c 6c61 626c 650d 0a20 2020     callable..   
+00005660: 2020 2020 2020 2020 2020 2020 2054 6865               The
+00005670: 2064 6563 6f72 6174 6f72 2074 6861 7420   decorator that 
+00005680: 7265 6769 7374 6572 7320 606e 705f 6675  registers `np_fu
+00005690: 6e63 7469 6f6e 6020 7769 7468 2074 6865  nction` with the
+000056a0: 2064 6563 6f72 6174 6564 2066 756e 6374   decorated funct
+000056b0: 696f 6e2e 0d0a 2020 2020 2020 2020 2020  ion...          
+000056c0: 2020 2222 220d 0a0d 0a20 2020 2020 2020    """....       
+000056d0: 2020 2020 2023 2040 7772 6170 7328 6e70       # @wraps(np
+000056e0: 5f66 756e 6374 696f 6e29 0d0a 2020 2020  _function)..    
+000056f0: 2020 2020 2020 2020 6465 6620 6465 636f          def deco
+00005700: 7261 746f 7228 6675 6e63 293a 0d0a 2020  rator(func):..  
+00005710: 2020 2020 2020 2020 2020 2020 2020 636c                cl
+00005720: 732e 4841 4e44 4c45 445f 4655 4e43 5449  s.HANDLED_FUNCTI
+00005730: 4f4e 535b 6e70 5f66 756e 6374 696f 6e5d  ONS[np_function]
+00005740: 203d 2066 756e 630d 0a20 2020 2020 2020   = func..       
+00005750: 2020 2020 2020 2020 2069 6620 6c6f 6767           if logg
+00005760: 6572 2e69 7345 6e61 626c 6564 466f 7228  er.isEnabledFor(
+00005770: 6c6f 6767 696e 672e 4445 4255 4729 3a0d  logging.DEBUG):.
+00005780: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005790: 2020 2020 206c 6f67 6765 722e 6465 6275       logger.debu
+000057a0: 6728 0d0a 2020 2020 2020 2020 2020 2020  g(..            
+000057b0: 2020 2020 2020 2020 2020 2020 6622 7b63              f"{c
+000057c0: 6c73 2e5f 5f6e 616d 655f 5f7d 2e72 6567  ls.__name__}.reg
+000057d0: 6973 7465 725f 6172 7261 795f 6675 6e63  ister_array_func
+000057e0: 7469 6f6e 3a20 7265 6769 7374 6572 6564  tion: registered
+000057f0: 207b 7265 7072 2866 756e 632e 5f5f 6e61   {repr(func.__na
+00005800: 6d65 5f5f 297d 2069 6e20 706c 6163 6520  me__)} in place 
+00005810: 6f66 207b 6e70 5f66 756e 6374 696f 6e2e  of {np_function.
+00005820: 5f5f 6e61 6d65 5f5f 7d22 0d0a 2020 2020  __name__}"..    
+00005830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005840: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00005850: 2020 2072 6574 7572 6e20 6675 6e63 0d0a     return func..
+00005860: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+00005870: 7475 726e 2064 6563 6f72 6174 6f72 0d0a  turn decorator..
+00005880: 0d0a 2020 2020 2020 2020 4063 6c61 7373  ..        @class
+00005890: 6d65 7468 6f64 0d0a 2020 2020 2020 2020  method..        
+000058a0: 6465 6620 7265 6769 7374 6572 5f61 7272  def register_arr
+000058b0: 6179 5f66 756e 6374 696f 6e5f 7479 7065  ay_function_type
+000058c0: 5f63 6f6d 7061 7469 6269 6c69 7479 2863  _compatibility(c
+000058d0: 6c73 2c20 6e70 5f66 756e 6374 696f 6e3a  ls, np_function:
+000058e0: 2043 616c 6c61 626c 6529 202d 3e20 4361   Callable) -> Ca
+000058f0: 6c6c 6162 6c65 3a0d 0a20 2020 2020 2020  llable:..       
+00005900: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00005910: 2020 2020 2020 5468 6973 2072 6567 6973        This regis
+00005920: 7465 7273 2074 6865 2074 7970 6520 636f  ters the type co
+00005930: 6d70 6174 6962 696c 6974 7920 6368 6563  mpatibility chec
+00005940: 6b20 666f 7220 7468 6520 606e 705f 6675  k for the `np_fu
+00005950: 6e63 7469 6f6e 6020 7769 7468 2074 6865  nction` with the
+00005960: 2066 756e 6374 696f 6e20 7468 6174 2069   function that i
+00005970: 7420 6465 636f 7261 7465 732e 0d0a 0d0a  t decorates.....
+00005980: 2020 2020 2020 2020 2020 2020 5061 7261              Para
+00005990: 6d65 7465 7273 0d0a 2020 2020 2020 2020  meters..        
+000059a0: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
+000059b0: 2020 2020 2020 2020 2020 2020 6e70 5f66              np_f
+000059c0: 756e 6374 696f 6e3a 2063 616c 6c61 626c  unction: callabl
+000059d0: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+000059e0: 2020 2054 6865 206f 7665 7272 6964 6465     The overridde
+000059f0: 6e20 4e75 6d70 7920 6172 7261 7920 6675  n Numpy array fu
+00005a00: 6e63 7469 6f6e 2e0d 0a0d 0a20 2020 2020  nction.....     
+00005a10: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+00005a20: 2020 2020 2020 2020 2020 2020 2d2d 2d2d              ----
+00005a30: 2d2d 2d0d 0a20 2020 2020 2020 2020 2020  ---..           
+00005a40: 2063 616c 6c61 626c 650d 0a20 2020 2020   callable..     
+00005a50: 2020 2020 2020 2020 2020 2054 6865 2064             The d
+00005a60: 6563 6f72 6174 6f72 2074 6861 7420 7265  ecorator that re
+00005a70: 6769 7374 6572 7320 7468 6520 7479 7065  gisters the type
+00005a80: 2063 6f6d 7061 7469 6269 6c69 7479 2063   compatibility c
+00005a90: 6865 636b 2066 6f72 2074 6865 2060 6e70  heck for the `np
+00005aa0: 5f66 756e 6374 696f 6e60 2077 6974 6820  _function` with 
+00005ab0: 7468 6520 6465 636f 7261 7465 6420 6675  the decorated fu
+00005ac0: 6e63 7469 6f6e 2e0d 0a20 2020 2020 2020  nction...       
+00005ad0: 2020 2020 2022 2222 0d0a 0d0a 2020 2020       """....    
+00005ae0: 2020 2020 2020 2020 2320 4077 7261 7073          # @wraps
+00005af0: 286e 705f 6675 6e63 7469 6f6e 290d 0a20  (np_function).. 
+00005b00: 2020 2020 2020 2020 2020 2064 6566 2064             def d
+00005b10: 6563 6f72 6174 6f72 2863 6865 636b 5f74  ecorator(check_t
+00005b20: 7970 655f 636f 6d70 6174 6962 696c 6974  ype_compatibilit
+00005b30: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
+00005b40: 2020 2020 2063 6c73 2e48 414e 444c 4544       cls.HANDLED
+00005b50: 5f54 5950 455f 434f 4d50 4154 4942 494c  _TYPE_COMPATIBIL
+00005b60: 4954 595f 4348 4543 4b5b 6e70 5f66 756e  ITY_CHECK[np_fun
+00005b70: 6374 696f 6e5d 203d 2063 6865 636b 5f74  ction] = check_t
+00005b80: 7970 655f 636f 6d70 6174 6962 696c 6974  ype_compatibilit
+00005b90: 790d 0a20 2020 2020 2020 2020 2020 2020  y..             
+00005ba0: 2020 2069 6620 6c6f 6767 6572 2e69 7345     if logger.isE
+00005bb0: 6e61 626c 6564 466f 7228 6c6f 6767 696e  nabledFor(loggin
+00005bc0: 672e 4445 4255 4729 3a0d 0a20 2020 2020  g.DEBUG):..     
+00005bd0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+00005be0: 6f67 6765 722e 6465 6275 6728 0d0a 2020  ogger.debug(..  
+00005bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005c00: 2020 2020 2020 6622 7b63 6c73 2e5f 5f6e        f"{cls.__n
+00005c10: 616d 655f 5f7d 2e72 6567 6973 7465 725f  ame__}.register_
+00005c20: 6172 7261 795f 6675 6e63 7469 6f6e 5f74  array_function_t
+00005c30: 7970 655f 636f 6d70 6174 6962 696c 6974  ype_compatibilit
+00005c40: 793a 2072 6567 6973 7465 7265 6420 7479  y: registered ty
+00005c50: 7065 2063 6f6d 7061 7469 6269 6c69 7479  pe compatibility
+00005c60: 2063 6865 636b 207b 7265 7072 2863 6865   check {repr(che
+00005c70: 636b 5f74 7970 655f 636f 6d70 6174 6962  ck_type_compatib
+00005c80: 696c 6974 7929 7d20 666f 7220 6172 7261  ility)} for arra
+00005c90: 7920 6675 6e63 7469 6f6e 207b 6e70 5f66  y function {np_f
+00005ca0: 756e 6374 696f 6e2e 5f5f 6e61 6d65 5f5f  unction.__name__
+00005cb0: 7d22 0d0a 2020 2020 2020 2020 2020 2020  }"..            
+00005cc0: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
+00005cd0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00005ce0: 6e20 6368 6563 6b5f 7479 7065 5f63 6f6d  n check_type_com
+00005cf0: 7061 7469 6269 6c69 7479 0d0a 0d0a 2020  patibility....  
+00005d00: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00005d10: 2064 6563 6f72 6174 6f72 0d0a 0d0a 2020   decorator....  
+00005d20: 2020 2020 2020 4063 6c61 7373 6d65 7468        @classmeth
+00005d30: 6f64 0d0a 2020 2020 2020 2020 6465 6620  od..        def 
+00005d40: 6465 7265 6769 7374 6572 5f61 7272 6179  deregister_array
+00005d50: 5f66 756e 6374 696f 6e28 636c 732c 206e  _function(cls, n
+00005d60: 705f 6675 6e63 7469 6f6e 3a20 4361 6c6c  p_function: Call
+00005d70: 6162 6c65 2920 2d3e 204e 6f6e 653a 0d0a  able) -> None:..
+00005d80: 2020 2020 2020 2020 2020 2020 2222 220d              """.
+00005d90: 0a20 2020 2020 2020 2020 2020 2044 6572  .            Der
+00005da0: 6567 6973 7472 6174 696f 6e20 6f66 2074  egistration of t
+00005db0: 6865 204e 756d 7079 2066 756e 6374 696f  he Numpy functio
+00005dc0: 6e20 616e 6420 7479 7065 2063 6f6d 7061  n and type compa
+00005dd0: 7469 6269 6c69 7479 206f 7665 7272 6964  tibility overrid
+00005de0: 652e 0d0a 0d0a 2020 2020 2020 2020 2020  e.....          
+00005df0: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
+00005e00: 2020 2020 2020 2020 2020 2d2d 2d2d 2d2d            ------
+00005e10: 2d2d 2d2d 0d0a 2020 2020 2020 2020 2020  ----..          
+00005e20: 2020 6e70 5f66 756e 6374 696f 6e3a 2063    np_function: c
+00005e30: 616c 6c61 626c 650d 0a20 2020 2020 2020  allable..       
+00005e40: 2020 2020 2020 2020 2054 6865 206f 7665           The ove
+00005e50: 7272 6964 6465 6e20 4e75 6d70 7920 6172  rridden Numpy ar
+00005e60: 7261 7920 6675 6e63 7469 6f6e 2e0d 0a20  ray function... 
+00005e70: 2020 2020 2020 2020 2020 2022 2222 0d0a             """..
+00005e80: 2020 2020 2020 2020 2020 2020 6966 2063              if c
+00005e90: 6c73 2e67 6574 5f61 7272 6179 5f66 756e  ls.get_array_fun
+00005ea0: 6374 696f 6e28 6e70 5f66 756e 6374 696f  ction(np_functio
+00005eb0: 6e29 2069 7320 6e6f 7420 4e6f 6e65 3a0d  n) is not None:.
+00005ec0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005ed0: 2069 6620 6c6f 6767 6572 2e69 7345 6e61   if logger.isEna
+00005ee0: 626c 6564 466f 7228 6c6f 6767 696e 672e  bledFor(logging.
+00005ef0: 4445 4255 4729 3a0d 0a20 2020 2020 2020  DEBUG):..       
+00005f00: 2020 2020 2020 2020 2020 2020 206c 6f67               log
+00005f10: 6765 722e 6465 6275 6728 6622 7b63 6c73  ger.debug(f"{cls
+00005f20: 2e5f 5f6e 616d 655f 5f7d 2e64 6572 6567  .__name__}.dereg
+00005f30: 6973 7465 725f 6172 7261 795f 6675 6e63  ister_array_func
+00005f40: 7469 6f6e 3a20 6465 7265 6769 7374 6572  tion: deregister
+00005f50: 6564 207b 7265 7072 286e 705f 6675 6e63  ed {repr(np_func
+00005f60: 7469 6f6e 2e5f 5f6e 616d 655f 5f29 7d22  tion.__name__)}"
+00005f70: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00005f80: 2020 2064 656c 2063 6c73 2e48 414e 444c     del cls.HANDL
+00005f90: 4544 5f46 554e 4354 494f 4e53 5b6e 705f  ED_FUNCTIONS[np_
+00005fa0: 6675 6e63 7469 6f6e 5d0d 0a0d 0a20 2020  function]....   
+00005fb0: 2020 2020 2040 636c 6173 736d 6574 686f       @classmetho
+00005fc0: 640d 0a20 2020 2020 2020 2064 6566 2064  d..        def d
+00005fd0: 6572 6567 6973 7465 725f 6172 7261 795f  eregister_array_
+00005fe0: 6675 6e63 7469 6f6e 5f74 7970 655f 636f  function_type_co
+00005ff0: 6d70 6174 6962 696c 6974 7928 636c 732c  mpatibility(cls,
+00006000: 206e 705f 6675 6e63 7469 6f6e 3a20 4361   np_function: Ca
+00006010: 6c6c 6162 6c65 2920 2d3e 204e 6f6e 653a  llable) -> None:
+00006020: 0d0a 2020 2020 2020 2020 2020 2020 2222  ..            ""
+00006030: 220d 0a20 2020 2020 2020 2020 2020 2044  "..            D
+00006040: 6572 6567 6973 7472 6174 696f 6e20 6f66  eregistration of
+00006050: 2074 6865 204e 756d 7079 2066 756e 6374   the Numpy funct
+00006060: 696f 6e20 616e 6420 7479 7065 2063 6f6d  ion and type com
+00006070: 7061 7469 6269 6c69 7479 206f 7665 7272  patibility overr
+00006080: 6964 652e 0d0a 0d0a 2020 2020 2020 2020  ide.....        
+00006090: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
+000060a0: 2020 2020 2020 2020 2020 2020 2d2d 2d2d              ----
+000060b0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+000060c0: 2020 2020 6e70 5f66 756e 6374 696f 6e3a      np_function:
+000060d0: 2063 616c 6c61 626c 650d 0a20 2020 2020   callable..     
+000060e0: 2020 2020 2020 2020 2020 2054 6865 206f             The o
+000060f0: 7665 7272 6964 6465 6e20 4e75 6d70 7920  verridden Numpy 
+00006100: 6172 7261 7920 6675 6e63 7469 6f6e 2e0d  array function..
+00006110: 0a20 2020 2020 2020 2020 2020 2022 2222  .            """
+00006120: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00006130: 2063 6c73 2e48 414e 444c 4544 5f54 5950   cls.HANDLED_TYP
+00006140: 455f 434f 4d50 4154 4942 494c 4954 595f  E_COMPATIBILITY_
+00006150: 4348 4543 4b2e 6765 7428 6e70 5f66 756e  CHECK.get(np_fun
+00006160: 6374 696f 6e2c 204e 6f6e 6529 2069 7320  ction, None) is 
+00006170: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+00006180: 2020 2020 2020 2020 2020 2069 6620 6c6f             if lo
+00006190: 6767 6572 2e69 7345 6e61 626c 6564 466f  gger.isEnabledFo
+000061a0: 7228 6c6f 6767 696e 672e 4445 4255 4729  r(logging.DEBUG)
+000061b0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000061c0: 2020 2020 2020 206c 6f67 6765 722e 6465         logger.de
+000061d0: 6275 6728 0d0a 2020 2020 2020 2020 2020  bug(..          
+000061e0: 2020 2020 2020 2020 2020 2020 2020 6622                f"
+000061f0: 7b63 6c73 2e5f 5f6e 616d 655f 5f7d 2e64  {cls.__name__}.d
+00006200: 6572 6567 6973 7465 725f 6172 7261 795f  eregister_array_
+00006210: 6675 6e63 7469 6f6e 5f74 7970 655f 636f  function_type_co
+00006220: 6d70 6174 6962 696c 6974 793a 2064 6572  mpatibility: der
+00006230: 6567 6973 7465 7265 6420 7b72 6570 7228  egistered {repr(
+00006240: 6e70 5f66 756e 6374 696f 6e2e 5f5f 6e61  np_function.__na
+00006250: 6d65 5f5f 297d 220d 0a20 2020 2020 2020  me__)}"..       
+00006260: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+00006270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006280: 6465 6c20 636c 732e 4841 4e44 4c45 445f  del cls.HANDLED_
+00006290: 5459 5045 5f43 4f4d 5041 5449 4249 4c49  TYPE_COMPATIBILI
+000062a0: 5459 5f43 4845 434b 5b6e 705f 6675 6e63  TY_CHECK[np_func
+000062b0: 7469 6f6e 5d0d 0a0d 0a20 2020 2020 2020  tion]....       
+000062c0: 2040 636c 6173 736d 6574 686f 640d 0a20   @classmethod.. 
+000062d0: 2020 2020 2020 2064 6566 2064 6572 6567         def dereg
+000062e0: 6973 7465 7228 636c 732c 206e 705f 6675  ister(cls, np_fu
+000062f0: 6e63 7469 6f6e 3a20 4361 6c6c 6162 6c65  nction: Callable
+00006300: 2920 2d3e 204e 6f6e 653a 0d0a 2020 2020  ) -> None:..    
+00006310: 2020 2020 2020 2020 636c 732e 6465 7265          cls.dere
+00006320: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
+00006330: 6374 696f 6e28 6e70 5f66 756e 6374 696f  ction(np_functio
+00006340: 6e29 0d0a 2020 2020 2020 2020 2020 2020  n)..            
+00006350: 636c 732e 6465 7265 6769 7374 6572 5f61  cls.deregister_a
+00006360: 7272 6179 5f66 756e 6374 696f 6e5f 7479  rray_function_ty
+00006370: 7065 5f63 6f6d 7061 7469 6269 6c69 7479  pe_compatibility
+00006380: 286e 705f 6675 6e63 7469 6f6e 290d 0a0d  (np_function)...
+00006390: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+000063a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000063b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000063c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000063d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000063e0: 2d0d 0a20 2020 2040 636c 6173 736d 6574  -..    @classmet
+000063f0: 686f 640d 0a20 2020 2064 6566 205f 706f  hod..    def _po
+00006400: 7373 6962 6c79 5f77 6172 6e28 636c 732c  ssibly_warn(cls,
+00006410: 2077 6172 6e69 6e67 5f73 7472 696e 673a   warning_string:
+00006420: 2073 7472 2920 2d3e 204f 7074 696f 6e61   str) -> Optiona
+00006430: 6c5b 626f 6f6c 5d3a 0d0a 2020 2020 2020  l[bool]:..      
+00006440: 2020 6966 2063 6c73 2e57 6172 6e69 6e67    if cls.Warning
+00006450: 4c65 7665 6c20 3d3d 2030 3a0d 0a20 2020  Level == 0:..   
+00006460: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00006470: 4661 6c73 650d 0a20 2020 2020 2020 2069  False..        i
+00006480: 6620 636c 732e 5761 726e 696e 674c 6576  f cls.WarningLev
+00006490: 656c 203d 3d20 313a 0d0a 2020 2020 2020  el == 1:..      
+000064a0: 2020 2020 2020 7761 726e 696e 6773 2e77        warnings.w
+000064b0: 6172 6e28 7761 726e 696e 675f 7374 7269  arn(warning_stri
+000064c0: 6e67 290d 0a20 2020 2020 2020 2020 2020  ng)..           
+000064d0: 2072 6574 7572 6e20 5472 7565 0d0a 2020   return True..  
+000064e0: 2020 2020 2020 7261 6973 6520 5479 7065        raise Type
+000064f0: 4572 726f 7228 7761 726e 696e 675f 7374  Error(warning_st
+00006500: 7269 6e67 290d 0a0d 0a20 2020 2023 202d  ring)....    # -
+00006510: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006520: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006530: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006540: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006550: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
+00006560: 6566 205f 5f6e 6577 5f5f 2863 6c73 2c20  ef __new__(cls, 
+00006570: 6172 722c 202a 2a6b 7761 7267 7329 202d  arr, **kwargs) -
+00006580: 3e20 4661 7374 4172 7261 793a 0d0a 2020  > FastArray:..  
+00006590: 2020 2020 2020 616c 6c6f 775f 756e 6963        allow_unic
+000065a0: 6f64 6520 3d20 6b77 6172 6773 2e67 6574  ode = kwargs.get
+000065b0: 2822 756e 6963 6f64 6522 2c20 4661 6c73  ("unicode", Fals
+000065c0: 6529 0d0a 2020 2020 2020 2020 7472 793a  e)..        try:
+000065d0: 0d0a 2020 2020 2020 2020 2020 2020 6465  ..            de
+000065e0: 6c20 6b77 6172 6773 5b22 756e 6963 6f64  l kwargs["unicod
+000065f0: 6522 5d0d 0a20 2020 2020 2020 2065 7863  e"]..        exc
+00006600: 6570 743a 0d0a 2020 2020 2020 2020 2020  ept:..          
+00006610: 2020 7061 7373 0d0a 2020 2020 2020 2020    pass..        
+00006620: 2320 4966 2061 6c72 6561 6479 2061 206e  # If already a n
+00006630: 756d 7079 2061 7272 6179 206e 6f20 6e65  umpy array no ne
+00006640: 6564 2074 6f20 6361 6c6c 2061 7361 6e79  ed to call asany
+00006650: 0d0a 2020 2020 2020 2020 6966 2069 7369  ..        if isi
+00006660: 6e73 7461 6e63 6528 6172 722c 206e 702e  nstance(arr, np.
+00006670: 6e64 6172 7261 7929 2061 6e64 206c 656e  ndarray) and len
+00006680: 286b 7761 7267 7329 203d 3d20 303a 0d0a  (kwargs) == 0:..
+00006690: 2020 2020 2020 2020 2020 2020 696e 7374              inst
+000066a0: 616e 6365 203d 2061 7272 0d0a 2020 2020  ance = arr..    
+000066b0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+000066c0: 7461 6e63 6528 696e 7374 616e 6365 2c20  tance(instance, 
+000066d0: 636c 7329 2061 6e64 2069 6e73 7461 6e63  cls) and instanc
+000066e0: 652e 6474 7970 652e 6368 6172 2021 3d20  e.dtype.char != 
+000066f0: 2255 223a 0d0a 2020 2020 2020 2020 2020  "U":..          
+00006700: 2020 2020 2020 6966 2069 6e73 7461 6e63        if instanc
+00006710: 652e 6474 7970 652e 6368 6172 206e 6f74  e.dtype.char not
+00006720: 2069 6e20 4e75 6d70 7943 6861 7254 7970   in NumpyCharTyp
+00006730: 6573 2e53 7570 706f 7274 6564 3a0d 0a20  es.Supported:.. 
+00006740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006750: 2020 2063 6c73 2e5f 706f 7373 6962 6c79     cls._possibly
+00006760: 5f77 6172 6e28 0d0a 2020 2020 2020 2020  _warn(..        
+00006770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006780: 6622 4661 7374 4172 7261 7920 636f 6e74  f"FastArray cont
+00006790: 6169 6e73 2061 6e20 756e 7375 7070 6f72  ains an unsuppor
+000067a0: 7465 6420 7479 7065 2027 7b69 6e73 7461  ted type '{insta
+000067b0: 6e63 652e 6474 7970 657d 272e 2020 5072  nce.dtype}'.  Pr
+000067c0: 6f62 6c65 6d73 206d 6179 206f 6363 7572  oblems may occur
+000067d0: 2e20 2043 6f6e 7369 6465 7220 6361 7465  .  Consider cate
+000067e0: 676f 7269 6361 6c73 2e22 0d0a 2020 2020  goricals."..    
+000067f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006800: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00006810: 2020 2023 2069 6620 616c 7265 6164 7920     # if already 
+00006820: 6120 4661 7374 4172 7261 792c 2064 6f20  a FastArray, do 
+00006830: 6e6f 7420 7265 7772 6170 2074 6869 730d  not rewrap this.
+00006840: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006850: 2072 6574 7572 6e20 696e 7374 616e 6365   return instance
+00006860: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
+00006870: 0a20 2020 2020 2020 2020 2020 2023 2066  .            # f
+00006880: 6c69 7020 7468 6520 6c69 7374 206f 7220  lip the list or 
+00006890: 6f74 6865 7220 6f62 6a65 6374 2074 6f20  other object to 
+000068a0: 6120 6e75 6d70 7920 6172 7261 790d 0a20  a numpy array.. 
+000068b0: 2020 2020 2020 2020 2020 2069 6e73 7461             insta
+000068c0: 6e63 6520 3d20 6e70 2e61 7361 6e79 6172  nce = np.asanyar
+000068d0: 7261 7928 6172 722c 202a 2a6b 7761 7267  ray(arr, **kwarg
+000068e0: 7329 0d0a 0d0a 2020 2020 2020 2020 6966  s)....        if
+000068f0: 206e 6f74 2061 6c6c 6f77 5f75 6e69 636f   not allow_unico
+00006900: 6465 2061 6e64 2069 6e73 7461 6e63 652e  de and instance.
+00006910: 6474 7970 652e 6368 6172 203d 3d20 2255  dtype.char == "U
+00006920: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+00006930: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+00006940: 2020 2020 2020 696e 7374 616e 6365 203d        instance =
+00006950: 206e 702e 6173 6172 7261 7928 696e 7374   np.asarray(inst
+00006960: 616e 6365 2c20 6474 7970 653d 2253 2229  ance, dtype="S")
+00006970: 0d0a 2020 2020 2020 2020 2020 2020 6578  ..            ex
+00006980: 6365 7074 3a0d 0a20 2020 2020 2020 2020  cept:..         
+00006990: 2020 2020 2020 2070 6173 730d 0a0d 0a20         pass.... 
+000069a0: 2020 2020 2020 2069 6620 6c65 6e28 696e         if len(in
+000069b0: 7374 616e 6365 2e73 6861 7065 2920 3d3d  stance.shape) ==
+000069c0: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
+000069d0: 2069 6620 696e 7374 616e 6365 2e64 7479   if instance.dty
+000069e0: 7065 2e63 6861 7220 696e 204e 756d 7079  pe.char in Numpy
+000069f0: 4368 6172 5479 7065 732e 5375 7070 6f72  CharTypes.Suppor
+00006a00: 7465 643a 0d0a 2020 2020 2020 2020 2020  ted:..          
+00006a10: 2020 2020 2020 696e 7374 616e 6365 203d        instance =
+00006a20: 206e 702e 6173 616e 7961 7272 6179 285b   np.asanyarray([
+00006a30: 696e 7374 616e 6365 5d2c 202a 2a6b 7761  instance], **kwa
+00006a40: 7267 7329 0d0a 2020 2020 2020 2020 2020  rgs)..          
+00006a50: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00006a60: 2020 2020 2020 2020 2023 206e 702e 6173           # np.as
+00006a70: 6172 7261 7920 6f6e 2061 2073 6574 2077  array on a set w
+00006a80: 696c 6c20 7265 7475 726e 2061 6e20 6f62  ill return an ob
+00006a90: 6a65 6374 206f 6620 310d 0a20 2020 2020  ject of 1..     
+00006aa0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+00006ab0: 696e 7374 616e 6365 2861 7272 2c20 7365  instance(arr, se
+00006ac0: 7429 3a0d 0a20 2020 2020 2020 2020 2020  t):..           
+00006ad0: 2020 2020 2020 2020 2069 6e73 7461 6e63           instanc
+00006ae0: 6520 3d20 6e70 2e61 7361 7272 6179 286c  e = np.asarray(l
+00006af0: 6973 7428 6172 7229 2c20 2a2a 6b77 6172  ist(arr), **kwar
+00006b00: 6773 290d 0a20 2020 2020 2020 2020 2020  gs)..           
+00006b10: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00006b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006b30: 7261 6973 6520 5479 7065 4572 726f 7228  raise TypeError(
+00006b40: 6622 4661 7374 4172 7261 7920 6361 6e6e  f"FastArray cann
+00006b50: 6f74 2069 6e69 7469 616c 697a 6520 7b61  ot initialize {a
+00006b60: 7272 7d22 290d 0a0d 0a20 2020 2020 2020  rr}")....       
+00006b70: 2069 6620 696e 7374 616e 6365 2e6e 6469   if instance.ndi
+00006b80: 6d20 3e20 313a 0d0a 2020 2020 2020 2020  m > 1:..        
+00006b90: 2020 2020 2320 6f6e 6c79 206f 6e65 2064      # only one d
+00006ba0: 696d 656e 7369 6f6e 2063 616e 2062 6520  imension can be 
+00006bb0: 6772 6561 7465 7220 7468 616e 206f 6e65  greater than one
+00006bc0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00006bd0: 2063 6c73 2e5f 6368 6563 6b5f 6e64 696d   cls._check_ndim
+00006be0: 2869 6e73 7461 6e63 6529 203e 2031 3a0d  (instance) > 1:.
+00006bf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006c00: 2063 6c73 2e5f 706f 7373 6962 6c79 5f77   cls._possibly_w
+00006c10: 6172 6e28 4661 7374 4172 7261 792e 5761  arn(FastArray.Wa
+00006c20: 726e 696e 6744 6963 745b 226d 756c 7469  rningDict["multi
+00006c30: 706c 655f 6469 6d65 6e73 696f 6e73 225d  ple_dimensions"]
+00006c40: 2e66 6f72 6d61 7428 696e 7374 616e 6365  .format(instance
+00006c50: 2e73 6861 7065 2929 0d0a 2020 2020 2020  .shape))..      
+00006c60: 2020 2020 2020 2020 2020 2320 7761 726e            # warn
+00006c70: 696e 6773 2e77 6172 6e28 6622 4661 7374  ings.warn(f"Fast
+00006c80: 4172 7261 7920 636f 6e74 6169 6e73 2074  Array contains t
+00006c90: 776f 206f 7220 6d6f 7265 2064 696d 656e  wo or more dimen
+00006ca0: 7369 6f6e 7320 6772 6561 7465 7220 7468  sions greater th
+00006cb0: 616e 206f 6e65 202d 2073 6861 7065 3a7b  an one - shape:{
+00006cc0: 696e 7374 616e 6365 2e73 6861 7065 7d2e  instance.shape}.
+00006cd0: 2020 5072 6f62 6c65 6d73 206d 6179 206f    Problems may o
+00006ce0: 6363 7572 2e22 290d 0a20 2020 2020 2020  ccur.")..       
+00006cf0: 2065 6c69 6620 6e6f 7420 2869 6e73 7461   elif not (insta
+00006d00: 6e63 652e 666c 6167 732e 665f 636f 6e74  nce.flags.f_cont
+00006d10: 6967 756f 7573 206f 7220 696e 7374 616e  iguous or instan
+00006d20: 6365 2e66 6c61 6773 2e63 5f63 6f6e 7469  ce.flags.c_conti
+00006d30: 6775 6f75 7329 3a0d 0a20 2020 2020 2020  guous):..       
+00006d40: 2020 2020 2023 2063 6f70 7920 7368 6f75       # copy shou
+00006d50: 6c64 2065 6c69 6d69 6e61 7465 2073 7472  ld eliminate str
+00006d60: 6964 6573 2070 726f 626c 656d 0d0a 2020  ides problem..  
+00006d70: 2020 2020 2020 2020 2020 696e 7374 616e            instan
+00006d80: 6365 203d 2069 6e73 7461 6e63 652e 636f  ce = instance.co
+00006d90: 7079 2829 0d0a 2020 2020 2020 2020 2020  py()..          
+00006da0: 2020 636c 732e 5f70 6f73 7369 626c 795f    cls._possibly_
+00006db0: 7761 726e 2866 2246 6173 7441 7272 6179  warn(f"FastArray
+00006dc0: 2069 6e69 7469 616c 697a 6564 2077 6974   initialized wit
+00006dd0: 6820 7374 7269 6465 732e 2229 0d0a 0d0a  h strides.")....
+00006de0: 2020 2020 2020 2020 2320 666f 7220 6172          # for ar
+00006df0: 7261 7973 2074 6861 7420 6361 6e20 6361  rays that can ca
+00006e00: 7573 6520 7072 6f62 6c65 6d73 2062 7574  use problems but
+00006e10: 2077 6520 616c 6c6f 7720 6e6f 770d 0a20   we allow now.. 
+00006e20: 2020 2020 2020 2069 6620 636c 732e 4e6f         if cls.No
+00006e30: 546f 6c65 7261 6e63 653a 0d0a 2020 2020  Tolerance:..    
+00006e40: 2020 2020 2020 2020 6966 206e 6f74 2028          if not (
+00006e50: 696e 7374 616e 6365 2e66 6c61 6773 2e66  instance.flags.f
+00006e60: 5f63 6f6e 7469 6775 6f75 7320 6f72 2069  _contiguous or i
+00006e70: 6e73 7461 6e63 652e 666c 6167 732e 635f  nstance.flags.c_
+00006e80: 636f 6e74 6967 756f 7573 293a 0d0a 2020  contiguous):..  
+00006e90: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00006ea0: 636f 7079 2073 686f 756c 6420 656c 696d  copy should elim
+00006eb0: 696e 6174 6520 7374 7269 6465 7320 7072  inate strides pr
+00006ec0: 6f62 6c65 6d0d 0a20 2020 2020 2020 2020  oblem..         
+00006ed0: 2020 2020 2020 2069 6e73 7461 6e63 6520         instance 
+00006ee0: 3d20 696e 7374 616e 6365 2e63 6f70 7928  = instance.copy(
+00006ef0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00006f00: 2020 2063 6c73 2e5f 706f 7373 6962 6c79     cls._possibly
+00006f10: 5f77 6172 6e28 6622 4661 7374 4172 7261  _warn(f"FastArra
+00006f20: 7920 696e 6974 6961 6c69 7a65 6420 7769  y initialized wi
+00006f30: 7468 2073 7472 6964 6573 2e22 290d 0a0d  th strides.")...
+00006f40: 0a20 2020 2020 2020 2069 6620 696e 7374  .        if inst
+00006f50: 616e 6365 2e64 7479 7065 2e63 6861 7220  ance.dtype.char 
+00006f60: 6e6f 7420 696e 204e 756d 7079 4368 6172  not in NumpyChar
+00006f70: 5479 7065 732e 5375 7070 6f72 7465 643a  Types.Supported:
+00006f80: 0d0a 2020 2020 2020 2020 2020 2020 636c  ..            cl
+00006f90: 732e 5f70 6f73 7369 626c 795f 7761 726e  s._possibly_warn
+00006fa0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00006fb0: 2020 2066 2246 6173 7441 7272 6179 2063     f"FastArray c
+00006fc0: 6f6e 7461 696e 7320 616e 2075 6e73 7570  ontains an unsup
+00006fd0: 706f 7274 6564 2074 7970 6520 277b 696e  ported type '{in
+00006fe0: 7374 616e 6365 2e64 7479 7065 7d27 2e20  stance.dtype}'. 
+00006ff0: 2050 726f 626c 656d 7320 6d61 7920 6f63   Problems may oc
+00007000: 6375 722e 2020 436f 6e73 6964 6572 2063  cur.  Consider c
+00007010: 6174 6567 6f72 6963 616c 732e 220d 0a20  ategoricals.".. 
+00007020: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
+00007030: 2020 2020 2020 2020 7265 7475 726e 2069          return i
+00007040: 6e73 7461 6e63 652e 7669 6577 2863 6c73  nstance.view(cls
+00007050: 290d 0a0d 0a20 2020 2064 6566 205f 5f61  )....    def __a
+00007060: 7272 6179 5f66 696e 616c 697a 655f 5f28  rray_finalize__(
+00007070: 7365 6c66 2c20 6f62 6a29 3a0d 0a20 2020  self, obj):..   
+00007080: 2020 2020 2022 2222 4669 6e61 6c69 7a65       """Finalize
+00007090: 7320 7365 6c66 2066 726f 6d20 6f74 6865  s self from othe
+000070a0: 722c 2063 616c 6c65 6420 6173 2070 6172  r, called as par
+000070b0: 7420 6f66 206e 6461 7272 6179 2e5f 5f6e  t of ndarray.__n
+000070c0: 6577 5f5f 2829 2222 220d 0a20 2020 2020  ew__()"""..     
+000070d0: 2020 2069 6620 6f62 6a20 6973 204e 6f6e     if obj is Non
+000070e0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+000070f0: 7265 7475 726e 0d0a 2020 2020 2020 2020  return..        
+00007100: 6672 6f6d 5f70 6565 7220 3d20 6973 696e  from_peer = isin
+00007110: 7374 616e 6365 286f 626a 2c20 4661 7374  stance(obj, Fast
+00007120: 4172 7261 7929 0d0a 2020 2020 2020 2020  Array)..        
+00007130: 6966 2066 726f 6d5f 7065 6572 2061 6e64  if from_peer and
+00007140: 2068 6173 6174 7472 286f 626a 2c20 225f   hasattr(obj, "_
+00007150: 6e61 6d65 2229 3a0d 0a20 2020 2020 2020  name"):..       
+00007160: 2020 2020 2073 656c 662e 5f6e 616d 6520       self._name 
+00007170: 3d20 6f62 6a2e 5f6e 616d 650d 0a0d 0a20  = obj._name.... 
+00007180: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+00007190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000071a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000071b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000071c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
+000071d0: 0a20 2020 2064 6566 205f 5f72 6564 7563  .    def __reduc
+000071e0: 655f 5f28 7365 6c66 293a 0d0a 2020 2020  e__(self):..    
+000071f0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00007200: 2055 7365 6420 666f 7220 7069 636b 6c69   Used for pickli
+00007210: 6e67 2e0d 0a20 2020 2020 2020 2046 6f72  ng...        For
+00007220: 206a 7573 7420 6120 4661 7374 4172 7261   just a FastArra
+00007230: 7920 7765 2070 6173 7320 6261 636b 2074  y we pass back t
+00007240: 6865 2076 6965 7720 6f66 2074 6865 206e  he view of the n
+00007250: 702e 6e64 6172 7261 792c 2077 6869 6368  p.ndarray, which
+00007260: 2074 6865 6e20 6b6e 6f77 7320 686f 7720   then knows how 
+00007270: 746f 2070 6963 6b6c 6520 6974 7365 6c66  to pickle itself
+00007280: 2e0d 0a20 2020 2020 2020 204e 4f54 453a  ...        NOTE:
+00007290: 2049 2074 6869 6e6b 2074 6865 7265 2069   I think there i
+000072a0: 7320 6120 6661 7374 6572 2077 6179 2e2e  s a faster way..
+000072b0: 2070 6f73 7369 626c 6520 7265 7475 726e   possible return
+000072c0: 696e 6720 6120 6279 7465 2073 7472 696e  ing a byte strin
+000072d0: 672e 0d0a 2020 2020 2020 2020 2222 220d  g...        """.
+000072e0: 0a20 2020 2020 2020 2063 6c73 203d 2074  .        cls = t
+000072f0: 7970 6528 7365 6c66 290d 0a0d 0a20 2020  ype(self)....   
+00007300: 2020 2020 2023 2063 6865 636b 2069 6620       # check if 
+00007310: 7375 6263 6c61 7373 6564 2072 6f75 7469  subclassed routi
+00007320: 6e65 206b 6e6f 7773 2068 6f77 2074 6f20  ne knows how to 
+00007330: 7365 7269 616c 697a 6520 6974 7365 6c66  serialize itself
+00007340: 0d0a 2020 2020 2020 2020 6966 2068 6173  ..        if has
+00007350: 6174 7472 2873 656c 662c 2022 5f62 7569  attr(self, "_bui
+00007360: 6c64 5f73 6473 5f6d 6574 615f 6461 7461  ld_sds_meta_data
+00007370: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
+00007380: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+00007390: 2020 2020 2020 206e 616d 6520 3d20 7365         name = se
+000073a0: 6c66 2e5f 6e61 6d65 0d0a 2020 2020 2020  lf._name..      
+000073b0: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
+000073c0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+000073d0: 616d 6520 3d20 2275 6e6b 6e6f 776e 220d  ame = "unknown".
+000073e0: 0a0d 0a20 2020 2020 2020 2020 2020 2074  ...            t
+000073f0: 7570 7320 3d20 7365 6c66 2e5f 6275 696c  ups = self._buil
+00007400: 645f 7364 735f 6d65 7461 5f64 6174 6128  d_sds_meta_data(
+00007410: 6e61 6d65 290d 0a20 2020 2020 2020 2020  name)..         
+00007420: 2020 2072 6574 7572 6e20 2863 6c73 2e5f     return (cls._
+00007430: 6c6f 6164 5f66 726f 6d5f 7364 735f 6d65  load_from_sds_me
+00007440: 7461 5f64 6174 612c 2028 6e61 6d65 2c20  ta_data, (name, 
+00007450: 7365 6c66 2e76 6965 7728 4661 7374 4172  self.view(FastAr
+00007460: 7261 7929 2c20 7475 7073 5b31 5d2c 2074  ray), tups[1], t
+00007470: 7570 735b 305d 2929 0d0a 0d0a 2020 2020  ups[0]))....    
+00007480: 2020 2020 2320 7365 7420 746f 2074 7275      # set to tru
+00007490: 6520 746f 2074 7572 6e20 636f 6d70 7265  e to turn compre
+000074a0: 7373 696f 6e20 6f6e 0d0a 2020 2020 2020  ssion on..      
+000074b0: 2020 6966 2063 6c73 2e43 6f6d 7072 6573    if cls.Compres
+000074c0: 7350 6963 6b6c 6520 616e 6420 6c65 6e28  sPickle and len(
+000074d0: 7365 6c66 2920 3e20 303a 0d0a 2020 2020  self) > 0:..    
+000074e0: 2020 2020 2020 2020 2320 6372 6561 7465          # create
+000074f0: 2061 2073 696e 676c 6520 636f 6d70 7265   a single compre
+00007500: 7373 6564 2061 7272 6179 206f 6620 7569  ssed array of ui
+00007510: 6e74 380d 0a20 2020 2020 2020 2020 2020  nt8..           
+00007520: 2063 6172 7220 3d20 7263 2e43 6f6d 7072   carr = rc.Compr
+00007530: 6573 7344 6563 6f6d 7072 6573 7341 7272  essDecompressArr
+00007540: 6179 7328 5b73 656c 665d 2c20 3029 5b30  ays([self], 0)[0
+00007550: 5d0d 0a20 2020 2020 2020 2020 2020 2072  ]..            r
+00007560: 6574 7572 6e20 2846 415f 4652 4f4d 5f55  eturn (FA_FROM_U
+00007570: 494e 5438 2c20 2863 6172 722e 7669 6577  INT8, (carr.view
+00007580: 286e 702e 6e64 6172 7261 7929 2c29 290d  (np.ndarray),)).
+00007590: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
+000075a0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000075b0: 726e 2028 0d0a 2020 2020 2020 2020 2020  rn (..          
+000075c0: 2020 2020 2020 636c 732e 5f5f 6e65 775f        cls.__new_
+000075d0: 5f2c 0d0a 2020 2020 2020 2020 2020 2020  _,..            
+000075e0: 2020 2020 280d 0a20 2020 2020 2020 2020      (..         
+000075f0: 2020 2020 2020 2020 2020 2063 6c73 2c0d             cls,.
+00007600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007610: 2020 2020 2073 656c 662e 7669 6577 286e       self.view(n
+00007620: 702e 6e64 6172 7261 7929 2c0d 0a20 2020  p.ndarray),..   
+00007630: 2020 2020 2020 2020 2020 2020 2029 2c0d               ),.
+00007640: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+00007650: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+00007660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007670: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007680: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007690: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000076a0: 2d2d 0d0a 2020 2020 4063 6c61 7373 6d65  --..    @classme
+000076b0: 7468 6f64 0d0a 2020 2020 6465 6620 5f63  thod..    def _c
+000076c0: 6865 636b 5f6e 6469 6d28 636c 732c 2069  heck_ndim(cls, i
+000076d0: 6e73 7461 6e63 6529 3a0d 0a20 2020 2020  nstance):..     
+000076e0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+000076f0: 4974 6572 6174 6573 2074 6872 6f75 6768  Iterates through
+00007700: 2064 696d 656e 7369 6f6e 7320 6f66 2061   dimensions of a
+00007710: 6e20 6172 7261 792c 2063 6f75 6e74 696e  n array, countin
+00007720: 6720 686f 7720 6d61 6e79 2064 696d 656e  g how many dimen
+00007730: 7369 6f6e 7320 6861 7665 2076 616c 7565  sions have value
+00007740: 7320 6772 6561 7465 7220 7468 616e 2031  s greater than 1
+00007750: 2e0d 0a20 2020 2020 2020 2050 726f 626c  ...        Probl
+00007760: 656d 7320 6d61 7920 6f63 6375 7265 2077  ems may occure w
+00007770: 6974 6820 6d75 6c74 6964 696d 656e 7369  ith multidimensi
+00007780: 6f6e 616c 2046 6173 7441 7272 6179 732c  onal FastArrays,
+00007790: 2061 6e64 2074 6865 2075 7365 7220 7769   and the user wi
+000077a0: 6c6c 2062 6520 7761 726e 6564 2e0d 0a20  ll be warned... 
+000077b0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+000077c0: 2020 2020 696e 6465 7820 3d20 300d 0a20      index = 0.. 
+000077d0: 2020 2020 2020 2061 626f 7665 6f6e 6520         aboveone 
+000077e0: 3d20 300d 0a20 2020 2020 2020 2077 6869  = 0..        whi
+000077f0: 6c65 2069 6e64 6578 203c 2069 6e73 7461  le index < insta
+00007800: 6e63 652e 6e64 696d 3a0d 0a20 2020 2020  nce.ndim:..     
+00007810: 2020 2020 2020 2069 6620 696e 7374 616e         if instan
+00007820: 6365 2e73 6861 7065 5b69 6e64 6578 5d20  ce.shape[index] 
+00007830: 3e20 313a 0d0a 2020 2020 2020 2020 2020  > 1:..          
+00007840: 2020 2020 2020 6162 6f76 656f 6e65 202b        aboveone +
+00007850: 3d20 310d 0a20 2020 2020 2020 2020 2020  = 1..           
+00007860: 2069 6e64 6578 202b 3d20 310d 0a20 2020   index += 1..   
+00007870: 2020 2020 2072 6574 7572 6e20 6162 6f76       return abov
+00007880: 656f 6e65 0d0a 0d0a 2020 2020 2320 2d2d  eone....    # --
+00007890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000078a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000078b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000078c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000078d0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 6465  --------..    de
+000078e0: 6620 6765 745f 6e61 6d65 2873 656c 6629  f get_name(self)
+000078f0: 202d 3e20 7374 723a 0d0a 2020 2020 2020   -> str:..      
+00007900: 2020 2222 220d 0a20 2020 2020 2020 2047    """..        G
+00007910: 6574 2074 6865 206e 616d 6520 7468 6174  et the name that
+00007920: 2773 2061 7373 6967 6e65 6420 746f 2061  's assigned to a
+00007930: 2060 4661 7374 4172 7261 7960 2e0d 0a0d   `FastArray`....
+00007940: 0a20 2020 2020 2020 2057 6865 6e20 6120  .        When a 
+00007950: 6046 6173 7441 7272 6179 6020 6f62 6a65  `FastArray` obje
+00007960: 6374 2069 7320 6372 6561 7465 642c 2069  ct is created, i
+00007970: 7420 6861 7320 6e6f 206e 616d 652e 2049  t has no name. I
+00007980: 7420 6361 6e20 6265 2061 7373 6967 6e65  t can be assigne
+00007990: 6420 6120 6e61 6d65 0d0a 2020 2020 2020  d a name..      
+000079a0: 2020 7669 6120 6073 6574 5f6e 616d 6560    via `set_name`
+000079b0: 2e20 466f 7220 6465 7461 696c 732c 2073  . For details, s
+000079c0: 6565 203a 6d65 7468 3a60 4661 7374 4172  ee :meth:`FastAr
+000079d0: 7261 792e 7365 745f 6e61 6d65 602e 0d0a  ray.set_name`...
+000079e0: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+000079f0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00007a00: 2d2d 0d0a 2020 2020 2020 2020 7374 7220  --..        str 
+00007a10: 6f72 204e 6f6e 650d 0a20 2020 2020 2020  or None..       
+00007a20: 2020 2020 2054 6865 2061 7373 6967 6e65       The assigne
+00007a30: 6420 6e61 6d65 2c20 6f72 204e 6f6e 6520  d name, or None 
+00007a40: 6966 2074 6865 2061 7272 6179 2068 6173  if the array has
+00007a50: 206e 6f74 2062 6565 6e20 6e61 6d65 642e   not been named.
+00007a60: 0d0a 0d0a 2020 2020 2020 2020 5365 6520  ....        See 
+00007a70: 416c 736f 0d0a 2020 2020 2020 2020 2d2d  Also..        --
+00007a80: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00007a90: 4661 7374 4172 7261 792e 7365 745f 6e61  FastArray.set_na
+00007aa0: 6d65 0d0a 0d0a 2020 2020 2020 2020 4578  me....        Ex
+00007ab0: 616d 706c 6573 0d0a 2020 2020 2020 2020  amples..        
+00007ac0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+00007ad0: 2020 4173 7369 676e 2074 6865 2060 4661    Assign the `Fa
+00007ae0: 7374 4172 7261 7960 2061 206e 616d 6520  stArray` a name 
+00007af0: 7573 696e 6720 3a6d 6574 683a 6046 6173  using :meth:`Fas
+00007b00: 7441 7272 6179 2e73 6574 5f6e 616d 6560  tArray.set_name`
+00007b10: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
+00007b20: 2061 203d 2072 742e 6172 616e 6765 2835   a = rt.arange(5
+00007b30: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
+00007b40: 2e73 6574 5f6e 616d 6528 2746 4120 4e61  .set_name('FA Na
+00007b50: 6d65 2729 0d0a 2020 2020 2020 2020 4661  me')..        Fa
+00007b60: 7374 4172 7261 7928 5b30 2c20 312c 2032  stArray([0, 1, 2
+00007b70: 2c20 332c 2034 5d29 0d0a 0d0a 2020 2020  , 3, 4])....    
+00007b80: 2020 2020 4765 7420 7468 6520 6e61 6d65      Get the name
+00007b90: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
+00007ba0: 2061 2e67 6574 5f6e 616d 6528 290d 0a20   a.get_name().. 
+00007bb0: 2020 2020 2020 2027 4641 204e 616d 6527         'FA Name'
+00007bc0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00007bd0: 2020 2020 2020 206e 616d 6520 3d20 4e6f         name = No
+00007be0: 6e65 0d0a 2020 2020 2020 2020 7472 793a  ne..        try:
+00007bf0: 0d0a 2020 2020 2020 2020 2020 2020 6e61  ..            na
+00007c00: 6d65 203d 2073 656c 662e 5f6e 616d 650d  me = self._name.
+00007c10: 0a20 2020 2020 2020 2065 7863 6570 743a  .        except:
+00007c20: 0d0a 2020 2020 2020 2020 2020 2020 7061  ..            pa
+00007c30: 7373 0d0a 2020 2020 2020 2020 7265 7475  ss..        retu
+00007c40: 726e 206e 616d 650d 0a0d 0a20 2020 2023  rn name....    #
+00007c50: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+00007c60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007c70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007c80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007c90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
+00007ca0: 2064 6566 2073 6574 5f6e 616d 6528 7365   def set_name(se
+00007cb0: 6c66 2c20 6e61 6d65 2920 2d3e 2046 6173  lf, name) -> Fas
+00007cc0: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
+00007cd0: 2022 2222 0d0a 2020 2020 2020 2020 4173   """..        As
+00007ce0: 7369 676e 2061 206e 616d 6520 746f 2061  sign a name to a
+00007cf0: 2060 4661 7374 4172 7261 7960 2e0d 0a0d   `FastArray`....
+00007d00: 0a20 2020 2020 2020 2041 2060 4661 7374  .        A `Fast
+00007d10: 4172 7261 7960 2069 7320 6120 7772 6170  Array` is a wrap
+00007d20: 7065 7220 6172 6f75 6e64 2061 204e 756d  per around a Num
+00007d30: 5079 2060 6e64 6172 7261 7960 2e20 5768  Py `ndarray`. Wh
+00007d40: 656e 2061 2060 4661 7374 4172 7261 7960  en a `FastArray`
+00007d50: 2069 730d 0a20 2020 2020 2020 2063 7265   is..        cre
+00007d60: 6174 6564 2c20 6974 2068 6173 206e 6f20  ated, it has no 
+00007d70: 6e61 6d65 2e20 596f 7520 6361 6e20 6173  name. You can as
+00007d80: 7369 676e 2069 7420 6120 6e61 6d65 2075  sign it a name u
+00007d90: 7369 6e67 2060 7365 745f 6e61 6d65 602e  sing `set_name`.
+00007da0: 0d0a 0d0a 2020 2020 2020 2020 2a2a 496e  ....        **In
+00007db0: 7465 7261 6374 696f 6e73 2077 6974 6820  teractions with 
+00007dc0: 4461 7461 7365 7420 4f62 6a65 6374 732a  Dataset Objects*
+00007dd0: 2a0d 0a0d 0a20 2020 2020 2020 2057 6865  *....        Whe
+00007de0: 6e20 616e 2075 6e6e 616d 6564 2060 4661  n an unnamed `Fa
+00007df0: 7374 4172 7261 7960 2069 7320 6164 6465  stArray` is adde
+00007e00: 6420 746f 2061 2060 4461 7461 7365 7460  d to a `Dataset`
+00007e10: 3a0d 0a0d 0a20 2020 2020 2020 202d 2054  :....        - T
+00007e20: 6865 2060 4661 7374 4172 7261 7960 2069  he `FastArray` i
+00007e30: 6e68 6572 6974 7320 7468 6520 6e61 6d65  nherits the name
+00007e40: 206f 6620 7468 6520 6044 6174 6173 6574   of the `Dataset
+00007e50: 6020 636f 6c75 6d6e 2e0d 0a20 2020 2020  ` column...     
+00007e60: 2020 202d 2043 616c 6c69 6e67 2060 6066     - Calling ``f
+00007e70: 612e 7365 745f 6e61 6d65 6060 206f 7220  a.set_name`` or 
+00007e80: 6060 6473 2e63 6f6c 2e73 6574 5f6e 616d  ``ds.col.set_nam
+00007e90: 6560 602c 206f 7220 6368 616e 6769 6e67  e``, or changing
+00007ea0: 2074 6865 2064 6973 706c 6179 6564 0d0a   the displayed..
+00007eb0: 2020 2020 2020 2020 2020 636f 6c75 6d6e            column
+00007ec0: 206e 616d 6520 7669 6120 6060 6473 2e63   name via ``ds.c
+00007ed0: 6f6c 5f72 656e 616d 6560 602c 2063 6861  ol_rename``, cha
+00007ee0: 6e67 6573 2074 6865 206e 616d 6520 6173  nges the name as
+00007ef0: 7369 676e 6564 2074 6f20 7468 650d 0a20  signed to the.. 
+00007f00: 2020 2020 2020 2020 2060 4661 7374 4172           `FastAr
+00007f10: 7261 7960 2e0d 0a0d 0a20 2020 2020 2020  ray`.....       
+00007f20: 2020 2020 202d 204e 6f74 6520 7468 6174       - Note that
+00007f30: 2063 616c 6c69 6e67 2060 6066 612e 7365   calling ``fa.se
+00007f40: 745f 6e61 6d65 6060 206f 7220 6060 6473  t_name`` or ``ds
+00007f50: 2e63 6f6c 2e73 6574 5f6e 616d 6560 6020  .col.set_name`` 
+00007f60: 646f 6573 6e27 7420 6368 616e 6765 2074  doesn't change t
+00007f70: 6865 0d0a 2020 2020 2020 2020 2020 2020  he..            
+00007f80: 2020 6469 7370 6c61 7965 6420 636f 6c75    displayed colu
+00007f90: 6d6e 206e 616d 652e 0d0a 0d0a 2020 2020  mn name.....    
+00007fa0: 2020 2020 5768 656e 2061 206e 616d 6564      When a named
+00007fb0: 2060 4661 7374 4172 7261 7960 2069 7320   `FastArray` is 
+00007fc0: 6164 6465 6420 746f 2061 2060 4461 7461  added to a `Data
+00007fd0: 7365 7460 3a0d 0a0d 0a20 2020 2020 2020  set`:....       
+00007fe0: 202d 2041 206e 6577 2060 4661 7374 4172   - A new `FastAr
+00007ff0: 7261 7960 2069 6e73 7461 6e63 6520 6973  ray` instance is
+00008000: 2063 7265 6174 6564 2074 6861 7420 696e   created that in
+00008010: 6865 7269 7473 2074 6865 2060 4461 7461  herits the `Data
+00008020: 7365 7460 2063 6f6c 756d 6e20 6e61 6d65  set` column name
+00008030: 2e0d 0a20 2020 2020 2020 202d 2043 616c  ...        - Cal
+00008040: 6c69 6e67 2060 6064 732e 636f 6c2e 7365  ling ``ds.col.se
+00008050: 745f 6e61 6d65 6060 206f 7220 6368 616e  t_name`` or chan
+00008060: 6769 6e67 2074 6865 2064 6973 706c 6179  ging the display
+00008070: 6564 2063 6f6c 756d 6e20 6e61 6d65 2076  ed column name v
+00008080: 6961 0d0a 2020 2020 2020 2020 2020 6060  ia..          ``
+00008090: 6473 2e63 6f6c 5f72 656e 616d 6560 6020  ds.col_rename`` 
+000080a0: 6368 616e 6765 7320 7468 6520 6e65 7720  changes the new 
+000080b0: 696e 7374 616e 6365 2773 206e 616d 652e  instance's name.
+000080c0: 0d0a 2020 2020 2020 2020 2d20 4361 6c6c  ..        - Call
+000080d0: 696e 6720 6073 6574 5f6e 616d 6560 206f  ing `set_name` o
+000080e0: 6e20 7468 6520 6f72 6967 696e 616c 2060  n the original `
+000080f0: 4661 7374 4172 7261 7960 2069 6e73 7461  FastArray` insta
+00008100: 6e63 6520 6368 616e 6765 7320 6f6e 6c79  nce changes only
+00008110: 2074 6861 7420 696e 7374 616e 6365 2773   that instance's
+00008120: 0d0a 2020 2020 2020 2020 2020 6e61 6d65  ..          name
+00008130: 2e0d 0a0d 0a20 2020 2020 2020 2049 6e20  .....        In 
+00008140: 626f 7468 2063 6173 6573 2c20 7468 6520  both cases, the 
+00008150: 4e75 6d50 7920 6172 7261 7920 756e 6465  NumPy array unde
+00008160: 726c 7969 6e67 2074 6865 2060 4661 7374  rlying the `Fast
+00008170: 4172 7261 7960 2069 7320 7368 6172 6564  Array` is shared
+00008180: 202d 2d20 6368 616e 6765 730d 0a20 2020   -- changes..   
+00008190: 2020 2020 2074 6f20 6974 7320 7661 6c75       to its valu
+000081a0: 6573 2061 7070 6561 7220 696e 2074 6865  es appear in the
+000081b0: 2060 4461 7461 7365 7460 2063 6f6c 756d   `Dataset` colum
+000081c0: 6e2c 2061 6e64 2076 6963 652d 7665 7273  n, and vice-vers
+000081d0: 612e 0d0a 0d0a 2020 2020 2020 2020 2a2a  a.....        **
+000081e0: 496e 7465 7261 6374 696f 6e73 2077 6974  Interactions wit
+000081f0: 6820 4661 7374 4172 7261 7920 4f62 6a65  h FastArray Obje
+00008200: 6374 732a 2a0d 0a0d 0a20 2020 2020 2020  cts**....       
+00008210: 202d 2057 6865 6e20 6120 6046 6173 7441   - When a `FastA
+00008220: 7272 6179 6020 6973 2063 7265 6174 6564  rray` is created
+00008230: 2061 7320 6120 7669 6577 206f 6620 616e   as a view of an
+00008240: 6f74 6865 722c 206e 616d 6564 2060 4661  other, named `Fa
+00008250: 7374 4172 7261 7960 2c20 7468 6520 6e65  stArray`, the ne
+00008260: 770d 0a20 2020 2020 2020 2020 2060 4661  w..          `Fa
+00008270: 7374 4172 7261 7960 2069 6e73 7461 6e63  stArray` instanc
+00008280: 6520 696e 6865 7269 7473 2074 6865 206e  e inherits the n
+00008290: 616d 6520 6672 6f6d 2074 6865 206f 7269  ame from the ori
+000082a0: 6769 6e61 6c20 6046 6173 7441 7272 6179  ginal `FastArray
+000082b0: 602e 0d0a 2020 2020 2020 2020 2d20 5768  `...        - Wh
+000082c0: 6574 6865 7220 7468 6520 6f72 6967 696e  ether the origin
+000082d0: 616c 2060 4661 7374 4172 7261 7960 2069  al `FastArray` i
+000082e0: 7320 6e61 6d65 6420 6f72 2075 6e6e 616d  s named or unnam
+000082f0: 6564 2c20 6361 6c6c 696e 6720 6073 6574  ed, calling `set
+00008300: 5f6e 616d 6560 206f 6e0d 0a20 2020 2020  _name` on..     
+00008310: 2020 2020 2065 6974 6865 7220 6046 6173       either `Fas
+00008320: 7441 7272 6179 6020 646f 6573 206e 6f74  tArray` does not
+00008330: 2063 6861 6e67 6520 7468 6520 6e61 6d65   change the name
+00008340: 206f 6620 7468 6520 6f74 6865 7220 6046   of the other `F
+00008350: 6173 7441 7272 6179 602e 0d0a 0d0a 2020  astArray`.....  
+00008360: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
+00008370: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+00008380: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6e61  ----..        na
+00008390: 6d65 203a 2073 7472 0d0a 2020 2020 2020  me : str..      
+000083a0: 2020 2020 2020 5468 6520 6e61 6d65 2074        The name t
+000083b0: 6f20 6173 7369 676e 2074 6f20 7468 6520  o assign to the 
+000083c0: 6046 6173 7441 7272 6179 602e 0d0a 0d0a  `FastArray`.....
+000083d0: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
+000083e0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+000083f0: 0d0a 2020 2020 2020 2020 6046 6173 7441  ..        `FastA
+00008400: 7272 6179 600d 0a20 2020 2020 2020 2020  rray`..         
+00008410: 2020 2054 6865 2060 4661 7374 4172 7261     The `FastArra
+00008420: 7960 2069 7320 7265 7475 726e 6564 2e20  y` is returned. 
+00008430: 5468 6520 6e61 6d65 2063 616e 2062 6520  The name can be 
+00008440: 6163 6365 7373 6564 2075 7369 6e67 0d0a  accessed using..
+00008450: 2020 2020 2020 2020 2020 2020 3a6d 6574              :met
+00008460: 683a 6046 6173 7441 7272 6179 2e67 6574  h:`FastArray.get
+00008470: 5f6e 616d 6560 2e0d 0a0d 0a20 2020 2020  _name`.....     
+00008480: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
+00008490: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+000084a0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+000084b0: 2e67 6574 5f6e 616d 650d 0a0d 0a20 2020  .get_name....   
+000084c0: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
+000084d0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+000084e0: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
+000084f0: 2072 742e 6172 616e 6765 2835 290d 0a20   rt.arange(5).. 
+00008500: 2020 2020 2020 203e 3e3e 2061 2e73 6574         >>> a.set
+00008510: 5f6e 616d 6528 2746 4120 4e61 6d65 2729  _name('FA Name')
+00008520: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00008530: 7261 7928 5b30 2c20 312c 2032 2c20 332c  ray([0, 1, 2, 3,
+00008540: 2034 5d29 0d0a 0d0a 2020 2020 2020 2020   4])....        
+00008550: 596f 7520 6361 6e20 6765 7420 7468 6520  You can get the 
+00008560: 6e61 6d65 2075 7369 6e67 203a 6d65 7468  name using :meth
+00008570: 3a60 4661 7374 4172 7261 792e 6765 745f  :`FastArray.get_
+00008580: 6e61 6d65 603a 0d0a 0d0a 2020 2020 2020  name`:....      
+00008590: 2020 3e3e 3e20 612e 6765 745f 6e61 6d65    >>> a.get_name
+000085a0: 2829 0d0a 2020 2020 2020 2020 2746 4120  ()..        'FA 
+000085b0: 4e61 6d65 270d 0a0d 0a20 2020 2020 2020  Name'....       
+000085c0: 2057 6865 6e20 616e 2075 6e6e 616d 6564   When an unnamed
+000085d0: 2060 4661 7374 4172 7261 7960 2069 7320   `FastArray` is 
+000085e0: 6164 6465 6420 746f 2061 2060 4461 7461  added to a `Data
+000085f0: 7365 7460 2063 6f6c 756d 6e2c 2074 6865  set` column, the
+00008600: 2060 4661 7374 4172 7261 7960 0d0a 2020   `FastArray`..  
+00008610: 2020 2020 2020 696e 6865 7269 7473 2074        inherits t
+00008620: 6865 206e 616d 6520 6f66 2074 6865 2063  he name of the c
+00008630: 6f6c 756d 6e2e 0d0a 0d0a 2020 2020 2020  olumn.....      
+00008640: 2020 3e3e 3e20 6120 3d20 7274 2e46 6173    >>> a = rt.Fas
+00008650: 7441 7272 6179 285b 312c 2032 2c20 335d  tArray([1, 2, 3]
+00008660: 290d 0a20 2020 2020 2020 203e 3e3e 2064  )..        >>> d
+00008670: 7320 3d20 7274 2e44 6174 6173 6574 2829  s = rt.Dataset()
+00008680: 0d0a 2020 2020 2020 2020 3e3e 3e20 6473  ..        >>> ds
+00008690: 2e43 6f6c 756d 6e5f 4e61 6d65 203d 2061  .Column_Name = a
+000086a0: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+000086b0: 6765 745f 6e61 6d65 2829 0d0a 2020 2020  get_name()..    
+000086c0: 2020 2020 2743 6f6c 756d 6e5f 4e61 6d65      'Column_Name
+000086d0: 270d 0a0d 0a20 2020 2020 2020 2043 616c  '....        Cal
+000086e0: 6c69 6e67 2060 6064 732e 636f 6c2e 7365  ling ``ds.col.se
+000086f0: 745f 6e61 6d65 6060 2063 6861 6e67 6573  t_name`` changes
+00008700: 2074 6865 206e 616d 6520 6173 7369 676e   the name assign
+00008710: 6564 2074 6f20 7468 6520 6046 6173 7441  ed to the `FastA
+00008720: 7272 6179 600d 0a20 2020 2020 2020 2028  rray`..        (
+00008730: 6275 7420 6e6f 7420 7468 6520 6469 7370  but not the disp
+00008740: 6c61 7965 6420 636f 6c75 6d6e 206e 616d  layed column nam
+00008750: 6529 2e0d 0a0d 0a20 2020 2020 2020 203e  e).....        >
+00008760: 3e3e 2064 732e 436f 6c75 6d6e 5f4e 616d  >> ds.Column_Nam
+00008770: 652e 7365 745f 6e61 6d65 2827 4e65 7720  e.set_name('New 
+00008780: 4e61 6d65 2729 0d0a 2020 2020 2020 2020  Name')..        
+00008790: 3e3e 3e20 612e 6765 745f 6e61 6d65 2829  >>> a.get_name()
+000087a0: 0d0a 2020 2020 2020 2020 274e 6577 204e  ..        'New N
+000087b0: 616d 6527 0d0a 2020 2020 2020 2020 3e3e  ame'..        >>
+000087c0: 3e20 6473 0d0a 2020 2020 2020 2020 2320  > ds..        # 
+000087d0: 2020 436f 6c75 6d6e 5f4e 616d 650d 0a20    Column_Name.. 
+000087e0: 2020 2020 2020 202d 2020 202d 2d2d 2d2d         -   -----
+000087f0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00008800: 3020 2020 2020 2020 2020 2020 2020 310d  0             1.
+00008810: 0a20 2020 2020 2020 2031 2020 2020 2020  .        1      
+00008820: 2020 2020 2020 2032 0d0a 2020 2020 2020         2..      
+00008830: 2020 3220 2020 2020 2020 2020 2020 2020    2             
+00008840: 330d 0a0d 0a20 2020 2020 2020 2057 6865  3....        Whe
+00008850: 6e20 6120 6e61 6d65 6420 6046 6173 7441  n a named `FastA
+00008860: 7272 6179 6020 6973 2061 6464 6564 2074  rray` is added t
+00008870: 6f20 6120 6044 6174 6173 6574 6020 636f  o a `Dataset` co
+00008880: 6c75 6d6e 2c20 6120 6e65 7720 6046 6173  lumn, a new `Fas
+00008890: 7441 7272 6179 600d 0a20 2020 2020 2020  tArray`..       
+000088a0: 2069 6e73 7461 6e63 6520 6973 2063 7265   instance is cre
+000088b0: 6174 6564 2074 6861 7420 696e 6865 7269  ated that inheri
+000088c0: 7473 2074 6865 2063 6f6c 756d 6e20 6e61  ts the column na
+000088d0: 6d65 2e20 5468 6520 6f72 6967 696e 616c  me. The original
+000088e0: 2069 6e73 7461 6e63 6520 6973 0d0a 2020   instance is..  
+000088f0: 2020 2020 2020 6e6f 7420 7265 6e61 6d65        not rename
+00008900: 642e 0d0a 0d0a 2020 2020 2020 2020 3e3e  d.....        >>
+00008910: 3e20 6120 3d20 7274 2e46 6173 7441 7272  > a = rt.FastArr
+00008920: 6179 285b 312c 2032 2c20 335d 290d 0a20  ay([1, 2, 3]).. 
+00008930: 2020 2020 2020 203e 3e3e 2061 2e73 6574         >>> a.set
+00008940: 5f6e 616d 6528 2746 4120 4e61 6d65 2729  _name('FA Name')
+00008950: 0d0a 2020 2020 2020 2020 3e3e 3e20 6473  ..        >>> ds
+00008960: 203d 2072 742e 4461 7461 7365 7428 290d   = rt.Dataset().
+00008970: 0a20 2020 2020 2020 203e 3e3e 2064 732e  .        >>> ds.
+00008980: 436f 6c75 6d6e 5f4e 616d 6520 3d20 610d  Column_Name = a.
+00008990: 0a20 2020 2020 2020 203e 3e3e 2064 732e  .        >>> ds.
+000089a0: 436f 6c75 6d6e 5f4e 616d 652e 6765 745f  Column_Name.get_
+000089b0: 6e61 6d65 2829 0d0a 2020 2020 2020 2020  name()..        
+000089c0: 2743 6f6c 756d 6e5f 4e61 6d65 270d 0a20  'Column_Name'.. 
+000089d0: 2020 2020 2020 203e 3e3e 2061 2e67 6574         >>> a.get
+000089e0: 5f6e 616d 6528 290d 0a20 2020 2020 2020  _name()..       
+000089f0: 2027 4641 204e 616d 6527 0d0a 0d0a 2020   'FA Name'....  
+00008a00: 2020 2020 2020 4368 616e 6769 6e67 2074        Changing t
+00008a10: 6865 2064 6973 706c 6179 6564 2063 6f6c  he displayed col
+00008a20: 756d 6e20 6e61 6d65 2061 6666 6563 7473  umn name affects
+00008a30: 2074 6865 206e 616d 6520 6f66 2074 6865   the name of the
+00008a40: 206e 6577 2069 6e73 7461 6e63 652c 0d0a   new instance,..
+00008a50: 2020 2020 2020 2020 6275 7420 6e6f 7420          but not 
+00008a60: 7468 6520 6e61 6d65 206f 6620 7468 6520  the name of the 
+00008a70: 6f72 6967 696e 616c 2060 4661 7374 4172  original `FastAr
+00008a80: 7261 7960 2e0d 0a0d 0a20 2020 2020 2020  ray`.....       
+00008a90: 203e 3e3e 2064 732e 636f 6c5f 7265 6e61   >>> ds.col_rena
+00008aa0: 6d65 2827 436f 6c75 6d6e 5f4e 616d 6527  me('Column_Name'
+00008ab0: 2c20 274e 6577 5f43 6f6c 756d 6e27 290d  , 'New_Column').
+00008ac0: 0a20 2020 2020 2020 203e 3e3e 2064 732e  .        >>> ds.
+00008ad0: 4e65 775f 436f 6c75 6d6e 2e67 6574 5f6e  New_Column.get_n
+00008ae0: 616d 6528 290d 0a20 2020 2020 2020 2027  ame()..        '
+00008af0: 4e65 775f 436f 6c75 6d6e 270d 0a20 2020  New_Column'..   
+00008b00: 2020 2020 203e 3e3e 2061 2e67 6574 5f6e       >>> a.get_n
+00008b10: 616d 6528 290d 0a20 2020 2020 2020 2027  ame()..        '
+00008b20: 4641 204e 616d 6527 0d0a 2020 2020 2020  FA Name'..      
+00008b30: 2020 2222 220d 0a20 2020 2020 2020 2073    """..        s
+00008b40: 656c 662e 5f6e 616d 6520 3d20 6e61 6d65  elf._name = name
+00008b50: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00008b60: 2073 656c 660d 0a0d 0a20 2020 2023 202d   self....    # -
+00008b70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008b80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008b90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008ba0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008bb0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2040  ---------..    @
+00008bc0: 7374 6174 6963 6d65 7468 6f64 0d0a 2020  staticmethod..  
+00008bd0: 2020 6465 6620 5f46 6173 7446 756e 6374    def _FastFunct
+00008be0: 696f 6e73 4f6e 2829 3a0d 0a20 2020 2020  ionsOn():..     
+00008bf0: 2020 2069 6620 4661 7374 4172 7261 792e     if FastArray.
+00008c00: 5665 7262 6f73 6520 3e20 303a 0d0a 2020  Verbose > 0:..  
+00008c10: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+00008c20: 6622 4641 5354 4655 4e43 204f 4e3a 2066  f"FASTFUNC ON: f
+00008c30: 6173 7466 756e 6320 7761 7320 7b46 6173  astfunc was {Fas
+00008c40: 7441 7272 6179 2e46 6173 7465 7255 4675  tArray.FasterUFu
+00008c50: 6e63 7d22 290d 0a20 2020 2020 2020 2046  nc}")..        F
+00008c60: 6173 7441 7272 6179 2e46 6173 7465 7255  astArray.FasterU
+00008c70: 4675 6e63 203d 2054 7275 650d 0a0d 0a20  Func = True.... 
+00008c80: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+00008c90: 0d0a 2020 2020 6465 6620 5f46 6173 7446  ..    def _FastF
+00008ca0: 756e 6374 696f 6e73 4f66 6628 293a 0d0a  unctionsOff():..
+00008cb0: 2020 2020 2020 2020 6966 2046 6173 7441          if FastA
+00008cc0: 7272 6179 2e56 6572 626f 7365 203e 2030  rray.Verbose > 0
+00008cd0: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
+00008ce0: 7269 6e74 2866 2246 4153 5446 554e 4320  rint(f"FASTFUNC 
+00008cf0: 4f46 463a 2066 6173 7466 756e 6320 7761  OFF: fastfunc wa
+00008d00: 7320 7b46 6173 7441 7272 6179 2e46 6173  s {FastArray.Fas
+00008d10: 7465 7255 4675 6e63 7d22 290d 0a20 2020  terUFunc}")..   
+00008d20: 2020 2020 2046 6173 7441 7272 6179 2e46       FastArray.F
+00008d30: 6173 7465 7255 4675 6e63 203d 2046 616c  asterUFunc = Fal
+00008d40: 7365 0d0a 0d0a 2020 2020 4070 726f 7065  se....    @prope
+00008d50: 7274 790d 0a20 2020 2064 6566 205f 6e70  rty..    def _np
+00008d60: 2873 656c 6629 202d 3e20 6e70 2e6e 6461  (self) -> np.nda
+00008d70: 7272 6179 3a0d 0a20 2020 2020 2020 2022  rray:..        "
+00008d80: 2222 0d0a 2020 2020 2020 2020 5265 7475  ""..        Retu
+00008d90: 726e 2061 204e 756d 5079 2061 7272 6179  rn a NumPy array
+00008da0: 2076 6965 7720 6f66 2074 6865 2069 6e70   view of the inp
+00008db0: 7574 2060 4661 7374 4172 7261 7960 2e0d  ut `FastArray`..
+00008dc0: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+00008dd0: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
+00008de0: 2d2d 2d0d 0a20 2020 2020 2020 206e 756d  ---..        num
+00008df0: 7079 2e6e 6461 7272 6179 0d0a 2020 2020  py.ndarray..    
+00008e00: 2020 2020 2020 2020 4120 4e75 6d50 7920          A NumPy 
+00008e10: 6172 7261 7920 7669 6577 206f 6620 7468  array view of th
+00008e20: 6520 696e 7075 7420 6046 6173 7441 7272  e input `FastArr
+00008e30: 6179 602e 0d0a 0d0a 2020 2020 2020 2020  ay`.....        
+00008e40: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
+00008e50: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+00008e60: 2020 2020 4661 7374 6172 7261 792e 7669      Fastarray.vi
+00008e70: 6577 203a 2056 6965 7720 6120 4e75 6d50  ew : View a NumP
+00008e80: 7920 6172 7261 7920 6173 2061 2060 4661  y array as a `Fa
+00008e90: 7374 4172 7261 7960 2e0d 0a0d 0a20 2020  stArray`.....   
+00008ea0: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
+00008eb0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+00008ec0: 0a20 2020 2020 2020 2052 6574 7572 6e20  .        Return 
+00008ed0: 6120 4e75 6d50 7920 6172 7261 7920 7669  a NumPy array vi
+00008ee0: 6577 2066 6f72 2061 6e20 696e 7465 6765  ew for an intege
+00008ef0: 7220 6046 6173 7441 7272 6179 603a 0d0a  r `FastArray`:..
+00008f00: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
+00008f10: 3d20 7274 2e46 4128 5b31 2c20 322c 2033  = rt.FA([1, 2, 3
+00008f20: 2c20 342c 2035 5d29 0d0a 2020 2020 2020  , 4, 5])..      
+00008f30: 2020 3e3e 3e20 610d 0a20 2020 2020 2020    >>> a..       
+00008f40: 2046 6173 7441 7272 6179 285b 312c 2032   FastArray([1, 2
+00008f50: 2c20 332c 2034 2c20 355d 290d 0a20 2020  , 3, 4, 5])..   
+00008f60: 2020 2020 203e 3e3e 2061 2e5f 6e70 0d0a       >>> a._np..
+00008f70: 2020 2020 2020 2020 6172 7261 7928 5b31          array([1
+00008f80: 2c20 322c 2033 2c20 342c 2035 5d29 0d0a  , 2, 3, 4, 5])..
+00008f90: 0d0a 2020 2020 2020 2020 5570 6461 7465  ..        Update
+00008fa0: 2074 6865 2060 4661 7374 4172 7261 7960   the `FastArray`
+00008fb0: 2075 7369 6e67 2074 6865 204e 756d 5079   using the NumPy
+00008fc0: 2061 7272 6179 2076 6965 773a 0d0a 0d0a   array view:....
+00008fd0: 2020 2020 2020 2020 3e3e 3e20 6e70 7669          >>> npvi
+00008fe0: 6577 203d 2061 2e5f 6e70 0d0a 2020 2020  ew = a._np..    
+00008ff0: 2020 2020 3e3e 3e20 6e70 7669 6577 5b32      >>> npview[2
+00009000: 5d20 3d20 3130 0d0a 2020 2020 2020 2020  ] = 10..        
+00009010: 3e3e 3e20 610d 0a20 2020 2020 2020 2046  >>> a..        F
+00009020: 6173 7441 7272 6179 285b 2031 2c20 2032  astArray([ 1,  2
+00009030: 2c20 3130 2c20 2034 2c20 2035 5d29 0d0a  , 10,  4,  5])..
+00009040: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+00009050: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00009060: 2e76 6965 7728 6e70 2e6e 6461 7272 6179  .view(np.ndarray
+00009070: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
+00009080: 6d65 7468 6f64 0d0a 2020 2020 6465 6620  method..    def 
+00009090: 5f56 3028 293a 0d0a 2020 2020 2020 2020  _V0():..        
+000090a0: 7072 696e 7428 2273 6574 7469 6e67 2076  print("setting v
+000090b0: 6572 626f 7365 206c 6576 656c 2074 6f20  erbose level to 
+000090c0: 3022 290d 0a20 2020 2020 2020 2046 6173  0")..        Fas
+000090d0: 7441 7272 6179 2e56 6572 626f 7365 203d  tArray.Verbose =
+000090e0: 2030 0d0a 2020 2020 2020 2020 7265 7475   0..        retu
+000090f0: 726e 2046 6173 7441 7272 6179 2e56 6572  rn FastArray.Ver
+00009100: 626f 7365 0d0a 0d0a 2020 2020 4073 7461  bose....    @sta
+00009110: 7469 636d 6574 686f 640d 0a20 2020 2064  ticmethod..    d
+00009120: 6566 205f 5631 2829 3a0d 0a20 2020 2020  ef _V1():..     
+00009130: 2020 2070 7269 6e74 2822 7365 7474 696e     print("settin
+00009140: 6720 7665 7262 6f73 6520 6c65 7665 6c20  g verbose level 
+00009150: 746f 2031 2229 0d0a 2020 2020 2020 2020  to 1")..        
+00009160: 4661 7374 4172 7261 792e 5665 7262 6f73  FastArray.Verbos
+00009170: 6520 3d20 310d 0a20 2020 2020 2020 2072  e = 1..        r
+00009180: 6574 7572 6e20 4661 7374 4172 7261 792e  eturn FastArray.
+00009190: 5665 7262 6f73 650d 0a0d 0a20 2020 2040  Verbose....    @
+000091a0: 7374 6174 6963 6d65 7468 6f64 0d0a 2020  staticmethod..  
+000091b0: 2020 6465 6620 5f56 3228 293a 0d0a 2020    def _V2():..  
+000091c0: 2020 2020 2020 7072 696e 7428 2273 6574        print("set
+000091d0: 7469 6e67 2076 6572 626f 7365 206c 6576  ting verbose lev
+000091e0: 656c 2074 6f20 3222 290d 0a20 2020 2020  el to 2")..     
+000091f0: 2020 2046 6173 7441 7272 6179 2e56 6572     FastArray.Ver
+00009200: 626f 7365 203d 2032 0d0a 2020 2020 2020  bose = 2..      
+00009210: 2020 7265 7475 726e 2046 6173 7441 7272    return FastArr
+00009220: 6179 2e56 6572 626f 7365 0d0a 0d0a 2020  ay.Verbose....  
+00009230: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
+00009240: 0a20 2020 2064 6566 205f 4f4e 2829 3a0d  .    def _ON():.
+00009250: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00009260: 2020 2020 2020 656e 6162 6c65 2069 6e74        enable int
+00009270: 6572 6365 7074 696e 6720 6172 7261 7920  ercepting array 
+00009280: 7566 756e 630d 0a20 2020 2020 2020 2022  ufunc..        "
+00009290: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
+000092a0: 726e 2046 6173 7441 7272 6179 2e5f 4661  rn FastArray._Fa
+000092b0: 7374 4675 6e63 7469 6f6e 734f 6e28 290d  stFunctionsOn().
+000092c0: 0a0d 0a20 2020 2040 7374 6174 6963 6d65  ...    @staticme
+000092d0: 7468 6f64 0d0a 2020 2020 6465 6620 5f4f  thod..    def _O
+000092e0: 4646 2829 3a0d 0a20 2020 2020 2020 2022  FF():..        "
+000092f0: 2222 0d0a 2020 2020 2020 2020 6469 7361  ""..        disa
+00009300: 626c 6520 696e 7465 7263 6570 7469 6e67  ble intercepting
+00009310: 206f 6620 6172 7261 7920 7566 756e 630d   of array ufunc.
+00009320: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00009330: 2020 2020 2020 7265 7475 726e 2046 6173        return Fas
+00009340: 7441 7272 6179 2e5f 4661 7374 4675 6e63  tArray._FastFunc
+00009350: 7469 6f6e 734f 6666 2829 0d0a 0d0a 2020  tionsOff()....  
+00009360: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
+00009370: 0a20 2020 2064 6566 205f 544f 4e28 293a  .    def _TON():
+00009380: 0d0a 2020 2020 2020 2020 7072 696e 7428  ..        print(
+00009390: 2254 6872 6561 6469 6e67 206f 6e22 290d  "Threading on").
+000093a0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000093b0: 7263 2e54 6872 6561 6469 6e67 4d6f 6465  rc.ThreadingMode
+000093c0: 2830 290d 0a0d 0a20 2020 2040 7374 6174  (0)....    @stat
+000093d0: 6963 6d65 7468 6f64 0d0a 2020 2020 6465  icmethod..    de
+000093e0: 6620 5f54 4f46 4628 293a 0d0a 2020 2020  f _TOFF():..    
+000093f0: 2020 2020 7072 696e 7428 2254 6872 6561      print("Threa
+00009400: 6469 6e67 206f 6666 2229 0d0a 2020 2020  ding off")..    
+00009410: 2020 2020 7265 7475 726e 2072 632e 5468      return rc.Th
+00009420: 7265 6164 696e 674d 6f64 6528 3129 0d0a  readingMode(1)..
+00009430: 0d0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
+00009440: 686f 640d 0a20 2020 2064 6566 205f 524f  hod..    def _RO
+00009450: 4e28 7175 6965 743d 4661 6c73 6529 3a0d  N(quiet=False):.
+00009460: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00009470: 2020 2020 2020 5475 726e 206f 6e20 7265        Turn on re
+00009480: 6379 636c 696e 672e 0d0a 0d0a 2020 2020  cycling.....    
+00009490: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
+000094a0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+000094b0: 2d2d 0d0a 2020 2020 2020 2020 7175 6965  --..        quie
+000094c0: 743a 2062 6f6f 6c2c 206f 7074 696f 6e61  t: bool, optiona
+000094d0: 6c0d 0a0d 0a20 2020 2020 2020 2052 6574  l....        Ret
+000094e0: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
+000094f0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2054  -----..        T
+00009500: 7275 6520 6966 2072 6563 7963 6c69 6e67  rue if recycling
+00009510: 2077 6173 2070 7265 7669 6f75 736c 7920   was previously 
+00009520: 6f6e 2c20 656c 7365 2046 616c 7365 0d0a  on, else False..
+00009530: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+00009540: 2020 2020 2069 6620 6e6f 7420 7175 6965       if not quie
+00009550: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+00009560: 7072 696e 7428 2252 6563 7963 6c69 6e67  print("Recycling
+00009570: 206e 756d 7079 2061 7272 6179 7320 6f6e   numpy arrays on
+00009580: 2229 0d0a 2020 2020 2020 2020 7265 7375  ")..        resu
+00009590: 6c74 203d 2072 632e 5365 7452 6563 7963  lt = rc.SetRecyc
+000095a0: 6c65 4d6f 6465 2830 290d 0a20 2020 2020  leMode(0)..     
+000095b0: 2020 2046 6173 7441 7272 6179 2e52 6563     FastArray.Rec
+000095c0: 7963 6c65 203d 2054 7275 650d 0a20 2020  ycle = True..   
+000095d0: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
+000095e0: 6c74 0d0a 0d0a 2020 2020 4073 7461 7469  lt....    @stati
+000095f0: 636d 6574 686f 640d 0a20 2020 2064 6566  cmethod..    def
+00009600: 205f 524f 4646 2871 7569 6574 3d46 616c   _ROFF(quiet=Fal
+00009610: 7365 293a 0d0a 2020 2020 2020 2020 2222  se):..        ""
+00009620: 220d 0a20 2020 2020 2020 2054 7572 6e20  "..        Turn 
+00009630: 6f66 6620 7265 6379 636c 696e 672e 0d0a  off recycling...
+00009640: 0d0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
+00009650: 7465 7273 0d0a 2020 2020 2020 2020 2d2d  ters..        --
+00009660: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+00009670: 2020 7175 6965 743a 2062 6f6f 6c2c 206f    quiet: bool, o
+00009680: 7074 696f 6e61 6c0d 0a0d 0a20 2020 2020  ptional....     
+00009690: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
+000096a0: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
+000096b0: 2020 2020 2054 7275 6520 6966 2072 6563       True if rec
+000096c0: 7963 6c69 6e67 2077 6173 2070 7265 7669  ycling was previ
+000096d0: 6f75 736c 7920 6f6e 2c20 656c 7365 2046  ously on, else F
+000096e0: 616c 7365 0d0a 2020 2020 2020 2020 2222  alse..        ""
+000096f0: 220d 0a20 2020 2020 2020 2069 6620 6e6f  "..        if no
+00009700: 7420 7175 6965 743a 0d0a 2020 2020 2020  t quiet:..      
+00009710: 2020 2020 2020 7072 696e 7428 2252 6563        print("Rec
+00009720: 7963 6c69 6e67 206e 756d 7079 2061 7272  ycling numpy arr
+00009730: 6179 7320 6f66 6622 290d 0a20 2020 2020  ays off")..     
+00009740: 2020 2072 6573 756c 7420 3d20 7263 2e53     result = rc.S
+00009750: 6574 5265 6379 636c 654d 6f64 6528 3129  etRecycleMode(1)
+00009760: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00009770: 7261 792e 5265 6379 636c 6520 3d20 4661  ray.Recycle = Fa
+00009780: 6c73 650d 0a20 2020 2020 2020 2072 6574  lse..        ret
+00009790: 7572 6e20 7265 7375 6c74 0d0a 0d0a 2020  urn result....  
+000097a0: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
+000097b0: 0a20 2020 2064 6566 205f 5244 554d 5028  .    def _RDUMP(
+000097c0: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
+000097d0: 0a20 2020 2020 2020 2044 6973 706c 6179  .        Display
+000097e0: 7320 746f 2073 6572 7665 7227 7320 7374  s to server's st
+000097f0: 646f 7574 0d0a 0d0a 2020 2020 2020 2020  dout....        
+00009800: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
+00009810: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
+00009820: 2020 546f 7461 6c20 7369 7a65 206f 6620    Total size of 
+00009830: 6974 656d 7320 6e6f 7420 696e 2075 7365  items not in use
+00009840: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00009850: 2020 2020 2020 2072 6574 7572 6e20 7263         return rc
+00009860: 2e52 6563 7963 6c65 4475 6d70 2829 0d0a  .RecycleDump()..
+00009870: 0d0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
+00009880: 686f 640d 0a20 2020 2064 6566 205f 4743  hod..    def _GC
+00009890: 4e4f 5728 7469 6d65 6f75 743a 2069 6e74  NOW(timeout: int
+000098a0: 203d 2030 293a 0d0a 2020 2020 2020 2020   = 0):..        
+000098b0: 2222 220d 0a20 2020 2020 2020 2050 6173  """..        Pas
+000098c0: 7320 7468 6520 6761 7262 6167 6520 636f  s the garbage co
+000098d0: 6c6c 6563 746f 7220 7469 6d65 6f75 7420  llector timeout 
+000098e0: 7661 6c75 6520 746f 2063 6c65 616e 7570  value to cleanup
+000098f0: 2e0d 0a20 2020 2020 2020 2050 6173 7369  ...        Passi
+00009900: 6e67 2030 2077 696c 6c20 666f 7263 6520  ng 0 will force 
+00009910: 616e 2069 6d6d 6564 6961 7465 2067 6172  an immediate gar
+00009920: 6261 6765 2063 6f6c 6c65 6374 696f 6e2e  bage collection.
+00009930: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
+00009940: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
+00009950: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4469  ----..        Di
+00009960: 6374 696f 6e61 7279 206f 6620 6d65 6d6f  ctionary of memo
+00009970: 7279 2068 6575 7269 7374 6963 7320 696e  ry heuristics in
+00009980: 636c 7564 696e 6720 2754 6f74 616c 4465  cluding 'TotalDe
+00009990: 6c65 7465 6427 0d0a 2020 2020 2020 2020  leted'..        
+000099a0: 2222 220d 0a20 2020 2020 2020 2069 6d70  """..        imp
+000099b0: 6f72 7420 6763 0d0a 0d0a 2020 2020 2020  ort gc....      
+000099c0: 2020 6763 2e63 6f6c 6c65 6374 2829 0d0a    gc.collect()..
+000099d0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+000099e0: 2072 632e 5265 6379 636c 6547 6172 6261   rc.RecycleGarba
+000099f0: 6765 436f 6c6c 6563 744e 6f77 2874 696d  geCollectNow(tim
+00009a00: 656f 7574 290d 0a20 2020 2020 2020 2074  eout)..        t
+00009a10: 6f74 616c 4465 6c65 7465 6420 3d20 7265  otalDeleted = re
+00009a20: 7375 6c74 5b22 546f 7461 6c44 656c 6574  sult["TotalDelet
+00009a30: 6564 225d 0d0a 2020 2020 2020 2020 6966  ed"]..        if
+00009a40: 2074 6f74 616c 4465 6c65 7465 6420 3e20   totalDeleted > 
+00009a50: 303a 0d0a 2020 2020 2020 2020 2020 2020  0:..            
+00009a60: 4661 7374 4172 7261 792e 5f47 434e 4f57  FastArray._GCNOW
+00009a70: 2874 696d 656f 7574 290d 0a20 2020 2020  (timeout)..     
+00009a80: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
+00009a90: 0d0a 0d0a 2020 2020 4073 7461 7469 636d  ....    @staticm
+00009aa0: 6574 686f 640d 0a20 2020 2064 6566 205f  ethod..    def _
+00009ab0: 4743 5345 5428 7469 6d65 6f75 743a 2069  GCSET(timeout: i
+00009ac0: 6e74 203d 2031 3030 293a 0d0a 2020 2020  nt = 100):..    
+00009ad0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00009ae0: 2050 6173 7320 7468 6520 6761 7262 6167   Pass the garbag
+00009af0: 6520 636f 6c6c 6563 746f 7220 7469 6d65  e collector time
+00009b00: 6f75 7420 7661 6c75 6520 746f 2065 7870  out value to exp
+00009b10: 6972 650d 0a20 2020 2020 2020 2054 6865  ire..        The
+00009b20: 2074 696d 656f 7574 2076 616c 7565 2069   timeout value i
+00009b30: 7320 726f 7567 686c 7920 696e 2032 2f35  s roughly in 2/5
+00009b40: 2073 6563 730d 0a20 2020 2020 2020 2041   secs..        A
+00009b50: 2076 616c 7565 206f 6620 3130 3020 6973   value of 100 is
+00009b60: 2075 7375 616c 6c79 2061 626f 7574 2034   usually about 4
+00009b70: 3020 7365 636f 6e64 730d 0a0d 0a20 2020  0 seconds....   
+00009b80: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
+00009b90: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+00009ba0: 2020 2020 2020 2050 7265 7669 6f75 7320         Previous 
+00009bb0: 7469 6d65 7370 616e 0d0a 2020 2020 2020  timespan..      
+00009bc0: 2020 2222 220d 0a20 2020 2020 2020 2072    """..        r
+00009bd0: 6574 7572 6e20 7263 2e52 6563 7963 6c65  eturn rc.Recycle
+00009be0: 5365 7447 6172 6261 6765 436f 6c6c 6563  SetGarbageCollec
+00009bf0: 7454 696d 656f 7574 2874 696d 656f 7574  tTimeout(timeout
+00009c00: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
+00009c10: 6d65 7468 6f64 0d0a 2020 2020 6465 6620  method..    def 
+00009c20: 5f4c 4f4e 2829 3a0d 0a20 2020 2020 2020  _LON():..       
+00009c30: 2022 2222 5475 726e 2074 6865 206d 6174   """Turn the mat
+00009c40: 6820 6c65 6467 6572 206f 6e20 746f 2072  h ledger on to r
+00009c50: 6563 6f72 6420 616c 6c20 6172 7261 7920  ecord all array 
+00009c60: 6d61 7468 2072 6f75 7469 6e65 7322 2222  math routines"""
+00009c70: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00009c80: 2054 7970 6552 6567 6973 7465 722e 4d61   TypeRegister.Ma
+00009c90: 7468 4c65 6467 6572 2e5f 4c65 6467 6572  thLedger._Ledger
+00009ca0: 4f6e 2829 0d0a 0d0a 2020 2020 4073 7461  On()....    @sta
+00009cb0: 7469 636d 6574 686f 640d 0a20 2020 2064  ticmethod..    d
+00009cc0: 6566 205f 4c4f 4646 2829 3a0d 0a20 2020  ef _LOFF():..   
+00009cd0: 2020 2020 2022 2222 5475 726e 2074 6865       """Turn the
+00009ce0: 206d 6174 6820 6c65 6467 6572 206f 6666   math ledger off
+00009cf0: 2222 220d 0a20 2020 2020 2020 2072 6574  """..        ret
+00009d00: 7572 6e20 5479 7065 5265 6769 7374 6572  urn TypeRegister
+00009d10: 2e4d 6174 684c 6564 6765 722e 5f4c 6564  .MathLedger._Led
+00009d20: 6765 724f 6666 2829 0d0a 0d0a 2020 2020  gerOff()....    
+00009d30: 4073 7461 7469 636d 6574 686f 640d 0a20  @staticmethod.. 
+00009d40: 2020 2064 6566 205f 4c44 554d 5028 6461     def _LDUMP(da
+00009d50: 7461 7365 743d 5472 7565 293a 0d0a 2020  taset=True):..  
+00009d60: 2020 2020 2020 2222 2250 7269 6e74 206f        """Print o
+00009d70: 7574 2074 6865 206d 6174 6820 6c65 6467  ut the math ledg
+00009d80: 6572 2222 220d 0a20 2020 2020 2020 2072  er"""..        r
+00009d90: 6574 7572 6e20 5479 7065 5265 6769 7374  eturn TypeRegist
+00009da0: 6572 2e4d 6174 684c 6564 6765 722e 5f4c  er.MathLedger._L
+00009db0: 6564 6765 7244 756d 7028 6461 7461 7365  edgerDump(datase
+00009dc0: 743d 6461 7461 7365 7429 0d0a 0d0a 2020  t=dataset)....  
+00009dd0: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
+00009de0: 0a20 2020 2064 6566 205f 4c44 554d 5046  .    def _LDUMPF
+00009df0: 2866 696c 656e 616d 6529 3a0d 0a20 2020  (filename):..   
+00009e00: 2020 2020 2022 2222 5361 7665 2074 6865       """Save the
+00009e10: 206d 6174 6820 6c65 6467 6572 2074 6f20   math ledger to 
+00009e20: 6120 6669 6c65 2222 220d 0a20 2020 2020  a file"""..     
+00009e30: 2020 2072 6574 7572 6e20 5479 7065 5265     return TypeRe
+00009e40: 6769 7374 6572 2e4d 6174 684c 6564 6765  gister.MathLedge
+00009e50: 722e 5f4c 6564 6765 7244 756d 7046 696c  r._LedgerDumpFil
+00009e60: 6528 6669 6c65 6e61 6d65 290d 0a0d 0a20  e(filename).... 
+00009e70: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+00009e80: 0d0a 2020 2020 6465 6620 5f4c 434c 4541  ..    def _LCLEA
+00009e90: 5228 293a 0d0a 2020 2020 2020 2020 2222  R():..        ""
+00009ea0: 2243 6c65 6172 2061 6c6c 2074 6865 2065  "Clear all the e
+00009eb0: 6e74 7269 6573 2069 6e20 7468 6520 6d61  ntries in the ma
+00009ec0: 7468 206c 6564 6765 7222 2222 0d0a 2020  th ledger"""..  
+00009ed0: 2020 2020 2020 7265 7475 726e 2054 7970        return Typ
+00009ee0: 6552 6567 6973 7465 722e 4d61 7468 4c65  eRegister.MathLe
+00009ef0: 6467 6572 2e5f 4c65 6467 6572 436c 6561  dger._LedgerClea
+00009f00: 7228 290d 0a0d 0a20 2020 2023 202d 2d2d  r()....    # ---
+00009f10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009f20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009f30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009f40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009f50: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
+00009f60: 205f 5f73 6574 6974 656d 5f5f 2873 656c   __setitem__(sel
+00009f70: 662c 2066 6c64 2c20 7661 6c75 6529 3a0d  f, fld, value):.
+00009f80: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00009f90: 2020 2020 2020 5573 6564 206f 6e20 7468        Used on th
+00009fa0: 6520 6c65 6674 2068 616e 6420 7369 6465  e left hand side
+00009fb0: 206f 660d 0a20 2020 2020 2020 2061 7272   of..        arr
+00009fc0: 5b66 6c64 5d20 3d20 7661 6c75 650d 0a0d  [fld] = value...
+00009fd0: 0a20 2020 2020 2020 2054 6869 7320 726f  .        This ro
+00009fe0: 7574 696e 6520 7472 6965 7320 746f 2063  utine tries to c
+00009ff0: 6f6e 7665 7274 2069 6e76 616c 6964 2064  onvert invalid d
+0000a000: 7479 7065 7320 746f 2074 6861 7420 696e  types to that in
+0000a010: 7661 6c69 6473 2061 7265 2070 7265 7365  valids are prese
+0000a020: 7276 6564 2077 6865 6e20 7365 7474 696e  rved when settin
+0000a030: 670d 0a20 2020 2020 2020 2054 6865 206d  g..        The m
+0000a040: 6273 6574 2070 6f72 7469 6f6e 206f 6620  bset portion of 
+0000a050: 7468 6973 2069 7320 6e6f 2077 7269 7474  this is no writt
+0000a060: 656e 2028 7768 6963 6820 7769 6c6c 206e  en (which will n
+0000a070: 6f74 2072 6169 7365 2061 6e20 696e 6465  ot raise an inde
+0000a080: 7865 7272 6f72 206f 6e20 6f75 7420 6f66  xerror on out of
+0000a090: 2062 6f75 6e64 7329 0d0a 0d0a 2020 2020   bounds)....    
+0000a0a0: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
+0000a0b0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+0000a0c0: 2d2d 0d0a 2020 2020 2020 2020 666c 643a  --..        fld:
+0000a0d0: 2073 6361 6c61 722c 2062 6f6f 6c65 616e   scalar, boolean
+0000a0e0: 2c20 6661 6e63 7920 696e 6465 7820 6d61  , fancy index ma
+0000a0f0: 736b 2c20 736c 6963 652c 2073 6571 7565  sk, slice, seque
+0000a100: 6e63 652c 206f 7220 6c69 7374 0d0a 2020  nce, or list..  
+0000a110: 2020 2020 2020 7661 6c75 653a 2073 6361        value: sca
+0000a120: 6c61 722c 2073 6571 7565 6e63 6520 6f72  lar, sequence or
+0000a130: 2064 6174 6173 6574 2076 616c 7565 2061   dataset value a
+0000a140: 7320 666f 6c6c 6f77 730d 0a20 2020 2020  s follows..     
+0000a150: 2020 2020 2020 2020 2020 2073 6571 7565             seque
+0000a160: 6e63 6520 6361 6e20 6265 206c 6973 742c  nce can be list,
+0000a170: 2074 7570 6c65 2c20 6e70 2e6e 6461 7272   tuple, np.ndarr
+0000a180: 6179 2c20 4661 7374 4172 7261 790d 0a0d  ay, FastArray...
+0000a190: 0a20 2020 2020 2020 2052 6169 7365 730d  .        Raises.
+0000a1a0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d0d  .        ------.
+0000a1b0: 0a20 2020 2020 2020 2049 6e64 6578 4572  .        IndexEr
+0000a1c0: 726f 720d 0a0d 0a20 2020 2020 2020 2022  ror....        "
+0000a1d0: 2222 0d0a 2020 2020 2020 2020 6e65 7776  ""..        newv
+0000a1e0: 616c 7565 203d 204e 6f6e 650d 0a0d 0a20  alue = None.... 
+0000a1f0: 2020 2020 2020 2023 2074 7279 2074 6f20         # try to 
+0000a200: 6d61 6b65 2061 6e20 6172 7261 792c 2065  make an array, e
+0000a210: 7665 6e20 6966 2061 7272 6179 206f 6620  ven if array of 
+0000a220: 310d 0a20 2020 2020 2020 2069 6620 6e70  1..        if np
+0000a230: 2e69 7373 6361 6c61 7228 7661 6c75 6529  .isscalar(value)
+0000a240: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
+0000a250: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
+0000a260: 2876 616c 7565 2c20 2873 7472 2c20 6279  (value, (str, by
+0000a270: 7465 732c 206e 702e 6279 7465 735f 2c20  tes, np.bytes_, 
+0000a280: 6e70 2e73 7472 5f29 293a 0d0a 2020 2020  np.str_)):..    
+0000a290: 2020 2020 2020 2020 2020 2020 2320 636f              # co
+0000a2a0: 6e76 6572 7420 746f 2061 7272 6179 206f  nvert to array o
+0000a2b0: 6620 3120 6974 656d 0d0a 2020 2020 2020  f 1 item..      
+0000a2c0: 2020 2020 2020 2020 2020 6e65 7776 616c            newval
+0000a2d0: 7565 203d 2046 6173 7441 7272 6179 285b  ue = FastArray([
+0000a2e0: 7661 6c75 655d 290d 0a20 2020 2020 2020  value])..       
+0000a2f0: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+0000a300: 2876 616c 7565 2c20 286c 6973 742c 2074  (value, (list, t
+0000a310: 7570 6c65 2929 3a0d 0a20 2020 2020 2020  uple)):..       
+0000a320: 2020 2020 2023 2063 6f6e 7665 7274 2074       # convert t
+0000a330: 6f20 6e75 6d70 7920 6172 7261 790d 0a20  o numpy array.. 
+0000a340: 2020 2020 2020 2020 2020 206e 6577 7661             newva
+0000a350: 6c75 6520 3d20 4661 7374 4172 7261 7928  lue = FastArray(
+0000a360: 7661 6c75 652c 2075 6e69 636f 6465 3d54  value, unicode=T
+0000a370: 7275 6529 0d0a 2020 2020 2020 2020 656c  rue)..        el
+0000a380: 6966 2069 7369 6e73 7461 6e63 6528 7661  if isinstance(va
+0000a390: 6c75 652c 206e 702e 6e64 6172 7261 7929  lue, np.ndarray)
+0000a3a0: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
+0000a3b0: 206a 7573 7420 7265 6665 7265 6e63 6520   just reference 
+0000a3c0: 6974 0d0a 2020 2020 2020 2020 2020 2020  it..            
+0000a3d0: 6e65 7776 616c 7565 203d 2076 616c 7565  newvalue = value
+0000a3e0: 0d0a 0d0a 2020 2020 2020 2020 6966 206e  ....        if n
+0000a3f0: 6577 7661 6c75 6520 6973 206e 6f74 204e  ewvalue is not N
+0000a400: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+0000a410: 2020 2320 6e6f 7720 7765 2068 6176 6520    # now we have 
+0000a420: 6120 6e75 6d70 7920 6172 7261 792e 2e20  a numpy array.. 
+0000a430: 636f 6e76 6572 7420 7468 6520 6474 7970  convert the dtyp
+0000a440: 6520 746f 206d 6174 6368 2075 730d 0a20  e to match us.. 
+0000a450: 2020 2020 2020 2020 2020 2023 2074 6869             # thi
+0000a460: 7320 7368 6f75 6c64 2074 616b 6520 6361  s should take ca
+0000a470: 7265 206f 6620 696e 7661 6c69 6473 0d0a  re of invalids..
+0000a480: 2020 2020 2020 2020 2020 2020 2320 636f              # co
+0000a490: 6e76 6572 7420 6669 7273 7420 3134 2063  nvert first 14 c
+0000a4a0: 6f6d 6d6f 6e20 7479 7065 7320 2862 6f6f  ommon types (boo
+0000a4b0: 6c2c 2069 6e74 732c 2066 6c6f 6174 7329  l, ints, floats)
+0000a4c0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+0000a4d0: 206e 6577 7661 6c75 652e 6474 7970 6520   newvalue.dtype 
+0000a4e0: 213d 2073 656c 662e 6474 7970 6520 616e  != self.dtype an
+0000a4f0: 6420 6e65 7776 616c 7565 2e64 7479 7065  d newvalue.dtype
+0000a500: 2e6e 756d 203c 3d20 3133 3a0d 0a20 2020  .num <= 13:..   
+0000a510: 2020 2020 2020 2020 2020 2020 206e 6577               new
+0000a520: 7661 6c75 6520 3d20 6e65 7776 616c 7565  value = newvalue
+0000a530: 2e61 7374 7970 6528 7365 6c66 2e64 7479  .astype(self.dty
+0000a540: 7065 290d 0a0d 0a20 2020 2020 2020 2020  pe)....         
+0000a550: 2020 2023 2063 6865 636b 2066 6f72 2062     # check for b
+0000a560: 6f6f 6c65 616e 2061 7272 6179 2073 696e  oolean array sin
+0000a570: 6365 2077 6520 646f 206e 6f74 2068 616e  ce we do not han
+0000a580: 646c 6520 6661 6e63 7920 696e 6465 7820  dle fancy index 
+0000a590: 7965 740d 0a20 2020 2020 2020 2020 2020  yet..           
+0000a5a0: 2069 6620 6973 696e 7374 616e 6365 2866   if isinstance(f
+0000a5b0: 6c64 2c20 6e70 2e6e 6461 7272 6179 2920  ld, np.ndarray) 
+0000a5c0: 616e 6420 666c 642e 6474 7970 652e 6e75  and fld.dtype.nu
+0000a5d0: 6d20 3d3d 2030 3a0d 0a20 2020 2020 2020  m == 0:..       
+0000a5e0: 2020 2020 2020 2020 2069 735f 756e 7375           is_unsu
+0000a5f0: 7070 6f72 7465 6420 3d20 7365 6c66 2e5f  pported = self._
+0000a600: 6973 5f6e 6f74 5f73 7570 706f 7274 6564  is_not_supported
+0000a610: 286e 6577 7661 6c75 6529 0d0a 2020 2020  (newvalue)..    
+0000a620: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0000a630: 735f 756e 7375 7070 6f72 7465 643a 0d0a  s_unsupported:..
 0000a640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a650: 6e65 7776 616c 7565 203d 206e 6577 7661  newvalue = newva
-0000a660: 6c75 652e 636f 7079 2829 0d0a 2020 2020  lue.copy()..    
-0000a670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a680: 2320 7265 2d74 6573 7420 7375 7070 6f72  # re-test suppor
-0000a690: 742c 206a 7573 7420 746f 2062 6520 7375  t, just to be su
-0000a6a0: 7265 2e0d 0a20 2020 2020 2020 2020 2020  re...           
-0000a6b0: 2020 2020 2020 2020 2069 735f 756e 7375           is_unsu
-0000a6c0: 7070 6f72 7465 6420 3d20 7365 6c66 2e5f  pported = self._
-0000a6d0: 6973 5f6e 6f74 5f73 7570 706f 7274 6564  is_not_supported
-0000a6e0: 286e 6577 7661 6c75 6529 0d0a 0d0a 2020  (newvalue)....  
-0000a6f0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000a700: 6966 2073 7570 706f 7274 6564 2c20 6361  if supported, ca
-0000a710: 6c6c 206f 7572 2073 6574 6974 656d 2c20  ll our setitem, 
-0000a720: 6974 2077 696c 6c20 7265 7475 726e 2046  it will return F
-0000a730: 616c 7365 2069 6620 6974 2066 6169 6c73  alse if it fails
-0000a740: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a750: 2020 6966 206e 6f74 2069 735f 756e 7375    if not is_unsu
-0000a760: 7070 6f72 7465 643a 0d0a 2020 2020 2020  pported:..      
-0000a770: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0000a780: 2072 632e 5365 7449 7465 6d28 7365 6c66   rc.SetItem(self
-0000a790: 2c20 666c 642c 206e 6577 7661 6c75 6529  , fld, newvalue)
-0000a7a0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000a7b0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0000a7c0: 6e0d 0a20 2020 2020 2020 2020 2020 2074  n..            t
-0000a7d0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
-0000a7e0: 2020 2020 206e 702e 6e64 6172 7261 792e       np.ndarray.
-0000a7f0: 5f5f 7365 7469 7465 6d5f 5f28 7365 6c66  __setitem__(self
-0000a800: 2c20 666c 642c 206e 6577 7661 6c75 6529  , fld, newvalue)
-0000a810: 0d0a 2020 2020 2020 2020 2020 2020 6578  ..            ex
-0000a820: 6365 7074 2045 7863 6570 7469 6f6e 3a0d  cept Exception:.
-0000a830: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a840: 2023 206f 6464 2062 616c 6c20 6361 7365   # odd ball case
-0000a850: 7320 6861 6e64 6c65 6420 6865 7265 206c  s handled here l
-0000a860: 696b 6520 7566 756e 6320 7465 7374 730d  ike ufunc tests.
-0000a870: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a880: 206e 702e 6e64 6172 7261 792e 5f5f 7365   np.ndarray.__se
-0000a890: 7469 7465 6d5f 5f28 7365 6c66 2c20 666c  titem__(self, fl
-0000a8a0: 642c 2076 616c 7565 290d 0a20 2020 2020  d, value)..     
-0000a8b0: 2020 2020 2020 2072 6574 7572 6e0d 0a0d         return...
-0000a8c0: 0a20 2020 2020 2020 2023 2070 756e 7420  .        # punt 
-0000a8d0: 746f 206e 6f72 6d61 6c20 6e75 6d70 790d  to normal numpy.
-0000a8e0: 0a20 2020 2020 2020 206e 702e 6e64 6172  .        np.ndar
-0000a8f0: 7261 792e 5f5f 7365 7469 7465 6d5f 5f28  ray.__setitem__(
-0000a900: 7365 6c66 2c20 666c 642c 2076 616c 7565  self, fld, value
-0000a910: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
-0000a920: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000a930: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000a940: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000a950: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000a960: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 205f  -----..    def _
-0000a970: 5f67 6574 6974 656d 5f5f 2873 656c 662c  _getitem__(self,
-0000a980: 2066 6c64 2920 2d3e 2046 6173 7441 7272   fld) -> FastArr
-0000a990: 6179 3a0d 0a20 2020 2020 2020 2022 2222  ay:..        """
-0000a9a0: 0d0a 2020 2020 2020 2020 7269 7074 6162  ..        riptab
-0000a9b0: 6c65 2068 6173 2073 7065 6369 616c 2072  le has special r
-0000a9c0: 6f75 7469 6e65 7320 746f 2068 616e 646c  outines to handl
-0000a9d0: 6520 6172 7261 7920 696e 7075 7420 696e  e array input in
-0000a9e0: 2074 6865 2069 6e64 6578 6572 2e0d 0a20   the indexer... 
-0000a9f0: 2020 2020 2020 2045 7665 7279 7468 696e         Everythin
-0000aa00: 6720 656c 7365 2077 696c 6c20 676f 2074  g else will go t
-0000aa10: 6f20 6e75 6d70 7920 6765 7469 7465 6d2e  o numpy getitem.
-0000aa20: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-0000aa30: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-0000aa40: 616e 6365 2866 6c64 2c20 6e70 2e6e 6461  ance(fld, np.nda
-0000aa50: 7272 6179 293a 0d0a 2020 2020 2020 2020  rray):..        
-0000aa60: 2020 2020 2320 7265 7375 6c74 3d20 7375      # result= su
-0000aa70: 7065 7228 4661 7374 4172 7261 792c 2073  per(FastArray, s
-0000aa80: 656c 6629 2e5f 5f67 6574 6974 656d 5f5f  elf).__getitem__
-0000aa90: 2866 6c64 292e 7669 6577 2846 6173 7441  (fld).view(FastA
-0000aaa0: 7272 6179 290d 0a20 2020 2020 2020 2020  rray)..         
-0000aab0: 2020 2069 6620 666c 642e 6474 7970 6520     if fld.dtype 
-0000aac0: 3d3d 206e 702e 626f 6f6c 5f3a 0d0a 2020  == np.bool_:..  
-0000aad0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000aae0: 6d61 6b65 2073 7572 6520 6e6f 2073 7472  make sure no str
-0000aaf0: 6964 696e 670d 0a20 2020 2020 2020 2020  iding..         
-0000ab00: 2020 2020 2020 2023 204e 4f54 453a 2077         # NOTE: w
-0000ab10: 696c 6c20 6661 696c 206f 6e20 7365 6c66  ill fail on self
-0000ab20: 2e64 7479 7065 2e62 7974 656f 7264 6572  .dtype.byteorder
-0000ab30: 2061 7320 6c69 7474 6c65 2065 6e64 6961   as little endia
-0000ab40: 6e0d 0a20 2020 2020 2020 2020 2020 2020  n..             
-0000ab50: 2020 2069 6620 7365 6c66 2e66 6c61 6773     if self.flags
-0000ab60: 2e66 5f63 6f6e 7469 6775 6f75 733a 0d0a  .f_contiguous:..
-0000ab70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab80: 2020 2020 2320 6469 6d65 6e73 696f 6e73      # dimensions
-0000ab90: 206d 7573 7420 6d61 7463 680d 0a20 2020   must match..   
-0000aba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000abb0: 2069 6620 7365 6c66 2e6e 6469 6d20 3d3d   if self.ndim ==
-0000abc0: 2066 6c64 2e6e 6469 6d20 616e 6420 7365   fld.ndim and se
-0000abd0: 6c66 2e6e 6469 6d20 3d3d 2031 3a0d 0a20  lf.ndim == 1:.. 
-0000abe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000abf0: 2020 2020 2020 2072 6574 7572 6e20 5479         return Ty
-0000ac00: 7065 5265 6769 7374 6572 2e4d 6174 684c  peRegister.MathL
-0000ac10: 6564 6765 722e 5f49 4e44 4558 5f42 4f4f  edger._INDEX_BOO
-0000ac20: 4c28 7365 6c66 2c20 666c 6429 0d0a 0d0a  L(self, fld)....
-0000ac30: 2020 2020 2020 2020 2020 2020 2320 6966              # if
-0000ac40: 2077 6520 6861 7665 2066 616e 6379 2069   we have fancy i
-0000ac50: 6e64 6578 696e 6720 616e 6420 7765 2073  ndexing and we s
-0000ac60: 7570 706f 7274 2074 6865 2061 7272 6179  upport the array
-0000ac70: 2074 7970 652c 206d 616b 6520 7375 7265   type, make sure
-0000ac80: 2077 6520 646f 206e 6f74 2068 6176 6520   we do not have 
-0000ac90: 7374 7269 6465 2070 726f 626c 656d 0d0a  stride problem..
-0000aca0: 2020 2020 2020 2020 2020 2020 6966 2066              if f
-0000acb0: 6c64 2e64 7479 7065 2e63 6861 7220 696e  ld.dtype.char in
-0000acc0: 204e 756d 7079 4368 6172 5479 7065 732e   NumpyCharTypes.
-0000acd0: 416c 6c49 6e74 6567 6572 2061 6e64 2073  AllInteger and s
-0000ace0: 656c 662e 6474 7970 652e 6368 6172 2069  elf.dtype.char i
-0000acf0: 6e20 4e75 6d70 7943 6861 7254 7970 6573  n NumpyCharTypes
-0000ad00: 2e53 7570 706f 7274 6564 416c 7465 726e  .SupportedAltern
-0000ad10: 6174 653a 0d0a 2020 2020 2020 2020 2020  ate:..          
-0000ad20: 2020 2020 2020 6966 2073 656c 662e 666c        if self.fl
-0000ad30: 6167 732e 665f 636f 6e74 6967 756f 7573  ags.f_contiguous
-0000ad40: 2061 6e64 2066 6c64 2e66 6c61 6773 2e66   and fld.flags.f
-0000ad50: 5f63 6f6e 7469 6775 6f75 733a 0d0a 2020  _contiguous:..  
-0000ad60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad70: 2020 6966 206c 656e 2873 656c 662e 7368    if len(self.sh
-0000ad80: 6170 6529 203d 3d20 313a 0d0a 2020 2020  ape) == 1:..    
-0000ad90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ada0: 2020 2020 7265 7475 726e 2054 7970 6552      return TypeR
-0000adb0: 6567 6973 7465 722e 4d61 7468 4c65 6467  egister.MathLedg
-0000adc0: 6572 2e5f 4d42 4745 5428 7365 6c66 2c20  er._MBGET(self, 
-0000add0: 666c 6429 0d0a 0d0a 2020 2020 2020 2020  fld)....        
-0000ade0: 2020 2020 7265 7375 6c74 203d 2054 7970      result = Typ
-0000adf0: 6552 6567 6973 7465 722e 4d61 7468 4c65  eRegister.MathLe
-0000ae00: 6467 6572 2e5f 4745 5449 5445 4d28 7375  dger._GETITEM(su
-0000ae10: 7065 7228 4661 7374 4172 7261 792c 2073  per(FastArray, s
-0000ae20: 656c 6629 2c20 666c 6429 0d0a 2020 2020  elf), fld)..    
-0000ae30: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-0000ae40: 6573 756c 742e 7669 6577 2846 6173 7441  esult.view(FastA
-0000ae50: 7272 6179 290d 0a20 2020 2020 2020 2065  rray)..        e
-0000ae60: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-0000ae70: 2020 2320 636f 756c 6420 6265 2061 206c    # could be a l
-0000ae80: 6973 7420 7768 6963 6820 6973 206f 6674  ist which is oft
-0000ae90: 656e 2063 6f6e 7665 7274 6564 2074 6f20  en converted to 
-0000aea0: 616e 2061 7272 6179 0d0a 0d0a 2020 2020  an array....    
-0000aeb0: 2020 2020 2020 2020 2320 5468 6973 2061          # This a
-0000aec0: 7373 756d 6573 2074 6861 7420 4661 7374  ssumes that Fast
-0000aed0: 4172 7261 7920 6861 7320 6120 736f 6c65  Array has a sole
-0000aee0: 2070 6172 656e 742c 206e 702e 6e64 6172   parent, np.ndar
-0000aef0: 7261 790d 0a20 2020 2020 2020 2020 2020  ray..           
-0000af00: 2023 2049 6620 7468 6973 2063 6861 6e67   # If this chang
-0000af10: 6573 2c20 7468 6520 7375 7065 7228 2920  es, the super() 
-0000af20: 6361 6c6c 206e 6565 6473 2074 6f20 6265  call needs to be
-0000af30: 2075 7365 640d 0a20 2020 2020 2020 2020   used..         
-0000af40: 2020 2072 6574 7572 6e20 6e70 2e6e 6461     return np.nda
-0000af50: 7272 6179 2e5f 5f67 6574 6974 656d 5f5f  rray.__getitem__
-0000af60: 2873 656c 662c 2066 6c64 290d 0a20 2020  (self, fld)..   
-0000af70: 2020 2020 2020 2020 2023 2072 6574 7572           # retur
-0000af80: 6e20 7375 7065 7228 4661 7374 4172 7261  n super(FastArra
-0000af90: 792c 2073 656c 6629 2e5f 5f67 6574 6974  y, self).__getit
-0000afa0: 656d 5f5f 2866 6c64 290d 0a0d 0a20 2020  em__(fld)....   
-0000afb0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
-0000afc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000afd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000afe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000aff0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
-0000b000: 2020 2064 6566 2064 6973 706c 6179 5f71     def display_q
-0000b010: 7565 7279 5f70 726f 7065 7274 6965 7328  uery_properties(
-0000b020: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-0000b030: 2222 220d 0a20 2020 2020 2020 2052 6574  """..        Ret
-0000b040: 7572 6e73 2061 6e20 4974 656d 466f 726d  urns an ItemForm
-0000b050: 6174 206f 626a 6563 7420 616e 6420 6120  at object and a 
-0000b060: 6675 6e63 7469 6f6e 2066 6f72 2063 6f6e  function for con
-0000b070: 7665 7274 696e 6720 7468 6520 4661 7374  verting the Fast
-0000b080: 4172 7261 7973 2069 7465 6d73 2074 6f20  Arrays items to 
-0000b090: 7374 7269 6e67 732e 0d0a 2020 2020 2020  strings...      
-0000b0a0: 2020 4261 7369 6320 7479 7065 733a 2042    Basic types: B
-0000b0b0: 6f6f 6c2c 2049 6e74 2c20 466c 6f61 742c  ool, Int, Float,
-0000b0c0: 2042 7974 6573 2c20 5374 7269 6e67 2061   Bytes, String a
-0000b0d0: 6c6c 2068 6176 6520 6465 6661 756c 7420  ll have default 
-0000b0e0: 666f 726d 6174 7320 2f20 636f 6e76 6572  formats / conver
-0000b0f0: 7369 6f6e 2066 756e 6374 696f 6e73 2e0d  sion functions..
-0000b100: 0a20 2020 2020 2020 2028 7365 6520 5574  .        (see Ut
-0000b110: 696c 732e 7274 5f64 6973 706c 6179 5f70  ils.rt_display_p
-0000b120: 726f 7065 7274 6965 7329 0d0a 0d0a 2020  roperties)....  
-0000b130: 2020 2020 2020 4966 2061 206e 6577 2074        If a new t
-0000b140: 7970 6520 6973 2061 2073 7562 636c 6173  ype is a subclas
-0000b150: 7320 6f66 2046 6173 7441 7272 6179 2061  s of FastArray a
-0000b160: 6e64 206e 6565 6473 2074 6f20 6265 2064  nd needs to be d
-0000b170: 6973 706c 6179 6564 2069 6e20 666f 726d  isplayed in form
-0000b180: 6174 0d0a 2020 2020 2020 2020 6469 6666  at..        diff
-0000b190: 6572 656e 7420 6672 6f6d 2069 7473 2075  erent from its u
-0000b1a0: 6e64 6572 6c79 696e 6720 7479 7065 2c20  nderlying type, 
-0000b1b0: 6974 2077 696c 6c20 6e65 6564 2074 6f20  it will need to 
-0000b1c0: 7461 6b65 206f 7665 7220 7468 6973 2072  take over this r
-0000b1d0: 6f75 7469 6e65 2e0d 0a20 2020 2020 2020  outine...       
-0000b1e0: 2022 2222 0d0a 2020 2020 2020 2020 6172   """..        ar
-0000b1f0: 725f 7479 7065 2c20 636f 6e76 6572 745f  r_type, convert_
-0000b200: 6675 6e63 203d 2044 6973 706c 6179 436f  func = DisplayCo
-0000b210: 6e76 6572 742e 6765 745f 6469 7370 6c61  nvert.get_displa
-0000b220: 795f 636f 6e76 6572 7428 7365 6c66 290d  y_convert(self).
-0000b230: 0a20 2020 2020 2020 2064 6973 706c 6179  .        display
-0000b240: 5f66 6f72 6d61 7420 3d20 6465 6661 756c  _format = defaul
-0000b250: 745f 6974 656d 5f66 6f72 6d61 7473 2e67  t_item_formats.g
-0000b260: 6574 2861 7272 5f74 7970 652c 2049 7465  et(arr_type, Ite
-0000b270: 6d46 6f72 6d61 7428 2929 0d0a 2020 2020  mFormat())..    
-0000b280: 2020 2020 6966 206c 656e 2873 656c 662e      if len(self.
-0000b290: 7368 6170 6529 203e 2031 3a0d 0a20 2020  shape) > 1:..   
-0000b2a0: 2020 2020 2020 2020 2064 6973 706c 6179           display
-0000b2b0: 5f66 6f72 6d61 742e 636f 6e76 6572 7420  _format.convert 
-0000b2c0: 3d20 636f 6e76 6572 745f 6675 6e63 0d0a  = convert_func..
-0000b2d0: 2020 2020 2020 2020 2020 2020 636f 6e76              conv
-0000b2e0: 6572 745f 6675 6e63 203d 2044 6973 706c  ert_func = Displ
-0000b2f0: 6179 436f 6e76 6572 742e 636f 6e76 6572  ayConvert.conver
-0000b300: 744d 756c 7469 4469 6d73 0d0a 0d0a 2020  tMultiDims....  
-0000b310: 2020 2020 2020 2320 6164 6420 7365 6e74        # add sent
-0000b320: 696e 656c 2076 616c 7565 2066 6f72 2069  inel value for i
-0000b330: 6e74 6567 6572 0d0a 2020 2020 2020 2020  nteger..        
-0000b340: 6966 2064 6973 706c 6179 5f66 6f72 6d61  if display_forma
-0000b350: 742e 696e 7661 6c69 6420 6973 204e 6f6e  t.invalid is Non
-0000b360: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0000b370: 6469 7370 6c61 795f 666f 726d 6174 203d  display_format =
-0000b380: 2064 6973 706c 6179 5f66 6f72 6d61 742e   display_format.
-0000b390: 636f 7079 2829 0d0a 2020 2020 2020 2020  copy()..        
-0000b3a0: 2020 2020 6966 2073 656c 662e 6474 7970      if self.dtyp
-0000b3b0: 652e 6368 6172 2069 6e20 4e75 6d70 7943  e.char in NumpyC
-0000b3c0: 6861 7254 7970 6573 2e41 6c6c 496e 7465  harTypes.AllInte
-0000b3d0: 6765 723a 0d0a 2020 2020 2020 2020 2020  ger:..          
-0000b3e0: 2020 2020 2020 6469 7370 6c61 795f 666f        display_fo
-0000b3f0: 726d 6174 2e69 6e76 616c 6964 203d 2049  rmat.invalid = I
-0000b400: 4e56 414c 4944 5f44 4943 545b 7365 6c66  NVALID_DICT[self
-0000b410: 2e64 7479 7065 2e6e 756d 5d0d 0a20 2020  .dtype.num]..   
-0000b420: 2020 2020 2072 6574 7572 6e20 6469 7370       return disp
-0000b430: 6c61 795f 666f 726d 6174 2c20 636f 6e76  lay_format, conv
-0000b440: 6572 745f 6675 6e63 0d0a 0d0a 2020 2020  ert_func....    
-0000b450: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
-0000b460: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b470: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b480: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b490: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
-0000b4a0: 2020 6465 6620 6173 7479 7065 2873 656c    def astype(sel
-0000b4b0: 662c 2064 7479 7065 2c20 6f72 6465 723d  f, dtype, order=
-0000b4c0: 224b 222c 2063 6173 7469 6e67 3d22 756e  "K", casting="un
-0000b4d0: 7361 6665 222c 2073 7562 6f6b 3d54 7275  safe", subok=Tru
-0000b4e0: 652c 2063 6f70 793d 5472 7565 2920 2d3e  e, copy=True) ->
-0000b4f0: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
-0000b500: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-0000b510: 2020 5265 7475 726e 2061 2060 4661 7374    Return a `Fast
-0000b520: 4172 7261 7960 2077 6974 6820 7661 6c75  Array` with valu
-0000b530: 6573 2063 6f6e 7665 7274 6564 2074 6f20  es converted to 
-0000b540: 7468 6520 7370 6563 6966 6965 6420 6461  the specified da
-0000b550: 7461 2074 7970 652e 0d0a 0d0a 2020 2020  ta type.....    
-0000b560: 2020 2020 4368 6563 6b20 796f 7572 2072      Check your r
-0000b570: 6573 756c 7473 2077 6865 6e20 796f 7520  esults when you 
-0000b580: 636f 6e76 6572 7420 6d69 7373 696e 6720  convert missing 
-0000b590: 7661 6c75 6573 2e20 5365 6e74 696e 656c  values. Sentinel
-0000b5a0: 2076 616c 7565 7320 6172 650d 0a20 2020   values are..   
-0000b5b0: 2020 2020 2070 7265 7365 7276 6564 2077       preserved w
-0000b5c0: 6865 6e20 5269 7074 6162 6c65 2068 616e  hen Riptable han
-0000b5d0: 646c 6573 2074 6865 2063 6f6e 7665 7273  dles the convers
-0000b5e0: 696f 6e2e 2048 6f77 6576 6572 2c20 696e  ion. However, in
-0000b5f0: 2073 6f6d 6520 6361 7365 730d 0a20 2020   some cases..   
-0000b600: 2020 2020 2074 6865 2061 7272 6179 2069       the array i
-0000b610: 7320 7365 6e74 2074 6f20 4e75 6d50 7920  s sent to NumPy 
-0000b620: 666f 7220 636f 6e76 6572 7369 6f6e 2061  for conversion a
-0000b630: 6e64 2072 6573 756c 7473 206d 6179 206e  nd results may n
-0000b640: 6f74 2062 6520 7768 6174 0d0a 2020 2020  ot be what..    
-0000b650: 2020 2020 796f 7520 6578 7065 6374 2e0d      you expect..
-0000b660: 0a0d 0a20 2020 2020 2020 2046 6f72 2070  ...        For p
-0000b670: 6172 616d 6574 6572 2064 6573 6372 6970  arameter descrip
-0000b680: 7469 6f6e 732c 2073 6565 203a 7079 3a6d  tions, see :py:m
-0000b690: 6574 683a 606e 756d 7079 2e6e 6461 7272  eth:`numpy.ndarr
-0000b6a0: 6179 2e61 7374 7970 6560 2e20 4e6f 7465  ay.astype`. Note
-0000b6b0: 0d0a 2020 2020 2020 2020 7468 6174 2075  ..        that u
-0000b6c0: 6e74 696c 2061 2072 6570 6f72 7465 6420  ntil a reported 
-0000b6d0: 6275 6720 6973 2066 6978 6564 2c20 7468  bug is fixed, th
-0000b6e0: 6520 6063 6173 7469 6e67 6020 7061 7261  e `casting` para
-0000b6f0: 6d65 7465 7220 6973 2069 676e 6f72 6564  meter is ignored
-0000b700: 0d0a 2020 2020 2020 2020 7768 656e 2052  ..        when R
-0000b710: 6970 7461 626c 6520 6861 6e64 6c65 7320  iptable handles 
-0000b720: 7468 6520 636f 6e76 6572 7369 6f6e 2e0d  the conversion..
-0000b730: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
-0000b740: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
-0000b750: 2d2d 2d0d 0a20 2020 2020 2020 2060 4661  ---..        `Fa
-0000b760: 7374 4172 7261 7960 0d0a 2020 2020 2020  stArray`..      
-0000b770: 2020 2020 2020 4120 6046 6173 7441 7272        A `FastArr
-0000b780: 6179 6020 7769 7468 2076 616c 7565 7320  ay` with values 
-0000b790: 636f 6e76 6572 7465 6420 746f 2074 6865  converted to the
-0000b7a0: 2073 7065 6369 6669 6564 2064 6174 6120   specified data 
-0000b7b0: 7479 7065 2e0d 0a0d 0a20 2020 2020 2020  type.....       
-0000b7c0: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
-0000b7d0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-0000b7e0: 2020 2020 2044 6174 6173 6574 2e61 7374       Dataset.ast
-0000b7f0: 7970 650d 0a0d 0a20 2020 2020 2020 2045  ype....        E
-0000b800: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
-0000b810: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
-0000b820: 2020 203e 3e3e 2061 203d 2072 742e 4661     >>> a = rt.Fa
-0000b830: 7374 4172 7261 7928 5b31 2e37 2c20 322e  stArray([1.7, 2.
-0000b840: 302c 2033 2e30 5d29 0d0a 2020 2020 2020  0, 3.0])..      
-0000b850: 2020 3e3e 3e20 612e 6173 7479 7065 2869    >>> a.astype(i
-0000b860: 6e74 290d 0a20 2020 2020 2020 2046 6173  nt)..        Fas
-0000b870: 7441 7272 6179 285b 312c 2032 2c20 335d  tArray([1, 2, 3]
-0000b880: 290d 0a0d 0a20 2020 2020 2020 2043 6f6e  )....        Con
-0000b890: 7665 7274 2061 2060 4e61 4e60 2074 6f20  vert a `NaN` to 
-0000b8a0: 616e 2060 696e 7460 2073 656e 7469 6e65  an `int` sentine
-0000b8b0: 6c20 616e 6420 6261 636b 3a0d 0a0d 0a20  l and back:.... 
-0000b8c0: 2020 2020 2020 203e 3e3e 2061 203d 2072         >>> a = r
-0000b8d0: 742e 4661 7374 4172 7261 7928 5b72 742e  t.FastArray([rt.
-0000b8e0: 6e61 6e2c 2031 2e30 2c20 322e 305d 290d  nan, 1.0, 2.0]).
-0000b8f0: 0a20 2020 2020 2020 203e 3e3e 2061 5f69  .        >>> a_i
-0000b900: 6e74 203d 2061 2e61 7374 7970 6528 696e  nt = a.astype(in
-0000b910: 7429 0d0a 2020 2020 2020 2020 3e3e 3e20  t)..        >>> 
-0000b920: 615f 696e 740d 0a20 2020 2020 2020 2046  a_int..        F
-0000b930: 6173 7441 7272 6179 285b 2d32 3134 3734  astArray([-21474
-0000b940: 3833 3634 382c 2020 2020 2020 2020 2020  83648,          
-0000b950: 2031 2c20 2020 2020 2020 2020 2020 325d   1,           2]
-0000b960: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
-0000b970: 5f69 6e74 2e61 7374 7970 6528 666c 6f61  _int.astype(floa
-0000b980: 7429 0d0a 2020 2020 2020 2020 4661 7374  t)..        Fast
-0000b990: 4172 7261 7928 5b6e 616e 2c20 2031 2e2c  Array([nan,  1.,
-0000b9a0: 2020 322e 5d29 0d0a 2020 2020 2020 2020    2.])..        
-0000b9b0: 2222 220d 0a20 2020 2020 2020 2023 2072  """..        # r
-0000b9c0: 6573 756c 743d 2073 7570 6572 2846 6173  esult= super(Fas
-0000b9d0: 7441 7272 6179 2c20 7365 6c66 292e 6173  tArray, self).as
-0000b9e0: 7479 7065 2864 7479 7065 2c20 6f72 6465  type(dtype, orde
-0000b9f0: 722c 6361 7374 696e 672c 7375 626f 6b2c  r,casting,subok,
-0000ba00: 636f 7079 290d 0a20 2020 2020 2020 2023  copy)..        #
-0000ba10: 2031 3720 6973 206f 626a 6563 740d 0a20   17 is object.. 
-0000ba20: 2020 2020 2020 2023 2031 3820 3d20 4153         # 18 = AS
-0000ba30: 4349 4920 7374 7269 6e67 0d0a 2020 2020  CII string..    
-0000ba40: 2020 2020 2320 3139 203d 2055 4e49 434f      # 19 = UNICO
-0000ba50: 4445 2073 7472 696e 670d 0a20 2020 2020  DE string..     
-0000ba60: 2020 2074 6f5f 6e75 6d20 3d20 6e70 2e64     to_num = np.d
-0000ba70: 7479 7065 2864 7479 7065 292e 6e75 6d0d  type(dtype).num.
-0000ba80: 0a0d 0a20 2020 2020 2020 2023 2063 6865  ...        # che
-0000ba90: 636b 2066 6f72 2063 6f6e 7469 6775 6f75  ck for contiguou
-0000baa0: 7320 696e 206f 6e65 206f 7220 7477 6f20  s in one or two 
-0000bab0: 6469 6d65 6e73 696f 6e73 0d0a 2020 2020  dimensions..    
-0000bac0: 2020 2020 6966 2073 656c 662e 666c 6167      if self.flag
-0000bad0: 732e 665f 636f 6e74 6967 756f 7573 206f  s.f_contiguous o
-0000bae0: 7220 7365 6c66 2e66 6c61 6773 2e63 5f63  r self.flags.c_c
-0000baf0: 6f6e 7469 6775 6f75 733a 0d0a 2020 2020  ontiguous:..    
-0000bb00: 2020 2020 2020 2020 6966 206f 7264 6572          if order
-0000bb10: 203d 3d20 224b 2220 616e 6420 7375 626f   == "K" and subo
-0000bb20: 6b20 616e 6420 636f 7079 2061 6e64 2073  k and copy and s
-0000bb30: 656c 662e 6474 7970 652e 6e75 6d20 3c3d  elf.dtype.num <=
-0000bb40: 2031 3320 616e 6420 746f 5f6e 756d 203c   13 and to_num <
-0000bb50: 3d20 3133 3a0d 0a20 2020 2020 2020 2020  = 13:..         
-0000bb60: 2020 2020 2020 2023 2070 6572 666f 726d         # perform
-0000bb70: 2061 2073 6166 6520 636f 6e76 6572 7369   a safe conversi
-0000bb80: 6f6e 2075 6e64 6572 7374 616e 6469 6e67  on understanding
-0000bb90: 2073 656e 7469 6e65 6c73 0d0a 2020 2020   sentinels..    
-0000bba0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0000bbb0: 726e 2054 7970 6552 6567 6973 7465 722e  rn TypeRegister.
-0000bbc0: 4d61 7468 4c65 6467 6572 2e5f 4153 5f46  MathLedger._AS_F
-0000bbd0: 415f 5459 5045 2873 656c 662c 2074 6f5f  A_TYPE(self, to_
-0000bbe0: 6e75 6d29 0d0a 0d0a 2020 2020 2020 2020  num)....        
-0000bbf0: 2320 7075 6e74 2074 6f20 6e75 6d70 790d  # punt to numpy.
-0000bc00: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-0000bc10: 3d20 5479 7065 5265 6769 7374 6572 2e4d  = TypeRegister.M
-0000bc20: 6174 684c 6564 6765 722e 5f41 5354 5950  athLedger._ASTYP
-0000bc30: 4528 7375 7065 7228 4661 7374 4172 7261  E(super(FastArra
-0000bc40: 792c 2073 656c 6629 2c20 6474 7970 652c  y, self), dtype,
-0000bc50: 206f 7264 6572 2c20 6361 7374 696e 672c   order, casting,
-0000bc60: 2073 7562 6f6b 2c20 636f 7079 290d 0a20   subok, copy).. 
-0000bc70: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-0000bc80: 7375 6c74 2e76 6965 7728 4661 7374 4172  sult.view(FastAr
-0000bc90: 7261 7929 0d0a 0d0a 2020 2020 2320 2d2d  ray)....    # --
-0000bca0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bcb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bcc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bcd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bce0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 6465  --------..    de
-0000bcf0: 6620 5f76 6965 775f 696e 7465 726e 616c  f _view_internal
-0000bd00: 2873 656c 662c 2074 7970 653d 4e6f 6e65  (self, type=None
-0000bd10: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
-0000bd20: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-0000bd30: 6179 2073 7562 636c 6173 7365 7320 6e65  ay subclasses ne
-0000bd40: 6564 2074 6f20 7461 6b65 2074 6869 7320  ed to take this 
-0000bd50: 6f76 6572 2069 6620 7468 6579 2077 616e  over if they wan
-0000bd60: 7420 746f 206d 616b 6520 6120 7368 616c  t to make a shal
-0000bd70: 6c6f 7720 636f 7079 206f 660d 0a20 2020  low copy of..   
-0000bd80: 2020 2020 2061 2066 6173 7461 7272 6179       a fastarray
-0000bd90: 2069 6e73 7465 6164 206f 6620 7669 6577   instead of view
-0000bda0: 696e 6720 7468 656d 7365 6c76 6573 2061  ing themselves a
-0000bdb0: 7320 6120 6661 7374 6172 7261 7920 2877  s a fastarray (w
-0000bdc0: 6869 6368 2064 726f 7073 2074 6865 6972  hich drops their
-0000bdd0: 206f 7468 6572 2070 726f 7065 7274 6965   other propertie
-0000bde0: 7329 2e0d 0a20 2020 2020 2020 2054 616b  s)...        Tak
-0000bdf0: 696e 6720 6f76 6572 2076 6965 7720 6469  ing over view di
-0000be00: 7265 6374 6c79 206d 6179 2068 6176 6520  rectly may have 
-0000be10: 6120 6c6f 7420 6f66 2075 6e69 6e74 656e  a lot of uninten
-0000be20: 6465 6420 636f 6e73 6571 7565 6e63 6573  ded consequences
-0000be30: 2e0d 0a20 2020 2020 2020 2022 2222 0d0a  ...        """..
-0000be40: 2020 2020 2020 2020 6966 2074 7970 6520          if type 
-0000be50: 6973 206e 6f74 2046 6173 7441 7272 6179  is not FastArray
-0000be60: 206f 7220 7479 7065 2069 7320 6e6f 7420   or type is not 
-0000be70: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-0000be80: 2020 206e 6577 6172 7220 3d20 7365 6c66     newarr = self
-0000be90: 2e76 6965 7728 7479 7065 290d 0a20 2020  .view(type)..   
-0000bea0: 2020 2020 2020 2020 2023 2063 6f70 7920           # copy 
-0000beb0: 616c 6c20 7468 6520 7072 6f70 6572 7469  all the properti
-0000bec0: 6573 0d0a 2020 2020 2020 2020 2020 2020  es..            
-0000bed0: 6e65 7761 7272 2e5f 5f64 6963 745f 5f20  newarr.__dict__ 
-0000bee0: 3d20 7365 6c66 2e5f 5f64 6963 745f 5f2e  = self.__dict__.
-0000bef0: 636f 7079 2829 0d0a 2020 2020 2020 2020  copy()..        
-0000bf00: 2020 2020 7265 7475 726e 206e 6577 6172      return newar
-0000bf10: 720d 0a20 2020 2020 2020 2072 6574 7572  r..        retur
-0000bf20: 6e20 7365 6c66 2e76 6965 7728 4661 7374  n self.view(Fast
-0000bf30: 4172 7261 7929 0d0a 0d0a 2020 2020 2320  Array)....    # 
-0000bf40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bf50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bf60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bf70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bf80: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-0000bf90: 6465 6620 636f 7079 2873 656c 662c 206f  def copy(self, o
-0000bfa0: 7264 6572 3d22 4b22 2920 2d3e 2046 6173  rder="K") -> Fas
-0000bfb0: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
-0000bfc0: 2022 2222 0d0a 2020 2020 2020 2020 5265   """..        Re
-0000bfd0: 7475 726e 2061 2063 6f70 7920 6f66 2074  turn a copy of t
-0000bfe0: 6865 2069 6e70 7574 2060 4661 7374 4172  he input `FastAr
-0000bff0: 7261 7960 2e0d 0a0d 0a20 2020 2020 2020  ray`.....       
-0000c000: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
-0000c010: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
-0000c020: 0a20 2020 2020 2020 206f 7264 6572 203a  .        order :
-0000c030: 207b 274b 272c 2027 4327 2c20 2746 272c   {'K', 'C', 'F',
-0000c040: 2027 4127 7d2c 2064 6566 6175 6c74 2027   'A'}, default '
-0000c050: 4b27 0d0a 2020 2020 2020 2020 2020 2020  K'..            
-0000c060: 436f 6e74 726f 6c73 2074 6865 206d 656d  Controls the mem
-0000c070: 6f72 7920 6c61 796f 7574 206f 6620 7468  ory layout of th
-0000c080: 6520 636f 7079 3a20 274b 2720 6d65 616e  e copy: 'K' mean
-0000c090: 7320 6d61 7463 6820 7468 6520 6c61 796f  s match the layo
-0000c0a0: 7574 206f 6620 7468 6520 696e 7075 7420  ut of the input 
-0000c0b0: 6172 7261 7920 6173 2063 6c6f 7365 6c79  array as closely
-0000c0c0: 2061 7320 706f 7373 6962 6c65 3b0d 0a20   as possible;.. 
-0000c0d0: 2020 2020 2020 2020 2020 2027 4327 206d             'C' m
-0000c0e0: 6561 6e73 2072 6f77 2d62 6173 6564 2028  eans row-based (
-0000c0f0: 432d 7374 796c 6529 206f 7264 6572 3b20  C-style) order; 
-0000c100: 2746 2720 6d65 616e 7320 636f 6c75 6d6e  'F' means column
-0000c110: 2d62 6173 6564 2028 466f 7274 7261 6e2d  -based (Fortran-
-0000c120: 7374 796c 6529 206f 7264 6572 3b0d 0a20  style) order;.. 
-0000c130: 2020 2020 2020 2020 2020 2027 4127 206d             'A' m
-0000c140: 6561 6e73 2027 4627 2069 6620 7468 6520  eans 'F' if the 
-0000c150: 696e 7075 7420 6172 7261 7920 6973 2066  input array is f
-0000c160: 6f72 6d61 7474 6564 2061 7320 2746 272c  ormatted as 'F',
-0000c170: 2027 4327 2069 6620 6e6f 742e 0d0a 0d0a   'C' if not.....
-0000c180: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
-0000c190: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-0000c1a0: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-0000c1b0: 7261 790d 0a20 2020 2020 2020 2020 2020  ray..           
-0000c1c0: 2041 2063 6f70 7920 6f66 2074 6865 2069   A copy of the i
-0000c1d0: 6e70 7574 2060 4661 7374 4172 7261 7960  nput `FastArray`
-0000c1e0: 2e0d 0a0d 0a20 2020 2020 2020 2053 6565  .....        See
-0000c1f0: 2041 6c73 6f0d 0a20 2020 2020 2020 202d   Also..        -
-0000c200: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-0000c210: 202e 4361 7465 676f 7269 6361 6c2e 636f   .Categorical.co
-0000c220: 7079 203a 2052 6574 7572 6e73 2061 2063  py : Returns a c
-0000c230: 6f70 7920 6f66 2074 6865 2069 6e70 7574  opy of the input
-0000c240: 2060 2e43 6174 6567 6f72 6963 616c 602e   `.Categorical`.
-0000c250: 0d0a 2020 2020 2020 2020 2e44 6174 6173  ..        .Datas
-0000c260: 6574 2e63 6f70 7920 3a20 5265 7475 726e  et.copy : Return
-0000c270: 7320 6120 636f 7079 206f 6620 7468 6520  s a copy of the 
-0000c280: 696e 7075 7420 602e 4461 7461 7365 7460  input `.Dataset`
-0000c290: 2e0d 0a20 2020 2020 2020 202e 5374 7275  ...        .Stru
-0000c2a0: 6374 2e63 6f70 7920 3a20 5265 7475 726e  ct.copy : Return
-0000c2b0: 7320 6120 636f 7079 206f 6620 7468 6520  s a copy of the 
-0000c2c0: 696e 7075 7420 602e 5374 7275 6374 602e  input `.Struct`.
-0000c2d0: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
-0000c2e0: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
-0000c2f0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0000c300: 436f 7079 2061 2060 4661 7374 4172 7261  Copy a `FastArra
-0000c310: 7960 3a0d 0a0d 0a20 2020 2020 2020 203e  y`:....        >
-0000c320: 3e3e 2061 203d 2072 742e 4641 285b 312c  >> a = rt.FA([1,
-0000c330: 2032 2c20 332c 2034 2c20 355d 290d 0a20   2, 3, 4, 5]).. 
-0000c340: 2020 2020 2020 203e 3e3e 2061 0d0a 2020         >>> a..  
-0000c350: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
-0000c360: 5b31 2c20 322c 2033 2c20 342c 2035 5d29  [1, 2, 3, 4, 5])
-0000c370: 0d0a 2020 2020 2020 2020 3e3e 3e20 6132  ..        >>> a2
-0000c380: 203d 2061 2e63 6f70 7928 290d 0a20 2020   = a.copy()..   
-0000c390: 2020 2020 203e 3e3e 2061 320d 0a20 2020       >>> a2..   
-0000c3a0: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
-0000c3b0: 312c 2032 2c20 332c 2034 2c20 355d 290d  1, 2, 3, 4, 5]).
-0000c3c0: 0a20 2020 2020 2020 203e 3e3e 2061 3220  .        >>> a2 
-0000c3d0: 6973 2061 0d0a 2020 2020 2020 2020 4661  is a..        Fa
-0000c3e0: 6c73 6520 2023 2054 6865 2063 6f70 7920  lse  # The copy 
-0000c3f0: 6973 2061 2073 6570 6172 6174 6520 6f62  is a separate ob
-0000c400: 6a65 6374 2e0d 0a20 2020 2020 2020 2022  ject...        "
-0000c410: 2222 0d0a 2020 2020 2020 2020 2320 7265  ""..        # re
-0000c420: 7375 6c74 3d20 7375 7065 7228 4661 7374  sult= super(Fast
-0000c430: 4172 7261 792c 2073 656c 6629 2e63 6f70  Array, self).cop
-0000c440: 7928 6f72 6465 7229 0d0a 2020 2020 2020  y(order)..      
-0000c450: 2020 6966 2073 656c 662e 666c 6167 732e    if self.flags.
-0000c460: 665f 636f 6e74 6967 756f 7573 206f 7220  f_contiguous or 
-0000c470: 7365 6c66 2e66 6c61 6773 2e63 5f63 6f6e  self.flags.c_con
-0000c480: 7469 6775 6f75 733a 0d0a 2020 2020 2020  tiguous:..      
-0000c490: 2020 2020 2020 6966 206f 7264 6572 203d        if order =
-0000c4a0: 3d20 224b 2220 616e 6420 7365 6c66 2e64  = "K" and self.d
-0000c4b0: 7479 7065 2e6e 756d 203c 3d20 3133 3a0d  type.num <= 13:.
-0000c4c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000c4d0: 2023 2070 6572 666f 726d 2061 2066 6173   # perform a fas
-0000c4e0: 7465 7220 6d75 6c74 6974 6872 6561 6465  ter multithreade
-0000c4f0: 6420 636f 7079 0d0a 2020 2020 2020 2020  d copy..        
-0000c500: 2020 2020 2020 2020 7265 7475 726e 2054          return T
-0000c510: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
-0000c520: 4c65 6467 6572 2e5f 4153 5f46 415f 5459  Ledger._AS_FA_TY
-0000c530: 5045 2873 656c 662c 2073 656c 662e 6474  PE(self, self.dt
-0000c540: 7970 652e 6e75 6d29 0d0a 0d0a 2020 2020  ype.num)....    
-0000c550: 2020 2020 7265 7375 6c74 203d 2054 7970      result = Typ
-0000c560: 6552 6567 6973 7465 722e 4d61 7468 4c65  eRegister.MathLe
-0000c570: 6467 6572 2e5f 434f 5059 2873 7570 6572  dger._COPY(super
-0000c580: 2846 6173 7441 7272 6179 2c20 7365 6c66  (FastArray, self
-0000c590: 292c 206f 7264 6572 290d 0a20 2020 2020  ), order)..     
-0000c5a0: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
-0000c5b0: 2e76 6965 7728 4661 7374 4172 7261 7929  .view(FastArray)
-0000c5c0: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
-0000c5d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c5e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c5f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c610: 2d2d 2d2d 0d0a 2020 2020 6465 6620 636f  ----..    def co
-0000c620: 7079 5f69 6e76 616c 6964 2873 656c 6629  py_invalid(self)
-0000c630: 202d 3e20 4661 7374 4172 7261 793a 0d0a   -> FastArray:..
-0000c640: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-0000c650: 2020 2020 2052 6574 7572 6e20 6120 6046       Return a `F
-0000c660: 6173 7441 7272 6179 6020 6f66 2061 6c6c  astArray` of all
-0000c670: 2069 6e76 616c 6964 732c 206f 6620 7468   invalids, of th
-0000c680: 6520 7361 6d65 2073 6861 7065 2061 6e64  e same shape and
-0000c690: 2064 7479 7065 2061 7320 7468 6520 696e   dtype as the in
-0000c6a0: 7075 7420 6172 7261 792e 0d0a 0d0a 2020  put array.....  
-0000c6b0: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
-0000c6c0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
-0000c6d0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-0000c6e0: 790d 0a20 2020 2020 2020 2020 2020 2041  y..            A
-0000c6f0: 2060 4661 7374 4172 7261 7960 206f 6620   `FastArray` of 
-0000c700: 616c 6c20 696e 7661 6c69 6473 2c20 6f66  all invalids, of
-0000c710: 2074 6865 2073 616d 6520 7368 6170 6520   the same shape 
-0000c720: 616e 6420 6474 7970 6520 6173 2074 6865  and dtype as the
-0000c730: 2069 6e70 7574 2061 7272 6179 2e0d 0a0d   input array....
-0000c740: 0a20 2020 2020 2020 2053 6565 2041 6c73  .        See Als
-0000c750: 6f0d 0a20 2020 2020 2020 202d 2d2d 2d2d  o..        -----
-0000c760: 2d2d 2d0d 0a20 2020 2020 2020 2046 6173  ---..        Fas
-0000c770: 7441 7272 6179 2e69 6e76 203a 2052 6574  tArray.inv : Ret
-0000c780: 7572 6e20 7468 6520 696e 7661 6c69 6420  urn the invalid 
-0000c790: 7661 6c75 6520 666f 7220 7468 6520 696e  value for the in
-0000c7a0: 7075 7420 6172 7261 7927 7320 6474 7970  put array's dtyp
-0000c7b0: 652e 0d0a 2020 2020 2020 2020 4661 7374  e...        Fast
-0000c7c0: 4172 7261 792e 6669 6c6c 5f69 6e76 616c  Array.fill_inval
-0000c7d0: 6964 203a 2052 6570 6c61 6365 2074 6865  id : Replace the
-0000c7e0: 2063 6f6e 7465 6e74 7320 6f66 2061 2060   contents of a `
-0000c7f0: 4661 7374 4172 7261 7960 2077 6974 6820  FastArray` with 
-0000c800: 696e 7661 6c69 6473 2e0d 0a0d 0a20 2020  invalids.....   
-0000c810: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
-0000c820: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-0000c830: 0a20 2020 2020 2020 2043 6f70 7920 616e  .        Copy an
-0000c840: 2069 6e74 6567 6572 2061 7272 6179 2061   integer array a
-0000c850: 6e64 2072 6570 6c61 6365 2077 6974 6820  nd replace with 
-0000c860: 696e 7661 6c69 6473 3a0d 0a0d 0a20 2020  invalids:....   
-0000c870: 2020 2020 203e 3e3e 2061 203d 2072 742e       >>> a = rt.
-0000c880: 4641 285b 312c 2032 2c20 332c 2034 2c20  FA([1, 2, 3, 4, 
-0000c890: 355d 290d 0a20 2020 2020 2020 203e 3e3e  5])..        >>>
-0000c8a0: 2061 0d0a 2020 2020 2020 2020 4661 7374   a..        Fast
-0000c8b0: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
-0000c8c0: 342c 2035 5d29 0d0a 2020 2020 2020 2020  4, 5])..        
-0000c8d0: 3e3e 3e20 6132 203d 2061 2e63 6f70 795f  >>> a2 = a.copy_
-0000c8e0: 696e 7661 6c69 6428 290d 0a20 2020 2020  invalid()..     
-0000c8f0: 2020 203e 3e3e 2061 320d 0a20 2020 2020     >>> a2..     
-0000c900: 2020 2046 6173 7441 7272 6179 285b 2d32     FastArray([-2
-0000c910: 3134 3734 3833 3634 382c 202d 3231 3437  147483648, -2147
-0000c920: 3438 3336 3438 2c20 2d32 3134 3734 3833  483648, -2147483
-0000c930: 3634 382c 202d 3231 3437 3438 3336 3438  648, -2147483648
-0000c940: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0000c950: 2020 2020 2020 2d32 3134 3734 3833 3634        -214748364
-0000c960: 385d 290d 0a20 2020 2020 2020 203e 3e3e  8])..        >>>
-0000c970: 2061 0d0a 2020 2020 2020 2020 4661 7374   a..        Fast
-0000c980: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
-0000c990: 342c 2035 5d29 2020 2320 6120 6973 2075  4, 5])  # a is u
-0000c9a0: 6e63 6861 6e67 6564 2e0d 0a0d 0a20 2020  nchanged.....   
-0000c9b0: 2020 2020 2043 6f70 7920 6120 666c 6f61       Copy a floa
-0000c9c0: 7469 6e67 2070 6f69 6e74 2061 7272 6179  ting point array
-0000c9d0: 2061 6e64 2072 6570 6c61 6365 2077 6974   and replace wit
-0000c9e0: 6820 696e 7661 6c69 6473 3a0d 0a0d 0a20  h invalids:.... 
-0000c9f0: 2020 2020 2020 203e 3e3e 2061 3320 3d20         >>> a3 = 
-0000ca00: 7274 2e46 4128 5b30 2e2c 2031 2e2c 2032  rt.FA([0., 1., 2
-0000ca10: 2e2c 2033 2e2c 2034 2e5d 290d 0a20 2020  ., 3., 4.])..   
-0000ca20: 2020 2020 203e 3e3e 2061 330d 0a20 2020       >>> a3..   
-0000ca30: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
-0000ca40: 302e 2c20 312e 2c20 322e 2c20 332e 2c20  0., 1., 2., 3., 
-0000ca50: 342e 5d29 0d0a 2020 2020 2020 2020 3e3e  4.])..        >>
-0000ca60: 3e20 6133 2e63 6f70 795f 696e 7661 6c69  > a3.copy_invali
-0000ca70: 6428 290d 0a20 2020 2020 2020 2046 6173  d()..        Fas
-0000ca80: 7441 7272 6179 285b 6e61 6e2c 206e 616e  tArray([nan, nan
-0000ca90: 2c20 6e61 6e2c 206e 616e 2c20 6e61 6e5d  , nan, nan, nan]
-0000caa0: 290d 0a0d 0a20 2020 2020 2020 2043 6f70  )....        Cop
-0000cab0: 7920 6120 7374 7269 6e67 2061 7272 6179  y a string array
-0000cac0: 2061 6e64 2072 6570 6c61 6365 2077 6974   and replace wit
-0000cad0: 6820 696e 7661 6c69 6473 3a0d 0a0d 0a20  h invalids:.... 
-0000cae0: 2020 2020 2020 203e 3e3e 2061 3420 3d20         >>> a4 = 
-0000caf0: 7274 2e46 4128 5b27 414d 5a4e 272c 2027  rt.FA(['AMZN', '
-0000cb00: 4942 4d27 2c20 274d 5346 5427 2c20 2741  IBM', 'MSFT', 'A
-0000cb10: 4150 4c27 5d29 0d0a 2020 2020 2020 2020  APL'])..        
-0000cb20: 3e3e 3e20 6134 0d0a 2020 2020 2020 2020  >>> a4..        
-0000cb30: 4661 7374 4172 7261 7928 5b62 2741 4d5a  FastArray([b'AMZ
-0000cb40: 4e27 2c20 6227 4942 4d27 2c20 6227 4d53  N', b'IBM', b'MS
-0000cb50: 4654 272c 2062 2741 4150 4c27 5d2c 2064  FT', b'AAPL'], d
-0000cb60: 7479 7065 3d27 7c53 3427 290d 0a20 2020  type='|S4')..   
-0000cb70: 2020 2020 203e 3e3e 2061 342e 636f 7079       >>> a4.copy
-0000cb80: 5f69 6e76 616c 6964 2829 0d0a 2020 2020  _invalid()..    
-0000cb90: 2020 2020 4661 7374 4172 7261 7928 5b62      FastArray([b
-0000cba0: 2727 2c20 6227 272c 2062 2727 2c20 6227  '', b'', b'', b'
-0000cbb0: 275d 2c20 6474 7970 653d 277c 5334 2729  '], dtype='|S4')
-0000cbc0: 2020 2320 496e 7661 6c69 6420 7374 7269    # Invalid stri
-0000cbd0: 6e67 2076 616c 7565 2069 7320 616e 2065  ng value is an e
-0000cbe0: 6d70 7479 2073 7472 696e 672e 0d0a 2020  mpty string...  
-0000cbf0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0000cc00: 2020 2072 6574 7572 6e20 7365 6c66 2e66     return self.f
-0000cc10: 696c 6c5f 696e 7661 6c69 6428 696e 706c  ill_invalid(inpl
-0000cc20: 6163 653d 4661 6c73 6529 0d0a 0d0a 2020  ace=False)....  
-0000cc30: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
-0000cc40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000cc50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000cc60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000cc70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
-0000cc80: 2020 2020 4070 726f 7065 7274 790d 0a20      @property.. 
-0000cc90: 2020 2064 6566 2069 6e76 2873 656c 6629     def inv(self)
-0000cca0: 202d 3e20 416e 793a 0d0a 2020 2020 2020   -> Any:..      
-0000ccb0: 2020 2222 220d 0a20 2020 2020 2020 2052    """..        R
-0000ccc0: 6574 7572 6e20 7468 6520 696e 7661 6c69  eturn the invali
-0000ccd0: 6420 7661 6c75 6520 666f 7220 7468 6520  d value for the 
-0000cce0: 696e 7075 7420 6172 7261 7927 7320 6474  input array's dt
-0000ccf0: 7970 652e 0d0a 0d0a 2020 2020 2020 2020  ype.....        
-0000cd00: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
-0000cd10: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
-0000cd20: 2020 416e 790d 0a20 2020 2020 2020 2020    Any..         
-0000cd30: 2020 2054 6865 2069 6e76 616c 6964 2076     The invalid v
-0000cd40: 616c 7565 2066 6f72 2074 6865 2069 6e70  alue for the inp
-0000cd50: 7574 2061 7272 6179 2773 2064 7479 7065  ut array's dtype
-0000cd60: 2c20 666f 7220 6578 616d 706c 653a 2060  , for example: `
-0000cd70: 6e75 6d70 792e 696e 7438 6020 7265 7475  numpy.int8` retu
-0000cd80: 726e 7320 2d31 3238 2c20 606e 756d 7079  rns -128, `numpy
-0000cd90: 2e75 696e 7438 6020 7265 7475 726e 7320  .uint8` returns 
-0000cda0: 3235 352c 2061 6e64 2060 6e75 6d70 792e  255, and `numpy.
-0000cdb0: 626f 6f6c 5f60 2072 6574 7572 6e73 2046  bool_` returns F
-0000cdc0: 616c 7365 2e0d 0a0d 0a20 2020 2020 2020  alse.....       
-0000cdd0: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
-0000cde0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-0000cdf0: 2020 2020 2046 6173 7441 7272 6179 2e63       FastArray.c
-0000ce00: 6f70 795f 696e 7661 6c69 6420 3a20 5265  opy_invalid : Re
-0000ce10: 7475 726e 7320 6120 6046 6173 7441 7272  turns a `FastArr
-0000ce20: 6179 6020 636f 7079 2066 696c 6c65 6420  ay` copy filled 
-0000ce30: 7769 7468 2074 6865 2069 6e76 616c 6964  with the invalid
-0000ce40: 2076 616c 7565 2066 6f72 2074 6865 2069   value for the i
-0000ce50: 6e70 7574 2061 7272 6179 2773 2064 7479  nput array's dty
-0000ce60: 7065 2e0d 0a20 2020 2020 2020 2046 6173  pe...        Fas
-0000ce70: 7441 7272 6179 2e66 696c 6c5f 696e 7661  tArray.fill_inva
-0000ce80: 6c69 6420 3a20 5265 7475 726e 7320 7468  lid : Returns th
-0000ce90: 6520 696e 7075 7420 6046 6173 7441 7272  e input `FastArr
-0000cea0: 6179 6020 6f72 2061 2060 4661 7374 4172  ay` or a `FastAr
-0000ceb0: 7261 7960 2063 6f70 792c 2066 696c 6c65  ray` copy, fille
-0000cec0: 6420 7769 7468 2069 6e76 616c 6964 2076  d with invalid v
-0000ced0: 616c 7565 732e 0d0a 2020 2020 2020 2020  alues...        
-0000cee0: 7e72 6970 7461 626c 652e 7274 5f65 6e75  ~riptable.rt_enu
-0000cef0: 6d2e 494e 5641 4c49 445f 4449 4354 203a  m.INVALID_DICT :
-0000cf00: 204d 6170 7320 696e 7661 6c69 6420 7661   Maps invalid va
-0000cf10: 6c75 6573 2074 6f20 6474 7970 6573 2e0d  lues to dtypes..
-0000cf20: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
-0000cf30: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
-0000cf40: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2052  -----..        R
-0000cf50: 6574 7572 6e20 7468 6520 696e 7661 6c69  eturn the invali
-0000cf60: 6420 7661 6c75 6520 666f 7220 616e 2069  d value for an i
-0000cf70: 6e74 6567 6572 2061 7272 6179 3a0d 0a0d  nteger array:...
-0000cf80: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
-0000cf90: 2072 742e 4641 285b 312c 2032 2c20 332c   rt.FA([1, 2, 3,
-0000cfa0: 2034 2c20 355d 290d 0a20 2020 2020 2020   4, 5])..       
-0000cfb0: 203e 3e3e 2061 0d0a 2020 2020 2020 2020   >>> a..        
-0000cfc0: 4661 7374 4172 7261 7928 5b31 2c20 322c  FastArray([1, 2,
-0000cfd0: 2033 2c20 342c 2035 5d29 0d0a 2020 2020   3, 4, 5])..    
-0000cfe0: 2020 2020 3e3e 3e20 612e 696e 760d 0a20      >>> a.inv.. 
-0000cff0: 2020 2020 2020 202d 3231 3437 3438 3336         -21474836
-0000d000: 3438 0d0a 0d0a 2020 2020 2020 2020 5265  48....        Re
-0000d010: 7475 726e 2074 6865 2069 6e76 616c 6964  turn the invalid
-0000d020: 2076 616c 7565 2066 6f72 2061 2066 6c6f   value for a flo
-0000d030: 6174 696e 6720 706f 696e 7420 6172 7261  ating point arra
-0000d040: 793a 0d0a 0d0a 2020 2020 2020 2020 3e3e  y:....        >>
-0000d050: 3e20 6132 203d 2072 742e 4641 285b 302e  > a2 = rt.FA([0.
-0000d060: 2c20 312e 2c20 322e 2c20 332e 2c20 342e  , 1., 2., 3., 4.
-0000d070: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
-0000d080: 6132 0d0a 2020 2020 2020 2020 4661 7374  a2..        Fast
-0000d090: 4172 7261 7928 5b30 2e2c 2031 2e2c 2032  Array([0., 1., 2
-0000d0a0: 2e2c 2033 2e2c 2034 2e5d 290d 0a20 2020  ., 3., 4.])..   
-0000d0b0: 2020 2020 203e 3e3e 2061 322e 696e 760d       >>> a2.inv.
-0000d0c0: 0a20 2020 2020 2020 206e 616e 0d0a 0d0a  .        nan....
-0000d0d0: 2020 2020 2020 2020 5265 7475 726e 2074          Return t
-0000d0e0: 6865 2069 6e76 616c 6964 2076 616c 7565  he invalid value
-0000d0f0: 2066 6f72 2061 2073 7472 696e 6720 6172   for a string ar
-0000d100: 7261 793a 0d0a 0d0a 2020 2020 2020 2020  ray:....        
-0000d110: 3e3e 3e20 6133 203d 2072 742e 4641 285b  >>> a3 = rt.FA([
-0000d120: 2241 4d5a 4e22 2c20 2249 424d 222c 2022  "AMZN", "IBM", "
-0000d130: 4d53 4654 222c 2022 4141 504c 225d 290d  MSFT", "AAPL"]).
-0000d140: 0a20 2020 2020 2020 203e 3e3e 2061 330d  .        >>> a3.
-0000d150: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-0000d160: 6179 285b 6227 414d 5a4e 272c 2062 2749  ay([b'AMZN', b'I
-0000d170: 424d 272c 2062 274d 5346 5427 2c20 6227  BM', b'MSFT', b'
-0000d180: 4141 504c 275d 2c20 6474 7970 653d 277c  AAPL'], dtype='|
-0000d190: 5334 2729 0d0a 2020 2020 2020 2020 3e3e  S4')..        >>
-0000d1a0: 3e20 6133 2e69 6e76 0d0a 2020 2020 2020  > a3.inv..      
-0000d1b0: 2020 6227 270d 0a20 2020 2020 2020 2022    b''..        "
-0000d1c0: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
-0000d1d0: 726e 2049 4e56 414c 4944 5f44 4943 545b  rn INVALID_DICT[
-0000d1e0: 7365 6c66 2e64 7479 7065 2e6e 756d 5d0d  self.dtype.num].
-0000d1f0: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
-0000d200: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d210: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d220: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d230: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d240: 2d2d 2d0d 0a20 2020 2064 6566 2066 696c  ---..    def fil
-0000d250: 6c5f 696e 7661 6c69 6428 7365 6c66 2c20  l_invalid(self, 
-0000d260: 7368 6170 653d 4e6f 6e65 2c20 6474 7970  shape=None, dtyp
-0000d270: 653d 4e6f 6e65 2c20 696e 706c 6163 653d  e=None, inplace=
-0000d280: 5472 7565 2920 2d3e 2046 6173 7441 7272  True) -> FastArr
-0000d290: 6179 3a0d 0a20 2020 2020 2020 2022 2222  ay:..        """
-0000d2a0: 0d0a 2020 2020 2020 2020 5265 706c 6163  ..        Replac
-0000d2b0: 6520 7468 6520 636f 6e74 656e 7473 206f  e the contents o
-0000d2c0: 6620 7468 6520 696e 7075 7420 6046 6173  f the input `Fas
-0000d2d0: 7441 7272 6179 6020 7769 7468 2069 6e76  tArray` with inv
-0000d2e0: 616c 6964 2076 616c 7565 732e 0d0a 0d0a  alid values.....
-0000d2f0: 2020 2020 2020 2020 5468 6520 696e 7661          The inva
-0000d300: 6c69 6420 7661 6c75 6520 7573 6564 2069  lid value used i
-0000d310: 7320 6465 7465 726d 696e 6564 2062 7920  s determined by 
-0000d320: 7468 6520 696e 7075 7420 6172 7261 7927  the input array'
-0000d330: 7320 6474 7970 6520 6f72 2061 2075 7365  s dtype or a use
-0000d340: 722d 7370 6563 6966 6965 6420 6474 7970  r-specified dtyp
-0000d350: 652e 2057 6172 6e69 6e67 3a20 4279 2064  e. Warning: By d
-0000d360: 6566 6175 6c74 2c20 7468 6973 206f 7065  efault, this ope
-0000d370: 7261 7469 6f6e 2069 7320 696e 2070 6c61  ration is in pla
-0000d380: 6365 2e0d 0a0d 0a20 2020 2020 2020 2050  ce.....        P
-0000d390: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
-0000d3a0: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
-0000d3b0: 2020 2020 2020 2073 6861 7065 203a 2069         shape : i
-0000d3c0: 6e74 206f 7220 7365 7175 656e 6365 206f  nt or sequence o
-0000d3d0: 6620 696e 742c 206f 7074 696f 6e61 6c0d  f int, optional.
-0000d3e0: 0a20 2020 2020 2020 2020 2020 2053 6861  .            Sha
-0000d3f0: 7065 206f 6620 7468 6520 6e65 7720 6172  pe of the new ar
-0000d400: 7261 792c 2066 6f72 2065 7861 6d70 6c65  ray, for example
-0000d410: 3a20 6060 2832 2c20 3329 6060 206f 7220  : ``(2, 3)`` or 
-0000d420: 6060 3260 602e 204e 6f74 6520 7468 6174  ``2``. Note that
-0000d430: 2061 6c74 686f 7567 6820 6d75 6c74 692d   although multi-
-0000d440: 6469 6d65 6e73 696f 6e61 6c20 6172 7261  dimensional arra
-0000d450: 7973 2061 7265 2074 6563 686e 6963 616c  ys are technical
-0000d460: 6c79 2073 7570 706f 7274 6564 2062 7920  ly supported by 
-0000d470: 5269 7074 6162 6c65 2c20 796f 7520 6d61  Riptable, you ma
-0000d480: 7920 6765 7420 756e 6578 7065 6374 6564  y get unexpected
-0000d490: 2072 6573 756c 7473 2077 6865 6e20 776f   results when wo
-0000d4a0: 726b 696e 6720 7769 7468 2074 6865 6d2e  rking with them.
-0000d4b0: 0d0a 2020 2020 2020 2020 6474 7970 6520  ..        dtype 
-0000d4c0: 3a20 7374 722c 206f 7074 696f 6e61 6c0d  : str, optional.
-0000d4d0: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
-0000d4e0: 2064 6573 6972 6564 2064 7479 7065 2066   desired dtype f
-0000d4f0: 6f72 2074 6865 2072 6574 7572 6e65 6420  or the returned 
-0000d500: 6172 7261 792e 0d0a 2020 2020 2020 2020  array...        
-0000d510: 696e 706c 6163 6520 3a20 626f 6f6c 2c20  inplace : bool, 
-0000d520: 6465 6661 756c 7420 5472 7565 0d0a 2020  default True..  
-0000d530: 2020 2020 2020 2020 2020 4966 2060 4661            If `Fa
-0000d540: 6c73 6560 2c20 7265 7475 726e 2061 2063  lse`, return a c
-0000d550: 6f70 7920 6f66 2074 6865 2061 7272 6179  opy of the array
-0000d560: 2e20 4966 2060 5472 7565 602c 206d 6f64  . If `True`, mod
-0000d570: 6966 7920 6f72 6967 696e 616c 2064 6174  ify original dat
-0000d580: 612e 0d0a 0d0a 2020 2020 2020 2020 5265  a.....        Re
-0000d590: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
-0000d5a0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0000d5b0: 4661 7374 4172 7261 792c 206f 7074 696f  FastArray, optio
-0000d5c0: 6e61 6c0d 0a20 2020 2020 2020 2020 2020  nal..           
-0000d5d0: 2041 2063 6f70 7920 6f66 2074 6865 2069   A copy of the i
-0000d5e0: 6e70 7574 2060 4661 7374 4172 7261 7960  nput `FastArray`
-0000d5f0: 2077 6974 6820 696e 7661 6c69 6420 6173   with invalid as
-0000d600: 2061 6c6c 206f 6620 6974 7320 7661 6c75   all of its valu
-0000d610: 6573 2e20 5265 7475 726e 6564 206f 6e6c  es. Returned onl
-0000d620: 7920 6966 2074 6865 206f 7065 7261 7469  y if the operati
-0000d630: 6f6e 2069 7320 6e6f 7420 646f 6e65 2069  on is not done i
-0000d640: 6e20 706c 6163 652e 0d0a 0d0a 2020 2020  n place.....    
-0000d650: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
-0000d660: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-0000d670: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-0000d680: 792e 696e 7620 3a20 5265 7475 726e 7320  y.inv : Returns 
-0000d690: 7468 6520 696e 7661 6c69 6420 7661 6c75  the invalid valu
-0000d6a0: 6520 666f 7220 7468 6520 696e 7075 7420  e for the input 
-0000d6b0: 6172 7261 7927 7320 6474 7970 652e 0d0a  array's dtype...
-0000d6c0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-0000d6d0: 792e 636f 7079 5f69 6e76 616c 6964 203a  y.copy_invalid :
-0000d6e0: 2052 6574 7572 6e73 2061 2060 4661 7374   Returns a `Fast
-0000d6f0: 4172 7261 7960 2063 6f70 7920 7769 7468  Array` copy with
-0000d700: 2069 7473 2076 616c 7565 7320 7265 706c   its values repl
-0000d710: 6163 6564 2077 6974 6820 7468 6520 696e  aced with the in
-0000d720: 7661 6c69 6420 7661 6c75 6520 666f 7220  valid value for 
-0000d730: 7468 6520 696e 7075 7420 6172 7261 7927  the input array'
-0000d740: 7320 6474 7970 652e 0d0a 0d0a 2020 2020  s dtype.....    
-0000d750: 2020 2020 4578 616d 706c 6573 0d0a 2020      Examples..  
-0000d760: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-0000d770: 2020 2020 2020 2020 5265 706c 6163 6520          Replace 
-0000d780: 616e 2069 6e74 6567 6572 2061 7272 6179  an integer array
-0000d790: 2773 2076 616c 7565 7320 7769 7468 2069  's values with i
-0000d7a0: 6e76 616c 6964 2076 616c 7565 732e 2042  nvalid values. B
-0000d7b0: 7920 6465 6661 756c 742c 2074 6865 2072  y default, the r
-0000d7c0: 6574 7572 6e65 6420 6172 7261 7920 6973  eturned array is
-0000d7d0: 2074 6865 2073 616d 6520 7369 7a65 2061   the same size a
-0000d7e0: 6e64 2064 7479 7065 2061 7320 7468 6520  nd dtype as the 
-0000d7f0: 696e 7075 7420 6172 7261 792c 2061 6e64  input array, and
-0000d800: 2074 6865 206f 7065 7261 7469 6f6e 2069   the operation i
-0000d810: 7320 7065 7266 6f72 6d65 6420 696e 2070  s performed in p
-0000d820: 6c61 6365 3a0d 0a0d 0a20 2020 2020 2020  lace:....       
-0000d830: 203e 3e3e 2061 203d 2072 742e 4641 285b   >>> a = rt.FA([
-0000d840: 312c 2032 2c20 332c 2034 2c20 355d 290d  1, 2, 3, 4, 5]).
-0000d850: 0a20 2020 2020 2020 203e 3e3e 2061 0d0a  .        >>> a..
-0000d860: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-0000d870: 7928 5b31 2c20 322c 2033 2c20 342c 2035  y([1, 2, 3, 4, 5
-0000d880: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
-0000d890: 612e 6669 6c6c 5f69 6e76 616c 6964 2829  a.fill_invalid()
-0000d8a0: 0d0a 2020 2020 2020 2020 3e3e 3e20 610d  ..        >>> a.
-0000d8b0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-0000d8c0: 6179 285b 2d32 3134 3734 3833 3634 382c  ay([-2147483648,
-0000d8d0: 202d 3231 3437 3438 3336 3438 2c20 2d32   -2147483648, -2
-0000d8e0: 3134 3734 3833 3634 382c 202d 3231 3437  147483648, -2147
-0000d8f0: 3438 3336 3438 2c0d 0a20 2020 2020 2020  483648,..       
-0000d900: 2020 2020 2020 2020 2020 2020 2d32 3134              -214
-0000d910: 3734 3833 3634 385d 290d 0a0d 0a20 2020  7483648])....   
-0000d920: 2020 2020 2052 6570 6c61 6365 2061 2066       Replace a f
-0000d930: 6c6f 6174 696e 6720 706f 696e 7420 6172  loating point ar
-0000d940: 7261 7927 7320 7661 6c75 6573 2077 6974  ray's values wit
-0000d950: 6820 7468 6520 696e 7661 6c69 6420 7661  h the invalid va
-0000d960: 6c75 6520 666f 7220 7468 6520 6060 696e  lue for the ``in
-0000d970: 7433 3260 6020 6474 7970 653a 0d0a 0d0a  t32`` dtype:....
-0000d980: 2020 2020 2020 2020 3e3e 3e20 6132 203d          >>> a2 =
-0000d990: 2072 742e 4641 285b 302e 2c20 312e 2c20   rt.FA([0., 1., 
-0000d9a0: 322e 2c20 332e 2c20 342e 5d29 0d0a 2020  2., 3., 4.])..  
-0000d9b0: 2020 2020 2020 3e3e 3e20 6132 0d0a 2020        >>> a2..  
-0000d9c0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
-0000d9d0: 5b30 2e2c 2031 2e2c 2032 2e2c 2033 2e2c  [0., 1., 2., 3.,
-0000d9e0: 2034 2e5d 290d 0a20 2020 2020 2020 203e   4.])..        >
-0000d9f0: 3e3e 2061 322e 6669 6c6c 5f69 6e76 616c  >> a2.fill_inval
-0000da00: 6964 2864 7479 7065 3d22 696e 7433 3222  id(dtype="int32"
-0000da10: 2c20 696e 706c 6163 653d 4661 6c73 6529  , inplace=False)
-0000da20: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-0000da30: 7261 7928 5b2d 3231 3437 3438 3336 3438  ray([-2147483648
-0000da40: 2c20 2d32 3134 3734 3833 3634 382c 202d  , -2147483648, -
-0000da50: 3231 3437 3438 3336 3438 2c20 2d32 3134  2147483648, -214
-0000da60: 3734 3833 3634 382c 0d0a 2020 2020 2020  7483648,..      
-0000da70: 2020 2020 2020 2020 2020 2020 202d 3231               -21
-0000da80: 3437 3438 3336 3438 5d29 0d0a 0d0a 2020  47483648])....  
-0000da90: 2020 2020 2020 5370 6563 6966 7920 7468        Specify th
-0000daa0: 6520 7369 7a65 2061 6e64 2064 7479 7065  e size and dtype
-0000dab0: 206f 6620 7468 6520 6f75 7470 7574 2061   of the output a
-0000dac0: 7272 6179 3a0d 0a0d 0a20 2020 2020 2020  rray:....       
-0000dad0: 203e 3e3e 2061 3320 3d20 7274 2e46 4128   >>> a3 = rt.FA(
-0000dae0: 5b22 414d 5a4e 222c 2022 4942 4d22 2c20  ["AMZN", "IBM", 
-0000daf0: 224d 5346 5422 2c20 2241 4150 4c22 5d29  "MSFT", "AAPL"])
-0000db00: 0d0a 2020 2020 2020 2020 3e3e 3e20 6133  ..        >>> a3
-0000db10: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-0000db20: 7261 7928 5b62 2741 4d5a 4e27 2c20 6227  ray([b'AMZN', b'
-0000db30: 4942 4d27 2c20 6227 4d53 4654 272c 2062  IBM', b'MSFT', b
-0000db40: 2741 4150 4c27 5d2c 2064 7479 7065 3d27  'AAPL'], dtype='
-0000db50: 7c53 3427 290d 0a20 2020 2020 2020 203e  |S4')..        >
-0000db60: 3e3e 2061 332e 6669 6c6c 5f69 6e76 616c  >> a3.fill_inval
-0000db70: 6964 2832 2c20 6474 7970 653d 2262 6f6f  id(2, dtype="boo
-0000db80: 6c22 2c20 696e 706c 6163 653d 4661 6c73  l", inplace=Fals
-0000db90: 6529 0d0a 2020 2020 2020 2020 4661 7374  e)..        Fast
-0000dba0: 4172 7261 7928 5b46 616c 7365 2c20 4661  Array([False, Fa
-0000dbb0: 6c73 655d 290d 0a20 2020 2020 2020 2022  lse])..        "
-0000dbc0: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
-0000dbd0: 726e 2073 656c 662e 5f66 696c 6c5f 696e  rn self._fill_in
-0000dbe0: 7661 6c69 645f 696e 7465 726e 616c 2873  valid_internal(s
-0000dbf0: 6861 7065 3d73 6861 7065 2c20 6474 7970  hape=shape, dtyp
-0000dc00: 653d 6474 7970 652c 2069 6e70 6c61 6365  e=dtype, inplace
-0000dc10: 3d69 6e70 6c61 6365 290d 0a0d 0a20 2020  =inplace)....   
-0000dc20: 2064 6566 205f 6669 6c6c 5f69 6e76 616c   def _fill_inval
-0000dc30: 6964 5f69 6e74 6572 6e61 6c28 7365 6c66  id_internal(self
-0000dc40: 2c20 7368 6170 653d 4e6f 6e65 2c20 6474  , shape=None, dt
-0000dc50: 7970 653d 4e6f 6e65 2c20 696e 706c 6163  ype=None, inplac
-0000dc60: 653d 5472 7565 2c20 6669 6c6c 5f76 616c  e=True, fill_val
-0000dc70: 3d4e 6f6e 6529 3a0d 0a20 2020 2020 2020  =None):..       
-0000dc80: 2069 6620 6474 7970 6520 6973 204e 6f6e   if dtype is Non
-0000dc90: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0000dca0: 6474 7970 6520 3d20 7365 6c66 2e64 7479  dtype = self.dty
-0000dcb0: 7065 0d0a 2020 2020 2020 2020 6966 2069  pe..        if i
-0000dcc0: 7369 6e73 7461 6e63 6528 6474 7970 652c  sinstance(dtype,
-0000dcd0: 2073 7472 293a 0d0a 2020 2020 2020 2020   str):..        
-0000dce0: 2020 2020 6474 7970 6520 3d20 6e70 2e64      dtype = np.d
-0000dcf0: 7479 7065 2864 7479 7065 290d 0a20 2020  type(dtype)..   
-0000dd00: 2020 2020 2069 6620 7368 6170 6520 6973       if shape is
-0000dd10: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-0000dd20: 2020 2020 7368 6170 6520 3d20 7365 6c66      shape = self
-0000dd30: 2e73 6861 7065 0d0a 2020 2020 2020 2020  .shape..        
-0000dd40: 656c 6966 206e 6f74 2069 7369 6e73 7461  elif not isinsta
-0000dd50: 6e63 6528 7368 6170 652c 2074 7570 6c65  nce(shape, tuple
-0000dd60: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0000dd70: 7368 6170 6520 3d20 2873 6861 7065 2c29  shape = (shape,)
-0000dd80: 0d0a 0d0a 2020 2020 2020 2020 6966 2066  ....        if f
-0000dd90: 696c 6c5f 7661 6c20 6973 204e 6f6e 653a  ill_val is None:
-0000dda0: 0d0a 2020 2020 2020 2020 2020 2020 696e  ..            in
-0000ddb0: 7620 3d20 494e 5641 4c49 445f 4449 4354  v = INVALID_DICT
-0000ddc0: 5b64 7479 7065 2e6e 756d 5d0d 0a20 2020  [dtype.num]..   
-0000ddd0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-0000dde0: 2020 2020 2020 2020 696e 7620 3d20 6669          inv = fi
-0000ddf0: 6c6c 5f76 616c 0d0a 0d0a 2020 2020 2020  ll_val....      
-0000de00: 2020 6966 2069 6e70 6c61 6365 2069 7320    if inplace is 
-0000de10: 5472 7565 3a0d 0a20 2020 2020 2020 2020  True:..         
-0000de20: 2020 2069 6620 7368 6170 6520 213d 2073     if shape != s
-0000de30: 656c 662e 7368 6170 653a 0d0a 2020 2020  elf.shape:..    
-0000de40: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0000de50: 6520 5661 6c75 6545 7272 6f72 280d 0a20  e ValueError(.. 
-0000de60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000de70: 2020 2066 2249 6e70 6c61 6365 2066 696c     f"Inplace fil
-0000de80: 6c20 696e 7661 6c69 6420 6361 6e6e 6f74  l invalid cannot
-0000de90: 2062 6520 6469 6666 6572 656e 7420 6e75   be different nu
-0000dea0: 6d62 6572 206f 6620 726f 7773 2074 6861  mber of rows tha
-0000deb0: 6e20 6578 6973 7469 6e67 2061 7272 6179  n existing array
-0000dec0: 2e20 476f 7420 7b73 6861 7065 7d20 7673  . Got {shape} vs
-0000ded0: 2e20 6c65 6e67 7468 207b 6c65 6e28 7365  . length {len(se
-0000dee0: 6c66 297d 220d 0a20 2020 2020 2020 2020  lf)}"..         
-0000def0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-0000df00: 2020 2020 2020 6966 2064 7479 7065 2021        if dtype !
-0000df10: 3d20 7365 6c66 2e64 7479 7065 3a0d 0a20  = self.dtype:.. 
-0000df20: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0000df30: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
-0000df40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000df50: 2020 2020 2020 6622 496e 706c 6163 6520        f"Inplace 
-0000df60: 6669 6c6c 2069 6e76 616c 6964 2063 616e  fill invalid can
-0000df70: 6e6f 7420 6265 2064 6966 6665 7265 6e74  not be different
-0000df80: 2064 7479 7065 2074 6861 6e20 6578 6973   dtype than exis
-0000df90: 7469 6e67 2061 7272 6179 2e20 476f 7420  ting array. Got 
-0000dfa0: 7b64 7479 7065 7d20 7673 2e20 7b6c 656e  {dtype} vs. {len
-0000dfb0: 2873 656c 662e 6474 7970 6529 7d22 0d0a  (self.dtype)}"..
-0000dfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dfd0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0000dfe0: 2073 656c 662e 6669 6c6c 2869 6e76 290d   self.fill(inv).
-0000dff0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-0000e000: 2020 2020 2020 2020 2020 2020 6172 7220              arr 
-0000e010: 3d20 6675 6c6c 2873 6861 7065 2c20 696e  = full(shape, in
-0000e020: 762c 2064 7479 7065 3d64 7479 7065 290d  v, dtype=dtype).
-0000e030: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0000e040: 7572 6e20 6172 720d 0a0d 0a20 2020 2023  urn arr....    #
-0000e050: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
-0000e060: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e070: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e080: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e090: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-0000e0a0: 6465 6620 6973 696e 2873 656c 662c 2074  def isin(self, t
-0000e0b0: 6573 745f 656c 656d 656e 7473 2c20 2a2c  est_elements, *,
-0000e0c0: 2061 7373 756d 655f 756e 6971 7565 3d46   assume_unique=F
-0000e0d0: 616c 7365 2c20 696e 7665 7274 3d46 616c  alse, invert=Fal
-0000e0e0: 7365 2920 2d3e 2046 6173 7441 7272 6179  se) -> FastArray
-0000e0f0: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-0000e100: 2020 2020 2020 2020 4361 6c63 756c 6174          Calculat
-0000e110: 6573 2060 7365 6c66 2069 6e20 7465 7374  es `self in test
-0000e120: 5f65 6c65 6d65 6e74 7360 2c20 6272 6f61  _elements`, broa
-0000e130: 6463 6173 7469 6e67 206f 7665 7220 6073  dcasting over `s
-0000e140: 656c 6660 206f 6e6c 792e 0d0a 2020 2020  elf` only...    
-0000e150: 2020 2020 5265 7475 726e 7320 6120 626f      Returns a bo
-0000e160: 6f6c 6561 6e20 6172 7261 7920 6f66 2074  olean array of t
-0000e170: 6865 2073 616d 6520 7368 6170 6520 6173  he same shape as
-0000e180: 2060 7365 6c66 6020 7468 6174 2069 7320   `self` that is 
-0000e190: 5472 7565 0d0a 2020 2020 2020 2020 7768  True..        wh
-0000e1a0: 6572 6520 616e 2065 6c65 6d65 6e74 206f  ere an element o
-0000e1b0: 6620 6073 656c 6660 2069 7320 696e 2060  f `self` is in `
-0000e1c0: 7465 7374 5f65 6c65 6d65 6e74 7360 2061  test_elements` a
-0000e1d0: 6e64 2046 616c 7365 206f 7468 6572 7769  nd False otherwi
-0000e1e0: 7365 2e0d 0a0d 0a20 2020 2020 2020 2050  se.....        P
-0000e1f0: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
-0000e200: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
-0000e210: 2020 2020 2020 2074 6573 745f 656c 656d         test_elem
-0000e220: 656e 7473 203a 2061 7272 6179 5f6c 696b  ents : array_lik
-0000e230: 650d 0a20 2020 2020 2020 2020 2020 2054  e..            T
-0000e240: 6865 2076 616c 7565 7320 6167 6169 6e73  he values agains
-0000e250: 7420 7768 6963 6820 746f 2074 6573 7420  t which to test 
-0000e260: 6561 6368 2076 616c 7565 206f 6620 6065  each value of `e
-0000e270: 6c65 6d65 6e74 602e 0d0a 2020 2020 2020  lement`...      
-0000e280: 2020 2020 2020 5468 6973 2061 7267 756d        This argum
-0000e290: 656e 7420 6973 2066 6c61 7474 656e 6564  ent is flattened
-0000e2a0: 2069 6620 6974 2069 7320 616e 2061 7272   if it is an arr
-0000e2b0: 6179 206f 7220 6172 7261 795f 6c69 6b65  ay or array_like
-0000e2c0: 2e0d 0a20 2020 2020 2020 2020 2020 2053  ...            S
-0000e2d0: 6565 206e 6f74 6573 2066 6f72 2062 6568  ee notes for beh
-0000e2e0: 6176 696f 7220 7769 7468 206e 6f6e 2d61  avior with non-a
-0000e2f0: 7272 6179 2d6c 696b 6520 7061 7261 6d65  rray-like parame
-0000e300: 7465 7273 2e0d 0a20 2020 2020 2020 2061  ters...        a
-0000e310: 7373 756d 655f 756e 6971 7565 203a 2062  ssume_unique : b
-0000e320: 6f6f 6c2c 206f 7074 696f 6e61 6c0d 0a20  ool, optional.. 
-0000e330: 2020 2020 2020 2020 2020 2049 6620 5472             If Tr
-0000e340: 7565 2c20 7468 6520 696e 7075 7420 6172  ue, the input ar
-0000e350: 7261 7973 2061 7265 2062 6f74 6820 6173  rays are both as
-0000e360: 7375 6d65 6420 746f 2062 6520 756e 6971  sumed to be uniq
-0000e370: 7565 2c20 7768 6963 680d 0a20 2020 2020  ue, which..     
-0000e380: 2020 2020 2020 2063 616e 2073 7065 6564         can speed
-0000e390: 2075 7020 7468 6520 6361 6c63 756c 6174   up the calculat
-0000e3a0: 696f 6e2e 2020 4465 6661 756c 7420 6973  ion.  Default is
-0000e3b0: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
-0000e3c0: 2069 6e76 6572 7420 3a20 626f 6f6c 2c20   invert : bool, 
-0000e3d0: 6f70 7469 6f6e 616c 0d0a 2020 2020 2020  optional..      
-0000e3e0: 2020 2020 2020 4966 2054 7275 652c 2074        If True, t
-0000e3f0: 6865 2076 616c 7565 7320 696e 2074 6865  he values in the
-0000e400: 2072 6574 7572 6e65 6420 6172 7261 7920   returned array 
-0000e410: 6172 6520 696e 7665 7274 6564 2c20 6173  are inverted, as
-0000e420: 2069 660d 0a20 2020 2020 2020 2020 2020   if..           
-0000e430: 2063 616c 6375 6c61 7469 6e67 2060 656c   calculating `el
-0000e440: 656d 656e 7420 6e6f 7420 696e 2074 6573  ement not in tes
-0000e450: 745f 656c 656d 656e 7473 602e 2044 6566  t_elements`. Def
-0000e460: 6175 6c74 2069 7320 4661 6c73 652e 0d0a  ault is False...
-0000e470: 2020 2020 2020 2020 2020 2020 6060 6e70              ``np
-0000e480: 2e69 7369 6e28 612c 2062 2c20 696e 7665  .isin(a, b, inve
-0000e490: 7274 3d54 7275 6529 6060 2069 7320 6571  rt=True)`` is eq
-0000e4a0: 7569 7661 6c65 6e74 2074 6f20 2862 7574  uivalent to (but
-0000e4b0: 2066 6173 7465 720d 0a20 2020 2020 2020   faster..       
-0000e4c0: 2020 2020 2074 6861 6e29 2060 606e 702e       than) ``np.
-0000e4d0: 696e 7665 7274 286e 702e 6973 696e 2861  invert(np.isin(a
-0000e4e0: 2c20 6229 2960 602e 0d0a 0d0a 2020 2020  , b))``.....    
-0000e4f0: 2020 2020 5265 7475 726e 730d 0a20 2020      Returns..   
-0000e500: 2020 2020 202d 2d2d 2d2d 2d2d 0d0a 2020       -------..  
-0000e510: 2020 2020 2020 6973 696e 203a 206e 6461        isin : nda
-0000e520: 7272 6179 2c20 626f 6f6c 0d0a 2020 2020  rray, bool..    
-0000e530: 2020 2020 2020 2020 4861 7320 7468 6520          Has the 
-0000e540: 7361 6d65 2073 6861 7065 2061 7320 6065  same shape as `e
-0000e550: 6c65 6d65 6e74 602e 2054 6865 2076 616c  lement`. The val
-0000e560: 7565 7320 6065 6c65 6d65 6e74 5b69 7369  ues `element[isi
-0000e570: 6e5d 600d 0a20 2020 2020 2020 2020 2020  n]`..           
-0000e580: 2061 7265 2069 6e20 6074 6573 745f 656c   are in `test_el
-0000e590: 656d 656e 7473 602e 0d0a 0d0a 2020 2020  ements`.....    
-0000e5a0: 2020 2020 4e6f 7465 3a20 6265 6861 7669      Note: behavi
-0000e5b0: 6f72 2064 6966 6665 7273 2066 726f 6d20  or differs from 
-0000e5c0: 7061 6e64 6173 0d0a 2020 2020 2020 2020  pandas..        
-0000e5d0: 2d20 5269 7074 6162 6c65 2066 6176 6f72  - Riptable favor
-0000e5e0: 7320 6279 7465 7374 7269 6e67 732c 2061  s bytestrings, a
-0000e5f0: 6e64 2077 696c 6c20 6d61 6b65 2063 6f6e  nd will make con
-0000e600: 7665 7273 696f 6e73 2066 726f 6d20 756e  versions from un
-0000e610: 6963 6f64 652f 6279 7465 7320 746f 206d  icode/bytes to m
-0000e620: 6174 6368 2066 6f72 206f 7065 7261 7469  atch for operati
-0000e630: 6f6e 7320 6173 206e 6563 6573 7361 7279  ons as necessary
-0000e640: 2e0d 0a20 2020 2020 2020 202d 2057 6520  ...        - We 
-0000e650: 7769 6c6c 2061 6c73 6f20 6163 6365 7074  will also accept
-0000e660: 2073 696e 676c 6520 7363 616c 6172 7320   single scalars 
-0000e670: 666f 7220 7661 6c75 6573 2e0d 0a20 2020  for values...   
-0000e680: 2020 2020 202d 2050 616e 6461 7320 7365       - Pandas se
-0000e690: 7269 6573 2077 696c 6c20 7265 7475 726e  ries will return
-0000e6a0: 2061 6e6f 7468 6572 2073 6572 6965 7320   another series 
-0000e6b0: 2d20 7765 2068 6176 6520 6e6f 2073 6572  - we have no ser
-0000e6c0: 6965 732c 2061 6e64 2077 696c 6c20 7265  ies, and will re
-0000e6d0: 7475 726e 2061 2046 6173 7441 7272 6179  turn a FastArray
-0000e6e0: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
-0000e6f0: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
-0000e700: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0000e710: 3e3e 3e20 6672 6f6d 2072 6970 7461 626c  >>> from riptabl
-0000e720: 6520 696d 706f 7274 202a 0d0a 2020 2020  e import *..    
-0000e730: 2020 2020 3e3e 3e20 6120 3d20 4641 285b      >>> a = FA([
-0000e740: 2761 272c 2762 272c 2763 272c 2764 272c  'a','b','c','d',
-0000e750: 2765 275d 2c20 756e 6963 6f64 653d 4661  'e'], unicode=Fa
-0000e760: 6c73 6529 0d0a 2020 2020 2020 2020 3e3e  lse)..        >>
-0000e770: 3e20 612e 6973 696e 285b 2761 272c 2762  > a.isin(['a','b
-0000e780: 275d 290d 0a20 2020 2020 2020 2046 6173  '])..        Fas
-0000e790: 7441 7272 6179 285b 2054 7275 652c 2020  tArray([ True,  
-0000e7a0: 5472 7565 2c20 4661 6c73 652c 2046 616c  True, False, Fal
-0000e7b0: 7365 2c20 4661 6c73 655d 290d 0a20 2020  se, False])..   
-0000e7c0: 2020 2020 203e 3e3e 2061 2e69 7369 6e28       >>> a.isin(
-0000e7d0: 2761 2729 0d0a 2020 2020 2020 2020 4661  'a')..        Fa
-0000e7e0: 7374 4172 7261 7928 5b20 5472 7565 2c20  stArray([ True, 
+0000a650: 2020 2020 2320 6d61 6b65 2069 7420 636f      # make it co
+0000a660: 6e74 6967 756f 7573 2c20 696e 2063 6173  ntiguous, in cas
+0000a670: 6520 7468 6174 2773 2074 6865 2070 726f  e that's the pro
+0000a680: 626c 656d 3f0d 0a20 2020 2020 2020 2020  blem?..         
+0000a690: 2020 2020 2020 2020 2020 206e 6577 7661             newva
+0000a6a0: 6c75 6520 3d20 6e65 7776 616c 7565 2e63  lue = newvalue.c
+0000a6b0: 6f70 7928 290d 0a20 2020 2020 2020 2020  opy()..         
+0000a6c0: 2020 2020 2020 2020 2020 2023 2072 652d             # re-
+0000a6d0: 7465 7374 2073 7570 706f 7274 2c20 6a75  test support, ju
+0000a6e0: 7374 2074 6f20 6265 2073 7572 652e 0d0a  st to be sure...
+0000a6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a700: 2020 2020 6973 5f75 6e73 7570 706f 7274      is_unsupport
+0000a710: 6564 203d 2073 656c 662e 5f69 735f 6e6f  ed = self._is_no
+0000a720: 745f 7375 7070 6f72 7465 6428 6e65 7776  t_supported(newv
+0000a730: 616c 7565 290d 0a0d 0a20 2020 2020 2020  alue)....       
+0000a740: 2020 2020 2020 2020 2023 2069 6620 7375           # if su
+0000a750: 7070 6f72 7465 642c 2063 616c 6c20 6f75  pported, call ou
+0000a760: 7220 7365 7469 7465 6d2c 2069 7420 7769  r setitem, it wi
+0000a770: 6c6c 2072 6574 7572 6e20 4661 6c73 6520  ll return False 
+0000a780: 6966 2069 7420 6661 696c 730d 0a20 2020  if it fails..   
+0000a790: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0000a7a0: 6e6f 7420 6973 5f75 6e73 7570 706f 7274  not is_unsupport
+0000a7b0: 6564 3a0d 0a20 2020 2020 2020 2020 2020  ed:..           
+0000a7c0: 2020 2020 2020 2020 2069 6620 7263 2e53           if rc.S
+0000a7d0: 6574 4974 656d 2873 656c 662c 2066 6c64  etItem(self, fld
+0000a7e0: 2c20 6e65 7776 616c 7565 293a 0d0a 2020  , newvalue):..  
+0000a7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a800: 2020 2020 2020 7265 7475 726e 0d0a 2020        return..  
+0000a810: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
+0000a820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a830: 6e70 2e6e 6461 7272 6179 2e5f 5f73 6574  np.ndarray.__set
+0000a840: 6974 656d 5f5f 2873 656c 662c 2066 6c64  item__(self, fld
+0000a850: 2c20 6e65 7776 616c 7565 290d 0a20 2020  , newvalue)..   
+0000a860: 2020 2020 2020 2020 2065 7863 6570 7420           except 
+0000a870: 4578 6365 7074 696f 6e3a 0d0a 2020 2020  Exception:..    
+0000a880: 2020 2020 2020 2020 2020 2020 2320 6f64              # od
+0000a890: 6420 6261 6c6c 2063 6173 6573 2068 616e  d ball cases han
+0000a8a0: 646c 6564 2068 6572 6520 6c69 6b65 2075  dled here like u
+0000a8b0: 6675 6e63 2074 6573 7473 0d0a 2020 2020  func tests..    
+0000a8c0: 2020 2020 2020 2020 2020 2020 6e70 2e6e              np.n
+0000a8d0: 6461 7272 6179 2e5f 5f73 6574 6974 656d  darray.__setitem
+0000a8e0: 5f5f 2873 656c 662c 2066 6c64 2c20 7661  __(self, fld, va
+0000a8f0: 6c75 6529 0d0a 2020 2020 2020 2020 2020  lue)..          
+0000a900: 2020 7265 7475 726e 0d0a 0d0a 2020 2020    return....    
+0000a910: 2020 2020 2320 7075 6e74 2074 6f20 6e6f      # punt to no
+0000a920: 726d 616c 206e 756d 7079 0d0a 2020 2020  rmal numpy..    
+0000a930: 2020 2020 6e70 2e6e 6461 7272 6179 2e5f      np.ndarray._
+0000a940: 5f73 6574 6974 656d 5f5f 2873 656c 662c  _setitem__(self,
+0000a950: 2066 6c64 2c20 7661 6c75 6529 0d0a 0d0a   fld, value)....
+0000a960: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+0000a970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a980: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a990: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a9a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a9b0: 0d0a 2020 2020 6465 6620 5f5f 6765 7469  ..    def __geti
+0000a9c0: 7465 6d5f 5f28 7365 6c66 2c20 666c 6429  tem__(self, fld)
+0000a9d0: 202d 3e20 4661 7374 4172 7261 793a 0d0a   -> FastArray:..
+0000a9e0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+0000a9f0: 2020 2020 2072 6970 7461 626c 6520 6861       riptable ha
+0000aa00: 7320 7370 6563 6961 6c20 726f 7574 696e  s special routin
+0000aa10: 6573 2074 6f20 6861 6e64 6c65 2061 7272  es to handle arr
+0000aa20: 6179 2069 6e70 7574 2069 6e20 7468 6520  ay input in the 
+0000aa30: 696e 6465 7865 722e 0d0a 2020 2020 2020  indexer...      
+0000aa40: 2020 4576 6572 7974 6869 6e67 2065 6c73    Everything els
+0000aa50: 6520 7769 6c6c 2067 6f20 746f 206e 756d  e will go to num
+0000aa60: 7079 2067 6574 6974 656d 2e0d 0a20 2020  py getitem...   
+0000aa70: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+0000aa80: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0000aa90: 666c 642c 206e 702e 6e64 6172 7261 7929  fld, np.ndarray)
+0000aaa0: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
+0000aab0: 2072 6573 756c 743d 2073 7570 6572 2846   result= super(F
+0000aac0: 6173 7441 7272 6179 2c20 7365 6c66 292e  astArray, self).
+0000aad0: 5f5f 6765 7469 7465 6d5f 5f28 666c 6429  __getitem__(fld)
+0000aae0: 2e76 6965 7728 4661 7374 4172 7261 7929  .view(FastArray)
+0000aaf0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+0000ab00: 2066 6c64 2e64 7479 7065 203d 3d20 6e70   fld.dtype == np
+0000ab10: 2e62 6f6f 6c5f 3a0d 0a20 2020 2020 2020  .bool_:..       
+0000ab20: 2020 2020 2020 2020 2023 206d 616b 6520           # make 
+0000ab30: 7375 7265 206e 6f20 7374 7269 6469 6e67  sure no striding
+0000ab40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000ab50: 2020 2320 4e4f 5445 3a20 7769 6c6c 2066    # NOTE: will f
+0000ab60: 6169 6c20 6f6e 2073 656c 662e 6474 7970  ail on self.dtyp
+0000ab70: 652e 6279 7465 6f72 6465 7220 6173 206c  e.byteorder as l
+0000ab80: 6974 746c 6520 656e 6469 616e 0d0a 2020  ittle endian..  
+0000ab90: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0000aba0: 2073 656c 662e 666c 6167 732e 665f 636f   self.flags.f_co
+0000abb0: 6e74 6967 756f 7573 3a0d 0a20 2020 2020  ntiguous:..     
+0000abc0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000abd0: 2064 696d 656e 7369 6f6e 7320 6d75 7374   dimensions must
+0000abe0: 206d 6174 6368 0d0a 2020 2020 2020 2020   match..        
+0000abf0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0000ac00: 656c 662e 6e64 696d 203d 3d20 666c 642e  elf.ndim == fld.
+0000ac10: 6e64 696d 2061 6e64 2073 656c 662e 6e64  ndim and self.nd
+0000ac20: 696d 203d 3d20 313a 0d0a 2020 2020 2020  im == 1:..      
+0000ac30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac40: 2020 7265 7475 726e 2054 7970 6552 6567    return TypeReg
+0000ac50: 6973 7465 722e 4d61 7468 4c65 6467 6572  ister.MathLedger
+0000ac60: 2e5f 494e 4445 585f 424f 4f4c 2873 656c  ._INDEX_BOOL(sel
+0000ac70: 662c 2066 6c64 290d 0a0d 0a20 2020 2020  f, fld)....     
+0000ac80: 2020 2020 2020 2023 2069 6620 7765 2068         # if we h
+0000ac90: 6176 6520 6661 6e63 7920 696e 6465 7869  ave fancy indexi
+0000aca0: 6e67 2061 6e64 2077 6520 7375 7070 6f72  ng and we suppor
+0000acb0: 7420 7468 6520 6172 7261 7920 7479 7065  t the array type
+0000acc0: 2c20 6d61 6b65 2073 7572 6520 7765 2064  , make sure we d
+0000acd0: 6f20 6e6f 7420 6861 7665 2073 7472 6964  o not have strid
+0000ace0: 6520 7072 6f62 6c65 6d0d 0a20 2020 2020  e problem..     
+0000acf0: 2020 2020 2020 2069 6620 666c 642e 6474         if fld.dt
+0000ad00: 7970 652e 6368 6172 2069 6e20 4e75 6d70  ype.char in Nump
+0000ad10: 7943 6861 7254 7970 6573 2e41 6c6c 496e  yCharTypes.AllIn
+0000ad20: 7465 6765 7220 616e 6420 7365 6c66 2e64  teger and self.d
+0000ad30: 7479 7065 2e63 6861 7220 696e 204e 756d  type.char in Num
+0000ad40: 7079 4368 6172 5479 7065 732e 5375 7070  pyCharTypes.Supp
+0000ad50: 6f72 7465 6441 6c74 6572 6e61 7465 3a0d  ortedAlternate:.
+0000ad60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000ad70: 2069 6620 7365 6c66 2e66 6c61 6773 2e66   if self.flags.f
+0000ad80: 5f63 6f6e 7469 6775 6f75 7320 616e 6420  _contiguous and 
+0000ad90: 666c 642e 666c 6167 732e 665f 636f 6e74  fld.flags.f_cont
+0000ada0: 6967 756f 7573 3a0d 0a20 2020 2020 2020  iguous:..       
+0000adb0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0000adc0: 6c65 6e28 7365 6c66 2e73 6861 7065 2920  len(self.shape) 
+0000add0: 3d3d 2031 3a0d 0a20 2020 2020 2020 2020  == 1:..         
+0000ade0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0000adf0: 6574 7572 6e20 5479 7065 5265 6769 7374  eturn TypeRegist
+0000ae00: 6572 2e4d 6174 684c 6564 6765 722e 5f4d  er.MathLedger._M
+0000ae10: 4247 4554 2873 656c 662c 2066 6c64 290d  BGET(self, fld).
+0000ae20: 0a0d 0a20 2020 2020 2020 2020 2020 2072  ...            r
+0000ae30: 6573 756c 7420 3d20 5479 7065 5265 6769  esult = TypeRegi
+0000ae40: 7374 6572 2e4d 6174 684c 6564 6765 722e  ster.MathLedger.
+0000ae50: 5f47 4554 4954 454d 2873 7570 6572 2846  _GETITEM(super(F
+0000ae60: 6173 7441 7272 6179 2c20 7365 6c66 292c  astArray, self),
+0000ae70: 2066 6c64 290d 0a20 2020 2020 2020 2020   fld)..         
+0000ae80: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
+0000ae90: 2e76 6965 7728 4661 7374 4172 7261 7929  .view(FastArray)
+0000aea0: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
+0000aeb0: 0a20 2020 2020 2020 2020 2020 2023 2063  .            # c
+0000aec0: 6f75 6c64 2062 6520 6120 6c69 7374 2077  ould be a list w
+0000aed0: 6869 6368 2069 7320 6f66 7465 6e20 636f  hich is often co
+0000aee0: 6e76 6572 7465 6420 746f 2061 6e20 6172  nverted to an ar
+0000aef0: 7261 790d 0a0d 0a20 2020 2020 2020 2020  ray....         
+0000af00: 2020 2023 2054 6869 7320 6173 7375 6d65     # This assume
+0000af10: 7320 7468 6174 2046 6173 7441 7272 6179  s that FastArray
+0000af20: 2068 6173 2061 2073 6f6c 6520 7061 7265   has a sole pare
+0000af30: 6e74 2c20 6e70 2e6e 6461 7272 6179 0d0a  nt, np.ndarray..
+0000af40: 2020 2020 2020 2020 2020 2020 2320 4966              # If
+0000af50: 2074 6869 7320 6368 616e 6765 732c 2074   this changes, t
+0000af60: 6865 2073 7570 6572 2829 2063 616c 6c20  he super() call 
+0000af70: 6e65 6564 7320 746f 2062 6520 7573 6564  needs to be used
+0000af80: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+0000af90: 7475 726e 206e 702e 6e64 6172 7261 792e  turn np.ndarray.
+0000afa0: 5f5f 6765 7469 7465 6d5f 5f28 7365 6c66  __getitem__(self
+0000afb0: 2c20 666c 6429 0d0a 2020 2020 2020 2020  , fld)..        
+0000afc0: 2020 2020 2320 7265 7475 726e 2073 7570      # return sup
+0000afd0: 6572 2846 6173 7441 7272 6179 2c20 7365  er(FastArray, se
+0000afe0: 6c66 292e 5f5f 6765 7469 7465 6d5f 5f28  lf).__getitem__(
+0000aff0: 666c 6429 0d0a 0d0a 2020 2020 2320 2d2d  fld)....    # --
+0000b000: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b010: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b020: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b030: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b040: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 6465  --------..    de
+0000b050: 6620 6469 7370 6c61 795f 7175 6572 795f  f display_query_
+0000b060: 7072 6f70 6572 7469 6573 2873 656c 6629  properties(self)
+0000b070: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+0000b080: 2020 2020 2020 2020 5265 7475 726e 7320          Returns 
+0000b090: 616e 2049 7465 6d46 6f72 6d61 7420 6f62  an ItemFormat ob
+0000b0a0: 6a65 6374 2061 6e64 2061 2066 756e 6374  ject and a funct
+0000b0b0: 696f 6e20 666f 7220 636f 6e76 6572 7469  ion for converti
+0000b0c0: 6e67 2074 6865 2046 6173 7441 7272 6179  ng the FastArray
+0000b0d0: 7320 6974 656d 7320 746f 2073 7472 696e  s items to strin
+0000b0e0: 6773 2e0d 0a20 2020 2020 2020 2042 6173  gs...        Bas
+0000b0f0: 6963 2074 7970 6573 3a20 426f 6f6c 2c20  ic types: Bool, 
+0000b100: 496e 742c 2046 6c6f 6174 2c20 4279 7465  Int, Float, Byte
+0000b110: 732c 2053 7472 696e 6720 616c 6c20 6861  s, String all ha
+0000b120: 7665 2064 6566 6175 6c74 2066 6f72 6d61  ve default forma
+0000b130: 7473 202f 2063 6f6e 7665 7273 696f 6e20  ts / conversion 
+0000b140: 6675 6e63 7469 6f6e 732e 0d0a 2020 2020  functions...    
+0000b150: 2020 2020 2873 6565 2055 7469 6c73 2e72      (see Utils.r
+0000b160: 745f 6469 7370 6c61 795f 7072 6f70 6572  t_display_proper
+0000b170: 7469 6573 290d 0a0d 0a20 2020 2020 2020  ties)....       
+0000b180: 2049 6620 6120 6e65 7720 7479 7065 2069   If a new type i
+0000b190: 7320 6120 7375 6263 6c61 7373 206f 6620  s a subclass of 
+0000b1a0: 4661 7374 4172 7261 7920 616e 6420 6e65  FastArray and ne
+0000b1b0: 6564 7320 746f 2062 6520 6469 7370 6c61  eds to be displa
+0000b1c0: 7965 6420 696e 2066 6f72 6d61 740d 0a20  yed in format.. 
+0000b1d0: 2020 2020 2020 2064 6966 6665 7265 6e74         different
+0000b1e0: 2066 726f 6d20 6974 7320 756e 6465 726c   from its underl
+0000b1f0: 7969 6e67 2074 7970 652c 2069 7420 7769  ying type, it wi
+0000b200: 6c6c 206e 6565 6420 746f 2074 616b 6520  ll need to take 
+0000b210: 6f76 6572 2074 6869 7320 726f 7574 696e  over this routin
+0000b220: 652e 0d0a 2020 2020 2020 2020 2222 220d  e...        """.
+0000b230: 0a20 2020 2020 2020 2061 7272 5f74 7970  .        arr_typ
+0000b240: 652c 2063 6f6e 7665 7274 5f66 756e 6320  e, convert_func 
+0000b250: 3d20 4469 7370 6c61 7943 6f6e 7665 7274  = DisplayConvert
+0000b260: 2e67 6574 5f64 6973 706c 6179 5f63 6f6e  .get_display_con
+0000b270: 7665 7274 2873 656c 6629 0d0a 2020 2020  vert(self)..    
+0000b280: 2020 2020 6469 7370 6c61 795f 666f 726d      display_form
+0000b290: 6174 203d 2064 6566 6175 6c74 5f69 7465  at = default_ite
+0000b2a0: 6d5f 666f 726d 6174 732e 6765 7428 6172  m_formats.get(ar
+0000b2b0: 725f 7479 7065 2c20 4974 656d 466f 726d  r_type, ItemForm
+0000b2c0: 6174 2829 290d 0a20 2020 2020 2020 2069  at())..        i
+0000b2d0: 6620 6c65 6e28 7365 6c66 2e73 6861 7065  f len(self.shape
+0000b2e0: 2920 3e20 313a 0d0a 2020 2020 2020 2020  ) > 1:..        
+0000b2f0: 2020 2020 6469 7370 6c61 795f 666f 726d      display_form
+0000b300: 6174 2e63 6f6e 7665 7274 203d 2063 6f6e  at.convert = con
+0000b310: 7665 7274 5f66 756e 630d 0a20 2020 2020  vert_func..     
+0000b320: 2020 2020 2020 2063 6f6e 7665 7274 5f66         convert_f
+0000b330: 756e 6320 3d20 4469 7370 6c61 7943 6f6e  unc = DisplayCon
+0000b340: 7665 7274 2e63 6f6e 7665 7274 4d75 6c74  vert.convertMult
+0000b350: 6944 696d 730d 0a0d 0a20 2020 2020 2020  iDims....       
+0000b360: 2023 2061 6464 2073 656e 7469 6e65 6c20   # add sentinel 
+0000b370: 7661 6c75 6520 666f 7220 696e 7465 6765  value for intege
+0000b380: 720d 0a20 2020 2020 2020 2069 6620 6469  r..        if di
+0000b390: 7370 6c61 795f 666f 726d 6174 2e69 6e76  splay_format.inv
+0000b3a0: 616c 6964 2069 7320 4e6f 6e65 3a0d 0a20  alid is None:.. 
+0000b3b0: 2020 2020 2020 2020 2020 2064 6973 706c             displ
+0000b3c0: 6179 5f66 6f72 6d61 7420 3d20 6469 7370  ay_format = disp
+0000b3d0: 6c61 795f 666f 726d 6174 2e63 6f70 7928  lay_format.copy(
+0000b3e0: 290d 0a20 2020 2020 2020 2020 2020 2069  )..            i
+0000b3f0: 6620 7365 6c66 2e64 7479 7065 2e63 6861  f self.dtype.cha
+0000b400: 7220 696e 204e 756d 7079 4368 6172 5479  r in NumpyCharTy
+0000b410: 7065 732e 416c 6c49 6e74 6567 6572 3a0d  pes.AllInteger:.
+0000b420: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b430: 2064 6973 706c 6179 5f66 6f72 6d61 742e   display_format.
+0000b440: 696e 7661 6c69 6420 3d20 494e 5641 4c49  invalid = INVALI
+0000b450: 445f 4449 4354 5b73 656c 662e 6474 7970  D_DICT[self.dtyp
+0000b460: 652e 6e75 6d5d 0d0a 2020 2020 2020 2020  e.num]..        
+0000b470: 7265 7475 726e 2064 6973 706c 6179 5f66  return display_f
+0000b480: 6f72 6d61 742c 2063 6f6e 7665 7274 5f66  ormat, convert_f
+0000b490: 756e 630d 0a0d 0a20 2020 2023 202d 2d2d  unc....    # ---
+0000b4a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b4b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b4c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b4d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b4e0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
+0000b4f0: 2061 7374 7970 6528 7365 6c66 2c20 6474   astype(self, dt
+0000b500: 7970 652c 206f 7264 6572 3d22 4b22 2c20  ype, order="K", 
+0000b510: 6361 7374 696e 673d 2275 6e73 6166 6522  casting="unsafe"
+0000b520: 2c20 7375 626f 6b3d 5472 7565 2c20 636f  , subok=True, co
+0000b530: 7079 3d54 7275 6529 202d 3e20 4661 7374  py=True) -> Fast
+0000b540: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
+0000b550: 2222 220d 0a20 2020 2020 2020 2052 6574  """..        Ret
+0000b560: 7572 6e20 6120 6046 6173 7441 7272 6179  urn a `FastArray
+0000b570: 6020 7769 7468 2076 616c 7565 7320 636f  ` with values co
+0000b580: 6e76 6572 7465 6420 746f 2074 6865 2073  nverted to the s
+0000b590: 7065 6369 6669 6564 2064 6174 6120 7479  pecified data ty
+0000b5a0: 7065 2e0d 0a0d 0a20 2020 2020 2020 2043  pe.....        C
+0000b5b0: 6865 636b 2079 6f75 7220 7265 7375 6c74  heck your result
+0000b5c0: 7320 7768 656e 2079 6f75 2063 6f6e 7665  s when you conve
+0000b5d0: 7274 206d 6973 7369 6e67 2076 616c 7565  rt missing value
+0000b5e0: 732e 2053 656e 7469 6e65 6c20 7661 6c75  s. Sentinel valu
+0000b5f0: 6573 2061 7265 0d0a 2020 2020 2020 2020  es are..        
+0000b600: 7072 6573 6572 7665 6420 7768 656e 2052  preserved when R
+0000b610: 6970 7461 626c 6520 6861 6e64 6c65 7320  iptable handles 
+0000b620: 7468 6520 636f 6e76 6572 7369 6f6e 2e20  the conversion. 
+0000b630: 486f 7765 7665 722c 2069 6e20 736f 6d65  However, in some
+0000b640: 2063 6173 6573 0d0a 2020 2020 2020 2020   cases..        
+0000b650: 7468 6520 6172 7261 7920 6973 2073 656e  the array is sen
+0000b660: 7420 746f 204e 756d 5079 2066 6f72 2063  t to NumPy for c
+0000b670: 6f6e 7665 7273 696f 6e20 616e 6420 7265  onversion and re
+0000b680: 7375 6c74 7320 6d61 7920 6e6f 7420 6265  sults may not be
+0000b690: 2077 6861 740d 0a20 2020 2020 2020 2079   what..        y
+0000b6a0: 6f75 2065 7870 6563 742e 0d0a 0d0a 2020  ou expect.....  
+0000b6b0: 2020 2020 2020 466f 7220 7061 7261 6d65        For parame
+0000b6c0: 7465 7220 6465 7363 7269 7074 696f 6e73  ter descriptions
+0000b6d0: 2c20 7365 6520 3a70 793a 6d65 7468 3a60  , see :py:meth:`
+0000b6e0: 6e75 6d70 792e 6e64 6172 7261 792e 6173  numpy.ndarray.as
+0000b6f0: 7479 7065 602e 204e 6f74 650d 0a20 2020  type`. Note..   
+0000b700: 2020 2020 2074 6861 7420 756e 7469 6c20       that until 
+0000b710: 6120 7265 706f 7274 6564 2062 7567 2069  a reported bug i
+0000b720: 7320 6669 7865 642c 2074 6865 2060 6361  s fixed, the `ca
+0000b730: 7374 696e 6760 2070 6172 616d 6574 6572  sting` parameter
+0000b740: 2069 7320 6967 6e6f 7265 640d 0a20 2020   is ignored..   
+0000b750: 2020 2020 2077 6865 6e20 5269 7074 6162       when Riptab
+0000b760: 6c65 2068 616e 646c 6573 2074 6865 2063  le handles the c
+0000b770: 6f6e 7665 7273 696f 6e2e 0d0a 0d0a 2020  onversion.....  
+0000b780: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
+0000b790: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
+0000b7a0: 2020 2020 2020 2020 6046 6173 7441 7272          `FastArr
+0000b7b0: 6179 600d 0a20 2020 2020 2020 2020 2020  ay`..           
+0000b7c0: 2041 2060 4661 7374 4172 7261 7960 2077   A `FastArray` w
+0000b7d0: 6974 6820 7661 6c75 6573 2063 6f6e 7665  ith values conve
+0000b7e0: 7274 6564 2074 6f20 7468 6520 7370 6563  rted to the spec
+0000b7f0: 6966 6965 6420 6461 7461 2074 7970 652e  ified data type.
+0000b800: 0d0a 0d0a 2020 2020 2020 2020 5365 6520  ....        See 
+0000b810: 416c 736f 0d0a 2020 2020 2020 2020 2d2d  Also..        --
+0000b820: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0000b830: 4461 7461 7365 742e 6173 7479 7065 0d0a  Dataset.astype..
+0000b840: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
+0000b850: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+0000b860: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
+0000b870: 3e20 6120 3d20 7274 2e46 6173 7441 7272  > a = rt.FastArr
+0000b880: 6179 285b 312e 372c 2032 2e30 2c20 332e  ay([1.7, 2.0, 3.
+0000b890: 305d 290d 0a20 2020 2020 2020 203e 3e3e  0])..        >>>
+0000b8a0: 2061 2e61 7374 7970 6528 696e 7429 0d0a   a.astype(int)..
+0000b8b0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+0000b8c0: 7928 5b31 2c20 322c 2033 5d29 0d0a 0d0a  y([1, 2, 3])....
+0000b8d0: 2020 2020 2020 2020 436f 6e76 6572 7420          Convert 
+0000b8e0: 6120 604e 614e 6020 746f 2061 6e20 6069  a `NaN` to an `i
+0000b8f0: 6e74 6020 7365 6e74 696e 656c 2061 6e64  nt` sentinel and
+0000b900: 2062 6163 6b3a 0d0a 0d0a 2020 2020 2020   back:....      
+0000b910: 2020 3e3e 3e20 6120 3d20 7274 2e46 6173    >>> a = rt.Fas
+0000b920: 7441 7272 6179 285b 7274 2e6e 616e 2c20  tArray([rt.nan, 
+0000b930: 312e 302c 2032 2e30 5d29 0d0a 2020 2020  1.0, 2.0])..    
+0000b940: 2020 2020 3e3e 3e20 615f 696e 7420 3d20      >>> a_int = 
+0000b950: 612e 6173 7479 7065 2869 6e74 290d 0a20  a.astype(int).. 
+0000b960: 2020 2020 2020 203e 3e3e 2061 5f69 6e74         >>> a_int
+0000b970: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+0000b980: 7261 7928 5b2d 3231 3437 3438 3336 3438  ray([-2147483648
+0000b990: 2c20 2020 2020 2020 2020 2020 312c 2020  ,           1,  
+0000b9a0: 2020 2020 2020 2020 2032 5d29 0d0a 2020           2])..  
+0000b9b0: 2020 2020 2020 3e3e 3e20 615f 696e 742e        >>> a_int.
+0000b9c0: 6173 7479 7065 2866 6c6f 6174 290d 0a20  astype(float).. 
+0000b9d0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+0000b9e0: 285b 6e61 6e2c 2020 312e 2c20 2032 2e5d  ([nan,  1.,  2.]
+0000b9f0: 290d 0a20 2020 2020 2020 2022 2222 0d0a  )..        """..
+0000ba00: 2020 2020 2020 2020 2320 7265 7375 6c74          # result
+0000ba10: 3d20 7375 7065 7228 4661 7374 4172 7261  = super(FastArra
+0000ba20: 792c 2073 656c 6629 2e61 7374 7970 6528  y, self).astype(
+0000ba30: 6474 7970 652c 206f 7264 6572 2c63 6173  dtype, order,cas
+0000ba40: 7469 6e67 2c73 7562 6f6b 2c63 6f70 7929  ting,subok,copy)
+0000ba50: 0d0a 2020 2020 2020 2020 2320 3137 2069  ..        # 17 i
+0000ba60: 7320 6f62 6a65 6374 0d0a 2020 2020 2020  s object..      
+0000ba70: 2020 2320 3138 203d 2041 5343 4949 2073    # 18 = ASCII s
+0000ba80: 7472 696e 670d 0a20 2020 2020 2020 2023  tring..        #
+0000ba90: 2031 3920 3d20 554e 4943 4f44 4520 7374   19 = UNICODE st
+0000baa0: 7269 6e67 0d0a 2020 2020 2020 2020 746f  ring..        to
+0000bab0: 5f6e 756d 203d 206e 702e 6474 7970 6528  _num = np.dtype(
+0000bac0: 6474 7970 6529 2e6e 756d 0d0a 0d0a 2020  dtype).num....  
+0000bad0: 2020 2020 2020 2320 6368 6563 6b20 666f        # check fo
+0000bae0: 7220 636f 6e74 6967 756f 7573 2069 6e20  r contiguous in 
+0000baf0: 6f6e 6520 6f72 2074 776f 2064 696d 656e  one or two dimen
+0000bb00: 7369 6f6e 730d 0a20 2020 2020 2020 2069  sions..        i
+0000bb10: 6620 7365 6c66 2e66 6c61 6773 2e66 5f63  f self.flags.f_c
+0000bb20: 6f6e 7469 6775 6f75 7320 6f72 2073 656c  ontiguous or sel
+0000bb30: 662e 666c 6167 732e 635f 636f 6e74 6967  f.flags.c_contig
+0000bb40: 756f 7573 3a0d 0a20 2020 2020 2020 2020  uous:..         
+0000bb50: 2020 2069 6620 6f72 6465 7220 3d3d 2022     if order == "
+0000bb60: 4b22 2061 6e64 2073 7562 6f6b 2061 6e64  K" and subok and
+0000bb70: 2063 6f70 7920 616e 6420 7365 6c66 2e64   copy and self.d
+0000bb80: 7479 7065 2e6e 756d 203c 3d20 3133 2061  type.num <= 13 a
+0000bb90: 6e64 2074 6f5f 6e75 6d20 3c3d 2031 333a  nd to_num <= 13:
+0000bba0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000bbb0: 2020 2320 7065 7266 6f72 6d20 6120 7361    # perform a sa
+0000bbc0: 6665 2063 6f6e 7665 7273 696f 6e20 756e  fe conversion un
+0000bbd0: 6465 7273 7461 6e64 696e 6720 7365 6e74  derstanding sent
+0000bbe0: 696e 656c 730d 0a20 2020 2020 2020 2020  inels..         
+0000bbf0: 2020 2020 2020 2072 6574 7572 6e20 5479         return Ty
+0000bc00: 7065 5265 6769 7374 6572 2e4d 6174 684c  peRegister.MathL
+0000bc10: 6564 6765 722e 5f41 535f 4641 5f54 5950  edger._AS_FA_TYP
+0000bc20: 4528 7365 6c66 2c20 746f 5f6e 756d 290d  E(self, to_num).
+0000bc30: 0a0d 0a20 2020 2020 2020 2023 2070 756e  ...        # pun
+0000bc40: 7420 746f 206e 756d 7079 0d0a 2020 2020  t to numpy..    
+0000bc50: 2020 2020 7265 7375 6c74 203d 2054 7970      result = Typ
+0000bc60: 6552 6567 6973 7465 722e 4d61 7468 4c65  eRegister.MathLe
+0000bc70: 6467 6572 2e5f 4153 5459 5045 2873 7570  dger._ASTYPE(sup
+0000bc80: 6572 2846 6173 7441 7272 6179 2c20 7365  er(FastArray, se
+0000bc90: 6c66 292c 2064 7479 7065 2c20 6f72 6465  lf), dtype, orde
+0000bca0: 722c 2063 6173 7469 6e67 2c20 7375 626f  r, casting, subo
+0000bcb0: 6b2c 2063 6f70 7929 0d0a 2020 2020 2020  k, copy)..      
+0000bcc0: 2020 7265 7475 726e 2072 6573 756c 742e    return result.
+0000bcd0: 7669 6577 2846 6173 7441 7272 6179 290d  view(FastArray).
+0000bce0: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+0000bcf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000bd00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000bd10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000bd20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000bd30: 2d2d 2d0d 0a20 2020 2064 6566 205f 7669  ---..    def _vi
+0000bd40: 6577 5f69 6e74 6572 6e61 6c28 7365 6c66  ew_internal(self
+0000bd50: 2c20 7479 7065 3d4e 6f6e 6529 3a0d 0a20  , type=None):.. 
+0000bd60: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+0000bd70: 2020 2020 4661 7374 4172 7261 7920 7375      FastArray su
+0000bd80: 6263 6c61 7373 6573 206e 6565 6420 746f  bclasses need to
+0000bd90: 2074 616b 6520 7468 6973 206f 7665 7220   take this over 
+0000bda0: 6966 2074 6865 7920 7761 6e74 2074 6f20  if they want to 
+0000bdb0: 6d61 6b65 2061 2073 6861 6c6c 6f77 2063  make a shallow c
+0000bdc0: 6f70 7920 6f66 0d0a 2020 2020 2020 2020  opy of..        
+0000bdd0: 6120 6661 7374 6172 7261 7920 696e 7374  a fastarray inst
+0000bde0: 6561 6420 6f66 2076 6965 7769 6e67 2074  ead of viewing t
+0000bdf0: 6865 6d73 656c 7665 7320 6173 2061 2066  hemselves as a f
+0000be00: 6173 7461 7272 6179 2028 7768 6963 6820  astarray (which 
+0000be10: 6472 6f70 7320 7468 6569 7220 6f74 6865  drops their othe
+0000be20: 7220 7072 6f70 6572 7469 6573 292e 0d0a  r properties)...
+0000be30: 2020 2020 2020 2020 5461 6b69 6e67 206f          Taking o
+0000be40: 7665 7220 7669 6577 2064 6972 6563 746c  ver view directl
+0000be50: 7920 6d61 7920 6861 7665 2061 206c 6f74  y may have a lot
+0000be60: 206f 6620 756e 696e 7465 6e64 6564 2063   of unintended c
+0000be70: 6f6e 7365 7175 656e 6365 732e 0d0a 2020  onsequences...  
+0000be80: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+0000be90: 2020 2069 6620 7479 7065 2069 7320 6e6f     if type is no
+0000bea0: 7420 4661 7374 4172 7261 7920 6f72 2074  t FastArray or t
+0000beb0: 7970 6520 6973 206e 6f74 204e 6f6e 653a  ype is not None:
+0000bec0: 0d0a 2020 2020 2020 2020 2020 2020 6e65  ..            ne
+0000bed0: 7761 7272 203d 2073 656c 662e 7669 6577  warr = self.view
+0000bee0: 2874 7970 6529 0d0a 2020 2020 2020 2020  (type)..        
+0000bef0: 2020 2020 2320 636f 7079 2061 6c6c 2074      # copy all t
+0000bf00: 6865 2070 726f 7065 7274 6965 730d 0a20  he properties.. 
+0000bf10: 2020 2020 2020 2020 2020 206e 6577 6172             newar
+0000bf20: 722e 5f5f 6469 6374 5f5f 203d 2073 656c  r.__dict__ = sel
+0000bf30: 662e 5f5f 6469 6374 5f5f 2e63 6f70 7928  f.__dict__.copy(
+0000bf40: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
+0000bf50: 6574 7572 6e20 6e65 7761 7272 0d0a 2020  eturn newarr..  
+0000bf60: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0000bf70: 662e 7669 6577 2846 6173 7441 7272 6179  f.view(FastArray
+0000bf80: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
+0000bf90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000bfa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000bfb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000bfc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000bfd0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2063  -----..    def c
+0000bfe0: 6f70 7928 7365 6c66 2c20 6f72 6465 723d  opy(self, order=
+0000bff0: 224b 2229 202d 3e20 4661 7374 4172 7261  "K") -> FastArra
+0000c000: 793a 0d0a 2020 2020 2020 2020 2222 220d  y:..        """.
+0000c010: 0a20 2020 2020 2020 2052 6574 7572 6e20  .        Return 
+0000c020: 6120 636f 7079 206f 6620 7468 6520 696e  a copy of the in
+0000c030: 7075 7420 6046 6173 7441 7272 6179 602e  put `FastArray`.
+0000c040: 0d0a 0d0a 2020 2020 2020 2020 5061 7261  ....        Para
+0000c050: 6d65 7465 7273 0d0a 2020 2020 2020 2020  meters..        
+0000c060: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+0000c070: 2020 2020 6f72 6465 7220 3a20 7b27 4b27      order : {'K'
+0000c080: 2c20 2743 272c 2027 4627 2c20 2741 277d  , 'C', 'F', 'A'}
+0000c090: 2c20 6465 6661 756c 7420 274b 270d 0a20  , default 'K'.. 
+0000c0a0: 2020 2020 2020 2020 2020 2043 6f6e 7472             Contr
+0000c0b0: 6f6c 7320 7468 6520 6d65 6d6f 7279 206c  ols the memory l
+0000c0c0: 6179 6f75 7420 6f66 2074 6865 2063 6f70  ayout of the cop
+0000c0d0: 793a 2027 4b27 206d 6561 6e73 206d 6174  y: 'K' means mat
+0000c0e0: 6368 2074 6865 206c 6179 6f75 7420 6f66  ch the layout of
+0000c0f0: 2074 6865 2069 6e70 7574 2061 7272 6179   the input array
+0000c100: 2061 7320 636c 6f73 656c 7920 6173 2070   as closely as p
+0000c110: 6f73 7369 626c 653b 0d0a 2020 2020 2020  ossible;..      
+0000c120: 2020 2020 2020 2743 2720 6d65 616e 7320        'C' means 
+0000c130: 726f 772d 6261 7365 6420 2843 2d73 7479  row-based (C-sty
+0000c140: 6c65 2920 6f72 6465 723b 2027 4627 206d  le) order; 'F' m
+0000c150: 6561 6e73 2063 6f6c 756d 6e2d 6261 7365  eans column-base
+0000c160: 6420 2846 6f72 7472 616e 2d73 7479 6c65  d (Fortran-style
+0000c170: 2920 6f72 6465 723b 0d0a 2020 2020 2020  ) order;..      
+0000c180: 2020 2020 2020 2741 2720 6d65 616e 7320        'A' means 
+0000c190: 2746 2720 6966 2074 6865 2069 6e70 7574  'F' if the input
+0000c1a0: 2061 7272 6179 2069 7320 666f 726d 6174   array is format
+0000c1b0: 7465 6420 6173 2027 4627 2c20 2743 2720  ted as 'F', 'C' 
+0000c1c0: 6966 206e 6f74 2e0d 0a0d 0a20 2020 2020  if not.....     
+0000c1d0: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
+0000c1e0: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
+0000c1f0: 2020 2020 2046 6173 7441 7272 6179 0d0a       FastArray..
+0000c200: 2020 2020 2020 2020 2020 2020 4120 636f              A co
+0000c210: 7079 206f 6620 7468 6520 696e 7075 7420  py of the input 
+0000c220: 6046 6173 7441 7272 6179 602e 0d0a 0d0a  `FastArray`.....
+0000c230: 2020 2020 2020 2020 5365 6520 416c 736f          See Also
+0000c240: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+0000c250: 2d2d 0d0a 2020 2020 2020 2020 2e43 6174  --..        .Cat
+0000c260: 6567 6f72 6963 616c 2e63 6f70 7920 3a20  egorical.copy : 
+0000c270: 5265 7475 726e 7320 6120 636f 7079 206f  Returns a copy o
+0000c280: 6620 7468 6520 696e 7075 7420 602e 4361  f the input `.Ca
+0000c290: 7465 676f 7269 6361 6c60 2e0d 0a20 2020  tegorical`...   
+0000c2a0: 2020 2020 202e 4461 7461 7365 742e 636f       .Dataset.co
+0000c2b0: 7079 203a 2052 6574 7572 6e73 2061 2063  py : Returns a c
+0000c2c0: 6f70 7920 6f66 2074 6865 2069 6e70 7574  opy of the input
+0000c2d0: 2060 2e44 6174 6173 6574 602e 0d0a 2020   `.Dataset`...  
+0000c2e0: 2020 2020 2020 2e53 7472 7563 742e 636f        .Struct.co
+0000c2f0: 7079 203a 2052 6574 7572 6e73 2061 2063  py : Returns a c
+0000c300: 6f70 7920 6f66 2074 6865 2069 6e70 7574  opy of the input
+0000c310: 2060 2e53 7472 7563 7460 2e0d 0a0d 0a20   `.Struct`..... 
+0000c320: 2020 2020 2020 2045 7861 6d70 6c65 730d         Examples.
+0000c330: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0000c340: 2d0d 0a20 2020 2020 2020 2043 6f70 7920  -..        Copy 
+0000c350: 6120 6046 6173 7441 7272 6179 603a 0d0a  a `FastArray`:..
+0000c360: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
+0000c370: 3d20 7274 2e46 4128 5b31 2c20 322c 2033  = rt.FA([1, 2, 3
+0000c380: 2c20 342c 2035 5d29 0d0a 2020 2020 2020  , 4, 5])..      
+0000c390: 2020 3e3e 3e20 610d 0a20 2020 2020 2020    >>> a..       
+0000c3a0: 2046 6173 7441 7272 6179 285b 312c 2032   FastArray([1, 2
+0000c3b0: 2c20 332c 2034 2c20 355d 290d 0a20 2020  , 3, 4, 5])..   
+0000c3c0: 2020 2020 203e 3e3e 2061 3220 3d20 612e       >>> a2 = a.
+0000c3d0: 636f 7079 2829 0d0a 2020 2020 2020 2020  copy()..        
+0000c3e0: 3e3e 3e20 6132 0d0a 2020 2020 2020 2020  >>> a2..        
+0000c3f0: 4661 7374 4172 7261 7928 5b31 2c20 322c  FastArray([1, 2,
+0000c400: 2033 2c20 342c 2035 5d29 0d0a 2020 2020   3, 4, 5])..    
+0000c410: 2020 2020 3e3e 3e20 6132 2069 7320 610d      >>> a2 is a.
+0000c420: 0a20 2020 2020 2020 2046 616c 7365 2020  .        False  
+0000c430: 2320 5468 6520 636f 7079 2069 7320 6120  # The copy is a 
+0000c440: 7365 7061 7261 7465 206f 626a 6563 742e  separate object.
+0000c450: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0000c460: 2020 2020 2020 2023 2072 6573 756c 743d         # result=
+0000c470: 2073 7570 6572 2846 6173 7441 7272 6179   super(FastArray
+0000c480: 2c20 7365 6c66 292e 636f 7079 286f 7264  , self).copy(ord
+0000c490: 6572 290d 0a20 2020 2020 2020 2069 6620  er)..        if 
+0000c4a0: 7365 6c66 2e66 6c61 6773 2e66 5f63 6f6e  self.flags.f_con
+0000c4b0: 7469 6775 6f75 7320 6f72 2073 656c 662e  tiguous or self.
+0000c4c0: 666c 6167 732e 635f 636f 6e74 6967 756f  flags.c_contiguo
+0000c4d0: 7573 3a0d 0a20 2020 2020 2020 2020 2020  us:..           
+0000c4e0: 2069 6620 6f72 6465 7220 3d3d 2022 4b22   if order == "K"
+0000c4f0: 2061 6e64 2073 656c 662e 6474 7970 652e   and self.dtype.
+0000c500: 6e75 6d20 3c3d 2031 333a 0d0a 2020 2020  num <= 13:..    
+0000c510: 2020 2020 2020 2020 2020 2020 2320 7065              # pe
+0000c520: 7266 6f72 6d20 6120 6661 7374 6572 206d  rform a faster m
+0000c530: 756c 7469 7468 7265 6164 6564 2063 6f70  ultithreaded cop
+0000c540: 790d 0a20 2020 2020 2020 2020 2020 2020  y..             
+0000c550: 2020 2072 6574 7572 6e20 5479 7065 5265     return TypeRe
+0000c560: 6769 7374 6572 2e4d 6174 684c 6564 6765  gister.MathLedge
+0000c570: 722e 5f41 535f 4641 5f54 5950 4528 7365  r._AS_FA_TYPE(se
+0000c580: 6c66 2c20 7365 6c66 2e64 7479 7065 2e6e  lf, self.dtype.n
+0000c590: 756d 290d 0a0d 0a20 2020 2020 2020 2072  um)....        r
+0000c5a0: 6573 756c 7420 3d20 5479 7065 5265 6769  esult = TypeRegi
+0000c5b0: 7374 6572 2e4d 6174 684c 6564 6765 722e  ster.MathLedger.
+0000c5c0: 5f43 4f50 5928 7375 7065 7228 4661 7374  _COPY(super(Fast
+0000c5d0: 4172 7261 792c 2073 656c 6629 2c20 6f72  Array, self), or
+0000c5e0: 6465 7229 0d0a 2020 2020 2020 2020 7265  der)..        re
+0000c5f0: 7475 726e 2072 6573 756c 742e 7669 6577  turn result.view
+0000c600: 2846 6173 7441 7272 6179 290d 0a0d 0a20  (FastArray).... 
+0000c610: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+0000c620: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c650: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
+0000c660: 0a20 2020 2064 6566 2063 6f70 795f 696e  .    def copy_in
+0000c670: 7661 6c69 6428 7365 6c66 2920 2d3e 2046  valid(self) -> F
+0000c680: 6173 7441 7272 6179 3a0d 0a20 2020 2020  astArray:..     
+0000c690: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+0000c6a0: 5265 7475 726e 2061 2060 4661 7374 4172  Return a `FastAr
+0000c6b0: 7261 7960 206f 6620 616c 6c20 696e 7661  ray` of all inva
+0000c6c0: 6c69 6473 2c20 6f66 2074 6865 2073 616d  lids, of the sam
+0000c6d0: 6520 7368 6170 6520 616e 6420 6474 7970  e shape and dtyp
+0000c6e0: 6520 6173 2074 6865 2069 6e70 7574 2061  e as the input a
+0000c6f0: 7272 6179 2e0d 0a0d 0a20 2020 2020 2020  rray.....       
+0000c700: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
+0000c710: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
+0000c720: 2020 2046 6173 7441 7272 6179 0d0a 2020     FastArray..  
+0000c730: 2020 2020 2020 2020 2020 4120 6046 6173            A `Fas
+0000c740: 7441 7272 6179 6020 6f66 2061 6c6c 2069  tArray` of all i
+0000c750: 6e76 616c 6964 732c 206f 6620 7468 6520  nvalids, of the 
+0000c760: 7361 6d65 2073 6861 7065 2061 6e64 2064  same shape and d
+0000c770: 7479 7065 2061 7320 7468 6520 696e 7075  type as the inpu
+0000c780: 7420 6172 7261 792e 0d0a 0d0a 2020 2020  t array.....    
+0000c790: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
+0000c7a0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
+0000c7b0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+0000c7c0: 792e 696e 7620 3a20 5265 7475 726e 2074  y.inv : Return t
+0000c7d0: 6865 2069 6e76 616c 6964 2076 616c 7565  he invalid value
+0000c7e0: 2066 6f72 2074 6865 2069 6e70 7574 2061   for the input a
+0000c7f0: 7272 6179 2773 2064 7479 7065 2e0d 0a20  rray's dtype... 
+0000c800: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+0000c810: 2e66 696c 6c5f 696e 7661 6c69 6420 3a20  .fill_invalid : 
+0000c820: 5265 706c 6163 6520 7468 6520 636f 6e74  Replace the cont
+0000c830: 656e 7473 206f 6620 6120 6046 6173 7441  ents of a `FastA
+0000c840: 7272 6179 6020 7769 7468 2069 6e76 616c  rray` with inval
+0000c850: 6964 732e 0d0a 0d0a 2020 2020 2020 2020  ids.....        
+0000c860: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
+0000c870: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+0000c880: 2020 2020 436f 7079 2061 6e20 696e 7465      Copy an inte
+0000c890: 6765 7220 6172 7261 7920 616e 6420 7265  ger array and re
+0000c8a0: 706c 6163 6520 7769 7468 2069 6e76 616c  place with inval
+0000c8b0: 6964 733a 0d0a 0d0a 2020 2020 2020 2020  ids:....        
+0000c8c0: 3e3e 3e20 6120 3d20 7274 2e46 4128 5b31  >>> a = rt.FA([1
+0000c8d0: 2c20 322c 2033 2c20 342c 2035 5d29 0d0a  , 2, 3, 4, 5])..
+0000c8e0: 2020 2020 2020 2020 3e3e 3e20 610d 0a20          >>> a.. 
+0000c8f0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+0000c900: 285b 312c 2032 2c20 332c 2034 2c20 355d  ([1, 2, 3, 4, 5]
+0000c910: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
+0000c920: 3220 3d20 612e 636f 7079 5f69 6e76 616c  2 = a.copy_inval
+0000c930: 6964 2829 0d0a 2020 2020 2020 2020 3e3e  id()..        >>
+0000c940: 3e20 6132 0d0a 2020 2020 2020 2020 4661  > a2..        Fa
+0000c950: 7374 4172 7261 7928 5b2d 3231 3437 3438  stArray([-214748
+0000c960: 3336 3438 2c20 2d32 3134 3734 3833 3634  3648, -214748364
+0000c970: 382c 202d 3231 3437 3438 3336 3438 2c20  8, -2147483648, 
+0000c980: 2d32 3134 3734 3833 3634 382c 0d0a 2020  -2147483648,..  
+0000c990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c9a0: 202d 3231 3437 3438 3336 3438 5d29 0d0a   -2147483648])..
+0000c9b0: 2020 2020 2020 2020 3e3e 3e20 610d 0a20          >>> a.. 
+0000c9c0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+0000c9d0: 285b 312c 2032 2c20 332c 2034 2c20 355d  ([1, 2, 3, 4, 5]
+0000c9e0: 2920 2023 2061 2069 7320 756e 6368 616e  )  # a is unchan
+0000c9f0: 6765 642e 0d0a 0d0a 2020 2020 2020 2020  ged.....        
+0000ca00: 436f 7079 2061 2066 6c6f 6174 696e 6720  Copy a floating 
+0000ca10: 706f 696e 7420 6172 7261 7920 616e 6420  point array and 
+0000ca20: 7265 706c 6163 6520 7769 7468 2069 6e76  replace with inv
+0000ca30: 616c 6964 733a 0d0a 0d0a 2020 2020 2020  alids:....      
+0000ca40: 2020 3e3e 3e20 6133 203d 2072 742e 4641    >>> a3 = rt.FA
+0000ca50: 285b 302e 2c20 312e 2c20 322e 2c20 332e  ([0., 1., 2., 3.
+0000ca60: 2c20 342e 5d29 0d0a 2020 2020 2020 2020  , 4.])..        
+0000ca70: 3e3e 3e20 6133 0d0a 2020 2020 2020 2020  >>> a3..        
+0000ca80: 4661 7374 4172 7261 7928 5b30 2e2c 2031  FastArray([0., 1
+0000ca90: 2e2c 2032 2e2c 2033 2e2c 2034 2e5d 290d  ., 2., 3., 4.]).
+0000caa0: 0a20 2020 2020 2020 203e 3e3e 2061 332e  .        >>> a3.
+0000cab0: 636f 7079 5f69 6e76 616c 6964 2829 0d0a  copy_invalid()..
+0000cac0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+0000cad0: 7928 5b6e 616e 2c20 6e61 6e2c 206e 616e  y([nan, nan, nan
+0000cae0: 2c20 6e61 6e2c 206e 616e 5d29 0d0a 0d0a  , nan, nan])....
+0000caf0: 2020 2020 2020 2020 436f 7079 2061 2073          Copy a s
+0000cb00: 7472 696e 6720 6172 7261 7920 616e 6420  tring array and 
+0000cb10: 7265 706c 6163 6520 7769 7468 2069 6e76  replace with inv
+0000cb20: 616c 6964 733a 0d0a 0d0a 2020 2020 2020  alids:....      
+0000cb30: 2020 3e3e 3e20 6134 203d 2072 742e 4641    >>> a4 = rt.FA
+0000cb40: 285b 2741 4d5a 4e27 2c20 2749 424d 272c  (['AMZN', 'IBM',
+0000cb50: 2027 4d53 4654 272c 2027 4141 504c 275d   'MSFT', 'AAPL']
+0000cb60: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
+0000cb70: 340d 0a20 2020 2020 2020 2046 6173 7441  4..        FastA
+0000cb80: 7272 6179 285b 6227 414d 5a4e 272c 2062  rray([b'AMZN', b
+0000cb90: 2749 424d 272c 2062 274d 5346 5427 2c20  'IBM', b'MSFT', 
+0000cba0: 6227 4141 504c 275d 2c20 6474 7970 653d  b'AAPL'], dtype=
+0000cbb0: 277c 5334 2729 0d0a 2020 2020 2020 2020  '|S4')..        
+0000cbc0: 3e3e 3e20 6134 2e63 6f70 795f 696e 7661  >>> a4.copy_inva
+0000cbd0: 6c69 6428 290d 0a20 2020 2020 2020 2046  lid()..        F
+0000cbe0: 6173 7441 7272 6179 285b 6227 272c 2062  astArray([b'', b
+0000cbf0: 2727 2c20 6227 272c 2062 2727 5d2c 2064  '', b'', b''], d
+0000cc00: 7479 7065 3d27 7c53 3427 2920 2023 2049  type='|S4')  # I
+0000cc10: 6e76 616c 6964 2073 7472 696e 6720 7661  nvalid string va
+0000cc20: 6c75 6520 6973 2061 6e20 656d 7074 7920  lue is an empty 
+0000cc30: 7374 7269 6e67 2e0d 0a20 2020 2020 2020  string...       
+0000cc40: 2022 2222 0d0a 2020 2020 2020 2020 7265   """..        re
+0000cc50: 7475 726e 2073 656c 662e 6669 6c6c 5f69  turn self.fill_i
+0000cc60: 6e76 616c 6964 2869 6e70 6c61 6365 3d46  nvalid(inplace=F
+0000cc70: 616c 7365 290d 0a0d 0a20 2020 2023 202d  alse)....    # -
+0000cc80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000cc90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000cca0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ccb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ccc0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2040  ---------..    @
+0000ccd0: 7072 6f70 6572 7479 0d0a 2020 2020 6465  property..    de
+0000cce0: 6620 696e 7628 7365 6c66 2920 2d3e 2041  f inv(self) -> A
+0000ccf0: 6e79 3a0d 0a20 2020 2020 2020 2022 2222  ny:..        """
+0000cd00: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+0000cd10: 2074 6865 2069 6e76 616c 6964 2076 616c   the invalid val
+0000cd20: 7565 2066 6f72 2074 6865 2069 6e70 7574  ue for the input
+0000cd30: 2061 7272 6179 2773 2064 7479 7065 2e0d   array's dtype..
+0000cd40: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+0000cd50: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
+0000cd60: 2d2d 2d0d 0a20 2020 2020 2020 2041 6e79  ---..        Any
+0000cd70: 0d0a 2020 2020 2020 2020 2020 2020 5468  ..            Th
+0000cd80: 6520 696e 7661 6c69 6420 7661 6c75 6520  e invalid value 
+0000cd90: 666f 7220 7468 6520 696e 7075 7420 6172  for the input ar
+0000cda0: 7261 7927 7320 6474 7970 652c 2066 6f72  ray's dtype, for
+0000cdb0: 2065 7861 6d70 6c65 3a20 606e 756d 7079   example: `numpy
+0000cdc0: 2e69 6e74 3860 2072 6574 7572 6e73 202d  .int8` returns -
+0000cdd0: 3132 382c 2060 6e75 6d70 792e 7569 6e74  128, `numpy.uint
+0000cde0: 3860 2072 6574 7572 6e73 2032 3535 2c20  8` returns 255, 
+0000cdf0: 616e 6420 606e 756d 7079 2e62 6f6f 6c5f  and `numpy.bool_
+0000ce00: 6020 7265 7475 726e 7320 4661 6c73 652e  ` returns False.
+0000ce10: 0d0a 0d0a 2020 2020 2020 2020 5365 6520  ....        See 
+0000ce20: 416c 736f 0d0a 2020 2020 2020 2020 2d2d  Also..        --
+0000ce30: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0000ce40: 4661 7374 4172 7261 792e 636f 7079 5f69  FastArray.copy_i
+0000ce50: 6e76 616c 6964 203a 2052 6574 7572 6e73  nvalid : Returns
+0000ce60: 2061 2060 4661 7374 4172 7261 7960 2063   a `FastArray` c
+0000ce70: 6f70 7920 6669 6c6c 6564 2077 6974 6820  opy filled with 
+0000ce80: 7468 6520 696e 7661 6c69 6420 7661 6c75  the invalid valu
+0000ce90: 6520 666f 7220 7468 6520 696e 7075 7420  e for the input 
+0000cea0: 6172 7261 7927 7320 6474 7970 652e 0d0a  array's dtype...
+0000ceb0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+0000cec0: 792e 6669 6c6c 5f69 6e76 616c 6964 203a  y.fill_invalid :
+0000ced0: 2052 6574 7572 6e73 2074 6865 2069 6e70   Returns the inp
+0000cee0: 7574 2060 4661 7374 4172 7261 7960 206f  ut `FastArray` o
+0000cef0: 7220 6120 6046 6173 7441 7272 6179 6020  r a `FastArray` 
+0000cf00: 636f 7079 2c20 6669 6c6c 6564 2077 6974  copy, filled wit
+0000cf10: 6820 696e 7661 6c69 6420 7661 6c75 6573  h invalid values
+0000cf20: 2e0d 0a20 2020 2020 2020 207e 7269 7074  ...        ~ript
+0000cf30: 6162 6c65 2e72 745f 656e 756d 2e49 4e56  able.rt_enum.INV
+0000cf40: 414c 4944 5f44 4943 5420 3a20 4d61 7073  ALID_DICT : Maps
+0000cf50: 2069 6e76 616c 6964 2076 616c 7565 7320   invalid values 
+0000cf60: 746f 2064 7479 7065 732e 0d0a 0d0a 2020  to dtypes.....  
+0000cf70: 2020 2020 2020 4578 616d 706c 6573 0d0a        Examples..
+0000cf80: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+0000cf90: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+0000cfa0: 2074 6865 2069 6e76 616c 6964 2076 616c   the invalid val
+0000cfb0: 7565 2066 6f72 2061 6e20 696e 7465 6765  ue for an intege
+0000cfc0: 7220 6172 7261 793a 0d0a 0d0a 2020 2020  r array:....    
+0000cfd0: 2020 2020 3e3e 3e20 6120 3d20 7274 2e46      >>> a = rt.F
+0000cfe0: 4128 5b31 2c20 322c 2033 2c20 342c 2035  A([1, 2, 3, 4, 5
+0000cff0: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
+0000d000: 610d 0a20 2020 2020 2020 2046 6173 7441  a..        FastA
+0000d010: 7272 6179 285b 312c 2032 2c20 332c 2034  rray([1, 2, 3, 4
+0000d020: 2c20 355d 290d 0a20 2020 2020 2020 203e  , 5])..        >
+0000d030: 3e3e 2061 2e69 6e76 0d0a 2020 2020 2020  >> a.inv..      
+0000d040: 2020 2d32 3134 3734 3833 3634 380d 0a0d    -2147483648...
+0000d050: 0a20 2020 2020 2020 2052 6574 7572 6e20  .        Return 
+0000d060: 7468 6520 696e 7661 6c69 6420 7661 6c75  the invalid valu
+0000d070: 6520 666f 7220 6120 666c 6f61 7469 6e67  e for a floating
+0000d080: 2070 6f69 6e74 2061 7272 6179 3a0d 0a0d   point array:...
+0000d090: 0a20 2020 2020 2020 203e 3e3e 2061 3220  .        >>> a2 
+0000d0a0: 3d20 7274 2e46 4128 5b30 2e2c 2031 2e2c  = rt.FA([0., 1.,
+0000d0b0: 2032 2e2c 2033 2e2c 2034 2e5d 290d 0a20   2., 3., 4.]).. 
+0000d0c0: 2020 2020 2020 203e 3e3e 2061 320d 0a20         >>> a2.. 
+0000d0d0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+0000d0e0: 285b 302e 2c20 312e 2c20 322e 2c20 332e  ([0., 1., 2., 3.
+0000d0f0: 2c20 342e 5d29 0d0a 2020 2020 2020 2020  , 4.])..        
+0000d100: 3e3e 3e20 6132 2e69 6e76 0d0a 2020 2020  >>> a2.inv..    
+0000d110: 2020 2020 6e61 6e0d 0a0d 0a20 2020 2020      nan....     
+0000d120: 2020 2052 6574 7572 6e20 7468 6520 696e     Return the in
+0000d130: 7661 6c69 6420 7661 6c75 6520 666f 7220  valid value for 
+0000d140: 6120 7374 7269 6e67 2061 7272 6179 3a0d  a string array:.
+0000d150: 0a0d 0a20 2020 2020 2020 203e 3e3e 2061  ...        >>> a
+0000d160: 3320 3d20 7274 2e46 4128 5b22 414d 5a4e  3 = rt.FA(["AMZN
+0000d170: 222c 2022 4942 4d22 2c20 224d 5346 5422  ", "IBM", "MSFT"
+0000d180: 2c20 2241 4150 4c22 5d29 0d0a 2020 2020  , "AAPL"])..    
+0000d190: 2020 2020 3e3e 3e20 6133 0d0a 2020 2020      >>> a3..    
+0000d1a0: 2020 2020 4661 7374 4172 7261 7928 5b62      FastArray([b
+0000d1b0: 2741 4d5a 4e27 2c20 6227 4942 4d27 2c20  'AMZN', b'IBM', 
+0000d1c0: 6227 4d53 4654 272c 2062 2741 4150 4c27  b'MSFT', b'AAPL'
+0000d1d0: 5d2c 2064 7479 7065 3d27 7c53 3427 290d  ], dtype='|S4').
+0000d1e0: 0a20 2020 2020 2020 203e 3e3e 2061 332e  .        >>> a3.
+0000d1f0: 696e 760d 0a20 2020 2020 2020 2062 2727  inv..        b''
+0000d200: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0000d210: 2020 2020 2020 2072 6574 7572 6e20 494e         return IN
+0000d220: 5641 4c49 445f 4449 4354 5b73 656c 662e  VALID_DICT[self.
+0000d230: 6474 7970 652e 6e75 6d5d 0d0a 0d0a 2020  dtype.num]....  
+0000d240: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
+0000d250: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d260: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d270: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d280: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+0000d290: 2020 2020 6465 6620 6669 6c6c 5f69 6e76      def fill_inv
+0000d2a0: 616c 6964 2873 656c 662c 2073 6861 7065  alid(self, shape
+0000d2b0: 3d4e 6f6e 652c 2064 7479 7065 3d4e 6f6e  =None, dtype=Non
+0000d2c0: 652c 2069 6e70 6c61 6365 3d54 7275 6529  e, inplace=True)
+0000d2d0: 202d 3e20 4661 7374 4172 7261 793a 0d0a   -> FastArray:..
+0000d2e0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+0000d2f0: 2020 2020 2052 6570 6c61 6365 2074 6865       Replace the
+0000d300: 2063 6f6e 7465 6e74 7320 6f66 2074 6865   contents of the
+0000d310: 2069 6e70 7574 2060 4661 7374 4172 7261   input `FastArra
+0000d320: 7960 2077 6974 6820 696e 7661 6c69 6420  y` with invalid 
+0000d330: 7661 6c75 6573 2e0d 0a0d 0a20 2020 2020  values.....     
+0000d340: 2020 2054 6865 2069 6e76 616c 6964 2076     The invalid v
+0000d350: 616c 7565 2075 7365 6420 6973 2064 6574  alue used is det
+0000d360: 6572 6d69 6e65 6420 6279 2074 6865 2069  ermined by the i
+0000d370: 6e70 7574 2061 7272 6179 2773 2064 7479  nput array's dty
+0000d380: 7065 206f 7220 6120 7573 6572 2d73 7065  pe or a user-spe
+0000d390: 6369 6669 6564 2064 7479 7065 2e20 5761  cified dtype. Wa
+0000d3a0: 726e 696e 673a 2042 7920 6465 6661 756c  rning: By defaul
+0000d3b0: 742c 2074 6869 7320 6f70 6572 6174 696f  t, this operatio
+0000d3c0: 6e20 6973 2069 6e20 706c 6163 652e 0d0a  n is in place...
+0000d3d0: 0d0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
+0000d3e0: 7465 7273 0d0a 2020 2020 2020 2020 2d2d  ters..        --
+0000d3f0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+0000d400: 2020 7368 6170 6520 3a20 696e 7420 6f72    shape : int or
+0000d410: 2073 6571 7565 6e63 6520 6f66 2069 6e74   sequence of int
+0000d420: 2c20 6f70 7469 6f6e 616c 0d0a 2020 2020  , optional..    
+0000d430: 2020 2020 2020 2020 5368 6170 6520 6f66          Shape of
+0000d440: 2074 6865 206e 6577 2061 7272 6179 2c20   the new array, 
+0000d450: 666f 7220 6578 616d 706c 653a 2060 6028  for example: ``(
+0000d460: 322c 2033 2960 6020 6f72 2060 6032 6060  2, 3)`` or ``2``
+0000d470: 2e20 4e6f 7465 2074 6861 7420 616c 7468  . Note that alth
+0000d480: 6f75 6768 206d 756c 7469 2d64 696d 656e  ough multi-dimen
+0000d490: 7369 6f6e 616c 2061 7272 6179 7320 6172  sional arrays ar
+0000d4a0: 6520 7465 6368 6e69 6361 6c6c 7920 7375  e technically su
+0000d4b0: 7070 6f72 7465 6420 6279 2052 6970 7461  pported by Ripta
+0000d4c0: 626c 652c 2079 6f75 206d 6179 2067 6574  ble, you may get
+0000d4d0: 2075 6e65 7870 6563 7465 6420 7265 7375   unexpected resu
+0000d4e0: 6c74 7320 7768 656e 2077 6f72 6b69 6e67  lts when working
+0000d4f0: 2077 6974 6820 7468 656d 2e0d 0a20 2020   with them...   
+0000d500: 2020 2020 2064 7479 7065 203a 2073 7472       dtype : str
+0000d510: 2c20 6f70 7469 6f6e 616c 0d0a 2020 2020  , optional..    
+0000d520: 2020 2020 2020 2020 5468 6520 6465 7369          The desi
+0000d530: 7265 6420 6474 7970 6520 666f 7220 7468  red dtype for th
+0000d540: 6520 7265 7475 726e 6564 2061 7272 6179  e returned array
+0000d550: 2e0d 0a20 2020 2020 2020 2069 6e70 6c61  ...        inpla
+0000d560: 6365 203a 2062 6f6f 6c2c 2064 6566 6175  ce : bool, defau
+0000d570: 6c74 2054 7275 650d 0a20 2020 2020 2020  lt True..       
+0000d580: 2020 2020 2049 6620 6046 616c 7365 602c       If `False`,
+0000d590: 2072 6574 7572 6e20 6120 636f 7079 206f   return a copy o
+0000d5a0: 6620 7468 6520 6172 7261 792e 2049 6620  f the array. If 
+0000d5b0: 6054 7275 6560 2c20 6d6f 6469 6679 206f  `True`, modify o
+0000d5c0: 7269 6769 6e61 6c20 6461 7461 2e0d 0a0d  riginal data....
+0000d5d0: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+0000d5e0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+0000d5f0: 2d0d 0a20 2020 2020 2020 2046 6173 7441  -..        FastA
+0000d600: 7272 6179 2c20 6f70 7469 6f6e 616c 0d0a  rray, optional..
+0000d610: 2020 2020 2020 2020 2020 2020 4120 636f              A co
+0000d620: 7079 206f 6620 7468 6520 696e 7075 7420  py of the input 
+0000d630: 6046 6173 7441 7272 6179 6020 7769 7468  `FastArray` with
+0000d640: 2069 6e76 616c 6964 2061 7320 616c 6c20   invalid as all 
+0000d650: 6f66 2069 7473 2076 616c 7565 732e 2052  of its values. R
+0000d660: 6574 7572 6e65 6420 6f6e 6c79 2069 6620  eturned only if 
+0000d670: 7468 6520 6f70 6572 6174 696f 6e20 6973  the operation is
+0000d680: 206e 6f74 2064 6f6e 6520 696e 2070 6c61   not done in pla
+0000d690: 6365 2e0d 0a0d 0a20 2020 2020 2020 2053  ce.....        S
+0000d6a0: 6565 2041 6c73 6f0d 0a20 2020 2020 2020  ee Also..       
+0000d6b0: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+0000d6c0: 2020 2046 6173 7441 7272 6179 2e69 6e76     FastArray.inv
+0000d6d0: 203a 2052 6574 7572 6e73 2074 6865 2069   : Returns the i
+0000d6e0: 6e76 616c 6964 2076 616c 7565 2066 6f72  nvalid value for
+0000d6f0: 2074 6865 2069 6e70 7574 2061 7272 6179   the input array
+0000d700: 2773 2064 7479 7065 2e0d 0a20 2020 2020  's dtype...     
+0000d710: 2020 2046 6173 7441 7272 6179 2e63 6f70     FastArray.cop
+0000d720: 795f 696e 7661 6c69 6420 3a20 5265 7475  y_invalid : Retu
+0000d730: 726e 7320 6120 6046 6173 7441 7272 6179  rns a `FastArray
+0000d740: 6020 636f 7079 2077 6974 6820 6974 7320  ` copy with its 
+0000d750: 7661 6c75 6573 2072 6570 6c61 6365 6420  values replaced 
+0000d760: 7769 7468 2074 6865 2069 6e76 616c 6964  with the invalid
+0000d770: 2076 616c 7565 2066 6f72 2074 6865 2069   value for the i
+0000d780: 6e70 7574 2061 7272 6179 2773 2064 7479  nput array's dty
+0000d790: 7065 2e0d 0a0d 0a20 2020 2020 2020 2045  pe.....        E
+0000d7a0: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
+0000d7b0: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+0000d7c0: 2020 2052 6570 6c61 6365 2061 6e20 696e     Replace an in
+0000d7d0: 7465 6765 7220 6172 7261 7927 7320 7661  teger array's va
+0000d7e0: 6c75 6573 2077 6974 6820 696e 7661 6c69  lues with invali
+0000d7f0: 6420 7661 6c75 6573 2e20 4279 2064 6566  d values. By def
+0000d800: 6175 6c74 2c20 7468 6520 7265 7475 726e  ault, the return
+0000d810: 6564 2061 7272 6179 2069 7320 7468 6520  ed array is the 
+0000d820: 7361 6d65 2073 697a 6520 616e 6420 6474  same size and dt
+0000d830: 7970 6520 6173 2074 6865 2069 6e70 7574  ype as the input
+0000d840: 2061 7272 6179 2c20 616e 6420 7468 6520   array, and the 
+0000d850: 6f70 6572 6174 696f 6e20 6973 2070 6572  operation is per
+0000d860: 666f 726d 6564 2069 6e20 706c 6163 653a  formed in place:
+0000d870: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
+0000d880: 6120 3d20 7274 2e46 4128 5b31 2c20 322c  a = rt.FA([1, 2,
+0000d890: 2033 2c20 342c 2035 5d29 0d0a 2020 2020   3, 4, 5])..    
+0000d8a0: 2020 2020 3e3e 3e20 610d 0a20 2020 2020      >>> a..     
+0000d8b0: 2020 2046 6173 7441 7272 6179 285b 312c     FastArray([1,
+0000d8c0: 2032 2c20 332c 2034 2c20 355d 290d 0a20   2, 3, 4, 5]).. 
+0000d8d0: 2020 2020 2020 203e 3e3e 2061 2e66 696c         >>> a.fil
+0000d8e0: 6c5f 696e 7661 6c69 6428 290d 0a20 2020  l_invalid()..   
+0000d8f0: 2020 2020 203e 3e3e 2061 0d0a 2020 2020       >>> a..    
+0000d900: 2020 2020 4661 7374 4172 7261 7928 5b2d      FastArray([-
+0000d910: 3231 3437 3438 3336 3438 2c20 2d32 3134  2147483648, -214
+0000d920: 3734 3833 3634 382c 202d 3231 3437 3438  7483648, -214748
+0000d930: 3336 3438 2c20 2d32 3134 3734 3833 3634  3648, -214748364
+0000d940: 382c 0d0a 2020 2020 2020 2020 2020 2020  8,..            
+0000d950: 2020 2020 2020 202d 3231 3437 3438 3336         -21474836
+0000d960: 3438 5d29 0d0a 0d0a 2020 2020 2020 2020  48])....        
+0000d970: 5265 706c 6163 6520 6120 666c 6f61 7469  Replace a floati
+0000d980: 6e67 2070 6f69 6e74 2061 7272 6179 2773  ng point array's
+0000d990: 2076 616c 7565 7320 7769 7468 2074 6865   values with the
+0000d9a0: 2069 6e76 616c 6964 2076 616c 7565 2066   invalid value f
+0000d9b0: 6f72 2074 6865 2060 6069 6e74 3332 6060  or the ``int32``
+0000d9c0: 2064 7479 7065 3a0d 0a0d 0a20 2020 2020   dtype:....     
+0000d9d0: 2020 203e 3e3e 2061 3220 3d20 7274 2e46     >>> a2 = rt.F
+0000d9e0: 4128 5b30 2e2c 2031 2e2c 2032 2e2c 2033  A([0., 1., 2., 3
+0000d9f0: 2e2c 2034 2e5d 290d 0a20 2020 2020 2020  ., 4.])..       
+0000da00: 203e 3e3e 2061 320d 0a20 2020 2020 2020   >>> a2..       
+0000da10: 2046 6173 7441 7272 6179 285b 302e 2c20   FastArray([0., 
+0000da20: 312e 2c20 322e 2c20 332e 2c20 342e 5d29  1., 2., 3., 4.])
+0000da30: 0d0a 2020 2020 2020 2020 3e3e 3e20 6132  ..        >>> a2
+0000da40: 2e66 696c 6c5f 696e 7661 6c69 6428 6474  .fill_invalid(dt
+0000da50: 7970 653d 2269 6e74 3332 222c 2069 6e70  ype="int32", inp
+0000da60: 6c61 6365 3d46 616c 7365 290d 0a20 2020  lace=False)..   
+0000da70: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
+0000da80: 2d32 3134 3734 3833 3634 382c 202d 3231  -2147483648, -21
+0000da90: 3437 3438 3336 3438 2c20 2d32 3134 3734  47483648, -21474
+0000daa0: 3833 3634 382c 202d 3231 3437 3438 3336  83648, -21474836
+0000dab0: 3438 2c0d 0a20 2020 2020 2020 2020 2020  48,..           
+0000dac0: 2020 2020 2020 2020 2d32 3134 3734 3833          -2147483
+0000dad0: 3634 385d 290d 0a0d 0a20 2020 2020 2020  648])....       
+0000dae0: 2053 7065 6369 6679 2074 6865 2073 697a   Specify the siz
+0000daf0: 6520 616e 6420 6474 7970 6520 6f66 2074  e and dtype of t
+0000db00: 6865 206f 7574 7075 7420 6172 7261 793a  he output array:
+0000db10: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
+0000db20: 6133 203d 2072 742e 4641 285b 2241 4d5a  a3 = rt.FA(["AMZ
+0000db30: 4e22 2c20 2249 424d 222c 2022 4d53 4654  N", "IBM", "MSFT
+0000db40: 222c 2022 4141 504c 225d 290d 0a20 2020  ", "AAPL"])..   
+0000db50: 2020 2020 203e 3e3e 2061 330d 0a20 2020       >>> a3..   
+0000db60: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
+0000db70: 6227 414d 5a4e 272c 2062 2749 424d 272c  b'AMZN', b'IBM',
+0000db80: 2062 274d 5346 5427 2c20 6227 4141 504c   b'MSFT', b'AAPL
+0000db90: 275d 2c20 6474 7970 653d 277c 5334 2729  '], dtype='|S4')
+0000dba0: 0d0a 2020 2020 2020 2020 3e3e 3e20 6133  ..        >>> a3
+0000dbb0: 2e66 696c 6c5f 696e 7661 6c69 6428 322c  .fill_invalid(2,
+0000dbc0: 2064 7479 7065 3d22 626f 6f6c 222c 2069   dtype="bool", i
+0000dbd0: 6e70 6c61 6365 3d46 616c 7365 290d 0a20  nplace=False).. 
+0000dbe0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+0000dbf0: 285b 4661 6c73 652c 2046 616c 7365 5d29  ([False, False])
+0000dc00: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0000dc10: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0000dc20: 6c66 2e5f 6669 6c6c 5f69 6e76 616c 6964  lf._fill_invalid
+0000dc30: 5f69 6e74 6572 6e61 6c28 7368 6170 653d  _internal(shape=
+0000dc40: 7368 6170 652c 2064 7479 7065 3d64 7479  shape, dtype=dty
+0000dc50: 7065 2c20 696e 706c 6163 653d 696e 706c  pe, inplace=inpl
+0000dc60: 6163 6529 0d0a 0d0a 2020 2020 6465 6620  ace)....    def 
+0000dc70: 5f66 696c 6c5f 696e 7661 6c69 645f 696e  _fill_invalid_in
+0000dc80: 7465 726e 616c 2873 656c 662c 2073 6861  ternal(self, sha
+0000dc90: 7065 3d4e 6f6e 652c 2064 7479 7065 3d4e  pe=None, dtype=N
+0000dca0: 6f6e 652c 2069 6e70 6c61 6365 3d54 7275  one, inplace=Tru
+0000dcb0: 652c 2066 696c 6c5f 7661 6c3d 4e6f 6e65  e, fill_val=None
+0000dcc0: 293a 0d0a 2020 2020 2020 2020 6966 2064  ):..        if d
+0000dcd0: 7479 7065 2069 7320 4e6f 6e65 3a0d 0a20  type is None:.. 
+0000dce0: 2020 2020 2020 2020 2020 2064 7479 7065             dtype
+0000dcf0: 203d 2073 656c 662e 6474 7970 650d 0a20   = self.dtype.. 
+0000dd00: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+0000dd10: 616e 6365 2864 7479 7065 2c20 7374 7229  ance(dtype, str)
+0000dd20: 3a0d 0a20 2020 2020 2020 2020 2020 2064  :..            d
+0000dd30: 7479 7065 203d 206e 702e 6474 7970 6528  type = np.dtype(
+0000dd40: 6474 7970 6529 0d0a 2020 2020 2020 2020  dtype)..        
+0000dd50: 6966 2073 6861 7065 2069 7320 4e6f 6e65  if shape is None
+0000dd60: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+0000dd70: 6861 7065 203d 2073 656c 662e 7368 6170  hape = self.shap
+0000dd80: 650d 0a20 2020 2020 2020 2065 6c69 6620  e..        elif 
+0000dd90: 6e6f 7420 6973 696e 7374 616e 6365 2873  not isinstance(s
+0000dda0: 6861 7065 2c20 7475 706c 6529 3a0d 0a20  hape, tuple):.. 
+0000ddb0: 2020 2020 2020 2020 2020 2073 6861 7065             shape
+0000ddc0: 203d 2028 7368 6170 652c 290d 0a0d 0a20   = (shape,).... 
+0000ddd0: 2020 2020 2020 2069 6620 6669 6c6c 5f76         if fill_v
+0000dde0: 616c 2069 7320 4e6f 6e65 3a0d 0a20 2020  al is None:..   
+0000ddf0: 2020 2020 2020 2020 2069 6e76 203d 2049           inv = I
+0000de00: 4e56 414c 4944 5f44 4943 545b 6474 7970  NVALID_DICT[dtyp
+0000de10: 652e 6e75 6d5d 0d0a 2020 2020 2020 2020  e.num]..        
+0000de20: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+0000de30: 2020 2069 6e76 203d 2066 696c 6c5f 7661     inv = fill_va
+0000de40: 6c0d 0a0d 0a20 2020 2020 2020 2069 6620  l....        if 
+0000de50: 696e 706c 6163 6520 6973 2054 7275 653a  inplace is True:
+0000de60: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+0000de70: 2073 6861 7065 2021 3d20 7365 6c66 2e73   shape != self.s
+0000de80: 6861 7065 3a0d 0a20 2020 2020 2020 2020  hape:..         
+0000de90: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+0000dea0: 7565 4572 726f 7228 0d0a 2020 2020 2020  ueError(..      
+0000deb0: 2020 2020 2020 2020 2020 2020 2020 6622                f"
+0000dec0: 496e 706c 6163 6520 6669 6c6c 2069 6e76  Inplace fill inv
+0000ded0: 616c 6964 2063 616e 6e6f 7420 6265 2064  alid cannot be d
+0000dee0: 6966 6665 7265 6e74 206e 756d 6265 7220  ifferent number 
+0000def0: 6f66 2072 6f77 7320 7468 616e 2065 7869  of rows than exi
+0000df00: 7374 696e 6720 6172 7261 792e 2047 6f74  sting array. Got
+0000df10: 207b 7368 6170 657d 2076 732e 206c 656e   {shape} vs. len
+0000df20: 6774 6820 7b6c 656e 2873 656c 6629 7d22  gth {len(self)}"
+0000df30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000df40: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
+0000df50: 2069 6620 6474 7970 6520 213d 2073 656c   if dtype != sel
+0000df60: 662e 6474 7970 653a 0d0a 2020 2020 2020  f.dtype:..      
+0000df70: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0000df80: 5661 6c75 6545 7272 6f72 280d 0a20 2020  ValueError(..   
+0000df90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dfa0: 2066 2249 6e70 6c61 6365 2066 696c 6c20   f"Inplace fill 
+0000dfb0: 696e 7661 6c69 6420 6361 6e6e 6f74 2062  invalid cannot b
+0000dfc0: 6520 6469 6666 6572 656e 7420 6474 7970  e different dtyp
+0000dfd0: 6520 7468 616e 2065 7869 7374 696e 6720  e than existing 
+0000dfe0: 6172 7261 792e 2047 6f74 207b 6474 7970  array. Got {dtyp
+0000dff0: 657d 2076 732e 207b 6c65 6e28 7365 6c66  e} vs. {len(self
+0000e000: 2e64 7479 7065 297d 220d 0a20 2020 2020  .dtype)}"..     
+0000e010: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
+0000e020: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000e030: 2e66 696c 6c28 696e 7629 0d0a 2020 2020  .fill(inv)..    
+0000e040: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+0000e050: 2020 2020 2020 2061 7272 203d 2066 756c         arr = ful
+0000e060: 6c28 7368 6170 652c 2069 6e76 2c20 6474  l(shape, inv, dt
+0000e070: 7970 653d 6474 7970 6529 0d0a 2020 2020  ype=dtype)..    
+0000e080: 2020 2020 2020 2020 7265 7475 726e 2061          return a
+0000e090: 7272 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  rr....    # ----
+0000e0a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e0b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e0c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e0d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e0e0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2069  -----..    def i
+0000e0f0: 7369 6e28 7365 6c66 2c20 7465 7374 5f65  sin(self, test_e
+0000e100: 6c65 6d65 6e74 732c 202a 2c20 6173 7375  lements, *, assu
+0000e110: 6d65 5f75 6e69 7175 653d 4661 6c73 652c  me_unique=False,
+0000e120: 2069 6e76 6572 743d 4661 6c73 6529 202d   invert=False) -
+0000e130: 3e20 4661 7374 4172 7261 793a 0d0a 2020  > FastArray:..  
+0000e140: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+0000e150: 2020 2043 616c 6375 6c61 7465 7320 6073     Calculates `s
+0000e160: 656c 6620 696e 2074 6573 745f 656c 656d  elf in test_elem
+0000e170: 656e 7473 602c 2062 726f 6164 6361 7374  ents`, broadcast
+0000e180: 696e 6720 6f76 6572 2060 7365 6c66 6020  ing over `self` 
+0000e190: 6f6e 6c79 2e0d 0a20 2020 2020 2020 2052  only...        R
+0000e1a0: 6574 7572 6e73 2061 2062 6f6f 6c65 616e  eturns a boolean
+0000e1b0: 2061 7272 6179 206f 6620 7468 6520 7361   array of the sa
+0000e1c0: 6d65 2073 6861 7065 2061 7320 6073 656c  me shape as `sel
+0000e1d0: 6660 2074 6861 7420 6973 2054 7275 650d  f` that is True.
+0000e1e0: 0a20 2020 2020 2020 2077 6865 7265 2061  .        where a
+0000e1f0: 6e20 656c 656d 656e 7420 6f66 2060 7365  n element of `se
+0000e200: 6c66 6020 6973 2069 6e20 6074 6573 745f  lf` is in `test_
+0000e210: 656c 656d 656e 7473 6020 616e 6420 4661  elements` and Fa
+0000e220: 6c73 6520 6f74 6865 7277 6973 652e 0d0a  lse otherwise...
+0000e230: 0d0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
+0000e240: 7465 7273 0d0a 2020 2020 2020 2020 2d2d  ters..        --
+0000e250: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+0000e260: 2020 7465 7374 5f65 6c65 6d65 6e74 7320    test_elements 
+0000e270: 3a20 6172 7261 795f 6c69 6b65 0d0a 2020  : array_like..  
+0000e280: 2020 2020 2020 2020 2020 5468 6520 7661            The va
+0000e290: 6c75 6573 2061 6761 696e 7374 2077 6869  lues against whi
+0000e2a0: 6368 2074 6f20 7465 7374 2065 6163 6820  ch to test each 
+0000e2b0: 7661 6c75 6520 6f66 2060 656c 656d 656e  value of `elemen
+0000e2c0: 7460 2e0d 0a20 2020 2020 2020 2020 2020  t`...           
+0000e2d0: 2054 6869 7320 6172 6775 6d65 6e74 2069   This argument i
+0000e2e0: 7320 666c 6174 7465 6e65 6420 6966 2069  s flattened if i
+0000e2f0: 7420 6973 2061 6e20 6172 7261 7920 6f72  t is an array or
+0000e300: 2061 7272 6179 5f6c 696b 652e 0d0a 2020   array_like...  
+0000e310: 2020 2020 2020 2020 2020 5365 6520 6e6f            See no
+0000e320: 7465 7320 666f 7220 6265 6861 7669 6f72  tes for behavior
+0000e330: 2077 6974 6820 6e6f 6e2d 6172 7261 792d   with non-array-
+0000e340: 6c69 6b65 2070 6172 616d 6574 6572 732e  like parameters.
+0000e350: 0d0a 2020 2020 2020 2020 6173 7375 6d65  ..        assume
+0000e360: 5f75 6e69 7175 6520 3a20 626f 6f6c 2c20  _unique : bool, 
+0000e370: 6f70 7469 6f6e 616c 0d0a 2020 2020 2020  optional..      
+0000e380: 2020 2020 2020 4966 2054 7275 652c 2074        If True, t
+0000e390: 6865 2069 6e70 7574 2061 7272 6179 7320  he input arrays 
+0000e3a0: 6172 6520 626f 7468 2061 7373 756d 6564  are both assumed
+0000e3b0: 2074 6f20 6265 2075 6e69 7175 652c 2077   to be unique, w
+0000e3c0: 6869 6368 0d0a 2020 2020 2020 2020 2020  hich..          
+0000e3d0: 2020 6361 6e20 7370 6565 6420 7570 2074    can speed up t
+0000e3e0: 6865 2063 616c 6375 6c61 7469 6f6e 2e20  he calculation. 
+0000e3f0: 2044 6566 6175 6c74 2069 7320 4661 6c73   Default is Fals
+0000e400: 652e 0d0a 2020 2020 2020 2020 696e 7665  e...        inve
+0000e410: 7274 203a 2062 6f6f 6c2c 206f 7074 696f  rt : bool, optio
+0000e420: 6e61 6c0d 0a20 2020 2020 2020 2020 2020  nal..           
+0000e430: 2049 6620 5472 7565 2c20 7468 6520 7661   If True, the va
+0000e440: 6c75 6573 2069 6e20 7468 6520 7265 7475  lues in the retu
+0000e450: 726e 6564 2061 7272 6179 2061 7265 2069  rned array are i
+0000e460: 6e76 6572 7465 642c 2061 7320 6966 0d0a  nverted, as if..
+0000e470: 2020 2020 2020 2020 2020 2020 6361 6c63              calc
+0000e480: 756c 6174 696e 6720 6065 6c65 6d65 6e74  ulating `element
+0000e490: 206e 6f74 2069 6e20 7465 7374 5f65 6c65   not in test_ele
+0000e4a0: 6d65 6e74 7360 2e20 4465 6661 756c 7420  ments`. Default 
+0000e4b0: 6973 2046 616c 7365 2e0d 0a20 2020 2020  is False...     
+0000e4c0: 2020 2020 2020 2060 606e 702e 6973 696e         ``np.isin
+0000e4d0: 2861 2c20 622c 2069 6e76 6572 743d 5472  (a, b, invert=Tr
+0000e4e0: 7565 2960 6020 6973 2065 7175 6976 616c  ue)`` is equival
+0000e4f0: 656e 7420 746f 2028 6275 7420 6661 7374  ent to (but fast
+0000e500: 6572 0d0a 2020 2020 2020 2020 2020 2020  er..            
+0000e510: 7468 616e 2920 6060 6e70 2e69 6e76 6572  than) ``np.inver
+0000e520: 7428 6e70 2e69 7369 6e28 612c 2062 2929  t(np.isin(a, b))
+0000e530: 6060 2e0d 0a0d 0a20 2020 2020 2020 2052  ``.....        R
+0000e540: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
+0000e550: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0000e560: 2069 7369 6e20 3a20 6e64 6172 7261 792c   isin : ndarray,
+0000e570: 2062 6f6f 6c0d 0a20 2020 2020 2020 2020   bool..         
+0000e580: 2020 2048 6173 2074 6865 2073 616d 6520     Has the same 
+0000e590: 7368 6170 6520 6173 2060 656c 656d 656e  shape as `elemen
+0000e5a0: 7460 2e20 5468 6520 7661 6c75 6573 2060  t`. The values `
+0000e5b0: 656c 656d 656e 745b 6973 696e 5d60 0d0a  element[isin]`..
+0000e5c0: 2020 2020 2020 2020 2020 2020 6172 6520              are 
+0000e5d0: 696e 2060 7465 7374 5f65 6c65 6d65 6e74  in `test_element
+0000e5e0: 7360 2e0d 0a0d 0a20 2020 2020 2020 204e  s`.....        N
+0000e5f0: 6f74 653a 2062 6568 6176 696f 7220 6469  ote: behavior di
+0000e600: 6666 6572 7320 6672 6f6d 2070 616e 6461  ffers from panda
+0000e610: 730d 0a20 2020 2020 2020 202d 2052 6970  s..        - Rip
+0000e620: 7461 626c 6520 6661 766f 7273 2062 7974  table favors byt
+0000e630: 6573 7472 696e 6773 2c20 616e 6420 7769  estrings, and wi
+0000e640: 6c6c 206d 616b 6520 636f 6e76 6572 7369  ll make conversi
+0000e650: 6f6e 7320 6672 6f6d 2075 6e69 636f 6465  ons from unicode
+0000e660: 2f62 7974 6573 2074 6f20 6d61 7463 6820  /bytes to match 
+0000e670: 666f 7220 6f70 6572 6174 696f 6e73 2061  for operations a
+0000e680: 7320 6e65 6365 7373 6172 792e 0d0a 2020  s necessary...  
+0000e690: 2020 2020 2020 2d20 5765 2077 696c 6c20        - We will 
+0000e6a0: 616c 736f 2061 6363 6570 7420 7369 6e67  also accept sing
+0000e6b0: 6c65 2073 6361 6c61 7273 2066 6f72 2076  le scalars for v
+0000e6c0: 616c 7565 732e 0d0a 2020 2020 2020 2020  alues...        
+0000e6d0: 2d20 5061 6e64 6173 2073 6572 6965 7320  - Pandas series 
+0000e6e0: 7769 6c6c 2072 6574 7572 6e20 616e 6f74  will return anot
+0000e6f0: 6865 7220 7365 7269 6573 202d 2077 6520  her series - we 
+0000e700: 6861 7665 206e 6f20 7365 7269 6573 2c20  have no series, 
+0000e710: 616e 6420 7769 6c6c 2072 6574 7572 6e20  and will return 
+0000e720: 6120 4661 7374 4172 7261 790d 0a0d 0a20  a FastArray.... 
+0000e730: 2020 2020 2020 2045 7861 6d70 6c65 730d         Examples.
+0000e740: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0000e750: 2d0d 0a20 2020 2020 2020 203e 3e3e 2066  -..        >>> f
+0000e760: 726f 6d20 7269 7074 6162 6c65 2069 6d70  rom riptable imp
+0000e770: 6f72 7420 2a0d 0a20 2020 2020 2020 203e  ort *..        >
+0000e780: 3e3e 2061 203d 2046 4128 5b27 6127 2c27  >> a = FA(['a','
+0000e790: 6227 2c27 6327 2c27 6427 2c27 6527 5d2c  b','c','d','e'],
+0000e7a0: 2075 6e69 636f 6465 3d46 616c 7365 290d   unicode=False).
+0000e7b0: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
+0000e7c0: 7369 6e28 5b27 6127 2c27 6227 5d29 0d0a  sin(['a','b'])..
+0000e7d0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+0000e7e0: 7928 5b20 5472 7565 2c20 2054 7275 652c  y([ True,  True,
 0000e7f0: 2046 616c 7365 2c20 4661 6c73 652c 2046   False, False, F
-0000e800: 616c 7365 2c20 4661 6c73 655d 290d 0a20  alse, False]).. 
-0000e810: 2020 2020 2020 203e 3e3e 2061 2e69 7369         >>> a.isi
-0000e820: 6e28 7b27 6227 7d29 0d0a 2020 2020 2020  n({'b'})..      
-0000e830: 2020 4661 7374 4172 7261 7928 5b20 4661    FastArray([ Fa
-0000e840: 6c73 652c 2054 7275 652c 2046 616c 7365  lse, True, False
-0000e850: 2c20 4661 6c73 652c 2046 616c 7365 5d29  , False, False])
-0000e860: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-0000e870: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-0000e880: 616e 6365 2874 6573 745f 656c 656d 656e  ance(test_elemen
-0000e890: 7473 2c20 7365 7429 3a0d 0a20 2020 2020  ts, set):..     
-0000e8a0: 2020 2020 2020 2074 6573 745f 656c 656d         test_elem
-0000e8b0: 656e 7473 203d 206c 6973 7428 7465 7374  ents = list(test
-0000e8c0: 5f65 6c65 6d65 6e74 7329 0d0a 0d0a 2020  _elements)....  
-0000e8d0: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
-0000e8e0: 6e73 7461 6e63 6528 7465 7374 5f65 6c65  nstance(test_ele
-0000e8f0: 6d65 6e74 732c 206e 702e 6e64 6172 7261  ments, np.ndarra
-0000e900: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
-0000e910: 2023 2061 6c69 676e 2062 7974 6520 7374   # align byte st
-0000e920: 7269 6e67 2076 7320 756e 6963 6f64 650d  ring vs unicode.
-0000e930: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000e940: 7365 6c66 2e64 7479 7065 2e63 6861 7220  self.dtype.char 
-0000e950: 696e 2022 5355 223a 0d0a 2020 2020 2020  in "SU":..      
-0000e960: 2020 2020 2020 2020 2020 6966 206e 702e            if np.
-0000e970: 6973 7363 616c 6172 2874 6573 745f 656c  isscalar(test_el
-0000e980: 656d 656e 7473 293a 0d0a 2020 2020 2020  ements):..      
-0000e990: 2020 2020 2020 2020 2020 2020 2020 7465                te
-0000e9a0: 7374 5f65 6c65 6d65 6e74 7320 3d20 6e70  st_elements = np
-0000e9b0: 2e61 7361 7272 6179 285b 7465 7374 5f65  .asarray([test_e
-0000e9c0: 6c65 6d65 6e74 735d 2c20 6474 7970 653d  lements], dtype=
-0000e9d0: 7365 6c66 2e64 7479 7065 2e63 6861 7229  self.dtype.char)
-0000e9e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000e9f0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-0000ea00: 2020 2020 2020 2020 2020 2020 2074 6573               tes
-0000ea10: 745f 656c 656d 656e 7473 203d 206e 702e  t_elements = np.
-0000ea20: 6173 6172 7261 7928 7465 7374 5f65 6c65  asarray(test_ele
-0000ea30: 6d65 6e74 732c 2064 7479 7065 3d73 656c  ments, dtype=sel
-0000ea40: 662e 6474 7970 652e 6368 6172 290d 0a20  f.dtype.char).. 
-0000ea50: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0000ea60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000ea70: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0000ea80: 7465 7374 5f65 6c65 6d65 6e74 732c 2074  test_elements, t
-0000ea90: 7570 6c65 293a 0d0a 2020 2020 2020 2020  uple):..        
-0000eaa0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0000eab0: 6520 5661 6c75 6545 7272 6f72 280d 0a20  e ValueError(.. 
-0000eac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ead0: 2020 2020 2020 2022 6973 696e 2064 6f65         "isin doe
-0000eae0: 7320 6e6f 7420 6375 7272 656e 746c 7920  s not currently 
-0000eaf0: 7375 7070 6f72 7420 7475 706c 6573 2e20  support tuples. 
-0000eb00: 2049 6e20 7468 6520 6675 7475 7265 2061   In the future a
-0000eb10: 2074 7570 6c65 2077 696c 6c20 6265 2075   tuple will be u
-0000eb20: 7365 6420 746f 2072 6570 7265 7365 6e74  sed to represent
-0000eb30: 2061 206d 756c 7469 2d6b 6579 2e22 0d0a   a multi-key."..
-0000eb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000eb50: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
-0000eb60: 2020 2020 2020 2074 6573 745f 656c 656d         test_elem
-0000eb70: 656e 7473 203d 2072 632e 4173 4661 7374  ents = rc.AsFast
-0000eb80: 4172 7261 7928 7465 7374 5f65 6c65 6d65  Array(test_eleme
-0000eb90: 6e74 7329 0d0a 0d0a 2020 2020 2020 2020  nts)....        
-0000eba0: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
-0000ebb0: 2020 2320 6f70 7469 6d69 7a61 7469 6f6e    # optimization
-0000ebc0: 3a20 6966 2077 6520 6861 7665 206a 7573  : if we have jus
-0000ebd0: 7420 6f6e 6520 656c 656d 656e 742c 2077  t one element, w
-0000ebe0: 6520 6361 6e20 6a75 7374 2070 6172 616c  e can just paral
-0000ebf0: 6c65 6c20 636f 6d70 6172 6520 7468 6174  lel compare that
-0000ec00: 206f 6e65 2065 6c65 6d65 6e74 0d0a 2020   one element..  
-0000ec10: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-0000ec20: 2874 6573 745f 656c 656d 656e 7473 2920  (test_elements) 
-0000ec30: 3d3d 2031 3a0d 0a20 2020 2020 2020 2020  == 1:..         
-0000ec40: 2020 2020 2020 2023 2073 7472 696e 6720         # string 
-0000ec50: 636f 6d70 6172 6973 6f6e 2074 6f20 696e  comparison to in
-0000ec60: 7420 7769 6c6c 2066 6169 6c0d 0a20 2020  t will fail..   
-0000ec70: 2020 2020 2020 2020 2020 2020 2072 6573               res
-0000ec80: 756c 7420 3d20 7365 6c66 203d 3d20 7465  ult = self == te
-0000ec90: 7374 5f65 6c65 6d65 6e74 735b 305d 0d0a  st_elements[0]..
-0000eca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ecb0: 2320 6368 6563 6b20 666f 7220 6661 696c  # check for fail
-0000ecc0: 6564 2072 6573 756c 740d 0a20 2020 2020  ed result..     
-0000ecd0: 2020 2020 2020 2020 2020 2069 6620 6e70             if np
-0000ece0: 2e69 7373 6361 6c61 7228 7265 7375 6c74  .isscalar(result
-0000ecf0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0000ed00: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-0000ed10: 2069 736d 656d 6265 7228 7365 6c66 2c20   ismember(self, 
-0000ed20: 7465 7374 5f65 6c65 6d65 6e74 7329 5b30  test_elements)[0
-0000ed30: 5d0d 0a20 2020 2020 2020 2020 2020 2065  ]..            e
-0000ed40: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-0000ed50: 2020 2020 2020 7265 7375 6c74 203d 2069        result = i
-0000ed60: 736d 656d 6265 7228 7365 6c66 2c20 7465  smember(self, te
-0000ed70: 7374 5f65 6c65 6d65 6e74 7329 5b30 5d0d  st_elements)[0].
-0000ed80: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000ed90: 696e 7665 7274 3a0d 0a20 2020 2020 2020  invert:..       
-0000eda0: 2020 2020 2020 2020 206e 702e 6c6f 6769           np.logi
-0000edb0: 6361 6c5f 6e6f 7428 7265 7375 6c74 2c20  cal_not(result, 
-0000edc0: 6f75 743d 7265 7375 6c74 290d 0a20 2020  out=result)..   
-0000edd0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0000ede0: 7265 7375 6c74 0d0a 2020 2020 2020 2020  result..        
-0000edf0: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
-0000ee00: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-0000ee10: 2070 756e 7420 6e6f 6e2d 7375 7070 6f72   punt non-suppor
-0000ee20: 7465 6420 7479 7065 7320 746f 206e 756d  ted types to num
-0000ee30: 7079 0d0a 2020 2020 2020 2020 2020 2020  py..            
-0000ee40: 7265 7475 726e 206e 702e 6973 696e 2873  return np.isin(s
-0000ee50: 656c 662e 5f6e 702c 2074 6573 745f 656c  elf._np, test_el
-0000ee60: 656d 656e 7473 2c20 6173 7375 6d65 5f75  ements, assume_u
-0000ee70: 6e69 7175 653d 6173 7375 6d65 5f75 6e69  nique=assume_uni
-0000ee80: 7175 652c 2069 6e76 6572 743d 696e 7665  que, invert=inve
-0000ee90: 7274 290d 0a0d 0a20 2020 2023 202d 2d2d  rt)....    # ---
-0000eea0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000eeb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000eec0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000eed0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000eee0: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
-0000eef0: 6265 7477 6565 6e28 7365 6c66 2c20 6c6f  between(self, lo
-0000ef00: 772c 2068 6967 682c 2069 6e63 6c75 6465  w, high, include
-0000ef10: 5f6c 6f77 3a20 626f 6f6c 203d 2054 7275  _low: bool = Tru
-0000ef20: 652c 2069 6e63 6c75 6465 5f68 6967 683a  e, include_high:
-0000ef30: 2062 6f6f 6c20 3d20 4661 6c73 6529 202d   bool = False) -
-0000ef40: 3e20 4661 7374 4172 7261 793a 0d0a 2020  > FastArray:..  
-0000ef50: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0000ef60: 2020 2052 6574 7572 6e20 6120 626f 6f6c     Return a bool
-0000ef70: 6561 6e20 6046 6173 7441 7272 6179 6020  ean `FastArray` 
-0000ef80: 696e 6469 6361 7469 6e67 2077 6869 6368  indicating which
-0000ef90: 2069 6e70 7574 2076 616c 7565 7320 6172   input values ar
-0000efa0: 6520 696e 2061 2073 7065 6369 6669 6564  e in a specified
-0000efb0: 2069 6e74 6572 7661 6c2e 0d0a 0d0a 2020   interval.....  
-0000efc0: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
-0000efd0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-0000efe0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6c6f  ----..        lo
-0000eff0: 773a 2073 6361 6c61 722c 2061 7272 6179  w: scalar, array
-0000f000: 0d0a 2020 2020 2020 2020 2020 2020 4c6f  ..            Lo
-0000f010: 7765 7220 626f 756e 6420 666f 7220 7468  wer bound for th
-0000f020: 6520 696e 7465 7276 616c 2e20 4966 2061  e interval. If a
-0000f030: 6e20 6172 7261 792c 206d 7573 7420 6265  n array, must be
-0000f040: 2074 6865 2073 616d 6520 7369 7a65 2061   the same size a
-0000f050: 7320 6073 656c 6660 2c20 616e 6420 636f  s `self`, and co
-0000f060: 6d70 6172 6973 6f6e 7320 6172 6520 646f  mparisons are do
-0000f070: 6e65 2065 6c65 6d65 6e74 7769 7365 2e0d  ne elementwise..
-0000f080: 0a20 2020 2020 2020 2068 6967 683a 2073  .        high: s
-0000f090: 6361 6c61 722c 2061 7272 6179 0d0a 2020  calar, array..  
-0000f0a0: 2020 2020 2020 2020 2020 5570 7065 7220            Upper 
-0000f0b0: 626f 756e 6420 666f 7220 7468 6520 696e  bound for the in
-0000f0c0: 7465 7276 616c 2e20 4966 2061 6e20 6172  terval. If an ar
-0000f0d0: 7261 792c 206d 7573 7420 6265 2074 6865  ray, must be the
-0000f0e0: 2073 616d 6520 7369 7a65 2061 7320 6073   same size as `s
-0000f0f0: 656c 6660 2c20 616e 6420 636f 6d70 6172  elf`, and compar
-0000f100: 6973 6f6e 7320 6172 6520 646f 6e65 2065  isons are done e
-0000f110: 6c65 6d65 6e74 7769 7365 2e0d 0a20 2020  lementwise...   
-0000f120: 2020 2020 2069 6e63 6c75 6465 5f6c 6f77       include_low
-0000f130: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-0000f140: 5472 7565 0d0a 2020 2020 2020 2020 2020  True..          
-0000f150: 2020 5370 6563 6966 6965 7320 7768 6574    Specifies whet
-0000f160: 6865 7220 606c 6f77 6020 6973 2069 6e63  her `low` is inc
-0000f170: 6c75 6465 6420 7768 656e 2070 6572 666f  luded when perfo
-0000f180: 726d 696e 6720 636f 6d70 6172 6973 6f6e  rming comparison
-0000f190: 732e 0d0a 2020 2020 2020 2020 696e 636c  s...        incl
-0000f1a0: 7564 655f 6869 6768 3a20 626f 6f6c 2c20  ude_high: bool, 
-0000f1b0: 6465 6661 756c 7420 4661 6c73 650d 0a20  default False.. 
-0000f1c0: 2020 2020 2020 2020 2020 2053 7065 6369             Speci
-0000f1d0: 6669 6573 2077 6865 7468 6572 2060 6869  fies whether `hi
-0000f1e0: 6768 6020 6973 2069 6e63 6c75 6465 6420  gh` is included 
-0000f1f0: 7768 656e 2070 6572 666f 726d 696e 6720  when performing 
-0000f200: 636f 6d70 6172 6973 6f6e 732e 0d0a 0d0a  comparisons.....
-0000f210: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
-0000f220: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-0000f230: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-0000f240: 7261 790d 0a20 2020 2020 2020 2020 2020  ray..           
-0000f250: 2041 2062 6f6f 6c65 616e 2060 4661 7374   A boolean `Fast
-0000f260: 4172 7261 7960 2069 6e64 6963 6174 696e  Array` indicatin
-0000f270: 6720 7768 6963 6820 696e 7075 7420 7661  g which input va
-0000f280: 6c75 6573 2061 7265 2069 6e20 6120 7370  lues are in a sp
-0000f290: 6563 6966 6965 6420 696e 7465 7276 616c  ecified interval
-0000f2a0: 2e0d 0a0d 0a20 2020 2020 2020 2045 7861  .....        Exa
-0000f2b0: 6d70 6c65 730d 0a20 2020 2020 2020 202d  mples..        -
-0000f2c0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-0000f2d0: 2053 7065 6369 6679 2061 6e20 696e 7465   Specify an inte
-0000f2e0: 7276 616c 2075 7369 6e67 2073 6361 6c61  rval using scala
-0000f2f0: 7273 3a0d 0a0d 0a20 2020 2020 2020 203e  rs:....        >
-0000f300: 3e3e 2061 203d 2072 742e 4641 285b 392c  >> a = rt.FA([9,
-0000f310: 2032 2c20 332c 2035 2c20 382c 2039 2c20   2, 3, 5, 8, 9, 
-0000f320: 312c 2034 2c20 365d 290d 0a20 2020 2020  1, 4, 6])..     
-0000f330: 2020 203e 3e3e 2061 2e62 6574 7765 656e     >>> a.between
-0000f340: 2835 2c20 392c 2069 6e63 6c75 6465 5f6c  (5, 9, include_l
-0000f350: 6f77 3d46 616c 7365 2920 2023 2045 7863  ow=False)  # Exc
-0000f360: 6c75 6465 2060 3560 2028 6c65 6674 2065  lude `5` (left e
-0000f370: 6e64 706f 696e 7429 0d0a 2020 2020 2020  ndpoint)..      
-0000f380: 2020 4661 7374 4172 7261 7928 5b46 616c    FastArray([Fal
-0000f390: 7365 2c20 4661 6c73 652c 2046 616c 7365  se, False, False
-0000f3a0: 2c20 4661 6c73 652c 2020 5472 7565 2c20  , False,  True, 
-0000f3b0: 4661 6c73 652c 2046 616c 7365 2c20 4661  False, False, Fa
-0000f3c0: 6c73 652c 2020 5472 7565 5d29 0d0a 0d0a  lse,  True])....
-0000f3d0: 2020 2020 2020 2020 5370 6563 6966 7920          Specify 
-0000f3e0: 616e 2069 6e74 6572 7661 6c20 7573 696e  an interval usin
-0000f3f0: 6720 6172 7261 7973 3a0d 0a0d 0a20 2020  g arrays:....   
-0000f400: 2020 2020 203e 3e3e 2061 3220 3d20 7274       >>> a2 = rt
-0000f410: 2e46 4128 5b31 2c20 322c 2033 2c20 342c  .FA([1, 2, 3, 4,
-0000f420: 2035 5d29 0d0a 2020 2020 2020 2020 3e3e   5])..        >>
-0000f430: 3e20 6132 2e62 6574 7765 656e 285b 312c  > a2.between([1,
-0000f440: 2033 2c20 352c 2035 2c20 355d 2c20 5b32   3, 5, 5, 5], [2
-0000f450: 2c20 342c 2036 2c20 362c 2036 5d29 0d0a  , 4, 6, 6, 6])..
-0000f460: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-0000f470: 7928 5b20 5472 7565 2c20 4661 6c73 652c  y([ True, False,
-0000f480: 2046 616c 7365 2c20 4661 6c73 652c 2020   False, False,  
-0000f490: 5472 7565 5d29 0d0a 0d0a 2020 2020 2020  True])....      
-0000f4a0: 2020 5370 6563 6966 7920 616e 2069 6e74    Specify an int
-0000f4b0: 6572 7661 6c20 6d69 7869 6e67 2073 6361  erval mixing sca
-0000f4c0: 6c61 7220 616e 6420 6172 7261 7920 626f  lar and array bo
-0000f4d0: 756e 6473 3a0d 0a0d 0a20 2020 2020 2020  unds:....       
-0000f4e0: 203e 3e3e 2061 3320 3d20 7274 2e46 4128   >>> a3 = rt.FA(
-0000f4f0: 5b31 2c20 322c 2033 2c20 342c 2035 5d29  [1, 2, 3, 4, 5])
-0000f500: 0d0a 2020 2020 2020 2020 3e3e 3e20 6133  ..        >>> a3
-0000f510: 2e62 6574 7765 656e 2832 2c20 5b32 2c20  .between(2, [2, 
-0000f520: 342c 2036 2c20 362c 2036 5d29 0d0a 2020  4, 6, 6, 6])..  
-0000f530: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
-0000f540: 5b46 616c 7365 2c20 2054 7275 652c 2020  [False,  True,  
-0000f550: 5472 7565 2c20 2054 7275 652c 2020 5472  True,  True,  Tr
-0000f560: 7565 5d29 0d0a 2020 2020 2020 2020 2222  ue])..        ""
-0000f570: 220d 0a20 2020 2020 2020 206c 6f77 203d  "..        low =
-0000f580: 2061 7361 6e79 6172 7261 7928 6c6f 7729   asanyarray(low)
-0000f590: 0d0a 2020 2020 2020 2020 6869 6768 203d  ..        high =
-0000f5a0: 2061 7361 6e79 6172 7261 7928 6869 6768   asanyarray(high
-0000f5b0: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
-0000f5c0: 696e 636c 7564 655f 6c6f 773a 0d0a 2020  include_low:..  
-0000f5d0: 2020 2020 2020 2020 2020 7265 7420 3d20            ret = 
-0000f5e0: 7365 6c66 203e 3d20 6c6f 770d 0a20 2020  self >= low..   
-0000f5f0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-0000f600: 2020 2020 2020 2020 7265 7420 3d20 7365          ret = se
-0000f610: 6c66 203e 206c 6f77 0d0a 2020 2020 2020  lf > low..      
-0000f620: 2020 6966 2069 6e63 6c75 6465 5f68 6967    if include_hig
-0000f630: 683a 0d0a 2020 2020 2020 2020 2020 2020  h:..            
-0000f640: 7265 7420 263d 2073 656c 6620 3c3d 2068  ret &= self <= h
-0000f650: 6967 680d 0a20 2020 2020 2020 2065 6c73  igh..        els
-0000f660: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0000f670: 7265 7420 263d 2073 656c 6620 3c20 6869  ret &= self < hi
-0000f680: 6768 0d0a 2020 2020 2020 2020 7265 7475  gh..        retu
-0000f690: 726e 2072 6574 0d0a 0d0a 2020 2020 2320  rn ret....    # 
-0000f6a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f6b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f6c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f6d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000f6e0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-0000f6f0: 6465 6620 7361 6d70 6c65 280d 0a20 2020  def sample(..   
-0000f700: 2020 2020 2073 656c 662c 0d0a 2020 2020       self,..    
-0000f710: 2020 2020 4e3a 2069 6e74 203d 2031 302c      N: int = 10,
-0000f720: 0d0a 2020 2020 2020 2020 6669 6c74 6572  ..        filter
-0000f730: 3a20 4f70 7469 6f6e 616c 5b6e 702e 6e64  : Optional[np.nd
-0000f740: 6172 7261 795d 203d 204e 6f6e 652c 0d0a  array] = None,..
-0000f750: 2020 2020 2020 2020 7365 6564 3a20 4f70          seed: Op
-0000f760: 7469 6f6e 616c 5b55 6e69 6f6e 5b69 6e74  tional[Union[int
-0000f770: 2c20 5365 7175 656e 6365 5b69 6e74 5d2c  , Sequence[int],
-0000f780: 206e 702e 7261 6e64 6f6d 2e53 6565 6453   np.random.SeedS
-0000f790: 6571 7565 6e63 652c 206e 702e 7261 6e64  equence, np.rand
-0000f7a0: 6f6d 2e47 656e 6572 6174 6f72 5d5d 203d  om.Generator]] =
-0000f7b0: 204e 6f6e 652c 0d0a 2020 2020 2920 2d3e   None,..    ) ->
-0000f7c0: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
-0000f7d0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-0000f7e0: 2020 5265 7475 726e 2061 2067 6976 656e    Return a given
-0000f7f0: 206e 756d 6265 7220 6f66 2072 616e 646f   number of rando
-0000f800: 6d6c 7920 7365 6c65 6374 6564 2076 616c  mly selected val
-0000f810: 7565 7320 6672 6f6d 2061 2060 4661 7374  ues from a `Fast
-0000f820: 4172 7261 7960 2e0d 0a0d 0a20 2020 2020  Array`.....     
-0000f830: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
-0000f840: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
-0000f850: 2d0d 0a20 2020 2020 2020 204e 203a 2069  -..        N : i
-0000f860: 6e74 2c20 6465 6661 756c 7420 3130 0d0a  nt, default 10..
-0000f870: 2020 2020 2020 2020 2020 2020 4e75 6d62              Numb
-0000f880: 6572 206f 6620 7661 6c75 6573 2074 6f20  er of values to 
-0000f890: 7365 6c65 6374 2e20 5468 6520 656e 7469  select. The enti
-0000f8a0: 7265 2061 7272 6179 2069 7320 7265 7475  re array is retu
-0000f8b0: 726e 6564 2069 6620 604e 6020 6973 2067  rned if `N` is g
-0000f8c0: 7265 6174 6572 2074 6861 6e20 7468 6520  reater than the 
-0000f8d0: 7369 7a65 206f 6620 7468 6520 6172 7261  size of the arra
-0000f8e0: 792e 0d0a 2020 2020 2020 2020 6669 6c74  y...        filt
-0000f8f0: 6572 203a 2061 7272 6179 2028 626f 6f6c  er : array (bool
-0000f900: 206f 7220 696e 7429 2c20 6f70 7469 6f6e   or int), option
-0000f910: 616c 0d0a 2020 2020 2020 2020 2020 2020  al..            
-0000f920: 4120 626f 6f6c 6561 6e20 6d61 736b 206f  A boolean mask o
-0000f930: 7220 696e 6465 7820 6172 7261 7920 746f  r index array to
-0000f940: 2066 696c 7465 7220 7661 6c75 6573 2062   filter values b
-0000f950: 6566 6f72 6520 7365 6c65 6374 696f 6e2e  efore selection.
-0000f960: 204e 6f74 6520 7468 6174 2075 6e74 696c   Note that until
-0000f970: 2061 2072 6570 6f72 7465 6420 6275 6720   a reported bug 
-0000f980: 6973 2066 6978 6564 2c20 6e6f 2065 7272  is fixed, no err
-0000f990: 6f72 2069 7320 7261 6973 6564 2061 6e64  or is raised and
-0000f9a0: 2075 6e65 7870 6563 7465 6420 7265 7375   unexpected resu
-0000f9b0: 6c74 7320 6d61 7920 6f63 6375 7220 7768  lts may occur wh
-0000f9c0: 656e 2061 2062 6f6f 6c65 616e 206d 6173  en a boolean mas
-0000f9d0: 6b20 6172 7261 7920 7769 7468 2061 206c  k array with a l
-0000f9e0: 656e 6774 6820 6469 6666 6572 656e 7420  ength different 
-0000f9f0: 6672 6f6d 2074 6861 7420 6f66 2074 6865  from that of the
-0000fa00: 2061 7272 6179 2069 7427 7320 6d61 736b   array it's mask
-0000fa10: 696e 6720 6973 2070 6173 7365 6420 6173  ing is passed as
-0000fa20: 2061 2066 696c 7465 722e 0d0a 2020 2020   a filter...    
-0000fa30: 2020 2020 7365 6564 203a 2069 6e74 206f      seed : int o
-0000fa40: 7220 6f74 6865 7220 7479 7065 732c 206f  r other types, o
-0000fa50: 7074 696f 6e61 6c0d 0a20 2020 2020 2020  ptional..       
-0000fa60: 2020 2020 2041 2073 6565 6420 746f 2069       A seed to i
-0000fa70: 6e69 7469 616c 697a 6520 7468 6520 7261  nitialize the ra
-0000fa80: 6e64 6f6d 206e 756d 6265 7220 6765 6e65  ndom number gene
-0000fa90: 7261 746f 722e 2049 6620 6f6e 6520 6973  rator. If one is
-0000faa0: 206e 6f74 2070 726f 7669 6465 642c 2074   not provided, t
-0000fab0: 6865 2067 656e 6572 6174 6f72 2069 7320  he generator is 
-0000fac0: 696e 6974 6961 6c69 7a65 6420 7573 696e  initialized usin
-0000fad0: 6720 7261 6e64 6f6d 2064 6174 6120 6672  g random data fr
-0000fae0: 6f6d 2074 6865 204f 532e 2046 6f72 2064  om the OS. For d
-0000faf0: 6574 6169 6c73 2061 6e64 206f 7468 6572  etails and other
-0000fb00: 2061 6363 6570 7465 6420 7479 7065 732c   accepted types,
-0000fb10: 2073 6565 2074 6865 2060 7365 6564 6020   see the `seed` 
-0000fb20: 7061 7261 6d65 7465 7220 666f 7220 606e  parameter for `n
-0000fb30: 756d 7079 2e72 616e 646f 6d2e 6465 6661  umpy.random.defa
-0000fb40: 756c 745f 726e 6760 2e0d 0a0d 0a20 2020  ult_rng`.....   
-0000fb50: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
-0000fb60: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-0000fb70: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-0000fb80: 0d0a 2020 2020 2020 2020 2020 2020 4120  ..            A 
-0000fb90: 6e65 7720 6046 6173 7441 7272 6179 6020  new `FastArray` 
-0000fba0: 636f 6e74 6169 6e69 6e67 2074 6865 2072  containing the r
-0000fbb0: 616e 646f 6d6c 7920 7365 6c65 6374 6564  andomly selected
-0000fbc0: 2076 616c 7565 732e 0d0a 0d0a 2020 2020   values.....    
-0000fbd0: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
-0000fbe0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-0000fbf0: 2020 2020 2020 2020 2e44 6174 6173 6574          .Dataset
-0000fc00: 2e73 616d 706c 6520 3a20 5265 7475 726e  .sample : Return
-0000fc10: 2061 2073 7065 6369 6669 6564 206e 756d   a specified num
-0000fc20: 6265 7220 6f66 2072 616e 646f 6d6c 7920  ber of randomly 
-0000fc30: 7365 6c65 6374 6564 2072 6f77 7320 6672  selected rows fr
-0000fc40: 6f6d 2061 2060 2e44 6174 6173 6574 602e  om a `.Dataset`.
-0000fc50: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
-0000fc60: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
-0000fc70: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0000fc80: 4e6f 2073 616d 706c 6520 7369 7a65 2073  No sample size s
-0000fc90: 7065 6369 6669 6564 3a0d 0a0d 0a20 2020  pecified:....   
-0000fca0: 2020 2020 203e 3e3e 2061 203d 2072 742e       >>> a = rt.
-0000fcb0: 4641 285b 312c 2032 2c20 332c 2034 2c20  FA([1, 2, 3, 4, 
-0000fcc0: 352c 2036 2c20 372c 2038 2c20 392c 2031  5, 6, 7, 8, 9, 1
-0000fcd0: 302c 2031 312c 2031 325d 290d 0a20 2020  0, 11, 12])..   
-0000fce0: 2020 2020 203e 3e3e 2061 2e73 616d 706c       >>> a.sampl
-0000fcf0: 6528 2920 2023 2031 3020 7261 6e64 6f6d  e()  # 10 random
-0000fd00: 6c79 2073 656c 6563 7465 6420 7661 6c75  ly selected valu
-0000fd10: 6573 2072 6574 7572 6e65 642e 0d0a 2020  es returned...  
-0000fd20: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
-0000fd30: 5b20 312c 2020 322c 2020 332c 2020 342c  [ 1,  2,  3,  4,
-0000fd40: 2020 352c 2020 362c 2020 372c 2020 392c    5,  6,  7,  9,
-0000fd50: 2031 302c 2031 315d 2920 2023 2052 616e   10, 11])  # Ran
-0000fd60: 646f 6d0d 0a0d 0a20 2020 2020 2020 2053  dom....        S
-0000fd70: 616d 706c 6520 3320 7661 6c75 6573 3a0d  ample 3 values:.
-0000fd80: 0a0d 0a20 2020 2020 2020 203e 3e3e 2061  ...        >>> a
-0000fd90: 203d 2072 742e 4641 285b 312c 2032 2c20   = rt.FA([1, 2, 
-0000fda0: 332c 2034 2c20 352c 2036 2c20 372c 2038  3, 4, 5, 6, 7, 8
-0000fdb0: 2c20 392c 2031 302c 2031 312c 2031 325d  , 9, 10, 11, 12]
-0000fdc0: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
-0000fdd0: 2e73 616d 706c 6528 3329 0d0a 2020 2020  .sample(3)..    
-0000fde0: 2020 2020 4661 7374 4172 7261 7928 5b31      FastArray([1
-0000fdf0: 2c20 342c 2039 5d29 2020 2320 5261 6e64  , 4, 9])  # Rand
-0000fe00: 6f6d 0d0a 0d0a 2020 2020 2020 2020 5370  om....        Sp
-0000fe10: 6563 6966 7920 6120 7361 6d70 6c65 2073  ecify a sample s
-0000fe20: 697a 6520 6c61 7267 6572 2074 6861 6e20  ize larger than 
-0000fe30: 7468 6520 6172 7261 793a 0d0a 0d0a 2020  the array:....  
-0000fe40: 2020 2020 2020 3e3e 3e20 6132 203d 2072        >>> a2 = r
-0000fe50: 742e 4641 285b 312c 2032 2c20 332c 2034  t.FA([1, 2, 3, 4
-0000fe60: 2c20 355d 290d 0a20 2020 2020 2020 203e  , 5])..        >
-0000fe70: 3e3e 2061 322e 7361 6d70 6c65 2831 3030  >> a2.sample(100
-0000fe80: 2920 2023 2054 6865 2065 6e74 6972 6520  )  # The entire 
-0000fe90: 6172 7261 7920 6973 2072 6574 7572 6e65  array is returne
-0000fea0: 642e 0d0a 2020 2020 2020 2020 4661 7374  d...        Fast
-0000feb0: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
-0000fec0: 342c 2035 5d29 0d0a 0d0a 2020 2020 2020  4, 5])....      
-0000fed0: 2020 5370 6563 6966 7920 616e 2069 6e64    Specify an ind
-0000fee0: 6578 2061 7272 6179 2066 6f72 2066 696c  ex array for fil
-0000fef0: 7465 7269 6e67 3a0d 0a0d 0a20 2020 2020  tering:....     
-0000ff00: 2020 203e 3e3e 2061 3320 3d20 7274 2e46     >>> a3 = rt.F
-0000ff10: 4128 5b27 5453 4c41 272c 2741 4d5a 4e27  A(['TSLA','AMZN'
-0000ff20: 2c27 4942 4d27 2c20 2753 5059 272c 2027  ,'IBM', 'SPY', '
-0000ff30: 474d 4527 2c20 2741 4150 4c27 2c20 2746  GME', 'AAPL', 'F
-0000ff40: 4227 2c20 2747 4f4f 4727 2c20 274d 5346  B', 'GOOG', 'MSF
-0000ff50: 5427 2c20 2755 4245 5227 5d29 2020 2320  T', 'UBER'])  # 
-0000ff60: 4372 6561 7465 2073 616d 706c 6520 6461  Create sample da
-0000ff70: 7461 2e0d 0a20 2020 2020 2020 203e 3e3e  ta...        >>>
-0000ff80: 2066 696c 7465 7220 3d20 7274 2e46 4128   filter = rt.FA(
-0000ff90: 5b30 2c20 312c 2033 2c20 375d 2920 2023  [0, 1, 3, 7])  #
-0000ffa0: 2053 7065 6369 6679 2069 6e64 6963 6573   Specify indices
-0000ffb0: 206f 6620 6133 2074 6f20 7461 6b65 2074   of a3 to take t
-0000ffc0: 6865 2073 616d 706c 6520 6672 6f6d 2e0d  he sample from..
-0000ffd0: 0a20 2020 2020 2020 203e 3e3e 2061 332e  .        >>> a3.
-0000ffe0: 7361 6d70 6c65 2832 2c20 6669 6c74 6572  sample(2, filter
-0000fff0: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
-00010000: 7272 6179 285b 6227 5453 4c41 272c 2062  rray([b'TSLA', b
-00010010: 2747 4f4f 4727 5d2c 2064 7479 7065 3d27  'GOOG'], dtype='
-00010020: 7c53 3427 2920 2023 2052 616e 646f 6d0d  |S4')  # Random.
-00010030: 0a0d 0a20 2020 2020 2020 2053 7065 6369  ...        Speci
-00010040: 6679 2061 2062 6f6f 6c65 616e 206d 6173  fy a boolean mas
-00010050: 6b20 6172 7261 7920 666f 7220 6669 6c74  k array for filt
-00010060: 6572 696e 673a 0d0a 0d0a 2020 2020 2020  ering:....      
-00010070: 2020 3e3e 3e20 6133 2e73 616d 706c 6528    >>> a3.sample(
-00010080: 382c 2066 696c 7465 723d 7274 2e46 4128  8, filter=rt.FA(
-00010090: 6133 2021 3d20 2753 5059 2729 290d 0a20  a3 != 'SPY')).. 
-000100a0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-000100b0: 285b 6227 5453 4c41 272c 2062 2749 424d  ([b'TSLA', b'IBM
-000100c0: 272c 2062 2747 4d45 272c 2062 2741 4150  ', b'GME', b'AAP
-000100d0: 4c27 2c20 6227 4642 272c 2062 2747 4f4f  L', b'FB', b'GOO
-000100e0: 4727 2c20 6227 4d53 4654 272c 0d0a 2020  G', b'MSFT',..  
-000100f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010100: 2062 2755 4245 5227 5d2c 2064 7479 7065   b'UBER'], dtype
-00010110: 3d27 7c53 3427 2920 2023 2052 616e 646f  ='|S4')  # Rando
-00010120: 6d0d 0a20 2020 2020 2020 2022 2222 0d0a  m..        """..
-00010130: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00010140: 616d 706c 6528 7365 6c66 2c20 4e3d 4e2c  ample(self, N=N,
-00010150: 2066 696c 7465 723d 6669 6c74 6572 2c20   filter=filter, 
-00010160: 7365 6564 3d73 6565 6429 0d0a 0d0a 2020  seed=seed)....  
-00010170: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
-00010180: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000101a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000101b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
-000101c0: 2020 2020 6465 6620 6475 706c 6963 6174      def duplicat
-000101d0: 6564 2873 656c 662c 206b 6565 703d 2266  ed(self, keep="f
-000101e0: 6972 7374 222c 2068 6967 685f 756e 6971  irst", high_uniq
-000101f0: 7565 3d46 616c 7365 2920 2d3e 2046 6173  ue=False) -> Fas
-00010200: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
-00010210: 2022 2222 0d0a 2020 2020 2020 2020 5265   """..        Re
-00010220: 7475 726e 2061 2062 6f6f 6c65 616e 2060  turn a boolean `
-00010230: 4661 7374 4172 7261 7960 2069 6e64 6963  FastArray` indic
-00010240: 6174 696e 6720 6054 7275 6560 2066 6f72  ating `True` for
-00010250: 2064 7570 6c69 6361 7465 2069 7465 6d73   duplicate items
-00010260: 2069 6e20 7468 6520 696e 7075 7420 6172   in the input ar
-00010270: 7261 792e 0d0a 0d0a 2020 2020 2020 2020  ray.....        
-00010280: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
-00010290: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
-000102a0: 2020 2020 2020 2020 6b65 6570 203a 207b          keep : {
-000102b0: 2766 6972 7374 272c 2027 6c61 7374 272c  'first', 'last',
-000102c0: 2027 4661 6c73 6527 7d2c 2064 6566 6175   'False'}, defau
-000102d0: 6c74 2027 6669 7273 7427 0d0a 2020 2020  lt 'first'..    
-000102e0: 2020 2020 2020 2020 2d20 2766 6972 7374          - 'first
-000102f0: 2720 3a20 4d61 726b 2065 6163 6820 6475  ' : Mark each du
-00010300: 706c 6963 6174 6520 6173 2060 5472 7565  plicate as `True
-00010310: 6020 6578 6365 7074 2066 6f72 2074 6865  ` except for the
-00010320: 2066 6972 7374 206f 6363 7572 7265 6e63   first occurrenc
-00010330: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-00010340: 2d20 276c 6173 7427 203a 204d 6172 6b20  - 'last' : Mark 
-00010350: 6561 6368 2064 7570 6c69 6361 7465 2061  each duplicate a
-00010360: 7320 6054 7275 6560 2065 7863 6570 7420  s `True` except 
-00010370: 666f 7220 7468 6520 6c61 7374 206f 6363  for the last occ
-00010380: 7572 7265 6e63 652e 0d0a 2020 2020 2020  urrence...      
-00010390: 2020 2020 2020 2d20 2746 616c 7365 2720        - 'False' 
-000103a0: 3a20 4d61 726b 2061 6c6c 2064 7570 6c69  : Mark all dupli
-000103b0: 6361 7465 7320 6173 2060 5472 7565 602e  cates as `True`.
-000103c0: 0d0a 2020 2020 2020 2020 6869 6768 5f75  ..        high_u
-000103d0: 6e69 7175 6520 3a20 626f 6f6c 2c20 6465  nique : bool, de
-000103e0: 6661 756c 7420 6046 616c 7365 6020 2868  fault `False` (h
-000103f0: 6173 6869 6e67 290d 0a20 2020 2020 2020  ashing)..       
-00010400: 2020 2020 2043 6f6e 7472 6f6c 7320 7768       Controls wh
-00010410: 6574 6865 7220 7468 6520 6675 6e63 7469  ether the functi
-00010420: 6f6e 2075 7365 7320 6861 7368 696e 672d  on uses hashing-
-00010430: 206f 7220 736f 7274 696e 672d 6261 7365   or sorting-base
-00010440: 6420 6c6f 6769 6320 746f 2066 696e 6420  d logic to find 
-00010450: 756e 6971 7565 2076 616c 7565 7320 696e  unique values in
-00010460: 2074 6865 2069 6e70 7574 2061 7272 6179   the input array
-00010470: 2e0d 0a20 2020 2020 2020 2020 2020 2049  ...            I
-00010480: 6620 796f 7572 2064 6174 6120 6861 7320  f your data has 
-00010490: 6120 6869 6768 2070 726f 706f 7274 696f  a high proportio
-000104a0: 6e20 6f66 2075 6e69 7175 6520 7661 6c75  n of unique valu
-000104b0: 6573 2c20 7365 7420 746f 2060 5472 7565  es, set to `True
-000104c0: 6020 666f 7220 6661 7374 6572 2070 6572  ` for faster per
-000104d0: 666f 726d 616e 6365 2e0d 0a0d 0a20 2020  formance.....   
-000104e0: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
-000104f0: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-00010500: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-00010510: 0d0a 2020 2020 2020 2020 2020 2020 4120  ..            A 
-00010520: 626f 6f6c 6561 6e20 6046 6173 7441 7272  boolean `FastArr
-00010530: 6179 6020 696e 6469 6361 7469 6e67 2060  ay` indicating `
-00010540: 5472 7565 6020 666f 7220 6475 706c 6963  True` for duplic
-00010550: 6174 6520 6974 656d 7320 696e 2074 6865  ate items in the
-00010560: 2069 6e70 7574 2061 7272 6179 2e0d 0a0d   input array....
-00010570: 0a20 2020 2020 2020 2053 6565 2041 6c73  .        See Als
-00010580: 6f0d 0a20 2020 2020 2020 202d 2d2d 2d2d  o..        -----
-00010590: 2d2d 2d0d 0a20 2020 2020 2020 2046 6173  ---..        Fas
-000105a0: 7441 7272 6179 2e6e 756e 6971 7565 203a  tArray.nunique :
-000105b0: 2052 6574 7572 6e73 2074 6865 206e 756d   Returns the num
-000105c0: 6265 7220 6f66 2075 6e69 7175 6520 7661  ber of unique va
-000105d0: 6c75 6573 2069 6e20 616e 2061 7272 6179  lues in an array
-000105e0: 2e0d 0a20 2020 2020 2020 202e 4461 7461  ...        .Data
-000105f0: 7365 742e 6475 706c 6963 6174 6564 203a  set.duplicated :
-00010600: 2052 6574 7572 6e73 2061 2062 6f6f 6c65   Returns a boole
-00010610: 616e 2060 4661 7374 4172 7261 7960 2069  an `FastArray` i
-00010620: 6e64 6963 6174 696e 6720 6054 7275 6560  ndicating `True`
-00010630: 2066 6f72 2064 7570 6c69 6361 7465 2072   for duplicate r
-00010640: 6f77 732e 0d0a 0d0a 2020 2020 2020 2020  ows.....        
-00010650: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
-00010660: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-00010670: 2020 2020 4578 636c 7564 6520 7468 6520      Exclude the 
-00010680: 6669 7273 7420 6f63 6375 7272 656e 6365  first occurrence
-00010690: 206f 6620 6561 6368 2064 7570 6c69 6361   of each duplica
-000106a0: 7465 2028 7573 6520 7468 6520 6465 6661  te (use the defa
-000106b0: 756c 7420 606b 6565 7060 2076 616c 7565  ult `keep` value
-000106c0: 293a 0d0a 0d0a 2020 2020 2020 2020 3e3e  ):....        >>
-000106d0: 3e20 6120 3d20 7274 2e46 4128 5b31 2c20  > a = rt.FA([1, 
-000106e0: 322c 2033 2c20 342c 2032 2c20 372c 2038  2, 3, 4, 2, 7, 8
-000106f0: 2c20 382c 2033 5d29 0d0a 2020 2020 2020  , 8, 3])..      
-00010700: 2020 3e3e 3e20 610d 0a20 2020 2020 2020    >>> a..       
-00010710: 2046 6173 7441 7272 6179 285b 312c 2032   FastArray([1, 2
-00010720: 2c20 332c 2034 2c20 322c 2037 2c20 382c  , 3, 4, 2, 7, 8,
-00010730: 2038 2c20 335d 290d 0a20 2020 2020 2020   8, 3])..       
-00010740: 203e 3e3e 2061 2e64 7570 6c69 6361 7465   >>> a.duplicate
-00010750: 6428 290d 0a20 2020 2020 2020 2046 6173  d()..        Fas
-00010760: 7441 7272 6179 285b 4661 6c73 652c 2046  tArray([False, F
-00010770: 616c 7365 2c20 4661 6c73 652c 2046 616c  alse, False, Fal
-00010780: 7365 2c20 2054 7275 652c 2046 616c 7365  se,  True, False
-00010790: 2c20 4661 6c73 652c 2020 5472 7565 2c20  , False,  True, 
-000107a0: 2054 7275 655d 290d 0a0d 0a20 2020 2020   True])....     
-000107b0: 2020 204d 6172 6b20 616c 6c20 6475 706c     Mark all dupl
-000107c0: 6963 6174 6573 3a0d 0a0d 0a20 2020 2020  icates:....     
-000107d0: 2020 203e 3e3e 2061 2e64 7570 6c69 6361     >>> a.duplica
-000107e0: 7465 6428 6b65 6570 3d46 616c 7365 290d  ted(keep=False).
-000107f0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-00010800: 6179 285b 4661 6c73 652c 2020 5472 7565  ay([False,  True
-00010810: 2c20 2054 7275 652c 2046 616c 7365 2c20  ,  True, False, 
-00010820: 2054 7275 652c 2046 616c 7365 2c20 2054   True, False,  T
-00010830: 7275 652c 2020 5472 7565 2c20 2054 7275  rue,  True,  Tru
-00010840: 655d 290d 0a20 2020 2020 2020 2022 2222  e])..        """
-00010850: 0d0a 2020 2020 2020 2020 6172 7220 3d20  ..        arr = 
-00010860: 7365 6c66 0d0a 0d0a 2020 2020 2020 2020  self....        
-00010870: 6966 206b 6565 7020 3d3d 2022 6c61 7374  if keep == "last
-00010880: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
-00010890: 6172 7220 3d20 6172 725b 3a3a 2d31 5d2e  arr = arr[::-1].
-000108a0: 636f 7079 2829 0d0a 0d0a 2020 2020 2020  copy()....      
-000108b0: 2020 656c 6966 206b 6565 7020 6973 206e    elif keep is n
-000108c0: 6f74 2046 616c 7365 2061 6e64 206b 6565  ot False and kee
-000108d0: 7020 213d 2022 6669 7273 7422 3a0d 0a20  p != "first":.. 
-000108e0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-000108f0: 2056 616c 7565 4572 726f 7228 6627 6b65   ValueError(f'ke
-00010900: 6570 206d 7573 7420 6265 2065 6974 6865  ep must be eithe
-00010910: 7220 2266 6972 7374 222c 2022 6c61 7374  r "first", "last
-00010920: 2220 6f72 2046 616c 7365 2729 0d0a 0d0a  " or False')....
-00010930: 2020 2020 2020 2020 2320 6372 6561 7465          # create
-00010940: 2061 6e20 7265 7475 726e 2061 7272 6179   an return array
-00010950: 2061 6c6c 2073 6574 2074 6f20 5472 7565   all set to True
-00010960: 0d0a 2020 2020 2020 2020 7265 7375 6c74  ..        result
-00010970: 203d 206f 6e65 7328 6c65 6e28 6172 7229   = ones(len(arr)
-00010980: 2c20 6474 7970 653d 6e70 2e62 6f6f 6c5f  , dtype=np.bool_
-00010990: 290d 0a0d 0a20 2020 2020 2020 2067 203d  )....        g =
-000109a0: 2047 726f 7570 696e 6728 6172 722e 5f66   Grouping(arr._f
-000109b0: 6120 6966 2068 6173 6174 7472 2861 7272  a if hasattr(arr
-000109c0: 2c20 225f 6661 2229 2065 6c73 6520 6172  , "_fa") else ar
-000109d0: 722c 206c 6578 3d68 6967 685f 756e 6971  r, lex=high_uniq
-000109e0: 7565 290d 0a0d 0a20 2020 2020 2020 2069  ue)....        i
-000109f0: 6620 6b65 6570 2069 7320 4661 6c73 653a  f keep is False:
-00010a00: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00010a10: 7365 6172 6368 2066 6f72 2067 726f 7570  search for group
-00010a20: 7320 7769 7468 2061 2063 6f75 6e74 206f  s with a count o
-00010a30: 6620 310d 0a20 2020 2020 2020 2020 2020  f 1..           
-00010a40: 2072 6573 756c 745b 672e 6966 6972 7374   result[g.ifirst
-00010a50: 6b65 795b 672e 6e63 6f75 6e74 6772 6f75  key[g.ncountgrou
-00010a60: 705b 313a 5d20 3d3d 2031 5d5d 203d 2046  p[1:] == 1]] = F
-00010a70: 616c 7365 0d0a 2020 2020 2020 2020 656c  alse..        el
-00010a80: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00010a90: 2072 6573 756c 745b 672e 6966 6972 7374   result[g.ifirst
-00010aa0: 6b65 795d 203d 2046 616c 7365 0d0a 0d0a  key] = False....
-00010ab0: 2020 2020 2020 2020 2020 2020 6966 206b              if k
-00010ac0: 6565 7020 3d3d 2022 6c61 7374 223a 0d0a  eep == "last":..
-00010ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010ae0: 7265 7375 6c74 203d 2072 6573 756c 745b  result = result[
-00010af0: 3a3a 2d31 5d2e 636f 7079 2829 0d0a 2020  ::-1].copy()..  
-00010b00: 2020 2020 2020 7265 7475 726e 2072 6573        return res
-00010b10: 756c 740d 0a0d 0a20 2020 2023 202d 2d2d  ult....    # ---
-00010b20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010b30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010b50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010b60: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
-00010b70: 2073 6176 6528 0d0a 2020 2020 2020 2020   save(..        
-00010b80: 7365 6c66 2c0d 0a20 2020 2020 2020 2066  self,..        f
-00010b90: 696c 6570 6174 683a 2055 6e69 6f6e 5b73  ilepath: Union[s
-00010ba0: 7472 2c20 6f73 2e50 6174 684c 696b 655d  tr, os.PathLike]
-00010bb0: 2c0d 0a20 2020 2020 2020 2073 6861 7265  ,..        share
-00010bc0: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
-00010bd0: 3d20 4e6f 6e65 2c0d 0a20 2020 2020 2020  = None,..       
-00010be0: 2063 6f6d 7072 6573 733a 2062 6f6f 6c20   compress: bool 
-00010bf0: 3d20 5472 7565 2c0d 0a20 2020 2020 2020  = True,..       
-00010c00: 206f 7665 7277 7269 7465 3a20 626f 6f6c   overwrite: bool
-00010c10: 203d 2054 7275 652c 0d0a 2020 2020 2020   = True,..      
-00010c20: 2020 6e61 6d65 3a20 4f70 7469 6f6e 616c    name: Optional
-00010c30: 5b73 7472 5d20 3d20 4e6f 6e65 2c0d 0a20  [str] = None,.. 
-00010c40: 2020 2029 202d 3e20 4e6f 6e65 3a0d 0a20     ) -> None:.. 
-00010c50: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00010c60: 2020 2020 5361 7665 2061 2073 696e 676c      Save a singl
-00010c70: 6520 6172 7261 7920 696e 2061 6e20 2e73  e array in an .s
-00010c80: 6473 2066 696c 652e 0d0a 0d0a 2020 2020  ds file.....    
-00010c90: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
-00010ca0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-00010cb0: 2d2d 0d0a 2020 2020 2020 2020 6669 6c65  --..        file
-00010cc0: 7061 7468 3a20 7374 7220 6f72 206f 732e  path: str or os.
-00010cd0: 5061 7468 4c69 6b65 0d0a 2020 2020 2020  PathLike..      
-00010ce0: 2020 7368 6172 6520 3a20 7374 722c 206f    share : str, o
-00010cf0: 7074 696f 6e61 6c2c 2064 6566 6175 6c74  ptional, default
-00010d00: 204e 6f6e 650d 0a20 2020 2020 2020 2063   None..        c
-00010d10: 6f6d 7072 6573 7320 3a20 626f 6f6c 2c20  ompress : bool, 
-00010d20: 6465 6661 756c 7420 5472 7565 0d0a 2020  default True..  
-00010d30: 2020 2020 2020 6f76 6572 7772 6974 6520        overwrite 
-00010d40: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-00010d50: 5472 7565 0d0a 2020 2020 2020 2020 6e61  True..        na
-00010d60: 6d65 203a 2073 7472 2c20 6f70 7469 6f6e  me : str, option
-00010d70: 616c 2c20 6465 6661 756c 7420 4e6f 6e65  al, default None
-00010d80: 0d0a 0d0a 2020 2020 2020 2020 5365 6520  ....        See 
-00010d90: 416c 736f 0d0a 2020 2020 2020 2020 2d2d  Also..        --
-00010da0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00010db0: 7274 5f73 6473 2e73 6176 655f 7364 730d  rt_sds.save_sds.
-00010dc0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00010dd0: 2020 2020 2020 7361 7665 5f73 6473 2866        save_sds(f
-00010de0: 696c 6570 6174 682c 2073 656c 662c 2073  ilepath, self, s
-00010df0: 6861 7265 3d73 6861 7265 2c20 636f 6d70  hare=share, comp
-00010e00: 7265 7373 3d63 6f6d 7072 6573 732c 206f  ress=compress, o
-00010e10: 7665 7277 7269 7465 3d6f 7665 7277 7269  verwrite=overwri
-00010e20: 7465 2c20 6e61 6d65 3d6e 616d 6529 0d0a  te, name=name)..
-00010e30: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
-00010e40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010e60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010e70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010e80: 2d2d 0d0a 2020 2020 6465 6620 6669 6c74  --..    def filt
-00010e90: 6572 2873 656c 662c 2066 696c 7465 723a  er(self, filter:
-00010ea0: 206e 7074 2e41 7272 6179 4c69 6b65 2920   npt.ArrayLike) 
-00010eb0: 2d3e 2022 4661 7374 4172 7261 7922 3a0d  -> "FastArray":.
-00010ec0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00010ed0: 2020 2020 2020 5265 7475 726e 2061 2063        Return a c
-00010ee0: 6f70 7920 6f66 2074 6865 2060 4661 7374  opy of the `Fast
-00010ef0: 4172 7261 7960 2063 6f6e 7461 696e 696e  Array` containin
-00010f00: 6720 6f6e 6c79 2074 6865 2065 6c65 6d65  g only the eleme
-00010f10: 6e74 7320 7468 6174 206d 6565 7420 7468  nts that meet th
-00010f20: 6520 7370 6563 6966 6965 640d 0a20 2020  e specified..   
-00010f30: 2020 2020 2063 6f6e 6469 7469 6f6e 2e0d       condition..
-00010f40: 0a0d 0a20 2020 2020 2020 2050 6172 616d  ...        Param
-00010f50: 6574 6572 730d 0a20 2020 2020 2020 202d  eters..        -
-00010f60: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020  ---------..     
-00010f70: 2020 2066 696c 7465 7220 3a20 6172 7261     filter : arra
-00010f80: 793a 2066 616e 6379 2069 6e64 6578 206f  y: fancy index o
-00010f90: 7220 426f 6f6c 6561 6e20 6d61 736b 0d0a  r Boolean mask..
-00010fa0: 2020 2020 2020 2020 2020 2020 4120 6661              A fa
-00010fb0: 6e63 7920 696e 6465 7820 7370 6563 6966  ncy index specif
-00010fc0: 6965 7320 626f 7468 2074 6865 2064 6573  ies both the des
-00010fd0: 6972 6564 2065 6c65 6d65 6e74 7320 616e  ired elements an
-00010fe0: 6420 7468 6569 7220 6f72 6465 7220 696e  d their order in
-00010ff0: 2074 6865 0d0a 2020 2020 2020 2020 2020   the..          
-00011000: 2020 7265 7475 726e 6564 2060 4661 7374    returned `Fast
-00011010: 4172 7261 7960 2e20 5768 656e 2061 2042  Array`. When a B
-00011020: 6f6f 6c65 616e 206d 6173 6b20 6973 2070  oolean mask is p
-00011030: 6173 7365 642c 206f 6e6c 7920 726f 7773  assed, only rows
-00011040: 2074 6861 7420 6d65 6574 2074 6865 0d0a   that meet the..
-00011050: 2020 2020 2020 2020 2020 2020 7370 6563              spec
-00011060: 6966 6965 6420 636f 6e64 6974 696f 6e20  ified condition 
-00011070: 6172 6520 696e 2074 6865 2072 6574 7572  are in the retur
-00011080: 6e65 6420 6046 6173 7441 7272 6179 602e  ned `FastArray`.
-00011090: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
-000110a0: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
-000110b0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6046  ----..        `F
-000110c0: 6173 7441 7272 6179 600d 0a0d 0a20 2020  astArray`....   
-000110d0: 2020 2020 204e 6f74 6573 0d0a 2020 2020       Notes..    
-000110e0: 2020 2020 2d2d 2d2d 2d0d 0a20 2020 2020      -----..     
-000110f0: 2020 2049 6620 796f 7520 7761 6e74 2074     If you want t
-00011100: 6f20 7065 7266 6f72 6d20 616e 206f 7065  o perform an ope
-00011110: 7261 7469 6f6e 206f 6e20 6120 6669 6c74  ration on a filt
-00011120: 6572 6564 2046 6173 7441 7272 6179 2c20  ered FastArray, 
-00011130: 6974 2773 206d 6f72 6520 6566 6669 6369  it's more effici
-00011140: 656e 7420 746f 0d0a 2020 2020 2020 2020  ent to..        
-00011150: 7065 7266 6f72 6d20 7468 6520 6f70 6572  perform the oper
-00011160: 6174 696f 6e20 7573 696e 6720 7468 6520  ation using the 
-00011170: 6060 6669 6c74 6572 6060 206b 6579 776f  ``filter`` keywo
-00011180: 7264 2061 7267 756d 656e 742e 2046 6f72  rd argument. For
-00011190: 2065 7861 6d70 6c65 2c0d 0a20 2020 2020   example,..     
-000111a0: 2020 2060 606d 795f 6661 2e73 756d 2866     ``my_fa.sum(f
-000111b0: 696c 7465 7220 3d20 626f 6f6c 6561 6e5f  ilter = boolean_
-000111c0: 6d61 736b 2960 602e 0d0a 0d0a 2020 2020  mask)``.....    
-000111d0: 2020 2020 4578 616d 706c 6573 0d0a 2020      Examples..  
-000111e0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-000111f0: 2020 2020 2020 2020 4372 6561 7465 2061          Create a
-00011200: 2060 4661 7374 4172 7261 7960 3a0d 0a0d   `FastArray`:...
-00011210: 0a20 2020 2020 2020 203e 3e3e 2066 6120  .        >>> fa 
-00011220: 3d20 7274 2e46 6173 7441 7272 6179 286e  = rt.FastArray(n
-00011230: 702e 6c69 6e73 7061 6365 2830 2c20 312c  p.linspace(0, 1,
-00011240: 2031 3129 290d 0a20 2020 2020 2020 203e   11))..        >
-00011250: 3e3e 2066 610d 0a20 2020 2020 2020 2046  >> fa..        F
-00011260: 6173 7441 7272 6179 285b 302e 202c 2030  astArray([0. , 0
-00011270: 2e31 2c20 302e 322c 2030 2e33 2c20 302e  .1, 0.2, 0.3, 0.
-00011280: 342c 2030 2e35 2c20 302e 362c 2030 2e37  4, 0.5, 0.6, 0.7
-00011290: 2c20 302e 382c 2030 2e39 2c20 312e 205d  , 0.8, 0.9, 1. ]
-000112a0: 290d 0a0d 0a20 2020 2020 2020 2046 696c  )....        Fil
-000112b0: 7465 7220 7573 696e 6720 6120 6661 6e63  ter using a fanc
-000112c0: 7920 696e 6465 783a 0d0a 0d0a 2020 2020  y index:....    
-000112d0: 2020 2020 3e3e 3e20 6661 2e66 696c 7465      >>> fa.filte
-000112e0: 7228 5b35 2c20 302c 2031 5d29 0d0a 2020  r([5, 0, 1])..  
-000112f0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
-00011300: 5b30 2e35 2c20 302e 202c 2030 2e31 5d29  [0.5, 0. , 0.1])
-00011310: 0d0a 0d0a 2020 2020 2020 2020 4669 6c74  ....        Filt
-00011320: 6572 2075 7369 6e67 2061 2063 6f6e 6469  er using a condi
-00011330: 7469 6f6e 2074 6861 7420 6372 6561 7465  tion that create
-00011340: 7320 6120 426f 6f6c 6561 6e20 6d61 736b  s a Boolean mask
-00011350: 2061 7272 6179 3a0d 0a0d 0a20 2020 2020   array:....     
-00011360: 2020 203e 3e3e 2066 612e 6669 6c74 6572     >>> fa.filter
-00011370: 2866 6120 3e20 302e 3735 290d 0a20 2020  (fa > 0.75)..   
-00011380: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
-00011390: 302e 382c 2030 2e39 2c20 312e 205d 290d  0.8, 0.9, 1. ]).
-000113a0: 0a0d 0a20 2020 2020 2020 2022 2222 0d0a  ...        """..
-000113b0: 0d0a 2020 2020 2020 2020 2320 6e6f 726d  ..        # norm
-000113c0: 616c 697a 6520 726f 7766 696c 7465 720d  alize rowfilter.
-000113d0: 0a20 2020 2020 2020 2069 6620 6e70 2e69  .        if np.i
-000113e0: 7373 6361 6c61 7228 6669 6c74 6572 293a  sscalar(filter):
-000113f0: 0d0a 2020 2020 2020 2020 2020 2020 6669  ..            fi
-00011400: 6c74 6572 203d 206e 702e 6173 616e 7961  lter = np.asanya
-00011410: 7272 6179 285b 6669 6c74 6572 5d29 0d0a  rray([filter])..
-00011420: 2020 2020 2020 2020 656c 6966 206e 6f74          elif not
-00011430: 2069 7369 6e73 7461 6e63 6528 6669 6c74   isinstance(filt
-00011440: 6572 2c20 6e70 2e6e 6461 7272 6179 293a  er, np.ndarray):
-00011450: 0d0a 2020 2020 2020 2020 2020 2020 6669  ..            fi
-00011460: 6c74 6572 203d 206e 702e 6173 616e 7961  lter = np.asanya
-00011470: 7272 6179 2866 696c 7465 7229 0d0a 0d0a  rray(filter)....
-00011480: 2020 2020 2020 2020 2320 456e 7375 7265          # Ensure
-00011490: 2066 696c 7465 7220 6973 2062 6f6f 6c65   filter is boole
-000114a0: 616e 206f 7220 696e 7465 6765 7273 0d0a  an or integers..
-000114b0: 2020 2020 2020 2020 6966 206e 6f74 2028          if not (
-000114c0: 6e70 2e69 7373 7562 6474 7970 6528 6669  np.issubdtype(fi
-000114d0: 6c74 6572 2e64 7479 7065 2c20 6e70 2e69  lter.dtype, np.i
-000114e0: 6e74 6567 6572 2920 6f72 206e 702e 6973  nteger) or np.is
-000114f0: 7375 6264 7479 7065 2866 696c 7465 722e  subdtype(filter.
-00011500: 6474 7970 652c 2062 6f6f 6c29 293a 0d0a  dtype, bool)):..
-00011510: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00011520: 6520 5479 7065 4572 726f 7228 6622 5468  e TypeError(f"Th
-00011530: 6520 6669 6c74 6572 206d 7573 7420 6265  e filter must be
-00011540: 2061 2062 6f6f 6c65 616e 206d 6173 6b20   a boolean mask 
-00011550: 6f72 2069 6e74 6567 6572 2066 616e 6379  or integer fancy
-00011560: 2069 6e64 6578 2e22 290d 0a0d 0a20 2020   index.")....   
-00011570: 2020 2020 2023 2045 6e73 7572 6520 6066       # Ensure `f
-00011580: 696c 7465 7260 2069 7320 7468 6520 7269  ilter` is the ri
-00011590: 6768 7420 7368 6170 652e 0d0a 2020 2020  ght shape...    
-000115a0: 2020 2020 2320 556e 6c69 6b65 2060 4461      # Unlike `Da
-000115b0: 7461 7365 742e 6669 6c74 6572 6020 7765  taset.filter` we
-000115c0: 2064 6f6e 2774 2063 6f6e 7665 7274 2062   don't convert b
-000115d0: 6f6f 6c20 746f 2066 616e 6379 2c20 2062  ool to fancy,  b
-000115e0: 6563 6175 7365 2077 6527 7265 206e 6f74  ecause we're not
-000115f0: 2072 6575 7369 6e67 2074 6865 2066 616e   reusing the fan
-00011600: 6379 2069 6e64 6963 6573 2e0d 0a20 2020  cy indices...   
-00011610: 2020 2020 2069 6620 6669 6c74 6572 2e6e       if filter.n
-00011620: 6469 6d20 213d 2031 3a0d 0a20 2020 2020  dim != 1:..     
-00011630: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
-00011640: 7565 4572 726f 7228 2260 4661 7374 4172  ueError("`FastAr
-00011650: 7261 792e 6669 6c74 6572 6020 6f6e 6c79  ray.filter` only
-00011660: 2061 6363 6570 7473 2031 4420 6172 7261   accepts 1D arra
-00011670: 7973 2066 6f72 2074 6865 2065 6c65 6d65  ys for the eleme
-00011680: 6e74 2073 656c 6563 746f 722f 6d61 736b  nt selector/mask
-00011690: 2e22 290d 0a20 2020 2020 2020 2023 2042  .")..        # B
-000116a0: 6f6f 6c65 616e 2061 7272 6179 206e 6565  oolean array nee
-000116b0: 6473 2074 6f20 6265 2074 6865 2072 6967  ds to be the rig
-000116c0: 6874 206c 656e 6774 6820 6173 2077 656c  ht length as wel
-000116d0: 6c2e 0d0a 2020 2020 2020 2020 6966 206e  l...        if n
-000116e0: 702e 6973 7375 6264 7479 7065 2866 696c  p.issubdtype(fil
-000116f0: 7465 722e 6474 7970 652c 2062 6f6f 6c29  ter.dtype, bool)
-00011700: 2061 6e64 2028 6c65 6e28 6669 6c74 6572   and (len(filter
-00011710: 2920 213d 2073 656c 662e 7368 6170 655b  ) != self.shape[
-00011720: 305d 293a 0d0a 2020 2020 2020 2020 2020  0]):..          
-00011730: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-00011740: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
-00011750: 2020 2020 2066 2254 6865 206c 656e 6774       f"The lengt
-00011760: 6820 6f66 2074 6865 2070 726f 7669 6465  h of the provide
-00011770: 6420 7365 6c65 6374 696f 6e20 6d61 736b  d selection mask
-00011780: 2028 7b6c 656e 2866 696c 7465 7229 7d29   ({len(filter)})
-00011790: 2064 6f65 7320 6e6f 7420 6d61 7463 6820   does not match 
-000117a0: 7468 6520 6c65 6e67 7468 206f 6620 7468  the length of th
-000117b0: 6520 4661 7374 4172 7261 7928 7b73 656c  e FastArray({sel
-000117c0: 662e 7368 6170 655b 305d 7d29 2e22 0d0a  f.shape[0]})."..
-000117d0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
-000117e0: 0a20 2020 2020 2020 2023 2050 6572 666f  .        # Perfo
-000117f0: 726d 2066 696c 7465 7220 616e 6420 7265  rm filter and re
-00011800: 7475 726e 0d0a 2020 2020 2020 2020 7265  turn..        re
-00011810: 7475 726e 2073 656c 665b 6669 6c74 6572  turn self[filter
-00011820: 5d0d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  ]....    # -----
-00011830: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011840: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011850: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011860: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011870: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2072  -----..    def r
-00011880: 6573 6861 7065 2873 656c 662c 202a 6172  eshape(self, *ar
-00011890: 6773 2c20 2a2a 6b77 6172 6773 2920 2d3e  gs, **kwargs) ->
-000118a0: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
-000118b0: 2020 2020 2072 6573 756c 7420 3d20 7375       result = su
-000118c0: 7065 7228 4661 7374 4172 7261 792c 2073  per(FastArray, s
-000118d0: 656c 6629 2e72 6573 6861 7065 282a 6172  elf).reshape(*ar
-000118e0: 6773 2c20 2a2a 6b77 6172 6773 290d 0a20  gs, **kwargs).. 
-000118f0: 2020 2020 2020 2023 2074 6869 7320 7761         # this wa
-00011900: 726e 696e 6720 6861 7070 656e 7320 746f  rning happens to
-00011910: 6f20 6d75 6368 206e 6f77 0d0a 2020 2020  o much now..    
-00011920: 2020 2020 2320 6966 2046 6173 7441 7272      # if FastArr
-00011930: 6179 2e5f 6368 6563 6b5f 6e64 696d 2872  ay._check_ndim(r
-00011940: 6573 756c 7429 2021 3d20 313a 0d0a 2020  esult) != 1:..  
-00011950: 2020 2020 2020 2320 2020 2077 6172 6e69        #    warni
-00011960: 6e67 732e 7761 726e 2846 6173 7441 7272  ngs.warn(FastArr
-00011970: 6179 2e57 6172 6e69 6e67 4469 6374 5b22  ay.WarningDict["
-00011980: 6d75 6c74 6970 6c65 5f64 696d 656e 7369  multiple_dimensi
-00011990: 6f6e 7322 5d2e 666f 726d 6174 2872 6573  ons"].format(res
-000119a0: 756c 742e 7368 6170 6529 290d 0a0d 0a20  ult.shape)).... 
-000119b0: 2020 2020 2020 2069 6620 6e6f 7420 2872         if not (r
-000119c0: 6573 756c 742e 666c 6167 732e 635f 636f  esult.flags.c_co
-000119d0: 6e74 6967 756f 7573 206f 7220 7265 7375  ntiguous or resu
-000119e0: 6c74 2e66 6c61 6773 2e66 5f63 6f6e 7469  lt.flags.f_conti
-000119f0: 6775 6f75 7329 3a0d 0a20 2020 2020 2020  guous):..       
-00011a00: 2020 2020 2023 2066 6978 2073 7472 6964       # fix strid
-00011a10: 6573 2070 726f 626c 656d 0d0a 2020 2020  es problem..    
-00011a20: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00011a30: 6573 756c 742e 636f 7079 2829 0d0a 2020  esult.copy()..  
-00011a40: 2020 2020 2020 7265 7475 726e 2072 6573        return res
-00011a50: 756c 740d 0a0d 0a20 2020 2023 202d 2d2d  ult....    # ---
-00011a60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011a70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011a80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011a90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011aa0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
-00011ab0: 2072 6570 6561 7428 7365 6c66 2c20 7265   repeat(self, re
-00011ac0: 7065 6174 732c 2061 7869 733d 4e6f 6e65  peats, axis=None
-00011ad0: 2920 2d3e 2046 6173 7441 7272 6179 3a0d  ) -> FastArray:.
-00011ae0: 0a20 2020 2020 2020 2022 2222 5365 6520  .        """See 
-00011af0: 6072 6970 7461 626c 652e 7265 7065 6174  `riptable.repeat
-00011b00: 602e 2222 220d 0a20 2020 2020 2020 2072  `."""..        r
-00011b10: 6574 7572 6e20 7265 7065 6174 2873 656c  eturn repeat(sel
-00011b20: 662c 2072 6570 6561 7473 2c20 6178 6973  f, repeats, axis
-00011b30: 3d61 7869 7329 0d0a 0d0a 2020 2020 2320  =axis)....    # 
-00011b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011b50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011b60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011b70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011b80: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-00011b90: 6465 6620 7469 6c65 2873 656c 662c 2072  def tile(self, r
-00011ba0: 6570 7329 202d 3e20 4661 7374 4172 7261  eps) -> FastArra
-00011bb0: 793a 0d0a 2020 2020 2020 2020 2222 2253  y:..        """S
-00011bc0: 6565 2060 7269 7074 6162 6c65 2e74 696c  ee `riptable.til
-00011bd0: 6560 2e22 2222 0d0a 2020 2020 2020 2020  e`."""..        
-00011be0: 7265 7475 726e 2074 696c 6528 7365 6c66  return tile(self
-00011bf0: 2c20 7265 7073 290d 0a0d 0a20 2020 2023  , reps)....    #
-00011c00: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
-00011c10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011c20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011c30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011c40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
-00011c50: 2064 6566 205f 6b77 6172 675f 6368 6563   def _kwarg_chec
-00011c60: 6b28 7365 6c66 2c20 2a61 7267 732c 202a  k(self, *args, *
-00011c70: 2a6b 7761 7267 7329 3a0d 0a20 2020 2020  *kwargs):..     
-00011c80: 2020 2023 2077 6520 6861 6e64 6c65 2064     # we handle d
-00011c90: 7479 7065 0d0a 2020 2020 2020 2020 6966  type..        if
-00011ca0: 2028 2264 646f 6622 2069 6e20 6b77 6172   ("ddof" in kwar
-00011cb0: 6773 2061 6e64 206b 7761 7267 735b 2264  gs and kwargs["d
-00011cc0: 646f 6622 5d20 213d 2031 2920 6f72 2022  dof"] != 1) or "
-00011cd0: 6178 6973 2220 696e 206b 7761 7267 7320  axis" in kwargs 
-00011ce0: 6f72 2022 6b65 6570 6469 6d73 2220 696e  or "keepdims" in
-00011cf0: 206b 7761 7267 733a 0d0a 2020 2020 2020   kwargs:..      
-00011d00: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
-00011d10: 650d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  e....    # -----
-00011d20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011d30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011d40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011d50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011d60: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 205f  -----..    def _
-00011d70: 7265 6475 6365 5f63 6865 636b 2873 656c  reduce_check(sel
-00011d80: 662c 2072 6564 7563 6546 756e 633a 2052  f, reduceFunc: R
-00011d90: 4544 5543 455f 4655 4e43 5449 4f4e 532c  EDUCE_FUNCTIONS,
-00011da0: 206e 7046 756e 632c 202a 6172 6773 2c20   npFunc, *args, 
-00011db0: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
-00011dc0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00011dd0: 2041 7267 323a 206e 7046 756e 6320 7061   Arg2: npFunc pa
-00011de0: 7373 2069 6e20 4e6f 6e65 2069 6620 6e6f  ss in None if no
-00011df0: 206e 756d 7079 2065 7175 6976 616c 656e   numpy equivalen
-00011e00: 7420 6675 6e63 7469 6f6e 0d0a 2020 2020  t function..    
-00011e10: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00011e20: 2069 6620 6e70 4675 6e63 2069 7320 6e6f   if npFunc is no
-00011e30: 7420 4e6f 6e65 2061 6e64 2028 7365 6c66  t None and (self
-00011e40: 2e5f 6b77 6172 675f 6368 6563 6b28 2a61  ._kwarg_check(*a
-00011e50: 7267 732c 202a 2a6b 7761 7267 7329 206f  rgs, **kwargs) o
-00011e60: 7220 6c65 6e28 7365 6c66 2e73 6861 7065  r len(self.shape
-00011e70: 2920 213d 2031 293a 0d0a 2020 2020 2020  ) != 1):..      
-00011e80: 2020 2020 2020 2320 544f 444f 3a20 6164        # TODO: ad
-00011e90: 6420 746f 206d 6174 6820 6c65 6467 6572  d to math ledger
-00011ea0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00011eb0: 7365 7420 6464 6f66 3d31 2069 6620 4e4f  set ddof=1 if NO
-00011ec0: 5420 7365 7420 7768 6963 6820 6973 2046  T set which is F
-00011ed0: 6173 7441 7272 6179 2064 6566 6175 6c74  astArray default
-00011ee0: 2074 6f20 6d61 7463 6820 6d61 746c 6162   to match matlab
-00011ef0: 2f70 616e 6461 730d 0a20 2020 2020 2020  /pandas..       
-00011f00: 2020 2020 2069 6620 2264 646f 6622 206e       if "ddof" n
-00011f10: 6f74 2069 6e20 6b77 6172 6773 2061 6e64  ot in kwargs and
-00011f20: 2072 6564 7563 6546 756e 6320 696e 205b   reduceFunc in [
-00011f30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00011f40: 2020 5245 4455 4345 5f46 554e 4354 494f    REDUCE_FUNCTIO
-00011f50: 4e53 2e52 4544 5543 455f 5641 522c 0d0a  NS.REDUCE_VAR,..
-00011f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f70: 5245 4455 4345 5f46 554e 4354 494f 4e53  REDUCE_FUNCTIONS
-00011f80: 2e52 4544 5543 455f 4e41 4e56 4152 2c0d  .REDUCE_NANVAR,.
-00011f90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011fa0: 2052 4544 5543 455f 4655 4e43 5449 4f4e   REDUCE_FUNCTION
-00011fb0: 532e 5245 4455 4345 5f53 5444 2c0d 0a20  S.REDUCE_STD,.. 
-00011fc0: 2020 2020 2020 2020 2020 2020 2020 2052                 R
-00011fd0: 4544 5543 455f 4655 4e43 5449 4f4e 532e  EDUCE_FUNCTIONS.
-00011fe0: 5245 4455 4345 5f4e 414e 5354 442c 0d0a  REDUCE_NANSTD,..
-00011ff0: 2020 2020 2020 2020 2020 2020 5d3a 0d0a              ]:..
-00012000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012010: 6b77 6172 6773 5b22 6464 6f66 225d 203d  kwargs["ddof"] =
-00012020: 2031 0d0a 0d0a 2020 2020 2020 2020 2020   1....          
-00012030: 2020 7265 7375 6c74 203d 206e 7046 756e    result = npFun
-00012040: 6328 7365 6c66 2e5f 6e70 2c20 2a61 7267  c(self._np, *arg
-00012050: 732c 202a 2a6b 7761 7267 7329 0d0a 2020  s, **kwargs)..  
-00012060: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00012070: 2072 6573 756c 740d 0a0d 0a20 2020 2020   result....     
-00012080: 2020 2072 6573 756c 7420 3d20 5479 7065     result = Type
-00012090: 5265 6769 7374 6572 2e4d 6174 684c 6564  Register.MathLed
-000120a0: 6765 722e 5f52 4544 5543 4528 7365 6c66  ger._REDUCE(self
-000120b0: 2c20 7265 6475 6365 4675 6e63 290d 0a0d  , reduceFunc)...
-000120c0: 0a20 2020 2020 2020 2023 2049 7427 7320  .        # It's 
-000120d0: 706f 7373 6962 6c65 2074 6865 7265 2077  possible there w
-000120e0: 6173 206e 6f20 7265 7375 6c74 2072 6574  as no result ret
-000120f0: 7572 6e65 6420 6672 6f6d 2074 6865 2072  urned from the r
-00012100: 6564 7563 7469 6f6e 2066 756e 6374 696f  eduction functio
-00012110: 6e3b 0d0a 2020 2020 2020 2020 2320 652e  n;..        # e.
-00012120: 672e 2069 6620 7468 6520 696e 7075 7420  g. if the input 
-00012130: 7761 7320 656d 7074 792e 2049 6620 7468  was empty. If th
-00012140: 6520 6675 6e63 7469 6f6e 2062 6569 6e67  e function being
-00012150: 2063 616c 6c65 6420 6973 2077 656c 6c2d   called is well-
-00012160: 6465 6669 6e65 640d 0a20 2020 2020 2020  defined..       
-00012170: 2023 2066 6f72 2065 6d70 7479 206c 6973   # for empty lis
-00012180: 7473 202d 2d20 692e 652e 2069 7420 6973  ts -- i.e. it is
-00012190: 2061 2072 6564 7563 7469 6f6e 206f 7065   a reduction ope
-000121a0: 7261 7469 6f6e 2077 6974 6820 6120 6465  ration with a de
-000121b0: 6669 6e65 640d 0a20 2020 2020 2020 2023  fined..        #
-000121c0: 2069 6465 6e74 6974 7920 656c 656d 656e   identity elemen
-000121d0: 7420 2d2d 2073 6574 2074 6865 2072 6573  t -- set the res
-000121e0: 756c 7420 746f 2074 6865 2069 6465 6e74  ult to the ident
-000121f0: 6974 7920 656c 656d 656e 7420 736f 2074  ity element so t
-00012200: 6865 2072 6573 7420 6f66 0d0a 2020 2020  he rest of..    
-00012210: 2020 2020 2320 7468 6520 6c6f 6769 6320      # the logic 
-00012220: 6265 6c6f 7720 7769 6c6c 2077 6f72 6b20  below will work 
-00012230: 636f 7272 6563 746c 792e 0d0a 2020 2020  correctly...    
-00012240: 2020 2020 2320 4966 2074 6865 7265 2069      # If there i
-00012250: 7320 6e6f 2069 6465 6e74 6974 7920 656c  s no identity el
-00012260: 656d 656e 7420 666f 7220 7468 6973 206f  ement for this o
-00012270: 7065 7261 7469 6f6e 2c20 7261 6973 6520  peration, raise 
-00012280: 616e 2065 7863 6570 7469 6f6e 2074 6f0d  an exception to.
-00012290: 0a20 2020 2020 2020 2023 206c 6574 2074  .        # let t
-000122a0: 6865 2075 7365 7220 6b6e 6f77 3b20 7765  he user know; we
-000122b0: 2764 2072 6169 7365 2061 6e20 6578 6365  'd raise an exce
-000122c0: 7074 696f 6e20 6265 6c6f 7720 2a61 6e79  ption below *any
-000122d0: 7761 792a 2c20 616e 6420 7468 6973 2061  way*, and this a
-000122e0: 6c6c 6f77 730d 0a20 2020 2020 2020 2023  llows..        #
-000122f0: 2075 7320 746f 2070 726f 7669 6465 2074   us to provide t
-00012300: 6865 2075 7365 7220 7769 7468 2061 206d  he user with a m
-00012310: 6f72 652d 6465 7363 7269 7074 6976 652f  ore-descriptive/
-00012320: 6163 7469 6f6e 6162 6c65 2065 7272 6f72  actionable error
-00012330: 206d 6573 7361 6765 2e0d 0a20 2020 2020   message...     
-00012340: 2020 2069 6620 7265 7375 6c74 2069 7320     if result is 
-00012350: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-00012360: 2020 206f 705f 6964 656e 7469 7479 5f76     op_identity_v
-00012370: 616c 203d 2074 7970 6528 7365 6c66 292e  al = type(self).
-00012380: 5f72 6564 7563 655f 6f70 5f69 6465 6e74  _reduce_op_ident
-00012390: 6974 795f 7661 6c75 652e 6765 7428 7265  ity_value.get(re
-000123a0: 6475 6365 4675 6e63 2c20 4e6f 6e65 290d  duceFunc, None).
-000123b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000123c0: 6f70 5f69 6465 6e74 6974 795f 7661 6c20  op_identity_val 
-000123d0: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-000123e0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000123f0: 7375 6c74 203d 206f 705f 6964 656e 7469  sult = op_identi
-00012400: 7479 5f76 616c 0d0a 2020 2020 2020 2020  ty_val..        
-00012410: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00012420: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00012430: 2056 616c 7565 4572 726f 7228 0d0a 2020   ValueError(..  
-00012440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012450: 2020 6622 5265 6475 6374 696f 6e20 277b    f"Reduction '{
-00012460: 7374 7228 7265 6475 6365 4675 6e63 297d  str(reduceFunc)}
-00012470: 2720 646f 6573 206e 6f74 2068 6176 6520  ' does not have 
-00012480: 616e 2069 6465 6e74 6974 7920 656c 656d  an identity elem
-00012490: 656e 7420 736f 2063 616e 6e6f 7420 6265  ent so cannot be
-000124a0: 2063 6f6d 7075 7465 6420 6f76 6572 2061   computed over a
-000124b0: 6e20 656d 7074 7920 6172 7261 792e 220d  n empty array.".
-000124c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000124d0: 2029 0d0a 0d0a 2020 2020 2020 2020 2320   )....        # 
-000124e0: 5761 7320 616e 206f 7574 7075 7420 6474  Was an output dt
-000124f0: 7970 6520 7761 7320 6578 706c 6963 6974  ype was explicit
-00012500: 6c79 2073 7065 6369 6669 6564 3f0d 0a20  ly specified?.. 
-00012510: 2020 2020 2020 2064 7479 7065 203d 206b         dtype = k
-00012520: 7761 7267 732e 6765 7428 2264 7479 7065  wargs.get("dtype
-00012530: 222c 204e 6f6e 6529 0d0a 2020 2020 2020  ", None)..      
-00012540: 2020 6966 2064 7479 7065 2069 7320 6e6f    if dtype is no
-00012550: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
-00012560: 2020 2020 2023 2075 7365 7220 666f 7263       # user forc
-00012570: 6564 2064 7479 7065 2072 6574 7572 6e20  ed dtype return 
-00012580: 7661 6c75 650d 0a20 2020 2020 2020 2020  value..         
-00012590: 2020 2072 6574 7572 6e20 6474 7970 6528     return dtype(
-000125a0: 7265 7375 6c74 290d 0a0d 0a20 2020 2020  result)....     
-000125b0: 2020 2023 2070 7265 7365 7276 6520 7479     # preserve ty
-000125c0: 7065 2066 6f72 206d 696e 2f6d 6178 2f6e  pe for min/max/n
-000125d0: 616e 6d69 6e2f 6e61 6e6d 6178 0d0a 2020  anmin/nanmax..  
-000125e0: 2020 2020 2020 6966 2072 6564 7563 6546        if reduceF
-000125f0: 756e 6320 696e 205b 0d0a 2020 2020 2020  unc in [..      
-00012600: 2020 2020 2020 5245 4455 4345 5f46 554e        REDUCE_FUN
-00012610: 4354 494f 4e53 2e52 4544 5543 455f 4d49  CTIONS.REDUCE_MI
-00012620: 4e2c 0d0a 2020 2020 2020 2020 2020 2020  N,..            
-00012630: 5245 4455 4345 5f46 554e 4354 494f 4e53  REDUCE_FUNCTIONS
-00012640: 2e52 4544 5543 455f 4e41 4e4d 494e 2c0d  .REDUCE_NANMIN,.
-00012650: 0a20 2020 2020 2020 2020 2020 2052 4544  .            RED
-00012660: 5543 455f 4655 4e43 5449 4f4e 532e 5245  UCE_FUNCTIONS.RE
-00012670: 4455 4345 5f4d 4158 2c0d 0a20 2020 2020  DUCE_MAX,..     
-00012680: 2020 2020 2020 2052 4544 5543 455f 4655         REDUCE_FU
-00012690: 4e43 5449 4f4e 532e 5245 4455 4345 5f4e  NCTIONS.REDUCE_N
-000126a0: 414e 4d41 582c 0d0a 2020 2020 2020 2020  ANMAX,..        
-000126b0: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
-000126c0: 7265 7475 726e 2073 656c 662e 6474 7970  return self.dtyp
-000126d0: 652e 7479 7065 2872 6573 756c 7429 0d0a  e.type(result)..
-000126e0: 0d0a 2020 2020 2020 2020 2320 696e 7465  ..        # inte
-000126f0: 726e 616c 6c79 206e 756d 7079 2065 7870  rnally numpy exp
-00012700: 6563 7473 2061 2064 7479 7065 2072 6574  ects a dtype ret
-00012710: 7572 6e65 6420 666f 7220 6e61 6e73 7464  urned for nanstd
-00012720: 2061 6e64 206f 7468 6572 2063 616c 6375   and other calcu
-00012730: 6c61 7469 6f6e 730d 0a20 2020 2020 2020  lations..       
-00012740: 2069 6620 6973 696e 7374 616e 6365 2872   if isinstance(r
-00012750: 6573 756c 742c 2028 696e 742c 206e 702e  esult, (int, np.
-00012760: 696e 7465 6765 7229 293a 0d0a 2020 2020  integer)):..    
-00012770: 2020 2020 2020 2020 2320 666f 7220 7569          # for ui
-00012780: 6e74 3634 2c20 7468 6520 6869 6768 2062  nt64, the high b
-00012790: 6974 206d 7573 7420 6265 2070 7265 7365  it must be prese
-000127a0: 7276 6564 0d0a 2020 2020 2020 2020 2020  rved..          
-000127b0: 2020 6966 2073 656c 662e 6474 7970 652e    if self.dtype.
-000127c0: 6368 6172 2069 6e20 4e75 6d70 7943 6861  char in NumpyCha
-000127d0: 7254 7970 6573 2e55 6e73 6967 6e65 6449  rTypes.UnsignedI
-000127e0: 6e74 6567 6572 3634 3a0d 0a20 2020 2020  nteger64:..     
-000127f0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00012800: 6e20 6e70 2e75 696e 7436 3428 7265 7375  n np.uint64(resu
-00012810: 6c74 290d 0a20 2020 2020 2020 2020 2020  lt)..           
-00012820: 2072 6574 7572 6e20 6e70 2e69 6e74 3634   return np.int64
-00012830: 2872 6573 756c 7429 0d0a 0d0a 2020 2020  (result)....    
-00012840: 2020 2020 7265 7475 726e 206e 702e 666c      return np.fl
-00012850: 6f61 7436 3428 7265 7375 6c74 290d 0a0d  oat64(result)...
-00012860: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
-00012870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00012880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00012890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000128a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000128b0: 2d2d 0d0a 2020 2020 6465 6620 5f63 6f6d  --..    def _com
-000128c0: 7061 7265 5f63 6865 636b 2873 656c 662c  pare_check(self,
-000128d0: 2066 756e 632c 206f 7468 6572 2920 2d3e   func, other) ->
-000128e0: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
-000128f0: 2020 2020 2023 2061 2075 7365 7220 6d69       # a user mi
-00012900: 6768 7420 7479 7065 2069 6e20 6120 7374  ght type in a st
-00012910: 7269 6e67 2061 6e64 2077 6520 7761 6e74  ring and we want
-00012920: 2061 2062 7974 6573 2073 7472 696e 670d   a bytes string.
-00012930: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00012940: 2e64 7479 7065 2e63 6861 7220 696e 2022  .dtype.char in "
-00012950: 5355 223a 0d0a 2020 2020 2020 2020 2020  SU":..          
-00012960: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00012970: 6f74 6865 722c 2073 7472 293a 0d0a 2020  other, str):..  
-00012980: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00012990: 2073 656c 662e 6474 7970 652e 6368 6172   self.dtype.char
-000129a0: 203d 3d20 2253 223a 0d0a 2020 2020 2020   == "S":..      
-000129b0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-000129c0: 7765 2061 7265 2062 7974 6520 7374 7269  we are byte stri
-000129d0: 6e67 7320 6275 7420 7363 616c 6172 2075  ngs but scalar u
-000129e0: 6e69 636f 6465 2070 6173 7365 6420 696e  nicode passed in
-000129f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00012a00: 2020 2020 2020 6f74 6865 7220 3d20 7374        other = st
-00012a10: 722e 656e 636f 6465 286f 7468 6572 290d  r.encode(other).
-00012a20: 0a0d 0a20 2020 2020 2020 2020 2020 2069  ...            i
-00012a30: 6620 6973 696e 7374 616e 6365 286f 7468  f isinstance(oth
-00012a40: 6572 2c20 6c69 7374 293a 0d0a 2020 2020  er, list):..    
-00012a50: 2020 2020 2020 2020 2020 2020 2320 636f              # co
-00012a60: 6e76 6572 7420 7468 6520 6c69 7374 2073  nvert the list s
-00012a70: 6f20 6120 636f 6d70 6172 6973 6f6e 2063  o a comparison c
-00012a80: 616e 2062 6520 6d61 6465 2074 6f20 7468  an be made to th
-00012a90: 6520 6279 7465 2073 7472 696e 6720 6172  e byte string ar
-00012aa0: 7261 790d 0a20 2020 2020 2020 2020 2020  ray..           
-00012ab0: 2020 2020 206f 7468 6572 203d 2046 6173       other = Fas
-00012ac0: 7441 7272 6179 286f 7468 6572 290d 0a0d  tArray(other)...
-00012ad0: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-00012ae0: 756c 7420 3d20 6675 6e63 286f 7468 6572  ult = func(other
-00012af0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-00012b00: 2023 204e 4f54 453a 206e 756d 7079 2064   # NOTE: numpy d
-00012b10: 6f65 7320 6361 6c6c 2046 4120 7566 756e  oes call FA ufun
-00012b20: 6320 666f 7220 7374 7269 6e67 730d 0a20  c for strings.. 
-00012b30: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-00012b40: 7420 6973 696e 7374 616e 6365 2872 6573  t isinstance(res
-00012b50: 756c 742c 2046 6173 7441 7272 6179 2920  ult, FastArray) 
-00012b60: 616e 6420 6973 696e 7374 616e 6365 2872  and isinstance(r
-00012b70: 6573 756c 742c 206e 702e 6e64 6172 7261  esult, np.ndarra
-00012b80: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
-00012b90: 2020 2020 2072 6573 756c 7420 3d20 7265       result = re
-00012ba0: 7375 6c74 2e76 6965 7728 4661 7374 4172  sult.view(FastAr
-00012bb0: 7261 7929 0d0a 2020 2020 2020 2020 2020  ray)..          
-00012bc0: 2020 7265 7475 726e 2072 6573 756c 740d    return result.
-00012bd0: 0a0d 0a20 2020 2020 2020 2072 6573 756c  ...        resul
-00012be0: 7420 3d20 6675 6e63 286f 7468 6572 290d  t = func(other).
-00012bf0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00012c00: 7265 7375 6c74 0d0a 0d0a 2020 2020 6465  result....    de
-00012c10: 6620 5f5f 6e65 5f5f 2873 656c 662c 206f  f __ne__(self, o
-00012c20: 7468 6572 293a 0d0a 2020 2020 2020 2020  ther):..        
-00012c30: 7265 7475 726e 2073 656c 662e 5f63 6f6d  return self._com
-00012c40: 7061 7265 5f63 6865 636b 2873 7570 6572  pare_check(super
-00012c50: 2829 2e5f 5f6e 655f 5f2c 206f 7468 6572  ().__ne__, other
-00012c60: 290d 0a0d 0a20 2020 2064 6566 205f 5f65  )....    def __e
-00012c70: 715f 5f28 7365 6c66 2c20 6f74 6865 7229  q__(self, other)
-00012c80: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
-00012c90: 6e20 7365 6c66 2e5f 636f 6d70 6172 655f  n self._compare_
-00012ca0: 6368 6563 6b28 7375 7065 7228 292e 5f5f  check(super().__
-00012cb0: 6571 5f5f 2c20 6f74 6865 7229 0d0a 0d0a  eq__, other)....
-00012cc0: 2020 2020 6465 6620 5f5f 6765 5f5f 2873      def __ge__(s
-00012cd0: 656c 662c 206f 7468 6572 293a 0d0a 2020  elf, other):..  
-00012ce0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00012cf0: 662e 5f63 6f6d 7061 7265 5f63 6865 636b  f._compare_check
-00012d00: 2873 7570 6572 2829 2e5f 5f67 655f 5f2c  (super().__ge__,
-00012d10: 206f 7468 6572 290d 0a0d 0a20 2020 2064   other)....    d
-00012d20: 6566 205f 5f67 745f 5f28 7365 6c66 2c20  ef __gt__(self, 
-00012d30: 6f74 6865 7229 3a0d 0a20 2020 2020 2020  other):..       
-00012d40: 2072 6574 7572 6e20 7365 6c66 2e5f 636f   return self._co
-00012d50: 6d70 6172 655f 6368 6563 6b28 7375 7065  mpare_check(supe
-00012d60: 7228 292e 5f5f 6774 5f5f 2c20 6f74 6865  r().__gt__, othe
-00012d70: 7229 0d0a 0d0a 2020 2020 6465 6620 5f5f  r)....    def __
-00012d80: 6c65 5f5f 2873 656c 662c 206f 7468 6572  le__(self, other
-00012d90: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
-00012da0: 726e 2073 656c 662e 5f63 6f6d 7061 7265  rn self._compare
-00012db0: 5f63 6865 636b 2873 7570 6572 2829 2e5f  _check(super()._
-00012dc0: 5f6c 655f 5f2c 206f 7468 6572 290d 0a0d  _le__, other)...
-00012dd0: 0a20 2020 2064 6566 205f 5f6c 745f 5f28  .    def __lt__(
-00012de0: 7365 6c66 2c20 6f74 6865 7229 3a0d 0a20  self, other):.. 
-00012df0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00012e00: 6c66 2e5f 636f 6d70 6172 655f 6368 6563  lf._compare_chec
-00012e10: 6b28 7375 7065 7228 292e 5f5f 6c74 5f5f  k(super().__lt__
-00012e20: 2c20 6f74 6865 7229 0d0a 0d0a 2020 2020  , other)....    
-00012e30: 6465 6620 6571 2873 656c 662c 206f 7468  def eq(self, oth
-00012e40: 6572 293a 0d0a 2020 2020 2020 2020 7265  er):..        re
-00012e50: 7475 726e 2073 656c 662e 5f5f 6571 5f5f  turn self.__eq__
-00012e60: 286f 7468 6572 290d 0a0d 0a20 2020 2064  (other)....    d
-00012e70: 6566 206e 6528 7365 6c66 2c20 6f74 6865  ef ne(self, othe
-00012e80: 7229 3a0d 0a20 2020 2020 2020 2072 6574  r):..        ret
-00012e90: 7572 6e20 7365 6c66 2e5f 5f6e 655f 5f28  urn self.__ne__(
-00012ea0: 6f74 6865 7229 0d0a 0d0a 2020 2020 6465  other)....    de
-00012eb0: 6620 6765 2873 656c 662c 206f 7468 6572  f ge(self, other
-00012ec0: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
-00012ed0: 726e 2073 656c 662e 5f5f 6765 5f5f 286f  rn self.__ge__(o
-00012ee0: 7468 6572 290d 0a0d 0a20 2020 2064 6566  ther)....    def
-00012ef0: 206c 6528 7365 6c66 2c20 6f74 6865 7229   le(self, other)
-00012f00: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
-00012f10: 6e20 7365 6c66 2e5f 5f6c 655f 5f28 6f74  n self.__le__(ot
-00012f20: 6865 7229 0d0a 0d0a 2020 2020 6465 6620  her)....    def 
-00012f30: 6774 2873 656c 662c 206f 7468 6572 293a  gt(self, other):
-00012f40: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00012f50: 2073 656c 662e 5f5f 6774 5f5f 286f 7468   self.__gt__(oth
-00012f60: 6572 290d 0a0d 0a20 2020 2064 6566 206c  er)....    def l
-00012f70: 7428 7365 6c66 2c20 6f74 6865 7229 3a0d  t(self, other):.
-00012f80: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00012f90: 7365 6c66 2e5f 5f6c 745f 5f28 6f74 6865  self.__lt__(othe
-00012fa0: 7229 0d0a 0d0a 2020 2020 6164 6420 3d20  r)....    add = 
-00012fb0: 6e70 2e6e 6461 7272 6179 2e5f 5f61 6464  np.ndarray.__add
-00012fc0: 5f5f 0d0a 2020 2020 7375 6220 3d20 6e70  __..    sub = np
-00012fd0: 2e6e 6461 7272 6179 2e5f 5f73 7562 5f5f  .ndarray.__sub__
-00012fe0: 0d0a 2020 2020 6d75 6c20 3d20 6e70 2e6e  ..    mul = np.n
-00012ff0: 6461 7272 6179 2e5f 5f6d 756c 5f5f 0d0a  darray.__mul__..
-00013000: 2020 2020 6469 7620 3d20 6e70 2e6e 6461      div = np.nda
-00013010: 7272 6179 2e5f 5f74 7275 6564 6976 5f5f  rray.__truediv__
-00013020: 0d0a 2020 2020 666c 6f6f 7264 6976 203d  ..    floordiv =
-00013030: 206e 702e 6e64 6172 7261 792e 5f5f 666c   np.ndarray.__fl
-00013040: 6f6f 7264 6976 5f5f 0d0a 2020 2020 706f  oordiv__..    po
-00013050: 7720 3d20 6e70 2e6e 6461 7272 6179 2e5f  w = np.ndarray._
-00013060: 5f70 6f77 5f5f 0d0a 2020 2020 6d6f 6420  _pow__..    mod 
-00013070: 3d20 6e70 2e6e 6461 7272 6179 2e5f 5f6d  = np.ndarray.__m
-00013080: 6f64 5f5f 0d0a 0d0a 2020 2020 2320 2d2d  od__....    # --
-00013090: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000130a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000130b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000130c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000130d0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
-000130e0: 6566 2073 7472 5f61 7070 656e 6428 7365  ef str_append(se
-000130f0: 6c66 2c20 6f74 6865 7229 3a0d 0a20 2020  lf, other):..   
-00013100: 2020 2020 2069 6620 7365 6c66 2e64 7479       if self.dty
-00013110: 7065 2e6e 756d 203d 3d20 6f74 6865 722e  pe.num == other.
-00013120: 6474 7970 652e 6e75 6d3a 0d0a 2020 2020  dtype.num:..    
-00013130: 2020 2020 2020 2020 6675 6e63 203d 2054          func = T
-00013140: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
-00013150: 4c65 6467 6572 2e5f 4241 5349 434d 4154  Ledger._BASICMAT
-00013160: 485f 5457 4f5f 494e 5055 5453 0d0a 2020  H_TWO_INPUTS..  
-00013170: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00013180: 2066 756e 6328 2873 656c 662c 206f 7468   func((self, oth
-00013190: 6572 292c 204d 4154 485f 4f50 4552 4154  er), MATH_OPERAT
-000131a0: 494f 4e2e 4144 442c 2073 656c 662e 6474  ION.ADD, self.dt
-000131b0: 7970 652e 6e75 6d29 0d0a 2020 2020 2020  ype.num)..      
-000131c0: 2020 7261 6973 6520 5479 7065 4572 726f    raise TypeErro
-000131d0: 7228 2263 616e 6e6f 7420 636f 6e63 6174  r("cannot concat
-000131e0: 2229 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  ")....    # ----
-000131f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00013200: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00013210: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00013220: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00013230: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
-00013240: 2073 7175 6565 7a65 2873 656c 662c 202a   squeeze(self, *
-00013250: 6172 6773 2c20 2a2a 6b77 6172 6773 293a  args, **kwargs):
-00013260: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00013270: 2073 656c 662e 5f6e 702e 7371 7565 657a   self._np.squeez
-00013280: 6528 2a61 7267 732c 202a 2a6b 7761 7267  e(*args, **kwarg
-00013290: 7329 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  s)....    # ----
-000132a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000132b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000132c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000132d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000132e0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
-000132f0: 2069 7363 6f6d 7075 7461 626c 6528 7365   iscomputable(se
-00013300: 6c66 2920 2d3e 2062 6f6f 6c3a 0d0a 2020  lf) -> bool:..  
-00013310: 2020 2020 2020 7265 7475 726e 2054 7970        return Typ
-00013320: 6552 6567 6973 7465 722e 6973 5f63 6f6d  eRegister.is_com
-00013330: 7075 7461 626c 6528 7365 6c66 290d 0a0d  putable(self)...
-00013340: 0a20 2020 2023 2323 2323 2323 2323 2323  .    ###########
-00013350: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00013360: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00013370: 2323 0d0a 2020 2020 2320 6e65 702d 3138  ##..    # nep-18
-00013380: 2061 7272 6179 2066 756e 6374 696f 6e20   array function 
-00013390: 7072 6f74 6f63 6f6c 2069 6d70 6c65 6d65  protocol impleme
-000133a0: 6e74 6174 696f 6e0d 0a20 2020 2023 2323  ntation..    ###
-000133b0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000133c0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000133d0: 2323 2323 2323 2323 2323 0d0a 2020 2020  ##########..    
-000133e0: 4063 6c61 7373 6d65 7468 6f64 0d0a 2020  @classmethod..  
-000133f0: 2020 6465 6620 5f70 795f 6e75 6d62 6572    def _py_number
-00013400: 5f74 6f5f 6e70 5f64 7479 7065 280d 0a20  _to_np_dtype(.. 
-00013410: 2020 2020 2020 2063 6c73 2c20 7661 6c3a         cls, val:
-00013420: 2055 6e69 6f6e 5b69 6e74 2c20 6e70 2e69   Union[int, np.i
-00013430: 6e74 6567 6572 2c20 4e6f 6e65 5d2c 2064  nteger, None], d
-00013440: 7479 7065 3a20 6e70 2e64 7479 7065 0d0a  type: np.dtype..
-00013450: 2020 2020 2920 2d3e 2055 6e69 6f6e 5b6e      ) -> Union[n
-00013460: 702e 7569 6e74 2c20 6e70 2e69 6e74 3634  p.uint, np.int64
-00013470: 2c20 6e70 2e66 6c6f 6174 3634 2c20 4e6f  , np.float64, No
-00013480: 6e65 5d3a 0d0a 2020 2020 2020 2020 2222  ne]:..        ""
-00013490: 2243 6f6e 7665 7274 2061 2070 7974 686f  "Convert a pytho
-000134a0: 6e20 7479 7065 2074 6f20 6e75 6d70 7920  n type to numpy 
-000134b0: 6474 7970 652e 0d0a 2020 2020 2020 2020  dtype...        
-000134c0: 4f6e 6c79 2068 616e 646c 6573 2069 6e74  Only handles int
-000134d0: 6567 6572 732e 2222 220d 0a20 2020 2020  egers."""..     
-000134e0: 2020 2069 6620 7661 6c20 6973 206e 6f74     if val is not
-000134f0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-00013500: 2020 2020 2320 696e 7465 726e 616c 6c79      # internally
-00013510: 206e 756d 7079 2065 7870 6563 7473 2061   numpy expects a
-00013520: 2064 7479 7065 2072 6574 7572 6e65 6420   dtype returned 
-00013530: 666f 7220 6e61 6e73 7464 2061 6e64 206f  for nanstd and o
-00013540: 7468 6572 2063 616c 6375 6c61 7469 6f6e  ther calculation
-00013550: 730d 0a20 2020 2020 2020 2020 2020 2069  s..            i
-00013560: 6620 6973 696e 7374 616e 6365 2876 616c  f isinstance(val
-00013570: 2c20 2869 6e74 2c20 6e70 2e69 6e74 6567  , (int, np.integ
-00013580: 6572 2929 3a0d 0a20 2020 2020 2020 2020  er)):..         
-00013590: 2020 2020 2020 2023 2066 6f72 2075 696e         # for uin
-000135a0: 7436 342c 2074 6865 2068 6967 6820 6269  t64, the high bi
-000135b0: 7420 6d75 7374 2062 6520 7072 6573 6572  t must be preser
-000135c0: 7665 640d 0a20 2020 2020 2020 2020 2020  ved..           
-000135d0: 2020 2020 2069 6620 6474 7970 652e 6368       if dtype.ch
-000135e0: 6172 2069 6e20 4e75 6d70 7943 6861 7254  ar in NumpyCharT
-000135f0: 7970 6573 2e55 6e73 6967 6e65 6449 6e74  ypes.UnsignedInt
-00013600: 6567 6572 3634 3a0d 0a20 2020 2020 2020  eger64:..       
-00013610: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00013620: 7572 6e20 6e70 2e75 696e 7436 3428 7661  urn np.uint64(va
-00013630: 6c29 0d0a 2020 2020 2020 2020 2020 2020  l)..            
-00013640: 2020 2020 7265 7475 726e 206e 702e 696e      return np.in
-00013650: 7436 3428 7661 6c29 0d0a 2020 2020 2020  t64(val)..      
-00013660: 2020 2020 2020 7265 7475 726e 206e 702e        return np.
-00013670: 666c 6f61 7436 3428 7661 6c29 0d0a 2020  float64(val)..  
-00013680: 2020 2020 2020 7265 7475 726e 2076 616c        return val
-00013690: 0d0a 0d0a 2020 2020 4073 7461 7469 636d  ....    @staticm
-000136a0: 6574 686f 640d 0a20 2020 2040 5f41 7272  ethod..    @_Arr
-000136b0: 6179 4675 6e63 7469 6f6e 4865 6c70 6572  ayFunctionHelper
-000136c0: 2e72 6567 6973 7465 725f 6172 7261 795f  .register_array_
-000136d0: 6675 6e63 7469 6f6e 286e 702e 6172 676d  function(np.argm
-000136e0: 6178 290d 0a20 2020 2064 6566 205f 6172  ax)..    def _ar
-000136f0: 676d 6178 2861 2c20 6178 6973 3d4e 6f6e  gmax(a, axis=Non
-00013700: 652c 206f 7574 3d4e 6f6e 6529 3a0d 0a20  e, out=None):.. 
-00013710: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-00013720: 7263 2e52 6564 7563 6528 612c 2052 4544  rc.Reduce(a, RED
-00013730: 5543 455f 4655 4e43 5449 4f4e 532e 5245  UCE_FUNCTIONS.RE
-00013740: 4455 4345 5f41 5247 4d41 582c 2030 290d  DUCE_ARGMAX, 0).
-00013750: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00013760: 4661 7374 4172 7261 792e 5f70 795f 6e75  FastArray._py_nu
-00013770: 6d62 6572 5f74 6f5f 6e70 5f64 7479 7065  mber_to_np_dtype
-00013780: 2872 6573 756c 742c 2061 2e64 7479 7065  (result, a.dtype
-00013790: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
-000137a0: 6d65 7468 6f64 0d0a 2020 2020 405f 4172  method..    @_Ar
-000137b0: 7261 7946 756e 6374 696f 6e48 656c 7065  rayFunctionHelpe
-000137c0: 722e 7265 6769 7374 6572 5f61 7272 6179  r.register_array
-000137d0: 5f66 756e 6374 696f 6e28 6e70 2e6e 616e  _function(np.nan
-000137e0: 6172 676d 6178 290d 0a20 2020 2064 6566  argmax)..    def
-000137f0: 205f 6e61 6e61 7267 6d61 7828 612c 2061   _nanargmax(a, a
-00013800: 7869 733d 4e6f 6e65 293a 0d0a 2020 2020  xis=None):..    
-00013810: 2020 2020 7265 7375 6c74 203d 2072 632e      result = rc.
-00013820: 5265 6475 6365 2861 2c20 5245 4455 4345  Reduce(a, REDUCE
-00013830: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
-00013840: 455f 4e41 4e41 5247 4d41 582c 2030 290d  E_NANARGMAX, 0).
-00013850: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00013860: 4661 7374 4172 7261 792e 5f70 795f 6e75  FastArray._py_nu
-00013870: 6d62 6572 5f74 6f5f 6e70 5f64 7479 7065  mber_to_np_dtype
-00013880: 2872 6573 756c 742c 2061 2e64 7479 7065  (result, a.dtype
-00013890: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
-000138a0: 6d65 7468 6f64 0d0a 2020 2020 405f 4172  method..    @_Ar
-000138b0: 7261 7946 756e 6374 696f 6e48 656c 7065  rayFunctionHelpe
-000138c0: 722e 7265 6769 7374 6572 5f61 7272 6179  r.register_array
-000138d0: 5f66 756e 6374 696f 6e28 6e70 2e61 7267  _function(np.arg
-000138e0: 6d69 6e29 0d0a 2020 2020 6465 6620 5f61  min)..    def _a
-000138f0: 7267 6d69 6e28 612c 2061 7869 733d 4e6f  rgmin(a, axis=No
-00013900: 6e65 2c20 6f75 743d 4e6f 6e65 293a 0d0a  ne, out=None):..
-00013910: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00013920: 2072 632e 5265 6475 6365 2861 2c20 5245   rc.Reduce(a, RE
-00013930: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
-00013940: 4544 5543 455f 4152 474d 494e 2c20 3029  EDUCE_ARGMIN, 0)
-00013950: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00013960: 2046 6173 7441 7272 6179 2e5f 7079 5f6e   FastArray._py_n
-00013970: 756d 6265 725f 746f 5f6e 705f 6474 7970  umber_to_np_dtyp
-00013980: 6528 7265 7375 6c74 2c20 612e 6474 7970  e(result, a.dtyp
-00013990: 6529 0d0a 0d0a 2020 2020 4073 7461 7469  e)....    @stati
-000139a0: 636d 6574 686f 640d 0a20 2020 2040 5f41  cmethod..    @_A
-000139b0: 7272 6179 4675 6e63 7469 6f6e 4865 6c70  rrayFunctionHelp
-000139c0: 6572 2e72 6567 6973 7465 725f 6172 7261  er.register_arra
-000139d0: 795f 6675 6e63 7469 6f6e 286e 702e 6e61  y_function(np.na
-000139e0: 6e61 7267 6d69 6e29 0d0a 2020 2020 6465  nargmin)..    de
-000139f0: 6620 5f6e 616e 6172 676d 696e 2861 2c20  f _nanargmin(a, 
-00013a00: 6178 6973 3d4e 6f6e 6529 3a0d 0a20 2020  axis=None):..   
-00013a10: 2020 2020 2072 6573 756c 7420 3d20 7263       result = rc
-00013a20: 2e52 6564 7563 6528 612c 2052 4544 5543  .Reduce(a, REDUC
-00013a30: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
-00013a40: 4345 5f4e 414e 4152 474d 494e 2c20 3029  CE_NANARGMIN, 0)
-00013a50: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00013a60: 2046 6173 7441 7272 6179 2e5f 7079 5f6e   FastArray._py_n
-00013a70: 756d 6265 725f 746f 5f6e 705f 6474 7970  umber_to_np_dtyp
-00013a80: 6528 7265 7375 6c74 2c20 612e 6474 7970  e(result, a.dtyp
-00013a90: 6529 0d0a 0d0a 2020 2020 4073 7461 7469  e)....    @stati
-00013aa0: 636d 6574 686f 640d 0a20 2020 2040 5f41  cmethod..    @_A
-00013ab0: 7272 6179 4675 6e63 7469 6f6e 4865 6c70  rrayFunctionHelp
-00013ac0: 6572 2e72 6567 6973 7465 725f 6172 7261  er.register_arra
-00013ad0: 795f 6675 6e63 7469 6f6e 286e 702e 656d  y_function(np.em
-00013ae0: 7074 795f 6c69 6b65 290d 0a20 2020 2064  pty_like)..    d
-00013af0: 6566 205f 656d 7074 795f 6c69 6b65 280d  ef _empty_like(.
-00013b00: 0a20 2020 2020 2020 2061 7272 6179 3a20  .        array: 
-00013b10: 2246 6173 7441 7272 6179 222c 0d0a 2020  "FastArray",..  
-00013b20: 2020 2020 2020 6474 7970 653a 204f 7074        dtype: Opt
-00013b30: 696f 6e61 6c5b 556e 696f 6e5b 7374 722c  ional[Union[str,
-00013b40: 206e 702e 6474 7970 655d 5d20 3d20 4e6f   np.dtype]] = No
-00013b50: 6e65 2c0d 0a20 2020 2020 2020 206f 7264  ne,..        ord
-00013b60: 6572 3a20 7374 7220 3d20 224b 222c 0d0a  er: str = "K",..
-00013b70: 2020 2020 2020 2020 7375 626f 6b3a 2062          subok: b
-00013b80: 6f6f 6c20 3d20 5472 7565 2c0d 0a20 2020  ool = True,..   
-00013b90: 2020 2020 2073 6861 7065 3a20 4f70 7469       shape: Opti
-00013ba0: 6f6e 616c 5b55 6e69 6f6e 5b69 6e74 2c20  onal[Union[int, 
-00013bb0: 5365 7175 656e 6365 5b69 6e74 5d5d 5d20  Sequence[int]]] 
-00013bc0: 3d20 4e6f 6e65 2c0d 0a20 2020 2029 202d  = None,..    ) -
-00013bd0: 3e20 2246 6173 7441 7272 6179 223a 0d0a  > "FastArray":..
-00013be0: 2020 2020 2020 2020 6172 7261 7920 3d20          array = 
-00013bf0: 6172 7261 792e 5f6e 700d 0a20 2020 2020  array._np..     
-00013c00: 2020 2072 6573 756c 7420 3d20 7263 2e4c     result = rc.L
-00013c10: 6564 6765 7246 756e 6374 696f 6e28 6e70  edgerFunction(np
-00013c20: 2e65 6d70 7479 5f6c 696b 652c 2061 7272  .empty_like, arr
-00013c30: 6179 2c20 6474 7970 653d 6474 7970 652c  ay, dtype=dtype,
-00013c40: 206f 7264 6572 3d6f 7264 6572 2c20 7375   order=order, su
-00013c50: 626f 6b3d 7375 626f 6b2c 2073 6861 7065  bok=subok, shape
-00013c60: 3d73 6861 7065 290d 0a20 2020 2020 2020  =shape)..       
-00013c70: 2072 6574 7572 6e20 7265 7375 6c74 0d0a   return result..
-00013c80: 0d0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
-00013c90: 686f 640d 0a20 2020 2040 5f41 7272 6179  hod..    @_Array
-00013ca0: 4675 6e63 7469 6f6e 4865 6c70 6572 2e72  FunctionHelper.r
-00013cb0: 6567 6973 7465 725f 6172 7261 795f 6675  egister_array_fu
-00013cc0: 6e63 7469 6f6e 286e 702e 6d61 7829 0d0a  nction(np.max)..
-00013cd0: 2020 2020 6465 6620 5f6d 6178 2861 2c20      def _max(a, 
-00013ce0: 6178 6973 3d4e 6f6e 652c 206f 7574 3d4e  axis=None, out=N
-00013cf0: 6f6e 652c 206b 6565 7064 696d 733d 4e6f  one, keepdims=No
-00013d00: 6e65 2c20 696e 6974 6961 6c3d 4e6f 6e65  ne, initial=None
-00013d10: 2c20 7768 6572 653d 4e6f 6e65 293a 0d0a  , where=None):..
-00013d20: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00013d30: 2072 632e 5265 6475 6365 2861 2c20 5245   rc.Reduce(a, RE
-00013d40: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
-00013d50: 4544 5543 455f 4d41 582c 2030 290d 0a20  EDUCE_MAX, 0).. 
-00013d60: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
-00013d70: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-00013d80: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00013d90: 6e20 612e 6474 7970 652e 7479 7065 2872  n a.dtype.type(r
-00013da0: 6573 756c 7429 0d0a 2020 2020 2020 2020  esult)..        
-00013db0: 7265 7475 726e 2072 6573 756c 740d 0a0d  return result...
-00013dc0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
-00013dd0: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
-00013de0: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
-00013df0: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
-00013e00: 6374 696f 6e28 6e70 2e6e 616e 6d61 7829  ction(np.nanmax)
-00013e10: 0d0a 2020 2020 6465 6620 5f6e 616e 6d61  ..    def _nanma
-00013e20: 7828 612c 2061 7869 733d 4e6f 6e65 2c20  x(a, axis=None, 
-00013e30: 6f75 743d 4e6f 6e65 2c20 6b65 6570 6469  out=None, keepdi
-00013e40: 6d73 3d4e 6f6e 6529 3a0d 0a20 2020 2020  ms=None):..     
-00013e50: 2020 2072 6573 756c 7420 3d20 7263 2e52     result = rc.R
-00013e60: 6564 7563 6528 612c 2052 4544 5543 455f  educe(a, REDUCE_
-00013e70: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
-00013e80: 5f4e 414e 4d41 582c 2030 290d 0a20 2020  _NANMAX, 0)..   
-00013e90: 2020 2020 2069 6620 7265 7375 6c74 2069       if result i
-00013ea0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
-00013eb0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00013ec0: 612e 6474 7970 652e 7479 7065 2872 6573  a.dtype.type(res
-00013ed0: 756c 7429 0d0a 2020 2020 2020 2020 7265  ult)..        re
-00013ee0: 7475 726e 2072 6573 756c 740d 0a0d 0a20  turn result.... 
-00013ef0: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-00013f00: 0d0a 2020 2020 405f 4172 7261 7946 756e  ..    @_ArrayFun
-00013f10: 6374 696f 6e48 656c 7065 722e 7265 6769  ctionHelper.regi
-00013f20: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
-00013f30: 696f 6e28 6e70 2e6d 6561 6e29 0d0a 2020  ion(np.mean)..  
-00013f40: 2020 6465 6620 5f6d 6561 6e28 612c 2061    def _mean(a, a
-00013f50: 7869 733d 4e6f 6e65 2c20 6474 7970 653d  xis=None, dtype=
-00013f60: 4e6f 6e65 2c20 6f75 743d 4e6f 6e65 2c20  None, out=None, 
-00013f70: 6b65 6570 6469 6d73 3d4e 6f6e 6529 3a0d  keepdims=None):.
-00013f80: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-00013f90: 3d20 7263 2e52 6564 7563 6528 612c 2052  = rc.Reduce(a, R
-00013fa0: 4544 5543 455f 4655 4e43 5449 4f4e 532e  EDUCE_FUNCTIONS.
-00013fb0: 5245 4455 4345 5f4d 4541 4e2c 2030 290d  REDUCE_MEAN, 0).
-00013fc0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00013fd0: 4661 7374 4172 7261 792e 5f70 795f 6e75  FastArray._py_nu
-00013fe0: 6d62 6572 5f74 6f5f 6e70 5f64 7479 7065  mber_to_np_dtype
-00013ff0: 2872 6573 756c 742c 2061 2e64 7479 7065  (result, a.dtype
-00014000: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
-00014010: 6d65 7468 6f64 0d0a 2020 2020 405f 4172  method..    @_Ar
-00014020: 7261 7946 756e 6374 696f 6e48 656c 7065  rayFunctionHelpe
-00014030: 722e 7265 6769 7374 6572 5f61 7272 6179  r.register_array
-00014040: 5f66 756e 6374 696f 6e28 6e70 2e6e 616e  _function(np.nan
-00014050: 6d65 616e 290d 0a20 2020 2064 6566 205f  mean)..    def _
-00014060: 6e61 6e6d 6561 6e28 612c 2061 7869 733d  nanmean(a, axis=
-00014070: 4e6f 6e65 2c20 6474 7970 653d 4e6f 6e65  None, dtype=None
-00014080: 2c20 6f75 743d 4e6f 6e65 2c20 6b65 6570  , out=None, keep
-00014090: 6469 6d73 3d4e 6f6e 6529 3a0d 0a20 2020  dims=None):..   
-000140a0: 2020 2020 2072 6573 756c 7420 3d20 7263       result = rc
-000140b0: 2e52 6564 7563 6528 612c 2052 4544 5543  .Reduce(a, REDUC
-000140c0: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
-000140d0: 4345 5f4e 414e 4d45 414e 2c20 3029 0d0a  CE_NANMEAN, 0)..
-000140e0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-000140f0: 6173 7441 7272 6179 2e5f 7079 5f6e 756d  astArray._py_num
-00014100: 6265 725f 746f 5f6e 705f 6474 7970 6528  ber_to_np_dtype(
-00014110: 7265 7375 6c74 2c20 612e 6474 7970 6529  result, a.dtype)
-00014120: 0d0a 0d0a 2020 2020 4073 7461 7469 636d  ....    @staticm
-00014130: 6574 686f 640d 0a20 2020 2040 5f41 7272  ethod..    @_Arr
-00014140: 6179 4675 6e63 7469 6f6e 4865 6c70 6572  ayFunctionHelper
-00014150: 2e72 6567 6973 7465 725f 6172 7261 795f  .register_array_
-00014160: 6675 6e63 7469 6f6e 286e 702e 6d69 6e29  function(np.min)
-00014170: 0d0a 2020 2020 6465 6620 5f6d 696e 2861  ..    def _min(a
-00014180: 2c20 6178 6973 3d4e 6f6e 652c 206f 7574  , axis=None, out
-00014190: 3d4e 6f6e 652c 206b 6565 7064 696d 733d  =None, keepdims=
-000141a0: 4e6f 6e65 2c20 696e 6974 6961 6c3d 4e6f  None, initial=No
-000141b0: 6e65 2c20 7768 6572 653d 4e6f 6e65 293a  ne, where=None):
-000141c0: 0d0a 2020 2020 2020 2020 7265 7375 6c74  ..        result
-000141d0: 203d 2072 632e 5265 6475 6365 2861 2c20   = rc.Reduce(a, 
-000141e0: 5245 4455 4345 5f46 554e 4354 494f 4e53  REDUCE_FUNCTIONS
-000141f0: 2e52 4544 5543 455f 4d49 4e2c 2030 290d  .REDUCE_MIN, 0).
-00014200: 0a20 2020 2020 2020 2069 6620 7265 7375  .        if resu
-00014210: 6c74 2069 7320 6e6f 7420 4e6f 6e65 3a0d  lt is not None:.
-00014220: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00014230: 7572 6e20 612e 6474 7970 652e 7479 7065  urn a.dtype.type
-00014240: 2872 6573 756c 7429 0d0a 2020 2020 2020  (result)..      
-00014250: 2020 7265 7475 726e 2072 6573 756c 740d    return result.
-00014260: 0a0d 0a20 2020 2040 7374 6174 6963 6d65  ...    @staticme
-00014270: 7468 6f64 0d0a 2020 2020 405f 4172 7261  thod..    @_Arra
-00014280: 7946 756e 6374 696f 6e48 656c 7065 722e  yFunctionHelper.
-00014290: 7265 6769 7374 6572 5f61 7272 6179 5f66  register_array_f
-000142a0: 756e 6374 696f 6e28 6e70 2e6e 616e 6d69  unction(np.nanmi
-000142b0: 6e29 0d0a 2020 2020 6465 6620 5f6e 616e  n)..    def _nan
-000142c0: 6d69 6e28 612c 2061 7869 733d 4e6f 6e65  min(a, axis=None
-000142d0: 2c20 6f75 743d 4e6f 6e65 2c20 6b65 6570  , out=None, keep
-000142e0: 6469 6d73 3d4e 6f6e 6529 3a0d 0a20 2020  dims=None):..   
-000142f0: 2020 2020 2072 6573 756c 7420 3d20 7263       result = rc
-00014300: 2e52 6564 7563 6528 612c 2052 4544 5543  .Reduce(a, REDUC
-00014310: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
-00014320: 4345 5f4e 414e 4d49 4e2c 2030 290d 0a20  CE_NANMIN, 0).. 
-00014330: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
-00014340: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-00014350: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00014360: 6e20 612e 6474 7970 652e 7479 7065 2872  n a.dtype.type(r
-00014370: 6573 756c 7429 0d0a 2020 2020 2020 2020  esult)..        
-00014380: 7265 7475 726e 2072 6573 756c 740d 0a0d  return result...
-00014390: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
-000143a0: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
-000143b0: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
-000143c0: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
-000143d0: 6374 696f 6e28 6e70 2e73 7464 290d 0a20  ction(np.std).. 
-000143e0: 2020 2064 6566 205f 7374 6428 612c 2061     def _std(a, a
-000143f0: 7869 733d 4e6f 6e65 2c20 6474 7970 653d  xis=None, dtype=
-00014400: 4e6f 6e65 2c20 6f75 743d 4e6f 6e65 2c20  None, out=None, 
-00014410: 6464 6f66 3d4e 6f6e 652c 206b 6565 7064  ddof=None, keepd
-00014420: 696d 733d 4e6f 6e65 293a 0d0a 2020 2020  ims=None):..    
-00014430: 2020 2020 7265 7375 6c74 203d 2072 632e      result = rc.
-00014440: 5265 6475 6365 2861 2c20 5245 4455 4345  Reduce(a, REDUCE
-00014450: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
-00014460: 455f 5354 442c 2030 290d 0a20 2020 2020  E_STD, 0)..     
-00014470: 2020 2072 6574 7572 6e20 4661 7374 4172     return FastAr
-00014480: 7261 792e 5f70 795f 6e75 6d62 6572 5f74  ray._py_number_t
-00014490: 6f5f 6e70 5f64 7479 7065 2872 6573 756c  o_np_dtype(resul
-000144a0: 742c 2061 2e64 7479 7065 290d 0a0d 0a20  t, a.dtype).... 
-000144b0: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-000144c0: 0d0a 2020 2020 405f 4172 7261 7946 756e  ..    @_ArrayFun
-000144d0: 6374 696f 6e48 656c 7065 722e 7265 6769  ctionHelper.regi
-000144e0: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
-000144f0: 696f 6e28 6e70 2e6e 616e 7374 6429 0d0a  ion(np.nanstd)..
-00014500: 2020 2020 6465 6620 5f6e 616e 7374 6428      def _nanstd(
-00014510: 612c 2061 7869 733d 4e6f 6e65 2c20 6474  a, axis=None, dt
-00014520: 7970 653d 4e6f 6e65 2c20 6f75 743d 4e6f  ype=None, out=No
-00014530: 6e65 2c20 6464 6f66 3d4e 6f6e 652c 206b  ne, ddof=None, k
-00014540: 6565 7064 696d 733d 4e6f 6e65 293a 0d0a  eepdims=None):..
-00014550: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00014560: 2072 632e 5265 6475 6365 2861 2c20 5245   rc.Reduce(a, RE
-00014570: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
-00014580: 4544 5543 455f 4e41 4e53 5444 2c20 3029  EDUCE_NANSTD, 0)
-00014590: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-000145a0: 2046 6173 7441 7272 6179 2e5f 7079 5f6e   FastArray._py_n
-000145b0: 756d 6265 725f 746f 5f6e 705f 6474 7970  umber_to_np_dtyp
-000145c0: 6528 7265 7375 6c74 2c20 612e 6474 7970  e(result, a.dtyp
-000145d0: 6529 0d0a 0d0a 2020 2020 4073 7461 7469  e)....    @stati
-000145e0: 636d 6574 686f 640d 0a20 2020 2040 5f41  cmethod..    @_A
-000145f0: 7272 6179 4675 6e63 7469 6f6e 4865 6c70  rrayFunctionHelp
-00014600: 6572 2e72 6567 6973 7465 725f 6172 7261  er.register_arra
-00014610: 795f 6675 6e63 7469 6f6e 286e 702e 726f  y_function(np.ro
-00014620: 756e 6429 0d0a 2020 2020 405f 4172 7261  und)..    @_Arra
-00014630: 7946 756e 6374 696f 6e48 656c 7065 722e  yFunctionHelper.
-00014640: 7265 6769 7374 6572 5f61 7272 6179 5f66  register_array_f
-00014650: 756e 6374 696f 6e28 6e70 2e61 726f 756e  unction(np.aroun
-00014660: 6429 0d0a 2020 2020 405f 4172 7261 7946  d)..    @_ArrayF
-00014670: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
-00014680: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
-00014690: 6374 696f 6e28 6e70 2e72 6f75 6e64 5f29  ction(np.round_)
-000146a0: 2020 2320 4e2e 422c 2072 6f75 6e64 5f20    # N.B, round_ 
-000146b0: 6973 2061 6e20 616c 6961 7320 666f 7220  is an alias for 
-000146c0: 6172 6f75 6e64 0d0a 2020 2020 6465 6620  around..    def 
-000146d0: 5f72 6f75 6e64 5f28 612c 2064 6563 696d  _round_(a, decim
-000146e0: 616c 733d 4e6f 6e65 2c20 6f75 743d 4e6f  als=None, out=No
-000146f0: 6e65 293a 0d0a 2020 2020 2020 2020 2320  ne):..        # 
-00014700: 544f 444f 2068 616e 646c 6520 6064 6563  TODO handle `dec
-00014710: 696d 616c 6020 616e 6420 606f 7574 6020  imal` and `out` 
-00014720: 6172 6775 6d65 6e74 730d 0a20 2020 2020  arguments..     
-00014730: 2020 2023 2049 6620 6361 6c6c 6572 7320     # If callers 
-00014740: 6465 6369 6465 2074 6f20 7573 6520 7468  decide to use th
-00014750: 6973 2046 6173 7441 7272 6179 2073 7461  is FastArray sta
-00014760: 7469 636d 6574 686f 6420 6f75 7473 6964  ticmethod outsid
-00014770: 6520 7468 6520 7363 6f70 6520 6f66 2061  e the scope of a
-00014780: 7272 6179 2066 756e 6374 696f 6e20 7072  rray function pr
-00014790: 6f74 6f63 6f6c 0d0a 2020 2020 2020 2020  otocol..        
-000147a0: 2320 7072 6f76 6964 6520 6172 6775 6d65  # provide argume
-000147b0: 6e74 2063 6865 636b 7320 7369 6e63 6520  nt checks since 
-000147c0: 6974 206d 6179 2062 6563 6f6d 6520 756e  it may become un
-000147d0: 636c 6561 7220 7768 656e 2074 6869 6e67  clear when thing
-000147e0: 7320 6661 696c 2061 7420 7468 6520 4320  s fail at the C 
-000147f0: 6578 7465 6e73 696f 6e20 6c61 7965 722e  extension layer.
-00014800: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
-00014810: 2069 7369 6e73 7461 6e63 6528 612c 2046   isinstance(a, F
-00014820: 6173 7441 7272 6179 293a 0d0a 2020 2020  astArray):..    
-00014830: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-00014840: 6c75 6545 7272 6f72 2866 227b 4661 7374  lueError(f"{Fast
-00014850: 4172 7261 792e 5f5f 6e61 6d65 5f5f 7d2e  Array.__name__}.
-00014860: 5f72 6f75 6e64 5f20 6578 7065 6374 6564  _round_ expected
-00014870: 2046 6173 7441 7272 6179 2073 7562 7479   FastArray subty
-00014880: 7065 2c20 676f 7420 7b74 7970 6528 6129  pe, got {type(a)
-00014890: 7d22 290d 0a0d 0a20 2020 2020 2020 206f  }")....        o
-000148a0: 7269 6769 6e61 6c5f 6474 7970 6520 3d20  riginal_dtype = 
-000148b0: 612e 6474 7970 650d 0a20 2020 2020 2020  a.dtype..       
-000148c0: 2061 203d 2061 2e61 7374 7970 6528 6e70   a = a.astype(np
-000148d0: 2e66 6c6f 6174 3634 290d 0a20 2020 2020  .float64)..     
-000148e0: 2020 2066 6173 745f 6675 6e63 7469 6f6e     fast_function
-000148f0: 203d 2067 556e 6172 7955 4675 6e63 732e   = gUnaryUFuncs.
-00014900: 6765 7428 6e70 2e72 6f75 6e64 2c20 4e6f  get(np.round, No
-00014910: 6e65 290d 0a20 2020 2020 2020 2069 6620  ne)..        if 
-00014920: 6661 7374 5f66 756e 6374 696f 6e20 6973  fast_function is
-00014930: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-00014940: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
-00014950: 7272 6f72 280d 0a20 2020 2020 2020 2020  rror(..         
-00014960: 2020 2020 2020 2066 227b 4661 7374 4172         f"{FastAr
-00014970: 7261 792e 5f5f 6e61 6d65 5f5f 7d2e 5f72  ray.__name__}._r
-00014980: 6f75 6e64 5f20 756e 6861 6e64 6c65 6420  ound_ unhandled 
-00014990: 6172 7261 7920 6675 6e63 7469 6f6e 207b  array function {
-000149a0: 6e70 2e72 6f75 6e64 7d5c 6e4b 6e6f 776e  np.round}\nKnown
-000149b0: 206e 756d 7079 2061 7272 6179 2066 756e   numpy array fun
-000149c0: 6374 696f 6e20 746f 2072 6970 7461 626c  ction to riptabl
-000149d0: 6520 6675 6e63 7469 6f6e 733a 207b 7265  e functions: {re
-000149e0: 7072 2867 556e 6172 7955 4675 6e63 7329  pr(gUnaryUFuncs)
-000149f0: 7d22 0d0a 2020 2020 2020 2020 2020 2020  }"..            
-00014a00: 290d 0a0d 0a20 2020 2020 2020 2023 2046  )....        # F
-00014a10: 6f72 204d 4154 485f 4f50 4552 4154 494f  or MATH_OPERATIO
-00014a20: 4e2e 524f 554e 442c 205f 4241 5349 434d  N.ROUND, _BASICM
-00014a30: 4154 485f 4f4e 455f 494e 5055 5420 7265  ATH_ONE_INPUT re
-00014a40: 7475 726e 7320 616e 2061 7272 6179 2060  turns an array `
-00014a50: 6172 7261 7928 4e6f 6e65 2c20 6474 7970  array(None, dtyp
-00014a60: 653d 6f62 6a65 6374 2960 0d0a 2020 2020  e=object)`..    
-00014a70: 2020 2020 2320 6966 2074 6865 2069 6e70      # if the inp
-00014a80: 7574 2064 7479 7065 2069 7320 6e6f 7420  ut dtype is not 
-00014a90: 6120 666c 6f61 7436 342e 2041 7320 6120  a float64. As a 
-00014aa0: 776f 726b 6172 6f75 6e64 2063 6173 7420  workaround cast 
-00014ab0: 746f 2066 6c6f 6174 3634 2064 7479 7065  to float64 dtype
-00014ac0: 2c20 7065 7266 6f72 6d20 7468 6520 6f70  , perform the op
-00014ad0: 6572 6174 696f 6e2c 0d0a 2020 2020 2020  eration,..      
-00014ae0: 2020 2320 7468 656e 2063 6173 7420 6261    # then cast ba
-00014af0: 636b 2074 6f20 7468 6520 6f72 6967 696e  ck to the origin
-00014b00: 616c 2064 7479 7065 2e0d 0a20 2020 2020  al dtype...     
-00014b10: 2020 2072 6573 756c 7420 3d20 5479 7065     result = Type
-00014b20: 5265 6769 7374 6572 2e4d 6174 684c 6564  Register.MathLed
-00014b30: 6765 722e 5f42 4153 4943 4d41 5448 5f4f  ger._BASICMATH_O
-00014b40: 4e45 5f49 4e50 5554 2861 2c20 6661 7374  NE_INPUT(a, fast
-00014b50: 5f66 756e 6374 696f 6e2c 2030 290d 0a0d  _function, 0)...
-00014b60: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-00014b70: 6973 696e 7374 616e 6365 2872 6573 756c  isinstance(resul
-00014b80: 742c 2046 6173 7441 7272 6179 2920 616e  t, FastArray) an
-00014b90: 6420 6973 696e 7374 616e 6365 2872 6573  d isinstance(res
-00014ba0: 756c 742c 206e 702e 6e64 6172 7261 7929  ult, np.ndarray)
-00014bb0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-00014bc0: 6573 756c 7420 3d20 7265 7375 6c74 2e76  esult = result.v
-00014bd0: 6965 7728 4661 7374 4172 7261 7929 0d0a  iew(FastArray)..
-00014be0: 0d0a 2020 2020 2020 2020 6966 2072 6573  ..        if res
-00014bf0: 756c 742e 6474 7970 6520 213d 206f 7269  ult.dtype != ori
-00014c00: 6769 6e61 6c5f 6474 7970 653a 0d0a 2020  ginal_dtype:..  
-00014c10: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-00014c20: 203d 2072 6573 756c 742e 6173 7479 7065   = result.astype
-00014c30: 286f 7269 6769 6e61 6c5f 6474 7970 6529  (original_dtype)
-00014c40: 0d0a 0d0a 2020 2020 2020 2020 7265 7475  ....        retu
-00014c50: 726e 2072 6573 756c 740d 0a0d 0a20 2020  rn result....   
-00014c60: 2040 7374 6174 6963 6d65 7468 6f64 0d0a   @staticmethod..
-00014c70: 2020 2020 405f 4172 7261 7946 756e 6374      @_ArrayFunct
-00014c80: 696f 6e48 656c 7065 722e 7265 6769 7374  ionHelper.regist
-00014c90: 6572 5f61 7272 6179 5f66 756e 6374 696f  er_array_functio
-00014ca0: 6e28 6e70 2e73 756d 290d 0a20 2020 2064  n(np.sum)..    d
-00014cb0: 6566 205f 7375 6d28 612c 2061 7869 733d  ef _sum(a, axis=
-00014cc0: 4e6f 6e65 2c20 6474 7970 653d 4e6f 6e65  None, dtype=None
-00014cd0: 2c20 6f75 743d 4e6f 6e65 2c20 6b65 6570  , out=None, keep
-00014ce0: 6469 6d73 3d4e 6f6e 652c 2069 6e69 7469  dims=None, initi
-00014cf0: 616c 3d4e 6f6e 652c 2077 6865 7265 3d4e  al=None, where=N
-00014d00: 6f6e 6529 3a0d 0a20 2020 2020 2020 2072  one):..        r
-00014d10: 6573 756c 7420 3d20 7263 2e52 6564 7563  esult = rc.Reduc
-00014d20: 6528 612c 2052 4544 5543 455f 4655 4e43  e(a, REDUCE_FUNC
-00014d30: 5449 4f4e 532e 5245 4455 4345 5f53 554d  TIONS.REDUCE_SUM
-00014d40: 2c20 3029 0d0a 2020 2020 2020 2020 7265  , 0)..        re
-00014d50: 7475 726e 2046 6173 7441 7272 6179 2e5f  turn FastArray._
-00014d60: 7079 5f6e 756d 6265 725f 746f 5f6e 705f  py_number_to_np_
-00014d70: 6474 7970 6528 7265 7375 6c74 2c20 612e  dtype(result, a.
-00014d80: 6474 7970 6529 0d0a 0d0a 2020 2020 4073  dtype)....    @s
-00014d90: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
-00014da0: 2040 5f41 7272 6179 4675 6e63 7469 6f6e   @_ArrayFunction
-00014db0: 4865 6c70 6572 2e72 6567 6973 7465 725f  Helper.register_
-00014dc0: 6172 7261 795f 6675 6e63 7469 6f6e 286e  array_function(n
-00014dd0: 702e 6e61 6e73 756d 290d 0a20 2020 2064  p.nansum)..    d
-00014de0: 6566 205f 6e61 6e73 756d 2861 2c20 6178  ef _nansum(a, ax
-00014df0: 6973 3d4e 6f6e 652c 2064 7479 7065 3d4e  is=None, dtype=N
-00014e00: 6f6e 652c 206f 7574 3d4e 6f6e 652c 206b  one, out=None, k
-00014e10: 6565 7064 696d 733d 4e6f 6e65 293a 0d0a  eepdims=None):..
-00014e20: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00014e30: 2072 632e 5265 6475 6365 2861 2c20 5245   rc.Reduce(a, RE
-00014e40: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
-00014e50: 4544 5543 455f 4e41 4e53 554d 2c20 3029  EDUCE_NANSUM, 0)
-00014e60: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00014e70: 2046 6173 7441 7272 6179 2e5f 7079 5f6e   FastArray._py_n
-00014e80: 756d 6265 725f 746f 5f6e 705f 6474 7970  umber_to_np_dtyp
-00014e90: 6528 7265 7375 6c74 2c20 612e 6474 7970  e(result, a.dtyp
-00014ea0: 6529 0d0a 0d0a 2020 2020 4073 7461 7469  e)....    @stati
-00014eb0: 636d 6574 686f 640d 0a20 2020 2040 5f41  cmethod..    @_A
-00014ec0: 7272 6179 4675 6e63 7469 6f6e 4865 6c70  rrayFunctionHelp
-00014ed0: 6572 2e72 6567 6973 7465 725f 6172 7261  er.register_arra
-00014ee0: 795f 6675 6e63 7469 6f6e 286e 702e 7661  y_function(np.va
-00014ef0: 7229 0d0a 2020 2020 6465 6620 5f76 6172  r)..    def _var
-00014f00: 2861 2c20 6178 6973 3d4e 6f6e 652c 2064  (a, axis=None, d
-00014f10: 7479 7065 3d4e 6f6e 652c 206f 7574 3d4e  type=None, out=N
-00014f20: 6f6e 652c 2064 646f 663d 4e6f 6e65 2c20  one, ddof=None, 
-00014f30: 6b65 6570 6469 6d73 3d4e 6f6e 6529 3a0d  keepdims=None):.
-00014f40: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-00014f50: 3d20 7263 2e52 6564 7563 6528 612c 2052  = rc.Reduce(a, R
-00014f60: 4544 5543 455f 4655 4e43 5449 4f4e 532e  EDUCE_FUNCTIONS.
-00014f70: 5245 4455 4345 5f56 4152 2c20 3029 0d0a  REDUCE_VAR, 0)..
-00014f80: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-00014f90: 6173 7441 7272 6179 2e5f 7079 5f6e 756d  astArray._py_num
-00014fa0: 6265 725f 746f 5f6e 705f 6474 7970 6528  ber_to_np_dtype(
-00014fb0: 7265 7375 6c74 2c20 612e 6474 7970 6529  result, a.dtype)
-00014fc0: 0d0a 0d0a 2020 2020 4073 7461 7469 636d  ....    @staticm
-00014fd0: 6574 686f 640d 0a20 2020 2040 5f41 7272  ethod..    @_Arr
-00014fe0: 6179 4675 6e63 7469 6f6e 4865 6c70 6572  ayFunctionHelper
-00014ff0: 2e72 6567 6973 7465 725f 6172 7261 795f  .register_array_
-00015000: 6675 6e63 7469 6f6e 286e 702e 6e61 6e76  function(np.nanv
-00015010: 6172 290d 0a20 2020 2064 6566 205f 6e61  ar)..    def _na
-00015020: 6e76 6172 2861 2c20 6178 6973 3d4e 6f6e  nvar(a, axis=Non
-00015030: 652c 2064 7479 7065 3d4e 6f6e 652c 206f  e, dtype=None, o
-00015040: 7574 3d4e 6f6e 652c 2064 646f 663d 4e6f  ut=None, ddof=No
-00015050: 6e65 2c20 6b65 6570 6469 6d73 3d4e 6f6e  ne, keepdims=Non
-00015060: 6529 3a0d 0a20 2020 2020 2020 2072 6573  e):..        res
-00015070: 756c 7420 3d20 7263 2e52 6564 7563 6528  ult = rc.Reduce(
-00015080: 612c 2052 4544 5543 455f 4655 4e43 5449  a, REDUCE_FUNCTI
-00015090: 4f4e 532e 5245 4455 4345 5f4e 414e 5641  ONS.REDUCE_NANVA
-000150a0: 522c 2030 290d 0a20 2020 2020 2020 2072  R, 0)..        r
-000150b0: 6574 7572 6e20 4661 7374 4172 7261 792e  eturn FastArray.
-000150c0: 5f70 795f 6e75 6d62 6572 5f74 6f5f 6e70  _py_number_to_np
-000150d0: 5f64 7479 7065 2872 6573 756c 742c 2061  _dtype(result, a
-000150e0: 2e64 7479 7065 290d 0a0d 0a20 2020 2023  .dtype)....    #
-000150f0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00015100: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00015110: 2323 2323 2323 2323 2323 2323 0d0a 2020  ############..  
-00015120: 2020 2320 4865 6c70 6572 2073 6563 7469    # Helper secti
-00015130: 6f6e 0d0a 2020 2020 2323 2323 2323 2323  on..    ########
+0000e800: 616c 7365 5d29 0d0a 2020 2020 2020 2020  alse])..        
+0000e810: 3e3e 3e20 612e 6973 696e 2827 6127 290d  >>> a.isin('a').
+0000e820: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+0000e830: 6179 285b 2054 7275 652c 2020 4661 6c73  ay([ True,  Fals
+0000e840: 652c 2046 616c 7365 2c20 4661 6c73 652c  e, False, False,
+0000e850: 2046 616c 7365 5d29 0d0a 2020 2020 2020   False])..      
+0000e860: 2020 3e3e 3e20 612e 6973 696e 287b 2762    >>> a.isin({'b
+0000e870: 277d 290d 0a20 2020 2020 2020 2046 6173  '})..        Fas
+0000e880: 7441 7272 6179 285b 2046 616c 7365 2c20  tArray([ False, 
+0000e890: 5472 7565 2c20 4661 6c73 652c 2046 616c  True, False, Fal
+0000e8a0: 7365 2c20 4661 6c73 655d 290d 0a20 2020  se, False])..   
+0000e8b0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+0000e8c0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0000e8d0: 7465 7374 5f65 6c65 6d65 6e74 732c 2073  test_elements, s
+0000e8e0: 6574 293a 0d0a 2020 2020 2020 2020 2020  et):..          
+0000e8f0: 2020 7465 7374 5f65 6c65 6d65 6e74 7320    test_elements 
+0000e900: 3d20 6c69 7374 2874 6573 745f 656c 656d  = list(test_elem
+0000e910: 656e 7473 290d 0a0d 0a20 2020 2020 2020  ents)....       
+0000e920: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
+0000e930: 6365 2874 6573 745f 656c 656d 656e 7473  ce(test_elements
+0000e940: 2c20 6e70 2e6e 6461 7272 6179 293a 0d0a  , np.ndarray):..
+0000e950: 2020 2020 2020 2020 2020 2020 2320 616c              # al
+0000e960: 6967 6e20 6279 7465 2073 7472 696e 6720  ign byte string 
+0000e970: 7673 2075 6e69 636f 6465 0d0a 2020 2020  vs unicode..    
+0000e980: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+0000e990: 6474 7970 652e 6368 6172 2069 6e20 2253  dtype.char in "S
+0000e9a0: 5522 3a0d 0a20 2020 2020 2020 2020 2020  U":..           
+0000e9b0: 2020 2020 2069 6620 6e70 2e69 7373 6361       if np.issca
+0000e9c0: 6c61 7228 7465 7374 5f65 6c65 6d65 6e74  lar(test_element
+0000e9d0: 7329 3a0d 0a20 2020 2020 2020 2020 2020  s):..           
+0000e9e0: 2020 2020 2020 2020 2074 6573 745f 656c           test_el
+0000e9f0: 656d 656e 7473 203d 206e 702e 6173 6172  ements = np.asar
+0000ea00: 7261 7928 5b74 6573 745f 656c 656d 656e  ray([test_elemen
+0000ea10: 7473 5d2c 2064 7479 7065 3d73 656c 662e  ts], dtype=self.
+0000ea20: 6474 7970 652e 6368 6172 290d 0a20 2020  dtype.char)..   
+0000ea30: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0000ea40: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0000ea50: 2020 2020 2020 2020 7465 7374 5f65 6c65          test_ele
+0000ea60: 6d65 6e74 7320 3d20 6e70 2e61 7361 7272  ments = np.asarr
+0000ea70: 6179 2874 6573 745f 656c 656d 656e 7473  ay(test_elements
+0000ea80: 2c20 6474 7970 653d 7365 6c66 2e64 7479  , dtype=self.dty
+0000ea90: 7065 2e63 6861 7229 0d0a 2020 2020 2020  pe.char)..      
+0000eaa0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0000eab0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0000eac0: 6973 696e 7374 616e 6365 2874 6573 745f  isinstance(test_
+0000ead0: 656c 656d 656e 7473 2c20 7475 706c 6529  elements, tuple)
+0000eae0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000eaf0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+0000eb00: 7565 4572 726f 7228 0d0a 2020 2020 2020  ueError(..      
+0000eb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000eb20: 2020 2269 7369 6e20 646f 6573 206e 6f74    "isin does not
+0000eb30: 2063 7572 7265 6e74 6c79 2073 7570 706f   currently suppo
+0000eb40: 7274 2074 7570 6c65 732e 2020 496e 2074  rt tuples.  In t
+0000eb50: 6865 2066 7574 7572 6520 6120 7475 706c  he future a tupl
+0000eb60: 6520 7769 6c6c 2062 6520 7573 6564 2074  e will be used t
+0000eb70: 6f20 7265 7072 6573 656e 7420 6120 6d75  o represent a mu
+0000eb80: 6c74 692d 6b65 792e 220d 0a20 2020 2020  lti-key."..     
+0000eb90: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0000eba0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000ebb0: 2020 7465 7374 5f65 6c65 6d65 6e74 7320    test_elements 
+0000ebc0: 3d20 7263 2e41 7346 6173 7441 7272 6179  = rc.AsFastArray
+0000ebd0: 2874 6573 745f 656c 656d 656e 7473 290d  (test_elements).
+0000ebe0: 0a0d 0a20 2020 2020 2020 2074 7279 3a0d  ...        try:.
+0000ebf0: 0a20 2020 2020 2020 2020 2020 2023 206f  .            # o
+0000ec00: 7074 696d 697a 6174 696f 6e3a 2069 6620  ptimization: if 
+0000ec10: 7765 2068 6176 6520 6a75 7374 206f 6e65  we have just one
+0000ec20: 2065 6c65 6d65 6e74 2c20 7765 2063 616e   element, we can
+0000ec30: 206a 7573 7420 7061 7261 6c6c 656c 2063   just parallel c
+0000ec40: 6f6d 7061 7265 2074 6861 7420 6f6e 6520  ompare that one 
+0000ec50: 656c 656d 656e 740d 0a20 2020 2020 2020  element..       
+0000ec60: 2020 2020 2069 6620 6c65 6e28 7465 7374       if len(test
+0000ec70: 5f65 6c65 6d65 6e74 7329 203d 3d20 313a  _elements) == 1:
+0000ec80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000ec90: 2020 2320 7374 7269 6e67 2063 6f6d 7061    # string compa
+0000eca0: 7269 736f 6e20 746f 2069 6e74 2077 696c  rison to int wil
+0000ecb0: 6c20 6661 696c 0d0a 2020 2020 2020 2020  l fail..        
+0000ecc0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+0000ecd0: 2073 656c 6620 3d3d 2074 6573 745f 656c   self == test_el
+0000ece0: 656d 656e 7473 5b30 5d0d 0a20 2020 2020  ements[0]..     
+0000ecf0: 2020 2020 2020 2020 2020 2023 2063 6865             # che
+0000ed00: 636b 2066 6f72 2066 6169 6c65 6420 7265  ck for failed re
+0000ed10: 7375 6c74 0d0a 2020 2020 2020 2020 2020  sult..          
+0000ed20: 2020 2020 2020 6966 206e 702e 6973 7363        if np.issc
+0000ed30: 616c 6172 2872 6573 756c 7429 3a0d 0a20  alar(result):.. 
+0000ed40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ed50: 2020 2072 6573 756c 7420 3d20 6973 6d65     result = isme
+0000ed60: 6d62 6572 2873 656c 662c 2074 6573 745f  mber(self, test_
+0000ed70: 656c 656d 656e 7473 295b 305d 0d0a 2020  elements)[0]..  
+0000ed80: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+0000ed90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000eda0: 2072 6573 756c 7420 3d20 6973 6d65 6d62   result = ismemb
+0000edb0: 6572 2873 656c 662c 2074 6573 745f 656c  er(self, test_el
+0000edc0: 656d 656e 7473 295b 305d 0d0a 2020 2020  ements)[0]..    
+0000edd0: 2020 2020 2020 2020 6966 2069 6e76 6572          if inver
+0000ede0: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+0000edf0: 2020 2020 6e70 2e6c 6f67 6963 616c 5f6e      np.logical_n
+0000ee00: 6f74 2872 6573 756c 742c 206f 7574 3d72  ot(result, out=r
+0000ee10: 6573 756c 7429 0d0a 2020 2020 2020 2020  esult)..        
+0000ee20: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
+0000ee30: 740d 0a20 2020 2020 2020 2065 7863 6570  t..        excep
+0000ee40: 7420 4578 6365 7074 696f 6e3a 0d0a 2020  t Exception:..  
+0000ee50: 2020 2020 2020 2020 2020 2320 7075 6e74            # punt
+0000ee60: 206e 6f6e 2d73 7570 706f 7274 6564 2074   non-supported t
+0000ee70: 7970 6573 2074 6f20 6e75 6d70 790d 0a20  ypes to numpy.. 
+0000ee80: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0000ee90: 6e20 6e70 2e69 7369 6e28 7365 6c66 2e5f  n np.isin(self._
+0000eea0: 6e70 2c20 7465 7374 5f65 6c65 6d65 6e74  np, test_element
+0000eeb0: 732c 2061 7373 756d 655f 756e 6971 7565  s, assume_unique
+0000eec0: 3d61 7373 756d 655f 756e 6971 7565 2c20  =assume_unique, 
+0000eed0: 696e 7665 7274 3d69 6e76 6572 7429 0d0a  invert=invert)..
+0000eee0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+0000eef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ef00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ef10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ef20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ef30: 2d0d 0a20 2020 2064 6566 2062 6574 7765  -..    def betwe
+0000ef40: 656e 2873 656c 662c 206c 6f77 2c20 6869  en(self, low, hi
+0000ef50: 6768 2c20 696e 636c 7564 655f 6c6f 773a  gh, include_low:
+0000ef60: 2062 6f6f 6c20 3d20 5472 7565 2c20 696e   bool = True, in
+0000ef70: 636c 7564 655f 6869 6768 3a20 626f 6f6c  clude_high: bool
+0000ef80: 203d 2046 616c 7365 2920 2d3e 2046 6173   = False) -> Fas
+0000ef90: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
+0000efa0: 2022 2222 0d0a 2020 2020 2020 2020 5265   """..        Re
+0000efb0: 7475 726e 2061 2062 6f6f 6c65 616e 2060  turn a boolean `
+0000efc0: 4661 7374 4172 7261 7960 2069 6e64 6963  FastArray` indic
+0000efd0: 6174 696e 6720 7768 6963 6820 696e 7075  ating which inpu
+0000efe0: 7420 7661 6c75 6573 2061 7265 2069 6e20  t values are in 
+0000eff0: 6120 7370 6563 6966 6965 6420 696e 7465  a specified inte
+0000f000: 7276 616c 2e0d 0a0d 0a20 2020 2020 2020  rval.....       
+0000f010: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
+0000f020: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
+0000f030: 0a20 2020 2020 2020 206c 6f77 3a20 7363  .        low: sc
+0000f040: 616c 6172 2c20 6172 7261 790d 0a20 2020  alar, array..   
+0000f050: 2020 2020 2020 2020 204c 6f77 6572 2062           Lower b
+0000f060: 6f75 6e64 2066 6f72 2074 6865 2069 6e74  ound for the int
+0000f070: 6572 7661 6c2e 2049 6620 616e 2061 7272  erval. If an arr
+0000f080: 6179 2c20 6d75 7374 2062 6520 7468 6520  ay, must be the 
+0000f090: 7361 6d65 2073 697a 6520 6173 2060 7365  same size as `se
+0000f0a0: 6c66 602c 2061 6e64 2063 6f6d 7061 7269  lf`, and compari
+0000f0b0: 736f 6e73 2061 7265 2064 6f6e 6520 656c  sons are done el
+0000f0c0: 656d 656e 7477 6973 652e 0d0a 2020 2020  ementwise...    
+0000f0d0: 2020 2020 6869 6768 3a20 7363 616c 6172      high: scalar
+0000f0e0: 2c20 6172 7261 790d 0a20 2020 2020 2020  , array..       
+0000f0f0: 2020 2020 2055 7070 6572 2062 6f75 6e64       Upper bound
+0000f100: 2066 6f72 2074 6865 2069 6e74 6572 7661   for the interva
+0000f110: 6c2e 2049 6620 616e 2061 7272 6179 2c20  l. If an array, 
+0000f120: 6d75 7374 2062 6520 7468 6520 7361 6d65  must be the same
+0000f130: 2073 697a 6520 6173 2060 7365 6c66 602c   size as `self`,
+0000f140: 2061 6e64 2063 6f6d 7061 7269 736f 6e73   and comparisons
+0000f150: 2061 7265 2064 6f6e 6520 656c 656d 656e   are done elemen
+0000f160: 7477 6973 652e 0d0a 2020 2020 2020 2020  twise...        
+0000f170: 696e 636c 7564 655f 6c6f 773a 2062 6f6f  include_low: boo
+0000f180: 6c2c 2064 6566 6175 6c74 2054 7275 650d  l, default True.
+0000f190: 0a20 2020 2020 2020 2020 2020 2053 7065  .            Spe
+0000f1a0: 6369 6669 6573 2077 6865 7468 6572 2060  cifies whether `
+0000f1b0: 6c6f 7760 2069 7320 696e 636c 7564 6564  low` is included
+0000f1c0: 2077 6865 6e20 7065 7266 6f72 6d69 6e67   when performing
+0000f1d0: 2063 6f6d 7061 7269 736f 6e73 2e0d 0a20   comparisons... 
+0000f1e0: 2020 2020 2020 2069 6e63 6c75 6465 5f68         include_h
+0000f1f0: 6967 683a 2062 6f6f 6c2c 2064 6566 6175  igh: bool, defau
+0000f200: 6c74 2046 616c 7365 0d0a 2020 2020 2020  lt False..      
+0000f210: 2020 2020 2020 5370 6563 6966 6965 7320        Specifies 
+0000f220: 7768 6574 6865 7220 6068 6967 6860 2069  whether `high` i
+0000f230: 7320 696e 636c 7564 6564 2077 6865 6e20  s included when 
+0000f240: 7065 7266 6f72 6d69 6e67 2063 6f6d 7061  performing compa
+0000f250: 7269 736f 6e73 2e0d 0a0d 0a20 2020 2020  risons.....     
+0000f260: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
+0000f270: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
+0000f280: 2020 2020 2046 6173 7441 7272 6179 0d0a       FastArray..
+0000f290: 2020 2020 2020 2020 2020 2020 4120 626f              A bo
+0000f2a0: 6f6c 6561 6e20 6046 6173 7441 7272 6179  olean `FastArray
+0000f2b0: 6020 696e 6469 6361 7469 6e67 2077 6869  ` indicating whi
+0000f2c0: 6368 2069 6e70 7574 2076 616c 7565 7320  ch input values 
+0000f2d0: 6172 6520 696e 2061 2073 7065 6369 6669  are in a specifi
+0000f2e0: 6564 2069 6e74 6572 7661 6c2e 0d0a 0d0a  ed interval.....
+0000f2f0: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
+0000f300: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+0000f310: 2d2d 0d0a 2020 2020 2020 2020 5370 6563  --..        Spec
+0000f320: 6966 7920 616e 2069 6e74 6572 7661 6c20  ify an interval 
+0000f330: 7573 696e 6720 7363 616c 6172 733a 0d0a  using scalars:..
+0000f340: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
+0000f350: 3d20 7274 2e46 4128 5b39 2c20 322c 2033  = rt.FA([9, 2, 3
+0000f360: 2c20 352c 2038 2c20 392c 2031 2c20 342c  , 5, 8, 9, 1, 4,
+0000f370: 2036 5d29 0d0a 2020 2020 2020 2020 3e3e   6])..        >>
+0000f380: 3e20 612e 6265 7477 6565 6e28 352c 2039  > a.between(5, 9
+0000f390: 2c20 696e 636c 7564 655f 6c6f 773d 4661  , include_low=Fa
+0000f3a0: 6c73 6529 2020 2320 4578 636c 7564 6520  lse)  # Exclude 
+0000f3b0: 6035 6020 286c 6566 7420 656e 6470 6f69  `5` (left endpoi
+0000f3c0: 6e74 290d 0a20 2020 2020 2020 2046 6173  nt)..        Fas
+0000f3d0: 7441 7272 6179 285b 4661 6c73 652c 2046  tArray([False, F
+0000f3e0: 616c 7365 2c20 4661 6c73 652c 2046 616c  alse, False, Fal
+0000f3f0: 7365 2c20 2054 7275 652c 2046 616c 7365  se,  True, False
+0000f400: 2c20 4661 6c73 652c 2046 616c 7365 2c20  , False, False, 
+0000f410: 2054 7275 655d 290d 0a0d 0a20 2020 2020   True])....     
+0000f420: 2020 2053 7065 6369 6679 2061 6e20 696e     Specify an in
+0000f430: 7465 7276 616c 2075 7369 6e67 2061 7272  terval using arr
+0000f440: 6179 733a 0d0a 0d0a 2020 2020 2020 2020  ays:....        
+0000f450: 3e3e 3e20 6132 203d 2072 742e 4641 285b  >>> a2 = rt.FA([
+0000f460: 312c 2032 2c20 332c 2034 2c20 355d 290d  1, 2, 3, 4, 5]).
+0000f470: 0a20 2020 2020 2020 203e 3e3e 2061 322e  .        >>> a2.
+0000f480: 6265 7477 6565 6e28 5b31 2c20 332c 2035  between([1, 3, 5
+0000f490: 2c20 352c 2035 5d2c 205b 322c 2034 2c20  , 5, 5], [2, 4, 
+0000f4a0: 362c 2036 2c20 365d 290d 0a20 2020 2020  6, 6, 6])..     
+0000f4b0: 2020 2046 6173 7441 7272 6179 285b 2054     FastArray([ T
+0000f4c0: 7275 652c 2046 616c 7365 2c20 4661 6c73  rue, False, Fals
+0000f4d0: 652c 2046 616c 7365 2c20 2054 7275 655d  e, False,  True]
+0000f4e0: 290d 0a0d 0a20 2020 2020 2020 2053 7065  )....        Spe
+0000f4f0: 6369 6679 2061 6e20 696e 7465 7276 616c  cify an interval
+0000f500: 206d 6978 696e 6720 7363 616c 6172 2061   mixing scalar a
+0000f510: 6e64 2061 7272 6179 2062 6f75 6e64 733a  nd array bounds:
+0000f520: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
+0000f530: 6133 203d 2072 742e 4641 285b 312c 2032  a3 = rt.FA([1, 2
+0000f540: 2c20 332c 2034 2c20 355d 290d 0a20 2020  , 3, 4, 5])..   
+0000f550: 2020 2020 203e 3e3e 2061 332e 6265 7477       >>> a3.betw
+0000f560: 6565 6e28 322c 205b 322c 2034 2c20 362c  een(2, [2, 4, 6,
+0000f570: 2036 2c20 365d 290d 0a20 2020 2020 2020   6, 6])..       
+0000f580: 2046 6173 7441 7272 6179 285b 4661 6c73   FastArray([Fals
+0000f590: 652c 2020 5472 7565 2c20 2054 7275 652c  e,  True,  True,
+0000f5a0: 2020 5472 7565 2c20 2054 7275 655d 290d    True,  True]).
+0000f5b0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+0000f5c0: 2020 2020 2020 6c6f 7720 3d20 6173 616e        low = asan
+0000f5d0: 7961 7272 6179 286c 6f77 290d 0a20 2020  yarray(low)..   
+0000f5e0: 2020 2020 2068 6967 6820 3d20 6173 616e       high = asan
+0000f5f0: 7961 7272 6179 2868 6967 6829 0d0a 0d0a  yarray(high)....
+0000f600: 2020 2020 2020 2020 6966 2069 6e63 6c75          if inclu
+0000f610: 6465 5f6c 6f77 3a0d 0a20 2020 2020 2020  de_low:..       
+0000f620: 2020 2020 2072 6574 203d 2073 656c 6620       ret = self 
+0000f630: 3e3d 206c 6f77 0d0a 2020 2020 2020 2020  >= low..        
+0000f640: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+0000f650: 2020 2072 6574 203d 2073 656c 6620 3e20     ret = self > 
+0000f660: 6c6f 770d 0a20 2020 2020 2020 2069 6620  low..        if 
+0000f670: 696e 636c 7564 655f 6869 6768 3a0d 0a20  include_high:.. 
+0000f680: 2020 2020 2020 2020 2020 2072 6574 2026             ret &
+0000f690: 3d20 7365 6c66 203c 3d20 6869 6768 0d0a  = self <= high..
+0000f6a0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+0000f6b0: 2020 2020 2020 2020 2020 2072 6574 2026             ret &
+0000f6c0: 3d20 7365 6c66 203c 2068 6967 680d 0a20  = self < high.. 
+0000f6d0: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+0000f6e0: 740d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  t....    # -----
+0000f6f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f700: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f710: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f720: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f730: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2073  -----..    def s
+0000f740: 616d 706c 6528 0d0a 2020 2020 2020 2020  ample(..        
+0000f750: 7365 6c66 2c0d 0a20 2020 2020 2020 204e  self,..        N
+0000f760: 3a20 696e 7420 3d20 3130 2c0d 0a20 2020  : int = 10,..   
+0000f770: 2020 2020 2066 696c 7465 723a 204f 7074       filter: Opt
+0000f780: 696f 6e61 6c5b 6e70 2e6e 6461 7272 6179  ional[np.ndarray
+0000f790: 5d20 3d20 4e6f 6e65 2c0d 0a20 2020 2020  ] = None,..     
+0000f7a0: 2020 2073 6565 643a 204f 7074 696f 6e61     seed: Optiona
+0000f7b0: 6c5b 556e 696f 6e5b 696e 742c 2053 6571  l[Union[int, Seq
+0000f7c0: 7565 6e63 655b 696e 745d 2c20 6e70 2e72  uence[int], np.r
+0000f7d0: 616e 646f 6d2e 5365 6564 5365 7175 656e  andom.SeedSequen
+0000f7e0: 6365 2c20 6e70 2e72 616e 646f 6d2e 4765  ce, np.random.Ge
+0000f7f0: 6e65 7261 746f 725d 5d20 3d20 4e6f 6e65  nerator]] = None
+0000f800: 2c0d 0a20 2020 2029 202d 3e20 4661 7374  ,..    ) -> Fast
+0000f810: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
+0000f820: 2222 220d 0a20 2020 2020 2020 2052 6574  """..        Ret
+0000f830: 7572 6e20 6120 6769 7665 6e20 6e75 6d62  urn a given numb
+0000f840: 6572 206f 6620 7261 6e64 6f6d 6c79 2073  er of randomly s
+0000f850: 656c 6563 7465 6420 7661 6c75 6573 2066  elected values f
+0000f860: 726f 6d20 6120 6046 6173 7441 7272 6179  rom a `FastArray
+0000f870: 602e 0d0a 0d0a 2020 2020 2020 2020 5061  `.....        Pa
+0000f880: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+0000f890: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+0000f8a0: 2020 2020 2020 4e20 3a20 696e 742c 2064        N : int, d
+0000f8b0: 6566 6175 6c74 2031 300d 0a20 2020 2020  efault 10..     
+0000f8c0: 2020 2020 2020 204e 756d 6265 7220 6f66         Number of
+0000f8d0: 2076 616c 7565 7320 746f 2073 656c 6563   values to selec
+0000f8e0: 742e 2054 6865 2065 6e74 6972 6520 6172  t. The entire ar
+0000f8f0: 7261 7920 6973 2072 6574 7572 6e65 6420  ray is returned 
+0000f900: 6966 2060 4e60 2069 7320 6772 6561 7465  if `N` is greate
+0000f910: 7220 7468 616e 2074 6865 2073 697a 6520  r than the size 
+0000f920: 6f66 2074 6865 2061 7272 6179 2e0d 0a20  of the array... 
+0000f930: 2020 2020 2020 2066 696c 7465 7220 3a20         filter : 
+0000f940: 6172 7261 7920 2862 6f6f 6c20 6f72 2069  array (bool or i
+0000f950: 6e74 292c 206f 7074 696f 6e61 6c0d 0a20  nt), optional.. 
+0000f960: 2020 2020 2020 2020 2020 2041 2062 6f6f             A boo
+0000f970: 6c65 616e 206d 6173 6b20 6f72 2069 6e64  lean mask or ind
+0000f980: 6578 2061 7272 6179 2074 6f20 6669 6c74  ex array to filt
+0000f990: 6572 2076 616c 7565 7320 6265 666f 7265  er values before
+0000f9a0: 2073 656c 6563 7469 6f6e 2e20 4e6f 7465   selection. Note
+0000f9b0: 2074 6861 7420 756e 7469 6c20 6120 7265   that until a re
+0000f9c0: 706f 7274 6564 2062 7567 2069 7320 6669  ported bug is fi
+0000f9d0: 7865 642c 206e 6f20 6572 726f 7220 6973  xed, no error is
+0000f9e0: 2072 6169 7365 6420 616e 6420 756e 6578   raised and unex
+0000f9f0: 7065 6374 6564 2072 6573 756c 7473 206d  pected results m
+0000fa00: 6179 206f 6363 7572 2077 6865 6e20 6120  ay occur when a 
+0000fa10: 626f 6f6c 6561 6e20 6d61 736b 2061 7272  boolean mask arr
+0000fa20: 6179 2077 6974 6820 6120 6c65 6e67 7468  ay with a length
+0000fa30: 2064 6966 6665 7265 6e74 2066 726f 6d20   different from 
+0000fa40: 7468 6174 206f 6620 7468 6520 6172 7261  that of the arra
+0000fa50: 7920 6974 2773 206d 6173 6b69 6e67 2069  y it's masking i
+0000fa60: 7320 7061 7373 6564 2061 7320 6120 6669  s passed as a fi
+0000fa70: 6c74 6572 2e0d 0a20 2020 2020 2020 2073  lter...        s
+0000fa80: 6565 6420 3a20 696e 7420 6f72 206f 7468  eed : int or oth
+0000fa90: 6572 2074 7970 6573 2c20 6f70 7469 6f6e  er types, option
+0000faa0: 616c 0d0a 2020 2020 2020 2020 2020 2020  al..            
+0000fab0: 4120 7365 6564 2074 6f20 696e 6974 6961  A seed to initia
+0000fac0: 6c69 7a65 2074 6865 2072 616e 646f 6d20  lize the random 
+0000fad0: 6e75 6d62 6572 2067 656e 6572 6174 6f72  number generator
+0000fae0: 2e20 4966 206f 6e65 2069 7320 6e6f 7420  . If one is not 
+0000faf0: 7072 6f76 6964 6564 2c20 7468 6520 6765  provided, the ge
+0000fb00: 6e65 7261 746f 7220 6973 2069 6e69 7469  nerator is initi
+0000fb10: 616c 697a 6564 2075 7369 6e67 2072 616e  alized using ran
+0000fb20: 646f 6d20 6461 7461 2066 726f 6d20 7468  dom data from th
+0000fb30: 6520 4f53 2e20 466f 7220 6465 7461 696c  e OS. For detail
+0000fb40: 7320 616e 6420 6f74 6865 7220 6163 6365  s and other acce
+0000fb50: 7074 6564 2074 7970 6573 2c20 7365 6520  pted types, see 
+0000fb60: 7468 6520 6073 6565 6460 2070 6172 616d  the `seed` param
+0000fb70: 6574 6572 2066 6f72 2060 6e75 6d70 792e  eter for `numpy.
+0000fb80: 7261 6e64 6f6d 2e64 6566 6175 6c74 5f72  random.default_r
+0000fb90: 6e67 602e 0d0a 0d0a 2020 2020 2020 2020  ng`.....        
+0000fba0: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
+0000fbb0: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
+0000fbc0: 2020 4661 7374 4172 7261 790d 0a20 2020    FastArray..   
+0000fbd0: 2020 2020 2020 2020 2041 206e 6577 2060           A new `
+0000fbe0: 4661 7374 4172 7261 7960 2063 6f6e 7461  FastArray` conta
+0000fbf0: 696e 696e 6720 7468 6520 7261 6e64 6f6d  ining the random
+0000fc00: 6c79 2073 656c 6563 7465 6420 7661 6c75  ly selected valu
+0000fc10: 6573 2e0d 0a0d 0a20 2020 2020 2020 2053  es.....        S
+0000fc20: 6565 2041 6c73 6f0d 0a20 2020 2020 2020  ee Also..       
+0000fc30: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+0000fc40: 2020 202e 4461 7461 7365 742e 7361 6d70     .Dataset.samp
+0000fc50: 6c65 203a 2052 6574 7572 6e20 6120 7370  le : Return a sp
+0000fc60: 6563 6966 6965 6420 6e75 6d62 6572 206f  ecified number o
+0000fc70: 6620 7261 6e64 6f6d 6c79 2073 656c 6563  f randomly selec
+0000fc80: 7465 6420 726f 7773 2066 726f 6d20 6120  ted rows from a 
+0000fc90: 602e 4461 7461 7365 7460 2e0d 0a0d 0a20  `.Dataset`..... 
+0000fca0: 2020 2020 2020 2045 7861 6d70 6c65 730d         Examples.
+0000fcb0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0000fcc0: 2d0d 0a20 2020 2020 2020 204e 6f20 7361  -..        No sa
+0000fcd0: 6d70 6c65 2073 697a 6520 7370 6563 6966  mple size specif
+0000fce0: 6965 643a 0d0a 0d0a 2020 2020 2020 2020  ied:....        
+0000fcf0: 3e3e 3e20 6120 3d20 7274 2e46 4128 5b31  >>> a = rt.FA([1
+0000fd00: 2c20 322c 2033 2c20 342c 2035 2c20 362c  , 2, 3, 4, 5, 6,
+0000fd10: 2037 2c20 382c 2039 2c20 3130 2c20 3131   7, 8, 9, 10, 11
+0000fd20: 2c20 3132 5d29 0d0a 2020 2020 2020 2020  , 12])..        
+0000fd30: 3e3e 3e20 612e 7361 6d70 6c65 2829 2020  >>> a.sample()  
+0000fd40: 2320 3130 2072 616e 646f 6d6c 7920 7365  # 10 randomly se
+0000fd50: 6c65 6374 6564 2076 616c 7565 7320 7265  lected values re
+0000fd60: 7475 726e 6564 2e0d 0a20 2020 2020 2020  turned...       
+0000fd70: 2046 6173 7441 7272 6179 285b 2031 2c20   FastArray([ 1, 
+0000fd80: 2032 2c20 2033 2c20 2034 2c20 2035 2c20   2,  3,  4,  5, 
+0000fd90: 2036 2c20 2037 2c20 2039 2c20 3130 2c20   6,  7,  9, 10, 
+0000fda0: 3131 5d29 2020 2320 5261 6e64 6f6d 0d0a  11])  # Random..
+0000fdb0: 0d0a 2020 2020 2020 2020 5361 6d70 6c65  ..        Sample
+0000fdc0: 2033 2076 616c 7565 733a 0d0a 0d0a 2020   3 values:....  
+0000fdd0: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
+0000fde0: 2e46 4128 5b31 2c20 322c 2033 2c20 342c  .FA([1, 2, 3, 4,
+0000fdf0: 2035 2c20 362c 2037 2c20 382c 2039 2c20   5, 6, 7, 8, 9, 
+0000fe00: 3130 2c20 3131 2c20 3132 5d29 0d0a 2020  10, 11, 12])..  
+0000fe10: 2020 2020 2020 3e3e 3e20 612e 7361 6d70        >>> a.samp
+0000fe20: 6c65 2833 290d 0a20 2020 2020 2020 2046  le(3)..        F
+0000fe30: 6173 7441 7272 6179 285b 312c 2034 2c20  astArray([1, 4, 
+0000fe40: 395d 2920 2023 2052 616e 646f 6d0d 0a0d  9])  # Random...
+0000fe50: 0a20 2020 2020 2020 2053 7065 6369 6679  .        Specify
+0000fe60: 2061 2073 616d 706c 6520 7369 7a65 206c   a sample size l
+0000fe70: 6172 6765 7220 7468 616e 2074 6865 2061  arger than the a
+0000fe80: 7272 6179 3a0d 0a0d 0a20 2020 2020 2020  rray:....       
+0000fe90: 203e 3e3e 2061 3220 3d20 7274 2e46 4128   >>> a2 = rt.FA(
+0000fea0: 5b31 2c20 322c 2033 2c20 342c 2035 5d29  [1, 2, 3, 4, 5])
+0000feb0: 0d0a 2020 2020 2020 2020 3e3e 3e20 6132  ..        >>> a2
+0000fec0: 2e73 616d 706c 6528 3130 3029 2020 2320  .sample(100)  # 
+0000fed0: 5468 6520 656e 7469 7265 2061 7272 6179  The entire array
+0000fee0: 2069 7320 7265 7475 726e 6564 2e0d 0a20   is returned... 
+0000fef0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+0000ff00: 285b 312c 2032 2c20 332c 2034 2c20 355d  ([1, 2, 3, 4, 5]
+0000ff10: 290d 0a0d 0a20 2020 2020 2020 2053 7065  )....        Spe
+0000ff20: 6369 6679 2061 6e20 696e 6465 7820 6172  cify an index ar
+0000ff30: 7261 7920 666f 7220 6669 6c74 6572 696e  ray for filterin
+0000ff40: 673a 0d0a 0d0a 2020 2020 2020 2020 3e3e  g:....        >>
+0000ff50: 3e20 6133 203d 2072 742e 4641 285b 2754  > a3 = rt.FA(['T
+0000ff60: 534c 4127 2c27 414d 5a4e 272c 2749 424d  SLA','AMZN','IBM
+0000ff70: 272c 2027 5350 5927 2c20 2747 4d45 272c  ', 'SPY', 'GME',
+0000ff80: 2027 4141 504c 272c 2027 4642 272c 2027   'AAPL', 'FB', '
+0000ff90: 474f 4f47 272c 2027 4d53 4654 272c 2027  GOOG', 'MSFT', '
+0000ffa0: 5542 4552 275d 2920 2023 2043 7265 6174  UBER'])  # Creat
+0000ffb0: 6520 7361 6d70 6c65 2064 6174 612e 0d0a  e sample data...
+0000ffc0: 2020 2020 2020 2020 3e3e 3e20 6669 6c74          >>> filt
+0000ffd0: 6572 203d 2072 742e 4641 285b 302c 2031  er = rt.FA([0, 1
+0000ffe0: 2c20 332c 2037 5d29 2020 2320 5370 6563  , 3, 7])  # Spec
+0000fff0: 6966 7920 696e 6469 6365 7320 6f66 2061  ify indices of a
+00010000: 3320 746f 2074 616b 6520 7468 6520 7361  3 to take the sa
+00010010: 6d70 6c65 2066 726f 6d2e 0d0a 2020 2020  mple from...    
+00010020: 2020 2020 3e3e 3e20 6133 2e73 616d 706c      >>> a3.sampl
+00010030: 6528 322c 2066 696c 7465 7229 0d0a 2020  e(2, filter)..  
+00010040: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+00010050: 5b62 2754 534c 4127 2c20 6227 474f 4f47  [b'TSLA', b'GOOG
+00010060: 275d 2c20 6474 7970 653d 277c 5334 2729  '], dtype='|S4')
+00010070: 2020 2320 5261 6e64 6f6d 0d0a 0d0a 2020    # Random....  
+00010080: 2020 2020 2020 5370 6563 6966 7920 6120        Specify a 
+00010090: 626f 6f6c 6561 6e20 6d61 736b 2061 7272  boolean mask arr
+000100a0: 6179 2066 6f72 2066 696c 7465 7269 6e67  ay for filtering
+000100b0: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
+000100c0: 2061 332e 7361 6d70 6c65 2838 2c20 6669   a3.sample(8, fi
+000100d0: 6c74 6572 3d72 742e 4641 2861 3320 213d  lter=rt.FA(a3 !=
+000100e0: 2027 5350 5927 2929 0d0a 2020 2020 2020   'SPY'))..      
+000100f0: 2020 4661 7374 4172 7261 7928 5b62 2754    FastArray([b'T
+00010100: 534c 4127 2c20 6227 4942 4d27 2c20 6227  SLA', b'IBM', b'
+00010110: 474d 4527 2c20 6227 4141 504c 272c 2062  GME', b'AAPL', b
+00010120: 2746 4227 2c20 6227 474f 4f47 272c 2062  'FB', b'GOOG', b
+00010130: 274d 5346 5427 2c0d 0a20 2020 2020 2020  'MSFT',..       
+00010140: 2020 2020 2020 2020 2020 2020 6227 5542              b'UB
+00010150: 4552 275d 2c20 6474 7970 653d 277c 5334  ER'], dtype='|S4
+00010160: 2729 2020 2320 5261 6e64 6f6d 0d0a 2020  ')  # Random..  
+00010170: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+00010180: 2020 2072 6574 7572 6e20 7361 6d70 6c65     return sample
+00010190: 2873 656c 662c 204e 3d4e 2c20 6669 6c74  (self, N=N, filt
+000101a0: 6572 3d66 696c 7465 722c 2073 6565 643d  er=filter, seed=
+000101b0: 7365 6564 290d 0a0d 0a20 2020 2023 202d  seed)....    # -
+000101c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000101d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000101e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000101f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010200: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
+00010210: 6566 2064 7570 6c69 6361 7465 6428 7365  ef duplicated(se
+00010220: 6c66 2c20 6b65 6570 3d22 6669 7273 7422  lf, keep="first"
+00010230: 2c20 6869 6768 5f75 6e69 7175 653d 4661  , high_unique=Fa
+00010240: 6c73 6529 202d 3e20 4661 7374 4172 7261  lse) -> FastArra
+00010250: 793a 0d0a 2020 2020 2020 2020 2222 220d  y:..        """.
+00010260: 0a20 2020 2020 2020 2052 6574 7572 6e20  .        Return 
+00010270: 6120 626f 6f6c 6561 6e20 6046 6173 7441  a boolean `FastA
+00010280: 7272 6179 6020 696e 6469 6361 7469 6e67  rray` indicating
+00010290: 2060 5472 7565 6020 666f 7220 6475 706c   `True` for dupl
+000102a0: 6963 6174 6520 6974 656d 7320 696e 2074  icate items in t
+000102b0: 6865 2069 6e70 7574 2061 7272 6179 2e0d  he input array..
+000102c0: 0a0d 0a20 2020 2020 2020 2050 6172 616d  ...        Param
+000102d0: 6574 6572 730d 0a20 2020 2020 2020 202d  eters..        -
+000102e0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020  ---------..     
+000102f0: 2020 206b 6565 7020 3a20 7b27 6669 7273     keep : {'firs
+00010300: 7427 2c20 276c 6173 7427 2c20 2746 616c  t', 'last', 'Fal
+00010310: 7365 277d 2c20 6465 6661 756c 7420 2766  se'}, default 'f
+00010320: 6972 7374 270d 0a20 2020 2020 2020 2020  irst'..         
+00010330: 2020 202d 2027 6669 7273 7427 203a 204d     - 'first' : M
+00010340: 6172 6b20 6561 6368 2064 7570 6c69 6361  ark each duplica
+00010350: 7465 2061 7320 6054 7275 6560 2065 7863  te as `True` exc
+00010360: 6570 7420 666f 7220 7468 6520 6669 7273  ept for the firs
+00010370: 7420 6f63 6375 7272 656e 6365 2e0d 0a20  t occurrence... 
+00010380: 2020 2020 2020 2020 2020 202d 2027 6c61             - 'la
+00010390: 7374 2720 3a20 4d61 726b 2065 6163 6820  st' : Mark each 
+000103a0: 6475 706c 6963 6174 6520 6173 2060 5472  duplicate as `Tr
+000103b0: 7565 6020 6578 6365 7074 2066 6f72 2074  ue` except for t
+000103c0: 6865 206c 6173 7420 6f63 6375 7272 656e  he last occurren
+000103d0: 6365 2e0d 0a20 2020 2020 2020 2020 2020  ce...           
+000103e0: 202d 2027 4661 6c73 6527 203a 204d 6172   - 'False' : Mar
+000103f0: 6b20 616c 6c20 6475 706c 6963 6174 6573  k all duplicates
+00010400: 2061 7320 6054 7275 6560 2e0d 0a20 2020   as `True`...   
+00010410: 2020 2020 2068 6967 685f 756e 6971 7565       high_unique
+00010420: 203a 2062 6f6f 6c2c 2064 6566 6175 6c74   : bool, default
+00010430: 2060 4661 6c73 6560 2028 6861 7368 696e   `False` (hashin
+00010440: 6729 0d0a 2020 2020 2020 2020 2020 2020  g)..            
+00010450: 436f 6e74 726f 6c73 2077 6865 7468 6572  Controls whether
+00010460: 2074 6865 2066 756e 6374 696f 6e20 7573   the function us
+00010470: 6573 2068 6173 6869 6e67 2d20 6f72 2073  es hashing- or s
+00010480: 6f72 7469 6e67 2d62 6173 6564 206c 6f67  orting-based log
+00010490: 6963 2074 6f20 6669 6e64 2075 6e69 7175  ic to find uniqu
+000104a0: 6520 7661 6c75 6573 2069 6e20 7468 6520  e values in the 
+000104b0: 696e 7075 7420 6172 7261 792e 0d0a 2020  input array...  
+000104c0: 2020 2020 2020 2020 2020 4966 2079 6f75            If you
+000104d0: 7220 6461 7461 2068 6173 2061 2068 6967  r data has a hig
+000104e0: 6820 7072 6f70 6f72 7469 6f6e 206f 6620  h proportion of 
+000104f0: 756e 6971 7565 2076 616c 7565 732c 2073  unique values, s
+00010500: 6574 2074 6f20 6054 7275 6560 2066 6f72  et to `True` for
+00010510: 2066 6173 7465 7220 7065 7266 6f72 6d61   faster performa
+00010520: 6e63 652e 0d0a 0d0a 2020 2020 2020 2020  nce.....        
+00010530: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
+00010540: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
+00010550: 2020 4661 7374 4172 7261 790d 0a20 2020    FastArray..   
+00010560: 2020 2020 2020 2020 2041 2062 6f6f 6c65           A boole
+00010570: 616e 2060 4661 7374 4172 7261 7960 2069  an `FastArray` i
+00010580: 6e64 6963 6174 696e 6720 6054 7275 6560  ndicating `True`
+00010590: 2066 6f72 2064 7570 6c69 6361 7465 2069   for duplicate i
+000105a0: 7465 6d73 2069 6e20 7468 6520 696e 7075  tems in the inpu
+000105b0: 7420 6172 7261 792e 0d0a 0d0a 2020 2020  t array.....    
+000105c0: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
+000105d0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
+000105e0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+000105f0: 792e 6e75 6e69 7175 6520 3a20 5265 7475  y.nunique : Retu
+00010600: 726e 7320 7468 6520 6e75 6d62 6572 206f  rns the number o
+00010610: 6620 756e 6971 7565 2076 616c 7565 7320  f unique values 
+00010620: 696e 2061 6e20 6172 7261 792e 0d0a 2020  in an array...  
+00010630: 2020 2020 2020 2e44 6174 6173 6574 2e64        .Dataset.d
+00010640: 7570 6c69 6361 7465 6420 3a20 5265 7475  uplicated : Retu
+00010650: 726e 7320 6120 626f 6f6c 6561 6e20 6046  rns a boolean `F
+00010660: 6173 7441 7272 6179 6020 696e 6469 6361  astArray` indica
+00010670: 7469 6e67 2060 5472 7565 6020 666f 7220  ting `True` for 
+00010680: 6475 706c 6963 6174 6520 726f 7773 2e0d  duplicate rows..
+00010690: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
+000106a0: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
+000106b0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2045  -----..        E
+000106c0: 7863 6c75 6465 2074 6865 2066 6972 7374  xclude the first
+000106d0: 206f 6363 7572 7265 6e63 6520 6f66 2065   occurrence of e
+000106e0: 6163 6820 6475 706c 6963 6174 6520 2875  ach duplicate (u
+000106f0: 7365 2074 6865 2064 6566 6175 6c74 2060  se the default `
+00010700: 6b65 6570 6020 7661 6c75 6529 3a0d 0a0d  keep` value):...
+00010710: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
+00010720: 2072 742e 4641 285b 312c 2032 2c20 332c   rt.FA([1, 2, 3,
+00010730: 2034 2c20 322c 2037 2c20 382c 2038 2c20   4, 2, 7, 8, 8, 
+00010740: 335d 290d 0a20 2020 2020 2020 203e 3e3e  3])..        >>>
+00010750: 2061 0d0a 2020 2020 2020 2020 4661 7374   a..        Fast
+00010760: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
+00010770: 342c 2032 2c20 372c 2038 2c20 382c 2033  4, 2, 7, 8, 8, 3
+00010780: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
+00010790: 612e 6475 706c 6963 6174 6564 2829 0d0a  a.duplicated()..
+000107a0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+000107b0: 7928 5b46 616c 7365 2c20 4661 6c73 652c  y([False, False,
+000107c0: 2046 616c 7365 2c20 4661 6c73 652c 2020   False, False,  
+000107d0: 5472 7565 2c20 4661 6c73 652c 2046 616c  True, False, Fal
+000107e0: 7365 2c20 2054 7275 652c 2020 5472 7565  se,  True,  True
+000107f0: 5d29 0d0a 0d0a 2020 2020 2020 2020 4d61  ])....        Ma
+00010800: 726b 2061 6c6c 2064 7570 6c69 6361 7465  rk all duplicate
+00010810: 733a 0d0a 0d0a 2020 2020 2020 2020 3e3e  s:....        >>
+00010820: 3e20 612e 6475 706c 6963 6174 6564 286b  > a.duplicated(k
+00010830: 6565 703d 4661 6c73 6529 0d0a 2020 2020  eep=False)..    
+00010840: 2020 2020 4661 7374 4172 7261 7928 5b46      FastArray([F
+00010850: 616c 7365 2c20 2054 7275 652c 2020 5472  alse,  True,  Tr
+00010860: 7565 2c20 4661 6c73 652c 2020 5472 7565  ue, False,  True
+00010870: 2c20 4661 6c73 652c 2020 5472 7565 2c20  , False,  True, 
+00010880: 2054 7275 652c 2020 5472 7565 5d29 0d0a   True,  True])..
+00010890: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+000108a0: 2020 2020 2061 7272 203d 2073 656c 660d       arr = self.
+000108b0: 0a0d 0a20 2020 2020 2020 2069 6620 6b65  ...        if ke
+000108c0: 6570 203d 3d20 226c 6173 7422 3a0d 0a20  ep == "last":.. 
+000108d0: 2020 2020 2020 2020 2020 2061 7272 203d             arr =
+000108e0: 2061 7272 5b3a 3a2d 315d 2e63 6f70 7928   arr[::-1].copy(
+000108f0: 290d 0a0d 0a20 2020 2020 2020 2065 6c69  )....        eli
+00010900: 6620 6b65 6570 2069 7320 6e6f 7420 4661  f keep is not Fa
+00010910: 6c73 6520 616e 6420 6b65 6570 2021 3d20  lse and keep != 
+00010920: 2266 6972 7374 223a 0d0a 2020 2020 2020  "first":..      
+00010930: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
+00010940: 6545 7272 6f72 2866 276b 6565 7020 6d75  eError(f'keep mu
+00010950: 7374 2062 6520 6569 7468 6572 2022 6669  st be either "fi
+00010960: 7273 7422 2c20 226c 6173 7422 206f 7220  rst", "last" or 
+00010970: 4661 6c73 6527 290d 0a0d 0a20 2020 2020  False')....     
+00010980: 2020 2023 2063 7265 6174 6520 616e 2072     # create an r
+00010990: 6574 7572 6e20 6172 7261 7920 616c 6c20  eturn array all 
+000109a0: 7365 7420 746f 2054 7275 650d 0a20 2020  set to True..   
+000109b0: 2020 2020 2072 6573 756c 7420 3d20 6f6e       result = on
+000109c0: 6573 286c 656e 2861 7272 292c 2064 7479  es(len(arr), dty
+000109d0: 7065 3d6e 702e 626f 6f6c 5f29 0d0a 0d0a  pe=np.bool_)....
+000109e0: 2020 2020 2020 2020 6720 3d20 4772 6f75          g = Grou
+000109f0: 7069 6e67 2861 7272 2e5f 6661 2069 6620  ping(arr._fa if 
+00010a00: 6861 7361 7474 7228 6172 722c 2022 5f66  hasattr(arr, "_f
+00010a10: 6122 2920 656c 7365 2061 7272 2c20 6c65  a") else arr, le
+00010a20: 783d 6869 6768 5f75 6e69 7175 6529 0d0a  x=high_unique)..
+00010a30: 0d0a 2020 2020 2020 2020 6966 206b 6565  ..        if kee
+00010a40: 7020 6973 2046 616c 7365 3a0d 0a20 2020  p is False:..   
+00010a50: 2020 2020 2020 2020 2023 2073 6561 7263           # searc
+00010a60: 6820 666f 7220 6772 6f75 7073 2077 6974  h for groups wit
+00010a70: 6820 6120 636f 756e 7420 6f66 2031 0d0a  h a count of 1..
+00010a80: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00010a90: 6c74 5b67 2e69 6669 7273 746b 6579 5b67  lt[g.ifirstkey[g
+00010aa0: 2e6e 636f 756e 7467 726f 7570 5b31 3a5d  .ncountgroup[1:]
+00010ab0: 203d 3d20 315d 5d20 3d20 4661 6c73 650d   == 1]] = False.
+00010ac0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
+00010ad0: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00010ae0: 6c74 5b67 2e69 6669 7273 746b 6579 5d20  lt[g.ifirstkey] 
+00010af0: 3d20 4661 6c73 650d 0a0d 0a20 2020 2020  = False....     
+00010b00: 2020 2020 2020 2069 6620 6b65 6570 203d         if keep =
+00010b10: 3d20 226c 6173 7422 3a0d 0a20 2020 2020  = "last":..     
+00010b20: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+00010b30: 7420 3d20 7265 7375 6c74 5b3a 3a2d 315d  t = result[::-1]
+00010b40: 2e63 6f70 7928 290d 0a20 2020 2020 2020  .copy()..       
+00010b50: 2072 6574 7572 6e20 7265 7375 6c74 0d0a   return result..
+00010b60: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+00010b70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010b80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010b90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010ba0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010bb0: 2d2d 0d0a 2020 2020 6465 6620 7361 7665  --..    def save
+00010bc0: 280d 0a20 2020 2020 2020 2073 656c 662c  (..        self,
+00010bd0: 0d0a 2020 2020 2020 2020 6669 6c65 7061  ..        filepa
+00010be0: 7468 3a20 556e 696f 6e5b 7374 722c 206f  th: Union[str, o
+00010bf0: 732e 5061 7468 4c69 6b65 5d2c 0d0a 2020  s.PathLike],..  
+00010c00: 2020 2020 2020 7368 6172 653a 204f 7074        share: Opt
+00010c10: 696f 6e61 6c5b 7374 725d 203d 204e 6f6e  ional[str] = Non
+00010c20: 652c 0d0a 2020 2020 2020 2020 636f 6d70  e,..        comp
+00010c30: 7265 7373 3a20 626f 6f6c 203d 2054 7275  ress: bool = Tru
+00010c40: 652c 0d0a 2020 2020 2020 2020 6f76 6572  e,..        over
+00010c50: 7772 6974 653a 2062 6f6f 6c20 3d20 5472  write: bool = Tr
+00010c60: 7565 2c0d 0a20 2020 2020 2020 206e 616d  ue,..        nam
+00010c70: 653a 204f 7074 696f 6e61 6c5b 7374 725d  e: Optional[str]
+00010c80: 203d 204e 6f6e 652c 0d0a 2020 2020 2920   = None,..    ) 
+00010c90: 2d3e 204e 6f6e 653a 0d0a 2020 2020 2020  -> None:..      
+00010ca0: 2020 2222 220d 0a20 2020 2020 2020 2053    """..        S
+00010cb0: 6176 6520 6120 7369 6e67 6c65 2061 7272  ave a single arr
+00010cc0: 6179 2069 6e20 616e 202e 7364 7320 6669  ay in an .sds fi
+00010cd0: 6c65 2e0d 0a0d 0a20 2020 2020 2020 2050  le.....        P
+00010ce0: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
+00010cf0: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
+00010d00: 2020 2020 2020 2066 696c 6570 6174 683a         filepath:
+00010d10: 2073 7472 206f 7220 6f73 2e50 6174 684c   str or os.PathL
+00010d20: 696b 650d 0a20 2020 2020 2020 2073 6861  ike..        sha
+00010d30: 7265 203a 2073 7472 2c20 6f70 7469 6f6e  re : str, option
+00010d40: 616c 2c20 6465 6661 756c 7420 4e6f 6e65  al, default None
+00010d50: 0d0a 2020 2020 2020 2020 636f 6d70 7265  ..        compre
+00010d60: 7373 203a 2062 6f6f 6c2c 2064 6566 6175  ss : bool, defau
+00010d70: 6c74 2054 7275 650d 0a20 2020 2020 2020  lt True..       
+00010d80: 206f 7665 7277 7269 7465 203a 2062 6f6f   overwrite : boo
+00010d90: 6c2c 2064 6566 6175 6c74 2054 7275 650d  l, default True.
+00010da0: 0a20 2020 2020 2020 206e 616d 6520 3a20  .        name : 
+00010db0: 7374 722c 206f 7074 696f 6e61 6c2c 2064  str, optional, d
+00010dc0: 6566 6175 6c74 204e 6f6e 650d 0a0d 0a20  efault None.... 
+00010dd0: 2020 2020 2020 2053 6565 2041 6c73 6f0d         See Also.
+00010de0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00010df0: 2d0d 0a20 2020 2020 2020 2072 745f 7364  -..        rt_sd
+00010e00: 732e 7361 7665 5f73 6473 0d0a 2020 2020  s.save_sds..    
+00010e10: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00010e20: 2073 6176 655f 7364 7328 6669 6c65 7061   save_sds(filepa
+00010e30: 7468 2c20 7365 6c66 2c20 7368 6172 653d  th, self, share=
+00010e40: 7368 6172 652c 2063 6f6d 7072 6573 733d  share, compress=
+00010e50: 636f 6d70 7265 7373 2c20 6f76 6572 7772  compress, overwr
+00010e60: 6974 653d 6f76 6572 7772 6974 652c 206e  ite=overwrite, n
+00010e70: 616d 653d 6e61 6d65 290d 0a0d 0a20 2020  ame=name)....   
+00010e80: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+00010e90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010ea0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010eb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00010ec0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
+00010ed0: 2020 2064 6566 2066 696c 7465 7228 7365     def filter(se
+00010ee0: 6c66 2c20 6669 6c74 6572 3a20 6e70 742e  lf, filter: npt.
+00010ef0: 4172 7261 794c 696b 6529 202d 3e20 2246  ArrayLike) -> "F
+00010f00: 6173 7441 7272 6179 223a 0d0a 2020 2020  astArray":..    
+00010f10: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00010f20: 2052 6574 7572 6e20 6120 636f 7079 206f   Return a copy o
+00010f30: 6620 7468 6520 6046 6173 7441 7272 6179  f the `FastArray
+00010f40: 6020 636f 6e74 6169 6e69 6e67 206f 6e6c  ` containing onl
+00010f50: 7920 7468 6520 656c 656d 656e 7473 2074  y the elements t
+00010f60: 6861 7420 6d65 6574 2074 6865 2073 7065  hat meet the spe
+00010f70: 6369 6669 6564 0d0a 2020 2020 2020 2020  cified..        
+00010f80: 636f 6e64 6974 696f 6e2e 0d0a 0d0a 2020  condition.....  
+00010f90: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
+00010fa0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+00010fb0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6669  ----..        fi
+00010fc0: 6c74 6572 203a 2061 7272 6179 3a20 6661  lter : array: fa
+00010fd0: 6e63 7920 696e 6465 7820 6f72 2042 6f6f  ncy index or Boo
+00010fe0: 6c65 616e 206d 6173 6b0d 0a20 2020 2020  lean mask..     
+00010ff0: 2020 2020 2020 2041 2066 616e 6379 2069         A fancy i
+00011000: 6e64 6578 2073 7065 6369 6669 6573 2062  ndex specifies b
+00011010: 6f74 6820 7468 6520 6465 7369 7265 6420  oth the desired 
+00011020: 656c 656d 656e 7473 2061 6e64 2074 6865  elements and the
+00011030: 6972 206f 7264 6572 2069 6e20 7468 650d  ir order in the.
+00011040: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00011050: 7572 6e65 6420 6046 6173 7441 7272 6179  urned `FastArray
+00011060: 602e 2057 6865 6e20 6120 426f 6f6c 6561  `. When a Boolea
+00011070: 6e20 6d61 736b 2069 7320 7061 7373 6564  n mask is passed
+00011080: 2c20 6f6e 6c79 2072 6f77 7320 7468 6174  , only rows that
+00011090: 206d 6565 7420 7468 650d 0a20 2020 2020   meet the..     
+000110a0: 2020 2020 2020 2073 7065 6369 6669 6564         specified
+000110b0: 2063 6f6e 6469 7469 6f6e 2061 7265 2069   condition are i
+000110c0: 6e20 7468 6520 7265 7475 726e 6564 2060  n the returned `
+000110d0: 4661 7374 4172 7261 7960 2e0d 0a0d 0a20  FastArray`..... 
+000110e0: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+000110f0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+00011100: 0a20 2020 2020 2020 2060 4661 7374 4172  .        `FastAr
+00011110: 7261 7960 0d0a 0d0a 2020 2020 2020 2020  ray`....        
+00011120: 4e6f 7465 730d 0a20 2020 2020 2020 202d  Notes..        -
+00011130: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4966  ----..        If
+00011140: 2079 6f75 2077 616e 7420 746f 2070 6572   you want to per
+00011150: 666f 726d 2061 6e20 6f70 6572 6174 696f  form an operatio
+00011160: 6e20 6f6e 2061 2066 696c 7465 7265 6420  n on a filtered 
+00011170: 4661 7374 4172 7261 792c 2069 7427 7320  FastArray, it's 
+00011180: 6d6f 7265 2065 6666 6963 6965 6e74 2074  more efficient t
+00011190: 6f0d 0a20 2020 2020 2020 2070 6572 666f  o..        perfo
+000111a0: 726d 2074 6865 206f 7065 7261 7469 6f6e  rm the operation
+000111b0: 2075 7369 6e67 2074 6865 2060 6066 696c   using the ``fil
+000111c0: 7465 7260 6020 6b65 7977 6f72 6420 6172  ter`` keyword ar
+000111d0: 6775 6d65 6e74 2e20 466f 7220 6578 616d  gument. For exam
+000111e0: 706c 652c 0d0a 2020 2020 2020 2020 6060  ple,..        ``
+000111f0: 6d79 5f66 612e 7375 6d28 6669 6c74 6572  my_fa.sum(filter
+00011200: 203d 2062 6f6f 6c65 616e 5f6d 6173 6b29   = boolean_mask)
+00011210: 6060 2e0d 0a0d 0a20 2020 2020 2020 2045  ``.....        E
+00011220: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
+00011230: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+00011240: 2020 2043 7265 6174 6520 6120 6046 6173     Create a `Fas
+00011250: 7441 7272 6179 603a 0d0a 0d0a 2020 2020  tArray`:....    
+00011260: 2020 2020 3e3e 3e20 6661 203d 2072 742e      >>> fa = rt.
+00011270: 4661 7374 4172 7261 7928 6e70 2e6c 696e  FastArray(np.lin
+00011280: 7370 6163 6528 302c 2031 2c20 3131 2929  space(0, 1, 11))
+00011290: 0d0a 2020 2020 2020 2020 3e3e 3e20 6661  ..        >>> fa
+000112a0: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+000112b0: 7261 7928 5b30 2e20 2c20 302e 312c 2030  ray([0. , 0.1, 0
+000112c0: 2e32 2c20 302e 332c 2030 2e34 2c20 302e  .2, 0.3, 0.4, 0.
+000112d0: 352c 2030 2e36 2c20 302e 372c 2030 2e38  5, 0.6, 0.7, 0.8
+000112e0: 2c20 302e 392c 2031 2e20 5d29 0d0a 0d0a  , 0.9, 1. ])....
+000112f0: 2020 2020 2020 2020 4669 6c74 6572 2075          Filter u
+00011300: 7369 6e67 2061 2066 616e 6379 2069 6e64  sing a fancy ind
+00011310: 6578 3a0d 0a0d 0a20 2020 2020 2020 203e  ex:....        >
+00011320: 3e3e 2066 612e 6669 6c74 6572 285b 352c  >> fa.filter([5,
+00011330: 2030 2c20 315d 290d 0a20 2020 2020 2020   0, 1])..       
+00011340: 2046 6173 7441 7272 6179 285b 302e 352c   FastArray([0.5,
+00011350: 2030 2e20 2c20 302e 315d 290d 0a0d 0a20   0. , 0.1]).... 
+00011360: 2020 2020 2020 2046 696c 7465 7220 7573         Filter us
+00011370: 696e 6720 6120 636f 6e64 6974 696f 6e20  ing a condition 
+00011380: 7468 6174 2063 7265 6174 6573 2061 2042  that creates a B
+00011390: 6f6f 6c65 616e 206d 6173 6b20 6172 7261  oolean mask arra
+000113a0: 793a 0d0a 0d0a 2020 2020 2020 2020 3e3e  y:....        >>
+000113b0: 3e20 6661 2e66 696c 7465 7228 6661 203e  > fa.filter(fa >
+000113c0: 2030 2e37 3529 0d0a 2020 2020 2020 2020   0.75)..        
+000113d0: 4661 7374 4172 7261 7928 5b30 2e38 2c20  FastArray([0.8, 
+000113e0: 302e 392c 2031 2e20 5d29 0d0a 0d0a 2020  0.9, 1. ])....  
+000113f0: 2020 2020 2020 2222 220d 0a0d 0a20 2020        """....   
+00011400: 2020 2020 2023 206e 6f72 6d61 6c69 7a65       # normalize
+00011410: 2072 6f77 6669 6c74 6572 0d0a 2020 2020   rowfilter..    
+00011420: 2020 2020 6966 206e 702e 6973 7363 616c      if np.isscal
+00011430: 6172 2866 696c 7465 7229 3a0d 0a20 2020  ar(filter):..   
+00011440: 2020 2020 2020 2020 2066 696c 7465 7220           filter 
+00011450: 3d20 6e70 2e61 7361 6e79 6172 7261 7928  = np.asanyarray(
+00011460: 5b66 696c 7465 725d 290d 0a20 2020 2020  [filter])..     
+00011470: 2020 2065 6c69 6620 6e6f 7420 6973 696e     elif not isin
+00011480: 7374 616e 6365 2866 696c 7465 722c 206e  stance(filter, n
+00011490: 702e 6e64 6172 7261 7929 3a0d 0a20 2020  p.ndarray):..   
+000114a0: 2020 2020 2020 2020 2066 696c 7465 7220           filter 
+000114b0: 3d20 6e70 2e61 7361 6e79 6172 7261 7928  = np.asanyarray(
+000114c0: 6669 6c74 6572 290d 0a0d 0a20 2020 2020  filter)....     
+000114d0: 2020 2023 2045 6e73 7572 6520 6669 6c74     # Ensure filt
+000114e0: 6572 2069 7320 626f 6f6c 6561 6e20 6f72  er is boolean or
+000114f0: 2069 6e74 6567 6572 730d 0a20 2020 2020   integers..     
+00011500: 2020 2069 6620 6e6f 7420 286e 702e 6973     if not (np.is
+00011510: 7375 6264 7479 7065 2866 696c 7465 722e  subdtype(filter.
+00011520: 6474 7970 652c 206e 702e 696e 7465 6765  dtype, np.intege
+00011530: 7229 206f 7220 6e70 2e69 7373 7562 6474  r) or np.issubdt
+00011540: 7970 6528 6669 6c74 6572 2e64 7479 7065  ype(filter.dtype
+00011550: 2c20 626f 6f6c 2929 3a0d 0a20 2020 2020  , bool)):..     
+00011560: 2020 2020 2020 2072 6169 7365 2054 7970         raise Typ
+00011570: 6545 7272 6f72 2866 2254 6865 2066 696c  eError(f"The fil
+00011580: 7465 7220 6d75 7374 2062 6520 6120 626f  ter must be a bo
+00011590: 6f6c 6561 6e20 6d61 736b 206f 7220 696e  olean mask or in
+000115a0: 7465 6765 7220 6661 6e63 7920 696e 6465  teger fancy inde
+000115b0: 782e 2229 0d0a 0d0a 2020 2020 2020 2020  x.")....        
+000115c0: 2320 456e 7375 7265 2060 6669 6c74 6572  # Ensure `filter
+000115d0: 6020 6973 2074 6865 2072 6967 6874 2073  ` is the right s
+000115e0: 6861 7065 2e0d 0a20 2020 2020 2020 2023  hape...        #
+000115f0: 2055 6e6c 696b 6520 6044 6174 6173 6574   Unlike `Dataset
+00011600: 2e66 696c 7465 7260 2077 6520 646f 6e27  .filter` we don'
+00011610: 7420 636f 6e76 6572 7420 626f 6f6c 2074  t convert bool t
+00011620: 6f20 6661 6e63 792c 2020 6265 6361 7573  o fancy,  becaus
+00011630: 6520 7765 2772 6520 6e6f 7420 7265 7573  e we're not reus
+00011640: 696e 6720 7468 6520 6661 6e63 7920 696e  ing the fancy in
+00011650: 6469 6365 732e 0d0a 2020 2020 2020 2020  dices...        
+00011660: 6966 2066 696c 7465 722e 6e64 696d 2021  if filter.ndim !
+00011670: 3d20 313a 0d0a 2020 2020 2020 2020 2020  = 1:..          
+00011680: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+00011690: 6f72 2822 6046 6173 7441 7272 6179 2e66  or("`FastArray.f
+000116a0: 696c 7465 7260 206f 6e6c 7920 6163 6365  ilter` only acce
+000116b0: 7074 7320 3144 2061 7272 6179 7320 666f  pts 1D arrays fo
+000116c0: 7220 7468 6520 656c 656d 656e 7420 7365  r the element se
+000116d0: 6c65 6374 6f72 2f6d 6173 6b2e 2229 0d0a  lector/mask.")..
+000116e0: 2020 2020 2020 2020 2320 426f 6f6c 6561          # Boolea
+000116f0: 6e20 6172 7261 7920 6e65 6564 7320 746f  n array needs to
+00011700: 2062 6520 7468 6520 7269 6768 7420 6c65   be the right le
+00011710: 6e67 7468 2061 7320 7765 6c6c 2e0d 0a20  ngth as well... 
+00011720: 2020 2020 2020 2069 6620 6e70 2e69 7373         if np.iss
+00011730: 7562 6474 7970 6528 6669 6c74 6572 2e64  ubdtype(filter.d
+00011740: 7479 7065 2c20 626f 6f6c 2920 616e 6420  type, bool) and 
+00011750: 286c 656e 2866 696c 7465 7229 2021 3d20  (len(filter) != 
+00011760: 7365 6c66 2e73 6861 7065 5b30 5d29 3a0d  self.shape[0]):.
+00011770: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00011780: 7365 2056 616c 7565 4572 726f 7228 0d0a  se ValueError(..
+00011790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000117a0: 6622 5468 6520 6c65 6e67 7468 206f 6620  f"The length of 
+000117b0: 7468 6520 7072 6f76 6964 6564 2073 656c  the provided sel
+000117c0: 6563 7469 6f6e 206d 6173 6b20 287b 6c65  ection mask ({le
+000117d0: 6e28 6669 6c74 6572 297d 2920 646f 6573  n(filter)}) does
+000117e0: 206e 6f74 206d 6174 6368 2074 6865 206c   not match the l
+000117f0: 656e 6774 6820 6f66 2074 6865 2046 6173  ength of the Fas
+00011800: 7441 7272 6179 287b 7365 6c66 2e73 6861  tArray({self.sha
+00011810: 7065 5b30 5d7d 292e 220d 0a20 2020 2020  pe[0]})."..     
+00011820: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
+00011830: 2020 2020 2320 5065 7266 6f72 6d20 6669      # Perform fi
+00011840: 6c74 6572 2061 6e64 2072 6574 7572 6e0d  lter and return.
+00011850: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00011860: 7365 6c66 5b66 696c 7465 725d 0d0a 0d0a  self[filter]....
+00011870: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00011880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000118a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000118b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000118c0: 0d0a 2020 2020 6465 6620 7265 7368 6170  ..    def reshap
+000118d0: 6528 7365 6c66 2c20 2a61 7267 732c 202a  e(self, *args, *
+000118e0: 2a6b 7761 7267 7329 202d 3e20 4661 7374  *kwargs) -> Fast
+000118f0: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
+00011900: 7265 7375 6c74 203d 2073 7570 6572 2846  result = super(F
+00011910: 6173 7441 7272 6179 2c20 7365 6c66 292e  astArray, self).
+00011920: 7265 7368 6170 6528 2a61 7267 732c 202a  reshape(*args, *
+00011930: 2a6b 7761 7267 7329 0d0a 2020 2020 2020  *kwargs)..      
+00011940: 2020 2320 7468 6973 2077 6172 6e69 6e67    # this warning
+00011950: 2068 6170 7065 6e73 2074 6f6f 206d 7563   happens too muc
+00011960: 6820 6e6f 770d 0a20 2020 2020 2020 2023  h now..        #
+00011970: 2069 6620 4661 7374 4172 7261 792e 5f63   if FastArray._c
+00011980: 6865 636b 5f6e 6469 6d28 7265 7375 6c74  heck_ndim(result
+00011990: 2920 213d 2031 3a0d 0a20 2020 2020 2020  ) != 1:..       
+000119a0: 2023 2020 2020 7761 726e 696e 6773 2e77   #    warnings.w
+000119b0: 6172 6e28 4661 7374 4172 7261 792e 5761  arn(FastArray.Wa
+000119c0: 726e 696e 6744 6963 745b 226d 756c 7469  rningDict["multi
+000119d0: 706c 655f 6469 6d65 6e73 696f 6e73 225d  ple_dimensions"]
+000119e0: 2e66 6f72 6d61 7428 7265 7375 6c74 2e73  .format(result.s
+000119f0: 6861 7065 2929 0d0a 0d0a 2020 2020 2020  hape))....      
+00011a00: 2020 6966 206e 6f74 2028 7265 7375 6c74    if not (result
+00011a10: 2e66 6c61 6773 2e63 5f63 6f6e 7469 6775  .flags.c_contigu
+00011a20: 6f75 7320 6f72 2072 6573 756c 742e 666c  ous or result.fl
+00011a30: 6167 732e 665f 636f 6e74 6967 756f 7573  ags.f_contiguous
+00011a40: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00011a50: 2320 6669 7820 7374 7269 6465 7320 7072  # fix strides pr
+00011a60: 6f62 6c65 6d0d 0a20 2020 2020 2020 2020  oblem..         
+00011a70: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
+00011a80: 2e63 6f70 7928 290d 0a20 2020 2020 2020  .copy()..       
+00011a90: 2072 6574 7572 6e20 7265 7375 6c74 0d0a   return result..
+00011aa0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+00011ab0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011ac0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011ad0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011ae0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011af0: 2d2d 0d0a 2020 2020 6465 6620 7265 7065  --..    def repe
+00011b00: 6174 2873 656c 662c 2072 6570 6561 7473  at(self, repeats
+00011b10: 2c20 6178 6973 3d4e 6f6e 6529 202d 3e20  , axis=None) -> 
+00011b20: 4661 7374 4172 7261 793a 0d0a 2020 2020  FastArray:..    
+00011b30: 2020 2020 2222 2253 6565 2060 7269 7074      """See `ript
+00011b40: 6162 6c65 2e72 6570 6561 7460 2e22 2222  able.repeat`."""
+00011b50: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00011b60: 2072 6570 6561 7428 7365 6c66 2c20 7265   repeat(self, re
+00011b70: 7065 6174 732c 2061 7869 733d 6178 6973  peats, axis=axis
+00011b80: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
+00011b90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011ba0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011bb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011bc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011bd0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2074  -----..    def t
+00011be0: 696c 6528 7365 6c66 2c20 7265 7073 2920  ile(self, reps) 
+00011bf0: 2d3e 2046 6173 7441 7272 6179 3a0d 0a20  -> FastArray:.. 
+00011c00: 2020 2020 2020 2022 2222 5365 6520 6072         """See `r
+00011c10: 6970 7461 626c 652e 7469 6c65 602e 2222  iptable.tile`.""
+00011c20: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
+00011c30: 6e20 7469 6c65 2873 656c 662c 2072 6570  n tile(self, rep
+00011c40: 7329 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  s)....    # ----
+00011c50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011c60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011c70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011c80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011c90: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
+00011ca0: 5f6b 7761 7267 5f63 6865 636b 2873 656c  _kwarg_check(sel
+00011cb0: 662c 202a 6172 6773 2c20 2a2a 6b77 6172  f, *args, **kwar
+00011cc0: 6773 293a 0d0a 2020 2020 2020 2020 2320  gs):..        # 
+00011cd0: 7765 2068 616e 646c 6520 6474 7970 650d  we handle dtype.
+00011ce0: 0a20 2020 2020 2020 2069 6620 2822 6464  .        if ("dd
+00011cf0: 6f66 2220 696e 206b 7761 7267 7320 616e  of" in kwargs an
+00011d00: 6420 6b77 6172 6773 5b22 6464 6f66 225d  d kwargs["ddof"]
+00011d10: 2021 3d20 3129 206f 7220 2261 7869 7322   != 1) or "axis"
+00011d20: 2069 6e20 6b77 6172 6773 206f 7220 226b   in kwargs or "k
+00011d30: 6565 7064 696d 7322 2069 6e20 6b77 6172  eepdims" in kwar
+00011d40: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
+00011d50: 2072 6574 7572 6e20 5472 7565 0d0a 0d0a   return True....
+00011d60: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00011d70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011d80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011d90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011da0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011db0: 0d0a 2020 2020 6465 6620 5f72 6564 7563  ..    def _reduc
+00011dc0: 655f 6368 6563 6b28 7365 6c66 2c20 7265  e_check(self, re
+00011dd0: 6475 6365 4675 6e63 3a20 5245 4455 4345  duceFunc: REDUCE
+00011de0: 5f46 554e 4354 494f 4e53 2c20 6e70 4675  _FUNCTIONS, npFu
+00011df0: 6e63 2c20 2a61 7267 732c 202a 2a6b 7761  nc, *args, **kwa
+00011e00: 7267 7329 3a0d 0a20 2020 2020 2020 2022  rgs):..        "
+00011e10: 2222 0d0a 2020 2020 2020 2020 4172 6732  ""..        Arg2
+00011e20: 3a20 6e70 4675 6e63 2070 6173 7320 696e  : npFunc pass in
+00011e30: 204e 6f6e 6520 6966 206e 6f20 6e75 6d70   None if no nump
+00011e40: 7920 6571 7569 7661 6c65 6e74 2066 756e  y equivalent fun
+00011e50: 6374 696f 6e0d 0a20 2020 2020 2020 2022  ction..        "
+00011e60: 2222 0d0a 2020 2020 2020 2020 6966 206e  ""..        if n
+00011e70: 7046 756e 6320 6973 206e 6f74 204e 6f6e  pFunc is not Non
+00011e80: 6520 616e 6420 2873 656c 662e 5f6b 7761  e and (self._kwa
+00011e90: 7267 5f63 6865 636b 282a 6172 6773 2c20  rg_check(*args, 
+00011ea0: 2a2a 6b77 6172 6773 2920 6f72 206c 656e  **kwargs) or len
+00011eb0: 2873 656c 662e 7368 6170 6529 2021 3d20  (self.shape) != 
+00011ec0: 3129 3a0d 0a20 2020 2020 2020 2020 2020  1):..           
+00011ed0: 2023 2054 4f44 4f3a 2061 6464 2074 6f20   # TODO: add to 
+00011ee0: 6d61 7468 206c 6564 6765 720d 0a20 2020  math ledger..   
+00011ef0: 2020 2020 2020 2020 2023 2073 6574 2064           # set d
+00011f00: 646f 663d 3120 6966 204e 4f54 2073 6574  dof=1 if NOT set
+00011f10: 2077 6869 6368 2069 7320 4661 7374 4172   which is FastAr
+00011f20: 7261 7920 6465 6661 756c 7420 746f 206d  ray default to m
+00011f30: 6174 6368 206d 6174 6c61 622f 7061 6e64  atch matlab/pand
+00011f40: 6173 0d0a 2020 2020 2020 2020 2020 2020  as..            
+00011f50: 6966 2022 6464 6f66 2220 6e6f 7420 696e  if "ddof" not in
+00011f60: 206b 7761 7267 7320 616e 6420 7265 6475   kwargs and redu
+00011f70: 6365 4675 6e63 2069 6e20 5b0d 0a20 2020  ceFunc in [..   
+00011f80: 2020 2020 2020 2020 2020 2020 2052 4544               RED
+00011f90: 5543 455f 4655 4e43 5449 4f4e 532e 5245  UCE_FUNCTIONS.RE
+00011fa0: 4455 4345 5f56 4152 2c0d 0a20 2020 2020  DUCE_VAR,..     
+00011fb0: 2020 2020 2020 2020 2020 2052 4544 5543             REDUC
+00011fc0: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
+00011fd0: 4345 5f4e 414e 5641 522c 0d0a 2020 2020  CE_NANVAR,..    
+00011fe0: 2020 2020 2020 2020 2020 2020 5245 4455              REDU
+00011ff0: 4345 5f46 554e 4354 494f 4e53 2e52 4544  CE_FUNCTIONS.RED
+00012000: 5543 455f 5354 442c 0d0a 2020 2020 2020  UCE_STD,..      
+00012010: 2020 2020 2020 2020 2020 5245 4455 4345            REDUCE
+00012020: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
+00012030: 455f 4e41 4e53 5444 2c0d 0a20 2020 2020  E_NANSTD,..     
+00012040: 2020 2020 2020 205d 3a0d 0a20 2020 2020         ]:..     
+00012050: 2020 2020 2020 2020 2020 206b 7761 7267             kwarg
+00012060: 735b 2264 646f 6622 5d20 3d20 310d 0a0d  s["ddof"] = 1...
+00012070: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+00012080: 756c 7420 3d20 6e70 4675 6e63 2873 656c  ult = npFunc(sel
+00012090: 662e 5f6e 702c 202a 6172 6773 2c20 2a2a  f._np, *args, **
+000120a0: 6b77 6172 6773 290d 0a20 2020 2020 2020  kwargs)..       
+000120b0: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
+000120c0: 6c74 0d0a 0d0a 2020 2020 2020 2020 7265  lt....        re
+000120d0: 7375 6c74 203d 2054 7970 6552 6567 6973  sult = TypeRegis
+000120e0: 7465 722e 4d61 7468 4c65 6467 6572 2e5f  ter.MathLedger._
+000120f0: 5245 4455 4345 2873 656c 662c 2072 6564  REDUCE(self, red
+00012100: 7563 6546 756e 6329 0d0a 0d0a 2020 2020  uceFunc)....    
+00012110: 2020 2020 2320 4974 2773 2070 6f73 7369      # It's possi
+00012120: 626c 6520 7468 6572 6520 7761 7320 6e6f  ble there was no
+00012130: 2072 6573 756c 7420 7265 7475 726e 6564   result returned
+00012140: 2066 726f 6d20 7468 6520 7265 6475 6374   from the reduct
+00012150: 696f 6e20 6675 6e63 7469 6f6e 3b0d 0a20  ion function;.. 
+00012160: 2020 2020 2020 2023 2065 2e67 2e20 6966         # e.g. if
+00012170: 2074 6865 2069 6e70 7574 2077 6173 2065   the input was e
+00012180: 6d70 7479 2e20 4966 2074 6865 2066 756e  mpty. If the fun
+00012190: 6374 696f 6e20 6265 696e 6720 6361 6c6c  ction being call
+000121a0: 6564 2069 7320 7765 6c6c 2d64 6566 696e  ed is well-defin
+000121b0: 6564 0d0a 2020 2020 2020 2020 2320 666f  ed..        # fo
+000121c0: 7220 656d 7074 7920 6c69 7374 7320 2d2d  r empty lists --
+000121d0: 2069 2e65 2e20 6974 2069 7320 6120 7265   i.e. it is a re
+000121e0: 6475 6374 696f 6e20 6f70 6572 6174 696f  duction operatio
+000121f0: 6e20 7769 7468 2061 2064 6566 696e 6564  n with a defined
+00012200: 0d0a 2020 2020 2020 2020 2320 6964 656e  ..        # iden
+00012210: 7469 7479 2065 6c65 6d65 6e74 202d 2d20  tity element -- 
+00012220: 7365 7420 7468 6520 7265 7375 6c74 2074  set the result t
+00012230: 6f20 7468 6520 6964 656e 7469 7479 2065  o the identity e
+00012240: 6c65 6d65 6e74 2073 6f20 7468 6520 7265  lement so the re
+00012250: 7374 206f 660d 0a20 2020 2020 2020 2023  st of..        #
+00012260: 2074 6865 206c 6f67 6963 2062 656c 6f77   the logic below
+00012270: 2077 696c 6c20 776f 726b 2063 6f72 7265   will work corre
+00012280: 6374 6c79 2e0d 0a20 2020 2020 2020 2023  ctly...        #
+00012290: 2049 6620 7468 6572 6520 6973 206e 6f20   If there is no 
+000122a0: 6964 656e 7469 7479 2065 6c65 6d65 6e74  identity element
+000122b0: 2066 6f72 2074 6869 7320 6f70 6572 6174   for this operat
+000122c0: 696f 6e2c 2072 6169 7365 2061 6e20 6578  ion, raise an ex
+000122d0: 6365 7074 696f 6e20 746f 0d0a 2020 2020  ception to..    
+000122e0: 2020 2020 2320 6c65 7420 7468 6520 7573      # let the us
+000122f0: 6572 206b 6e6f 773b 2077 6527 6420 7261  er know; we'd ra
+00012300: 6973 6520 616e 2065 7863 6570 7469 6f6e  ise an exception
+00012310: 2062 656c 6f77 202a 616e 7977 6179 2a2c   below *anyway*,
+00012320: 2061 6e64 2074 6869 7320 616c 6c6f 7773   and this allows
+00012330: 0d0a 2020 2020 2020 2020 2320 7573 2074  ..        # us t
+00012340: 6f20 7072 6f76 6964 6520 7468 6520 7573  o provide the us
+00012350: 6572 2077 6974 6820 6120 6d6f 7265 2d64  er with a more-d
+00012360: 6573 6372 6970 7469 7665 2f61 6374 696f  escriptive/actio
+00012370: 6e61 626c 6520 6572 726f 7220 6d65 7373  nable error mess
+00012380: 6167 652e 0d0a 2020 2020 2020 2020 6966  age...        if
+00012390: 2072 6573 756c 7420 6973 204e 6f6e 653a   result is None:
+000123a0: 0d0a 2020 2020 2020 2020 2020 2020 6f70  ..            op
+000123b0: 5f69 6465 6e74 6974 795f 7661 6c20 3d20  _identity_val = 
+000123c0: 7479 7065 2873 656c 6629 2e5f 7265 6475  type(self)._redu
+000123d0: 6365 5f6f 705f 6964 656e 7469 7479 5f76  ce_op_identity_v
+000123e0: 616c 7565 2e67 6574 2872 6564 7563 6546  alue.get(reduceF
+000123f0: 756e 632c 204e 6f6e 6529 0d0a 2020 2020  unc, None)..    
+00012400: 2020 2020 2020 2020 6966 206f 705f 6964          if op_id
+00012410: 656e 7469 7479 5f76 616c 2069 7320 6e6f  entity_val is no
+00012420: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00012430: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+00012440: 3d20 6f70 5f69 6465 6e74 6974 795f 7661  = op_identity_va
+00012450: 6c0d 0a20 2020 2020 2020 2020 2020 2065  l..            e
+00012460: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00012470: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
+00012480: 6545 7272 6f72 280d 0a20 2020 2020 2020  eError(..       
+00012490: 2020 2020 2020 2020 2020 2020 2066 2252               f"R
+000124a0: 6564 7563 7469 6f6e 2027 7b73 7472 2872  eduction '{str(r
+000124b0: 6564 7563 6546 756e 6329 7d27 2064 6f65  educeFunc)}' doe
+000124c0: 7320 6e6f 7420 6861 7665 2061 6e20 6964  s not have an id
+000124d0: 656e 7469 7479 2065 6c65 6d65 6e74 2073  entity element s
+000124e0: 6f20 6361 6e6e 6f74 2062 6520 636f 6d70  o cannot be comp
+000124f0: 7574 6564 206f 7665 7220 616e 2065 6d70  uted over an emp
+00012500: 7479 2061 7272 6179 2e22 0d0a 2020 2020  ty array."..    
+00012510: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+00012520: 0a20 2020 2020 2020 2023 2057 6173 2061  .        # Was a
+00012530: 6e20 6f75 7470 7574 2064 7479 7065 2077  n output dtype w
+00012540: 6173 2065 7870 6c69 6369 746c 7920 7370  as explicitly sp
+00012550: 6563 6966 6965 643f 0d0a 2020 2020 2020  ecified?..      
+00012560: 2020 6474 7970 6520 3d20 6b77 6172 6773    dtype = kwargs
+00012570: 2e67 6574 2822 6474 7970 6522 2c20 4e6f  .get("dtype", No
+00012580: 6e65 290d 0a20 2020 2020 2020 2069 6620  ne)..        if 
+00012590: 6474 7970 6520 6973 206e 6f74 204e 6f6e  dtype is not Non
+000125a0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+000125b0: 2320 7573 6572 2066 6f72 6365 6420 6474  # user forced dt
+000125c0: 7970 6520 7265 7475 726e 2076 616c 7565  ype return value
+000125d0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+000125e0: 7475 726e 2064 7479 7065 2872 6573 756c  turn dtype(resul
+000125f0: 7429 0d0a 0d0a 2020 2020 2020 2020 2320  t)....        # 
+00012600: 7072 6573 6572 7665 2074 7970 6520 666f  preserve type fo
+00012610: 7220 6d69 6e2f 6d61 782f 6e61 6e6d 696e  r min/max/nanmin
+00012620: 2f6e 616e 6d61 780d 0a20 2020 2020 2020  /nanmax..       
+00012630: 2069 6620 7265 6475 6365 4675 6e63 2069   if reduceFunc i
+00012640: 6e20 5b0d 0a20 2020 2020 2020 2020 2020  n [..           
+00012650: 2052 4544 5543 455f 4655 4e43 5449 4f4e   REDUCE_FUNCTION
+00012660: 532e 5245 4455 4345 5f4d 494e 2c0d 0a20  S.REDUCE_MIN,.. 
+00012670: 2020 2020 2020 2020 2020 2052 4544 5543             REDUC
+00012680: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
+00012690: 4345 5f4e 414e 4d49 4e2c 0d0a 2020 2020  CE_NANMIN,..    
+000126a0: 2020 2020 2020 2020 5245 4455 4345 5f46          REDUCE_F
+000126b0: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
+000126c0: 4d41 582c 0d0a 2020 2020 2020 2020 2020  MAX,..          
+000126d0: 2020 5245 4455 4345 5f46 554e 4354 494f    REDUCE_FUNCTIO
+000126e0: 4e53 2e52 4544 5543 455f 4e41 4e4d 4158  NS.REDUCE_NANMAX
+000126f0: 2c0d 0a20 2020 2020 2020 205d 3a0d 0a20  ,..        ]:.. 
+00012700: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00012710: 6e20 7365 6c66 2e64 7479 7065 2e74 7970  n self.dtype.typ
+00012720: 6528 7265 7375 6c74 290d 0a0d 0a20 2020  e(result)....   
+00012730: 2020 2020 2023 2069 6e74 6572 6e61 6c6c       # internall
+00012740: 7920 6e75 6d70 7920 6578 7065 6374 7320  y numpy expects 
+00012750: 6120 6474 7970 6520 7265 7475 726e 6564  a dtype returned
+00012760: 2066 6f72 206e 616e 7374 6420 616e 6420   for nanstd and 
+00012770: 6f74 6865 7220 6361 6c63 756c 6174 696f  other calculatio
+00012780: 6e73 0d0a 2020 2020 2020 2020 6966 2069  ns..        if i
+00012790: 7369 6e73 7461 6e63 6528 7265 7375 6c74  sinstance(result
+000127a0: 2c20 2869 6e74 2c20 6e70 2e69 6e74 6567  , (int, np.integ
+000127b0: 6572 2929 3a0d 0a20 2020 2020 2020 2020  er)):..         
+000127c0: 2020 2023 2066 6f72 2075 696e 7436 342c     # for uint64,
+000127d0: 2074 6865 2068 6967 6820 6269 7420 6d75   the high bit mu
+000127e0: 7374 2062 6520 7072 6573 6572 7665 640d  st be preserved.
+000127f0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00012800: 7365 6c66 2e64 7479 7065 2e63 6861 7220  self.dtype.char 
+00012810: 696e 204e 756d 7079 4368 6172 5479 7065  in NumpyCharType
+00012820: 732e 556e 7369 676e 6564 496e 7465 6765  s.UnsignedIntege
+00012830: 7236 343a 0d0a 2020 2020 2020 2020 2020  r64:..          
+00012840: 2020 2020 2020 7265 7475 726e 206e 702e        return np.
+00012850: 7569 6e74 3634 2872 6573 756c 7429 0d0a  uint64(result)..
+00012860: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00012870: 726e 206e 702e 696e 7436 3428 7265 7375  rn np.int64(resu
+00012880: 6c74 290d 0a0d 0a20 2020 2020 2020 2072  lt)....        r
+00012890: 6574 7572 6e20 6e70 2e66 6c6f 6174 3634  eturn np.float64
+000128a0: 2872 6573 756c 7429 0d0a 0d0a 2020 2020  (result)....    
+000128b0: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+000128c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000128d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000128e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000128f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
+00012900: 2020 2064 6566 205f 636f 6d70 6172 655f     def _compare_
+00012910: 6368 6563 6b28 7365 6c66 2c20 6675 6e63  check(self, func
+00012920: 2c20 6f74 6865 7229 202d 3e20 4661 7374  , other) -> Fast
+00012930: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
+00012940: 2320 6120 7573 6572 206d 6967 6874 2074  # a user might t
+00012950: 7970 6520 696e 2061 2073 7472 696e 6720  ype in a string 
+00012960: 616e 6420 7765 2077 616e 7420 6120 6279  and we want a by
+00012970: 7465 7320 7374 7269 6e67 0d0a 2020 2020  tes string..    
+00012980: 2020 2020 6966 2073 656c 662e 6474 7970      if self.dtyp
+00012990: 652e 6368 6172 2069 6e20 2253 5522 3a0d  e.char in "SU":.
+000129a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000129b0: 6973 696e 7374 616e 6365 286f 7468 6572  isinstance(other
+000129c0: 2c20 7374 7229 3a0d 0a20 2020 2020 2020  , str):..       
+000129d0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+000129e0: 2e64 7479 7065 2e63 6861 7220 3d3d 2022  .dtype.char == "
+000129f0: 5322 3a0d 0a20 2020 2020 2020 2020 2020  S":..           
+00012a00: 2020 2020 2020 2020 2023 2077 6520 6172           # we ar
+00012a10: 6520 6279 7465 2073 7472 696e 6773 2062  e byte strings b
+00012a20: 7574 2073 6361 6c61 7220 756e 6963 6f64  ut scalar unicod
+00012a30: 6520 7061 7373 6564 2069 6e0d 0a20 2020  e passed in..   
+00012a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012a50: 206f 7468 6572 203d 2073 7472 2e65 6e63   other = str.enc
+00012a60: 6f64 6528 6f74 6865 7229 0d0a 0d0a 2020  ode(other)....  
+00012a70: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+00012a80: 6e73 7461 6e63 6528 6f74 6865 722c 206c  nstance(other, l
+00012a90: 6973 7429 3a0d 0a20 2020 2020 2020 2020  ist):..         
+00012aa0: 2020 2020 2020 2023 2063 6f6e 7665 7274         # convert
+00012ab0: 2074 6865 206c 6973 7420 736f 2061 2063   the list so a c
+00012ac0: 6f6d 7061 7269 736f 6e20 6361 6e20 6265  omparison can be
+00012ad0: 206d 6164 6520 746f 2074 6865 2062 7974   made to the byt
+00012ae0: 6520 7374 7269 6e67 2061 7272 6179 0d0a  e string array..
+00012af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b00: 6f74 6865 7220 3d20 4661 7374 4172 7261  other = FastArra
+00012b10: 7928 6f74 6865 7229 0d0a 0d0a 2020 2020  y(other)....    
+00012b20: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00012b30: 2066 756e 6328 6f74 6865 7229 0d0a 0d0a   func(other)....
+00012b40: 2020 2020 2020 2020 2020 2020 2320 4e4f              # NO
+00012b50: 5445 3a20 6e75 6d70 7920 646f 6573 2063  TE: numpy does c
+00012b60: 616c 6c20 4641 2075 6675 6e63 2066 6f72  all FA ufunc for
+00012b70: 2073 7472 696e 6773 0d0a 2020 2020 2020   strings..      
+00012b80: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
+00012b90: 6e73 7461 6e63 6528 7265 7375 6c74 2c20  nstance(result, 
+00012ba0: 4661 7374 4172 7261 7929 2061 6e64 2069  FastArray) and i
+00012bb0: 7369 6e73 7461 6e63 6528 7265 7375 6c74  sinstance(result
+00012bc0: 2c20 6e70 2e6e 6461 7272 6179 293a 0d0a  , np.ndarray):..
+00012bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012be0: 7265 7375 6c74 203d 2072 6573 756c 742e  result = result.
+00012bf0: 7669 6577 2846 6173 7441 7272 6179 290d  view(FastArray).
+00012c00: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00012c10: 7572 6e20 7265 7375 6c74 0d0a 0d0a 2020  urn result....  
+00012c20: 2020 2020 2020 7265 7375 6c74 203d 2066        result = f
+00012c30: 756e 6328 6f74 6865 7229 0d0a 2020 2020  unc(other)..    
+00012c40: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
+00012c50: 740d 0a0d 0a20 2020 2064 6566 205f 5f6e  t....    def __n
+00012c60: 655f 5f28 7365 6c66 2c20 6f74 6865 7229  e__(self, other)
+00012c70: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
+00012c80: 6e20 7365 6c66 2e5f 636f 6d70 6172 655f  n self._compare_
+00012c90: 6368 6563 6b28 7375 7065 7228 292e 5f5f  check(super().__
+00012ca0: 6e65 5f5f 2c20 6f74 6865 7229 0d0a 0d0a  ne__, other)....
+00012cb0: 2020 2020 6465 6620 5f5f 6571 5f5f 2873      def __eq__(s
+00012cc0: 656c 662c 206f 7468 6572 293a 0d0a 2020  elf, other):..  
+00012cd0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00012ce0: 662e 5f63 6f6d 7061 7265 5f63 6865 636b  f._compare_check
+00012cf0: 2873 7570 6572 2829 2e5f 5f65 715f 5f2c  (super().__eq__,
+00012d00: 206f 7468 6572 290d 0a0d 0a20 2020 2064   other)....    d
+00012d10: 6566 205f 5f67 655f 5f28 7365 6c66 2c20  ef __ge__(self, 
+00012d20: 6f74 6865 7229 3a0d 0a20 2020 2020 2020  other):..       
+00012d30: 2072 6574 7572 6e20 7365 6c66 2e5f 636f   return self._co
+00012d40: 6d70 6172 655f 6368 6563 6b28 7375 7065  mpare_check(supe
+00012d50: 7228 292e 5f5f 6765 5f5f 2c20 6f74 6865  r().__ge__, othe
+00012d60: 7229 0d0a 0d0a 2020 2020 6465 6620 5f5f  r)....    def __
+00012d70: 6774 5f5f 2873 656c 662c 206f 7468 6572  gt__(self, other
+00012d80: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
+00012d90: 726e 2073 656c 662e 5f63 6f6d 7061 7265  rn self._compare
+00012da0: 5f63 6865 636b 2873 7570 6572 2829 2e5f  _check(super()._
+00012db0: 5f67 745f 5f2c 206f 7468 6572 290d 0a0d  _gt__, other)...
+00012dc0: 0a20 2020 2064 6566 205f 5f6c 655f 5f28  .    def __le__(
+00012dd0: 7365 6c66 2c20 6f74 6865 7229 3a0d 0a20  self, other):.. 
+00012de0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00012df0: 6c66 2e5f 636f 6d70 6172 655f 6368 6563  lf._compare_chec
+00012e00: 6b28 7375 7065 7228 292e 5f5f 6c65 5f5f  k(super().__le__
+00012e10: 2c20 6f74 6865 7229 0d0a 0d0a 2020 2020  , other)....    
+00012e20: 6465 6620 5f5f 6c74 5f5f 2873 656c 662c  def __lt__(self,
+00012e30: 206f 7468 6572 293a 0d0a 2020 2020 2020   other):..      
+00012e40: 2020 7265 7475 726e 2073 656c 662e 5f63    return self._c
+00012e50: 6f6d 7061 7265 5f63 6865 636b 2873 7570  ompare_check(sup
+00012e60: 6572 2829 2e5f 5f6c 745f 5f2c 206f 7468  er().__lt__, oth
+00012e70: 6572 290d 0a0d 0a20 2020 2064 6566 2065  er)....    def e
+00012e80: 7128 7365 6c66 2c20 6f74 6865 7229 3a0d  q(self, other):.
+00012e90: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00012ea0: 7365 6c66 2e5f 5f65 715f 5f28 6f74 6865  self.__eq__(othe
+00012eb0: 7229 0d0a 0d0a 2020 2020 6465 6620 6e65  r)....    def ne
+00012ec0: 2873 656c 662c 206f 7468 6572 293a 0d0a  (self, other):..
+00012ed0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00012ee0: 656c 662e 5f5f 6e65 5f5f 286f 7468 6572  elf.__ne__(other
+00012ef0: 290d 0a0d 0a20 2020 2064 6566 2067 6528  )....    def ge(
+00012f00: 7365 6c66 2c20 6f74 6865 7229 3a0d 0a20  self, other):.. 
+00012f10: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00012f20: 6c66 2e5f 5f67 655f 5f28 6f74 6865 7229  lf.__ge__(other)
+00012f30: 0d0a 0d0a 2020 2020 6465 6620 6c65 2873  ....    def le(s
+00012f40: 656c 662c 206f 7468 6572 293a 0d0a 2020  elf, other):..  
+00012f50: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00012f60: 662e 5f5f 6c65 5f5f 286f 7468 6572 290d  f.__le__(other).
+00012f70: 0a0d 0a20 2020 2064 6566 2067 7428 7365  ...    def gt(se
+00012f80: 6c66 2c20 6f74 6865 7229 3a0d 0a20 2020  lf, other):..   
+00012f90: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00012fa0: 2e5f 5f67 745f 5f28 6f74 6865 7229 0d0a  .__gt__(other)..
+00012fb0: 0d0a 2020 2020 6465 6620 6c74 2873 656c  ..    def lt(sel
+00012fc0: 662c 206f 7468 6572 293a 0d0a 2020 2020  f, other):..    
+00012fd0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00012fe0: 5f5f 6c74 5f5f 286f 7468 6572 290d 0a0d  __lt__(other)...
+00012ff0: 0a20 2020 2061 6464 203d 206e 702e 6e64  .    add = np.nd
+00013000: 6172 7261 792e 5f5f 6164 645f 5f0d 0a20  array.__add__.. 
+00013010: 2020 2073 7562 203d 206e 702e 6e64 6172     sub = np.ndar
+00013020: 7261 792e 5f5f 7375 625f 5f0d 0a20 2020  ray.__sub__..   
+00013030: 206d 756c 203d 206e 702e 6e64 6172 7261   mul = np.ndarra
+00013040: 792e 5f5f 6d75 6c5f 5f0d 0a20 2020 2064  y.__mul__..    d
+00013050: 6976 203d 206e 702e 6e64 6172 7261 792e  iv = np.ndarray.
+00013060: 5f5f 7472 7565 6469 765f 5f0d 0a20 2020  __truediv__..   
+00013070: 2066 6c6f 6f72 6469 7620 3d20 6e70 2e6e   floordiv = np.n
+00013080: 6461 7272 6179 2e5f 5f66 6c6f 6f72 6469  darray.__floordi
+00013090: 765f 5f0d 0a20 2020 2070 6f77 203d 206e  v__..    pow = n
+000130a0: 702e 6e64 6172 7261 792e 5f5f 706f 775f  p.ndarray.__pow_
+000130b0: 5f0d 0a20 2020 206d 6f64 203d 206e 702e  _..    mod = np.
+000130c0: 6e64 6172 7261 792e 5f5f 6d6f 645f 5f0d  ndarray.__mod__.
+000130d0: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+000130e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000130f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013100: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013110: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013120: 2d2d 2d2d 0d0a 2020 2020 6465 6620 7374  ----..    def st
+00013130: 725f 6170 7065 6e64 2873 656c 662c 206f  r_append(self, o
+00013140: 7468 6572 293a 0d0a 2020 2020 2020 2020  ther):..        
+00013150: 6966 2073 656c 662e 6474 7970 652e 6e75  if self.dtype.nu
+00013160: 6d20 3d3d 206f 7468 6572 2e64 7479 7065  m == other.dtype
+00013170: 2e6e 756d 3a0d 0a20 2020 2020 2020 2020  .num:..         
+00013180: 2020 2066 756e 6320 3d20 5479 7065 5265     func = TypeRe
+00013190: 6769 7374 6572 2e4d 6174 684c 6564 6765  gister.MathLedge
+000131a0: 722e 5f42 4153 4943 4d41 5448 5f54 574f  r._BASICMATH_TWO
+000131b0: 5f49 4e50 5554 530d 0a20 2020 2020 2020  _INPUTS..       
+000131c0: 2020 2020 2072 6574 7572 6e20 6675 6e63       return func
+000131d0: 2828 7365 6c66 2c20 6f74 6865 7229 2c20  ((self, other), 
+000131e0: 4d41 5448 5f4f 5045 5241 5449 4f4e 2e41  MATH_OPERATION.A
+000131f0: 4444 2c20 7365 6c66 2e64 7479 7065 2e6e  DD, self.dtype.n
+00013200: 756d 290d 0a20 2020 2020 2020 2072 6169  um)..        rai
+00013210: 7365 2054 7970 6545 7272 6f72 2822 6361  se TypeError("ca
+00013220: 6e6e 6f74 2063 6f6e 6361 7422 290d 0a0d  nnot concat")...
+00013230: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+00013240: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013250: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013260: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013270: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013280: 2d2d 0d0a 2020 2020 6465 6620 7371 7565  --..    def sque
+00013290: 657a 6528 7365 6c66 2c20 2a61 7267 732c  eze(self, *args,
+000132a0: 202a 2a6b 7761 7267 7329 3a0d 0a20 2020   **kwargs):..   
+000132b0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+000132c0: 2e5f 6e70 2e73 7175 6565 7a65 282a 6172  ._np.squeeze(*ar
+000132d0: 6773 2c20 2a2a 6b77 6172 6773 290d 0a0d  gs, **kwargs)...
+000132e0: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+000132f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013300: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013310: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013320: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013330: 2d2d 0d0a 2020 2020 6465 6620 6973 636f  --..    def isco
+00013340: 6d70 7574 6162 6c65 2873 656c 6629 202d  mputable(self) -
+00013350: 3e20 626f 6f6c 3a0d 0a20 2020 2020 2020  > bool:..       
+00013360: 2072 6574 7572 6e20 5479 7065 5265 6769   return TypeRegi
+00013370: 7374 6572 2e69 735f 636f 6d70 7574 6162  ster.is_computab
+00013380: 6c65 2873 656c 6629 0d0a 0d0a 2020 2020  le(self)....    
+00013390: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000133a0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000133b0: 2323 2323 2323 2323 2323 2323 230d 0a20  #############.. 
+000133c0: 2020 2023 206e 6570 2d31 3820 6172 7261     # nep-18 arra
+000133d0: 7920 6675 6e63 7469 6f6e 2070 726f 746f  y function proto
+000133e0: 636f 6c20 696d 706c 656d 656e 7461 7469  col implementati
+000133f0: 6f6e 0d0a 2020 2020 2323 2323 2323 2323  on..    ########
+00013400: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00013410: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00013420: 2323 2323 230d 0a20 2020 2040 636c 6173  #####..    @clas
+00013430: 736d 6574 686f 640d 0a20 2020 2064 6566  smethod..    def
+00013440: 205f 7079 5f6e 756d 6265 725f 746f 5f6e   _py_number_to_n
+00013450: 705f 6474 7970 6528 0d0a 2020 2020 2020  p_dtype(..      
+00013460: 2020 636c 732c 2076 616c 3a20 556e 696f    cls, val: Unio
+00013470: 6e5b 696e 742c 206e 702e 696e 7465 6765  n[int, np.intege
+00013480: 722c 204e 6f6e 655d 2c20 6474 7970 653a  r, None], dtype:
+00013490: 206e 702e 6474 7970 650d 0a20 2020 2029   np.dtype..    )
+000134a0: 202d 3e20 556e 696f 6e5b 6e70 2e75 696e   -> Union[np.uin
+000134b0: 742c 206e 702e 696e 7436 342c 206e 702e  t, np.int64, np.
+000134c0: 666c 6f61 7436 342c 204e 6f6e 655d 3a0d  float64, None]:.
+000134d0: 0a20 2020 2020 2020 2022 2222 436f 6e76  .        """Conv
+000134e0: 6572 7420 6120 7079 7468 6f6e 2074 7970  ert a python typ
+000134f0: 6520 746f 206e 756d 7079 2064 7479 7065  e to numpy dtype
+00013500: 2e0d 0a20 2020 2020 2020 204f 6e6c 7920  ...        Only 
+00013510: 6861 6e64 6c65 7320 696e 7465 6765 7273  handles integers
+00013520: 2e22 2222 0d0a 2020 2020 2020 2020 6966  ."""..        if
+00013530: 2076 616c 2069 7320 6e6f 7420 4e6f 6e65   val is not None
+00013540: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
+00013550: 2069 6e74 6572 6e61 6c6c 7920 6e75 6d70   internally nump
+00013560: 7920 6578 7065 6374 7320 6120 6474 7970  y expects a dtyp
+00013570: 6520 7265 7475 726e 6564 2066 6f72 206e  e returned for n
+00013580: 616e 7374 6420 616e 6420 6f74 6865 7220  anstd and other 
+00013590: 6361 6c63 756c 6174 696f 6e73 0d0a 2020  calculations..  
+000135a0: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+000135b0: 6e73 7461 6e63 6528 7661 6c2c 2028 696e  nstance(val, (in
+000135c0: 742c 206e 702e 696e 7465 6765 7229 293a  t, np.integer)):
+000135d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000135e0: 2020 2320 666f 7220 7569 6e74 3634 2c20    # for uint64, 
+000135f0: 7468 6520 6869 6768 2062 6974 206d 7573  the high bit mus
+00013600: 7420 6265 2070 7265 7365 7276 6564 0d0a  t be preserved..
+00013610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013620: 6966 2064 7479 7065 2e63 6861 7220 696e  if dtype.char in
+00013630: 204e 756d 7079 4368 6172 5479 7065 732e   NumpyCharTypes.
+00013640: 556e 7369 676e 6564 496e 7465 6765 7236  UnsignedInteger6
+00013650: 343a 0d0a 2020 2020 2020 2020 2020 2020  4:..            
+00013660: 2020 2020 2020 2020 7265 7475 726e 206e          return n
+00013670: 702e 7569 6e74 3634 2876 616c 290d 0a20  p.uint64(val).. 
+00013680: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00013690: 6574 7572 6e20 6e70 2e69 6e74 3634 2876  eturn np.int64(v
+000136a0: 616c 290d 0a20 2020 2020 2020 2020 2020  al)..           
+000136b0: 2072 6574 7572 6e20 6e70 2e66 6c6f 6174   return np.float
+000136c0: 3634 2876 616c 290d 0a20 2020 2020 2020  64(val)..       
+000136d0: 2072 6574 7572 6e20 7661 6c0d 0a0d 0a20   return val.... 
+000136e0: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+000136f0: 0d0a 2020 2020 405f 4172 7261 7946 756e  ..    @_ArrayFun
+00013700: 6374 696f 6e48 656c 7065 722e 7265 6769  ctionHelper.regi
+00013710: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
+00013720: 696f 6e28 6e70 2e61 7267 6d61 7829 0d0a  ion(np.argmax)..
+00013730: 2020 2020 6465 6620 5f61 7267 6d61 7828      def _argmax(
+00013740: 612c 2061 7869 733d 4e6f 6e65 2c20 6f75  a, axis=None, ou
+00013750: 743d 4e6f 6e65 293a 0d0a 2020 2020 2020  t=None):..      
+00013760: 2020 7265 7375 6c74 203d 2072 632e 5265    result = rc.Re
+00013770: 6475 6365 2861 2c20 5245 4455 4345 5f46  duce(a, REDUCE_F
+00013780: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
+00013790: 4152 474d 4158 2c20 3029 0d0a 2020 2020  ARGMAX, 0)..    
+000137a0: 2020 2020 7265 7475 726e 2046 6173 7441      return FastA
+000137b0: 7272 6179 2e5f 7079 5f6e 756d 6265 725f  rray._py_number_
+000137c0: 746f 5f6e 705f 6474 7970 6528 7265 7375  to_np_dtype(resu
+000137d0: 6c74 2c20 612e 6474 7970 6529 0d0a 0d0a  lt, a.dtype)....
+000137e0: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
+000137f0: 640d 0a20 2020 2040 5f41 7272 6179 4675  d..    @_ArrayFu
+00013800: 6e63 7469 6f6e 4865 6c70 6572 2e72 6567  nctionHelper.reg
+00013810: 6973 7465 725f 6172 7261 795f 6675 6e63  ister_array_func
+00013820: 7469 6f6e 286e 702e 6e61 6e61 7267 6d61  tion(np.nanargma
+00013830: 7829 0d0a 2020 2020 6465 6620 5f6e 616e  x)..    def _nan
+00013840: 6172 676d 6178 2861 2c20 6178 6973 3d4e  argmax(a, axis=N
+00013850: 6f6e 6529 3a0d 0a20 2020 2020 2020 2072  one):..        r
+00013860: 6573 756c 7420 3d20 7263 2e52 6564 7563  esult = rc.Reduc
+00013870: 6528 612c 2052 4544 5543 455f 4655 4e43  e(a, REDUCE_FUNC
+00013880: 5449 4f4e 532e 5245 4455 4345 5f4e 414e  TIONS.REDUCE_NAN
+00013890: 4152 474d 4158 2c20 3029 0d0a 2020 2020  ARGMAX, 0)..    
+000138a0: 2020 2020 7265 7475 726e 2046 6173 7441      return FastA
+000138b0: 7272 6179 2e5f 7079 5f6e 756d 6265 725f  rray._py_number_
+000138c0: 746f 5f6e 705f 6474 7970 6528 7265 7375  to_np_dtype(resu
+000138d0: 6c74 2c20 612e 6474 7970 6529 0d0a 0d0a  lt, a.dtype)....
+000138e0: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
+000138f0: 640d 0a20 2020 2040 5f41 7272 6179 4675  d..    @_ArrayFu
+00013900: 6e63 7469 6f6e 4865 6c70 6572 2e72 6567  nctionHelper.reg
+00013910: 6973 7465 725f 6172 7261 795f 6675 6e63  ister_array_func
+00013920: 7469 6f6e 286e 702e 6172 676d 696e 290d  tion(np.argmin).
+00013930: 0a20 2020 2064 6566 205f 6172 676d 696e  .    def _argmin
+00013940: 2861 2c20 6178 6973 3d4e 6f6e 652c 206f  (a, axis=None, o
+00013950: 7574 3d4e 6f6e 6529 3a0d 0a20 2020 2020  ut=None):..     
+00013960: 2020 2072 6573 756c 7420 3d20 7263 2e52     result = rc.R
+00013970: 6564 7563 6528 612c 2052 4544 5543 455f  educe(a, REDUCE_
+00013980: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
+00013990: 5f41 5247 4d49 4e2c 2030 290d 0a20 2020  _ARGMIN, 0)..   
+000139a0: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
+000139b0: 4172 7261 792e 5f70 795f 6e75 6d62 6572  Array._py_number
+000139c0: 5f74 6f5f 6e70 5f64 7479 7065 2872 6573  _to_np_dtype(res
+000139d0: 756c 742c 2061 2e64 7479 7065 290d 0a0d  ult, a.dtype)...
+000139e0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+000139f0: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
+00013a00: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
+00013a10: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
+00013a20: 6374 696f 6e28 6e70 2e6e 616e 6172 676d  ction(np.nanargm
+00013a30: 696e 290d 0a20 2020 2064 6566 205f 6e61  in)..    def _na
+00013a40: 6e61 7267 6d69 6e28 612c 2061 7869 733d  nargmin(a, axis=
+00013a50: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
+00013a60: 7265 7375 6c74 203d 2072 632e 5265 6475  result = rc.Redu
+00013a70: 6365 2861 2c20 5245 4455 4345 5f46 554e  ce(a, REDUCE_FUN
+00013a80: 4354 494f 4e53 2e52 4544 5543 455f 4e41  CTIONS.REDUCE_NA
+00013a90: 4e41 5247 4d49 4e2c 2030 290d 0a20 2020  NARGMIN, 0)..   
+00013aa0: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
+00013ab0: 4172 7261 792e 5f70 795f 6e75 6d62 6572  Array._py_number
+00013ac0: 5f74 6f5f 6e70 5f64 7479 7065 2872 6573  _to_np_dtype(res
+00013ad0: 756c 742c 2061 2e64 7479 7065 290d 0a0d  ult, a.dtype)...
+00013ae0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+00013af0: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
+00013b00: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
+00013b10: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
+00013b20: 6374 696f 6e28 6e70 2e65 6d70 7479 5f6c  ction(np.empty_l
+00013b30: 696b 6529 0d0a 2020 2020 6465 6620 5f65  ike)..    def _e
+00013b40: 6d70 7479 5f6c 696b 6528 0d0a 2020 2020  mpty_like(..    
+00013b50: 2020 2020 6172 7261 793a 2022 4661 7374      array: "Fast
+00013b60: 4172 7261 7922 2c0d 0a20 2020 2020 2020  Array",..       
+00013b70: 2064 7479 7065 3a20 4f70 7469 6f6e 616c   dtype: Optional
+00013b80: 5b55 6e69 6f6e 5b73 7472 2c20 6e70 2e64  [Union[str, np.d
+00013b90: 7479 7065 5d5d 203d 204e 6f6e 652c 0d0a  type]] = None,..
+00013ba0: 2020 2020 2020 2020 6f72 6465 723a 2073          order: s
+00013bb0: 7472 203d 2022 4b22 2c0d 0a20 2020 2020  tr = "K",..     
+00013bc0: 2020 2073 7562 6f6b 3a20 626f 6f6c 203d     subok: bool =
+00013bd0: 2054 7275 652c 0d0a 2020 2020 2020 2020   True,..        
+00013be0: 7368 6170 653a 204f 7074 696f 6e61 6c5b  shape: Optional[
+00013bf0: 556e 696f 6e5b 696e 742c 2053 6571 7565  Union[int, Seque
+00013c00: 6e63 655b 696e 745d 5d5d 203d 204e 6f6e  nce[int]]] = Non
+00013c10: 652c 0d0a 2020 2020 2920 2d3e 2022 4661  e,..    ) -> "Fa
+00013c20: 7374 4172 7261 7922 3a0d 0a20 2020 2020  stArray":..     
+00013c30: 2020 2061 7272 6179 203d 2061 7272 6179     array = array
+00013c40: 2e5f 6e70 0d0a 2020 2020 2020 2020 7265  ._np..        re
+00013c50: 7375 6c74 203d 2072 632e 4c65 6467 6572  sult = rc.Ledger
+00013c60: 4675 6e63 7469 6f6e 286e 702e 656d 7074  Function(np.empt
+00013c70: 795f 6c69 6b65 2c20 6172 7261 792c 2064  y_like, array, d
+00013c80: 7479 7065 3d64 7479 7065 2c20 6f72 6465  type=dtype, orde
+00013c90: 723d 6f72 6465 722c 2073 7562 6f6b 3d73  r=order, subok=s
+00013ca0: 7562 6f6b 2c20 7368 6170 653d 7368 6170  ubok, shape=shap
+00013cb0: 6529 0d0a 2020 2020 2020 2020 7265 7475  e)..        retu
+00013cc0: 726e 2072 6573 756c 740d 0a0d 0a20 2020  rn result....   
+00013cd0: 2040 7374 6174 6963 6d65 7468 6f64 0d0a   @staticmethod..
+00013ce0: 2020 2020 405f 4172 7261 7946 756e 6374      @_ArrayFunct
+00013cf0: 696f 6e48 656c 7065 722e 7265 6769 7374  ionHelper.regist
+00013d00: 6572 5f61 7272 6179 5f66 756e 6374 696f  er_array_functio
+00013d10: 6e28 6e70 2e6d 6178 290d 0a20 2020 2064  n(np.max)..    d
+00013d20: 6566 205f 6d61 7828 612c 2061 7869 733d  ef _max(a, axis=
+00013d30: 4e6f 6e65 2c20 6f75 743d 4e6f 6e65 2c20  None, out=None, 
+00013d40: 6b65 6570 6469 6d73 3d4e 6f6e 652c 2069  keepdims=None, i
+00013d50: 6e69 7469 616c 3d4e 6f6e 652c 2077 6865  nitial=None, whe
+00013d60: 7265 3d4e 6f6e 6529 3a0d 0a20 2020 2020  re=None):..     
+00013d70: 2020 2072 6573 756c 7420 3d20 7263 2e52     result = rc.R
+00013d80: 6564 7563 6528 612c 2052 4544 5543 455f  educe(a, REDUCE_
+00013d90: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
+00013da0: 5f4d 4158 2c20 3029 0d0a 2020 2020 2020  _MAX, 0)..      
+00013db0: 2020 6966 2072 6573 756c 7420 6973 206e    if result is n
+00013dc0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00013dd0: 2020 2020 2020 7265 7475 726e 2061 2e64        return a.d
+00013de0: 7479 7065 2e74 7970 6528 7265 7375 6c74  type.type(result
+00013df0: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00013e00: 6e20 7265 7375 6c74 0d0a 0d0a 2020 2020  n result....    
+00013e10: 4073 7461 7469 636d 6574 686f 640d 0a20  @staticmethod.. 
+00013e20: 2020 2040 5f41 7272 6179 4675 6e63 7469     @_ArrayFuncti
+00013e30: 6f6e 4865 6c70 6572 2e72 6567 6973 7465  onHelper.registe
+00013e40: 725f 6172 7261 795f 6675 6e63 7469 6f6e  r_array_function
+00013e50: 286e 702e 6e61 6e6d 6178 290d 0a20 2020  (np.nanmax)..   
+00013e60: 2064 6566 205f 6e61 6e6d 6178 2861 2c20   def _nanmax(a, 
+00013e70: 6178 6973 3d4e 6f6e 652c 206f 7574 3d4e  axis=None, out=N
+00013e80: 6f6e 652c 206b 6565 7064 696d 733d 4e6f  one, keepdims=No
+00013e90: 6e65 293a 0d0a 2020 2020 2020 2020 7265  ne):..        re
+00013ea0: 7375 6c74 203d 2072 632e 5265 6475 6365  sult = rc.Reduce
+00013eb0: 2861 2c20 5245 4455 4345 5f46 554e 4354  (a, REDUCE_FUNCT
+00013ec0: 494f 4e53 2e52 4544 5543 455f 4e41 4e4d  IONS.REDUCE_NANM
+00013ed0: 4158 2c20 3029 0d0a 2020 2020 2020 2020  AX, 0)..        
+00013ee0: 6966 2072 6573 756c 7420 6973 206e 6f74  if result is not
+00013ef0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00013f00: 2020 2020 7265 7475 726e 2061 2e64 7479      return a.dty
+00013f10: 7065 2e74 7970 6528 7265 7375 6c74 290d  pe.type(result).
+00013f20: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00013f30: 7265 7375 6c74 0d0a 0d0a 2020 2020 4073  result....    @s
+00013f40: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
+00013f50: 2040 5f41 7272 6179 4675 6e63 7469 6f6e   @_ArrayFunction
+00013f60: 4865 6c70 6572 2e72 6567 6973 7465 725f  Helper.register_
+00013f70: 6172 7261 795f 6675 6e63 7469 6f6e 286e  array_function(n
+00013f80: 702e 6d65 616e 290d 0a20 2020 2064 6566  p.mean)..    def
+00013f90: 205f 6d65 616e 2861 2c20 6178 6973 3d4e   _mean(a, axis=N
+00013fa0: 6f6e 652c 2064 7479 7065 3d4e 6f6e 652c  one, dtype=None,
+00013fb0: 206f 7574 3d4e 6f6e 652c 206b 6565 7064   out=None, keepd
+00013fc0: 696d 733d 4e6f 6e65 293a 0d0a 2020 2020  ims=None):..    
+00013fd0: 2020 2020 7265 7375 6c74 203d 2072 632e      result = rc.
+00013fe0: 5265 6475 6365 2861 2c20 5245 4455 4345  Reduce(a, REDUCE
+00013ff0: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
+00014000: 455f 4d45 414e 2c20 3029 0d0a 2020 2020  E_MEAN, 0)..    
+00014010: 2020 2020 7265 7475 726e 2046 6173 7441      return FastA
+00014020: 7272 6179 2e5f 7079 5f6e 756d 6265 725f  rray._py_number_
+00014030: 746f 5f6e 705f 6474 7970 6528 7265 7375  to_np_dtype(resu
+00014040: 6c74 2c20 612e 6474 7970 6529 0d0a 0d0a  lt, a.dtype)....
+00014050: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
+00014060: 640d 0a20 2020 2040 5f41 7272 6179 4675  d..    @_ArrayFu
+00014070: 6e63 7469 6f6e 4865 6c70 6572 2e72 6567  nctionHelper.reg
+00014080: 6973 7465 725f 6172 7261 795f 6675 6e63  ister_array_func
+00014090: 7469 6f6e 286e 702e 6e61 6e6d 6561 6e29  tion(np.nanmean)
+000140a0: 0d0a 2020 2020 6465 6620 5f6e 616e 6d65  ..    def _nanme
+000140b0: 616e 2861 2c20 6178 6973 3d4e 6f6e 652c  an(a, axis=None,
+000140c0: 2064 7479 7065 3d4e 6f6e 652c 206f 7574   dtype=None, out
+000140d0: 3d4e 6f6e 652c 206b 6565 7064 696d 733d  =None, keepdims=
+000140e0: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
+000140f0: 7265 7375 6c74 203d 2072 632e 5265 6475  result = rc.Redu
+00014100: 6365 2861 2c20 5245 4455 4345 5f46 554e  ce(a, REDUCE_FUN
+00014110: 4354 494f 4e53 2e52 4544 5543 455f 4e41  CTIONS.REDUCE_NA
+00014120: 4e4d 4541 4e2c 2030 290d 0a20 2020 2020  NMEAN, 0)..     
+00014130: 2020 2072 6574 7572 6e20 4661 7374 4172     return FastAr
+00014140: 7261 792e 5f70 795f 6e75 6d62 6572 5f74  ray._py_number_t
+00014150: 6f5f 6e70 5f64 7479 7065 2872 6573 756c  o_np_dtype(resul
+00014160: 742c 2061 2e64 7479 7065 290d 0a0d 0a20  t, a.dtype).... 
+00014170: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+00014180: 0d0a 2020 2020 405f 4172 7261 7946 756e  ..    @_ArrayFun
+00014190: 6374 696f 6e48 656c 7065 722e 7265 6769  ctionHelper.regi
+000141a0: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
+000141b0: 696f 6e28 6e70 2e6d 696e 290d 0a20 2020  ion(np.min)..   
+000141c0: 2064 6566 205f 6d69 6e28 612c 2061 7869   def _min(a, axi
+000141d0: 733d 4e6f 6e65 2c20 6f75 743d 4e6f 6e65  s=None, out=None
+000141e0: 2c20 6b65 6570 6469 6d73 3d4e 6f6e 652c  , keepdims=None,
+000141f0: 2069 6e69 7469 616c 3d4e 6f6e 652c 2077   initial=None, w
+00014200: 6865 7265 3d4e 6f6e 6529 3a0d 0a20 2020  here=None):..   
+00014210: 2020 2020 2072 6573 756c 7420 3d20 7263       result = rc
+00014220: 2e52 6564 7563 6528 612c 2052 4544 5543  .Reduce(a, REDUC
+00014230: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
+00014240: 4345 5f4d 494e 2c20 3029 0d0a 2020 2020  CE_MIN, 0)..    
+00014250: 2020 2020 6966 2072 6573 756c 7420 6973      if result is
+00014260: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00014270: 2020 2020 2020 2020 7265 7475 726e 2061          return a
+00014280: 2e64 7479 7065 2e74 7970 6528 7265 7375  .dtype.type(resu
+00014290: 6c74 290d 0a20 2020 2020 2020 2072 6574  lt)..        ret
+000142a0: 7572 6e20 7265 7375 6c74 0d0a 0d0a 2020  urn result....  
+000142b0: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
+000142c0: 0a20 2020 2040 5f41 7272 6179 4675 6e63  .    @_ArrayFunc
+000142d0: 7469 6f6e 4865 6c70 6572 2e72 6567 6973  tionHelper.regis
+000142e0: 7465 725f 6172 7261 795f 6675 6e63 7469  ter_array_functi
+000142f0: 6f6e 286e 702e 6e61 6e6d 696e 290d 0a20  on(np.nanmin).. 
+00014300: 2020 2064 6566 205f 6e61 6e6d 696e 2861     def _nanmin(a
+00014310: 2c20 6178 6973 3d4e 6f6e 652c 206f 7574  , axis=None, out
+00014320: 3d4e 6f6e 652c 206b 6565 7064 696d 733d  =None, keepdims=
+00014330: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
+00014340: 7265 7375 6c74 203d 2072 632e 5265 6475  result = rc.Redu
+00014350: 6365 2861 2c20 5245 4455 4345 5f46 554e  ce(a, REDUCE_FUN
+00014360: 4354 494f 4e53 2e52 4544 5543 455f 4e41  CTIONS.REDUCE_NA
+00014370: 4e4d 494e 2c20 3029 0d0a 2020 2020 2020  NMIN, 0)..      
+00014380: 2020 6966 2072 6573 756c 7420 6973 206e    if result is n
+00014390: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+000143a0: 2020 2020 2020 7265 7475 726e 2061 2e64        return a.d
+000143b0: 7479 7065 2e74 7970 6528 7265 7375 6c74  type.type(result
+000143c0: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+000143d0: 6e20 7265 7375 6c74 0d0a 0d0a 2020 2020  n result....    
+000143e0: 4073 7461 7469 636d 6574 686f 640d 0a20  @staticmethod.. 
+000143f0: 2020 2040 5f41 7272 6179 4675 6e63 7469     @_ArrayFuncti
+00014400: 6f6e 4865 6c70 6572 2e72 6567 6973 7465  onHelper.registe
+00014410: 725f 6172 7261 795f 6675 6e63 7469 6f6e  r_array_function
+00014420: 286e 702e 7374 6429 0d0a 2020 2020 6465  (np.std)..    de
+00014430: 6620 5f73 7464 2861 2c20 6178 6973 3d4e  f _std(a, axis=N
+00014440: 6f6e 652c 2064 7479 7065 3d4e 6f6e 652c  one, dtype=None,
+00014450: 206f 7574 3d4e 6f6e 652c 2064 646f 663d   out=None, ddof=
+00014460: 4e6f 6e65 2c20 6b65 6570 6469 6d73 3d4e  None, keepdims=N
+00014470: 6f6e 6529 3a0d 0a20 2020 2020 2020 2072  one):..        r
+00014480: 6573 756c 7420 3d20 7263 2e52 6564 7563  esult = rc.Reduc
+00014490: 6528 612c 2052 4544 5543 455f 4655 4e43  e(a, REDUCE_FUNC
+000144a0: 5449 4f4e 532e 5245 4455 4345 5f53 5444  TIONS.REDUCE_STD
+000144b0: 2c20 3029 0d0a 2020 2020 2020 2020 7265  , 0)..        re
+000144c0: 7475 726e 2046 6173 7441 7272 6179 2e5f  turn FastArray._
+000144d0: 7079 5f6e 756d 6265 725f 746f 5f6e 705f  py_number_to_np_
+000144e0: 6474 7970 6528 7265 7375 6c74 2c20 612e  dtype(result, a.
+000144f0: 6474 7970 6529 0d0a 0d0a 2020 2020 4073  dtype)....    @s
+00014500: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
+00014510: 2040 5f41 7272 6179 4675 6e63 7469 6f6e   @_ArrayFunction
+00014520: 4865 6c70 6572 2e72 6567 6973 7465 725f  Helper.register_
+00014530: 6172 7261 795f 6675 6e63 7469 6f6e 286e  array_function(n
+00014540: 702e 6e61 6e73 7464 290d 0a20 2020 2064  p.nanstd)..    d
+00014550: 6566 205f 6e61 6e73 7464 2861 2c20 6178  ef _nanstd(a, ax
+00014560: 6973 3d4e 6f6e 652c 2064 7479 7065 3d4e  is=None, dtype=N
+00014570: 6f6e 652c 206f 7574 3d4e 6f6e 652c 2064  one, out=None, d
+00014580: 646f 663d 4e6f 6e65 2c20 6b65 6570 6469  dof=None, keepdi
+00014590: 6d73 3d4e 6f6e 6529 3a0d 0a20 2020 2020  ms=None):..     
+000145a0: 2020 2072 6573 756c 7420 3d20 7263 2e52     result = rc.R
+000145b0: 6564 7563 6528 612c 2052 4544 5543 455f  educe(a, REDUCE_
+000145c0: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
+000145d0: 5f4e 414e 5354 442c 2030 290d 0a20 2020  _NANSTD, 0)..   
+000145e0: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
+000145f0: 4172 7261 792e 5f70 795f 6e75 6d62 6572  Array._py_number
+00014600: 5f74 6f5f 6e70 5f64 7479 7065 2872 6573  _to_np_dtype(res
+00014610: 756c 742c 2061 2e64 7479 7065 290d 0a0d  ult, a.dtype)...
+00014620: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+00014630: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
+00014640: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
+00014650: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
+00014660: 6374 696f 6e28 6e70 2e72 6f75 6e64 290d  ction(np.round).
+00014670: 0a20 2020 2040 5f41 7272 6179 4675 6e63  .    @_ArrayFunc
+00014680: 7469 6f6e 4865 6c70 6572 2e72 6567 6973  tionHelper.regis
+00014690: 7465 725f 6172 7261 795f 6675 6e63 7469  ter_array_functi
+000146a0: 6f6e 286e 702e 6172 6f75 6e64 290d 0a20  on(np.around).. 
+000146b0: 2020 2040 5f41 7272 6179 4675 6e63 7469     @_ArrayFuncti
+000146c0: 6f6e 4865 6c70 6572 2e72 6567 6973 7465  onHelper.registe
+000146d0: 725f 6172 7261 795f 6675 6e63 7469 6f6e  r_array_function
+000146e0: 286e 702e 726f 756e 645f 2920 2023 204e  (np.round_)  # N
+000146f0: 2e42 2c20 726f 756e 645f 2069 7320 616e  .B, round_ is an
+00014700: 2061 6c69 6173 2066 6f72 2061 726f 756e   alias for aroun
+00014710: 640d 0a20 2020 2064 6566 205f 726f 756e  d..    def _roun
+00014720: 645f 2861 2c20 6465 6369 6d61 6c73 3d4e  d_(a, decimals=N
+00014730: 6f6e 652c 206f 7574 3d4e 6f6e 6529 3a0d  one, out=None):.
+00014740: 0a20 2020 2020 2020 2023 2054 4f44 4f20  .        # TODO 
+00014750: 6861 6e64 6c65 2060 6465 6369 6d61 6c60  handle `decimal`
+00014760: 2061 6e64 2060 6f75 7460 2061 7267 756d   and `out` argum
+00014770: 656e 7473 0d0a 2020 2020 2020 2020 2320  ents..        # 
+00014780: 4966 2063 616c 6c65 7273 2064 6563 6964  If callers decid
+00014790: 6520 746f 2075 7365 2074 6869 7320 4661  e to use this Fa
+000147a0: 7374 4172 7261 7920 7374 6174 6963 6d65  stArray staticme
+000147b0: 7468 6f64 206f 7574 7369 6465 2074 6865  thod outside the
+000147c0: 2073 636f 7065 206f 6620 6172 7261 7920   scope of array 
+000147d0: 6675 6e63 7469 6f6e 2070 726f 746f 636f  function protoco
+000147e0: 6c0d 0a20 2020 2020 2020 2023 2070 726f  l..        # pro
+000147f0: 7669 6465 2061 7267 756d 656e 7420 6368  vide argument ch
+00014800: 6563 6b73 2073 696e 6365 2069 7420 6d61  ecks since it ma
+00014810: 7920 6265 636f 6d65 2075 6e63 6c65 6172  y become unclear
+00014820: 2077 6865 6e20 7468 696e 6773 2066 6169   when things fai
+00014830: 6c20 6174 2074 6865 2043 2065 7874 656e  l at the C exten
+00014840: 7369 6f6e 206c 6179 6572 2e0d 0a20 2020  sion layer...   
+00014850: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
+00014860: 7374 616e 6365 2861 2c20 4661 7374 4172  stance(a, FastAr
+00014870: 7261 7929 3a0d 0a20 2020 2020 2020 2020  ray):..         
+00014880: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
+00014890: 726f 7228 6622 7b46 6173 7441 7272 6179  ror(f"{FastArray
+000148a0: 2e5f 5f6e 616d 655f 5f7d 2e5f 726f 756e  .__name__}._roun
+000148b0: 645f 2065 7870 6563 7465 6420 4661 7374  d_ expected Fast
+000148c0: 4172 7261 7920 7375 6274 7970 652c 2067  Array subtype, g
+000148d0: 6f74 207b 7479 7065 2861 297d 2229 0d0a  ot {type(a)}")..
+000148e0: 0d0a 2020 2020 2020 2020 6f72 6967 696e  ..        origin
+000148f0: 616c 5f64 7479 7065 203d 2061 2e64 7479  al_dtype = a.dty
+00014900: 7065 0d0a 2020 2020 2020 2020 6120 3d20  pe..        a = 
+00014910: 612e 6173 7479 7065 286e 702e 666c 6f61  a.astype(np.floa
+00014920: 7436 3429 0d0a 2020 2020 2020 2020 6661  t64)..        fa
+00014930: 7374 5f66 756e 6374 696f 6e20 3d20 6755  st_function = gU
+00014940: 6e61 7279 5546 756e 6373 2e67 6574 286e  naryUFuncs.get(n
+00014950: 702e 726f 756e 642c 204e 6f6e 6529 0d0a  p.round, None)..
+00014960: 2020 2020 2020 2020 6966 2066 6173 745f          if fast_
+00014970: 6675 6e63 7469 6f6e 2069 7320 4e6f 6e65  function is None
+00014980: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+00014990: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
+000149a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000149b0: 2020 6622 7b46 6173 7441 7272 6179 2e5f    f"{FastArray._
+000149c0: 5f6e 616d 655f 5f7d 2e5f 726f 756e 645f  _name__}._round_
+000149d0: 2075 6e68 616e 646c 6564 2061 7272 6179   unhandled array
+000149e0: 2066 756e 6374 696f 6e20 7b6e 702e 726f   function {np.ro
+000149f0: 756e 647d 5c6e 4b6e 6f77 6e20 6e75 6d70  und}\nKnown nump
+00014a00: 7920 6172 7261 7920 6675 6e63 7469 6f6e  y array function
+00014a10: 2074 6f20 7269 7074 6162 6c65 2066 756e   to riptable fun
+00014a20: 6374 696f 6e73 3a20 7b72 6570 7228 6755  ctions: {repr(gU
+00014a30: 6e61 7279 5546 756e 6373 297d 220d 0a20  naryUFuncs)}".. 
+00014a40: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
+00014a50: 2020 2020 2020 2020 2320 466f 7220 4d41          # For MA
+00014a60: 5448 5f4f 5045 5241 5449 4f4e 2e52 4f55  TH_OPERATION.ROU
+00014a70: 4e44 2c20 5f42 4153 4943 4d41 5448 5f4f  ND, _BASICMATH_O
+00014a80: 4e45 5f49 4e50 5554 2072 6574 7572 6e73  NE_INPUT returns
+00014a90: 2061 6e20 6172 7261 7920 6061 7272 6179   an array `array
+00014aa0: 284e 6f6e 652c 2064 7479 7065 3d6f 626a  (None, dtype=obj
+00014ab0: 6563 7429 600d 0a20 2020 2020 2020 2023  ect)`..        #
+00014ac0: 2069 6620 7468 6520 696e 7075 7420 6474   if the input dt
+00014ad0: 7970 6520 6973 206e 6f74 2061 2066 6c6f  ype is not a flo
+00014ae0: 6174 3634 2e20 4173 2061 2077 6f72 6b61  at64. As a worka
+00014af0: 726f 756e 6420 6361 7374 2074 6f20 666c  round cast to fl
+00014b00: 6f61 7436 3420 6474 7970 652c 2070 6572  oat64 dtype, per
+00014b10: 666f 726d 2074 6865 206f 7065 7261 7469  form the operati
+00014b20: 6f6e 2c0d 0a20 2020 2020 2020 2023 2074  on,..        # t
+00014b30: 6865 6e20 6361 7374 2062 6163 6b20 746f  hen cast back to
+00014b40: 2074 6865 206f 7269 6769 6e61 6c20 6474   the original dt
+00014b50: 7970 652e 0d0a 2020 2020 2020 2020 7265  ype...        re
+00014b60: 7375 6c74 203d 2054 7970 6552 6567 6973  sult = TypeRegis
+00014b70: 7465 722e 4d61 7468 4c65 6467 6572 2e5f  ter.MathLedger._
+00014b80: 4241 5349 434d 4154 485f 4f4e 455f 494e  BASICMATH_ONE_IN
+00014b90: 5055 5428 612c 2066 6173 745f 6675 6e63  PUT(a, fast_func
+00014ba0: 7469 6f6e 2c20 3029 0d0a 0d0a 2020 2020  tion, 0)....    
+00014bb0: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
+00014bc0: 7461 6e63 6528 7265 7375 6c74 2c20 4661  tance(result, Fa
+00014bd0: 7374 4172 7261 7929 2061 6e64 2069 7369  stArray) and isi
+00014be0: 6e73 7461 6e63 6528 7265 7375 6c74 2c20  nstance(result, 
+00014bf0: 6e70 2e6e 6461 7272 6179 293a 0d0a 2020  np.ndarray):..  
+00014c00: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00014c10: 203d 2072 6573 756c 742e 7669 6577 2846   = result.view(F
+00014c20: 6173 7441 7272 6179 290d 0a0d 0a20 2020  astArray)....   
+00014c30: 2020 2020 2069 6620 7265 7375 6c74 2e64       if result.d
+00014c40: 7479 7065 2021 3d20 6f72 6967 696e 616c  type != original
+00014c50: 5f64 7479 7065 3a0d 0a20 2020 2020 2020  _dtype:..       
+00014c60: 2020 2020 2072 6573 756c 7420 3d20 7265       result = re
+00014c70: 7375 6c74 2e61 7374 7970 6528 6f72 6967  sult.astype(orig
+00014c80: 696e 616c 5f64 7479 7065 290d 0a0d 0a20  inal_dtype).... 
+00014c90: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+00014ca0: 7375 6c74 0d0a 0d0a 2020 2020 4073 7461  sult....    @sta
+00014cb0: 7469 636d 6574 686f 640d 0a20 2020 2040  ticmethod..    @
+00014cc0: 5f41 7272 6179 4675 6e63 7469 6f6e 4865  _ArrayFunctionHe
+00014cd0: 6c70 6572 2e72 6567 6973 7465 725f 6172  lper.register_ar
+00014ce0: 7261 795f 6675 6e63 7469 6f6e 286e 702e  ray_function(np.
+00014cf0: 7375 6d29 0d0a 2020 2020 6465 6620 5f73  sum)..    def _s
+00014d00: 756d 2861 2c20 6178 6973 3d4e 6f6e 652c  um(a, axis=None,
+00014d10: 2064 7479 7065 3d4e 6f6e 652c 206f 7574   dtype=None, out
+00014d20: 3d4e 6f6e 652c 206b 6565 7064 696d 733d  =None, keepdims=
+00014d30: 4e6f 6e65 2c20 696e 6974 6961 6c3d 4e6f  None, initial=No
+00014d40: 6e65 2c20 7768 6572 653d 4e6f 6e65 293a  ne, where=None):
+00014d50: 0d0a 2020 2020 2020 2020 7265 7375 6c74  ..        result
+00014d60: 203d 2072 632e 5265 6475 6365 2861 2c20   = rc.Reduce(a, 
+00014d70: 5245 4455 4345 5f46 554e 4354 494f 4e53  REDUCE_FUNCTIONS
+00014d80: 2e52 4544 5543 455f 5355 4d2c 2030 290d  .REDUCE_SUM, 0).
+00014d90: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00014da0: 4661 7374 4172 7261 792e 5f70 795f 6e75  FastArray._py_nu
+00014db0: 6d62 6572 5f74 6f5f 6e70 5f64 7479 7065  mber_to_np_dtype
+00014dc0: 2872 6573 756c 742c 2061 2e64 7479 7065  (result, a.dtype
+00014dd0: 290d 0a0d 0a20 2020 2040 7374 6174 6963  )....    @static
+00014de0: 6d65 7468 6f64 0d0a 2020 2020 405f 4172  method..    @_Ar
+00014df0: 7261 7946 756e 6374 696f 6e48 656c 7065  rayFunctionHelpe
+00014e00: 722e 7265 6769 7374 6572 5f61 7272 6179  r.register_array
+00014e10: 5f66 756e 6374 696f 6e28 6e70 2e6e 616e  _function(np.nan
+00014e20: 7375 6d29 0d0a 2020 2020 6465 6620 5f6e  sum)..    def _n
+00014e30: 616e 7375 6d28 612c 2061 7869 733d 4e6f  ansum(a, axis=No
+00014e40: 6e65 2c20 6474 7970 653d 4e6f 6e65 2c20  ne, dtype=None, 
+00014e50: 6f75 743d 4e6f 6e65 2c20 6b65 6570 6469  out=None, keepdi
+00014e60: 6d73 3d4e 6f6e 6529 3a0d 0a20 2020 2020  ms=None):..     
+00014e70: 2020 2072 6573 756c 7420 3d20 7263 2e52     result = rc.R
+00014e80: 6564 7563 6528 612c 2052 4544 5543 455f  educe(a, REDUCE_
+00014e90: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
+00014ea0: 5f4e 414e 5355 4d2c 2030 290d 0a20 2020  _NANSUM, 0)..   
+00014eb0: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
+00014ec0: 4172 7261 792e 5f70 795f 6e75 6d62 6572  Array._py_number
+00014ed0: 5f74 6f5f 6e70 5f64 7479 7065 2872 6573  _to_np_dtype(res
+00014ee0: 756c 742c 2061 2e64 7479 7065 290d 0a0d  ult, a.dtype)...
+00014ef0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+00014f00: 6f64 0d0a 2020 2020 405f 4172 7261 7946  od..    @_ArrayF
+00014f10: 756e 6374 696f 6e48 656c 7065 722e 7265  unctionHelper.re
+00014f20: 6769 7374 6572 5f61 7272 6179 5f66 756e  gister_array_fun
+00014f30: 6374 696f 6e28 6e70 2e76 6172 290d 0a20  ction(np.var).. 
+00014f40: 2020 2064 6566 205f 7661 7228 612c 2061     def _var(a, a
+00014f50: 7869 733d 4e6f 6e65 2c20 6474 7970 653d  xis=None, dtype=
+00014f60: 4e6f 6e65 2c20 6f75 743d 4e6f 6e65 2c20  None, out=None, 
+00014f70: 6464 6f66 3d4e 6f6e 652c 206b 6565 7064  ddof=None, keepd
+00014f80: 696d 733d 4e6f 6e65 293a 0d0a 2020 2020  ims=None):..    
+00014f90: 2020 2020 7265 7375 6c74 203d 2072 632e      result = rc.
+00014fa0: 5265 6475 6365 2861 2c20 5245 4455 4345  Reduce(a, REDUCE
+00014fb0: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
+00014fc0: 455f 5641 522c 2030 290d 0a20 2020 2020  E_VAR, 0)..     
+00014fd0: 2020 2072 6574 7572 6e20 4661 7374 4172     return FastAr
+00014fe0: 7261 792e 5f70 795f 6e75 6d62 6572 5f74  ray._py_number_t
+00014ff0: 6f5f 6e70 5f64 7479 7065 2872 6573 756c  o_np_dtype(resul
+00015000: 742c 2061 2e64 7479 7065 290d 0a0d 0a20  t, a.dtype).... 
+00015010: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+00015020: 0d0a 2020 2020 405f 4172 7261 7946 756e  ..    @_ArrayFun
+00015030: 6374 696f 6e48 656c 7065 722e 7265 6769  ctionHelper.regi
+00015040: 7374 6572 5f61 7272 6179 5f66 756e 6374  ster_array_funct
+00015050: 696f 6e28 6e70 2e6e 616e 7661 7229 0d0a  ion(np.nanvar)..
+00015060: 2020 2020 6465 6620 5f6e 616e 7661 7228      def _nanvar(
+00015070: 612c 2061 7869 733d 4e6f 6e65 2c20 6474  a, axis=None, dt
+00015080: 7970 653d 4e6f 6e65 2c20 6f75 743d 4e6f  ype=None, out=No
+00015090: 6e65 2c20 6464 6f66 3d4e 6f6e 652c 206b  ne, ddof=None, k
+000150a0: 6565 7064 696d 733d 4e6f 6e65 293a 0d0a  eepdims=None):..
+000150b0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+000150c0: 2072 632e 5265 6475 6365 2861 2c20 5245   rc.Reduce(a, RE
+000150d0: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
+000150e0: 4544 5543 455f 4e41 4e56 4152 2c20 3029  EDUCE_NANVAR, 0)
+000150f0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00015100: 2046 6173 7441 7272 6179 2e5f 7079 5f6e   FastArray._py_n
+00015110: 756d 6265 725f 746f 5f6e 705f 6474 7970  umber_to_np_dtyp
+00015120: 6528 7265 7375 6c74 2c20 612e 6474 7970  e(result, a.dtyp
+00015130: 6529 0d0a 0d0a 2020 2020 2323 2323 2323  e)....    ######
 00015140: 2323 2323 2323 2323 2323 2323 2323 2323  ################
 00015150: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00015160: 2323 2323 230d 0a20 2020 2064 6566 2061  #####..    def a
-00015170: 6273 2873 656c 662c 202a 2a6b 7761 7267  bs(self, **kwarg
-00015180: 7329 202d 3e20 4661 7374 4172 7261 793a  s) -> FastArray:
-00015190: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-000151a0: 206e 702e 6162 7328 7365 6c66 2c20 2a2a   np.abs(self, **
-000151b0: 6b77 6172 6773 290d 0a0d 0a20 2020 2064  kwargs)....    d
-000151c0: 6566 206d 6564 6961 6e28 7365 6c66 2c20  ef median(self, 
-000151d0: 2a2a 6b77 6172 6773 2920 2d3e 206e 702e  **kwargs) -> np.
-000151e0: 6e75 6d62 6572 3a0d 0a20 2020 2020 2020  number:..       
-000151f0: 2072 6574 7572 6e20 6e70 2e6d 6564 6961   return np.media
-00015200: 6e28 7365 6c66 2c20 2a2a 6b77 6172 6773  n(self, **kwargs
-00015210: 290d 0a0d 0a20 2020 2064 6566 206e 616e  )....    def nan
-00015220: 6d65 6469 616e 2873 656c 662c 202a 2a6b  median(self, **k
-00015230: 7761 7267 7329 202d 3e20 6e70 2e6e 756d  wargs) -> np.num
-00015240: 6265 723a 0d0a 2020 2020 2020 2020 7265  ber:..        re
-00015250: 7475 726e 206e 702e 6e61 6e6d 6564 6961  turn np.nanmedia
-00015260: 6e28 7365 6c66 2c20 2a2a 6b77 6172 6773  n(self, **kwargs
-00015270: 290d 0a0d 0a20 2020 2064 6566 2071 7561  )....    def qua
-00015280: 6e74 696c 6528 7365 6c66 2c20 2a2a 6b77  ntile(self, **kw
-00015290: 6172 6773 2920 2d3e 206e 702e 6e75 6d62  args) -> np.numb
-000152a0: 6572 207c 2046 6173 7441 7272 6179 3a0d  er | FastArray:.
-000152b0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000152c0: 6e70 2e71 7561 6e74 696c 6528 7365 6c66  np.quantile(self
-000152d0: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
-000152e0: 2020 2064 6566 206e 616e 7175 616e 7469     def nanquanti
-000152f0: 6c65 2873 656c 662c 202a 2a6b 7761 7267  le(self, **kwarg
-00015300: 7329 202d 3e20 6e70 2e6e 756d 6265 7220  s) -> np.number 
-00015310: 7c20 4661 7374 4172 7261 793a 0d0a 2020  | FastArray:..  
-00015320: 2020 2020 2020 7265 7475 726e 206e 702e        return np.
-00015330: 6e61 6e71 7561 6e74 696c 6528 7365 6c66  nanquantile(self
-00015340: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
-00015350: 2020 2064 6566 2070 6572 6365 6e74 696c     def percentil
-00015360: 6528 7365 6c66 2c20 2a2a 6b77 6172 6773  e(self, **kwargs
-00015370: 2920 2d3e 206e 702e 6e75 6d62 6572 207c  ) -> np.number |
-00015380: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
-00015390: 2020 2020 2072 6574 7572 6e20 6e70 2e70       return np.p
-000153a0: 6572 6365 6e74 696c 6528 7365 6c66 2c20  ercentile(self, 
-000153b0: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
-000153c0: 2064 6566 206e 616e 7065 7263 656e 7469   def nanpercenti
-000153d0: 6c65 2873 656c 662c 202a 2a6b 7761 7267  le(self, **kwarg
-000153e0: 7329 202d 3e20 6e70 2e6e 756d 6265 7220  s) -> np.number 
-000153f0: 7c20 4661 7374 4172 7261 793a 0d0a 2020  | FastArray:..  
-00015400: 2020 2020 2020 7265 7475 726e 206e 702e        return np.
+00015160: 2323 2323 2323 230d 0a20 2020 2023 2048  #######..    # H
+00015170: 656c 7065 7220 7365 6374 696f 6e0d 0a20  elper section.. 
+00015180: 2020 2023 2323 2323 2323 2323 2323 2323     #############
+00015190: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000151a0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000151b0: 0d0a 2020 2020 6465 6620 6162 7328 7365  ..    def abs(se
+000151c0: 6c66 2c20 2a2a 6b77 6172 6773 2920 2d3e  lf, **kwargs) ->
+000151d0: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
+000151e0: 2020 2020 2072 6574 7572 6e20 6e70 2e61       return np.a
+000151f0: 6273 2873 656c 662c 202a 2a6b 7761 7267  bs(self, **kwarg
+00015200: 7329 0d0a 0d0a 2020 2020 6465 6620 6d65  s)....    def me
+00015210: 6469 616e 2873 656c 662c 202a 2a6b 7761  dian(self, **kwa
+00015220: 7267 7329 202d 3e20 6e70 2e6e 756d 6265  rgs) -> np.numbe
+00015230: 723a 0d0a 2020 2020 2020 2020 7265 7475  r:..        retu
+00015240: 726e 206e 702e 6d65 6469 616e 2873 656c  rn np.median(sel
+00015250: 662c 202a 2a6b 7761 7267 7329 0d0a 0d0a  f, **kwargs)....
+00015260: 2020 2020 6465 6620 6e61 6e6d 6564 6961      def nanmedia
+00015270: 6e28 7365 6c66 2c20 2a2a 6b77 6172 6773  n(self, **kwargs
+00015280: 2920 2d3e 206e 702e 6e75 6d62 6572 3a0d  ) -> np.number:.
+00015290: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000152a0: 6e70 2e6e 616e 6d65 6469 616e 2873 656c  np.nanmedian(sel
+000152b0: 662c 202a 2a6b 7761 7267 7329 0d0a 0d0a  f, **kwargs)....
+000152c0: 2020 2020 6465 6620 7175 616e 7469 6c65      def quantile
+000152d0: 2873 656c 662c 202a 2a6b 7761 7267 7329  (self, **kwargs)
+000152e0: 202d 3e20 6e70 2e6e 756d 6265 7220 7c20   -> np.number | 
+000152f0: 4661 7374 4172 7261 793a 0d0a 2020 2020  FastArray:..    
+00015300: 2020 2020 7265 7475 726e 206e 702e 7175      return np.qu
+00015310: 616e 7469 6c65 2873 656c 662c 202a 2a6b  antile(self, **k
+00015320: 7761 7267 7329 0d0a 0d0a 2020 2020 6465  wargs)....    de
+00015330: 6620 6e61 6e71 7561 6e74 696c 6528 7365  f nanquantile(se
+00015340: 6c66 2c20 2a2a 6b77 6172 6773 2920 2d3e  lf, **kwargs) ->
+00015350: 206e 702e 6e75 6d62 6572 207c 2046 6173   np.number | Fas
+00015360: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
+00015370: 2072 6574 7572 6e20 6e70 2e6e 616e 7175   return np.nanqu
+00015380: 616e 7469 6c65 2873 656c 662c 202a 2a6b  antile(self, **k
+00015390: 7761 7267 7329 0d0a 0d0a 2020 2020 6465  wargs)....    de
+000153a0: 6620 7065 7263 656e 7469 6c65 2873 656c  f percentile(sel
+000153b0: 662c 202a 2a6b 7761 7267 7329 202d 3e20  f, **kwargs) -> 
+000153c0: 6e70 2e6e 756d 6265 7220 7c20 4661 7374  np.number | Fast
+000153d0: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
+000153e0: 7265 7475 726e 206e 702e 7065 7263 656e  return np.percen
+000153f0: 7469 6c65 2873 656c 662c 202a 2a6b 7761  tile(self, **kwa
+00015400: 7267 7329 0d0a 0d0a 2020 2020 6465 6620  rgs)....    def 
 00015410: 6e61 6e70 6572 6365 6e74 696c 6528 7365  nanpercentile(se
-00015420: 6c66 2c20 2a2a 6b77 6172 6773 290d 0a0d  lf, **kwargs)...
-00015430: 0a20 2020 2064 6566 2063 6c69 705f 6c6f  .    def clip_lo
-00015440: 7765 7228 7365 6c66 2c20 615f 6d69 6e2c  wer(self, a_min,
-00015450: 202a 2a6b 7761 7267 7329 202d 3e20 4661   **kwargs) -> Fa
-00015460: 7374 4172 7261 793a 0d0a 2020 2020 2020  stArray:..      
-00015470: 2020 7265 7475 726e 2073 656c 662e 636c    return self.cl
-00015480: 6970 2861 5f6d 696e 2c20 4e6f 6e65 2c20  ip(a_min, None, 
-00015490: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
-000154a0: 2064 6566 2063 6c69 705f 7570 7065 7228   def clip_upper(
-000154b0: 7365 6c66 2c20 615f 6d61 782c 202a 2a6b  self, a_max, **k
-000154c0: 7761 7267 7329 202d 3e20 4661 7374 4172  wargs) -> FastAr
-000154d0: 7261 793a 0d0a 2020 2020 2020 2020 7265  ray:..        re
-000154e0: 7475 726e 2073 656c 662e 636c 6970 284e  turn self.clip(N
-000154f0: 6f6e 652c 2061 5f6d 6178 2c20 2a2a 6b77  one, a_max, **kw
-00015500: 6172 6773 290d 0a0d 0a20 2020 2064 6566  args)....    def
-00015510: 2073 6967 6e28 7365 6c66 2c20 2a2a 6b77   sign(self, **kw
-00015520: 6172 6773 2920 2d3e 2046 6173 7441 7272  args) -> FastArr
-00015530: 6179 3a0d 0a20 2020 2020 2020 2072 6574  ay:..        ret
-00015540: 7572 6e20 6e70 2e73 6967 6e28 7365 6c66  urn np.sign(self
-00015550: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
-00015560: 2020 2064 6566 2074 7275 6e63 2873 656c     def trunc(sel
-00015570: 662c 202a 2a6b 7761 7267 7329 202d 3e20  f, **kwargs) -> 
-00015580: 4661 7374 4172 7261 793a 0d0a 2020 2020  FastArray:..    
-00015590: 2020 2020 7265 7475 726e 206e 702e 7472      return np.tr
-000155a0: 756e 6328 7365 6c66 2c20 2a2a 6b77 6172  unc(self, **kwar
-000155b0: 6773 290d 0a0d 0a20 2020 2064 6566 2077  gs)....    def w
-000155c0: 6865 7265 2873 656c 662c 2063 6f6e 6469  here(self, condi
-000155d0: 7469 6f6e 2c20 793d 6e70 2e6e 616e 2920  tion, y=np.nan) 
-000155e0: 2d3e 2046 6173 7441 7272 6179 3a0d 0a20  -> FastArray:.. 
-000155f0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00015600: 2020 2020 5265 7475 726e 2061 206e 6577      Return a new
-00015610: 2060 4661 7374 4172 7261 7960 2069 6e20   `FastArray` in 
-00015620: 7768 6963 6820 7661 6c75 6573 2061 7265  which values are
-00015630: 2072 6570 6c61 6365 6420 7768 6572 6520   replaced where 
-00015640: 6120 6769 7665 6e0d 0a20 2020 2020 2020  a given..       
-00015650: 2063 6f6e 6469 7469 6f6e 2069 7320 4661   condition is Fa
-00015660: 6c73 652e 0d0a 0d0a 2020 2020 2020 2020  lse.....        
-00015670: 546f 2061 6c73 6f20 7072 6f76 6964 6520  To also provide 
-00015680: 6120 7661 6c75 6520 666f 7220 7768 6572  a value for wher
-00015690: 6520 7468 6520 636f 6e64 6974 696f 6e20  e the condition 
-000156a0: 6973 2054 7275 652c 2075 7365 0d0a 2020  is True, use..  
-000156b0: 2020 2020 2020 3a6d 6574 683a 6072 6970        :meth:`rip
-000156c0: 7461 626c 652e 7768 6572 6560 2e0d 0a0d  table.where`....
-000156d0: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
-000156e0: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
-000156f0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-00015700: 2063 6f6e 6469 7469 6f6e 203a 2062 6f6f   condition : boo
-00015710: 6c20 6f72 2061 7272 6179 206f 6620 626f  l or array of bo
-00015720: 6f6c 0d0a 2020 2020 2020 2020 2020 2020  ol..            
-00015730: 5768 6572 6520 7468 6520 636f 6e64 6974  Where the condit
-00015740: 696f 6e20 6973 2054 7275 652c 206b 6565  ion is True, kee
-00015750: 7020 7468 6520 6f72 6967 696e 616c 2076  p the original v
-00015760: 616c 7565 2e20 5768 6572 6520 4661 6c73  alue. Where Fals
-00015770: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
-00015780: 7265 706c 6163 6520 7769 7468 2060 7960  replace with `y`
-00015790: 2028 6966 2060 7960 2069 7320 6120 7363   (if `y` is a sc
-000157a0: 616c 6172 2920 6f72 2074 6865 2063 6f72  alar) or the cor
-000157b0: 7265 7370 6f6e 6469 6e67 2076 616c 7565  responding value
-000157c0: 0d0a 2020 2020 2020 2020 2020 2020 6672  ..            fr
-000157d0: 6f6d 2060 7960 2028 6966 2060 7960 2069  om `y` (if `y` i
-000157e0: 7320 616e 2061 7272 6179 292e 2049 6620  s an array). If 
-000157f0: 6063 6f6e 6469 7469 6f6e 6020 6973 2061  `condition` is a
-00015800: 6e20 6172 7261 7920 6f72 2061 0d0a 2020  n array or a..  
-00015810: 2020 2020 2020 2020 2020 6120 636f 6d70            a comp
-00015820: 6172 6973 6f6e 2074 6861 7420 7265 7475  arison that retu
-00015830: 726e 7320 616e 2061 7272 6179 2c20 7468  rns an array, th
-00015840: 6520 6172 7261 7920 6d75 7374 2062 6520  e array must be 
-00015850: 7468 6520 7361 6d65 0d0a 2020 2020 2020  the same..      
-00015860: 2020 2020 2020 6c65 6e67 7468 2061 7320        length as 
-00015870: 7468 6520 6361 6c6c 696e 6720 6046 6173  the calling `Fas
-00015880: 7441 7272 6179 602e 0d0a 2020 2020 2020  tArray`...      
-00015890: 2020 7920 3a20 7363 616c 6172 2c20 6172    y : scalar, ar
-000158a0: 7261 792c 206f 7220 6361 6c6c 6162 6c65  ray, or callable
-000158b0: 2c20 6465 6661 756c 7420 6e70 2e6e 616e  , default np.nan
-000158c0: 0d0a 2020 2020 2020 2020 2020 2020 5468  ..            Th
-000158d0: 6520 7661 6c75 6520 746f 2075 7365 2077  e value to use w
-000158e0: 6865 7265 2060 636f 6e64 6974 696f 6e60  here `condition`
-000158f0: 2069 7320 4661 6c73 652e 2049 6620 6079   is False. If `y
-00015900: 6020 6973 2061 6e0d 0a20 2020 2020 2020  ` is an..       
-00015910: 2020 2020 2061 7272 6179 206f 7220 6120       array or a 
-00015920: 6361 6c6c 6162 6c65 2074 6861 7420 7265  callable that re
-00015930: 7475 726e 7320 616e 2061 7272 6179 2c20  turns an array, 
-00015940: 6974 206d 7573 7420 6265 2074 6865 2073  it must be the s
-00015950: 616d 650d 0a20 2020 2020 2020 2020 2020  ame..           
-00015960: 206c 656e 6774 6820 6173 2074 6865 2063   length as the c
-00015970: 616c 6c69 6e67 2060 4661 7374 4172 7261  alling `FastArra
-00015980: 7960 2e20 5468 6520 7661 6c75 6520 6f66  y`. The value of
-00015990: 2060 7960 2074 6861 7420 636f 7272 6573   `y` that corres
-000159a0: 706f 6e64 730d 0a20 2020 2020 2020 2020  ponds..         
-000159b0: 2020 2074 6f20 7468 6520 4661 6c73 6520     to the False 
-000159c0: 7661 6c75 6520 6973 2075 7365 642e 0d0a  value is used...
-000159d0: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-000159e0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-000159f0: 2d2d 0d0a 2020 2020 2020 2020 4661 7374  --..        Fast
-00015a00: 4172 7261 790d 0a20 2020 2020 2020 2020  Array..         
-00015a10: 2020 2041 206e 6577 2060 4661 7374 4172     A new `FastAr
-00015a20: 7261 7960 2077 6974 6820 7661 6c75 6573  ray` with values
-00015a30: 2072 6570 6c61 6365 6420 7768 6572 6520   replaced where 
-00015a40: 6063 6f6e 6469 7469 6f6e 6020 6973 2046  `condition` is F
-00015a50: 616c 7365 2e0d 0a0d 0a20 2020 2020 2020  alse.....       
-00015a60: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
-00015a70: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-00015a80: 2020 2020 202e 7269 7074 6162 6c65 2e77       .riptable.w
-00015a90: 6865 7265 203a 0d0a 2020 2020 2020 2020  here :..        
-00015aa0: 2020 2020 5265 706c 6163 6520 7661 6c75      Replace valu
-00015ab0: 6573 2064 6570 656e 6469 6e67 206f 6e20  es depending on 
-00015ac0: 7768 6574 6865 7220 6120 6769 7665 6e20  whether a given 
-00015ad0: 636f 6e64 6974 696f 6e20 6973 2054 7275  condition is Tru
-00015ae0: 6520 6f72 0d0a 2020 2020 2020 2020 2020  e or..          
-00015af0: 2020 4661 6c73 652e 0d0a 0d0a 2020 2020    False.....    
-00015b00: 2020 2020 4578 616d 706c 6573 0d0a 2020      Examples..  
-00015b10: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-00015b20: 2020 2020 2020 2020 6063 6f6e 6469 7469          `conditi
-00015b30: 6f6e 6020 6973 2061 2063 6f6d 7061 7269  on` is a compari
-00015b40: 736f 6e20 7468 6174 2063 7265 6174 6573  son that creates
-00015b50: 2061 6e20 6172 7261 7920 6f66 2062 6f6f   an array of boo
-00015b60: 6c65 616e 732c 2061 6e64 0d0a 2020 2020  leans, and..    
-00015b70: 2020 2020 6079 6020 6973 2061 2073 6361      `y` is a sca
-00015b80: 6c61 723a 0d0a 0d0a 2020 2020 2020 2020  lar:....        
-00015b90: 3e3e 3e20 6120 3d20 7274 2e46 6173 7441  >>> a = rt.FastA
-00015ba0: 7272 6179 2872 742e 6172 616e 6765 2835  rray(rt.arange(5
-00015bb0: 2929 0d0a 2020 2020 2020 2020 3e3e 3e20  ))..        >>> 
-00015bc0: 610d 0a20 2020 2020 2020 2046 6173 7441  a..        FastA
-00015bd0: 7272 6179 285b 302c 2031 2c20 322c 2033  rray([0, 1, 2, 3
-00015be0: 2c20 345d 290d 0a20 2020 2020 2020 203e  , 4])..        >
-00015bf0: 3e3e 2061 2e77 6865 7265 2861 203e 2032  >> a.where(a > 2
-00015c00: 2c20 3130 3029 0d0a 2020 2020 2020 2020  , 100)..        
-00015c10: 4661 7374 4172 7261 7928 5b31 3030 2c20  FastArray([100, 
-00015c20: 3130 302c 2031 3030 2c20 2020 332c 2020  100, 100,   3,  
-00015c30: 2034 5d29 0d0a 0d0a 2020 2020 2020 2020   4])....        
-00015c40: 6063 6f6e 6469 7469 6f6e 6020 616e 6420  `condition` and 
-00015c50: 6079 6020 6172 6520 7361 6d65 2d6c 656e  `y` are same-len
-00015c60: 6774 6820 6172 7261 7973 3a0d 0a0d 0a20  gth arrays:.... 
-00015c70: 2020 2020 2020 203e 3e3e 2063 6f6e 6469         >>> condi
-00015c80: 7469 6f6e 203d 2072 742e 4661 7374 4172  tion = rt.FastAr
-00015c90: 7261 7928 5b54 7275 652c 2054 7275 652c  ray([True, True,
-00015ca0: 2046 616c 7365 2c20 4661 6c73 652c 2046   False, False, F
-00015cb0: 616c 7365 5d29 0d0a 2020 2020 2020 2020  alse])..        
-00015cc0: 3e3e 3e20 7920 3d20 7274 2e46 6173 7441  >>> y = rt.FastA
-00015cd0: 7272 6179 285b 3130 302c 2032 3030 2c20  rray([100, 200, 
-00015ce0: 3330 302c 2034 3030 2c20 3530 305d 290d  300, 400, 500]).
-00015cf0: 0a20 2020 2020 2020 203e 3e3e 2061 2e77  .        >>> a.w
-00015d00: 6865 7265 2863 6f6e 6469 7469 6f6e 2c20  here(condition, 
-00015d10: 7929 0d0a 2020 2020 2020 2020 4661 7374  y)..        Fast
-00015d20: 4172 7261 7928 5b20 2030 2c20 2020 312c  Array([  0,   1,
-00015d30: 2033 3030 2c20 3430 302c 2035 3030 5d29   300, 400, 500])
-00015d40: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00015d50: 2020 2020 2020 2072 6574 7572 6e20 7768         return wh
-00015d60: 6572 6528 636f 6e64 6974 696f 6e2c 2073  ere(condition, s
-00015d70: 656c 662c 2079 290d 0a0d 0a20 2020 2064  elf, y)....    d
-00015d80: 6566 2063 6f75 6e74 2873 656c 662c 2073  ef count(self, s
-00015d90: 6f72 7465 643d 5472 7565 2c20 6669 6c74  orted=True, filt
-00015da0: 6572 3d4e 6f6e 6529 202d 3e20 4461 7461  er=None) -> Data
-00015db0: 7365 743a 0d0a 2020 2020 2020 2020 2222  set:..        ""
-00015dc0: 220d 0a20 2020 2020 2020 2054 6865 2063  "..        The c
-00015dd0: 6f75 6e74 206f 6620 6561 6368 2075 6e69  ount of each uni
-00015de0: 7175 6520 7661 6c75 652e 0d0a 0d0a 2020  que value.....  
-00015df0: 2020 2020 2020 5468 6973 2072 6574 7572        This retur
-00015e00: 6e73 2074 6865 2073 616d 6520 696e 666f  ns the same info
-00015e10: 726d 6174 696f 6e20 7468 6174 2060 602e  rmation that ``.
-00015e20: 756e 6971 7565 2872 6574 7572 6e5f 636f  unique(return_co
-00015e30: 756e 7473 203d 2054 7275 6529 6060 0d0a  unts = True)``..
-00015e40: 2020 2020 2020 2020 646f 6573 2c20 6578          does, ex
-00015e50: 6365 7074 2069 6e20 6120 6044 6174 6173  cept in a `Datas
-00015e60: 6574 6020 696e 7374 6561 6420 6f66 2061  et` instead of a
-00015e70: 2074 7570 6c65 2e0d 0a0d 0a20 2020 2020   tuple.....     
-00015e80: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
-00015e90: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
-00015ea0: 2d0d 0a20 2020 2020 2020 2073 6f72 7465  -..        sorte
-00015eb0: 6420 3a20 626f 6f6c 2c20 6465 6661 756c  d : bool, defaul
-00015ec0: 7420 5472 7565 0d0a 2020 2020 2020 2020  t True..        
-00015ed0: 2020 2020 5768 656e 2054 7275 6520 2874      When True (t
-00015ee0: 6865 2064 6566 6175 6c74 292c 2075 6e69  he default), uni
-00015ef0: 7175 6520 7661 6c75 6573 2061 7265 2072  que values are r
-00015f00: 6574 7572 6e65 6420 696e 2073 6f72 7465  eturned in sorte
-00015f10: 6420 6f72 6465 722e 2053 6574 2074 6f0d  d order. Set to.
-00015f20: 0a20 2020 2020 2020 2020 2020 2046 616c  .            Fal
-00015f30: 7365 2074 6f20 7265 7475 726e 2074 6865  se to return the
-00015f40: 6d20 696e 206f 7264 6572 206f 6620 6669  m in order of fi
-00015f50: 7273 7420 6170 7065 6172 616e 6365 2e0d  rst appearance..
-00015f60: 0a20 2020 2020 2020 2066 696c 7465 723a  .        filter:
-00015f70: 206e 6461 7272 6179 206f 6620 626f 6f6c   ndarray of bool
-00015f80: 2c20 6465 6661 756c 7420 4e6f 6e65 0d0a  , default None..
-00015f90: 2020 2020 2020 2020 2020 2020 4966 2070              If p
-00015fa0: 726f 7669 6465 642c 2061 6e79 2046 616c  rovided, any Fal
-00015fb0: 7365 2076 616c 7565 7320 7769 6c6c 2062  se values will b
-00015fc0: 6520 6967 6e6f 7265 6420 696e 2074 6865  e ignored in the
-00015fd0: 2063 616c 6375 6c61 7469 6f6e 2e0d 0a0d   calculation....
-00015fe0: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
-00015ff0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-00016000: 2d0d 0a20 2020 2020 2020 2044 6174 6173  -..        Datas
-00016010: 6574 0d0a 2020 2020 2020 2020 2020 2020  et..            
-00016020: 4120 6044 6174 6173 6574 6020 636f 6e74  A `Dataset` cont
-00016030: 6169 6e69 6e67 2074 6865 2075 6e69 7175  aining the uniqu
-00016040: 6520 7661 6c75 6573 2061 6e64 2074 6865  e values and the
-00016050: 6972 2063 6f75 6e74 732e 0d0a 0d0a 2020  ir counts.....  
-00016060: 2020 2020 2020 5365 6520 416c 736f 0d0a        See Also..
-00016070: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-00016080: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-00016090: 7261 792e 756e 6971 7565 0d0a 0d0a 2020  ray.unique....  
-000160a0: 2020 2020 2020 4578 616d 706c 6573 0d0a        Examples..
-000160b0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-000160c0: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
-000160d0: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
-000160e0: 302c 2032 2c20 312c 2033 2c20 332c 2032  0, 2, 1, 3, 3, 2
-000160f0: 2c20 325d 290d 0a20 2020 2020 2020 203e  , 2])..        >
-00016100: 3e3e 2061 2e63 6f75 6e74 2829 0d0a 2020  >> a.count()..  
-00016110: 2020 2020 2020 2a55 6e69 7175 6520 2020        *Unique   
-00016120: 436f 756e 740d 0a20 2020 2020 2020 202d  Count..        -
-00016130: 2d2d 2d2d 2d2d 2020 202d 2d2d 2d2d 0d0a  ------   -----..
-00016140: 2020 2020 2020 2020 2020 2020 2020 3020                0 
-00016150: 2020 2020 2020 310d 0a20 2020 2020 2020        1..       
-00016160: 2020 2020 2020 2031 2020 2020 2020 2031         1       1
-00016170: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00016180: 3220 2020 2020 2020 330d 0a20 2020 2020  2       3..     
-00016190: 2020 2020 2020 2020 2033 2020 2020 2020           3      
-000161a0: 2032 0d0a 0d0a 2020 2020 2020 2020 5769   2....        Wi
-000161b0: 7468 2060 6073 6f72 7465 6420 3d20 4661  th ``sorted = Fa
-000161c0: 6c73 6560 603a 0d0a 0d0a 2020 2020 2020  lse``:....      
-000161d0: 2020 3e3e 3e20 612e 636f 756e 7428 736f    >>> a.count(so
-000161e0: 7274 6564 203d 2046 616c 7365 290d 0a20  rted = False).. 
-000161f0: 2020 2020 2020 202a 556e 6971 7565 2020         *Unique  
-00016200: 2043 6f75 6e74 0d0a 2020 2020 2020 2020   Count..        
-00016210: 2d2d 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d0d  -------   -----.
-00016220: 0a20 2020 2020 2020 2020 2020 2020 2030  .              0
-00016230: 2020 2020 2020 2031 0d0a 2020 2020 2020         1..      
-00016240: 2020 2020 2020 2020 3220 2020 2020 2020          2       
-00016250: 330d 0a20 2020 2020 2020 2020 2020 2020  3..             
-00016260: 2031 2020 2020 2020 2031 0d0a 2020 2020   1       1..    
-00016270: 2020 2020 2020 2020 2020 3320 2020 2020            3     
-00016280: 2020 320d 0a20 2020 2020 2020 2022 2222    2..        """
-00016290: 0d0a 2020 2020 2020 2020 756e 6971 7565  ..        unique
-000162a0: 5f63 6f75 6e74 7320 3d20 756e 6971 7565  _counts = unique
-000162b0: 2873 656c 662c 2073 6f72 7465 643d 736f  (self, sorted=so
-000162c0: 7274 6564 2c20 7265 7475 726e 5f63 6f75  rted, return_cou
-000162d0: 6e74 733d 5472 7565 2c20 6669 6c74 6572  nts=True, filter
-000162e0: 3d66 696c 7465 7229 0d0a 2020 2020 2020  =filter)..      
-000162f0: 2020 6e61 6d65 203d 2073 656c 662e 6765    name = self.ge
-00016300: 745f 6e61 6d65 2829 0d0a 2020 2020 2020  t_name()..      
-00016310: 2020 6966 206e 616d 6520 6973 204e 6f6e    if name is Non
-00016320: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00016330: 6e61 6d65 203d 2022 556e 6971 7565 220d  name = "Unique".
-00016340: 0a20 2020 2020 2020 2064 7320 3d20 5479  .        ds = Ty
-00016350: 7065 5265 6769 7374 6572 2e44 6174 6173  peRegister.Datas
-00016360: 6574 287b 6e61 6d65 3a20 756e 6971 7565  et({name: unique
-00016370: 5f63 6f75 6e74 735b 305d 2c20 2243 6f75  _counts[0], "Cou
-00016380: 6e74 223a 2075 6e69 7175 655f 636f 756e  nt": unique_coun
-00016390: 7473 5b31 5d7d 290d 0a20 2020 2020 2020  ts[1]})..       
-000163a0: 2064 732e 6c61 6265 6c5f 7365 745f 6e61   ds.label_set_na
-000163b0: 6d65 7328 5b6e 616d 655d 290d 0a20 2020  mes([name])..   
-000163c0: 2020 2020 2072 6574 7572 6e20 6473 0d0a       return ds..
-000163d0: 0d0a 2020 2020 2323 2323 2323 2323 2323  ..    ##########
-000163e0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000163f0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00016400: 2323 230d 0a20 2020 2023 2052 6f6c 6c69  ###..    # Rolli
-00016410: 6e67 2073 6563 7469 6f6e 2028 6361 6e6e  ng section (cann
-00016420: 6f74 2068 616e 646c 6520 7374 7269 6465  ot handle stride
-00016430: 7329 0d0a 2020 2020 2323 2323 2323 2323  s)..    ########
-00016440: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00016450: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00016460: 2323 2323 230d 0a20 2020 2064 6566 2072  #####..    def r
-00016470: 6f6c 6c69 6e67 5f73 756d 2873 656c 662c  olling_sum(self,
-00016480: 2077 696e 646f 773a 2069 6e74 203d 2033   window: int = 3
-00016490: 2920 2d3e 2046 6173 7441 7272 6179 3a0d  ) -> FastArray:.
-000164a0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000164b0: 7263 2e52 6f6c 6c69 6e67 2873 656c 662c  rc.Rolling(self,
-000164c0: 2052 4f4c 4c49 4e47 5f46 554e 4354 494f   ROLLING_FUNCTIO
-000164d0: 4e53 2e52 4f4c 4c49 4e47 5f53 554d 2c20  NS.ROLLING_SUM, 
-000164e0: 7769 6e64 6f77 290d 0a0d 0a20 2020 2064  window)....    d
-000164f0: 6566 2072 6f6c 6c69 6e67 5f6e 616e 7375  ef rolling_nansu
-00016500: 6d28 7365 6c66 2c20 7769 6e64 6f77 3a20  m(self, window: 
-00016510: 696e 7420 3d20 3329 202d 3e20 4661 7374  int = 3) -> Fast
-00016520: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
-00016530: 7265 7475 726e 2072 632e 526f 6c6c 696e  return rc.Rollin
-00016540: 6728 7365 6c66 2c20 524f 4c4c 494e 475f  g(self, ROLLING_
-00016550: 4655 4e43 5449 4f4e 532e 524f 4c4c 494e  FUNCTIONS.ROLLIN
-00016560: 475f 4e41 4e53 554d 2c20 7769 6e64 6f77  G_NANSUM, window
-00016570: 290d 0a0d 0a20 2020 2064 6566 2072 6f6c  )....    def rol
-00016580: 6c69 6e67 5f6d 6561 6e28 7365 6c66 2c20  ling_mean(self, 
-00016590: 7769 6e64 6f77 3a20 696e 7420 3d20 3329  window: int = 3)
-000165a0: 202d 3e20 4661 7374 4172 7261 793a 0d0a   -> FastArray:..
-000165b0: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-000165c0: 632e 526f 6c6c 696e 6728 7365 6c66 2c20  c.Rolling(self, 
-000165d0: 524f 4c4c 494e 475f 4655 4e43 5449 4f4e  ROLLING_FUNCTION
-000165e0: 532e 524f 4c4c 494e 475f 4d45 414e 2c20  S.ROLLING_MEAN, 
-000165f0: 7769 6e64 6f77 290d 0a0d 0a20 2020 2064  window)....    d
-00016600: 6566 2072 6f6c 6c69 6e67 5f6e 616e 6d65  ef rolling_nanme
-00016610: 616e 2873 656c 662c 2077 696e 646f 773a  an(self, window:
-00016620: 2069 6e74 203d 2033 2920 2d3e 2046 6173   int = 3) -> Fas
-00016630: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
-00016640: 2072 6574 7572 6e20 7263 2e52 6f6c 6c69   return rc.Rolli
-00016650: 6e67 2873 656c 662c 2052 4f4c 4c49 4e47  ng(self, ROLLING
-00016660: 5f46 554e 4354 494f 4e53 2e52 4f4c 4c49  _FUNCTIONS.ROLLI
-00016670: 4e47 5f4e 414e 4d45 414e 2c20 7769 6e64  NG_NANMEAN, wind
-00016680: 6f77 290d 0a0d 0a20 2020 2064 6566 2072  ow)....    def r
-00016690: 6f6c 6c69 6e67 5f71 7561 6e74 696c 6528  olling_quantile(
-000166a0: 7365 6c66 2c20 712c 2077 696e 646f 773a  self, q, window:
-000166b0: 2069 6e74 203d 2033 2920 2d3e 2046 6173   int = 3) -> Fas
-000166c0: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
-000166d0: 2077 696e 646f 7720 3d20 6d69 6e28 7769   window = min(wi
-000166e0: 6e64 6f77 2c20 6c65 6e28 7365 6c66 2929  ndow, len(self))
-000166f0: 0d0a 2020 2020 2020 2020 7769 6e64 6f77  ..        window
-00016700: 5061 7261 6d20 3d20 726f 6c6c 696e 675f  Param = rolling_
-00016710: 7175 616e 7469 6c65 5f66 756e 6350 6172  quantile_funcPar
-00016720: 616d 2871 2c20 7769 6e64 6f77 290d 0a20  am(q, window).. 
-00016730: 2020 2020 2020 2072 6574 7572 6e20 7263         return rc
-00016740: 2e52 6f6c 6c69 6e67 2873 656c 662c 2052  .Rolling(self, R
-00016750: 4f4c 4c49 4e47 5f46 554e 4354 494f 4e53  OLLING_FUNCTIONS
-00016760: 2e52 4f4c 4c49 4e47 5f51 5541 4e54 494c  .ROLLING_QUANTIL
-00016770: 452c 2077 696e 646f 7750 6172 616d 290d  E, windowParam).
-00016780: 0a0d 0a20 2020 2064 6566 2072 6f6c 6c69  ...    def rolli
-00016790: 6e67 5f76 6172 2873 656c 662c 2077 696e  ng_var(self, win
-000167a0: 646f 773a 2069 6e74 203d 2033 2920 2d3e  dow: int = 3) ->
-000167b0: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
-000167c0: 2020 2020 2072 6574 7572 6e20 7263 2e52       return rc.R
-000167d0: 6f6c 6c69 6e67 2873 656c 662c 2052 4f4c  olling(self, ROL
-000167e0: 4c49 4e47 5f46 554e 4354 494f 4e53 2e52  LING_FUNCTIONS.R
-000167f0: 4f4c 4c49 4e47 5f56 4152 2c20 7769 6e64  OLLING_VAR, wind
-00016800: 6f77 290d 0a0d 0a20 2020 2064 6566 2072  ow)....    def r
-00016810: 6f6c 6c69 6e67 5f6e 616e 7661 7228 7365  olling_nanvar(se
-00016820: 6c66 2c20 7769 6e64 6f77 3a20 696e 7420  lf, window: int 
-00016830: 3d20 3329 202d 3e20 4661 7374 4172 7261  = 3) -> FastArra
-00016840: 793a 0d0a 2020 2020 2020 2020 7265 7475  y:..        retu
-00016850: 726e 2072 632e 526f 6c6c 696e 6728 7365  rn rc.Rolling(se
-00016860: 6c66 2c20 524f 4c4c 494e 475f 4655 4e43  lf, ROLLING_FUNC
-00016870: 5449 4f4e 532e 524f 4c4c 494e 475f 4e41  TIONS.ROLLING_NA
-00016880: 4e56 4152 2c20 7769 6e64 6f77 290d 0a0d  NVAR, window)...
-00016890: 0a20 2020 2064 6566 2072 6f6c 6c69 6e67  .    def rolling
-000168a0: 5f73 7464 2873 656c 662c 2077 696e 646f  _std(self, windo
-000168b0: 773a 2069 6e74 203d 2033 2920 2d3e 2046  w: int = 3) -> F
-000168c0: 6173 7441 7272 6179 3a0d 0a20 2020 2020  astArray:..     
-000168d0: 2020 2072 6574 7572 6e20 7263 2e52 6f6c     return rc.Rol
-000168e0: 6c69 6e67 2873 656c 662c 2052 4f4c 4c49  ling(self, ROLLI
-000168f0: 4e47 5f46 554e 4354 494f 4e53 2e52 4f4c  NG_FUNCTIONS.ROL
-00016900: 4c49 4e47 5f53 5444 2c20 7769 6e64 6f77  LING_STD, window
-00016910: 290d 0a0d 0a20 2020 2064 6566 2072 6f6c  )....    def rol
-00016920: 6c69 6e67 5f6e 616e 7374 6428 7365 6c66  ling_nanstd(self
-00016930: 2c20 7769 6e64 6f77 3a20 696e 7420 3d20  , window: int = 
-00016940: 3329 202d 3e20 4661 7374 4172 7261 793a  3) -> FastArray:
-00016950: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00016960: 2072 632e 526f 6c6c 696e 6728 7365 6c66   rc.Rolling(self
-00016970: 2c20 524f 4c4c 494e 475f 4655 4e43 5449  , ROLLING_FUNCTI
-00016980: 4f4e 532e 524f 4c4c 494e 475f 4e41 4e53  ONS.ROLLING_NANS
-00016990: 5444 2c20 7769 6e64 6f77 290d 0a0d 0a20  TD, window).... 
-000169a0: 2020 2023 2323 2323 2323 2323 2323 2323     #############
-000169b0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000169c0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000169d0: 0d0a 2020 2020 2320 5469 6d65 5769 6e64  ..    # TimeWind
-000169e0: 6f77 2073 6563 7469 6f6e 2028 6361 6e6e  ow section (cann
-000169f0: 6f74 2068 616e 646c 6520 7374 7269 6465  ot handle stride
-00016a00: 7329 2c20 7469 6d65 5f61 7272 6179 206d  s), time_array m
-00016a10: 7573 7420 6265 2049 4e54 3634 0d0a 2020  ust be INT64..  
-00016a20: 2020 2323 2323 2323 2323 2323 2323 2323    ##############
-00016a30: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00016a40: 2323 2323 2323 2323 2323 2323 2323 230d  ###############.
-00016a50: 0a20 2020 2064 6566 2074 696d 6577 696e  .    def timewin
-00016a60: 646f 775f 7375 6d28 7365 6c66 2c20 7469  dow_sum(self, ti
-00016a70: 6d65 5f61 7272 6179 2c20 7469 6d65 5f64  me_array, time_d
-00016a80: 6973 7429 3a0d 0a20 2020 2020 2020 2022  ist):..        "
-00016a90: 2222 0d0a 2020 2020 2020 2020 5468 6520  ""..        The 
-00016aa0: 696e 7075 7420 6172 7261 7920 6d75 7374  input array must
-00016ab0: 2062 6520 696e 7436 3420 616e 6420 736f   be int64 and so
-00016ac0: 7274 6564 2077 6974 6820 6576 6572 2069  rted with ever i
-00016ad0: 6e63 7265 6173 696e 6720 7661 6c75 6573  ncreasing values
-00016ae0: 2e0d 0a20 2020 2020 2020 2053 756d 7320  ...        Sums 
-00016af0: 7570 2074 6865 2076 616c 7565 7320 666f  up the values fo
-00016b00: 7220 6120 6769 7665 6e20 7469 6d65 2077  r a given time w
-00016b10: 696e 646f 772e 0d0a 0d0a 2020 2020 2020  indow.....      
-00016b20: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
-00016b30: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-00016b40: 0d0a 2020 2020 2020 2020 7469 6d65 5f61  ..        time_a
-00016b50: 7272 6179 3a20 736f 7274 6564 2069 6e74  rray: sorted int
-00016b60: 6567 6572 2061 7272 6179 206f 6620 7469  eger array of ti
-00016b70: 6d65 7374 616d 7073 0d0a 2020 2020 2020  mestamps..      
-00016b80: 2020 7469 6d65 5f64 6973 743a 2069 6e74    time_dist: int
-00016b90: 6567 6572 2076 616c 7565 206f 6620 7468  eger value of th
-00016ba0: 6520 7469 6d65 2077 696e 646f 7720 7369  e time window si
-00016bb0: 7a65 0d0a 0d0a 2020 2020 2020 2020 4578  ze....        Ex
-00016bc0: 616d 706c 6573 0d0a 2020 2020 2020 2020  amples..        
-00016bd0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
-00016be0: 2020 3e3e 3e20 613d 7274 2e61 7261 6e67    >>> a=rt.arang
-00016bf0: 6528 3130 2c20 6474 7970 653d 7274 2e69  e(10, dtype=rt.i
-00016c00: 6e74 3634 290d 0a20 2020 2020 2020 203e  nt64)..        >
-00016c10: 3e3e 2061 2e74 696d 6577 696e 646f 775f  >> a.timewindow_
-00016c20: 7375 6d28 612c 3529 0d0a 2020 2020 2020  sum(a,5)..      
-00016c30: 2020 4661 7374 4172 7261 7928 5b20 302c    FastArray([ 0,
-00016c40: 2020 312c 2020 332c 2020 362c 2031 302c    1,  3,  6, 10,
-00016c50: 2031 352c 2032 312c 2032 372c 2033 332c   15, 21, 27, 33,
-00016c60: 2033 395d 2c20 6474 7970 653d 696e 7436   39], dtype=int6
-00016c70: 3429 0d0a 0d0a 2020 2020 2020 2020 2222  4)....        ""
-00016c80: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
-00016c90: 6e20 7263 2e54 696d 6557 696e 646f 7728  n rc.TimeWindow(
-00016ca0: 7365 6c66 2c20 7469 6d65 5f61 7272 6179  self, time_array
-00016cb0: 2c20 5449 4d45 5749 4e44 4f57 5f46 554e  , TIMEWINDOW_FUN
-00016cc0: 4354 494f 4e53 2e54 494d 4557 494e 444f  CTIONS.TIMEWINDO
-00016cd0: 575f 5355 4d2c 2074 696d 655f 6469 7374  W_SUM, time_dist
-00016ce0: 290d 0a0d 0a20 2020 2064 6566 2074 696d  )....    def tim
-00016cf0: 6577 696e 646f 775f 7072 6f64 2873 656c  ewindow_prod(sel
-00016d00: 662c 2074 696d 655f 6172 7261 792c 2074  f, time_array, t
-00016d10: 696d 655f 6469 7374 293a 0d0a 2020 2020  ime_dist):..    
-00016d20: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00016d30: 2054 6865 2069 6e70 7574 2061 7272 6179   The input array
-00016d40: 206d 7573 7420 6265 2069 6e74 3634 2061   must be int64 a
-00016d50: 6e64 2073 6f72 7465 6420 7769 7468 2065  nd sorted with e
-00016d60: 7665 7220 696e 6372 6561 7369 6e67 2076  ver increasing v
-00016d70: 616c 7565 732e 0d0a 2020 2020 2020 2020  alues...        
-00016d80: 4d75 6c74 6970 6c69 6573 2075 7020 7468  Multiplies up th
-00016d90: 6520 7661 6c75 6573 2066 6f72 2061 2067  e values for a g
-00016da0: 6976 656e 2074 696d 6520 7769 6e64 6f77  iven time window
-00016db0: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
-00016dc0: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
-00016dd0: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
-00016de0: 2020 2020 2074 696d 655f 6172 7261 793a       time_array:
-00016df0: 2073 6f72 7465 6420 696e 7465 6765 7220   sorted integer 
-00016e00: 6172 7261 7920 6f66 2074 696d 6573 7461  array of timesta
-00016e10: 6d70 730d 0a20 2020 2020 2020 2074 696d  mps..        tim
-00016e20: 655f 6469 7374 3a20 696e 7465 6765 7220  e_dist: integer 
-00016e30: 7661 6c75 6520 6f66 2074 6865 2074 696d  value of the tim
-00016e40: 6520 7769 6e64 6f77 2073 697a 650d 0a0d  e window size...
-00016e50: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
-00016e60: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-00016e70: 2d2d 2d0d 0a20 2020 2020 2020 203e 3e3e  ---..        >>>
-00016e80: 2061 3d72 742e 6172 616e 6765 2831 302c   a=rt.arange(10,
-00016e90: 2064 7479 7065 3d72 742e 696e 7436 3429   dtype=rt.int64)
-00016ea0: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-00016eb0: 7469 6d65 7769 6e64 6f77 5f70 726f 6428  timewindow_prod(
-00016ec0: 612c 3529 0d0a 2020 2020 2020 2020 4661  a,5)..        Fa
-00016ed0: 7374 4172 7261 7928 5b20 2020 2030 2c20  stArray([    0, 
-00016ee0: 2020 2020 302c 2020 2020 2030 2c20 2020      0,     0,   
-00016ef0: 2020 302c 2020 2020 2030 2c20 2020 2020    0,     0,     
-00016f00: 302c 2020 2037 3230 2c20 2035 3034 302c  0,   720,  5040,
-00016f10: 2032 3031 3630 2c20 3630 3438 305d 2c20   20160, 60480], 
-00016f20: 6474 7970 653d 696e 7436 3429 0d0a 2020  dtype=int64)..  
-00016f30: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00016f40: 2020 2072 6574 7572 6e20 7263 2e54 696d     return rc.Tim
-00016f50: 6557 696e 646f 7728 7365 6c66 2c20 7469  eWindow(self, ti
-00016f60: 6d65 5f61 7272 6179 2c20 5449 4d45 5749  me_array, TIMEWI
-00016f70: 4e44 4f57 5f46 554e 4354 494f 4e53 2e54  NDOW_FUNCTIONS.T
-00016f80: 494d 4557 494e 444f 575f 5052 4f44 2c20  IMEWINDOW_PROD, 
-00016f90: 7469 6d65 5f64 6973 7429 0d0a 0d0a 2020  time_dist)....  
-00016fa0: 2020 2323 2323 2323 2323 2323 2323 2323    ##############
-00016fb0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00016fc0: 2323 2323 2323 2323 2323 2323 2323 230d  ###############.
-00016fd0: 0a20 2020 2023 2042 6f74 746c 656e 6563  .    # Bottlenec
-00016fe0: 6b20 7365 6374 696f 6e20 286f 6e6c 7920  k section (only 
-00016ff0: 6861 6e64 6c65 7320 696e 7433 322f 696e  handles int32/in
-00017000: 7436 342f 666c 6f61 7433 322f 666c 6f61  t64/float32/floa
-00017010: 7436 3429 0d0a 2020 2020 2320 626f 7474  t64)..    # bott
-00017020: 6c65 6e65 636b 2069 7320 6f70 7469 6f6e  leneck is option
-00017030: 616c 0d0a 2020 2020 2323 2323 2323 2323  al..    ########
-00017040: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00017050: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00017060: 2323 2323 230d 0a20 2020 2064 6566 206d  #####..    def m
-00017070: 6f76 655f 7375 6d28 7365 6c66 2c20 2a61  ove_sum(self, *a
-00017080: 7267 732c 202a 2a6b 7761 7267 7329 3a0d  rgs, **kwargs):.
-00017090: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000170a0: 626e 2e6d 6f76 655f 7375 6d28 7365 6c66  bn.move_sum(self
-000170b0: 2c20 2a61 7267 732c 202a 2a6b 7761 7267  , *args, **kwarg
-000170c0: 7329 0d0a 0d0a 2020 2020 6465 6620 6d6f  s)....    def mo
-000170d0: 7665 5f6d 6561 6e28 7365 6c66 2c20 2a61  ve_mean(self, *a
-000170e0: 7267 732c 202a 2a6b 7761 7267 7329 3a0d  rgs, **kwargs):.
-000170f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00017100: 626e 2e6d 6f76 655f 6d65 616e 2873 656c  bn.move_mean(sel
-00017110: 662c 202a 6172 6773 2c20 2a2a 6b77 6172  f, *args, **kwar
-00017120: 6773 290d 0a0d 0a20 2020 2064 6566 206d  gs)....    def m
-00017130: 6f76 655f 7374 6428 7365 6c66 2c20 2a61  ove_std(self, *a
-00017140: 7267 732c 202a 2a6b 7761 7267 7329 3a0d  rgs, **kwargs):.
-00017150: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00017160: 626e 2e6d 6f76 655f 7374 6428 7365 6c66  bn.move_std(self
-00017170: 2c20 2a61 7267 732c 202a 2a6b 7761 7267  , *args, **kwarg
-00017180: 7329 0d0a 0d0a 2020 2020 6465 6620 6d6f  s)....    def mo
-00017190: 7665 5f76 6172 2873 656c 662c 202a 6172  ve_var(self, *ar
-000171a0: 6773 2c20 2a2a 6b77 6172 6773 293a 0d0a  gs, **kwargs):..
-000171b0: 2020 2020 2020 2020 7265 7475 726e 2062          return b
-000171c0: 6e2e 6d6f 7665 5f76 6172 2873 656c 662c  n.move_var(self,
-000171d0: 202a 6172 6773 2c20 2a2a 6b77 6172 6773   *args, **kwargs
-000171e0: 290d 0a0d 0a20 2020 2064 6566 206d 6f76  )....    def mov
-000171f0: 655f 6d69 6e28 7365 6c66 2c20 2a61 7267  e_min(self, *arg
-00017200: 732c 202a 2a6b 7761 7267 7329 3a0d 0a20  s, **kwargs):.. 
-00017210: 2020 2020 2020 2072 6574 7572 6e20 626e         return bn
-00017220: 2e6d 6f76 655f 6d69 6e28 7365 6c66 2c20  .move_min(self, 
-00017230: 2a61 7267 732c 202a 2a6b 7761 7267 7329  *args, **kwargs)
-00017240: 0d0a 0d0a 2020 2020 6465 6620 6d6f 7665  ....    def move
-00017250: 5f6d 6178 2873 656c 662c 202a 6172 6773  _max(self, *args
-00017260: 2c20 2a2a 6b77 6172 6773 293a 0d0a 2020  , **kwargs):..  
-00017270: 2020 2020 2020 7265 7475 726e 2062 6e2e        return bn.
-00017280: 6d6f 7665 5f6d 6178 2873 656c 662c 202a  move_max(self, *
-00017290: 6172 6773 2c20 2a2a 6b77 6172 6773 290d  args, **kwargs).
-000172a0: 0a0d 0a20 2020 2064 6566 206d 6f76 655f  ...    def move_
-000172b0: 6172 676d 696e 2873 656c 662c 202a 6172  argmin(self, *ar
-000172c0: 6773 2c20 2a2a 6b77 6172 6773 293a 0d0a  gs, **kwargs):..
-000172d0: 2020 2020 2020 2020 7265 7475 726e 2062          return b
-000172e0: 6e2e 6d6f 7665 5f61 7267 6d69 6e28 7365  n.move_argmin(se
-000172f0: 6c66 2c20 2a61 7267 732c 202a 2a6b 7761  lf, *args, **kwa
-00017300: 7267 7329 0d0a 0d0a 2020 2020 6465 6620  rgs)....    def 
-00017310: 6d6f 7665 5f61 7267 6d61 7828 7365 6c66  move_argmax(self
-00017320: 2c20 2a61 7267 732c 202a 2a6b 7761 7267  , *args, **kwarg
-00017330: 7329 3a0d 0a20 2020 2020 2020 2072 6574  s):..        ret
-00017340: 7572 6e20 626e 2e6d 6f76 655f 6172 676d  urn bn.move_argm
-00017350: 6178 2873 656c 662c 202a 6172 6773 2c20  ax(self, *args, 
-00017360: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
-00017370: 2064 6566 206d 6f76 655f 6d65 6469 616e   def move_median
-00017380: 2873 656c 662c 202a 6172 6773 2c20 2a2a  (self, *args, **
-00017390: 6b77 6172 6773 293a 0d0a 2020 2020 2020  kwargs):..      
-000173a0: 2020 7265 7475 726e 2062 6e2e 6d6f 7665    return bn.move
-000173b0: 5f6d 6564 6961 6e28 7365 6c66 2c20 2a61  _median(self, *a
-000173c0: 7267 732c 202a 2a6b 7761 7267 7329 0d0a  rgs, **kwargs)..
-000173d0: 0d0a 2020 2020 6465 6620 6d6f 7665 5f72  ..    def move_r
-000173e0: 616e 6b28 7365 6c66 2c20 2a61 7267 732c  ank(self, *args,
-000173f0: 202a 2a6b 7761 7267 7329 3a0d 0a20 2020   **kwargs):..   
-00017400: 2020 2020 2072 6574 7572 6e20 626e 2e6d       return bn.m
-00017410: 6f76 655f 7261 6e6b 2873 656c 662c 202a  ove_rank(self, *
-00017420: 6172 6773 2c20 2a2a 6b77 6172 6773 290d  args, **kwargs).
-00017430: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
-00017440: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017450: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017460: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017470: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017480: 2d2d 2d2d 0d0a 2020 2020 6465 6620 7265  ----..    def re
-00017490: 706c 6163 6528 7365 6c66 2c20 6f6c 642c  place(self, old,
-000174a0: 206e 6577 293a 0d0a 2020 2020 2020 2020   new):..        
-000174b0: 7265 7475 726e 2062 6e2e 7265 706c 6163  return bn.replac
-000174c0: 6528 7365 6c66 2c20 6f6c 642c 206e 6577  e(self, old, new
-000174d0: 290d 0a0d 0a20 2020 2064 6566 2070 6172  )....    def par
-000174e0: 7469 7469 6f6e 3228 7365 6c66 2c20 2a61  tition2(self, *a
-000174f0: 7267 732c 202a 2a6b 7761 7267 7329 3a0d  rgs, **kwargs):.
-00017500: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00017510: 626e 2e70 6172 7469 7469 6f6e 2873 656c  bn.partition(sel
-00017520: 662c 202a 6172 6773 2c20 2a2a 6b77 6172  f, *args, **kwar
-00017530: 6773 290d 0a0d 0a20 2020 2064 6566 2061  gs)....    def a
-00017540: 7267 7061 7274 6974 696f 6e32 2873 656c  rgpartition2(sel
-00017550: 662c 202a 6172 6773 2c20 2a2a 6b77 6172  f, *args, **kwar
-00017560: 6773 293a 0d0a 2020 2020 2020 2020 7265  gs):..        re
-00017570: 7475 726e 2062 6e2e 6172 6770 6172 7469  turn bn.argparti
-00017580: 7469 6f6e 2873 656c 662c 202a 6172 6773  tion(self, *args
-00017590: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
-000175a0: 2020 2064 6566 2072 616e 6b64 6174 6128     def rankdata(
-000175b0: 7365 6c66 2c20 2a61 7267 732c 202a 2a6b  self, *args, **k
-000175c0: 7761 7267 7329 3a0d 0a20 2020 2020 2020  wargs):..       
-000175d0: 2072 6574 7572 6e20 626e 2e72 616e 6b64   return bn.rankd
-000175e0: 6174 6128 7365 6c66 2c20 2a61 7267 732c  ata(self, *args,
-000175f0: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
-00017600: 2020 6465 6620 6e61 6e72 616e 6b64 6174    def nanrankdat
-00017610: 6128 7365 6c66 2c20 2a61 7267 732c 202a  a(self, *args, *
-00017620: 2a6b 7761 7267 7329 3a0d 0a20 2020 2020  *kwargs):..     
-00017630: 2020 2072 6574 7572 6e20 626e 2e6e 616e     return bn.nan
-00017640: 7261 6e6b 6461 7461 2873 656c 662c 202a  rankdata(self, *
-00017650: 6172 6773 2c20 2a2a 6b77 6172 6773 290d  args, **kwargs).
-00017660: 0a0d 0a20 2020 2064 6566 2070 7573 6828  ...    def push(
-00017670: 7365 6c66 2c20 2a61 7267 732c 202a 2a6b  self, *args, **k
-00017680: 7761 7267 7329 3a0d 0a20 2020 2020 2020  wargs):..       
-00017690: 2072 6574 7572 6e20 626e 2e70 7573 6828   return bn.push(
-000176a0: 7365 6c66 2c20 2a61 7267 732c 202a 2a6b  self, *args, **k
-000176b0: 7761 7267 7329 0d0a 0d0a 2020 2020 2320  wargs)....    # 
-000176c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000176d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000176e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000176f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017700: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
-00017710: 2064 6566 2069 7373 6f72 7465 6428 7365   def issorted(se
-00017720: 6c66 2920 2d3e 2062 6f6f 6c3a 0d0a 2020  lf) -> bool:..  
-00017730: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00017740: 2020 2052 6574 7572 6e20 5472 7565 2069     Return True i
-00017750: 6620 7468 6520 6172 7261 7920 6973 2073  f the array is s
-00017760: 6f72 7465 642c 2046 616c 7365 206f 7468  orted, False oth
-00017770: 6572 7769 7365 2e0d 0a0d 0a20 2020 2020  erwise.....     
-00017780: 2020 204e 614e 7320 6174 2074 6865 2065     NaNs at the e
-00017790: 6e64 206f 6620 616e 2061 7272 6179 2061  nd of an array a
-000177a0: 7265 2063 6f6e 7369 6465 7265 6420 736f  re considered so
-000177b0: 7274 6564 2e0d 0a0d 0a20 2020 2020 2020  rted.....       
-000177c0: 2043 616c 6c73 203a 6d65 7468 3a60 7269   Calls :meth:`ri
-000177d0: 7074 6162 6c65 2e69 7373 6f72 7465 6460  ptable.issorted`
-000177e0: 2e0d 0a0d 0a20 2020 2020 2020 2052 6574  .....        Ret
-000177f0: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
-00017800: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2062  -----..        b
-00017810: 6f6f 6c0d 0a20 2020 2020 2020 2020 2020  ool..           
-00017820: 2054 7275 6520 6966 2074 6865 2061 7272   True if the arr
-00017830: 6179 2069 7320 736f 7274 6564 2c20 4661  ay is sorted, Fa
-00017840: 6c73 6520 6f74 6865 7277 6973 652e 0d0a  lse otherwise...
-00017850: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
-00017860: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
-00017870: 2d2d 2d2d 0d0a 2020 2020 2020 2020 7269  ----..        ri
-00017880: 7074 6162 6c65 2e69 7373 6f72 7465 640d  ptable.issorted.
-00017890: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
-000178a0: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
-000178b0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 203e  -----..        >
-000178c0: 3e3e 2061 203d 2072 742e 4661 7374 4172  >> a = rt.FastAr
-000178d0: 7261 7928 5b27 6127 2c20 2762 272c 2027  ray(['a', 'b', '
-000178e0: 6327 5d29 0d0a 2020 2020 2020 2020 3e3e  c'])..        >>
-000178f0: 3e20 612e 6973 736f 7274 6564 2829 0d0a  > a.issorted()..
-00017900: 2020 2020 2020 2020 5472 7565 0d0a 0d0a          True....
-00017910: 2020 2020 2020 2020 3e3e 3e20 6120 3d20          >>> a = 
-00017920: 7274 2e46 6173 7441 7272 6179 285b 312e  rt.FastArray([1.
-00017930: 302c 2032 2e30 2c20 332e 302c 2072 742e  0, 2.0, 3.0, rt.
-00017940: 6e61 6e5d 290d 0a20 2020 2020 2020 203e  nan])..        >
-00017950: 3e3e 2072 742e 6973 736f 7274 6564 2861  >> rt.issorted(a
-00017960: 290d 0a20 2020 2020 2020 2054 7275 650d  )..        True.
-00017970: 0a0d 0a20 2020 2020 2020 203e 3e3e 2061  ...        >>> a
-00017980: 203d 2072 742e 4661 7374 4172 7261 7928   = rt.FastArray(
-00017990: 5b27 6127 2c20 2763 272c 2027 6227 5d29  ['a', 'c', 'b'])
-000179a0: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-000179b0: 6973 736f 7274 6564 2829 0d0a 2020 2020  issorted()..    
-000179c0: 2020 2020 4661 6c73 650d 0a20 2020 2020      False..     
-000179d0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-000179e0: 7265 7475 726e 2069 7373 6f72 7465 6428  return issorted(
-000179f0: 7365 6c66 290d 0a0d 0a20 2020 2023 202d  self)....    # -
-00017a00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017a10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017a20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017a30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017a40: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-00017a50: 6465 6620 5f75 6e61 7279 5f6f 7028 7365  def _unary_op(se
-00017a60: 6c66 2c20 6675 6e63 6e75 6d2c 2066 616e  lf, funcnum, fan
-00017a70: 6379 3d46 616c 7365 2920 2d3e 2046 6173  cy=False) -> Fas
-00017a80: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
-00017a90: 2069 6620 7365 6c66 2e5f 6973 5f6e 6f74   if self._is_not
-00017aa0: 5f73 7570 706f 7274 6564 2873 656c 6629  _supported(self)
-00017ab0: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-00017ac0: 206d 616b 6520 6974 2063 6f6e 7469 6775   make it contigu
-00017ad0: 6f75 730d 0a20 2020 2020 2020 2020 2020  ous..           
-00017ae0: 2061 7272 203d 2073 656c 662e 636f 7079   arr = self.copy
-00017af0: 2829 0d0a 2020 2020 2020 2020 656c 7365  ()..        else
-00017b00: 3a0d 0a20 2020 2020 2020 2020 2020 2061  :..            a
-00017b10: 7272 203d 2073 656c 660d 0a0d 0a20 2020  rr = self....   
-00017b20: 2020 2020 2066 756e 6320 3d20 5479 7065       func = Type
-00017b30: 5265 6769 7374 6572 2e4d 6174 684c 6564  Register.MathLed
-00017b40: 6765 722e 5f42 4153 4943 4d41 5448 5f4f  ger._BASICMATH_O
-00017b50: 4e45 5f49 4e50 5554 0d0a 2020 2020 2020  NE_INPUT..      
-00017b60: 2020 7265 7375 6c74 203d 2066 756e 6328    result = func(
-00017b70: 6172 722c 2066 756e 636e 756d 2c20 3029  arr, funcnum, 0)
-00017b80: 0d0a 0d0a 2020 2020 2020 2020 6966 2072  ....        if r
-00017b90: 6573 756c 7420 6973 204e 6f6e 653a 0d0a  esult is None:..
-00017ba0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00017bb0: 6520 5479 7065 4572 726f 7228 6622 436f  e TypeError(f"Co
-00017bc0: 756c 6420 6e6f 7420 7065 7266 6f72 6d20  uld not perform 
-00017bd0: 6f70 6572 6174 696f 6e20 7b66 756e 636e  operation {funcn
-00017be0: 756d 7d20 6f6e 2046 6173 7441 7272 6179  um} on FastArray
-00017bf0: 206f 6620 6474 7970 6520 7b61 7272 2e64   of dtype {arr.d
-00017c00: 7479 7065 7d22 290d 0a20 2020 2020 2020  type}")..       
-00017c10: 2069 6620 6661 6e63 793a 0d0a 2020 2020   if fancy:..    
-00017c20: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00017c30: 2062 6f6f 6c5f 746f 5f66 616e 6379 2872   bool_to_fancy(r
-00017c40: 6573 756c 7429 0d0a 2020 2020 2020 2020  esult)..        
-00017c50: 7265 7475 726e 2072 6573 756c 740d 0a0d  return result...
-00017c60: 0a20 2020 2023 2323 2323 2323 2323 2323  .    ###########
-00017c70: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00017c80: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00017c90: 2323 0d0a 2020 2020 2320 426f 6f6c 6561  ##..    # Boolea
-00017ca0: 6e20 7365 6374 696f 6e0d 0a20 2020 2023  n section..    #
+00015420: 6c66 2c20 2a2a 6b77 6172 6773 2920 2d3e  lf, **kwargs) ->
+00015430: 206e 702e 6e75 6d62 6572 207c 2046 6173   np.number | Fas
+00015440: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
+00015450: 2072 6574 7572 6e20 6e70 2e6e 616e 7065   return np.nanpe
+00015460: 7263 656e 7469 6c65 2873 656c 662c 202a  rcentile(self, *
+00015470: 2a6b 7761 7267 7329 0d0a 0d0a 2020 2020  *kwargs)....    
+00015480: 6465 6620 636c 6970 5f6c 6f77 6572 2873  def clip_lower(s
+00015490: 656c 662c 2061 5f6d 696e 2c20 2a2a 6b77  elf, a_min, **kw
+000154a0: 6172 6773 2920 2d3e 2046 6173 7441 7272  args) -> FastArr
+000154b0: 6179 3a0d 0a20 2020 2020 2020 2072 6574  ay:..        ret
+000154c0: 7572 6e20 7365 6c66 2e63 6c69 7028 615f  urn self.clip(a_
+000154d0: 6d69 6e2c 204e 6f6e 652c 202a 2a6b 7761  min, None, **kwa
+000154e0: 7267 7329 0d0a 0d0a 2020 2020 6465 6620  rgs)....    def 
+000154f0: 636c 6970 5f75 7070 6572 2873 656c 662c  clip_upper(self,
+00015500: 2061 5f6d 6178 2c20 2a2a 6b77 6172 6773   a_max, **kwargs
+00015510: 2920 2d3e 2046 6173 7441 7272 6179 3a0d  ) -> FastArray:.
+00015520: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00015530: 7365 6c66 2e63 6c69 7028 4e6f 6e65 2c20  self.clip(None, 
+00015540: 615f 6d61 782c 202a 2a6b 7761 7267 7329  a_max, **kwargs)
+00015550: 0d0a 0d0a 2020 2020 6465 6620 7369 676e  ....    def sign
+00015560: 2873 656c 662c 202a 2a6b 7761 7267 7329  (self, **kwargs)
+00015570: 202d 3e20 4661 7374 4172 7261 793a 0d0a   -> FastArray:..
+00015580: 2020 2020 2020 2020 7265 7475 726e 206e          return n
+00015590: 702e 7369 676e 2873 656c 662c 202a 2a6b  p.sign(self, **k
+000155a0: 7761 7267 7329 0d0a 0d0a 2020 2020 6465  wargs)....    de
+000155b0: 6620 7472 756e 6328 7365 6c66 2c20 2a2a  f trunc(self, **
+000155c0: 6b77 6172 6773 2920 2d3e 2046 6173 7441  kwargs) -> FastA
+000155d0: 7272 6179 3a0d 0a20 2020 2020 2020 2072  rray:..        r
+000155e0: 6574 7572 6e20 6e70 2e74 7275 6e63 2873  eturn np.trunc(s
+000155f0: 656c 662c 202a 2a6b 7761 7267 7329 0d0a  elf, **kwargs)..
+00015600: 0d0a 2020 2020 6465 6620 7768 6572 6528  ..    def where(
+00015610: 7365 6c66 2c20 636f 6e64 6974 696f 6e2c  self, condition,
+00015620: 2079 3d6e 702e 6e61 6e29 202d 3e20 4661   y=np.nan) -> Fa
+00015630: 7374 4172 7261 793a 0d0a 2020 2020 2020  stArray:..      
+00015640: 2020 2222 220d 0a20 2020 2020 2020 2052    """..        R
+00015650: 6574 7572 6e20 6120 6e65 7720 6046 6173  eturn a new `Fas
+00015660: 7441 7272 6179 6020 696e 2077 6869 6368  tArray` in which
+00015670: 2076 616c 7565 7320 6172 6520 7265 706c   values are repl
+00015680: 6163 6564 2077 6865 7265 2061 2067 6976  aced where a giv
+00015690: 656e 0d0a 2020 2020 2020 2020 636f 6e64  en..        cond
+000156a0: 6974 696f 6e20 6973 2046 616c 7365 2e0d  ition is False..
+000156b0: 0a0d 0a20 2020 2020 2020 2054 6f20 616c  ...        To al
+000156c0: 736f 2070 726f 7669 6465 2061 2076 616c  so provide a val
+000156d0: 7565 2066 6f72 2077 6865 7265 2074 6865  ue for where the
+000156e0: 2063 6f6e 6469 7469 6f6e 2069 7320 5472   condition is Tr
+000156f0: 7565 2c20 7573 650d 0a20 2020 2020 2020  ue, use..       
+00015700: 203a 6d65 7468 3a60 7269 7074 6162 6c65   :meth:`riptable
+00015710: 2e77 6865 7265 602e 0d0a 0d0a 2020 2020  .where`.....    
+00015720: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
+00015730: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+00015740: 2d2d 0d0a 2020 2020 2020 2020 636f 6e64  --..        cond
+00015750: 6974 696f 6e20 3a20 626f 6f6c 206f 7220  ition : bool or 
+00015760: 6172 7261 7920 6f66 2062 6f6f 6c0d 0a20  array of bool.. 
+00015770: 2020 2020 2020 2020 2020 2057 6865 7265             Where
+00015780: 2074 6865 2063 6f6e 6469 7469 6f6e 2069   the condition i
+00015790: 7320 5472 7565 2c20 6b65 6570 2074 6865  s True, keep the
+000157a0: 206f 7269 6769 6e61 6c20 7661 6c75 652e   original value.
+000157b0: 2057 6865 7265 2046 616c 7365 2c0d 0a20   Where False,.. 
+000157c0: 2020 2020 2020 2020 2020 2072 6570 6c61             repla
+000157d0: 6365 2077 6974 6820 6079 6020 2869 6620  ce with `y` (if 
+000157e0: 6079 6020 6973 2061 2073 6361 6c61 7229  `y` is a scalar)
+000157f0: 206f 7220 7468 6520 636f 7272 6573 706f   or the correspo
+00015800: 6e64 696e 6720 7661 6c75 650d 0a20 2020  nding value..   
+00015810: 2020 2020 2020 2020 2066 726f 6d20 6079           from `y
+00015820: 6020 2869 6620 6079 6020 6973 2061 6e20  ` (if `y` is an 
+00015830: 6172 7261 7929 2e20 4966 2060 636f 6e64  array). If `cond
+00015840: 6974 696f 6e60 2069 7320 616e 2061 7272  ition` is an arr
+00015850: 6179 206f 7220 610d 0a20 2020 2020 2020  ay or a..       
+00015860: 2020 2020 2061 2063 6f6d 7061 7269 736f       a compariso
+00015870: 6e20 7468 6174 2072 6574 7572 6e73 2061  n that returns a
+00015880: 6e20 6172 7261 792c 2074 6865 2061 7272  n array, the arr
+00015890: 6179 206d 7573 7420 6265 2074 6865 2073  ay must be the s
+000158a0: 616d 650d 0a20 2020 2020 2020 2020 2020  ame..           
+000158b0: 206c 656e 6774 6820 6173 2074 6865 2063   length as the c
+000158c0: 616c 6c69 6e67 2060 4661 7374 4172 7261  alling `FastArra
+000158d0: 7960 2e0d 0a20 2020 2020 2020 2079 203a  y`...        y :
+000158e0: 2073 6361 6c61 722c 2061 7272 6179 2c20   scalar, array, 
+000158f0: 6f72 2063 616c 6c61 626c 652c 2064 6566  or callable, def
+00015900: 6175 6c74 206e 702e 6e61 6e0d 0a20 2020  ault np.nan..   
+00015910: 2020 2020 2020 2020 2054 6865 2076 616c           The val
+00015920: 7565 2074 6f20 7573 6520 7768 6572 6520  ue to use where 
+00015930: 6063 6f6e 6469 7469 6f6e 6020 6973 2046  `condition` is F
+00015940: 616c 7365 2e20 4966 2060 7960 2069 7320  alse. If `y` is 
+00015950: 616e 0d0a 2020 2020 2020 2020 2020 2020  an..            
+00015960: 6172 7261 7920 6f72 2061 2063 616c 6c61  array or a calla
+00015970: 626c 6520 7468 6174 2072 6574 7572 6e73  ble that returns
+00015980: 2061 6e20 6172 7261 792c 2069 7420 6d75   an array, it mu
+00015990: 7374 2062 6520 7468 6520 7361 6d65 0d0a  st be the same..
+000159a0: 2020 2020 2020 2020 2020 2020 6c65 6e67              leng
+000159b0: 7468 2061 7320 7468 6520 6361 6c6c 696e  th as the callin
+000159c0: 6720 6046 6173 7441 7272 6179 602e 2054  g `FastArray`. T
+000159d0: 6865 2076 616c 7565 206f 6620 6079 6020  he value of `y` 
+000159e0: 7468 6174 2063 6f72 7265 7370 6f6e 6473  that corresponds
+000159f0: 0d0a 2020 2020 2020 2020 2020 2020 746f  ..            to
+00015a00: 2074 6865 2046 616c 7365 2076 616c 7565   the False value
+00015a10: 2069 7320 7573 6564 2e0d 0a0d 0a20 2020   is used.....   
+00015a20: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
+00015a30: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+00015a40: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00015a50: 0d0a 2020 2020 2020 2020 2020 2020 4120  ..            A 
+00015a60: 6e65 7720 6046 6173 7441 7272 6179 6020  new `FastArray` 
+00015a70: 7769 7468 2076 616c 7565 7320 7265 706c  with values repl
+00015a80: 6163 6564 2077 6865 7265 2060 636f 6e64  aced where `cond
+00015a90: 6974 696f 6e60 2069 7320 4661 6c73 652e  ition` is False.
+00015aa0: 0d0a 0d0a 2020 2020 2020 2020 5365 6520  ....        See 
+00015ab0: 416c 736f 0d0a 2020 2020 2020 2020 2d2d  Also..        --
+00015ac0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00015ad0: 2e72 6970 7461 626c 652e 7768 6572 6520  .riptable.where 
+00015ae0: 3a0d 0a20 2020 2020 2020 2020 2020 2052  :..            R
+00015af0: 6570 6c61 6365 2076 616c 7565 7320 6465  eplace values de
+00015b00: 7065 6e64 696e 6720 6f6e 2077 6865 7468  pending on wheth
+00015b10: 6572 2061 2067 6976 656e 2063 6f6e 6469  er a given condi
+00015b20: 7469 6f6e 2069 7320 5472 7565 206f 720d  tion is True or.
+00015b30: 0a20 2020 2020 2020 2020 2020 2046 616c  .            Fal
+00015b40: 7365 2e0d 0a0d 0a20 2020 2020 2020 2045  se.....        E
+00015b50: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
+00015b60: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+00015b70: 2020 2060 636f 6e64 6974 696f 6e60 2069     `condition` i
+00015b80: 7320 6120 636f 6d70 6172 6973 6f6e 2074  s a comparison t
+00015b90: 6861 7420 6372 6561 7465 7320 616e 2061  hat creates an a
+00015ba0: 7272 6179 206f 6620 626f 6f6c 6561 6e73  rray of booleans
+00015bb0: 2c20 616e 640d 0a20 2020 2020 2020 2060  , and..        `
+00015bc0: 7960 2069 7320 6120 7363 616c 6172 3a0d  y` is a scalar:.
+00015bd0: 0a0d 0a20 2020 2020 2020 203e 3e3e 2061  ...        >>> a
+00015be0: 203d 2072 742e 4661 7374 4172 7261 7928   = rt.FastArray(
+00015bf0: 7274 2e61 7261 6e67 6528 3529 290d 0a20  rt.arange(5)).. 
+00015c00: 2020 2020 2020 203e 3e3e 2061 0d0a 2020         >>> a..  
+00015c10: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+00015c20: 5b30 2c20 312c 2032 2c20 332c 2034 5d29  [0, 1, 2, 3, 4])
+00015c30: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+00015c40: 7768 6572 6528 6120 3e20 322c 2031 3030  where(a > 2, 100
+00015c50: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
+00015c60: 7272 6179 285b 3130 302c 2031 3030 2c20  rray([100, 100, 
+00015c70: 3130 302c 2020 2033 2c20 2020 345d 290d  100,   3,   4]).
+00015c80: 0a0d 0a20 2020 2020 2020 2060 636f 6e64  ...        `cond
+00015c90: 6974 696f 6e60 2061 6e64 2060 7960 2061  ition` and `y` a
+00015ca0: 7265 2073 616d 652d 6c65 6e67 7468 2061  re same-length a
+00015cb0: 7272 6179 733a 0d0a 0d0a 2020 2020 2020  rrays:....      
+00015cc0: 2020 3e3e 3e20 636f 6e64 6974 696f 6e20    >>> condition 
+00015cd0: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
+00015ce0: 5472 7565 2c20 5472 7565 2c20 4661 6c73  True, True, Fals
+00015cf0: 652c 2046 616c 7365 2c20 4661 6c73 655d  e, False, False]
+00015d00: 290d 0a20 2020 2020 2020 203e 3e3e 2079  )..        >>> y
+00015d10: 203d 2072 742e 4661 7374 4172 7261 7928   = rt.FastArray(
+00015d20: 5b31 3030 2c20 3230 302c 2033 3030 2c20  [100, 200, 300, 
+00015d30: 3430 302c 2035 3030 5d29 0d0a 2020 2020  400, 500])..    
+00015d40: 2020 2020 3e3e 3e20 612e 7768 6572 6528      >>> a.where(
+00015d50: 636f 6e64 6974 696f 6e2c 2079 290d 0a20  condition, y).. 
+00015d60: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00015d70: 285b 2020 302c 2020 2031 2c20 3330 302c  ([  0,   1, 300,
+00015d80: 2034 3030 2c20 3530 305d 290d 0a20 2020   400, 500])..   
+00015d90: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00015da0: 2020 7265 7475 726e 2077 6865 7265 2863    return where(c
+00015db0: 6f6e 6469 7469 6f6e 2c20 7365 6c66 2c20  ondition, self, 
+00015dc0: 7929 0d0a 0d0a 2020 2020 6465 6620 636f  y)....    def co
+00015dd0: 756e 7428 7365 6c66 2c20 736f 7274 6564  unt(self, sorted
+00015de0: 3d54 7275 652c 2066 696c 7465 723d 4e6f  =True, filter=No
+00015df0: 6e65 2920 2d3e 2044 6174 6173 6574 3a0d  ne) -> Dataset:.
+00015e00: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00015e10: 2020 2020 2020 5468 6520 636f 756e 7420        The count 
+00015e20: 6f66 2065 6163 6820 756e 6971 7565 2076  of each unique v
+00015e30: 616c 7565 2e0d 0a0d 0a20 2020 2020 2020  alue.....       
+00015e40: 2054 6869 7320 7265 7475 726e 7320 7468   This returns th
+00015e50: 6520 7361 6d65 2069 6e66 6f72 6d61 7469  e same informati
+00015e60: 6f6e 2074 6861 7420 6060 2e75 6e69 7175  on that ``.uniqu
+00015e70: 6528 7265 7475 726e 5f63 6f75 6e74 7320  e(return_counts 
+00015e80: 3d20 5472 7565 2960 600d 0a20 2020 2020  = True)``..     
+00015e90: 2020 2064 6f65 732c 2065 7863 6570 7420     does, except 
+00015ea0: 696e 2061 2060 4461 7461 7365 7460 2069  in a `Dataset` i
+00015eb0: 6e73 7465 6164 206f 6620 6120 7475 706c  nstead of a tupl
+00015ec0: 652e 0d0a 0d0a 2020 2020 2020 2020 5061  e.....        Pa
+00015ed0: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+00015ee0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+00015ef0: 2020 2020 2020 736f 7274 6564 203a 2062        sorted : b
+00015f00: 6f6f 6c2c 2064 6566 6175 6c74 2054 7275  ool, default Tru
+00015f10: 650d 0a20 2020 2020 2020 2020 2020 2057  e..            W
+00015f20: 6865 6e20 5472 7565 2028 7468 6520 6465  hen True (the de
+00015f30: 6661 756c 7429 2c20 756e 6971 7565 2076  fault), unique v
+00015f40: 616c 7565 7320 6172 6520 7265 7475 726e  alues are return
+00015f50: 6564 2069 6e20 736f 7274 6564 206f 7264  ed in sorted ord
+00015f60: 6572 2e20 5365 7420 746f 0d0a 2020 2020  er. Set to..    
+00015f70: 2020 2020 2020 2020 4661 6c73 6520 746f          False to
+00015f80: 2072 6574 7572 6e20 7468 656d 2069 6e20   return them in 
+00015f90: 6f72 6465 7220 6f66 2066 6972 7374 2061  order of first a
+00015fa0: 7070 6561 7261 6e63 652e 0d0a 2020 2020  ppearance...    
+00015fb0: 2020 2020 6669 6c74 6572 3a20 6e64 6172      filter: ndar
+00015fc0: 7261 7920 6f66 2062 6f6f 6c2c 2064 6566  ray of bool, def
+00015fd0: 6175 6c74 204e 6f6e 650d 0a20 2020 2020  ault None..     
+00015fe0: 2020 2020 2020 2049 6620 7072 6f76 6964         If provid
+00015ff0: 6564 2c20 616e 7920 4661 6c73 6520 7661  ed, any False va
+00016000: 6c75 6573 2077 696c 6c20 6265 2069 676e  lues will be ign
+00016010: 6f72 6564 2069 6e20 7468 6520 6361 6c63  ored in the calc
+00016020: 756c 6174 696f 6e2e 0d0a 0d0a 2020 2020  ulation.....    
+00016030: 2020 2020 5265 7475 726e 730d 0a20 2020      Returns..   
+00016040: 2020 2020 202d 2d2d 2d2d 2d2d 0d0a 2020       -------..  
+00016050: 2020 2020 2020 4461 7461 7365 740d 0a20        Dataset.. 
+00016060: 2020 2020 2020 2020 2020 2041 2060 4461             A `Da
+00016070: 7461 7365 7460 2063 6f6e 7461 696e 696e  taset` containin
+00016080: 6720 7468 6520 756e 6971 7565 2076 616c  g the unique val
+00016090: 7565 7320 616e 6420 7468 6569 7220 636f  ues and their co
+000160a0: 756e 7473 2e0d 0a0d 0a20 2020 2020 2020  unts.....       
+000160b0: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
+000160c0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+000160d0: 2020 2020 2046 6173 7441 7272 6179 2e75       FastArray.u
+000160e0: 6e69 7175 650d 0a0d 0a20 2020 2020 2020  nique....       
+000160f0: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
+00016100: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+00016110: 2020 2020 203e 3e3e 2061 203d 2072 742e       >>> a = rt.
+00016120: 4661 7374 4172 7261 7928 5b30 2c20 322c  FastArray([0, 2,
+00016130: 2031 2c20 332c 2033 2c20 322c 2032 5d29   1, 3, 3, 2, 2])
+00016140: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+00016150: 636f 756e 7428 290d 0a20 2020 2020 2020  count()..       
+00016160: 202a 556e 6971 7565 2020 2043 6f75 6e74   *Unique   Count
+00016170: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+00016180: 2d20 2020 2d2d 2d2d 2d0d 0a20 2020 2020  -   -----..     
+00016190: 2020 2020 2020 2020 2030 2020 2020 2020           0      
+000161a0: 2031 0d0a 2020 2020 2020 2020 2020 2020   1..            
+000161b0: 2020 3120 2020 2020 2020 310d 0a20 2020    1       1..   
+000161c0: 2020 2020 2020 2020 2020 2032 2020 2020             2    
+000161d0: 2020 2033 0d0a 2020 2020 2020 2020 2020     3..          
+000161e0: 2020 2020 3320 2020 2020 2020 320d 0a0d      3       2...
+000161f0: 0a20 2020 2020 2020 2057 6974 6820 6060  .        With ``
+00016200: 736f 7274 6564 203d 2046 616c 7365 6060  sorted = False``
+00016210: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
+00016220: 2061 2e63 6f75 6e74 2873 6f72 7465 6420   a.count(sorted 
+00016230: 3d20 4661 6c73 6529 0d0a 2020 2020 2020  = False)..      
+00016240: 2020 2a55 6e69 7175 6520 2020 436f 756e    *Unique   Coun
+00016250: 740d 0a20 2020 2020 2020 202d 2d2d 2d2d  t..        -----
+00016260: 2d2d 2020 202d 2d2d 2d2d 0d0a 2020 2020  --   -----..    
+00016270: 2020 2020 2020 2020 2020 3020 2020 2020            0     
+00016280: 2020 310d 0a20 2020 2020 2020 2020 2020    1..           
+00016290: 2020 2032 2020 2020 2020 2033 0d0a 2020     2       3..  
+000162a0: 2020 2020 2020 2020 2020 2020 3120 2020              1   
+000162b0: 2020 2020 310d 0a20 2020 2020 2020 2020      1..         
+000162c0: 2020 2020 2033 2020 2020 2020 2032 0d0a       3       2..
+000162d0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+000162e0: 2020 2020 2075 6e69 7175 655f 636f 756e       unique_coun
+000162f0: 7473 203d 2075 6e69 7175 6528 7365 6c66  ts = unique(self
+00016300: 2c20 736f 7274 6564 3d73 6f72 7465 642c  , sorted=sorted,
+00016310: 2072 6574 7572 6e5f 636f 756e 7473 3d54   return_counts=T
+00016320: 7275 652c 2066 696c 7465 723d 6669 6c74  rue, filter=filt
+00016330: 6572 290d 0a20 2020 2020 2020 206e 616d  er)..        nam
+00016340: 6520 3d20 7365 6c66 2e67 6574 5f6e 616d  e = self.get_nam
+00016350: 6528 290d 0a20 2020 2020 2020 2069 6620  e()..        if 
+00016360: 6e61 6d65 2069 7320 4e6f 6e65 3a0d 0a20  name is None:.. 
+00016370: 2020 2020 2020 2020 2020 206e 616d 6520             name 
+00016380: 3d20 2255 6e69 7175 6522 0d0a 2020 2020  = "Unique"..    
+00016390: 2020 2020 6473 203d 2054 7970 6552 6567      ds = TypeReg
+000163a0: 6973 7465 722e 4461 7461 7365 7428 7b6e  ister.Dataset({n
+000163b0: 616d 653a 2075 6e69 7175 655f 636f 756e  ame: unique_coun
+000163c0: 7473 5b30 5d2c 2022 436f 756e 7422 3a20  ts[0], "Count": 
+000163d0: 756e 6971 7565 5f63 6f75 6e74 735b 315d  unique_counts[1]
+000163e0: 7d29 0d0a 2020 2020 2020 2020 6473 2e6c  })..        ds.l
+000163f0: 6162 656c 5f73 6574 5f6e 616d 6573 285b  abel_set_names([
+00016400: 6e61 6d65 5d29 0d0a 2020 2020 2020 2020  name])..        
+00016410: 7265 7475 726e 2064 730d 0a0d 0a20 2020  return ds....   
+00016420: 2023 2323 2323 2323 2323 2323 2323 2323   ###############
+00016430: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016440: 2323 2323 2323 2323 2323 2323 2323 0d0a  ##############..
+00016450: 2020 2020 2320 526f 6c6c 696e 6720 7365      # Rolling se
+00016460: 6374 696f 6e20 2863 616e 6e6f 7420 6861  ction (cannot ha
+00016470: 6e64 6c65 2073 7472 6964 6573 290d 0a20  ndle strides).. 
+00016480: 2020 2023 2323 2323 2323 2323 2323 2323     #############
+00016490: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000164a0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000164b0: 0d0a 2020 2020 6465 6620 726f 6c6c 696e  ..    def rollin
+000164c0: 675f 7375 6d28 7365 6c66 2c20 7769 6e64  g_sum(self, wind
+000164d0: 6f77 3a20 696e 7420 3d20 3329 202d 3e20  ow: int = 3) -> 
+000164e0: 4661 7374 4172 7261 793a 0d0a 2020 2020  FastArray:..    
+000164f0: 2020 2020 7265 7475 726e 2072 632e 526f      return rc.Ro
+00016500: 6c6c 696e 6728 7365 6c66 2c20 524f 4c4c  lling(self, ROLL
+00016510: 494e 475f 4655 4e43 5449 4f4e 532e 524f  ING_FUNCTIONS.RO
+00016520: 4c4c 494e 475f 5355 4d2c 2077 696e 646f  LLING_SUM, windo
+00016530: 7729 0d0a 0d0a 2020 2020 6465 6620 726f  w)....    def ro
+00016540: 6c6c 696e 675f 6e61 6e73 756d 2873 656c  lling_nansum(sel
+00016550: 662c 2077 696e 646f 773a 2069 6e74 203d  f, window: int =
+00016560: 2033 2920 2d3e 2046 6173 7441 7272 6179   3) -> FastArray
+00016570: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
+00016580: 6e20 7263 2e52 6f6c 6c69 6e67 2873 656c  n rc.Rolling(sel
+00016590: 662c 2052 4f4c 4c49 4e47 5f46 554e 4354  f, ROLLING_FUNCT
+000165a0: 494f 4e53 2e52 4f4c 4c49 4e47 5f4e 414e  IONS.ROLLING_NAN
+000165b0: 5355 4d2c 2077 696e 646f 7729 0d0a 0d0a  SUM, window)....
+000165c0: 2020 2020 6465 6620 726f 6c6c 696e 675f      def rolling_
+000165d0: 6d65 616e 2873 656c 662c 2077 696e 646f  mean(self, windo
+000165e0: 773a 2069 6e74 203d 2033 2920 2d3e 2046  w: int = 3) -> F
+000165f0: 6173 7441 7272 6179 3a0d 0a20 2020 2020  astArray:..     
+00016600: 2020 2072 6574 7572 6e20 7263 2e52 6f6c     return rc.Rol
+00016610: 6c69 6e67 2873 656c 662c 2052 4f4c 4c49  ling(self, ROLLI
+00016620: 4e47 5f46 554e 4354 494f 4e53 2e52 4f4c  NG_FUNCTIONS.ROL
+00016630: 4c49 4e47 5f4d 4541 4e2c 2077 696e 646f  LING_MEAN, windo
+00016640: 7729 0d0a 0d0a 2020 2020 6465 6620 726f  w)....    def ro
+00016650: 6c6c 696e 675f 6e61 6e6d 6561 6e28 7365  lling_nanmean(se
+00016660: 6c66 2c20 7769 6e64 6f77 3a20 696e 7420  lf, window: int 
+00016670: 3d20 3329 202d 3e20 4661 7374 4172 7261  = 3) -> FastArra
+00016680: 793a 0d0a 2020 2020 2020 2020 7265 7475  y:..        retu
+00016690: 726e 2072 632e 526f 6c6c 696e 6728 7365  rn rc.Rolling(se
+000166a0: 6c66 2c20 524f 4c4c 494e 475f 4655 4e43  lf, ROLLING_FUNC
+000166b0: 5449 4f4e 532e 524f 4c4c 494e 475f 4e41  TIONS.ROLLING_NA
+000166c0: 4e4d 4541 4e2c 2077 696e 646f 7729 0d0a  NMEAN, window)..
+000166d0: 0d0a 2020 2020 6465 6620 726f 6c6c 696e  ..    def rollin
+000166e0: 675f 7175 616e 7469 6c65 2873 656c 662c  g_quantile(self,
+000166f0: 2071 2c20 7769 6e64 6f77 3a20 696e 7420   q, window: int 
+00016700: 3d20 3329 202d 3e20 4661 7374 4172 7261  = 3) -> FastArra
+00016710: 793a 0d0a 2020 2020 2020 2020 7769 6e64  y:..        wind
+00016720: 6f77 203d 206d 696e 2877 696e 646f 772c  ow = min(window,
+00016730: 206c 656e 2873 656c 6629 290d 0a20 2020   len(self))..   
+00016740: 2020 2020 2077 696e 646f 7750 6172 616d       windowParam
+00016750: 203d 2072 6f6c 6c69 6e67 5f71 7561 6e74   = rolling_quant
+00016760: 696c 655f 6675 6e63 5061 7261 6d28 712c  ile_funcParam(q,
+00016770: 2077 696e 646f 7729 0d0a 2020 2020 2020   window)..      
+00016780: 2020 7265 7475 726e 2072 632e 526f 6c6c    return rc.Roll
+00016790: 696e 6728 7365 6c66 2c20 524f 4c4c 494e  ing(self, ROLLIN
+000167a0: 475f 4655 4e43 5449 4f4e 532e 524f 4c4c  G_FUNCTIONS.ROLL
+000167b0: 494e 475f 5155 414e 5449 4c45 2c20 7769  ING_QUANTILE, wi
+000167c0: 6e64 6f77 5061 7261 6d29 0d0a 0d0a 2020  ndowParam)....  
+000167d0: 2020 6465 6620 726f 6c6c 696e 675f 7661    def rolling_va
+000167e0: 7228 7365 6c66 2c20 7769 6e64 6f77 3a20  r(self, window: 
+000167f0: 696e 7420 3d20 3329 202d 3e20 4661 7374  int = 3) -> Fast
+00016800: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
+00016810: 7265 7475 726e 2072 632e 526f 6c6c 696e  return rc.Rollin
+00016820: 6728 7365 6c66 2c20 524f 4c4c 494e 475f  g(self, ROLLING_
+00016830: 4655 4e43 5449 4f4e 532e 524f 4c4c 494e  FUNCTIONS.ROLLIN
+00016840: 475f 5641 522c 2077 696e 646f 7729 0d0a  G_VAR, window)..
+00016850: 0d0a 2020 2020 6465 6620 726f 6c6c 696e  ..    def rollin
+00016860: 675f 6e61 6e76 6172 2873 656c 662c 2077  g_nanvar(self, w
+00016870: 696e 646f 773a 2069 6e74 203d 2033 2920  indow: int = 3) 
+00016880: 2d3e 2046 6173 7441 7272 6179 3a0d 0a20  -> FastArray:.. 
+00016890: 2020 2020 2020 2072 6574 7572 6e20 7263         return rc
+000168a0: 2e52 6f6c 6c69 6e67 2873 656c 662c 2052  .Rolling(self, R
+000168b0: 4f4c 4c49 4e47 5f46 554e 4354 494f 4e53  OLLING_FUNCTIONS
+000168c0: 2e52 4f4c 4c49 4e47 5f4e 414e 5641 522c  .ROLLING_NANVAR,
+000168d0: 2077 696e 646f 7729 0d0a 0d0a 2020 2020   window)....    
+000168e0: 6465 6620 726f 6c6c 696e 675f 7374 6428  def rolling_std(
+000168f0: 7365 6c66 2c20 7769 6e64 6f77 3a20 696e  self, window: in
+00016900: 7420 3d20 3329 202d 3e20 4661 7374 4172  t = 3) -> FastAr
+00016910: 7261 793a 0d0a 2020 2020 2020 2020 7265  ray:..        re
+00016920: 7475 726e 2072 632e 526f 6c6c 696e 6728  turn rc.Rolling(
+00016930: 7365 6c66 2c20 524f 4c4c 494e 475f 4655  self, ROLLING_FU
+00016940: 4e43 5449 4f4e 532e 524f 4c4c 494e 475f  NCTIONS.ROLLING_
+00016950: 5354 442c 2077 696e 646f 7729 0d0a 0d0a  STD, window)....
+00016960: 2020 2020 6465 6620 726f 6c6c 696e 675f      def rolling_
+00016970: 6e61 6e73 7464 2873 656c 662c 2077 696e  nanstd(self, win
+00016980: 646f 773a 2069 6e74 203d 2033 2920 2d3e  dow: int = 3) ->
+00016990: 2046 6173 7441 7272 6179 3a0d 0a20 2020   FastArray:..   
+000169a0: 2020 2020 2072 6574 7572 6e20 7263 2e52       return rc.R
+000169b0: 6f6c 6c69 6e67 2873 656c 662c 2052 4f4c  olling(self, ROL
+000169c0: 4c49 4e47 5f46 554e 4354 494f 4e53 2e52  LING_FUNCTIONS.R
+000169d0: 4f4c 4c49 4e47 5f4e 414e 5354 442c 2077  OLLING_NANSTD, w
+000169e0: 696e 646f 7729 0d0a 0d0a 2020 2020 2323  indow)....    ##
+000169f0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016a00: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016a10: 2323 2323 2323 2323 2323 230d 0a20 2020  ###########..   
+00016a20: 2023 2054 696d 6557 696e 646f 7720 7365   # TimeWindow se
+00016a30: 6374 696f 6e20 2863 616e 6e6f 7420 6861  ction (cannot ha
+00016a40: 6e64 6c65 2073 7472 6964 6573 292c 2074  ndle strides), t
+00016a50: 696d 655f 6172 7261 7920 6d75 7374 2062  ime_array must b
+00016a60: 6520 494e 5436 340d 0a20 2020 2023 2323  e INT64..    ###
+00016a70: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016a80: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016a90: 2323 2323 2323 2323 2323 0d0a 2020 2020  ##########..    
+00016aa0: 6465 6620 7469 6d65 7769 6e64 6f77 5f73  def timewindow_s
+00016ab0: 756d 2873 656c 662c 2074 696d 655f 6172  um(self, time_ar
+00016ac0: 7261 792c 2074 696d 655f 6469 7374 293a  ray, time_dist):
+00016ad0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00016ae0: 2020 2020 2020 2054 6865 2069 6e70 7574         The input
+00016af0: 2061 7272 6179 206d 7573 7420 6265 2069   array must be i
+00016b00: 6e74 3634 2061 6e64 2073 6f72 7465 6420  nt64 and sorted 
+00016b10: 7769 7468 2065 7665 7220 696e 6372 6561  with ever increa
+00016b20: 7369 6e67 2076 616c 7565 732e 0d0a 2020  sing values...  
+00016b30: 2020 2020 2020 5375 6d73 2075 7020 7468        Sums up th
+00016b40: 6520 7661 6c75 6573 2066 6f72 2061 2067  e values for a g
+00016b50: 6976 656e 2074 696d 6520 7769 6e64 6f77  iven time window
+00016b60: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
+00016b70: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
+00016b80: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
+00016b90: 2020 2020 2074 696d 655f 6172 7261 793a       time_array:
+00016ba0: 2073 6f72 7465 6420 696e 7465 6765 7220   sorted integer 
+00016bb0: 6172 7261 7920 6f66 2074 696d 6573 7461  array of timesta
+00016bc0: 6d70 730d 0a20 2020 2020 2020 2074 696d  mps..        tim
+00016bd0: 655f 6469 7374 3a20 696e 7465 6765 7220  e_dist: integer 
+00016be0: 7661 6c75 6520 6f66 2074 6865 2074 696d  value of the tim
+00016bf0: 6520 7769 6e64 6f77 2073 697a 650d 0a0d  e window size...
+00016c00: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
+00016c10: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00016c20: 2d2d 2d0d 0a20 2020 2020 2020 203e 3e3e  ---..        >>>
+00016c30: 2061 3d72 742e 6172 616e 6765 2831 302c   a=rt.arange(10,
+00016c40: 2064 7479 7065 3d72 742e 696e 7436 3429   dtype=rt.int64)
+00016c50: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+00016c60: 7469 6d65 7769 6e64 6f77 5f73 756d 2861  timewindow_sum(a
+00016c70: 2c35 290d 0a20 2020 2020 2020 2046 6173  ,5)..        Fas
+00016c80: 7441 7272 6179 285b 2030 2c20 2031 2c20  tArray([ 0,  1, 
+00016c90: 2033 2c20 2036 2c20 3130 2c20 3135 2c20   3,  6, 10, 15, 
+00016ca0: 3231 2c20 3237 2c20 3333 2c20 3339 5d2c  21, 27, 33, 39],
+00016cb0: 2064 7479 7065 3d69 6e74 3634 290d 0a0d   dtype=int64)...
+00016cc0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00016cd0: 2020 2020 2020 7265 7475 726e 2072 632e        return rc.
+00016ce0: 5469 6d65 5769 6e64 6f77 2873 656c 662c  TimeWindow(self,
+00016cf0: 2074 696d 655f 6172 7261 792c 2054 494d   time_array, TIM
+00016d00: 4557 494e 444f 575f 4655 4e43 5449 4f4e  EWINDOW_FUNCTION
+00016d10: 532e 5449 4d45 5749 4e44 4f57 5f53 554d  S.TIMEWINDOW_SUM
+00016d20: 2c20 7469 6d65 5f64 6973 7429 0d0a 0d0a  , time_dist)....
+00016d30: 2020 2020 6465 6620 7469 6d65 7769 6e64      def timewind
+00016d40: 6f77 5f70 726f 6428 7365 6c66 2c20 7469  ow_prod(self, ti
+00016d50: 6d65 5f61 7272 6179 2c20 7469 6d65 5f64  me_array, time_d
+00016d60: 6973 7429 3a0d 0a20 2020 2020 2020 2022  ist):..        "
+00016d70: 2222 0d0a 2020 2020 2020 2020 5468 6520  ""..        The 
+00016d80: 696e 7075 7420 6172 7261 7920 6d75 7374  input array must
+00016d90: 2062 6520 696e 7436 3420 616e 6420 736f   be int64 and so
+00016da0: 7274 6564 2077 6974 6820 6576 6572 2069  rted with ever i
+00016db0: 6e63 7265 6173 696e 6720 7661 6c75 6573  ncreasing values
+00016dc0: 2e0d 0a20 2020 2020 2020 204d 756c 7469  ...        Multi
+00016dd0: 706c 6965 7320 7570 2074 6865 2076 616c  plies up the val
+00016de0: 7565 7320 666f 7220 6120 6769 7665 6e20  ues for a given 
+00016df0: 7469 6d65 2077 696e 646f 772e 0d0a 0d0a  time window.....
+00016e00: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
+00016e10: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
+00016e20: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00016e30: 7469 6d65 5f61 7272 6179 3a20 736f 7274  time_array: sort
+00016e40: 6564 2069 6e74 6567 6572 2061 7272 6179  ed integer array
+00016e50: 206f 6620 7469 6d65 7374 616d 7073 0d0a   of timestamps..
+00016e60: 2020 2020 2020 2020 7469 6d65 5f64 6973          time_dis
+00016e70: 743a 2069 6e74 6567 6572 2076 616c 7565  t: integer value
+00016e80: 206f 6620 7468 6520 7469 6d65 2077 696e   of the time win
+00016e90: 646f 7720 7369 7a65 0d0a 0d0a 2020 2020  dow size....    
+00016ea0: 2020 2020 4578 616d 706c 6573 0d0a 2020      Examples..  
+00016eb0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
+00016ec0: 2020 2020 2020 2020 3e3e 3e20 613d 7274          >>> a=rt
+00016ed0: 2e61 7261 6e67 6528 3130 2c20 6474 7970  .arange(10, dtyp
+00016ee0: 653d 7274 2e69 6e74 3634 290d 0a20 2020  e=rt.int64)..   
+00016ef0: 2020 2020 203e 3e3e 2061 2e74 696d 6577       >>> a.timew
+00016f00: 696e 646f 775f 7072 6f64 2861 2c35 290d  indow_prod(a,5).
+00016f10: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+00016f20: 6179 285b 2020 2020 302c 2020 2020 2030  ay([    0,     0
+00016f30: 2c20 2020 2020 302c 2020 2020 2030 2c20  ,     0,     0, 
+00016f40: 2020 2020 302c 2020 2020 2030 2c20 2020      0,     0,   
+00016f50: 3732 302c 2020 3530 3430 2c20 3230 3136  720,  5040, 2016
+00016f60: 302c 2036 3034 3830 5d2c 2064 7479 7065  0, 60480], dtype
+00016f70: 3d69 6e74 3634 290d 0a20 2020 2020 2020  =int64)..       
+00016f80: 2022 2222 0d0a 2020 2020 2020 2020 7265   """..        re
+00016f90: 7475 726e 2072 632e 5469 6d65 5769 6e64  turn rc.TimeWind
+00016fa0: 6f77 2873 656c 662c 2074 696d 655f 6172  ow(self, time_ar
+00016fb0: 7261 792c 2054 494d 4557 494e 444f 575f  ray, TIMEWINDOW_
+00016fc0: 4655 4e43 5449 4f4e 532e 5449 4d45 5749  FUNCTIONS.TIMEWI
+00016fd0: 4e44 4f57 5f50 524f 442c 2074 696d 655f  NDOW_PROD, time_
+00016fe0: 6469 7374 290d 0a0d 0a20 2020 2023 2323  dist)....    ###
+00016ff0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00017000: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00017010: 2323 2323 2323 2323 2323 0d0a 2020 2020  ##########..    
+00017020: 2320 426f 7474 6c65 6e65 636b 2073 6563  # Bottleneck sec
+00017030: 7469 6f6e 2028 6f6e 6c79 2068 616e 646c  tion (only handl
+00017040: 6573 2069 6e74 3332 2f69 6e74 3634 2f66  es int32/int64/f
+00017050: 6c6f 6174 3332 2f66 6c6f 6174 3634 290d  loat32/float64).
+00017060: 0a20 2020 2023 2062 6f74 746c 656e 6563  .    # bottlenec
+00017070: 6b20 6973 206f 7074 696f 6e61 6c0d 0a20  k is optional.. 
+00017080: 2020 2023 2323 2323 2323 2323 2323 2323     #############
+00017090: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000170a0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000170b0: 0d0a 2020 2020 6465 6620 6d6f 7665 5f73  ..    def move_s
+000170c0: 756d 2873 656c 662c 202a 6172 6773 2c20  um(self, *args, 
+000170d0: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
+000170e0: 2020 2020 7265 7475 726e 2062 6e2e 6d6f      return bn.mo
+000170f0: 7665 5f73 756d 2873 656c 662c 202a 6172  ve_sum(self, *ar
+00017100: 6773 2c20 2a2a 6b77 6172 6773 290d 0a0d  gs, **kwargs)...
+00017110: 0a20 2020 2064 6566 206d 6f76 655f 6d65  .    def move_me
+00017120: 616e 2873 656c 662c 202a 6172 6773 2c20  an(self, *args, 
+00017130: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
+00017140: 2020 2020 7265 7475 726e 2062 6e2e 6d6f      return bn.mo
+00017150: 7665 5f6d 6561 6e28 7365 6c66 2c20 2a61  ve_mean(self, *a
+00017160: 7267 732c 202a 2a6b 7761 7267 7329 0d0a  rgs, **kwargs)..
+00017170: 0d0a 2020 2020 6465 6620 6d6f 7665 5f73  ..    def move_s
+00017180: 7464 2873 656c 662c 202a 6172 6773 2c20  td(self, *args, 
+00017190: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
+000171a0: 2020 2020 7265 7475 726e 2062 6e2e 6d6f      return bn.mo
+000171b0: 7665 5f73 7464 2873 656c 662c 202a 6172  ve_std(self, *ar
+000171c0: 6773 2c20 2a2a 6b77 6172 6773 290d 0a0d  gs, **kwargs)...
+000171d0: 0a20 2020 2064 6566 206d 6f76 655f 7661  .    def move_va
+000171e0: 7228 7365 6c66 2c20 2a61 7267 732c 202a  r(self, *args, *
+000171f0: 2a6b 7761 7267 7329 3a0d 0a20 2020 2020  *kwargs):..     
+00017200: 2020 2072 6574 7572 6e20 626e 2e6d 6f76     return bn.mov
+00017210: 655f 7661 7228 7365 6c66 2c20 2a61 7267  e_var(self, *arg
+00017220: 732c 202a 2a6b 7761 7267 7329 0d0a 0d0a  s, **kwargs)....
+00017230: 2020 2020 6465 6620 6d6f 7665 5f6d 696e      def move_min
+00017240: 2873 656c 662c 202a 6172 6773 2c20 2a2a  (self, *args, **
+00017250: 6b77 6172 6773 293a 0d0a 2020 2020 2020  kwargs):..      
+00017260: 2020 7265 7475 726e 2062 6e2e 6d6f 7665    return bn.move
+00017270: 5f6d 696e 2873 656c 662c 202a 6172 6773  _min(self, *args
+00017280: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
+00017290: 2020 2064 6566 206d 6f76 655f 6d61 7828     def move_max(
+000172a0: 7365 6c66 2c20 2a61 7267 732c 202a 2a6b  self, *args, **k
+000172b0: 7761 7267 7329 3a0d 0a20 2020 2020 2020  wargs):..       
+000172c0: 2072 6574 7572 6e20 626e 2e6d 6f76 655f   return bn.move_
+000172d0: 6d61 7828 7365 6c66 2c20 2a61 7267 732c  max(self, *args,
+000172e0: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
+000172f0: 2020 6465 6620 6d6f 7665 5f61 7267 6d69    def move_argmi
+00017300: 6e28 7365 6c66 2c20 2a61 7267 732c 202a  n(self, *args, *
+00017310: 2a6b 7761 7267 7329 3a0d 0a20 2020 2020  *kwargs):..     
+00017320: 2020 2072 6574 7572 6e20 626e 2e6d 6f76     return bn.mov
+00017330: 655f 6172 676d 696e 2873 656c 662c 202a  e_argmin(self, *
+00017340: 6172 6773 2c20 2a2a 6b77 6172 6773 290d  args, **kwargs).
+00017350: 0a0d 0a20 2020 2064 6566 206d 6f76 655f  ...    def move_
+00017360: 6172 676d 6178 2873 656c 662c 202a 6172  argmax(self, *ar
+00017370: 6773 2c20 2a2a 6b77 6172 6773 293a 0d0a  gs, **kwargs):..
+00017380: 2020 2020 2020 2020 7265 7475 726e 2062          return b
+00017390: 6e2e 6d6f 7665 5f61 7267 6d61 7828 7365  n.move_argmax(se
+000173a0: 6c66 2c20 2a61 7267 732c 202a 2a6b 7761  lf, *args, **kwa
+000173b0: 7267 7329 0d0a 0d0a 2020 2020 6465 6620  rgs)....    def 
+000173c0: 6d6f 7665 5f6d 6564 6961 6e28 7365 6c66  move_median(self
+000173d0: 2c20 2a61 7267 732c 202a 2a6b 7761 7267  , *args, **kwarg
+000173e0: 7329 3a0d 0a20 2020 2020 2020 2072 6574  s):..        ret
+000173f0: 7572 6e20 626e 2e6d 6f76 655f 6d65 6469  urn bn.move_medi
+00017400: 616e 2873 656c 662c 202a 6172 6773 2c20  an(self, *args, 
+00017410: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
+00017420: 2064 6566 206d 6f76 655f 7261 6e6b 2873   def move_rank(s
+00017430: 656c 662c 202a 6172 6773 2c20 2a2a 6b77  elf, *args, **kw
+00017440: 6172 6773 293a 0d0a 2020 2020 2020 2020  args):..        
+00017450: 7265 7475 726e 2062 6e2e 6d6f 7665 5f72  return bn.move_r
+00017460: 616e 6b28 7365 6c66 2c20 2a61 7267 732c  ank(self, *args,
+00017470: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
+00017480: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
+00017490: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000174a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000174b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000174c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
+000174d0: 0a20 2020 2064 6566 2072 6570 6c61 6365  .    def replace
+000174e0: 2873 656c 662c 206f 6c64 2c20 6e65 7729  (self, old, new)
+000174f0: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
+00017500: 6e20 626e 2e72 6570 6c61 6365 2873 656c  n bn.replace(sel
+00017510: 662c 206f 6c64 2c20 6e65 7729 0d0a 0d0a  f, old, new)....
+00017520: 2020 2020 6465 6620 7061 7274 6974 696f      def partitio
+00017530: 6e32 2873 656c 662c 202a 6172 6773 2c20  n2(self, *args, 
+00017540: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
+00017550: 2020 2020 7265 7475 726e 2062 6e2e 7061      return bn.pa
+00017560: 7274 6974 696f 6e28 7365 6c66 2c20 2a61  rtition(self, *a
+00017570: 7267 732c 202a 2a6b 7761 7267 7329 0d0a  rgs, **kwargs)..
+00017580: 0d0a 2020 2020 6465 6620 6172 6770 6172  ..    def argpar
+00017590: 7469 7469 6f6e 3228 7365 6c66 2c20 2a61  tition2(self, *a
+000175a0: 7267 732c 202a 2a6b 7761 7267 7329 3a0d  rgs, **kwargs):.
+000175b0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000175c0: 626e 2e61 7267 7061 7274 6974 696f 6e28  bn.argpartition(
+000175d0: 7365 6c66 2c20 2a61 7267 732c 202a 2a6b  self, *args, **k
+000175e0: 7761 7267 7329 0d0a 0d0a 2020 2020 6465  wargs)....    de
+000175f0: 6620 7261 6e6b 6461 7461 2873 656c 662c  f rankdata(self,
+00017600: 202a 6172 6773 2c20 2a2a 6b77 6172 6773   *args, **kwargs
+00017610: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
+00017620: 726e 2062 6e2e 7261 6e6b 6461 7461 2873  rn bn.rankdata(s
+00017630: 656c 662c 202a 6172 6773 2c20 2a2a 6b77  elf, *args, **kw
+00017640: 6172 6773 290d 0a0d 0a20 2020 2064 6566  args)....    def
+00017650: 206e 616e 7261 6e6b 6461 7461 2873 656c   nanrankdata(sel
+00017660: 662c 202a 6172 6773 2c20 2a2a 6b77 6172  f, *args, **kwar
+00017670: 6773 293a 0d0a 2020 2020 2020 2020 7265  gs):..        re
+00017680: 7475 726e 2062 6e2e 6e61 6e72 616e 6b64  turn bn.nanrankd
+00017690: 6174 6128 7365 6c66 2c20 2a61 7267 732c  ata(self, *args,
+000176a0: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
+000176b0: 2020 6465 6620 7075 7368 2873 656c 662c    def push(self,
+000176c0: 202a 6172 6773 2c20 2a2a 6b77 6172 6773   *args, **kwargs
+000176d0: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
+000176e0: 726e 2062 6e2e 7075 7368 2873 656c 662c  rn bn.push(self,
+000176f0: 202a 6172 6773 2c20 2a2a 6b77 6172 6773   *args, **kwargs
+00017700: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
+00017710: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017720: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017730: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017740: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017750: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
+00017760: 6973 736f 7274 6564 2873 656c 6629 202d  issorted(self) -
+00017770: 3e20 626f 6f6c 3a0d 0a20 2020 2020 2020  > bool:..       
+00017780: 2022 2222 0d0a 2020 2020 2020 2020 5265   """..        Re
+00017790: 7475 726e 2054 7275 6520 6966 2074 6865  turn True if the
+000177a0: 2061 7272 6179 2069 7320 736f 7274 6564   array is sorted
+000177b0: 2c20 4661 6c73 6520 6f74 6865 7277 6973  , False otherwis
+000177c0: 652e 0d0a 0d0a 2020 2020 2020 2020 4e61  e.....        Na
+000177d0: 4e73 2061 7420 7468 6520 656e 6420 6f66  Ns at the end of
+000177e0: 2061 6e20 6172 7261 7920 6172 6520 636f   an array are co
+000177f0: 6e73 6964 6572 6564 2073 6f72 7465 642e  nsidered sorted.
+00017800: 0d0a 0d0a 2020 2020 2020 2020 4361 6c6c  ....        Call
+00017810: 7320 3a6d 6574 683a 6072 6970 7461 626c  s :meth:`riptabl
+00017820: 652e 6973 736f 7274 6564 602e 0d0a 0d0a  e.issorted`.....
+00017830: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
+00017840: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00017850: 0d0a 2020 2020 2020 2020 626f 6f6c 0d0a  ..        bool..
+00017860: 2020 2020 2020 2020 2020 2020 5472 7565              True
+00017870: 2069 6620 7468 6520 6172 7261 7920 6973   if the array is
+00017880: 2073 6f72 7465 642c 2046 616c 7365 206f   sorted, False o
+00017890: 7468 6572 7769 7365 2e0d 0a0d 0a20 2020  therwise.....   
+000178a0: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
+000178b0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+000178c0: 0a20 2020 2020 2020 2072 6970 7461 626c  .        riptabl
+000178d0: 652e 6973 736f 7274 6564 0d0a 0d0a 2020  e.issorted....  
+000178e0: 2020 2020 2020 4578 616d 706c 6573 0d0a        Examples..
+000178f0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+00017900: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
+00017910: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
+00017920: 2761 272c 2027 6227 2c20 2763 275d 290d  'a', 'b', 'c']).
+00017930: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
+00017940: 7373 6f72 7465 6428 290d 0a20 2020 2020  ssorted()..     
+00017950: 2020 2054 7275 650d 0a0d 0a20 2020 2020     True....     
+00017960: 2020 203e 3e3e 2061 203d 2072 742e 4661     >>> a = rt.Fa
+00017970: 7374 4172 7261 7928 5b31 2e30 2c20 322e  stArray([1.0, 2.
+00017980: 302c 2033 2e30 2c20 7274 2e6e 616e 5d29  0, 3.0, rt.nan])
+00017990: 0d0a 2020 2020 2020 2020 3e3e 3e20 7274  ..        >>> rt
+000179a0: 2e69 7373 6f72 7465 6428 6129 0d0a 2020  .issorted(a)..  
+000179b0: 2020 2020 2020 5472 7565 0d0a 0d0a 2020        True....  
+000179c0: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
+000179d0: 2e46 6173 7441 7272 6179 285b 2761 272c  .FastArray(['a',
+000179e0: 2027 6327 2c20 2762 275d 290d 0a20 2020   'c', 'b'])..   
+000179f0: 2020 2020 203e 3e3e 2061 2e69 7373 6f72       >>> a.issor
+00017a00: 7465 6428 290d 0a20 2020 2020 2020 2046  ted()..        F
+00017a10: 616c 7365 0d0a 2020 2020 2020 2020 2222  alse..        ""
+00017a20: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
+00017a30: 6e20 6973 736f 7274 6564 2873 656c 6629  n issorted(self)
+00017a40: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+00017a50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017a60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017a70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017a80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017a90: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 205f  -----..    def _
+00017aa0: 756e 6172 795f 6f70 2873 656c 662c 2066  unary_op(self, f
+00017ab0: 756e 636e 756d 2c20 6661 6e63 793d 4661  uncnum, fancy=Fa
+00017ac0: 6c73 6529 202d 3e20 4661 7374 4172 7261  lse) -> FastArra
+00017ad0: 793a 0d0a 2020 2020 2020 2020 6966 2073  y:..        if s
+00017ae0: 656c 662e 5f69 735f 6e6f 745f 7375 7070  elf._is_not_supp
+00017af0: 6f72 7465 6428 7365 6c66 293a 0d0a 2020  orted(self):..  
+00017b00: 2020 2020 2020 2020 2020 2320 6d61 6b65            # make
+00017b10: 2069 7420 636f 6e74 6967 756f 7573 0d0a   it contiguous..
+00017b20: 2020 2020 2020 2020 2020 2020 6172 7220              arr 
+00017b30: 3d20 7365 6c66 2e63 6f70 7928 290d 0a20  = self.copy().. 
+00017b40: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00017b50: 2020 2020 2020 2020 2020 6172 7220 3d20            arr = 
+00017b60: 7365 6c66 0d0a 0d0a 2020 2020 2020 2020  self....        
+00017b70: 6675 6e63 203d 2054 7970 6552 6567 6973  func = TypeRegis
+00017b80: 7465 722e 4d61 7468 4c65 6467 6572 2e5f  ter.MathLedger._
+00017b90: 4241 5349 434d 4154 485f 4f4e 455f 494e  BASICMATH_ONE_IN
+00017ba0: 5055 540d 0a20 2020 2020 2020 2072 6573  PUT..        res
+00017bb0: 756c 7420 3d20 6675 6e63 2861 7272 2c20  ult = func(arr, 
+00017bc0: 6675 6e63 6e75 6d2c 2030 290d 0a0d 0a20  funcnum, 0).... 
+00017bd0: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
+00017be0: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
+00017bf0: 2020 2020 2020 2072 6169 7365 2054 7970         raise Typ
+00017c00: 6545 7272 6f72 2866 2243 6f75 6c64 206e  eError(f"Could n
+00017c10: 6f74 2070 6572 666f 726d 206f 7065 7261  ot perform opera
+00017c20: 7469 6f6e 207b 6675 6e63 6e75 6d7d 206f  tion {funcnum} o
+00017c30: 6e20 4661 7374 4172 7261 7920 6f66 2064  n FastArray of d
+00017c40: 7479 7065 207b 6172 722e 6474 7970 657d  type {arr.dtype}
+00017c50: 2229 0d0a 2020 2020 2020 2020 6966 2066  ")..        if f
+00017c60: 616e 6379 3a0d 0a20 2020 2020 2020 2020  ancy:..         
+00017c70: 2020 2072 6573 756c 7420 3d20 626f 6f6c     result = bool
+00017c80: 5f74 6f5f 6661 6e63 7928 7265 7375 6c74  _to_fancy(result
+00017c90: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00017ca0: 6e20 7265 7375 6c74 0d0a 0d0a 2020 2020  n result....    
 00017cb0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
 00017cc0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00017cd0: 2323 2323 2323 2323 2323 2323 0d0a 2020  ############..  
-00017ce0: 2020 6465 6620 6973 6e6f 726d 616c 2873    def isnormal(s
-00017cf0: 656c 662c 2066 616e 6379 3d46 616c 7365  elf, fancy=False
-00017d00: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
-00017d10: 726e 2073 656c 662e 5f75 6e61 7279 5f6f  rn self._unary_o
-00017d20: 7028 4d41 5448 5f4f 5045 5241 5449 4f4e  p(MATH_OPERATION
-00017d30: 2e49 534e 4f52 4d41 4c2c 2066 616e 6379  .ISNORMAL, fancy
-00017d40: 3d66 616e 6379 290d 0a0d 0a20 2020 2064  =fancy)....    d
-00017d50: 6566 2069 736e 6f74 6e6f 726d 616c 2873  ef isnotnormal(s
-00017d60: 656c 662c 2066 616e 6379 3d46 616c 7365  elf, fancy=False
-00017d70: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
-00017d80: 726e 2073 656c 662e 5f75 6e61 7279 5f6f  rn self._unary_o
-00017d90: 7028 4d41 5448 5f4f 5045 5241 5449 4f4e  p(MATH_OPERATION
-00017da0: 2e49 534e 4f54 4e4f 524d 414c 2c20 6661  .ISNOTNORMAL, fa
-00017db0: 6e63 793d 6661 6e63 7929 0d0a 0d0a 2020  ncy=fancy)....  
-00017dc0: 2020 6465 6620 6973 6e61 6e28 7365 6c66    def isnan(self
-00017dd0: 2c20 6661 6e63 793d 4661 6c73 6529 3a0d  , fancy=False):.
-00017de0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00017df0: 2020 2020 2020 5265 7475 726e 2061 2062        Return a b
-00017e00: 6f6f 6c65 616e 2061 7272 6179 2074 6861  oolean array tha
-00017e10: 7427 7320 5472 7565 2066 6f72 2065 6163  t's True for eac
-00017e20: 6820 656c 656d 656e 7420 7468 6174 2773  h element that's
-00017e30: 2061 204e 614e 2028 4e6f 7420 6120 4e75   a NaN (Not a Nu
-00017e40: 6d62 6572 292c 0d0a 2020 2020 2020 2020  mber),..        
-00017e50: 4661 6c73 6520 6f74 6865 7277 6973 652e  False otherwise.
-00017e60: 0d0a 0d0a 2020 2020 2020 2020 5061 7261  ....        Para
-00017e70: 6d65 7465 7273 0d0a 2020 2020 2020 2020  meters..        
-00017e80: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-00017e90: 2020 2020 6661 6e63 7920 3a20 626f 6f6c      fancy : bool
-00017ea0: 2c20 6465 6661 756c 7420 4661 6c73 650d  , default False.
-00017eb0: 0a20 2020 2020 2020 2020 2020 2053 6574  .            Set
-00017ec0: 2074 6f20 5472 7565 2074 6f20 696e 7374   to True to inst
-00017ed0: 6561 6420 7265 7475 726e 2074 6865 2069  ead return the i
-00017ee0: 6e64 6963 6573 206f 6620 7468 6520 5472  ndices of the Tr
-00017ef0: 7565 2028 4e61 4e29 2076 616c 7565 732e  ue (NaN) values.
-00017f00: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
-00017f10: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
-00017f20: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6046  ----..        `F
-00017f30: 6173 7441 7272 6179 600d 0a20 2020 2020  astArray`..     
-00017f40: 2020 2020 2020 2041 2060 4661 7374 4172         A `FastAr
-00017f50: 7261 7960 206f 6620 626f 6f6c 6561 6e73  ray` of booleans
-00017f60: 206f 7220 696e 6469 6365 732e 0d0a 0d0a   or indices.....
-00017f70: 2020 2020 2020 2020 5365 6520 416c 736f          See Also
-00017f80: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-00017f90: 2d2d 0d0a 2020 2020 2020 2020 4661 7374  --..        Fast
-00017fa0: 4172 7261 792e 6973 6e6f 746e 616e 2c20  Array.isnotnan, 
-00017fb0: 4661 7374 4172 7261 792e 6e6f 746e 612c  FastArray.notna,
-00017fc0: 2046 6173 7441 7272 6179 2e69 736e 616e   FastArray.isnan
-00017fd0: 6f72 7a65 726f 2c20 7269 7074 6162 6c65  orzero, riptable
-00017fe0: 2e69 736e 616e 2c0d 0a20 2020 2020 2020  .isnan,..       
-00017ff0: 2072 6970 7461 626c 652e 6973 6e6f 746e   riptable.isnotn
-00018000: 616e 2c20 7269 7074 6162 6c65 2e69 736e  an, riptable.isn
-00018010: 616e 6f72 7a65 726f 2c20 4361 7465 676f  anorzero, Catego
-00018020: 7269 6361 6c2e 6973 6e61 6e2c 0d0a 2020  rical.isnan,..  
-00018030: 2020 2020 2020 4361 7465 676f 7269 6361        Categorica
-00018040: 6c2e 6973 6e6f 746e 616e 2c20 4361 7465  l.isnotnan, Cate
-00018050: 676f 7269 6361 6c2e 6e6f 746e 612c 2044  gorical.notna, D
-00018060: 6174 652e 6973 6e61 6e2c 2044 6174 652e  ate.isnan, Date.
-00018070: 6973 6e6f 746e 616e 2c0d 0a20 2020 2020  isnotnan,..     
-00018080: 2020 2044 6174 6554 696d 654e 616e 6f2e     DateTimeNano.
-00018090: 6973 6e61 6e2c 2044 6174 6554 696d 654e  isnan, DateTimeN
-000180a0: 616e 6f2e 6973 6e6f 746e 616e 0d0a 2020  ano.isnotnan..  
-000180b0: 2020 2020 2020 4461 7461 7365 742e 6d61        Dataset.ma
-000180c0: 736b 5f6f 725f 6973 6e61 6e20 3a0d 0a20  sk_or_isnan :.. 
-000180d0: 2020 2020 2020 2020 2020 2052 6574 7572             Retur
-000180e0: 6e20 6120 626f 6f6c 6561 6e20 6172 7261  n a boolean arra
-000180f0: 7920 7468 6174 2773 2054 7275 6520 666f  y that's True fo
-00018100: 7220 6561 6368 2060 4461 7461 7365 7460  r each `Dataset`
-00018110: 2072 6f77 2074 6861 7420 636f 6e74 6169   row that contai
-00018120: 6e73 0d0a 2020 2020 2020 2020 2020 2020  ns..            
-00018130: 6174 206c 6561 7374 206f 6e65 204e 614e  at least one NaN
-00018140: 2e0d 0a20 2020 2020 2020 2044 6174 6173  ...        Datas
-00018150: 6574 2e6d 6173 6b5f 616e 645f 6973 6e61  et.mask_and_isna
-00018160: 6e20 3a0d 0a20 2020 2020 2020 2020 2020  n :..           
-00018170: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
-00018180: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
-00018190: 7275 6520 666f 7220 6561 6368 2061 6c6c  rue for each all
-000181a0: 2d4e 614e 2060 4461 7461 7365 7460 2072  -NaN `Dataset` r
-000181b0: 6f77 2e0d 0a0d 0a20 2020 2020 2020 2045  ow.....        E
-000181c0: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
-000181d0: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
-000181e0: 2020 203e 3e3e 2061 203d 2072 742e 4661     >>> a = rt.Fa
-000181f0: 7374 4172 7261 7928 5b72 742e 6e61 6e2c  stArray([rt.nan,
-00018200: 2072 742e 6e61 6e2c 206e 702e 696e 662c   rt.nan, np.inf,
-00018210: 2033 5d29 0d0a 2020 2020 2020 2020 3e3e   3])..        >>
-00018220: 3e20 612e 6973 6e61 6e28 290d 0a20 2020  > a.isnan()..   
-00018230: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
-00018240: 2054 7275 652c 2020 5472 7565 2c20 4661   True,  True, Fa
-00018250: 6c73 652c 2046 616c 7365 5d29 0d0a 0d0a  lse, False])....
-00018260: 2020 2020 2020 2020 5769 7468 2060 6066          With ``f
-00018270: 616e 6379 203d 2054 7275 6560 603a 0d0a  ancy = True``:..
-00018280: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-00018290: 6973 6e61 6e28 6661 6e63 7920 3d20 5472  isnan(fancy = Tr
-000182a0: 7565 290d 0a20 2020 2020 2020 2046 6173  ue)..        Fas
-000182b0: 7441 7272 6179 285b 302c 2031 5d29 0d0a  tArray([0, 1])..
-000182c0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-000182d0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-000182e0: 2e5f 756e 6172 795f 6f70 284d 4154 485f  ._unary_op(MATH_
-000182f0: 4f50 4552 4154 494f 4e2e 4953 4e41 4e2c  OPERATION.ISNAN,
-00018300: 2066 616e 6379 3d66 616e 6379 290d 0a0d   fancy=fancy)...
-00018310: 0a20 2020 2064 6566 2069 736e 6f74 6e61  .    def isnotna
-00018320: 6e28 7365 6c66 2c20 6661 6e63 793d 4661  n(self, fancy=Fa
-00018330: 6c73 6529 3a0d 0a20 2020 2020 2020 2022  lse):..        "
-00018340: 2222 0d0a 2020 2020 2020 2020 5265 7475  ""..        Retu
-00018350: 726e 2061 2062 6f6f 6c65 616e 2061 7272  rn a boolean arr
-00018360: 6179 2074 6861 7427 7320 5472 7565 2066  ay that's True f
-00018370: 6f72 2065 6163 6820 656c 656d 656e 7420  or each element 
-00018380: 7468 6174 2773 206e 6f74 2061 204e 614e  that's not a NaN
-00018390: 2028 4e6f 7420 610d 0a20 2020 2020 2020   (Not a..       
-000183a0: 204e 756d 6265 7229 2c20 4661 6c73 6520   Number), False 
-000183b0: 6f74 6865 7277 6973 652e 0d0a 0d0a 2020  otherwise.....  
-000183c0: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
-000183d0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-000183e0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6661  ----..        fa
-000183f0: 6e63 7920 3a20 626f 6f6c 2c20 6465 6661  ncy : bool, defa
-00018400: 756c 7420 4661 6c73 650d 0a20 2020 2020  ult False..     
-00018410: 2020 2020 2020 2053 6574 2074 6f20 5472         Set to Tr
-00018420: 7565 2074 6f20 696e 7374 6561 6420 7265  ue to instead re
-00018430: 7475 726e 2074 6865 2069 6e64 6963 6573  turn the indices
-00018440: 206f 6620 7468 6520 5472 7565 2028 6e6f   of the True (no
-00018450: 6e2d 4e61 4e29 2076 616c 7565 732e 0d0a  n-NaN) values...
-00018460: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-00018470: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-00018480: 2d2d 0d0a 2020 2020 2020 2020 6046 6173  --..        `Fas
-00018490: 7441 7272 6179 600d 0a20 2020 2020 2020  tArray`..       
-000184a0: 2020 2020 2041 2060 4661 7374 4172 7261       A `FastArra
-000184b0: 7960 206f 6620 626f 6f6c 6561 6e73 206f  y` of booleans o
-000184c0: 7220 696e 6469 6365 732e 0d0a 0d0a 2020  r indices.....  
-000184d0: 2020 2020 2020 5365 6520 416c 736f 0d0a        See Also..
-000184e0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-000184f0: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-00018500: 7261 792e 6973 6e61 6e2c 2046 6173 7441  ray.isnan, FastA
-00018510: 7272 6179 2e6e 6f74 6e61 2c20 4661 7374  rray.notna, Fast
-00018520: 4172 7261 792e 6973 6e61 6e6f 727a 6572  Array.isnanorzer
-00018530: 6f2c 2072 6970 7461 626c 652e 6973 6e61  o, riptable.isna
-00018540: 6e2c 0d0a 2020 2020 2020 2020 7269 7074  n,..        ript
-00018550: 6162 6c65 2e69 736e 6f74 6e61 6e2c 2072  able.isnotnan, r
-00018560: 6970 7461 626c 652e 6973 6e61 6e6f 727a  iptable.isnanorz
-00018570: 6572 6f2c 2043 6174 6567 6f72 6963 616c  ero, Categorical
-00018580: 2e69 736e 616e 2c0d 0a20 2020 2020 2020  .isnan,..       
-00018590: 2043 6174 6567 6f72 6963 616c 2e69 736e   Categorical.isn
-000185a0: 6f74 6e61 6e2c 2043 6174 6567 6f72 6963  otnan, Categoric
-000185b0: 616c 2e6e 6f74 6e61 2c20 4461 7465 2e69  al.notna, Date.i
-000185c0: 736e 616e 2c20 4461 7465 2e69 736e 6f74  snan, Date.isnot
-000185d0: 6e61 6e2c 0d0a 2020 2020 2020 2020 4461  nan,..        Da
-000185e0: 7465 5469 6d65 4e61 6e6f 2e69 736e 616e  teTimeNano.isnan
-000185f0: 2c20 4461 7465 5469 6d65 4e61 6e6f 2e69  , DateTimeNano.i
-00018600: 736e 6f74 6e61 6e0d 0a20 2020 2020 2020  snotnan..       
-00018610: 2044 6174 6173 6574 2e6d 6173 6b5f 6f72   Dataset.mask_or
-00018620: 5f69 736e 616e 203a 0d0a 2020 2020 2020  _isnan :..      
-00018630: 2020 2020 2020 5265 7475 726e 2061 2062        Return a b
-00018640: 6f6f 6c65 616e 2061 7272 6179 2074 6861  oolean array tha
-00018650: 7427 7320 5472 7565 2066 6f72 2065 6163  t's True for eac
-00018660: 6820 6044 6174 6173 6574 6020 726f 7720  h `Dataset` row 
-00018670: 7468 6174 2063 6f6e 7461 696e 730d 0a20  that contains.. 
-00018680: 2020 2020 2020 2020 2020 2061 7420 6c65             at le
-00018690: 6173 7420 6f6e 6520 4e61 4e2e 0d0a 2020  ast one NaN...  
-000186a0: 2020 2020 2020 4461 7461 7365 742e 6d61        Dataset.ma
-000186b0: 736b 5f61 6e64 5f69 736e 616e 203a 0d0a  sk_and_isnan :..
-000186c0: 2020 2020 2020 2020 2020 2020 5265 7475              Retu
-000186d0: 726e 2061 2062 6f6f 6c65 616e 2061 7272  rn a boolean arr
-000186e0: 6179 2074 6861 7427 7320 5472 7565 2066  ay that's True f
-000186f0: 6f72 2065 6163 6820 616c 6c2d 4e61 4e20  or each all-NaN 
-00018700: 6044 6174 6173 6574 6020 726f 772e 0d0a  `Dataset` row...
-00018710: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
-00018720: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
-00018730: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
-00018740: 3e20 6120 3d20 7274 2e46 6173 7441 7272  > a = rt.FastArr
-00018750: 6179 285b 7274 2e6e 616e 2c20 6e70 2e69  ay([rt.nan, np.i
-00018760: 6e66 2c20 325d 290d 0a20 2020 2020 2020  nf, 2])..       
-00018770: 203e 3e3e 2061 2e69 736e 6f74 6e61 6e28   >>> a.isnotnan(
-00018780: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
-00018790: 7272 6179 285b 4661 6c73 652c 2020 5472  rray([False,  Tr
-000187a0: 7565 2c20 2054 7275 655d 290d 0a0d 0a20  ue,  True]).... 
-000187b0: 2020 2020 2020 2057 6974 6820 6060 6661         With ``fa
-000187c0: 6e63 7920 3d20 5472 7565 6060 3a0d 0a0d  ncy = True``:...
-000187d0: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
-000187e0: 736e 6f74 6e61 6e28 6661 6e63 7920 3d20  snotnan(fancy = 
-000187f0: 5472 7565 290d 0a20 2020 2020 2020 2046  True)..        F
-00018800: 6173 7441 7272 6179 285b 312c 2032 5d29  astArray([1, 2])
-00018810: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00018820: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00018830: 6c66 2e5f 756e 6172 795f 6f70 284d 4154  lf._unary_op(MAT
-00018840: 485f 4f50 4552 4154 494f 4e2e 4953 4e4f  H_OPERATION.ISNO
-00018850: 544e 414e 2c20 6661 6e63 793d 6661 6e63  TNAN, fancy=fanc
-00018860: 7929 0d0a 0d0a 2020 2020 6465 6620 6973  y)....    def is
-00018870: 6e61 6e6f 727a 6572 6f28 7365 6c66 2c20  nanorzero(self, 
-00018880: 6661 6e63 793d 4661 6c73 6529 3a0d 0a20  fancy=False):.. 
-00018890: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-000188a0: 2020 2020 5265 7475 726e 2061 2062 6f6f      Return a boo
-000188b0: 6c65 616e 2061 7272 6179 2074 6861 7427  lean array that'
-000188c0: 7320 5472 7565 2066 6f72 2065 6163 6820  s True for each 
-000188d0: 656c 656d 656e 7420 7468 6174 2773 2061  element that's a
-000188e0: 204e 614e 2028 4e6f 7420 6120 4e75 6d62   NaN (Not a Numb
-000188f0: 6572 290d 0a20 2020 2020 2020 206f 7220  er)..        or 
-00018900: 7a65 726f 2c20 4661 6c73 6520 6f74 6865  zero, False othe
-00018910: 7277 6973 652e 0d0a 0d0a 2020 2020 2020  rwise.....      
-00018920: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
-00018930: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-00018940: 0d0a 2020 2020 2020 2020 6661 6e63 7920  ..        fancy 
-00018950: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
-00018960: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
-00018970: 2020 2053 6574 2074 6f20 5472 7565 2074     Set to True t
-00018980: 6f20 696e 7374 6561 6420 7265 7475 726e  o instead return
-00018990: 2074 6865 2069 6e64 6963 6573 206f 6620   the indices of 
-000189a0: 7468 6520 5472 7565 2028 4e61 4e20 6f72  the True (NaN or
-000189b0: 207a 6572 6f29 2076 616c 7565 732e 0d0a   zero) values...
-000189c0: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-000189d0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-000189e0: 2d2d 0d0a 2020 2020 2020 2020 6046 6173  --..        `Fas
-000189f0: 7441 7272 6179 600d 0a20 2020 2020 2020  tArray`..       
-00018a00: 2020 2020 2041 2060 4661 7374 4172 7261       A `FastArra
-00018a10: 7960 206f 6620 626f 6f6c 6561 6e73 206f  y` of booleans o
-00018a20: 7220 696e 6469 6365 732e 0d0a 0d0a 2020  r indices.....  
-00018a30: 2020 2020 2020 5365 6520 416c 736f 0d0a        See Also..
-00018a40: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-00018a50: 0d0a 2020 2020 2020 2020 7269 7074 6162  ..        riptab
-00018a60: 6c65 2e69 736e 616e 6f72 7a65 726f 2c20  le.isnanorzero, 
-00018a70: 7269 7074 6162 6c65 2e69 736e 616e 2c20  riptable.isnan, 
-00018a80: 7269 7074 6162 6c65 2e69 736e 6f74 6e61  riptable.isnotna
-00018a90: 6e2c 2046 6173 7441 7272 6179 2e69 736e  n, FastArray.isn
-00018aa0: 616e 2c0d 0a20 2020 2020 2020 2046 6173  an,..        Fas
-00018ab0: 7441 7272 6179 2e69 736e 6f74 6e61 6e2c  tArray.isnotnan,
-00018ac0: 2043 6174 6567 6f72 6963 616c 2e69 736e   Categorical.isn
-00018ad0: 616e 2c20 4361 7465 676f 7269 6361 6c2e  an, Categorical.
-00018ae0: 6973 6e6f 746e 616e 2c20 4461 7465 2e69  isnotnan, Date.i
-00018af0: 736e 616e 2c0d 0a20 2020 2020 2020 2044  snan,..        D
-00018b00: 6174 652e 6973 6e6f 746e 616e 2c20 4461  ate.isnotnan, Da
-00018b10: 7465 5469 6d65 4e61 6e6f 2e69 736e 616e  teTimeNano.isnan
-00018b20: 2c20 4461 7465 5469 6d65 4e61 6e6f 2e69  , DateTimeNano.i
-00018b30: 736e 6f74 6e61 6e0d 0a20 2020 2020 2020  snotnan..       
-00018b40: 2044 6174 6173 6574 2e6d 6173 6b5f 6f72   Dataset.mask_or
-00018b50: 5f69 736e 616e 203a 0d0a 2020 2020 2020  _isnan :..      
-00018b60: 2020 2020 2020 5265 7475 726e 2061 2062        Return a b
-00018b70: 6f6f 6c65 616e 2061 7272 6179 2074 6861  oolean array tha
-00018b80: 7427 7320 5472 7565 2066 6f72 2065 6163  t's True for eac
-00018b90: 6820 6044 6174 6173 6574 6020 726f 7720  h `Dataset` row 
-00018ba0: 7468 6174 2063 6f6e 7461 696e 730d 0a20  that contains.. 
-00018bb0: 2020 2020 2020 2020 2020 2061 7420 6c65             at le
-00018bc0: 6173 7420 6f6e 6520 4e61 4e2e 0d0a 2020  ast one NaN...  
-00018bd0: 2020 2020 2020 4461 7461 7365 742e 6d61        Dataset.ma
-00018be0: 736b 5f61 6e64 5f69 736e 616e 203a 0d0a  sk_and_isnan :..
-00018bf0: 2020 2020 2020 2020 2020 2020 5265 7475              Retu
-00018c00: 726e 2061 2062 6f6f 6c65 616e 2061 7272  rn a boolean arr
-00018c10: 6179 2074 6861 7427 7320 5472 7565 2066  ay that's True f
-00018c20: 6f72 2065 6163 6820 616c 6c2d 4e61 4e20  or each all-NaN 
-00018c30: 6044 6174 6173 6574 6020 726f 772e 0d0a  `Dataset` row...
-00018c40: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
-00018c50: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
-00018c60: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
-00018c70: 3e20 6120 3d20 7274 2e46 6173 7441 7272  > a = rt.FastArr
-00018c80: 6179 285b 302c 2072 742e 6e61 6e2c 206e  ay([0, rt.nan, n
-00018c90: 702e 696e 662c 2033 5d29 0d0a 2020 2020  p.inf, 3])..    
-00018ca0: 2020 2020 3e3e 3e20 612e 6973 6e61 6e6f      >>> a.isnano
-00018cb0: 727a 6572 6f28 290d 0a20 2020 2020 2020  rzero()..       
-00018cc0: 2046 6173 7441 7272 6179 285b 2054 7275   FastArray([ Tru
-00018cd0: 652c 2020 5472 7565 2c20 4661 6c73 652c  e,  True, False,
-00018ce0: 2046 616c 7365 5d29 0d0a 0d0a 2020 2020   False])....    
-00018cf0: 2020 2020 5769 7468 2060 6066 616e 6379      With ``fancy
-00018d00: 203d 2054 7275 6560 603a 0d0a 0d0a 2020   = True``:....  
-00018d10: 2020 2020 2020 3e3e 3e20 612e 6973 6e61        >>> a.isna
-00018d20: 6e6f 727a 6572 6f28 6661 6e63 7920 3d20  norzero(fancy = 
-00018d30: 5472 7565 290d 0a20 2020 2020 2020 2046  True)..        F
-00018d40: 6173 7441 7272 6179 285b 302c 2031 5d29  astArray([0, 1])
-00018d50: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00018d60: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00018d70: 6c66 2e5f 756e 6172 795f 6f70 284d 4154  lf._unary_op(MAT
-00018d80: 485f 4f50 4552 4154 494f 4e2e 4953 4e41  H_OPERATION.ISNA
-00018d90: 4e4f 525a 4552 4f2c 2066 616e 6379 3d66  NORZERO, fancy=f
-00018da0: 616e 6379 290d 0a0d 0a20 2020 2064 6566  ancy)....    def
-00018db0: 2069 7366 696e 6974 6528 7365 6c66 2c20   isfinite(self, 
-00018dc0: 6661 6e63 793d 4661 6c73 6529 3a0d 0a20  fancy=False):.. 
-00018dd0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00018de0: 2020 2020 5265 7475 726e 2061 2062 6f6f      Return a boo
-00018df0: 6c65 616e 2061 7272 6179 2074 6861 7427  lean array that'
-00018e00: 7320 5472 7565 2066 6f72 2065 6163 6820  s True for each 
-00018e10: 6669 6e69 7465 2060 4661 7374 4172 7261  finite `FastArra
-00018e20: 7960 2065 6c65 6d65 6e74 2c20 4661 6c73  y` element, Fals
-00018e30: 650d 0a20 2020 2020 2020 206f 7468 6572  e..        other
-00018e40: 7769 7365 2e0d 0a0d 0a20 2020 2020 2020  wise.....       
-00018e50: 2041 2076 616c 7565 2069 7320 636f 6e73   A value is cons
-00018e60: 6964 6572 6564 2074 6f20 6265 2066 696e  idered to be fin
-00018e70: 6974 6520 6966 2069 7427 7320 6e6f 7420  ite if it's not 
-00018e80: 706f 7369 7469 7665 206f 7220 6e65 6761  positive or nega
-00018e90: 7469 7665 2069 6e66 696e 6974 790d 0a20  tive infinity.. 
-00018ea0: 2020 2020 2020 206f 7220 6120 4e61 4e20         or a NaN 
-00018eb0: 284e 6f74 2061 204e 756d 6265 7229 2e0d  (Not a Number)..
-00018ec0: 0a0d 0a20 2020 2020 2020 2050 6172 616d  ...        Param
-00018ed0: 6574 6572 730d 0a20 2020 2020 2020 202d  eters..        -
-00018ee0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020  ---------..     
-00018ef0: 2020 2066 616e 6379 203a 2062 6f6f 6c2c     fancy : bool,
-00018f00: 2064 6566 6175 6c74 2046 616c 7365 0d0a   default False..
-00018f10: 2020 2020 2020 2020 2020 2020 5365 7420              Set 
-00018f20: 746f 2054 7275 6520 746f 2069 6e73 7465  to True to inste
-00018f30: 6164 2072 6574 7572 6e20 7468 6520 696e  ad return the in
-00018f40: 6469 6365 7320 6f66 2074 6865 2054 7275  dices of the Tru
-00018f50: 6520 2866 696e 6974 6529 2076 616c 7565  e (finite) value
-00018f60: 732e 0d0a 0d0a 2020 2020 2020 2020 5265  s.....        Re
-00018f70: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
-00018f80: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00018f90: 6046 6173 7441 7272 6179 600d 0a20 2020  `FastArray`..   
-00018fa0: 2020 2020 2020 2020 2041 6e20 6172 7261           An arra
-00018fb0: 7920 6f72 2062 6f6f 6c65 616e 7320 6f72  y or booleans or
-00018fc0: 2069 6e64 6963 6573 2e0d 0a0d 0a20 2020   indices.....   
-00018fd0: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
-00018fe0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-00018ff0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-00019000: 6179 2e69 736e 6f74 6669 6e69 7465 2c20  ay.isnotfinite, 
-00019010: 7269 7074 6162 6c65 2e69 7366 696e 6974  riptable.isfinit
-00019020: 652c 2072 6970 7461 626c 652e 6973 6e6f  e, riptable.isno
-00019030: 7466 696e 6974 652c 2072 6970 7461 626c  tfinite, riptabl
-00019040: 652e 6973 696e 662c 0d0a 2020 2020 2020  e.isinf,..      
-00019050: 2020 7269 7074 6162 6c65 2e69 736e 6f74    riptable.isnot
-00019060: 696e 662c 2046 6173 7441 7272 6179 2e69  inf, FastArray.i
-00019070: 7369 6e66 2c20 4661 7374 4172 7261 792e  sinf, FastArray.
-00019080: 6973 6e6f 7469 6e66 0d0a 2020 2020 2020  isnotinf..      
-00019090: 2020 4461 7461 7365 742e 6d61 736b 5f6f    Dataset.mask_o
-000190a0: 725f 6973 6669 6e69 7465 203a 0d0a 2020  r_isfinite :..  
-000190b0: 2020 2020 2020 2020 2020 5265 7475 726e            Return
-000190c0: 2061 2062 6f6f 6c65 616e 2061 7272 6179   a boolean array
-000190d0: 2074 6861 7427 7320 5472 7565 2066 6f72   that's True for
-000190e0: 2065 6163 6820 6044 6174 6173 6574 6020   each `Dataset` 
-000190f0: 726f 7720 7468 6174 2068 6173 2061 7420  row that has at 
-00019100: 6c65 6173 740d 0a20 2020 2020 2020 2020  least..         
-00019110: 2020 206f 6e65 2066 696e 6974 6520 7661     one finite va
-00019120: 6c75 652e 0d0a 2020 2020 2020 2020 4461  lue...        Da
-00019130: 7461 7365 742e 6d61 736b 5f61 6e64 5f69  taset.mask_and_i
-00019140: 7366 696e 6974 6520 3a0d 0a20 2020 2020  sfinite :..     
-00019150: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
-00019160: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
-00019170: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
-00019180: 6368 2060 4461 7461 7365 7460 2072 6f77  ch `Dataset` row
-00019190: 2074 6861 7420 636f 6e74 6169 6e73 2061   that contains a
-000191a0: 6c6c 0d0a 2020 2020 2020 2020 2020 2020  ll..            
-000191b0: 6669 6e69 7465 2076 616c 7565 732e 0d0a  finite values...
-000191c0: 2020 2020 2020 2020 4461 7461 7365 742e          Dataset.
-000191d0: 6d61 736b 5f6f 725f 6973 696e 6620 3a0d  mask_or_isinf :.
-000191e0: 0a20 2020 2020 2020 2020 2020 2052 6574  .            Ret
-000191f0: 7572 6e20 6120 626f 6f6c 6561 6e20 6172  urn a boolean ar
-00019200: 7261 7920 7468 6174 2773 2054 7275 6520  ray that's True 
-00019210: 666f 7220 6561 6368 2060 4461 7461 7365  for each `Datase
-00019220: 7460 2072 6f77 2074 6861 7420 6861 7320  t` row that has 
-00019230: 6174 206c 6561 7374 0d0a 2020 2020 2020  at least..      
-00019240: 2020 2020 2020 6f6e 6520 7661 6c75 6520        one value 
-00019250: 7468 6174 2773 2070 6f73 6974 6976 6520  that's positive 
-00019260: 6f72 206e 6567 6174 6976 6520 696e 6669  or negative infi
-00019270: 6e69 7479 2e0d 0a20 2020 2020 2020 2044  nity...        D
-00019280: 6174 6173 6574 2e6d 6173 6b5f 616e 645f  ataset.mask_and_
-00019290: 6973 696e 6620 3a0d 0a20 2020 2020 2020  isinf :..       
-000192a0: 2020 2020 2052 6574 7572 6e20 6120 626f       Return a bo
-000192b0: 6f6c 6561 6e20 6172 7261 7920 7468 6174  olean array that
-000192c0: 2773 2054 7275 6520 666f 7220 6561 6368  's True for each
-000192d0: 2060 4461 7461 7365 7460 2072 6f77 2074   `Dataset` row t
-000192e0: 6861 7420 636f 6e74 6169 6e73 2061 6c6c  hat contains all
-000192f0: 0d0a 2020 2020 2020 2020 2020 2020 696e  ..            in
-00019300: 6669 6e69 7465 2076 616c 7565 732e 0d0a  finite values...
-00019310: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
-00019320: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
-00019330: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
-00019340: 3e20 6120 3d20 7274 2e46 6173 7441 7272  > a = rt.FastArr
-00019350: 6179 285b 6e70 2e69 6e66 2c20 6e70 2e4e  ay([np.inf, np.N
-00019360: 494e 462c 2072 742e 6e61 6e2c 2030 5d29  INF, rt.nan, 0])
-00019370: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-00019380: 6973 6669 6e69 7465 2829 0d0a 2020 2020  isfinite()..    
-00019390: 2020 2020 4661 7374 4172 7261 7928 5b46      FastArray([F
-000193a0: 616c 7365 2c20 4661 6c73 652c 2046 616c  alse, False, Fal
-000193b0: 7365 2c20 2054 7275 655d 290d 0a0d 0a20  se,  True]).... 
-000193c0: 2020 2020 2020 2057 6974 6820 6060 6661         With ``fa
-000193d0: 6e63 7920 3d20 5472 7565 6060 3a0d 0a0d  ncy = True``:...
-000193e0: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
-000193f0: 7366 696e 6974 6528 6661 6e63 7920 3d20  sfinite(fancy = 
-00019400: 5472 7565 290d 0a20 2020 2020 2020 2046  True)..        F
-00019410: 6173 7441 7272 6179 285b 335d 290d 0a20  astArray([3]).. 
-00019420: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00019430: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00019440: 5f75 6e61 7279 5f6f 7028 4d41 5448 5f4f  _unary_op(MATH_O
-00019450: 5045 5241 5449 4f4e 2e49 5346 494e 4954  PERATION.ISFINIT
-00019460: 452c 2066 616e 6379 3d66 616e 6379 290d  E, fancy=fancy).
-00019470: 0a0d 0a20 2020 2064 6566 2069 736e 6f74  ...    def isnot
-00019480: 6669 6e69 7465 2873 656c 662c 2066 616e  finite(self, fan
-00019490: 6379 3d46 616c 7365 293a 0d0a 2020 2020  cy=False):..    
-000194a0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-000194b0: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
-000194c0: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
-000194d0: 7275 6520 666f 7220 6561 6368 206e 6f6e  rue for each non
-000194e0: 2d66 696e 6974 6520 6046 6173 7441 7272  -finite `FastArr
-000194f0: 6179 6020 656c 656d 656e 742c 0d0a 2020  ay` element,..  
-00019500: 2020 2020 2020 4661 6c73 6520 6f74 6865        False othe
-00019510: 7277 6973 652e 0d0a 0d0a 2020 2020 2020  rwise.....      
-00019520: 2020 4120 7661 6c75 6520 6973 2063 6f6e    A value is con
-00019530: 7369 6465 7265 6420 746f 2062 6520 6669  sidered to be fi
-00019540: 6e69 7465 2069 6620 6974 2773 206e 6f74  nite if it's not
-00019550: 2070 6f73 6974 6976 6520 6f72 206e 6567   positive or neg
-00019560: 6174 6976 6520 696e 6669 6e69 7479 0d0a  ative infinity..
-00019570: 2020 2020 2020 2020 6f72 2061 204e 614e          or a NaN
-00019580: 2028 4e6f 7420 6120 4e75 6d62 6572 292e   (Not a Number).
-00019590: 0d0a 0d0a 2020 2020 2020 2020 5061 7261  ....        Para
-000195a0: 6d65 7465 7273 0d0a 2020 2020 2020 2020  meters..        
-000195b0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-000195c0: 2020 2020 6661 6e63 7920 3a20 626f 6f6c      fancy : bool
-000195d0: 2c20 6465 6661 756c 7420 4661 6c73 650d  , default False.
-000195e0: 0a20 2020 2020 2020 2020 2020 2053 6574  .            Set
-000195f0: 2074 6f20 5472 7565 2074 6f20 696e 7374   to True to inst
-00019600: 6561 6420 7265 7475 726e 2074 6865 2069  ead return the i
-00019610: 6e64 6963 6573 206f 6620 7468 6520 5472  ndices of the Tr
-00019620: 7565 2028 6e6f 6e2d 6669 6e69 7465 2920  ue (non-finite) 
-00019630: 7661 6c75 6573 2e0d 0a0d 0a20 2020 2020  values.....     
-00019640: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
-00019650: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
-00019660: 2020 2020 2060 4661 7374 4172 7261 7960       `FastArray`
-00019670: 0d0a 2020 2020 2020 2020 2020 2020 416e  ..            An
-00019680: 2061 7272 6179 206f 7220 626f 6f6c 6561   array or boolea
-00019690: 6e73 206f 7220 696e 6469 6365 732e 0d0a  ns or indices...
-000196a0: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
-000196b0: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
-000196c0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4661  ----..        Fa
-000196d0: 7374 4172 7261 792e 6973 6669 6e69 7465  stArray.isfinite
-000196e0: 2c20 7269 7074 6162 6c65 2e69 7366 696e  , riptable.isfin
-000196f0: 6974 652c 2072 6970 7461 626c 652e 6973  ite, riptable.is
-00019700: 6e6f 7466 696e 6974 652c 2072 6970 7461  notfinite, ripta
-00019710: 626c 652e 6973 696e 662c 0d0a 2020 2020  ble.isinf,..    
-00019720: 2020 2020 7269 7074 6162 6c65 2e69 736e      riptable.isn
-00019730: 6f74 696e 662c 2046 6173 7441 7272 6179  otinf, FastArray
-00019740: 2e69 7369 6e66 2c20 4661 7374 4172 7261  .isinf, FastArra
-00019750: 792e 6973 6e6f 7469 6e66 0d0a 2020 2020  y.isnotinf..    
-00019760: 2020 2020 4461 7461 7365 742e 6d61 736b      Dataset.mask
-00019770: 5f6f 725f 6973 6669 6e69 7465 203a 0d0a  _or_isfinite :..
-00019780: 2020 2020 2020 2020 2020 2020 5265 7475              Retu
-00019790: 726e 2061 2062 6f6f 6c65 616e 2061 7272  rn a boolean arr
-000197a0: 6179 2074 6861 7427 7320 5472 7565 2066  ay that's True f
-000197b0: 6f72 2065 6163 6820 6044 6174 6173 6574  or each `Dataset
-000197c0: 6020 726f 7720 7468 6174 2068 6173 2061  ` row that has a
-000197d0: 7420 6c65 6173 740d 0a20 2020 2020 2020  t least..       
-000197e0: 2020 2020 206f 6e65 2066 696e 6974 6520       one finite 
-000197f0: 7661 6c75 652e 0d0a 2020 2020 2020 2020  value...        
-00019800: 4461 7461 7365 742e 6d61 736b 5f61 6e64  Dataset.mask_and
-00019810: 5f69 7366 696e 6974 6520 3a0d 0a20 2020  _isfinite :..   
-00019820: 2020 2020 2020 2020 2052 6574 7572 6e20           Return 
-00019830: 6120 626f 6f6c 6561 6e20 6172 7261 7920  a boolean array 
-00019840: 7468 6174 2773 2054 7275 6520 666f 7220  that's True for 
-00019850: 6561 6368 2060 4461 7461 7365 7460 2072  each `Dataset` r
-00019860: 6f77 2074 6861 7420 636f 6e74 6169 6e73  ow that contains
-00019870: 2061 6c6c 0d0a 2020 2020 2020 2020 2020   all..          
-00019880: 2020 6669 6e69 7465 2076 616c 7565 732e    finite values.
-00019890: 0d0a 2020 2020 2020 2020 4461 7461 7365  ..        Datase
-000198a0: 742e 6d61 736b 5f6f 725f 6973 696e 6620  t.mask_or_isinf 
-000198b0: 3a0d 0a20 2020 2020 2020 2020 2020 2052  :..            R
-000198c0: 6574 7572 6e20 6120 626f 6f6c 6561 6e20  eturn a boolean 
-000198d0: 6172 7261 7920 7468 6174 2773 2054 7275  array that's Tru
-000198e0: 6520 666f 7220 6561 6368 2060 4461 7461  e for each `Data
-000198f0: 7365 7460 2072 6f77 2074 6861 7420 6861  set` row that ha
-00019900: 7320 6174 206c 6561 7374 0d0a 2020 2020  s at least..    
-00019910: 2020 2020 2020 2020 6f6e 6520 7661 6c75          one valu
-00019920: 6520 7468 6174 2773 2070 6f73 6974 6976  e that's positiv
-00019930: 6520 6f72 206e 6567 6174 6976 6520 696e  e or negative in
-00019940: 6669 6e69 7479 2e0d 0a20 2020 2020 2020  finity...       
-00019950: 2044 6174 6173 6574 2e6d 6173 6b5f 616e   Dataset.mask_an
-00019960: 645f 6973 696e 6620 3a0d 0a20 2020 2020  d_isinf :..     
-00019970: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
-00019980: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
-00019990: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
-000199a0: 6368 2060 4461 7461 7365 7460 2072 6f77  ch `Dataset` row
-000199b0: 2074 6861 7420 636f 6e74 6169 6e73 2061   that contains a
-000199c0: 6c6c 0d0a 2020 2020 2020 2020 2020 2020  ll..            
-000199d0: 696e 6669 6e69 7465 2076 616c 7565 732e  infinite values.
-000199e0: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
-000199f0: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
-00019a00: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00019a10: 3e3e 3e20 6120 3d20 7274 2e46 6173 7441  >>> a = rt.FastA
-00019a20: 7272 6179 285b 6e70 2e69 6e66 2c20 6e70  rray([np.inf, np
-00019a30: 2e4e 494e 462c 2072 742e 6e61 6e2c 2030  .NINF, rt.nan, 0
-00019a40: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
-00019a50: 612e 6973 6e6f 7466 696e 6974 6528 290d  a.isnotfinite().
-00019a60: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-00019a70: 6179 285b 2054 7275 652c 2020 5472 7565  ay([ True,  True
-00019a80: 2c20 2054 7275 652c 2046 616c 7365 5d29  ,  True, False])
-00019a90: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
-00019aa0: 2060 6066 616e 6379 203d 2054 7275 6560   ``fancy = True`
-00019ab0: 603a 0d0a 0d0a 2020 2020 2020 2020 3e3e  `:....        >>
-00019ac0: 3e20 612e 6973 6e6f 7466 696e 6974 6528  > a.isnotfinite(
-00019ad0: 6661 6e63 7920 3d20 5472 7565 290d 0a20  fancy = True).. 
-00019ae0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-00019af0: 285b 302c 2031 2c20 325d 290d 0a20 2020  ([0, 1, 2])..   
-00019b00: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00019b10: 2020 7265 7475 726e 2073 656c 662e 5f75    return self._u
-00019b20: 6e61 7279 5f6f 7028 4d41 5448 5f4f 5045  nary_op(MATH_OPE
-00019b30: 5241 5449 4f4e 2e49 534e 4f54 4649 4e49  RATION.ISNOTFINI
-00019b40: 5445 2c20 6661 6e63 793d 6661 6e63 7929  TE, fancy=fancy)
-00019b50: 0d0a 0d0a 2020 2020 6465 6620 6973 696e  ....    def isin
-00019b60: 6628 7365 6c66 2c20 6661 6e63 793d 4661  f(self, fancy=Fa
-00019b70: 6c73 6529 3a0d 0a20 2020 2020 2020 2022  lse):..        "
-00019b80: 2222 0d0a 2020 2020 2020 2020 5265 7475  ""..        Retu
-00019b90: 726e 2061 2062 6f6f 6c65 616e 2061 7272  rn a boolean arr
-00019ba0: 6179 2074 6861 7427 7320 5472 7565 2066  ay that's True f
-00019bb0: 6f72 2065 6163 6820 6046 6173 7441 7272  or each `FastArr
-00019bc0: 6179 6020 656c 656d 656e 7420 7468 6174  ay` element that
-00019bd0: 2773 2070 6f73 6974 6976 650d 0a20 2020  's positive..   
-00019be0: 2020 2020 206f 7220 6e65 6761 7469 7665       or negative
-00019bf0: 2069 6e66 696e 6974 792c 2046 616c 7365   infinity, False
-00019c00: 206f 7468 6572 7769 7365 2e0d 0a0d 0a20   otherwise..... 
-00019c10: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
-00019c20: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-00019c30: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2066  -----..        f
-00019c40: 616e 6379 203a 2062 6f6f 6c2c 2064 6566  ancy : bool, def
-00019c50: 6175 6c74 2046 616c 7365 0d0a 2020 2020  ault False..    
-00019c60: 2020 2020 2020 2020 5365 7420 746f 2054          Set to T
-00019c70: 7275 6520 746f 2069 6e73 7465 6164 2072  rue to instead r
-00019c80: 6574 7572 6e20 7468 6520 696e 6469 6365  eturn the indice
-00019c90: 7320 6f66 2074 6865 2054 7275 6520 2869  s of the True (i
-00019ca0: 6e66 696e 6974 6529 2076 616c 7565 732e  nfinite) values.
-00019cb0: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
-00019cc0: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
-00019cd0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6046  ----..        `F
-00019ce0: 6173 7441 7272 6179 600d 0a20 2020 2020  astArray`..     
-00019cf0: 2020 2020 2020 2041 6e20 6172 7261 7920         An array 
-00019d00: 6f72 2062 6f6f 6c65 616e 7320 6f72 2069  or booleans or i
-00019d10: 6e64 6963 6573 2e0d 0a0d 0a20 2020 2020  ndices.....     
-00019d20: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
-00019d30: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
-00019d40: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-00019d50: 2e69 736e 6f74 696e 662c 2046 6173 7441  .isnotinf, FastA
-00019d60: 7272 6179 2e69 7366 696e 6974 652c 2046  rray.isfinite, F
-00019d70: 6173 7441 7272 6179 2e69 736e 6f74 6669  astArray.isnotfi
-00019d80: 6e69 7465 2c0d 0a20 2020 2020 2020 2072  nite,..        r
-00019d90: 6970 7461 626c 652e 6973 696e 662c 2072  iptable.isinf, r
-00019da0: 6970 7461 626c 652e 6973 6e6f 7469 6e66  iptable.isnotinf
-00019db0: 2c20 7269 7074 6162 6c65 2e69 7366 696e  , riptable.isfin
-00019dc0: 6974 652c 2072 6970 7461 626c 652e 6973  ite, riptable.is
-00019dd0: 6e6f 7466 696e 6974 650d 0a20 2020 2020  notfinite..     
-00019de0: 2020 2044 6174 6173 6574 2e6d 6173 6b5f     Dataset.mask_
-00019df0: 6f72 5f69 7366 696e 6974 6520 3a0d 0a20  or_isfinite :.. 
-00019e00: 2020 2020 2020 2020 2020 2052 6574 7572             Retur
-00019e10: 6e20 6120 626f 6f6c 6561 6e20 6172 7261  n a boolean arra
-00019e20: 7920 7468 6174 2773 2054 7275 6520 666f  y that's True fo
-00019e30: 7220 6561 6368 2060 4461 7461 7365 7460  r each `Dataset`
-00019e40: 2072 6f77 2074 6861 7420 6861 7320 6174   row that has at
-00019e50: 206c 6561 7374 0d0a 2020 2020 2020 2020   least..        
-00019e60: 2020 2020 6f6e 6520 6669 6e69 7465 2076      one finite v
-00019e70: 616c 7565 2e0d 0a20 2020 2020 2020 2044  alue...        D
-00019e80: 6174 6173 6574 2e6d 6173 6b5f 616e 645f  ataset.mask_and_
-00019e90: 6973 6669 6e69 7465 203a 0d0a 2020 2020  isfinite :..    
-00019ea0: 2020 2020 2020 2020 5265 7475 726e 2061          Return a
-00019eb0: 2062 6f6f 6c65 616e 2061 7272 6179 2074   boolean array t
-00019ec0: 6861 7427 7320 5472 7565 2066 6f72 2065  hat's True for e
-00019ed0: 6163 6820 6044 6174 6173 6574 6020 726f  ach `Dataset` ro
-00019ee0: 7720 7468 6174 2063 6f6e 7461 696e 7320  w that contains 
-00019ef0: 616c 6c0d 0a20 2020 2020 2020 2020 2020  all..           
-00019f00: 2066 696e 6974 6520 7661 6c75 6573 2e0d   finite values..
-00019f10: 0a20 2020 2020 2020 2044 6174 6173 6574  .        Dataset
-00019f20: 2e6d 6173 6b5f 6f72 5f69 7369 6e66 203a  .mask_or_isinf :
-00019f30: 0d0a 2020 2020 2020 2020 2020 2020 5265  ..            Re
-00019f40: 7475 726e 2061 2062 6f6f 6c65 616e 2061  turn a boolean a
-00019f50: 7272 6179 2074 6861 7427 7320 5472 7565  rray that's True
-00019f60: 2066 6f72 2065 6163 6820 6044 6174 6173   for each `Datas
-00019f70: 6574 6020 726f 7720 7468 6174 2068 6173  et` row that has
-00019f80: 2061 7420 6c65 6173 740d 0a20 2020 2020   at least..     
-00019f90: 2020 2020 2020 206f 6e65 2076 616c 7565         one value
-00019fa0: 2074 6861 7427 7320 706f 7369 7469 7665   that's positive
-00019fb0: 206f 7220 6e65 6761 7469 7665 2069 6e66   or negative inf
-00019fc0: 696e 6974 792e 0d0a 2020 2020 2020 2020  inity...        
-00019fd0: 4461 7461 7365 742e 6d61 736b 5f61 6e64  Dataset.mask_and
-00019fe0: 5f69 7369 6e66 203a 0d0a 2020 2020 2020  _isinf :..      
-00019ff0: 2020 2020 2020 5265 7475 726e 2061 2062        Return a b
-0001a000: 6f6f 6c65 616e 2061 7272 6179 2074 6861  oolean array tha
-0001a010: 7427 7320 5472 7565 2066 6f72 2065 6163  t's True for eac
-0001a020: 6820 6044 6174 6173 6574 6020 726f 7720  h `Dataset` row 
-0001a030: 7468 6174 2063 6f6e 7461 696e 7320 616c  that contains al
-0001a040: 6c0d 0a20 2020 2020 2020 2020 2020 2069  l..            i
-0001a050: 6e66 696e 6974 6520 7661 6c75 6573 2e0d  nfinite values..
-0001a060: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
-0001a070: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
-0001a080: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 203e  -----..        >
-0001a090: 3e3e 2061 203d 2072 742e 4661 7374 4172  >> a = rt.FastAr
-0001a0a0: 7261 7928 5b6e 702e 696e 662c 206e 702e  ray([np.inf, np.
-0001a0b0: 4e49 4e46 2c20 7274 2e6e 616e 2c20 305d  NINF, rt.nan, 0]
-0001a0c0: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
-0001a0d0: 2e69 7369 6e66 2829 0d0a 2020 2020 2020  .isinf()..      
-0001a0e0: 2020 4661 7374 4172 7261 7928 5b20 5472    FastArray([ Tr
-0001a0f0: 7565 2c20 2054 7275 652c 2046 616c 7365  ue,  True, False
-0001a100: 2c20 4661 6c73 655d 290d 0a0d 0a20 2020  , False])....   
-0001a110: 2020 2020 2057 6974 6820 6060 6661 6e63       With ``fanc
-0001a120: 7920 3d20 5472 7565 6060 3a0d 0a0d 0a20  y = True``:.... 
-0001a130: 2020 2020 2020 203e 3e3e 2061 2e69 7369         >>> a.isi
-0001a140: 6e66 2866 616e 6379 203d 2054 7275 6529  nf(fancy = True)
-0001a150: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-0001a160: 7261 7928 5b30 2c20 315d 290d 0a20 2020  ray([0, 1])..   
-0001a170: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-0001a180: 2020 7265 7475 726e 2073 656c 662e 5f75    return self._u
-0001a190: 6e61 7279 5f6f 7028 4d41 5448 5f4f 5045  nary_op(MATH_OPE
-0001a1a0: 5241 5449 4f4e 2e49 5349 4e46 2c20 6661  RATION.ISINF, fa
-0001a1b0: 6e63 793d 6661 6e63 7929 0d0a 0d0a 2020  ncy=fancy)....  
-0001a1c0: 2020 6465 6620 6973 6e6f 7469 6e66 2873    def isnotinf(s
-0001a1d0: 656c 662c 2066 616e 6379 3d46 616c 7365  elf, fancy=False
-0001a1e0: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
-0001a1f0: 0a20 2020 2020 2020 2052 6574 7572 6e20  .        Return 
-0001a200: 6120 626f 6f6c 6561 6e20 6172 7261 7920  a boolean array 
-0001a210: 7468 6174 2773 2054 7275 6520 666f 7220  that's True for 
-0001a220: 6561 6368 2060 4661 7374 4172 7261 7960  each `FastArray`
-0001a230: 2065 6c65 6d65 6e74 2074 6861 7427 7320   element that's 
-0001a240: 6e6f 7420 706f 7369 7469 7665 0d0a 2020  not positive..  
-0001a250: 2020 2020 2020 6f72 206e 6567 6174 6976        or negativ
-0001a260: 6520 696e 6669 6e69 7479 2c20 4661 6c73  e infinity, Fals
-0001a270: 6520 6f74 6865 7277 6973 652e 0d0a 0d0a  e otherwise.....
-0001a280: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
-0001a290: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
-0001a2a0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0001a2b0: 6661 6e63 7920 3a20 626f 6f6c 2c20 6465  fancy : bool, de
-0001a2c0: 6661 756c 7420 4661 6c73 650d 0a20 2020  fault False..   
-0001a2d0: 2020 2020 2020 2020 2053 6574 2074 6f20           Set to 
-0001a2e0: 5472 7565 2074 6f20 696e 7374 6561 6420  True to instead 
-0001a2f0: 7265 7475 726e 2074 6865 2069 6e64 6963  return the indic
-0001a300: 6573 206f 6620 7468 6520 5472 7565 2028  es of the True (
-0001a310: 6e6f 6e2d 696e 6669 6e69 7465 2920 7661  non-infinite) va
-0001a320: 6c75 6573 2e0d 0a0d 0a20 2020 2020 2020  lues.....       
-0001a330: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
-0001a340: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
-0001a350: 2020 2060 4661 7374 4172 7261 7960 0d0a     `FastArray`..
-0001a360: 2020 2020 2020 2020 2020 2020 416e 2061              An a
-0001a370: 7272 6179 206f 7220 626f 6f6c 6561 6e73  rray or booleans
-0001a380: 206f 7220 696e 6469 6365 732e 0d0a 0d0a   or indices.....
-0001a390: 2020 2020 2020 2020 5365 6520 416c 736f          See Also
-0001a3a0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-0001a3b0: 2d2d 0d0a 2020 2020 2020 2020 4661 7374  --..        Fast
-0001a3c0: 4172 7261 792e 6973 696e 662c 2072 6970  Array.isinf, rip
-0001a3d0: 7461 626c 652e 6973 6e6f 7469 6e66 2c20  table.isnotinf, 
-0001a3e0: 7269 7074 6162 6c65 2e69 7369 6e66 2c20  riptable.isinf, 
-0001a3f0: 7269 7074 6162 6c65 2e69 7366 696e 6974  riptable.isfinit
-0001a400: 652c 0d0a 2020 2020 2020 2020 7269 7074  e,..        ript
-0001a410: 6162 6c65 2e69 736e 6f74 6669 6e69 7465  able.isnotfinite
-0001a420: 2c20 4661 7374 4172 7261 792e 6973 6669  , FastArray.isfi
-0001a430: 6e69 7465 2c20 4661 7374 4172 7261 792e  nite, FastArray.
-0001a440: 6973 6e6f 7466 696e 6974 650d 0a20 2020  isnotfinite..   
-0001a450: 2020 2020 2044 6174 6173 6574 2e6d 6173       Dataset.mas
-0001a460: 6b5f 6f72 5f69 7366 696e 6974 6520 3a0d  k_or_isfinite :.
-0001a470: 0a20 2020 2020 2020 2020 2020 2052 6574  .            Ret
-0001a480: 7572 6e20 6120 626f 6f6c 6561 6e20 6172  urn a boolean ar
-0001a490: 7261 7920 7468 6174 2773 2054 7275 6520  ray that's True 
-0001a4a0: 666f 7220 6561 6368 2060 4461 7461 7365  for each `Datase
-0001a4b0: 7460 2072 6f77 2074 6861 7420 6861 7320  t` row that has 
-0001a4c0: 6174 206c 6561 7374 0d0a 2020 2020 2020  at least..      
-0001a4d0: 2020 2020 2020 6f6e 6520 6669 6e69 7465        one finite
-0001a4e0: 2076 616c 7565 2e0d 0a20 2020 2020 2020   value...       
-0001a4f0: 2044 6174 6173 6574 2e6d 6173 6b5f 616e   Dataset.mask_an
-0001a500: 645f 6973 6669 6e69 7465 203a 0d0a 2020  d_isfinite :..  
-0001a510: 2020 2020 2020 2020 2020 5265 7475 726e            Return
-0001a520: 2061 2062 6f6f 6c65 616e 2061 7272 6179   a boolean array
-0001a530: 2074 6861 7427 7320 5472 7565 2066 6f72   that's True for
-0001a540: 2065 6163 6820 6044 6174 6173 6574 6020   each `Dataset` 
-0001a550: 726f 7720 7468 6174 2063 6f6e 7461 696e  row that contain
-0001a560: 7320 616c 6c0d 0a20 2020 2020 2020 2020  s all..         
-0001a570: 2020 2066 696e 6974 6520 7661 6c75 6573     finite values
-0001a580: 2e0d 0a20 2020 2020 2020 2044 6174 6173  ...        Datas
-0001a590: 6574 2e6d 6173 6b5f 6f72 5f69 7369 6e66  et.mask_or_isinf
-0001a5a0: 203a 0d0a 2020 2020 2020 2020 2020 2020   :..            
-0001a5b0: 5265 7475 726e 2061 2062 6f6f 6c65 616e  Return a boolean
-0001a5c0: 2061 7272 6179 2074 6861 7427 7320 5472   array that's Tr
-0001a5d0: 7565 2066 6f72 2065 6163 6820 6044 6174  ue for each `Dat
-0001a5e0: 6173 6574 6020 726f 7720 7468 6174 2068  aset` row that h
-0001a5f0: 6173 2061 7420 6c65 6173 740d 0a20 2020  as at least..   
-0001a600: 2020 2020 2020 2020 206f 6e65 2076 616c           one val
-0001a610: 7565 2074 6861 7427 7320 706f 7369 7469  ue that's positi
-0001a620: 7665 206f 7220 6e65 6761 7469 7665 2069  ve or negative i
-0001a630: 6e66 696e 6974 792e 0d0a 2020 2020 2020  nfinity...      
-0001a640: 2020 4461 7461 7365 742e 6d61 736b 5f61    Dataset.mask_a
-0001a650: 6e64 5f69 7369 6e66 203a 0d0a 2020 2020  nd_isinf :..    
-0001a660: 2020 2020 2020 2020 5265 7475 726e 2061          Return a
-0001a670: 2062 6f6f 6c65 616e 2061 7272 6179 2074   boolean array t
-0001a680: 6861 7427 7320 5472 7565 2066 6f72 2065  hat's True for e
-0001a690: 6163 6820 6044 6174 6173 6574 6020 726f  ach `Dataset` ro
-0001a6a0: 7720 7468 6174 2063 6f6e 7461 696e 7320  w that contains 
-0001a6b0: 616c 6c0d 0a20 2020 2020 2020 2020 2020  all..           
-0001a6c0: 2069 6e66 696e 6974 6520 7661 6c75 6573   infinite values
-0001a6d0: 2e0d 0a0d 0a20 2020 2020 2020 2045 7861  .....        Exa
-0001a6e0: 6d70 6c65 730d 0a20 2020 2020 2020 202d  mples..        -
-0001a6f0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-0001a700: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
-0001a710: 4172 7261 7928 5b6e 702e 696e 662c 206e  Array([np.inf, n
-0001a720: 702e 4e49 4e46 2c20 7274 2e6e 616e 2c20  p.NINF, rt.nan, 
-0001a730: 305d 290d 0a20 2020 2020 2020 203e 3e3e  0])..        >>>
-0001a740: 2061 2e69 736e 6f74 696e 6628 290d 0a20   a.isnotinf().. 
-0001a750: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-0001a760: 285b 4661 6c73 652c 2046 616c 7365 2c20  ([False, False, 
-0001a770: 2054 7275 652c 2020 5472 7565 5d29 0d0a   True,  True])..
-0001a780: 0d0a 2020 2020 2020 2020 5769 7468 2060  ..        With `
-0001a790: 6066 616e 6379 203d 2054 7275 6560 603a  `fancy = True``:
-0001a7a0: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
-0001a7b0: 612e 6973 6e6f 7469 6e66 2866 616e 6379  a.isnotinf(fancy
-0001a7c0: 203d 2054 7275 6529 0d0a 2020 2020 2020   = True)..      
-0001a7d0: 2020 4661 7374 4172 7261 7928 5b32 2c20    FastArray([2, 
-0001a7e0: 335d 290d 0a20 2020 2020 2020 2022 2222  3])..        """
-0001a7f0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-0001a800: 2073 656c 662e 5f75 6e61 7279 5f6f 7028   self._unary_op(
-0001a810: 4d41 5448 5f4f 5045 5241 5449 4f4e 2e49  MATH_OPERATION.I
-0001a820: 534e 4f54 494e 462c 2066 616e 6379 3d66  SNOTINF, fancy=f
-0001a830: 616e 6379 290d 0a0d 0a20 2020 2023 2323  ancy)....    ###
-0001a840: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0001a850: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0001a860: 2323 2323 2323 2323 2323 0d0a 2020 2020  ##########..    
-0001a870: 2320 5265 6475 6365 2073 6563 7469 6f6e  # Reduce section
-0001a880: 0d0a 2020 2020 2323 2323 2323 2323 2323  ..    ##########
+00017cd0: 2323 2323 2323 2323 2323 2323 230d 0a20  #############.. 
+00017ce0: 2020 2023 2042 6f6f 6c65 616e 2073 6563     # Boolean sec
+00017cf0: 7469 6f6e 0d0a 2020 2020 2323 2323 2323  tion..    ######
+00017d00: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00017d10: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00017d20: 2323 2323 2323 230d 0a20 2020 2064 6566  #######..    def
+00017d30: 2069 736e 6f72 6d61 6c28 7365 6c66 2c20   isnormal(self, 
+00017d40: 6661 6e63 793d 4661 6c73 6529 3a0d 0a20  fancy=False):.. 
+00017d50: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00017d60: 6c66 2e5f 756e 6172 795f 6f70 284d 4154  lf._unary_op(MAT
+00017d70: 485f 4f50 4552 4154 494f 4e2e 4953 4e4f  H_OPERATION.ISNO
+00017d80: 524d 414c 2c20 6661 6e63 793d 6661 6e63  RMAL, fancy=fanc
+00017d90: 7929 0d0a 0d0a 2020 2020 6465 6620 6973  y)....    def is
+00017da0: 6e6f 746e 6f72 6d61 6c28 7365 6c66 2c20  notnormal(self, 
+00017db0: 6661 6e63 793d 4661 6c73 6529 3a0d 0a20  fancy=False):.. 
+00017dc0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00017dd0: 6c66 2e5f 756e 6172 795f 6f70 284d 4154  lf._unary_op(MAT
+00017de0: 485f 4f50 4552 4154 494f 4e2e 4953 4e4f  H_OPERATION.ISNO
+00017df0: 544e 4f52 4d41 4c2c 2066 616e 6379 3d66  TNORMAL, fancy=f
+00017e00: 616e 6379 290d 0a0d 0a20 2020 2064 6566  ancy)....    def
+00017e10: 2069 736e 616e 2873 656c 662c 2066 616e   isnan(self, fan
+00017e20: 6379 3d46 616c 7365 293a 0d0a 2020 2020  cy=False):..    
+00017e30: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00017e40: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
+00017e50: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
+00017e60: 7275 6520 666f 7220 6561 6368 2065 6c65  rue for each ele
+00017e70: 6d65 6e74 2074 6861 7427 7320 6120 4e61  ment that's a Na
+00017e80: 4e20 284e 6f74 2061 204e 756d 6265 7229  N (Not a Number)
+00017e90: 2c0d 0a20 2020 2020 2020 2046 616c 7365  ,..        False
+00017ea0: 206f 7468 6572 7769 7365 2e0d 0a0d 0a20   otherwise..... 
+00017eb0: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
+00017ec0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00017ed0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2066  -----..        f
+00017ee0: 616e 6379 203a 2062 6f6f 6c2c 2064 6566  ancy : bool, def
+00017ef0: 6175 6c74 2046 616c 7365 0d0a 2020 2020  ault False..    
+00017f00: 2020 2020 2020 2020 5365 7420 746f 2054          Set to T
+00017f10: 7275 6520 746f 2069 6e73 7465 6164 2072  rue to instead r
+00017f20: 6574 7572 6e20 7468 6520 696e 6469 6365  eturn the indice
+00017f30: 7320 6f66 2074 6865 2054 7275 6520 284e  s of the True (N
+00017f40: 614e 2920 7661 6c75 6573 2e0d 0a0d 0a20  aN) values..... 
+00017f50: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+00017f60: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+00017f70: 0a20 2020 2020 2020 2060 4661 7374 4172  .        `FastAr
+00017f80: 7261 7960 0d0a 2020 2020 2020 2020 2020  ray`..          
+00017f90: 2020 4120 6046 6173 7441 7272 6179 6020    A `FastArray` 
+00017fa0: 6f66 2062 6f6f 6c65 616e 7320 6f72 2069  of booleans or i
+00017fb0: 6e64 6963 6573 2e0d 0a0d 0a20 2020 2020  ndices.....     
+00017fc0: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
+00017fd0: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+00017fe0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00017ff0: 2e69 736e 6f74 6e61 6e2c 2046 6173 7441  .isnotnan, FastA
+00018000: 7272 6179 2e6e 6f74 6e61 2c20 4661 7374  rray.notna, Fast
+00018010: 4172 7261 792e 6973 6e61 6e6f 727a 6572  Array.isnanorzer
+00018020: 6f2c 2072 6970 7461 626c 652e 6973 6e61  o, riptable.isna
+00018030: 6e2c 0d0a 2020 2020 2020 2020 7269 7074  n,..        ript
+00018040: 6162 6c65 2e69 736e 6f74 6e61 6e2c 2072  able.isnotnan, r
+00018050: 6970 7461 626c 652e 6973 6e61 6e6f 727a  iptable.isnanorz
+00018060: 6572 6f2c 2043 6174 6567 6f72 6963 616c  ero, Categorical
+00018070: 2e69 736e 616e 2c0d 0a20 2020 2020 2020  .isnan,..       
+00018080: 2043 6174 6567 6f72 6963 616c 2e69 736e   Categorical.isn
+00018090: 6f74 6e61 6e2c 2043 6174 6567 6f72 6963  otnan, Categoric
+000180a0: 616c 2e6e 6f74 6e61 2c20 4461 7465 2e69  al.notna, Date.i
+000180b0: 736e 616e 2c20 4461 7465 2e69 736e 6f74  snan, Date.isnot
+000180c0: 6e61 6e2c 0d0a 2020 2020 2020 2020 4461  nan,..        Da
+000180d0: 7465 5469 6d65 4e61 6e6f 2e69 736e 616e  teTimeNano.isnan
+000180e0: 2c20 4461 7465 5469 6d65 4e61 6e6f 2e69  , DateTimeNano.i
+000180f0: 736e 6f74 6e61 6e0d 0a20 2020 2020 2020  snotnan..       
+00018100: 2044 6174 6173 6574 2e6d 6173 6b5f 6f72   Dataset.mask_or
+00018110: 5f69 736e 616e 203a 0d0a 2020 2020 2020  _isnan :..      
+00018120: 2020 2020 2020 5265 7475 726e 2061 2062        Return a b
+00018130: 6f6f 6c65 616e 2061 7272 6179 2074 6861  oolean array tha
+00018140: 7427 7320 5472 7565 2066 6f72 2065 6163  t's True for eac
+00018150: 6820 6044 6174 6173 6574 6020 726f 7720  h `Dataset` row 
+00018160: 7468 6174 2063 6f6e 7461 696e 730d 0a20  that contains.. 
+00018170: 2020 2020 2020 2020 2020 2061 7420 6c65             at le
+00018180: 6173 7420 6f6e 6520 4e61 4e2e 0d0a 2020  ast one NaN...  
+00018190: 2020 2020 2020 4461 7461 7365 742e 6d61        Dataset.ma
+000181a0: 736b 5f61 6e64 5f69 736e 616e 203a 0d0a  sk_and_isnan :..
+000181b0: 2020 2020 2020 2020 2020 2020 5265 7475              Retu
+000181c0: 726e 2061 2062 6f6f 6c65 616e 2061 7272  rn a boolean arr
+000181d0: 6179 2074 6861 7427 7320 5472 7565 2066  ay that's True f
+000181e0: 6f72 2065 6163 6820 616c 6c2d 4e61 4e20  or each all-NaN 
+000181f0: 6044 6174 6173 6574 6020 726f 772e 0d0a  `Dataset` row...
+00018200: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
+00018210: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+00018220: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
+00018230: 3e20 6120 3d20 7274 2e46 6173 7441 7272  > a = rt.FastArr
+00018240: 6179 285b 7274 2e6e 616e 2c20 7274 2e6e  ay([rt.nan, rt.n
+00018250: 616e 2c20 6e70 2e69 6e66 2c20 335d 290d  an, np.inf, 3]).
+00018260: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
+00018270: 736e 616e 2829 0d0a 2020 2020 2020 2020  snan()..        
+00018280: 4661 7374 4172 7261 7928 5b20 5472 7565  FastArray([ True
+00018290: 2c20 2054 7275 652c 2046 616c 7365 2c20  ,  True, False, 
+000182a0: 4661 6c73 655d 290d 0a0d 0a20 2020 2020  False])....     
+000182b0: 2020 2057 6974 6820 6060 6661 6e63 7920     With ``fancy 
+000182c0: 3d20 5472 7565 6060 3a0d 0a0d 0a20 2020  = True``:....   
+000182d0: 2020 2020 203e 3e3e 2061 2e69 736e 616e       >>> a.isnan
+000182e0: 2866 616e 6379 203d 2054 7275 6529 0d0a  (fancy = True)..
+000182f0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+00018300: 7928 5b30 2c20 315d 290d 0a20 2020 2020  y([0, 1])..     
+00018310: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00018320: 7265 7475 726e 2073 656c 662e 5f75 6e61  return self._una
+00018330: 7279 5f6f 7028 4d41 5448 5f4f 5045 5241  ry_op(MATH_OPERA
+00018340: 5449 4f4e 2e49 534e 414e 2c20 6661 6e63  TION.ISNAN, fanc
+00018350: 793d 6661 6e63 7929 0d0a 0d0a 2020 2020  y=fancy)....    
+00018360: 6465 6620 6973 6e6f 746e 616e 2873 656c  def isnotnan(sel
+00018370: 662c 2066 616e 6379 3d46 616c 7365 293a  f, fancy=False):
+00018380: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00018390: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
+000183a0: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
+000183b0: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
+000183c0: 6368 2065 6c65 6d65 6e74 2074 6861 7427  ch element that'
+000183d0: 7320 6e6f 7420 6120 4e61 4e20 284e 6f74  s not a NaN (Not
+000183e0: 2061 0d0a 2020 2020 2020 2020 4e75 6d62   a..        Numb
+000183f0: 6572 292c 2046 616c 7365 206f 7468 6572  er), False other
+00018400: 7769 7365 2e0d 0a0d 0a20 2020 2020 2020  wise.....       
+00018410: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
+00018420: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
+00018430: 0a20 2020 2020 2020 2066 616e 6379 203a  .        fancy :
+00018440: 2062 6f6f 6c2c 2064 6566 6175 6c74 2046   bool, default F
+00018450: 616c 7365 0d0a 2020 2020 2020 2020 2020  alse..          
+00018460: 2020 5365 7420 746f 2054 7275 6520 746f    Set to True to
+00018470: 2069 6e73 7465 6164 2072 6574 7572 6e20   instead return 
+00018480: 7468 6520 696e 6469 6365 7320 6f66 2074  the indices of t
+00018490: 6865 2054 7275 6520 286e 6f6e 2d4e 614e  he True (non-NaN
+000184a0: 2920 7661 6c75 6573 2e0d 0a0d 0a20 2020  ) values.....   
+000184b0: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
+000184c0: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+000184d0: 2020 2020 2020 2060 4661 7374 4172 7261         `FastArra
+000184e0: 7960 0d0a 2020 2020 2020 2020 2020 2020  y`..            
+000184f0: 4120 6046 6173 7441 7272 6179 6020 6f66  A `FastArray` of
+00018500: 2062 6f6f 6c65 616e 7320 6f72 2069 6e64   booleans or ind
+00018510: 6963 6573 2e0d 0a0d 0a20 2020 2020 2020  ices.....       
+00018520: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
+00018530: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+00018540: 2020 2020 2046 6173 7441 7272 6179 2e69       FastArray.i
+00018550: 736e 616e 2c20 4661 7374 4172 7261 792e  snan, FastArray.
+00018560: 6e6f 746e 612c 2046 6173 7441 7272 6179  notna, FastArray
+00018570: 2e69 736e 616e 6f72 7a65 726f 2c20 7269  .isnanorzero, ri
+00018580: 7074 6162 6c65 2e69 736e 616e 2c0d 0a20  ptable.isnan,.. 
+00018590: 2020 2020 2020 2072 6970 7461 626c 652e         riptable.
+000185a0: 6973 6e6f 746e 616e 2c20 7269 7074 6162  isnotnan, riptab
+000185b0: 6c65 2e69 736e 616e 6f72 7a65 726f 2c20  le.isnanorzero, 
+000185c0: 4361 7465 676f 7269 6361 6c2e 6973 6e61  Categorical.isna
+000185d0: 6e2c 0d0a 2020 2020 2020 2020 4361 7465  n,..        Cate
+000185e0: 676f 7269 6361 6c2e 6973 6e6f 746e 616e  gorical.isnotnan
+000185f0: 2c20 4361 7465 676f 7269 6361 6c2e 6e6f  , Categorical.no
+00018600: 746e 612c 2044 6174 652e 6973 6e61 6e2c  tna, Date.isnan,
+00018610: 2044 6174 652e 6973 6e6f 746e 616e 2c0d   Date.isnotnan,.
+00018620: 0a20 2020 2020 2020 2044 6174 6554 696d  .        DateTim
+00018630: 654e 616e 6f2e 6973 6e61 6e2c 2044 6174  eNano.isnan, Dat
+00018640: 6554 696d 654e 616e 6f2e 6973 6e6f 746e  eTimeNano.isnotn
+00018650: 616e 0d0a 2020 2020 2020 2020 4461 7461  an..        Data
+00018660: 7365 742e 6d61 736b 5f6f 725f 6973 6e61  set.mask_or_isna
+00018670: 6e20 3a0d 0a20 2020 2020 2020 2020 2020  n :..           
+00018680: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
+00018690: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
+000186a0: 7275 6520 666f 7220 6561 6368 2060 4461  rue for each `Da
+000186b0: 7461 7365 7460 2072 6f77 2074 6861 7420  taset` row that 
+000186c0: 636f 6e74 6169 6e73 0d0a 2020 2020 2020  contains..      
+000186d0: 2020 2020 2020 6174 206c 6561 7374 206f        at least o
+000186e0: 6e65 204e 614e 2e0d 0a20 2020 2020 2020  ne NaN...       
+000186f0: 2044 6174 6173 6574 2e6d 6173 6b5f 616e   Dataset.mask_an
+00018700: 645f 6973 6e61 6e20 3a0d 0a20 2020 2020  d_isnan :..     
+00018710: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
+00018720: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
+00018730: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
+00018740: 6368 2061 6c6c 2d4e 614e 2060 4461 7461  ch all-NaN `Data
+00018750: 7365 7460 2072 6f77 2e0d 0a0d 0a20 2020  set` row.....   
+00018760: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
+00018770: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+00018780: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
+00018790: 2072 742e 4661 7374 4172 7261 7928 5b72   rt.FastArray([r
+000187a0: 742e 6e61 6e2c 206e 702e 696e 662c 2032  t.nan, np.inf, 2
+000187b0: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
+000187c0: 612e 6973 6e6f 746e 616e 2829 0d0a 2020  a.isnotnan()..  
+000187d0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+000187e0: 5b46 616c 7365 2c20 2054 7275 652c 2020  [False,  True,  
+000187f0: 5472 7565 5d29 0d0a 0d0a 2020 2020 2020  True])....      
+00018800: 2020 5769 7468 2060 6066 616e 6379 203d    With ``fancy =
+00018810: 2054 7275 6560 603a 0d0a 0d0a 2020 2020   True``:....    
+00018820: 2020 2020 3e3e 3e20 612e 6973 6e6f 746e      >>> a.isnotn
+00018830: 616e 2866 616e 6379 203d 2054 7275 6529  an(fancy = True)
+00018840: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00018850: 7261 7928 5b31 2c20 325d 290d 0a20 2020  ray([1, 2])..   
+00018860: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00018870: 2020 7265 7475 726e 2073 656c 662e 5f75    return self._u
+00018880: 6e61 7279 5f6f 7028 4d41 5448 5f4f 5045  nary_op(MATH_OPE
+00018890: 5241 5449 4f4e 2e49 534e 4f54 4e41 4e2c  RATION.ISNOTNAN,
+000188a0: 2066 616e 6379 3d66 616e 6379 290d 0a0d   fancy=fancy)...
+000188b0: 0a20 2020 2064 6566 2069 736e 616e 6f72  .    def isnanor
+000188c0: 7a65 726f 2873 656c 662c 2066 616e 6379  zero(self, fancy
+000188d0: 3d46 616c 7365 293a 0d0a 2020 2020 2020  =False):..      
+000188e0: 2020 2222 220d 0a20 2020 2020 2020 2052    """..        R
+000188f0: 6574 7572 6e20 6120 626f 6f6c 6561 6e20  eturn a boolean 
+00018900: 6172 7261 7920 7468 6174 2773 2054 7275  array that's Tru
+00018910: 6520 666f 7220 6561 6368 2065 6c65 6d65  e for each eleme
+00018920: 6e74 2074 6861 7427 7320 6120 4e61 4e20  nt that's a NaN 
+00018930: 284e 6f74 2061 204e 756d 6265 7229 0d0a  (Not a Number)..
+00018940: 2020 2020 2020 2020 6f72 207a 6572 6f2c          or zero,
+00018950: 2046 616c 7365 206f 7468 6572 7769 7365   False otherwise
+00018960: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
+00018970: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
+00018980: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
+00018990: 2020 2020 2066 616e 6379 203a 2062 6f6f       fancy : boo
+000189a0: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
+000189b0: 0d0a 2020 2020 2020 2020 2020 2020 5365  ..            Se
+000189c0: 7420 746f 2054 7275 6520 746f 2069 6e73  t to True to ins
+000189d0: 7465 6164 2072 6574 7572 6e20 7468 6520  tead return the 
+000189e0: 696e 6469 6365 7320 6f66 2074 6865 2054  indices of the T
+000189f0: 7275 6520 284e 614e 206f 7220 7a65 726f  rue (NaN or zero
+00018a00: 2920 7661 6c75 6573 2e0d 0a0d 0a20 2020  ) values.....   
+00018a10: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
+00018a20: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+00018a30: 2020 2020 2020 2060 4661 7374 4172 7261         `FastArra
+00018a40: 7960 0d0a 2020 2020 2020 2020 2020 2020  y`..            
+00018a50: 4120 6046 6173 7441 7272 6179 6020 6f66  A `FastArray` of
+00018a60: 2062 6f6f 6c65 616e 7320 6f72 2069 6e64   booleans or ind
+00018a70: 6963 6573 2e0d 0a0d 0a20 2020 2020 2020  ices.....       
+00018a80: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
+00018a90: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+00018aa0: 2020 2020 2072 6970 7461 626c 652e 6973       riptable.is
+00018ab0: 6e61 6e6f 727a 6572 6f2c 2072 6970 7461  nanorzero, ripta
+00018ac0: 626c 652e 6973 6e61 6e2c 2072 6970 7461  ble.isnan, ripta
+00018ad0: 626c 652e 6973 6e6f 746e 616e 2c20 4661  ble.isnotnan, Fa
+00018ae0: 7374 4172 7261 792e 6973 6e61 6e2c 0d0a  stArray.isnan,..
+00018af0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+00018b00: 792e 6973 6e6f 746e 616e 2c20 4361 7465  y.isnotnan, Cate
+00018b10: 676f 7269 6361 6c2e 6973 6e61 6e2c 2043  gorical.isnan, C
+00018b20: 6174 6567 6f72 6963 616c 2e69 736e 6f74  ategorical.isnot
+00018b30: 6e61 6e2c 2044 6174 652e 6973 6e61 6e2c  nan, Date.isnan,
+00018b40: 0d0a 2020 2020 2020 2020 4461 7465 2e69  ..        Date.i
+00018b50: 736e 6f74 6e61 6e2c 2044 6174 6554 696d  snotnan, DateTim
+00018b60: 654e 616e 6f2e 6973 6e61 6e2c 2044 6174  eNano.isnan, Dat
+00018b70: 6554 696d 654e 616e 6f2e 6973 6e6f 746e  eTimeNano.isnotn
+00018b80: 616e 0d0a 2020 2020 2020 2020 4461 7461  an..        Data
+00018b90: 7365 742e 6d61 736b 5f6f 725f 6973 6e61  set.mask_or_isna
+00018ba0: 6e20 3a0d 0a20 2020 2020 2020 2020 2020  n :..           
+00018bb0: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
+00018bc0: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
+00018bd0: 7275 6520 666f 7220 6561 6368 2060 4461  rue for each `Da
+00018be0: 7461 7365 7460 2072 6f77 2074 6861 7420  taset` row that 
+00018bf0: 636f 6e74 6169 6e73 0d0a 2020 2020 2020  contains..      
+00018c00: 2020 2020 2020 6174 206c 6561 7374 206f        at least o
+00018c10: 6e65 204e 614e 2e0d 0a20 2020 2020 2020  ne NaN...       
+00018c20: 2044 6174 6173 6574 2e6d 6173 6b5f 616e   Dataset.mask_an
+00018c30: 645f 6973 6e61 6e20 3a0d 0a20 2020 2020  d_isnan :..     
+00018c40: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
+00018c50: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
+00018c60: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
+00018c70: 6368 2061 6c6c 2d4e 614e 2060 4461 7461  ch all-NaN `Data
+00018c80: 7365 7460 2072 6f77 2e0d 0a0d 0a20 2020  set` row.....   
+00018c90: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
+00018ca0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+00018cb0: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
+00018cc0: 2072 742e 4661 7374 4172 7261 7928 5b30   rt.FastArray([0
+00018cd0: 2c20 7274 2e6e 616e 2c20 6e70 2e69 6e66  , rt.nan, np.inf
+00018ce0: 2c20 335d 290d 0a20 2020 2020 2020 203e  , 3])..        >
+00018cf0: 3e3e 2061 2e69 736e 616e 6f72 7a65 726f  >> a.isnanorzero
+00018d00: 2829 0d0a 2020 2020 2020 2020 4661 7374  ()..        Fast
+00018d10: 4172 7261 7928 5b20 5472 7565 2c20 2054  Array([ True,  T
+00018d20: 7275 652c 2046 616c 7365 2c20 4661 6c73  rue, False, Fals
+00018d30: 655d 290d 0a0d 0a20 2020 2020 2020 2057  e])....        W
+00018d40: 6974 6820 6060 6661 6e63 7920 3d20 5472  ith ``fancy = Tr
+00018d50: 7565 6060 3a0d 0a0d 0a20 2020 2020 2020  ue``:....       
+00018d60: 203e 3e3e 2061 2e69 736e 616e 6f72 7a65   >>> a.isnanorze
+00018d70: 726f 2866 616e 6379 203d 2054 7275 6529  ro(fancy = True)
+00018d80: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00018d90: 7261 7928 5b30 2c20 315d 290d 0a20 2020  ray([0, 1])..   
+00018da0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00018db0: 2020 7265 7475 726e 2073 656c 662e 5f75    return self._u
+00018dc0: 6e61 7279 5f6f 7028 4d41 5448 5f4f 5045  nary_op(MATH_OPE
+00018dd0: 5241 5449 4f4e 2e49 534e 414e 4f52 5a45  RATION.ISNANORZE
+00018de0: 524f 2c20 6661 6e63 793d 6661 6e63 7929  RO, fancy=fancy)
+00018df0: 0d0a 0d0a 2020 2020 6465 6620 6973 6669  ....    def isfi
+00018e00: 6e69 7465 2873 656c 662c 2066 616e 6379  nite(self, fancy
+00018e10: 3d46 616c 7365 293a 0d0a 2020 2020 2020  =False):..      
+00018e20: 2020 2222 220d 0a20 2020 2020 2020 2052    """..        R
+00018e30: 6574 7572 6e20 6120 626f 6f6c 6561 6e20  eturn a boolean 
+00018e40: 6172 7261 7920 7468 6174 2773 2054 7275  array that's Tru
+00018e50: 6520 666f 7220 6561 6368 2066 696e 6974  e for each finit
+00018e60: 6520 6046 6173 7441 7272 6179 6020 656c  e `FastArray` el
+00018e70: 656d 656e 742c 2046 616c 7365 0d0a 2020  ement, False..  
+00018e80: 2020 2020 2020 6f74 6865 7277 6973 652e        otherwise.
+00018e90: 0d0a 0d0a 2020 2020 2020 2020 4120 7661  ....        A va
+00018ea0: 6c75 6520 6973 2063 6f6e 7369 6465 7265  lue is considere
+00018eb0: 6420 746f 2062 6520 6669 6e69 7465 2069  d to be finite i
+00018ec0: 6620 6974 2773 206e 6f74 2070 6f73 6974  f it's not posit
+00018ed0: 6976 6520 6f72 206e 6567 6174 6976 6520  ive or negative 
+00018ee0: 696e 6669 6e69 7479 0d0a 2020 2020 2020  infinity..      
+00018ef0: 2020 6f72 2061 204e 614e 2028 4e6f 7420    or a NaN (Not 
+00018f00: 6120 4e75 6d62 6572 292e 0d0a 0d0a 2020  a Number).....  
+00018f10: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
+00018f20: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+00018f30: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6661  ----..        fa
+00018f40: 6e63 7920 3a20 626f 6f6c 2c20 6465 6661  ncy : bool, defa
+00018f50: 756c 7420 4661 6c73 650d 0a20 2020 2020  ult False..     
+00018f60: 2020 2020 2020 2053 6574 2074 6f20 5472         Set to Tr
+00018f70: 7565 2074 6f20 696e 7374 6561 6420 7265  ue to instead re
+00018f80: 7475 726e 2074 6865 2069 6e64 6963 6573  turn the indices
+00018f90: 206f 6620 7468 6520 5472 7565 2028 6669   of the True (fi
+00018fa0: 6e69 7465 2920 7661 6c75 6573 2e0d 0a0d  nite) values....
+00018fb0: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+00018fc0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+00018fd0: 2d0d 0a20 2020 2020 2020 2060 4661 7374  -..        `Fast
+00018fe0: 4172 7261 7960 0d0a 2020 2020 2020 2020  Array`..        
+00018ff0: 2020 2020 416e 2061 7272 6179 206f 7220      An array or 
+00019000: 626f 6f6c 6561 6e73 206f 7220 696e 6469  booleans or indi
+00019010: 6365 732e 0d0a 0d0a 2020 2020 2020 2020  ces.....        
+00019020: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
+00019030: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+00019040: 2020 2020 4661 7374 4172 7261 792e 6973      FastArray.is
+00019050: 6e6f 7466 696e 6974 652c 2072 6970 7461  notfinite, ripta
+00019060: 626c 652e 6973 6669 6e69 7465 2c20 7269  ble.isfinite, ri
+00019070: 7074 6162 6c65 2e69 736e 6f74 6669 6e69  ptable.isnotfini
+00019080: 7465 2c20 7269 7074 6162 6c65 2e69 7369  te, riptable.isi
+00019090: 6e66 2c0d 0a20 2020 2020 2020 2072 6970  nf,..        rip
+000190a0: 7461 626c 652e 6973 6e6f 7469 6e66 2c20  table.isnotinf, 
+000190b0: 4661 7374 4172 7261 792e 6973 696e 662c  FastArray.isinf,
+000190c0: 2046 6173 7441 7272 6179 2e69 736e 6f74   FastArray.isnot
+000190d0: 696e 660d 0a20 2020 2020 2020 2044 6174  inf..        Dat
+000190e0: 6173 6574 2e6d 6173 6b5f 6f72 5f69 7366  aset.mask_or_isf
+000190f0: 696e 6974 6520 3a0d 0a20 2020 2020 2020  inite :..       
+00019100: 2020 2020 2052 6574 7572 6e20 6120 626f       Return a bo
+00019110: 6f6c 6561 6e20 6172 7261 7920 7468 6174  olean array that
+00019120: 2773 2054 7275 6520 666f 7220 6561 6368  's True for each
+00019130: 2060 4461 7461 7365 7460 2072 6f77 2074   `Dataset` row t
+00019140: 6861 7420 6861 7320 6174 206c 6561 7374  hat has at least
+00019150: 0d0a 2020 2020 2020 2020 2020 2020 6f6e  ..            on
+00019160: 6520 6669 6e69 7465 2076 616c 7565 2e0d  e finite value..
+00019170: 0a20 2020 2020 2020 2044 6174 6173 6574  .        Dataset
+00019180: 2e6d 6173 6b5f 616e 645f 6973 6669 6e69  .mask_and_isfini
+00019190: 7465 203a 0d0a 2020 2020 2020 2020 2020  te :..          
+000191a0: 2020 5265 7475 726e 2061 2062 6f6f 6c65    Return a boole
+000191b0: 616e 2061 7272 6179 2074 6861 7427 7320  an array that's 
+000191c0: 5472 7565 2066 6f72 2065 6163 6820 6044  True for each `D
+000191d0: 6174 6173 6574 6020 726f 7720 7468 6174  ataset` row that
+000191e0: 2063 6f6e 7461 696e 7320 616c 6c0d 0a20   contains all.. 
+000191f0: 2020 2020 2020 2020 2020 2066 696e 6974             finit
+00019200: 6520 7661 6c75 6573 2e0d 0a20 2020 2020  e values...     
+00019210: 2020 2044 6174 6173 6574 2e6d 6173 6b5f     Dataset.mask_
+00019220: 6f72 5f69 7369 6e66 203a 0d0a 2020 2020  or_isinf :..    
+00019230: 2020 2020 2020 2020 5265 7475 726e 2061          Return a
+00019240: 2062 6f6f 6c65 616e 2061 7272 6179 2074   boolean array t
+00019250: 6861 7427 7320 5472 7565 2066 6f72 2065  hat's True for e
+00019260: 6163 6820 6044 6174 6173 6574 6020 726f  ach `Dataset` ro
+00019270: 7720 7468 6174 2068 6173 2061 7420 6c65  w that has at le
+00019280: 6173 740d 0a20 2020 2020 2020 2020 2020  ast..           
+00019290: 206f 6e65 2076 616c 7565 2074 6861 7427   one value that'
+000192a0: 7320 706f 7369 7469 7665 206f 7220 6e65  s positive or ne
+000192b0: 6761 7469 7665 2069 6e66 696e 6974 792e  gative infinity.
+000192c0: 0d0a 2020 2020 2020 2020 4461 7461 7365  ..        Datase
+000192d0: 742e 6d61 736b 5f61 6e64 5f69 7369 6e66  t.mask_and_isinf
+000192e0: 203a 0d0a 2020 2020 2020 2020 2020 2020   :..            
+000192f0: 5265 7475 726e 2061 2062 6f6f 6c65 616e  Return a boolean
+00019300: 2061 7272 6179 2074 6861 7427 7320 5472   array that's Tr
+00019310: 7565 2066 6f72 2065 6163 6820 6044 6174  ue for each `Dat
+00019320: 6173 6574 6020 726f 7720 7468 6174 2063  aset` row that c
+00019330: 6f6e 7461 696e 7320 616c 6c0d 0a20 2020  ontains all..   
+00019340: 2020 2020 2020 2020 2069 6e66 696e 6974           infinit
+00019350: 6520 7661 6c75 6573 2e0d 0a0d 0a20 2020  e values.....   
+00019360: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
+00019370: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+00019380: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
+00019390: 2072 742e 4661 7374 4172 7261 7928 5b6e   rt.FastArray([n
+000193a0: 702e 696e 662c 206e 702e 4e49 4e46 2c20  p.inf, np.NINF, 
+000193b0: 7274 2e6e 616e 2c20 305d 290d 0a20 2020  rt.nan, 0])..   
+000193c0: 2020 2020 203e 3e3e 2061 2e69 7366 696e       >>> a.isfin
+000193d0: 6974 6528 290d 0a20 2020 2020 2020 2046  ite()..        F
+000193e0: 6173 7441 7272 6179 285b 4661 6c73 652c  astArray([False,
+000193f0: 2046 616c 7365 2c20 4661 6c73 652c 2020   False, False,  
+00019400: 5472 7565 5d29 0d0a 0d0a 2020 2020 2020  True])....      
+00019410: 2020 5769 7468 2060 6066 616e 6379 203d    With ``fancy =
+00019420: 2054 7275 6560 603a 0d0a 0d0a 2020 2020   True``:....    
+00019430: 2020 2020 3e3e 3e20 612e 6973 6669 6e69      >>> a.isfini
+00019440: 7465 2866 616e 6379 203d 2054 7275 6529  te(fancy = True)
+00019450: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00019460: 7261 7928 5b33 5d29 0d0a 2020 2020 2020  ray([3])..      
+00019470: 2020 2222 220d 0a20 2020 2020 2020 2072    """..        r
+00019480: 6574 7572 6e20 7365 6c66 2e5f 756e 6172  eturn self._unar
+00019490: 795f 6f70 284d 4154 485f 4f50 4552 4154  y_op(MATH_OPERAT
+000194a0: 494f 4e2e 4953 4649 4e49 5445 2c20 6661  ION.ISFINITE, fa
+000194b0: 6e63 793d 6661 6e63 7929 0d0a 0d0a 2020  ncy=fancy)....  
+000194c0: 2020 6465 6620 6973 6e6f 7466 696e 6974    def isnotfinit
+000194d0: 6528 7365 6c66 2c20 6661 6e63 793d 4661  e(self, fancy=Fa
+000194e0: 6c73 6529 3a0d 0a20 2020 2020 2020 2022  lse):..        "
+000194f0: 2222 0d0a 2020 2020 2020 2020 5265 7475  ""..        Retu
+00019500: 726e 2061 2062 6f6f 6c65 616e 2061 7272  rn a boolean arr
+00019510: 6179 2074 6861 7427 7320 5472 7565 2066  ay that's True f
+00019520: 6f72 2065 6163 6820 6e6f 6e2d 6669 6e69  or each non-fini
+00019530: 7465 2060 4661 7374 4172 7261 7960 2065  te `FastArray` e
+00019540: 6c65 6d65 6e74 2c0d 0a20 2020 2020 2020  lement,..       
+00019550: 2046 616c 7365 206f 7468 6572 7769 7365   False otherwise
+00019560: 2e0d 0a0d 0a20 2020 2020 2020 2041 2076  .....        A v
+00019570: 616c 7565 2069 7320 636f 6e73 6964 6572  alue is consider
+00019580: 6564 2074 6f20 6265 2066 696e 6974 6520  ed to be finite 
+00019590: 6966 2069 7427 7320 6e6f 7420 706f 7369  if it's not posi
+000195a0: 7469 7665 206f 7220 6e65 6761 7469 7665  tive or negative
+000195b0: 2069 6e66 696e 6974 790d 0a20 2020 2020   infinity..     
+000195c0: 2020 206f 7220 6120 4e61 4e20 284e 6f74     or a NaN (Not
+000195d0: 2061 204e 756d 6265 7229 2e0d 0a0d 0a20   a Number)..... 
+000195e0: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
+000195f0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00019600: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2066  -----..        f
+00019610: 616e 6379 203a 2062 6f6f 6c2c 2064 6566  ancy : bool, def
+00019620: 6175 6c74 2046 616c 7365 0d0a 2020 2020  ault False..    
+00019630: 2020 2020 2020 2020 5365 7420 746f 2054          Set to T
+00019640: 7275 6520 746f 2069 6e73 7465 6164 2072  rue to instead r
+00019650: 6574 7572 6e20 7468 6520 696e 6469 6365  eturn the indice
+00019660: 7320 6f66 2074 6865 2054 7275 6520 286e  s of the True (n
+00019670: 6f6e 2d66 696e 6974 6529 2076 616c 7565  on-finite) value
+00019680: 732e 0d0a 0d0a 2020 2020 2020 2020 5265  s.....        Re
+00019690: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
+000196a0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+000196b0: 6046 6173 7441 7272 6179 600d 0a20 2020  `FastArray`..   
+000196c0: 2020 2020 2020 2020 2041 6e20 6172 7261           An arra
+000196d0: 7920 6f72 2062 6f6f 6c65 616e 7320 6f72  y or booleans or
+000196e0: 2069 6e64 6963 6573 2e0d 0a0d 0a20 2020   indices.....   
+000196f0: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
+00019700: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+00019710: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+00019720: 6179 2e69 7366 696e 6974 652c 2072 6970  ay.isfinite, rip
+00019730: 7461 626c 652e 6973 6669 6e69 7465 2c20  table.isfinite, 
+00019740: 7269 7074 6162 6c65 2e69 736e 6f74 6669  riptable.isnotfi
+00019750: 6e69 7465 2c20 7269 7074 6162 6c65 2e69  nite, riptable.i
+00019760: 7369 6e66 2c0d 0a20 2020 2020 2020 2072  sinf,..        r
+00019770: 6970 7461 626c 652e 6973 6e6f 7469 6e66  iptable.isnotinf
+00019780: 2c20 4661 7374 4172 7261 792e 6973 696e  , FastArray.isin
+00019790: 662c 2046 6173 7441 7272 6179 2e69 736e  f, FastArray.isn
+000197a0: 6f74 696e 660d 0a20 2020 2020 2020 2044  otinf..        D
+000197b0: 6174 6173 6574 2e6d 6173 6b5f 6f72 5f69  ataset.mask_or_i
+000197c0: 7366 696e 6974 6520 3a0d 0a20 2020 2020  sfinite :..     
+000197d0: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
+000197e0: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
+000197f0: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
+00019800: 6368 2060 4461 7461 7365 7460 2072 6f77  ch `Dataset` row
+00019810: 2074 6861 7420 6861 7320 6174 206c 6561   that has at lea
+00019820: 7374 0d0a 2020 2020 2020 2020 2020 2020  st..            
+00019830: 6f6e 6520 6669 6e69 7465 2076 616c 7565  one finite value
+00019840: 2e0d 0a20 2020 2020 2020 2044 6174 6173  ...        Datas
+00019850: 6574 2e6d 6173 6b5f 616e 645f 6973 6669  et.mask_and_isfi
+00019860: 6e69 7465 203a 0d0a 2020 2020 2020 2020  nite :..        
+00019870: 2020 2020 5265 7475 726e 2061 2062 6f6f      Return a boo
+00019880: 6c65 616e 2061 7272 6179 2074 6861 7427  lean array that'
+00019890: 7320 5472 7565 2066 6f72 2065 6163 6820  s True for each 
+000198a0: 6044 6174 6173 6574 6020 726f 7720 7468  `Dataset` row th
+000198b0: 6174 2063 6f6e 7461 696e 7320 616c 6c0d  at contains all.
+000198c0: 0a20 2020 2020 2020 2020 2020 2066 696e  .            fin
+000198d0: 6974 6520 7661 6c75 6573 2e0d 0a20 2020  ite values...   
+000198e0: 2020 2020 2044 6174 6173 6574 2e6d 6173       Dataset.mas
+000198f0: 6b5f 6f72 5f69 7369 6e66 203a 0d0a 2020  k_or_isinf :..  
+00019900: 2020 2020 2020 2020 2020 5265 7475 726e            Return
+00019910: 2061 2062 6f6f 6c65 616e 2061 7272 6179   a boolean array
+00019920: 2074 6861 7427 7320 5472 7565 2066 6f72   that's True for
+00019930: 2065 6163 6820 6044 6174 6173 6574 6020   each `Dataset` 
+00019940: 726f 7720 7468 6174 2068 6173 2061 7420  row that has at 
+00019950: 6c65 6173 740d 0a20 2020 2020 2020 2020  least..         
+00019960: 2020 206f 6e65 2076 616c 7565 2074 6861     one value tha
+00019970: 7427 7320 706f 7369 7469 7665 206f 7220  t's positive or 
+00019980: 6e65 6761 7469 7665 2069 6e66 696e 6974  negative infinit
+00019990: 792e 0d0a 2020 2020 2020 2020 4461 7461  y...        Data
+000199a0: 7365 742e 6d61 736b 5f61 6e64 5f69 7369  set.mask_and_isi
+000199b0: 6e66 203a 0d0a 2020 2020 2020 2020 2020  nf :..          
+000199c0: 2020 5265 7475 726e 2061 2062 6f6f 6c65    Return a boole
+000199d0: 616e 2061 7272 6179 2074 6861 7427 7320  an array that's 
+000199e0: 5472 7565 2066 6f72 2065 6163 6820 6044  True for each `D
+000199f0: 6174 6173 6574 6020 726f 7720 7468 6174  ataset` row that
+00019a00: 2063 6f6e 7461 696e 7320 616c 6c0d 0a20   contains all.. 
+00019a10: 2020 2020 2020 2020 2020 2069 6e66 696e             infin
+00019a20: 6974 6520 7661 6c75 6573 2e0d 0a0d 0a20  ite values..... 
+00019a30: 2020 2020 2020 2045 7861 6d70 6c65 730d         Examples.
+00019a40: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00019a50: 2d0d 0a20 2020 2020 2020 203e 3e3e 2061  -..        >>> a
+00019a60: 203d 2072 742e 4661 7374 4172 7261 7928   = rt.FastArray(
+00019a70: 5b6e 702e 696e 662c 206e 702e 4e49 4e46  [np.inf, np.NINF
+00019a80: 2c20 7274 2e6e 616e 2c20 305d 290d 0a20  , rt.nan, 0]).. 
+00019a90: 2020 2020 2020 203e 3e3e 2061 2e69 736e         >>> a.isn
+00019aa0: 6f74 6669 6e69 7465 2829 0d0a 2020 2020  otfinite()..    
+00019ab0: 2020 2020 4661 7374 4172 7261 7928 5b20      FastArray([ 
+00019ac0: 5472 7565 2c20 2054 7275 652c 2020 5472  True,  True,  Tr
+00019ad0: 7565 2c20 4661 6c73 655d 290d 0a0d 0a20  ue, False]).... 
+00019ae0: 2020 2020 2020 2057 6974 6820 6060 6661         With ``fa
+00019af0: 6e63 7920 3d20 5472 7565 6060 3a0d 0a0d  ncy = True``:...
+00019b00: 0a20 2020 2020 2020 203e 3e3e 2061 2e69  .        >>> a.i
+00019b10: 736e 6f74 6669 6e69 7465 2866 616e 6379  snotfinite(fancy
+00019b20: 203d 2054 7275 6529 0d0a 2020 2020 2020   = True)..      
+00019b30: 2020 4661 7374 4172 7261 7928 5b30 2c20    FastArray([0, 
+00019b40: 312c 2032 5d29 0d0a 2020 2020 2020 2020  1, 2])..        
+00019b50: 2222 220d 0a20 2020 2020 2020 2072 6574  """..        ret
+00019b60: 7572 6e20 7365 6c66 2e5f 756e 6172 795f  urn self._unary_
+00019b70: 6f70 284d 4154 485f 4f50 4552 4154 494f  op(MATH_OPERATIO
+00019b80: 4e2e 4953 4e4f 5446 494e 4954 452c 2066  N.ISNOTFINITE, f
+00019b90: 616e 6379 3d66 616e 6379 290d 0a0d 0a20  ancy=fancy).... 
+00019ba0: 2020 2064 6566 2069 7369 6e66 2873 656c     def isinf(sel
+00019bb0: 662c 2066 616e 6379 3d46 616c 7365 293a  f, fancy=False):
+00019bc0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00019bd0: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
+00019be0: 626f 6f6c 6561 6e20 6172 7261 7920 7468  boolean array th
+00019bf0: 6174 2773 2054 7275 6520 666f 7220 6561  at's True for ea
+00019c00: 6368 2060 4661 7374 4172 7261 7960 2065  ch `FastArray` e
+00019c10: 6c65 6d65 6e74 2074 6861 7427 7320 706f  lement that's po
+00019c20: 7369 7469 7665 0d0a 2020 2020 2020 2020  sitive..        
+00019c30: 6f72 206e 6567 6174 6976 6520 696e 6669  or negative infi
+00019c40: 6e69 7479 2c20 4661 6c73 6520 6f74 6865  nity, False othe
+00019c50: 7277 6973 652e 0d0a 0d0a 2020 2020 2020  rwise.....      
+00019c60: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
+00019c70: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
+00019c80: 0d0a 2020 2020 2020 2020 6661 6e63 7920  ..        fancy 
+00019c90: 3a20 626f 6f6c 2c20 6465 6661 756c 7420  : bool, default 
+00019ca0: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
+00019cb0: 2020 2053 6574 2074 6f20 5472 7565 2074     Set to True t
+00019cc0: 6f20 696e 7374 6561 6420 7265 7475 726e  o instead return
+00019cd0: 2074 6865 2069 6e64 6963 6573 206f 6620   the indices of 
+00019ce0: 7468 6520 5472 7565 2028 696e 6669 6e69  the True (infini
+00019cf0: 7465 2920 7661 6c75 6573 2e0d 0a0d 0a20  te) values..... 
+00019d00: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+00019d10: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+00019d20: 0a20 2020 2020 2020 2060 4661 7374 4172  .        `FastAr
+00019d30: 7261 7960 0d0a 2020 2020 2020 2020 2020  ray`..          
+00019d40: 2020 416e 2061 7272 6179 206f 7220 626f    An array or bo
+00019d50: 6f6c 6561 6e73 206f 7220 696e 6469 6365  oleans or indice
+00019d60: 732e 0d0a 0d0a 2020 2020 2020 2020 5365  s.....        Se
+00019d70: 6520 416c 736f 0d0a 2020 2020 2020 2020  e Also..        
+00019d80: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+00019d90: 2020 4661 7374 4172 7261 792e 6973 6e6f    FastArray.isno
+00019da0: 7469 6e66 2c20 4661 7374 4172 7261 792e  tinf, FastArray.
+00019db0: 6973 6669 6e69 7465 2c20 4661 7374 4172  isfinite, FastAr
+00019dc0: 7261 792e 6973 6e6f 7466 696e 6974 652c  ray.isnotfinite,
+00019dd0: 0d0a 2020 2020 2020 2020 7269 7074 6162  ..        riptab
+00019de0: 6c65 2e69 7369 6e66 2c20 7269 7074 6162  le.isinf, riptab
+00019df0: 6c65 2e69 736e 6f74 696e 662c 2072 6970  le.isnotinf, rip
+00019e00: 7461 626c 652e 6973 6669 6e69 7465 2c20  table.isfinite, 
+00019e10: 7269 7074 6162 6c65 2e69 736e 6f74 6669  riptable.isnotfi
+00019e20: 6e69 7465 0d0a 2020 2020 2020 2020 4461  nite..        Da
+00019e30: 7461 7365 742e 6d61 736b 5f6f 725f 6973  taset.mask_or_is
+00019e40: 6669 6e69 7465 203a 0d0a 2020 2020 2020  finite :..      
+00019e50: 2020 2020 2020 5265 7475 726e 2061 2062        Return a b
+00019e60: 6f6f 6c65 616e 2061 7272 6179 2074 6861  oolean array tha
+00019e70: 7427 7320 5472 7565 2066 6f72 2065 6163  t's True for eac
+00019e80: 6820 6044 6174 6173 6574 6020 726f 7720  h `Dataset` row 
+00019e90: 7468 6174 2068 6173 2061 7420 6c65 6173  that has at leas
+00019ea0: 740d 0a20 2020 2020 2020 2020 2020 206f  t..            o
+00019eb0: 6e65 2066 696e 6974 6520 7661 6c75 652e  ne finite value.
+00019ec0: 0d0a 2020 2020 2020 2020 4461 7461 7365  ..        Datase
+00019ed0: 742e 6d61 736b 5f61 6e64 5f69 7366 696e  t.mask_and_isfin
+00019ee0: 6974 6520 3a0d 0a20 2020 2020 2020 2020  ite :..         
+00019ef0: 2020 2052 6574 7572 6e20 6120 626f 6f6c     Return a bool
+00019f00: 6561 6e20 6172 7261 7920 7468 6174 2773  ean array that's
+00019f10: 2054 7275 6520 666f 7220 6561 6368 2060   True for each `
+00019f20: 4461 7461 7365 7460 2072 6f77 2074 6861  Dataset` row tha
+00019f30: 7420 636f 6e74 6169 6e73 2061 6c6c 0d0a  t contains all..
+00019f40: 2020 2020 2020 2020 2020 2020 6669 6e69              fini
+00019f50: 7465 2076 616c 7565 732e 0d0a 2020 2020  te values...    
+00019f60: 2020 2020 4461 7461 7365 742e 6d61 736b      Dataset.mask
+00019f70: 5f6f 725f 6973 696e 6620 3a0d 0a20 2020  _or_isinf :..   
+00019f80: 2020 2020 2020 2020 2052 6574 7572 6e20           Return 
+00019f90: 6120 626f 6f6c 6561 6e20 6172 7261 7920  a boolean array 
+00019fa0: 7468 6174 2773 2054 7275 6520 666f 7220  that's True for 
+00019fb0: 6561 6368 2060 4461 7461 7365 7460 2072  each `Dataset` r
+00019fc0: 6f77 2074 6861 7420 6861 7320 6174 206c  ow that has at l
+00019fd0: 6561 7374 0d0a 2020 2020 2020 2020 2020  east..          
+00019fe0: 2020 6f6e 6520 7661 6c75 6520 7468 6174    one value that
+00019ff0: 2773 2070 6f73 6974 6976 6520 6f72 206e  's positive or n
+0001a000: 6567 6174 6976 6520 696e 6669 6e69 7479  egative infinity
+0001a010: 2e0d 0a20 2020 2020 2020 2044 6174 6173  ...        Datas
+0001a020: 6574 2e6d 6173 6b5f 616e 645f 6973 696e  et.mask_and_isin
+0001a030: 6620 3a0d 0a20 2020 2020 2020 2020 2020  f :..           
+0001a040: 2052 6574 7572 6e20 6120 626f 6f6c 6561   Return a boolea
+0001a050: 6e20 6172 7261 7920 7468 6174 2773 2054  n array that's T
+0001a060: 7275 6520 666f 7220 6561 6368 2060 4461  rue for each `Da
+0001a070: 7461 7365 7460 2072 6f77 2074 6861 7420  taset` row that 
+0001a080: 636f 6e74 6169 6e73 2061 6c6c 0d0a 2020  contains all..  
+0001a090: 2020 2020 2020 2020 2020 696e 6669 6e69            infini
+0001a0a0: 7465 2076 616c 7565 732e 0d0a 0d0a 2020  te values.....  
+0001a0b0: 2020 2020 2020 4578 616d 706c 6573 0d0a        Examples..
+0001a0c0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+0001a0d0: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
+0001a0e0: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
+0001a0f0: 6e70 2e69 6e66 2c20 6e70 2e4e 494e 462c  np.inf, np.NINF,
+0001a100: 2072 742e 6e61 6e2c 2030 5d29 0d0a 2020   rt.nan, 0])..  
+0001a110: 2020 2020 2020 3e3e 3e20 612e 6973 696e        >>> a.isin
+0001a120: 6628 290d 0a20 2020 2020 2020 2046 6173  f()..        Fas
+0001a130: 7441 7272 6179 285b 2054 7275 652c 2020  tArray([ True,  
+0001a140: 5472 7565 2c20 4661 6c73 652c 2046 616c  True, False, Fal
+0001a150: 7365 5d29 0d0a 0d0a 2020 2020 2020 2020  se])....        
+0001a160: 5769 7468 2060 6066 616e 6379 203d 2054  With ``fancy = T
+0001a170: 7275 6560 603a 0d0a 0d0a 2020 2020 2020  rue``:....      
+0001a180: 2020 3e3e 3e20 612e 6973 696e 6628 6661    >>> a.isinf(fa
+0001a190: 6e63 7920 3d20 5472 7565 290d 0a20 2020  ncy = True)..   
+0001a1a0: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
+0001a1b0: 302c 2031 5d29 0d0a 2020 2020 2020 2020  0, 1])..        
+0001a1c0: 2222 220d 0a20 2020 2020 2020 2072 6574  """..        ret
+0001a1d0: 7572 6e20 7365 6c66 2e5f 756e 6172 795f  urn self._unary_
+0001a1e0: 6f70 284d 4154 485f 4f50 4552 4154 494f  op(MATH_OPERATIO
+0001a1f0: 4e2e 4953 494e 462c 2066 616e 6379 3d66  N.ISINF, fancy=f
+0001a200: 616e 6379 290d 0a0d 0a20 2020 2064 6566  ancy)....    def
+0001a210: 2069 736e 6f74 696e 6628 7365 6c66 2c20   isnotinf(self, 
+0001a220: 6661 6e63 793d 4661 6c73 6529 3a0d 0a20  fancy=False):.. 
+0001a230: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+0001a240: 2020 2020 5265 7475 726e 2061 2062 6f6f      Return a boo
+0001a250: 6c65 616e 2061 7272 6179 2074 6861 7427  lean array that'
+0001a260: 7320 5472 7565 2066 6f72 2065 6163 6820  s True for each 
+0001a270: 6046 6173 7441 7272 6179 6020 656c 656d  `FastArray` elem
+0001a280: 656e 7420 7468 6174 2773 206e 6f74 2070  ent that's not p
+0001a290: 6f73 6974 6976 650d 0a20 2020 2020 2020  ositive..       
+0001a2a0: 206f 7220 6e65 6761 7469 7665 2069 6e66   or negative inf
+0001a2b0: 696e 6974 792c 2046 616c 7365 206f 7468  inity, False oth
+0001a2c0: 6572 7769 7365 2e0d 0a0d 0a20 2020 2020  erwise.....     
+0001a2d0: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
+0001a2e0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
+0001a2f0: 2d0d 0a20 2020 2020 2020 2066 616e 6379  -..        fancy
+0001a300: 203a 2062 6f6f 6c2c 2064 6566 6175 6c74   : bool, default
+0001a310: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
+0001a320: 2020 2020 5365 7420 746f 2054 7275 6520      Set to True 
+0001a330: 746f 2069 6e73 7465 6164 2072 6574 7572  to instead retur
+0001a340: 6e20 7468 6520 696e 6469 6365 7320 6f66  n the indices of
+0001a350: 2074 6865 2054 7275 6520 286e 6f6e 2d69   the True (non-i
+0001a360: 6e66 696e 6974 6529 2076 616c 7565 732e  nfinite) values.
+0001a370: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
+0001a380: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
+0001a390: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6046  ----..        `F
+0001a3a0: 6173 7441 7272 6179 600d 0a20 2020 2020  astArray`..     
+0001a3b0: 2020 2020 2020 2041 6e20 6172 7261 7920         An array 
+0001a3c0: 6f72 2062 6f6f 6c65 616e 7320 6f72 2069  or booleans or i
+0001a3d0: 6e64 6963 6573 2e0d 0a0d 0a20 2020 2020  ndices.....     
+0001a3e0: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
+0001a3f0: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+0001a400: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+0001a410: 2e69 7369 6e66 2c20 7269 7074 6162 6c65  .isinf, riptable
+0001a420: 2e69 736e 6f74 696e 662c 2072 6970 7461  .isnotinf, ripta
+0001a430: 626c 652e 6973 696e 662c 2072 6970 7461  ble.isinf, ripta
+0001a440: 626c 652e 6973 6669 6e69 7465 2c0d 0a20  ble.isfinite,.. 
+0001a450: 2020 2020 2020 2072 6970 7461 626c 652e         riptable.
+0001a460: 6973 6e6f 7466 696e 6974 652c 2046 6173  isnotfinite, Fas
+0001a470: 7441 7272 6179 2e69 7366 696e 6974 652c  tArray.isfinite,
+0001a480: 2046 6173 7441 7272 6179 2e69 736e 6f74   FastArray.isnot
+0001a490: 6669 6e69 7465 0d0a 2020 2020 2020 2020  finite..        
+0001a4a0: 4461 7461 7365 742e 6d61 736b 5f6f 725f  Dataset.mask_or_
+0001a4b0: 6973 6669 6e69 7465 203a 0d0a 2020 2020  isfinite :..    
+0001a4c0: 2020 2020 2020 2020 5265 7475 726e 2061          Return a
+0001a4d0: 2062 6f6f 6c65 616e 2061 7272 6179 2074   boolean array t
+0001a4e0: 6861 7427 7320 5472 7565 2066 6f72 2065  hat's True for e
+0001a4f0: 6163 6820 6044 6174 6173 6574 6020 726f  ach `Dataset` ro
+0001a500: 7720 7468 6174 2068 6173 2061 7420 6c65  w that has at le
+0001a510: 6173 740d 0a20 2020 2020 2020 2020 2020  ast..           
+0001a520: 206f 6e65 2066 696e 6974 6520 7661 6c75   one finite valu
+0001a530: 652e 0d0a 2020 2020 2020 2020 4461 7461  e...        Data
+0001a540: 7365 742e 6d61 736b 5f61 6e64 5f69 7366  set.mask_and_isf
+0001a550: 696e 6974 6520 3a0d 0a20 2020 2020 2020  inite :..       
+0001a560: 2020 2020 2052 6574 7572 6e20 6120 626f       Return a bo
+0001a570: 6f6c 6561 6e20 6172 7261 7920 7468 6174  olean array that
+0001a580: 2773 2054 7275 6520 666f 7220 6561 6368  's True for each
+0001a590: 2060 4461 7461 7365 7460 2072 6f77 2074   `Dataset` row t
+0001a5a0: 6861 7420 636f 6e74 6169 6e73 2061 6c6c  hat contains all
+0001a5b0: 0d0a 2020 2020 2020 2020 2020 2020 6669  ..            fi
+0001a5c0: 6e69 7465 2076 616c 7565 732e 0d0a 2020  nite values...  
+0001a5d0: 2020 2020 2020 4461 7461 7365 742e 6d61        Dataset.ma
+0001a5e0: 736b 5f6f 725f 6973 696e 6620 3a0d 0a20  sk_or_isinf :.. 
+0001a5f0: 2020 2020 2020 2020 2020 2052 6574 7572             Retur
+0001a600: 6e20 6120 626f 6f6c 6561 6e20 6172 7261  n a boolean arra
+0001a610: 7920 7468 6174 2773 2054 7275 6520 666f  y that's True fo
+0001a620: 7220 6561 6368 2060 4461 7461 7365 7460  r each `Dataset`
+0001a630: 2072 6f77 2074 6861 7420 6861 7320 6174   row that has at
+0001a640: 206c 6561 7374 0d0a 2020 2020 2020 2020   least..        
+0001a650: 2020 2020 6f6e 6520 7661 6c75 6520 7468      one value th
+0001a660: 6174 2773 2070 6f73 6974 6976 6520 6f72  at's positive or
+0001a670: 206e 6567 6174 6976 6520 696e 6669 6e69   negative infini
+0001a680: 7479 2e0d 0a20 2020 2020 2020 2044 6174  ty...        Dat
+0001a690: 6173 6574 2e6d 6173 6b5f 616e 645f 6973  aset.mask_and_is
+0001a6a0: 696e 6620 3a0d 0a20 2020 2020 2020 2020  inf :..         
+0001a6b0: 2020 2052 6574 7572 6e20 6120 626f 6f6c     Return a bool
+0001a6c0: 6561 6e20 6172 7261 7920 7468 6174 2773  ean array that's
+0001a6d0: 2054 7275 6520 666f 7220 6561 6368 2060   True for each `
+0001a6e0: 4461 7461 7365 7460 2072 6f77 2074 6861  Dataset` row tha
+0001a6f0: 7420 636f 6e74 6169 6e73 2061 6c6c 0d0a  t contains all..
+0001a700: 2020 2020 2020 2020 2020 2020 696e 6669              infi
+0001a710: 6e69 7465 2076 616c 7565 732e 0d0a 0d0a  nite values.....
+0001a720: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
+0001a730: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+0001a740: 2d2d 0d0a 2020 2020 2020 2020 3e3e 3e20  --..        >>> 
+0001a750: 6120 3d20 7274 2e46 6173 7441 7272 6179  a = rt.FastArray
+0001a760: 285b 6e70 2e69 6e66 2c20 6e70 2e4e 494e  ([np.inf, np.NIN
+0001a770: 462c 2072 742e 6e61 6e2c 2030 5d29 0d0a  F, rt.nan, 0])..
+0001a780: 2020 2020 2020 2020 3e3e 3e20 612e 6973          >>> a.is
+0001a790: 6e6f 7469 6e66 2829 0d0a 2020 2020 2020  notinf()..      
+0001a7a0: 2020 4661 7374 4172 7261 7928 5b46 616c    FastArray([Fal
+0001a7b0: 7365 2c20 4661 6c73 652c 2020 5472 7565  se, False,  True
+0001a7c0: 2c20 2054 7275 655d 290d 0a0d 0a20 2020  ,  True])....   
+0001a7d0: 2020 2020 2057 6974 6820 6060 6661 6e63       With ``fanc
+0001a7e0: 7920 3d20 5472 7565 6060 3a0d 0a0d 0a20  y = True``:.... 
+0001a7f0: 2020 2020 2020 203e 3e3e 2061 2e69 736e         >>> a.isn
+0001a800: 6f74 696e 6628 6661 6e63 7920 3d20 5472  otinf(fancy = Tr
+0001a810: 7565 290d 0a20 2020 2020 2020 2046 6173  ue)..        Fas
+0001a820: 7441 7272 6179 285b 322c 2033 5d29 0d0a  tArray([2, 3])..
+0001a830: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+0001a840: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0001a850: 2e5f 756e 6172 795f 6f70 284d 4154 485f  ._unary_op(MATH_
+0001a860: 4f50 4552 4154 494f 4e2e 4953 4e4f 5449  OPERATION.ISNOTI
+0001a870: 4e46 2c20 6661 6e63 793d 6661 6e63 7929  NF, fancy=fancy)
+0001a880: 0d0a 0d0a 2020 2020 2323 2323 2323 2323  ....    ########
 0001a890: 2323 2323 2323 2323 2323 2323 2323 2323  ################
 0001a8a0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0001a8b0: 2323 230d 0a0d 0a20 2020 2064 6566 205f  ###....    def _
-0001a8c0: 6661 5f66 696c 7465 725f 7772 6170 7065  fa_filter_wrappe
-0001a8d0: 7228 7365 6c66 2c20 6d79 4675 6e63 2c20  r(self, myFunc, 
-0001a8e0: 6669 6c74 6572 3d4e 6f6e 652c 2064 7479  filter=None, dty
-0001a8f0: 7065 3d4e 6f6e 6529 3a0d 0a20 2020 2020  pe=None):..     
-0001a900: 2020 2069 6620 6669 6c74 6572 2069 7320     if filter is 
-0001a910: 5472 7565 3a0d 0a20 2020 2020 2020 2020  True:..         
-0001a920: 2020 2066 696c 7465 7220 3d20 6f6e 6573     filter = ones
-0001a930: 286c 656e 2873 656c 6629 2c20 6474 7970  (len(self), dtyp
-0001a940: 653d 626f 6f6c 290d 0a20 2020 2020 2020  e=bool)..       
-0001a950: 2069 6620 6669 6c74 6572 2069 7320 4661   if filter is Fa
-0001a960: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-0001a970: 2020 6669 6c74 6572 203d 207a 6572 6f73    filter = zeros
-0001a980: 286c 656e 2873 656c 6629 2c20 6474 7970  (len(self), dtyp
-0001a990: 653d 626f 6f6c 290d 0a20 2020 2020 2020  e=bool)..       
-0001a9a0: 2069 6620 6c65 6e28 6669 6c74 6572 2920   if len(filter) 
-0001a9b0: 213d 206c 656e 2873 656c 6629 3a0d 0a20  != len(self):.. 
-0001a9c0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0001a9d0: 2056 616c 7565 4572 726f 7228 2246 696c   ValueError("Fil
-0001a9e0: 7465 7220 616e 6420 696e 7075 7420 6e6f  ter and input no
-0001a9f0: 7420 7468 6520 7361 6d65 206c 656e 6774  t the same lengt
-0001aa00: 682e 2229 0d0a 0d0a 2020 2020 2020 2020  h.")....        
-0001aa10: 6966 206e 6f74 2073 656c 662e 6973 636f  if not self.isco
-0001aa20: 6d70 7574 6162 6c65 2829 3a0d 0a20 2020  mputable():..   
-0001aa30: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0001aa40: 6e70 2e4e 614e 0d0a 0d0a 2020 2020 2020  np.NaN....      
-0001aa50: 2020 6966 2064 7479 7065 2069 7320 6e6f    if dtype is no
-0001aa60: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
-0001aa70: 2020 2020 2072 6574 7572 6e20 6474 7970       return dtyp
-0001aa80: 6528 6d79 4675 6e63 2873 656c 662c 2066  e(myFunc(self, f
-0001aa90: 696c 7465 7229 290d 0a0d 0a20 2020 2020  ilter))....     
-0001aaa0: 2020 2072 6574 7572 6e20 6d79 4675 6e63     return myFunc
-0001aab0: 2873 656c 662c 2066 696c 7465 7229 0d0a  (self, filter)..
-0001aac0: 0d0a 2020 2020 6465 6620 5f66 615f 6b65  ..    def _fa_ke
-0001aad0: 7977 6f72 645f 7772 6170 7065 7228 7365  yword_wrapper(se
-0001aae0: 6c66 2c20 6669 6c74 6572 3d4e 6f6e 652c  lf, filter=None,
-0001aaf0: 2064 7479 7065 3d4e 6f6e 652c 2061 7869   dtype=None, axi
-0001ab00: 733d 4e6f 6e65 2c20 6b65 6570 6469 6d73  s=None, keepdims
-0001ab10: 3d4e 6f6e 652c 2064 646f 663d 4e6f 6e65  =None, ddof=None
-0001ab20: 2c20 2a2a 6b77 6172 6773 293a 0d0a 2020  , **kwargs):..  
-0001ab30: 2020 2020 2020 6966 2073 656c 662e 6474        if self.dt
-0001ab40: 7970 652e 6368 6172 2069 6e20 224f 5355  ype.char in "OSU
-0001ab50: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
-0001ab60: 7261 6973 6520 5479 7065 4572 726f 7228  raise TypeError(
-0001ab70: 2246 6173 7441 7272 6179 206f 7065 7261  "FastArray opera
-0001ab80: 7469 6f6e 2061 7070 6c69 6564 2074 6f20  tion applied to 
-0001ab90: 7374 7269 6e67 206f 7220 6f62 6a65 6374  string or object
-0001aba0: 2061 7272 6179 2e22 290d 0a0d 0a20 2020   array.")....   
-0001abb0: 2020 2020 2069 6620 226f 7574 2220 696e       if "out" in
-0001abc0: 206b 7761 7267 733a 0d0a 2020 2020 2020   kwargs:..      
-0001abd0: 2020 2020 2020 6966 206b 7761 7267 735b        if kwargs[
-0001abe0: 226f 7574 225d 2069 7320 4e6f 6e65 3a0d  "out"] is None:.
-0001abf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ac00: 206b 7761 7267 732e 706f 7028 226f 7574   kwargs.pop("out
-0001ac10: 2229 0d0a 0d0a 2020 2020 2020 2020 6966  ")....        if
-0001ac20: 2061 6e79 286b 7761 7267 7329 3a0d 0a20   any(kwargs):.. 
-0001ac30: 2020 2020 2020 2020 2020 206c 6f67 6769             loggi
-0001ac40: 6e67 2e77 6172 6e69 6e67 280d 0a20 2020  ng.warning(..   
-0001ac50: 2020 2020 2020 2020 2020 2020 2022 556e               "Un
-0001ac60: 6578 7065 6374 6564 2046 6173 7441 7272  expected FastArr
-0001ac70: 6179 206f 7065 7261 7469 6f6e 206b 6579  ay operation key
-0001ac80: 776f 7264 2873 293a 2022 202b 2022 2c20  word(s): " + ", 
-0001ac90: 222e 6a6f 696e 285b 6b65 7920 666f 7220  ".join([key for 
-0001aca0: 6b65 792c 2076 616c 7565 2069 6e20 6b77  key, value in kw
-0001acb0: 6172 6773 2e69 7465 6d73 2829 5d29 0d0a  args.items()])..
-0001acc0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
-0001acd0: 0a20 2020 2020 2020 2069 6620 6474 7970  .        if dtyp
-0001ace0: 6520 6973 206e 6f74 204e 6f6e 653a 0d0a  e is not None:..
-0001acf0: 2020 2020 2020 2020 2020 2020 6b77 6172              kwar
-0001ad00: 6773 5b22 6474 7970 6522 5d20 3d20 6474  gs["dtype"] = dt
-0001ad10: 7970 650d 0a20 2020 2020 2020 2069 6620  ype..        if 
-0001ad20: 6178 6973 3a0d 0a20 2020 2020 2020 2020  axis:..         
-0001ad30: 2020 206b 7761 7267 735b 2261 7869 7322     kwargs["axis"
-0001ad40: 5d20 3d20 6178 6973 0d0a 2020 2020 2020  ] = axis..      
-0001ad50: 2020 6966 206b 6565 7064 696d 733a 0d0a    if keepdims:..
-0001ad60: 2020 2020 2020 2020 2020 2020 6b77 6172              kwar
-0001ad70: 6773 5b22 6b65 6570 6469 6d73 225d 203d  gs["keepdims"] =
-0001ad80: 206b 6565 7064 696d 730d 0a20 2020 2020   keepdims..     
-0001ad90: 2020 2069 6620 6464 6f66 2069 7320 6e6f     if ddof is no
-0001ada0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
-0001adb0: 2020 2020 206b 7761 7267 735b 2264 646f       kwargs["ddo
-0001adc0: 6622 5d20 3d20 6464 6f66 0d0a 2020 2020  f"] = ddof..    
-0001add0: 2020 2020 6966 2066 696c 7465 7220 6973      if filter is
-0001ade0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-0001adf0: 2020 2020 2020 2020 6b77 6172 6773 5b22          kwargs["
-0001ae00: 6669 6c74 6572 225d 203d 2066 696c 7465  filter"] = filte
-0001ae10: 720d 0a0d 0a20 2020 2020 2020 2069 6620  r....        if 
-0001ae20: 2866 696c 7465 7220 6973 206e 6f74 204e  (filter is not N
-0001ae30: 6f6e 6529 2061 6e64 2028 2861 7869 7320  one) and ((axis 
-0001ae40: 6973 206e 6f74 204e 6f6e 6529 206f 7220  is not None) or 
-0001ae50: 286b 6565 7064 696d 7320 6973 206e 6f74  (keepdims is not
-0001ae60: 204e 6f6e 6529 206f 7220 2864 646f 6620   None) or (ddof 
-0001ae70: 6973 206e 6f74 204e 6f6e 6529 293a 0d0a  is not None)):..
-0001ae80: 2020 2020 2020 2020 2020 2020 6c6f 6767              logg
-0001ae90: 696e 672e 7761 726e 696e 6728 2253 696e  ing.warning("Sin
-0001aea0: 6365 2046 696c 7465 7220 6b65 7977 6f72  ce Filter keywor
-0001aeb0: 6420 6973 2070 7265 7365 6e74 2c20 4661  d is present, Fa
-0001aec0: 7374 4172 7261 7920 6f70 6572 6174 696f  stArray operatio
-0001aed0: 6e73 2069 676e 6f72 6520 6178 6973 2c20  ns ignore axis, 
-0001aee0: 6b65 6570 6469 6d73 2061 6e64 2064 646f  keepdims and ddo
-0001aef0: 6622 290d 0a0d 0a20 2020 2020 2020 2072  f")....        r
-0001af00: 6574 7572 6e20 6b77 6172 6773 0d0a 0d0a  eturn kwargs....
-0001af10: 2020 2020 6465 6620 6e61 6e73 756d 2873      def nansum(s
-0001af20: 656c 662c 2066 696c 7465 723d 4e6f 6e65  elf, filter=None
-0001af30: 2c20 6474 7970 653d 4e6f 6e65 2c20 6178  , dtype=None, ax
-0001af40: 6973 3d4e 6f6e 652c 206b 6565 7064 696d  is=None, keepdim
-0001af50: 733d 4e6f 6e65 2c20 2a2a 6b77 6172 6773  s=None, **kwargs
-0001af60: 2920 2d3e 206e 702e 6e75 6d62 6572 3a0d  ) -> np.number:.
-0001af70: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-0001af80: 2020 2020 2020 436f 6d70 7574 6520 7468        Compute th
-0001af90: 6520 7375 6d20 6f66 2074 6865 2076 616c  e sum of the val
-0001afa0: 7565 7320 696e 2074 6865 2066 6972 7374  ues in the first
-0001afb0: 2061 7267 756d 656e 742c 2069 676e 6f72   argument, ignor
-0001afc0: 696e 6720 4e61 4e73 2e0d 0a0d 0a20 2020  ing NaNs.....   
-0001afd0: 2020 2020 2049 6620 616c 6c20 7661 6c75       If all valu
-0001afe0: 6573 2069 6e20 7468 6520 6669 7273 7420  es in the first 
-0001aff0: 6172 6775 6d65 6e74 2061 7265 204e 614e  argument are NaN
-0001b000: 732c 2060 6030 2e30 6060 2069 7320 7265  s, ``0.0`` is re
-0001b010: 7475 726e 6564 2e0d 0a0d 0a20 2020 2020  turned.....     
-0001b020: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
-0001b030: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
-0001b040: 2d0d 0a20 2020 2020 2020 2066 696c 7465  -..        filte
-0001b050: 7220 3a20 6172 7261 7920 6f66 2062 6f6f  r : array of boo
-0001b060: 6c2c 2064 6566 6175 6c74 204e 6f6e 650d  l, default None.
-0001b070: 0a20 2020 2020 2020 2020 2020 2053 7065  .            Spe
-0001b080: 6369 6669 6573 2077 6869 6368 2065 6c65  cifies which ele
-0001b090: 6d65 6e74 7320 746f 2069 6e63 6c75 6465  ments to include
-0001b0a0: 2069 6e20 7468 6520 7375 6d20 6361 6c63   in the sum calc
-0001b0b0: 756c 6174 696f 6e2e 2049 6620 7468 6520  ulation. If the 
-0001b0c0: 6669 6c74 6572 2069 730d 0a20 2020 2020  filter is..     
-0001b0d0: 2020 2020 2020 2075 6e69 666f 726d 6c79         uniformly
-0001b0e0: 2060 6046 616c 7365 6060 2c20 606e 616e   ``False``, `nan
-0001b0f0: 7375 6d60 2072 6574 7572 6e73 2060 6030  sum` returns ``0
-0001b100: 2e30 6060 2e0d 0a20 2020 2020 2020 2064  .0``...        d
-0001b110: 7479 7065 203a 2072 742e 6474 7970 6520  type : rt.dtype 
-0001b120: 6f72 206e 756d 7079 2e64 7479 7065 2c20  or numpy.dtype, 
-0001b130: 6465 6661 756c 7420 666c 6f61 7436 340d  default float64.
-0001b140: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
-0001b150: 2064 6174 6120 7479 7065 206f 6620 7468   data type of th
-0001b160: 6520 7265 7375 6c74 2e20 466f 7220 6120  e result. For a 
-0001b170: 6046 6173 7441 7272 6179 6020 6060 7860  `FastArray` ``x`
-0001b180: 602c 0d0a 2020 2020 2020 2020 2020 2020  `,..            
-0001b190: 6060 782e 6e61 6e73 756d 2864 7479 7065  ``x.nansum(dtype
-0001b1a0: 203d 206d 795f 7479 7065 2960 6020 6973   = my_type)`` is
-0001b1b0: 2065 7175 6976 616c 656e 7420 746f 2060   equivalent to `
-0001b1c0: 606d 795f 7479 7065 2878 2e6e 616e 7375  `my_type(x.nansu
-0001b1d0: 6d28 2929 6060 2e0d 0a0d 0a20 2020 2020  m())``.....     
-0001b1e0: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
-0001b1f0: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
-0001b200: 2020 2020 2073 6361 6c61 720d 0a20 2020       scalar..   
-0001b210: 2020 2020 2020 2020 2054 6865 2073 756d           The sum
-0001b220: 206f 6620 7468 6520 7661 6c75 6573 2e0d   of the values..
-0001b230: 0a0d 0a20 2020 2020 2020 2053 6565 2041  ...        See A
-0001b240: 6c73 6f0d 0a20 2020 2020 2020 202d 2d2d  lso..        ---
-0001b250: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 206e  -----..        n
-0001b260: 756d 7079 2e6e 616e 7375 6d0d 0a20 2020  umpy.nansum..   
-0001b270: 2020 2020 2044 6174 6173 6574 2e6e 616e       Dataset.nan
-0001b280: 7375 6d20 3a20 5375 6d73 2074 6865 2076  sum : Sums the v
-0001b290: 616c 7565 7320 6f66 206e 756d 6572 6963  alues of numeric
-0001b2a0: 616c 2060 4461 7461 7365 7460 2063 6f6c  al `Dataset` col
-0001b2b0: 756d 6e73 2c20 6967 6e6f 7269 6e67 204e  umns, ignoring N
-0001b2c0: 614e 732e 0d0a 2020 2020 2020 2020 4772  aNs...        Gr
-0001b2d0: 6f75 7042 794f 7073 2e6e 616e 7375 6d20  oupByOps.nansum 
-0001b2e0: 3a20 5375 6d73 2074 6865 2076 616c 7565  : Sums the value
-0001b2f0: 7320 6f66 2065 6163 6820 6772 6f75 702c  s of each group,
-0001b300: 2069 676e 6f72 696e 6720 4e61 4e73 2e20   ignoring NaNs. 
-0001b310: 5573 6564 2062 790d 0a20 2020 2020 2020  Used by..       
-0001b320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b330: 2020 2020 2060 4361 7465 676f 7269 6361       `Categorica
-0001b340: 6c60 206f 626a 6563 7473 2e0d 0a0d 0a20  l` objects..... 
-0001b350: 2020 2020 2020 204e 6f74 6573 0d0a 2020         Notes..  
-0001b360: 2020 2020 2020 2d2d 2d2d 2d0d 0a20 2020        -----..   
-0001b370: 2020 2020 2054 6865 2060 6474 7970 6560       The `dtype`
-0001b380: 206b 6579 776f 7264 2066 6f72 2060 4661   keyword for `Fa
-0001b390: 7374 4172 7261 792e 6e61 6e73 756d 6020  stArray.nansum` 
-0001b3a0: 7370 6563 6966 6965 7320 7468 6520 6461  specifies the da
-0001b3b0: 7461 2074 7970 6520 6f66 2074 6865 0d0a  ta type of the..
-0001b3c0: 2020 2020 2020 2020 7265 7375 6c74 2e20          result. 
-0001b3d0: 5468 6973 2064 6966 6665 7273 2066 726f  This differs fro
-0001b3e0: 6d20 606e 756d 7079 2e6e 616e 7375 6d60  m `numpy.nansum`
-0001b3f0: 2c20 7768 6572 6520 6974 2073 7065 6369  , where it speci
-0001b400: 6669 6573 2074 6865 2064 6174 6120 7479  fies the data ty
-0001b410: 7065 2075 7365 640d 0a20 2020 2020 2020  pe used..       
-0001b420: 2074 6f20 636f 6d70 7574 6520 7468 6520   to compute the 
-0001b430: 7375 6d2e 0d0a 0d0a 2020 2020 2020 2020  sum.....        
-0001b440: 2a2a 4e6f 7465 7320 6f6e 2055 7369 6e67  **Notes on Using
-0001b450: 204e 756d 5079 2050 6172 616d 6574 6572   NumPy Parameter
-0001b460: 732a 2a0d 0a0d 0a20 2020 2020 2020 2055  s**....        U
-0001b470: 7369 6e67 2065 6974 6865 7220 6f66 2074  sing either of t
-0001b480: 6865 2066 6f6c 6c6f 7769 6e67 204e 756d  he following Num
-0001b490: 5079 2070 6172 616d 6574 6572 7320 7769  Py parameters wi
-0001b4a0: 6c6c 2063 6175 7365 2052 6970 7461 626c  ll cause Riptabl
-0001b4b0: 6520 746f 2073 7769 7463 6820 746f 0d0a  e to switch to..
-0001b4c0: 2020 2020 2020 2020 7468 6520 4e75 6d50          the NumP
-0001b4d0: 7920 696d 706c 656d 656e 7461 7469 6f6e  y implementation
-0001b4e0: 206f 6620 7468 6973 206d 6574 686f 6420   of this method 
-0001b4f0: 2860 6e75 6d70 792e 6e61 6e73 756d 6029  (`numpy.nansum`)
-0001b500: 2e20 486f 7765 7665 722c 2075 6e74 696c  . However, until
-0001b510: 2061 0d0a 2020 2020 2020 2020 7265 706f   a..        repo
-0001b520: 7274 6564 2062 7567 2069 7320 6669 7865  rted bug is fixe
-0001b530: 642c 2069 6620 796f 7520 616c 736f 2069  d, if you also i
-0001b540: 6e63 6c75 6465 2074 6865 2060 6474 7970  nclude the `dtyp
-0001b550: 6560 2070 6172 616d 6574 6572 2069 7420  e` parameter it 
-0001b560: 7769 6c6c 2062 650d 0a20 2020 2020 2020  will be..       
-0001b570: 2061 7070 6c69 6564 2074 6f20 7468 6520   applied to the 
-0001b580: 7265 7375 6c74 2c20 6e6f 7420 7573 6564  result, not used
-0001b590: 2074 6f20 636f 6d70 7574 6520 7468 6520   to compute the 
-0001b5a0: 7375 6d20 6173 2069 7420 6973 2069 6e20  sum as it is in 
-0001b5b0: 606e 756d 7079 2e6e 616e 7375 6d60 2e0d  `numpy.nansum`..
-0001b5c0: 0a0d 0a20 2020 2020 2020 2041 6c73 6f20  ...        Also 
-0001b5d0: 6e6f 7465 2074 6861 7420 6966 2079 6f75  note that if you
-0001b5e0: 2075 7365 2065 6974 6865 7220 6f66 2074   use either of t
-0001b5f0: 6865 2066 6f6c 6c6f 7769 6e67 204e 756d  he following Num
-0001b600: 5079 2070 6172 616d 6574 6572 7320 616e  Py parameters an
-0001b610: 6420 616c 736f 0d0a 2020 2020 2020 2020  d also..        
-0001b620: 696e 636c 7564 6520 6120 6066 696c 7465  include a `filte
-0001b630: 7260 206b 6579 776f 7264 2061 7267 756d  r` keyword argum
-0001b640: 656e 7420 2877 6869 6368 2060 6e75 6d70  ent (which `nump
-0001b650: 792e 6e61 6e73 756d 6020 646f 6573 206e  y.nansum` does n
-0001b660: 6f74 2061 6363 6570 7429 2c0d 0a20 2020  ot accept),..   
-0001b670: 2020 2020 2052 6970 7461 626c 6527 7320       Riptable's 
-0001b680: 696d 706c 656d 656e 7461 7469 6f6e 206f  implementation o
-0001b690: 6620 606e 616e 7375 6d60 2077 696c 6c20  f `nansum` will 
-0001b6a0: 6265 2075 7365 6420 7769 7468 2074 6865  be used with the
-0001b6b0: 2066 696c 7465 7220 6172 6775 6d65 6e74   filter argument
-0001b6c0: 2061 6e64 0d0a 2020 2020 2020 2020 7468   and..        th
-0001b6d0: 6520 4e75 6d50 7920 7061 7261 6d65 7465  e NumPy paramete
-0001b6e0: 7273 2077 696c 6c20 6265 2069 676e 6f72  rs will be ignor
-0001b6f0: 6564 2e0d 0a0d 0a20 2020 2020 2020 2061  ed.....        a
-0001b700: 7869 7320 3a20 7b69 6e74 2c20 7475 706c  xis : {int, tupl
-0001b710: 6520 6f66 2069 6e74 2c20 4e6f 6e65 7d2c  e of int, None},
-0001b720: 206f 7074 696f 6e61 6c0d 0a20 2020 2020   optional..     
-0001b730: 2020 2020 2020 2041 7869 7320 6f72 2061         Axis or a
-0001b740: 7865 7320 616c 6f6e 6720 7768 6963 6820  xes along which 
-0001b750: 7468 6520 7375 6d20 6973 2063 6f6d 7075  the sum is compu
-0001b760: 7465 642e 2054 6865 2064 6566 6175 6c74  ted. The default
-0001b770: 2069 7320 746f 2063 6f6d 7075 7465 2074   is to compute t
-0001b780: 6865 0d0a 2020 2020 2020 2020 2020 2020  he..            
-0001b790: 7375 6d20 6f66 2074 6865 2066 6c61 7474  sum of the flatt
-0001b7a0: 656e 6564 2061 7272 6179 2e0d 0a0d 0a20  ened array..... 
-0001b7b0: 2020 2020 2020 206b 6565 7064 696d 7320         keepdims 
-0001b7c0: 3a20 626f 6f6c 2c20 6f70 7469 6f6e 616c  : bool, optional
-0001b7d0: 0d0a 2020 2020 2020 2020 2020 2020 4966  ..            If
-0001b7e0: 2074 6869 7320 6973 2073 6574 2074 6f20   this is set to 
-0001b7f0: 5472 7565 2c20 7468 6520 6178 6573 2077  True, the axes w
-0001b800: 6869 6368 2061 7265 2072 6564 7563 6564  hich are reduced
-0001b810: 2061 7265 206c 6566 7420 696e 2074 6865   are left in the
-0001b820: 2072 6573 756c 7420 6173 0d0a 2020 2020   result as..    
-0001b830: 2020 2020 2020 2020 6469 6d65 6e73 696f          dimensio
-0001b840: 6e73 2077 6974 6820 7369 7a65 206f 6e65  ns with size one
-0001b850: 2e20 5769 7468 2074 6869 7320 6f70 7469  . With this opti
-0001b860: 6f6e 2c20 7468 6520 7265 7375 6c74 2077  on, the result w
-0001b870: 696c 6c20 6272 6f61 6463 6173 740d 0a20  ill broadcast.. 
-0001b880: 2020 2020 2020 2020 2020 2063 6f72 7265             corre
-0001b890: 6374 6c79 2061 6761 696e 7374 2074 6865  ctly against the
-0001b8a0: 206f 7269 6769 6e61 6c20 696e 7075 7420   original input 
-0001b8b0: 6172 7261 792e 0d0a 0d0a 2020 2020 2020  array.....      
-0001b8c0: 2020 2020 2020 4966 2074 6865 2076 616c        If the val
-0001b8d0: 7565 2069 7320 616e 7974 6869 6e67 2062  ue is anything b
-0001b8e0: 7574 2074 6865 2064 6566 6175 6c74 2c20  ut the default, 
-0001b8f0: 7468 656e 2060 6b65 6570 6469 6d73 6020  then `keepdims` 
-0001b900: 7769 6c6c 2062 6520 7061 7373 6564 0d0a  will be passed..
-0001b910: 2020 2020 2020 2020 2020 2020 7468 726f              thro
-0001b920: 7567 6820 746f 2074 6865 2060 6d65 616e  ugh to the `mean
-0001b930: 6020 6f72 2060 7375 6d60 206d 6574 686f  ` or `sum` metho
-0001b940: 6473 206f 6620 7375 622d 636c 6173 7365  ds of sub-classe
-0001b950: 7320 6f66 2060 6e64 6172 7261 7960 2e20  s of `ndarray`. 
-0001b960: 4966 2074 6865 0d0a 2020 2020 2020 2020  If the..        
-0001b970: 2020 2020 7375 622d 636c 6173 7365 7327      sub-classes'
-0001b980: 206d 6574 686f 6473 2064 6f20 6e6f 7420   methods do not 
-0001b990: 696d 706c 656d 656e 7420 606b 6565 7064  implement `keepd
-0001b9a0: 696d 7360 2c20 616e 7920 6578 6365 7074  ims`, any except
-0001b9b0: 696f 6e73 2077 696c 6c20 6265 0d0a 2020  ions will be..  
-0001b9c0: 2020 2020 2020 2020 2020 7261 6973 6564            raised
-0001b9d0: 2e0d 0a0d 0a20 2020 2020 2020 2045 7861  .....        Exa
-0001b9e0: 6d70 6c65 730d 0a20 2020 2020 2020 202d  mples..        -
-0001b9f0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-0001ba00: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
-0001ba10: 4172 7261 7928 5b31 2c20 332c 2035 2c20  Array([1, 3, 5, 
-0001ba20: 372c 2072 742e 6e61 6e5d 290d 0a20 2020  7, rt.nan])..   
-0001ba30: 2020 2020 203e 3e3e 2061 2e6e 616e 7375       >>> a.nansu
-0001ba40: 6d28 290d 0a20 2020 2020 2020 2031 362e  m()..        16.
-0001ba50: 300d 0a0d 0a20 2020 2020 2020 2057 6974  0....        Wit
-0001ba60: 6820 6120 6064 7479 7065 6020 7370 6563  h a `dtype` spec
-0001ba70: 6966 6965 643a 0d0a 0d0a 2020 2020 2020  ified:....      
-0001ba80: 2020 3e3e 3e20 6120 3d20 7274 2e46 6173    >>> a = rt.Fas
-0001ba90: 7441 7272 6179 285b 312e 302c 2033 2e30  tArray([1.0, 3.0
-0001baa0: 2c20 352e 302c 2037 2e30 2c20 7274 2e6e  , 5.0, 7.0, rt.n
-0001bab0: 616e 5d29 0d0a 2020 2020 2020 2020 3e3e  an])..        >>
-0001bac0: 3e20 612e 6e61 6e73 756d 2864 7479 7065  > a.nansum(dtype
-0001bad0: 203d 2072 742e 696e 7433 3229 0d0a 2020   = rt.int32)..  
-0001bae0: 2020 2020 2020 3136 0d0a 0d0a 2020 2020        16....    
-0001baf0: 2020 2020 5769 7468 2061 2066 696c 7465      With a filte
-0001bb00: 723a 0d0a 0d0a 2020 2020 2020 2020 3e3e  r:....        >>
-0001bb10: 3e20 6120 3d20 7274 2e46 6173 7441 7272  > a = rt.FastArr
-0001bb20: 6179 285b 312c 2033 2c20 352c 2037 2c20  ay([1, 3, 5, 7, 
-0001bb30: 7274 2e6e 616e 5d29 0d0a 2020 2020 2020  rt.nan])..      
-0001bb40: 2020 3e3e 3e20 6220 3d20 7274 2e46 6173    >>> b = rt.Fas
-0001bb50: 7441 7272 6179 285b 4661 6c73 652c 2054  tArray([False, T
-0001bb60: 7275 652c 2046 616c 7365 2c20 5472 7565  rue, False, True
-0001bb70: 2c20 5472 7565 5d29 0d0a 2020 2020 2020  , True])..      
-0001bb80: 2020 3e3e 3e20 612e 6e61 6e73 756d 2866    >>> a.nansum(f
-0001bb90: 696c 7465 7220 3d20 6229 0d0a 2020 2020  ilter = b)..    
-0001bba0: 2020 2020 3130 2e30 0d0a 2020 2020 2020      10.0..      
-0001bbb0: 2020 2222 220d 0a0d 0a20 2020 2020 2020    """....       
-0001bbc0: 206b 7761 7267 7320 3d20 7365 6c66 2e5f   kwargs = self._
-0001bbd0: 6661 5f6b 6579 776f 7264 5f77 7261 7070  fa_keyword_wrapp
-0001bbe0: 6572 2866 696c 7465 723d 6669 6c74 6572  er(filter=filter
-0001bbf0: 2c20 6474 7970 653d 6474 7970 652c 2061  , dtype=dtype, a
-0001bc00: 7869 733d 6178 6973 2c20 6b65 6570 6469  xis=axis, keepdi
-0001bc10: 6d73 3d6b 6565 7064 696d 732c 2064 646f  ms=keepdims, ddo
-0001bc20: 663d 4e6f 6e65 2c20 2a2a 6b77 6172 6773  f=None, **kwargs
-0001bc30: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
-0001bc40: 6669 6c74 6572 2069 7320 6e6f 7420 4e6f  filter is not No
-0001bc50: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-0001bc60: 2072 6574 7572 6e20 7365 6c66 2e5f 6661   return self._fa
-0001bc70: 5f66 696c 7465 725f 7772 6170 7065 7228  _filter_wrapper(
-0001bc80: 5f66 6e61 6e73 756d 2c20 6669 6c74 6572  _fnansum, filter
-0001bc90: 3d66 696c 7465 722c 2064 7479 7065 3d64  =filter, dtype=d
-0001bca0: 7479 7065 290d 0a0d 0a20 2020 2020 2020  type)....       
-0001bcb0: 2072 6574 7572 6e20 7365 6c66 2e5f 7265   return self._re
-0001bcc0: 6475 6365 5f63 6865 636b 2852 4544 5543  duce_check(REDUC
-0001bcd0: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
-0001bce0: 4345 5f4e 414e 5355 4d2c 206e 702e 6e61  CE_NANSUM, np.na
-0001bcf0: 6e73 756d 2c20 2a2a 6b77 6172 6773 290d  nsum, **kwargs).
-0001bd00: 0a0d 0a20 2020 2064 6566 206d 6561 6e28  ...    def mean(
-0001bd10: 7365 6c66 2c20 6669 6c74 6572 3d4e 6f6e  self, filter=Non
-0001bd20: 652c 2064 7479 7065 3d4e 6f6e 652c 2061  e, dtype=None, a
-0001bd30: 7869 733d 4e6f 6e65 2c20 6b65 6570 6469  xis=None, keepdi
-0001bd40: 6d73 3d4e 6f6e 652c 202a 2a6b 7761 7267  ms=None, **kwarg
-0001bd50: 7329 202d 3e20 6e70 2e6e 756d 6265 723a  s) -> np.number:
-0001bd60: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-0001bd70: 2020 2020 2020 2043 6f6d 7075 7465 2074         Compute t
-0001bd80: 6865 2061 7269 7468 6d65 7469 6320 6d65  he arithmetic me
-0001bd90: 616e 206f 6620 7468 6520 7661 6c75 6573  an of the values
-0001bda0: 2069 6e20 7468 6520 6669 7273 7420 6172   in the first ar
-0001bdb0: 6775 6d65 6e74 2e0d 0a0d 0a20 2020 2020  gument.....     
-0001bdc0: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
-0001bdd0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
-0001bde0: 2d0d 0a20 2020 2020 2020 2066 696c 7465  -..        filte
-0001bdf0: 7220 3a20 6172 7261 7920 6f66 2062 6f6f  r : array of boo
-0001be00: 6c2c 2064 6566 6175 6c74 204e 6f6e 650d  l, default None.
-0001be10: 0a20 2020 2020 2020 2020 2020 2053 7065  .            Spe
-0001be20: 6369 6669 6573 2077 6869 6368 2065 6c65  cifies which ele
-0001be30: 6d65 6e74 7320 746f 2069 6e63 6c75 6465  ments to include
-0001be40: 2069 6e20 7468 6520 6d65 616e 2063 616c   in the mean cal
-0001be50: 6375 6c61 7469 6f6e 2e20 4966 2074 6865  culation. If the
-0001be60: 2066 696c 7465 720d 0a20 2020 2020 2020   filter..       
-0001be70: 2020 2020 2069 7320 756e 6966 6f72 6d6c       is uniforml
-0001be80: 7920 6060 4661 6c73 6560 602c 2060 6d65  y ``False``, `me
-0001be90: 616e 6020 7265 7475 726e 7320 6120 605a  an` returns a `Z
-0001bea0: 6572 6f44 6976 6973 696f 6e45 7272 6f72  eroDivisionError
-0001beb0: 602e 0d0a 2020 2020 2020 2020 6474 7970  `...        dtyp
-0001bec0: 6520 3a20 7274 2e64 7479 7065 206f 7220  e : rt.dtype or 
-0001bed0: 6e75 6d70 792e 6474 7970 652c 2064 6566  numpy.dtype, def
-0001bee0: 6175 6c74 2066 6c6f 6174 3634 0d0a 2020  ault float64..  
-0001bef0: 2020 2020 2020 2020 2020 5468 6520 6461            The da
-0001bf00: 7461 2074 7970 6520 6f66 2074 6865 2072  ta type of the r
-0001bf10: 6573 756c 742e 2046 6f72 2061 2060 4661  esult. For a `Fa
-0001bf20: 7374 4172 7261 7960 2060 6078 6060 2c0d  stArray` ``x``,.
-0001bf30: 0a20 2020 2020 2020 2020 2020 2060 6078  .            ``x
-0001bf40: 2e6d 6561 6e28 6474 7970 6520 3d20 6d79  .mean(dtype = my
-0001bf50: 5f74 7970 6529 6060 2069 7320 6571 7569  _type)`` is equi
-0001bf60: 7661 6c65 6e74 2074 6f20 6060 6d79 5f74  valent to ``my_t
-0001bf70: 7970 6528 782e 6d65 616e 2829 2960 602e  ype(x.mean())``.
-0001bf80: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
-0001bf90: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
-0001bfa0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 7363  ----..        sc
-0001bfb0: 616c 6172 0d0a 2020 2020 2020 2020 2020  alar..          
-0001bfc0: 2020 5468 6520 6d65 616e 206f 6620 7468    The mean of th
-0001bfd0: 6520 7661 6c75 6573 2e0d 0a0d 0a20 2020  e values.....   
-0001bfe0: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
-0001bff0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-0001c000: 0a20 2020 2020 2020 206e 756d 7079 2e6d  .        numpy.m
-0001c010: 6561 6e0d 0a20 2020 2020 2020 2046 6173  ean..        Fas
-0001c020: 7441 7272 6179 2e6e 616e 6d65 616e 203a  tArray.nanmean :
-0001c030: 2043 6f6d 7075 7465 7320 7468 6520 6d65   Computes the me
-0001c040: 616e 206f 6620 6046 6173 7441 7272 6179  an of `FastArray
-0001c050: 6020 7661 6c75 6573 2c20 6967 6e6f 7269  ` values, ignori
-0001c060: 6e67 204e 614e 732e 0d0a 2020 2020 2020  ng NaNs...      
-0001c070: 2020 4461 7461 7365 742e 6d65 616e 203a    Dataset.mean :
-0001c080: 2043 6f6d 7075 7465 7320 7468 6520 6d65   Computes the me
-0001c090: 616e 206f 6620 6e75 6d65 7269 6361 6c20  an of numerical 
-0001c0a0: 6044 6174 6173 6574 6020 636f 6c75 6d6e  `Dataset` column
-0001c0b0: 732e 0d0a 2020 2020 2020 2020 4772 6f75  s...        Grou
-0001c0c0: 7042 794f 7073 2e6d 6561 6e20 3a20 436f  pByOps.mean : Co
-0001c0d0: 6d70 7574 6573 2074 6865 206d 6561 6e20  mputes the mean 
-0001c0e0: 6f66 2065 6163 6820 6772 6f75 702e 2055  of each group. U
-0001c0f0: 7365 6420 6279 2060 4361 7465 676f 7269  sed by `Categori
-0001c100: 6361 6c60 206f 626a 6563 7473 2e0d 0a0d  cal` objects....
-0001c110: 0a20 2020 2020 2020 204e 6f74 6573 0d0a  .        Notes..
-0001c120: 2020 2020 2020 2020 2d2d 2d2d 2d0d 0a20          -----.. 
-0001c130: 2020 2020 2020 2054 6865 2060 6474 7970         The `dtyp
-0001c140: 6560 206b 6579 776f 7264 2066 6f72 2060  e` keyword for `
-0001c150: 4661 7374 4172 7261 792e 6d65 616e 6020  FastArray.mean` 
-0001c160: 7370 6563 6966 6965 7320 7468 6520 6461  specifies the da
-0001c170: 7461 2074 7970 6520 6f66 2074 6865 2072  ta type of the r
-0001c180: 6573 756c 742e 0d0a 2020 2020 2020 2020  esult...        
-0001c190: 5468 6973 2064 6966 6665 7273 2066 726f  This differs fro
-0001c1a0: 6d20 606e 756d 7079 2e6d 6561 6e60 2c20  m `numpy.mean`, 
-0001c1b0: 7768 6572 6520 6974 2073 7065 6369 6669  where it specifi
-0001c1c0: 6573 2074 6865 2064 6174 6120 7479 7065  es the data type
-0001c1d0: 2075 7365 6420 746f 2063 6f6d 7075 7465   used to compute
-0001c1e0: 0d0a 2020 2020 2020 2020 7468 6520 6d65  ..        the me
-0001c1f0: 616e 2e0d 0a0d 0a20 2020 2020 2020 202a  an.....        *
-0001c200: 2a4e 6f74 6573 206f 6e20 5573 696e 6720  *Notes on Using 
-0001c210: 4e75 6d50 7920 5061 7261 6d65 7465 7273  NumPy Parameters
-0001c220: 2a2a 0d0a 0d0a 2020 2020 2020 2020 5573  **....        Us
-0001c230: 696e 6720 6569 7468 6572 206f 6620 7468  ing either of th
-0001c240: 6520 666f 6c6c 6f77 696e 6720 4e75 6d50  e following NumP
-0001c250: 7920 7061 7261 6d65 7465 7273 2077 696c  y parameters wil
-0001c260: 6c20 6361 7573 6520 5269 7074 6162 6c65  l cause Riptable
-0001c270: 2074 6f20 7377 6974 6368 2074 6f0d 0a20   to switch to.. 
-0001c280: 2020 2020 2020 2074 6865 204e 756d 5079         the NumPy
-0001c290: 2069 6d70 6c65 6d65 6e74 6174 696f 6e20   implementation 
-0001c2a0: 6f66 2074 6869 7320 6d65 7468 6f64 2028  of this method (
-0001c2b0: 606e 756d 7079 2e6d 6561 6e60 292e 2048  `numpy.mean`). H
-0001c2c0: 6f77 6576 6572 2c20 756e 7469 6c20 610d  owever, until a.
-0001c2d0: 0a20 2020 2020 2020 2072 6570 6f72 7465  .        reporte
-0001c2e0: 6420 6275 6720 6973 2066 6978 6564 2c20  d bug is fixed, 
-0001c2f0: 6966 2079 6f75 2061 6c73 6f20 696e 636c  if you also incl
-0001c300: 7564 6520 7468 6520 6064 7479 7065 6020  ude the `dtype` 
-0001c310: 7061 7261 6d65 7465 7220 6974 2077 696c  parameter it wil
-0001c320: 6c20 6265 0d0a 2020 2020 2020 2020 6170  l be..        ap
-0001c330: 706c 6965 6420 746f 2074 6865 2072 6573  plied to the res
-0001c340: 756c 742c 206e 6f74 2075 7365 6420 746f  ult, not used to
-0001c350: 2063 6f6d 7075 7465 2074 6865 206d 6561   compute the mea
-0001c360: 6e20 6173 2069 7420 6973 2069 6e20 606e  n as it is in `n
-0001c370: 756d 7079 2e6d 6561 6e60 2e0d 0a0d 0a20  umpy.mean`..... 
-0001c380: 2020 2020 2020 2041 6c73 6f20 6e6f 7465         Also note
-0001c390: 2074 6861 7420 6966 2079 6f75 2075 7365   that if you use
-0001c3a0: 2065 6974 6865 7220 6f66 2074 6865 2066   either of the f
-0001c3b0: 6f6c 6c6f 7769 6e67 204e 756d 5079 2070  ollowing NumPy p
-0001c3c0: 6172 616d 6574 6572 7320 616e 6420 616c  arameters and al
-0001c3d0: 736f 0d0a 2020 2020 2020 2020 696e 636c  so..        incl
-0001c3e0: 7564 6520 6120 6066 696c 7465 7260 206b  ude a `filter` k
-0001c3f0: 6579 776f 7264 2061 7267 756d 656e 7420  eyword argument 
-0001c400: 2877 6869 6368 2060 6e75 6d70 792e 6d65  (which `numpy.me
-0001c410: 616e 6020 646f 6573 206e 6f74 2061 6363  an` does not acc
-0001c420: 6570 7429 2c0d 0a20 2020 2020 2020 2052  ept),..        R
-0001c430: 6970 7461 626c 6527 7320 696d 706c 656d  iptable's implem
-0001c440: 656e 7461 7469 6f6e 206f 6620 606d 6561  entation of `mea
-0001c450: 6e60 2077 696c 6c20 6265 2075 7365 6420  n` will be used 
-0001c460: 7769 7468 2074 6865 2066 696c 7465 7220  with the filter 
-0001c470: 6172 6775 6d65 6e74 2061 6e64 0d0a 2020  argument and..  
-0001c480: 2020 2020 2020 7468 6520 4e75 6d50 7920        the NumPy 
-0001c490: 7061 7261 6d65 7465 7273 2077 696c 6c20  parameters will 
-0001c4a0: 6265 2069 676e 6f72 6564 2e0d 0a0d 0a20  be ignored..... 
-0001c4b0: 2020 2020 2020 2061 7869 7320 3a20 4e6f         axis : No
-0001c4c0: 6e65 206f 7220 696e 7420 6f72 2074 7570  ne or int or tup
-0001c4d0: 6c65 206f 6620 696e 7473 2c20 6f70 7469  le of ints, opti
-0001c4e0: 6f6e 616c 0d0a 2020 2020 2020 2020 2020  onal..          
-0001c4f0: 2020 4178 6973 206f 7220 6178 6573 2061    Axis or axes a
-0001c500: 6c6f 6e67 2077 6869 6368 2074 6865 206d  long which the m
-0001c510: 6561 6e73 2061 7265 2063 6f6d 7075 7465  eans are compute
-0001c520: 642e 2054 6865 2064 6566 6175 6c74 2069  d. The default i
-0001c530: 7320 746f 2063 6f6d 7075 7465 0d0a 2020  s to compute..  
-0001c540: 2020 2020 2020 2020 2020 7468 6520 6d65            the me
-0001c550: 616e 206f 6620 7468 6520 666c 6174 7465  an of the flatte
-0001c560: 6e65 6420 6172 7261 792e 0d0a 0d0a 2020  ned array.....  
-0001c570: 2020 2020 2020 6b65 6570 6469 6d73 203a        keepdims :
-0001c580: 2062 6f6f 6c2c 206f 7074 696f 6e61 6c0d   bool, optional.
-0001c590: 0a20 2020 2020 2020 2020 2020 2049 6620  .            If 
-0001c5a0: 7468 6973 2069 7320 7365 7420 746f 2054  this is set to T
-0001c5b0: 7275 652c 2074 6865 2061 7865 7320 7768  rue, the axes wh
-0001c5c0: 6963 6820 6172 6520 7265 6475 6365 6420  ich are reduced 
-0001c5d0: 6172 6520 6c65 6674 2069 6e20 7468 6520  are left in the 
-0001c5e0: 7265 7375 6c74 2061 730d 0a20 2020 2020  result as..     
-0001c5f0: 2020 2020 2020 2064 696d 656e 7369 6f6e         dimension
-0001c600: 7320 7769 7468 2073 697a 6520 6f6e 652e  s with size one.
-0001c610: 2057 6974 6820 7468 6973 206f 7074 696f   With this optio
-0001c620: 6e2c 2074 6865 2072 6573 756c 7420 7769  n, the result wi
-0001c630: 6c6c 2062 726f 6164 6361 7374 0d0a 2020  ll broadcast..  
-0001c640: 2020 2020 2020 2020 2020 636f 7272 6563            correc
-0001c650: 746c 7920 6167 6169 6e73 7420 7468 6520  tly against the 
-0001c660: 6f72 6967 696e 616c 2069 6e70 7574 2061  original input a
-0001c670: 7272 6179 2e0d 0a0d 0a20 2020 2020 2020  rray.....       
-0001c680: 2020 2020 2049 6620 7468 6520 6465 6661       If the defa
-0001c690: 756c 7420 7661 6c75 6520 6973 2070 6173  ult value is pas
-0001c6a0: 7365 642c 2074 6865 6e20 606b 6565 7064  sed, then `keepd
-0001c6b0: 696d 7360 2077 696c 6c20 6e6f 7420 6265  ims` will not be
-0001c6c0: 2070 6173 7365 6420 7468 726f 7567 680d   passed through.
-0001c6d0: 0a20 2020 2020 2020 2020 2020 2074 6f20  .            to 
-0001c6e0: 7468 6520 606d 6561 6e60 206d 6574 686f  the `mean` metho
-0001c6f0: 6420 6f66 2073 7562 2d63 6c61 7373 6573  d of sub-classes
-0001c700: 206f 6620 606e 6461 7272 6179 602c 2068   of `ndarray`, h
-0001c710: 6f77 6576 6572 2061 6e79 206e 6f6e 2d64  owever any non-d
-0001c720: 6566 6175 6c74 0d0a 2020 2020 2020 2020  efault..        
-0001c730: 2020 2020 7661 6c75 6520 7769 6c6c 2062      value will b
-0001c740: 652e 2049 6620 7468 6520 7375 622d 636c  e. If the sub-cl
-0001c750: 6173 7327 7320 6d65 7468 6f64 2064 6f65  ass's method doe
-0001c760: 7320 6e6f 7420 696d 706c 656d 656e 7420  s not implement 
-0001c770: 606b 6565 7064 696d 7360 2c20 616e 790d  `keepdims`, any.
-0001c780: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
-0001c790: 6570 7469 6f6e 7320 7769 6c6c 2062 6520  eptions will be 
-0001c7a0: 7261 6973 6564 2e0d 0a0d 0a20 2020 2020  raised.....     
-0001c7b0: 2020 2045 7861 6d70 6c65 730d 0a20 2020     Examples..   
-0001c7c0: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
-0001c7d0: 2020 2020 2020 203e 3e3e 2061 203d 2072         >>> a = r
-0001c7e0: 742e 4661 7374 4172 7261 7928 5b31 2c20  t.FastArray([1, 
-0001c7f0: 332c 2035 2c20 375d 290d 0a20 2020 2020  3, 5, 7])..     
-0001c800: 2020 203e 3e3e 2061 2e6d 6561 6e28 290d     >>> a.mean().
-0001c810: 0a20 2020 2020 2020 2034 2e30 0d0a 0d0a  .        4.0....
-0001c820: 2020 2020 2020 2020 5769 7468 2061 2060          With a `
-0001c830: 6474 7970 6560 2073 7065 6369 6669 6564  dtype` specified
-0001c840: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
-0001c850: 2061 203d 2072 742e 4661 7374 4172 7261   a = rt.FastArra
-0001c860: 7928 5b31 2c20 332c 2035 2c20 375d 290d  y([1, 3, 5, 7]).
-0001c870: 0a20 2020 2020 2020 203e 3e3e 2061 2e6d  .        >>> a.m
-0001c880: 6561 6e28 6474 7970 6520 3d20 7274 2e69  ean(dtype = rt.i
-0001c890: 6e74 3332 290d 0a20 2020 2020 2020 2034  nt32)..        4
-0001c8a0: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
-0001c8b0: 2061 2066 696c 7465 723a 0d0a 0d0a 2020   a filter:....  
-0001c8c0: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
-0001c8d0: 2e46 6173 7441 7272 6179 285b 312c 2033  .FastArray([1, 3
-0001c8e0: 2c20 352c 2037 5d29 0d0a 2020 2020 2020  , 5, 7])..      
-0001c8f0: 2020 3e3e 3e20 6220 3d20 7274 2e46 6173    >>> b = rt.Fas
-0001c900: 7441 7272 6179 285b 4661 6c73 652c 2054  tArray([False, T
-0001c910: 7275 652c 2046 616c 7365 2c20 5472 7565  rue, False, True
-0001c920: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
-0001c930: 612e 6d65 616e 2866 696c 7465 7220 3d20  a.mean(filter = 
-0001c940: 6229 0d0a 2020 2020 2020 2020 352e 300d  b)..        5.0.
-0001c950: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
-0001c960: 2020 2020 2020 2020 6b77 6172 6773 203d          kwargs =
-0001c970: 2073 656c 662e 5f66 615f 6b65 7977 6f72   self._fa_keywor
-0001c980: 645f 7772 6170 7065 7228 6669 6c74 6572  d_wrapper(filter
-0001c990: 3d66 696c 7465 722c 2064 7479 7065 3d64  =filter, dtype=d
-0001c9a0: 7479 7065 2c20 6178 6973 3d61 7869 732c  type, axis=axis,
-0001c9b0: 206b 6565 7064 696d 733d 6b65 6570 6469   keepdims=keepdi
-0001c9c0: 6d73 2c20 6464 6f66 3d4e 6f6e 652c 202a  ms, ddof=None, *
-0001c9d0: 2a6b 7761 7267 7329 0d0a 0d0a 2020 2020  *kwargs)....    
-0001c9e0: 2020 2020 6966 2066 696c 7465 7220 6973      if filter is
-0001c9f0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-0001ca00: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0001ca10: 656c 662e 5f66 615f 6669 6c74 6572 5f77  elf._fa_filter_w
-0001ca20: 7261 7070 6572 285f 666d 6561 6e2c 2066  rapper(_fmean, f
-0001ca30: 696c 7465 723d 6669 6c74 6572 2c20 6474  ilter=filter, dt
-0001ca40: 7970 653d 6474 7970 6529 0d0a 0d0a 2020  ype=dtype)....  
-0001ca50: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0001ca60: 662e 5f72 6564 7563 655f 6368 6563 6b28  f._reduce_check(
-0001ca70: 5245 4455 4345 5f46 554e 4354 494f 4e53  REDUCE_FUNCTIONS
-0001ca80: 2e52 4544 5543 455f 4d45 414e 2c20 6e70  .REDUCE_MEAN, np
-0001ca90: 2e6d 6561 6e2c 202a 2a6b 7761 7267 7329  .mean, **kwargs)
-0001caa0: 0d0a 0d0a 2020 2020 6465 6620 6e61 6e6d  ....    def nanm
-0001cab0: 6561 6e28 7365 6c66 2c20 6669 6c74 6572  ean(self, filter
-0001cac0: 3d4e 6f6e 652c 2064 7479 7065 3d4e 6f6e  =None, dtype=Non
-0001cad0: 652c 2061 7869 733d 4e6f 6e65 2c20 6b65  e, axis=None, ke
-0001cae0: 6570 6469 6d73 3d4e 6f6e 652c 202a 2a6b  epdims=None, **k
-0001caf0: 7761 7267 7329 202d 3e20 6e70 2e6e 756d  wargs) -> np.num
-0001cb00: 6265 723a 0d0a 2020 2020 2020 2020 2222  ber:..        ""
-0001cb10: 220d 0a20 2020 2020 2020 2043 6f6d 7075  "..        Compu
-0001cb20: 7465 2074 6865 2061 7269 7468 6d65 7469  te the arithmeti
-0001cb30: 6320 6d65 616e 206f 6620 7468 6520 7661  c mean of the va
-0001cb40: 6c75 6573 2069 6e20 7468 6520 6669 7273  lues in the firs
-0001cb50: 7420 6172 6775 6d65 6e74 2c20 6967 6e6f  t argument, igno
-0001cb60: 7269 6e67 204e 614e 732e 0d0a 0d0a 2020  ring NaNs.....  
-0001cb70: 2020 2020 2020 4966 2061 6c6c 2076 616c        If all val
-0001cb80: 7565 7320 696e 2074 6865 2066 6972 7374  ues in the first
-0001cb90: 2061 7267 756d 656e 7420 6172 6520 4e61   argument are Na
-0001cba0: 4e73 2c20 6060 302e 3060 6020 6973 2072  Ns, ``0.0`` is r
-0001cbb0: 6574 7572 6e65 642e 0d0a 0d0a 2020 2020  eturned.....    
-0001cbc0: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
-0001cbd0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-0001cbe0: 2d2d 0d0a 2020 2020 2020 2020 6669 6c74  --..        filt
-0001cbf0: 6572 203a 2061 7272 6179 206f 6620 626f  er : array of bo
-0001cc00: 6f6c 2c20 6465 6661 756c 7420 4e6f 6e65  ol, default None
-0001cc10: 0d0a 2020 2020 2020 2020 2020 2020 5370  ..            Sp
-0001cc20: 6563 6966 6965 7320 7768 6963 6820 656c  ecifies which el
-0001cc30: 656d 656e 7473 2074 6f20 696e 636c 7564  ements to includ
-0001cc40: 6520 696e 2074 6865 206d 6561 6e20 6361  e in the mean ca
-0001cc50: 6c63 756c 6174 696f 6e2e 2049 6620 7468  lculation. If th
-0001cc60: 6520 6669 6c74 6572 0d0a 2020 2020 2020  e filter..      
-0001cc70: 2020 2020 2020 6973 2075 6e69 666f 726d        is uniform
-0001cc80: 6c79 2060 6046 616c 7365 6060 2c20 606e  ly ``False``, `n
-0001cc90: 616e 6d65 616e 6020 7265 7475 726e 7320  anmean` returns 
-0001cca0: 6120 605a 6572 6f44 6976 6973 696f 6e45  a `ZeroDivisionE
-0001ccb0: 7272 6f72 602e 0d0a 2020 2020 2020 2020  rror`...        
-0001ccc0: 6474 7970 6520 3a20 7274 2e64 7479 7065  dtype : rt.dtype
-0001ccd0: 206f 7220 6e75 6d70 792e 6474 7970 652c   or numpy.dtype,
-0001cce0: 2064 6566 6175 6c74 2066 6c6f 6174 3634   default float64
-0001ccf0: 0d0a 2020 2020 2020 2020 2020 2020 5468  ..            Th
-0001cd00: 6520 6461 7461 2074 7970 6520 6f66 2074  e data type of t
-0001cd10: 6865 2072 6573 756c 742e 2046 6f72 2061  he result. For a
-0001cd20: 2060 4661 7374 4172 7261 7960 2060 6078   `FastArray` ``x
-0001cd30: 6060 2c0d 0a20 2020 2020 2020 2020 2020  ``,..           
-0001cd40: 2060 6078 2e6e 616e 6d65 616e 2864 7479   ``x.nanmean(dty
-0001cd50: 7065 203d 206d 795f 7479 7065 2960 6020  pe = my_type)`` 
-0001cd60: 6973 2065 7175 6976 616c 656e 7420 746f  is equivalent to
-0001cd70: 2060 606d 795f 7479 7065 2878 2e6e 616e   ``my_type(x.nan
-0001cd80: 6d65 616e 2829 2960 602e 0d0a 0d0a 2020  mean())``.....  
-0001cd90: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
-0001cda0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
-0001cdb0: 2020 2020 2020 2020 7363 616c 6172 0d0a          scalar..
-0001cdc0: 2020 2020 2020 2020 2020 2020 5468 6520              The 
-0001cdd0: 6d65 616e 206f 6620 7468 6520 7661 6c75  mean of the valu
-0001cde0: 6573 2e0d 0a0d 0a20 2020 2020 2020 2053  es.....        S
-0001cdf0: 6565 2041 6c73 6f0d 0a20 2020 2020 2020  ee Also..       
-0001ce00: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
-0001ce10: 2020 206e 756d 7079 2e6e 616e 6d65 616e     numpy.nanmean
-0001ce20: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-0001ce30: 7261 792e 6d65 616e 203a 2043 6f6d 7075  ray.mean : Compu
-0001ce40: 7465 7320 7468 6520 6d65 616e 206f 6620  tes the mean of 
-0001ce50: 6046 6173 7441 7272 6179 6020 7661 6c75  `FastArray` valu
-0001ce60: 6573 2e0d 0a20 2020 2020 2020 2044 6174  es...        Dat
-0001ce70: 6173 6574 2e6e 616e 6d65 616e 203a 2043  aset.nanmean : C
-0001ce80: 6f6d 7075 7465 7320 7468 6520 6d65 616e  omputes the mean
-0001ce90: 206f 6620 6e75 6d65 7269 6361 6c20 6044   of numerical `D
-0001cea0: 6174 6173 6574 6020 636f 6c75 6d6e 732c  ataset` columns,
-0001ceb0: 2069 676e 6f72 696e 670d 0a20 2020 2020   ignoring..     
-0001cec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ced0: 2020 2020 204e 614e 732e 0d0a 2020 2020       NaNs...    
-0001cee0: 2020 2020 4772 6f75 7042 794f 7073 2e6e      GroupByOps.n
-0001cef0: 616e 6d65 616e 203a 2043 6f6d 7075 7465  anmean : Compute
-0001cf00: 7320 7468 6520 6d65 616e 206f 6620 6561  s the mean of ea
-0001cf10: 6368 2067 726f 7570 2c20 6967 6e6f 7269  ch group, ignori
-0001cf20: 6e67 204e 614e 732e 2055 7365 6420 6279  ng NaNs. Used by
-0001cf30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001cf40: 2020 2020 2020 2020 2020 2020 2020 2060                 `
-0001cf50: 4361 7465 676f 7269 6361 6c60 206f 626a  Categorical` obj
-0001cf60: 6563 7473 2e0d 0a0d 0a20 2020 2020 2020  ects.....       
-0001cf70: 204e 6f74 6573 0d0a 2020 2020 2020 2020   Notes..        
-0001cf80: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2054  -----..        T
-0001cf90: 6865 2060 6474 7970 6560 206b 6579 776f  he `dtype` keywo
-0001cfa0: 7264 2066 6f72 2060 4661 7374 4172 7261  rd for `FastArra
-0001cfb0: 792e 6e61 6e6d 6561 6e60 2073 7065 6369  y.nanmean` speci
-0001cfc0: 6669 6573 2074 6865 2064 6174 6120 7479  fies the data ty
-0001cfd0: 7065 206f 6620 7468 650d 0a20 2020 2020  pe of the..     
-0001cfe0: 2020 2072 6573 756c 742e 2054 6869 7320     result. This 
-0001cff0: 6469 6666 6572 7320 6672 6f6d 2060 6e75  differs from `nu
-0001d000: 6d70 792e 6e61 6e6d 6561 6e60 2c20 7768  mpy.nanmean`, wh
-0001d010: 6572 6520 6974 2073 7065 6369 6669 6573  ere it specifies
-0001d020: 2074 6865 2064 6174 6120 7479 7065 2075   the data type u
-0001d030: 7365 640d 0a20 2020 2020 2020 2074 6f20  sed..        to 
-0001d040: 636f 6d70 7574 6520 7468 6520 6d65 616e  compute the mean
-0001d050: 2e0d 0a0d 0a20 2020 2020 2020 202a 2a4e  .....        **N
-0001d060: 6f74 6573 206f 6e20 5573 696e 6720 4e75  otes on Using Nu
-0001d070: 6d50 7920 5061 7261 6d65 7465 7273 2a2a  mPy Parameters**
-0001d080: 0d0a 0d0a 2020 2020 2020 2020 5573 696e  ....        Usin
-0001d090: 6720 6569 7468 6572 206f 6620 7468 6520  g either of the 
-0001d0a0: 666f 6c6c 6f77 696e 6720 4e75 6d50 7920  following NumPy 
-0001d0b0: 7061 7261 6d65 7465 7273 2077 696c 6c20  parameters will 
-0001d0c0: 6361 7573 6520 5269 7074 6162 6c65 2074  cause Riptable t
-0001d0d0: 6f20 7377 6974 6368 2074 6f0d 0a20 2020  o switch to..   
-0001d0e0: 2020 2020 2074 6865 204e 756d 5079 2069       the NumPy i
-0001d0f0: 6d70 6c65 6d65 6e74 6174 696f 6e20 6f66  mplementation of
-0001d100: 2074 6869 7320 6d65 7468 6f64 2028 606e   this method (`n
-0001d110: 756d 7079 2e6e 616e 6d65 616e 6029 2e20  umpy.nanmean`). 
-0001d120: 486f 7765 7665 722c 2075 6e74 696c 2061  However, until a
-0001d130: 0d0a 2020 2020 2020 2020 7265 706f 7274  ..        report
-0001d140: 6564 2062 7567 2069 7320 6669 7865 642c  ed bug is fixed,
-0001d150: 2069 6620 796f 7520 616c 736f 2069 6e63   if you also inc
-0001d160: 6c75 6465 2074 6865 2060 6474 7970 6560  lude the `dtype`
-0001d170: 2070 6172 616d 6574 6572 2069 7420 7769   parameter it wi
-0001d180: 6c6c 2062 650d 0a20 2020 2020 2020 2061  ll be..        a
-0001d190: 7070 6c69 6564 2074 6f20 7468 6520 7265  pplied to the re
-0001d1a0: 7375 6c74 2c20 6e6f 7420 7573 6564 2074  sult, not used t
-0001d1b0: 6f20 636f 6d70 7574 6520 7468 6520 6d65  o compute the me
-0001d1c0: 616e 2061 7320 6974 2069 7320 696e 2060  an as it is in `
-0001d1d0: 6e75 6d70 792e 6e61 6e6d 6561 6e60 2e0d  numpy.nanmean`..
-0001d1e0: 0a0d 0a20 2020 2020 2020 2041 6c73 6f20  ...        Also 
-0001d1f0: 6e6f 7465 2074 6861 7420 6966 2079 6f75  note that if you
-0001d200: 2075 7365 2065 6974 6865 7220 6f66 2074   use either of t
-0001d210: 6865 2066 6f6c 6c6f 7769 6e67 204e 756d  he following Num
-0001d220: 5079 2070 6172 616d 6574 6572 7320 616e  Py parameters an
-0001d230: 6420 616c 736f 0d0a 2020 2020 2020 2020  d also..        
-0001d240: 696e 636c 7564 6520 6120 6066 696c 7465  include a `filte
-0001d250: 7260 206b 6579 776f 7264 2061 7267 756d  r` keyword argum
-0001d260: 656e 7420 2877 6869 6368 2060 6e75 6d70  ent (which `nump
-0001d270: 792e 6e61 6e6d 6561 6e60 2064 6f65 7320  y.nanmean` does 
-0001d280: 6e6f 7420 6163 6365 7074 292c 0d0a 2020  not accept),..  
-0001d290: 2020 2020 2020 5269 7074 6162 6c65 2773        Riptable's
-0001d2a0: 2069 6d70 6c65 6d65 6e74 6174 696f 6e20   implementation 
-0001d2b0: 6f66 2060 6e61 6e6d 6561 6e60 2077 696c  of `nanmean` wil
-0001d2c0: 6c20 6265 2075 7365 6420 7769 7468 2074  l be used with t
-0001d2d0: 6865 2066 696c 7465 7220 6172 6775 6d65  he filter argume
-0001d2e0: 6e74 0d0a 2020 2020 2020 2020 616e 6420  nt..        and 
-0001d2f0: 7468 6520 4e75 6d50 7920 7061 7261 6d65  the NumPy parame
-0001d300: 7465 7273 2077 696c 6c20 6265 2069 676e  ters will be ign
-0001d310: 6f72 6564 2e0d 0a0d 0a20 2020 2020 2020  ored.....       
-0001d320: 2061 7869 7320 3a20 7b69 6e74 2c20 7475   axis : {int, tu
-0001d330: 706c 6520 6f66 2069 6e74 2c20 4e6f 6e65  ple of int, None
-0001d340: 7d2c 206f 7074 696f 6e61 6c0d 0a20 2020  }, optional..   
-0001d350: 2020 2020 2020 2020 2041 7869 7320 6f72           Axis or
-0001d360: 2061 7865 7320 616c 6f6e 6720 7768 6963   axes along whic
-0001d370: 6820 7468 6520 6d65 616e 7320 6172 6520  h the means are 
-0001d380: 636f 6d70 7574 6564 2e20 5468 6520 6465  computed. The de
-0001d390: 6661 756c 7420 6973 2074 6f20 636f 6d70  fault is to comp
-0001d3a0: 7574 650d 0a20 2020 2020 2020 2020 2020  ute..           
-0001d3b0: 2074 6865 206d 6561 6e20 6f66 2074 6865   the mean of the
-0001d3c0: 2066 6c61 7474 656e 6564 2061 7272 6179   flattened array
-0001d3d0: 2e0d 0a0d 0a20 2020 2020 2020 206b 6565  .....        kee
-0001d3e0: 7064 696d 7320 3a20 626f 6f6c 2c20 6f70  pdims : bool, op
-0001d3f0: 7469 6f6e 616c 0d0a 2020 2020 2020 2020  tional..        
-0001d400: 2020 2020 4966 2074 6869 7320 6973 2073      If this is s
-0001d410: 6574 2074 6f20 5472 7565 2c20 7468 6520  et to True, the 
-0001d420: 6178 6573 2077 6869 6368 2061 7265 2072  axes which are r
-0001d430: 6564 7563 6564 2061 7265 206c 6566 7420  educed are left 
-0001d440: 696e 2074 6865 2072 6573 756c 7420 6173  in the result as
-0001d450: 0d0a 2020 2020 2020 2020 2020 2020 6469  ..            di
-0001d460: 6d65 6e73 696f 6e73 2077 6974 6820 7369  mensions with si
-0001d470: 7a65 206f 6e65 2e20 5769 7468 2074 6869  ze one. With thi
-0001d480: 7320 6f70 7469 6f6e 2c20 7468 6520 7265  s option, the re
-0001d490: 7375 6c74 2077 696c 6c20 6272 6f61 6463  sult will broadc
-0001d4a0: 6173 740d 0a20 2020 2020 2020 2020 2020  ast..           
-0001d4b0: 2063 6f72 7265 6374 6c79 2061 6761 696e   correctly again
-0001d4c0: 7374 2074 6865 206f 7269 6769 6e61 6c20  st the original 
-0001d4d0: 696e 7075 7420 6172 7261 792e 0d0a 0d0a  input array.....
-0001d4e0: 2020 2020 2020 2020 2020 2020 4966 2074              If t
-0001d4f0: 6865 2076 616c 7565 2069 7320 616e 7974  he value is anyt
-0001d500: 6869 6e67 2062 7574 2074 6865 2064 6566  hing but the def
-0001d510: 6175 6c74 2c20 7468 656e 2060 6b65 6570  ault, then `keep
-0001d520: 6469 6d73 6020 7769 6c6c 2062 6520 7061  dims` will be pa
-0001d530: 7373 6564 0d0a 2020 2020 2020 2020 2020  ssed..          
-0001d540: 2020 7468 726f 7567 6820 746f 2074 6865    through to the
-0001d550: 2060 6d65 616e 6020 6f72 2060 7375 6d60   `mean` or `sum`
-0001d560: 206d 6574 686f 6473 206f 6620 7375 622d   methods of sub-
-0001d570: 636c 6173 7365 7320 6f66 2060 6e64 6172  classes of `ndar
-0001d580: 7261 7960 2e20 4966 2074 6865 0d0a 2020  ray`. If the..  
-0001d590: 2020 2020 2020 2020 2020 7375 622d 636c            sub-cl
-0001d5a0: 6173 7365 7327 206d 6574 686f 6473 2064  asses' methods d
-0001d5b0: 6f20 6e6f 7420 696d 706c 656d 656e 7420  o not implement 
-0001d5c0: 606b 6565 7064 696d 7360 2c20 616e 7920  `keepdims`, any 
-0001d5d0: 6578 6365 7074 696f 6e73 2077 696c 6c20  exceptions will 
-0001d5e0: 6265 0d0a 2020 2020 2020 2020 2020 2020  be..            
-0001d5f0: 7261 6973 6564 2e0d 0a0d 0a20 2020 2020  raised.....     
-0001d600: 2020 2045 7861 6d70 6c65 730d 0a20 2020     Examples..   
-0001d610: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
-0001d620: 2020 2020 2020 203e 3e3e 2061 203d 2072         >>> a = r
-0001d630: 742e 4661 7374 4172 7261 7928 5b31 2c20  t.FastArray([1, 
-0001d640: 332c 2035 2c20 7274 2e6e 616e 5d29 0d0a  3, 5, rt.nan])..
-0001d650: 2020 2020 2020 2020 3e3e 3e20 612e 6e61          >>> a.na
-0001d660: 6e6d 6561 6e28 290d 0a20 2020 2020 2020  nmean()..       
-0001d670: 2033 2e30 0d0a 0d0a 2020 2020 2020 2020   3.0....        
-0001d680: 5769 7468 2061 2060 6474 7970 6560 2073  With a `dtype` s
-0001d690: 7065 6369 6669 6564 3a0d 0a0d 0a20 2020  pecified:....   
-0001d6a0: 2020 2020 203e 3e3e 2061 203d 2072 742e       >>> a = rt.
-0001d6b0: 4661 7374 4172 7261 7928 5b31 2c20 332c  FastArray([1, 3,
-0001d6c0: 2035 2c20 7274 2e6e 616e 5d29 0d0a 2020   5, rt.nan])..  
-0001d6d0: 2020 2020 2020 3e3e 3e20 612e 6e61 6e6d        >>> a.nanm
-0001d6e0: 6561 6e28 6474 7970 6520 3d20 7274 2e69  ean(dtype = rt.i
-0001d6f0: 6e74 3332 290d 0a20 2020 2020 2020 2033  nt32)..        3
-0001d700: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
-0001d710: 2061 2066 696c 7465 723a 0d0a 0d0a 2020   a filter:....  
-0001d720: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
-0001d730: 2e46 6173 7441 7272 6179 285b 312c 2033  .FastArray([1, 3
-0001d740: 2c20 352c 2072 742e 6e61 6e5d 290d 0a20  , 5, rt.nan]).. 
-0001d750: 2020 2020 2020 203e 3e3e 2062 203d 2072         >>> b = r
-0001d760: 742e 4661 7374 4172 7261 7928 5b46 616c  t.FastArray([Fal
-0001d770: 7365 2c20 5472 7565 2c20 5472 7565 2c20  se, True, True, 
-0001d780: 5472 7565 5d29 0d0a 2020 2020 2020 2020  True])..        
-0001d790: 3e3e 3e20 612e 6e61 6e6d 6561 6e28 6669  >>> a.nanmean(fi
-0001d7a0: 6c74 6572 203d 2062 290d 0a20 2020 2020  lter = b)..     
-0001d7b0: 2020 2034 2e30 0d0a 2020 2020 2020 2020     4.0..        
-0001d7c0: 2222 220d 0a0d 0a20 2020 2020 2020 206b  """....        k
-0001d7d0: 7761 7267 7320 3d20 7365 6c66 2e5f 6661  wargs = self._fa
-0001d7e0: 5f6b 6579 776f 7264 5f77 7261 7070 6572  _keyword_wrapper
-0001d7f0: 2866 696c 7465 723d 6669 6c74 6572 2c20  (filter=filter, 
-0001d800: 6474 7970 653d 6474 7970 652c 2061 7869  dtype=dtype, axi
-0001d810: 733d 6178 6973 2c20 6b65 6570 6469 6d73  s=axis, keepdims
-0001d820: 3d6b 6565 7064 696d 732c 2064 646f 663d  =keepdims, ddof=
-0001d830: 4e6f 6e65 2c20 2a2a 6b77 6172 6773 290d  None, **kwargs).
-0001d840: 0a0d 0a20 2020 2020 2020 2069 6620 6669  ...        if fi
-0001d850: 6c74 6572 2069 7320 6e6f 7420 4e6f 6e65  lter is not None
-0001d860: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-0001d870: 6574 7572 6e20 7365 6c66 2e5f 6661 5f66  eturn self._fa_f
-0001d880: 696c 7465 725f 7772 6170 7065 7228 5f66  ilter_wrapper(_f
-0001d890: 6e61 6e6d 6561 6e2c 2066 696c 7465 723d  nanmean, filter=
-0001d8a0: 6669 6c74 6572 2c20 6474 7970 653d 6474  filter, dtype=dt
-0001d8b0: 7970 6529 0d0a 0d0a 2020 2020 2020 2020  ype)....        
-0001d8c0: 7265 7475 726e 2073 656c 662e 5f72 6564  return self._red
-0001d8d0: 7563 655f 6368 6563 6b28 5245 4455 4345  uce_check(REDUCE
-0001d8e0: 5f46 554e 4354 494f 4e53 2e52 4544 5543  _FUNCTIONS.REDUC
-0001d8f0: 455f 4e41 4e4d 4541 4e2c 206e 702e 6e61  E_NANMEAN, np.na
-0001d900: 6e6d 6561 6e2c 202a 2a6b 7761 7267 7329  nmean, **kwargs)
-0001d910: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
-0001d920: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001d930: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001d940: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001d950: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001d960: 2d2d 2d2d 2d0d 0a20 2020 2023 2074 6865  -----..    # the
-0001d970: 7365 2066 756e 6374 696f 6e20 7461 6b65  se function take
-0001d980: 2061 2064 646f 6620 6b77 6172 670d 0a20   a ddof kwarg.. 
-0001d990: 2020 2064 6566 2076 6172 2873 656c 662c     def var(self,
-0001d9a0: 2066 696c 7465 723d 4e6f 6e65 2c20 6474   filter=None, dt
-0001d9b0: 7970 653d 4e6f 6e65 2c20 6178 6973 3d4e  ype=None, axis=N
-0001d9c0: 6f6e 652c 206b 6565 7064 696d 733d 4e6f  one, keepdims=No
-0001d9d0: 6e65 2c20 6464 6f66 3d4e 6f6e 652c 202a  ne, ddof=None, *
-0001d9e0: 2a6b 7761 7267 7329 3a0d 0a20 2020 2020  *kwargs):..     
-0001d9f0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-0001da00: 436f 6d70 7574 6520 7468 6520 7661 7269  Compute the vari
-0001da10: 616e 6365 206f 6620 7468 6520 7661 6c75  ance of the valu
-0001da20: 6573 2069 6e20 7468 6520 6669 7273 7420  es in the first 
-0001da30: 6172 6775 6d65 6e74 2e0d 0a0d 0a20 2020  argument.....   
-0001da40: 2020 2020 2052 6970 7461 626c 6520 7573       Riptable us
-0001da50: 6573 2074 6865 2063 6f6e 7665 6e74 696f  es the conventio
-0001da60: 6e20 7468 6174 2060 6064 646f 6620 3d20  n that ``ddof = 
-0001da70: 3160 602c 206d 6561 6e69 6e67 2074 6865  1``, meaning the
-0001da80: 2076 6172 6961 6e63 6520 6f66 0d0a 2020   variance of..  
-0001da90: 2020 2020 2020 6060 5b78 5f31 2c20 2e2e        ``[x_1, ..
-0001daa0: 2e2c 2078 5f6e 5d60 6020 6973 2064 6566  ., x_n]`` is def
-0001dab0: 696e 6564 2062 7920 6060 7661 7220 3d20  ined by ``var = 
-0001dac0: 312f 286e 202d 2031 2920 2a20 7375 6d28  1/(n - 1) * sum(
-0001dad0: 785f 6920 2d20 6d65 616e 2029 2a2a 3260  x_i - mean )**2`
-0001dae0: 600d 0a20 2020 2020 2020 2028 6e6f 7465  `..        (note
-0001daf0: 2074 6865 2060 606e 202d 2031 6060 2069   the ``n - 1`` i
-0001db00: 6e73 7465 6164 206f 6620 6060 6e60 6029  nstead of ``n``)
-0001db10: 2e20 5468 6973 2064 6966 6665 7273 2066  . This differs f
-0001db20: 726f 6d20 4e75 6d50 792c 2077 6869 6368  rom NumPy, which
-0001db30: 2075 7365 730d 0a20 2020 2020 2020 2060   uses..        `
-0001db40: 6064 646f 6620 3d20 3060 6020 6279 2064  `ddof = 0`` by d
-0001db50: 6566 6175 6c74 2e0d 0a0d 0a20 2020 2020  efault.....     
-0001db60: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
-0001db70: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
-0001db80: 2d0d 0a20 2020 2020 2020 2066 696c 7465  -..        filte
-0001db90: 7220 3a20 6172 7261 7920 6f66 2062 6f6f  r : array of boo
-0001dba0: 6c2c 2064 6566 6175 6c74 204e 6f6e 650d  l, default None.
-0001dbb0: 0a20 2020 2020 2020 2020 2020 2053 7065  .            Spe
-0001dbc0: 6369 6669 6573 2077 6869 6368 2065 6c65  cifies which ele
-0001dbd0: 6d65 6e74 7320 746f 2069 6e63 6c75 6465  ments to include
-0001dbe0: 2069 6e20 7468 6520 7661 7269 616e 6365   in the variance
-0001dbf0: 2063 616c 6375 6c61 7469 6f6e 2e20 4966   calculation. If
-0001dc00: 2074 6865 0d0a 2020 2020 2020 2020 2020   the..          
-0001dc10: 2020 6669 6c74 6572 2069 7320 756e 6966    filter is unif
-0001dc20: 6f72 6d6c 7920 6060 4661 6c73 6560 602c  ormly ``False``,
-0001dc30: 2060 7661 7260 2072 6574 7572 6e73 2061   `var` returns a
-0001dc40: 2060 5a65 726f 4469 7669 7369 6f6e 4572   `ZeroDivisionEr
-0001dc50: 726f 7260 2e0d 0a0d 0a20 2020 2020 2020  ror`.....       
-0001dc60: 2064 7479 7065 203a 2072 742e 6474 7970   dtype : rt.dtyp
-0001dc70: 6520 6f72 206e 756d 7079 2e64 7479 7065  e or numpy.dtype
-0001dc80: 2c20 6465 6661 756c 7420 666c 6f61 7436  , default float6
-0001dc90: 340d 0a20 2020 2020 2020 2020 2020 2054  4..            T
-0001dca0: 6865 2064 6174 6120 7479 7065 206f 6620  he data type of 
-0001dcb0: 7468 6520 7265 7375 6c74 2e20 466f 7220  the result. For 
-0001dcc0: 6120 6046 6173 7441 7272 6179 6020 6060  a `FastArray` ``
-0001dcd0: 7860 602c 0d0a 2020 2020 2020 2020 2020  x``,..          
-0001dce0: 2020 6060 782e 7661 7228 6474 7970 6520    ``x.var(dtype 
-0001dcf0: 3d20 6d79 5f74 7970 6529 6060 2069 7320  = my_type)`` is 
-0001dd00: 6571 7569 7661 6c65 6e74 2074 6f20 6060  equivalent to ``
-0001dd10: 6d79 5f74 7970 6528 782e 7661 7228 2929  my_type(x.var())
-0001dd20: 6060 2e0d 0a0d 0a20 2020 2020 2020 2052  ``.....        R
-0001dd30: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
-0001dd40: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-0001dd50: 2073 6361 6c61 720d 0a20 2020 2020 2020   scalar..       
-0001dd60: 2020 2020 2054 6865 2076 6172 6961 6e63       The varianc
-0001dd70: 6520 6f66 2074 6865 2076 616c 7565 732e  e of the values.
-0001dd80: 0d0a 0d0a 2020 2020 2020 2020 5365 6520  ....        See 
-0001dd90: 416c 736f 0d0a 2020 2020 2020 2020 2d2d  Also..        --
-0001dda0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0001ddb0: 6e75 6d70 792e 7661 720d 0a20 2020 2020  numpy.var..     
-0001ddc0: 2020 2046 6173 7441 7272 6179 2e6e 616e     FastArray.nan
-0001ddd0: 7661 7220 3a20 436f 6d70 7574 6573 2074  var : Computes t
-0001dde0: 6865 2076 6172 6961 6e63 6520 6f66 2060  he variance of `
-0001ddf0: 4661 7374 4172 7261 7960 2076 616c 7565  FastArray` value
-0001de00: 732c 2069 676e 6f72 696e 6720 4e61 4e73  s, ignoring NaNs
-0001de10: 2e0d 0a20 2020 2020 2020 2044 6174 6173  ...        Datas
-0001de20: 6574 2e76 6172 203a 2043 6f6d 7075 7465  et.var : Compute
-0001de30: 7320 7468 6520 7661 7269 616e 6365 206f  s the variance o
-0001de40: 6620 6e75 6d65 7269 6361 6c20 6044 6174  f numerical `Dat
-0001de50: 6173 6574 6020 636f 6c75 6d6e 732e 0d0a  aset` columns...
-0001de60: 2020 2020 2020 2020 4772 6f75 7042 794f          GroupByO
-0001de70: 7073 2e76 6172 203a 2043 6f6d 7075 7465  ps.var : Compute
-0001de80: 7320 7468 6520 7661 7269 616e 6365 206f  s the variance o
-0001de90: 6620 6561 6368 2067 726f 7570 2e20 5573  f each group. Us
-0001dea0: 6564 2062 7920 6043 6174 6567 6f72 6963  ed by `Categoric
-0001deb0: 616c 600d 0a20 2020 2020 2020 2020 2020  al`..           
-0001dec0: 2020 2020 2020 2020 2020 2020 2020 6f62                ob
-0001ded0: 6a65 6374 732e 0d0a 0d0a 2020 2020 2020  jects.....      
-0001dee0: 2020 4e6f 7465 730d 0a20 2020 2020 2020    Notes..       
-0001def0: 202d 2d2d 2d2d 0d0a 2020 2020 2020 2020   -----..        
-0001df00: 5468 6520 6064 7479 7065 6020 6b65 7977  The `dtype` keyw
-0001df10: 6f72 6420 666f 7220 6046 6173 7441 7272  ord for `FastArr
-0001df20: 6179 2e76 6172 6020 7370 6563 6966 6965  ay.var` specifie
-0001df30: 7320 7468 6520 6461 7461 2074 7970 6520  s the data type 
-0001df40: 6f66 2074 6865 2072 6573 756c 742e 0d0a  of the result...
-0001df50: 2020 2020 2020 2020 5468 6973 2064 6966          This dif
-0001df60: 6665 7273 2066 726f 6d20 606e 756d 7079  fers from `numpy
-0001df70: 2e76 6172 602c 2077 6865 7265 2069 7420  .var`, where it 
-0001df80: 7370 6563 6966 6965 7320 7468 6520 6461  specifies the da
-0001df90: 7461 2074 7970 6520 7573 6564 2074 6f20  ta type used to 
-0001dfa0: 636f 6d70 7574 650d 0a20 2020 2020 2020  compute..       
-0001dfb0: 2074 6865 2076 6172 6961 6e63 652e 0d0a   the variance...
-0001dfc0: 0d0a 2020 2020 2020 2020 2a2a 4e6f 7465  ..        **Note
-0001dfd0: 7320 6f6e 2055 7369 6e67 204e 756d 5079  s on Using NumPy
-0001dfe0: 2050 6172 616d 6574 6572 732a 2a0d 0a0d   Parameters**...
-0001dff0: 0a20 2020 2020 2020 2055 7369 6e67 2061  .        Using a
-0001e000: 6e79 206f 6620 7468 6520 666f 6c6c 6f77  ny of the follow
-0001e010: 696e 6720 4e75 6d50 7920 7061 7261 6d65  ing NumPy parame
-0001e020: 7465 7273 2077 696c 6c20 6361 7573 6520  ters will cause 
-0001e030: 5269 7074 6162 6c65 2074 6f20 7377 6974  Riptable to swit
-0001e040: 6368 2074 6f0d 0a20 2020 2020 2020 2074  ch to..        t
-0001e050: 6865 204e 756d 5079 2069 6d70 6c65 6d65  he NumPy impleme
-0001e060: 6e74 6174 696f 6e20 6f66 2074 6869 7320  ntation of this 
-0001e070: 6d65 7468 6f64 2028 606e 756d 7079 2e76  method (`numpy.v
-0001e080: 6172 6029 2e20 486f 7765 7665 722c 2075  ar`). However, u
-0001e090: 6e74 696c 2061 0d0a 2020 2020 2020 2020  ntil a..        
-0001e0a0: 7265 706f 7274 6564 2062 7567 2069 7320  reported bug is 
-0001e0b0: 6669 7865 642c 2069 6620 796f 7520 616c  fixed, if you al
-0001e0c0: 736f 2069 6e63 6c75 6465 2074 6865 2060  so include the `
-0001e0d0: 6474 7970 6560 2070 6172 616d 6574 6572  dtype` parameter
-0001e0e0: 2069 7420 7769 6c6c 2062 650d 0a20 2020   it will be..   
-0001e0f0: 2020 2020 2061 7070 6c69 6564 2074 6f20       applied to 
-0001e100: 7468 6520 7265 7375 6c74 2c20 6e6f 7420  the result, not 
-0001e110: 7573 6564 2074 6f20 636f 6d70 7574 6520  used to compute 
-0001e120: 7468 6520 7661 7269 616e 6365 2061 7320  the variance as 
-0001e130: 6974 2069 7320 696e 2060 6e75 6d70 792e  it is in `numpy.
-0001e140: 7661 7260 2e0d 0a0d 0a20 2020 2020 2020  var`.....       
-0001e150: 2041 6c73 6f20 6e6f 7465 2074 6861 7420   Also note that 
-0001e160: 6966 2079 6f75 2075 7365 2061 6e79 206f  if you use any o
-0001e170: 6620 7468 6520 666f 6c6c 6f77 696e 6720  f the following 
-0001e180: 4e75 6d50 7920 7061 7261 6d65 7465 7273  NumPy parameters
-0001e190: 2061 6e64 2061 6c73 6f0d 0a20 2020 2020   and also..     
-0001e1a0: 2020 2069 6e63 6c75 6465 2061 2060 6669     include a `fi
-0001e1b0: 6c74 6572 6020 6b65 7977 6f72 6420 6172  lter` keyword ar
-0001e1c0: 6775 6d65 6e74 2028 7768 6963 6820 606e  gument (which `n
-0001e1d0: 756d 7079 2e76 6172 6020 646f 6573 206e  umpy.var` does n
-0001e1e0: 6f74 2061 6363 6570 7429 2c0d 0a20 2020  ot accept),..   
-0001e1f0: 2020 2020 2052 6970 7461 626c 6527 7320       Riptable's 
-0001e200: 696d 706c 656d 656e 7461 7469 6f6e 206f  implementation o
-0001e210: 6620 6076 6172 6020 7769 6c6c 2062 6520  f `var` will be 
-0001e220: 7573 6564 2077 6974 6820 7468 6520 6669  used with the fi
-0001e230: 6c74 6572 2061 7267 756d 656e 740d 0a20  lter argument.. 
-0001e240: 2020 2020 2020 2061 6e64 2074 6865 204e         and the N
-0001e250: 756d 5079 2070 6172 616d 6574 6572 7320  umPy parameters 
-0001e260: 7769 6c6c 2062 6520 6967 6e6f 7265 642e  will be ignored.
-0001e270: 0d0a 0d0a 2020 2020 2020 2020 6178 6973  ....        axis
-0001e280: 203a 204e 6f6e 6520 6f72 2069 6e74 206f   : None or int o
-0001e290: 7220 7475 706c 6520 6f66 2069 6e74 732c  r tuple of ints,
-0001e2a0: 206f 7074 696f 6e61 6c0d 0a20 2020 2020   optional..     
-0001e2b0: 2020 2020 2020 2041 7869 7320 6f72 2061         Axis or a
-0001e2c0: 7865 7320 616c 6f6e 6720 7768 6963 6820  xes along which 
-0001e2d0: 7468 6520 7661 7269 616e 6365 2069 7320  the variance is 
-0001e2e0: 636f 6d70 7574 6564 2e20 5468 6520 6465  computed. The de
-0001e2f0: 6661 756c 7420 6973 2074 6f0d 0a20 2020  fault is to..   
-0001e300: 2020 2020 2020 2020 2063 6f6d 7075 7465           compute
-0001e310: 2074 6865 2076 6172 6961 6e63 6520 6f66   the variance of
-0001e320: 2074 6865 2066 6c61 7474 656e 6564 2061   the flattened a
-0001e330: 7272 6179 2e0d 0a0d 0a20 2020 2020 2020  rray.....       
-0001e340: 206b 6565 7064 696d 7320 3a20 626f 6f6c   keepdims : bool
-0001e350: 2c20 6f70 7469 6f6e 616c 0d0a 2020 2020  , optional..    
-0001e360: 2020 2020 2020 2020 4966 2074 6869 7320          If this 
-0001e370: 6973 2073 6574 2074 6f20 5472 7565 2c20  is set to True, 
-0001e380: 7468 6520 6178 6573 2077 6869 6368 2061  the axes which a
-0001e390: 7265 2072 6564 7563 6564 2061 7265 206c  re reduced are l
-0001e3a0: 6566 7420 696e 2074 6865 2072 6573 756c  eft in the resul
-0001e3b0: 7420 6173 0d0a 2020 2020 2020 2020 2020  t as..          
-0001e3c0: 2020 6469 6d65 6e73 696f 6e73 2077 6974    dimensions wit
-0001e3d0: 6820 7369 7a65 206f 6e65 2e20 5769 7468  h size one. With
-0001e3e0: 2074 6869 7320 6f70 7469 6f6e 2c20 7468   this option, th
-0001e3f0: 6520 7265 7375 6c74 2077 696c 6c20 6272  e result will br
-0001e400: 6f61 6463 6173 740d 0a20 2020 2020 2020  oadcast..       
-0001e410: 2020 2020 2063 6f72 7265 6374 6c79 2061       correctly a
-0001e420: 6761 696e 7374 2074 6865 2069 6e70 7574  gainst the input
-0001e430: 2061 7272 6179 2e0d 0a0d 0a20 2020 2020   array.....     
-0001e440: 2020 2020 2020 2049 6620 7468 6520 6465         If the de
-0001e450: 6661 756c 7420 7661 6c75 6520 6973 2070  fault value is p
-0001e460: 6173 7365 642c 2074 6865 6e20 606b 6565  assed, then `kee
-0001e470: 7064 696d 7360 2077 696c 6c20 6e6f 7420  pdims` will not 
-0001e480: 6265 2070 6173 7365 6420 7468 726f 7567  be passed throug
-0001e490: 680d 0a20 2020 2020 2020 2020 2020 2074  h..            t
-0001e4a0: 6f20 7468 6520 6076 6172 6020 6d65 7468  o the `var` meth
-0001e4b0: 6f64 206f 6620 7375 622d 636c 6173 7365  od of sub-classe
-0001e4c0: 7320 6f66 2060 6e64 6172 7261 7960 2c20  s of `ndarray`, 
-0001e4d0: 686f 7765 7665 7220 616e 7920 6e6f 6e2d  however any non-
-0001e4e0: 6465 6661 756c 740d 0a20 2020 2020 2020  default..       
-0001e4f0: 2020 2020 2076 616c 7565 2077 696c 6c20       value will 
-0001e500: 6265 2e20 4966 2074 6865 2073 7562 2d63  be. If the sub-c
-0001e510: 6c61 7373 6573 2720 6d65 7468 6f64 2064  lasses' method d
-0001e520: 6f65 7320 6e6f 7420 696d 706c 656d 656e  oes not implemen
-0001e530: 7420 606b 6565 7064 696d 7360 2c20 616e  t `keepdims`, an
-0001e540: 790d 0a20 2020 2020 2020 2020 2020 2065  y..            e
-0001e550: 7863 6570 7469 6f6e 7320 7769 6c6c 2062  xceptions will b
-0001e560: 6520 7261 6973 6564 2e0d 0a0d 0a20 2020  e raised.....   
-0001e570: 2020 2020 2064 646f 6620 3a20 696e 742c       ddof : int,
-0001e580: 206f 7074 696f 6e61 6c0d 0a20 2020 2020   optional..     
-0001e590: 2020 2020 2020 2022 4465 6c74 6120 4465         "Delta De
-0001e5a0: 6772 6565 7320 6f66 2046 7265 6564 6f6d  grees of Freedom
-0001e5b0: 223a 2074 6865 2064 6976 6973 6f72 2075  ": the divisor u
-0001e5c0: 7365 6420 696e 2074 6865 2063 616c 6375  sed in the calcu
-0001e5d0: 6c61 7469 6f6e 2069 730d 0a20 2020 2020  lation is..     
-0001e5e0: 2020 2020 2020 2060 604e 202d 2064 646f         ``N - ddo
-0001e5f0: 6660 602c 2077 6865 7265 2060 604e 6060  f``, where ``N``
-0001e600: 2072 6570 7265 7365 6e74 7320 7468 6520   represents the 
-0001e610: 6e75 6d62 6572 206f 6620 656c 656d 656e  number of elemen
-0001e620: 7473 2e20 4279 2064 6566 6175 6c74 0d0a  ts. By default..
-0001e630: 2020 2020 2020 2020 2020 2020 6064 646f              `ddo
-0001e640: 6660 2069 7320 7a65 726f 2066 6f72 2074  f` is zero for t
-0001e650: 6865 204e 756d 5079 2069 6d70 6c65 6d65  he NumPy impleme
-0001e660: 6e74 6174 696f 6e2c 2076 6572 7375 7320  ntation, versus 
-0001e670: 6f6e 6520 666f 7220 7468 6520 5269 7074  one for the Ript
-0001e680: 6162 6c65 0d0a 2020 2020 2020 2020 2020  able..          
-0001e690: 2020 696d 706c 656d 656e 7461 7469 6f6e    implementation
-0001e6a0: 2e0d 0a0d 0a20 2020 2020 2020 2045 7861  .....        Exa
-0001e6b0: 6d70 6c65 730d 0a20 2020 2020 2020 202d  mples..        -
-0001e6c0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-0001e6d0: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
-0001e6e0: 4172 7261 7928 5b31 2c20 322c 2033 5d29  Array([1, 2, 3])
-0001e6f0: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-0001e700: 7661 7228 290d 0a20 2020 2020 2020 2031  var()..        1
-0001e710: 2e30 0d0a 0d0a 2020 2020 2020 2020 5769  .0....        Wi
-0001e720: 7468 2061 2060 6474 7970 6560 2073 7065  th a `dtype` spe
-0001e730: 6369 6669 6564 3a0d 0a0d 0a20 2020 2020  cified:....     
-0001e740: 2020 203e 3e3e 2061 203d 2072 742e 4661     >>> a = rt.Fa
-0001e750: 7374 4172 7261 7928 5b31 2c20 322c 2033  stArray([1, 2, 3
-0001e760: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
-0001e770: 612e 7661 7228 6474 7970 6520 3d20 7274  a.var(dtype = rt
-0001e780: 2e69 6e74 3332 290d 0a20 2020 2020 2020  .int32)..       
-0001e790: 2031 0d0a 0d0a 2020 2020 2020 2020 5769   1....        Wi
-0001e7a0: 7468 2061 2066 696c 7465 723a 0d0a 0d0a  th a filter:....
-0001e7b0: 2020 2020 2020 2020 3e3e 3e20 6120 3d20          >>> a = 
-0001e7c0: 7274 2e46 6173 7441 7272 6179 285b 312c  rt.FastArray([1,
-0001e7d0: 2032 2c20 335d 290d 0a20 2020 2020 2020   2, 3])..       
-0001e7e0: 203e 3e3e 2062 203d 2072 742e 4661 7374   >>> b = rt.Fast
-0001e7f0: 4172 7261 7928 5b46 616c 7365 2c20 5472  Array([False, Tr
-0001e800: 7565 2c20 5472 7565 5d29 0d0a 2020 2020  ue, True])..    
-0001e810: 2020 2020 3e3e 3e20 612e 7661 7228 6669      >>> a.var(fi
-0001e820: 6c74 6572 203d 2062 290d 0a20 2020 2020  lter = b)..     
-0001e830: 2020 2030 2e35 0d0a 2020 2020 2020 2020     0.5..        
-0001e840: 2222 220d 0a0d 0a20 2020 2020 2020 206b  """....        k
-0001e850: 7761 7267 7320 3d20 7365 6c66 2e5f 6661  wargs = self._fa
-0001e860: 5f6b 6579 776f 7264 5f77 7261 7070 6572  _keyword_wrapper
-0001e870: 2866 696c 7465 723d 6669 6c74 6572 2c20  (filter=filter, 
-0001e880: 6474 7970 653d 6474 7970 652c 2061 7869  dtype=dtype, axi
-0001e890: 733d 6178 6973 2c20 6b65 6570 6469 6d73  s=axis, keepdims
-0001e8a0: 3d6b 6565 7064 696d 732c 2064 646f 663d  =keepdims, ddof=
-0001e8b0: 6464 6f66 2c20 2a2a 6b77 6172 6773 290d  ddof, **kwargs).
-0001e8c0: 0a0d 0a20 2020 2020 2020 2069 6620 6669  ...        if fi
-0001e8d0: 6c74 6572 2069 7320 6e6f 7420 4e6f 6e65  lter is not None
-0001e8e0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-0001e8f0: 6574 7572 6e20 7365 6c66 2e5f 6661 5f66  eturn self._fa_f
-0001e900: 696c 7465 725f 7772 6170 7065 7228 5f66  ilter_wrapper(_f
-0001e910: 7661 722c 2066 696c 7465 723d 6669 6c74  var, filter=filt
-0001e920: 6572 2c20 6474 7970 653d 6474 7970 6529  er, dtype=dtype)
-0001e930: 0d0a 0d0a 2020 2020 2020 2020 7265 7475  ....        retu
-0001e940: 726e 2073 656c 662e 5f72 6564 7563 655f  rn self._reduce_
-0001e950: 6368 6563 6b28 5245 4455 4345 5f46 554e  check(REDUCE_FUN
-0001e960: 4354 494f 4e53 2e52 4544 5543 455f 5641  CTIONS.REDUCE_VA
-0001e970: 522c 206e 702e 7661 722c 202a 2a6b 7761  R, np.var, **kwa
-0001e980: 7267 7329 0d0a 0d0a 2020 2020 6465 6620  rgs)....    def 
-0001e990: 6e61 6e76 6172 2873 656c 662c 2066 696c  nanvar(self, fil
-0001e9a0: 7465 723d 4e6f 6e65 2c20 6474 7970 653d  ter=None, dtype=
-0001e9b0: 4e6f 6e65 2c20 6178 6973 3d4e 6f6e 652c  None, axis=None,
-0001e9c0: 206b 6565 7064 696d 733d 4e6f 6e65 2c20   keepdims=None, 
-0001e9d0: 6464 6f66 3d4e 6f6e 652c 202a 2a6b 7761  ddof=None, **kwa
-0001e9e0: 7267 7329 202d 3e20 6e70 2e6e 756d 6265  rgs) -> np.numbe
-0001e9f0: 723a 0d0a 2020 2020 2020 2020 2222 220d  r:..        """.
-0001ea00: 0a20 2020 2020 2020 2043 6f6d 7075 7465  .        Compute
-0001ea10: 2074 6865 2076 6172 6961 6e63 6520 6f66   the variance of
-0001ea20: 2074 6865 2076 616c 7565 7320 696e 2074   the values in t
-0001ea30: 6865 2066 6972 7374 2061 7267 756d 656e  he first argumen
-0001ea40: 742c 2069 676e 6f72 696e 6720 4e61 4e73  t, ignoring NaNs
-0001ea50: 2e0d 0a0d 0a20 2020 2020 2020 2049 6620  .....        If 
-0001ea60: 616c 6c20 7661 6c75 6573 2069 6e20 7468  all values in th
-0001ea70: 6520 6669 7273 7420 6172 6775 6d65 6e74  e first argument
-0001ea80: 2061 7265 204e 614e 732c 2060 604e 614e   are NaNs, ``NaN
-0001ea90: 6060 2069 7320 7265 7475 726e 6564 2e0d  `` is returned..
-0001eaa0: 0a0d 0a20 2020 2020 2020 2052 6970 7461  ...        Ripta
-0001eab0: 626c 6520 7573 6573 2074 6865 2063 6f6e  ble uses the con
-0001eac0: 7665 6e74 696f 6e20 7468 6174 2060 6064  vention that ``d
-0001ead0: 646f 6620 3d20 3160 602c 206d 6561 6e69  dof = 1``, meani
-0001eae0: 6e67 2074 6865 2076 6172 6961 6e63 6520  ng the variance 
-0001eaf0: 6f66 0d0a 2020 2020 2020 2020 6060 5b78  of..        ``[x
-0001eb00: 5f31 2c20 2e2e 2e2c 2078 5f6e 5d60 6020  _1, ..., x_n]`` 
-0001eb10: 6973 2064 6566 696e 6564 2062 7920 6060  is defined by ``
-0001eb20: 7661 7220 3d20 312f 286e 202d 2031 2920  var = 1/(n - 1) 
-0001eb30: 2a20 7375 6d28 785f 6920 2d20 6d65 616e  * sum(x_i - mean
-0001eb40: 2029 2a2a 3260 6020 286e 6f74 650d 0a20   )**2`` (note.. 
-0001eb50: 2020 2020 2020 2074 6865 2060 606e 202d         the ``n -
-0001eb60: 2031 6060 2069 6e73 7465 6164 206f 6620   1`` instead of 
-0001eb70: 6060 6e60 6029 2e20 5468 6973 2064 6966  ``n``). This dif
-0001eb80: 6665 7273 2066 726f 6d20 4e75 6d50 792c  fers from NumPy,
-0001eb90: 2077 6869 6368 2075 7365 7320 6060 6464   which uses ``dd
-0001eba0: 6f66 203d 2030 6060 2062 790d 0a20 2020  of = 0`` by..   
-0001ebb0: 2020 2020 2064 6566 6175 6c74 2e0d 0a0d       default....
-0001ebc0: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
-0001ebd0: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
-0001ebe0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-0001ebf0: 2066 696c 7465 7220 3a20 6172 7261 7920   filter : array 
-0001ec00: 6f66 2062 6f6f 6c2c 2064 6566 6175 6c74  of bool, default
-0001ec10: 204e 6f6e 650d 0a20 2020 2020 2020 2020   None..         
-0001ec20: 2020 2053 7065 6369 6669 6573 2077 6869     Specifies whi
-0001ec30: 6368 2065 6c65 6d65 6e74 7320 746f 2069  ch elements to i
-0001ec40: 6e63 6c75 6465 2069 6e20 7468 6520 7661  nclude in the va
-0001ec50: 7269 616e 6365 2063 616c 6375 6c61 7469  riance calculati
-0001ec60: 6f6e 2e20 4966 2074 6865 2066 696c 7465  on. If the filte
-0001ec70: 720d 0a20 2020 2020 2020 2020 2020 2069  r..            i
-0001ec80: 7320 756e 6966 6f72 6d6c 7920 6060 4661  s uniformly ``Fa
-0001ec90: 6c73 6560 602c 2060 6e61 6e76 6172 6020  lse``, `nanvar` 
-0001eca0: 7265 7475 726e 7320 6120 605a 6572 6f44  returns a `ZeroD
-0001ecb0: 6976 6973 696f 6e45 7272 6f72 602e 0d0a  ivisionError`...
-0001ecc0: 0d0a 2020 2020 2020 2020 6474 7970 6520  ..        dtype 
-0001ecd0: 3a20 7274 2e64 7479 7065 206f 7220 6e75  : rt.dtype or nu
-0001ece0: 6d70 792e 6474 7970 652c 2064 6566 6175  mpy.dtype, defau
-0001ecf0: 6c74 2066 6c6f 6174 3634 0d0a 2020 2020  lt float64..    
-0001ed00: 2020 2020 2020 2020 5468 6520 6461 7461          The data
-0001ed10: 2074 7970 6520 6f66 2074 6865 2072 6573   type of the res
-0001ed20: 756c 742e 2046 6f72 2061 2060 4661 7374  ult. For a `Fast
-0001ed30: 4172 7261 7960 2060 6078 6060 2c0d 0a20  Array` ``x``,.. 
-0001ed40: 2020 2020 2020 2020 2020 2060 6078 2e6e             ``x.n
-0001ed50: 616e 7661 7228 6474 7970 6520 3d20 6d79  anvar(dtype = my
-0001ed60: 5f74 7970 6529 6060 2069 7320 6571 7569  _type)`` is equi
-0001ed70: 7661 6c65 6e74 2074 6f20 6060 6d79 5f74  valent to ``my_t
-0001ed80: 7970 6528 782e 6e61 6e76 6172 2829 2960  ype(x.nanvar())`
-0001ed90: 602e 0d0a 0d0a 2020 2020 2020 2020 5265  `.....        Re
-0001eda0: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
-0001edb0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0001edc0: 7363 616c 6172 0d0a 2020 2020 2020 2020  scalar..        
-0001edd0: 2020 2020 5468 6520 7661 7269 616e 6365      The variance
-0001ede0: 206f 6620 7468 6520 7661 6c75 6573 2e0d   of the values..
-0001edf0: 0a0d 0a20 2020 2020 2020 2053 6565 2041  ...        See A
-0001ee00: 6c73 6f0d 0a20 2020 2020 2020 202d 2d2d  lso..        ---
-0001ee10: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 206e  -----..        n
-0001ee20: 756d 7079 2e6e 616e 7661 720d 0a20 2020  umpy.nanvar..   
-0001ee30: 2020 2020 2046 6173 7441 7272 6179 2e76       FastArray.v
-0001ee40: 6172 203a 2043 6f6d 7075 7465 7320 7468  ar : Computes th
-0001ee50: 6520 7661 7269 616e 6365 206f 6620 6046  e variance of `F
-0001ee60: 6173 7441 7272 6179 6020 7661 6c75 6573  astArray` values
-0001ee70: 2e0d 0a20 2020 2020 2020 2044 6174 6173  ...        Datas
-0001ee80: 6574 2e6e 616e 7661 7220 3a20 436f 6d70  et.nanvar : Comp
-0001ee90: 7574 6573 2074 6865 2076 6172 6961 6e63  utes the varianc
-0001eea0: 6520 6f66 206e 756d 6572 6963 616c 2060  e of numerical `
-0001eeb0: 4461 7461 7365 7460 2063 6f6c 756d 6e73  Dataset` columns
-0001eec0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0001eed0: 2020 2020 2020 2020 2020 2020 6967 6e6f              igno
-0001eee0: 7269 6e67 204e 614e 732e 0d0a 2020 2020  ring NaNs...    
-0001eef0: 2020 2020 4772 6f75 7042 794f 7073 2e6e      GroupByOps.n
-0001ef00: 616e 7661 7220 3a20 436f 6d70 7574 6573  anvar : Computes
-0001ef10: 2074 6865 2076 6172 6961 6e63 6520 6f66   the variance of
-0001ef20: 2065 6163 6820 6772 6f75 702c 2069 676e   each group, ign
-0001ef30: 6f72 696e 6720 4e61 4e73 2e20 5573 6564  oring NaNs. Used
-0001ef40: 2062 790d 0a20 2020 2020 2020 2020 2020   by..           
-0001ef50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ef60: 2060 4361 7465 676f 7269 6361 6c60 206f   `Categorical` o
-0001ef70: 626a 6563 7473 2e0d 0a0d 0a20 2020 2020  bjects.....     
-0001ef80: 2020 204e 6f74 6573 0d0a 2020 2020 2020     Notes..      
-0001ef90: 2020 2d2d 2d2d 2d0d 0a20 2020 2020 2020    -----..       
-0001efa0: 2054 6865 2060 6474 7970 6560 206b 6579   The `dtype` key
-0001efb0: 776f 7264 2066 6f72 2060 4661 7374 4172  word for `FastAr
-0001efc0: 7261 792e 6e61 6e76 6172 6020 7370 6563  ray.nanvar` spec
-0001efd0: 6966 6965 7320 7468 6520 6461 7461 2074  ifies the data t
-0001efe0: 7970 6520 6f66 2074 6865 0d0a 2020 2020  ype of the..    
-0001eff0: 2020 2020 7265 7375 6c74 2e20 5468 6973      result. This
-0001f000: 2064 6966 6665 7273 2066 726f 6d20 606e   differs from `n
-0001f010: 756d 7079 2e6e 616e 7661 7260 2c20 7768  umpy.nanvar`, wh
-0001f020: 6572 6520 6974 2073 7065 6369 6669 6573  ere it specifies
-0001f030: 2074 6865 2064 6174 6120 7479 7065 2075   the data type u
-0001f040: 7365 640d 0a20 2020 2020 2020 2074 6f20  sed..        to 
-0001f050: 636f 6d70 7574 6520 7468 6520 7661 7269  compute the vari
-0001f060: 616e 6365 2e0d 0a0d 0a20 2020 2020 2020  ance.....       
-0001f070: 202a 2a4e 6f74 6573 206f 6e20 5573 696e   **Notes on Usin
-0001f080: 6720 4e75 6d50 7920 5061 7261 6d65 7465  g NumPy Paramete
-0001f090: 7273 2a2a 0d0a 0d0a 2020 2020 2020 2020  rs**....        
-0001f0a0: 5573 696e 6720 616e 7920 6f66 2074 6865  Using any of the
-0001f0b0: 2066 6f6c 6c6f 7769 6e67 204e 756d 5079   following NumPy
-0001f0c0: 2070 6172 616d 6574 6572 7320 7769 6c6c   parameters will
-0001f0d0: 2063 6175 7365 2052 6970 7461 626c 6520   cause Riptable 
-0001f0e0: 746f 2073 7769 7463 6820 746f 0d0a 2020  to switch to..  
-0001f0f0: 2020 2020 2020 7468 6520 4e75 6d50 7920        the NumPy 
-0001f100: 696d 706c 656d 656e 7461 7469 6f6e 206f  implementation o
-0001f110: 6620 7468 6973 206d 6574 686f 6420 2860  f this method (`
-0001f120: 6e75 6d70 792e 6e61 6e76 6172 6029 2e20  numpy.nanvar`). 
-0001f130: 486f 7765 7665 722c 2075 6e74 696c 2061  However, until a
-0001f140: 0d0a 2020 2020 2020 2020 7265 706f 7274  ..        report
-0001f150: 6564 2062 7567 2069 7320 6669 7865 642c  ed bug is fixed,
-0001f160: 2069 6620 796f 7520 616c 736f 2069 6e63   if you also inc
-0001f170: 6c75 6465 2074 6865 2060 6474 7970 6560  lude the `dtype`
-0001f180: 2070 6172 616d 6574 6572 2069 7420 7769   parameter it wi
-0001f190: 6c6c 2062 650d 0a20 2020 2020 2020 2061  ll be..        a
-0001f1a0: 7070 6c69 6564 2074 6f20 7468 6520 7265  pplied to the re
-0001f1b0: 7375 6c74 2c20 6e6f 7420 7573 6564 2074  sult, not used t
-0001f1c0: 6f20 636f 6d70 7574 6520 7468 6520 7661  o compute the va
-0001f1d0: 7269 616e 6365 2061 7320 6974 2069 7320  riance as it is 
-0001f1e0: 696e 0d0a 2020 2020 2020 2020 606e 756d  in..        `num
-0001f1f0: 7079 2e6e 616e 7661 7260 2e0d 0a0d 0a20  py.nanvar`..... 
-0001f200: 2020 2020 2020 2041 6c73 6f20 6e6f 7465         Also note
-0001f210: 2074 6861 7420 6966 2079 6f75 2075 7365   that if you use
-0001f220: 2061 6e79 206f 6620 7468 6520 666f 6c6c   any of the foll
-0001f230: 6f77 696e 6720 4e75 6d50 7920 7061 7261  owing NumPy para
-0001f240: 6d65 7465 7273 2061 6e64 2061 6c73 6f0d  meters and also.
-0001f250: 0a20 2020 2020 2020 2069 6e63 6c75 6465  .        include
-0001f260: 2061 2060 6669 6c74 6572 6020 6b65 7977   a `filter` keyw
-0001f270: 6f72 6420 6172 6775 6d65 6e74 2028 7768  ord argument (wh
-0001f280: 6963 6820 606e 756d 7079 2e6e 616e 7661  ich `numpy.nanva
-0001f290: 7260 2064 6f65 7320 6e6f 7420 6163 6365  r` does not acce
-0001f2a0: 7074 292c 0d0a 2020 2020 2020 2020 5269  pt),..        Ri
-0001f2b0: 7074 6162 6c65 2773 2069 6d70 6c65 6d65  ptable's impleme
-0001f2c0: 6e74 6174 696f 6e20 6f66 2060 6e61 6e76  ntation of `nanv
-0001f2d0: 6172 6020 7769 6c6c 2062 6520 7573 6564  ar` will be used
-0001f2e0: 2077 6974 6820 7468 6520 6669 6c74 6572   with the filter
-0001f2f0: 2061 7267 756d 656e 740d 0a20 2020 2020   argument..     
-0001f300: 2020 2061 6e64 2074 6865 204e 756d 5079     and the NumPy
-0001f310: 2070 6172 616d 6574 6572 7320 7769 6c6c   parameters will
-0001f320: 2062 6520 6967 6e6f 7265 642e 0d0a 0d0a   be ignored.....
-0001f330: 2020 2020 2020 2020 6178 6973 203a 207b          axis : {
-0001f340: 696e 742c 2074 7570 6c65 206f 6620 696e  int, tuple of in
-0001f350: 742c 204e 6f6e 657d 2c20 6f70 7469 6f6e  t, None}, option
-0001f360: 616c 0d0a 2020 2020 2020 2020 2020 2020  al..            
-0001f370: 4178 6973 206f 7220 6178 6573 2061 6c6f  Axis or axes alo
-0001f380: 6e67 2077 6869 6368 2074 6865 2076 6172  ng which the var
-0001f390: 6961 6e63 6520 6973 2063 6f6d 7075 7465  iance is compute
-0001f3a0: 642e 2054 6865 2064 6566 6175 6c74 2069  d. The default i
-0001f3b0: 7320 746f 0d0a 2020 2020 2020 2020 2020  s to..          
-0001f3c0: 2020 636f 6d70 7574 6520 7468 6520 7661    compute the va
-0001f3d0: 7269 616e 6365 206f 6620 7468 6520 666c  riance of the fl
-0001f3e0: 6174 7465 6e65 6420 6172 7261 792e 0d0a  attened array...
-0001f3f0: 0d0a 2020 2020 2020 2020 6b65 6570 6469  ..        keepdi
-0001f400: 6d73 203a 2062 6f6f 6c2c 206f 7074 696f  ms : bool, optio
-0001f410: 6e61 6c0d 0a20 2020 2020 2020 2020 2020  nal..           
-0001f420: 2049 6620 7468 6973 2069 7320 7365 7420   If this is set 
-0001f430: 746f 2054 7275 652c 2074 6865 2061 7865  to True, the axe
-0001f440: 7320 7768 6963 6820 6172 6520 7265 6475  s which are redu
-0001f450: 6365 6420 6172 6520 6c65 6674 2069 6e20  ced are left in 
-0001f460: 7468 6520 7265 7375 6c74 2061 730d 0a20  the result as.. 
-0001f470: 2020 2020 2020 2020 2020 2064 696d 656e             dimen
-0001f480: 7369 6f6e 7320 7769 7468 2073 697a 6520  sions with size 
-0001f490: 6f6e 652e 2057 6974 6820 7468 6973 206f  one. With this o
-0001f4a0: 7074 696f 6e2c 2074 6865 2072 6573 756c  ption, the resul
-0001f4b0: 7420 7769 6c6c 2062 726f 6164 6361 7374  t will broadcast
-0001f4c0: 0d0a 2020 2020 2020 2020 2020 2020 636f  ..            co
-0001f4d0: 7272 6563 746c 7920 6167 6169 6e73 7420  rrectly against 
-0001f4e0: 7468 6520 6f72 6967 696e 616c 2069 6e70  the original inp
-0001f4f0: 7574 2061 7272 6179 2e0d 0a0d 0a20 2020  ut array.....   
-0001f500: 2020 2020 2064 646f 6620 3a20 696e 742c       ddof : int,
-0001f510: 206f 7074 696f 6e61 6c0d 0a20 2020 2020   optional..     
-0001f520: 2020 2020 2020 2022 4465 6c74 6120 4465         "Delta De
-0001f530: 6772 6565 7320 6f66 2046 7265 6564 6f6d  grees of Freedom
-0001f540: 223a 2074 6865 2064 6976 6973 6f72 2075  ": the divisor u
-0001f550: 7365 6420 696e 2074 6865 2063 616c 6375  sed in the calcu
-0001f560: 6c61 7469 6f6e 2069 730d 0a20 2020 2020  lation is..     
-0001f570: 2020 2020 2020 2060 604e 202d 2064 646f         ``N - ddo
-0001f580: 6660 602c 2077 6865 7265 2060 604e 6060  f``, where ``N``
-0001f590: 2072 6570 7265 7365 6e74 7320 7468 6520   represents the 
-0001f5a0: 6e75 6d62 6572 206f 6620 6e6f 6e2d 4e61  number of non-Na
-0001f5b0: 4e20 656c 656d 656e 7473 2e20 4279 0d0a  N elements. By..
-0001f5c0: 2020 2020 2020 2020 2020 2020 6465 6661              defa
-0001f5d0: 756c 7420 6064 646f 6660 2069 7320 7a65  ult `ddof` is ze
-0001f5e0: 726f 2066 6f72 2074 6865 204e 756d 5079  ro for the NumPy
-0001f5f0: 2069 6d70 6c65 6d65 6e74 6174 696f 6e2c   implementation,
-0001f600: 2076 6572 7375 7320 6f6e 6520 666f 7220   versus one for 
-0001f610: 7468 650d 0a20 2020 2020 2020 2020 2020  the..           
-0001f620: 2052 6970 7461 626c 6520 696d 706c 656d   Riptable implem
-0001f630: 656e 7461 7469 6f6e 2e0d 0a0d 0a20 2020  entation.....   
-0001f640: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
-0001f650: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-0001f660: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
-0001f670: 2072 742e 4661 7374 4172 7261 7928 5b31   rt.FastArray([1
-0001f680: 2c20 322c 2033 2c20 7274 2e6e 616e 5d29  , 2, 3, rt.nan])
-0001f690: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-0001f6a0: 6e61 6e76 6172 2829 0d0a 2020 2020 2020  nanvar()..      
-0001f6b0: 2020 312e 300d 0a0d 0a20 2020 2020 2020    1.0....       
-0001f6c0: 2057 6974 6820 6120 6064 7479 7065 6020   With a `dtype` 
-0001f6d0: 7370 6563 6966 6965 643a 0d0a 0d0a 2020  specified:....  
-0001f6e0: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
-0001f6f0: 2e46 6173 7441 7272 6179 285b 312c 2032  .FastArray([1, 2
-0001f700: 2c20 332c 2072 742e 6e61 6e5d 290d 0a20  , 3, rt.nan]).. 
-0001f710: 2020 2020 2020 203e 3e3e 2061 2e6e 616e         >>> a.nan
-0001f720: 7661 7228 6474 7970 6520 3d20 7274 2e69  var(dtype = rt.i
-0001f730: 6e74 3332 290d 0a20 2020 2020 2020 2031  nt32)..        1
-0001f740: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
-0001f750: 2061 2066 696c 7465 723a 0d0a 0d0a 2020   a filter:....  
-0001f760: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
-0001f770: 2e46 6173 7441 7272 6179 285b 312c 2032  .FastArray([1, 2
-0001f780: 2c20 332c 2072 742e 6e61 6e5d 290d 0a20  , 3, rt.nan]).. 
-0001f790: 2020 2020 2020 203e 3e3e 2062 203d 2072         >>> b = r
-0001f7a0: 742e 4661 7374 4172 7261 7928 5b46 616c  t.FastArray([Fal
-0001f7b0: 7365 2c20 5472 7565 2c20 5472 7565 2c20  se, True, True, 
-0001f7c0: 5472 7565 5d29 0d0a 2020 2020 2020 2020  True])..        
-0001f7d0: 3e3e 3e20 612e 6e61 6e76 6172 2866 696c  >>> a.nanvar(fil
-0001f7e0: 7465 7220 3d20 6229 0d0a 2020 2020 2020  ter = b)..      
-0001f7f0: 2020 302e 350d 0a20 2020 2020 2020 2022    0.5..        "
-0001f800: 2222 0d0a 0d0a 2020 2020 2020 2020 6b77  ""....        kw
-0001f810: 6172 6773 203d 2073 656c 662e 5f66 615f  args = self._fa_
-0001f820: 6b65 7977 6f72 645f 7772 6170 7065 7228  keyword_wrapper(
-0001f830: 6669 6c74 6572 3d66 696c 7465 722c 2064  filter=filter, d
-0001f840: 7479 7065 3d64 7479 7065 2c20 6178 6973  type=dtype, axis
-0001f850: 3d61 7869 732c 206b 6565 7064 696d 733d  =axis, keepdims=
-0001f860: 6b65 6570 6469 6d73 2c20 6464 6f66 3d64  keepdims, ddof=d
-0001f870: 646f 662c 202a 2a6b 7761 7267 7329 0d0a  dof, **kwargs)..
-0001f880: 0d0a 2020 2020 2020 2020 6966 2066 696c  ..        if fil
-0001f890: 7465 7220 6973 206e 6f74 204e 6f6e 653a  ter is not None:
-0001f8a0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-0001f8b0: 7475 726e 2073 656c 662e 5f66 615f 6669  turn self._fa_fi
-0001f8c0: 6c74 6572 5f77 7261 7070 6572 285f 666e  lter_wrapper(_fn
-0001f8d0: 616e 7661 722c 2066 696c 7465 723d 6669  anvar, filter=fi
-0001f8e0: 6c74 6572 2c20 6474 7970 653d 6474 7970  lter, dtype=dtyp
-0001f8f0: 6529 0d0a 0d0a 2020 2020 2020 2020 7265  e)....        re
-0001f900: 7475 726e 2073 656c 662e 5f72 6564 7563  turn self._reduc
-0001f910: 655f 6368 6563 6b28 5245 4455 4345 5f46  e_check(REDUCE_F
-0001f920: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
-0001f930: 4e41 4e56 4152 2c20 6e70 2e6e 616e 7661  NANVAR, np.nanva
-0001f940: 722c 202a 2a6b 7761 7267 7329 0d0a 0d0a  r, **kwargs)....
-0001f950: 2020 2020 6465 6620 7374 6428 7365 6c66      def std(self
-0001f960: 2c20 6669 6c74 6572 3d4e 6f6e 652c 2064  , filter=None, d
-0001f970: 7479 7065 3d4e 6f6e 652c 2061 7869 733d  type=None, axis=
-0001f980: 4e6f 6e65 2c20 6b65 6570 6469 6d73 3d4e  None, keepdims=N
-0001f990: 6f6e 652c 2064 646f 663d 4e6f 6e65 2c20  one, ddof=None, 
-0001f9a0: 2a2a 6b77 6172 6773 2920 2d3e 206e 702e  **kwargs) -> np.
-0001f9b0: 6e75 6d62 6572 3a0d 0a20 2020 2020 2020  number:..       
-0001f9c0: 2022 2222 0d0a 2020 2020 2020 2020 436f   """..        Co
-0001f9d0: 6d70 7574 6520 7468 6520 7374 616e 6461  mpute the standa
-0001f9e0: 7264 2064 6576 6961 7469 6f6e 206f 6620  rd deviation of 
-0001f9f0: 7468 6520 7661 6c75 6573 2069 6e20 7468  the values in th
-0001fa00: 6520 6669 7273 7420 6172 6775 6d65 6e74  e first argument
-0001fa10: 2e0d 0a0d 0a20 2020 2020 2020 2052 6970  .....        Rip
-0001fa20: 7461 626c 6520 7573 6573 2074 6865 2063  table uses the c
-0001fa30: 6f6e 7665 6e74 696f 6e20 7468 6174 2060  onvention that `
-0001fa40: 6064 646f 6620 3d20 3160 602c 206d 6561  `ddof = 1``, mea
-0001fa50: 6e69 6e67 2074 6865 2073 7461 6e64 6172  ning the standar
-0001fa60: 6420 6465 7669 6174 696f 6e20 6f66 0d0a  d deviation of..
-0001fa70: 2020 2020 2020 2020 6060 5b78 5f31 2c20          ``[x_1, 
-0001fa80: 2e2e 2e2c 2078 5f6e 5d60 6020 6973 2064  ..., x_n]`` is d
-0001fa90: 6566 696e 6564 2062 7920 6060 7374 6420  efined by ``std 
-0001faa0: 3d20 312f 286e 202d 2031 2920 2a20 7375  = 1/(n - 1) * su
-0001fab0: 6d28 785f 6920 2d20 6d65 616e 2029 2a2a  m(x_i - mean )**
-0001fac0: 3260 6020 286e 6f74 650d 0a20 2020 2020  2`` (note..     
-0001fad0: 2020 2074 6865 2060 606e 202d 2031 6060     the ``n - 1``
-0001fae0: 2069 6e73 7465 6164 206f 6620 6060 6e60   instead of ``n`
-0001faf0: 6029 2e20 5468 6973 2064 6966 6665 7273  `). This differs
-0001fb00: 2066 726f 6d20 4e75 6d50 792c 2077 6869   from NumPy, whi
-0001fb10: 6368 2075 7365 7320 6060 6464 6f66 203d  ch uses ``ddof =
-0001fb20: 2030 6060 2062 790d 0a20 2020 2020 2020   0`` by..       
-0001fb30: 2064 6566 6175 6c74 2e0d 0a0d 0a20 2020   default.....   
-0001fb40: 2020 2020 2050 6172 616d 6574 6572 730d       Parameters.
-0001fb50: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-0001fb60: 2d2d 2d0d 0a20 2020 2020 2020 2066 696c  ---..        fil
-0001fb70: 7465 7220 3a20 6172 7261 7920 6f66 2062  ter : array of b
-0001fb80: 6f6f 6c2c 2064 6566 6175 6c74 204e 6f6e  ool, default Non
-0001fb90: 650d 0a20 2020 2020 2020 2020 2020 2053  e..            S
-0001fba0: 7065 6369 6669 6573 2077 6869 6368 2065  pecifies which e
-0001fbb0: 6c65 6d65 6e74 7320 746f 2069 6e63 6c75  lements to inclu
-0001fbc0: 6465 2069 6e20 7468 6520 7374 616e 6461  de in the standa
-0001fbd0: 7264 2064 6576 6961 7469 6f6e 2063 616c  rd deviation cal
-0001fbe0: 6375 6c61 7469 6f6e 2e20 4966 0d0a 2020  culation. If..  
-0001fbf0: 2020 2020 2020 2020 2020 7468 6520 6669            the fi
-0001fc00: 6c74 6572 2069 7320 756e 6966 6f72 6d6c  lter is uniforml
-0001fc10: 7920 6060 4661 6c73 6560 602c 2060 7374  y ``False``, `st
-0001fc20: 6460 2072 6574 7572 6e73 2061 2060 5a65  d` returns a `Ze
-0001fc30: 726f 4469 7669 7369 6f6e 4572 726f 7260  roDivisionError`
-0001fc40: 2e0d 0a0d 0a20 2020 2020 2020 2064 7479  .....        dty
-0001fc50: 7065 203a 2072 742e 6474 7970 6520 6f72  pe : rt.dtype or
-0001fc60: 206e 756d 7079 2e64 7479 7065 2c20 6465   numpy.dtype, de
-0001fc70: 6661 756c 7420 666c 6f61 7436 340d 0a20  fault float64.. 
-0001fc80: 2020 2020 2020 2020 2020 2054 6865 2064             The d
-0001fc90: 6174 6120 7479 7065 206f 6620 7468 6520  ata type of the 
-0001fca0: 7265 7375 6c74 2e20 466f 7220 6120 6046  result. For a `F
-0001fcb0: 6173 7441 7272 6179 6020 6060 7860 602c  astArray` ``x``,
-0001fcc0: 0d0a 2020 2020 2020 2020 2020 2020 6060  ..            ``
-0001fcd0: 782e 7374 6428 6474 7970 6520 3d20 6d79  x.std(dtype = my
-0001fce0: 5f74 7970 6529 6060 2069 7320 6571 7569  _type)`` is equi
-0001fcf0: 7661 6c65 6e74 2074 6f20 6060 6d79 5f74  valent to ``my_t
-0001fd00: 7970 6528 782e 7374 6428 2929 6060 2e0d  ype(x.std())``..
-0001fd10: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
-0001fd20: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
-0001fd30: 2d2d 2d0d 0a20 2020 2020 2020 2073 6361  ---..        sca
-0001fd40: 6c61 720d 0a20 2020 2020 2020 2020 2020  lar..           
-0001fd50: 2054 6865 2073 7461 6e64 6172 6420 6465   The standard de
-0001fd60: 7669 6174 696f 6e20 6f66 2074 6865 2076  viation of the v
-0001fd70: 616c 7565 732e 0d0a 0d0a 2020 2020 2020  alues.....      
-0001fd80: 2020 5365 6520 416c 736f 0d0a 2020 2020    See Also..    
-0001fd90: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
-0001fda0: 2020 2020 2020 6e75 6d70 792e 7374 640d        numpy.std.
-0001fdb0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-0001fdc0: 6179 2e6e 616e 7374 6420 3a20 436f 6d70  ay.nanstd : Comp
-0001fdd0: 7574 6573 2074 6865 2073 7461 6e64 6172  utes the standar
-0001fde0: 6420 6465 7669 6174 696f 6e20 6f66 2060  d deviation of `
-0001fdf0: 4661 7374 4172 7261 7960 2076 616c 7565  FastArray` value
-0001fe00: 732c 2069 676e 6f72 696e 670d 0a20 2020  s, ignoring..   
-0001fe10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fe20: 2020 2020 2020 2020 4e61 4e73 2e0d 0a20          NaNs... 
-0001fe30: 2020 2020 2020 2044 6174 6173 6574 2e73         Dataset.s
-0001fe40: 7464 203a 2043 6f6d 7075 7465 7320 7468  td : Computes th
-0001fe50: 6520 7374 616e 6461 7264 2064 6576 6961  e standard devia
-0001fe60: 7469 6f6e 206f 6620 6e75 6d65 7269 6361  tion of numerica
-0001fe70: 6c20 6044 6174 6173 6574 6020 636f 6c75  l `Dataset` colu
-0001fe80: 6d6e 732e 0d0a 2020 2020 2020 2020 4772  mns...        Gr
-0001fe90: 6f75 7042 794f 7073 2e73 7464 203a 2043  oupByOps.std : C
-0001fea0: 6f6d 7075 7465 7320 7468 6520 7374 616e  omputes the stan
-0001feb0: 6461 7264 2064 6576 6961 7469 6f6e 206f  dard deviation o
-0001fec0: 6620 6561 6368 2067 726f 7570 2e20 5573  f each group. Us
-0001fed0: 6564 2062 790d 0a20 2020 2020 2020 2020  ed by..         
-0001fee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fef0: 6043 6174 6567 6f72 6963 616c 6020 6f62  `Categorical` ob
-0001ff00: 6a65 6374 732e 0d0a 0d0a 2020 2020 2020  jects.....      
-0001ff10: 2020 4e6f 7465 730d 0a20 2020 2020 2020    Notes..       
-0001ff20: 202d 2d2d 2d2d 0d0a 2020 2020 2020 2020   -----..        
-0001ff30: 5468 6520 6064 7479 7065 6020 6b65 7977  The `dtype` keyw
-0001ff40: 6f72 6420 666f 7220 6046 6173 7441 7272  ord for `FastArr
-0001ff50: 6179 2e73 7464 6020 7370 6563 6966 6965  ay.std` specifie
-0001ff60: 7320 7468 6520 6461 7461 2074 7970 6520  s the data type 
-0001ff70: 6f66 2074 6865 2072 6573 756c 742e 0d0a  of the result...
-0001ff80: 2020 2020 2020 2020 5468 6973 2064 6966          This dif
-0001ff90: 6665 7273 2066 726f 6d20 606e 756d 7079  fers from `numpy
-0001ffa0: 2e73 7464 602c 2077 6865 7265 2069 7420  .std`, where it 
-0001ffb0: 7370 6563 6966 6965 7320 7468 6520 6461  specifies the da
-0001ffc0: 7461 2074 7970 6520 7573 6564 2074 6f20  ta type used to 
-0001ffd0: 636f 6d70 7574 650d 0a20 2020 2020 2020  compute..       
-0001ffe0: 2074 6865 2073 7461 6e64 6172 6420 6465   the standard de
-0001fff0: 7669 6174 696f 6e2e 0d0a 0d0a 2020 2020  viation.....    
-00020000: 2020 2020 2a2a 4e6f 7465 7320 6f6e 2055      **Notes on U
-00020010: 7369 6e67 204e 756d 5079 2050 6172 616d  sing NumPy Param
-00020020: 6574 6572 732a 2a0d 0a0d 0a20 2020 2020  eters**....     
-00020030: 2020 2055 7369 6e67 2061 6e79 206f 6620     Using any of 
-00020040: 7468 6520 666f 6c6c 6f77 696e 6720 4e75  the following Nu
-00020050: 6d50 7920 7061 7261 6d65 7465 7273 2077  mPy parameters w
-00020060: 696c 6c20 6361 7573 6520 5269 7074 6162  ill cause Riptab
-00020070: 6c65 2074 6f20 7377 6974 6368 2074 6f0d  le to switch to.
-00020080: 0a20 2020 2020 2020 2074 6865 204e 756d  .        the Num
-00020090: 5079 2069 6d70 6c65 6d65 6e74 6174 696f  Py implementatio
-000200a0: 6e20 6f66 2074 6869 7320 6d65 7468 6f64  n of this method
-000200b0: 2028 606e 756d 7079 2e73 7464 6029 2e20   (`numpy.std`). 
-000200c0: 486f 7765 7665 722c 2075 6e74 696c 2061  However, until a
-000200d0: 0d0a 2020 2020 2020 2020 7265 706f 7274  ..        report
-000200e0: 6564 2062 7567 2069 7320 6669 7865 642c  ed bug is fixed,
-000200f0: 2069 6620 796f 7520 616c 736f 2069 6e63   if you also inc
-00020100: 6c75 6465 2074 6865 2060 6474 7970 6560  lude the `dtype`
-00020110: 2070 6172 616d 6574 6572 2069 7420 7769   parameter it wi
-00020120: 6c6c 2062 650d 0a20 2020 2020 2020 2061  ll be..        a
-00020130: 7070 6c69 6564 2074 6f20 7468 6520 7265  pplied to the re
-00020140: 7375 6c74 2c20 6e6f 7420 7573 6564 2074  sult, not used t
-00020150: 6f20 636f 6d70 7574 6520 7468 6520 7661  o compute the va
-00020160: 7269 616e 6365 2061 7320 6974 2069 7320  riance as it is 
-00020170: 696e 0d0a 2020 2020 2020 2020 606e 756d  in..        `num
-00020180: 7079 2e73 7464 602e 0d0a 0d0a 2020 2020  py.std`.....    
-00020190: 2020 2020 416c 736f 206e 6f74 6520 7468      Also note th
-000201a0: 6174 2069 6620 796f 7520 7573 6520 616e  at if you use an
-000201b0: 7920 6f66 2074 6865 2066 6f6c 6c6f 7769  y of the followi
-000201c0: 6e67 204e 756d 5079 2070 6172 616d 6574  ng NumPy paramet
-000201d0: 6572 7320 616e 6420 616c 736f 0d0a 2020  ers and also..  
-000201e0: 2020 2020 2020 696e 636c 7564 6520 6120        include a 
-000201f0: 6066 696c 7465 7260 206b 6579 776f 7264  `filter` keyword
-00020200: 2061 7267 756d 656e 7420 2877 6869 6368   argument (which
-00020210: 2060 6e75 6d70 792e 7374 6460 2064 6f65   `numpy.std` doe
-00020220: 7320 6e6f 7420 6163 6365 7074 292c 0d0a  s not accept),..
-00020230: 2020 2020 2020 2020 5269 7074 6162 6c65          Riptable
-00020240: 2773 2069 6d70 6c65 6d65 6e74 6174 696f  's implementatio
-00020250: 6e20 6f66 2060 7374 6460 2077 696c 6c20  n of `std` will 
-00020260: 6265 2075 7365 6420 7769 7468 2074 6865  be used with the
-00020270: 2066 696c 7465 7220 6172 6775 6d65 6e74   filter argument
-00020280: 0d0a 2020 2020 2020 2020 616e 6420 7468  ..        and th
-00020290: 6520 4e75 6d50 7920 7061 7261 6d65 7465  e NumPy paramete
-000202a0: 7273 2077 696c 6c20 6265 2069 676e 6f72  rs will be ignor
-000202b0: 6564 2e0d 0a0d 0a20 2020 2020 2020 2061  ed.....        a
-000202c0: 7869 7320 3a20 4e6f 6e65 206f 7220 696e  xis : None or in
-000202d0: 7420 6f72 2074 7570 6c65 206f 6620 696e  t or tuple of in
-000202e0: 7473 2c20 6f70 7469 6f6e 616c 0d0a 2020  ts, optional..  
-000202f0: 2020 2020 2020 2020 2020 4178 6973 206f            Axis o
-00020300: 7220 6178 6573 2061 6c6f 6e67 2077 6869  r axes along whi
-00020310: 6368 2074 6865 2073 7461 6e64 6172 6420  ch the standard 
-00020320: 6465 7669 6174 696f 6e20 6973 2063 6f6d  deviation is com
-00020330: 7075 7465 642e 2054 6865 0d0a 2020 2020  puted. The..    
-00020340: 2020 2020 2020 2020 6465 6661 756c 7420          default 
-00020350: 6973 2074 6f20 636f 6d70 7574 6520 7468  is to compute th
+0001a8b0: 2323 2323 230d 0a20 2020 2023 2052 6564  #####..    # Red
+0001a8c0: 7563 6520 7365 6374 696f 6e0d 0a20 2020  uce section..   
+0001a8d0: 2023 2323 2323 2323 2323 2323 2323 2323   ###############
+0001a8e0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0001a8f0: 2323 2323 2323 2323 2323 2323 2323 0d0a  ##############..
+0001a900: 0d0a 2020 2020 6465 6620 5f66 615f 6669  ..    def _fa_fi
+0001a910: 6c74 6572 5f77 7261 7070 6572 2873 656c  lter_wrapper(sel
+0001a920: 662c 206d 7946 756e 632c 2066 696c 7465  f, myFunc, filte
+0001a930: 723d 4e6f 6e65 2c20 6474 7970 653d 4e6f  r=None, dtype=No
+0001a940: 6e65 293a 0d0a 2020 2020 2020 2020 6966  ne):..        if
+0001a950: 2066 696c 7465 7220 6973 2054 7275 653a   filter is True:
+0001a960: 0d0a 2020 2020 2020 2020 2020 2020 6669  ..            fi
+0001a970: 6c74 6572 203d 206f 6e65 7328 6c65 6e28  lter = ones(len(
+0001a980: 7365 6c66 292c 2064 7479 7065 3d62 6f6f  self), dtype=boo
+0001a990: 6c29 0d0a 2020 2020 2020 2020 6966 2066  l)..        if f
+0001a9a0: 696c 7465 7220 6973 2046 616c 7365 3a0d  ilter is False:.
+0001a9b0: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
+0001a9c0: 7465 7220 3d20 7a65 726f 7328 6c65 6e28  ter = zeros(len(
+0001a9d0: 7365 6c66 292c 2064 7479 7065 3d62 6f6f  self), dtype=boo
+0001a9e0: 6c29 0d0a 2020 2020 2020 2020 6966 206c  l)..        if l
+0001a9f0: 656e 2866 696c 7465 7229 2021 3d20 6c65  en(filter) != le
+0001aa00: 6e28 7365 6c66 293a 0d0a 2020 2020 2020  n(self):..      
+0001aa10: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
+0001aa20: 6545 7272 6f72 2822 4669 6c74 6572 2061  eError("Filter a
+0001aa30: 6e64 2069 6e70 7574 206e 6f74 2074 6865  nd input not the
+0001aa40: 2073 616d 6520 6c65 6e67 7468 2e22 290d   same length.").
+0001aa50: 0a0d 0a20 2020 2020 2020 2069 6620 6e6f  ...        if no
+0001aa60: 7420 7365 6c66 2e69 7363 6f6d 7075 7461  t self.iscomputa
+0001aa70: 626c 6528 293a 0d0a 2020 2020 2020 2020  ble():..        
+0001aa80: 2020 2020 7265 7475 726e 206e 702e 4e61      return np.Na
+0001aa90: 4e0d 0a0d 0a20 2020 2020 2020 2069 6620  N....        if 
+0001aaa0: 6474 7970 6520 6973 206e 6f74 204e 6f6e  dtype is not Non
+0001aab0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0001aac0: 7265 7475 726e 2064 7479 7065 286d 7946  return dtype(myF
+0001aad0: 756e 6328 7365 6c66 2c20 6669 6c74 6572  unc(self, filter
+0001aae0: 2929 0d0a 0d0a 2020 2020 2020 2020 7265  ))....        re
+0001aaf0: 7475 726e 206d 7946 756e 6328 7365 6c66  turn myFunc(self
+0001ab00: 2c20 6669 6c74 6572 290d 0a0d 0a20 2020  , filter)....   
+0001ab10: 2064 6566 205f 6661 5f6b 6579 776f 7264   def _fa_keyword
+0001ab20: 5f77 7261 7070 6572 2873 656c 662c 2066  _wrapper(self, f
+0001ab30: 696c 7465 723d 4e6f 6e65 2c20 6474 7970  ilter=None, dtyp
+0001ab40: 653d 4e6f 6e65 2c20 6178 6973 3d4e 6f6e  e=None, axis=Non
+0001ab50: 652c 206b 6565 7064 696d 733d 4e6f 6e65  e, keepdims=None
+0001ab60: 2c20 6464 6f66 3d4e 6f6e 652c 202a 2a6b  , ddof=None, **k
+0001ab70: 7761 7267 7329 3a0d 0a20 2020 2020 2020  wargs):..       
+0001ab80: 2069 6620 7365 6c66 2e64 7479 7065 2e63   if self.dtype.c
+0001ab90: 6861 7220 696e 2022 4f53 5522 3a0d 0a20  har in "OSU":.. 
+0001aba0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0001abb0: 2054 7970 6545 7272 6f72 2822 4661 7374   TypeError("Fast
+0001abc0: 4172 7261 7920 6f70 6572 6174 696f 6e20  Array operation 
+0001abd0: 6170 706c 6965 6420 746f 2073 7472 696e  applied to strin
+0001abe0: 6720 6f72 206f 626a 6563 7420 6172 7261  g or object arra
+0001abf0: 792e 2229 0d0a 0d0a 2020 2020 2020 2020  y.")....        
+0001ac00: 6966 2022 6f75 7422 2069 6e20 6b77 6172  if "out" in kwar
+0001ac10: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
+0001ac20: 2069 6620 6b77 6172 6773 5b22 6f75 7422   if kwargs["out"
+0001ac30: 5d20 6973 204e 6f6e 653a 0d0a 2020 2020  ] is None:..    
+0001ac40: 2020 2020 2020 2020 2020 2020 6b77 6172              kwar
+0001ac50: 6773 2e70 6f70 2822 6f75 7422 290d 0a0d  gs.pop("out")...
+0001ac60: 0a20 2020 2020 2020 2069 6620 616e 7928  .        if any(
+0001ac70: 6b77 6172 6773 293a 0d0a 2020 2020 2020  kwargs):..      
+0001ac80: 2020 2020 2020 6c6f 6767 696e 672e 7761        logging.wa
+0001ac90: 726e 696e 6728 0d0a 2020 2020 2020 2020  rning(..        
+0001aca0: 2020 2020 2020 2020 2255 6e65 7870 6563          "Unexpec
+0001acb0: 7465 6420 4661 7374 4172 7261 7920 6f70  ted FastArray op
+0001acc0: 6572 6174 696f 6e20 6b65 7977 6f72 6428  eration keyword(
+0001acd0: 7329 3a20 2220 2b20 222c 2022 2e6a 6f69  s): " + ", ".joi
+0001ace0: 6e28 5b6b 6579 2066 6f72 206b 6579 2c20  n([key for key, 
+0001acf0: 7661 6c75 6520 696e 206b 7761 7267 732e  value in kwargs.
+0001ad00: 6974 656d 7328 295d 290d 0a20 2020 2020  items()])..     
+0001ad10: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
+0001ad20: 2020 2020 6966 2064 7479 7065 2069 7320      if dtype is 
+0001ad30: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+0001ad40: 2020 2020 2020 206b 7761 7267 735b 2264         kwargs["d
+0001ad50: 7479 7065 225d 203d 2064 7479 7065 0d0a  type"] = dtype..
+0001ad60: 2020 2020 2020 2020 6966 2061 7869 733a          if axis:
+0001ad70: 0d0a 2020 2020 2020 2020 2020 2020 6b77  ..            kw
+0001ad80: 6172 6773 5b22 6178 6973 225d 203d 2061  args["axis"] = a
+0001ad90: 7869 730d 0a20 2020 2020 2020 2069 6620  xis..        if 
+0001ada0: 6b65 6570 6469 6d73 3a0d 0a20 2020 2020  keepdims:..     
+0001adb0: 2020 2020 2020 206b 7761 7267 735b 226b         kwargs["k
+0001adc0: 6565 7064 696d 7322 5d20 3d20 6b65 6570  eepdims"] = keep
+0001add0: 6469 6d73 0d0a 2020 2020 2020 2020 6966  dims..        if
+0001ade0: 2064 646f 6620 6973 206e 6f74 204e 6f6e   ddof is not Non
+0001adf0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0001ae00: 6b77 6172 6773 5b22 6464 6f66 225d 203d  kwargs["ddof"] =
+0001ae10: 2064 646f 660d 0a20 2020 2020 2020 2069   ddof..        i
+0001ae20: 6620 6669 6c74 6572 2069 7320 6e6f 7420  f filter is not 
+0001ae30: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+0001ae40: 2020 206b 7761 7267 735b 2266 696c 7465     kwargs["filte
+0001ae50: 7222 5d20 3d20 6669 6c74 6572 0d0a 0d0a  r"] = filter....
+0001ae60: 2020 2020 2020 2020 6966 2028 6669 6c74          if (filt
+0001ae70: 6572 2069 7320 6e6f 7420 4e6f 6e65 2920  er is not None) 
+0001ae80: 616e 6420 2828 6178 6973 2069 7320 6e6f  and ((axis is no
+0001ae90: 7420 4e6f 6e65 2920 6f72 2028 6b65 6570  t None) or (keep
+0001aea0: 6469 6d73 2069 7320 6e6f 7420 4e6f 6e65  dims is not None
+0001aeb0: 2920 6f72 2028 6464 6f66 2069 7320 6e6f  ) or (ddof is no
+0001aec0: 7420 4e6f 6e65 2929 3a0d 0a20 2020 2020  t None)):..     
+0001aed0: 2020 2020 2020 206c 6f67 6769 6e67 2e77         logging.w
+0001aee0: 6172 6e69 6e67 2822 5369 6e63 6520 4669  arning("Since Fi
+0001aef0: 6c74 6572 206b 6579 776f 7264 2069 7320  lter keyword is 
+0001af00: 7072 6573 656e 742c 2046 6173 7441 7272  present, FastArr
+0001af10: 6179 206f 7065 7261 7469 6f6e 7320 6967  ay operations ig
+0001af20: 6e6f 7265 2061 7869 732c 206b 6565 7064  nore axis, keepd
+0001af30: 696d 7320 616e 6420 6464 6f66 2229 0d0a  ims and ddof")..
+0001af40: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+0001af50: 206b 7761 7267 730d 0a0d 0a20 2020 2064   kwargs....    d
+0001af60: 6566 206e 616e 7375 6d28 7365 6c66 2c20  ef nansum(self, 
+0001af70: 6669 6c74 6572 3d4e 6f6e 652c 2064 7479  filter=None, dty
+0001af80: 7065 3d4e 6f6e 652c 2061 7869 733d 4e6f  pe=None, axis=No
+0001af90: 6e65 2c20 6b65 6570 6469 6d73 3d4e 6f6e  ne, keepdims=Non
+0001afa0: 652c 202a 2a6b 7761 7267 7329 202d 3e20  e, **kwargs) -> 
+0001afb0: 6e70 2e6e 756d 6265 723a 0d0a 2020 2020  np.number:..    
+0001afc0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+0001afd0: 2043 6f6d 7075 7465 2074 6865 2073 756d   Compute the sum
+0001afe0: 206f 6620 7468 6520 7661 6c75 6573 2069   of the values i
+0001aff0: 6e20 7468 6520 6669 7273 7420 6172 6775  n the first argu
+0001b000: 6d65 6e74 2c20 6967 6e6f 7269 6e67 204e  ment, ignoring N
+0001b010: 614e 732e 0d0a 0d0a 2020 2020 2020 2020  aNs.....        
+0001b020: 4966 2061 6c6c 2076 616c 7565 7320 696e  If all values in
+0001b030: 2074 6865 2066 6972 7374 2061 7267 756d   the first argum
+0001b040: 656e 7420 6172 6520 4e61 4e73 2c20 6060  ent are NaNs, ``
+0001b050: 302e 3060 6020 6973 2072 6574 7572 6e65  0.0`` is returne
+0001b060: 642e 0d0a 0d0a 2020 2020 2020 2020 5061  d.....        Pa
+0001b070: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+0001b080: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+0001b090: 2020 2020 2020 6669 6c74 6572 203a 2061        filter : a
+0001b0a0: 7272 6179 206f 6620 626f 6f6c 2c20 6465  rray of bool, de
+0001b0b0: 6661 756c 7420 4e6f 6e65 0d0a 2020 2020  fault None..    
+0001b0c0: 2020 2020 2020 2020 5370 6563 6966 6965          Specifie
+0001b0d0: 7320 7768 6963 6820 656c 656d 656e 7473  s which elements
+0001b0e0: 2074 6f20 696e 636c 7564 6520 696e 2074   to include in t
+0001b0f0: 6865 2073 756d 2063 616c 6375 6c61 7469  he sum calculati
+0001b100: 6f6e 2e20 4966 2074 6865 2066 696c 7465  on. If the filte
+0001b110: 7220 6973 0d0a 2020 2020 2020 2020 2020  r is..          
+0001b120: 2020 756e 6966 6f72 6d6c 7920 6060 4661    uniformly ``Fa
+0001b130: 6c73 6560 602c 2060 6e61 6e73 756d 6020  lse``, `nansum` 
+0001b140: 7265 7475 726e 7320 6060 302e 3060 602e  returns ``0.0``.
+0001b150: 0d0a 2020 2020 2020 2020 6474 7970 6520  ..        dtype 
+0001b160: 3a20 7274 2e64 7479 7065 206f 7220 6e75  : rt.dtype or nu
+0001b170: 6d70 792e 6474 7970 652c 2064 6566 6175  mpy.dtype, defau
+0001b180: 6c74 2066 6c6f 6174 3634 0d0a 2020 2020  lt float64..    
+0001b190: 2020 2020 2020 2020 5468 6520 6461 7461          The data
+0001b1a0: 2074 7970 6520 6f66 2074 6865 2072 6573   type of the res
+0001b1b0: 756c 742e 2046 6f72 2061 2060 4661 7374  ult. For a `Fast
+0001b1c0: 4172 7261 7960 2060 6078 6060 2c0d 0a20  Array` ``x``,.. 
+0001b1d0: 2020 2020 2020 2020 2020 2060 6078 2e6e             ``x.n
+0001b1e0: 616e 7375 6d28 6474 7970 6520 3d20 6d79  ansum(dtype = my
+0001b1f0: 5f74 7970 6529 6060 2069 7320 6571 7569  _type)`` is equi
+0001b200: 7661 6c65 6e74 2074 6f20 6060 6d79 5f74  valent to ``my_t
+0001b210: 7970 6528 782e 6e61 6e73 756d 2829 2960  ype(x.nansum())`
+0001b220: 602e 0d0a 0d0a 2020 2020 2020 2020 5265  `.....        Re
+0001b230: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
+0001b240: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0001b250: 7363 616c 6172 0d0a 2020 2020 2020 2020  scalar..        
+0001b260: 2020 2020 5468 6520 7375 6d20 6f66 2074      The sum of t
+0001b270: 6865 2076 616c 7565 732e 0d0a 0d0a 2020  he values.....  
+0001b280: 2020 2020 2020 5365 6520 416c 736f 0d0a        See Also..
+0001b290: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+0001b2a0: 0d0a 2020 2020 2020 2020 6e75 6d70 792e  ..        numpy.
+0001b2b0: 6e61 6e73 756d 0d0a 2020 2020 2020 2020  nansum..        
+0001b2c0: 4461 7461 7365 742e 6e61 6e73 756d 203a  Dataset.nansum :
+0001b2d0: 2053 756d 7320 7468 6520 7661 6c75 6573   Sums the values
+0001b2e0: 206f 6620 6e75 6d65 7269 6361 6c20 6044   of numerical `D
+0001b2f0: 6174 6173 6574 6020 636f 6c75 6d6e 732c  ataset` columns,
+0001b300: 2069 676e 6f72 696e 6720 4e61 4e73 2e0d   ignoring NaNs..
+0001b310: 0a20 2020 2020 2020 2047 726f 7570 4279  .        GroupBy
+0001b320: 4f70 732e 6e61 6e73 756d 203a 2053 756d  Ops.nansum : Sum
+0001b330: 7320 7468 6520 7661 6c75 6573 206f 6620  s the values of 
+0001b340: 6561 6368 2067 726f 7570 2c20 6967 6e6f  each group, igno
+0001b350: 7269 6e67 204e 614e 732e 2055 7365 6420  ring NaNs. Used 
+0001b360: 6279 0d0a 2020 2020 2020 2020 2020 2020  by..            
+0001b370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b380: 6043 6174 6567 6f72 6963 616c 6020 6f62  `Categorical` ob
+0001b390: 6a65 6374 732e 0d0a 0d0a 2020 2020 2020  jects.....      
+0001b3a0: 2020 4e6f 7465 730d 0a20 2020 2020 2020    Notes..       
+0001b3b0: 202d 2d2d 2d2d 0d0a 2020 2020 2020 2020   -----..        
+0001b3c0: 5468 6520 6064 7479 7065 6020 6b65 7977  The `dtype` keyw
+0001b3d0: 6f72 6420 666f 7220 6046 6173 7441 7272  ord for `FastArr
+0001b3e0: 6179 2e6e 616e 7375 6d60 2073 7065 6369  ay.nansum` speci
+0001b3f0: 6669 6573 2074 6865 2064 6174 6120 7479  fies the data ty
+0001b400: 7065 206f 6620 7468 650d 0a20 2020 2020  pe of the..     
+0001b410: 2020 2072 6573 756c 742e 2054 6869 7320     result. This 
+0001b420: 6469 6666 6572 7320 6672 6f6d 2060 6e75  differs from `nu
+0001b430: 6d70 792e 6e61 6e73 756d 602c 2077 6865  mpy.nansum`, whe
+0001b440: 7265 2069 7420 7370 6563 6966 6965 7320  re it specifies 
+0001b450: 7468 6520 6461 7461 2074 7970 6520 7573  the data type us
+0001b460: 6564 0d0a 2020 2020 2020 2020 746f 2063  ed..        to c
+0001b470: 6f6d 7075 7465 2074 6865 2073 756d 2e0d  ompute the sum..
+0001b480: 0a0d 0a20 2020 2020 2020 202a 2a4e 6f74  ...        **Not
+0001b490: 6573 206f 6e20 5573 696e 6720 4e75 6d50  es on Using NumP
+0001b4a0: 7920 5061 7261 6d65 7465 7273 2a2a 0d0a  y Parameters**..
+0001b4b0: 0d0a 2020 2020 2020 2020 5573 696e 6720  ..        Using 
+0001b4c0: 6569 7468 6572 206f 6620 7468 6520 666f  either of the fo
+0001b4d0: 6c6c 6f77 696e 6720 4e75 6d50 7920 7061  llowing NumPy pa
+0001b4e0: 7261 6d65 7465 7273 2077 696c 6c20 6361  rameters will ca
+0001b4f0: 7573 6520 5269 7074 6162 6c65 2074 6f20  use Riptable to 
+0001b500: 7377 6974 6368 2074 6f0d 0a20 2020 2020  switch to..     
+0001b510: 2020 2074 6865 204e 756d 5079 2069 6d70     the NumPy imp
+0001b520: 6c65 6d65 6e74 6174 696f 6e20 6f66 2074  lementation of t
+0001b530: 6869 7320 6d65 7468 6f64 2028 606e 756d  his method (`num
+0001b540: 7079 2e6e 616e 7375 6d60 292e 2048 6f77  py.nansum`). How
+0001b550: 6576 6572 2c20 756e 7469 6c20 610d 0a20  ever, until a.. 
+0001b560: 2020 2020 2020 2072 6570 6f72 7465 6420         reported 
+0001b570: 6275 6720 6973 2066 6978 6564 2c20 6966  bug is fixed, if
+0001b580: 2079 6f75 2061 6c73 6f20 696e 636c 7564   you also includ
+0001b590: 6520 7468 6520 6064 7479 7065 6020 7061  e the `dtype` pa
+0001b5a0: 7261 6d65 7465 7220 6974 2077 696c 6c20  rameter it will 
+0001b5b0: 6265 0d0a 2020 2020 2020 2020 6170 706c  be..        appl
+0001b5c0: 6965 6420 746f 2074 6865 2072 6573 756c  ied to the resul
+0001b5d0: 742c 206e 6f74 2075 7365 6420 746f 2063  t, not used to c
+0001b5e0: 6f6d 7075 7465 2074 6865 2073 756d 2061  ompute the sum a
+0001b5f0: 7320 6974 2069 7320 696e 2060 6e75 6d70  s it is in `nump
+0001b600: 792e 6e61 6e73 756d 602e 0d0a 0d0a 2020  y.nansum`.....  
+0001b610: 2020 2020 2020 416c 736f 206e 6f74 6520        Also note 
+0001b620: 7468 6174 2069 6620 796f 7520 7573 6520  that if you use 
+0001b630: 6569 7468 6572 206f 6620 7468 6520 666f  either of the fo
+0001b640: 6c6c 6f77 696e 6720 4e75 6d50 7920 7061  llowing NumPy pa
+0001b650: 7261 6d65 7465 7273 2061 6e64 2061 6c73  rameters and als
+0001b660: 6f0d 0a20 2020 2020 2020 2069 6e63 6c75  o..        inclu
+0001b670: 6465 2061 2060 6669 6c74 6572 6020 6b65  de a `filter` ke
+0001b680: 7977 6f72 6420 6172 6775 6d65 6e74 2028  yword argument (
+0001b690: 7768 6963 6820 606e 756d 7079 2e6e 616e  which `numpy.nan
+0001b6a0: 7375 6d60 2064 6f65 7320 6e6f 7420 6163  sum` does not ac
+0001b6b0: 6365 7074 292c 0d0a 2020 2020 2020 2020  cept),..        
+0001b6c0: 5269 7074 6162 6c65 2773 2069 6d70 6c65  Riptable's imple
+0001b6d0: 6d65 6e74 6174 696f 6e20 6f66 2060 6e61  mentation of `na
+0001b6e0: 6e73 756d 6020 7769 6c6c 2062 6520 7573  nsum` will be us
+0001b6f0: 6564 2077 6974 6820 7468 6520 6669 6c74  ed with the filt
+0001b700: 6572 2061 7267 756d 656e 7420 616e 640d  er argument and.
+0001b710: 0a20 2020 2020 2020 2074 6865 204e 756d  .        the Num
+0001b720: 5079 2070 6172 616d 6574 6572 7320 7769  Py parameters wi
+0001b730: 6c6c 2062 6520 6967 6e6f 7265 642e 0d0a  ll be ignored...
+0001b740: 0d0a 2020 2020 2020 2020 6178 6973 203a  ..        axis :
+0001b750: 207b 696e 742c 2074 7570 6c65 206f 6620   {int, tuple of 
+0001b760: 696e 742c 204e 6f6e 657d 2c20 6f70 7469  int, None}, opti
+0001b770: 6f6e 616c 0d0a 2020 2020 2020 2020 2020  onal..          
+0001b780: 2020 4178 6973 206f 7220 6178 6573 2061    Axis or axes a
+0001b790: 6c6f 6e67 2077 6869 6368 2074 6865 2073  long which the s
+0001b7a0: 756d 2069 7320 636f 6d70 7574 6564 2e20  um is computed. 
+0001b7b0: 5468 6520 6465 6661 756c 7420 6973 2074  The default is t
+0001b7c0: 6f20 636f 6d70 7574 6520 7468 650d 0a20  o compute the.. 
+0001b7d0: 2020 2020 2020 2020 2020 2073 756d 206f             sum o
+0001b7e0: 6620 7468 6520 666c 6174 7465 6e65 6420  f the flattened 
+0001b7f0: 6172 7261 792e 0d0a 0d0a 2020 2020 2020  array.....      
+0001b800: 2020 6b65 6570 6469 6d73 203a 2062 6f6f    keepdims : boo
+0001b810: 6c2c 206f 7074 696f 6e61 6c0d 0a20 2020  l, optional..   
+0001b820: 2020 2020 2020 2020 2049 6620 7468 6973           If this
+0001b830: 2069 7320 7365 7420 746f 2054 7275 652c   is set to True,
+0001b840: 2074 6865 2061 7865 7320 7768 6963 6820   the axes which 
+0001b850: 6172 6520 7265 6475 6365 6420 6172 6520  are reduced are 
+0001b860: 6c65 6674 2069 6e20 7468 6520 7265 7375  left in the resu
+0001b870: 6c74 2061 730d 0a20 2020 2020 2020 2020  lt as..         
+0001b880: 2020 2064 696d 656e 7369 6f6e 7320 7769     dimensions wi
+0001b890: 7468 2073 697a 6520 6f6e 652e 2057 6974  th size one. Wit
+0001b8a0: 6820 7468 6973 206f 7074 696f 6e2c 2074  h this option, t
+0001b8b0: 6865 2072 6573 756c 7420 7769 6c6c 2062  he result will b
+0001b8c0: 726f 6164 6361 7374 0d0a 2020 2020 2020  roadcast..      
+0001b8d0: 2020 2020 2020 636f 7272 6563 746c 7920        correctly 
+0001b8e0: 6167 6169 6e73 7420 7468 6520 6f72 6967  against the orig
+0001b8f0: 696e 616c 2069 6e70 7574 2061 7272 6179  inal input array
+0001b900: 2e0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
+0001b910: 2049 6620 7468 6520 7661 6c75 6520 6973   If the value is
+0001b920: 2061 6e79 7468 696e 6720 6275 7420 7468   anything but th
+0001b930: 6520 6465 6661 756c 742c 2074 6865 6e20  e default, then 
+0001b940: 606b 6565 7064 696d 7360 2077 696c 6c20  `keepdims` will 
+0001b950: 6265 2070 6173 7365 640d 0a20 2020 2020  be passed..     
+0001b960: 2020 2020 2020 2074 6872 6f75 6768 2074         through t
+0001b970: 6f20 7468 6520 606d 6561 6e60 206f 7220  o the `mean` or 
+0001b980: 6073 756d 6020 6d65 7468 6f64 7320 6f66  `sum` methods of
+0001b990: 2073 7562 2d63 6c61 7373 6573 206f 6620   sub-classes of 
+0001b9a0: 606e 6461 7272 6179 602e 2049 6620 7468  `ndarray`. If th
+0001b9b0: 650d 0a20 2020 2020 2020 2020 2020 2073  e..            s
+0001b9c0: 7562 2d63 6c61 7373 6573 2720 6d65 7468  ub-classes' meth
+0001b9d0: 6f64 7320 646f 206e 6f74 2069 6d70 6c65  ods do not imple
+0001b9e0: 6d65 6e74 2060 6b65 6570 6469 6d73 602c  ment `keepdims`,
+0001b9f0: 2061 6e79 2065 7863 6570 7469 6f6e 7320   any exceptions 
+0001ba00: 7769 6c6c 2062 650d 0a20 2020 2020 2020  will be..       
+0001ba10: 2020 2020 2072 6169 7365 642e 0d0a 0d0a       raised.....
+0001ba20: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
+0001ba30: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+0001ba40: 2d2d 0d0a 2020 2020 2020 2020 3e3e 3e20  --..        >>> 
+0001ba50: 6120 3d20 7274 2e46 6173 7441 7272 6179  a = rt.FastArray
+0001ba60: 285b 312c 2033 2c20 352c 2037 2c20 7274  ([1, 3, 5, 7, rt
+0001ba70: 2e6e 616e 5d29 0d0a 2020 2020 2020 2020  .nan])..        
+0001ba80: 3e3e 3e20 612e 6e61 6e73 756d 2829 0d0a  >>> a.nansum()..
+0001ba90: 2020 2020 2020 2020 3136 2e30 0d0a 0d0a          16.0....
+0001baa0: 2020 2020 2020 2020 5769 7468 2061 2060          With a `
+0001bab0: 6474 7970 6560 2073 7065 6369 6669 6564  dtype` specified
+0001bac0: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
+0001bad0: 2061 203d 2072 742e 4661 7374 4172 7261   a = rt.FastArra
+0001bae0: 7928 5b31 2e30 2c20 332e 302c 2035 2e30  y([1.0, 3.0, 5.0
+0001baf0: 2c20 372e 302c 2072 742e 6e61 6e5d 290d  , 7.0, rt.nan]).
+0001bb00: 0a20 2020 2020 2020 203e 3e3e 2061 2e6e  .        >>> a.n
+0001bb10: 616e 7375 6d28 6474 7970 6520 3d20 7274  ansum(dtype = rt
+0001bb20: 2e69 6e74 3332 290d 0a20 2020 2020 2020  .int32)..       
+0001bb30: 2031 360d 0a0d 0a20 2020 2020 2020 2057   16....        W
+0001bb40: 6974 6820 6120 6669 6c74 6572 3a0d 0a0d  ith a filter:...
+0001bb50: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
+0001bb60: 2072 742e 4661 7374 4172 7261 7928 5b31   rt.FastArray([1
+0001bb70: 2c20 332c 2035 2c20 372c 2072 742e 6e61  , 3, 5, 7, rt.na
+0001bb80: 6e5d 290d 0a20 2020 2020 2020 203e 3e3e  n])..        >>>
+0001bb90: 2062 203d 2072 742e 4661 7374 4172 7261   b = rt.FastArra
+0001bba0: 7928 5b46 616c 7365 2c20 5472 7565 2c20  y([False, True, 
+0001bbb0: 4661 6c73 652c 2054 7275 652c 2054 7275  False, True, Tru
+0001bbc0: 655d 290d 0a20 2020 2020 2020 203e 3e3e  e])..        >>>
+0001bbd0: 2061 2e6e 616e 7375 6d28 6669 6c74 6572   a.nansum(filter
+0001bbe0: 203d 2062 290d 0a20 2020 2020 2020 2031   = b)..        1
+0001bbf0: 302e 300d 0a20 2020 2020 2020 2022 2222  0.0..        """
+0001bc00: 0d0a 0d0a 2020 2020 2020 2020 6b77 6172  ....        kwar
+0001bc10: 6773 203d 2073 656c 662e 5f66 615f 6b65  gs = self._fa_ke
+0001bc20: 7977 6f72 645f 7772 6170 7065 7228 6669  yword_wrapper(fi
+0001bc30: 6c74 6572 3d66 696c 7465 722c 2064 7479  lter=filter, dty
+0001bc40: 7065 3d64 7479 7065 2c20 6178 6973 3d61  pe=dtype, axis=a
+0001bc50: 7869 732c 206b 6565 7064 696d 733d 6b65  xis, keepdims=ke
+0001bc60: 6570 6469 6d73 2c20 6464 6f66 3d4e 6f6e  epdims, ddof=Non
+0001bc70: 652c 202a 2a6b 7761 7267 7329 0d0a 0d0a  e, **kwargs)....
+0001bc80: 2020 2020 2020 2020 6966 2066 696c 7465          if filte
+0001bc90: 7220 6973 206e 6f74 204e 6f6e 653a 0d0a  r is not None:..
+0001bca0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001bcb0: 726e 2073 656c 662e 5f66 615f 6669 6c74  rn self._fa_filt
+0001bcc0: 6572 5f77 7261 7070 6572 285f 666e 616e  er_wrapper(_fnan
+0001bcd0: 7375 6d2c 2066 696c 7465 723d 6669 6c74  sum, filter=filt
+0001bce0: 6572 2c20 6474 7970 653d 6474 7970 6529  er, dtype=dtype)
+0001bcf0: 0d0a 0d0a 2020 2020 2020 2020 7265 7475  ....        retu
+0001bd00: 726e 2073 656c 662e 5f72 6564 7563 655f  rn self._reduce_
+0001bd10: 6368 6563 6b28 5245 4455 4345 5f46 554e  check(REDUCE_FUN
+0001bd20: 4354 494f 4e53 2e52 4544 5543 455f 4e41  CTIONS.REDUCE_NA
+0001bd30: 4e53 554d 2c20 6e70 2e6e 616e 7375 6d2c  NSUM, np.nansum,
+0001bd40: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
+0001bd50: 2020 6465 6620 6d65 616e 2873 656c 662c    def mean(self,
+0001bd60: 2066 696c 7465 723d 4e6f 6e65 2c20 6474   filter=None, dt
+0001bd70: 7970 653d 4e6f 6e65 2c20 6178 6973 3d4e  ype=None, axis=N
+0001bd80: 6f6e 652c 206b 6565 7064 696d 733d 4e6f  one, keepdims=No
+0001bd90: 6e65 2c20 2a2a 6b77 6172 6773 2920 2d3e  ne, **kwargs) ->
+0001bda0: 206e 702e 6e75 6d62 6572 3a0d 0a20 2020   np.number:..   
+0001bdb0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+0001bdc0: 2020 436f 6d70 7574 6520 7468 6520 6172    Compute the ar
+0001bdd0: 6974 686d 6574 6963 206d 6561 6e20 6f66  ithmetic mean of
+0001bde0: 2074 6865 2076 616c 7565 7320 696e 2074   the values in t
+0001bdf0: 6865 2066 6972 7374 2061 7267 756d 656e  he first argumen
+0001be00: 742e 0d0a 0d0a 2020 2020 2020 2020 5061  t.....        Pa
+0001be10: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+0001be20: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+0001be30: 2020 2020 2020 6669 6c74 6572 203a 2061        filter : a
+0001be40: 7272 6179 206f 6620 626f 6f6c 2c20 6465  rray of bool, de
+0001be50: 6661 756c 7420 4e6f 6e65 0d0a 2020 2020  fault None..    
+0001be60: 2020 2020 2020 2020 5370 6563 6966 6965          Specifie
+0001be70: 7320 7768 6963 6820 656c 656d 656e 7473  s which elements
+0001be80: 2074 6f20 696e 636c 7564 6520 696e 2074   to include in t
+0001be90: 6865 206d 6561 6e20 6361 6c63 756c 6174  he mean calculat
+0001bea0: 696f 6e2e 2049 6620 7468 6520 6669 6c74  ion. If the filt
+0001beb0: 6572 0d0a 2020 2020 2020 2020 2020 2020  er..            
+0001bec0: 6973 2075 6e69 666f 726d 6c79 2060 6046  is uniformly ``F
+0001bed0: 616c 7365 6060 2c20 606d 6561 6e60 2072  alse``, `mean` r
+0001bee0: 6574 7572 6e73 2061 2060 5a65 726f 4469  eturns a `ZeroDi
+0001bef0: 7669 7369 6f6e 4572 726f 7260 2e0d 0a20  visionError`... 
+0001bf00: 2020 2020 2020 2064 7479 7065 203a 2072         dtype : r
+0001bf10: 742e 6474 7970 6520 6f72 206e 756d 7079  t.dtype or numpy
+0001bf20: 2e64 7479 7065 2c20 6465 6661 756c 7420  .dtype, default 
+0001bf30: 666c 6f61 7436 340d 0a20 2020 2020 2020  float64..       
+0001bf40: 2020 2020 2054 6865 2064 6174 6120 7479       The data ty
+0001bf50: 7065 206f 6620 7468 6520 7265 7375 6c74  pe of the result
+0001bf60: 2e20 466f 7220 6120 6046 6173 7441 7272  . For a `FastArr
+0001bf70: 6179 6020 6060 7860 602c 0d0a 2020 2020  ay` ``x``,..    
+0001bf80: 2020 2020 2020 2020 6060 782e 6d65 616e          ``x.mean
+0001bf90: 2864 7479 7065 203d 206d 795f 7479 7065  (dtype = my_type
+0001bfa0: 2960 6020 6973 2065 7175 6976 616c 656e  )`` is equivalen
+0001bfb0: 7420 746f 2060 606d 795f 7479 7065 2878  t to ``my_type(x
+0001bfc0: 2e6d 6561 6e28 2929 6060 2e0d 0a0d 0a20  .mean())``..... 
+0001bfd0: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+0001bfe0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+0001bff0: 0a20 2020 2020 2020 2073 6361 6c61 720d  .        scalar.
+0001c000: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
+0001c010: 206d 6561 6e20 6f66 2074 6865 2076 616c   mean of the val
+0001c020: 7565 732e 0d0a 0d0a 2020 2020 2020 2020  ues.....        
+0001c030: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
+0001c040: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+0001c050: 2020 2020 6e75 6d70 792e 6d65 616e 0d0a      numpy.mean..
+0001c060: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+0001c070: 792e 6e61 6e6d 6561 6e20 3a20 436f 6d70  y.nanmean : Comp
+0001c080: 7574 6573 2074 6865 206d 6561 6e20 6f66  utes the mean of
+0001c090: 2060 4661 7374 4172 7261 7960 2076 616c   `FastArray` val
+0001c0a0: 7565 732c 2069 676e 6f72 696e 6720 4e61  ues, ignoring Na
+0001c0b0: 4e73 2e0d 0a20 2020 2020 2020 2044 6174  Ns...        Dat
+0001c0c0: 6173 6574 2e6d 6561 6e20 3a20 436f 6d70  aset.mean : Comp
+0001c0d0: 7574 6573 2074 6865 206d 6561 6e20 6f66  utes the mean of
+0001c0e0: 206e 756d 6572 6963 616c 2060 4461 7461   numerical `Data
+0001c0f0: 7365 7460 2063 6f6c 756d 6e73 2e0d 0a20  set` columns... 
+0001c100: 2020 2020 2020 2047 726f 7570 4279 4f70         GroupByOp
+0001c110: 732e 6d65 616e 203a 2043 6f6d 7075 7465  s.mean : Compute
+0001c120: 7320 7468 6520 6d65 616e 206f 6620 6561  s the mean of ea
+0001c130: 6368 2067 726f 7570 2e20 5573 6564 2062  ch group. Used b
+0001c140: 7920 6043 6174 6567 6f72 6963 616c 6020  y `Categorical` 
+0001c150: 6f62 6a65 6374 732e 0d0a 0d0a 2020 2020  objects.....    
+0001c160: 2020 2020 4e6f 7465 730d 0a20 2020 2020      Notes..     
+0001c170: 2020 202d 2d2d 2d2d 0d0a 2020 2020 2020     -----..      
+0001c180: 2020 5468 6520 6064 7479 7065 6020 6b65    The `dtype` ke
+0001c190: 7977 6f72 6420 666f 7220 6046 6173 7441  yword for `FastA
+0001c1a0: 7272 6179 2e6d 6561 6e60 2073 7065 6369  rray.mean` speci
+0001c1b0: 6669 6573 2074 6865 2064 6174 6120 7479  fies the data ty
+0001c1c0: 7065 206f 6620 7468 6520 7265 7375 6c74  pe of the result
+0001c1d0: 2e0d 0a20 2020 2020 2020 2054 6869 7320  ...        This 
+0001c1e0: 6469 6666 6572 7320 6672 6f6d 2060 6e75  differs from `nu
+0001c1f0: 6d70 792e 6d65 616e 602c 2077 6865 7265  mpy.mean`, where
+0001c200: 2069 7420 7370 6563 6966 6965 7320 7468   it specifies th
+0001c210: 6520 6461 7461 2074 7970 6520 7573 6564  e data type used
+0001c220: 2074 6f20 636f 6d70 7574 650d 0a20 2020   to compute..   
+0001c230: 2020 2020 2074 6865 206d 6561 6e2e 0d0a       the mean...
+0001c240: 0d0a 2020 2020 2020 2020 2a2a 4e6f 7465  ..        **Note
+0001c250: 7320 6f6e 2055 7369 6e67 204e 756d 5079  s on Using NumPy
+0001c260: 2050 6172 616d 6574 6572 732a 2a0d 0a0d   Parameters**...
+0001c270: 0a20 2020 2020 2020 2055 7369 6e67 2065  .        Using e
+0001c280: 6974 6865 7220 6f66 2074 6865 2066 6f6c  ither of the fol
+0001c290: 6c6f 7769 6e67 204e 756d 5079 2070 6172  lowing NumPy par
+0001c2a0: 616d 6574 6572 7320 7769 6c6c 2063 6175  ameters will cau
+0001c2b0: 7365 2052 6970 7461 626c 6520 746f 2073  se Riptable to s
+0001c2c0: 7769 7463 6820 746f 0d0a 2020 2020 2020  witch to..      
+0001c2d0: 2020 7468 6520 4e75 6d50 7920 696d 706c    the NumPy impl
+0001c2e0: 656d 656e 7461 7469 6f6e 206f 6620 7468  ementation of th
+0001c2f0: 6973 206d 6574 686f 6420 2860 6e75 6d70  is method (`nump
+0001c300: 792e 6d65 616e 6029 2e20 486f 7765 7665  y.mean`). Howeve
+0001c310: 722c 2075 6e74 696c 2061 0d0a 2020 2020  r, until a..    
+0001c320: 2020 2020 7265 706f 7274 6564 2062 7567      reported bug
+0001c330: 2069 7320 6669 7865 642c 2069 6620 796f   is fixed, if yo
+0001c340: 7520 616c 736f 2069 6e63 6c75 6465 2074  u also include t
+0001c350: 6865 2060 6474 7970 6560 2070 6172 616d  he `dtype` param
+0001c360: 6574 6572 2069 7420 7769 6c6c 2062 650d  eter it will be.
+0001c370: 0a20 2020 2020 2020 2061 7070 6c69 6564  .        applied
+0001c380: 2074 6f20 7468 6520 7265 7375 6c74 2c20   to the result, 
+0001c390: 6e6f 7420 7573 6564 2074 6f20 636f 6d70  not used to comp
+0001c3a0: 7574 6520 7468 6520 6d65 616e 2061 7320  ute the mean as 
+0001c3b0: 6974 2069 7320 696e 2060 6e75 6d70 792e  it is in `numpy.
+0001c3c0: 6d65 616e 602e 0d0a 0d0a 2020 2020 2020  mean`.....      
+0001c3d0: 2020 416c 736f 206e 6f74 6520 7468 6174    Also note that
+0001c3e0: 2069 6620 796f 7520 7573 6520 6569 7468   if you use eith
+0001c3f0: 6572 206f 6620 7468 6520 666f 6c6c 6f77  er of the follow
+0001c400: 696e 6720 4e75 6d50 7920 7061 7261 6d65  ing NumPy parame
+0001c410: 7465 7273 2061 6e64 2061 6c73 6f0d 0a20  ters and also.. 
+0001c420: 2020 2020 2020 2069 6e63 6c75 6465 2061         include a
+0001c430: 2060 6669 6c74 6572 6020 6b65 7977 6f72   `filter` keywor
+0001c440: 6420 6172 6775 6d65 6e74 2028 7768 6963  d argument (whic
+0001c450: 6820 606e 756d 7079 2e6d 6561 6e60 2064  h `numpy.mean` d
+0001c460: 6f65 7320 6e6f 7420 6163 6365 7074 292c  oes not accept),
+0001c470: 0d0a 2020 2020 2020 2020 5269 7074 6162  ..        Riptab
+0001c480: 6c65 2773 2069 6d70 6c65 6d65 6e74 6174  le's implementat
+0001c490: 696f 6e20 6f66 2060 6d65 616e 6020 7769  ion of `mean` wi
+0001c4a0: 6c6c 2062 6520 7573 6564 2077 6974 6820  ll be used with 
+0001c4b0: 7468 6520 6669 6c74 6572 2061 7267 756d  the filter argum
+0001c4c0: 656e 7420 616e 640d 0a20 2020 2020 2020  ent and..       
+0001c4d0: 2074 6865 204e 756d 5079 2070 6172 616d   the NumPy param
+0001c4e0: 6574 6572 7320 7769 6c6c 2062 6520 6967  eters will be ig
+0001c4f0: 6e6f 7265 642e 0d0a 0d0a 2020 2020 2020  nored.....      
+0001c500: 2020 6178 6973 203a 204e 6f6e 6520 6f72    axis : None or
+0001c510: 2069 6e74 206f 7220 7475 706c 6520 6f66   int or tuple of
+0001c520: 2069 6e74 732c 206f 7074 696f 6e61 6c0d   ints, optional.
+0001c530: 0a20 2020 2020 2020 2020 2020 2041 7869  .            Axi
+0001c540: 7320 6f72 2061 7865 7320 616c 6f6e 6720  s or axes along 
+0001c550: 7768 6963 6820 7468 6520 6d65 616e 7320  which the means 
+0001c560: 6172 6520 636f 6d70 7574 6564 2e20 5468  are computed. Th
+0001c570: 6520 6465 6661 756c 7420 6973 2074 6f20  e default is to 
+0001c580: 636f 6d70 7574 650d 0a20 2020 2020 2020  compute..       
+0001c590: 2020 2020 2074 6865 206d 6561 6e20 6f66       the mean of
+0001c5a0: 2074 6865 2066 6c61 7474 656e 6564 2061   the flattened a
+0001c5b0: 7272 6179 2e0d 0a0d 0a20 2020 2020 2020  rray.....       
+0001c5c0: 206b 6565 7064 696d 7320 3a20 626f 6f6c   keepdims : bool
+0001c5d0: 2c20 6f70 7469 6f6e 616c 0d0a 2020 2020  , optional..    
+0001c5e0: 2020 2020 2020 2020 4966 2074 6869 7320          If this 
+0001c5f0: 6973 2073 6574 2074 6f20 5472 7565 2c20  is set to True, 
+0001c600: 7468 6520 6178 6573 2077 6869 6368 2061  the axes which a
+0001c610: 7265 2072 6564 7563 6564 2061 7265 206c  re reduced are l
+0001c620: 6566 7420 696e 2074 6865 2072 6573 756c  eft in the resul
+0001c630: 7420 6173 0d0a 2020 2020 2020 2020 2020  t as..          
+0001c640: 2020 6469 6d65 6e73 696f 6e73 2077 6974    dimensions wit
+0001c650: 6820 7369 7a65 206f 6e65 2e20 5769 7468  h size one. With
+0001c660: 2074 6869 7320 6f70 7469 6f6e 2c20 7468   this option, th
+0001c670: 6520 7265 7375 6c74 2077 696c 6c20 6272  e result will br
+0001c680: 6f61 6463 6173 740d 0a20 2020 2020 2020  oadcast..       
+0001c690: 2020 2020 2063 6f72 7265 6374 6c79 2061       correctly a
+0001c6a0: 6761 696e 7374 2074 6865 206f 7269 6769  gainst the origi
+0001c6b0: 6e61 6c20 696e 7075 7420 6172 7261 792e  nal input array.
+0001c6c0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0001c6d0: 4966 2074 6865 2064 6566 6175 6c74 2076  If the default v
+0001c6e0: 616c 7565 2069 7320 7061 7373 6564 2c20  alue is passed, 
+0001c6f0: 7468 656e 2060 6b65 6570 6469 6d73 6020  then `keepdims` 
+0001c700: 7769 6c6c 206e 6f74 2062 6520 7061 7373  will not be pass
+0001c710: 6564 2074 6872 6f75 6768 0d0a 2020 2020  ed through..    
+0001c720: 2020 2020 2020 2020 746f 2074 6865 2060          to the `
+0001c730: 6d65 616e 6020 6d65 7468 6f64 206f 6620  mean` method of 
+0001c740: 7375 622d 636c 6173 7365 7320 6f66 2060  sub-classes of `
+0001c750: 6e64 6172 7261 7960 2c20 686f 7765 7665  ndarray`, howeve
+0001c760: 7220 616e 7920 6e6f 6e2d 6465 6661 756c  r any non-defaul
+0001c770: 740d 0a20 2020 2020 2020 2020 2020 2076  t..            v
+0001c780: 616c 7565 2077 696c 6c20 6265 2e20 4966  alue will be. If
+0001c790: 2074 6865 2073 7562 2d63 6c61 7373 2773   the sub-class's
+0001c7a0: 206d 6574 686f 6420 646f 6573 206e 6f74   method does not
+0001c7b0: 2069 6d70 6c65 6d65 6e74 2060 6b65 6570   implement `keep
+0001c7c0: 6469 6d73 602c 2061 6e79 0d0a 2020 2020  dims`, any..    
+0001c7d0: 2020 2020 2020 2020 6578 6365 7074 696f          exceptio
+0001c7e0: 6e73 2077 696c 6c20 6265 2072 6169 7365  ns will be raise
+0001c7f0: 642e 0d0a 0d0a 2020 2020 2020 2020 4578  d.....        Ex
+0001c800: 616d 706c 6573 0d0a 2020 2020 2020 2020  amples..        
+0001c810: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+0001c820: 2020 3e3e 3e20 6120 3d20 7274 2e46 6173    >>> a = rt.Fas
+0001c830: 7441 7272 6179 285b 312c 2033 2c20 352c  tArray([1, 3, 5,
+0001c840: 2037 5d29 0d0a 2020 2020 2020 2020 3e3e   7])..        >>
+0001c850: 3e20 612e 6d65 616e 2829 0d0a 2020 2020  > a.mean()..    
+0001c860: 2020 2020 342e 300d 0a0d 0a20 2020 2020      4.0....     
+0001c870: 2020 2057 6974 6820 6120 6064 7479 7065     With a `dtype
+0001c880: 6020 7370 6563 6966 6965 643a 0d0a 0d0a  ` specified:....
+0001c890: 2020 2020 2020 2020 3e3e 3e20 6120 3d20          >>> a = 
+0001c8a0: 7274 2e46 6173 7441 7272 6179 285b 312c  rt.FastArray([1,
+0001c8b0: 2033 2c20 352c 2037 5d29 0d0a 2020 2020   3, 5, 7])..    
+0001c8c0: 2020 2020 3e3e 3e20 612e 6d65 616e 2864      >>> a.mean(d
+0001c8d0: 7479 7065 203d 2072 742e 696e 7433 3229  type = rt.int32)
+0001c8e0: 0d0a 2020 2020 2020 2020 340d 0a0d 0a20  ..        4.... 
+0001c8f0: 2020 2020 2020 2057 6974 6820 6120 6669         With a fi
+0001c900: 6c74 6572 3a0d 0a0d 0a20 2020 2020 2020  lter:....       
+0001c910: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
+0001c920: 4172 7261 7928 5b31 2c20 332c 2035 2c20  Array([1, 3, 5, 
+0001c930: 375d 290d 0a20 2020 2020 2020 203e 3e3e  7])..        >>>
+0001c940: 2062 203d 2072 742e 4661 7374 4172 7261   b = rt.FastArra
+0001c950: 7928 5b46 616c 7365 2c20 5472 7565 2c20  y([False, True, 
+0001c960: 4661 6c73 652c 2054 7275 655d 290d 0a20  False, True]).. 
+0001c970: 2020 2020 2020 203e 3e3e 2061 2e6d 6561         >>> a.mea
+0001c980: 6e28 6669 6c74 6572 203d 2062 290d 0a20  n(filter = b).. 
+0001c990: 2020 2020 2020 2035 2e30 0d0a 2020 2020         5.0..    
+0001c9a0: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
+0001c9b0: 2020 206b 7761 7267 7320 3d20 7365 6c66     kwargs = self
+0001c9c0: 2e5f 6661 5f6b 6579 776f 7264 5f77 7261  ._fa_keyword_wra
+0001c9d0: 7070 6572 2866 696c 7465 723d 6669 6c74  pper(filter=filt
+0001c9e0: 6572 2c20 6474 7970 653d 6474 7970 652c  er, dtype=dtype,
+0001c9f0: 2061 7869 733d 6178 6973 2c20 6b65 6570   axis=axis, keep
+0001ca00: 6469 6d73 3d6b 6565 7064 696d 732c 2064  dims=keepdims, d
+0001ca10: 646f 663d 4e6f 6e65 2c20 2a2a 6b77 6172  dof=None, **kwar
+0001ca20: 6773 290d 0a0d 0a20 2020 2020 2020 2069  gs)....        i
+0001ca30: 6620 6669 6c74 6572 2069 7320 6e6f 7420  f filter is not 
+0001ca40: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+0001ca50: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+0001ca60: 6661 5f66 696c 7465 725f 7772 6170 7065  fa_filter_wrappe
+0001ca70: 7228 5f66 6d65 616e 2c20 6669 6c74 6572  r(_fmean, filter
+0001ca80: 3d66 696c 7465 722c 2064 7479 7065 3d64  =filter, dtype=d
+0001ca90: 7479 7065 290d 0a0d 0a20 2020 2020 2020  type)....       
+0001caa0: 2072 6574 7572 6e20 7365 6c66 2e5f 7265   return self._re
+0001cab0: 6475 6365 5f63 6865 636b 2852 4544 5543  duce_check(REDUC
+0001cac0: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
+0001cad0: 4345 5f4d 4541 4e2c 206e 702e 6d65 616e  CE_MEAN, np.mean
+0001cae0: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
+0001caf0: 2020 2064 6566 206e 616e 6d65 616e 2873     def nanmean(s
+0001cb00: 656c 662c 2066 696c 7465 723d 4e6f 6e65  elf, filter=None
+0001cb10: 2c20 6474 7970 653d 4e6f 6e65 2c20 6178  , dtype=None, ax
+0001cb20: 6973 3d4e 6f6e 652c 206b 6565 7064 696d  is=None, keepdim
+0001cb30: 733d 4e6f 6e65 2c20 2a2a 6b77 6172 6773  s=None, **kwargs
+0001cb40: 2920 2d3e 206e 702e 6e75 6d62 6572 3a0d  ) -> np.number:.
+0001cb50: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+0001cb60: 2020 2020 2020 436f 6d70 7574 6520 7468        Compute th
+0001cb70: 6520 6172 6974 686d 6574 6963 206d 6561  e arithmetic mea
+0001cb80: 6e20 6f66 2074 6865 2076 616c 7565 7320  n of the values 
+0001cb90: 696e 2074 6865 2066 6972 7374 2061 7267  in the first arg
+0001cba0: 756d 656e 742c 2069 676e 6f72 696e 6720  ument, ignoring 
+0001cbb0: 4e61 4e73 2e0d 0a0d 0a20 2020 2020 2020  NaNs.....       
+0001cbc0: 2049 6620 616c 6c20 7661 6c75 6573 2069   If all values i
+0001cbd0: 6e20 7468 6520 6669 7273 7420 6172 6775  n the first argu
+0001cbe0: 6d65 6e74 2061 7265 204e 614e 732c 2060  ment are NaNs, `
+0001cbf0: 6030 2e30 6060 2069 7320 7265 7475 726e  `0.0`` is return
+0001cc00: 6564 2e0d 0a0d 0a20 2020 2020 2020 2050  ed.....        P
+0001cc10: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
+0001cc20: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
+0001cc30: 2020 2020 2020 2066 696c 7465 7220 3a20         filter : 
+0001cc40: 6172 7261 7920 6f66 2062 6f6f 6c2c 2064  array of bool, d
+0001cc50: 6566 6175 6c74 204e 6f6e 650d 0a20 2020  efault None..   
+0001cc60: 2020 2020 2020 2020 2053 7065 6369 6669           Specifi
+0001cc70: 6573 2077 6869 6368 2065 6c65 6d65 6e74  es which element
+0001cc80: 7320 746f 2069 6e63 6c75 6465 2069 6e20  s to include in 
+0001cc90: 7468 6520 6d65 616e 2063 616c 6375 6c61  the mean calcula
+0001cca0: 7469 6f6e 2e20 4966 2074 6865 2066 696c  tion. If the fil
+0001ccb0: 7465 720d 0a20 2020 2020 2020 2020 2020  ter..           
+0001ccc0: 2069 7320 756e 6966 6f72 6d6c 7920 6060   is uniformly ``
+0001ccd0: 4661 6c73 6560 602c 2060 6e61 6e6d 6561  False``, `nanmea
+0001cce0: 6e60 2072 6574 7572 6e73 2061 2060 5a65  n` returns a `Ze
+0001ccf0: 726f 4469 7669 7369 6f6e 4572 726f 7260  roDivisionError`
+0001cd00: 2e0d 0a20 2020 2020 2020 2064 7479 7065  ...        dtype
+0001cd10: 203a 2072 742e 6474 7970 6520 6f72 206e   : rt.dtype or n
+0001cd20: 756d 7079 2e64 7479 7065 2c20 6465 6661  umpy.dtype, defa
+0001cd30: 756c 7420 666c 6f61 7436 340d 0a20 2020  ult float64..   
+0001cd40: 2020 2020 2020 2020 2054 6865 2064 6174           The dat
+0001cd50: 6120 7479 7065 206f 6620 7468 6520 7265  a type of the re
+0001cd60: 7375 6c74 2e20 466f 7220 6120 6046 6173  sult. For a `Fas
+0001cd70: 7441 7272 6179 6020 6060 7860 602c 0d0a  tArray` ``x``,..
+0001cd80: 2020 2020 2020 2020 2020 2020 6060 782e              ``x.
+0001cd90: 6e61 6e6d 6561 6e28 6474 7970 6520 3d20  nanmean(dtype = 
+0001cda0: 6d79 5f74 7970 6529 6060 2069 7320 6571  my_type)`` is eq
+0001cdb0: 7569 7661 6c65 6e74 2074 6f20 6060 6d79  uivalent to ``my
+0001cdc0: 5f74 7970 6528 782e 6e61 6e6d 6561 6e28  _type(x.nanmean(
+0001cdd0: 2929 6060 2e0d 0a0d 0a20 2020 2020 2020  ))``.....       
+0001cde0: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
+0001cdf0: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
+0001ce00: 2020 2073 6361 6c61 720d 0a20 2020 2020     scalar..     
+0001ce10: 2020 2020 2020 2054 6865 206d 6561 6e20         The mean 
+0001ce20: 6f66 2074 6865 2076 616c 7565 732e 0d0a  of the values...
+0001ce30: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
+0001ce40: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
+0001ce50: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6e75  ----..        nu
+0001ce60: 6d70 792e 6e61 6e6d 6561 6e0d 0a20 2020  mpy.nanmean..   
+0001ce70: 2020 2020 2046 6173 7441 7272 6179 2e6d       FastArray.m
+0001ce80: 6561 6e20 3a20 436f 6d70 7574 6573 2074  ean : Computes t
+0001ce90: 6865 206d 6561 6e20 6f66 2060 4661 7374  he mean of `Fast
+0001cea0: 4172 7261 7960 2076 616c 7565 732e 0d0a  Array` values...
+0001ceb0: 2020 2020 2020 2020 4461 7461 7365 742e          Dataset.
+0001cec0: 6e61 6e6d 6561 6e20 3a20 436f 6d70 7574  nanmean : Comput
+0001ced0: 6573 2074 6865 206d 6561 6e20 6f66 206e  es the mean of n
+0001cee0: 756d 6572 6963 616c 2060 4461 7461 7365  umerical `Datase
+0001cef0: 7460 2063 6f6c 756d 6e73 2c20 6967 6e6f  t` columns, igno
+0001cf00: 7269 6e67 0d0a 2020 2020 2020 2020 2020  ring..          
+0001cf10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cf20: 4e61 4e73 2e0d 0a20 2020 2020 2020 2047  NaNs...        G
+0001cf30: 726f 7570 4279 4f70 732e 6e61 6e6d 6561  roupByOps.nanmea
+0001cf40: 6e20 3a20 436f 6d70 7574 6573 2074 6865  n : Computes the
+0001cf50: 206d 6561 6e20 6f66 2065 6163 6820 6772   mean of each gr
+0001cf60: 6f75 702c 2069 676e 6f72 696e 6720 4e61  oup, ignoring Na
+0001cf70: 4e73 2e20 5573 6564 2062 790d 0a20 2020  Ns. Used by..   
+0001cf80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cf90: 2020 2020 2020 2020 2020 6043 6174 6567            `Categ
+0001cfa0: 6f72 6963 616c 6020 6f62 6a65 6374 732e  orical` objects.
+0001cfb0: 0d0a 0d0a 2020 2020 2020 2020 4e6f 7465  ....        Note
+0001cfc0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+0001cfd0: 0d0a 2020 2020 2020 2020 5468 6520 6064  ..        The `d
+0001cfe0: 7479 7065 6020 6b65 7977 6f72 6420 666f  type` keyword fo
+0001cff0: 7220 6046 6173 7441 7272 6179 2e6e 616e  r `FastArray.nan
+0001d000: 6d65 616e 6020 7370 6563 6966 6965 7320  mean` specifies 
+0001d010: 7468 6520 6461 7461 2074 7970 6520 6f66  the data type of
+0001d020: 2074 6865 0d0a 2020 2020 2020 2020 7265   the..        re
+0001d030: 7375 6c74 2e20 5468 6973 2064 6966 6665  sult. This diffe
+0001d040: 7273 2066 726f 6d20 606e 756d 7079 2e6e  rs from `numpy.n
+0001d050: 616e 6d65 616e 602c 2077 6865 7265 2069  anmean`, where i
+0001d060: 7420 7370 6563 6966 6965 7320 7468 6520  t specifies the 
+0001d070: 6461 7461 2074 7970 6520 7573 6564 0d0a  data type used..
+0001d080: 2020 2020 2020 2020 746f 2063 6f6d 7075          to compu
+0001d090: 7465 2074 6865 206d 6561 6e2e 0d0a 0d0a  te the mean.....
+0001d0a0: 2020 2020 2020 2020 2a2a 4e6f 7465 7320          **Notes 
+0001d0b0: 6f6e 2055 7369 6e67 204e 756d 5079 2050  on Using NumPy P
+0001d0c0: 6172 616d 6574 6572 732a 2a0d 0a0d 0a20  arameters**.... 
+0001d0d0: 2020 2020 2020 2055 7369 6e67 2065 6974         Using eit
+0001d0e0: 6865 7220 6f66 2074 6865 2066 6f6c 6c6f  her of the follo
+0001d0f0: 7769 6e67 204e 756d 5079 2070 6172 616d  wing NumPy param
+0001d100: 6574 6572 7320 7769 6c6c 2063 6175 7365  eters will cause
+0001d110: 2052 6970 7461 626c 6520 746f 2073 7769   Riptable to swi
+0001d120: 7463 6820 746f 0d0a 2020 2020 2020 2020  tch to..        
+0001d130: 7468 6520 4e75 6d50 7920 696d 706c 656d  the NumPy implem
+0001d140: 656e 7461 7469 6f6e 206f 6620 7468 6973  entation of this
+0001d150: 206d 6574 686f 6420 2860 6e75 6d70 792e   method (`numpy.
+0001d160: 6e61 6e6d 6561 6e60 292e 2048 6f77 6576  nanmean`). Howev
+0001d170: 6572 2c20 756e 7469 6c20 610d 0a20 2020  er, until a..   
+0001d180: 2020 2020 2072 6570 6f72 7465 6420 6275       reported bu
+0001d190: 6720 6973 2066 6978 6564 2c20 6966 2079  g is fixed, if y
+0001d1a0: 6f75 2061 6c73 6f20 696e 636c 7564 6520  ou also include 
+0001d1b0: 7468 6520 6064 7479 7065 6020 7061 7261  the `dtype` para
+0001d1c0: 6d65 7465 7220 6974 2077 696c 6c20 6265  meter it will be
+0001d1d0: 0d0a 2020 2020 2020 2020 6170 706c 6965  ..        applie
+0001d1e0: 6420 746f 2074 6865 2072 6573 756c 742c  d to the result,
+0001d1f0: 206e 6f74 2075 7365 6420 746f 2063 6f6d   not used to com
+0001d200: 7075 7465 2074 6865 206d 6561 6e20 6173  pute the mean as
+0001d210: 2069 7420 6973 2069 6e20 606e 756d 7079   it is in `numpy
+0001d220: 2e6e 616e 6d65 616e 602e 0d0a 0d0a 2020  .nanmean`.....  
+0001d230: 2020 2020 2020 416c 736f 206e 6f74 6520        Also note 
+0001d240: 7468 6174 2069 6620 796f 7520 7573 6520  that if you use 
+0001d250: 6569 7468 6572 206f 6620 7468 6520 666f  either of the fo
+0001d260: 6c6c 6f77 696e 6720 4e75 6d50 7920 7061  llowing NumPy pa
+0001d270: 7261 6d65 7465 7273 2061 6e64 2061 6c73  rameters and als
+0001d280: 6f0d 0a20 2020 2020 2020 2069 6e63 6c75  o..        inclu
+0001d290: 6465 2061 2060 6669 6c74 6572 6020 6b65  de a `filter` ke
+0001d2a0: 7977 6f72 6420 6172 6775 6d65 6e74 2028  yword argument (
+0001d2b0: 7768 6963 6820 606e 756d 7079 2e6e 616e  which `numpy.nan
+0001d2c0: 6d65 616e 6020 646f 6573 206e 6f74 2061  mean` does not a
+0001d2d0: 6363 6570 7429 2c0d 0a20 2020 2020 2020  ccept),..       
+0001d2e0: 2052 6970 7461 626c 6527 7320 696d 706c   Riptable's impl
+0001d2f0: 656d 656e 7461 7469 6f6e 206f 6620 606e  ementation of `n
+0001d300: 616e 6d65 616e 6020 7769 6c6c 2062 6520  anmean` will be 
+0001d310: 7573 6564 2077 6974 6820 7468 6520 6669  used with the fi
+0001d320: 6c74 6572 2061 7267 756d 656e 740d 0a20  lter argument.. 
+0001d330: 2020 2020 2020 2061 6e64 2074 6865 204e         and the N
+0001d340: 756d 5079 2070 6172 616d 6574 6572 7320  umPy parameters 
+0001d350: 7769 6c6c 2062 6520 6967 6e6f 7265 642e  will be ignored.
+0001d360: 0d0a 0d0a 2020 2020 2020 2020 6178 6973  ....        axis
+0001d370: 203a 207b 696e 742c 2074 7570 6c65 206f   : {int, tuple o
+0001d380: 6620 696e 742c 204e 6f6e 657d 2c20 6f70  f int, None}, op
+0001d390: 7469 6f6e 616c 0d0a 2020 2020 2020 2020  tional..        
+0001d3a0: 2020 2020 4178 6973 206f 7220 6178 6573      Axis or axes
+0001d3b0: 2061 6c6f 6e67 2077 6869 6368 2074 6865   along which the
+0001d3c0: 206d 6561 6e73 2061 7265 2063 6f6d 7075   means are compu
+0001d3d0: 7465 642e 2054 6865 2064 6566 6175 6c74  ted. The default
+0001d3e0: 2069 7320 746f 2063 6f6d 7075 7465 0d0a   is to compute..
+0001d3f0: 2020 2020 2020 2020 2020 2020 7468 6520              the 
+0001d400: 6d65 616e 206f 6620 7468 6520 666c 6174  mean of the flat
+0001d410: 7465 6e65 6420 6172 7261 792e 0d0a 0d0a  tened array.....
+0001d420: 2020 2020 2020 2020 6b65 6570 6469 6d73          keepdims
+0001d430: 203a 2062 6f6f 6c2c 206f 7074 696f 6e61   : bool, optiona
+0001d440: 6c0d 0a20 2020 2020 2020 2020 2020 2049  l..            I
+0001d450: 6620 7468 6973 2069 7320 7365 7420 746f  f this is set to
+0001d460: 2054 7275 652c 2074 6865 2061 7865 7320   True, the axes 
+0001d470: 7768 6963 6820 6172 6520 7265 6475 6365  which are reduce
+0001d480: 6420 6172 6520 6c65 6674 2069 6e20 7468  d are left in th
+0001d490: 6520 7265 7375 6c74 2061 730d 0a20 2020  e result as..   
+0001d4a0: 2020 2020 2020 2020 2064 696d 656e 7369           dimensi
+0001d4b0: 6f6e 7320 7769 7468 2073 697a 6520 6f6e  ons with size on
+0001d4c0: 652e 2057 6974 6820 7468 6973 206f 7074  e. With this opt
+0001d4d0: 696f 6e2c 2074 6865 2072 6573 756c 7420  ion, the result 
+0001d4e0: 7769 6c6c 2062 726f 6164 6361 7374 0d0a  will broadcast..
+0001d4f0: 2020 2020 2020 2020 2020 2020 636f 7272              corr
+0001d500: 6563 746c 7920 6167 6169 6e73 7420 7468  ectly against th
+0001d510: 6520 6f72 6967 696e 616c 2069 6e70 7574  e original input
+0001d520: 2061 7272 6179 2e0d 0a0d 0a20 2020 2020   array.....     
+0001d530: 2020 2020 2020 2049 6620 7468 6520 7661         If the va
+0001d540: 6c75 6520 6973 2061 6e79 7468 696e 6720  lue is anything 
+0001d550: 6275 7420 7468 6520 6465 6661 756c 742c  but the default,
+0001d560: 2074 6865 6e20 606b 6565 7064 696d 7360   then `keepdims`
+0001d570: 2077 696c 6c20 6265 2070 6173 7365 640d   will be passed.
+0001d580: 0a20 2020 2020 2020 2020 2020 2074 6872  .            thr
+0001d590: 6f75 6768 2074 6f20 7468 6520 606d 6561  ough to the `mea
+0001d5a0: 6e60 206f 7220 6073 756d 6020 6d65 7468  n` or `sum` meth
+0001d5b0: 6f64 7320 6f66 2073 7562 2d63 6c61 7373  ods of sub-class
+0001d5c0: 6573 206f 6620 606e 6461 7272 6179 602e  es of `ndarray`.
+0001d5d0: 2049 6620 7468 650d 0a20 2020 2020 2020   If the..       
+0001d5e0: 2020 2020 2073 7562 2d63 6c61 7373 6573       sub-classes
+0001d5f0: 2720 6d65 7468 6f64 7320 646f 206e 6f74  ' methods do not
+0001d600: 2069 6d70 6c65 6d65 6e74 2060 6b65 6570   implement `keep
+0001d610: 6469 6d73 602c 2061 6e79 2065 7863 6570  dims`, any excep
+0001d620: 7469 6f6e 7320 7769 6c6c 2062 650d 0a20  tions will be.. 
+0001d630: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0001d640: 642e 0d0a 0d0a 2020 2020 2020 2020 4578  d.....        Ex
+0001d650: 616d 706c 6573 0d0a 2020 2020 2020 2020  amples..        
+0001d660: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+0001d670: 2020 3e3e 3e20 6120 3d20 7274 2e46 6173    >>> a = rt.Fas
+0001d680: 7441 7272 6179 285b 312c 2033 2c20 352c  tArray([1, 3, 5,
+0001d690: 2072 742e 6e61 6e5d 290d 0a20 2020 2020   rt.nan])..     
+0001d6a0: 2020 203e 3e3e 2061 2e6e 616e 6d65 616e     >>> a.nanmean
+0001d6b0: 2829 0d0a 2020 2020 2020 2020 332e 300d  ()..        3.0.
+0001d6c0: 0a0d 0a20 2020 2020 2020 2057 6974 6820  ...        With 
+0001d6d0: 6120 6064 7479 7065 6020 7370 6563 6966  a `dtype` specif
+0001d6e0: 6965 643a 0d0a 0d0a 2020 2020 2020 2020  ied:....        
+0001d6f0: 3e3e 3e20 6120 3d20 7274 2e46 6173 7441  >>> a = rt.FastA
+0001d700: 7272 6179 285b 312c 2033 2c20 352c 2072  rray([1, 3, 5, r
+0001d710: 742e 6e61 6e5d 290d 0a20 2020 2020 2020  t.nan])..       
+0001d720: 203e 3e3e 2061 2e6e 616e 6d65 616e 2864   >>> a.nanmean(d
+0001d730: 7479 7065 203d 2072 742e 696e 7433 3229  type = rt.int32)
+0001d740: 0d0a 2020 2020 2020 2020 330d 0a0d 0a20  ..        3.... 
+0001d750: 2020 2020 2020 2057 6974 6820 6120 6669         With a fi
+0001d760: 6c74 6572 3a0d 0a0d 0a20 2020 2020 2020  lter:....       
+0001d770: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
+0001d780: 4172 7261 7928 5b31 2c20 332c 2035 2c20  Array([1, 3, 5, 
+0001d790: 7274 2e6e 616e 5d29 0d0a 2020 2020 2020  rt.nan])..      
+0001d7a0: 2020 3e3e 3e20 6220 3d20 7274 2e46 6173    >>> b = rt.Fas
+0001d7b0: 7441 7272 6179 285b 4661 6c73 652c 2054  tArray([False, T
+0001d7c0: 7275 652c 2054 7275 652c 2054 7275 655d  rue, True, True]
+0001d7d0: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
+0001d7e0: 2e6e 616e 6d65 616e 2866 696c 7465 7220  .nanmean(filter 
+0001d7f0: 3d20 6229 0d0a 2020 2020 2020 2020 342e  = b)..        4.
+0001d800: 300d 0a20 2020 2020 2020 2022 2222 0d0a  0..        """..
+0001d810: 0d0a 2020 2020 2020 2020 6b77 6172 6773  ..        kwargs
+0001d820: 203d 2073 656c 662e 5f66 615f 6b65 7977   = self._fa_keyw
+0001d830: 6f72 645f 7772 6170 7065 7228 6669 6c74  ord_wrapper(filt
+0001d840: 6572 3d66 696c 7465 722c 2064 7479 7065  er=filter, dtype
+0001d850: 3d64 7479 7065 2c20 6178 6973 3d61 7869  =dtype, axis=axi
+0001d860: 732c 206b 6565 7064 696d 733d 6b65 6570  s, keepdims=keep
+0001d870: 6469 6d73 2c20 6464 6f66 3d4e 6f6e 652c  dims, ddof=None,
+0001d880: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
+0001d890: 2020 2020 2020 6966 2066 696c 7465 7220        if filter 
+0001d8a0: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+0001d8b0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001d8c0: 2073 656c 662e 5f66 615f 6669 6c74 6572   self._fa_filter
+0001d8d0: 5f77 7261 7070 6572 285f 666e 616e 6d65  _wrapper(_fnanme
+0001d8e0: 616e 2c20 6669 6c74 6572 3d66 696c 7465  an, filter=filte
+0001d8f0: 722c 2064 7479 7065 3d64 7479 7065 290d  r, dtype=dtype).
+0001d900: 0a0d 0a20 2020 2020 2020 2072 6574 7572  ...        retur
+0001d910: 6e20 7365 6c66 2e5f 7265 6475 6365 5f63  n self._reduce_c
+0001d920: 6865 636b 2852 4544 5543 455f 4655 4e43  heck(REDUCE_FUNC
+0001d930: 5449 4f4e 532e 5245 4455 4345 5f4e 414e  TIONS.REDUCE_NAN
+0001d940: 4d45 414e 2c20 6e70 2e6e 616e 6d65 616e  MEAN, np.nanmean
+0001d950: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
+0001d960: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+0001d970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001d980: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001d990: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001d9a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001d9b0: 0d0a 2020 2020 2320 7468 6573 6520 6675  ..    # these fu
+0001d9c0: 6e63 7469 6f6e 2074 616b 6520 6120 6464  nction take a dd
+0001d9d0: 6f66 206b 7761 7267 0d0a 2020 2020 6465  of kwarg..    de
+0001d9e0: 6620 7661 7228 7365 6c66 2c20 6669 6c74  f var(self, filt
+0001d9f0: 6572 3d4e 6f6e 652c 2064 7479 7065 3d4e  er=None, dtype=N
+0001da00: 6f6e 652c 2061 7869 733d 4e6f 6e65 2c20  one, axis=None, 
+0001da10: 6b65 6570 6469 6d73 3d4e 6f6e 652c 2064  keepdims=None, d
+0001da20: 646f 663d 4e6f 6e65 2c20 2a2a 6b77 6172  dof=None, **kwar
+0001da30: 6773 293a 0d0a 2020 2020 2020 2020 2222  gs):..        ""
+0001da40: 220d 0a20 2020 2020 2020 2043 6f6d 7075  "..        Compu
+0001da50: 7465 2074 6865 2076 6172 6961 6e63 6520  te the variance 
+0001da60: 6f66 2074 6865 2076 616c 7565 7320 696e  of the values in
+0001da70: 2074 6865 2066 6972 7374 2061 7267 756d   the first argum
+0001da80: 656e 742e 0d0a 0d0a 2020 2020 2020 2020  ent.....        
+0001da90: 5269 7074 6162 6c65 2075 7365 7320 7468  Riptable uses th
+0001daa0: 6520 636f 6e76 656e 7469 6f6e 2074 6861  e convention tha
+0001dab0: 7420 6060 6464 6f66 203d 2031 6060 2c20  t ``ddof = 1``, 
+0001dac0: 6d65 616e 696e 6720 7468 6520 7661 7269  meaning the vari
+0001dad0: 616e 6365 206f 660d 0a20 2020 2020 2020  ance of..       
+0001dae0: 2060 605b 785f 312c 202e 2e2e 2c20 785f   ``[x_1, ..., x_
+0001daf0: 6e5d 6060 2069 7320 6465 6669 6e65 6420  n]`` is defined 
+0001db00: 6279 2060 6076 6172 203d 2031 2f28 6e20  by ``var = 1/(n 
+0001db10: 2d20 3129 202a 2073 756d 2878 5f69 202d  - 1) * sum(x_i -
+0001db20: 206d 6561 6e20 292a 2a32 6060 0d0a 2020   mean )**2``..  
+0001db30: 2020 2020 2020 286e 6f74 6520 7468 6520        (note the 
+0001db40: 6060 6e20 2d20 3160 6020 696e 7374 6561  ``n - 1`` instea
+0001db50: 6420 6f66 2060 606e 6060 292e 2054 6869  d of ``n``). Thi
+0001db60: 7320 6469 6666 6572 7320 6672 6f6d 204e  s differs from N
+0001db70: 756d 5079 2c20 7768 6963 6820 7573 6573  umPy, which uses
+0001db80: 0d0a 2020 2020 2020 2020 6060 6464 6f66  ..        ``ddof
+0001db90: 203d 2030 6060 2062 7920 6465 6661 756c   = 0`` by defaul
+0001dba0: 742e 0d0a 0d0a 2020 2020 2020 2020 5061  t.....        Pa
+0001dbb0: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+0001dbc0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+0001dbd0: 2020 2020 2020 6669 6c74 6572 203a 2061        filter : a
+0001dbe0: 7272 6179 206f 6620 626f 6f6c 2c20 6465  rray of bool, de
+0001dbf0: 6661 756c 7420 4e6f 6e65 0d0a 2020 2020  fault None..    
+0001dc00: 2020 2020 2020 2020 5370 6563 6966 6965          Specifie
+0001dc10: 7320 7768 6963 6820 656c 656d 656e 7473  s which elements
+0001dc20: 2074 6f20 696e 636c 7564 6520 696e 2074   to include in t
+0001dc30: 6865 2076 6172 6961 6e63 6520 6361 6c63  he variance calc
+0001dc40: 756c 6174 696f 6e2e 2049 6620 7468 650d  ulation. If the.
+0001dc50: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
+0001dc60: 7465 7220 6973 2075 6e69 666f 726d 6c79  ter is uniformly
+0001dc70: 2060 6046 616c 7365 6060 2c20 6076 6172   ``False``, `var
+0001dc80: 6020 7265 7475 726e 7320 6120 605a 6572  ` returns a `Zer
+0001dc90: 6f44 6976 6973 696f 6e45 7272 6f72 602e  oDivisionError`.
+0001dca0: 0d0a 0d0a 2020 2020 2020 2020 6474 7970  ....        dtyp
+0001dcb0: 6520 3a20 7274 2e64 7479 7065 206f 7220  e : rt.dtype or 
+0001dcc0: 6e75 6d70 792e 6474 7970 652c 2064 6566  numpy.dtype, def
+0001dcd0: 6175 6c74 2066 6c6f 6174 3634 0d0a 2020  ault float64..  
+0001dce0: 2020 2020 2020 2020 2020 5468 6520 6461            The da
+0001dcf0: 7461 2074 7970 6520 6f66 2074 6865 2072  ta type of the r
+0001dd00: 6573 756c 742e 2046 6f72 2061 2060 4661  esult. For a `Fa
+0001dd10: 7374 4172 7261 7960 2060 6078 6060 2c0d  stArray` ``x``,.
+0001dd20: 0a20 2020 2020 2020 2020 2020 2060 6078  .            ``x
+0001dd30: 2e76 6172 2864 7479 7065 203d 206d 795f  .var(dtype = my_
+0001dd40: 7479 7065 2960 6020 6973 2065 7175 6976  type)`` is equiv
+0001dd50: 616c 656e 7420 746f 2060 606d 795f 7479  alent to ``my_ty
+0001dd60: 7065 2878 2e76 6172 2829 2960 602e 0d0a  pe(x.var())``...
+0001dd70: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+0001dd80: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+0001dd90: 2d2d 0d0a 2020 2020 2020 2020 7363 616c  --..        scal
+0001dda0: 6172 0d0a 2020 2020 2020 2020 2020 2020  ar..            
+0001ddb0: 5468 6520 7661 7269 616e 6365 206f 6620  The variance of 
+0001ddc0: 7468 6520 7661 6c75 6573 2e0d 0a0d 0a20  the values..... 
+0001ddd0: 2020 2020 2020 2053 6565 2041 6c73 6f0d         See Also.
+0001dde0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0001ddf0: 2d0d 0a20 2020 2020 2020 206e 756d 7079  -..        numpy
+0001de00: 2e76 6172 0d0a 2020 2020 2020 2020 4661  .var..        Fa
+0001de10: 7374 4172 7261 792e 6e61 6e76 6172 203a  stArray.nanvar :
+0001de20: 2043 6f6d 7075 7465 7320 7468 6520 7661   Computes the va
+0001de30: 7269 616e 6365 206f 6620 6046 6173 7441  riance of `FastA
+0001de40: 7272 6179 6020 7661 6c75 6573 2c20 6967  rray` values, ig
+0001de50: 6e6f 7269 6e67 204e 614e 732e 0d0a 2020  noring NaNs...  
+0001de60: 2020 2020 2020 4461 7461 7365 742e 7661        Dataset.va
+0001de70: 7220 3a20 436f 6d70 7574 6573 2074 6865  r : Computes the
+0001de80: 2076 6172 6961 6e63 6520 6f66 206e 756d   variance of num
+0001de90: 6572 6963 616c 2060 4461 7461 7365 7460  erical `Dataset`
+0001dea0: 2063 6f6c 756d 6e73 2e0d 0a20 2020 2020   columns...     
+0001deb0: 2020 2047 726f 7570 4279 4f70 732e 7661     GroupByOps.va
+0001dec0: 7220 3a20 436f 6d70 7574 6573 2074 6865  r : Computes the
+0001ded0: 2076 6172 6961 6e63 6520 6f66 2065 6163   variance of eac
+0001dee0: 6820 6772 6f75 702e 2055 7365 6420 6279  h group. Used by
+0001def0: 2060 4361 7465 676f 7269 6361 6c60 0d0a   `Categorical`..
+0001df00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001df10: 2020 2020 2020 2020 206f 626a 6563 7473           objects
+0001df20: 2e0d 0a0d 0a20 2020 2020 2020 204e 6f74  .....        Not
+0001df30: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+0001df40: 2d0d 0a20 2020 2020 2020 2054 6865 2060  -..        The `
+0001df50: 6474 7970 6560 206b 6579 776f 7264 2066  dtype` keyword f
+0001df60: 6f72 2060 4661 7374 4172 7261 792e 7661  or `FastArray.va
+0001df70: 7260 2073 7065 6369 6669 6573 2074 6865  r` specifies the
+0001df80: 2064 6174 6120 7479 7065 206f 6620 7468   data type of th
+0001df90: 6520 7265 7375 6c74 2e0d 0a20 2020 2020  e result...     
+0001dfa0: 2020 2054 6869 7320 6469 6666 6572 7320     This differs 
+0001dfb0: 6672 6f6d 2060 6e75 6d70 792e 7661 7260  from `numpy.var`
+0001dfc0: 2c20 7768 6572 6520 6974 2073 7065 6369  , where it speci
+0001dfd0: 6669 6573 2074 6865 2064 6174 6120 7479  fies the data ty
+0001dfe0: 7065 2075 7365 6420 746f 2063 6f6d 7075  pe used to compu
+0001dff0: 7465 0d0a 2020 2020 2020 2020 7468 6520  te..        the 
+0001e000: 7661 7269 616e 6365 2e0d 0a0d 0a20 2020  variance.....   
+0001e010: 2020 2020 202a 2a4e 6f74 6573 206f 6e20       **Notes on 
+0001e020: 5573 696e 6720 4e75 6d50 7920 5061 7261  Using NumPy Para
+0001e030: 6d65 7465 7273 2a2a 0d0a 0d0a 2020 2020  meters**....    
+0001e040: 2020 2020 5573 696e 6720 616e 7920 6f66      Using any of
+0001e050: 2074 6865 2066 6f6c 6c6f 7769 6e67 204e   the following N
+0001e060: 756d 5079 2070 6172 616d 6574 6572 7320  umPy parameters 
+0001e070: 7769 6c6c 2063 6175 7365 2052 6970 7461  will cause Ripta
+0001e080: 626c 6520 746f 2073 7769 7463 6820 746f  ble to switch to
+0001e090: 0d0a 2020 2020 2020 2020 7468 6520 4e75  ..        the Nu
+0001e0a0: 6d50 7920 696d 706c 656d 656e 7461 7469  mPy implementati
+0001e0b0: 6f6e 206f 6620 7468 6973 206d 6574 686f  on of this metho
+0001e0c0: 6420 2860 6e75 6d70 792e 7661 7260 292e  d (`numpy.var`).
+0001e0d0: 2048 6f77 6576 6572 2c20 756e 7469 6c20   However, until 
+0001e0e0: 610d 0a20 2020 2020 2020 2072 6570 6f72  a..        repor
+0001e0f0: 7465 6420 6275 6720 6973 2066 6978 6564  ted bug is fixed
+0001e100: 2c20 6966 2079 6f75 2061 6c73 6f20 696e  , if you also in
+0001e110: 636c 7564 6520 7468 6520 6064 7479 7065  clude the `dtype
+0001e120: 6020 7061 7261 6d65 7465 7220 6974 2077  ` parameter it w
+0001e130: 696c 6c20 6265 0d0a 2020 2020 2020 2020  ill be..        
+0001e140: 6170 706c 6965 6420 746f 2074 6865 2072  applied to the r
+0001e150: 6573 756c 742c 206e 6f74 2075 7365 6420  esult, not used 
+0001e160: 746f 2063 6f6d 7075 7465 2074 6865 2076  to compute the v
+0001e170: 6172 6961 6e63 6520 6173 2069 7420 6973  ariance as it is
+0001e180: 2069 6e20 606e 756d 7079 2e76 6172 602e   in `numpy.var`.
+0001e190: 0d0a 0d0a 2020 2020 2020 2020 416c 736f  ....        Also
+0001e1a0: 206e 6f74 6520 7468 6174 2069 6620 796f   note that if yo
+0001e1b0: 7520 7573 6520 616e 7920 6f66 2074 6865  u use any of the
+0001e1c0: 2066 6f6c 6c6f 7769 6e67 204e 756d 5079   following NumPy
+0001e1d0: 2070 6172 616d 6574 6572 7320 616e 6420   parameters and 
+0001e1e0: 616c 736f 0d0a 2020 2020 2020 2020 696e  also..        in
+0001e1f0: 636c 7564 6520 6120 6066 696c 7465 7260  clude a `filter`
+0001e200: 206b 6579 776f 7264 2061 7267 756d 656e   keyword argumen
+0001e210: 7420 2877 6869 6368 2060 6e75 6d70 792e  t (which `numpy.
+0001e220: 7661 7260 2064 6f65 7320 6e6f 7420 6163  var` does not ac
+0001e230: 6365 7074 292c 0d0a 2020 2020 2020 2020  cept),..        
+0001e240: 5269 7074 6162 6c65 2773 2069 6d70 6c65  Riptable's imple
+0001e250: 6d65 6e74 6174 696f 6e20 6f66 2060 7661  mentation of `va
+0001e260: 7260 2077 696c 6c20 6265 2075 7365 6420  r` will be used 
+0001e270: 7769 7468 2074 6865 2066 696c 7465 7220  with the filter 
+0001e280: 6172 6775 6d65 6e74 0d0a 2020 2020 2020  argument..      
+0001e290: 2020 616e 6420 7468 6520 4e75 6d50 7920    and the NumPy 
+0001e2a0: 7061 7261 6d65 7465 7273 2077 696c 6c20  parameters will 
+0001e2b0: 6265 2069 676e 6f72 6564 2e0d 0a0d 0a20  be ignored..... 
+0001e2c0: 2020 2020 2020 2061 7869 7320 3a20 4e6f         axis : No
+0001e2d0: 6e65 206f 7220 696e 7420 6f72 2074 7570  ne or int or tup
+0001e2e0: 6c65 206f 6620 696e 7473 2c20 6f70 7469  le of ints, opti
+0001e2f0: 6f6e 616c 0d0a 2020 2020 2020 2020 2020  onal..          
+0001e300: 2020 4178 6973 206f 7220 6178 6573 2061    Axis or axes a
+0001e310: 6c6f 6e67 2077 6869 6368 2074 6865 2076  long which the v
+0001e320: 6172 6961 6e63 6520 6973 2063 6f6d 7075  ariance is compu
+0001e330: 7465 642e 2054 6865 2064 6566 6175 6c74  ted. The default
+0001e340: 2069 7320 746f 0d0a 2020 2020 2020 2020   is to..        
+0001e350: 2020 2020 636f 6d70 7574 6520 7468 6520      compute the 
+0001e360: 7661 7269 616e 6365 206f 6620 7468 6520  variance of the 
+0001e370: 666c 6174 7465 6e65 6420 6172 7261 792e  flattened array.
+0001e380: 0d0a 0d0a 2020 2020 2020 2020 6b65 6570  ....        keep
+0001e390: 6469 6d73 203a 2062 6f6f 6c2c 206f 7074  dims : bool, opt
+0001e3a0: 696f 6e61 6c0d 0a20 2020 2020 2020 2020  ional..         
+0001e3b0: 2020 2049 6620 7468 6973 2069 7320 7365     If this is se
+0001e3c0: 7420 746f 2054 7275 652c 2074 6865 2061  t to True, the a
+0001e3d0: 7865 7320 7768 6963 6820 6172 6520 7265  xes which are re
+0001e3e0: 6475 6365 6420 6172 6520 6c65 6674 2069  duced are left i
+0001e3f0: 6e20 7468 6520 7265 7375 6c74 2061 730d  n the result as.
+0001e400: 0a20 2020 2020 2020 2020 2020 2064 696d  .            dim
+0001e410: 656e 7369 6f6e 7320 7769 7468 2073 697a  ensions with siz
+0001e420: 6520 6f6e 652e 2057 6974 6820 7468 6973  e one. With this
+0001e430: 206f 7074 696f 6e2c 2074 6865 2072 6573   option, the res
+0001e440: 756c 7420 7769 6c6c 2062 726f 6164 6361  ult will broadca
+0001e450: 7374 0d0a 2020 2020 2020 2020 2020 2020  st..            
+0001e460: 636f 7272 6563 746c 7920 6167 6169 6e73  correctly agains
+0001e470: 7420 7468 6520 696e 7075 7420 6172 7261  t the input arra
+0001e480: 792e 0d0a 0d0a 2020 2020 2020 2020 2020  y.....          
+0001e490: 2020 4966 2074 6865 2064 6566 6175 6c74    If the default
+0001e4a0: 2076 616c 7565 2069 7320 7061 7373 6564   value is passed
+0001e4b0: 2c20 7468 656e 2060 6b65 6570 6469 6d73  , then `keepdims
+0001e4c0: 6020 7769 6c6c 206e 6f74 2062 6520 7061  ` will not be pa
+0001e4d0: 7373 6564 2074 6872 6f75 6768 0d0a 2020  ssed through..  
+0001e4e0: 2020 2020 2020 2020 2020 746f 2074 6865            to the
+0001e4f0: 2060 7661 7260 206d 6574 686f 6420 6f66   `var` method of
+0001e500: 2073 7562 2d63 6c61 7373 6573 206f 6620   sub-classes of 
+0001e510: 606e 6461 7272 6179 602c 2068 6f77 6576  `ndarray`, howev
+0001e520: 6572 2061 6e79 206e 6f6e 2d64 6566 6175  er any non-defau
+0001e530: 6c74 0d0a 2020 2020 2020 2020 2020 2020  lt..            
+0001e540: 7661 6c75 6520 7769 6c6c 2062 652e 2049  value will be. I
+0001e550: 6620 7468 6520 7375 622d 636c 6173 7365  f the sub-classe
+0001e560: 7327 206d 6574 686f 6420 646f 6573 206e  s' method does n
+0001e570: 6f74 2069 6d70 6c65 6d65 6e74 2060 6b65  ot implement `ke
+0001e580: 6570 6469 6d73 602c 2061 6e79 0d0a 2020  epdims`, any..  
+0001e590: 2020 2020 2020 2020 2020 6578 6365 7074            except
+0001e5a0: 696f 6e73 2077 696c 6c20 6265 2072 6169  ions will be rai
+0001e5b0: 7365 642e 0d0a 0d0a 2020 2020 2020 2020  sed.....        
+0001e5c0: 6464 6f66 203a 2069 6e74 2c20 6f70 7469  ddof : int, opti
+0001e5d0: 6f6e 616c 0d0a 2020 2020 2020 2020 2020  onal..          
+0001e5e0: 2020 2244 656c 7461 2044 6567 7265 6573    "Delta Degrees
+0001e5f0: 206f 6620 4672 6565 646f 6d22 3a20 7468   of Freedom": th
+0001e600: 6520 6469 7669 736f 7220 7573 6564 2069  e divisor used i
+0001e610: 6e20 7468 6520 6361 6c63 756c 6174 696f  n the calculatio
+0001e620: 6e20 6973 0d0a 2020 2020 2020 2020 2020  n is..          
+0001e630: 2020 6060 4e20 2d20 6464 6f66 6060 2c20    ``N - ddof``, 
+0001e640: 7768 6572 6520 6060 4e60 6020 7265 7072  where ``N`` repr
+0001e650: 6573 656e 7473 2074 6865 206e 756d 6265  esents the numbe
+0001e660: 7220 6f66 2065 6c65 6d65 6e74 732e 2042  r of elements. B
+0001e670: 7920 6465 6661 756c 740d 0a20 2020 2020  y default..     
+0001e680: 2020 2020 2020 2060 6464 6f66 6020 6973         `ddof` is
+0001e690: 207a 6572 6f20 666f 7220 7468 6520 4e75   zero for the Nu
+0001e6a0: 6d50 7920 696d 706c 656d 656e 7461 7469  mPy implementati
+0001e6b0: 6f6e 2c20 7665 7273 7573 206f 6e65 2066  on, versus one f
+0001e6c0: 6f72 2074 6865 2052 6970 7461 626c 650d  or the Riptable.
+0001e6d0: 0a20 2020 2020 2020 2020 2020 2069 6d70  .            imp
+0001e6e0: 6c65 6d65 6e74 6174 696f 6e2e 0d0a 0d0a  lementation.....
+0001e6f0: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
+0001e700: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+0001e710: 2d2d 0d0a 2020 2020 2020 2020 3e3e 3e20  --..        >>> 
+0001e720: 6120 3d20 7274 2e46 6173 7441 7272 6179  a = rt.FastArray
+0001e730: 285b 312c 2032 2c20 335d 290d 0a20 2020  ([1, 2, 3])..   
+0001e740: 2020 2020 203e 3e3e 2061 2e76 6172 2829       >>> a.var()
+0001e750: 0d0a 2020 2020 2020 2020 312e 300d 0a0d  ..        1.0...
+0001e760: 0a20 2020 2020 2020 2057 6974 6820 6120  .        With a 
+0001e770: 6064 7479 7065 6020 7370 6563 6966 6965  `dtype` specifie
+0001e780: 643a 0d0a 0d0a 2020 2020 2020 2020 3e3e  d:....        >>
+0001e790: 3e20 6120 3d20 7274 2e46 6173 7441 7272  > a = rt.FastArr
+0001e7a0: 6179 285b 312c 2032 2c20 335d 290d 0a20  ay([1, 2, 3]).. 
+0001e7b0: 2020 2020 2020 203e 3e3e 2061 2e76 6172         >>> a.var
+0001e7c0: 2864 7479 7065 203d 2072 742e 696e 7433  (dtype = rt.int3
+0001e7d0: 3229 0d0a 2020 2020 2020 2020 310d 0a0d  2)..        1...
+0001e7e0: 0a20 2020 2020 2020 2057 6974 6820 6120  .        With a 
+0001e7f0: 6669 6c74 6572 3a0d 0a0d 0a20 2020 2020  filter:....     
+0001e800: 2020 203e 3e3e 2061 203d 2072 742e 4661     >>> a = rt.Fa
+0001e810: 7374 4172 7261 7928 5b31 2c20 322c 2033  stArray([1, 2, 3
+0001e820: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
+0001e830: 6220 3d20 7274 2e46 6173 7441 7272 6179  b = rt.FastArray
+0001e840: 285b 4661 6c73 652c 2054 7275 652c 2054  ([False, True, T
+0001e850: 7275 655d 290d 0a20 2020 2020 2020 203e  rue])..        >
+0001e860: 3e3e 2061 2e76 6172 2866 696c 7465 7220  >> a.var(filter 
+0001e870: 3d20 6229 0d0a 2020 2020 2020 2020 302e  = b)..        0.
+0001e880: 350d 0a20 2020 2020 2020 2022 2222 0d0a  5..        """..
+0001e890: 0d0a 2020 2020 2020 2020 6b77 6172 6773  ..        kwargs
+0001e8a0: 203d 2073 656c 662e 5f66 615f 6b65 7977   = self._fa_keyw
+0001e8b0: 6f72 645f 7772 6170 7065 7228 6669 6c74  ord_wrapper(filt
+0001e8c0: 6572 3d66 696c 7465 722c 2064 7479 7065  er=filter, dtype
+0001e8d0: 3d64 7479 7065 2c20 6178 6973 3d61 7869  =dtype, axis=axi
+0001e8e0: 732c 206b 6565 7064 696d 733d 6b65 6570  s, keepdims=keep
+0001e8f0: 6469 6d73 2c20 6464 6f66 3d64 646f 662c  dims, ddof=ddof,
+0001e900: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
+0001e910: 2020 2020 2020 6966 2066 696c 7465 7220        if filter 
+0001e920: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+0001e930: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001e940: 2073 656c 662e 5f66 615f 6669 6c74 6572   self._fa_filter
+0001e950: 5f77 7261 7070 6572 285f 6676 6172 2c20  _wrapper(_fvar, 
+0001e960: 6669 6c74 6572 3d66 696c 7465 722c 2064  filter=filter, d
+0001e970: 7479 7065 3d64 7479 7065 290d 0a0d 0a20  type=dtype).... 
+0001e980: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0001e990: 6c66 2e5f 7265 6475 6365 5f63 6865 636b  lf._reduce_check
+0001e9a0: 2852 4544 5543 455f 4655 4e43 5449 4f4e  (REDUCE_FUNCTION
+0001e9b0: 532e 5245 4455 4345 5f56 4152 2c20 6e70  S.REDUCE_VAR, np
+0001e9c0: 2e76 6172 2c20 2a2a 6b77 6172 6773 290d  .var, **kwargs).
+0001e9d0: 0a0d 0a20 2020 2064 6566 206e 616e 7661  ...    def nanva
+0001e9e0: 7228 7365 6c66 2c20 6669 6c74 6572 3d4e  r(self, filter=N
+0001e9f0: 6f6e 652c 2064 7479 7065 3d4e 6f6e 652c  one, dtype=None,
+0001ea00: 2061 7869 733d 4e6f 6e65 2c20 6b65 6570   axis=None, keep
+0001ea10: 6469 6d73 3d4e 6f6e 652c 2064 646f 663d  dims=None, ddof=
+0001ea20: 4e6f 6e65 2c20 2a2a 6b77 6172 6773 2920  None, **kwargs) 
+0001ea30: 2d3e 206e 702e 6e75 6d62 6572 3a0d 0a20  -> np.number:.. 
+0001ea40: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+0001ea50: 2020 2020 436f 6d70 7574 6520 7468 6520      Compute the 
+0001ea60: 7661 7269 616e 6365 206f 6620 7468 6520  variance of the 
+0001ea70: 7661 6c75 6573 2069 6e20 7468 6520 6669  values in the fi
+0001ea80: 7273 7420 6172 6775 6d65 6e74 2c20 6967  rst argument, ig
+0001ea90: 6e6f 7269 6e67 204e 614e 732e 0d0a 0d0a  noring NaNs.....
+0001eaa0: 2020 2020 2020 2020 4966 2061 6c6c 2076          If all v
+0001eab0: 616c 7565 7320 696e 2074 6865 2066 6972  alues in the fir
+0001eac0: 7374 2061 7267 756d 656e 7420 6172 6520  st argument are 
+0001ead0: 4e61 4e73 2c20 6060 4e61 4e60 6020 6973  NaNs, ``NaN`` is
+0001eae0: 2072 6574 7572 6e65 642e 0d0a 0d0a 2020   returned.....  
+0001eaf0: 2020 2020 2020 5269 7074 6162 6c65 2075        Riptable u
+0001eb00: 7365 7320 7468 6520 636f 6e76 656e 7469  ses the conventi
+0001eb10: 6f6e 2074 6861 7420 6060 6464 6f66 203d  on that ``ddof =
+0001eb20: 2031 6060 2c20 6d65 616e 696e 6720 7468   1``, meaning th
+0001eb30: 6520 7661 7269 616e 6365 206f 660d 0a20  e variance of.. 
+0001eb40: 2020 2020 2020 2060 605b 785f 312c 202e         ``[x_1, .
+0001eb50: 2e2e 2c20 785f 6e5d 6060 2069 7320 6465  .., x_n]`` is de
+0001eb60: 6669 6e65 6420 6279 2060 6076 6172 203d  fined by ``var =
+0001eb70: 2031 2f28 6e20 2d20 3129 202a 2073 756d   1/(n - 1) * sum
+0001eb80: 2878 5f69 202d 206d 6561 6e20 292a 2a32  (x_i - mean )**2
+0001eb90: 6060 2028 6e6f 7465 0d0a 2020 2020 2020  `` (note..      
+0001eba0: 2020 7468 6520 6060 6e20 2d20 3160 6020    the ``n - 1`` 
+0001ebb0: 696e 7374 6561 6420 6f66 2060 606e 6060  instead of ``n``
+0001ebc0: 292e 2054 6869 7320 6469 6666 6572 7320  ). This differs 
+0001ebd0: 6672 6f6d 204e 756d 5079 2c20 7768 6963  from NumPy, whic
+0001ebe0: 6820 7573 6573 2060 6064 646f 6620 3d20  h uses ``ddof = 
+0001ebf0: 3060 6020 6279 0d0a 2020 2020 2020 2020  0`` by..        
+0001ec00: 6465 6661 756c 742e 0d0a 0d0a 2020 2020  default.....    
+0001ec10: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
+0001ec20: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+0001ec30: 2d2d 0d0a 2020 2020 2020 2020 6669 6c74  --..        filt
+0001ec40: 6572 203a 2061 7272 6179 206f 6620 626f  er : array of bo
+0001ec50: 6f6c 2c20 6465 6661 756c 7420 4e6f 6e65  ol, default None
+0001ec60: 0d0a 2020 2020 2020 2020 2020 2020 5370  ..            Sp
+0001ec70: 6563 6966 6965 7320 7768 6963 6820 656c  ecifies which el
+0001ec80: 656d 656e 7473 2074 6f20 696e 636c 7564  ements to includ
+0001ec90: 6520 696e 2074 6865 2076 6172 6961 6e63  e in the varianc
+0001eca0: 6520 6361 6c63 756c 6174 696f 6e2e 2049  e calculation. I
+0001ecb0: 6620 7468 6520 6669 6c74 6572 0d0a 2020  f the filter..  
+0001ecc0: 2020 2020 2020 2020 2020 6973 2075 6e69            is uni
+0001ecd0: 666f 726d 6c79 2060 6046 616c 7365 6060  formly ``False``
+0001ece0: 2c20 606e 616e 7661 7260 2072 6574 7572  , `nanvar` retur
+0001ecf0: 6e73 2061 2060 5a65 726f 4469 7669 7369  ns a `ZeroDivisi
+0001ed00: 6f6e 4572 726f 7260 2e0d 0a0d 0a20 2020  onError`.....   
+0001ed10: 2020 2020 2064 7479 7065 203a 2072 742e       dtype : rt.
+0001ed20: 6474 7970 6520 6f72 206e 756d 7079 2e64  dtype or numpy.d
+0001ed30: 7479 7065 2c20 6465 6661 756c 7420 666c  type, default fl
+0001ed40: 6f61 7436 340d 0a20 2020 2020 2020 2020  oat64..         
+0001ed50: 2020 2054 6865 2064 6174 6120 7479 7065     The data type
+0001ed60: 206f 6620 7468 6520 7265 7375 6c74 2e20   of the result. 
+0001ed70: 466f 7220 6120 6046 6173 7441 7272 6179  For a `FastArray
+0001ed80: 6020 6060 7860 602c 0d0a 2020 2020 2020  ` ``x``,..      
+0001ed90: 2020 2020 2020 6060 782e 6e61 6e76 6172        ``x.nanvar
+0001eda0: 2864 7479 7065 203d 206d 795f 7479 7065  (dtype = my_type
+0001edb0: 2960 6020 6973 2065 7175 6976 616c 656e  )`` is equivalen
+0001edc0: 7420 746f 2060 606d 795f 7479 7065 2878  t to ``my_type(x
+0001edd0: 2e6e 616e 7661 7228 2929 6060 2e0d 0a0d  .nanvar())``....
+0001ede0: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+0001edf0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+0001ee00: 2d0d 0a20 2020 2020 2020 2073 6361 6c61  -..        scala
+0001ee10: 720d 0a20 2020 2020 2020 2020 2020 2054  r..            T
+0001ee20: 6865 2076 6172 6961 6e63 6520 6f66 2074  he variance of t
+0001ee30: 6865 2076 616c 7565 732e 0d0a 0d0a 2020  he values.....  
+0001ee40: 2020 2020 2020 5365 6520 416c 736f 0d0a        See Also..
+0001ee50: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+0001ee60: 0d0a 2020 2020 2020 2020 6e75 6d70 792e  ..        numpy.
+0001ee70: 6e61 6e76 6172 0d0a 2020 2020 2020 2020  nanvar..        
+0001ee80: 4661 7374 4172 7261 792e 7661 7220 3a20  FastArray.var : 
+0001ee90: 436f 6d70 7574 6573 2074 6865 2076 6172  Computes the var
+0001eea0: 6961 6e63 6520 6f66 2060 4661 7374 4172  iance of `FastAr
+0001eeb0: 7261 7960 2076 616c 7565 732e 0d0a 2020  ray` values...  
+0001eec0: 2020 2020 2020 4461 7461 7365 742e 6e61        Dataset.na
+0001eed0: 6e76 6172 203a 2043 6f6d 7075 7465 7320  nvar : Computes 
+0001eee0: 7468 6520 7661 7269 616e 6365 206f 6620  the variance of 
+0001eef0: 6e75 6d65 7269 6361 6c20 6044 6174 6173  numerical `Datas
+0001ef00: 6574 6020 636f 6c75 6d6e 732c 0d0a 2020  et` columns,..  
+0001ef10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ef20: 2020 2020 2020 2069 676e 6f72 696e 6720         ignoring 
+0001ef30: 4e61 4e73 2e0d 0a20 2020 2020 2020 2047  NaNs...        G
+0001ef40: 726f 7570 4279 4f70 732e 6e61 6e76 6172  roupByOps.nanvar
+0001ef50: 203a 2043 6f6d 7075 7465 7320 7468 6520   : Computes the 
+0001ef60: 7661 7269 616e 6365 206f 6620 6561 6368  variance of each
+0001ef70: 2067 726f 7570 2c20 6967 6e6f 7269 6e67   group, ignoring
+0001ef80: 204e 614e 732e 2055 7365 6420 6279 0d0a   NaNs. Used by..
+0001ef90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001efa0: 2020 2020 2020 2020 2020 2020 6043 6174              `Cat
+0001efb0: 6567 6f72 6963 616c 6020 6f62 6a65 6374  egorical` object
+0001efc0: 732e 0d0a 0d0a 2020 2020 2020 2020 4e6f  s.....        No
+0001efd0: 7465 730d 0a20 2020 2020 2020 202d 2d2d  tes..        ---
+0001efe0: 2d2d 0d0a 2020 2020 2020 2020 5468 6520  --..        The 
+0001eff0: 6064 7479 7065 6020 6b65 7977 6f72 6420  `dtype` keyword 
+0001f000: 666f 7220 6046 6173 7441 7272 6179 2e6e  for `FastArray.n
+0001f010: 616e 7661 7260 2073 7065 6369 6669 6573  anvar` specifies
+0001f020: 2074 6865 2064 6174 6120 7479 7065 206f   the data type o
+0001f030: 6620 7468 650d 0a20 2020 2020 2020 2072  f the..        r
+0001f040: 6573 756c 742e 2054 6869 7320 6469 6666  esult. This diff
+0001f050: 6572 7320 6672 6f6d 2060 6e75 6d70 792e  ers from `numpy.
+0001f060: 6e61 6e76 6172 602c 2077 6865 7265 2069  nanvar`, where i
+0001f070: 7420 7370 6563 6966 6965 7320 7468 6520  t specifies the 
+0001f080: 6461 7461 2074 7970 6520 7573 6564 0d0a  data type used..
+0001f090: 2020 2020 2020 2020 746f 2063 6f6d 7075          to compu
+0001f0a0: 7465 2074 6865 2076 6172 6961 6e63 652e  te the variance.
+0001f0b0: 0d0a 0d0a 2020 2020 2020 2020 2a2a 4e6f  ....        **No
+0001f0c0: 7465 7320 6f6e 2055 7369 6e67 204e 756d  tes on Using Num
+0001f0d0: 5079 2050 6172 616d 6574 6572 732a 2a0d  Py Parameters**.
+0001f0e0: 0a0d 0a20 2020 2020 2020 2055 7369 6e67  ...        Using
+0001f0f0: 2061 6e79 206f 6620 7468 6520 666f 6c6c   any of the foll
+0001f100: 6f77 696e 6720 4e75 6d50 7920 7061 7261  owing NumPy para
+0001f110: 6d65 7465 7273 2077 696c 6c20 6361 7573  meters will caus
+0001f120: 6520 5269 7074 6162 6c65 2074 6f20 7377  e Riptable to sw
+0001f130: 6974 6368 2074 6f0d 0a20 2020 2020 2020  itch to..       
+0001f140: 2074 6865 204e 756d 5079 2069 6d70 6c65   the NumPy imple
+0001f150: 6d65 6e74 6174 696f 6e20 6f66 2074 6869  mentation of thi
+0001f160: 7320 6d65 7468 6f64 2028 606e 756d 7079  s method (`numpy
+0001f170: 2e6e 616e 7661 7260 292e 2048 6f77 6576  .nanvar`). Howev
+0001f180: 6572 2c20 756e 7469 6c20 610d 0a20 2020  er, until a..   
+0001f190: 2020 2020 2072 6570 6f72 7465 6420 6275       reported bu
+0001f1a0: 6720 6973 2066 6978 6564 2c20 6966 2079  g is fixed, if y
+0001f1b0: 6f75 2061 6c73 6f20 696e 636c 7564 6520  ou also include 
+0001f1c0: 7468 6520 6064 7479 7065 6020 7061 7261  the `dtype` para
+0001f1d0: 6d65 7465 7220 6974 2077 696c 6c20 6265  meter it will be
+0001f1e0: 0d0a 2020 2020 2020 2020 6170 706c 6965  ..        applie
+0001f1f0: 6420 746f 2074 6865 2072 6573 756c 742c  d to the result,
+0001f200: 206e 6f74 2075 7365 6420 746f 2063 6f6d   not used to com
+0001f210: 7075 7465 2074 6865 2076 6172 6961 6e63  pute the varianc
+0001f220: 6520 6173 2069 7420 6973 2069 6e0d 0a20  e as it is in.. 
+0001f230: 2020 2020 2020 2060 6e75 6d70 792e 6e61         `numpy.na
+0001f240: 6e76 6172 602e 0d0a 0d0a 2020 2020 2020  nvar`.....      
+0001f250: 2020 416c 736f 206e 6f74 6520 7468 6174    Also note that
+0001f260: 2069 6620 796f 7520 7573 6520 616e 7920   if you use any 
+0001f270: 6f66 2074 6865 2066 6f6c 6c6f 7769 6e67  of the following
+0001f280: 204e 756d 5079 2070 6172 616d 6574 6572   NumPy parameter
+0001f290: 7320 616e 6420 616c 736f 0d0a 2020 2020  s and also..    
+0001f2a0: 2020 2020 696e 636c 7564 6520 6120 6066      include a `f
+0001f2b0: 696c 7465 7260 206b 6579 776f 7264 2061  ilter` keyword a
+0001f2c0: 7267 756d 656e 7420 2877 6869 6368 2060  rgument (which `
+0001f2d0: 6e75 6d70 792e 6e61 6e76 6172 6020 646f  numpy.nanvar` do
+0001f2e0: 6573 206e 6f74 2061 6363 6570 7429 2c0d  es not accept),.
+0001f2f0: 0a20 2020 2020 2020 2052 6970 7461 626c  .        Riptabl
+0001f300: 6527 7320 696d 706c 656d 656e 7461 7469  e's implementati
+0001f310: 6f6e 206f 6620 606e 616e 7661 7260 2077  on of `nanvar` w
+0001f320: 696c 6c20 6265 2075 7365 6420 7769 7468  ill be used with
+0001f330: 2074 6865 2066 696c 7465 7220 6172 6775   the filter argu
+0001f340: 6d65 6e74 0d0a 2020 2020 2020 2020 616e  ment..        an
+0001f350: 6420 7468 6520 4e75 6d50 7920 7061 7261  d the NumPy para
+0001f360: 6d65 7465 7273 2077 696c 6c20 6265 2069  meters will be i
+0001f370: 676e 6f72 6564 2e0d 0a0d 0a20 2020 2020  gnored.....     
+0001f380: 2020 2061 7869 7320 3a20 7b69 6e74 2c20     axis : {int, 
+0001f390: 7475 706c 6520 6f66 2069 6e74 2c20 4e6f  tuple of int, No
+0001f3a0: 6e65 7d2c 206f 7074 696f 6e61 6c0d 0a20  ne}, optional.. 
+0001f3b0: 2020 2020 2020 2020 2020 2041 7869 7320             Axis 
+0001f3c0: 6f72 2061 7865 7320 616c 6f6e 6720 7768  or axes along wh
+0001f3d0: 6963 6820 7468 6520 7661 7269 616e 6365  ich the variance
+0001f3e0: 2069 7320 636f 6d70 7574 6564 2e20 5468   is computed. Th
+0001f3f0: 6520 6465 6661 756c 7420 6973 2074 6f0d  e default is to.
+0001f400: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
+0001f410: 7075 7465 2074 6865 2076 6172 6961 6e63  pute the varianc
+0001f420: 6520 6f66 2074 6865 2066 6c61 7474 656e  e of the flatten
+0001f430: 6564 2061 7272 6179 2e0d 0a0d 0a20 2020  ed array.....   
+0001f440: 2020 2020 206b 6565 7064 696d 7320 3a20       keepdims : 
+0001f450: 626f 6f6c 2c20 6f70 7469 6f6e 616c 0d0a  bool, optional..
+0001f460: 2020 2020 2020 2020 2020 2020 4966 2074              If t
+0001f470: 6869 7320 6973 2073 6574 2074 6f20 5472  his is set to Tr
+0001f480: 7565 2c20 7468 6520 6178 6573 2077 6869  ue, the axes whi
+0001f490: 6368 2061 7265 2072 6564 7563 6564 2061  ch are reduced a
+0001f4a0: 7265 206c 6566 7420 696e 2074 6865 2072  re left in the r
+0001f4b0: 6573 756c 7420 6173 0d0a 2020 2020 2020  esult as..      
+0001f4c0: 2020 2020 2020 6469 6d65 6e73 696f 6e73        dimensions
+0001f4d0: 2077 6974 6820 7369 7a65 206f 6e65 2e20   with size one. 
+0001f4e0: 5769 7468 2074 6869 7320 6f70 7469 6f6e  With this option
+0001f4f0: 2c20 7468 6520 7265 7375 6c74 2077 696c  , the result wil
+0001f500: 6c20 6272 6f61 6463 6173 740d 0a20 2020  l broadcast..   
+0001f510: 2020 2020 2020 2020 2063 6f72 7265 6374           correct
+0001f520: 6c79 2061 6761 696e 7374 2074 6865 206f  ly against the o
+0001f530: 7269 6769 6e61 6c20 696e 7075 7420 6172  riginal input ar
+0001f540: 7261 792e 0d0a 0d0a 2020 2020 2020 2020  ray.....        
+0001f550: 6464 6f66 203a 2069 6e74 2c20 6f70 7469  ddof : int, opti
+0001f560: 6f6e 616c 0d0a 2020 2020 2020 2020 2020  onal..          
+0001f570: 2020 2244 656c 7461 2044 6567 7265 6573    "Delta Degrees
+0001f580: 206f 6620 4672 6565 646f 6d22 3a20 7468   of Freedom": th
+0001f590: 6520 6469 7669 736f 7220 7573 6564 2069  e divisor used i
+0001f5a0: 6e20 7468 6520 6361 6c63 756c 6174 696f  n the calculatio
+0001f5b0: 6e20 6973 0d0a 2020 2020 2020 2020 2020  n is..          
+0001f5c0: 2020 6060 4e20 2d20 6464 6f66 6060 2c20    ``N - ddof``, 
+0001f5d0: 7768 6572 6520 6060 4e60 6020 7265 7072  where ``N`` repr
+0001f5e0: 6573 656e 7473 2074 6865 206e 756d 6265  esents the numbe
+0001f5f0: 7220 6f66 206e 6f6e 2d4e 614e 2065 6c65  r of non-NaN ele
+0001f600: 6d65 6e74 732e 2042 790d 0a20 2020 2020  ments. By..     
+0001f610: 2020 2020 2020 2064 6566 6175 6c74 2060         default `
+0001f620: 6464 6f66 6020 6973 207a 6572 6f20 666f  ddof` is zero fo
+0001f630: 7220 7468 6520 4e75 6d50 7920 696d 706c  r the NumPy impl
+0001f640: 656d 656e 7461 7469 6f6e 2c20 7665 7273  ementation, vers
+0001f650: 7573 206f 6e65 2066 6f72 2074 6865 0d0a  us one for the..
+0001f660: 2020 2020 2020 2020 2020 2020 5269 7074              Ript
+0001f670: 6162 6c65 2069 6d70 6c65 6d65 6e74 6174  able implementat
+0001f680: 696f 6e2e 0d0a 0d0a 2020 2020 2020 2020  ion.....        
+0001f690: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
+0001f6a0: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+0001f6b0: 2020 2020 3e3e 3e20 6120 3d20 7274 2e46      >>> a = rt.F
+0001f6c0: 6173 7441 7272 6179 285b 312c 2032 2c20  astArray([1, 2, 
+0001f6d0: 332c 2072 742e 6e61 6e5d 290d 0a20 2020  3, rt.nan])..   
+0001f6e0: 2020 2020 203e 3e3e 2061 2e6e 616e 7661       >>> a.nanva
+0001f6f0: 7228 290d 0a20 2020 2020 2020 2031 2e30  r()..        1.0
+0001f700: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
+0001f710: 2061 2060 6474 7970 6560 2073 7065 6369   a `dtype` speci
+0001f720: 6669 6564 3a0d 0a0d 0a20 2020 2020 2020  fied:....       
+0001f730: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
+0001f740: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
+0001f750: 7274 2e6e 616e 5d29 0d0a 2020 2020 2020  rt.nan])..      
+0001f760: 2020 3e3e 3e20 612e 6e61 6e76 6172 2864    >>> a.nanvar(d
+0001f770: 7479 7065 203d 2072 742e 696e 7433 3229  type = rt.int32)
+0001f780: 0d0a 2020 2020 2020 2020 310d 0a0d 0a20  ..        1.... 
+0001f790: 2020 2020 2020 2057 6974 6820 6120 6669         With a fi
+0001f7a0: 6c74 6572 3a0d 0a0d 0a20 2020 2020 2020  lter:....       
+0001f7b0: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
+0001f7c0: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
+0001f7d0: 7274 2e6e 616e 5d29 0d0a 2020 2020 2020  rt.nan])..      
+0001f7e0: 2020 3e3e 3e20 6220 3d20 7274 2e46 6173    >>> b = rt.Fas
+0001f7f0: 7441 7272 6179 285b 4661 6c73 652c 2054  tArray([False, T
+0001f800: 7275 652c 2054 7275 652c 2054 7275 655d  rue, True, True]
+0001f810: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
+0001f820: 2e6e 616e 7661 7228 6669 6c74 6572 203d  .nanvar(filter =
+0001f830: 2062 290d 0a20 2020 2020 2020 2030 2e35   b)..        0.5
+0001f840: 0d0a 2020 2020 2020 2020 2222 220d 0a0d  ..        """...
+0001f850: 0a20 2020 2020 2020 206b 7761 7267 7320  .        kwargs 
+0001f860: 3d20 7365 6c66 2e5f 6661 5f6b 6579 776f  = self._fa_keywo
+0001f870: 7264 5f77 7261 7070 6572 2866 696c 7465  rd_wrapper(filte
+0001f880: 723d 6669 6c74 6572 2c20 6474 7970 653d  r=filter, dtype=
+0001f890: 6474 7970 652c 2061 7869 733d 6178 6973  dtype, axis=axis
+0001f8a0: 2c20 6b65 6570 6469 6d73 3d6b 6565 7064  , keepdims=keepd
+0001f8b0: 696d 732c 2064 646f 663d 6464 6f66 2c20  ims, ddof=ddof, 
+0001f8c0: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
+0001f8d0: 2020 2020 2069 6620 6669 6c74 6572 2069       if filter i
+0001f8e0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+0001f8f0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0001f900: 7365 6c66 2e5f 6661 5f66 696c 7465 725f  self._fa_filter_
+0001f910: 7772 6170 7065 7228 5f66 6e61 6e76 6172  wrapper(_fnanvar
+0001f920: 2c20 6669 6c74 6572 3d66 696c 7465 722c  , filter=filter,
+0001f930: 2064 7479 7065 3d64 7479 7065 290d 0a0d   dtype=dtype)...
+0001f940: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0001f950: 7365 6c66 2e5f 7265 6475 6365 5f63 6865  self._reduce_che
+0001f960: 636b 2852 4544 5543 455f 4655 4e43 5449  ck(REDUCE_FUNCTI
+0001f970: 4f4e 532e 5245 4455 4345 5f4e 414e 5641  ONS.REDUCE_NANVA
+0001f980: 522c 206e 702e 6e61 6e76 6172 2c20 2a2a  R, np.nanvar, **
+0001f990: 6b77 6172 6773 290d 0a0d 0a20 2020 2064  kwargs)....    d
+0001f9a0: 6566 2073 7464 2873 656c 662c 2066 696c  ef std(self, fil
+0001f9b0: 7465 723d 4e6f 6e65 2c20 6474 7970 653d  ter=None, dtype=
+0001f9c0: 4e6f 6e65 2c20 6178 6973 3d4e 6f6e 652c  None, axis=None,
+0001f9d0: 206b 6565 7064 696d 733d 4e6f 6e65 2c20   keepdims=None, 
+0001f9e0: 6464 6f66 3d4e 6f6e 652c 202a 2a6b 7761  ddof=None, **kwa
+0001f9f0: 7267 7329 202d 3e20 6e70 2e6e 756d 6265  rgs) -> np.numbe
+0001fa00: 723a 0d0a 2020 2020 2020 2020 2222 220d  r:..        """.
+0001fa10: 0a20 2020 2020 2020 2043 6f6d 7075 7465  .        Compute
+0001fa20: 2074 6865 2073 7461 6e64 6172 6420 6465   the standard de
+0001fa30: 7669 6174 696f 6e20 6f66 2074 6865 2076  viation of the v
+0001fa40: 616c 7565 7320 696e 2074 6865 2066 6972  alues in the fir
+0001fa50: 7374 2061 7267 756d 656e 742e 0d0a 0d0a  st argument.....
+0001fa60: 2020 2020 2020 2020 5269 7074 6162 6c65          Riptable
+0001fa70: 2075 7365 7320 7468 6520 636f 6e76 656e   uses the conven
+0001fa80: 7469 6f6e 2074 6861 7420 6060 6464 6f66  tion that ``ddof
+0001fa90: 203d 2031 6060 2c20 6d65 616e 696e 6720   = 1``, meaning 
+0001faa0: 7468 6520 7374 616e 6461 7264 2064 6576  the standard dev
+0001fab0: 6961 7469 6f6e 206f 660d 0a20 2020 2020  iation of..     
+0001fac0: 2020 2060 605b 785f 312c 202e 2e2e 2c20     ``[x_1, ..., 
+0001fad0: 785f 6e5d 6060 2069 7320 6465 6669 6e65  x_n]`` is define
+0001fae0: 6420 6279 2060 6073 7464 203d 2031 2f28  d by ``std = 1/(
+0001faf0: 6e20 2d20 3129 202a 2073 756d 2878 5f69  n - 1) * sum(x_i
+0001fb00: 202d 206d 6561 6e20 292a 2a32 6060 2028   - mean )**2`` (
+0001fb10: 6e6f 7465 0d0a 2020 2020 2020 2020 7468  note..        th
+0001fb20: 6520 6060 6e20 2d20 3160 6020 696e 7374  e ``n - 1`` inst
+0001fb30: 6561 6420 6f66 2060 606e 6060 292e 2054  ead of ``n``). T
+0001fb40: 6869 7320 6469 6666 6572 7320 6672 6f6d  his differs from
+0001fb50: 204e 756d 5079 2c20 7768 6963 6820 7573   NumPy, which us
+0001fb60: 6573 2060 6064 646f 6620 3d20 3060 6020  es ``ddof = 0`` 
+0001fb70: 6279 0d0a 2020 2020 2020 2020 6465 6661  by..        defa
+0001fb80: 756c 742e 0d0a 0d0a 2020 2020 2020 2020  ult.....        
+0001fb90: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
+0001fba0: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
+0001fbb0: 2020 2020 2020 2020 6669 6c74 6572 203a          filter :
+0001fbc0: 2061 7272 6179 206f 6620 626f 6f6c 2c20   array of bool, 
+0001fbd0: 6465 6661 756c 7420 4e6f 6e65 0d0a 2020  default None..  
+0001fbe0: 2020 2020 2020 2020 2020 5370 6563 6966            Specif
+0001fbf0: 6965 7320 7768 6963 6820 656c 656d 656e  ies which elemen
+0001fc00: 7473 2074 6f20 696e 636c 7564 6520 696e  ts to include in
+0001fc10: 2074 6865 2073 7461 6e64 6172 6420 6465   the standard de
+0001fc20: 7669 6174 696f 6e20 6361 6c63 756c 6174  viation calculat
+0001fc30: 696f 6e2e 2049 660d 0a20 2020 2020 2020  ion. If..       
+0001fc40: 2020 2020 2074 6865 2066 696c 7465 7220       the filter 
+0001fc50: 6973 2075 6e69 666f 726d 6c79 2060 6046  is uniformly ``F
+0001fc60: 616c 7365 6060 2c20 6073 7464 6020 7265  alse``, `std` re
+0001fc70: 7475 726e 7320 6120 605a 6572 6f44 6976  turns a `ZeroDiv
+0001fc80: 6973 696f 6e45 7272 6f72 602e 0d0a 0d0a  isionError`.....
+0001fc90: 2020 2020 2020 2020 6474 7970 6520 3a20          dtype : 
+0001fca0: 7274 2e64 7479 7065 206f 7220 6e75 6d70  rt.dtype or nump
+0001fcb0: 792e 6474 7970 652c 2064 6566 6175 6c74  y.dtype, default
+0001fcc0: 2066 6c6f 6174 3634 0d0a 2020 2020 2020   float64..      
+0001fcd0: 2020 2020 2020 5468 6520 6461 7461 2074        The data t
+0001fce0: 7970 6520 6f66 2074 6865 2072 6573 756c  ype of the resul
+0001fcf0: 742e 2046 6f72 2061 2060 4661 7374 4172  t. For a `FastAr
+0001fd00: 7261 7960 2060 6078 6060 2c0d 0a20 2020  ray` ``x``,..   
+0001fd10: 2020 2020 2020 2020 2060 6078 2e73 7464           ``x.std
+0001fd20: 2864 7479 7065 203d 206d 795f 7479 7065  (dtype = my_type
+0001fd30: 2960 6020 6973 2065 7175 6976 616c 656e  )`` is equivalen
+0001fd40: 7420 746f 2060 606d 795f 7479 7065 2878  t to ``my_type(x
+0001fd50: 2e73 7464 2829 2960 602e 0d0a 0d0a 2020  .std())``.....  
+0001fd60: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
+0001fd70: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
+0001fd80: 2020 2020 2020 2020 7363 616c 6172 0d0a          scalar..
+0001fd90: 2020 2020 2020 2020 2020 2020 5468 6520              The 
+0001fda0: 7374 616e 6461 7264 2064 6576 6961 7469  standard deviati
+0001fdb0: 6f6e 206f 6620 7468 6520 7661 6c75 6573  on of the values
+0001fdc0: 2e0d 0a0d 0a20 2020 2020 2020 2053 6565  .....        See
+0001fdd0: 2041 6c73 6f0d 0a20 2020 2020 2020 202d   Also..        -
+0001fde0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0001fdf0: 206e 756d 7079 2e73 7464 0d0a 2020 2020   numpy.std..    
+0001fe00: 2020 2020 4661 7374 4172 7261 792e 6e61      FastArray.na
+0001fe10: 6e73 7464 203a 2043 6f6d 7075 7465 7320  nstd : Computes 
+0001fe20: 7468 6520 7374 616e 6461 7264 2064 6576  the standard dev
+0001fe30: 6961 7469 6f6e 206f 6620 6046 6173 7441  iation of `FastA
+0001fe40: 7272 6179 6020 7661 6c75 6573 2c20 6967  rray` values, ig
+0001fe50: 6e6f 7269 6e67 0d0a 2020 2020 2020 2020  noring..        
+0001fe60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fe70: 2020 204e 614e 732e 0d0a 2020 2020 2020     NaNs...      
+0001fe80: 2020 4461 7461 7365 742e 7374 6420 3a20    Dataset.std : 
+0001fe90: 436f 6d70 7574 6573 2074 6865 2073 7461  Computes the sta
+0001fea0: 6e64 6172 6420 6465 7669 6174 696f 6e20  ndard deviation 
+0001feb0: 6f66 206e 756d 6572 6963 616c 2060 4461  of numerical `Da
+0001fec0: 7461 7365 7460 2063 6f6c 756d 6e73 2e0d  taset` columns..
+0001fed0: 0a20 2020 2020 2020 2047 726f 7570 4279  .        GroupBy
+0001fee0: 4f70 732e 7374 6420 3a20 436f 6d70 7574  Ops.std : Comput
+0001fef0: 6573 2074 6865 2073 7461 6e64 6172 6420  es the standard 
+0001ff00: 6465 7669 6174 696f 6e20 6f66 2065 6163  deviation of eac
+0001ff10: 6820 6772 6f75 702e 2055 7365 6420 6279  h group. Used by
+0001ff20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001ff30: 2020 2020 2020 2020 2020 2060 4361 7465             `Cate
+0001ff40: 676f 7269 6361 6c60 206f 626a 6563 7473  gorical` objects
+0001ff50: 2e0d 0a0d 0a20 2020 2020 2020 204e 6f74  .....        Not
+0001ff60: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+0001ff70: 2d0d 0a20 2020 2020 2020 2054 6865 2060  -..        The `
+0001ff80: 6474 7970 6560 206b 6579 776f 7264 2066  dtype` keyword f
+0001ff90: 6f72 2060 4661 7374 4172 7261 792e 7374  or `FastArray.st
+0001ffa0: 6460 2073 7065 6369 6669 6573 2074 6865  d` specifies the
+0001ffb0: 2064 6174 6120 7479 7065 206f 6620 7468   data type of th
+0001ffc0: 6520 7265 7375 6c74 2e0d 0a20 2020 2020  e result...     
+0001ffd0: 2020 2054 6869 7320 6469 6666 6572 7320     This differs 
+0001ffe0: 6672 6f6d 2060 6e75 6d70 792e 7374 6460  from `numpy.std`
+0001fff0: 2c20 7768 6572 6520 6974 2073 7065 6369  , where it speci
+00020000: 6669 6573 2074 6865 2064 6174 6120 7479  fies the data ty
+00020010: 7065 2075 7365 6420 746f 2063 6f6d 7075  pe used to compu
+00020020: 7465 0d0a 2020 2020 2020 2020 7468 6520  te..        the 
+00020030: 7374 616e 6461 7264 2064 6576 6961 7469  standard deviati
+00020040: 6f6e 2e0d 0a0d 0a20 2020 2020 2020 202a  on.....        *
+00020050: 2a4e 6f74 6573 206f 6e20 5573 696e 6720  *Notes on Using 
+00020060: 4e75 6d50 7920 5061 7261 6d65 7465 7273  NumPy Parameters
+00020070: 2a2a 0d0a 0d0a 2020 2020 2020 2020 5573  **....        Us
+00020080: 696e 6720 616e 7920 6f66 2074 6865 2066  ing any of the f
+00020090: 6f6c 6c6f 7769 6e67 204e 756d 5079 2070  ollowing NumPy p
+000200a0: 6172 616d 6574 6572 7320 7769 6c6c 2063  arameters will c
+000200b0: 6175 7365 2052 6970 7461 626c 6520 746f  ause Riptable to
+000200c0: 2073 7769 7463 6820 746f 0d0a 2020 2020   switch to..    
+000200d0: 2020 2020 7468 6520 4e75 6d50 7920 696d      the NumPy im
+000200e0: 706c 656d 656e 7461 7469 6f6e 206f 6620  plementation of 
+000200f0: 7468 6973 206d 6574 686f 6420 2860 6e75  this method (`nu
+00020100: 6d70 792e 7374 6460 292e 2048 6f77 6576  mpy.std`). Howev
+00020110: 6572 2c20 756e 7469 6c20 610d 0a20 2020  er, until a..   
+00020120: 2020 2020 2072 6570 6f72 7465 6420 6275       reported bu
+00020130: 6720 6973 2066 6978 6564 2c20 6966 2079  g is fixed, if y
+00020140: 6f75 2061 6c73 6f20 696e 636c 7564 6520  ou also include 
+00020150: 7468 6520 6064 7479 7065 6020 7061 7261  the `dtype` para
+00020160: 6d65 7465 7220 6974 2077 696c 6c20 6265  meter it will be
+00020170: 0d0a 2020 2020 2020 2020 6170 706c 6965  ..        applie
+00020180: 6420 746f 2074 6865 2072 6573 756c 742c  d to the result,
+00020190: 206e 6f74 2075 7365 6420 746f 2063 6f6d   not used to com
+000201a0: 7075 7465 2074 6865 2076 6172 6961 6e63  pute the varianc
+000201b0: 6520 6173 2069 7420 6973 2069 6e0d 0a20  e as it is in.. 
+000201c0: 2020 2020 2020 2060 6e75 6d70 792e 7374         `numpy.st
+000201d0: 6460 2e0d 0a0d 0a20 2020 2020 2020 2041  d`.....        A
+000201e0: 6c73 6f20 6e6f 7465 2074 6861 7420 6966  lso note that if
+000201f0: 2079 6f75 2075 7365 2061 6e79 206f 6620   you use any of 
+00020200: 7468 6520 666f 6c6c 6f77 696e 6720 4e75  the following Nu
+00020210: 6d50 7920 7061 7261 6d65 7465 7273 2061  mPy parameters a
+00020220: 6e64 2061 6c73 6f0d 0a20 2020 2020 2020  nd also..       
+00020230: 2069 6e63 6c75 6465 2061 2060 6669 6c74   include a `filt
+00020240: 6572 6020 6b65 7977 6f72 6420 6172 6775  er` keyword argu
+00020250: 6d65 6e74 2028 7768 6963 6820 606e 756d  ment (which `num
+00020260: 7079 2e73 7464 6020 646f 6573 206e 6f74  py.std` does not
+00020270: 2061 6363 6570 7429 2c0d 0a20 2020 2020   accept),..     
+00020280: 2020 2052 6970 7461 626c 6527 7320 696d     Riptable's im
+00020290: 706c 656d 656e 7461 7469 6f6e 206f 6620  plementation of 
+000202a0: 6073 7464 6020 7769 6c6c 2062 6520 7573  `std` will be us
+000202b0: 6564 2077 6974 6820 7468 6520 6669 6c74  ed with the filt
+000202c0: 6572 2061 7267 756d 656e 740d 0a20 2020  er argument..   
+000202d0: 2020 2020 2061 6e64 2074 6865 204e 756d       and the Num
+000202e0: 5079 2070 6172 616d 6574 6572 7320 7769  Py parameters wi
+000202f0: 6c6c 2062 6520 6967 6e6f 7265 642e 0d0a  ll be ignored...
+00020300: 0d0a 2020 2020 2020 2020 6178 6973 203a  ..        axis :
+00020310: 204e 6f6e 6520 6f72 2069 6e74 206f 7220   None or int or 
+00020320: 7475 706c 6520 6f66 2069 6e74 732c 206f  tuple of ints, o
+00020330: 7074 696f 6e61 6c0d 0a20 2020 2020 2020  ptional..       
+00020340: 2020 2020 2041 7869 7320 6f72 2061 7865       Axis or axe
+00020350: 7320 616c 6f6e 6720 7768 6963 6820 7468  s along which th
 00020360: 6520 7374 616e 6461 7264 2064 6576 6961  e standard devia
-00020370: 7469 6f6e 206f 6620 7468 6520 666c 6174  tion of the flat
-00020380: 7465 6e65 6420 6172 7261 792e 0d0a 0d0a  tened array.....
-00020390: 2020 2020 2020 2020 2020 2020 2e2e 2076              .. v
-000203a0: 6572 7369 6f6e 6164 6465 643a 3a20 312e  ersionadded:: 1.
-000203b0: 372e 300d 0a0d 0a20 2020 2020 2020 2020  7.0....         
-000203c0: 2020 2049 6620 7468 6973 2069 7320 6120     If this is a 
-000203d0: 7475 706c 6520 6f66 2069 6e74 732c 2061  tuple of ints, a
-000203e0: 2073 7461 6e64 6172 6420 6465 7669 6174   standard deviat
-000203f0: 696f 6e20 6973 2070 6572 666f 726d 6564  ion is performed
-00020400: 206f 7665 7220 6d75 6c74 6970 6c65 0d0a   over multiple..
-00020410: 2020 2020 2020 2020 2020 2020 6178 6573              axes
-00020420: 2c20 696e 7374 6561 6420 6f66 2061 2073  , instead of a s
-00020430: 696e 676c 6520 6178 6973 206f 7220 616c  ingle axis or al
-00020440: 6c20 7468 6520 6178 6573 2061 7320 6265  l the axes as be
-00020450: 666f 7265 2e0d 0a0d 0a20 2020 2020 2020  fore.....       
-00020460: 206b 6565 7064 696d 7320 3a20 626f 6f6c   keepdims : bool
-00020470: 2c20 6f70 7469 6f6e 616c 0d0a 2020 2020  , optional..    
-00020480: 2020 2020 2020 2020 4966 2074 6869 7320          If this 
-00020490: 6973 2073 6574 2074 6f20 5472 7565 2c20  is set to True, 
-000204a0: 7468 6520 6178 6573 2077 6869 6368 2061  the axes which a
-000204b0: 7265 2072 6564 7563 6564 2061 7265 206c  re reduced are l
-000204c0: 6566 7420 696e 2074 6865 2072 6573 756c  eft in the resul
-000204d0: 7420 6173 0d0a 2020 2020 2020 2020 2020  t as..          
-000204e0: 2020 6469 6d65 6e73 696f 6e73 2077 6974    dimensions wit
-000204f0: 6820 7369 7a65 206f 6e65 2e20 5769 7468  h size one. With
-00020500: 2074 6869 7320 6f70 7469 6f6e 2c20 7468   this option, th
-00020510: 6520 7265 7375 6c74 2077 696c 6c20 6272  e result will br
-00020520: 6f61 6463 6173 740d 0a20 2020 2020 2020  oadcast..       
-00020530: 2020 2020 2063 6f72 7265 6374 6c79 2061       correctly a
-00020540: 6761 696e 7374 2074 6865 2069 6e70 7574  gainst the input
-00020550: 2061 7272 6179 2e0d 0a0d 0a20 2020 2020   array.....     
-00020560: 2020 2020 2020 2049 6620 7468 6520 6465         If the de
-00020570: 6661 756c 7420 7661 6c75 6520 6973 2070  fault value is p
-00020580: 6173 7365 642c 2074 6865 6e20 606b 6565  assed, then `kee
-00020590: 7064 696d 7360 2077 696c 6c20 6e6f 7420  pdims` will not 
-000205a0: 6265 2070 6173 7365 6420 7468 726f 7567  be passed throug
-000205b0: 680d 0a20 2020 2020 2020 2020 2020 2074  h..            t
-000205c0: 6f20 7468 6520 6073 7464 6020 6d65 7468  o the `std` meth
-000205d0: 6f64 206f 6620 7375 622d 636c 6173 7365  od of sub-classe
-000205e0: 7320 6f66 2060 6e64 6172 7261 7960 2c20  s of `ndarray`, 
-000205f0: 686f 7765 7665 7220 616e 7920 6e6f 6e2d  however any non-
-00020600: 6465 6661 756c 740d 0a20 2020 2020 2020  default..       
-00020610: 2020 2020 2076 616c 7565 2077 696c 6c20       value will 
-00020620: 6265 2e20 4966 2074 6865 2073 7562 2d63  be. If the sub-c
-00020630: 6c61 7373 2720 6d65 7468 6f64 2064 6f65  lass' method doe
-00020640: 7320 6e6f 7420 696d 706c 656d 656e 7420  s not implement 
-00020650: 606b 6565 7064 696d 7360 2c0d 0a20 2020  `keepdims`,..   
-00020660: 2020 2020 2020 2020 2061 6e79 2065 7863           any exc
-00020670: 6570 7469 6f6e 7320 7769 6c6c 2062 6520  eptions will be 
-00020680: 7261 6973 6564 2e0d 0a0d 0a20 2020 2020  raised.....     
-00020690: 2020 2064 646f 6620 3a20 696e 742c 206f     ddof : int, o
-000206a0: 7074 696f 6e61 6c0d 0a20 2020 2020 2020  ptional..       
-000206b0: 2020 2020 2022 4465 6c74 6120 4465 6772       "Delta Degr
-000206c0: 6565 7320 6f66 2046 7265 6564 6f6d 223a  ees of Freedom":
-000206d0: 2074 6865 2064 6976 6973 6f72 2075 7365   the divisor use
-000206e0: 6420 696e 2074 6865 2063 616c 6375 6c61  d in the calcula
-000206f0: 7469 6f6e 2069 730d 0a20 2020 2020 2020  tion is..       
-00020700: 2020 2020 2060 604e 202d 2064 646f 6660       ``N - ddof`
-00020710: 602c 2077 6865 7265 2060 604e 6060 2072  `, where ``N`` r
-00020720: 6570 7265 7365 6e74 7320 7468 6520 6e75  epresents the nu
-00020730: 6d62 6572 206f 6620 656c 656d 656e 7473  mber of elements
-00020740: 2e20 4279 2064 6566 6175 6c74 0d0a 2020  . By default..  
-00020750: 2020 2020 2020 2020 2020 6064 646f 6660            `ddof`
-00020760: 2069 7320 7a65 726f 2066 6f72 2074 6865   is zero for the
-00020770: 204e 756d 5079 2069 6d70 6c65 6d65 6e74   NumPy implement
-00020780: 6174 696f 6e2c 2076 6572 7375 7320 6f6e  ation, versus on
-00020790: 6520 666f 7220 7468 650d 0a20 2020 2020  e for the..     
-000207a0: 2020 2020 2020 2052 6970 7461 626c 6520         Riptable 
-000207b0: 696d 706c 656d 656e 7461 7469 6f6e 2e0d  implementation..
-000207c0: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
-000207d0: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
-000207e0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 203e  -----..        >
-000207f0: 3e3e 2061 203d 2072 742e 4661 7374 4172  >> a = rt.FastAr
-00020800: 7261 7928 5b31 2c20 322c 2033 5d29 0d0a  ray([1, 2, 3])..
-00020810: 2020 2020 2020 2020 3e3e 3e20 612e 7374          >>> a.st
-00020820: 6428 290d 0a20 2020 2020 2020 2031 2e30  d()..        1.0
-00020830: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
-00020840: 2061 2060 6474 7970 6560 2073 7065 6369   a `dtype` speci
-00020850: 6669 6564 3a0d 0a0d 0a20 2020 2020 2020  fied:....       
-00020860: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
-00020870: 4172 7261 7928 5b31 2c20 322c 2033 5d29  Array([1, 2, 3])
-00020880: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-00020890: 7374 6428 6474 7970 6520 3d20 7274 2e69  std(dtype = rt.i
-000208a0: 6e74 3332 290d 0a20 2020 2020 2020 2031  nt32)..        1
-000208b0: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
-000208c0: 2061 2066 696c 7465 723a 0d0a 0d0a 2020   a filter:....  
-000208d0: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
-000208e0: 2e46 6173 7441 7272 6179 285b 312c 2032  .FastArray([1, 2
-000208f0: 2c20 335d 290d 0a20 2020 2020 2020 203e  , 3])..        >
-00020900: 3e3e 2062 203d 2072 742e 4641 285b 4661  >> b = rt.FA([Fa
-00020910: 6c73 652c 2054 7275 652c 2054 7275 655d  lse, True, True]
-00020920: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
-00020930: 2e73 7464 2866 696c 7465 7220 3d20 6229  .std(filter = b)
-00020940: 0d0a 2020 2020 2020 2020 302e 3730 3731  ..        0.7071
-00020950: 3036 3738 3131 3836 3534 3736 0d0a 2020  067811865476..  
-00020960: 2020 2020 2020 2222 220d 0a0d 0a20 2020        """....   
-00020970: 2020 2020 206b 7761 7267 7320 3d20 7365       kwargs = se
-00020980: 6c66 2e5f 6661 5f6b 6579 776f 7264 5f77  lf._fa_keyword_w
-00020990: 7261 7070 6572 2866 696c 7465 723d 6669  rapper(filter=fi
-000209a0: 6c74 6572 2c20 6474 7970 653d 6474 7970  lter, dtype=dtyp
-000209b0: 652c 2061 7869 733d 6178 6973 2c20 6b65  e, axis=axis, ke
-000209c0: 6570 6469 6d73 3d6b 6565 7064 696d 732c  epdims=keepdims,
-000209d0: 2064 646f 663d 6464 6f66 2c20 2a2a 6b77   ddof=ddof, **kw
-000209e0: 6172 6773 290d 0a0d 0a20 2020 2020 2020  args)....       
-000209f0: 2069 6620 6669 6c74 6572 2069 7320 6e6f   if filter is no
-00020a00: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
-00020a10: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00020a20: 2e5f 6661 5f66 696c 7465 725f 7772 6170  ._fa_filter_wrap
-00020a30: 7065 7228 5f66 7374 642c 2066 696c 7465  per(_fstd, filte
-00020a40: 723d 6669 6c74 6572 2c20 6474 7970 653d  r=filter, dtype=
-00020a50: 6474 7970 6529 0d0a 0d0a 2020 2020 2020  dtype)....      
-00020a60: 2020 7265 7475 726e 2073 656c 662e 5f72    return self._r
-00020a70: 6564 7563 655f 6368 6563 6b28 5245 4455  educe_check(REDU
-00020a80: 4345 5f46 554e 4354 494f 4e53 2e52 4544  CE_FUNCTIONS.RED
-00020a90: 5543 455f 5354 442c 206e 702e 7374 642c  UCE_STD, np.std,
-00020aa0: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
-00020ab0: 2020 6465 6620 6e61 6e73 7464 2873 656c    def nanstd(sel
-00020ac0: 662c 2066 696c 7465 723d 4e6f 6e65 2c20  f, filter=None, 
-00020ad0: 6474 7970 653d 4e6f 6e65 2c20 6178 6973  dtype=None, axis
-00020ae0: 3d4e 6f6e 652c 206b 6565 7064 696d 733d  =None, keepdims=
-00020af0: 4e6f 6e65 2c20 6464 6f66 3d4e 6f6e 652c  None, ddof=None,
-00020b00: 202a 2a6b 7761 7267 7329 202d 3e20 6e70   **kwargs) -> np
-00020b10: 2e6e 756d 6265 723a 0d0a 2020 2020 2020  .number:..      
-00020b20: 2020 2222 220d 0a20 2020 2020 2020 2043    """..        C
-00020b30: 6f6d 7075 7465 2074 6865 2073 7461 6e64  ompute the stand
-00020b40: 6172 6420 6465 7669 6174 696f 6e20 6f66  ard deviation of
-00020b50: 2074 6865 2076 616c 7565 7320 696e 2074   the values in t
-00020b60: 6865 2066 6972 7374 2061 7267 756d 656e  he first argumen
-00020b70: 742c 2069 676e 6f72 696e 6720 4e61 4e73  t, ignoring NaNs
-00020b80: 2e0d 0a0d 0a20 2020 2020 2020 2049 6620  .....        If 
-00020b90: 616c 6c20 7661 6c75 6573 2069 6e20 7468  all values in th
-00020ba0: 6520 6669 7273 7420 6172 6775 6d65 6e74  e first argument
-00020bb0: 2061 7265 204e 614e 732c 2060 604e 614e   are NaNs, ``NaN
-00020bc0: 6060 2069 7320 7265 7475 726e 6564 2e0d  `` is returned..
-00020bd0: 0a0d 0a20 2020 2020 2020 2052 6970 7461  ...        Ripta
-00020be0: 626c 6520 7573 6573 2074 6865 2063 6f6e  ble uses the con
-00020bf0: 7665 6e74 696f 6e20 7468 6174 2060 6064  vention that ``d
-00020c00: 646f 6620 3d20 3160 602c 206d 6561 6e69  dof = 1``, meani
-00020c10: 6e67 2074 6865 2073 7461 6e64 6172 6420  ng the standard 
-00020c20: 6465 7669 6174 696f 6e20 6f66 0d0a 2020  deviation of..  
-00020c30: 2020 2020 2020 6060 5b78 5f31 2c20 2e2e        ``[x_1, ..
-00020c40: 2e2c 2078 5f6e 5d60 6020 6973 2064 6566  ., x_n]`` is def
-00020c50: 696e 6564 2062 7920 6060 7374 6420 3d20  ined by ``std = 
-00020c60: 312f 286e 202d 2031 2920 2a20 7375 6d28  1/(n - 1) * sum(
-00020c70: 785f 6920 2d20 6d65 616e 2029 2a2a 3260  x_i - mean )**2`
-00020c80: 6020 286e 6f74 650d 0a20 2020 2020 2020  ` (note..       
-00020c90: 2074 6865 2060 606e 202d 2031 6060 2069   the ``n - 1`` i
-00020ca0: 6e73 7465 6164 206f 6620 6060 6e60 6029  nstead of ``n``)
-00020cb0: 2e20 5468 6973 2064 6966 6665 7273 2066  . This differs f
-00020cc0: 726f 6d20 4e75 6d50 792c 2077 6869 6368  rom NumPy, which
-00020cd0: 2075 7365 7320 6060 6464 6f66 203d 2030   uses ``ddof = 0
-00020ce0: 6060 2062 790d 0a20 2020 2020 2020 2064  `` by..        d
-00020cf0: 6566 6175 6c74 2e0d 0a0d 0a20 2020 2020  efault.....     
-00020d00: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
-00020d10: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
-00020d20: 2d0d 0a20 2020 2020 2020 2066 696c 7465  -..        filte
-00020d30: 7220 3a20 6172 7261 7920 6f66 2062 6f6f  r : array of boo
-00020d40: 6c2c 2064 6566 6175 6c74 204e 6f6e 650d  l, default None.
-00020d50: 0a20 2020 2020 2020 2020 2020 2053 7065  .            Spe
-00020d60: 6369 6669 6573 2077 6869 6368 2065 6c65  cifies which ele
-00020d70: 6d65 6e74 7320 746f 2069 6e63 6c75 6465  ments to include
-00020d80: 2069 6e20 7468 6520 7374 616e 6461 7264   in the standard
-00020d90: 2064 6576 6961 7469 6f6e 2063 616c 6375   deviation calcu
-00020da0: 6c61 7469 6f6e 2e20 4966 0d0a 2020 2020  lation. If..    
-00020db0: 2020 2020 2020 2020 7468 6520 6669 6c74          the filt
-00020dc0: 6572 2069 7320 756e 6966 6f72 6d6c 7920  er is uniformly 
-00020dd0: 6060 4661 6c73 6560 602c 2060 6e61 6e73  ``False``, `nans
-00020de0: 7464 6020 7265 7475 726e 7320 6120 605a  td` returns a `Z
-00020df0: 6572 6f44 6976 6973 696f 6e45 7272 6f72  eroDivisionError
-00020e00: 602e 0d0a 0d0a 2020 2020 2020 2020 6474  `.....        dt
-00020e10: 7970 6520 3a20 7274 2e64 7479 7065 206f  ype : rt.dtype o
-00020e20: 7220 6e75 6d70 792e 6474 7970 652c 2064  r numpy.dtype, d
-00020e30: 6566 6175 6c74 2066 6c6f 6174 3634 0d0a  efault float64..
-00020e40: 2020 2020 2020 2020 2020 2020 5468 6520              The 
-00020e50: 6461 7461 2074 7970 6520 6f66 2074 6865  data type of the
-00020e60: 2072 6573 756c 742e 2046 6f72 2061 2060   result. For a `
-00020e70: 4661 7374 4172 7261 7960 2060 6078 6060  FastArray` ``x``
-00020e80: 2c0d 0a20 2020 2020 2020 2020 2020 2060  ,..            `
-00020e90: 6078 2e6e 616e 7374 6428 6474 7970 6520  `x.nanstd(dtype 
-00020ea0: 3d20 6d79 5f74 7970 6529 6060 2069 7320  = my_type)`` is 
-00020eb0: 6571 7569 7661 6c65 6e74 2074 6f20 6060  equivalent to ``
-00020ec0: 6d79 5f74 7970 6528 782e 6e61 6e73 7464  my_type(x.nanstd
-00020ed0: 2829 2960 602e 0d0a 0d0a 2020 2020 2020  ())``.....      
-00020ee0: 2020 5265 7475 726e 730d 0a20 2020 2020    Returns..     
-00020ef0: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
-00020f00: 2020 2020 7363 616c 6172 0d0a 2020 2020      scalar..    
-00020f10: 2020 2020 2020 2020 5468 6520 7374 616e          The stan
-00020f20: 6461 7264 2064 6576 6961 7469 6f6e 206f  dard deviation o
-00020f30: 6620 7468 6520 7661 6c75 6573 2e0d 0a0d  f the values....
-00020f40: 0a20 2020 2020 2020 2053 6565 2041 6c73  .        See Als
-00020f50: 6f0d 0a20 2020 2020 2020 202d 2d2d 2d2d  o..        -----
-00020f60: 2d2d 2d0d 0a20 2020 2020 2020 206e 756d  ---..        num
-00020f70: 7079 2e6e 616e 7374 640d 0a20 2020 2020  py.nanstd..     
-00020f80: 2020 2046 6173 7441 7272 6179 2e73 7464     FastArray.std
-00020f90: 203a 2043 6f6d 7075 7465 7320 7468 6520   : Computes the 
-00020fa0: 7374 616e 6461 7264 2064 6576 6961 7469  standard deviati
-00020fb0: 6f6e 206f 6620 6046 6173 7441 7272 6179  on of `FastArray
-00020fc0: 6020 7661 6c75 6573 2e0d 0a20 2020 2020  ` values...     
-00020fd0: 2020 2044 6174 6173 6574 2e6e 616e 7374     Dataset.nanst
-00020fe0: 6420 3a20 436f 6d70 7574 6573 2074 6865  d : Computes the
-00020ff0: 2073 7461 6e64 6172 6420 6465 7669 6174   standard deviat
-00021000: 696f 6e20 6f66 206e 756d 6572 6963 616c  ion of numerical
-00021010: 2060 4461 7461 7365 7460 2063 6f6c 756d   `Dataset` colum
-00021020: 6e73 2c0d 0a20 2020 2020 2020 2020 2020  ns,..           
-00021030: 2020 2020 2020 2020 2020 2020 2020 6967                ig
-00021040: 6e6f 7269 6e67 204e 614e 732e 0d0a 2020  noring NaNs...  
-00021050: 2020 2020 2020 4772 6f75 7042 794f 7073        GroupByOps
-00021060: 2e6e 616e 7374 6420 3a20 436f 6d70 7574  .nanstd : Comput
-00021070: 6573 2074 6865 2073 7461 6e64 6172 6420  es the standard 
-00021080: 6465 7669 6174 696f 6e20 6f66 2065 6163  deviation of eac
-00021090: 6820 6772 6f75 702c 2069 676e 6f72 696e  h group, ignorin
-000210a0: 6720 4e61 4e73 2e0d 0a20 2020 2020 2020  g NaNs...       
-000210b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000210c0: 2020 2020 2055 7365 6420 6279 2060 4361       Used by `Ca
-000210d0: 7465 676f 7269 6361 6c60 206f 626a 6563  tegorical` objec
-000210e0: 7473 2e0d 0a0d 0a20 2020 2020 2020 204e  ts.....        N
-000210f0: 6f74 6573 0d0a 2020 2020 2020 2020 2d2d  otes..        --
-00021100: 2d2d 2d0d 0a20 2020 2020 2020 2054 6865  ---..        The
-00021110: 2060 6474 7970 6560 206b 6579 776f 7264   `dtype` keyword
-00021120: 2066 6f72 2060 4661 7374 4172 7261 792e   for `FastArray.
-00021130: 6e61 6e73 7464 6020 7370 6563 6966 6965  nanstd` specifie
-00021140: 7320 7468 6520 6461 7461 2074 7970 6520  s the data type 
-00021150: 6f66 2074 6865 0d0a 2020 2020 2020 2020  of the..        
-00021160: 7265 7375 6c74 2e20 5468 6973 2064 6966  result. This dif
-00021170: 6665 7273 2066 726f 6d20 606e 756d 7079  fers from `numpy
-00021180: 2e6e 616e 7374 6460 2c20 7768 6572 6520  .nanstd`, where 
-00021190: 6974 2073 7065 6369 6669 6573 2074 6865  it specifies the
-000211a0: 2064 6174 6120 7479 7065 2075 7365 640d   data type used.
-000211b0: 0a20 2020 2020 2020 2074 6f20 636f 6d70  .        to comp
-000211c0: 7574 6520 7468 6520 7374 616e 6461 7264  ute the standard
-000211d0: 2064 6576 6961 7469 6f6e 2e0d 0a0d 0a20   deviation..... 
-000211e0: 2020 2020 2020 202a 2a4e 6f74 6573 206f         **Notes o
-000211f0: 6e20 5573 696e 6720 4e75 6d50 7920 5061  n Using NumPy Pa
-00021200: 7261 6d65 7465 7273 2a2a 0d0a 0d0a 2020  rameters**....  
-00021210: 2020 2020 2020 5573 696e 6720 616e 7920        Using any 
-00021220: 6f66 2074 6865 2066 6f6c 6c6f 7769 6e67  of the following
-00021230: 204e 756d 5079 2070 6172 616d 6574 6572   NumPy parameter
-00021240: 7320 7769 6c6c 2063 6175 7365 2052 6970  s will cause Rip
-00021250: 7461 626c 6520 746f 2073 7769 7463 6820  table to switch 
-00021260: 746f 0d0a 2020 2020 2020 2020 7468 6520  to..        the 
-00021270: 4e75 6d50 7920 696d 706c 656d 656e 7461  NumPy implementa
-00021280: 7469 6f6e 206f 6620 7468 6973 206d 6574  tion of this met
-00021290: 686f 6420 2860 6e75 6d70 792e 6e61 6e73  hod (`numpy.nans
-000212a0: 7464 6029 2e20 486f 7765 7665 722c 2075  td`). However, u
-000212b0: 6e74 696c 2061 0d0a 2020 2020 2020 2020  ntil a..        
-000212c0: 7265 706f 7274 6564 2062 7567 2069 7320  reported bug is 
-000212d0: 6669 7865 642c 2069 6620 796f 7520 616c  fixed, if you al
-000212e0: 736f 2069 6e63 6c75 6465 2074 6865 2060  so include the `
-000212f0: 6474 7970 6560 2070 6172 616d 6574 6572  dtype` parameter
-00021300: 2069 7420 7769 6c6c 2062 650d 0a20 2020   it will be..   
-00021310: 2020 2020 2061 7070 6c69 6564 2074 6f20       applied to 
-00021320: 7468 6520 7265 7375 6c74 2c20 6e6f 7420  the result, not 
-00021330: 7573 6564 2074 6f20 636f 6d70 7574 6520  used to compute 
-00021340: 7468 6520 7661 7269 616e 6365 2061 7320  the variance as 
-00021350: 6974 2069 7320 696e 0d0a 2020 2020 2020  it is in..      
-00021360: 2020 606e 756d 7079 2e6e 616e 7374 6460    `numpy.nanstd`
-00021370: 2e0d 0a0d 0a20 2020 2020 2020 2041 6c73  .....        Als
-00021380: 6f20 6e6f 7465 2074 6861 7420 6966 2079  o note that if y
-00021390: 6f75 2075 7365 2061 6e79 206f 6620 7468  ou use any of th
-000213a0: 6520 666f 6c6c 6f77 696e 6720 4e75 6d50  e following NumP
-000213b0: 7920 7061 7261 6d65 7465 7273 2061 6e64  y parameters and
-000213c0: 2061 6c73 6f0d 0a20 2020 2020 2020 2069   also..        i
-000213d0: 6e63 6c75 6465 2061 2060 6669 6c74 6572  nclude a `filter
-000213e0: 6020 6b65 7977 6f72 6420 6172 6775 6d65  ` keyword argume
-000213f0: 6e74 2028 7768 6963 6820 606e 756d 7079  nt (which `numpy
-00021400: 2e6e 616e 7374 6460 2064 6f65 7320 6e6f  .nanstd` does no
-00021410: 7420 6163 6365 7074 292c 0d0a 2020 2020  t accept),..    
-00021420: 2020 2020 5269 7074 6162 6c65 2773 2069      Riptable's i
-00021430: 6d70 6c65 6d65 6e74 6174 696f 6e20 6f66  mplementation of
-00021440: 2060 6e61 6e73 7464 6020 7769 6c6c 2062   `nanstd` will b
-00021450: 6520 7573 6564 2077 6974 6820 7468 6520  e used with the 
-00021460: 6669 6c74 6572 2061 7267 756d 656e 740d  filter argument.
-00021470: 0a20 2020 2020 2020 2061 6e64 2074 6865  .        and the
-00021480: 204e 756d 5079 2070 6172 616d 6574 6572   NumPy parameter
-00021490: 7320 7769 6c6c 2062 6520 6967 6e6f 7265  s will be ignore
-000214a0: 642e 0d0a 0d0a 2020 2020 2020 2020 6178  d.....        ax
-000214b0: 6973 203a 207b 696e 742c 2074 7570 6c65  is : {int, tuple
-000214c0: 206f 6620 696e 742c 204e 6f6e 657d 2c20   of int, None}, 
-000214d0: 6f70 7469 6f6e 616c 0d0a 2020 2020 2020  optional..      
-000214e0: 2020 2020 2020 4178 6973 206f 7220 6178        Axis or ax
-000214f0: 6573 2061 6c6f 6e67 2077 6869 6368 2074  es along which t
-00021500: 6865 2073 7461 6e64 6172 6420 6465 7669  he standard devi
-00021510: 6174 696f 6e20 6973 2063 6f6d 7075 7465  ation is compute
-00021520: 642e 2054 6865 2064 6566 6175 6c74 2069  d. The default i
-00021530: 730d 0a20 2020 2020 2020 2020 2020 2074  s..            t
-00021540: 6f20 636f 6d70 7574 6520 7468 6520 7374  o compute the st
+00020370: 7469 6f6e 2069 7320 636f 6d70 7574 6564  tion is computed
+00020380: 2e20 5468 650d 0a20 2020 2020 2020 2020  . The..         
+00020390: 2020 2064 6566 6175 6c74 2069 7320 746f     default is to
+000203a0: 2063 6f6d 7075 7465 2074 6865 2073 7461   compute the sta
+000203b0: 6e64 6172 6420 6465 7669 6174 696f 6e20  ndard deviation 
+000203c0: 6f66 2074 6865 2066 6c61 7474 656e 6564  of the flattened
+000203d0: 2061 7272 6179 2e0d 0a0d 0a20 2020 2020   array.....     
+000203e0: 2020 2020 2020 202e 2e20 7665 7273 696f         .. versio
+000203f0: 6e61 6464 6564 3a3a 2031 2e37 2e30 0d0a  nadded:: 1.7.0..
+00020400: 0d0a 2020 2020 2020 2020 2020 2020 4966  ..            If
+00020410: 2074 6869 7320 6973 2061 2074 7570 6c65   this is a tuple
+00020420: 206f 6620 696e 7473 2c20 6120 7374 616e   of ints, a stan
+00020430: 6461 7264 2064 6576 6961 7469 6f6e 2069  dard deviation i
+00020440: 7320 7065 7266 6f72 6d65 6420 6f76 6572  s performed over
+00020450: 206d 756c 7469 706c 650d 0a20 2020 2020   multiple..     
+00020460: 2020 2020 2020 2061 7865 732c 2069 6e73         axes, ins
+00020470: 7465 6164 206f 6620 6120 7369 6e67 6c65  tead of a single
+00020480: 2061 7869 7320 6f72 2061 6c6c 2074 6865   axis or all the
+00020490: 2061 7865 7320 6173 2062 6566 6f72 652e   axes as before.
+000204a0: 0d0a 0d0a 2020 2020 2020 2020 6b65 6570  ....        keep
+000204b0: 6469 6d73 203a 2062 6f6f 6c2c 206f 7074  dims : bool, opt
+000204c0: 696f 6e61 6c0d 0a20 2020 2020 2020 2020  ional..         
+000204d0: 2020 2049 6620 7468 6973 2069 7320 7365     If this is se
+000204e0: 7420 746f 2054 7275 652c 2074 6865 2061  t to True, the a
+000204f0: 7865 7320 7768 6963 6820 6172 6520 7265  xes which are re
+00020500: 6475 6365 6420 6172 6520 6c65 6674 2069  duced are left i
+00020510: 6e20 7468 6520 7265 7375 6c74 2061 730d  n the result as.
+00020520: 0a20 2020 2020 2020 2020 2020 2064 696d  .            dim
+00020530: 656e 7369 6f6e 7320 7769 7468 2073 697a  ensions with siz
+00020540: 6520 6f6e 652e 2057 6974 6820 7468 6973  e one. With this
+00020550: 206f 7074 696f 6e2c 2074 6865 2072 6573   option, the res
+00020560: 756c 7420 7769 6c6c 2062 726f 6164 6361  ult will broadca
+00020570: 7374 0d0a 2020 2020 2020 2020 2020 2020  st..            
+00020580: 636f 7272 6563 746c 7920 6167 6169 6e73  correctly agains
+00020590: 7420 7468 6520 696e 7075 7420 6172 7261  t the input arra
+000205a0: 792e 0d0a 0d0a 2020 2020 2020 2020 2020  y.....          
+000205b0: 2020 4966 2074 6865 2064 6566 6175 6c74    If the default
+000205c0: 2076 616c 7565 2069 7320 7061 7373 6564   value is passed
+000205d0: 2c20 7468 656e 2060 6b65 6570 6469 6d73  , then `keepdims
+000205e0: 6020 7769 6c6c 206e 6f74 2062 6520 7061  ` will not be pa
+000205f0: 7373 6564 2074 6872 6f75 6768 0d0a 2020  ssed through..  
+00020600: 2020 2020 2020 2020 2020 746f 2074 6865            to the
+00020610: 2060 7374 6460 206d 6574 686f 6420 6f66   `std` method of
+00020620: 2073 7562 2d63 6c61 7373 6573 206f 6620   sub-classes of 
+00020630: 606e 6461 7272 6179 602c 2068 6f77 6576  `ndarray`, howev
+00020640: 6572 2061 6e79 206e 6f6e 2d64 6566 6175  er any non-defau
+00020650: 6c74 0d0a 2020 2020 2020 2020 2020 2020  lt..            
+00020660: 7661 6c75 6520 7769 6c6c 2062 652e 2049  value will be. I
+00020670: 6620 7468 6520 7375 622d 636c 6173 7327  f the sub-class'
+00020680: 206d 6574 686f 6420 646f 6573 206e 6f74   method does not
+00020690: 2069 6d70 6c65 6d65 6e74 2060 6b65 6570   implement `keep
+000206a0: 6469 6d73 602c 0d0a 2020 2020 2020 2020  dims`,..        
+000206b0: 2020 2020 616e 7920 6578 6365 7074 696f      any exceptio
+000206c0: 6e73 2077 696c 6c20 6265 2072 6169 7365  ns will be raise
+000206d0: 642e 0d0a 0d0a 2020 2020 2020 2020 6464  d.....        dd
+000206e0: 6f66 203a 2069 6e74 2c20 6f70 7469 6f6e  of : int, option
+000206f0: 616c 0d0a 2020 2020 2020 2020 2020 2020  al..            
+00020700: 2244 656c 7461 2044 6567 7265 6573 206f  "Delta Degrees o
+00020710: 6620 4672 6565 646f 6d22 3a20 7468 6520  f Freedom": the 
+00020720: 6469 7669 736f 7220 7573 6564 2069 6e20  divisor used in 
+00020730: 7468 6520 6361 6c63 756c 6174 696f 6e20  the calculation 
+00020740: 6973 0d0a 2020 2020 2020 2020 2020 2020  is..            
+00020750: 6060 4e20 2d20 6464 6f66 6060 2c20 7768  ``N - ddof``, wh
+00020760: 6572 6520 6060 4e60 6020 7265 7072 6573  ere ``N`` repres
+00020770: 656e 7473 2074 6865 206e 756d 6265 7220  ents the number 
+00020780: 6f66 2065 6c65 6d65 6e74 732e 2042 7920  of elements. By 
+00020790: 6465 6661 756c 740d 0a20 2020 2020 2020  default..       
+000207a0: 2020 2020 2060 6464 6f66 6020 6973 207a       `ddof` is z
+000207b0: 6572 6f20 666f 7220 7468 6520 4e75 6d50  ero for the NumP
+000207c0: 7920 696d 706c 656d 656e 7461 7469 6f6e  y implementation
+000207d0: 2c20 7665 7273 7573 206f 6e65 2066 6f72  , versus one for
+000207e0: 2074 6865 0d0a 2020 2020 2020 2020 2020   the..          
+000207f0: 2020 5269 7074 6162 6c65 2069 6d70 6c65    Riptable imple
+00020800: 6d65 6e74 6174 696f 6e2e 0d0a 0d0a 2020  mentation.....  
+00020810: 2020 2020 2020 4578 616d 706c 6573 0d0a        Examples..
+00020820: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+00020830: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
+00020840: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
+00020850: 312c 2032 2c20 335d 290d 0a20 2020 2020  1, 2, 3])..     
+00020860: 2020 203e 3e3e 2061 2e73 7464 2829 0d0a     >>> a.std()..
+00020870: 2020 2020 2020 2020 312e 300d 0a0d 0a20          1.0.... 
+00020880: 2020 2020 2020 2057 6974 6820 6120 6064         With a `d
+00020890: 7479 7065 6020 7370 6563 6966 6965 643a  type` specified:
+000208a0: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
+000208b0: 6120 3d20 7274 2e46 6173 7441 7272 6179  a = rt.FastArray
+000208c0: 285b 312c 2032 2c20 335d 290d 0a20 2020  ([1, 2, 3])..   
+000208d0: 2020 2020 203e 3e3e 2061 2e73 7464 2864       >>> a.std(d
+000208e0: 7479 7065 203d 2072 742e 696e 7433 3229  type = rt.int32)
+000208f0: 0d0a 2020 2020 2020 2020 310d 0a0d 0a20  ..        1.... 
+00020900: 2020 2020 2020 2057 6974 6820 6120 6669         With a fi
+00020910: 6c74 6572 3a0d 0a0d 0a20 2020 2020 2020  lter:....       
+00020920: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
+00020930: 4172 7261 7928 5b31 2c20 322c 2033 5d29  Array([1, 2, 3])
+00020940: 0d0a 2020 2020 2020 2020 3e3e 3e20 6220  ..        >>> b 
+00020950: 3d20 7274 2e46 4128 5b46 616c 7365 2c20  = rt.FA([False, 
+00020960: 5472 7565 2c20 5472 7565 5d29 0d0a 2020  True, True])..  
+00020970: 2020 2020 2020 3e3e 3e20 612e 7374 6428        >>> a.std(
+00020980: 6669 6c74 6572 203d 2062 290d 0a20 2020  filter = b)..   
+00020990: 2020 2020 2030 2e37 3037 3130 3637 3831       0.707106781
+000209a0: 3138 3635 3437 360d 0a20 2020 2020 2020  1865476..       
+000209b0: 2022 2222 0d0a 0d0a 2020 2020 2020 2020   """....        
+000209c0: 6b77 6172 6773 203d 2073 656c 662e 5f66  kwargs = self._f
+000209d0: 615f 6b65 7977 6f72 645f 7772 6170 7065  a_keyword_wrappe
+000209e0: 7228 6669 6c74 6572 3d66 696c 7465 722c  r(filter=filter,
+000209f0: 2064 7479 7065 3d64 7479 7065 2c20 6178   dtype=dtype, ax
+00020a00: 6973 3d61 7869 732c 206b 6565 7064 696d  is=axis, keepdim
+00020a10: 733d 6b65 6570 6469 6d73 2c20 6464 6f66  s=keepdims, ddof
+00020a20: 3d64 646f 662c 202a 2a6b 7761 7267 7329  =ddof, **kwargs)
+00020a30: 0d0a 0d0a 2020 2020 2020 2020 6966 2066  ....        if f
+00020a40: 696c 7465 7220 6973 206e 6f74 204e 6f6e  ilter is not Non
+00020a50: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00020a60: 7265 7475 726e 2073 656c 662e 5f66 615f  return self._fa_
+00020a70: 6669 6c74 6572 5f77 7261 7070 6572 285f  filter_wrapper(_
+00020a80: 6673 7464 2c20 6669 6c74 6572 3d66 696c  fstd, filter=fil
+00020a90: 7465 722c 2064 7479 7065 3d64 7479 7065  ter, dtype=dtype
+00020aa0: 290d 0a0d 0a20 2020 2020 2020 2072 6574  )....        ret
+00020ab0: 7572 6e20 7365 6c66 2e5f 7265 6475 6365  urn self._reduce
+00020ac0: 5f63 6865 636b 2852 4544 5543 455f 4655  _check(REDUCE_FU
+00020ad0: 4e43 5449 4f4e 532e 5245 4455 4345 5f53  NCTIONS.REDUCE_S
+00020ae0: 5444 2c20 6e70 2e73 7464 2c20 2a2a 6b77  TD, np.std, **kw
+00020af0: 6172 6773 290d 0a0d 0a20 2020 2064 6566  args)....    def
+00020b00: 206e 616e 7374 6428 7365 6c66 2c20 6669   nanstd(self, fi
+00020b10: 6c74 6572 3d4e 6f6e 652c 2064 7479 7065  lter=None, dtype
+00020b20: 3d4e 6f6e 652c 2061 7869 733d 4e6f 6e65  =None, axis=None
+00020b30: 2c20 6b65 6570 6469 6d73 3d4e 6f6e 652c  , keepdims=None,
+00020b40: 2064 646f 663d 4e6f 6e65 2c20 2a2a 6b77   ddof=None, **kw
+00020b50: 6172 6773 2920 2d3e 206e 702e 6e75 6d62  args) -> np.numb
+00020b60: 6572 3a0d 0a20 2020 2020 2020 2022 2222  er:..        """
+00020b70: 0d0a 2020 2020 2020 2020 436f 6d70 7574  ..        Comput
+00020b80: 6520 7468 6520 7374 616e 6461 7264 2064  e the standard d
+00020b90: 6576 6961 7469 6f6e 206f 6620 7468 6520  eviation of the 
+00020ba0: 7661 6c75 6573 2069 6e20 7468 6520 6669  values in the fi
+00020bb0: 7273 7420 6172 6775 6d65 6e74 2c20 6967  rst argument, ig
+00020bc0: 6e6f 7269 6e67 204e 614e 732e 0d0a 0d0a  noring NaNs.....
+00020bd0: 2020 2020 2020 2020 4966 2061 6c6c 2076          If all v
+00020be0: 616c 7565 7320 696e 2074 6865 2066 6972  alues in the fir
+00020bf0: 7374 2061 7267 756d 656e 7420 6172 6520  st argument are 
+00020c00: 4e61 4e73 2c20 6060 4e61 4e60 6020 6973  NaNs, ``NaN`` is
+00020c10: 2072 6574 7572 6e65 642e 0d0a 0d0a 2020   returned.....  
+00020c20: 2020 2020 2020 5269 7074 6162 6c65 2075        Riptable u
+00020c30: 7365 7320 7468 6520 636f 6e76 656e 7469  ses the conventi
+00020c40: 6f6e 2074 6861 7420 6060 6464 6f66 203d  on that ``ddof =
+00020c50: 2031 6060 2c20 6d65 616e 696e 6720 7468   1``, meaning th
+00020c60: 6520 7374 616e 6461 7264 2064 6576 6961  e standard devia
+00020c70: 7469 6f6e 206f 660d 0a20 2020 2020 2020  tion of..       
+00020c80: 2060 605b 785f 312c 202e 2e2e 2c20 785f   ``[x_1, ..., x_
+00020c90: 6e5d 6060 2069 7320 6465 6669 6e65 6420  n]`` is defined 
+00020ca0: 6279 2060 6073 7464 203d 2031 2f28 6e20  by ``std = 1/(n 
+00020cb0: 2d20 3129 202a 2073 756d 2878 5f69 202d  - 1) * sum(x_i -
+00020cc0: 206d 6561 6e20 292a 2a32 6060 2028 6e6f   mean )**2`` (no
+00020cd0: 7465 0d0a 2020 2020 2020 2020 7468 6520  te..        the 
+00020ce0: 6060 6e20 2d20 3160 6020 696e 7374 6561  ``n - 1`` instea
+00020cf0: 6420 6f66 2060 606e 6060 292e 2054 6869  d of ``n``). Thi
+00020d00: 7320 6469 6666 6572 7320 6672 6f6d 204e  s differs from N
+00020d10: 756d 5079 2c20 7768 6963 6820 7573 6573  umPy, which uses
+00020d20: 2060 6064 646f 6620 3d20 3060 6020 6279   ``ddof = 0`` by
+00020d30: 0d0a 2020 2020 2020 2020 6465 6661 756c  ..        defaul
+00020d40: 742e 0d0a 0d0a 2020 2020 2020 2020 5061  t.....        Pa
+00020d50: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+00020d60: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+00020d70: 2020 2020 2020 6669 6c74 6572 203a 2061        filter : a
+00020d80: 7272 6179 206f 6620 626f 6f6c 2c20 6465  rray of bool, de
+00020d90: 6661 756c 7420 4e6f 6e65 0d0a 2020 2020  fault None..    
+00020da0: 2020 2020 2020 2020 5370 6563 6966 6965          Specifie
+00020db0: 7320 7768 6963 6820 656c 656d 656e 7473  s which elements
+00020dc0: 2074 6f20 696e 636c 7564 6520 696e 2074   to include in t
+00020dd0: 6865 2073 7461 6e64 6172 6420 6465 7669  he standard devi
+00020de0: 6174 696f 6e20 6361 6c63 756c 6174 696f  ation calculatio
+00020df0: 6e2e 2049 660d 0a20 2020 2020 2020 2020  n. If..         
+00020e00: 2020 2074 6865 2066 696c 7465 7220 6973     the filter is
+00020e10: 2075 6e69 666f 726d 6c79 2060 6046 616c   uniformly ``Fal
+00020e20: 7365 6060 2c20 606e 616e 7374 6460 2072  se``, `nanstd` r
+00020e30: 6574 7572 6e73 2061 2060 5a65 726f 4469  eturns a `ZeroDi
+00020e40: 7669 7369 6f6e 4572 726f 7260 2e0d 0a0d  visionError`....
+00020e50: 0a20 2020 2020 2020 2064 7479 7065 203a  .        dtype :
+00020e60: 2072 742e 6474 7970 6520 6f72 206e 756d   rt.dtype or num
+00020e70: 7079 2e64 7479 7065 2c20 6465 6661 756c  py.dtype, defaul
+00020e80: 7420 666c 6f61 7436 340d 0a20 2020 2020  t float64..     
+00020e90: 2020 2020 2020 2054 6865 2064 6174 6120         The data 
+00020ea0: 7479 7065 206f 6620 7468 6520 7265 7375  type of the resu
+00020eb0: 6c74 2e20 466f 7220 6120 6046 6173 7441  lt. For a `FastA
+00020ec0: 7272 6179 6020 6060 7860 602c 0d0a 2020  rray` ``x``,..  
+00020ed0: 2020 2020 2020 2020 2020 6060 782e 6e61            ``x.na
+00020ee0: 6e73 7464 2864 7479 7065 203d 206d 795f  nstd(dtype = my_
+00020ef0: 7479 7065 2960 6020 6973 2065 7175 6976  type)`` is equiv
+00020f00: 616c 656e 7420 746f 2060 606d 795f 7479  alent to ``my_ty
+00020f10: 7065 2878 2e6e 616e 7374 6428 2929 6060  pe(x.nanstd())``
+00020f20: 2e0d 0a0d 0a20 2020 2020 2020 2052 6574  .....        Ret
+00020f30: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
+00020f40: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2073  -----..        s
+00020f50: 6361 6c61 720d 0a20 2020 2020 2020 2020  calar..         
+00020f60: 2020 2054 6865 2073 7461 6e64 6172 6420     The standard 
+00020f70: 6465 7669 6174 696f 6e20 6f66 2074 6865  deviation of the
+00020f80: 2076 616c 7565 732e 0d0a 0d0a 2020 2020   values.....    
+00020f90: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
+00020fa0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
+00020fb0: 2020 2020 2020 2020 6e75 6d70 792e 6e61          numpy.na
+00020fc0: 6e73 7464 0d0a 2020 2020 2020 2020 4661  nstd..        Fa
+00020fd0: 7374 4172 7261 792e 7374 6420 3a20 436f  stArray.std : Co
+00020fe0: 6d70 7574 6573 2074 6865 2073 7461 6e64  mputes the stand
+00020ff0: 6172 6420 6465 7669 6174 696f 6e20 6f66  ard deviation of
+00021000: 2060 4661 7374 4172 7261 7960 2076 616c   `FastArray` val
+00021010: 7565 732e 0d0a 2020 2020 2020 2020 4461  ues...        Da
+00021020: 7461 7365 742e 6e61 6e73 7464 203a 2043  taset.nanstd : C
+00021030: 6f6d 7075 7465 7320 7468 6520 7374 616e  omputes the stan
+00021040: 6461 7264 2064 6576 6961 7469 6f6e 206f  dard deviation o
+00021050: 6620 6e75 6d65 7269 6361 6c20 6044 6174  f numerical `Dat
+00021060: 6173 6574 6020 636f 6c75 6d6e 732c 0d0a  aset` columns,..
+00021070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021080: 2020 2020 2020 2020 2069 676e 6f72 696e           ignorin
+00021090: 6720 4e61 4e73 2e0d 0a20 2020 2020 2020  g NaNs...       
+000210a0: 2047 726f 7570 4279 4f70 732e 6e61 6e73   GroupByOps.nans
+000210b0: 7464 203a 2043 6f6d 7075 7465 7320 7468  td : Computes th
+000210c0: 6520 7374 616e 6461 7264 2064 6576 6961  e standard devia
+000210d0: 7469 6f6e 206f 6620 6561 6368 2067 726f  tion of each gro
+000210e0: 7570 2c20 6967 6e6f 7269 6e67 204e 614e  up, ignoring NaN
+000210f0: 732e 0d0a 2020 2020 2020 2020 2020 2020  s...            
+00021100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021110: 5573 6564 2062 7920 6043 6174 6567 6f72  Used by `Categor
+00021120: 6963 616c 6020 6f62 6a65 6374 732e 0d0a  ical` objects...
+00021130: 0d0a 2020 2020 2020 2020 4e6f 7465 730d  ..        Notes.
+00021140: 0a20 2020 2020 2020 202d 2d2d 2d2d 0d0a  .        -----..
+00021150: 2020 2020 2020 2020 5468 6520 6064 7479          The `dty
+00021160: 7065 6020 6b65 7977 6f72 6420 666f 7220  pe` keyword for 
+00021170: 6046 6173 7441 7272 6179 2e6e 616e 7374  `FastArray.nanst
+00021180: 6460 2073 7065 6369 6669 6573 2074 6865  d` specifies the
+00021190: 2064 6174 6120 7479 7065 206f 6620 7468   data type of th
+000211a0: 650d 0a20 2020 2020 2020 2072 6573 756c  e..        resul
+000211b0: 742e 2054 6869 7320 6469 6666 6572 7320  t. This differs 
+000211c0: 6672 6f6d 2060 6e75 6d70 792e 6e61 6e73  from `numpy.nans
+000211d0: 7464 602c 2077 6865 7265 2069 7420 7370  td`, where it sp
+000211e0: 6563 6966 6965 7320 7468 6520 6461 7461  ecifies the data
+000211f0: 2074 7970 6520 7573 6564 0d0a 2020 2020   type used..    
+00021200: 2020 2020 746f 2063 6f6d 7075 7465 2074      to compute t
+00021210: 6865 2073 7461 6e64 6172 6420 6465 7669  he standard devi
+00021220: 6174 696f 6e2e 0d0a 0d0a 2020 2020 2020  ation.....      
+00021230: 2020 2a2a 4e6f 7465 7320 6f6e 2055 7369    **Notes on Usi
+00021240: 6e67 204e 756d 5079 2050 6172 616d 6574  ng NumPy Paramet
+00021250: 6572 732a 2a0d 0a0d 0a20 2020 2020 2020  ers**....       
+00021260: 2055 7369 6e67 2061 6e79 206f 6620 7468   Using any of th
+00021270: 6520 666f 6c6c 6f77 696e 6720 4e75 6d50  e following NumP
+00021280: 7920 7061 7261 6d65 7465 7273 2077 696c  y parameters wil
+00021290: 6c20 6361 7573 6520 5269 7074 6162 6c65  l cause Riptable
+000212a0: 2074 6f20 7377 6974 6368 2074 6f0d 0a20   to switch to.. 
+000212b0: 2020 2020 2020 2074 6865 204e 756d 5079         the NumPy
+000212c0: 2069 6d70 6c65 6d65 6e74 6174 696f 6e20   implementation 
+000212d0: 6f66 2074 6869 7320 6d65 7468 6f64 2028  of this method (
+000212e0: 606e 756d 7079 2e6e 616e 7374 6460 292e  `numpy.nanstd`).
+000212f0: 2048 6f77 6576 6572 2c20 756e 7469 6c20   However, until 
+00021300: 610d 0a20 2020 2020 2020 2072 6570 6f72  a..        repor
+00021310: 7465 6420 6275 6720 6973 2066 6978 6564  ted bug is fixed
+00021320: 2c20 6966 2079 6f75 2061 6c73 6f20 696e  , if you also in
+00021330: 636c 7564 6520 7468 6520 6064 7479 7065  clude the `dtype
+00021340: 6020 7061 7261 6d65 7465 7220 6974 2077  ` parameter it w
+00021350: 696c 6c20 6265 0d0a 2020 2020 2020 2020  ill be..        
+00021360: 6170 706c 6965 6420 746f 2074 6865 2072  applied to the r
+00021370: 6573 756c 742c 206e 6f74 2075 7365 6420  esult, not used 
+00021380: 746f 2063 6f6d 7075 7465 2074 6865 2076  to compute the v
+00021390: 6172 6961 6e63 6520 6173 2069 7420 6973  ariance as it is
+000213a0: 2069 6e0d 0a20 2020 2020 2020 2060 6e75   in..        `nu
+000213b0: 6d70 792e 6e61 6e73 7464 602e 0d0a 0d0a  mpy.nanstd`.....
+000213c0: 2020 2020 2020 2020 416c 736f 206e 6f74          Also not
+000213d0: 6520 7468 6174 2069 6620 796f 7520 7573  e that if you us
+000213e0: 6520 616e 7920 6f66 2074 6865 2066 6f6c  e any of the fol
+000213f0: 6c6f 7769 6e67 204e 756d 5079 2070 6172  lowing NumPy par
+00021400: 616d 6574 6572 7320 616e 6420 616c 736f  ameters and also
+00021410: 0d0a 2020 2020 2020 2020 696e 636c 7564  ..        includ
+00021420: 6520 6120 6066 696c 7465 7260 206b 6579  e a `filter` key
+00021430: 776f 7264 2061 7267 756d 656e 7420 2877  word argument (w
+00021440: 6869 6368 2060 6e75 6d70 792e 6e61 6e73  hich `numpy.nans
+00021450: 7464 6020 646f 6573 206e 6f74 2061 6363  td` does not acc
+00021460: 6570 7429 2c0d 0a20 2020 2020 2020 2052  ept),..        R
+00021470: 6970 7461 626c 6527 7320 696d 706c 656d  iptable's implem
+00021480: 656e 7461 7469 6f6e 206f 6620 606e 616e  entation of `nan
+00021490: 7374 6460 2077 696c 6c20 6265 2075 7365  std` will be use
+000214a0: 6420 7769 7468 2074 6865 2066 696c 7465  d with the filte
+000214b0: 7220 6172 6775 6d65 6e74 0d0a 2020 2020  r argument..    
+000214c0: 2020 2020 616e 6420 7468 6520 4e75 6d50      and the NumP
+000214d0: 7920 7061 7261 6d65 7465 7273 2077 696c  y parameters wil
+000214e0: 6c20 6265 2069 676e 6f72 6564 2e0d 0a0d  l be ignored....
+000214f0: 0a20 2020 2020 2020 2061 7869 7320 3a20  .        axis : 
+00021500: 7b69 6e74 2c20 7475 706c 6520 6f66 2069  {int, tuple of i
+00021510: 6e74 2c20 4e6f 6e65 7d2c 206f 7074 696f  nt, None}, optio
+00021520: 6e61 6c0d 0a20 2020 2020 2020 2020 2020  nal..           
+00021530: 2041 7869 7320 6f72 2061 7865 7320 616c   Axis or axes al
+00021540: 6f6e 6720 7768 6963 6820 7468 6520 7374  ong which the st
 00021550: 616e 6461 7264 2064 6576 6961 7469 6f6e  andard deviation
-00021560: 206f 6620 7468 6520 666c 6174 7465 6e65   of the flattene
-00021570: 6420 6172 7261 792e 0d0a 0d0a 2020 2020  d array.....    
-00021580: 2020 2020 6b65 6570 6469 6d73 203a 2062      keepdims : b
-00021590: 6f6f 6c2c 206f 7074 696f 6e61 6c0d 0a20  ool, optional.. 
-000215a0: 2020 2020 2020 2020 2020 2049 6620 7468             If th
-000215b0: 6973 2069 7320 7365 7420 746f 2054 7275  is is set to Tru
-000215c0: 652c 2074 6865 2061 7865 7320 7768 6963  e, the axes whic
-000215d0: 6820 6172 6520 7265 6475 6365 6420 6172  h are reduced ar
-000215e0: 6520 6c65 6674 2069 6e20 7468 6520 7265  e left in the re
-000215f0: 7375 6c74 2061 730d 0a20 2020 2020 2020  sult as..       
-00021600: 2020 2020 2064 696d 656e 7369 6f6e 7320       dimensions 
-00021610: 7769 7468 2073 697a 6520 6f6e 652e 2057  with size one. W
-00021620: 6974 6820 7468 6973 206f 7074 696f 6e2c  ith this option,
-00021630: 2074 6865 2072 6573 756c 7420 7769 6c6c   the result will
-00021640: 2062 726f 6164 6361 7374 0d0a 2020 2020   broadcast..    
-00021650: 2020 2020 2020 2020 636f 7272 6563 746c          correctl
-00021660: 7920 6167 6169 6e73 7420 7468 6520 6f72  y against the or
-00021670: 6967 696e 616c 2069 6e70 7574 2061 7272  iginal input arr
-00021680: 6179 2e0d 0a0d 0a20 2020 2020 2020 2020  ay.....         
-00021690: 2020 2049 6620 7468 6973 2076 616c 7565     If this value
-000216a0: 2069 7320 616e 7974 6869 6e67 2062 7574   is anything but
-000216b0: 2074 6865 2064 6566 6175 6c74 2069 7420   the default it 
-000216c0: 6973 2070 6173 7365 6420 7468 726f 7567  is passed throug
-000216d0: 6820 6173 2d69 7320 746f 2074 6865 0d0a  h as-is to the..
-000216e0: 2020 2020 2020 2020 2020 2020 7265 6c65              rele
-000216f0: 7661 6e74 2066 756e 6374 696f 6e73 206f  vant functions o
-00021700: 6620 7468 6520 7375 622d 636c 6173 7365  f the sub-classe
-00021710: 732e 2049 6620 7468 6573 6520 6675 6e63  s. If these func
-00021720: 7469 6f6e 7320 646f 206e 6f74 2068 6176  tions do not hav
-00021730: 6520 610d 0a20 2020 2020 2020 2020 2020  e a..           
-00021740: 2060 6b65 6570 6469 6d73 6020 6b77 6172   `keepdims` kwar
-00021750: 672c 2061 2052 756e 7469 6d65 4572 726f  g, a RuntimeErro
-00021760: 7220 7769 6c6c 2062 6520 7261 6973 6564  r will be raised
-00021770: 2e0d 0a0d 0a20 2020 2020 2020 2064 646f  .....        ddo
-00021780: 6620 3a20 696e 742c 206f 7074 696f 6e61  f : int, optiona
-00021790: 6c0d 0a20 2020 2020 2020 2020 2020 2022  l..            "
-000217a0: 4465 6c74 6120 4465 6772 6565 7320 6f66  Delta Degrees of
-000217b0: 2046 7265 6564 6f6d 223a 2074 6865 2064   Freedom": the d
-000217c0: 6976 6973 6f72 2075 7365 6420 696e 2074  ivisor used in t
-000217d0: 6865 2063 616c 6375 6c61 7469 6f6e 2069  he calculation i
-000217e0: 730d 0a20 2020 2020 2020 2020 2020 2060  s..            `
-000217f0: 604e 202d 2064 646f 6660 602c 2077 6865  `N - ddof``, whe
-00021800: 7265 2060 604e 6060 2072 6570 7265 7365  re ``N`` represe
-00021810: 6e74 7320 7468 6520 6e75 6d62 6572 206f  nts the number o
-00021820: 6620 656c 656d 656e 7473 2e20 4279 2064  f elements. By d
-00021830: 6566 6175 6c74 0d0a 2020 2020 2020 2020  efault..        
-00021840: 2020 2020 6064 646f 6660 2069 7320 7a65      `ddof` is ze
-00021850: 726f 2066 6f72 2074 6865 204e 756d 5079  ro for the NumPy
-00021860: 2069 6d70 6c65 6d65 6e74 6174 696f 6e2c   implementation,
-00021870: 2076 6572 7375 7320 6f6e 6520 666f 7220   versus one for 
-00021880: 7468 650d 0a20 2020 2020 2020 2020 2020  the..           
-00021890: 2052 6970 7461 626c 6520 696d 706c 656d   Riptable implem
-000218a0: 656e 7461 7469 6f6e 2e0d 0a0d 0a20 2020  entation.....   
-000218b0: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
-000218c0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-000218d0: 0a20 2020 2020 2020 203e 3e3e 2061 203d  .        >>> a =
-000218e0: 2072 742e 4661 7374 4172 7261 7928 5b31   rt.FastArray([1
-000218f0: 2c20 322c 2033 2c20 7274 2e6e 616e 5d29  , 2, 3, rt.nan])
-00021900: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-00021910: 6e61 6e73 7464 2829 0d0a 2020 2020 2020  nanstd()..      
-00021920: 2020 312e 300d 0a0d 0a20 2020 2020 2020    1.0....       
-00021930: 2057 6974 6820 6120 6064 7479 7065 6020   With a `dtype` 
-00021940: 7370 6563 6966 6965 643a 0d0a 0d0a 2020  specified:....  
-00021950: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
-00021960: 2e46 6173 7441 7272 6179 285b 312c 2032  .FastArray([1, 2
-00021970: 2c20 332c 2072 742e 6e61 6e5d 290d 0a20  , 3, rt.nan]).. 
-00021980: 2020 2020 2020 203e 3e3e 2061 2e6e 616e         >>> a.nan
-00021990: 7374 6428 6474 7970 6520 3d20 7274 2e69  std(dtype = rt.i
-000219a0: 6e74 3332 290d 0a20 2020 2020 2020 2031  nt32)..        1
-000219b0: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
-000219c0: 2066 696c 7465 723a 0d0a 0d0a 2020 2020   filter:....    
-000219d0: 2020 2020 3e3e 3e20 6120 3d20 7274 2e46      >>> a = rt.F
-000219e0: 6173 7441 7272 6179 285b 312c 2032 2c20  astArray([1, 2, 
-000219f0: 332c 2072 742e 6e61 6e5d 290d 0a20 2020  3, rt.nan])..   
-00021a00: 2020 2020 203e 3e3e 2062 203d 2072 742e       >>> b = rt.
-00021a10: 4661 7374 4172 7261 7928 5b46 616c 7365  FastArray([False
-00021a20: 2c20 5472 7565 2c20 5472 7565 2c20 5472  , True, True, Tr
-00021a30: 7565 5d29 0d0a 2020 2020 2020 2020 3e3e  ue])..        >>
-00021a40: 3e20 612e 6e61 6e73 7464 2866 696c 7465  > a.nanstd(filte
-00021a50: 7220 3d20 6229 0d0a 2020 2020 2020 2020  r = b)..        
-00021a60: 302e 3730 3731 3036 3738 3131 3836 3534  0.70710678118654
-00021a70: 3736 0d0a 2020 2020 2020 2020 2222 220d  76..        """.
-00021a80: 0a20 2020 2020 2020 206b 7761 7267 7320  .        kwargs 
-00021a90: 3d20 7365 6c66 2e5f 6661 5f6b 6579 776f  = self._fa_keywo
-00021aa0: 7264 5f77 7261 7070 6572 2866 696c 7465  rd_wrapper(filte
-00021ab0: 723d 6669 6c74 6572 2c20 6474 7970 653d  r=filter, dtype=
-00021ac0: 6474 7970 652c 2061 7869 733d 6178 6973  dtype, axis=axis
-00021ad0: 2c20 6b65 6570 6469 6d73 3d6b 6565 7064  , keepdims=keepd
-00021ae0: 696d 732c 2064 646f 663d 6464 6f66 2c20  ims, ddof=ddof, 
-00021af0: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
-00021b00: 2020 2020 2069 6620 6669 6c74 6572 2069       if filter i
-00021b10: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
-00021b20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00021b30: 7365 6c66 2e5f 6661 5f66 696c 7465 725f  self._fa_filter_
-00021b40: 7772 6170 7065 7228 5f66 6e61 6e73 7464  wrapper(_fnanstd
-00021b50: 2c20 6669 6c74 6572 3d66 696c 7465 722c  , filter=filter,
-00021b60: 2064 7479 7065 3d64 7479 7065 290d 0a0d   dtype=dtype)...
-00021b70: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00021b80: 7365 6c66 2e5f 7265 6475 6365 5f63 6865  self._reduce_che
-00021b90: 636b 2852 4544 5543 455f 4655 4e43 5449  ck(REDUCE_FUNCTI
-00021ba0: 4f4e 532e 5245 4455 4345 5f4e 414e 5354  ONS.REDUCE_NANST
-00021bb0: 442c 206e 702e 6e61 6e73 7464 2c20 2a2a  D, np.nanstd, **
-00021bc0: 6b77 6172 6773 290d 0a0d 0a20 2020 2023  kwargs)....    #
-00021bd0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
-00021be0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021bf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021c00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021c10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
-00021c20: 2020 6465 6620 6e61 6e6d 696e 2873 656c    def nanmin(sel
-00021c30: 662c 202a 2a6b 7761 7267 7329 202d 3e20  f, **kwargs) -> 
-00021c40: 6e70 2e6e 756d 6265 723a 0d0a 2020 2020  np.number:..    
-00021c50: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00021c60: 5f72 6564 7563 655f 6368 6563 6b28 5245  _reduce_check(RE
-00021c70: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
-00021c80: 4544 5543 455f 4e41 4e4d 494e 2c20 6e70  EDUCE_NANMIN, np
-00021c90: 2e6e 616e 6d69 6e2c 202a 2a6b 7761 7267  .nanmin, **kwarg
-00021ca0: 7329 0d0a 0d0a 2020 2020 6465 6620 6e61  s)....    def na
-00021cb0: 6e6d 6178 2873 656c 662c 202a 2a6b 7761  nmax(self, **kwa
-00021cc0: 7267 7329 202d 3e20 6e70 2e6e 756d 6265  rgs) -> np.numbe
-00021cd0: 723a 0d0a 2020 2020 2020 2020 7265 7475  r:..        retu
-00021ce0: 726e 2073 656c 662e 5f72 6564 7563 655f  rn self._reduce_
-00021cf0: 6368 6563 6b28 5245 4455 4345 5f46 554e  check(REDUCE_FUN
-00021d00: 4354 494f 4e53 2e52 4544 5543 455f 4e41  CTIONS.REDUCE_NA
-00021d10: 4e4d 4158 2c20 6e70 2e6e 616e 6d61 782c  NMAX, np.nanmax,
-00021d20: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
-00021d30: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
-00021d40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021d50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021d60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021d70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
-00021d80: 0a20 2020 2064 6566 2061 7267 6d69 6e28  .    def argmin(
-00021d90: 7365 6c66 2c20 2a2a 6b77 6172 6773 2920  self, **kwargs) 
-00021da0: 2d3e 2069 6e74 3a0d 0a20 2020 2020 2020  -> int:..       
-00021db0: 2072 6574 7572 6e20 7365 6c66 2e5f 7265   return self._re
-00021dc0: 6475 6365 5f63 6865 636b 2852 4544 5543  duce_check(REDUC
-00021dd0: 455f 4655 4e43 5449 4f4e 532e 5245 4455  E_FUNCTIONS.REDU
-00021de0: 4345 5f41 5247 4d49 4e2c 206e 702e 6172  CE_ARGMIN, np.ar
-00021df0: 676d 696e 2c20 2a2a 6b77 6172 6773 290d  gmin, **kwargs).
-00021e00: 0a0d 0a20 2020 2064 6566 2061 7267 6d61  ...    def argma
-00021e10: 7828 7365 6c66 2c20 2a2a 6b77 6172 6773  x(self, **kwargs
-00021e20: 2920 2d3e 2069 6e74 3a0d 0a20 2020 2020  ) -> int:..     
-00021e30: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-00021e40: 7265 6475 6365 5f63 6865 636b 2852 4544  reduce_check(RED
-00021e50: 5543 455f 4655 4e43 5449 4f4e 532e 5245  UCE_FUNCTIONS.RE
-00021e60: 4455 4345 5f41 5247 4d41 582c 206e 702e  DUCE_ARGMAX, np.
-00021e70: 6172 676d 6178 2c20 2a2a 6b77 6172 6773  argmax, **kwargs
-00021e80: 290d 0a0d 0a20 2020 2064 6566 206e 616e  )....    def nan
-00021e90: 6172 676d 696e 2873 656c 662c 202a 2a6b  argmin(self, **k
-00021ea0: 7761 7267 7329 202d 3e20 696e 743a 0d0a  wargs) -> int:..
-00021eb0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00021ec0: 656c 662e 5f72 6564 7563 655f 6368 6563  elf._reduce_chec
-00021ed0: 6b28 5245 4455 4345 5f46 554e 4354 494f  k(REDUCE_FUNCTIO
-00021ee0: 4e53 2e52 4544 5543 455f 4e41 4e41 5247  NS.REDUCE_NANARG
-00021ef0: 4d49 4e2c 206e 702e 6e61 6e61 7267 6d69  MIN, np.nanargmi
-00021f00: 6e2c 202a 2a6b 7761 7267 7329 0d0a 0d0a  n, **kwargs)....
-00021f10: 2020 2020 6465 6620 6e61 6e61 7267 6d61      def nanargma
-00021f20: 7828 7365 6c66 2c20 2a2a 6b77 6172 6773  x(self, **kwargs
-00021f30: 2920 2d3e 2069 6e74 3a0d 0a20 2020 2020  ) -> int:..     
-00021f40: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-00021f50: 7265 6475 6365 5f63 6865 636b 2852 4544  reduce_check(RED
-00021f60: 5543 455f 4655 4e43 5449 4f4e 532e 5245  UCE_FUNCTIONS.RE
-00021f70: 4455 4345 5f4e 414e 4152 474d 4158 2c20  DUCE_NANARGMAX, 
-00021f80: 6e70 2e6e 616e 6172 676d 6178 2c20 2a2a  np.nanargmax, **
-00021f90: 6b77 6172 6773 290d 0a0d 0a20 2020 2023  kwargs)....    #
-00021fa0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00021fb0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00021fc0: 2323 2323 2323 2323 2323 2323 0d0a 2020  ############..  
-00021fd0: 2020 2320 5374 6174 732f 4d4c 2073 6563    # Stats/ML sec
-00021fe0: 7469 6f6e 0d0a 2020 2020 2323 2323 2323  tion..    ######
+00021560: 2069 7320 636f 6d70 7574 6564 2e20 5468   is computed. Th
+00021570: 6520 6465 6661 756c 7420 6973 0d0a 2020  e default is..  
+00021580: 2020 2020 2020 2020 2020 746f 2063 6f6d            to com
+00021590: 7075 7465 2074 6865 2073 7461 6e64 6172  pute the standar
+000215a0: 6420 6465 7669 6174 696f 6e20 6f66 2074  d deviation of t
+000215b0: 6865 2066 6c61 7474 656e 6564 2061 7272  he flattened arr
+000215c0: 6179 2e0d 0a0d 0a20 2020 2020 2020 206b  ay.....        k
+000215d0: 6565 7064 696d 7320 3a20 626f 6f6c 2c20  eepdims : bool, 
+000215e0: 6f70 7469 6f6e 616c 0d0a 2020 2020 2020  optional..      
+000215f0: 2020 2020 2020 4966 2074 6869 7320 6973        If this is
+00021600: 2073 6574 2074 6f20 5472 7565 2c20 7468   set to True, th
+00021610: 6520 6178 6573 2077 6869 6368 2061 7265  e axes which are
+00021620: 2072 6564 7563 6564 2061 7265 206c 6566   reduced are lef
+00021630: 7420 696e 2074 6865 2072 6573 756c 7420  t in the result 
+00021640: 6173 0d0a 2020 2020 2020 2020 2020 2020  as..            
+00021650: 6469 6d65 6e73 696f 6e73 2077 6974 6820  dimensions with 
+00021660: 7369 7a65 206f 6e65 2e20 5769 7468 2074  size one. With t
+00021670: 6869 7320 6f70 7469 6f6e 2c20 7468 6520  his option, the 
+00021680: 7265 7375 6c74 2077 696c 6c20 6272 6f61  result will broa
+00021690: 6463 6173 740d 0a20 2020 2020 2020 2020  dcast..         
+000216a0: 2020 2063 6f72 7265 6374 6c79 2061 6761     correctly aga
+000216b0: 696e 7374 2074 6865 206f 7269 6769 6e61  inst the origina
+000216c0: 6c20 696e 7075 7420 6172 7261 792e 0d0a  l input array...
+000216d0: 0d0a 2020 2020 2020 2020 2020 2020 4966  ..            If
+000216e0: 2074 6869 7320 7661 6c75 6520 6973 2061   this value is a
+000216f0: 6e79 7468 696e 6720 6275 7420 7468 6520  nything but the 
+00021700: 6465 6661 756c 7420 6974 2069 7320 7061  default it is pa
+00021710: 7373 6564 2074 6872 6f75 6768 2061 732d  ssed through as-
+00021720: 6973 2074 6f20 7468 650d 0a20 2020 2020  is to the..     
+00021730: 2020 2020 2020 2072 656c 6576 616e 7420         relevant 
+00021740: 6675 6e63 7469 6f6e 7320 6f66 2074 6865  functions of the
+00021750: 2073 7562 2d63 6c61 7373 6573 2e20 4966   sub-classes. If
+00021760: 2074 6865 7365 2066 756e 6374 696f 6e73   these functions
+00021770: 2064 6f20 6e6f 7420 6861 7665 2061 0d0a   do not have a..
+00021780: 2020 2020 2020 2020 2020 2020 606b 6565              `kee
+00021790: 7064 696d 7360 206b 7761 7267 2c20 6120  pdims` kwarg, a 
+000217a0: 5275 6e74 696d 6545 7272 6f72 2077 696c  RuntimeError wil
+000217b0: 6c20 6265 2072 6169 7365 642e 0d0a 0d0a  l be raised.....
+000217c0: 2020 2020 2020 2020 6464 6f66 203a 2069          ddof : i
+000217d0: 6e74 2c20 6f70 7469 6f6e 616c 0d0a 2020  nt, optional..  
+000217e0: 2020 2020 2020 2020 2020 2244 656c 7461            "Delta
+000217f0: 2044 6567 7265 6573 206f 6620 4672 6565   Degrees of Free
+00021800: 646f 6d22 3a20 7468 6520 6469 7669 736f  dom": the diviso
+00021810: 7220 7573 6564 2069 6e20 7468 6520 6361  r used in the ca
+00021820: 6c63 756c 6174 696f 6e20 6973 0d0a 2020  lculation is..  
+00021830: 2020 2020 2020 2020 2020 6060 4e20 2d20            ``N - 
+00021840: 6464 6f66 6060 2c20 7768 6572 6520 6060  ddof``, where ``
+00021850: 4e60 6020 7265 7072 6573 656e 7473 2074  N`` represents t
+00021860: 6865 206e 756d 6265 7220 6f66 2065 6c65  he number of ele
+00021870: 6d65 6e74 732e 2042 7920 6465 6661 756c  ments. By defaul
+00021880: 740d 0a20 2020 2020 2020 2020 2020 2060  t..            `
+00021890: 6464 6f66 6020 6973 207a 6572 6f20 666f  ddof` is zero fo
+000218a0: 7220 7468 6520 4e75 6d50 7920 696d 706c  r the NumPy impl
+000218b0: 656d 656e 7461 7469 6f6e 2c20 7665 7273  ementation, vers
+000218c0: 7573 206f 6e65 2066 6f72 2074 6865 0d0a  us one for the..
+000218d0: 2020 2020 2020 2020 2020 2020 5269 7074              Ript
+000218e0: 6162 6c65 2069 6d70 6c65 6d65 6e74 6174  able implementat
+000218f0: 696f 6e2e 0d0a 0d0a 2020 2020 2020 2020  ion.....        
+00021900: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
+00021910: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+00021920: 2020 2020 3e3e 3e20 6120 3d20 7274 2e46      >>> a = rt.F
+00021930: 6173 7441 7272 6179 285b 312c 2032 2c20  astArray([1, 2, 
+00021940: 332c 2072 742e 6e61 6e5d 290d 0a20 2020  3, rt.nan])..   
+00021950: 2020 2020 203e 3e3e 2061 2e6e 616e 7374       >>> a.nanst
+00021960: 6428 290d 0a20 2020 2020 2020 2031 2e30  d()..        1.0
+00021970: 0d0a 0d0a 2020 2020 2020 2020 5769 7468  ....        With
+00021980: 2061 2060 6474 7970 6560 2073 7065 6369   a `dtype` speci
+00021990: 6669 6564 3a0d 0a0d 0a20 2020 2020 2020  fied:....       
+000219a0: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
+000219b0: 4172 7261 7928 5b31 2c20 322c 2033 2c20  Array([1, 2, 3, 
+000219c0: 7274 2e6e 616e 5d29 0d0a 2020 2020 2020  rt.nan])..      
+000219d0: 2020 3e3e 3e20 612e 6e61 6e73 7464 2864    >>> a.nanstd(d
+000219e0: 7479 7065 203d 2072 742e 696e 7433 3229  type = rt.int32)
+000219f0: 0d0a 2020 2020 2020 2020 310d 0a0d 0a20  ..        1.... 
+00021a00: 2020 2020 2020 2057 6974 6820 6669 6c74         With filt
+00021a10: 6572 3a0d 0a0d 0a20 2020 2020 2020 203e  er:....        >
+00021a20: 3e3e 2061 203d 2072 742e 4661 7374 4172  >> a = rt.FastAr
+00021a30: 7261 7928 5b31 2c20 322c 2033 2c20 7274  ray([1, 2, 3, rt
+00021a40: 2e6e 616e 5d29 0d0a 2020 2020 2020 2020  .nan])..        
+00021a50: 3e3e 3e20 6220 3d20 7274 2e46 6173 7441  >>> b = rt.FastA
+00021a60: 7272 6179 285b 4661 6c73 652c 2054 7275  rray([False, Tru
+00021a70: 652c 2054 7275 652c 2054 7275 655d 290d  e, True, True]).
+00021a80: 0a20 2020 2020 2020 203e 3e3e 2061 2e6e  .        >>> a.n
+00021a90: 616e 7374 6428 6669 6c74 6572 203d 2062  anstd(filter = b
+00021aa0: 290d 0a20 2020 2020 2020 2030 2e37 3037  )..        0.707
+00021ab0: 3130 3637 3831 3138 3635 3437 360d 0a20  1067811865476.. 
+00021ac0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00021ad0: 2020 2020 6b77 6172 6773 203d 2073 656c      kwargs = sel
+00021ae0: 662e 5f66 615f 6b65 7977 6f72 645f 7772  f._fa_keyword_wr
+00021af0: 6170 7065 7228 6669 6c74 6572 3d66 696c  apper(filter=fil
+00021b00: 7465 722c 2064 7479 7065 3d64 7479 7065  ter, dtype=dtype
+00021b10: 2c20 6178 6973 3d61 7869 732c 206b 6565  , axis=axis, kee
+00021b20: 7064 696d 733d 6b65 6570 6469 6d73 2c20  pdims=keepdims, 
+00021b30: 6464 6f66 3d64 646f 662c 202a 2a6b 7761  ddof=ddof, **kwa
+00021b40: 7267 7329 0d0a 0d0a 2020 2020 2020 2020  rgs)....        
+00021b50: 6966 2066 696c 7465 7220 6973 206e 6f74  if filter is not
+00021b60: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00021b70: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00021b80: 5f66 615f 6669 6c74 6572 5f77 7261 7070  _fa_filter_wrapp
+00021b90: 6572 285f 666e 616e 7374 642c 2066 696c  er(_fnanstd, fil
+00021ba0: 7465 723d 6669 6c74 6572 2c20 6474 7970  ter=filter, dtyp
+00021bb0: 653d 6474 7970 6529 0d0a 0d0a 2020 2020  e=dtype)....    
+00021bc0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00021bd0: 5f72 6564 7563 655f 6368 6563 6b28 5245  _reduce_check(RE
+00021be0: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
+00021bf0: 4544 5543 455f 4e41 4e53 5444 2c20 6e70  EDUCE_NANSTD, np
+00021c00: 2e6e 616e 7374 642c 202a 2a6b 7761 7267  .nanstd, **kwarg
+00021c10: 7329 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  s)....    # ----
+00021c20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00021c30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00021c40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00021c50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00021c60: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
+00021c70: 206e 616e 6d69 6e28 7365 6c66 2c20 2a2a   nanmin(self, **
+00021c80: 6b77 6172 6773 2920 2d3e 206e 702e 6e75  kwargs) -> np.nu
+00021c90: 6d62 6572 3a0d 0a20 2020 2020 2020 2072  mber:..        r
+00021ca0: 6574 7572 6e20 7365 6c66 2e5f 7265 6475  eturn self._redu
+00021cb0: 6365 5f63 6865 636b 2852 4544 5543 455f  ce_check(REDUCE_
+00021cc0: 4655 4e43 5449 4f4e 532e 5245 4455 4345  FUNCTIONS.REDUCE
+00021cd0: 5f4e 414e 4d49 4e2c 206e 702e 6e61 6e6d  _NANMIN, np.nanm
+00021ce0: 696e 2c20 2a2a 6b77 6172 6773 290d 0a0d  in, **kwargs)...
+00021cf0: 0a20 2020 2064 6566 206e 616e 6d61 7828  .    def nanmax(
+00021d00: 7365 6c66 2c20 2a2a 6b77 6172 6773 2920  self, **kwargs) 
+00021d10: 2d3e 206e 702e 6e75 6d62 6572 3a0d 0a20  -> np.number:.. 
+00021d20: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00021d30: 6c66 2e5f 7265 6475 6365 5f63 6865 636b  lf._reduce_check
+00021d40: 2852 4544 5543 455f 4655 4e43 5449 4f4e  (REDUCE_FUNCTION
+00021d50: 532e 5245 4455 4345 5f4e 414e 4d41 582c  S.REDUCE_NANMAX,
+00021d60: 206e 702e 6e61 6e6d 6178 2c20 2a2a 6b77   np.nanmax, **kw
+00021d70: 6172 6773 290d 0a0d 0a20 2020 2023 202d  args)....    # -
+00021d80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00021d90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00021da0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00021db0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00021dc0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+00021dd0: 6465 6620 6172 676d 696e 2873 656c 662c  def argmin(self,
+00021de0: 202a 2a6b 7761 7267 7329 202d 3e20 696e   **kwargs) -> in
+00021df0: 743a 0d0a 2020 2020 2020 2020 7265 7475  t:..        retu
+00021e00: 726e 2073 656c 662e 5f72 6564 7563 655f  rn self._reduce_
+00021e10: 6368 6563 6b28 5245 4455 4345 5f46 554e  check(REDUCE_FUN
+00021e20: 4354 494f 4e53 2e52 4544 5543 455f 4152  CTIONS.REDUCE_AR
+00021e30: 474d 494e 2c20 6e70 2e61 7267 6d69 6e2c  GMIN, np.argmin,
+00021e40: 202a 2a6b 7761 7267 7329 0d0a 0d0a 2020   **kwargs)....  
+00021e50: 2020 6465 6620 6172 676d 6178 2873 656c    def argmax(sel
+00021e60: 662c 202a 2a6b 7761 7267 7329 202d 3e20  f, **kwargs) -> 
+00021e70: 696e 743a 0d0a 2020 2020 2020 2020 7265  int:..        re
+00021e80: 7475 726e 2073 656c 662e 5f72 6564 7563  turn self._reduc
+00021e90: 655f 6368 6563 6b28 5245 4455 4345 5f46  e_check(REDUCE_F
+00021ea0: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
+00021eb0: 4152 474d 4158 2c20 6e70 2e61 7267 6d61  ARGMAX, np.argma
+00021ec0: 782c 202a 2a6b 7761 7267 7329 0d0a 0d0a  x, **kwargs)....
+00021ed0: 2020 2020 6465 6620 6e61 6e61 7267 6d69      def nanargmi
+00021ee0: 6e28 7365 6c66 2c20 2a2a 6b77 6172 6773  n(self, **kwargs
+00021ef0: 2920 2d3e 2069 6e74 3a0d 0a20 2020 2020  ) -> int:..     
+00021f00: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+00021f10: 7265 6475 6365 5f63 6865 636b 2852 4544  reduce_check(RED
+00021f20: 5543 455f 4655 4e43 5449 4f4e 532e 5245  UCE_FUNCTIONS.RE
+00021f30: 4455 4345 5f4e 414e 4152 474d 494e 2c20  DUCE_NANARGMIN, 
+00021f40: 6e70 2e6e 616e 6172 676d 696e 2c20 2a2a  np.nanargmin, **
+00021f50: 6b77 6172 6773 290d 0a0d 0a20 2020 2064  kwargs)....    d
+00021f60: 6566 206e 616e 6172 676d 6178 2873 656c  ef nanargmax(sel
+00021f70: 662c 202a 2a6b 7761 7267 7329 202d 3e20  f, **kwargs) -> 
+00021f80: 696e 743a 0d0a 2020 2020 2020 2020 7265  int:..        re
+00021f90: 7475 726e 2073 656c 662e 5f72 6564 7563  turn self._reduc
+00021fa0: 655f 6368 6563 6b28 5245 4455 4345 5f46  e_check(REDUCE_F
+00021fb0: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
+00021fc0: 4e41 4e41 5247 4d41 582c 206e 702e 6e61  NANARGMAX, np.na
+00021fd0: 6e61 7267 6d61 782c 202a 2a6b 7761 7267  nargmax, **kwarg
+00021fe0: 7329 0d0a 0d0a 2020 2020 2323 2323 2323  s)....    ######
 00021ff0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
 00022000: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00022010: 2323 2323 2323 230d 0a20 2020 2064 6566  #######..    def
-00022020: 206e 6f72 6d61 6c69 7a65 5f7a 7363 6f72   normalize_zscor
-00022030: 6528 7365 6c66 2920 2d3e 2046 6173 7441  e(self) -> FastA
-00022040: 7272 6179 3a0d 0a20 2020 2020 2020 2072  rray:..        r
-00022050: 6574 7572 6e20 6e6f 726d 616c 697a 655f  eturn normalize_
-00022060: 7a73 636f 7265 2873 656c 6629 0d0a 0d0a  zscore(self)....
-00022070: 2020 2020 6465 6620 6e6f 726d 616c 697a      def normaliz
-00022080: 655f 6d69 6e6d 6178 2873 656c 6629 202d  e_minmax(self) -
-00022090: 3e20 4661 7374 4172 7261 793a 0d0a 2020  > FastArray:..  
-000220a0: 2020 2020 2020 7265 7475 726e 206e 6f72        return nor
-000220b0: 6d61 6c69 7a65 5f6d 696e 6d61 7828 7365  malize_minmax(se
-000220c0: 6c66 290d 0a0d 0a20 2020 2023 2323 2323  lf)....    #####
-000220d0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000220e0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000220f0: 2323 2323 2323 2323 0d0a 2020 2020 2320  ########..    # 
-00022100: 4261 7369 634d 6174 6820 7365 6374 696f  BasicMath sectio
-00022110: 6e20 2874 6f20 6265 2068 6f6f 6b65 6420  n (to be hooked 
-00022120: 6174 2043 206c 6576 656c 206e 6f77 290d  at C level now).
-00022130: 0a20 2020 2023 2323 2323 2323 2323 2323  .    ###########
-00022140: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00022150: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00022160: 2323 0d0a 2020 2020 2320 6465 6620 5f5f  ##..    # def __
-00022170: 6164 645f 5f28 7365 6c66 2c20 7661 6c75  add__(self, valu
-00022180: 6529 3a20 2020 7265 7375 6c74 3d72 632e  e):   result=rc.
-00022190: 4261 7369 634d 6174 6854 776f 496e 7075  BasicMathTwoInpu
-000221a0: 7473 2828 7365 6c66 2c20 7661 6c75 6529  ts((self, value)
-000221b0: 2c20 312c 2030 293b 2072 6573 756c 743d  , 1, 0); result=
-000221c0: 2072 6573 756c 7420 6966 2072 6573 756c   result if resul
-000221d0: 7420 6973 206e 6f74 204e 6f6e 6520 656c  t is not None el
-000221e0: 7365 206e 702e 6164 6428 7365 6c66 2c76  se np.add(self,v
-000221f0: 616c 7565 293b 2072 6574 7572 6e20 7265  alue); return re
-00022200: 7375 6c74 0d0a 2020 2020 2320 6465 6620  sult..    # def 
-00022210: 5f5f 6164 645f 5f28 7365 6c66 2c20 7661  __add__(self, va
-00022220: 6c75 6529 3a20 2020 7265 7475 726e 2072  lue):   return r
-00022230: 632e 4261 7369 634d 6174 6854 776f 496e  c.BasicMathTwoIn
-00022240: 7075 7473 2828 7365 6c66 2c20 7661 6c75  puts((self, valu
-00022250: 6529 2c20 312c 2030 290d 0a0d 0a20 2020  e), 1, 0)....   
-00022260: 2040 7072 6f70 6572 7479 0d0a 2020 2020   @property..    
-00022270: 405f 7573 655f 6175 746f 636f 6d70 6c65  @_use_autocomple
-00022280: 7465 5f70 6c61 6365 686f 6c64 6572 2830  te_placeholder(0
-00022290: 290d 0a20 2020 2064 6566 2063 7263 2873  )..    def crc(s
-000222a0: 656c 6629 202d 3e20 696e 743a 0d0a 2020  elf) -> int:..  
-000222b0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-000222c0: 2020 2043 616c 6375 6c61 7465 2074 6865     Calculate the
-000222d0: 2033 322d 6269 7420 4352 4320 6f66 2074   32-bit CRC of t
-000222e0: 6865 2064 6174 6120 696e 2074 6869 7320  he data in this 
-000222f0: 6172 7261 7920 7573 696e 6720 7468 6520  array using the 
-00022300: 4361 7374 6167 6e6f 6c69 2070 6f6c 796e  Castagnoli polyn
-00022310: 6f6d 6961 6c20 2843 5243 3332 4329 2e0d  omial (CRC32C)..
-00022320: 0a0d 0a20 2020 2020 2020 2054 6869 7320  ...        This 
-00022330: 6675 6e63 7469 6f6e 2064 6f65 7320 6e6f  function does no
-00022340: 7420 636f 6e73 6964 6572 2074 6865 2061  t consider the a
-00022350: 7272 6179 2773 2073 6861 7065 206f 7220  rray's shape or 
-00022360: 7374 7269 6465 7320 7768 656e 2063 616c  strides when cal
-00022370: 6375 6c61 7469 6e67 2074 6865 2043 5243  culating the CRC
-00022380: 2c0d 0a20 2020 2020 2020 2069 7420 7369  ,..        it si
-00022390: 6d70 6c79 2063 616c 6375 6c61 7465 7320  mply calculates 
-000223a0: 7468 6520 4352 4320 7661 6c75 6520 6f76  the CRC value ov
-000223b0: 6572 2074 6865 2065 6e74 6972 6520 6275  er the entire bu
-000223c0: 6666 6572 2064 6573 6372 6962 6564 2062  ffer described b
-000223d0: 7920 7468 6520 6172 7261 792e 0d0a 0d0a  y the array.....
-000223e0: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
-000223f0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-00022400: 2d2d 0d0a 2020 2020 2020 2020 6361 6e20  --..        can 
-00022410: 6265 2075 7365 6420 746f 2063 6f6d 7061  be used to compa
-00022420: 7265 2074 776f 2061 7272 6179 7320 666f  re two arrays fo
-00022430: 7220 7374 7275 6374 7572 616c 2065 7175  r structural equ
-00022440: 616c 6974 790d 0a20 2020 2020 2020 203e  ality..        >
-00022450: 3e3e 2061 203d 2061 7261 6e67 6528 3130  >> a = arange(10
-00022460: 3029 0d0a 2020 2020 2020 2020 3e3e 3e20  0)..        >>> 
-00022470: 6220 3d20 6172 616e 6765 2831 3030 2e30  b = arange(100.0
-00022480: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
-00022490: 2e63 7263 203d 3d20 622e 6372 630d 0a20  .crc == b.crc.. 
-000224a0: 2020 2020 2020 2046 616c 7365 0d0a 2020         False..  
-000224b0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-000224c0: 2020 2072 6574 7572 6e20 6372 6333 3263     return crc32c
-000224d0: 2873 656c 6629 0d0a 0d0a 2020 2020 2320  (self)....    # 
-000224e0: 746f 646f 3a20 7261 6e67 652f 6e61 6e72  todo: range/nanr
-000224f0: 616e 6765 0d0a 2020 2020 2320 746f 646f  ange..    # todo
-00022500: 3a20 7374 6174 732f 6e61 6e73 7461 7473  : stats/nanstats
-00022510: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
-00022520: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00022530: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00022540: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00022550: 2d0d 0a20 2020 2064 6566 2075 6e69 7175  -..    def uniqu
-00022560: 6528 0d0a 2020 2020 2020 2020 7365 6c66  e(..        self
-00022570: 2c0d 0a20 2020 2020 2020 2072 6574 7572  ,..        retur
-00022580: 6e5f 696e 6465 783a 2062 6f6f 6c20 3d20  n_index: bool = 
-00022590: 4661 6c73 652c 0d0a 2020 2020 2020 2020  False,..        
-000225a0: 7265 7475 726e 5f69 6e76 6572 7365 3a20  return_inverse: 
-000225b0: 626f 6f6c 203d 2046 616c 7365 2c0d 0a20  bool = False,.. 
-000225c0: 2020 2020 2020 2072 6574 7572 6e5f 636f         return_co
-000225d0: 756e 7473 3a20 626f 6f6c 203d 2046 616c  unts: bool = Fal
-000225e0: 7365 2c0d 0a20 2020 2020 2020 2073 6f72  se,..        sor
-000225f0: 7465 643a 2062 6f6f 6c20 3d20 5472 7565  ted: bool = True
-00022600: 2c0d 0a20 2020 2020 2020 206c 6578 3a20  ,..        lex: 
-00022610: 626f 6f6c 203d 2046 616c 7365 2c0d 0a20  bool = False,.. 
-00022620: 2020 2020 2020 2064 7479 7065 3a20 4f70         dtype: Op
-00022630: 7469 6f6e 616c 5b55 6e69 6f6e 5b73 7472  tional[Union[str
-00022640: 2c20 6e70 2e64 7479 7065 5d5d 203d 204e  , np.dtype]] = N
-00022650: 6f6e 652c 0d0a 2020 2020 2020 2020 6669  one,..        fi
-00022660: 6c74 6572 3a20 4f70 7469 6f6e 616c 5b6e  lter: Optional[n
-00022670: 702e 6e64 6172 7261 795d 203d 204e 6f6e  p.ndarray] = Non
-00022680: 652c 0d0a 2020 2020 2020 2020 2a2a 6b77  e,..        **kw
-00022690: 6172 6773 2c0d 0a20 2020 2029 202d 3e20  args,..    ) -> 
-000226a0: 556e 696f 6e5b 2246 6173 7441 7272 6179  Union["FastArray
-000226b0: 222c 2054 7570 6c65 5b22 4661 7374 4172  ", Tuple["FastAr
-000226c0: 7261 7922 2c20 2e2e 2e5d 2c20 4c69 7374  ray", ...], List
-000226d0: 5b22 4661 7374 4172 7261 7922 5d2c 2074  ["FastArray"], t
-000226e0: 7570 6c65 5d3a 0d0a 2020 2020 2020 2020  uple]:..        
-000226f0: 2222 220d 0a20 2020 2020 2020 2046 696e  """..        Fin
-00022700: 6420 7468 6520 756e 6971 7565 2065 6c65  d the unique ele
-00022710: 6d65 6e74 7320 6f66 2061 6e20 6172 7261  ments of an arra
-00022720: 7920 6f72 2074 6865 2075 6e69 7175 6520  y or the unique 
-00022730: 636f 6d62 696e 6174 696f 6e73 206f 6620  combinations of 
-00022740: 656c 656d 656e 7473 2077 6974 680d 0a20  elements with.. 
-00022750: 2020 2020 2020 2063 6f72 7265 7370 6f6e         correspon
-00022760: 6469 6e67 2069 6e64 6963 6573 2069 6e20  ding indices in 
-00022770: 6d75 6c74 6970 6c65 2061 7272 6179 732e  multiple arrays.
-00022780: 0d0a 0d0a 2020 2020 2020 2020 5365 6520  ....        See 
-00022790: 3a6d 6574 683a 6072 6970 7461 626c 652e  :meth:`riptable.
-000227a0: 756e 6971 7565 6020 666f 7220 6675 6c6c  unique` for full
-000227b0: 2064 6f63 756d 656e 7461 7469 6f6e 2e0d   documentation..
-000227c0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-000227d0: 2020 2020 2020 7265 7475 726e 2075 6e69        return uni
-000227e0: 7175 6528 0d0a 2020 2020 2020 2020 2020  que(..          
-000227f0: 2020 7365 6c66 2c0d 0a20 2020 2020 2020    self,..       
-00022800: 2020 2020 2072 6574 7572 6e5f 696e 6465       return_inde
-00022810: 783d 7265 7475 726e 5f69 6e64 6578 2c0d  x=return_index,.
-00022820: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00022830: 7572 6e5f 696e 7665 7273 653d 7265 7475  urn_inverse=retu
-00022840: 726e 5f69 6e76 6572 7365 2c0d 0a20 2020  rn_inverse,..   
-00022850: 2020 2020 2020 2020 2072 6574 7572 6e5f           return_
-00022860: 636f 756e 7473 3d72 6574 7572 6e5f 636f  counts=return_co
-00022870: 756e 7473 2c0d 0a20 2020 2020 2020 2020  unts,..         
-00022880: 2020 2073 6f72 7465 643d 736f 7274 6564     sorted=sorted
-00022890: 2c0d 0a20 2020 2020 2020 2020 2020 206c  ,..            l
-000228a0: 6578 3d6c 6578 2c0d 0a20 2020 2020 2020  ex=lex,..       
-000228b0: 2020 2020 2064 7479 7065 3d64 7479 7065       dtype=dtype
-000228c0: 2c0d 0a20 2020 2020 2020 2020 2020 2066  ,..            f
-000228d0: 696c 7465 723d 6669 6c74 6572 2c0d 0a20  ilter=filter,.. 
-000228e0: 2020 2020 2020 2020 2020 202a 2a6b 7761             **kwa
-000228f0: 7267 732c 0d0a 2020 2020 2020 2020 290d  rgs,..        ).
-00022900: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
-00022910: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00022920: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00022930: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00022940: 0d0a 2020 2020 6465 6620 6e75 6e69 7175  ..    def nuniqu
-00022950: 6528 7365 6c66 2920 2d3e 2069 6e74 3a0d  e(self) -> int:.
-00022960: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00022970: 2020 2020 2020 5265 7475 726e 2074 6865        Return the
-00022980: 206e 756d 6265 7220 6f66 2075 6e69 7175   number of uniqu
-00022990: 6520 7661 6c75 6573 2069 6e20 7468 6520  e values in the 
-000229a0: 696e 7075 7420 6046 6173 7441 7272 6179  input `FastArray
-000229b0: 602e 2044 6f65 7320 6e6f 7420 696e 636c  `. Does not incl
-000229c0: 7564 6520 4e61 4e20 6f72 2073 656e 7469  ude NaN or senti
-000229d0: 6e65 6c20 7661 6c75 6573 2e0d 0a0d 0a20  nel values..... 
-000229e0: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
-000229f0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
-00022a00: 0a20 2020 2020 2020 2069 6e74 0d0a 2020  .        int..  
-00022a10: 2020 2020 2020 2020 2020 4e75 6d62 6572            Number
-00022a20: 206f 6620 756e 6971 7565 2076 616c 7565   of unique value
-00022a30: 7320 696e 2074 6865 2069 6e70 7574 2060  s in the input `
-00022a40: 4661 7374 4172 7261 7960 2e20 446f 6573  FastArray`. Does
-00022a50: 206e 6f74 2069 6e63 6c75 6465 204e 614e   not include NaN
-00022a60: 206f 7220 7365 6e74 696e 656c 2076 616c   or sentinel val
-00022a70: 7565 732e 0d0a 0d0a 2020 2020 2020 2020  ues.....        
-00022a80: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
-00022a90: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-00022aa0: 2020 2020 4661 7374 4172 7261 792e 6475      FastArray.du
-00022ab0: 706c 6963 6174 6564 203a 2052 6574 7572  plicated : Retur
-00022ac0: 6e73 2061 2062 6f6f 6c65 616e 2060 4661  ns a boolean `Fa
-00022ad0: 7374 4172 7261 7960 2069 6e64 6963 6174  stArray` indicat
-00022ae0: 696e 6720 6475 706c 6963 6174 6520 7661  ing duplicate va
-00022af0: 6c75 6573 2e0d 0a20 2020 2020 2020 202e  lues...        .
-00022b00: 4361 7465 676f 7269 6361 6c2e 6e75 6e69  Categorical.nuni
-00022b10: 7175 6520 3a20 5265 7475 726e 7320 7468  que : Returns th
-00022b20: 6520 6e75 6d62 6572 206f 6620 756e 6971  e number of uniq
-00022b30: 7565 2076 616c 7565 7320 7468 6174 206f  ue values that o
-00022b40: 6363 7572 2069 6e20 7468 6520 602e 4361  ccur in the `.Ca
-00022b50: 7465 676f 7269 6361 6c60 2e0d 0a0d 0a20  tegorical`..... 
-00022b60: 2020 2020 2020 2045 7861 6d70 6c65 730d         Examples.
-00022b70: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00022b80: 2d0d 0a20 2020 2020 2020 2052 6574 7269  -..        Retri
-00022b90: 6576 6520 7468 6520 6e75 6d62 6572 206f  eve the number o
-00022ba0: 6620 756e 6971 7565 2076 616c 7565 7320  f unique values 
-00022bb0: 696e 2061 2066 6c6f 6174 696e 6720 706f  in a floating po
-00022bc0: 696e 7420 6046 6173 7441 7272 6179 603a  int `FastArray`:
-00022bd0: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
-00022be0: 6120 3d20 7274 2e46 6173 7441 7272 6179  a = rt.FastArray
-00022bf0: 285b 312e 2c20 322e 2c20 332e 2c20 312e  ([1., 2., 3., 1.
-00022c00: 2c20 322e 2c20 332e 5d29 0d0a 2020 2020  , 2., 3.])..    
-00022c10: 2020 2020 3e3e 3e20 610d 0a20 2020 2020      >>> a..     
-00022c20: 2020 2046 6173 7441 7272 6179 285b 312e     FastArray([1.
-00022c30: 2c20 322e 2c20 332e 2c20 312e 2c20 322e  , 2., 3., 1., 2.
-00022c40: 2c20 332e 5d29 0d0a 2020 2020 2020 2020  , 3.])..        
-00022c50: 3e3e 3e20 612e 6e75 6e69 7175 6528 290d  >>> a.nunique().
-00022c60: 0a20 2020 2020 2020 2033 0d0a 0d0a 2020  .        3....  
-00022c70: 2020 2020 2020 5265 7472 6965 7665 2074        Retrieve t
-00022c80: 6865 206e 756d 6265 7220 6f66 2075 6e69  he number of uni
-00022c90: 7175 6520 7661 6c75 6573 2069 6e20 6120  que values in a 
-00022ca0: 666c 6f61 7469 6e67 2070 6f69 6e74 2060  floating point `
-00022cb0: 4661 7374 4172 7261 7960 2077 6974 6820  FastArray` with 
-00022cc0: 6120 4e61 4e20 7661 6c75 653a 0d0a 0d0a  a NaN value:....
-00022cd0: 2020 2020 2020 2020 3e3e 3e20 6132 203d          >>> a2 =
-00022ce0: 2072 742e 4661 7374 4172 7261 7928 5b31   rt.FastArray([1
-00022cf0: 2e2c 2032 2e2c 2033 2e2c 2031 2e2c 2032  ., 2., 3., 1., 2
-00022d00: 2e2c 2033 2e2c 2072 742e 6e61 6e5d 290d  ., 3., rt.nan]).
-00022d10: 0a20 2020 2020 2020 203e 3e3e 2061 320d  .        >>> a2.
-00022d20: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-00022d30: 6179 285b 2031 2e2c 2020 322e 2c20 2033  ay([ 1.,  2.,  3
-00022d40: 2e2c 2020 312e 2c20 2032 2e2c 2020 332e  .,  1.,  2.,  3.
-00022d50: 2c20 6e61 6e5d 290d 0a20 2020 2020 2020  , nan])..       
-00022d60: 203e 3e3e 2061 322e 6e75 6e69 7175 6528   >>> a2.nunique(
-00022d70: 2920 2023 2054 6865 204e 614e 2076 616c  )  # The NaN val
-00022d80: 7565 2069 7320 6e6f 7420 696e 636c 7564  ue is not includ
-00022d90: 6564 2e0d 0a20 2020 2020 2020 2033 0d0a  ed...        3..
-00022da0: 0d0a 2020 2020 2020 2020 5265 7472 6965  ..        Retrie
-00022db0: 7665 2074 6865 206e 756d 6265 7220 6f66  ve the number of
-00022dc0: 2075 6e69 7175 6520 7661 6c75 6573 2069   unique values i
-00022dd0: 6e20 616e 2075 6e73 6967 6e65 6420 696e  n an unsigned in
-00022de0: 7465 6765 7220 6046 6173 7441 7272 6179  teger `FastArray
-00022df0: 6020 7769 7468 2061 2073 656e 7469 6e65  ` with a sentine
-00022e00: 6c20 7661 6c75 653a 0d0a 0d0a 2020 2020  l value:....    
-00022e10: 2020 2020 3e3e 3e20 6133 203d 2072 742e      >>> a3 = rt.
-00022e20: 4661 7374 4172 7261 7928 5b32 3535 2c20  FastArray([255, 
-00022e30: 322c 2033 2c20 322c 2033 5d2c 2064 7479  2, 3, 2, 3], dty
-00022e40: 7065 3d22 7569 6e74 3822 290d 0a20 2020  pe="uint8")..   
-00022e50: 2020 2020 203e 3e3e 2061 330d 0a20 2020       >>> a3..   
-00022e60: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
-00022e70: 3235 352c 2020 2032 2c20 2020 332c 2020  255,   2,   3,  
-00022e80: 2032 2c20 2020 335d 2c20 6474 7970 653d   2,   3], dtype=
-00022e90: 7569 6e74 3829 0d0a 2020 2020 2020 2020  uint8)..        
-00022ea0: 3e3e 3e20 6133 2e6e 756e 6971 7565 2829  >>> a3.nunique()
-00022eb0: 2020 2320 5468 6520 7365 6e74 696e 656c    # The sentinel
-00022ec0: 2076 616c 7565 2069 7320 6e6f 7420 696e   value is not in
-00022ed0: 636c 7564 6564 2e0d 0a20 2020 2020 2020  cluded...       
-00022ee0: 2032 0d0a 2020 2020 2020 2020 2222 220d   2..        """.
-00022ef0: 0a20 2020 2020 2020 2075 6e20 3d20 756e  .        un = un
-00022f00: 6971 7565 2873 656c 6629 0d0a 2020 2020  ique(self)..    
-00022f10: 2020 2020 636f 756e 7420 3d20 6c65 6e28      count = len(
-00022f20: 756e 290d 0a20 2020 2020 2020 2069 6620  un)..        if 
-00022f30: 636f 756e 7420 3e20 303a 0d0a 2020 2020  count > 0:..    
-00022f40: 2020 2020 2020 2020 2320 756e 6971 7565          # unique
-00022f50: 2069 7320 736f 7274 6564 2c20 736f 2063   is sorted, so c
-00022f60: 6865 636b 2066 6f72 2073 656e 7469 6e65  heck for sentine
-00022f70: 6c20 6261 7365 6420 6f6e 2064 7479 7065  l based on dtype
-00022f80: 0d0a 2020 2020 2020 2020 2020 2020 696e  ..            in
-00022f90: 7620 3d20 494e 5641 4c49 445f 4449 4354  v = INVALID_DICT
-00022fa0: 5b73 656c 662e 6474 7970 652e 6e75 6d5d  [self.dtype.num]
-00022fb0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00022fc0: 2073 656c 662e 6474 7970 652e 6368 6172   self.dtype.char
-00022fd0: 2069 6e20 4e75 6d70 7943 6861 7254 7970   in NumpyCharTyp
-00022fe0: 6573 2e41 6c6c 466c 6f61 743a 0d0a 2020  es.AllFloat:..  
-00022ff0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00023000: 6368 6563 6b20 6966 206c 6173 7420 6974  check if last it
-00023010: 656d 2069 7320 6e61 6e0d 0a20 2020 2020  em is nan..     
-00023020: 2020 2020 2020 2020 2020 2069 6620 756e             if un
-00023030: 5b63 6f75 6e74 202d 2031 5d20 213d 2075  [count - 1] != u
-00023040: 6e5b 636f 756e 7420 2d20 315d 3a0d 0a20  n[count - 1]:.. 
-00023050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023060: 2020 2063 6f75 6e74 202d 3d20 310d 0a20     count -= 1.. 
-00023070: 2020 2020 2020 2020 2020 2023 2075 6e73             # uns
-00023080: 6967 6e65 6420 696e 7420 7573 6573 2068  igned int uses h
-00023090: 6967 6820 6e75 6d62 6572 2061 7320 7365  igh number as se
-000230a0: 6e74 696e 656c 0d0a 2020 2020 2020 2020  ntinel..        
-000230b0: 2020 2020 656c 6966 2073 656c 662e 6474      elif self.dt
-000230c0: 7970 652e 6368 6172 2069 6e20 4e75 6d70  ype.char in Nump
-000230d0: 7943 6861 7254 7970 6573 2e55 6e73 6967  yCharTypes.Unsig
-000230e0: 6e65 6449 6e74 6567 6572 3a0d 0a20 2020  nedInteger:..   
-000230f0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00023100: 756e 5b63 6f75 6e74 202d 2031 5d20 3d3d  un[count - 1] ==
-00023110: 2069 6e76 3a0d 0a20 2020 2020 2020 2020   inv:..         
-00023120: 2020 2020 2020 2020 2020 2063 6f75 6e74             count
-00023130: 202d 3d20 310d 0a20 2020 2020 2020 2020   -= 1..         
-00023140: 2020 2023 2061 6c6c 206f 7468 6572 2073     # all other s
-00023150: 656e 7469 6e65 6c73 2061 7265 206c 6f77  entinels are low
-00023160: 6573 7420 6e75 6d62 6572 0d0a 2020 2020  est number..    
-00023170: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00023180: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00023190: 6620 756e 5b30 5d20 3d3d 2069 6e76 3a0d  f un[0] == inv:.
-000231a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000231b0: 2020 2020 2063 6f75 6e74 202d 3d20 310d       count -= 1.
-000231c0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000231d0: 636f 756e 740d 0a0d 0a20 2020 2023 202d  count....    # -
-000231e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000231f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00023200: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00023210: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
-00023220: 7365 6172 6368 736f 7274 6564 2873 656c  searchsorted(sel
-00023230: 662c 2076 2c20 7369 6465 3d22 6c65 6674  f, v, side="left
-00023240: 222c 2073 6f72 7465 723d 4e6f 6e65 2920  ", sorter=None) 
-00023250: 2d3e 206e 702e 6e75 6d62 6572 3a0d 0a20  -> np.number:.. 
-00023260: 2020 2020 2020 2072 6574 7572 6e20 5f73         return _s
-00023270: 6561 7263 6873 6f72 7465 6428 7365 6c66  earchsorted(self
-00023280: 2c20 762c 2073 6964 653d 7369 6465 2c20  , v, side=side, 
-00023290: 736f 7274 6572 3d73 6f72 7465 7229 0d0a  sorter=sorter)..
-000232a0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
-000232b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000232c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000232d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000232e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000232f0: 2d2d 2d0d 0a20 2020 2064 6566 206d 6170  ---..    def map
-00023300: 5f6f 6c64 2873 656c 662c 206e 7064 6963  _old(self, npdic
-00023310: 743a 2064 6963 7429 3a0d 0a20 2020 2020  t: dict):..     
-00023320: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00023330: 4578 616d 706c 650d 0a20 2020 2020 2020  Example..       
-00023340: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
-00023350: 2020 3e3e 3e20 6420 3d20 7b31 3a31 302c    >>> d = {1:10,
-00023360: 2032 3a32 307d 0d0a 2020 2020 2020 2020   2:20}..        
-00023370: 3e3e 3e20 6461 745b 2763 275d 203d 2064  >>> dat['c'] = d
-00023380: 6174 2e61 2e6d 6170 2864 290d 0a20 2020  at.a.map(d)..   
-00023390: 2020 2020 203e 3e3e 2070 7269 6e74 2864       >>> print(d
-000233a0: 6174 290d 0a20 2020 2020 2020 2020 2020  at)..           
-000233b0: 6120 2062 2020 2063 6220 2020 630d 0a20  a  b   cb   c.. 
-000233c0: 2020 2020 2020 2030 2020 3120 2030 2020         0  1  0  
-000233d0: 302e 3020 2031 300d 0a20 2020 2020 2020  0.0  10..       
-000233e0: 2031 2020 3120 2031 2020 312e 3020 2031   1  1  1  1.0  1
-000233f0: 300d 0a20 2020 2020 2020 2032 2020 3120  0..        2  1 
-00023400: 2032 2020 332e 3020 2031 300d 0a20 2020   2  3.0  10..   
-00023410: 2020 2020 2033 2020 3220 2033 2020 352e       3  2  3  5.
-00023420: 3020 2032 300d 0a20 2020 2020 2020 2034  0  20..        4
-00023430: 2020 3220 2034 2020 372e 3020 2032 300d    2  4  7.0  20.
-00023440: 0a20 2020 2020 2020 2035 2020 3220 2035  .        5  2  5
-00023450: 2020 392e 3020 2032 300d 0a20 2020 2020    9.0  20..     
-00023460: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00023470: 6f75 7441 7272 6179 203d 2073 656c 662e  outArray = self.
-00023480: 636f 7079 2829 0d0a 2020 2020 2020 2020  copy()..        
-00023490: 666f 7220 6b2c 2076 2069 6e20 6e70 6469  for k, v in npdi
-000234a0: 6374 2e69 7465 6d73 2829 3a0d 0a20 2020  ct.items():..   
-000234b0: 2020 2020 2020 2020 206f 7574 4172 7261           outArra
-000234c0: 795b 7365 6c66 203d 3d20 6b5d 203d 2076  y[self == k] = v
-000234d0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-000234e0: 206f 7574 4172 7261 790d 0a0d 0a20 2020   outArray....   
-000234f0: 2064 6566 206d 6170 2873 656c 662c 206e   def map(self, n
-00023500: 7064 6963 743a 2064 6963 7429 202d 3e20  pdict: dict) -> 
-00023510: 4661 7374 4172 7261 793a 0d0a 2020 2020  FastArray:..    
-00023520: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00023530: 204e 6f74 6573 0d0a 2020 2020 2020 2020   Notes..        
-00023540: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2055  -----..        U
-00023550: 7365 7320 6973 6d65 6d62 6572 2061 6e64  ses ismember and
-00023560: 2063 616e 2068 616e 646c 6520 6c61 7267   can handle larg
-00023570: 6520 6469 6374 696f 6e61 7269 6573 0d0a  e dictionaries..
-00023580: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
-00023590: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
-000235a0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
-000235b0: 3e20 613d 6172 616e 6765 2833 290d 0a20  > a=arange(3).. 
-000235c0: 2020 2020 2020 203e 3e3e 2061 2e6d 6170         >>> a.map
-000235d0: 287b 313a 2027 6127 2c20 323a 2762 272c  ({1: 'a', 2:'b',
-000235e0: 2033 3a27 6327 7d29 0d0a 2020 2020 2020   3:'c'})..      
-000235f0: 2020 4661 7374 4172 7261 7928 5b27 272c    FastArray(['',
-00023600: 2027 6127 2c20 2762 275d 2c20 6474 7970   'a', 'b'], dtyp
-00023610: 653d 273c 5531 2729 0d0a 2020 2020 2020  e='<U1')..      
-00023620: 2020 3e3e 3e20 613d 6172 616e 6765 2833    >>> a=arange(3
-00023630: 292b 310d 0a20 2020 2020 2020 203e 3e3e  )+1..        >>>
-00023640: 2061 2e6d 6170 287b 313a 2027 6127 2c20   a.map({1: 'a', 
-00023650: 323a 2762 272c 2033 3a27 6327 7d29 0d0a  2:'b', 3:'c'})..
-00023660: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-00023670: 7928 5b27 6127 2c20 2762 272c 2027 6327  y(['a', 'b', 'c'
-00023680: 5d2c 2064 7479 7065 3d27 3c55 3127 290d  ], dtype='<U1').
-00023690: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-000236a0: 2020 2020 2020 6f72 6967 203d 2046 6173        orig = Fas
-000236b0: 7441 7272 6179 285b 2a6e 7064 6963 745d  tArray([*npdict]
-000236c0: 2c20 756e 6963 6f64 653d 5472 7565 290d  , unicode=True).
-000236d0: 0a20 2020 2020 2020 2072 6570 6c61 6365  .        replace
-000236e0: 203d 2046 6173 7441 7272 6179 285b 2a6e   = FastArray([*n
-000236f0: 7064 6963 742e 7661 6c75 6573 2829 5d2c  pdict.values()],
-00023700: 2075 6e69 636f 6465 3d54 7275 6529 0d0a   unicode=True)..
-00023710: 2020 2020 2020 2020 6f75 7441 7272 6179          outArray
-00023720: 203d 2073 656c 662e 6669 6c6c 5f69 6e76   = self.fill_inv
-00023730: 616c 6964 2873 656c 662e 7368 6170 652c  alid(self.shape,
-00023740: 2064 7479 7065 3d72 6570 6c61 6365 2e64   dtype=replace.d
-00023750: 7479 7065 2c20 696e 706c 6163 653d 4661  type, inplace=Fa
-00023760: 6c73 6529 0d0a 2020 2020 2020 2020 666f  lse)..        fo
-00023770: 756e 642c 2069 6478 203d 2069 736d 656d  und, idx = ismem
-00023780: 6265 7228 7365 6c66 2c20 6f72 6967 290d  ber(self, orig).
-00023790: 0a20 2020 2020 2020 206f 7574 4172 7261  .        outArra
-000237a0: 795b 666f 756e 645d 203d 2072 6570 6c61  y[found] = repla
-000237b0: 6365 5b69 6478 5b66 6f75 6e64 5d5d 0d0a  ce[idx[found]]..
-000237c0: 2020 2020 2020 2020 7265 7475 726e 206f          return o
-000237d0: 7574 4172 7261 790d 0a0d 0a20 2020 2023  utArray....    #
-000237e0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
-000237f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00023800: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00023810: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00023820: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
-00023830: 2020 6465 6620 7368 6966 7428 7365 6c66    def shift(self
-00023840: 2c20 7065 7269 6f64 733d 312c 2069 6e76  , periods=1, inv
-00023850: 616c 6964 3d4e 6f6e 6529 202d 3e20 4661  alid=None) -> Fa
-00023860: 7374 4172 7261 793a 0d0a 2020 2020 2020  stArray:..      
-00023870: 2020 2222 220d 0a20 2020 2020 2020 2052    """..        R
-00023880: 6574 7572 6e20 6120 7368 6966 7465 6420  eturn a shifted 
-00023890: 6046 6173 7441 7272 6179 602e 2053 7061  `FastArray`. Spa
-000238a0: 6365 7320 6174 2065 6974 6865 7220 656e  ces at either en
-000238b0: 6420 2866 726f 6d20 7368 6966 7469 6e67  d (from shifting
-000238c0: 2920 6172 6520 6669 6c6c 6564 2077 6974  ) are filled wit
-000238d0: 6820 696e 7661 6c69 6420 7661 6c75 6573  h invalid values
-000238e0: 2062 6173 6564 206f 6e20 7468 6520 696e   based on the in
-000238f0: 7075 7420 6172 7261 7927 7320 6461 7461  put array's data
-00023900: 2074 7970 652e 0d0a 0d0a 2020 2020 2020   type.....      
-00023910: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
-00023920: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-00023930: 0d0a 2020 2020 2020 2020 7065 7269 6f64  ..        period
-00023940: 733a 2069 6e74 2c20 6465 6661 756c 7420  s: int, default 
-00023950: 310d 0a20 2020 2020 2020 2020 2020 204e  1..            N
-00023960: 756d 6265 7220 6f66 2065 6c65 6d65 6e74  umber of element
-00023970: 2070 6f73 6974 696f 6e73 2074 6f20 7368   positions to sh
-00023980: 6966 7420 7269 6768 7420 2869 6620 706f  ift right (if po
-00023990: 7369 7469 7665 2920 6f72 206c 6566 7420  sitive) or left 
-000239a0: 2869 6620 6e65 6761 7469 7665 292e 0d0a  (if negative)...
-000239b0: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-000239c0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-000239d0: 2d2d 0d0a 2020 2020 2020 2020 4120 7368  --..        A sh
-000239e0: 6966 7465 6420 6046 6173 7441 7272 6179  ifted `FastArray
-000239f0: 602e 2053 7061 6365 7320 6174 2065 6974  `. Spaces at eit
-00023a00: 6865 7220 656e 6420 2866 726f 6d20 7368  her end (from sh
-00023a10: 6966 7469 6e67 2920 6172 6520 6669 6c6c  ifting) are fill
-00023a20: 6564 2077 6974 6820 696e 7661 6c69 6420  ed with invalid 
-00023a30: 7661 6c75 6573 2062 6173 6564 206f 6e20  values based on 
-00023a40: 7468 6520 696e 7075 7420 6172 7261 7927  the input array'
-00023a50: 7320 6461 7461 2074 7970 652e 0d0a 0d0a  s data type.....
-00023a60: 2020 2020 2020 2020 5365 6520 416c 736f          See Also
-00023a70: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-00023a80: 2d2d 0d0a 2020 2020 2020 2020 4661 7374  --..        Fast
-00023a90: 4172 7261 792e 6469 6666 203a 2052 6574  Array.diff : Ret
-00023aa0: 7572 6e73 2061 2060 4661 7374 4172 7261  urns a `FastArra
-00023ab0: 7960 2063 6f6e 7461 696e 696e 6720 7468  y` containing th
-00023ac0: 6520 6469 6666 6572 656e 6365 7320 6265  e differences be
-00023ad0: 7477 6565 6e20 6164 6a61 6365 6e74 2069  tween adjacent i
-00023ae0: 6e70 7574 2061 7272 6179 2076 616c 7565  nput array value
-00023af0: 732e 0d0a 2020 2020 2020 2020 2e43 6174  s...        .Cat
-00023b00: 6567 6f72 6963 616c 2e73 6869 6674 203a  egorical.shift :
-00023b10: 2053 6869 6674 7320 7661 6c75 6573 2069   Shifts values i
-00023b20: 6e20 7468 6520 602e 4361 7465 676f 7269  n the `.Categori
-00023b30: 6361 6c60 2062 7920 6120 7370 6563 6966  cal` by a specif
-00023b40: 6965 6420 6e75 6d62 6572 206f 6620 7065  ied number of pe
-00023b50: 7269 6f64 732e 0d0a 0d0a 2020 2020 2020  riods.....      
-00023b60: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
-00023b70: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
-00023b80: 2020 2020 2020 5368 6966 7420 6172 7261        Shift arra
-00023b90: 7920 656c 656d 656e 7473 206f 6e65 2070  y elements one p
-00023ba0: 6f73 6974 696f 6e20 746f 2074 6865 2072  osition to the r
-00023bb0: 6967 6874 3a0d 0a0d 0a20 2020 2020 2020  ight:....       
-00023bc0: 203e 3e3e 2061 3d72 742e 4641 285b 302c   >>> a=rt.FA([0,
-00023bd0: 2032 2c20 342c 2038 2c20 3136 2c20 3332   2, 4, 8, 16, 32
-00023be0: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
-00023bf0: 610d 0a20 2020 2020 2020 2046 6173 7441  a..        FastA
-00023c00: 7272 6179 285b 2030 2c20 2032 2c20 2034  rray([ 0,  2,  4
-00023c10: 2c20 2038 2c20 3136 2c20 3332 5d29 0d0a  ,  8, 16, 32])..
-00023c20: 2020 2020 2020 2020 3e3e 3e20 612e 7368          >>> a.sh
-00023c30: 6966 7428 290d 0a20 2020 2020 2020 2046  ift()..        F
-00023c40: 6173 7441 7272 6179 285b 2d32 3134 3734  astArray([-21474
-00023c50: 3833 3634 382c 2020 2020 2020 2020 2020  83648,          
-00023c60: 2030 2c20 2020 2020 2020 2020 2020 322c   0,           2,
-00023c70: 2020 2020 2020 2020 2020 2034 2c0d 0a20             4,.. 
-00023c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023c90: 2020 2020 2020 2020 2020 2020 382c 2020              8,  
-00023ca0: 2020 2020 2020 2020 3136 5d29 0d0a 0d0a          16])....
-00023cb0: 2020 2020 2020 2020 5368 6966 7420 6172          Shift ar
-00023cc0: 7261 7920 656c 656d 656e 7473 2074 776f  ray elements two
-00023cd0: 2070 6f73 6974 696f 6e73 2074 6f20 7468   positions to th
-00023ce0: 6520 6c65 6674 3a0d 0a0d 0a20 2020 2020  e left:....     
-00023cf0: 2020 203e 3e3e 2061 2e73 6869 6674 282d     >>> a.shift(-
-00023d00: 3229 0d0a 2020 2020 2020 2020 3e3e 3e20  2)..        >>> 
-00023d10: 4661 7374 4172 7261 7928 5b20 2020 2020  FastArray([     
-00023d20: 2020 2020 2034 2c20 2020 2020 2020 2020       4,         
-00023d30: 2020 382c 2020 2020 2020 2020 2020 3136    8,          16
-00023d40: 2c20 2020 2020 2020 2020 2033 322c 0d0a  ,          32,..
-00023d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023d60: 2020 202d 3231 3437 3438 3336 3438 2c20     -2147483648, 
-00023d70: 2d32 3134 3734 3833 3634 385d 290d 0a0d  -2147483648])...
-00023d80: 0a20 2020 2020 2020 2053 7065 6369 6679  .        Specify
-00023d90: 2061 2073 6869 6674 2076 616c 7565 2067   a shift value g
-00023da0: 7265 6174 6572 2074 6861 6e20 7468 6520  reater than the 
-00023db0: 6172 7261 7920 6c65 6e67 7468 3a0d 0a0d  array length:...
-00023dc0: 0a20 2020 2020 2020 203e 3e3e 2061 2e73  .        >>> a.s
-00023dd0: 6869 6674 2831 3029 0d0a 2020 2020 2020  hift(10)..      
-00023de0: 2020 4661 7374 4172 7261 7928 5b2d 3231    FastArray([-21
-00023df0: 3437 3438 3336 3438 2c20 2d32 3134 3734  47483648, -21474
-00023e00: 3833 3634 382c 202d 3231 3437 3438 3336  83648, -21474836
-00023e10: 3438 2c20 2d32 3134 3734 3833 3634 382c  48, -2147483648,
-00023e20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00023e30: 2020 2020 202d 3231 3437 3438 3336 3438       -2147483648
-00023e40: 2c20 2d32 3134 3734 3833 3634 385d 290d  , -2147483648]).
-00023e50: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
-00023e60: 2020 2020 2020 2020 6966 2070 6572 696f          if perio
-00023e70: 6473 203d 3d20 303a 0d0a 2020 2020 2020  ds == 0:..      
-00023e80: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00023e90: 660d 0a0d 0a20 2020 2020 2020 2069 6620  f....        if 
-00023ea0: 696e 7661 6c69 6420 6973 204e 6f6e 653a  invalid is None:
-00023eb0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00023ec0: 2069 7369 6e73 7461 6e63 6528 7365 6c66   isinstance(self
-00023ed0: 2c20 5479 7065 5265 6769 7374 6572 2e43  , TypeRegister.C
-00023ee0: 6174 6567 6f72 6963 616c 293a 0d0a 2020  ategorical):..  
-00023ef0: 2020 2020 2020 2020 2020 2020 2020 696e                in
-00023f00: 7661 6c69 6420 3d20 300d 0a20 2020 2020  valid = 0..     
-00023f10: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00023f20: 2020 2020 2020 2020 2020 2020 2020 7472                tr
-00023f30: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-00023f40: 2020 2020 2020 2020 696e 7661 6c69 6420          invalid 
-00023f50: 3d20 494e 5641 4c49 445f 4449 4354 5b73  = INVALID_DICT[s
-00023f60: 656c 662e 6474 7970 652e 6e75 6d5d 0d0a  elf.dtype.num]..
-00023f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023f80: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
-00023f90: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00023fa0: 2020 2020 2020 2072 6169 7365 2054 7970         raise Typ
-00023fb0: 6545 7272 6f72 2866 2273 6869 6674 2064  eError(f"shift d
-00023fc0: 6f65 7320 6e6f 7420 7375 7070 6f72 7420  oes not support 
-00023fd0: 7468 6520 6474 7970 6520 7b73 656c 662e  the dtype {self.
-00023fe0: 6474 7970 652e 6e61 6d65 2172 7d22 290d  dtype.name!r}").
-00023ff0: 0a0d 0a20 2020 2020 2020 2023 2077 6520  ...        # we 
-00024000: 6b6e 6f77 2074 6861 7420 7468 6973 2069  know that this i
-00024010: 7320 6120 7369 6d70 6c65 2076 6563 746f  s a simple vecto
-00024020: 723a 2073 6861 7065 203d 3d20 286c 656e  r: shape == (len
-00024030: 2c20 290d 0a20 2020 2020 2020 2023 2054  , )..        # T
-00024040: 4f44 4f3a 2067 6574 2072 6563 7963 6c65  ODO: get recycle
-00024050: 640d 0a20 2020 2020 2020 2074 656d 7020  d..        temp 
-00024060: 3d20 656d 7074 795f 6c69 6b65 2873 656c  = empty_like(sel
-00024070: 6629 0d0a 2020 2020 2020 2020 6966 2061  f)..        if a
-00024080: 6273 2870 6572 696f 6473 2920 3e3d 206c  bs(periods) >= l
-00024090: 656e 2873 656c 6629 3a0d 0a20 2020 2020  en(self):..     
-000240a0: 2020 2020 2020 2074 656d 702e 6669 6c6c         temp.fill
-000240b0: 2869 6e76 616c 6964 290d 0a20 2020 2020  (invalid)..     
-000240c0: 2020 2065 6c69 6620 7065 7269 6f64 7320     elif periods 
-000240d0: 3e20 303a 0d0a 2020 2020 2020 2020 2020  > 0:..          
-000240e0: 2020 7465 6d70 5b3a 7065 7269 6f64 735d    temp[:periods]
-000240f0: 203d 2069 6e76 616c 6964 0d0a 2020 2020   = invalid..    
-00024100: 2020 2020 2020 2020 7465 6d70 5b70 6572          temp[per
-00024110: 696f 6473 3a5d 203d 2073 656c 665b 3a2d  iods:] = self[:-
-00024120: 7065 7269 6f64 735d 0d0a 2020 2020 2020  periods]..      
-00024130: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00024140: 2020 2020 2074 656d 705b 3a70 6572 696f       temp[:perio
-00024150: 6473 5d20 3d20 7365 6c66 5b2d 7065 7269  ds] = self[-peri
-00024160: 6f64 733a 5d0d 0a20 2020 2020 2020 2020  ods:]..         
-00024170: 2020 2074 656d 705b 7065 7269 6f64 733a     temp[periods:
-00024180: 5d20 3d20 696e 7661 6c69 640d 0a0d 0a20  ] = invalid.... 
-00024190: 2020 2020 2020 2023 2074 6f20 7265 7772         # to rewr
-000241a0: 6170 2063 6174 6567 6f72 6963 616c 7320  ap categoricals 
-000241b0: 6f72 2064 6174 656c 696b 650d 0a20 2020  or datelike..   
-000241c0: 2020 2020 2069 6620 6861 7361 7474 7228       if hasattr(
-000241d0: 7365 6c66 2c20 226e 6577 636c 6173 7366  self, "newclassf
-000241e0: 726f 6d69 6e73 7461 6e63 6522 293a 0d0a  rominstance"):..
-000241f0: 2020 2020 2020 2020 2020 2020 7465 6d70              temp
-00024200: 203d 2073 656c 662e 6e65 7763 6c61 7373   = self.newclass
-00024210: 6672 6f6d 696e 7374 616e 6365 2874 656d  frominstance(tem
-00024220: 702c 2073 656c 6629 0d0a 0d0a 2020 2020  p, self)....    
-00024230: 2020 2020 7265 7475 726e 2074 656d 700d      return temp.
-00024240: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
-00024250: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024260: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024270: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024280: 0d0a 2020 2020 6465 6620 5f69 6e74 6572  ..    def _inter
-00024290: 6e61 6c5f 7365 6c66 5f63 6f6d 7061 7265  nal_self_compare
-000242a0: 2873 656c 662c 206d 6174 685f 6f70 2c20  (self, math_op, 
-000242b0: 7065 7269 6f64 733d 312c 2066 616e 6379  periods=1, fancy
-000242c0: 3d46 616c 7365 293a 0d0a 2020 2020 2020  =False):..      
-000242d0: 2020 2222 2269 6e74 6572 6e61 6c20 726f    """internal ro
-000242e0: 7574 696e 6520 7573 6564 2066 6f72 2064  utine used for d
-000242f0: 6966 6665 7273 2061 6e64 2074 7261 6e73  iffers and trans
-00024300: 6974 696f 6e73 2222 220d 0a20 2020 2020  itions"""..     
-00024310: 2020 2072 6573 756c 7420 3d20 656d 7074     result = empt
-00024320: 795f 6c69 6b65 2873 656c 662c 2064 7479  y_like(self, dty
-00024330: 7065 3d6e 702e 626f 6f6c 5f29 0d0a 0d0a  pe=np.bool_)....
-00024340: 2020 2020 2020 2020 6966 2070 6572 696f          if perio
-00024350: 6473 203d 3d20 303a 0d0a 2020 2020 2020  ds == 0:..      
-00024360: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
-00024370: 6545 7272 6f72 2822 7065 7269 6f64 7320  eError("periods 
-00024380: 6f66 2030 2069 7320 696e 7661 6c69 6420  of 0 is invalid 
-00024390: 666f 7220 7472 616e 7369 7469 6f6e 7322  for transitions"
-000243a0: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
-000243b0: 7065 7269 6f64 7320 3e20 303a 0d0a 2020  periods > 0:..  
-000243c0: 2020 2020 2020 2020 2020 5479 7065 5265            TypeRe
-000243d0: 6769 7374 6572 2e4d 6174 684c 6564 6765  gister.MathLedge
-000243e0: 722e 5f42 4153 4943 4d41 5448 5f54 574f  r._BASICMATH_TWO
-000243f0: 5f49 4e50 5554 5328 0d0a 2020 2020 2020  _INPUTS(..      
-00024400: 2020 2020 2020 2020 2020 2873 656c 665b            (self[
-00024410: 7065 7269 6f64 733a 5d2c 2073 656c 665b  periods:], self[
-00024420: 3a2d 7065 7269 6f64 735d 2c20 7265 7375  :-periods], resu
-00024430: 6c74 5b70 6572 696f 6473 3a5d 292c 206d  lt[periods:]), m
-00024440: 6174 685f 6f70 2c20 300d 0a20 2020 2020  ath_op, 0..     
-00024450: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-00024460: 2020 2020 2020 2320 6669 6c6c 2075 7066        # fill upf
-00024470: 726f 6e74 2077 6974 6820 696e 7661 6c69  ront with invali
-00024480: 6473 0d0a 2020 2020 2020 2020 2020 2020  ds..            
-00024490: 7265 7375 6c74 5b3a 7065 7269 6f64 735d  result[:periods]
-000244a0: 203d 2046 616c 7365 0d0a 2020 2020 2020   = False..      
-000244b0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-000244c0: 2020 2020 2054 7970 6552 6567 6973 7465       TypeRegiste
-000244d0: 722e 4d61 7468 4c65 6467 6572 2e5f 4241  r.MathLedger._BA
-000244e0: 5349 434d 4154 485f 5457 4f5f 494e 5055  SICMATH_TWO_INPU
-000244f0: 5453 280d 0a20 2020 2020 2020 2020 2020  TS(..           
-00024500: 2020 2020 2028 7365 6c66 5b3a 7065 7269       (self[:peri
-00024510: 6f64 735d 2c20 7365 6c66 5b2d 7065 7269  ods], self[-peri
-00024520: 6f64 733a 5d2c 2072 6573 756c 745b 3a70  ods:], result[:p
-00024530: 6572 696f 6473 5d29 2c20 6d61 7468 5f6f  eriods]), math_o
-00024540: 702c 2030 0d0a 2020 2020 2020 2020 2020  p, 0..          
-00024550: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
-00024560: 2023 2066 696c 6c20 6261 636b 2077 6974   # fill back wit
-00024570: 6820 696e 7661 6c69 6473 2028 7065 7269  h invalids (peri
-00024580: 6f64 7320 6973 206e 6567 6174 6976 6529  ods is negative)
-00024590: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-000245a0: 7375 6c74 5b70 6572 696f 6473 3a5d 203d  sult[periods:] =
-000245b0: 2046 616c 7365 0d0a 0d0a 2020 2020 2020   False....      
-000245c0: 2020 6966 2066 616e 6379 3a0d 0a20 2020    if fancy:..   
-000245d0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000245e0: 626f 6f6c 5f74 6f5f 6661 6e63 7928 7265  bool_to_fancy(re
-000245f0: 7375 6c74 290d 0a20 2020 2020 2020 2072  sult)..        r
-00024600: 6574 7572 6e20 7265 7375 6c74 0d0a 0d0a  eturn result....
-00024610: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
-00024620: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
-00024650: 2020 2064 6566 2064 6966 6665 7273 2873     def differs(s
-00024660: 656c 662c 2070 6572 696f 6473 3d31 2c20  elf, periods=1, 
-00024670: 6661 6e63 793d 4661 6c73 6529 202d 3e20  fancy=False) -> 
-00024680: 4661 7374 4172 7261 793a 0d0a 2020 2020  FastArray:..    
-00024690: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-000246a0: 2049 6465 6e74 6966 7920 6172 7261 7920   Identify array 
-000246b0: 7661 6c75 6573 2074 6861 7420 6172 6520  values that are 
-000246c0: 7468 6520 7361 6d65 2061 7320 6164 6a61  the same as adja
-000246d0: 6365 6e74 2076 616c 7565 732e 0d0a 0d0a  cent values.....
-000246e0: 2020 2020 2020 2020 4f75 7470 7574 2061          Output a
-000246f0: 7272 6179 2076 616c 7565 7320 6172 6520  rray values are 
-00024700: 7365 7420 746f 2060 5472 7565 6020 666f  set to `True` fo
-00024710: 7220 6571 7569 7661 6c65 6e74 2076 616c  r equivalent val
-00024720: 7565 732e 2052 6574 7572 6e73 2061 2062  ues. Returns a b
-00024730: 6f6f 6c65 616e 2060 4661 7374 4172 7261  oolean `FastArra
-00024740: 7960 206f 7220 6120 6661 6e63 7920 696e  y` or a fancy in
-00024750: 6465 782e 0d0a 0d0a 2020 2020 2020 2020  dex.....        
-00024760: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
-00024770: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
-00024780: 2020 2020 2020 2020 7065 7269 6f64 733a          periods:
-00024790: 2069 6e74 2c20 6465 6661 756c 7420 310d   int, default 1.
-000247a0: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
-000247b0: 206e 756d 6265 7220 6f66 2061 7272 6179   number of array
-000247c0: 2065 6c65 6d65 6e74 2070 6f73 6974 696f   element positio
-000247d0: 6e73 2074 6f20 6c6f 6f6b 2062 6568 696e  ns to look behin
-000247e0: 6420 2870 6f73 6974 6976 6520 6e75 6d62  d (positive numb
-000247f0: 6572 2920 6f72 206c 6f6f 6b20 6168 6561  er) or look ahea
-00024800: 6420 286e 6567 6174 6976 6520 6e75 6d62  d (negative numb
-00024810: 6572 2920 666f 7220 636f 6d70 6172 6973  er) for comparis
-00024820: 6f6e 2e0d 0a20 2020 2020 2020 2066 616e  on...        fan
-00024830: 6379 3a20 626f 6f6c 2c20 6465 6661 756c  cy: bool, defaul
-00024840: 7420 4661 6c73 650d 0a20 2020 2020 2020  t False..       
-00024850: 2020 2020 2060 4661 6c73 6560 2072 6574       `False` ret
-00024860: 7572 6e73 2061 2062 6f6f 6c65 616e 2061  urns a boolean a
-00024870: 7272 6179 2061 6e64 2060 5472 7565 6020  rray and `True` 
-00024880: 7265 7475 726e 7320 6120 6661 6e63 7920  returns a fancy 
-00024890: 696e 6465 782e 0d0a 0d0a 2020 2020 2020  index.....      
-000248a0: 2020 5265 7475 726e 730d 0a20 2020 2020    Returns..     
-000248b0: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
-000248c0: 2020 2020 4661 7374 4172 7261 790d 0a20      FastArray.. 
-000248d0: 2020 2020 2020 2020 2020 2041 2062 6f6f             A boo
-000248e0: 6c65 616e 2060 4661 7374 4172 7261 7960  lean `FastArray`
-000248f0: 206f 7220 6120 6661 6e63 7920 696e 6465   or a fancy inde
-00024900: 7820 7468 6174 2069 6465 6e74 6966 6965  x that identifie
-00024910: 7320 6571 7569 7661 6c65 6e74 2065 6c65  s equivalent ele
-00024920: 6d65 6e74 7320 696e 2074 6865 2069 6e70  ments in the inp
-00024930: 7574 2061 7272 6179 2e0d 0a0d 0a20 2020  ut array.....   
-00024940: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
-00024950: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-00024960: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-00024970: 6179 2e74 7261 6e73 6974 696f 6e73 203a  ay.transitions :
-00024980: 2049 6465 6e74 6966 7920 6e6f 6e65 7175   Identify nonequ
-00024990: 6976 616c 656e 7420 6974 656d 7320 696e  ivalent items in
-000249a0: 2074 6865 2069 6e70 7574 2061 7272 6179   the input array
-000249b0: 2061 6e64 2072 6574 7572 6e20 6120 626f   and return a bo
-000249c0: 6f6c 6561 6e20 6046 6173 7441 7272 6179  olean `FastArray
-000249d0: 6020 6f72 2061 2066 616e 6379 2069 6e64  ` or a fancy ind
-000249e0: 6578 2e0d 0a0d 0a20 2020 2020 2020 2045  ex.....        E
-000249f0: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
-00024a00: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
-00024a10: 2020 2052 6574 7572 6e20 6120 626f 6f6c     Return a bool
-00024a20: 6561 6e20 6172 7261 7920 7573 696e 6720  ean array using 
-00024a30: 7468 6520 6060 7065 7269 6f64 733d 3160  the ``periods=1`
-00024a40: 6020 6465 6661 756c 7420 7661 6c75 6520  ` default value 
-00024a50: 286c 6f6f 6b20 6265 6869 6e64 206f 6e65  (look behind one
-00024a60: 2065 6c65 6d65 6e74 2070 6f73 6974 696f   element positio
-00024a70: 6e20 666f 7220 636f 6d70 6172 6973 6f6e  n for comparison
-00024a80: 7329 3a0d 0a0d 0a20 2020 2020 2020 203e  s):....        >
-00024a90: 3e3e 2061 203d 2072 742e 4641 285b 312c  >> a = rt.FA([1,
-00024aa0: 2032 2c20 322c 2033 2c20 322c 2034 2c20   2, 2, 3, 2, 4, 
-00024ab0: 352c 2036 2c20 322c 2032 2c20 355d 290d  5, 6, 2, 2, 5]).
-00024ac0: 0a20 2020 2020 2020 203e 3e3e 2061 0d0a  .        >>> a..
-00024ad0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-00024ae0: 7928 5b31 2c20 322c 2032 2c20 332c 2032  y([1, 2, 2, 3, 2
-00024af0: 2c20 342c 2035 2c20 362c 2032 2c20 322c  , 4, 5, 6, 2, 2,
-00024b00: 2035 5d29 0d0a 2020 2020 2020 2020 3e3e   5])..        >>
-00024b10: 3e20 612e 6469 6666 6572 7328 290d 0a20  > a.differs().. 
-00024b20: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-00024b30: 285b 4661 6c73 652c 2046 616c 7365 2c20  ([False, False, 
-00024b40: 2054 7275 652c 2046 616c 7365 2c20 4661   True, False, Fa
-00024b50: 6c73 652c 2046 616c 7365 2c20 4661 6c73  lse, False, Fals
-00024b60: 652c 2046 616c 7365 2c20 4661 6c73 652c  e, False, False,
-00024b70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00024b80: 2020 2020 2020 5472 7565 2c20 4661 6c73        True, Fals
-00024b90: 655d 290d 0a0d 0a20 2020 2020 2020 2052  e])....        R
-00024ba0: 6574 7572 6e20 6120 626f 6f6c 6561 6e20  eturn a boolean 
-00024bb0: 6172 7261 7920 616e 6420 6c6f 6f6b 2061  array and look a
-00024bc0: 6865 6164 2074 6872 6565 2065 6c65 6d65  head three eleme
-00024bd0: 6e74 2070 6f73 6974 696f 6e73 2066 6f72  nt positions for
-00024be0: 2063 6f6d 7061 7269 736f 6e73 3a0d 0a0d   comparisons:...
-00024bf0: 0a20 2020 2020 2020 203e 3e3e 2061 2e64  .        >>> a.d
-00024c00: 6966 6665 7273 2870 6572 696f 6473 3d2d  iffers(periods=-
-00024c10: 3329 0d0a 2020 2020 2020 2020 4661 7374  3)..        Fast
-00024c20: 4172 7261 7928 5b46 616c 7365 2c20 2054  Array([False,  T
-00024c30: 7275 652c 2046 616c 7365 2c20 4661 6c73  rue, False, Fals
-00024c40: 652c 2046 616c 7365 2c20 4661 6c73 652c  e, False, False,
-00024c50: 2046 616c 7365 2c20 4661 6c73 652c 2046   False, False, F
-00024c60: 616c 7365 2c0d 0a20 2020 2020 2020 2020  alse,..         
-00024c70: 2020 2020 2020 2020 2020 4661 6c73 652c            False,
-00024c80: 2046 616c 7365 5d29 0d0a 0d0a 2020 2020   False])....    
-00024c90: 2020 2020 5265 7475 726e 2061 2066 616e      Return a fan
-00024ca0: 6379 2069 6e64 6578 2075 7369 6e67 2074  cy index using t
-00024cb0: 6865 2060 6070 6572 696f 6473 3d31 6060  he ``periods=1``
-00024cc0: 2064 6566 6175 6c74 2076 616c 7565 2028   default value (
-00024cd0: 6c6f 6f6b 2062 6568 696e 6420 6f6e 6520  look behind one 
-00024ce0: 656c 656d 656e 7420 706f 7369 7469 6f6e  element position
-00024cf0: 2066 6f72 2063 6f6d 7061 7269 736f 6e73   for comparisons
-00024d00: 293a 0d0a 0d0a 2020 2020 2020 2020 3e3e  ):....        >>
-00024d10: 3e20 612e 6469 6666 6572 7328 6661 6e63  > a.differs(fanc
-00024d20: 793d 5472 7565 290d 0a20 2020 2020 2020  y=True)..       
-00024d30: 2046 6173 7441 7272 6179 285b 322c 2039   FastArray([2, 9
-00024d40: 5d29 0d0a 0d0a 2020 2020 2020 2020 5365  ])....        Se
-00024d50: 7420 6070 6572 696f 6473 6020 746f 2061  t `periods` to a
-00024d60: 206e 756d 6265 7220 6c61 7267 6572 2074   number larger t
-00024d70: 6861 6e20 7468 6520 696e 7075 7420 6172  han the input ar
-00024d80: 7261 793a 0d0a 0d0a 2020 2020 2020 2020  ray:....        
-00024d90: 3e3e 3e20 612e 6469 6666 6572 7328 7065  >>> a.differs(pe
-00024da0: 7269 6f64 733d 3135 290d 0a20 2020 2020  riods=15)..     
-00024db0: 2020 2046 6173 7441 7272 6179 285b 4661     FastArray([Fa
-00024dc0: 6c73 652c 2046 616c 7365 2c20 4661 6c73  lse, False, Fals
-00024dd0: 652c 2046 616c 7365 2c20 4661 6c73 652c  e, False, False,
-00024de0: 2046 616c 7365 2c20 4661 6c73 652c 2046   False, False, F
-00024df0: 616c 7365 2c20 4661 6c73 652c 0d0a 2020  alse, False,..  
-00024e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024e10: 2046 616c 7365 2c20 4661 6c73 655d 290d   False, False]).
-00024e20: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00024e30: 2020 2020 2020 6966 2073 656c 662e 6474        if self.dt
-00024e40: 7970 652e 6e75 6d20 3e20 3133 3a0d 0a20  ype.num > 13:.. 
-00024e50: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-00024e60: 7420 3d20 7365 6c66 2021 3d20 7365 6c66  t = self != self
-00024e70: 2e73 6869 6674 2870 6572 696f 6473 290d  .shift(periods).
-00024e80: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00024e90: 6661 6e63 793a 0d0a 2020 2020 2020 2020  fancy:..        
-00024ea0: 2020 2020 2020 2020 7265 7475 726e 2062          return b
-00024eb0: 6f6f 6c5f 746f 5f66 616e 6379 2872 6573  ool_to_fancy(res
-00024ec0: 756c 7429 0d0a 2020 2020 2020 2020 2020  ult)..          
-00024ed0: 2020 7265 7475 726e 2072 6573 756c 740d    return result.
-00024ee0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00024ef0: 7365 6c66 2e5f 696e 7465 726e 616c 5f73  self._internal_s
-00024f00: 656c 665f 636f 6d70 6172 6528 4d41 5448  elf_compare(MATH
-00024f10: 5f4f 5045 5241 5449 4f4e 2e43 4d50 5f45  _OPERATION.CMP_E
-00024f20: 512c 2070 6572 696f 6473 3d70 6572 696f  Q, periods=perio
-00024f30: 6473 2c20 6661 6e63 793d 6661 6e63 7929  ds, fancy=fancy)
-00024f40: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
-00024f50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024f60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024f70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024f80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024f90: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2074  -----..    def t
-00024fa0: 7261 6e73 6974 696f 6e73 2873 656c 662c  ransitions(self,
-00024fb0: 2070 6572 696f 6473 3d31 2c20 6661 6e63   periods=1, fanc
-00024fc0: 793d 4661 6c73 6529 202d 3e20 4661 7374  y=False) -> Fast
-00024fd0: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
-00024fe0: 2222 220d 0a20 2020 2020 2020 2052 6574  """..        Ret
-00024ff0: 7572 6e73 2061 2062 6f6f 6c65 616e 2061  urns a boolean a
-00025000: 7272 6179 2e0d 0a20 2020 2020 2020 2054  rray...        T
-00025010: 6865 2062 6f6f 6c65 616e 2061 7272 6179  he boolean array
-00025020: 2069 7320 7365 7420 746f 2054 7275 6520   is set to True 
-00025030: 7768 656e 2074 6865 2070 7265 7669 6f75  when the previou
-00025040: 7320 6974 656d 2069 6e20 7468 6520 6172  s item in the ar
-00025050: 7261 7920 646f 6573 206e 6f74 2065 7175  ray does not equ
-00025060: 616c 2074 6865 2063 7572 7265 6e74 2e0d  al the current..
-00025070: 0a20 2020 2020 2020 2055 7365 202d 3120  .        Use -1 
-00025080: 696e 7374 6561 6420 6f66 2031 2069 6620  instead of 1 if 
-00025090: 796f 7520 7761 6e74 2054 7275 6520 7365  you want True se
-000250a0: 7420 7768 656e 2074 6865 206e 6578 7420  t when the next 
-000250b0: 6974 656d 2069 6e20 7468 6520 6172 7261  item in the arra
-000250c0: 7920 646f 6573 206e 6f74 2065 7175 616c  y does not equal
-000250d0: 2074 6865 2070 7265 7669 6f75 732e 0d0a   the previous...
-000250e0: 2020 2020 2020 2020 5365 6520 616c 736f          See also
-000250f0: 3a20 6060 6469 6666 6572 7360 600d 0a0d  : ``differs``...
-00025100: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00025110: 7065 7269 6f64 733a 2054 6865 206e 756d  periods: The num
-00025120: 6265 7220 6f66 2065 6c65 6d65 6e74 7320  ber of elements 
-00025130: 746f 206c 6f6f 6b20 6168 6561 6420 286f  to look ahead (o
-00025140: 7220 6265 6869 6e64 292c 2064 6566 6175  r behind), defau
-00025150: 6c74 7320 746f 2031 0d0a 2020 2020 2020  lts to 1..      
-00025160: 2020 3a74 7970 6520 7065 7269 6f64 733a    :type periods:
-00025170: 2069 6e74 0d0a 2020 2020 2020 2020 3a70   int..        :p
-00025180: 6172 616d 2066 616e 6379 3a20 496e 6469  aram fancy: Indi
-00025190: 6361 7465 7320 7768 6574 6865 7220 746f  cates whether to
-000251a0: 2072 6574 7572 6e20 6120 6661 6e63 795f   return a fancy_
-000251b0: 696e 6465 7820 696e 7374 6561 6420 6f66  index instead of
-000251c0: 2061 2062 6f6f 6c65 616e 2061 7272 6179   a boolean array
-000251d0: 2c20 6465 6661 756c 7473 2074 6f20 4661  , defaults to Fa
-000251e0: 6c73 652e 0d0a 2020 2020 2020 2020 3a74  lse...        :t
-000251f0: 7970 6520 6661 6e63 793a 2062 6f6f 6c0d  ype fancy: bool.
-00025200: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-00025210: 3a20 626f 6f6c 6561 6e20 6060 4661 7374  : boolean ``Fast
-00025220: 4172 7261 7960 602c 206f 7220 6661 6e63  Array``, or fanc
-00025230: 7949 6e64 6578 2028 7365 653a 2060 6661  yIndex (see: `fa
-00025240: 6e63 7960 206b 7761 7267 290d 0a0d 0a20  ncy` kwarg).... 
-00025250: 2020 2020 2020 203e 3e3e 2061 203d 2046         >>> a = F
-00025260: 6173 7441 7272 6179 285b 302c 312c 322c  astArray([0,1,2,
-00025270: 332c 332c 332c 345d 290d 0a20 2020 2020  3,3,3,4])..     
-00025280: 2020 203e 3e3e 2061 2e74 7261 6e73 6974     >>> a.transit
-00025290: 696f 6e73 2870 6572 696f 6473 3d31 290d  ions(periods=1).
-000252a0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-000252b0: 6179 285b 4661 6c73 652c 2054 7275 652c  ay([False, True,
-000252c0: 2054 7275 652c 2054 7275 652c 2046 616c   True, True, Fal
-000252d0: 7365 2c20 4661 6c73 652c 2054 7275 655d  se, False, True]
-000252e0: 290d 0a0d 0a20 2020 2020 2020 203e 3e3e  )....        >>>
-000252f0: 2061 2e74 7261 6e73 6974 696f 6e73 2870   a.transitions(p
-00025300: 6572 696f 6473 3d32 290d 0a20 2020 2020  eriods=2)..     
-00025310: 2020 2046 6173 7441 7272 6179 285b 4661     FastArray([Fa
-00025320: 6c73 652c 2046 616c 7365 2c20 5472 7565  lse, False, True
-00025330: 2c20 5472 7565 2c20 5472 7565 2c20 4661  , True, True, Fa
-00025340: 6c73 652c 2054 7275 655d 290d 0a0d 0a20  lse, True]).... 
-00025350: 2020 2020 2020 203e 3e3e 2061 2e74 7261         >>> a.tra
-00025360: 6e73 6974 696f 6e73 2870 6572 696f 6473  nsitions(periods
-00025370: 3d2d 3129 0d0a 2020 2020 2020 2020 4661  =-1)..        Fa
-00025380: 7374 4172 7261 7928 5b20 5472 7565 2c20  stArray([ True, 
-00025390: 5472 7565 2c20 5472 7565 2c20 4661 6c73  True, True, Fals
-000253a0: 652c 2046 616c 7365 2c20 5472 7565 2c20  e, False, True, 
-000253b0: 4661 6c73 655d 290d 0a20 2020 2020 2020  False])..       
-000253c0: 2022 2222 0d0a 2020 2020 2020 2020 6966   """..        if
-000253d0: 2073 656c 662e 6474 7970 652e 6e75 6d20   self.dtype.num 
-000253e0: 3e20 3133 3a0d 0a20 2020 2020 2020 2020  > 13:..         
-000253f0: 2020 2072 6573 756c 7420 3d20 7365 6c66     result = self
-00025400: 2021 3d20 7365 6c66 2e73 6869 6674 2870   != self.shift(p
-00025410: 6572 696f 6473 290d 0a20 2020 2020 2020  eriods)..       
-00025420: 2020 2020 2069 6620 6661 6e63 793a 0d0a       if fancy:..
-00025430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025440: 7265 7475 726e 2062 6f6f 6c5f 746f 5f66  return bool_to_f
-00025450: 616e 6379 2872 6573 756c 7429 0d0a 2020  ancy(result)..  
-00025460: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00025470: 2072 6573 756c 740d 0a20 2020 2020 2020   result..       
-00025480: 2072 6574 7572 6e20 7365 6c66 2e5f 696e   return self._in
-00025490: 7465 726e 616c 5f73 656c 665f 636f 6d70  ternal_self_comp
-000254a0: 6172 6528 4d41 5448 5f4f 5045 5241 5449  are(MATH_OPERATI
-000254b0: 4f4e 2e43 4d50 5f4e 452c 2070 6572 696f  ON.CMP_NE, perio
-000254c0: 6473 3d70 6572 696f 6473 2c20 6661 6e63  ds=periods, fanc
-000254d0: 793d 6661 6e63 7929 0d0a 0d0a 2020 2020  y=fancy)....    
-000254e0: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
-000254f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00025500: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00025510: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
-00025520: 6566 2064 6966 6628 7365 6c66 2c20 7065  ef diff(self, pe
-00025530: 7269 6f64 733d 3129 202d 3e20 4661 7374  riods=1) -> Fast
-00025540: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
-00025550: 2222 220d 0a20 2020 2020 2020 204f 6e6c  """..        Onl
-00025560: 7920 776f 726b 7320 666f 7220 696e 7465  y works for inte
-00025570: 6765 7273 2061 6e64 2066 6c6f 6174 732e  gers and floats.
-00025580: 0d0a 0d0a 2020 2020 2020 2020 5061 7261  ....        Para
-00025590: 6d65 7465 7273 0d0a 2020 2020 2020 2020  meters..        
-000255a0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-000255b0: 2020 2020 7065 7269 6f64 733a 2069 6e74      periods: int
-000255c0: 2c20 6465 6661 756c 7473 2074 6f20 312e  , defaults to 1.
-000255d0: 2020 486f 7720 6d61 6e79 2065 6c65 6d65    How many eleme
-000255e0: 6e74 7320 746f 2073 6869 6674 2074 6865  nts to shift the
-000255f0: 2064 6174 6120 6265 666f 7265 2073 7562   data before sub
-00025600: 7472 6163 7469 6e67 2e0d 0a0d 0a20 2020  tracting.....   
-00025610: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
-00025620: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-00025630: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-00025640: 2073 616d 6520 6c65 6e67 7468 2061 7320   same length as 
-00025650: 6375 7272 656e 7420 6172 7261 792e 2020  current array.  
-00025660: 496e 7661 6c69 6473 2077 696c 6c20 6669  Invalids will fi
-00025670: 6c6c 2074 6865 2062 6567 696e 6e69 6e67  ll the beginning
-00025680: 2062 6173 6564 206f 6e20 7468 6520 7065   based on the pe
-00025690: 7269 6f64 732e 0d0a 0d0a 2020 2020 2020  riods.....      
-000256a0: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
-000256b0: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
-000256c0: 2020 2020 2020 3e3e 3e20 613d 7274 2e61        >>> a=rt.a
-000256d0: 7261 6e67 6528 332c 2064 7479 7065 3d72  range(3, dtype=r
-000256e0: 742e 696e 7433 3229 3b20 612e 6469 6666  t.int32); a.diff
-000256f0: 2829 0d0a 2020 2020 2020 2020 4661 7374  ()..        Fast
-00025700: 4172 7261 7928 5b2d 3231 3437 3438 3336  Array([-21474836
-00025710: 3438 2c20 2020 2020 2020 2020 2020 312c  48,           1,
-00025720: 2020 2020 2020 2020 2020 2031 5d29 0d0a             1])..
-00025730: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00025740: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-00025750: 2020 2020 2020 2020 2069 6e76 616c 6964           invalid
-00025760: 203d 2049 4e56 414c 4944 5f44 4943 545b   = INVALID_DICT[
-00025770: 7365 6c66 2e64 7479 7065 2e6e 756d 5d0d  self.dtype.num].
-00025780: 0a20 2020 2020 2020 2065 7863 6570 743a  .        except:
-00025790: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
-000257a0: 6973 6520 5479 7065 4572 726f 7228 6622  ise TypeError(f"
-000257b0: 7368 6966 7420 646f 6573 206e 6f74 2073  shift does not s
-000257c0: 7570 706f 7274 2074 6865 2064 7479 7065  upport the dtype
-000257d0: 207b 7365 6c66 2e64 7479 7065 2e6e 616d   {self.dtype.nam
-000257e0: 6521 727d 2229 0d0a 0d0a 2020 2020 2020  e!r}")....      
-000257f0: 2020 7465 6d70 203d 2065 6d70 7479 2873    temp = empty(s
-00025800: 656c 662e 7368 6170 652c 2064 7479 7065  elf.shape, dtype
-00025810: 3d73 656c 662e 6474 7970 6529 0d0a 2020  =self.dtype)..  
-00025820: 2020 2020 2020 6966 2061 6273 2870 6572        if abs(per
-00025830: 696f 6473 2920 3e3d 206c 656e 2873 656c  iods) >= len(sel
-00025840: 6629 3a0d 0a20 2020 2020 2020 2020 2020  f):..           
-00025850: 2074 656d 702e 6669 6c6c 2869 6e76 616c   temp.fill(inval
-00025860: 6964 290d 0a20 2020 2020 2020 2065 6c69  id)..        eli
-00025870: 6620 7065 7269 6f64 7320 3e20 303a 0d0a  f periods > 0:..
-00025880: 2020 2020 2020 2020 2020 2020 7465 6d70              temp
-00025890: 5b3a 7065 7269 6f64 735d 203d 2069 6e76  [:periods] = inv
-000258a0: 616c 6964 0d0a 0d0a 2020 2020 2020 2020  alid....        
-000258b0: 2020 2020 2320 6f75 7470 7574 2069 6e74      # output int
-000258c0: 6f20 7468 6520 656d 7074 7920 6172 7261  o the empty arra
-000258d0: 7920 7765 2063 7265 6174 6564 2c20 6e70  y we created, np
-000258e0: 2e73 7562 7472 6163 7420 7769 6c6c 2063  .subtract will c
-000258f0: 616c 6c20 4661 7374 4172 7261 7927 7320  all FastArray's 
-00025900: 7375 6274 7261 6374 0d0a 2020 2020 2020  subtract..      
-00025910: 2020 2020 2020 6e70 2e73 7562 7472 6163        np.subtrac
-00025920: 7428 7365 6c66 5b70 6572 696f 6473 3a5d  t(self[periods:]
-00025930: 2c20 7365 6c66 5b3a 2d70 6572 696f 6473  , self[:-periods
-00025940: 5d2c 206f 7574 3d74 656d 705b 7065 7269  ], out=temp[peri
-00025950: 6f64 733a 5d29 0d0a 2020 2020 2020 2020  ods:])..        
-00025960: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-00025970: 2020 2074 656d 705b 7065 7269 6f64 733a     temp[periods:
-00025980: 5d20 3d20 696e 7661 6c69 640d 0a20 2020  ] = invalid..   
-00025990: 2020 2020 2020 2020 206e 702e 7375 6274           np.subt
-000259a0: 7261 6374 2873 656c 665b 3a70 6572 696f  ract(self[:perio
-000259b0: 6473 5d2c 2073 656c 665b 2d70 6572 696f  ds], self[-perio
-000259c0: 6473 3a5d 2c20 6f75 743d 7465 6d70 5b3a  ds:], out=temp[:
-000259d0: 7065 7269 6f64 735d 290d 0a20 2020 2020  periods])..     
-000259e0: 2020 2072 6574 7572 6e20 7465 6d70 0d0a     return temp..
-000259f0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
-00025a00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00025a10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00025a20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
-00025a30: 0a20 2020 2064 6566 2069 736e 6128 7365  .    def isna(se
-00025a40: 6c66 2920 2d3e 2046 6173 7441 7272 6179  lf) -> FastArray
-00025a50: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-00025a60: 2020 2020 2020 2020 6973 6e61 6e20 6973          isnan is
-00025a70: 206d 6170 7065 6420 6469 7265 6374 6c79   mapped directly
-00025a80: 2074 6f20 6973 6e61 6e28 290d 0a20 2020   to isnan()..   
-00025a90: 2020 2020 2043 6174 6567 6f72 6963 616c       Categorical
-00025aa0: 7320 616e 6420 4461 7465 5469 6d65 2074  s and DateTime t
-00025ab0: 616b 6520 6f76 6572 2069 736e 616e 2e0d  ake over isnan..
-00025ac0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-00025ad0: 6179 2068 616e 646c 6573 2073 656e 7469  ay handles senti
-00025ae0: 6e65 6c73 2e0d 0a0d 0a20 2020 2020 2020  nels.....       
-00025af0: 203e 3e3e 2061 3d61 7261 6e67 6528 3130   >>> a=arange(10
-00025b00: 302e 3029 0d0a 2020 2020 2020 2020 3e3e  0.0)..        >>
-00025b10: 3e20 615b 355d 3d6e 702e 6e61 6e0d 0a20  > a[5]=np.nan.. 
-00025b20: 2020 2020 2020 203e 3e3e 2061 5b38 375d         >>> a[87]
-00025b30: 3d6e 702e 6e61 6e0d 0a20 2020 2020 2020  =np.nan..       
-00025b40: 203e 3e3e 2073 756d 2861 2e69 736e 6128   >>> sum(a.isna(
-00025b50: 2929 0d0a 2020 2020 2020 2020 320d 0a20  ))..        2.. 
-00025b60: 2020 2020 2020 203e 3e3e 2073 756d 2861         >>> sum(a
-00025b70: 2e61 7374 7970 6528 6e70 2e69 6e74 3332  .astype(np.int32
-00025b80: 292e 6973 6e61 2829 290d 0a20 2020 2020  ).isna())..     
-00025b90: 2020 2032 0d0a 2020 2020 2020 2020 2222     2..        ""
-00025ba0: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
-00025bb0: 6e20 7365 6c66 2e69 736e 616e 2829 0d0a  n self.isnan()..
-00025bc0: 0d0a 2020 2020 6465 6620 6e6f 746e 6128  ..    def notna(
-00025bd0: 7365 6c66 2920 2d3e 2046 6173 7441 7272  self) -> FastArr
-00025be0: 6179 3a0d 0a20 2020 2020 2020 2022 2222  ay:..        """
-00025bf0: 0d0a 2020 2020 2020 2020 6e6f 746e 6120  ..        notna 
-00025c00: 6973 206d 6170 7065 6420 6469 7265 6374  is mapped direct
-00025c10: 6c79 2074 6f20 6973 6e6f 746e 616e 2829  ly to isnotnan()
-00025c20: 0d0a 2020 2020 2020 2020 4361 7465 676f  ..        Catego
-00025c30: 7269 6361 6c73 2061 6e64 2044 6174 6554  ricals and DateT
-00025c40: 696d 6520 7461 6b65 206f 7665 7220 6973  ime take over is
-00025c50: 6e6f 746e 616e 2e0d 0a20 2020 2020 2020  notnan...       
-00025c60: 2046 6173 7441 7272 6179 2068 616e 646c   FastArray handl
-00025c70: 6573 2073 656e 7469 6e65 6c73 2e0d 0a0d  es sentinels....
-00025c80: 0a20 2020 2020 2020 203e 3e3e 2061 3d61  .        >>> a=a
-00025c90: 7261 6e67 6528 3130 302e 3029 0d0a 2020  range(100.0)..  
-00025ca0: 2020 2020 2020 3e3e 3e20 615b 355d 3d6e        >>> a[5]=n
-00025cb0: 702e 6e61 6e0d 0a20 2020 2020 2020 203e  p.nan..        >
-00025cc0: 3e3e 2061 5b38 375d 3d6e 702e 6e61 6e0d  >> a[87]=np.nan.
-00025cd0: 0a20 2020 2020 2020 203e 3e3e 2073 756d  .        >>> sum
-00025ce0: 2861 2e6e 6f74 6e61 2829 290d 0a20 2020  (a.notna())..   
-00025cf0: 2020 2020 2039 380d 0a20 2020 2020 2020       98..       
-00025d00: 203e 3e3e 2073 756d 2861 2e61 7374 7970   >>> sum(a.astyp
-00025d10: 6528 6e70 2e69 6e74 3332 292e 6e6f 746e  e(np.int32).notn
-00025d20: 6128 2929 0d0a 2020 2020 2020 2020 3938  a())..        98
-00025d30: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00025d40: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00025d50: 6c66 2e69 736e 6f74 6e61 6e28 290d 0a0d  lf.isnotnan()...
-00025d60: 0a20 2020 2064 6566 2072 6570 6c61 6365  .    def replace
-00025d70: 6e61 2873 656c 662c 2076 616c 7565 2c20  na(self, value, 
-00025d80: 696e 706c 6163 653d 4661 6c73 6529 202d  inplace=False) -
-00025d90: 3e20 4661 7374 4172 7261 793a 0d0a 2020  > FastArray:..  
-00025da0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00025db0: 2020 2052 6574 7572 6e20 6120 6046 6173     Return a `Fas
-00025dc0: 7441 7272 6179 6020 7769 7468 2061 6c6c  tArray` with all
-00025dd0: 204e 614e 2061 6e64 2069 6e76 616c 6964   NaN and invalid
-00025de0: 2076 616c 7565 7320 7365 7420 746f 2074   values set to t
-00025df0: 6865 2073 7065 6369 6669 6564 2076 616c  he specified val
-00025e00: 7565 2e0d 0a0d 0a20 2020 2020 2020 204f  ue.....        O
-00025e10: 7074 696f 6e61 6c6c 792c 2079 6f75 2063  ptionally, you c
-00025e20: 616e 206d 6f64 6966 7920 7468 6520 6f72  an modify the or
-00025e30: 6967 696e 616c 2060 4661 7374 4172 7261  iginal `FastArra
-00025e40: 7960 2069 6620 6974 2773 206e 6f74 206c  y` if it's not l
-00025e50: 6f63 6b65 642e 0d0a 0d0a 2020 2020 2020  ocked.....      
-00025e60: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
-00025e70: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-00025e80: 0d0a 2020 2020 2020 2020 7661 6c75 6520  ..        value 
-00025e90: 3a20 7363 616c 6172 206f 7220 6172 7261  : scalar or arra
-00025ea0: 790d 0a20 2020 2020 2020 2020 2020 2041  y..            A
-00025eb0: 2076 616c 7565 206f 7220 616e 2061 7272   value or an arr
-00025ec0: 6179 206f 6620 7661 6c75 6573 2074 6f20  ay of values to 
-00025ed0: 7265 706c 6163 6520 616c 6c20 4e61 4e20  replace all NaN 
-00025ee0: 616e 6420 696e 7661 6c69 6420 7661 6c75  and invalid valu
-00025ef0: 6573 2e20 4966 2061 6e0d 0a20 2020 2020  es. If an..     
-00025f00: 2020 2020 2020 2061 7272 6179 2c20 7468         array, th
-00025f10: 6520 6e75 6d62 6572 206f 6620 7661 6c75  e number of valu
-00025f20: 6573 206d 7573 7420 6571 7561 6c20 7468  es must equal th
-00025f30: 6520 6e75 6d62 6572 206f 6620 4e61 4e20  e number of NaN 
-00025f40: 616e 6420 696e 7661 6c69 6420 7661 6c75  and invalid valu
-00025f50: 6573 2e0d 0a20 2020 2020 2020 2069 6e70  es...        inp
-00025f60: 6c61 6365 203a 2062 6f6f 6c2c 2064 6566  lace : bool, def
-00025f70: 6175 6c74 2046 616c 7365 0d0a 2020 2020  ault False..    
-00025f80: 2020 2020 2020 2020 4966 2046 616c 7365          If False
-00025f90: 2c20 7265 7475 726e 2061 2063 6f70 7920  , return a copy 
-00025fa0: 6f66 2074 6865 2060 4661 7374 4172 7261  of the `FastArra
-00025fb0: 7960 2e20 4966 2054 7275 652c 206d 6f64  y`. If True, mod
-00025fc0: 6966 7920 7468 6520 6f72 6967 696e 616c  ify the original
-00025fd0: 2e0d 0a20 2020 2020 2020 2020 2020 2054  ...            T
-00025fe0: 6869 7320 7769 6c6c 206d 6f64 6966 7920  his will modify 
-00025ff0: 616e 7920 6f74 6865 7220 7669 6577 7320  any other views 
-00026000: 6f6e 2074 6869 7320 6f62 6a65 6374 2e20  on this object. 
-00026010: 5468 6973 2066 6169 6c73 2069 6620 7468  This fails if th
-00026020: 650d 0a20 2020 2020 2020 2020 2020 2060  e..            `
-00026030: 4661 7374 4172 7261 7960 2069 7320 6c6f  FastArray` is lo
-00026040: 636b 6564 2e0d 0a0d 0a20 2020 2020 2020  cked.....       
-00026050: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
-00026060: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
-00026070: 2020 2060 4661 7374 4172 7261 7960 206f     `FastArray` o
-00026080: 7220 4e6f 6e65 0d0a 2020 2020 2020 2020  r None..        
-00026090: 2020 2020 5468 6520 6046 6173 7441 7272      The `FastArr
-000260a0: 6179 6020 7769 6c6c 2062 6520 7468 6520  ay` will be the 
-000260b0: 7361 6d65 2073 697a 6520 616e 6420 6474  same size and dt
-000260c0: 7970 6520 6173 2074 6865 206f 7269 6769  ype as the origi
-000260d0: 6e61 6c20 6172 7261 792e 0d0a 2020 2020  nal array...    
-000260e0: 2020 2020 2020 2020 5265 7475 726e 7320          Returns 
-000260f0: 4e6f 6e65 2069 6620 6060 696e 706c 6163  None if ``inplac
-00026100: 6520 3d20 5472 7565 6060 2e0d 0a0d 0a20  e = True``..... 
-00026110: 2020 2020 2020 2053 6565 2041 6c73 6f0d         See Also.
-00026120: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00026130: 2d0d 0a20 2020 2020 2020 2046 6173 7441  -..        FastA
-00026140: 7272 6179 2e66 696c 6c6e 6120 3a20 5265  rray.fillna : Re
-00026150: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
-00026160: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
-00026170: 6820 6120 7370 6563 6966 6965 6420 7661  h a specified va
-00026180: 6c75 6520 6f72 206e 6561 7262 7920 6461  lue or nearby da
-00026190: 7461 2e0d 0a20 2020 2020 2020 2044 6174  ta...        Dat
-000261a0: 6173 6574 2e66 696c 6c6e 6120 3a20 5265  aset.fillna : Re
-000261b0: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
-000261c0: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
-000261d0: 6820 6120 7370 6563 6966 6965 6420 7661  h a specified va
-000261e0: 6c75 6520 6f72 206e 6561 7262 7920 6461  lue or nearby da
-000261f0: 7461 2e0d 0a20 2020 2020 2020 2043 6174  ta...        Cat
-00026200: 6567 6f72 6963 616c 2e66 696c 6c5f 666f  egorical.fill_fo
-00026210: 7277 6172 6420 3a20 5265 706c 6163 6520  rward : Replace 
-00026220: 4e61 4e20 616e 6420 696e 7661 6c69 6420  NaN and invalid 
-00026230: 7661 6c75 6573 2077 6974 6820 7468 6520  values with the 
-00026240: 6c61 7374 2076 616c 6964 2067 726f 7570  last valid group
-00026250: 2076 616c 7565 2e0d 0a20 2020 2020 2020   value...       
-00026260: 2043 6174 6567 6f72 6963 616c 2e66 696c   Categorical.fil
-00026270: 6c5f 6261 636b 7761 7264 203a 2052 6570  l_backward : Rep
-00026280: 6c61 6365 204e 614e 2061 6e64 2069 6e76  lace NaN and inv
-00026290: 616c 6964 2076 616c 7565 7320 7769 7468  alid values with
-000262a0: 2074 6865 206e 6578 7420 7661 6c69 6420   the next valid 
-000262b0: 6772 6f75 7020 7661 6c75 652e 0d0a 2020  group value...  
-000262c0: 2020 2020 2020 4772 6f75 7042 792e 6669        GroupBy.fi
-000262d0: 6c6c 5f66 6f72 7761 7264 203a 2052 6570  ll_forward : Rep
-000262e0: 6c61 6365 204e 614e 2061 6e64 2069 6e76  lace NaN and inv
-000262f0: 616c 6964 2076 616c 7565 7320 7769 7468  alid values with
-00026300: 2074 6865 206c 6173 7420 7661 6c69 6420   the last valid 
-00026310: 6772 6f75 7020 7661 6c75 652e 0d0a 2020  group value...  
-00026320: 2020 2020 2020 4772 6f75 7042 792e 6669        GroupBy.fi
-00026330: 6c6c 5f62 6163 6b77 6172 6420 3a20 5265  ll_backward : Re
-00026340: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
-00026350: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
-00026360: 6820 7468 6520 6e65 7874 2076 616c 6964  h the next valid
-00026370: 2067 726f 7570 2076 616c 7565 2e0d 0a0d   group value....
-00026380: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
-00026390: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-000263a0: 2d2d 2d0d 0a20 2020 2020 2020 2052 6570  ---..        Rep
-000263b0: 6c61 6365 2061 6c6c 2069 6e73 7461 6e63  lace all instanc
-000263c0: 6573 206f 6620 4e61 4e20 7769 7468 2061  es of NaN with a
-000263d0: 2073 696e 676c 6520 7661 6c75 653a 0d0a   single value:..
-000263e0: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
-000263f0: 3d20 7274 2e46 6173 7441 7272 6179 285b  = rt.FastArray([
-00026400: 7274 2e6e 616e 2c20 312e 302c 2072 742e  rt.nan, 1.0, rt.
-00026410: 6e61 6e2c 2033 2e30 5d29 0d0a 2020 2020  nan, 3.0])..    
-00026420: 2020 2020 3e3e 3e20 612e 7265 706c 6163      >>> a.replac
-00026430: 656e 6128 3029 0d0a 2020 2020 2020 2020  ena(0)..        
-00026440: 4661 7374 4172 7261 7928 5b30 2e2c 2031  FastArray([0., 1
-00026450: 2e2c 2030 2e2c 2033 2e5d 290d 0a0d 0a20  ., 0., 3.]).... 
-00026460: 2020 2020 2020 2052 6570 6c61 6365 2061         Replace a
-00026470: 6c6c 2069 6e76 616c 6964 2076 616c 7565  ll invalid value
-00026480: 7320 7769 7468 2030 733a 0d0a 0d0a 2020  s with 0s:....  
-00026490: 2020 2020 2020 3e3e 3e20 6220 3d20 7274        >>> b = rt
-000264a0: 2e46 6173 7441 7272 6179 285b 302c 2031  .FastArray([0, 1
-000264b0: 2c20 322c 2033 2c20 342c 2035 5d29 0d0a  , 2, 3, 4, 5])..
-000264c0: 2020 2020 2020 2020 3e3e 3e20 625b 303a          >>> b[0:
-000264d0: 335d 203d 2062 2e69 6e76 0d0a 2020 2020  3] = b.inv..    
-000264e0: 2020 2020 3e3e 3e20 622e 7265 706c 6163      >>> b.replac
-000264f0: 656e 6128 3029 0d0a 2020 2020 2020 2020  ena(0)..        
-00026500: 4661 7374 4172 7261 7928 5b30 2c20 302c  FastArray([0, 0,
-00026510: 2030 2c20 332c 2034 2c20 355d 290d 0a0d   0, 3, 4, 5])...
-00026520: 0a20 2020 2020 2020 2052 6570 6c61 6365  .        Replace
-00026530: 2065 6163 6820 696e 7374 616e 6365 206f   each instance o
-00026540: 6620 4e61 4e20 7769 7468 2061 2064 6966  f NaN with a dif
-00026550: 6665 7265 6e74 2076 616c 7565 3a0d 0a0d  ferent value:...
-00026560: 0a20 2020 2020 2020 203e 3e3e 2061 2e72  .        >>> a.r
-00026570: 6570 6c61 6365 6e61 285b 302c 2032 5d29  eplacena([0, 2])
-00026580: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-00026590: 7261 7928 5b30 2e2c 2031 2e2c 2032 2e2c  ray([0., 1., 2.,
-000265a0: 2033 2e5d 290d 0a20 2020 2020 2020 2022   3.])..        "
-000265b0: 2222 0d0a 2020 2020 2020 2020 696e 7374  ""..        inst
-000265c0: 203d 2073 656c 6620 6966 2069 6e70 6c61   = self if inpla
-000265d0: 6365 2065 6c73 6520 7365 6c66 2e63 6f70  ce else self.cop
-000265e0: 7928 290d 0a20 2020 2020 2020 2069 736e  y()..        isn
-000265f0: 6120 3d20 696e 7374 2e69 736e 6128 290d  a = inst.isna().
-00026600: 0a20 2020 2020 2020 2069 6620 6973 6e61  .        if isna
-00026610: 2e61 6e79 2829 3a0d 0a20 2020 2020 2020  .any():..       
-00026620: 2020 2020 2069 6e73 745b 6973 6e61 5d20       inst[isna] 
-00026630: 3d20 7661 6c75 650d 0a20 2020 2020 2020  = value..       
-00026640: 2069 6620 696e 706c 6163 653a 0d0a 2020   if inplace:..  
-00026650: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00026660: 204e 6f6e 650d 0a20 2020 2020 2020 2072   None..        r
-00026670: 6574 7572 6e20 696e 7374 0d0a 0d0a 2020  eturn inst....  
-00026680: 2020 6465 6620 6669 6c6c 6e61 2873 656c    def fillna(sel
-00026690: 662c 2076 616c 7565 3d4e 6f6e 652c 206d  f, value=None, m
-000266a0: 6574 686f 643d 4e6f 6e65 2c20 696e 706c  ethod=None, inpl
-000266b0: 6163 653d 4661 6c73 652c 206c 696d 6974  ace=False, limit
-000266c0: 3d4e 6f6e 6529 202d 3e20 4661 7374 4172  =None) -> FastAr
-000266d0: 7261 793a 0d0a 2020 2020 2020 2020 2222  ray:..        ""
-000266e0: 220d 0a20 2020 2020 2020 2052 6570 6c61  "..        Repla
-000266f0: 6365 204e 614e 2061 6e64 2069 6e76 616c  ce NaN and inval
-00026700: 6964 2076 616c 7565 7320 7769 7468 2061  id values with a
-00026710: 2073 7065 6369 6669 6564 2076 616c 7565   specified value
-00026720: 206f 7220 6e65 6172 6279 2064 6174 612e   or nearby data.
-00026730: 0d0a 0d0a 2020 2020 2020 2020 4f70 7469  ....        Opti
-00026740: 6f6e 616c 6c79 2c20 796f 7520 6361 6e20  onally, you can 
-00026750: 6d6f 6469 6679 2074 6865 206f 7269 6769  modify the origi
-00026760: 6e61 6c20 6046 6173 7441 7272 6179 6020  nal `FastArray` 
-00026770: 6966 2069 7427 7320 6e6f 7420 6c6f 636b  if it's not lock
-00026780: 6564 2e0d 0a0d 0a20 2020 2020 2020 2050  ed.....        P
-00026790: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
-000267a0: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
-000267b0: 2020 2020 2020 2076 616c 7565 203a 2073         value : s
-000267c0: 6361 6c61 7220 6f72 2061 7272 6179 2c20  calar or array, 
-000267d0: 6465 6661 756c 7420 4e6f 6e65 0d0a 2020  default None..  
-000267e0: 2020 2020 2020 2020 2020 4120 7661 6c75            A valu
-000267f0: 6520 6f72 2061 6e20 6172 7261 7920 6f66  e or an array of
-00026800: 2076 616c 7565 7320 746f 2072 6570 6c61   values to repla
-00026810: 6365 2061 6c6c 204e 614e 2061 6e64 2069  ce all NaN and i
-00026820: 6e76 616c 6964 2076 616c 7565 732e 0d0a  nvalid values...
-00026830: 2020 2020 2020 2020 2020 2020 4120 6076              A `v
-00026840: 616c 7565 6020 6973 2072 6571 7569 7265  alue` is require
-00026850: 6420 6966 2060 606d 6574 686f 6420 3d20  d if ``method = 
-00026860: 4e6f 6e65 6060 2e20 416e 2061 7272 6179  None``. An array
-00026870: 2063 616e 2062 6520 7573 6564 206f 6e6c   can be used onl
-00026880: 7920 7768 656e 0d0a 2020 2020 2020 2020  y when..        
-00026890: 2020 2020 6060 6d65 7468 6f64 203d 204e      ``method = N
-000268a0: 6f6e 6560 602e 2049 6620 616e 2061 7272  one``. If an arr
-000268b0: 6179 2069 7320 7573 6564 2c20 7468 6520  ay is used, the 
-000268c0: 6e75 6d62 6572 206f 6620 7661 6c75 6573  number of values
-000268d0: 2069 6e20 7468 6520 6172 7261 790d 0a20   in the array.. 
-000268e0: 2020 2020 2020 2020 2020 206d 7573 7420             must 
-000268f0: 6571 7561 6c20 7468 6520 6e75 6d62 6572  equal the number
-00026900: 206f 6620 4e61 4e20 616e 6420 696e 7661   of NaN and inva
-00026910: 6c69 6420 7661 6c75 6573 2e0d 0a20 2020  lid values...   
-00026920: 2020 2020 206d 6574 686f 6420 3a20 7b4e       method : {N
-00026930: 6f6e 652c 2027 6261 636b 6669 6c6c 272c  one, 'backfill',
-00026940: 2027 6266 696c 6c27 2c20 2770 6164 272c   'bfill', 'pad',
-00026950: 2027 6666 696c 6c27 7d2c 2064 6566 6175   'ffill'}, defau
-00026960: 6c74 204e 6f6e 650d 0a20 2020 2020 2020  lt None..       
-00026970: 2020 2020 204d 6574 686f 6420 746f 2075       Method to u
-00026980: 7365 2074 6f20 7072 6f70 6167 6174 6520  se to propagate 
-00026990: 7661 6c69 6420 7661 6c75 6573 2e0d 0a0d  valid values....
-000269a0: 0a20 2020 2020 2020 2020 2020 202a 2062  .            * b
-000269b0: 6163 6b66 696c 6c2f 6266 696c 6c3a 2050  ackfill/bfill: P
-000269c0: 726f 7061 6761 7465 7320 7468 6520 6e65  ropagates the ne
-000269d0: 7874 2065 6e63 6f75 6e74 6572 6564 2076  xt encountered v
-000269e0: 616c 6964 2076 616c 7565 2062 6163 6b77  alid value backw
-000269f0: 6172 642e 0d0a 2020 2020 2020 2020 2020  ard...          
-00026a00: 2020 2020 4361 6c6c 7320 3a6d 6574 683a      Calls :meth:
-00026a10: 6046 6173 7441 7272 6179 2e66 696c 6c5f  `FastArray.fill_
-00026a20: 6261 636b 7761 7264 602e 0d0a 2020 2020  backward`...    
-00026a30: 2020 2020 2020 2020 2a20 7061 642f 6666          * pad/ff
-00026a40: 696c 6c3a 2050 726f 7061 6761 7465 7320  ill: Propagates 
-00026a50: 7468 6520 6c61 7374 2065 6e63 6f75 6e74  the last encount
-00026a60: 6572 6564 2076 616c 6964 2076 616c 7565  ered valid value
-00026a70: 2066 6f72 7761 7264 2e20 4361 6c6c 730d   forward. Calls.
-00026a80: 0a20 2020 2020 2020 2020 2020 2020 203a  .              :
-00026a90: 6d65 7468 3a60 4661 7374 4172 7261 792e  meth:`FastArray.
-00026aa0: 6669 6c6c 5f66 6f72 7761 7264 602e 0d0a  fill_forward`...
-00026ab0: 2020 2020 2020 2020 2020 2020 2a20 4e6f              * No
-00026ac0: 6e65 3a20 4120 7265 706c 6163 656d 656e  ne: A replacemen
-00026ad0: 7420 7661 6c75 6520 6973 2072 6571 7569  t value is requi
-00026ae0: 7265 6420 6966 2060 606d 6574 686f 6420  red if ``method 
-00026af0: 3d20 4e6f 6e65 6060 2e20 4361 6c6c 730d  = None``. Calls.
-00026b00: 0a20 2020 2020 2020 2020 2020 2020 203a  .              :
-00026b10: 6d65 7468 3a60 4661 7374 4172 7261 792e  meth:`FastArray.
-00026b20: 7265 706c 6163 656e 6160 2e0d 0a20 2020  replacena`...   
-00026b30: 2020 2020 2020 2020 2049 6620 7468 6572           If ther
-00026b40: 6527 7320 6e6f 7420 6120 7661 6c69 6420  e's not a valid 
-00026b50: 7661 6c75 6520 746f 2070 726f 7061 6761  value to propaga
-00026b60: 7465 2066 6f72 7761 7264 206f 7220 6261  te forward or ba
-00026b70: 636b 7761 7264 2c20 7468 6520 4e61 4e20  ckward, the NaN 
-00026b80: 6f72 0d0a 2020 2020 2020 2020 2020 2020  or..            
-00026b90: 696e 7661 6c69 6420 7661 6c75 6520 6973  invalid value is
-00026ba0: 206e 6f74 2072 6570 6c61 6365 6420 756e   not replaced un
-00026bb0: 6c65 7373 2079 6f75 2061 6c73 6f20 7370  less you also sp
-00026bc0: 6563 6966 7920 6120 6076 616c 7565 602e  ecify a `value`.
-00026bd0: 0d0a 2020 2020 2020 2020 696e 706c 6163  ..        inplac
-00026be0: 6520 3a20 626f 6f6c 2c20 6465 6661 756c  e : bool, defaul
-00026bf0: 7420 4661 6c73 650d 0a20 2020 2020 2020  t False..       
-00026c00: 2020 2020 2049 6620 4661 6c73 652c 2072       If False, r
-00026c10: 6574 7572 6e20 6120 636f 7079 206f 6620  eturn a copy of 
-00026c20: 7468 6520 6046 6173 7441 7272 6179 602e  the `FastArray`.
-00026c30: 2049 6620 5472 7565 2c20 6d6f 6469 6679   If True, modify
-00026c40: 206f 7269 6769 6e61 6c20 6461 7461 2e0d   original data..
-00026c50: 0a20 2020 2020 2020 2020 2020 2054 6869  .            Thi
-00026c60: 7320 7769 6c6c 206d 6f64 6966 7920 616e  s will modify an
-00026c70: 7920 6f74 6865 7220 7669 6577 7320 6f6e  y other views on
-00026c80: 2074 6869 7320 6f62 6a65 6374 2e20 5468   this object. Th
-00026c90: 6973 2066 6169 6c73 2069 6620 7468 650d  is fails if the.
-00026ca0: 0a20 2020 2020 2020 2020 2020 2060 4661  .            `Fa
-00026cb0: 7374 4172 7261 7960 2069 7320 6c6f 636b  stArray` is lock
-00026cc0: 6564 2e0d 0a20 2020 2020 2020 206c 696d  ed...        lim
-00026cd0: 6974 203a 2069 6e74 2c20 6465 6661 756c  it : int, defaul
-00026ce0: 7420 4e6f 6e65 0d0a 2020 2020 2020 2020  t None..        
-00026cf0: 2020 2020 4966 2060 6d65 7468 6f64 6020      If `method` 
-00026d00: 6973 2073 7065 6369 6669 6564 2c20 7468  is specified, th
-00026d10: 6973 2069 7320 7468 6520 6d61 7869 6d69  is is the maximi
-00026d20: 756d 206e 756d 6265 7220 6f66 2063 6f6e  um number of con
-00026d30: 7365 6375 7469 7665 204e 614e 206f 720d  secutive NaN or.
-00026d40: 0a20 2020 2020 2020 2020 2020 2069 6e76  .            inv
-00026d50: 616c 6964 2076 616c 7565 7320 746f 2066  alid values to f
-00026d60: 696c 6c2e 2049 6620 7468 6572 6520 6973  ill. If there is
-00026d70: 2061 2067 6170 2077 6974 6820 6d6f 7265   a gap with more
-00026d80: 2074 6861 6e20 7468 6973 206e 756d 6265   than this numbe
-00026d90: 7220 6f66 0d0a 2020 2020 2020 2020 2020  r of..          
-00026da0: 2020 636f 6e73 6563 7574 6976 6520 4e61    consecutive Na
-00026db0: 4e20 6f72 2069 6e76 616c 6964 2076 616c  N or invalid val
-00026dc0: 7565 732c 2074 6865 2067 6170 2077 696c  ues, the gap wil
-00026dd0: 6c20 6265 206f 6e6c 7920 7061 7274 6961  l be only partia
-00026de0: 6c6c 7920 6669 6c6c 6564 2e0d 0a0d 0a20  lly filled..... 
-00026df0: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
-00026e00: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
-00026e10: 0a20 2020 2020 2020 2060 4661 7374 4172  .        `FastAr
-00026e20: 7261 7960 0d0a 2020 2020 2020 2020 2020  ray`..          
-00026e30: 2020 5468 6520 6046 6173 7441 7272 6179    The `FastArray
-00026e40: 6020 7769 6c6c 2062 6520 7468 6520 7361  ` will be the sa
-00026e50: 6d65 2073 697a 6520 616e 6420 6474 7970  me size and dtyp
-00026e60: 6520 6173 2074 6865 206f 7269 6769 6e61  e as the origina
-00026e70: 6c20 6172 7261 792e 0d0a 0d0a 2020 2020  l array.....    
-00026e80: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
-00026e90: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-00026ea0: 2020 2020 2020 2020 7269 7074 6162 6c65          riptable
-00026eb0: 2e72 745f 6661 7374 6172 7261 796e 756d  .rt_fastarraynum
-00026ec0: 6261 2e66 696c 6c5f 666f 7277 6172 6420  ba.fill_forward 
-00026ed0: 3a20 5265 706c 6163 6520 4e61 4e20 616e  : Replace NaN an
-00026ee0: 6420 696e 7661 6c69 6420 7661 6c75 6573  d invalid values
-00026ef0: 2077 6974 680d 0a20 2020 2020 2020 2020   with..         
-00026f00: 2020 2074 6865 206c 6173 7420 7661 6c69     the last vali
-00026f10: 6420 7661 6c75 652e 0d0a 2020 2020 2020  d value...      
-00026f20: 2020 7269 7074 6162 6c65 2e72 745f 6661    riptable.rt_fa
-00026f30: 7374 6172 7261 796e 756d 6261 2e66 696c  starraynumba.fil
-00026f40: 6c5f 6261 636b 7761 7264 203a 2052 6570  l_backward : Rep
-00026f50: 6c61 6365 204e 614e 2061 6e64 2069 6e76  lace NaN and inv
-00026f60: 616c 6964 2076 616c 7565 7320 7769 7468  alid values with
-00026f70: 0d0a 2020 2020 2020 2020 2020 2020 7468  ..            th
-00026f80: 6520 6e65 7874 2076 616c 6964 2076 616c  e next valid val
-00026f90: 7565 2e0d 0a20 2020 2020 2020 2072 6970  ue...        rip
-00026fa0: 7461 626c 652e 6669 6c6c 5f66 6f72 7761  table.fill_forwa
-00026fb0: 7264 203a 2052 6570 6c61 6365 204e 614e  rd : Replace NaN
-00026fc0: 2061 6e64 2069 6e76 616c 6964 2076 616c   and invalid val
-00026fd0: 7565 7320 7769 7468 2074 6865 206c 6173  ues with the las
-00026fe0: 7420 7661 6c69 640d 0a20 2020 2020 2020  t valid..       
-00026ff0: 2020 2020 2076 616c 7565 2e0d 0a20 2020       value...   
-00027000: 2020 2020 2072 6970 7461 626c 652e 6669       riptable.fi
-00027010: 6c6c 5f62 6163 6b77 6172 6420 3a20 5265  ll_backward : Re
-00027020: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
-00027030: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
-00027040: 6820 7468 6520 6e65 7874 2076 616c 6964  h the next valid
-00027050: 0d0a 2020 2020 2020 2020 2020 2020 7661  ..            va
-00027060: 6c75 652e 0d0a 2020 2020 2020 2020 4461  lue...        Da
-00027070: 7461 7365 742e 6669 6c6c 6e61 203a 2052  taset.fillna : R
-00027080: 6570 6c61 6365 204e 614e 2061 6e64 2069  eplace NaN and i
-00027090: 6e76 616c 6964 2076 616c 7565 7320 7769  nvalid values wi
-000270a0: 7468 2061 2073 7065 6369 6669 6564 2076  th a specified v
-000270b0: 616c 7565 206f 720d 0a20 2020 2020 2020  alue or..       
-000270c0: 2020 2020 206e 6561 7262 7920 6461 7461       nearby data
-000270d0: 2e0d 0a20 2020 2020 2020 2046 6173 7441  ...        FastA
-000270e0: 7272 6179 2e72 6570 6c61 6365 6e61 203a  rray.replacena :
-000270f0: 2052 6570 6c61 6365 204e 614e 2061 6e64   Replace NaN and
-00027100: 2069 6e76 616c 6964 2076 616c 7565 7320   invalid values 
-00027110: 7769 7468 2061 2073 7065 6369 6669 6564  with a specified
-00027120: 2076 616c 7565 2e0d 0a20 2020 2020 2020   value...       
-00027130: 2043 6174 6567 6f72 6963 616c 2e66 696c   Categorical.fil
-00027140: 6c5f 666f 7277 6172 6420 3a20 5265 706c  l_forward : Repl
-00027150: 6163 6520 4e61 4e20 616e 6420 696e 7661  ace NaN and inva
-00027160: 6c69 6420 7661 6c75 6573 2077 6974 6820  lid values with 
-00027170: 7468 6520 6c61 7374 2076 616c 6964 0d0a  the last valid..
-00027180: 2020 2020 2020 2020 2020 2020 6772 6f75              grou
-00027190: 7020 7661 6c75 652e 0d0a 2020 2020 2020  p value...      
-000271a0: 2020 4361 7465 676f 7269 6361 6c2e 6669    Categorical.fi
-000271b0: 6c6c 5f62 6163 6b77 6172 6420 3a20 5265  ll_backward : Re
-000271c0: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
-000271d0: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
-000271e0: 6820 7468 6520 6e65 7874 2076 616c 6964  h the next valid
-000271f0: 0d0a 2020 2020 2020 2020 2020 2020 6772  ..            gr
-00027200: 6f75 7020 7661 6c75 652e 0d0a 2020 2020  oup value...    
-00027210: 2020 2020 4772 6f75 7042 792e 6669 6c6c      GroupBy.fill
-00027220: 5f66 6f72 7761 7264 203a 2052 6570 6c61  _forward : Repla
-00027230: 6365 204e 614e 2061 6e64 2069 6e76 616c  ce NaN and inval
-00027240: 6964 2076 616c 7565 7320 7769 7468 2074  id values with t
-00027250: 6865 206c 6173 7420 7661 6c69 640d 0a20  he last valid.. 
-00027260: 2020 2020 2020 2020 2020 2067 726f 7570             group
-00027270: 2076 616c 7565 2e0d 0a20 2020 2020 2020   value...       
-00027280: 2047 726f 7570 4279 2e66 696c 6c5f 6261   GroupBy.fill_ba
-00027290: 636b 7761 7264 203a 2052 6570 6c61 6365  ckward : Replace
-000272a0: 204e 614e 2061 6e64 2069 6e76 616c 6964   NaN and invalid
-000272b0: 2076 616c 7565 7320 7769 7468 2074 6865   values with the
-000272c0: 206e 6578 7420 7661 6c69 640d 0a20 2020   next valid..   
-000272d0: 2020 2020 2020 2020 2067 726f 7570 2076           group v
-000272e0: 616c 7565 2e0d 0a0d 0a20 2020 2020 2020  alue.....       
-000272f0: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
-00027300: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-00027310: 2020 2020 2052 6570 6c61 6365 2061 6c6c       Replace all
-00027320: 204e 614e 2076 616c 7565 7320 7769 7468   NaN values with
-00027330: 2030 733a 0d0a 0d0a 2020 2020 2020 2020   0s:....        
-00027340: 3e3e 3e20 6120 3d20 7274 2e46 6173 7441  >>> a = rt.FastA
-00027350: 7272 6179 285b 7274 2e6e 616e 2c20 312e  rray([rt.nan, 1.
-00027360: 302c 2072 742e 6e61 6e2c 2072 742e 6e61  0, rt.nan, rt.na
-00027370: 6e2c 2072 742e 6e61 6e2c 2035 2e30 5d29  n, rt.nan, 5.0])
-00027380: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-00027390: 6669 6c6c 6e61 2830 290d 0a20 2020 2020  fillna(0)..     
-000273a0: 2020 2046 6173 7441 7272 6179 285b 302e     FastArray([0.
-000273b0: 2c20 312e 2c20 302e 2c20 302e 2c20 302e  , 1., 0., 0., 0.
-000273c0: 2c20 352e 5d29 0d0a 0d0a 2020 2020 2020  , 5.])....      
-000273d0: 2020 5265 706c 6163 6520 616c 6c20 696e    Replace all in
-000273e0: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
-000273f0: 6820 3073 3a0d 0a0d 0a20 2020 2020 2020  h 0s:....       
-00027400: 203e 3e3e 2062 203d 2072 742e 4661 7374   >>> b = rt.Fast
-00027410: 4172 7261 7928 5b30 2c20 312c 2032 2c20  Array([0, 1, 2, 
-00027420: 332c 2034 2c20 355d 290d 0a20 2020 2020  3, 4, 5])..     
-00027430: 2020 203e 3e3e 2062 5b30 3a33 5d20 3d20     >>> b[0:3] = 
-00027440: 622e 696e 760d 0a20 2020 2020 2020 203e  b.inv..        >
-00027450: 3e3e 2062 2e66 696c 6c6e 6128 3029 0d0a  >> b.fillna(0)..
-00027460: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-00027470: 7928 5b30 2c20 302c 2030 2c20 332c 2034  y([0, 0, 0, 3, 4
-00027480: 2c20 355d 290d 0a0d 0a20 2020 2020 2020  , 5])....       
-00027490: 2052 6570 6c61 6365 2065 6163 6820 696e   Replace each in
-000274a0: 7374 616e 6365 206f 6620 4e61 4e20 7769  stance of NaN wi
-000274b0: 7468 2061 2064 6966 6665 7265 6e74 2076  th a different v
-000274c0: 616c 7565 3a0d 0a0d 0a20 2020 2020 2020  alue:....       
-000274d0: 203e 3e3e 2061 2e66 696c 6c6e 6128 5b30   >>> a.fillna([0
-000274e0: 2c20 322c 2033 2c20 345d 290d 0a20 2020  , 2, 3, 4])..   
-000274f0: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
-00027500: 302e 2c20 312e 2c20 322e 2c20 332e 2c20  0., 1., 2., 3., 
-00027510: 342e 2c20 352e 5d29 0d0a 0d0a 2020 2020  4., 5.])....    
-00027520: 2020 2020 5072 6f70 6167 6174 6520 7468      Propagate th
-00027530: 6520 6c61 7374 2065 6e63 6f75 6e74 6572  e last encounter
-00027540: 6564 2076 616c 6964 2076 616c 7565 2066  ed valid value f
-00027550: 6f72 7761 7264 2e20 4e6f 7465 2074 6861  orward. Note tha
-00027560: 7420 7768 6572 6520 7468 6572 6527 7320  t where there's 
-00027570: 6e6f 0d0a 2020 2020 2020 2020 7661 6c69  no..        vali
-00027580: 6420 7661 6c75 6520 746f 2070 726f 7061  d value to propa
-00027590: 6761 7465 2c20 7468 6520 4e61 4e20 6f72  gate, the NaN or
-000275a0: 2069 6e76 616c 6964 2076 616c 7565 2069   invalid value i
-000275b0: 736e 2774 2072 6570 6c61 6365 642e 0d0a  sn't replaced...
-000275c0: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
-000275d0: 6669 6c6c 6e61 286d 6574 686f 6420 3d20  fillna(method = 
-000275e0: 2766 6669 6c6c 2729 0d0a 2020 2020 2020  'ffill')..      
-000275f0: 2020 4661 7374 4172 7261 7928 5b6e 616e    FastArray([nan
-00027600: 2c20 2031 2e2c 2020 312e 2c20 2031 2e2c  ,  1.,  1.,  1.,
-00027610: 2020 312e 2c20 2035 2e5d 290d 0a0d 0a20    1.,  5.]).... 
-00027620: 2020 2020 2020 2059 6f75 2063 616e 2075         You can u
-00027630: 7365 2074 6865 2060 7661 6c75 6560 2070  se the `value` p
-00027640: 6172 616d 6574 6572 2074 6f20 7370 6563  arameter to spec
-00027650: 6966 7920 6120 7661 6c75 6520 746f 2075  ify a value to u
-00027660: 7365 2077 6865 7265 2074 6865 7265 2773  se where there's
-00027670: 206e 6f0d 0a20 2020 2020 2020 2076 616c   no..        val
-00027680: 6964 2076 616c 7565 2074 6f20 7072 6f70  id value to prop
-00027690: 6167 6174 652e 0d0a 0d0a 2020 2020 2020  agate.....      
-000276a0: 2020 3e3e 3e20 612e 6669 6c6c 6e61 2876    >>> a.fillna(v
-000276b0: 616c 7565 203d 2030 2c20 6d65 7468 6f64  alue = 0, method
-000276c0: 203d 2027 6666 696c 6c27 290d 0a20 2020   = 'ffill')..   
-000276d0: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
-000276e0: 302e 2c20 312e 2c20 312e 2c20 312e 2c20  0., 1., 1., 1., 
-000276f0: 312e 2c20 352e 5d29 0d0a 0d0a 2020 2020  1., 5.])....    
-00027700: 2020 2020 5265 706c 6163 6520 6f6e 6c79      Replace only
-00027710: 2074 6865 2066 6972 7374 204e 614e 206f   the first NaN o
-00027720: 7220 696e 7661 6c69 6420 7661 6c75 6520  r invalid value 
-00027730: 696e 2061 6e79 2063 6f6e 7365 6375 7469  in any consecuti
-00027740: 7665 2073 6572 6965 7320 6f66 204e 614e  ve series of NaN
-00027750: 206f 720d 0a20 2020 2020 2020 2069 6e76   or..        inv
-00027760: 616c 6964 2076 616c 7565 732e 0d0a 0d0a  alid values.....
-00027770: 2020 2020 2020 2020 3e3e 3e20 612e 6669          >>> a.fi
-00027780: 6c6c 6e61 286d 6574 686f 6420 3d20 2762  llna(method = 'b
-00027790: 6669 6c6c 272c 206c 696d 6974 203d 2031  fill', limit = 1
-000277a0: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
-000277b0: 7272 6179 285b 2031 2e2c 2020 312e 2c20  rray([ 1.,  1., 
-000277c0: 6e61 6e2c 206e 616e 2c20 2035 2e2c 2020  nan, nan,  5.,  
-000277d0: 352e 5d29 0d0a 2020 2020 2020 2020 2222  5.])..        ""
-000277e0: 220d 0a20 2020 2020 2020 2069 6620 6d65  "..        if me
-000277f0: 7468 6f64 2069 7320 6e6f 7420 4e6f 6e65  thod is not None
-00027800: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
-00027810: 6620 6d65 7468 6f64 2069 6e20 5b22 6261  f method in ["ba
-00027820: 636b 6669 6c6c 222c 2022 6266 696c 6c22  ckfill", "bfill"
-00027830: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
-00027840: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00027850: 6669 6c6c 5f62 6163 6b77 6172 6428 7661  fill_backward(va
-00027860: 6c75 652c 2069 6e70 6c61 6365 3d69 6e70  lue, inplace=inp
-00027870: 6c61 6365 2c20 6c69 6d69 743d 6c69 6d69  lace, limit=limi
-00027880: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
-00027890: 6966 206d 6574 686f 6420 696e 205b 2270  if method in ["p
-000278a0: 6164 222c 2022 6666 696c 6c22 5d3a 0d0a  ad", "ffill"]:..
-000278b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000278c0: 7265 7475 726e 2073 656c 662e 6669 6c6c  return self.fill
-000278d0: 5f66 6f72 7761 7264 2876 616c 7565 2c20  _forward(value, 
-000278e0: 696e 706c 6163 653d 696e 706c 6163 652c  inplace=inplace,
-000278f0: 206c 696d 6974 3d6c 696d 6974 290d 0a20   limit=limit).. 
-00027900: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00027910: 204b 6579 4572 726f 7228 6622 6669 6c6c   KeyError(f"fill
-00027920: 6e61 3a20 5468 6520 6d65 7468 6f64 207b  na: The method {
-00027930: 6d65 7468 6f64 2172 7d20 6d75 7374 2062  method!r} must b
-00027940: 6520 2762 6163 6b66 696c 6c27 2c20 2762  e 'backfill', 'b
-00027950: 6669 6c6c 272c 2027 7061 6427 2c20 2766  fill', 'pad', 'f
-00027960: 6669 6c6c 2722 290d 0a0d 0a20 2020 2020  fill'")....     
-00027970: 2020 2069 6620 7661 6c75 6520 6973 204e     if value is N
-00027980: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-00027990: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-000279a0: 6f72 2866 2266 696c 6c6e 613a 204d 7573  or(f"fillna: Mus
-000279b0: 7420 7370 6563 6966 7920 6569 7468 6572  t specify either
-000279c0: 2061 2027 7661 6c75 6527 2074 6861 7420   a 'value' that 
-000279d0: 6973 206e 6f74 204e 6f6e 6520 6f72 2061  is not None or a
-000279e0: 2027 6d65 7468 6f64 2720 7468 6174 2069   'method' that i
-000279f0: 7320 6e6f 7420 4e6f 6e65 2e22 290d 0a0d  s not None.")...
-00027a00: 0a20 2020 2020 2020 2069 6620 6c69 6d69  .        if limi
-00027a10: 7420 6973 206e 6f74 204e 6f6e 653a 0d0a  t is not None:..
-00027a20: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00027a30: 6520 4b65 7945 7272 6f72 2866 2266 696c  e KeyError(f"fil
-00027a40: 6c6e 613a 2054 6865 7265 2069 7320 6e6f  lna: There is no
-00027a50: 206c 696d 6974 2077 6865 6e20 6d65 7468   limit when meth
-00027a60: 6f64 2069 7320 4e6f 6e65 2229 0d0a 0d0a  od is None")....
-00027a70: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00027a80: 656c 662e 7265 706c 6163 656e 6128 7661  elf.replacena(va
-00027a90: 6c75 652c 2069 6e70 6c61 6365 3d69 6e70  lue, inplace=inp
-00027aa0: 6c61 6365 290d 0a0d 0a20 2020 2064 6566  lace)....    def
-00027ab0: 2073 7461 7478 2873 656c 6629 202d 3e20   statx(self) -> 
-00027ac0: 4461 7461 7365 743a 0d0a 2020 2020 2020  Dataset:..      
-00027ad0: 2020 7265 7475 726e 2073 7461 7478 2873    return statx(s
-00027ae0: 656c 6629 0d0a 0d0a 2020 2020 2320 2d2d  elf)....    # --
-00027af0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00027b00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00027b10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00027b20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00027b30: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
-00027b40: 6566 205f 6973 5f6e 6f74 5f73 7570 706f  ef _is_not_suppo
-00027b50: 7274 6564 2873 656c 662c 2061 7272 293a  rted(self, arr):
-00027b60: 0d0a 2020 2020 2020 2020 2222 2272 6574  ..        """ret
-00027b70: 7572 6e73 2054 7275 6520 6966 2061 206e  urns True if a n
-00027b80: 756d 7079 2061 7272 6179 2069 7320 6e6f  umpy array is no
-00027b90: 7420 4661 7374 4172 7261 7920 696e 7465  t FastArray inte
-00027ba0: 726e 616c 6c79 2073 7570 706f 7274 6564  rnally supported
-00027bb0: 2222 220d 0a20 2020 2020 2020 2069 6620  """..        if 
-00027bc0: 6e6f 7420 2861 7272 2e66 6c61 6773 2e63  not (arr.flags.c
-00027bd0: 5f63 6f6e 7469 6775 6f75 7320 6f72 2061  _contiguous or a
-00027be0: 7272 2e66 6c61 6773 2e66 5f63 6f6e 7469  rr.flags.f_conti
-00027bf0: 6775 6f75 7329 3a0d 0a20 2020 2020 2020  guous):..       
-00027c00: 2020 2020 2023 2054 4f44 4f20 656e 6162       # TODO enab
-00027c10: 6c65 2074 6869 7320 7761 726e 696e 6720  le this warning 
-00027c20: 696e 2061 2066 7574 7572 6520 6d69 6e6f  in a future mino
-00027c30: 7220 7265 6c65 6173 650d 0a20 2020 2020  r release..     
-00027c40: 2020 2020 2020 2023 2046 6173 7441 7272         # FastArr
-00027c50: 6179 2e5f 706f 7373 6962 6c79 5f77 6172  ay._possibly_war
-00027c60: 6e28 6627 5f69 735f 6e6f 745f 7375 7070  n(f'_is_not_supp
-00027c70: 6f72 7465 643a 2075 6e73 7570 706f 7274  orted: unsupport
-00027c80: 6564 2061 7272 6179 2066 6c61 6773 207b  ed array flags {
-00027c90: 6172 722e 666c 6167 737d 2729 0d0a 2020  arr.flags}')..  
-00027ca0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00027cb0: 2054 7275 650d 0a20 2020 2020 2020 2069   True..        i
-00027cc0: 6620 6172 722e 6474 7970 652e 6368 6172  f arr.dtype.char
-00027cd0: 206e 6f74 2069 6e20 4e75 6d70 7943 6861   not in NumpyCha
-00027ce0: 7254 7970 6573 2e53 7570 706f 7274 6564  rTypes.Supported
-00027cf0: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-00027d00: 2054 4f44 4f20 656e 6162 6c65 2074 6869   TODO enable thi
-00027d10: 7320 7761 726e 696e 6720 696e 2061 2066  s warning in a f
-00027d20: 7574 7572 6520 6d69 6e6f 7220 7265 6c65  uture minor rele
-00027d30: 6173 650d 0a20 2020 2020 2020 2020 2020  ase..           
-00027d40: 2023 2046 6173 7441 7272 6179 2e5f 706f   # FastArray._po
-00027d50: 7373 6962 6c79 5f77 6172 6e28 6627 5f69  ssibly_warn(f'_i
-00027d60: 735f 6e6f 745f 7375 7070 6f72 7465 643a  s_not_supported:
-00027d70: 2075 6e73 7570 706f 7274 6564 2061 7272   unsupported arr
-00027d80: 6179 2064 7479 7065 207b 6172 722e 6474  ay dtype {arr.dt
-00027d90: 7970 657d 5c6e 5375 7070 6f72 7465 6420  ype}\nSupported 
-00027da0: 6474 7970 6573 207b 4e75 6d70 7943 6861  dtypes {NumpyCha
-00027db0: 7254 7970 6573 2e53 7570 706f 7274 6564  rTypes.Supported
-00027dc0: 7d27 290d 0a20 2020 2020 2020 2020 2020  }')..           
-00027dd0: 2072 6574 7572 6e20 5472 7565 0d0a 2020   return True..  
-00027de0: 2020 2020 2020 6966 206c 656e 2861 7272        if len(arr
-00027df0: 2e73 7472 6964 6573 2920 3d3d 2030 3a0d  .strides) == 0:.
-00027e00: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
-00027e10: 4f44 4f20 656e 6162 6c65 2074 6869 7320  ODO enable this 
-00027e20: 7761 726e 696e 6720 696e 2061 2066 7574  warning in a fut
-00027e30: 7572 6520 6d69 6e6f 7220 7265 6c65 6173  ure minor releas
-00027e40: 650d 0a20 2020 2020 2020 2020 2020 2023  e..            #
-00027e50: 2046 6173 7441 7272 6179 2e5f 706f 7373   FastArray._poss
-00027e60: 6962 6c79 5f77 6172 6e28 6627 5f69 735f  ibly_warn(f'_is_
-00027e70: 6e6f 745f 7375 7070 6f72 7465 643a 2075  not_supported: u
-00027e80: 6e73 7570 706f 7274 6564 2061 7272 6179  nsupported array
-00027e90: 2073 7472 6964 6573 207b 6172 722e 7374   strides {arr.st
-00027ea0: 7269 6465 737d 2729 0d0a 2020 2020 2020  rides}')..      
-00027eb0: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
-00027ec0: 650d 0a20 2020 2020 2020 2072 6574 7572  e..        retur
-00027ed0: 6e20 4661 6c73 650d 0a0d 0a20 2020 2023  n False....    #
-00027ee0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
-00027ef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00027f00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00027f10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00027f20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
-00027f30: 2020 6465 6620 5f5f 6172 7261 795f 6675    def __array_fu
-00027f40: 6e63 7469 6f6e 5f5f 2873 656c 662c 2066  nction__(self, f
-00027f50: 756e 632c 2074 7970 6573 2c20 6172 6773  unc, types, args
-00027f60: 2c20 6b77 6172 6773 293a 0d0a 2020 2020  , kwargs):..    
-00027f70: 2020 2020 6966 2073 656c 662e 4e45 575f      if self.NEW_
-00027f80: 4152 5241 595f 4655 4e43 5449 4f4e 5f45  ARRAY_FUNCTION_E
-00027f90: 4e41 424c 4544 3a0d 0a20 2020 2020 2020  NABLED:..       
-00027fa0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00027fb0: 2e5f 6e65 775f 6172 7261 795f 6675 6e63  ._new_array_func
-00027fc0: 7469 6f6e 2866 756e 632c 2074 7970 6573  tion(func, types
-00027fd0: 2c20 6172 6773 2c20 6b77 6172 6773 290d  , args, kwargs).
-00027fe0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-00027ff0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00028000: 726e 2073 656c 662e 5f6c 6567 6163 795f  rn self._legacy_
-00028010: 6172 7261 795f 6675 6e63 7469 6f6e 2866  array_function(f
-00028020: 756e 632c 2074 7970 6573 2c20 6172 6773  unc, types, args
-00028030: 2c20 6b77 6172 6773 290d 0a0d 0a20 2020  , kwargs)....   
-00028040: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
-00028050: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00028060: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00028070: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00028080: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
-00028090: 2020 2020 6465 6620 5f6c 6567 6163 795f      def _legacy_
-000280a0: 6172 7261 795f 6675 6e63 7469 6f6e 2873  array_function(s
-000280b0: 656c 662c 2066 756e 632c 2074 7970 6573  elf, func, types
-000280c0: 2c20 6172 6773 2c20 6b77 6172 6773 293a  , args, kwargs):
-000280d0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-000280e0: 2020 2020 2020 2043 616c 6c65 6420 6265         Called be
-000280f0: 666f 7265 2061 7272 6179 5f75 6675 6e63  fore array_ufunc
-00028100: 2e0d 0a20 2020 2020 2020 2044 6f65 7320  ...        Does 
-00028110: 6e6f 7420 6765 7420 6361 6c6c 6564 2066  not get called f
-00028120: 6f72 2065 7665 7279 2066 756e 6374 696f  or every functio
-00028130: 6e20 6e70 2e69 736e 616e 2f74 7275 6e63  n np.isnan/trunc
-00028140: 2f74 7275 655f 6469 7669 6465 2066 6f72  /true_divide for
-00028150: 2069 6e73 7461 6e63 652e 0d0a 2020 2020   instance...    
-00028160: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00028170: 2072 6564 7563 6546 756e 6320 3d20 4e55   reduceFunc = NU
-00028180: 4d50 595f 434f 4e56 4552 5349 4f4e 5f54  MPY_CONVERSION_T
-00028190: 4142 4c45 2e67 6574 2866 756e 632c 204e  ABLE.get(func, N
-000281a0: 6f6e 6529 0d0a 0d0a 2020 2020 2020 2020  one)....        
-000281b0: 2320 544f 444f 3a0d 0a20 2020 2020 2020  # TODO:..       
-000281c0: 2023 206b 7761 7267 7320 6f66 2027 6178   # kwargs of 'ax
-000281d0: 6973 273a 204e 6f6e 6520 2027 6f75 7427  is': None  'out'
-000281e0: 3a20 4e6f 6e65 2073 686f 756c 6420 6265  : None should be
-000281f0: 2061 6363 6570 7465 640d 0a0d 0a20 2020   accepted....   
-00028200: 2020 2020 2069 6620 7265 6475 6365 4675       if reduceFu
-00028210: 6e63 2069 7320 6e6f 7420 4e6f 6e65 2061  nc is not None a
-00028220: 6e64 206c 656e 286b 7761 7267 7329 203d  nd len(kwargs) =
-00028230: 3d20 303a 0d0a 2020 2020 2020 2020 2020  = 0:..          
-00028240: 2020 2320 7370 6565 6420 7061 7468 2028    # speed path (
-00028250: 746f 646f 2061 6464 2063 616c 6c20 746f  todo add call to
-00028260: 206c 6564 6765 7229 0d0a 2020 2020 2020   ledger)..      
-00028270: 2020 2020 2020 2320 6465 6661 756c 7420        # default 
-00028280: 746f 2064 646f 663d 3020 7768 656e 206e  to ddof=0 when n
-00028290: 6f20 6b77 6172 6773 2070 6173 7365 640d  o kwargs passed.
-000282a0: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-000282b0: 756c 7420 3d20 7263 2e52 6564 7563 6528  ult = rc.Reduce(
-000282c0: 6172 6773 5b30 5d2c 2072 6564 7563 6546  args[0], reduceF
-000282d0: 756e 632c 2030 290d 0a0d 0a20 2020 2020  unc, 0)....     
-000282e0: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
-000282f0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-00028300: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00028310: 2054 7970 6552 6567 6973 7465 722e 4d61   TypeRegister.Ma
-00028320: 7468 4c65 6467 6572 2e5f 5245 4455 4345  thLedger._REDUCE
-00028330: 2861 7267 735b 305d 2c20 6e65 7766 756e  (args[0], newfun
-00028340: 6329 0d0a 0d0a 2020 2020 2020 2020 2020  c)....          
-00028350: 2020 2020 2020 6474 7970 6520 3d20 6b77        dtype = kw
-00028360: 6172 6773 2e67 6574 2822 6474 7970 6522  args.get("dtype"
-00028370: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
-00028380: 2020 2020 2020 2020 2069 6620 6474 7970           if dtyp
-00028390: 6520 6973 206e 6f74 204e 6f6e 653a 0d0a  e is not None:..
-000283a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000283b0: 2020 2020 2320 7573 6572 2066 6f72 6365      # user force
-000283c0: 6420 6474 7970 6520 7265 7475 726e 2076  d dtype return v
-000283d0: 616c 7565 0d0a 2020 2020 2020 2020 2020  alue..          
-000283e0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000283f0: 2064 7479 7065 2872 6573 756c 7429 0d0a   dtype(result)..
-00028400: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00028410: 2020 2320 7072 6573 6572 7665 2074 7970    # preserve typ
-00028420: 6520 666f 7220 6d69 6e2f 6d61 782f 6e61  e for min/max/na
-00028430: 6e6d 696e 2f6e 616e 6d61 780d 0a20 2020  nmin/nanmax..   
-00028440: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00028450: 7265 6475 6365 4675 6e63 2069 6e20 5b0d  reduceFunc in [.
-00028460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00028470: 2020 2020 2052 4544 5543 455f 4655 4e43       REDUCE_FUNC
-00028480: 5449 4f4e 532e 5245 4455 4345 5f4d 494e  TIONS.REDUCE_MIN
-00028490: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-000284a0: 2020 2020 2020 2052 4544 5543 455f 4655         REDUCE_FU
-000284b0: 4e43 5449 4f4e 532e 5245 4455 4345 5f4e  NCTIONS.REDUCE_N
-000284c0: 414e 4d49 4e2c 0d0a 2020 2020 2020 2020  ANMIN,..        
-000284d0: 2020 2020 2020 2020 2020 2020 5245 4455              REDU
-000284e0: 4345 5f46 554e 4354 494f 4e53 2e52 4544  CE_FUNCTIONS.RED
-000284f0: 5543 455f 4d41 582c 0d0a 2020 2020 2020  UCE_MAX,..      
-00028500: 2020 2020 2020 2020 2020 2020 2020 5245                RE
-00028510: 4455 4345 5f46 554e 4354 494f 4e53 2e52  DUCE_FUNCTIONS.R
-00028520: 4544 5543 455f 4e41 4e4d 4158 2c0d 0a20  EDUCE_NANMAX,.. 
-00028530: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
-00028540: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00028550: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00028560: 6c66 2e64 7479 7065 2e74 7970 6528 7265  lf.dtype.type(re
-00028570: 7375 6c74 290d 0a0d 0a20 2020 2020 2020  sult)....       
-00028580: 2020 2020 2020 2020 2023 2069 6e74 6572           # inter
-00028590: 6e61 6c6c 7920 6e75 6d70 7920 6578 7065  nally numpy expe
-000285a0: 6374 7320 6120 6474 7970 6520 7265 7475  cts a dtype retu
-000285b0: 726e 6564 2066 6f72 206e 616e 7374 6420  rned for nanstd 
-000285c0: 616e 6420 6f74 6865 7220 6361 6c63 756c  and other calcul
-000285d0: 6174 696f 6e73 0d0a 2020 2020 2020 2020  ations..        
-000285e0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-000285f0: 7461 6e63 6528 7265 7375 6c74 2c20 2869  tance(result, (i
-00028600: 6e74 2c20 6e70 2e69 6e74 6567 6572 2929  nt, np.integer))
-00028610: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00028620: 2020 2020 2020 2023 2066 6f72 2075 696e         # for uin
-00028630: 7436 342c 2074 6865 2068 6967 6820 6269  t64, the high bi
-00028640: 7420 6d75 7374 2062 6520 7072 6573 6572  t must be preser
-00028650: 7665 640d 0a20 2020 2020 2020 2020 2020  ved..           
-00028660: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-00028670: 2e64 7479 7065 2e63 6861 7220 696e 204e  .dtype.char in N
-00028680: 756d 7079 4368 6172 5479 7065 732e 556e  umpyCharTypes.Un
-00028690: 7369 676e 6564 496e 7465 6765 7236 343a  signedInteger64:
-000286a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000286b0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000286c0: 206e 702e 7569 6e74 3634 2872 6573 756c   np.uint64(resul
-000286d0: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
-000286e0: 2020 2020 2020 2020 7265 7475 726e 206e          return n
-000286f0: 702e 696e 7436 3428 7265 7375 6c74 290d  p.int64(result).
-00028700: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00028710: 2020 2072 6574 7572 6e20 6e70 2e66 6c6f     return np.flo
-00028720: 6174 3634 2872 6573 756c 7429 0d0a 2020  at64(result)..  
-00028730: 2020 2020 2020 2320 6361 6c6c 2074 6865        # call the
-00028740: 2076 6572 7369 6f6e 206e 756d 7079 2077   version numpy w
-00028750: 616e 7465 6420 7573 6520 746f 0d0a 2020  anted use to..  
-00028760: 2020 2020 2020 7265 7475 726e 2073 7570        return sup
-00028770: 6572 2846 6173 7441 7272 6179 2c20 7365  er(FastArray, se
-00028780: 6c66 292e 5f5f 6172 7261 795f 6675 6e63  lf).__array_func
-00028790: 7469 6f6e 5f5f 2866 756e 632c 2074 7970  tion__(func, typ
-000287a0: 6573 2c20 6172 6773 2c20 6b77 6172 6773  es, args, kwargs
-000287b0: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
-000287c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000287d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000287e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000287f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00028800: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
-00028810: 5f6e 6577 5f61 7272 6179 5f66 756e 6374  _new_array_funct
-00028820: 696f 6e28 7365 6c66 2c20 6675 6e63 3a20  ion(self, func: 
-00028830: 4361 6c6c 6162 6c65 2c20 7479 7065 733a  Callable, types:
-00028840: 2074 7570 6c65 2c20 6172 6773 3a20 7475   tuple, args: tu
-00028850: 706c 652c 206b 7761 7267 733a 2064 6963  ple, kwargs: dic
-00028860: 7429 3a0d 0a20 2020 2020 2020 2022 2222  t):..        """
-00028870: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-00028880: 7261 7920 696d 706c 656d 656e 7461 7469  ray implementati
-00028890: 6f6e 206f 6620 7468 6520 6172 7261 7920  on of the array 
-000288a0: 6675 6e63 7469 6f6e 2070 726f 746f 636f  function protoco
-000288b0: 6c2e 0d0a 0d0a 2020 2020 2020 2020 5061  l.....        Pa
-000288c0: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
-000288d0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
-000288e0: 2020 2020 2020 6675 6e63 3a20 6361 6c6c        func: call
-000288f0: 6162 6c65 0d0a 2020 2020 2020 2020 2020  able..          
-00028900: 2020 416e 2063 616c 6c61 626c 6520 6578    An callable ex
-00028910: 706f 7365 6420 6279 204e 756d 5079 e280  posed by NumPy..
-00028920: 9973 2070 7562 6c69 6320 4150 492c 2077  .s public API, w
-00028930: 6869 6368 2077 6173 2063 616c 6c65 6420  hich was called 
-00028940: 696e 2074 6865 2066 6f72 6d20 6060 6675  in the form ``fu
-00028950: 6e63 282a 6172 6773 2c20 2a2a 6b77 6172  nc(*args, **kwar
-00028960: 6773 2960 602e 0d0a 2020 2020 2020 2020  gs)``...        
-00028970: 7479 7065 733a 2074 7570 6c65 0d0a 2020  types: tuple..  
-00028980: 2020 2020 2020 2020 2020 4120 7475 706c            A tupl
-00028990: 6520 6f66 2075 6e69 7175 6520 6172 6775  e of unique argu
-000289a0: 6d65 6e74 2074 7970 6573 2066 726f 6d20  ment types from 
-000289b0: 7468 6520 6f72 6967 696e 616c 204e 756d  the original Num
-000289c0: 5079 2066 756e 6374 696f 6e20 6361 6c6c  Py function call
-000289d0: 2074 6861 7420 696d 706c 656d 656e 7420   that implement 
-000289e0: 6060 5f5f 6172 7261 795f 6675 6e63 7469  ``__array_functi
-000289f0: 6f6e 5f5f 6060 2e0d 0a20 2020 2020 2020  on__``...       
-00028a00: 2061 7267 733a 2074 7570 6c65 0d0a 2020   args: tuple..  
-00028a10: 2020 2020 2020 2020 2020 5468 6520 7475            The tu
-00028a20: 706c 6520 6f66 2061 7267 756d 656e 7473  ple of arguments
-00028a30: 2074 6861 7420 7769 6c6c 2062 6520 7061   that will be pa
-00028a40: 7373 6564 2074 6f20 6066 756e 6360 2e0d  ssed to `func`..
-00028a50: 0a20 2020 2020 2020 206b 7761 7267 733a  .        kwargs:
-00028a60: 2064 6963 740d 0a20 2020 2020 2020 2020   dict..         
-00028a70: 2020 2054 6865 2064 6963 7469 6f6e 6172     The dictionar
-00028a80: 7920 6f66 206b 6579 776f 7264 2061 7267  y of keyword arg
-00028a90: 756d 656e 7473 2074 6861 7420 7769 6c6c  uments that will
-00028aa0: 2062 6520 7061 7373 6564 2074 6f20 6066   be passed to `f
-00028ab0: 756e 6360 2e0d 0a0d 0a20 2020 2020 2020  unc`.....       
-00028ac0: 2052 6169 7365 730d 0a20 2020 2020 2020   Raises..       
-00028ad0: 202d 2d2d 2d2d 2d0d 0a20 2020 2020 2020   ------..       
-00028ae0: 2054 7970 6545 7272 6f72 0d0a 2020 2020   TypeError..    
-00028af0: 2020 2020 2020 2020 4966 2060 6675 6e63          If `func
-00028b00: 6020 6973 206e 6f74 206f 7665 7272 6964  ` is not overrid
-00028b10: 6465 6e20 6279 2061 2063 6f72 7265 7370  den by a corresp
-00028b20: 6f6e 6469 6e67 2072 6970 7461 626c 6520  onding riptable 
-00028b30: 6172 7261 7920 6675 6e63 7469 6f6e 2074  array function t
-00028b40: 6865 6e20 6120 5479 7065 4572 726f 7220  hen a TypeError 
-00028b50: 6973 2072 6169 7365 642e 0d0a 0d0a 2020  is raised.....  
-00028b60: 2020 2020 2020 4e6f 7465 730d 0a20 2020        Notes..   
-00028b70: 2020 2020 202d 2d2d 2d2d 0d0a 2020 2020       -----..    
-00028b80: 2020 2020 5468 6973 2061 7272 6179 2066      This array f
-00028b90: 756e 6374 696f 6e20 696d 706c 656d 656e  unction implemen
-00028ba0: 7461 7469 6f6e 2072 6571 7569 7265 7320  tation requires 
-00028bb0: 6561 6368 2063 6c61 7373 2c20 7375 6368  each class, such
-00028bc0: 2061 7320 4661 7374 4172 7261 7920 616e   as FastArray an
-00028bd0: 6420 616e 7920 6f74 6865 7220 6465 7269  d any other deri
-00028be0: 7665 6420 636c 6173 732c 0d0a 2020 2020  ved class,..    
-00028bf0: 2020 2020 746f 2069 6d70 6c65 6d65 6e74      to implement
-00028c00: 2074 6865 6972 206f 776e 2076 6572 7369   their own versi
-00028c10: 6f6e 206f 6620 7468 6520 4e75 6d70 7920  on of the Numpy 
-00028c20: 6172 7261 7920 6675 6e63 7469 6f6e 2041  array function A
-00028c30: 5049 2e20 496e 2074 6865 2065 7665 6e74  PI. In the event
-00028c40: 2074 6865 7365 2061 7272 6179 2066 756e   these array fun
-00028c50: 6374 696f 6e73 2064 6566 6572 2074 6f20  ctions defer to 
-00028c60: 7468 650d 0a20 2020 2020 2020 2069 6e68  the..        inh
-00028c70: 6572 6974 696e 6720 636c 6173 7320 7468  eriting class th
-00028c80: 6579 2077 696c 6c20 6e65 6564 2074 6f20  ey will need to 
-00028c90: 6569 7468 6572 2072 652d 7772 6170 2074  either re-wrap t
-00028ca0: 6865 2072 6573 756c 7473 2069 6e20 7468  he results in th
-00028cb0: 6520 636f 7272 6563 7420 7479 7065 206f  e correct type o
-00028cc0: 7220 7261 6973 6520 6578 6365 7074 696f  r raise exceptio
-00028cd0: 6e20 6966 2061 0d0a 2020 2020 2020 2020  n if a..        
-00028ce0: 7061 7274 6963 756c 6172 206f 7065 7261  particular opera
-00028cf0: 7469 6f6e 2069 7320 6e6f 7420 7765 6c6c  tion is not well
-00028d00: 2d64 6566 696e 6564 206e 6f72 206d 6561  -defined nor mea
-00028d10: 6e69 6e67 6675 6c20 666f 7220 7468 6520  ningful for the 
-00028d20: 6465 7269 7665 6420 636c 6173 732e 0d0a  derived class...
-00028d30: 2020 2020 2020 2020 4966 2061 6e20 6172          If an ar
-00028d40: 7261 7920 6675 6e63 7469 6f6e 2c20 7768  ray function, wh
-00028d50: 6963 6820 6973 2061 6c73 6f20 6120 756e  ich is also a un
-00028d60: 6976 6572 7361 6c20 6675 6e63 7469 6f6e  iversal function
-00028d70: 2c20 6973 206e 6f74 206f 7665 7272 6964  , is not overrid
-00028d80: 6465 6e20 6173 2061 6e20 6172 7261 7920  den as an array 
-00028d90: 6675 6e63 7469 6f6e 2c20 6275 7420 6465  function, but de
-00028da0: 6669 6e65 640d 0a20 2020 2020 2020 2061  fined..        a
-00028db0: 7320 6120 7566 756e 6320 7468 656e 2069  s a ufunc then i
-00028dc0: 7420 7769 6c6c 206e 6f74 2062 6520 6361  t will not be ca
-00028dd0: 6c6c 6564 2075 6e6c 6573 7320 6974 2069  lled unless it i
-00028de0: 7320 7265 6769 7374 6572 6564 2077 6974  s registered wit
-00028df0: 6820 7468 6520 6172 7261 7920 6675 6e63  h the array func
-00028e00: 7469 6f6e 2068 656c 7065 7220 7369 6e63  tion helper sinc
-00028e10: 6520 6172 7261 7920 6675 6e63 7469 6f6e  e array function
-00028e20: 0d0a 2020 2020 2020 2020 7072 6f74 6f63  ..        protoc
-00028e30: 6f6c 2074 616b 6573 2070 7269 6f72 6974  ol takes priorit
-00028e40: 7920 6f76 6572 2074 6865 2075 6e69 7665  y over the unive
-00028e50: 7273 616c 2066 756e 6374 696f 6e20 7072  rsal function pr
-00028e60: 6f74 6f63 6f6c 2e0d 0a0d 0a20 2020 2020  otocol.....     
-00028e70: 2020 2052 6566 6572 656e 6365 3a20 604e     Reference: `N
-00028e80: 4550 2031 3820 4172 7261 7920 4675 6e63  EP 18 Array Func
-00028e90: 7469 6f6e 2050 726f 746f 636f 6c20 3c68  tion Protocol <h
-00028ea0: 7474 7073 3a2f 2f6e 756d 7079 2e6f 7267  ttps://numpy.org
-00028eb0: 2f6e 6570 732f 6e65 702d 3030 3138 2d61  /neps/nep-0018-a
-00028ec0: 7272 6179 2d66 756e 6374 696f 6e2d 7072  rray-function-pr
-00028ed0: 6f74 6f63 6f6c 2e68 746d 6c3e 605f 0d0a  otocol.html>`_..
-00028ee0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00028ef0: 2020 2020 2069 6620 6c6f 6767 6572 2e69       if logger.i
-00028f00: 7345 6e61 626c 6564 466f 7228 6c6f 6767  sEnabledFor(logg
-00028f10: 696e 672e 4445 4255 4729 3a0d 0a20 2020  ing.DEBUG):..   
-00028f20: 2020 2020 2020 2020 206c 6f67 6765 722e           logger.
-00028f30: 6465 6275 6728 0d0a 2020 2020 2020 2020  debug(..        
-00028f40: 2020 2020 2020 2020 6622 7b46 6173 7441          f"{FastA
-00028f50: 7272 6179 2e5f 5f6e 616d 655f 5f7d 2e5f  rray.__name__}._
-00028f60: 6e65 775f 6172 7261 795f 6675 6e63 7469  new_array_functi
-00028f70: 6f6e 2866 756e 3d7b 6675 6e63 7d2c 2074  on(fun={func}, t
-00028f80: 7970 6573 3d7b 7479 7065 737d 2c20 6172  ypes={types}, ar
-00028f90: 6773 3d7b 6172 6773 7d2c 206b 7761 7267  gs={args}, kwarg
-00028fa0: 733d 7b6b 7761 7267 737d 2922 0d0a 2020  s={kwargs})"..  
-00028fb0: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-00028fc0: 2020 2020 2023 2068 616e 646c 6520 6066       # handle `f
-00028fd0: 756e 6360 2061 7267 756d 656e 740d 0a20  unc` argument.. 
-00028fe0: 2020 2020 2020 2061 7272 6179 5f66 756e         array_fun
-00028ff0: 633a 2043 616c 6c61 626c 6520 3d20 4661  c: Callable = Fa
-00029000: 7374 4172 7261 792e 5f41 7272 6179 4675  stArray._ArrayFu
-00029010: 6e63 7469 6f6e 4865 6c70 6572 2e67 6574  nctionHelper.get
-00029020: 5f61 7272 6179 5f66 756e 6374 696f 6e28  _array_function(
-00029030: 6675 6e63 290d 0a20 2020 2020 2020 2069  func)..        i
-00029040: 6620 6172 7261 795f 6675 6e63 2069 7320  f array_func is 
-00029050: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-00029060: 2020 2023 2066 616c 6c62 6163 6b20 746f     # fallback to
-00029070: 206e 756d 7079 2066 6f72 2075 6e68 616e   numpy for unhan
-00029080: 646c 6564 2061 7272 6179 2066 756e 6374  dled array funct
-00029090: 696f 6e73 2061 6e64 2061 7474 656d 7074  ions and attempt
-000290a0: 2074 6f20 6361 7374 2062 6163 6b20 746f   to cast back to
-000290b0: 2046 6173 7441 7272 6179 0d0a 2020 2020   FastArray..    
-000290c0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-000290d0: 2073 7570 6572 2829 2e5f 5f61 7272 6179   super().__array
-000290e0: 5f66 756e 6374 696f 6e5f 5f28 6675 6e63  _function__(func
-000290f0: 2c20 7479 7065 732c 2061 7267 732c 206b  , types, args, k
-00029100: 7761 7267 7329 0d0a 2020 2020 2020 2020  wargs)..        
-00029110: 2020 2020 6966 2072 6573 756c 7420 6973      if result is
-00029120: 204e 6f74 496d 706c 656d 656e 7465 643a   NotImplemented:
-00029130: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00029140: 2020 7265 7475 726e 204e 6f74 496d 706c    return NotImpl
-00029150: 656d 656e 7465 640d 0a20 2020 2020 2020  emented..       
-00029160: 2020 2020 2065 6c69 6620 6973 696e 7374       elif isinst
-00029170: 616e 6365 2872 6573 756c 742c 206e 702e  ance(result, np.
-00029180: 6e64 6172 7261 7929 3a0d 0a20 2020 2020  ndarray):..     
-00029190: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000291a0: 6e20 7265 7375 6c74 2e76 6965 7728 4661  n result.view(Fa
-000291b0: 7374 4172 7261 7929 0d0a 2020 2020 2020  stArray)..      
-000291c0: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
-000291d0: 7461 6e63 6528 7265 7375 6c74 2c20 6c69  tance(result, li
-000291e0: 7374 293a 0d0a 2020 2020 2020 2020 2020  st):..          
-000291f0: 2020 2020 2020 7265 7475 726e 205b 2878        return [(x
-00029200: 2e76 6965 7728 4661 7374 4172 7261 7929  .view(FastArray)
-00029210: 2069 6620 6973 696e 7374 616e 6365 2878   if isinstance(x
-00029220: 2c20 6e70 2e6e 6461 7272 6179 2920 656c  , np.ndarray) el
-00029230: 7365 2078 2920 666f 7220 7820 696e 2072  se x) for x in r
-00029240: 6573 756c 745d 0d0a 2020 2020 2020 2020  esult]..        
-00029250: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-00029260: 6e63 6528 7265 7375 6c74 2c20 7475 706c  nce(result, tupl
-00029270: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
-00029280: 2020 2020 2072 6574 7572 6e20 7475 706c       return tupl
-00029290: 6528 5b28 782e 7669 6577 2846 6173 7441  e([(x.view(FastA
-000292a0: 7272 6179 2920 6966 2069 7369 6e73 7461  rray) if isinsta
-000292b0: 6e63 6528 782c 206e 702e 6e64 6172 7261  nce(x, np.ndarra
-000292c0: 7929 2065 6c73 6520 7829 2066 6f72 2078  y) else x) for x
-000292d0: 2069 6e20 7265 7375 6c74 5d29 0d0a 2020   in result])..  
-000292e0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-000292f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00029300: 2023 2055 6e6b 6e6f 776e 2072 6573 756c   # Unknown resul
-00029310: 7420 7479 7065 2e0d 0a20 2020 2020 2020  t type...       
-00029320: 2020 2020 2020 2020 2072 6169 7365 2054           raise T
-00029330: 7970 6545 7272 6f72 2866 2255 6e6b 6e6f  ypeError(f"Unkno
-00029340: 776e 2072 6573 756c 7420 7479 7065 2027  wn result type '
-00029350: 7b74 7970 6528 7265 7375 6c74 297d 2720  {type(result)}' 
-00029360: 7265 7475 726e 6564 2062 7920 6e64 6172  returned by ndar
-00029370: 7261 792e 7b66 756e 637d 2e22 290d 0a0d  ray.{func}.")...
-00029380: 0a20 2020 2020 2020 2023 2068 616e 646c  .        # handl
-00029390: 6520 6074 7970 6573 6020 6172 6775 6d65  e `types` argume
-000293a0: 6e74 0d0a 2020 2020 2020 2020 6172 7261  nt..        arra
-000293b0: 795f 6675 6e63 5f74 7970 655f 6368 6563  y_func_type_chec
-000293c0: 6b3a 2043 616c 6c61 626c 6520 3d20 4661  k: Callable = Fa
-000293d0: 7374 4172 7261 792e 5f41 7272 6179 4675  stArray._ArrayFu
-000293e0: 6e63 7469 6f6e 4865 6c70 6572 2e67 6574  nctionHelper.get
-000293f0: 5f61 7272 6179 5f66 756e 6374 696f 6e5f  _array_function_
-00029400: 7479 7065 5f63 6f6d 7061 7469 6269 6c69  type_compatibili
-00029410: 7479 5f63 6865 636b 280d 0a20 2020 2020  ty_check(..     
-00029420: 2020 2020 2020 2066 756e 630d 0a20 2020         func..   
-00029430: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-00029440: 6966 2061 7272 6179 5f66 756e 635f 7479  if array_func_ty
-00029450: 7065 5f63 6865 636b 2069 7320 4e6f 6e65  pe_check is None
-00029460: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-00029470: 206e 6f20 6375 7374 6f6d 2074 7970 6520   no custom type 
-00029480: 636f 6d70 6174 6962 696c 6974 7920 6368  compatibility ch
-00029490: 6563 6b3b 2064 6566 6175 6c74 2074 7970  eck; default typ
-000294a0: 6520 636f 6d70 6174 6962 696c 6974 7920  e compatibility 
-000294b0: 6368 6563 6b0d 0a20 2020 2020 2020 2020  check..         
-000294c0: 2020 2023 2074 6869 7320 616c 6c6f 7773     # this allows
-000294d0: 2073 7562 636c 6173 7365 7320 7468 6174   subclasses that
-000294e0: 2064 6f6e 2774 206f 7665 7272 6964 6520   don't override 
-000294f0: 5f5f 6172 7261 795f 6675 6e63 7469 6f6e  __array_function
-00029500: 5f5f 2074 6f20 6861 6e64 6c65 2046 6173  __ to handle Fas
-00029510: 7441 7272 6179 206f 626a 6563 7473 0d0a  tArray objects..
-00029520: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00029530: 7479 7020 696e 2074 7970 6573 3a0d 0a20  typ in types:.. 
-00029540: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00029550: 6620 6e6f 7420 6973 7375 6263 6c61 7373  f not issubclass
-00029560: 2874 7970 2c20 4661 7374 4172 7261 7929  (typ, FastArray)
-00029570: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00029580: 2020 2020 2020 2069 6620 6c6f 6767 6572         if logger
-00029590: 2e69 7345 6e61 626c 6564 466f 7228 6c6f  .isEnabledFor(lo
-000295a0: 6767 696e 672e 4445 4255 4729 3a0d 0a20  gging.DEBUG):.. 
-000295b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000295c0: 2020 2020 2020 206c 6f67 6765 722e 6465         logger.de
-000295d0: 6275 6728 6622 7b46 6173 7441 7272 6179  bug(f"{FastArray
-000295e0: 2e5f 5f6e 616d 655f 5f7d 2e5f 5f61 7272  .__name__}.__arr
-000295f0: 6179 5f66 756e 6374 696f 6e5f 5f3a 2075  ay_function__: u
-00029600: 6e73 7570 706f 7274 6564 2074 7970 6520  nsupported type 
-00029610: 7b72 6570 7228 7479 7029 7d22 290d 0a20  {repr(typ)}").. 
-00029620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029630: 2020 2072 6574 7572 6e20 4e6f 7449 6d70     return NotImp
-00029640: 6c65 6d65 6e74 6564 0d0a 2020 2020 2020  lemented..      
-00029650: 2020 656c 7365 3a20 2023 2063 7573 746f    else:  # custo
-00029660: 6d20 7479 7065 2063 6f6d 7061 7469 6269  m type compatibi
-00029670: 6c69 7479 2063 6865 636b 0d0a 2020 2020  lity check..    
-00029680: 2020 2020 2020 2020 7661 6c69 643a 2062          valid: b
-00029690: 6f6f 6c20 3d20 6172 7261 795f 6675 6e63  ool = array_func
-000296a0: 5f74 7970 655f 6368 6563 6b28 7479 7065  _type_check(type
-000296b0: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
-000296c0: 6966 206e 6f74 2076 616c 6964 3a0d 0a20  if not valid:.. 
-000296d0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000296e0: 6620 6c6f 6767 6572 2e69 7345 6e61 626c  f logger.isEnabl
-000296f0: 6564 466f 7228 6c6f 6767 696e 672e 4445  edFor(logging.DE
-00029700: 4255 4729 3a0d 0a20 2020 2020 2020 2020  BUG):..         
-00029710: 2020 2020 2020 2020 2020 206c 6f67 6765             logge
-00029720: 722e 6465 6275 6728 6622 7b46 6173 7441  r.debug(f"{FastA
-00029730: 7272 6179 2e5f 5f6e 616d 655f 5f7d 2e5f  rray.__name__}._
-00029740: 5f61 7272 6179 5f66 756e 6374 696f 6e5f  _array_function_
-00029750: 5f3a 2075 6e73 7570 706f 7274 6564 2074  _: unsupported t
-00029760: 7970 6520 696e 207b 7265 7072 2874 7970  ype in {repr(typ
-00029770: 6573 297d 2229 0d0a 2020 2020 2020 2020  es)}")..        
-00029780: 2020 2020 2020 2020 7265 7475 726e 204e          return N
-00029790: 6f74 496d 706c 656d 656e 7465 640d 0a0d  otImplemented...
-000297a0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000297b0: 6172 7261 795f 6675 6e63 282a 6172 6773  array_func(*args
-000297c0: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
-000297d0: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
-000297e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000297f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00029800: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00029810: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00029820: 0d0a 2020 2020 6465 6620 5f5f 6172 7261  ..    def __arra
-00029830: 795f 7566 756e 635f 5f28 7365 6c66 2c20  y_ufunc__(self, 
-00029840: 7566 756e 633a 2043 616c 6c61 626c 652c  ufunc: Callable,
-00029850: 206d 6574 686f 643a 2073 7472 2c20 2a69   method: str, *i
-00029860: 6e70 7574 733a 2041 6e79 2c20 2a2a 6b77  nputs: Any, **kw
-00029870: 6172 6773 3a20 416e 7929 3a0d 0a20 2020  args: Any):..   
-00029880: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00029890: 2020 5468 6520 4661 7374 4172 7261 7920    The FastArray 
-000298a0: 756e 6976 6572 7361 6c20 6675 6e63 7469  universal functi
-000298b0: 6f6e 2028 6f72 2075 6675 6e63 2920 6f76  on (or ufunc) ov
-000298c0: 6572 7269 6465 206f 6666 6572 7320 6d75  erride offers mu
-000298d0: 6c74 6974 6872 6561 6465 6420 432f 432b  ltithreaded C/C+
-000298e0: 2b20 696d 706c 656d 656e 7461 7469 6f6e  + implementation
-000298f0: 2061 7420 7468 6520 5269 7074 6964 6543   at the RiptideC
-00029900: 5050 206c 6179 6572 2e0d 0a0d 0a20 2020  PP layer.....   
-00029910: 2020 2020 2057 6865 6e20 4661 7374 4172       When FastAr
-00029920: 7261 7920 7265 6365 6976 6573 2061 2060  ray receives a `
-00029930: 7566 756e 6360 2063 616c 6c61 626c 6520  ufunc` callable 
-00029940: 6974 2077 696c 6c20 6174 7465 6d70 7420  it will attempt 
-00029950: 746f 2068 616e 646c 6520 6974 2069 6e20  to handle it in 
-00029960: 7072 696f 7269 7479 206f 7264 6572 3a0d  priority order:.
-00029970: 0a20 2020 2020 2020 2020 2020 2031 2e20  .            1. 
-00029980: 636f 6e73 6964 6572 696e 6720 6060 4661  considering ``Fa
-00029990: 7374 4172 7261 7960 6020 6060 4661 7374  stArray`` ``Fast
-000299a0: 4675 6e63 7469 6f6e 6060 2069 7320 656e  Function`` is en
-000299b0: 6162 6c65 642c 2075 6675 6e63 2069 7320  abled, ufunc is 
-000299c0: 6861 6e64 6c65 6420 6279 2061 6e20 6578  handled by an ex
-000299d0: 706c 6963 6974 2075 6675 6e63 206f 7665  plicit ufunc ove
-000299e0: 7272 6964 652c 206f 7468 6572 7769 7365  rride, otherwise
-000299f0: 0d0a 2020 2020 2020 2020 2020 2020 322e  ..            2.
-00029a00: 2075 6675 6e63 2069 7320 6861 6e64 6c65   ufunc is handle
-00029a10: 6420 6174 2074 6865 2052 6970 7461 626c  d at the Riptabl
-00029a20: 6520 2f20 4e75 6d70 7920 4150 4920 6f76  e / Numpy API ov
-00029a30: 6572 7269 6465 7320 6c65 7665 6c2c 206f  errides level, o
-00029a40: 7468 6572 7769 7365 0d0a 2020 2020 2020  therwise..      
-00029a50: 2020 2020 2020 332e 2075 6675 6e63 2069        3. ufunc i
-00029a60: 7320 6861 6e64 6c65 6420 6174 2074 6865  s handled at the
-00029a70: 204e 756d 7079 2041 5049 206c 6576 656c   Numpy API level
-00029a80: 2e0d 0a0d 0a20 2020 2020 2020 2047 6976  .....        Giv
-00029a90: 656e 2061 2063 6f6d 6269 6e61 7469 6f6e  en a combination
-00029aa0: 206f 6620 6075 6675 6e63 602c 2060 696e   of `ufunc`, `in
-00029ab0: 7075 7473 602c 2061 6e64 2060 6b77 6172  puts`, and `kwar
-00029ac0: 6773 602c 2069 6620 6e65 6974 6865 7220  gs`, if neither 
-00029ad0: 6f66 2074 6865 2061 666f 7265 6d65 6e74  of the aforement
-00029ae0: 696f 6e65 6420 6361 7365 7320 7375 7070  ioned cases supp
-00029af0: 6f72 7420 7468 6973 0d0a 2020 2020 2020  ort this..      
-00029b00: 2020 7468 656e 2061 2077 6172 6e69 6e67    then a warning
-00029b10: 2069 7320 656d 6974 7465 642e 0d0a 0d0a   is emitted.....
-00029b20: 2020 2020 2020 2020 5468 6520 666f 6c6c          The foll
-00029b30: 6f77 696e 6720 7265 6665 7265 6e63 6573  owing references
-00029b40: 2074 6f20 7375 7070 6f72 7465 6420 7566   to supported uf
-00029b50: 756e 6373 2061 7265 2067 726f 7570 6564  uncs are grouped
-00029b60: 2062 7920 6d65 7468 6f64 2074 7970 652e   by method type.
-00029b70: 0d0a 2020 2020 2020 2020 2020 2020 2d20  ..            - 
-00029b80: 466f 7220 606d 6574 686f 6460 2074 7970  For `method` typ
-00029b90: 6520 6060 7265 6475 6365 6060 2c20 7365  e ``reduce``, se
-00029ba0: 6520 6060 6752 6564 7563 6555 4675 6e63  e ``gReduceUFunc
-00029bb0: 7360 602e 0d0a 2020 2020 2020 2020 2020  s``...          
-00029bc0: 2020 2d20 466f 7220 606d 6574 686f 6460    - For `method`
-00029bd0: 2074 7970 6520 6060 5f5f 6361 6c6c 5f5f   type ``__call__
-00029be0: 6060 2c20 7365 6520 6060 6742 696e 6172  ``, see ``gBinar
-00029bf0: 7955 4675 6e63 7360 602c 2060 6067 4269  yUFuncs``, ``gBi
-00029c00: 6e61 7279 4c6f 6769 6361 6c55 4675 6e63  naryLogicalUFunc
-00029c10: 7360 602c 2060 6067 4269 6e61 7279 4269  s``, ``gBinaryBi
-00029c20: 7477 6973 6555 4675 6e63 7360 602c 2061  twiseUFuncs``, a
-00029c30: 6e64 2060 6067 556e 6172 7955 4675 6e63  nd ``gUnaryUFunc
-00029c40: 7360 602e 0d0a 2020 2020 2020 2020 2020  s``...          
-00029c50: 2020 2d20 466f 7220 606d 6574 686f 6460    - For `method`
-00029c60: 2074 7970 6520 6060 6174 6060 2072 6574   type ``at`` ret
-00029c70: 7572 6e20 6060 4e6f 6e65 6060 2e0d 0a0d  urn ``None``....
-00029c80: 0a20 2020 2020 2020 2049 6620 606f 7574  .        If `out
-00029c90: 6020 6172 6775 6d65 6e74 2069 7320 7370  ` argument is sp
-00029ca0: 6563 6966 6965 642c 2074 6865 6e20 616e  ecified, then an
-00029cb0: 2065 7874 7261 2061 7272 6179 2063 6f70   extra array cop
-00029cc0: 7920 6973 2070 6572 666f 726d 6564 206f  y is performed o
-00029cd0: 6e20 7468 6520 7265 7375 6c74 206f 6620  n the result of 
-00029ce0: 7468 6520 7566 756e 6320 636f 6d70 7574  the ufunc comput
-00029cf0: 6174 696f 6e2e 0d0a 0d0a 2020 2020 2020  ation.....      
-00029d00: 2020 4966 2061 2060 6474 7970 6560 206b    If a `dtype` k
-00029d10: 6579 776f 7264 2069 7320 7370 6563 6966  eyword is specif
-00029d20: 6965 642c 2061 6c6c 2065 6666 6f72 7473  ied, all efforts
-00029d30: 2061 7265 206d 6164 6520 746f 2072 6573   are made to res
-00029d40: 7065 6374 2074 6865 2060 6474 7970 6560  pect the `dtype`
-00029d50: 206f 6e20 7468 6520 7265 7375 6c74 206f   on the result o
-00029d60: 6620 7468 6520 636f 6d70 7574 6174 696f  f the computatio
-00029d70: 6e2e 0d0a 0d0a 2020 2020 2020 2020 5061  n.....        Pa
-00029d80: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
-00029d90: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
-00029da0: 2020 2020 2020 7566 756e 6320 3a20 6361        ufunc : ca
-00029db0: 6c6c 6162 6c65 0d0a 2020 2020 2020 2020  llable..        
-00029dc0: 2020 2020 5468 6520 7566 756e 6320 6f62      The ufunc ob
-00029dd0: 6a65 6374 2074 6861 7420 7761 7320 6361  ject that was ca
-00029de0: 6c6c 6564 2e0d 0a20 2020 2020 2020 206d  lled...        m
-00029df0: 6574 686f 6420 3a20 7374 720d 0a20 2020  ethod : str..   
-00029e00: 2020 2020 2020 2020 2041 2073 7472 696e           A strin
-00029e10: 6720 696e 6469 6361 7469 6e67 2077 6869  g indicating whi
-00029e20: 6368 2055 6675 6e63 206d 6574 686f 6420  ch Ufunc method 
-00029e30: 7761 7320 6361 6c6c 6564 2028 6f6e 6520  was called (one 
-00029e40: 6f66 2022 5f5f 6361 6c6c 5f5f 222c 2022  of "__call__", "
-00029e50: 7265 6475 6365 222c 2022 7265 6475 6365  reduce", "reduce
-00029e60: 6174 222c 2022 6163 6375 6d75 6c61 7465  at", "accumulate
-00029e70: 222c 2022 6f75 7465 7222 2c20 2269 6e6e  ", "outer", "inn
-00029e80: 6572 2229 2e0d 0a20 2020 2020 2020 2069  er")...        i
-00029e90: 6e70 7574 730d 0a20 2020 2020 2020 2020  nputs..         
-00029ea0: 2020 2041 2074 7570 6c65 206f 6620 7468     A tuple of th
-00029eb0: 6520 696e 7075 7420 6172 6775 6d65 6e74  e input argument
-00029ec0: 7320 746f 2074 6865 2075 6675 6e63 2e0d  s to the ufunc..
-00029ed0: 0a20 2020 2020 2020 206b 7761 7267 730d  .        kwargs.
-00029ee0: 0a20 2020 2020 2020 2020 2020 2041 2064  .            A d
-00029ef0: 6963 7469 6f6e 6172 7920 636f 6e74 6169  ictionary contai
-00029f00: 6e69 6e67 2074 6865 206f 7074 696f 6e61  ning the optiona
-00029f10: 6c20 696e 7075 7420 6172 6775 6d65 6e74  l input argument
-00029f20: 7320 6f66 2074 6865 2075 6675 6e63 2e20  s of the ufunc. 
-00029f30: 4966 2067 6976 656e 2c20 616e 7920 6f75  If given, any ou
-00029f40: 7420 6172 6775 6d65 6e74 732c 2062 6f74  t arguments, bot
-00029f50: 6820 706f 7369 7469 6f6e 616c 2061 6e64  h positional and
-00029f60: 206b 6579 776f 7264 2c20 6172 6520 7061   keyword, are pa
-00029f70: 7373 6564 2061 7320 6120 7475 706c 6520  ssed as a tuple 
-00029f80: 696e 206b 7761 7267 732e 0d0a 0d0a 2020  in kwargs.....  
-00029f90: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
-00029fa0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
-00029fb0: 2020 2020 2020 2020 2020 2020 5468 6520              The 
-00029fc0: 6d65 7468 6f64 2073 686f 756c 6420 7265  method should re
-00029fd0: 7475 726e 2065 6974 6865 7220 7468 6520  turn either the 
-00029fe0: 7265 7375 6c74 206f 6620 7468 6520 6f70  result of the op
-00029ff0: 6572 6174 696f 6e2c 206f 7220 4e6f 7449  eration, or NotI
-0002a000: 6d70 6c65 6d65 6e74 6564 2069 6620 7468  mplemented if th
-0002a010: 6520 6f70 6572 6174 696f 6e20 7265 7175  e operation requ
-0002a020: 6573 7465 6420 6973 206e 6f74 2069 6d70  ested is not imp
-0002a030: 6c65 6d65 6e74 6564 2e0d 0a0d 0a20 2020  lemented.....   
-0002a040: 2020 2020 204e 6f74 6573 0d0a 2020 2020       Notes..    
-0002a050: 2020 2020 2d2d 2d2d 2d0d 0a20 2020 2020      -----..     
-0002a060: 2020 2054 6865 2063 7572 7265 6e74 2069     The current i
-0002a070: 6d70 6c65 6d65 6e74 6174 696f 6e20 646f  mplementation do
-0002a080: 6573 206e 6f74 2073 7570 706f 7274 2074  es not support t
-0002a090: 6865 2066 6f6c 6c6f 7769 6e67 206b 6579  he following key
-0002a0a0: 776f 7264 2061 7267 756d 656e 7473 3a20  word arguments: 
-0002a0b0: 6063 6173 7469 6e67 602c 2060 7369 6760  `casting`, `sig`
-0002a0c0: 2c20 6073 6967 6e61 7475 7265 602c 2061  , `signature`, a
-0002a0d0: 6e64 0d0a 2020 2020 2020 2020 6063 6f72  nd..        `cor
-0002a0e0: 655f 7369 676e 6174 7572 6560 2e0d 0a0d  e_signature`....
-0002a0f0: 0a20 2020 2020 2020 2049 7420 6861 7320  .        It has 
-0002a100: 7061 7274 6961 6c20 7375 7070 6f72 7420  partial support 
-0002a110: 666f 7220 6b65 7977 6f72 6420 6172 6775  for keyword argu
-0002a120: 6d65 6e74 733a 2060 7768 6572 6560 2c20  ments: `where`, 
-0002a130: 6061 7869 7360 2c20 616e 6420 6061 7865  `axis`, and `axe
-0002a140: 7360 2c20 6966 2074 6865 7920 6d61 7463  s`, if they matc
-0002a150: 680d 0a20 2020 2020 2020 2074 6865 2064  h..        the d
-0002a160: 6566 6175 6c74 2076 616c 7565 732e 0d0a  efault values...
-0002a170: 0d0a 2020 2020 2020 2020 4966 2046 6173  ..        If Fas
-0002a180: 7441 7272 6179 2773 2060 6057 6172 6e69  tArray's ``Warni
-0002a190: 6e67 4c65 7665 6c60 6020 6973 2065 6e61  ngLevel`` is ena
-0002a1a0: 626c 6564 2c20 7468 656e 2077 6172 6e69  bled, then warni
-0002a1b0: 6e67 7320 7769 6c6c 2062 6520 656d 6974  ngs will be emit
-0002a1c0: 7465 6420 6966 2061 6e79 206f 6620 756e  ted if any of un
-0002a1d0: 7375 7070 6f72 7465 6420 6f72 2070 6172  supported or par
-0002a1e0: 7469 616c 6c79 0d0a 2020 2020 2020 2020  tially..        
-0002a1f0: 7375 7070 6f72 7465 6420 6b65 7977 6f72  supported keywor
-0002a200: 6420 6172 6775 6d65 6e74 7320 6172 6520  d arguments are 
-0002a210: 7061 7373 6564 2e0d 0a0d 0a20 2020 2020  passed.....     
-0002a220: 2020 2054 4f44 4f20 646f 6375 6d65 6e74     TODO document
-0002a230: 2063 7573 746f 6d20 7570 2063 6173 7469   custom up casti
-0002a240: 6e67 2072 756c 6573 2e0d 0a0d 0a20 2020  ng rules.....   
-0002a250: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
-0002a260: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-0002a270: 0a20 2020 2020 2020 2046 6f72 206d 6f72  .        For mor
-0002a280: 6520 696e 666f 726d 6174 696f 6e20 6f6e  e information on
-0002a290: 2075 6675 6e63 2073 6565 2074 6865 2066   ufunc see the f
-0002a2a0: 6f6c 6c6f 7769 6e67 206e 756d 7079 2064  ollowing numpy d
-0002a2b0: 6f63 756d 656e 7473 3a0d 0a20 2020 2020  ocuments:..     
-0002a2c0: 2020 2020 2020 202d 2068 7474 7073 3a2f         - https:/
-0002a2d0: 2f6e 756d 7079 2e6f 7267 2f64 6f63 2f73  /numpy.org/doc/s
-0002a2e0: 7461 626c 652f 7265 6665 7265 6e63 652f  table/reference/
-0002a2f0: 6172 7261 7973 2e63 6c61 7373 6573 2e68  arrays.classes.h
-0002a300: 746d 6c23 6e75 6d70 792e 636c 6173 732e  tml#numpy.class.
-0002a310: 5f5f 6172 7261 795f 7566 756e 635f 5f0d  __array_ufunc__.
-0002a320: 0a20 2020 2020 2020 2020 2020 202d 2068  .            - h
-0002a330: 7474 7073 3a2f 2f6e 756d 7079 2e6f 7267  ttps://numpy.org
-0002a340: 2f64 6f63 2f73 7461 626c 652f 7265 6665  /doc/stable/refe
-0002a350: 7265 6e63 652f 7566 756e 6373 2e68 746d  rence/ufuncs.htm
-0002a360: 6c0d 0a0d 0a20 2020 2020 2020 204e 6f74  l....        Not
-0002a370: 652c 2074 6865 2064 6f63 7374 7269 6e67  e, the docstring
-0002a380: 2050 6172 616d 6574 6572 7320 616e 6420   Parameters and 
-0002a390: 5265 7475 726e 2073 6563 7469 6f6e 2069  Return section i
-0002a3a0: 7320 7265 7065 6174 6564 2066 726f 6d20  s repeated from 
-0002a3b0: 7468 6520 6e75 6d70 790d 0a20 2020 2020  the numpy..     
-0002a3c0: 2020 2060 5f5f 6172 7261 795f 7566 756e     `__array_ufun
-0002a3d0: 635f 5f60 2064 6f63 7374 7269 6e67 2073  c__` docstring s
-0002a3e0: 696e 6365 2074 6869 7320 6973 206f 7665  ince this is ove
-0002a3f0: 7272 6964 696e 6720 7468 6174 206d 6574  rriding that met
-0002a400: 686f 642e 0d0a 2020 2020 2020 2020 2222  hod...        ""
-0002a410: 220d 0a20 2020 2020 2020 2023 2054 4f44  "..        # TOD
-0002a420: 4f20 636f 6e73 6964 6572 2075 7369 6e67  O consider using
-0002a430: 2074 7970 6520 616e 6e6f 7461 7469 6f6e   type annotation
-0002a440: 2074 7970 696e 672e 4669 6e61 6c20 666f   typing.Final fo
-0002a450: 7220 7468 6573 6520 7265 6164 2d6f 6e6c  r these read-onl
-0002a460: 7920 7661 7269 6162 6c65 7320 7768 656e  y variables when
-0002a470: 206d 6f76 696e 6720 746f 2050 7974 686f   moving to Pytho
-0002a480: 6e20 332e 380d 0a20 2020 2020 2020 2023  n 3.8..        #
-0002a490: 2050 7974 686f 6e20 332e 3820 6164 6465   Python 3.8 adde
-0002a4a0: 6420 7375 7070 6f72 7420 666f 7220 7479  d support for ty
-0002a4b0: 7069 6e67 2e46 696e 616c 2e20 4669 6e61  ping.Final. Fina
-0002a4c0: 6c20 7769 6c6c 2063 6174 6368 2075 6e69  l will catch uni
-0002a4d0: 6e74 656e 6465 6420 6173 7369 676e 6d65  ntended assignme
-0002a4e0: 6e74 7320 666f 7220 636f 6e73 7461 6e74  nts for constant
-0002a4f0: 7320 7768 656e 2072 756e 6e69 6e67 0d0a  s when running..
-0002a500: 2020 2020 2020 2020 2320 7374 6174 6963          # static
-0002a510: 2074 7970 6520 6368 6563 6b65 7273 2073   type checkers s
-0002a520: 7563 6820 6173 206d 7970 792e 0d0a 2020  uch as mypy...  
-0002a530: 2020 2020 2020 5f55 4e53 5550 504f 5254        _UNSUPPORT
-0002a540: 4544 5f4b 4559 574f 5244 533a 2054 7570  ED_KEYWORDS: Tup
-0002a550: 6c65 5b73 7472 2c20 7374 722c 2073 7472  le[str, str, str
-0002a560: 2c20 7374 725d 203d 2028 2263 6173 7469  , str] = ("casti
-0002a570: 6e67 222c 2022 7369 6722 2c20 2273 6967  ng", "sig", "sig
-0002a580: 6e61 7475 7265 222c 2022 636f 7265 5f73  nature", "core_s
-0002a590: 6967 6e61 7475 7265 2229 0d0a 2020 2020  ignature")..    
-0002a5a0: 2020 2020 5f50 4152 5449 414c 4c59 5f53      _PARTIALLY_S
-0002a5b0: 5550 504f 5254 4544 5f4b 4559 574f 5244  UPPORTED_KEYWORD
-0002a5c0: 535f 544f 5f44 4546 4155 4c54 533a 204d  S_TO_DEFAULTS: M
-0002a5d0: 6170 7069 6e67 5b73 7472 2c20 556e 696f  apping[str, Unio
-0002a5e0: 6e5b 4e6f 6e65 2c20 626f 6f6c 5d5d 203d  n[None, bool]] =
-0002a5f0: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
-0002a600: 2277 6865 7265 223a 2054 7275 652c 0d0a  "where": True,..
-0002a610: 2020 2020 2020 2020 2020 2020 2261 7869              "axi
-0002a620: 7322 3a20 4e6f 6e65 2c0d 0a20 2020 2020  s": None,..     
-0002a630: 2020 2020 2020 2022 6178 6573 223a 204e         "axes": N
-0002a640: 6f6e 652c 0d0a 2020 2020 2020 2020 7d0d  one,..        }.
-0002a650: 0a20 2020 2020 2020 2074 6f70 6c65 7665  .        topleve
-0002a660: 6c5f 6162 6f72 743a 2062 6f6f 6c20 3d20  l_abort: bool = 
-0002a670: 4661 6c73 650d 0a0d 0a20 2020 2020 2020  False....       
-0002a680: 2069 6620 4661 7374 4172 7261 792e 5665   if FastArray.Ve
-0002a690: 7262 6f73 6520 3e20 323a 0d0a 2020 2020  rbose > 2:..    
-0002a6a0: 2020 2020 2020 2020 7072 696e 7428 222a          print("*
-0002a6b0: 2a2a 2074 6f70 206c 6576 656c 2061 7272  ** top level arr
-0002a6c0: 6179 5f75 6675 6e63 222c 2075 6675 6e63  ay_ufunc", ufunc
-0002a6d0: 2c20 6d65 7468 6f64 2c20 2a69 6e70 7574  , method, *input
-0002a6e0: 732c 206b 7761 7267 7329 0d0a 0d0a 2020  s, kwargs)....  
-0002a6f0: 2020 2020 2020 2320 666c 6970 2061 6e79        # flip any
-0002a700: 2069 6e70 7574 7320 7468 6174 2061 7265   inputs that are
-0002a710: 2066 6173 7461 7272 6179 7320 6261 636b   fastarrays back
-0002a720: 2074 6f20 616e 206e 6461 7272 6179 2e2e   to an ndarray..
-0002a730: 2e0d 0a20 2020 2020 2020 2061 7267 733a  ...        args:
-0002a740: 204c 6973 745b 416e 795d 203d 205b 5d0d   List[Any] = [].
-0002a750: 0a20 2020 2020 2020 2066 6f72 2069 6e70  .        for inp
-0002a760: 7574 2069 6e20 696e 7075 7473 3a0d 0a20  ut in inputs:.. 
-0002a770: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-0002a780: 696e 7374 616e 6365 2869 6e70 7574 2c20  instance(input, 
-0002a790: 6e70 2e6e 6461 7272 6179 293a 0d0a 2020  np.ndarray):..  
-0002a7a0: 2020 2020 2020 2020 2020 2020 2020 6973                is
-0002a7b0: 5f6e 6f74 5f73 7570 706f 7274 6564 203d  _not_supported =
-0002a7c0: 2073 656c 662e 5f69 735f 6e6f 745f 7375   self._is_not_su
-0002a7d0: 7070 6f72 7465 6428 696e 7075 7429 0d0a  pported(input)..
-0002a7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a7f0: 6966 2069 735f 6e6f 745f 7375 7070 6f72  if is_not_suppor
-0002a800: 7465 643a 0d0a 2020 2020 2020 2020 2020  ted:..          
-0002a810: 2020 2020 2020 2020 2020 2320 544f 444f            # TODO
-0002a820: 2065 6e61 626c 6520 7468 6973 2077 6172   enable this war
-0002a830: 6e69 6e67 2069 6e20 6120 6675 7475 7265  ning in a future
-0002a840: 206d 696e 6f72 2072 656c 6561 7365 0d0a   minor release..
-0002a850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a860: 2020 2020 2320 4661 7374 4172 7261 792e      # FastArray.
-0002a870: 5f70 6f73 7369 626c 795f 7761 726e 2866  _possibly_warn(f
-0002a880: 275f 5f61 7272 6179 5f75 6675 6e63 5f5f  '__array_ufunc__
-0002a890: 3a20 756e 7375 7070 6f72 7465 6420 696e  : unsupported in
-0002a8a0: 7075 7420 227b 696e 7075 747d 2227 290d  put "{input}"').
-0002a8b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a8c0: 2020 2020 2074 6f70 6c65 7665 6c5f 6162       toplevel_ab
-0002a8d0: 6f72 7420 7c3d 2069 735f 6e6f 745f 7375  ort |= is_not_su
-0002a8e0: 7070 6f72 7465 640d 0a20 2020 2020 2020  pported..       
-0002a8f0: 2020 2020 2061 7267 732e 6170 7065 6e64       args.append
-0002a900: 2869 6e70 7574 290d 0a0d 0a20 2020 2020  (input)....     
-0002a910: 2020 2023 2043 6865 636b 2066 6f72 206e     # Check for n
-0002a920: 756d 7079 2072 756c 6573 2074 6861 7420  umpy rules that 
-0002a930: 7765 2063 616e 6e6f 7420 6861 6e64 6c65  we cannot handle
-0002a940: 2e0d 0a20 2020 2020 2020 2066 6f72 206b  ...        for k
-0002a950: 7720 696e 205f 554e 5355 5050 4f52 5445  w in _UNSUPPORTE
-0002a960: 445f 4b45 5957 4f52 4453 3a0d 0a20 2020  D_KEYWORDS:..   
-0002a970: 2020 2020 2020 2020 2069 6620 6b77 2069           if kw i
-0002a980: 6e20 6b77 6172 6773 3a0d 0a20 2020 2020  n kwargs:..     
-0002a990: 2020 2020 2020 2020 2020 2023 2054 4f44             # TOD
-0002a9a0: 4f20 656e 6162 6c65 2074 6869 7320 7761  O enable this wa
-0002a9b0: 726e 696e 6720 696e 2061 2066 7574 7572  rning in a futur
-0002a9c0: 6520 6d69 6e6f 7220 7265 6c65 6173 650d  e minor release.
-0002a9d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a9e0: 2023 2046 6173 7441 7272 6179 2e5f 706f   # FastArray._po
-0002a9f0: 7373 6962 6c79 5f77 6172 6e28 6627 5f5f  ssibly_warn(f'__
-0002aa00: 6172 7261 795f 7566 756e 635f 5f3a 2075  array_ufunc__: u
-0002aa10: 6e73 7570 706f 7274 6564 206b 6579 776f  nsupported keywo
-0002aa20: 7264 2061 7267 756d 656e 7420 227b 6b77  rd argument "{kw
-0002aa30: 7d22 2729 0d0a 2020 2020 2020 2020 2020  }"')..          
-0002aa40: 2020 2020 2020 746f 706c 6576 656c 5f61        toplevel_a
-0002aa50: 626f 7274 207c 3d20 5472 7565 0d0a 0d0a  bort |= True....
-0002aa60: 2020 2020 2020 2020 2320 4368 6563 6b20          # Check 
-0002aa70: 666f 7220 6e75 6d70 7920 7275 6c65 7320  for numpy rules 
-0002aa80: 7468 6174 2077 6520 7061 7274 6961 6c6c  that we partiall
-0002aa90: 7920 7375 7070 6f72 743b 2074 6861 7420  y support; that 
-0002aaa0: 6973 2c20 7768 6572 6520 7765 206f 6e6c  is, where we onl
-0002aab0: 7920 7375 7070 6f72 740d 0a20 2020 2020  y support..     
-0002aac0: 2020 2023 2074 6865 206b 6579 776f 7264     # the keyword
-0002aad0: 2069 6620 7468 6520 7661 6c75 6520 6973   if the value is
-0002aae0: 2073 6f6d 6520 6465 6661 756c 7420 7661   some default va
-0002aaf0: 6c75 6520 616e 6420 6f74 6865 7277 6973  lue and otherwis
-0002ab00: 6520 7075 6e74 2074 6f20 6e75 6d70 792e  e punt to numpy.
-0002ab10: 0d0a 2020 2020 2020 2020 2320 5468 6520  ..        # The 
-0002ab20: 7661 6c75 6520 6173 736f 6369 6174 6564  value associated
-0002ab30: 2077 6974 6820 6561 6368 206b 6579 776f   with each keywo
-0002ab40: 7264 2069 6e20 7468 6520 6469 6374 696f  rd in the dictio
-0002ab50: 6e61 7279 2069 7320 7468 6520 6f6e 6c79  nary is the only
-0002ab60: 2076 616c 7565 2077 6527 6c6c 0d0a 2020   value we'll..  
-0002ab70: 2020 2020 2020 2320 7375 7070 6f72 7420        # support 
-0002ab80: 666f 7220 7468 6174 206b 6579 776f 7264  for that keyword
-0002ab90: 2e0d 0a20 2020 2020 2020 2023 2046 6f72  ...        # For
-0002aba0: 2065 7861 6d70 6c65 2c20 696e 206e 756d   example, in num
-0002abb0: 7079 2031 2e31 3720 7468 6520 7375 6d28  py 1.17 the sum(
-0002abc0: 2920 6675 6e63 7469 6f6e 2070 6173 7365  ) function passe
-0002abd0: 7320 7768 6572 653d 5472 7565 2062 7920  s where=True by 
-0002abe0: 6465 6661 756c 742e 0d0a 2020 2020 2020  default...      
-0002abf0: 2020 666f 7220 6b77 2c20 6465 6661 756c    for kw, defaul
-0002ac00: 745f 7661 6c20 696e 205f 5041 5254 4941  t_val in _PARTIA
-0002ac10: 4c4c 595f 5355 5050 4f52 5445 445f 4b45  LLY_SUPPORTED_KE
-0002ac20: 5957 4f52 4453 5f54 4f5f 4445 4641 554c  YWORDS_TO_DEFAUL
-0002ac30: 5453 2e69 7465 6d73 2829 3a0d 0a20 2020  TS.items():..   
-0002ac40: 2020 2020 2020 2020 2069 6620 6b77 2069           if kw i
-0002ac50: 6e20 6b77 6172 6773 3a0d 0a20 2020 2020  n kwargs:..     
-0002ac60: 2020 2020 2020 2020 2020 2023 2055 7365             # Use
-0002ac70: 2061 2074 7970 6520 6368 6563 6b20 6265   a type check be
-0002ac80: 666f 7265 2065 7175 616c 6974 7920 6865  fore equality he
-0002ac90: 7265 2074 6f20 6176 6f69 6420 6572 726f  re to avoid erro
-0002aca0: 7273 2063 6175 7365 640d 0a20 2020 2020  rs caused..     
-0002acb0: 2020 2020 2020 2020 2020 2023 2062 7920             # by 
-0002acc0: 6368 6563 6b69 6e67 2065 7175 616c 6974  checking equalit
-0002acd0: 7920 6265 7477 6565 6e20 626f 6f6c 7320  y between bools 
-0002ace0: 616e 6420 6172 7261 7973 2e0d 0a20 2020  and arrays...   
-0002acf0: 2020 2020 2020 2020 2020 2020 206b 7761               kwa
-0002ad00: 7267 5f76 616c 203d 206b 7761 7267 735b  rg_val = kwargs[
-0002ad10: 6b77 5d0d 0a20 2020 2020 2020 2020 2020  kw]..           
-0002ad20: 2020 2020 2069 6620 7479 7065 2864 6566       if type(def
-0002ad30: 6175 6c74 5f76 616c 2920 213d 2074 7970  ault_val) != typ
-0002ad40: 6528 6b77 6172 675f 7661 6c29 206f 7220  e(kwarg_val) or 
-0002ad50: 6b77 6172 675f 7661 6c20 213d 2064 6566  kwarg_val != def
-0002ad60: 6175 6c74 5f76 616c 3a0d 0a20 2020 2020  ault_val:..     
-0002ad70: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0002ad80: 6f70 6c65 7665 6c5f 6162 6f72 7420 7c3d  oplevel_abort |=
-0002ad90: 2054 7275 650d 0a0d 0a20 2020 2020 2020   True....       
-0002ada0: 2064 7479 7065 3a20 4f70 7469 6f6e 616c   dtype: Optional
-0002adb0: 5b6e 702e 6474 7970 655d 203d 206b 7761  [np.dtype] = kwa
-0002adc0: 7267 732e 6765 7428 2264 7479 7065 222c  rgs.get("dtype",
-0002add0: 204e 6f6e 6529 0d0a 0d0a 2020 2020 2020   None)....      
-0002ade0: 2020 6861 735f 6f75 7470 7574 733a 2062    has_outputs: b
-0002adf0: 6f6f 6c20 3d20 4661 6c73 650d 0a20 2020  ool = False..   
-0002ae00: 2020 2020 206f 7574 5f61 7267 733a 204c       out_args: L
-0002ae10: 6973 745b 416e 795d 203d 205b 5d0d 0a0d  ist[Any] = []...
-0002ae20: 0a20 2020 2020 2020 2023 2066 6c69 7020  .        # flip 
-0002ae30: 616e 7920 6f75 7470 7574 7320 746f 206e  any outputs to n
-0002ae40: 6461 7272 6179 2e2e 2e0d 0a20 2020 2020  darray.....     
-0002ae50: 2020 206f 7574 7075 7473 203d 206b 7761     outputs = kwa
-0002ae60: 7267 732e 706f 7028 226f 7574 222c 204e  rgs.pop("out", N
-0002ae70: 6f6e 6529 0d0a 2020 2020 2020 2020 6966  one)..        if
-0002ae80: 206f 7574 7075 7473 3a0d 0a20 2020 2020   outputs:..     
-0002ae90: 2020 2020 2020 2068 6173 5f6f 7574 7075         has_outpu
-0002aea0: 7473 203d 2054 7275 650d 0a20 2020 2020  ts = True..     
-0002aeb0: 2020 2020 2020 2066 6f72 206f 7574 7075         for outpu
-0002aec0: 7420 696e 206f 7574 7075 7473 3a0d 0a20  t in outputs:.. 
-0002aed0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002aee0: 6620 6973 696e 7374 616e 6365 286f 7574  f isinstance(out
-0002aef0: 7075 742c 206e 702e 6e64 6172 7261 7929  put, np.ndarray)
-0002af00: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002af10: 2020 2020 2020 2069 735f 6e6f 745f 7375         is_not_su
-0002af20: 7070 6f72 7465 6420 3d20 7365 6c66 2e5f  pported = self._
-0002af30: 6973 5f6e 6f74 5f73 7570 706f 7274 6564  is_not_supported
-0002af40: 286f 7574 7075 7429 0d0a 2020 2020 2020  (output)..      
-0002af50: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002af60: 2069 735f 6e6f 745f 7375 7070 6f72 7465   is_not_supporte
-0002af70: 643a 0d0a 2020 2020 2020 2020 2020 2020  d:..            
-0002af80: 2020 2020 2020 2020 2020 2020 2320 544f              # TO
-0002af90: 444f 2065 6e61 626c 6520 7468 6973 2077  DO enable this w
-0002afa0: 6172 6e69 6e67 2069 6e20 6120 6675 7475  arning in a futu
-0002afb0: 7265 206d 696e 6f72 2072 656c 6561 7365  re minor release
-0002afc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002afd0: 2020 2020 2020 2020 2020 2320 4661 7374            # Fast
-0002afe0: 4172 7261 792e 5f70 6f73 7369 626c 795f  Array._possibly_
-0002aff0: 7761 726e 2866 275f 5f61 7272 6179 5f75  warn(f'__array_u
-0002b000: 6675 6e63 5f5f 3a20 756e 7375 7070 6f72  func__: unsuppor
-0002b010: 7465 6420 6f75 7470 7574 2022 7b6f 7574  ted output "{out
-0002b020: 7075 747d 2227 290d 0a20 2020 2020 2020  put}"')..       
-0002b030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b040: 2074 6f70 6c65 7665 6c5f 6162 6f72 7420   toplevel_abort 
-0002b050: 7c3d 2069 735f 6e6f 745f 7375 7070 6f72  |= is_not_suppor
-0002b060: 7465 640d 0a20 2020 2020 2020 2020 2020  ted..           
-0002b070: 2020 2020 206f 7574 5f61 7267 732e 6170       out_args.ap
-0002b080: 7065 6e64 286f 7574 7075 7429 0d0a 2020  pend(output)..  
-0002b090: 2020 2020 2020 2020 2020 2320 7265 706c            # repl
-0002b0a0: 6163 6520 6f75 740d 0a20 2020 2020 2020  ace out..       
-0002b0b0: 2020 2020 206b 7761 7267 735b 226f 7574       kwargs["out
-0002b0c0: 225d 203d 2074 7570 6c65 286f 7574 5f61  "] = tuple(out_a
-0002b0d0: 7267 7329 0d0a 2020 2020 2020 2020 656c  rgs)..        el
-0002b0e0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-0002b0f0: 2023 2054 4a44 202d 2068 6572 6520 6f75   # TJD - here ou
-0002b100: 7470 7574 7320 7761 7320 6e6f 7420 7370  tputs was not sp
-0002b110: 6563 6966 6965 640d 0a20 2020 2020 2020  ecified..       
-0002b120: 2020 2020 2023 206e 6f77 2069 6620 5546       # now if UF
-0002b130: 756e 632e 6e6f 7574 203d 3d31 2c20 7468  unc.nout ==1, th
-0002b140: 6973 2066 756e 6374 696f 6e20 7265 7175  is function requ
-0002b150: 6972 6573 2061 6e20 6f75 7470 7574 0d0a  ires an output..
-0002b160: 2020 2020 2020 2020 2020 2020 6f75 7470              outp
-0002b170: 7574 7320 3d20 284e 6f6e 652c 2920 2a20  uts = (None,) * 
-0002b180: 7566 756e 632e 6e6f 7574 0d0a 0d0a 2020  ufunc.nout....  
-0002b190: 2020 2020 2020 2320 5365 6520 6874 7470        # See http
-0002b1a0: 733a 2f2f 646f 6373 2e70 7974 686f 6e2e  s://docs.python.
-0002b1b0: 6f72 672f 332f 632d 6170 692f 7479 7065  org/3/c-api/type
-0002b1c0: 6f62 6a2e 6874 6d6c 0d0a 2020 2020 2020  obj.html..      
-0002b1d0: 2020 2320 5365 6520 4e75 6d62 6572 204f    # See Number O
-0002b1e0: 626a 6563 7420 5374 7275 6374 7572 6573  bject Structures
-0002b1f0: 2061 6e64 204d 6170 7069 6e67 204f 626a   and Mapping Obj
-0002b200: 6563 7420 5374 7275 6374 7572 6520 666f  ect Structure fo
-0002b210: 7220 696e 6465 7869 6e67 0d0a 0d0a 2020  r indexing....  
-0002b220: 2020 2020 2020 2320 7566 756e 632e 6e69        # ufunc.ni
-0002b230: 6e09 2020 2020 5468 6520 6e75 6d62 6572  n.    The number
-0002b240: 206f 6620 696e 7075 7473 2e0d 0a20 2020   of inputs...   
-0002b250: 2020 2020 2023 2075 6675 6e63 2e6e 6f75       # ufunc.nou
-0002b260: 7409 2020 2020 5468 6520 6e75 6d62 6572  t.    The number
-0002b270: 206f 6620 6f75 7470 7574 732e 0d0a 2020   of outputs...  
-0002b280: 2020 2020 2020 2320 7566 756e 632e 6e61        # ufunc.na
-0002b290: 7267 7309 5468 6520 6e75 6d62 6572 206f  rgs.The number o
-0002b2a0: 6620 6172 6775 6d65 6e74 732e 0d0a 2020  f arguments...  
-0002b2b0: 2020 2020 2020 2320 7566 756e 632e 6e74        # ufunc.nt
-0002b2c0: 7970 6573 0954 6865 206e 756d 6265 7220  ypes.The number 
-0002b2d0: 6f66 2074 7970 6573 2e0d 0a20 2020 2020  of types...     
-0002b2e0: 2020 2023 2075 6675 6e63 2e74 7970 6573     # ufunc.types
-0002b2f0: 0952 6574 7572 6e73 2061 206c 6973 7420  .Returns a list 
-0002b300: 7769 7468 2074 7970 6573 2067 726f 7570  with types group
-0002b310: 6564 2069 6e70 7574 2d3e 6f75 7470 7574  ed input->output
-0002b320: 2e0d 0a20 2020 2020 2020 2023 2075 6675  ...        # ufu
-0002b330: 6e63 2e69 6465 6e74 6974 7909 5468 6520  nc.identity.The 
-0002b340: 6964 656e 7469 7479 2076 616c 7565 2e0d  identity value..
-0002b350: 0a0d 0a20 2020 2020 2020 2066 696e 616c  ...        final
-0002b360: 5f64 7479 7065 3a20 4f70 7469 6f6e 616c  _dtype: Optional
-0002b370: 5b6e 702e 6474 7970 655d 203d 204e 6f6e  [np.dtype] = Non
-0002b380: 650d 0a20 2020 2020 2020 2066 6173 745f  e..        fast_
-0002b390: 6675 6e63 7469 6f6e 3a20 4f70 7469 6f6e  function: Option
-0002b3a0: 616c 5b4d 4154 485f 4f50 4552 4154 494f  al[MATH_OPERATIO
-0002b3b0: 4e5d 203d 204e 6f6e 650d 0a20 2020 2020  N] = None..     
-0002b3c0: 2020 2072 6564 7563 655f 6675 6e63 3a20     reduce_func: 
-0002b3d0: 4f70 7469 6f6e 616c 5b52 4544 5543 455f  Optional[REDUCE_
-0002b3e0: 4655 4e43 5449 4f4e 535d 203d 204e 6f6e  FUNCTIONS] = Non
-0002b3f0: 650d 0a0d 0a20 2020 2020 2020 2023 2048  e....        # H
-0002b400: 616e 646c 6520 7265 6475 6365 2075 6675  andle reduce ufu
-0002b410: 6e63 206d 6574 686f 6473 2e0d 0a20 2020  nc methods...   
-0002b420: 2020 2020 2023 206e 6f74 653a 2077 6865       # note: whe
-0002b430: 6e20 6d65 7468 6f64 2069 7320 2761 7427  n method is 'at'
-0002b440: 2074 6869 7320 6973 2061 6e20 696e 706c   this is an inpl
-0002b450: 6163 6520 756e 6275 6666 6572 6564 206f  ace unbuffered o
-0002b460: 7065 7261 7469 6f6e 0d0a 2020 2020 2020  peration..      
-0002b470: 2020 2320 7468 6973 2063 616e 2073 7065    # this can spe
-0002b480: 6564 2075 7020 726f 7574 696e 6573 2074  ed up routines t
-0002b490: 6861 7420 7573 6520 6865 6176 7920 6d61  hat use heavy ma
-0002b4a0: 736b 6564 206f 7065 7261 7469 6f6e 730d  sked operations.
-0002b4b0: 0a20 2020 2020 2020 2069 6620 6d65 7468  .        if meth
-0002b4c0: 6f64 203d 3d20 2272 6564 7563 6522 2061  od == "reduce" a
-0002b4d0: 6e64 2046 6173 7441 7272 6179 2e46 6173  nd FastArray.Fas
-0002b4e0: 7465 7255 4675 6e63 2061 6e64 206e 6f74  terUFunc and not
-0002b4f0: 2074 6f70 6c65 7665 6c5f 6162 6f72 743a   toplevel_abort:
-0002b500: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0002b510: 612e 616e 7928 2920 616e 6420 612e 616c  a.any() and a.al
-0002b520: 6c28 2920 6172 6520 6c6f 6769 6361 6c20  l() are logical 
-0002b530: 7265 6475 6365 206f 7065 7261 7469 6f6e  reduce operation
-0002b540: 730d 0a20 2020 2020 2020 2020 2020 2023  s..            #
-0002b550: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
-0002b560: 2020 2020 2020 2023 204c 6f6f 6b20 666f         # Look fo
-0002b570: 7220 6178 6973 3a4e 6f6e 6520 2d2d 206f  r axis:None -- o
-0002b580: 7468 6572 7769 7365 2041 424f 5254 0d0a  therwise ABORT..
-0002b590: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
-0002b5a0: 656e 206c 6f6f 6b20 666f 7220 4b65 6570  en look for Keep
-0002b5b0: 6469 6d73 2077 6968 6368 206d 6561 6e73  dims wihch means
-0002b5c0: 2074 6f20 7772 6170 2072 6573 756c 7420   to wrap result 
-0002b5d0: 696e 206c 6973 742f 6172 7261 793f 0d0a  in list/array?..
-0002b5e0: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
-0002b5f0: 656e 2063 6865 636b 2064 7479 7065 2061  en check dtype a
-0002b600: 6c73 6f0d 0a20 2020 2020 2020 2020 2020  lso..           
-0002b610: 2023 0d0a 2020 2020 2020 2020 2020 2020   #..            
-0002b620: 2320 496e 205b 3232 5d3a 2074 3d46 4128  # In [22]: t=FA(
-0002b630: 5b5b 332c 342c 355d 2c5b 362c 372c 385d  [[3,4,5],[6,7,8]
-0002b640: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
-0002b650: 2320 496e 205b 3233 5d3a 206e 702e 6164  # In [23]: np.ad
-0002b660: 642e 7265 6475 6365 2874 290d 0a20 2020  d.reduce(t)..   
-0002b670: 2020 2020 2020 2020 2023 2121 7265 6475           #!!redu
-0002b680: 6365 2020 7265 6475 6365 206e 696e 3a20  ce  reduce nin: 
-0002b690: 3220 3120 3c75 6675 6e63 2027 6164 6427  2 1 <ufunc 'add'
-0002b6a0: 3e20 5b61 7272 6179 285b 5b33 2c20 342c  > [array([[3, 4,
-0002b6b0: 2035 5d2c 0d0a 2020 2020 2020 2020 2020   5],..          
-0002b6c0: 2020 2320 2020 2020 2020 5b36 2c20 372c    #       [6, 7,
-0002b6d0: 2038 5d5d 295d 206f 7574 3a20 284e 6f6e   8]])] out: (Non
-0002b6e0: 652c 2920 6b77 6172 6773 3a20 7b7d 0d0a  e,) kwargs: {}..
-0002b6f0: 2020 2020 2020 2020 2020 2020 2320 7265              # re
-0002b700: 7375 6c74 7320 5b20 3920 3131 2031 335d  sults [ 9 11 13]
-0002b710: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0002b720: 4f75 745b 3233 5d3a 2061 7272 6179 285b  Out[23]: array([
-0002b730: 2039 2c20 3131 2c20 3133 5d29 0d0a 2020   9, 11, 13])..  
-0002b740: 2020 2020 2020 2020 2020 2320 496e 205b            # In [
-0002b750: 3234 5d3a 206e 702e 6164 642e 7265 6475  24]: np.add.redu
-0002b760: 6365 2874 2c20 6178 6973 3d4e 6f6e 6529  ce(t, axis=None)
-0002b770: 0d0a 2020 2020 2020 2020 2020 2020 2321  ..            #!
-0002b780: 2172 6564 7563 6520 2072 6564 7563 6520  !reduce  reduce 
-0002b790: 6e69 6e3a 2032 2031 203c 7566 756e 6320  nin: 2 1 <ufunc 
-0002b7a0: 2761 6464 273e 205b 6172 7261 7928 5b5b  'add'> [array([[
-0002b7b0: 332c 2034 2c20 355d 2c0d 0a20 2020 2020  3, 4, 5],..     
-0002b7c0: 2020 2020 2020 2023 2020 2020 2020 205b         #       [
-0002b7d0: 362c 2037 2c20 385d 5d29 5d20 6f75 743a  6, 7, 8]])] out:
-0002b7e0: 2028 4e6f 6e65 2c29 206b 7761 7267 733a   (None,) kwargs:
-0002b7f0: 207b 2761 7869 7327 3a20 4e6f 6e65 7d0d   {'axis': None}.
-0002b800: 0a20 2020 2020 2020 2020 2020 2023 2072  .            # r
-0002b810: 6573 756c 7473 2033 330d 0a20 2020 2020  esults 33..     
-0002b820: 2020 2020 2020 2023 204f 7574 5b32 345d         # Out[24]
-0002b830: 3a20 3333 0d0a 2020 2020 2020 2020 2020  : 33..          
-0002b840: 2020 2320 496e 205b 3235 5d3a 206e 702e    # In [25]: np.
-0002b850: 6164 642e 7265 6475 6365 2874 2c20 6178  add.reduce(t, ax
-0002b860: 6973 3d4e 6f6e 652c 206b 6565 7064 696d  is=None, keepdim
-0002b870: 733d 5472 7565 290d 0a20 2020 2020 2020  s=True)..       
-0002b880: 2020 2020 2023 2121 7265 6475 6365 2020       #!!reduce  
-0002b890: 7265 6475 6365 206e 696e 3a20 3220 3120  reduce nin: 2 1 
-0002b8a0: 3c75 6675 6e63 2027 6164 6427 3e20 5b61  <ufunc 'add'> [a
-0002b8b0: 7272 6179 285b 5b33 2c20 342c 2035 5d2c  rray([[3, 4, 5],
-0002b8c0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0002b8d0: 2020 2020 2020 5b36 2c20 372c 2038 5d5d        [6, 7, 8]]
-0002b8e0: 295d 206f 7574 3a20 284e 6f6e 652c 2920  )] out: (None,) 
-0002b8f0: 6b77 6172 6773 3a20 7b27 6178 6973 273a  kwargs: {'axis':
-0002b900: 204e 6f6e 652c 2027 6b65 6570 6469 6d73   None, 'keepdims
-0002b910: 273a 2054 7275 657d 0d0a 2020 2020 2020  ': True}..      
-0002b920: 2020 2020 2020 2320 7265 7375 6c74 7320        # results 
-0002b930: 5b5b 3333 5d5d 0d0a 2020 2020 2020 2020  [[33]]..        
-0002b940: 2020 2020 2320 4f75 745b 3235 5d3a 2061      # Out[25]: a
-0002b950: 7272 6179 285b 5b33 335d 5d29 0d0a 2020  rray([[33]])..  
-0002b960: 2020 2020 2020 2020 2020 2320 496e 205b            # In [
-0002b970: 3236 5d3a 206e 702e 6164 642e 7265 6475  26]: np.add.redu
-0002b980: 6365 2874 2c20 6178 6973 3d4e 6f6e 652c  ce(t, axis=None,
-0002b990: 206b 6565 7064 696d 733d 5472 7565 2c20   keepdims=True, 
-0002b9a0: 6474 7970 653d 6e70 2e66 6c6f 6174 3332  dtype=np.float32
-0002b9b0: 290d 0a20 2020 2020 2020 2020 2020 2023  )..            #
-0002b9c0: 2121 7265 6475 6365 2020 7265 6475 6365  !!reduce  reduce
-0002b9d0: 206e 696e 3a20 3220 3120 3c75 6675 6e63   nin: 2 1 <ufunc
-0002b9e0: 2027 6164 6427 3e20 5b61 7272 6179 285b   'add'> [array([
-0002b9f0: 5b33 2c20 342c 2035 5d2c 0d0a 2020 2020  [3, 4, 5],..    
-0002ba00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0002ba10: 5b36 2c20 372c 2038 5d5d 295d 206f 7574  [6, 7, 8]])] out
-0002ba20: 3a20 284e 6f6e 652c 2920 6b77 6172 6773  : (None,) kwargs
-0002ba30: 3a20 7b27 6178 6973 273a 204e 6f6e 652c  : {'axis': None,
-0002ba40: 2027 6b65 6570 6469 6d73 273a 2054 7275   'keepdims': Tru
-0002ba50: 652c 2027 6474 7970 6527 3a20 3c63 6c61  e, 'dtype': <cla
-0002ba60: 7373 2027 6e75 6d70 792e 666c 6f61 7433  ss 'numpy.float3
-0002ba70: 3227 3e7d 0d0a 2020 2020 2020 2020 2020  2'>}..          
-0002ba80: 2020 2320 7265 7375 6c74 7320 5b5b 3333    # results [[33
-0002ba90: 2e5d 5d0d 0a20 2020 2020 2020 2020 2020  .]]..           
-0002baa0: 2023 204f 7574 5b32 365d 3a20 6172 7261   # Out[26]: arra
-0002bab0: 7928 5b5b 3333 2e5d 5d2c 2064 7479 7065  y([[33.]], dtype
-0002bac0: 3d66 6c6f 6174 3332 290d 0a20 2020 2020  =float32)..     
-0002bad0: 2020 2020 2020 2023 2070 7269 6e74 2822         # print("
-0002bae0: 2121 7265 6475 6365 2022 2c20 6d65 7468  !!reduce ", meth
-0002baf0: 6f64 2c20 276e 696e 3a27 2c20 7566 756e  od, 'nin:', ufun
-0002bb00: 632e 6e69 6e2c 2075 6675 6e63 2e6e 6f75  c.nin, ufunc.nou
-0002bb10: 742c 2075 6675 6e63 2c20 2061 7267 732c  t, ufunc,  args,
-0002bb20: 2027 6f75 743a 272c 206f 7574 7075 7473   'out:', outputs
-0002bb30: 2c20 2027 6b77 6172 6773 3a27 2c20 6b77  ,  'kwargs:', kw
-0002bb40: 6172 6773 2c27 6e64 696d 272c 2061 7267  args,'ndim', arg
-0002bb50: 735b 305d 2e6e 6469 6d29 0d0a 2020 2020  s[0].ndim)..    
-0002bb60: 2020 2020 2020 2020 2320 7265 7375 6c74          # result
-0002bb70: 4e20 3d20 7375 7065 7228 4661 7374 4172  N = super(FastAr
-0002bb80: 7261 792c 2073 656c 6629 2e5f 5f61 7272  ray, self).__arr
-0002bb90: 6179 5f75 6675 6e63 5f5f 2875 6675 6e63  ay_ufunc__(ufunc
-0002bba0: 2c20 6d65 7468 6f64 2c2a 2a6b 7761 7267  , method,**kwarg
-0002bbb0: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
-0002bbc0: 2320 7072 696e 7428 2221 2172 6573 756c  # print("!!resul
-0002bbd0: 7420 6e75 6d70 7922 2c20 7265 7375 6c74  t numpy", result
-0002bbe0: 4e2c 2074 7970 6528 7265 7375 6c74 4e29  N, type(resultN)
-0002bbf0: 290d 0a20 2020 2020 2020 2020 2020 2023  )..            #
-0002bc00: 204e 4f54 453a 0d0a 2020 2020 2020 2020   NOTE:..        
-0002bc10: 2020 2020 2320 6c6f 6f6b 2066 6f72 2072      # look for r
-0002bc20: 6564 7563 6520 6c6f 6769 6361 6c5f 6f72  educe logical_or
-0002bc30: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0002bc40: 6c6f 6f6b 2066 6f72 2072 6564 7563 655f  look for reduce_
-0002bc50: 6c6f 6769 6361 6c5f 616e 6420 2020 2875  logical_and   (u
-0002bc60: 7365 6420 7769 7468 206e 702e 666d 696e  sed with np.fmin
-0002bc70: 2066 6f72 2069 6e73 7461 6e63 6529 0d0a   for instance)..
-0002bc80: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-0002bc90: 6475 6365 5f66 756e 6320 3d20 6752 6564  duce_func = gRed
-0002bca0: 7563 6555 4675 6e63 732e 6765 7428 7566  uceUFuncs.get(uf
-0002bcb0: 756e 632c 204e 6f6e 6529 0d0a 0d0a 2020  unc, None)....  
-0002bcc0: 2020 2020 2020 2320 6368 6563 6b20 6966        # check if
-0002bcd0: 2077 6520 6361 6e20 7072 6f63 6565 6420   we can proceed 
-0002bce0: 746f 2063 616c 6375 6c61 7465 2061 2066  to calculate a f
-0002bcf0: 6173 7465 7220 7761 790d 0a20 2020 2020  aster way..     
-0002bd00: 2020 2069 6620 6d65 7468 6f64 203d 3d20     if method == 
-0002bd10: 225f 5f63 616c 6c5f 5f22 2061 6e64 2046  "__call__" and F
-0002bd20: 6173 7441 7272 6179 2e46 6173 7465 7255  astArray.FasterU
-0002bd30: 4675 6e63 2061 6e64 206e 6f74 2074 6f70  Func and not top
-0002bd40: 6c65 7665 6c5f 6162 6f72 743a 0d0a 2020  level_abort:..  
-0002bd50: 2020 2020 2020 2020 2020 2320 6368 6563            # chec
-0002bd60: 6b20 666f 7220 6269 6e61 7279 2075 6675  k for binary ufu
-0002bd70: 6e63 0d0a 2020 2020 2020 2020 2020 2020  nc..            
-0002bd80: 6966 206c 656e 2861 7267 7329 203d 3d20  if len(args) == 
-0002bd90: 3220 616e 6420 7566 756e 632e 6e6f 7574  2 and ufunc.nout
-0002bda0: 203d 3d20 313a 0d0a 2020 2020 2020 2020   == 1:..        
-0002bdb0: 2020 2020 2020 2020 2323 2323 2323 2323          ########
-0002bdc0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002bdd0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002bde0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002bdf0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002be00: 2323 230d 0a20 2020 2020 2020 2020 2020  ###..           
-0002be10: 2020 2020 2023 2320 4249 4e41 5259 0d0a       ## BINARY..
-0002be20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002be30: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002be40: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002be50: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002be60: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002be70: 2323 2323 2323 2323 2323 230d 0a20 2020  ###########..   
-0002be80: 2020 2020 2020 2020 2020 2020 2061 7272               arr
-0002be90: 6179 5f74 7970 6573 3a20 4c69 7374 5b6e  ay_types: List[n
-0002bea0: 702e 6474 7970 655d 203d 205b 5d0d 0a20  p.dtype] = [].. 
-0002beb0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0002bec0: 6361 6c61 725f 7479 7065 733a 204c 6973  calar_types: Lis
-0002bed0: 745b 5363 616c 6172 5479 7065 5d20 3d20  t[ScalarType] = 
-0002bee0: 5b5d 0d0a 0d0a 2020 2020 2020 2020 2020  []....          
-0002bef0: 2020 2020 2020 7363 616c 6172 733a 2069        scalars: i
-0002bf00: 6e74 203d 2030 0d0a 2020 2020 2020 2020  nt = 0..        
-0002bf10: 2020 2020 2020 2020 6162 6f72 743a 2069          abort: i
-0002bf20: 6e74 203d 2030 0d0a 2020 2020 2020 2020  nt = 0..        
-0002bf30: 2020 2020 2020 2020 666f 7220 6172 7220          for arr 
-0002bf40: 696e 2061 7267 733a 0d0a 2020 2020 2020  in args:..      
-0002bf50: 2020 2020 2020 2020 2020 2020 2020 6172                ar
-0002bf60: 7254 7970 6520 3d20 7479 7065 2861 7272  rType = type(arr
-0002bf70: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0002bf80: 2020 2020 2020 2069 6620 6172 7254 7970         if arrTyp
-0002bf90: 6520 696e 2053 6361 6c61 7254 7970 653a  e in ScalarType:
-0002bfa0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002bfb0: 2020 2020 2020 2020 2020 7363 616c 6172            scalar
-0002bfc0: 7320 2b3d 2031 0d0a 2020 2020 2020 2020  s += 1..        
-0002bfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bfe0: 7363 616c 6172 5f74 7970 6573 2e61 7070  scalar_types.app
-0002bff0: 656e 6428 6172 7254 7970 6529 0d0a 2020  end(arrType)..  
-0002c000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c010: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-0002c020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c030: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-0002c040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c050: 2020 2061 7272 6179 5f74 7970 6573 2e61     array_types.a
-0002c060: 7070 656e 6428 6172 722e 6474 7970 6529  ppend(arr.dtype)
-0002c070: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002c080: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0002c090: 6368 6563 6b20 666f 7220 6e6f 6e20 636f  check for non co
-0002c0a0: 6e74 696e 676f 7573 2061 7272 6179 730d  ntingous arrays.
-0002c0b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c0c0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002c0d0: 6172 722e 6974 656d 7369 7a65 2021 3d20  arr.itemsize != 
-0002c0e0: 6172 722e 7374 7269 6465 735b 305d 3a0d  arr.strides[0]:.
-0002c0f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c110: 2061 626f 7274 203d 2031 0d0a 2020 2020   abort = 1..    
-0002c120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c130: 2020 2020 6578 6365 7074 3a0d 0a20 2020      except:..   
-0002c140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c150: 2020 2020 2020 2020 2061 626f 7274 203d           abort =
-0002c160: 2031 0d0a 2020 2020 2020 2020 2020 2020   1..            
-0002c170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c180: 2320 6361 6e20 6861 7070 656e 2077 6865  # can happen whe
-0002c190: 6e20 4e6f 6e65 206f 7220 6120 7079 7468  n None or a pyth
-0002c1a0: 6f6e 206c 6973 7420 6973 2070 6173 7365  on list is passe
-0002c1b0: 640d 0a20 2020 2020 2020 2020 2020 2020  d..             
-0002c1c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002c1d0: 6620 4661 7374 4172 7261 792e 5665 7262  f FastArray.Verb
-0002c1e0: 6f73 6520 3e20 313a 0d0a 2020 2020 2020  ose > 1:..      
-0002c1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c200: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-0002c210: 6622 2a2a 646f 6e74 206b 6e6f 7720 686f  f"**dont know ho
-0002c220: 7720 746f 2068 616e 646c 6520 6172 7261  w to handle arra
-0002c230: 7920 7b61 7272 7d20 6172 6773 3a20 7b61  y {arr} args: {a
-0002c240: 7267 737d 2229 0d0a 0d0a 2020 2020 2020  rgs}")....      
-0002c250: 2020 2020 2020 2020 2020 6966 2061 626f            if abo
-0002c260: 7274 203d 3d20 303a 0d0a 2020 2020 2020  rt == 0:..      
-0002c270: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002c280: 2073 6361 6c61 7273 203c 2032 3a0d 0a20   scalars < 2:.. 
-0002c290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c2a0: 2020 2020 2020 2069 735f 6c6f 6769 6361         is_logica
-0002c2b0: 6c20 3d20 300d 0a20 2020 2020 2020 2020  l = 0..         
-0002c2c0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0002c2d0: 2063 6865 636b 2066 6f72 2061 6464 2c20   check for add, 
-0002c2e0: 7375 622c 206d 756c 2c20 6469 7669 6465  sub, mul, divide
-0002c2f0: 2c20 706f 7765 720d 0a20 2020 2020 2020  , power..       
-0002c300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c310: 2066 6173 745f 6675 6e63 7469 6f6e 203d   fast_function =
-0002c320: 2067 4269 6e61 7279 5546 756e 6373 2e67   gBinaryUFuncs.g
-0002c330: 6574 2875 6675 6e63 2c20 4e6f 6e65 290d  et(ufunc, None).
-0002c340: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c350: 2020 2020 2020 2020 2069 6620 6661 7374           if fast
-0002c360: 5f66 756e 6374 696f 6e20 6973 204e 6f6e  _function is Non
-0002c370: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0002c380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c390: 2320 6368 6563 6b20 666f 7220 636f 6d70  # check for comp
-0002c3a0: 6172 6973 6f6e 2061 6e64 206c 6f67 6963  arison and logic
-0002c3b0: 616c 206f 722f 616e 6420 6675 6e63 7469  al or/and functi
-0002c3c0: 6f6e 730d 0a20 2020 2020 2020 2020 2020  ons..           
-0002c3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c3e0: 2066 6173 745f 6675 6e63 7469 6f6e 203d   fast_function =
-0002c3f0: 2067 4269 6e61 7279 4c6f 6769 6361 6c55   gBinaryLogicalU
-0002c400: 4675 6e63 732e 6765 7428 7566 756e 632c  Funcs.get(ufunc,
-0002c410: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
-0002c420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c430: 2020 2020 6966 2066 6173 745f 6675 6e63      if fast_func
-0002c440: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
-0002c450: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002c460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c470: 2020 2069 6620 4661 7374 4172 7261 792e     if FastArray.
-0002c480: 5665 7262 6f73 6520 3e20 323a 0d0a 2020  Verbose > 2:..  
+00022010: 2323 2323 2323 230d 0a20 2020 2023 2053  #######..    # S
+00022020: 7461 7473 2f4d 4c20 7365 6374 696f 6e0d  tats/ML section.
+00022030: 0a20 2020 2023 2323 2323 2323 2323 2323  .    ###########
+00022040: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00022050: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00022060: 2323 0d0a 2020 2020 6465 6620 6e6f 726d  ##..    def norm
+00022070: 616c 697a 655f 7a73 636f 7265 2873 656c  alize_zscore(sel
+00022080: 6629 202d 3e20 4661 7374 4172 7261 793a  f) -> FastArray:
+00022090: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+000220a0: 206e 6f72 6d61 6c69 7a65 5f7a 7363 6f72   normalize_zscor
+000220b0: 6528 7365 6c66 290d 0a0d 0a20 2020 2064  e(self)....    d
+000220c0: 6566 206e 6f72 6d61 6c69 7a65 5f6d 696e  ef normalize_min
+000220d0: 6d61 7828 7365 6c66 2920 2d3e 2046 6173  max(self) -> Fas
+000220e0: 7441 7272 6179 3a0d 0a20 2020 2020 2020  tArray:..       
+000220f0: 2072 6574 7572 6e20 6e6f 726d 616c 697a   return normaliz
+00022100: 655f 6d69 6e6d 6178 2873 656c 6629 0d0a  e_minmax(self)..
+00022110: 0d0a 2020 2020 2323 2323 2323 2323 2323  ..    ##########
+00022120: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00022130: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00022140: 2323 230d 0a20 2020 2023 2042 6173 6963  ###..    # Basic
+00022150: 4d61 7468 2073 6563 7469 6f6e 2028 746f  Math section (to
+00022160: 2062 6520 686f 6f6b 6564 2061 7420 4320   be hooked at C 
+00022170: 6c65 7665 6c20 6e6f 7729 0d0a 2020 2020  level now)..    
+00022180: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00022190: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000221a0: 2323 2323 2323 2323 2323 2323 230d 0a20  #############.. 
+000221b0: 2020 2023 2064 6566 205f 5f61 6464 5f5f     # def __add__
+000221c0: 2873 656c 662c 2076 616c 7565 293a 2020  (self, value):  
+000221d0: 2072 6573 756c 743d 7263 2e42 6173 6963   result=rc.Basic
+000221e0: 4d61 7468 5477 6f49 6e70 7574 7328 2873  MathTwoInputs((s
+000221f0: 656c 662c 2076 616c 7565 292c 2031 2c20  elf, value), 1, 
+00022200: 3029 3b20 7265 7375 6c74 3d20 7265 7375  0); result= resu
+00022210: 6c74 2069 6620 7265 7375 6c74 2069 7320  lt if result is 
+00022220: 6e6f 7420 4e6f 6e65 2065 6c73 6520 6e70  not None else np
+00022230: 2e61 6464 2873 656c 662c 7661 6c75 6529  .add(self,value)
+00022240: 3b20 7265 7475 726e 2072 6573 756c 740d  ; return result.
+00022250: 0a20 2020 2023 2064 6566 205f 5f61 6464  .    # def __add
+00022260: 5f5f 2873 656c 662c 2076 616c 7565 293a  __(self, value):
+00022270: 2020 2072 6574 7572 6e20 7263 2e42 6173     return rc.Bas
+00022280: 6963 4d61 7468 5477 6f49 6e70 7574 7328  icMathTwoInputs(
+00022290: 2873 656c 662c 2076 616c 7565 292c 2031  (self, value), 1
+000222a0: 2c20 3029 0d0a 0d0a 2020 2020 4070 726f  , 0)....    @pro
+000222b0: 7065 7274 790d 0a20 2020 2040 5f75 7365  perty..    @_use
+000222c0: 5f61 7574 6f63 6f6d 706c 6574 655f 706c  _autocomplete_pl
+000222d0: 6163 6568 6f6c 6465 7228 3029 0d0a 2020  aceholder(0)..  
+000222e0: 2020 6465 6620 6372 6328 7365 6c66 2920    def crc(self) 
+000222f0: 2d3e 2069 6e74 3a0d 0a20 2020 2020 2020  -> int:..       
+00022300: 2022 2222 0d0a 2020 2020 2020 2020 4361   """..        Ca
+00022310: 6c63 756c 6174 6520 7468 6520 3332 2d62  lculate the 32-b
+00022320: 6974 2043 5243 206f 6620 7468 6520 6461  it CRC of the da
+00022330: 7461 2069 6e20 7468 6973 2061 7272 6179  ta in this array
+00022340: 2075 7369 6e67 2074 6865 2043 6173 7461   using the Casta
+00022350: 676e 6f6c 6920 706f 6c79 6e6f 6d69 616c  gnoli polynomial
+00022360: 2028 4352 4333 3243 292e 0d0a 0d0a 2020   (CRC32C).....  
+00022370: 2020 2020 2020 5468 6973 2066 756e 6374        This funct
+00022380: 696f 6e20 646f 6573 206e 6f74 2063 6f6e  ion does not con
+00022390: 7369 6465 7220 7468 6520 6172 7261 7927  sider the array'
+000223a0: 7320 7368 6170 6520 6f72 2073 7472 6964  s shape or strid
+000223b0: 6573 2077 6865 6e20 6361 6c63 756c 6174  es when calculat
+000223c0: 696e 6720 7468 6520 4352 432c 0d0a 2020  ing the CRC,..  
+000223d0: 2020 2020 2020 6974 2073 696d 706c 7920        it simply 
+000223e0: 6361 6c63 756c 6174 6573 2074 6865 2043  calculates the C
+000223f0: 5243 2076 616c 7565 206f 7665 7220 7468  RC value over th
+00022400: 6520 656e 7469 7265 2062 7566 6665 7220  e entire buffer 
+00022410: 6465 7363 7269 6265 6420 6279 2074 6865  described by the
+00022420: 2061 7272 6179 2e0d 0a0d 0a20 2020 2020   array.....     
+00022430: 2020 2045 7861 6d70 6c65 730d 0a20 2020     Examples..   
+00022440: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+00022450: 2020 2020 2020 2063 616e 2062 6520 7573         can be us
+00022460: 6564 2074 6f20 636f 6d70 6172 6520 7477  ed to compare tw
+00022470: 6f20 6172 7261 7973 2066 6f72 2073 7472  o arrays for str
+00022480: 7563 7475 7261 6c20 6571 7561 6c69 7479  uctural equality
+00022490: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
+000224a0: 3d20 6172 616e 6765 2831 3030 290d 0a20  = arange(100).. 
+000224b0: 2020 2020 2020 203e 3e3e 2062 203d 2061         >>> b = a
+000224c0: 7261 6e67 6528 3130 302e 3029 0d0a 2020  range(100.0)..  
+000224d0: 2020 2020 2020 3e3e 3e20 612e 6372 6320        >>> a.crc 
+000224e0: 3d3d 2062 2e63 7263 0d0a 2020 2020 2020  == b.crc..      
+000224f0: 2020 4661 6c73 650d 0a20 2020 2020 2020    False..       
+00022500: 2022 2222 0d0a 2020 2020 2020 2020 7265   """..        re
+00022510: 7475 726e 2063 7263 3332 6328 7365 6c66  turn crc32c(self
+00022520: 290d 0a0d 0a20 2020 2023 2074 6f64 6f3a  )....    # todo:
+00022530: 2072 616e 6765 2f6e 616e 7261 6e67 650d   range/nanrange.
+00022540: 0a20 2020 2023 2074 6f64 6f3a 2073 7461  .    # todo: sta
+00022550: 7473 2f6e 616e 7374 6174 730d 0a0d 0a20  ts/nanstats.... 
+00022560: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+00022570: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00022580: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00022590: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
+000225a0: 2020 6465 6620 756e 6971 7565 280d 0a20    def unique(.. 
+000225b0: 2020 2020 2020 2073 656c 662c 0d0a 2020         self,..  
+000225c0: 2020 2020 2020 7265 7475 726e 5f69 6e64        return_ind
+000225d0: 6578 3a20 626f 6f6c 203d 2046 616c 7365  ex: bool = False
+000225e0: 2c0d 0a20 2020 2020 2020 2072 6574 7572  ,..        retur
+000225f0: 6e5f 696e 7665 7273 653a 2062 6f6f 6c20  n_inverse: bool 
+00022600: 3d20 4661 6c73 652c 0d0a 2020 2020 2020  = False,..      
+00022610: 2020 7265 7475 726e 5f63 6f75 6e74 733a    return_counts:
+00022620: 2062 6f6f 6c20 3d20 4661 6c73 652c 0d0a   bool = False,..
+00022630: 2020 2020 2020 2020 736f 7274 6564 3a20          sorted: 
+00022640: 626f 6f6c 203d 2054 7275 652c 0d0a 2020  bool = True,..  
+00022650: 2020 2020 2020 6c65 783a 2062 6f6f 6c20        lex: bool 
+00022660: 3d20 4661 6c73 652c 0d0a 2020 2020 2020  = False,..      
+00022670: 2020 6474 7970 653a 204f 7074 696f 6e61    dtype: Optiona
+00022680: 6c5b 556e 696f 6e5b 7374 722c 206e 702e  l[Union[str, np.
+00022690: 6474 7970 655d 5d20 3d20 4e6f 6e65 2c0d  dtype]] = None,.
+000226a0: 0a20 2020 2020 2020 2066 696c 7465 723a  .        filter:
+000226b0: 204f 7074 696f 6e61 6c5b 6e70 2e6e 6461   Optional[np.nda
+000226c0: 7272 6179 5d20 3d20 4e6f 6e65 2c0d 0a20  rray] = None,.. 
+000226d0: 2020 2020 2020 202a 2a6b 7761 7267 732c         **kwargs,
+000226e0: 0d0a 2020 2020 2920 2d3e 2055 6e69 6f6e  ..    ) -> Union
+000226f0: 5b22 4661 7374 4172 7261 7922 2c20 5475  ["FastArray", Tu
+00022700: 706c 655b 2246 6173 7441 7272 6179 222c  ple["FastArray",
+00022710: 202e 2e2e 5d2c 204c 6973 745b 2246 6173   ...], List["Fas
+00022720: 7441 7272 6179 225d 2c20 7475 706c 655d  tArray"], tuple]
+00022730: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+00022740: 2020 2020 2020 2020 4669 6e64 2074 6865          Find the
+00022750: 2075 6e69 7175 6520 656c 656d 656e 7473   unique elements
+00022760: 206f 6620 616e 2061 7272 6179 206f 7220   of an array or 
+00022770: 7468 6520 756e 6971 7565 2063 6f6d 6269  the unique combi
+00022780: 6e61 7469 6f6e 7320 6f66 2065 6c65 6d65  nations of eleme
+00022790: 6e74 7320 7769 7468 0d0a 2020 2020 2020  nts with..      
+000227a0: 2020 636f 7272 6573 706f 6e64 696e 6720    corresponding 
+000227b0: 696e 6469 6365 7320 696e 206d 756c 7469  indices in multi
+000227c0: 706c 6520 6172 7261 7973 2e0d 0a0d 0a20  ple arrays..... 
+000227d0: 2020 2020 2020 2053 6565 203a 6d65 7468         See :meth
+000227e0: 3a60 7269 7074 6162 6c65 2e75 6e69 7175  :`riptable.uniqu
+000227f0: 6560 2066 6f72 2066 756c 6c20 646f 6375  e` for full docu
+00022800: 6d65 6e74 6174 696f 6e2e 0d0a 2020 2020  mentation...    
+00022810: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00022820: 2072 6574 7572 6e20 756e 6971 7565 280d   return unique(.
+00022830: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00022840: 662c 0d0a 2020 2020 2020 2020 2020 2020  f,..            
+00022850: 7265 7475 726e 5f69 6e64 6578 3d72 6574  return_index=ret
+00022860: 7572 6e5f 696e 6465 782c 0d0a 2020 2020  urn_index,..    
+00022870: 2020 2020 2020 2020 7265 7475 726e 5f69          return_i
+00022880: 6e76 6572 7365 3d72 6574 7572 6e5f 696e  nverse=return_in
+00022890: 7665 7273 652c 0d0a 2020 2020 2020 2020  verse,..        
+000228a0: 2020 2020 7265 7475 726e 5f63 6f75 6e74      return_count
+000228b0: 733d 7265 7475 726e 5f63 6f75 6e74 732c  s=return_counts,
+000228c0: 0d0a 2020 2020 2020 2020 2020 2020 736f  ..            so
+000228d0: 7274 6564 3d73 6f72 7465 642c 0d0a 2020  rted=sorted,..  
+000228e0: 2020 2020 2020 2020 2020 6c65 783d 6c65            lex=le
+000228f0: 782c 0d0a 2020 2020 2020 2020 2020 2020  x,..            
+00022900: 6474 7970 653d 6474 7970 652c 0d0a 2020  dtype=dtype,..  
+00022910: 2020 2020 2020 2020 2020 6669 6c74 6572            filter
+00022920: 3d66 696c 7465 722c 0d0a 2020 2020 2020  =filter,..      
+00022930: 2020 2020 2020 2a2a 6b77 6172 6773 2c0d        **kwargs,.
+00022940: 0a20 2020 2020 2020 2029 0d0a 0d0a 2020  .        )....  
+00022950: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
+00022960: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00022970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00022980: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
+00022990: 2064 6566 206e 756e 6971 7565 2873 656c   def nunique(sel
+000229a0: 6629 202d 3e20 696e 743a 0d0a 2020 2020  f) -> int:..    
+000229b0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+000229c0: 2052 6574 7572 6e20 7468 6520 6e75 6d62   Return the numb
+000229d0: 6572 206f 6620 756e 6971 7565 2076 616c  er of unique val
+000229e0: 7565 7320 696e 2074 6865 2069 6e70 7574  ues in the input
+000229f0: 2060 4661 7374 4172 7261 7960 2e20 446f   `FastArray`. Do
+00022a00: 6573 206e 6f74 2069 6e63 6c75 6465 204e  es not include N
+00022a10: 614e 206f 7220 7365 6e74 696e 656c 2076  aN or sentinel v
+00022a20: 616c 7565 732e 0d0a 0d0a 2020 2020 2020  alues.....      
+00022a30: 2020 5265 7475 726e 730d 0a20 2020 2020    Returns..     
+00022a40: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
+00022a50: 2020 2020 696e 740d 0a20 2020 2020 2020      int..       
+00022a60: 2020 2020 204e 756d 6265 7220 6f66 2075       Number of u
+00022a70: 6e69 7175 6520 7661 6c75 6573 2069 6e20  nique values in 
+00022a80: 7468 6520 696e 7075 7420 6046 6173 7441  the input `FastA
+00022a90: 7272 6179 602e 2044 6f65 7320 6e6f 7420  rray`. Does not 
+00022aa0: 696e 636c 7564 6520 4e61 4e20 6f72 2073  include NaN or s
+00022ab0: 656e 7469 6e65 6c20 7661 6c75 6573 2e0d  entinel values..
+00022ac0: 0a0d 0a20 2020 2020 2020 2053 6565 2041  ...        See A
+00022ad0: 6c73 6f0d 0a20 2020 2020 2020 202d 2d2d  lso..        ---
+00022ae0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2046  -----..        F
+00022af0: 6173 7441 7272 6179 2e64 7570 6c69 6361  astArray.duplica
+00022b00: 7465 6420 3a20 5265 7475 726e 7320 6120  ted : Returns a 
+00022b10: 626f 6f6c 6561 6e20 6046 6173 7441 7272  boolean `FastArr
+00022b20: 6179 6020 696e 6469 6361 7469 6e67 2064  ay` indicating d
+00022b30: 7570 6c69 6361 7465 2076 616c 7565 732e  uplicate values.
+00022b40: 0d0a 2020 2020 2020 2020 2e43 6174 6567  ..        .Categ
+00022b50: 6f72 6963 616c 2e6e 756e 6971 7565 203a  orical.nunique :
+00022b60: 2052 6574 7572 6e73 2074 6865 206e 756d   Returns the num
+00022b70: 6265 7220 6f66 2075 6e69 7175 6520 7661  ber of unique va
+00022b80: 6c75 6573 2074 6861 7420 6f63 6375 7220  lues that occur 
+00022b90: 696e 2074 6865 2060 2e43 6174 6567 6f72  in the `.Categor
+00022ba0: 6963 616c 602e 0d0a 0d0a 2020 2020 2020  ical`.....      
+00022bb0: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
+00022bc0: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
+00022bd0: 2020 2020 2020 5265 7472 6965 7665 2074        Retrieve t
+00022be0: 6865 206e 756d 6265 7220 6f66 2075 6e69  he number of uni
+00022bf0: 7175 6520 7661 6c75 6573 2069 6e20 6120  que values in a 
+00022c00: 666c 6f61 7469 6e67 2070 6f69 6e74 2060  floating point `
+00022c10: 4661 7374 4172 7261 7960 3a0d 0a0d 0a20  FastArray`:.... 
+00022c20: 2020 2020 2020 203e 3e3e 2061 203d 2072         >>> a = r
+00022c30: 742e 4661 7374 4172 7261 7928 5b31 2e2c  t.FastArray([1.,
+00022c40: 2032 2e2c 2033 2e2c 2031 2e2c 2032 2e2c   2., 3., 1., 2.,
+00022c50: 2033 2e5d 290d 0a20 2020 2020 2020 203e   3.])..        >
+00022c60: 3e3e 2061 0d0a 2020 2020 2020 2020 4661  >> a..        Fa
+00022c70: 7374 4172 7261 7928 5b31 2e2c 2032 2e2c  stArray([1., 2.,
+00022c80: 2033 2e2c 2031 2e2c 2032 2e2c 2033 2e5d   3., 1., 2., 3.]
+00022c90: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
+00022ca0: 2e6e 756e 6971 7565 2829 0d0a 2020 2020  .nunique()..    
+00022cb0: 2020 2020 330d 0a0d 0a20 2020 2020 2020      3....       
+00022cc0: 2052 6574 7269 6576 6520 7468 6520 6e75   Retrieve the nu
+00022cd0: 6d62 6572 206f 6620 756e 6971 7565 2076  mber of unique v
+00022ce0: 616c 7565 7320 696e 2061 2066 6c6f 6174  alues in a float
+00022cf0: 696e 6720 706f 696e 7420 6046 6173 7441  ing point `FastA
+00022d00: 7272 6179 6020 7769 7468 2061 204e 614e  rray` with a NaN
+00022d10: 2076 616c 7565 3a0d 0a0d 0a20 2020 2020   value:....     
+00022d20: 2020 203e 3e3e 2061 3220 3d20 7274 2e46     >>> a2 = rt.F
+00022d30: 6173 7441 7272 6179 285b 312e 2c20 322e  astArray([1., 2.
+00022d40: 2c20 332e 2c20 312e 2c20 322e 2c20 332e  , 3., 1., 2., 3.
+00022d50: 2c20 7274 2e6e 616e 5d29 0d0a 2020 2020  , rt.nan])..    
+00022d60: 2020 2020 3e3e 3e20 6132 0d0a 2020 2020      >>> a2..    
+00022d70: 2020 2020 4661 7374 4172 7261 7928 5b20      FastArray([ 
+00022d80: 312e 2c20 2032 2e2c 2020 332e 2c20 2031  1.,  2.,  3.,  1
+00022d90: 2e2c 2020 322e 2c20 2033 2e2c 206e 616e  .,  2.,  3., nan
+00022da0: 5d29 0d0a 2020 2020 2020 2020 3e3e 3e20  ])..        >>> 
+00022db0: 6132 2e6e 756e 6971 7565 2829 2020 2320  a2.nunique()  # 
+00022dc0: 5468 6520 4e61 4e20 7661 6c75 6520 6973  The NaN value is
+00022dd0: 206e 6f74 2069 6e63 6c75 6465 642e 0d0a   not included...
+00022de0: 2020 2020 2020 2020 330d 0a0d 0a20 2020          3....   
+00022df0: 2020 2020 2052 6574 7269 6576 6520 7468       Retrieve th
+00022e00: 6520 6e75 6d62 6572 206f 6620 756e 6971  e number of uniq
+00022e10: 7565 2076 616c 7565 7320 696e 2061 6e20  ue values in an 
+00022e20: 756e 7369 676e 6564 2069 6e74 6567 6572  unsigned integer
+00022e30: 2060 4661 7374 4172 7261 7960 2077 6974   `FastArray` wit
+00022e40: 6820 6120 7365 6e74 696e 656c 2076 616c  h a sentinel val
+00022e50: 7565 3a0d 0a0d 0a20 2020 2020 2020 203e  ue:....        >
+00022e60: 3e3e 2061 3320 3d20 7274 2e46 6173 7441  >> a3 = rt.FastA
+00022e70: 7272 6179 285b 3235 352c 2032 2c20 332c  rray([255, 2, 3,
+00022e80: 2032 2c20 335d 2c20 6474 7970 653d 2275   2, 3], dtype="u
+00022e90: 696e 7438 2229 0d0a 2020 2020 2020 2020  int8")..        
+00022ea0: 3e3e 3e20 6133 0d0a 2020 2020 2020 2020  >>> a3..        
+00022eb0: 4661 7374 4172 7261 7928 5b32 3535 2c20  FastArray([255, 
+00022ec0: 2020 322c 2020 2033 2c20 2020 322c 2020    2,   3,   2,  
+00022ed0: 2033 5d2c 2064 7479 7065 3d75 696e 7438   3], dtype=uint8
+00022ee0: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
+00022ef0: 332e 6e75 6e69 7175 6528 2920 2023 2054  3.nunique()  # T
+00022f00: 6865 2073 656e 7469 6e65 6c20 7661 6c75  he sentinel valu
+00022f10: 6520 6973 206e 6f74 2069 6e63 6c75 6465  e is not include
+00022f20: 642e 0d0a 2020 2020 2020 2020 320d 0a20  d...        2.. 
+00022f30: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00022f40: 2020 2020 756e 203d 2075 6e69 7175 6528      un = unique(
+00022f50: 7365 6c66 290d 0a20 2020 2020 2020 2063  self)..        c
+00022f60: 6f75 6e74 203d 206c 656e 2875 6e29 0d0a  ount = len(un)..
+00022f70: 2020 2020 2020 2020 6966 2063 6f75 6e74          if count
+00022f80: 203e 2030 3a0d 0a20 2020 2020 2020 2020   > 0:..         
+00022f90: 2020 2023 2075 6e69 7175 6520 6973 2073     # unique is s
+00022fa0: 6f72 7465 642c 2073 6f20 6368 6563 6b20  orted, so check 
+00022fb0: 666f 7220 7365 6e74 696e 656c 2062 6173  for sentinel bas
+00022fc0: 6564 206f 6e20 6474 7970 650d 0a20 2020  ed on dtype..   
+00022fd0: 2020 2020 2020 2020 2069 6e76 203d 2049           inv = I
+00022fe0: 4e56 414c 4944 5f44 4943 545b 7365 6c66  NVALID_DICT[self
+00022ff0: 2e64 7479 7065 2e6e 756d 5d0d 0a20 2020  .dtype.num]..   
+00023000: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+00023010: 2e64 7479 7065 2e63 6861 7220 696e 204e  .dtype.char in N
+00023020: 756d 7079 4368 6172 5479 7065 732e 416c  umpyCharTypes.Al
+00023030: 6c46 6c6f 6174 3a0d 0a20 2020 2020 2020  lFloat:..       
+00023040: 2020 2020 2020 2020 2023 2063 6865 636b           # check
+00023050: 2069 6620 6c61 7374 2069 7465 6d20 6973   if last item is
+00023060: 206e 616e 0d0a 2020 2020 2020 2020 2020   nan..          
+00023070: 2020 2020 2020 6966 2075 6e5b 636f 756e        if un[coun
+00023080: 7420 2d20 315d 2021 3d20 756e 5b63 6f75  t - 1] != un[cou
+00023090: 6e74 202d 2031 5d3a 0d0a 2020 2020 2020  nt - 1]:..      
+000230a0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+000230b0: 756e 7420 2d3d 2031 0d0a 2020 2020 2020  unt -= 1..      
+000230c0: 2020 2020 2020 2320 756e 7369 676e 6564        # unsigned
+000230d0: 2069 6e74 2075 7365 7320 6869 6768 206e   int uses high n
+000230e0: 756d 6265 7220 6173 2073 656e 7469 6e65  umber as sentine
+000230f0: 6c0d 0a20 2020 2020 2020 2020 2020 2065  l..            e
+00023100: 6c69 6620 7365 6c66 2e64 7479 7065 2e63  lif self.dtype.c
+00023110: 6861 7220 696e 204e 756d 7079 4368 6172  har in NumpyChar
+00023120: 5479 7065 732e 556e 7369 676e 6564 496e  Types.UnsignedIn
+00023130: 7465 6765 723a 0d0a 2020 2020 2020 2020  teger:..        
+00023140: 2020 2020 2020 2020 6966 2075 6e5b 636f          if un[co
+00023150: 756e 7420 2d20 315d 203d 3d20 696e 763a  unt - 1] == inv:
+00023160: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00023170: 2020 2020 2020 636f 756e 7420 2d3d 2031        count -= 1
+00023180: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00023190: 616c 6c20 6f74 6865 7220 7365 6e74 696e  all other sentin
+000231a0: 656c 7320 6172 6520 6c6f 7765 7374 206e  els are lowest n
+000231b0: 756d 6265 720d 0a20 2020 2020 2020 2020  umber..         
+000231c0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+000231d0: 2020 2020 2020 2020 2020 6966 2075 6e5b            if un[
+000231e0: 305d 203d 3d20 696e 763a 0d0a 2020 2020  0] == inv:..    
+000231f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023200: 636f 756e 7420 2d3d 2031 0d0a 2020 2020  count -= 1..    
+00023210: 2020 2020 7265 7475 726e 2063 6f75 6e74      return count
+00023220: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+00023230: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023240: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023250: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023260: 2d0d 0a20 2020 2064 6566 2073 6561 7263  -..    def searc
+00023270: 6873 6f72 7465 6428 7365 6c66 2c20 762c  hsorted(self, v,
+00023280: 2073 6964 653d 226c 6566 7422 2c20 736f   side="left", so
+00023290: 7274 6572 3d4e 6f6e 6529 202d 3e20 6e70  rter=None) -> np
+000232a0: 2e6e 756d 6265 723a 0d0a 2020 2020 2020  .number:..      
+000232b0: 2020 7265 7475 726e 205f 7365 6172 6368    return _search
+000232c0: 736f 7274 6564 2873 656c 662c 2076 2c20  sorted(self, v, 
+000232d0: 7369 6465 3d73 6964 652c 2073 6f72 7465  side=side, sorte
+000232e0: 723d 736f 7274 6572 290d 0a0d 0a20 2020  r=sorter)....   
+000232f0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+00023300: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023310: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023320: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023330: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+00023340: 2020 2020 6465 6620 6d61 705f 6f6c 6428      def map_old(
+00023350: 7365 6c66 2c20 6e70 6469 6374 3a20 6469  self, npdict: di
+00023360: 6374 293a 0d0a 2020 2020 2020 2020 2222  ct):..        ""
+00023370: 220d 0a20 2020 2020 2020 2045 7861 6d70  "..        Examp
+00023380: 6c65 0d0a 2020 2020 2020 2020 2d2d 2d2d  le..        ----
+00023390: 2d2d 2d0d 0a20 2020 2020 2020 203e 3e3e  ---..        >>>
+000233a0: 2064 203d 207b 313a 3130 2c20 323a 3230   d = {1:10, 2:20
+000233b0: 7d0d 0a20 2020 2020 2020 203e 3e3e 2064  }..        >>> d
+000233c0: 6174 5b27 6327 5d20 3d20 6461 742e 612e  at['c'] = dat.a.
+000233d0: 6d61 7028 6429 0d0a 2020 2020 2020 2020  map(d)..        
+000233e0: 3e3e 3e20 7072 696e 7428 6461 7429 0d0a  >>> print(dat)..
+000233f0: 2020 2020 2020 2020 2020 2061 2020 6220             a  b 
+00023400: 2020 6362 2020 2063 0d0a 2020 2020 2020    cb   c..      
+00023410: 2020 3020 2031 2020 3020 2030 2e30 2020    0  1  0  0.0  
+00023420: 3130 0d0a 2020 2020 2020 2020 3120 2031  10..        1  1
+00023430: 2020 3120 2031 2e30 2020 3130 0d0a 2020    1  1.0  10..  
+00023440: 2020 2020 2020 3220 2031 2020 3220 2033        2  1  2  3
+00023450: 2e30 2020 3130 0d0a 2020 2020 2020 2020  .0  10..        
+00023460: 3320 2032 2020 3320 2035 2e30 2020 3230  3  2  3  5.0  20
+00023470: 0d0a 2020 2020 2020 2020 3420 2032 2020  ..        4  2  
+00023480: 3420 2037 2e30 2020 3230 0d0a 2020 2020  4  7.0  20..    
+00023490: 2020 2020 3520 2032 2020 3520 2039 2e30      5  2  5  9.0
+000234a0: 2020 3230 0d0a 2020 2020 2020 2020 2222    20..        ""
+000234b0: 220d 0a20 2020 2020 2020 206f 7574 4172  "..        outAr
+000234c0: 7261 7920 3d20 7365 6c66 2e63 6f70 7928  ray = self.copy(
+000234d0: 290d 0a20 2020 2020 2020 2066 6f72 206b  )..        for k
+000234e0: 2c20 7620 696e 206e 7064 6963 742e 6974  , v in npdict.it
+000234f0: 656d 7328 293a 0d0a 2020 2020 2020 2020  ems():..        
+00023500: 2020 2020 6f75 7441 7272 6179 5b73 656c      outArray[sel
+00023510: 6620 3d3d 206b 5d20 3d20 760d 0a20 2020  f == k] = v..   
+00023520: 2020 2020 2072 6574 7572 6e20 6f75 7441       return outA
+00023530: 7272 6179 0d0a 0d0a 2020 2020 6465 6620  rray....    def 
+00023540: 6d61 7028 7365 6c66 2c20 6e70 6469 6374  map(self, npdict
+00023550: 3a20 6469 6374 2920 2d3e 2046 6173 7441  : dict) -> FastA
+00023560: 7272 6179 3a0d 0a20 2020 2020 2020 2022  rray:..        "
+00023570: 2222 0d0a 2020 2020 2020 2020 4e6f 7465  ""..        Note
+00023580: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00023590: 0d0a 2020 2020 2020 2020 5573 6573 2069  ..        Uses i
+000235a0: 736d 656d 6265 7220 616e 6420 6361 6e20  smember and can 
+000235b0: 6861 6e64 6c65 206c 6172 6765 2064 6963  handle large dic
+000235c0: 7469 6f6e 6172 6965 730d 0a0d 0a20 2020  tionaries....   
+000235d0: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
+000235e0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+000235f0: 0a20 2020 2020 2020 203e 3e3e 2061 3d61  .        >>> a=a
+00023600: 7261 6e67 6528 3329 0d0a 2020 2020 2020  range(3)..      
+00023610: 2020 3e3e 3e20 612e 6d61 7028 7b31 3a20    >>> a.map({1: 
+00023620: 2761 272c 2032 3a27 6227 2c20 333a 2763  'a', 2:'b', 3:'c
+00023630: 277d 290d 0a20 2020 2020 2020 2046 6173  '})..        Fas
+00023640: 7441 7272 6179 285b 2727 2c20 2761 272c  tArray(['', 'a',
+00023650: 2027 6227 5d2c 2064 7479 7065 3d27 3c55   'b'], dtype='<U
+00023660: 3127 290d 0a20 2020 2020 2020 203e 3e3e  1')..        >>>
+00023670: 2061 3d61 7261 6e67 6528 3329 2b31 0d0a   a=arange(3)+1..
+00023680: 2020 2020 2020 2020 3e3e 3e20 612e 6d61          >>> a.ma
+00023690: 7028 7b31 3a20 2761 272c 2032 3a27 6227  p({1: 'a', 2:'b'
+000236a0: 2c20 333a 2763 277d 290d 0a20 2020 2020  , 3:'c'})..     
+000236b0: 2020 2046 6173 7441 7272 6179 285b 2761     FastArray(['a
+000236c0: 272c 2027 6227 2c20 2763 275d 2c20 6474  ', 'b', 'c'], dt
+000236d0: 7970 653d 273c 5531 2729 0d0a 2020 2020  ype='<U1')..    
+000236e0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+000236f0: 206f 7269 6720 3d20 4661 7374 4172 7261   orig = FastArra
+00023700: 7928 5b2a 6e70 6469 6374 5d2c 2075 6e69  y([*npdict], uni
+00023710: 636f 6465 3d54 7275 6529 0d0a 2020 2020  code=True)..    
+00023720: 2020 2020 7265 706c 6163 6520 3d20 4661      replace = Fa
+00023730: 7374 4172 7261 7928 5b2a 6e70 6469 6374  stArray([*npdict
+00023740: 2e76 616c 7565 7328 295d 2c20 756e 6963  .values()], unic
+00023750: 6f64 653d 5472 7565 290d 0a20 2020 2020  ode=True)..     
+00023760: 2020 206f 7574 4172 7261 7920 3d20 7365     outArray = se
+00023770: 6c66 2e66 696c 6c5f 696e 7661 6c69 6428  lf.fill_invalid(
+00023780: 7365 6c66 2e73 6861 7065 2c20 6474 7970  self.shape, dtyp
+00023790: 653d 7265 706c 6163 652e 6474 7970 652c  e=replace.dtype,
+000237a0: 2069 6e70 6c61 6365 3d46 616c 7365 290d   inplace=False).
+000237b0: 0a20 2020 2020 2020 2066 6f75 6e64 2c20  .        found, 
+000237c0: 6964 7820 3d20 6973 6d65 6d62 6572 2873  idx = ismember(s
+000237d0: 656c 662c 206f 7269 6729 0d0a 2020 2020  elf, orig)..    
+000237e0: 2020 2020 6f75 7441 7272 6179 5b66 6f75      outArray[fou
+000237f0: 6e64 5d20 3d20 7265 706c 6163 655b 6964  nd] = replace[id
+00023800: 785b 666f 756e 645d 5d0d 0a20 2020 2020  x[found]]..     
+00023810: 2020 2072 6574 7572 6e20 6f75 7441 7272     return outArr
+00023820: 6179 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  ay....    # ----
+00023830: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023840: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023850: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023860: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00023870: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
+00023880: 2073 6869 6674 2873 656c 662c 2070 6572   shift(self, per
+00023890: 696f 6473 3d31 2c20 696e 7661 6c69 643d  iods=1, invalid=
+000238a0: 4e6f 6e65 2920 2d3e 2046 6173 7441 7272  None) -> FastArr
+000238b0: 6179 3a0d 0a20 2020 2020 2020 2022 2222  ay:..        """
+000238c0: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+000238d0: 2061 2073 6869 6674 6564 2060 4661 7374   a shifted `Fast
+000238e0: 4172 7261 7960 2e20 5370 6163 6573 2061  Array`. Spaces a
+000238f0: 7420 6569 7468 6572 2065 6e64 2028 6672  t either end (fr
+00023900: 6f6d 2073 6869 6674 696e 6729 2061 7265  om shifting) are
+00023910: 2066 696c 6c65 6420 7769 7468 2069 6e76   filled with inv
+00023920: 616c 6964 2076 616c 7565 7320 6261 7365  alid values base
+00023930: 6420 6f6e 2074 6865 2069 6e70 7574 2061  d on the input a
+00023940: 7272 6179 2773 2064 6174 6120 7479 7065  rray's data type
+00023950: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
+00023960: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
+00023970: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
+00023980: 2020 2020 2070 6572 696f 6473 3a20 696e       periods: in
+00023990: 742c 2064 6566 6175 6c74 2031 0d0a 2020  t, default 1..  
+000239a0: 2020 2020 2020 2020 2020 4e75 6d62 6572            Number
+000239b0: 206f 6620 656c 656d 656e 7420 706f 7369   of element posi
+000239c0: 7469 6f6e 7320 746f 2073 6869 6674 2072  tions to shift r
+000239d0: 6967 6874 2028 6966 2070 6f73 6974 6976  ight (if positiv
+000239e0: 6529 206f 7220 6c65 6674 2028 6966 206e  e) or left (if n
+000239f0: 6567 6174 6976 6529 2e0d 0a0d 0a20 2020  egative).....   
+00023a00: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
+00023a10: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+00023a20: 2020 2020 2020 2041 2073 6869 6674 6564         A shifted
+00023a30: 2060 4661 7374 4172 7261 7960 2e20 5370   `FastArray`. Sp
+00023a40: 6163 6573 2061 7420 6569 7468 6572 2065  aces at either e
+00023a50: 6e64 2028 6672 6f6d 2073 6869 6674 696e  nd (from shiftin
+00023a60: 6729 2061 7265 2066 696c 6c65 6420 7769  g) are filled wi
+00023a70: 7468 2069 6e76 616c 6964 2076 616c 7565  th invalid value
+00023a80: 7320 6261 7365 6420 6f6e 2074 6865 2069  s based on the i
+00023a90: 6e70 7574 2061 7272 6179 2773 2064 6174  nput array's dat
+00023aa0: 6120 7479 7065 2e0d 0a0d 0a20 2020 2020  a type.....     
+00023ab0: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
+00023ac0: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+00023ad0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00023ae0: 2e64 6966 6620 3a20 5265 7475 726e 7320  .diff : Returns 
+00023af0: 6120 6046 6173 7441 7272 6179 6020 636f  a `FastArray` co
+00023b00: 6e74 6169 6e69 6e67 2074 6865 2064 6966  ntaining the dif
+00023b10: 6665 7265 6e63 6573 2062 6574 7765 656e  ferences between
+00023b20: 2061 646a 6163 656e 7420 696e 7075 7420   adjacent input 
+00023b30: 6172 7261 7920 7661 6c75 6573 2e0d 0a20  array values... 
+00023b40: 2020 2020 2020 202e 4361 7465 676f 7269         .Categori
+00023b50: 6361 6c2e 7368 6966 7420 3a20 5368 6966  cal.shift : Shif
+00023b60: 7473 2076 616c 7565 7320 696e 2074 6865  ts values in the
+00023b70: 2060 2e43 6174 6567 6f72 6963 616c 6020   `.Categorical` 
+00023b80: 6279 2061 2073 7065 6369 6669 6564 206e  by a specified n
+00023b90: 756d 6265 7220 6f66 2070 6572 696f 6473  umber of periods
+00023ba0: 2e0d 0a0d 0a20 2020 2020 2020 2045 7861  .....        Exa
+00023bb0: 6d70 6c65 730d 0a20 2020 2020 2020 202d  mples..        -
+00023bc0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+00023bd0: 2053 6869 6674 2061 7272 6179 2065 6c65   Shift array ele
+00023be0: 6d65 6e74 7320 6f6e 6520 706f 7369 7469  ments one positi
+00023bf0: 6f6e 2074 6f20 7468 6520 7269 6768 743a  on to the right:
+00023c00: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
+00023c10: 613d 7274 2e46 4128 5b30 2c20 322c 2034  a=rt.FA([0, 2, 4
+00023c20: 2c20 382c 2031 362c 2033 325d 290d 0a20  , 8, 16, 32]).. 
+00023c30: 2020 2020 2020 203e 3e3e 2061 0d0a 2020         >>> a..  
+00023c40: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+00023c50: 5b20 302c 2020 322c 2020 342c 2020 382c  [ 0,  2,  4,  8,
+00023c60: 2031 362c 2033 325d 290d 0a20 2020 2020   16, 32])..     
+00023c70: 2020 203e 3e3e 2061 2e73 6869 6674 2829     >>> a.shift()
+00023c80: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00023c90: 7261 7928 5b2d 3231 3437 3438 3336 3438  ray([-2147483648
+00023ca0: 2c20 2020 2020 2020 2020 2020 302c 2020  ,           0,  
+00023cb0: 2020 2020 2020 2020 2032 2c20 2020 2020           2,     
+00023cc0: 2020 2020 2020 342c 0d0a 2020 2020 2020        4,..      
+00023cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023ce0: 2020 2020 2020 2038 2c20 2020 2020 2020         8,       
+00023cf0: 2020 2031 365d 290d 0a0d 0a20 2020 2020     16])....     
+00023d00: 2020 2053 6869 6674 2061 7272 6179 2065     Shift array e
+00023d10: 6c65 6d65 6e74 7320 7477 6f20 706f 7369  lements two posi
+00023d20: 7469 6f6e 7320 746f 2074 6865 206c 6566  tions to the lef
+00023d30: 743a 0d0a 0d0a 2020 2020 2020 2020 3e3e  t:....        >>
+00023d40: 3e20 612e 7368 6966 7428 2d32 290d 0a20  > a.shift(-2).. 
+00023d50: 2020 2020 2020 203e 3e3e 2046 6173 7441         >>> FastA
+00023d60: 7272 6179 285b 2020 2020 2020 2020 2020  rray([          
+00023d70: 342c 2020 2020 2020 2020 2020 2038 2c20  4,           8, 
+00023d80: 2020 2020 2020 2020 2031 362c 2020 2020           16,    
+00023d90: 2020 2020 2020 3332 2c0d 0a20 2020 2020        32,..     
+00023da0: 2020 2020 2020 2020 2020 2020 2020 2d32                -2
+00023db0: 3134 3734 3833 3634 382c 202d 3231 3437  147483648, -2147
+00023dc0: 3438 3336 3438 5d29 0d0a 0d0a 2020 2020  483648])....    
+00023dd0: 2020 2020 5370 6563 6966 7920 6120 7368      Specify a sh
+00023de0: 6966 7420 7661 6c75 6520 6772 6561 7465  ift value greate
+00023df0: 7220 7468 616e 2074 6865 2061 7272 6179  r than the array
+00023e00: 206c 656e 6774 683a 0d0a 0d0a 2020 2020   length:....    
+00023e10: 2020 2020 3e3e 3e20 612e 7368 6966 7428      >>> a.shift(
+00023e20: 3130 290d 0a20 2020 2020 2020 2046 6173  10)..        Fas
+00023e30: 7441 7272 6179 285b 2d32 3134 3734 3833  tArray([-2147483
+00023e40: 3634 382c 202d 3231 3437 3438 3336 3438  648, -2147483648
+00023e50: 2c20 2d32 3134 3734 3833 3634 382c 202d  , -2147483648, -
+00023e60: 3231 3437 3438 3336 3438 2c0d 0a20 2020  2147483648,..   
+00023e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023e80: 2d32 3134 3734 3833 3634 382c 202d 3231  -2147483648, -21
+00023e90: 3437 3438 3336 3438 5d29 0d0a 2020 2020  47483648])..    
+00023ea0: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
+00023eb0: 2020 2069 6620 7065 7269 6f64 7320 3d3d     if periods ==
+00023ec0: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
+00023ed0: 2072 6574 7572 6e20 7365 6c66 0d0a 0d0a   return self....
+00023ee0: 2020 2020 2020 2020 6966 2069 6e76 616c          if inval
+00023ef0: 6964 2069 7320 4e6f 6e65 3a0d 0a20 2020  id is None:..   
+00023f00: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+00023f10: 7374 616e 6365 2873 656c 662c 2054 7970  stance(self, Typ
+00023f20: 6552 6567 6973 7465 722e 4361 7465 676f  eRegister.Catego
+00023f30: 7269 6361 6c29 3a0d 0a20 2020 2020 2020  rical):..       
+00023f40: 2020 2020 2020 2020 2069 6e76 616c 6964           invalid
+00023f50: 203d 2030 0d0a 2020 2020 2020 2020 2020   = 0..          
+00023f60: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00023f70: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
+00023f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023f90: 2020 2069 6e76 616c 6964 203d 2049 4e56     invalid = INV
+00023fa0: 414c 4944 5f44 4943 545b 7365 6c66 2e64  ALID_DICT[self.d
+00023fb0: 7479 7065 2e6e 756d 5d0d 0a20 2020 2020  type.num]..     
+00023fc0: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+00023fd0: 7420 4578 6365 7074 696f 6e3a 0d0a 2020  t Exception:..  
+00023fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023ff0: 2020 7261 6973 6520 5479 7065 4572 726f    raise TypeErro
+00024000: 7228 6622 7368 6966 7420 646f 6573 206e  r(f"shift does n
+00024010: 6f74 2073 7570 706f 7274 2074 6865 2064  ot support the d
+00024020: 7479 7065 207b 7365 6c66 2e64 7479 7065  type {self.dtype
+00024030: 2e6e 616d 6521 727d 2229 0d0a 0d0a 2020  .name!r}")....  
+00024040: 2020 2020 2020 2320 7765 206b 6e6f 7720        # we know 
+00024050: 7468 6174 2074 6869 7320 6973 2061 2073  that this is a s
+00024060: 696d 706c 6520 7665 6374 6f72 3a20 7368  imple vector: sh
+00024070: 6170 6520 3d3d 2028 6c65 6e2c 2029 0d0a  ape == (len, )..
+00024080: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
+00024090: 6765 7420 7265 6379 636c 6564 0d0a 2020  get recycled..  
+000240a0: 2020 2020 2020 7465 6d70 203d 2065 6d70        temp = emp
+000240b0: 7479 5f6c 696b 6528 7365 6c66 290d 0a20  ty_like(self).. 
+000240c0: 2020 2020 2020 2069 6620 6162 7328 7065         if abs(pe
+000240d0: 7269 6f64 7329 203e 3d20 6c65 6e28 7365  riods) >= len(se
+000240e0: 6c66 293a 0d0a 2020 2020 2020 2020 2020  lf):..          
+000240f0: 2020 7465 6d70 2e66 696c 6c28 696e 7661    temp.fill(inva
+00024100: 6c69 6429 0d0a 2020 2020 2020 2020 656c  lid)..        el
+00024110: 6966 2070 6572 696f 6473 203e 2030 3a0d  if periods > 0:.
+00024120: 0a20 2020 2020 2020 2020 2020 2074 656d  .            tem
+00024130: 705b 3a70 6572 696f 6473 5d20 3d20 696e  p[:periods] = in
+00024140: 7661 6c69 640d 0a20 2020 2020 2020 2020  valid..         
+00024150: 2020 2074 656d 705b 7065 7269 6f64 733a     temp[periods:
+00024160: 5d20 3d20 7365 6c66 5b3a 2d70 6572 696f  ] = self[:-perio
+00024170: 6473 5d0d 0a20 2020 2020 2020 2065 6c73  ds]..        els
+00024180: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00024190: 7465 6d70 5b3a 7065 7269 6f64 735d 203d  temp[:periods] =
+000241a0: 2073 656c 665b 2d70 6572 696f 6473 3a5d   self[-periods:]
+000241b0: 0d0a 2020 2020 2020 2020 2020 2020 7465  ..            te
+000241c0: 6d70 5b70 6572 696f 6473 3a5d 203d 2069  mp[periods:] = i
+000241d0: 6e76 616c 6964 0d0a 0d0a 2020 2020 2020  nvalid....      
+000241e0: 2020 2320 746f 2072 6577 7261 7020 6361    # to rewrap ca
+000241f0: 7465 676f 7269 6361 6c73 206f 7220 6461  tegoricals or da
+00024200: 7465 6c69 6b65 0d0a 2020 2020 2020 2020  telike..        
+00024210: 6966 2068 6173 6174 7472 2873 656c 662c  if hasattr(self,
+00024220: 2022 6e65 7763 6c61 7373 6672 6f6d 696e   "newclassfromin
+00024230: 7374 616e 6365 2229 3a0d 0a20 2020 2020  stance"):..     
+00024240: 2020 2020 2020 2074 656d 7020 3d20 7365         temp = se
+00024250: 6c66 2e6e 6577 636c 6173 7366 726f 6d69  lf.newclassfromi
+00024260: 6e73 7461 6e63 6528 7465 6d70 2c20 7365  nstance(temp, se
+00024270: 6c66 290d 0a0d 0a20 2020 2020 2020 2072  lf)....        r
+00024280: 6574 7572 6e20 7465 6d70 0d0a 0d0a 2020  eturn temp....  
+00024290: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
+000242a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000242b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000242c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
+000242d0: 2064 6566 205f 696e 7465 726e 616c 5f73   def _internal_s
+000242e0: 656c 665f 636f 6d70 6172 6528 7365 6c66  elf_compare(self
+000242f0: 2c20 6d61 7468 5f6f 702c 2070 6572 696f  , math_op, perio
+00024300: 6473 3d31 2c20 6661 6e63 793d 4661 6c73  ds=1, fancy=Fals
+00024310: 6529 3a0d 0a20 2020 2020 2020 2022 2222  e):..        """
+00024320: 696e 7465 726e 616c 2072 6f75 7469 6e65  internal routine
+00024330: 2075 7365 6420 666f 7220 6469 6666 6572   used for differ
+00024340: 7320 616e 6420 7472 616e 7369 7469 6f6e  s and transition
+00024350: 7322 2222 0d0a 2020 2020 2020 2020 7265  s"""..        re
+00024360: 7375 6c74 203d 2065 6d70 7479 5f6c 696b  sult = empty_lik
+00024370: 6528 7365 6c66 2c20 6474 7970 653d 6e70  e(self, dtype=np
+00024380: 2e62 6f6f 6c5f 290d 0a0d 0a20 2020 2020  .bool_)....     
+00024390: 2020 2069 6620 7065 7269 6f64 7320 3d3d     if periods ==
+000243a0: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
+000243b0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
+000243c0: 7228 2270 6572 696f 6473 206f 6620 3020  r("periods of 0 
+000243d0: 6973 2069 6e76 616c 6964 2066 6f72 2074  is invalid for t
+000243e0: 7261 6e73 6974 696f 6e73 2229 0d0a 0d0a  ransitions")....
+000243f0: 2020 2020 2020 2020 6966 2070 6572 696f          if perio
+00024400: 6473 203e 2030 3a0d 0a20 2020 2020 2020  ds > 0:..       
+00024410: 2020 2020 2054 7970 6552 6567 6973 7465       TypeRegiste
+00024420: 722e 4d61 7468 4c65 6467 6572 2e5f 4241  r.MathLedger._BA
+00024430: 5349 434d 4154 485f 5457 4f5f 494e 5055  SICMATH_TWO_INPU
+00024440: 5453 280d 0a20 2020 2020 2020 2020 2020  TS(..           
+00024450: 2020 2020 2028 7365 6c66 5b70 6572 696f       (self[perio
+00024460: 6473 3a5d 2c20 7365 6c66 5b3a 2d70 6572  ds:], self[:-per
+00024470: 696f 6473 5d2c 2072 6573 756c 745b 7065  iods], result[pe
+00024480: 7269 6f64 733a 5d29 2c20 6d61 7468 5f6f  riods:]), math_o
+00024490: 702c 2030 0d0a 2020 2020 2020 2020 2020  p, 0..          
+000244a0: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
+000244b0: 2023 2066 696c 6c20 7570 6672 6f6e 7420   # fill upfront 
+000244c0: 7769 7468 2069 6e76 616c 6964 730d 0a20  with invalids.. 
+000244d0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+000244e0: 745b 3a70 6572 696f 6473 5d20 3d20 4661  t[:periods] = Fa
+000244f0: 6c73 650d 0a20 2020 2020 2020 2065 6c73  lse..        els
+00024500: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00024510: 5479 7065 5265 6769 7374 6572 2e4d 6174  TypeRegister.Mat
+00024520: 684c 6564 6765 722e 5f42 4153 4943 4d41  hLedger._BASICMA
+00024530: 5448 5f54 574f 5f49 4e50 5554 5328 0d0a  TH_TWO_INPUTS(..
+00024540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024550: 2873 656c 665b 3a70 6572 696f 6473 5d2c  (self[:periods],
+00024560: 2073 656c 665b 2d70 6572 696f 6473 3a5d   self[-periods:]
+00024570: 2c20 7265 7375 6c74 5b3a 7065 7269 6f64  , result[:period
+00024580: 735d 292c 206d 6174 685f 6f70 2c20 300d  s]), math_op, 0.
+00024590: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+000245a0: 2020 2020 2020 2020 2020 2020 2320 6669              # fi
+000245b0: 6c6c 2062 6163 6b20 7769 7468 2069 6e76  ll back with inv
+000245c0: 616c 6964 7320 2870 6572 696f 6473 2069  alids (periods i
+000245d0: 7320 6e65 6761 7469 7665 290d 0a20 2020  s negative)..   
+000245e0: 2020 2020 2020 2020 2072 6573 756c 745b           result[
+000245f0: 7065 7269 6f64 733a 5d20 3d20 4661 6c73  periods:] = Fals
+00024600: 650d 0a0d 0a20 2020 2020 2020 2069 6620  e....        if 
+00024610: 6661 6e63 793a 0d0a 2020 2020 2020 2020  fancy:..        
+00024620: 2020 2020 7265 7475 726e 2062 6f6f 6c5f      return bool_
+00024630: 746f 5f66 616e 6379 2872 6573 756c 7429  to_fancy(result)
+00024640: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00024650: 2072 6573 756c 740d 0a0d 0a20 2020 2023   result....    #
+00024660: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+00024670: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00024680: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00024690: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 6465  --------..    de
+000246a0: 6620 6469 6666 6572 7328 7365 6c66 2c20  f differs(self, 
+000246b0: 7065 7269 6f64 733d 312c 2066 616e 6379  periods=1, fancy
+000246c0: 3d46 616c 7365 2920 2d3e 2046 6173 7441  =False) -> FastA
+000246d0: 7272 6179 3a0d 0a20 2020 2020 2020 2022  rray:..        "
+000246e0: 2222 0d0a 2020 2020 2020 2020 4964 656e  ""..        Iden
+000246f0: 7469 6679 2061 7272 6179 2076 616c 7565  tify array value
+00024700: 7320 7468 6174 2061 7265 2074 6865 2073  s that are the s
+00024710: 616d 6520 6173 2061 646a 6163 656e 7420  ame as adjacent 
+00024720: 7661 6c75 6573 2e0d 0a0d 0a20 2020 2020  values.....     
+00024730: 2020 204f 7574 7075 7420 6172 7261 7920     Output array 
+00024740: 7661 6c75 6573 2061 7265 2073 6574 2074  values are set t
+00024750: 6f20 6054 7275 6560 2066 6f72 2065 7175  o `True` for equ
+00024760: 6976 616c 656e 7420 7661 6c75 6573 2e20  ivalent values. 
+00024770: 5265 7475 726e 7320 6120 626f 6f6c 6561  Returns a boolea
+00024780: 6e20 6046 6173 7441 7272 6179 6020 6f72  n `FastArray` or
+00024790: 2061 2066 616e 6379 2069 6e64 6578 2e0d   a fancy index..
+000247a0: 0a0d 0a20 2020 2020 2020 2050 6172 616d  ...        Param
+000247b0: 6574 6572 730d 0a20 2020 2020 2020 202d  eters..        -
+000247c0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020  ---------..     
+000247d0: 2020 2070 6572 696f 6473 3a20 696e 742c     periods: int,
+000247e0: 2064 6566 6175 6c74 2031 0d0a 2020 2020   default 1..    
+000247f0: 2020 2020 2020 2020 5468 6520 6e75 6d62          The numb
+00024800: 6572 206f 6620 6172 7261 7920 656c 656d  er of array elem
+00024810: 656e 7420 706f 7369 7469 6f6e 7320 746f  ent positions to
+00024820: 206c 6f6f 6b20 6265 6869 6e64 2028 706f   look behind (po
+00024830: 7369 7469 7665 206e 756d 6265 7229 206f  sitive number) o
+00024840: 7220 6c6f 6f6b 2061 6865 6164 2028 6e65  r look ahead (ne
+00024850: 6761 7469 7665 206e 756d 6265 7229 2066  gative number) f
+00024860: 6f72 2063 6f6d 7061 7269 736f 6e2e 0d0a  or comparison...
+00024870: 2020 2020 2020 2020 6661 6e63 793a 2062          fancy: b
+00024880: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
+00024890: 7365 0d0a 2020 2020 2020 2020 2020 2020  se..            
+000248a0: 6046 616c 7365 6020 7265 7475 726e 7320  `False` returns 
+000248b0: 6120 626f 6f6c 6561 6e20 6172 7261 7920  a boolean array 
+000248c0: 616e 6420 6054 7275 6560 2072 6574 7572  and `True` retur
+000248d0: 6e73 2061 2066 616e 6379 2069 6e64 6578  ns a fancy index
+000248e0: 2e0d 0a0d 0a20 2020 2020 2020 2052 6574  .....        Ret
+000248f0: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
+00024900: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2046  -----..        F
+00024910: 6173 7441 7272 6179 0d0a 2020 2020 2020  astArray..      
+00024920: 2020 2020 2020 4120 626f 6f6c 6561 6e20        A boolean 
+00024930: 6046 6173 7441 7272 6179 6020 6f72 2061  `FastArray` or a
+00024940: 2066 616e 6379 2069 6e64 6578 2074 6861   fancy index tha
+00024950: 7420 6964 656e 7469 6669 6573 2065 7175  t identifies equ
+00024960: 6976 616c 656e 7420 656c 656d 656e 7473  ivalent elements
+00024970: 2069 6e20 7468 6520 696e 7075 7420 6172   in the input ar
+00024980: 7261 792e 0d0a 0d0a 2020 2020 2020 2020  ray.....        
+00024990: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
+000249a0: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+000249b0: 2020 2020 4661 7374 4172 7261 792e 7472      FastArray.tr
+000249c0: 616e 7369 7469 6f6e 7320 3a20 4964 656e  ansitions : Iden
+000249d0: 7469 6679 206e 6f6e 6571 7569 7661 6c65  tify nonequivale
+000249e0: 6e74 2069 7465 6d73 2069 6e20 7468 6520  nt items in the 
+000249f0: 696e 7075 7420 6172 7261 7920 616e 6420  input array and 
+00024a00: 7265 7475 726e 2061 2062 6f6f 6c65 616e  return a boolean
+00024a10: 2060 4661 7374 4172 7261 7960 206f 7220   `FastArray` or 
+00024a20: 6120 6661 6e63 7920 696e 6465 782e 0d0a  a fancy index...
+00024a30: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
+00024a40: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+00024a50: 2d2d 2d2d 0d0a 2020 2020 2020 2020 5265  ----..        Re
+00024a60: 7475 726e 2061 2062 6f6f 6c65 616e 2061  turn a boolean a
+00024a70: 7272 6179 2075 7369 6e67 2074 6865 2060  rray using the `
+00024a80: 6070 6572 696f 6473 3d31 6060 2064 6566  `periods=1`` def
+00024a90: 6175 6c74 2076 616c 7565 2028 6c6f 6f6b  ault value (look
+00024aa0: 2062 6568 696e 6420 6f6e 6520 656c 656d   behind one elem
+00024ab0: 656e 7420 706f 7369 7469 6f6e 2066 6f72  ent position for
+00024ac0: 2063 6f6d 7061 7269 736f 6e73 293a 0d0a   comparisons):..
+00024ad0: 0d0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
+00024ae0: 3d20 7274 2e46 4128 5b31 2c20 322c 2032  = rt.FA([1, 2, 2
+00024af0: 2c20 332c 2032 2c20 342c 2035 2c20 362c  , 3, 2, 4, 5, 6,
+00024b00: 2032 2c20 322c 2035 5d29 0d0a 2020 2020   2, 2, 5])..    
+00024b10: 2020 2020 3e3e 3e20 610d 0a20 2020 2020      >>> a..     
+00024b20: 2020 2046 6173 7441 7272 6179 285b 312c     FastArray([1,
+00024b30: 2032 2c20 322c 2033 2c20 322c 2034 2c20   2, 2, 3, 2, 4, 
+00024b40: 352c 2036 2c20 322c 2032 2c20 355d 290d  5, 6, 2, 2, 5]).
+00024b50: 0a20 2020 2020 2020 203e 3e3e 2061 2e64  .        >>> a.d
+00024b60: 6966 6665 7273 2829 0d0a 2020 2020 2020  iffers()..      
+00024b70: 2020 4661 7374 4172 7261 7928 5b46 616c    FastArray([Fal
+00024b80: 7365 2c20 4661 6c73 652c 2020 5472 7565  se, False,  True
+00024b90: 2c20 4661 6c73 652c 2046 616c 7365 2c20  , False, False, 
+00024ba0: 4661 6c73 652c 2046 616c 7365 2c20 4661  False, False, Fa
+00024bb0: 6c73 652c 2046 616c 7365 2c0d 0a20 2020  lse, False,..   
+00024bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024bd0: 2054 7275 652c 2046 616c 7365 5d29 0d0a   True, False])..
+00024be0: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+00024bf0: 2061 2062 6f6f 6c65 616e 2061 7272 6179   a boolean array
+00024c00: 2061 6e64 206c 6f6f 6b20 6168 6561 6420   and look ahead 
+00024c10: 7468 7265 6520 656c 656d 656e 7420 706f  three element po
+00024c20: 7369 7469 6f6e 7320 666f 7220 636f 6d70  sitions for comp
+00024c30: 6172 6973 6f6e 733a 0d0a 0d0a 2020 2020  arisons:....    
+00024c40: 2020 2020 3e3e 3e20 612e 6469 6666 6572      >>> a.differ
+00024c50: 7328 7065 7269 6f64 733d 2d33 290d 0a20  s(periods=-3).. 
+00024c60: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00024c70: 285b 4661 6c73 652c 2020 5472 7565 2c20  ([False,  True, 
+00024c80: 4661 6c73 652c 2046 616c 7365 2c20 4661  False, False, Fa
+00024c90: 6c73 652c 2046 616c 7365 2c20 4661 6c73  lse, False, Fals
+00024ca0: 652c 2046 616c 7365 2c20 4661 6c73 652c  e, False, False,
+00024cb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00024cc0: 2020 2020 2046 616c 7365 2c20 4661 6c73       False, Fals
+00024cd0: 655d 290d 0a0d 0a20 2020 2020 2020 2052  e])....        R
+00024ce0: 6574 7572 6e20 6120 6661 6e63 7920 696e  eturn a fancy in
+00024cf0: 6465 7820 7573 696e 6720 7468 6520 6060  dex using the ``
+00024d00: 7065 7269 6f64 733d 3160 6020 6465 6661  periods=1`` defa
+00024d10: 756c 7420 7661 6c75 6520 286c 6f6f 6b20  ult value (look 
+00024d20: 6265 6869 6e64 206f 6e65 2065 6c65 6d65  behind one eleme
+00024d30: 6e74 2070 6f73 6974 696f 6e20 666f 7220  nt position for 
+00024d40: 636f 6d70 6172 6973 6f6e 7329 3a0d 0a0d  comparisons):...
+00024d50: 0a20 2020 2020 2020 203e 3e3e 2061 2e64  .        >>> a.d
+00024d60: 6966 6665 7273 2866 616e 6379 3d54 7275  iffers(fancy=Tru
+00024d70: 6529 0d0a 2020 2020 2020 2020 4661 7374  e)..        Fast
+00024d80: 4172 7261 7928 5b32 2c20 395d 290d 0a0d  Array([2, 9])...
+00024d90: 0a20 2020 2020 2020 2053 6574 2060 7065  .        Set `pe
+00024da0: 7269 6f64 7360 2074 6f20 6120 6e75 6d62  riods` to a numb
+00024db0: 6572 206c 6172 6765 7220 7468 616e 2074  er larger than t
+00024dc0: 6865 2069 6e70 7574 2061 7272 6179 3a0d  he input array:.
+00024dd0: 0a0d 0a20 2020 2020 2020 203e 3e3e 2061  ...        >>> a
+00024de0: 2e64 6966 6665 7273 2870 6572 696f 6473  .differs(periods
+00024df0: 3d31 3529 0d0a 2020 2020 2020 2020 4661  =15)..        Fa
+00024e00: 7374 4172 7261 7928 5b46 616c 7365 2c20  stArray([False, 
+00024e10: 4661 6c73 652c 2046 616c 7365 2c20 4661  False, False, Fa
+00024e20: 6c73 652c 2046 616c 7365 2c20 4661 6c73  lse, False, Fals
+00024e30: 652c 2046 616c 7365 2c20 4661 6c73 652c  e, False, False,
+00024e40: 2046 616c 7365 2c0d 0a20 2020 2020 2020   False,..       
+00024e50: 2020 2020 2020 2020 2020 2020 4661 6c73              Fals
+00024e60: 652c 2046 616c 7365 5d29 0d0a 2020 2020  e, False])..    
+00024e70: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00024e80: 2069 6620 7365 6c66 2e64 7479 7065 2e6e   if self.dtype.n
+00024e90: 756d 203e 2031 333a 0d0a 2020 2020 2020  um > 13:..      
+00024ea0: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
+00024eb0: 656c 6620 213d 2073 656c 662e 7368 6966  elf != self.shif
+00024ec0: 7428 7065 7269 6f64 7329 0d0a 2020 2020  t(periods)..    
+00024ed0: 2020 2020 2020 2020 6966 2066 616e 6379          if fancy
+00024ee0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00024ef0: 2020 2072 6574 7572 6e20 626f 6f6c 5f74     return bool_t
+00024f00: 6f5f 6661 6e63 7928 7265 7375 6c74 290d  o_fancy(result).
+00024f10: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00024f20: 7572 6e20 7265 7375 6c74 0d0a 2020 2020  urn result..    
+00024f30: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00024f40: 5f69 6e74 6572 6e61 6c5f 7365 6c66 5f63  _internal_self_c
+00024f50: 6f6d 7061 7265 284d 4154 485f 4f50 4552  ompare(MATH_OPER
+00024f60: 4154 494f 4e2e 434d 505f 4551 2c20 7065  ATION.CMP_EQ, pe
+00024f70: 7269 6f64 733d 7065 7269 6f64 732c 2066  riods=periods, f
+00024f80: 616e 6379 3d66 616e 6379 290d 0a0d 0a20  ancy=fancy).... 
+00024f90: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+00024fa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00024fb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00024fc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00024fd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00024fe0: 0d0a 2020 2020 6465 6620 7472 616e 7369  ..    def transi
+00024ff0: 7469 6f6e 7328 7365 6c66 2c20 7065 7269  tions(self, peri
+00025000: 6f64 733d 312c 2066 616e 6379 3d46 616c  ods=1, fancy=Fal
+00025010: 7365 2920 2d3e 2046 6173 7441 7272 6179  se) -> FastArray
+00025020: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+00025030: 2020 2020 2020 2020 5265 7475 726e 7320          Returns 
+00025040: 6120 626f 6f6c 6561 6e20 6172 7261 792e  a boolean array.
+00025050: 0d0a 2020 2020 2020 2020 5468 6520 626f  ..        The bo
+00025060: 6f6c 6561 6e20 6172 7261 7920 6973 2073  olean array is s
+00025070: 6574 2074 6f20 5472 7565 2077 6865 6e20  et to True when 
+00025080: 7468 6520 7072 6576 696f 7573 2069 7465  the previous ite
+00025090: 6d20 696e 2074 6865 2061 7272 6179 2064  m in the array d
+000250a0: 6f65 7320 6e6f 7420 6571 7561 6c20 7468  oes not equal th
+000250b0: 6520 6375 7272 656e 742e 0d0a 2020 2020  e current...    
+000250c0: 2020 2020 5573 6520 2d31 2069 6e73 7465      Use -1 inste
+000250d0: 6164 206f 6620 3120 6966 2079 6f75 2077  ad of 1 if you w
+000250e0: 616e 7420 5472 7565 2073 6574 2077 6865  ant True set whe
+000250f0: 6e20 7468 6520 6e65 7874 2069 7465 6d20  n the next item 
+00025100: 696e 2074 6865 2061 7272 6179 2064 6f65  in the array doe
+00025110: 7320 6e6f 7420 6571 7561 6c20 7468 6520  s not equal the 
+00025120: 7072 6576 696f 7573 2e0d 0a20 2020 2020  previous...     
+00025130: 2020 2053 6565 2061 6c73 6f3a 2060 6064     See also: ``d
+00025140: 6966 6665 7273 6060 0d0a 0d0a 2020 2020  iffers``....    
+00025150: 2020 2020 3a70 6172 616d 2070 6572 696f      :param perio
+00025160: 6473 3a20 5468 6520 6e75 6d62 6572 206f  ds: The number o
+00025170: 6620 656c 656d 656e 7473 2074 6f20 6c6f  f elements to lo
+00025180: 6f6b 2061 6865 6164 2028 6f72 2062 6568  ok ahead (or beh
+00025190: 696e 6429 2c20 6465 6661 756c 7473 2074  ind), defaults t
+000251a0: 6f20 310d 0a20 2020 2020 2020 203a 7479  o 1..        :ty
+000251b0: 7065 2070 6572 696f 6473 3a20 696e 740d  pe periods: int.
+000251c0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+000251d0: 6661 6e63 793a 2049 6e64 6963 6174 6573  fancy: Indicates
+000251e0: 2077 6865 7468 6572 2074 6f20 7265 7475   whether to retu
+000251f0: 726e 2061 2066 616e 6379 5f69 6e64 6578  rn a fancy_index
+00025200: 2069 6e73 7465 6164 206f 6620 6120 626f   instead of a bo
+00025210: 6f6c 6561 6e20 6172 7261 792c 2064 6566  olean array, def
+00025220: 6175 6c74 7320 746f 2046 616c 7365 2e0d  aults to False..
+00025230: 0a20 2020 2020 2020 203a 7479 7065 2066  .        :type f
+00025240: 616e 6379 3a20 626f 6f6c 0d0a 2020 2020  ancy: bool..    
+00025250: 2020 2020 3a72 6574 7572 6e3a 2062 6f6f      :return: boo
+00025260: 6c65 616e 2060 6046 6173 7441 7272 6179  lean ``FastArray
+00025270: 6060 2c20 6f72 2066 616e 6379 496e 6465  ``, or fancyInde
+00025280: 7820 2873 6565 3a20 6066 616e 6379 6020  x (see: `fancy` 
+00025290: 6b77 6172 6729 0d0a 0d0a 2020 2020 2020  kwarg)....      
+000252a0: 2020 3e3e 3e20 6120 3d20 4661 7374 4172    >>> a = FastAr
+000252b0: 7261 7928 5b30 2c31 2c32 2c33 2c33 2c33  ray([0,1,2,3,3,3
+000252c0: 2c34 5d29 0d0a 2020 2020 2020 2020 3e3e  ,4])..        >>
+000252d0: 3e20 612e 7472 616e 7369 7469 6f6e 7328  > a.transitions(
+000252e0: 7065 7269 6f64 733d 3129 0d0a 2020 2020  periods=1)..    
+000252f0: 2020 2020 4661 7374 4172 7261 7928 5b46      FastArray([F
+00025300: 616c 7365 2c20 5472 7565 2c20 5472 7565  alse, True, True
+00025310: 2c20 5472 7565 2c20 4661 6c73 652c 2046  , True, False, F
+00025320: 616c 7365 2c20 5472 7565 5d29 0d0a 0d0a  alse, True])....
+00025330: 2020 2020 2020 2020 3e3e 3e20 612e 7472          >>> a.tr
+00025340: 616e 7369 7469 6f6e 7328 7065 7269 6f64  ansitions(period
+00025350: 733d 3229 0d0a 2020 2020 2020 2020 4661  s=2)..        Fa
+00025360: 7374 4172 7261 7928 5b46 616c 7365 2c20  stArray([False, 
+00025370: 4661 6c73 652c 2054 7275 652c 2054 7275  False, True, Tru
+00025380: 652c 2054 7275 652c 2046 616c 7365 2c20  e, True, False, 
+00025390: 5472 7565 5d29 0d0a 0d0a 2020 2020 2020  True])....      
+000253a0: 2020 3e3e 3e20 612e 7472 616e 7369 7469    >>> a.transiti
+000253b0: 6f6e 7328 7065 7269 6f64 733d 2d31 290d  ons(periods=-1).
+000253c0: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+000253d0: 6179 285b 2054 7275 652c 2054 7275 652c  ay([ True, True,
+000253e0: 2054 7275 652c 2046 616c 7365 2c20 4661   True, False, Fa
+000253f0: 6c73 652c 2054 7275 652c 2046 616c 7365  lse, True, False
+00025400: 5d29 0d0a 2020 2020 2020 2020 2222 220d  ])..        """.
+00025410: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+00025420: 2e64 7479 7065 2e6e 756d 203e 2031 333a  .dtype.num > 13:
+00025430: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+00025440: 7375 6c74 203d 2073 656c 6620 213d 2073  sult = self != s
+00025450: 656c 662e 7368 6966 7428 7065 7269 6f64  elf.shift(period
+00025460: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
+00025470: 6966 2066 616e 6379 3a0d 0a20 2020 2020  if fancy:..     
+00025480: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00025490: 6e20 626f 6f6c 5f74 6f5f 6661 6e63 7928  n bool_to_fancy(
+000254a0: 7265 7375 6c74 290d 0a20 2020 2020 2020  result)..       
+000254b0: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
+000254c0: 6c74 0d0a 2020 2020 2020 2020 7265 7475  lt..        retu
+000254d0: 726e 2073 656c 662e 5f69 6e74 6572 6e61  rn self._interna
+000254e0: 6c5f 7365 6c66 5f63 6f6d 7061 7265 284d  l_self_compare(M
+000254f0: 4154 485f 4f50 4552 4154 494f 4e2e 434d  ATH_OPERATION.CM
+00025500: 505f 4e45 2c20 7065 7269 6f64 733d 7065  P_NE, periods=pe
+00025510: 7269 6f64 732c 2066 616e 6379 3d66 616e  riods, fancy=fan
+00025520: 6379 290d 0a0d 0a20 2020 2023 202d 2d2d  cy)....    # ---
+00025530: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00025540: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00025550: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00025560: 2d2d 2d2d 0d0a 2020 2020 6465 6620 6469  ----..    def di
+00025570: 6666 2873 656c 662c 2070 6572 696f 6473  ff(self, periods
+00025580: 3d31 2920 2d3e 2046 6173 7441 7272 6179  =1) -> FastArray
+00025590: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+000255a0: 2020 2020 2020 2020 436f 6d70 7574 6520          Compute 
+000255b0: 7468 6520 6469 6666 6572 656e 6365 7320  the differences 
+000255c0: 6265 7477 6565 6e20 6164 6a61 6365 6e74  between adjacent
+000255d0: 2065 6c65 6d65 6e74 7320 6f66 2061 2060   elements of a `
+000255e0: 4661 7374 4172 7261 7960 2e0d 0a0d 0a20  FastArray`..... 
+000255f0: 2020 2020 2020 2053 7061 6365 7320 6174         Spaces at
+00025600: 2065 6974 6865 7220 656e 6420 6172 6520   either end are 
+00025610: 6669 6c6c 6564 2077 6974 6820 696e 7661  filled with inva
+00025620: 6c69 6420 7661 6c75 6573 2062 6173 6564  lid values based
+00025630: 206f 6e20 7468 6520 696e 7075 7420 6172   on the input ar
+00025640: 7261 7927 7320 6474 7970 652e 2049 6620  ray's dtype. If 
+00025650: 6120 6361 6c63 756c 6174 6564 2064 6966  a calculated dif
+00025660: 6665 7265 6e63 6520 6973 6e27 7420 7375  ference isn't su
+00025670: 7070 6f72 7465 6420 6279 2074 6865 2064  pported by the d
+00025680: 7479 7065 2c20 6974 2069 7320 6469 7370  type, it is disp
+00025690: 6c61 7965 6420 6173 2061 204e 614e 206f  layed as a NaN o
+000256a0: 7220 726f 6c6c 6f76 6572 2076 616c 7565  r rollover value
+000256b0: 2e20 466f 7220 6578 616d 706c 652c 206e  . For example, n
+000256c0: 6567 6174 6976 6520 6469 6666 6572 656e  egative differen
+000256d0: 6365 7320 696e 2061 2075 696e 7438 2061  ces in a uint8 a
+000256e0: 7272 6179 2061 7265 2064 6973 706c 6179  rray are display
+000256f0: 6564 2061 7320 3235 352e 0d0a 2020 2020  ed as 255...    
+00025700: 2020 2020 546f 2072 6573 6f6c 7665 2074      To resolve t
+00025710: 6869 732c 2079 6f75 2063 616e 2065 7870  his, you can exp
+00025720: 6c69 6369 746c 7920 7570 6361 7374 2074  licitly upcast t
+00025730: 6f20 7468 6520 6e65 7874 206c 6172 6765  o the next large
+00025740: 7220 7369 676e 6564 2069 6e74 2064 7479  r signed int dty
+00025750: 7065 2062 6566 6f72 6520 6361 6c63 756c  pe before calcul
+00025760: 6174 696e 6720 7468 6520 6469 6666 6572  ating the differ
+00025770: 656e 6365 732e 0d0a 0d0a 2020 2020 2020  ences.....      
+00025780: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
+00025790: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
+000257a0: 0d0a 2020 2020 2020 2020 7065 7269 6f64  ..        period
+000257b0: 733a 2069 6e74 2c20 6465 6661 756c 7420  s: int, default 
+000257c0: 310d 0a20 2020 2020 2020 2020 2020 204e  1..            N
+000257d0: 756d 6265 7220 6f66 2065 6c65 6d65 6e74  umber of element
+000257e0: 2070 6f73 6974 696f 6e73 2074 6f20 7368   positions to sh
+000257f0: 6966 7420 7269 6768 7420 2869 6620 706f  ift right (if po
+00025800: 7369 7469 7665 2920 6f72 206c 6566 7420  sitive) or left 
+00025810: 2869 6620 6e65 6761 7469 7665 2920 6265  (if negative) be
+00025820: 666f 7265 2073 7562 7472 6163 7469 6e67  fore subtracting
+00025830: 2e20 5261 6973 6573 2061 6e20 6572 726f  . Raises an erro
+00025840: 7220 6966 2073 6574 2074 6f20 302e 0d0a  r if set to 0...
+00025850: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+00025860: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00025870: 2d2d 0d0a 2020 2020 2020 2020 4661 7374  --..        Fast
+00025880: 4172 7261 790d 0a20 2020 2020 2020 2020  Array..         
+00025890: 2020 2041 6e20 6571 7569 7661 6c65 6e74     An equivalent
+000258a0: 2d6c 656e 6774 6820 6172 7261 7920 636f  -length array co
+000258b0: 6e74 6169 6e69 6e67 2074 6865 2064 6966  ntaining the dif
+000258c0: 6665 7265 6e63 6573 2062 6574 7765 656e  ferences between
+000258d0: 2069 6e70 7574 2061 7272 6179 2065 6c65   input array ele
+000258e0: 6d65 6e74 7320 7468 6174 2061 7265 2061  ments that are a
+000258f0: 646a 6163 656e 7420 6f72 2073 6570 6172  djacent or separ
+00025900: 6174 6564 2062 7920 6120 7370 6563 6966  ated by a specif
+00025910: 6965 6420 7065 7269 6f64 2e20 5370 6163  ied period. Spac
+00025920: 6573 2061 7420 6569 7468 6572 2065 6e64  es at either end
+00025930: 2061 7265 2066 696c 6c65 6420 7769 7468   are filled with
+00025940: 2069 6e76 616c 6964 7320 6261 7365 6420   invalids based 
+00025950: 6f6e 2074 6865 2069 6e70 7574 2061 7272  on the input arr
+00025960: 6179 2773 2064 7479 7065 2e0d 0a0d 0a20  ay's dtype..... 
+00025970: 2020 2020 2020 2053 6565 2041 6c73 6f0d         See Also.
+00025980: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00025990: 2d0d 0a20 2020 2020 2020 2046 6173 7441  -..        FastA
+000259a0: 7272 6179 2e73 6869 6674 203a 2052 6574  rray.shift : Ret
+000259b0: 7572 6e73 2061 2073 6869 6674 6564 2060  urns a shifted `
+000259c0: 4661 7374 4172 7261 7960 2e0d 0a0d 0a20  FastArray`..... 
+000259d0: 2020 2020 2020 2045 7861 6d70 6c65 730d         Examples.
+000259e0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+000259f0: 2d0d 0a20 2020 2020 2020 2043 616c 6375  -..        Calcu
+00025a00: 6c61 7465 2064 6966 6665 7265 6e63 6573  late differences
+00025a10: 2075 7369 6e67 2074 6865 2060 6070 6572   using the ``per
+00025a20: 696f 6473 3d31 6060 2064 6566 6175 6c74  iods=1`` default
+00025a30: 2028 6172 7261 7920 656c 656d 656e 7473   (array elements
+00025a40: 206f 6e65 2070 6f73 6974 696f 6e20 746f   one position to
+00025a50: 2074 6865 2072 6967 6874 293a 0d0a 0d0a   the right):....
+00025a60: 2020 2020 2020 2020 3e3e 3e20 613d 7274          >>> a=rt
+00025a70: 2e46 4128 5b30 2c20 322c 2034 2c20 382c  .FA([0, 2, 4, 8,
+00025a80: 2031 362c 2033 325d 290d 0a20 2020 2020   16, 32])..     
+00025a90: 2020 203e 3e3e 2061 0d0a 2020 2020 2020     >>> a..      
+00025aa0: 2020 4661 7374 4172 7261 7928 5b20 302c    FastArray([ 0,
+00025ab0: 2020 322c 2020 342c 2020 382c 2031 362c    2,  4,  8, 16,
+00025ac0: 2033 325d 290d 0a20 2020 2020 2020 203e   32])..        >
+00025ad0: 3e3e 2061 2e64 6966 6628 290d 0a20 2020  >> a.diff()..   
+00025ae0: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
+00025af0: 2d32 3134 3734 3833 3634 382c 2020 2020  -2147483648,    
+00025b00: 2020 2020 2020 2032 2c20 2020 2020 2020         2,       
+00025b10: 2020 2020 322c 2020 2020 2020 2020 2020      2,          
+00025b20: 2034 2c0d 0a20 2020 2020 2020 2020 2020   4,..           
+00025b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025b40: 2020 382c 2020 2020 2020 2020 2020 3136    8,          16
+00025b50: 5d29 0d0a 0d0a 2020 2020 2020 2020 4361  ])....        Ca
+00025b60: 6c63 756c 6174 6520 6469 6666 6572 656e  lculate differen
+00025b70: 6365 7320 7573 696e 6720 6172 7261 7920  ces using array 
+00025b80: 656c 656d 656e 7473 2074 776f 2070 6f73  elements two pos
+00025b90: 6974 696f 6e73 2074 6f20 7468 6520 6c65  itions to the le
+00025ba0: 6674 3a0d 0a0d 0a20 2020 2020 2020 203e  ft:....        >
+00025bb0: 3e3e 2061 2e64 6966 6628 2d32 290d 0a20  >> a.diff(-2).. 
+00025bc0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00025bd0: 285b 2020 2020 2020 2020 202d 342c 2020  ([         -4,  
+00025be0: 2020 2020 2020 2020 2d36 2c20 2020 2020          -6,     
+00025bf0: 2020 2020 2d31 322c 2020 2020 2020 2020      -12,        
+00025c00: 202d 3234 2c0d 0a20 2020 2020 2020 2020   -24,..         
+00025c10: 2020 2020 2020 2020 2020 2d32 3134 3734            -21474
+00025c20: 3833 3634 382c 202d 3231 3437 3438 3336  83648, -21474836
+00025c30: 3438 5d29 0d0a 0d0a 2020 2020 2020 2020  48])....        
+00025c40: 5370 6563 6966 7920 6120 6070 6572 696f  Specify a `perio
+00025c50: 6473 6020 7661 6c75 6520 7468 6174 2069  ds` value that i
+00025c60: 7320 6772 6561 7465 7220 7468 616e 2074  s greater than t
+00025c70: 6865 2061 7272 6179 206c 656e 6774 683a  he array length:
+00025c80: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
+00025c90: 612e 6469 6666 2831 3029 0d0a 2020 2020  a.diff(10)..    
+00025ca0: 2020 2020 4661 7374 4172 7261 7928 5b2d      FastArray([-
+00025cb0: 3231 3437 3438 3336 3438 2c20 2d32 3134  2147483648, -214
+00025cc0: 3734 3833 3634 382c 202d 3231 3437 3438  7483648, -214748
+00025cd0: 3336 3438 2c20 2d32 3134 3734 3833 3634  3648, -214748364
+00025ce0: 382c 0d0a 2020 2020 2020 2020 2020 2020  8,..            
+00025cf0: 2020 2020 2020 202d 3231 3437 3438 3336         -21474836
+00025d00: 3438 2c20 2d32 3134 3734 3833 3634 385d  48, -2147483648]
+00025d10: 290d 0a20 2020 2020 2020 2022 2222 0d0a  )..        """..
+00025d20: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+00025d30: 2020 2020 2020 2020 2020 696e 7661 6c69            invali
+00025d40: 6420 3d20 494e 5641 4c49 445f 4449 4354  d = INVALID_DICT
+00025d50: 5b73 656c 662e 6474 7970 652e 6e75 6d5d  [self.dtype.num]
+00025d60: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
+00025d70: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+00025d80: 6169 7365 2054 7970 6545 7272 6f72 2866  aise TypeError(f
+00025d90: 2273 6869 6674 2064 6f65 7320 6e6f 7420  "shift does not 
+00025da0: 7375 7070 6f72 7420 7468 6520 6474 7970  support the dtyp
+00025db0: 6520 7b73 656c 662e 6474 7970 652e 6e61  e {self.dtype.na
+00025dc0: 6d65 2172 7d22 290d 0a0d 0a20 2020 2020  me!r}")....     
+00025dd0: 2020 2074 656d 7020 3d20 656d 7074 7928     temp = empty(
+00025de0: 7365 6c66 2e73 6861 7065 2c20 6474 7970  self.shape, dtyp
+00025df0: 653d 7365 6c66 2e64 7479 7065 290d 0a20  e=self.dtype).. 
+00025e00: 2020 2020 2020 2069 6620 6162 7328 7065         if abs(pe
+00025e10: 7269 6f64 7329 203e 3d20 6c65 6e28 7365  riods) >= len(se
+00025e20: 6c66 293a 0d0a 2020 2020 2020 2020 2020  lf):..          
+00025e30: 2020 7465 6d70 2e66 696c 6c28 696e 7661    temp.fill(inva
+00025e40: 6c69 6429 0d0a 2020 2020 2020 2020 656c  lid)..        el
+00025e50: 6966 2070 6572 696f 6473 203e 2030 3a0d  if periods > 0:.
+00025e60: 0a20 2020 2020 2020 2020 2020 2074 656d  .            tem
+00025e70: 705b 3a70 6572 696f 6473 5d20 3d20 696e  p[:periods] = in
+00025e80: 7661 6c69 640d 0a0d 0a20 2020 2020 2020  valid....       
+00025e90: 2020 2020 2023 206f 7574 7075 7420 696e       # output in
+00025ea0: 746f 2074 6865 2065 6d70 7479 2061 7272  to the empty arr
+00025eb0: 6179 2077 6520 6372 6561 7465 642c 206e  ay we created, n
+00025ec0: 702e 7375 6274 7261 6374 2077 696c 6c20  p.subtract will 
+00025ed0: 6361 6c6c 2046 6173 7441 7272 6179 2773  call FastArray's
+00025ee0: 2073 7562 7472 6163 740d 0a20 2020 2020   subtract..     
+00025ef0: 2020 2020 2020 206e 702e 7375 6274 7261         np.subtra
+00025f00: 6374 2873 656c 665b 7065 7269 6f64 733a  ct(self[periods:
+00025f10: 5d2c 2073 656c 665b 3a2d 7065 7269 6f64  ], self[:-period
+00025f20: 735d 2c20 6f75 743d 7465 6d70 5b70 6572  s], out=temp[per
+00025f30: 696f 6473 3a5d 290d 0a20 2020 2020 2020  iods:])..       
+00025f40: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00025f50: 2020 2020 7465 6d70 5b70 6572 696f 6473      temp[periods
+00025f60: 3a5d 203d 2069 6e76 616c 6964 0d0a 2020  :] = invalid..  
+00025f70: 2020 2020 2020 2020 2020 6e70 2e73 7562            np.sub
+00025f80: 7472 6163 7428 7365 6c66 5b3a 7065 7269  tract(self[:peri
+00025f90: 6f64 735d 2c20 7365 6c66 5b2d 7065 7269  ods], self[-peri
+00025fa0: 6f64 733a 5d2c 206f 7574 3d74 656d 705b  ods:], out=temp[
+00025fb0: 3a70 6572 696f 6473 5d29 0d0a 2020 2020  :periods])..    
+00025fc0: 2020 2020 7265 7475 726e 2074 656d 700d      return temp.
+00025fd0: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+00025fe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00025ff0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00026000: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00026010: 0d0a 2020 2020 6465 6620 6973 6e61 2873  ..    def isna(s
+00026020: 656c 6629 202d 3e20 4661 7374 4172 7261  elf) -> FastArra
+00026030: 793a 0d0a 2020 2020 2020 2020 2222 220d  y:..        """.
+00026040: 0a20 2020 2020 2020 2069 736e 616e 2069  .        isnan i
+00026050: 7320 6d61 7070 6564 2064 6972 6563 746c  s mapped directl
+00026060: 7920 746f 2069 736e 616e 2829 0d0a 2020  y to isnan()..  
+00026070: 2020 2020 2020 4361 7465 676f 7269 6361        Categorica
+00026080: 6c73 2061 6e64 2044 6174 6554 696d 6520  ls and DateTime 
+00026090: 7461 6b65 206f 7665 7220 6973 6e61 6e2e  take over isnan.
+000260a0: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+000260b0: 7261 7920 6861 6e64 6c65 7320 7365 6e74  ray handles sent
+000260c0: 696e 656c 732e 0d0a 0d0a 2020 2020 2020  inels.....      
+000260d0: 2020 3e3e 3e20 613d 6172 616e 6765 2831    >>> a=arange(1
+000260e0: 3030 2e30 290d 0a20 2020 2020 2020 203e  00.0)..        >
+000260f0: 3e3e 2061 5b35 5d3d 6e70 2e6e 616e 0d0a  >> a[5]=np.nan..
+00026100: 2020 2020 2020 2020 3e3e 3e20 615b 3837          >>> a[87
+00026110: 5d3d 6e70 2e6e 616e 0d0a 2020 2020 2020  ]=np.nan..      
+00026120: 2020 3e3e 3e20 7375 6d28 612e 6973 6e61    >>> sum(a.isna
+00026130: 2829 290d 0a20 2020 2020 2020 2032 0d0a  ())..        2..
+00026140: 2020 2020 2020 2020 3e3e 3e20 7375 6d28          >>> sum(
+00026150: 612e 6173 7479 7065 286e 702e 696e 7433  a.astype(np.int3
+00026160: 3229 2e69 736e 6128 2929 0d0a 2020 2020  2).isna())..    
+00026170: 2020 2020 320d 0a20 2020 2020 2020 2022      2..        "
+00026180: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
+00026190: 726e 2073 656c 662e 6973 6e61 6e28 290d  rn self.isnan().
+000261a0: 0a0d 0a20 2020 2064 6566 206e 6f74 6e61  ...    def notna
+000261b0: 2873 656c 6629 202d 3e20 4661 7374 4172  (self) -> FastAr
+000261c0: 7261 793a 0d0a 2020 2020 2020 2020 2222  ray:..        ""
+000261d0: 220d 0a20 2020 2020 2020 206e 6f74 6e61  "..        notna
+000261e0: 2069 7320 6d61 7070 6564 2064 6972 6563   is mapped direc
+000261f0: 746c 7920 746f 2069 736e 6f74 6e61 6e28  tly to isnotnan(
+00026200: 290d 0a20 2020 2020 2020 2043 6174 6567  )..        Categ
+00026210: 6f72 6963 616c 7320 616e 6420 4461 7465  oricals and Date
+00026220: 5469 6d65 2074 616b 6520 6f76 6572 2069  Time take over i
+00026230: 736e 6f74 6e61 6e2e 0d0a 2020 2020 2020  snotnan...      
+00026240: 2020 4661 7374 4172 7261 7920 6861 6e64    FastArray hand
+00026250: 6c65 7320 7365 6e74 696e 656c 732e 0d0a  les sentinels...
+00026260: 0d0a 2020 2020 2020 2020 3e3e 3e20 613d  ..        >>> a=
+00026270: 6172 616e 6765 2831 3030 2e30 290d 0a20  arange(100.0).. 
+00026280: 2020 2020 2020 203e 3e3e 2061 5b35 5d3d         >>> a[5]=
+00026290: 6e70 2e6e 616e 0d0a 2020 2020 2020 2020  np.nan..        
+000262a0: 3e3e 3e20 615b 3837 5d3d 6e70 2e6e 616e  >>> a[87]=np.nan
+000262b0: 0d0a 2020 2020 2020 2020 3e3e 3e20 7375  ..        >>> su
+000262c0: 6d28 612e 6e6f 746e 6128 2929 0d0a 2020  m(a.notna())..  
+000262d0: 2020 2020 2020 3938 0d0a 2020 2020 2020        98..      
+000262e0: 2020 3e3e 3e20 7375 6d28 612e 6173 7479    >>> sum(a.asty
+000262f0: 7065 286e 702e 696e 7433 3229 2e6e 6f74  pe(np.int32).not
+00026300: 6e61 2829 290d 0a20 2020 2020 2020 2039  na())..        9
+00026310: 380d 0a20 2020 2020 2020 2022 2222 0d0a  8..        """..
+00026320: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00026330: 656c 662e 6973 6e6f 746e 616e 2829 0d0a  elf.isnotnan()..
+00026340: 0d0a 2020 2020 6465 6620 7265 706c 6163  ..    def replac
+00026350: 656e 6128 7365 6c66 2c20 7661 6c75 652c  ena(self, value,
+00026360: 2069 6e70 6c61 6365 3d46 616c 7365 2920   inplace=False) 
+00026370: 2d3e 2046 6173 7441 7272 6179 3a0d 0a20  -> FastArray:.. 
+00026380: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00026390: 2020 2020 5265 7475 726e 2061 2060 4661      Return a `Fa
+000263a0: 7374 4172 7261 7960 2077 6974 6820 616c  stArray` with al
+000263b0: 6c20 4e61 4e20 616e 6420 696e 7661 6c69  l NaN and invali
+000263c0: 6420 7661 6c75 6573 2073 6574 2074 6f20  d values set to 
+000263d0: 7468 6520 7370 6563 6966 6965 6420 7661  the specified va
+000263e0: 6c75 652e 0d0a 0d0a 2020 2020 2020 2020  lue.....        
+000263f0: 4f70 7469 6f6e 616c 6c79 2c20 796f 7520  Optionally, you 
+00026400: 6361 6e20 6d6f 6469 6679 2074 6865 206f  can modify the o
+00026410: 7269 6769 6e61 6c20 6046 6173 7441 7272  riginal `FastArr
+00026420: 6179 6020 6966 2069 7427 7320 6e6f 7420  ay` if it's not 
+00026430: 6c6f 636b 6564 2e0d 0a0d 0a20 2020 2020  locked.....     
+00026440: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
+00026450: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
+00026460: 2d0d 0a20 2020 2020 2020 2076 616c 7565  -..        value
+00026470: 203a 2073 6361 6c61 7220 6f72 2061 7272   : scalar or arr
+00026480: 6179 0d0a 2020 2020 2020 2020 2020 2020  ay..            
+00026490: 4120 7661 6c75 6520 6f72 2061 6e20 6172  A value or an ar
+000264a0: 7261 7920 6f66 2076 616c 7565 7320 746f  ray of values to
+000264b0: 2072 6570 6c61 6365 2061 6c6c 204e 614e   replace all NaN
+000264c0: 2061 6e64 2069 6e76 616c 6964 2076 616c   and invalid val
+000264d0: 7565 732e 2049 6620 616e 0d0a 2020 2020  ues. If an..    
+000264e0: 2020 2020 2020 2020 6172 7261 792c 2074          array, t
+000264f0: 6865 206e 756d 6265 7220 6f66 2076 616c  he number of val
+00026500: 7565 7320 6d75 7374 2065 7175 616c 2074  ues must equal t
+00026510: 6865 206e 756d 6265 7220 6f66 204e 614e  he number of NaN
+00026520: 2061 6e64 2069 6e76 616c 6964 2076 616c   and invalid val
+00026530: 7565 732e 0d0a 2020 2020 2020 2020 696e  ues...        in
+00026540: 706c 6163 6520 3a20 626f 6f6c 2c20 6465  place : bool, de
+00026550: 6661 756c 7420 4661 6c73 650d 0a20 2020  fault False..   
+00026560: 2020 2020 2020 2020 2049 6620 4661 6c73           If Fals
+00026570: 652c 2072 6574 7572 6e20 6120 636f 7079  e, return a copy
+00026580: 206f 6620 7468 6520 6046 6173 7441 7272   of the `FastArr
+00026590: 6179 602e 2049 6620 5472 7565 2c20 6d6f  ay`. If True, mo
+000265a0: 6469 6679 2074 6865 206f 7269 6769 6e61  dify the origina
+000265b0: 6c2e 0d0a 2020 2020 2020 2020 2020 2020  l...            
+000265c0: 5468 6973 2077 696c 6c20 6d6f 6469 6679  This will modify
+000265d0: 2061 6e79 206f 7468 6572 2076 6965 7773   any other views
+000265e0: 206f 6e20 7468 6973 206f 626a 6563 742e   on this object.
+000265f0: 2054 6869 7320 6661 696c 7320 6966 2074   This fails if t
+00026600: 6865 0d0a 2020 2020 2020 2020 2020 2020  he..            
+00026610: 6046 6173 7441 7272 6179 6020 6973 206c  `FastArray` is l
+00026620: 6f63 6b65 642e 0d0a 0d0a 2020 2020 2020  ocked.....      
+00026630: 2020 5265 7475 726e 730d 0a20 2020 2020    Returns..     
+00026640: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
+00026650: 2020 2020 6046 6173 7441 7272 6179 6020      `FastArray` 
+00026660: 6f72 204e 6f6e 650d 0a20 2020 2020 2020  or None..       
+00026670: 2020 2020 2054 6865 2060 4661 7374 4172       The `FastAr
+00026680: 7261 7960 2077 696c 6c20 6265 2074 6865  ray` will be the
+00026690: 2073 616d 6520 7369 7a65 2061 6e64 2064   same size and d
+000266a0: 7479 7065 2061 7320 7468 6520 6f72 6967  type as the orig
+000266b0: 696e 616c 2061 7272 6179 2e0d 0a20 2020  inal array...   
+000266c0: 2020 2020 2020 2020 2052 6574 7572 6e73           Returns
+000266d0: 204e 6f6e 6520 6966 2060 6069 6e70 6c61   None if ``inpla
+000266e0: 6365 203d 2054 7275 6560 602e 0d0a 0d0a  ce = True``.....
+000266f0: 2020 2020 2020 2020 5365 6520 416c 736f          See Also
+00026700: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+00026710: 2d2d 0d0a 2020 2020 2020 2020 4661 7374  --..        Fast
+00026720: 4172 7261 792e 6669 6c6c 6e61 203a 2052  Array.fillna : R
+00026730: 6570 6c61 6365 204e 614e 2061 6e64 2069  eplace NaN and i
+00026740: 6e76 616c 6964 2076 616c 7565 7320 7769  nvalid values wi
+00026750: 7468 2061 2073 7065 6369 6669 6564 2076  th a specified v
+00026760: 616c 7565 206f 7220 6e65 6172 6279 2064  alue or nearby d
+00026770: 6174 612e 0d0a 2020 2020 2020 2020 4461  ata...        Da
+00026780: 7461 7365 742e 6669 6c6c 6e61 203a 2052  taset.fillna : R
+00026790: 6570 6c61 6365 204e 614e 2061 6e64 2069  eplace NaN and i
+000267a0: 6e76 616c 6964 2076 616c 7565 7320 7769  nvalid values wi
+000267b0: 7468 2061 2073 7065 6369 6669 6564 2076  th a specified v
+000267c0: 616c 7565 206f 7220 6e65 6172 6279 2064  alue or nearby d
+000267d0: 6174 612e 0d0a 2020 2020 2020 2020 4361  ata...        Ca
+000267e0: 7465 676f 7269 6361 6c2e 6669 6c6c 5f66  tegorical.fill_f
+000267f0: 6f72 7761 7264 203a 2052 6570 6c61 6365  orward : Replace
+00026800: 204e 614e 2061 6e64 2069 6e76 616c 6964   NaN and invalid
+00026810: 2076 616c 7565 7320 7769 7468 2074 6865   values with the
+00026820: 206c 6173 7420 7661 6c69 6420 6772 6f75   last valid grou
+00026830: 7020 7661 6c75 652e 0d0a 2020 2020 2020  p value...      
+00026840: 2020 4361 7465 676f 7269 6361 6c2e 6669    Categorical.fi
+00026850: 6c6c 5f62 6163 6b77 6172 6420 3a20 5265  ll_backward : Re
+00026860: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
+00026870: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
+00026880: 6820 7468 6520 6e65 7874 2076 616c 6964  h the next valid
+00026890: 2067 726f 7570 2076 616c 7565 2e0d 0a20   group value... 
+000268a0: 2020 2020 2020 2047 726f 7570 4279 2e66         GroupBy.f
+000268b0: 696c 6c5f 666f 7277 6172 6420 3a20 5265  ill_forward : Re
+000268c0: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
+000268d0: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
+000268e0: 6820 7468 6520 6c61 7374 2076 616c 6964  h the last valid
+000268f0: 2067 726f 7570 2076 616c 7565 2e0d 0a20   group value... 
+00026900: 2020 2020 2020 2047 726f 7570 4279 2e66         GroupBy.f
+00026910: 696c 6c5f 6261 636b 7761 7264 203a 2052  ill_backward : R
+00026920: 6570 6c61 6365 204e 614e 2061 6e64 2069  eplace NaN and i
+00026930: 6e76 616c 6964 2076 616c 7565 7320 7769  nvalid values wi
+00026940: 7468 2074 6865 206e 6578 7420 7661 6c69  th the next vali
+00026950: 6420 6772 6f75 7020 7661 6c75 652e 0d0a  d group value...
+00026960: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
+00026970: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+00026980: 2d2d 2d2d 0d0a 2020 2020 2020 2020 5265  ----..        Re
+00026990: 706c 6163 6520 616c 6c20 696e 7374 616e  place all instan
+000269a0: 6365 7320 6f66 204e 614e 2077 6974 6820  ces of NaN with 
+000269b0: 6120 7369 6e67 6c65 2076 616c 7565 3a0d  a single value:.
+000269c0: 0a0d 0a20 2020 2020 2020 203e 3e3e 2061  ...        >>> a
+000269d0: 203d 2072 742e 4661 7374 4172 7261 7928   = rt.FastArray(
+000269e0: 5b72 742e 6e61 6e2c 2031 2e30 2c20 7274  [rt.nan, 1.0, rt
+000269f0: 2e6e 616e 2c20 332e 305d 290d 0a20 2020  .nan, 3.0])..   
+00026a00: 2020 2020 203e 3e3e 2061 2e72 6570 6c61       >>> a.repla
+00026a10: 6365 6e61 2830 290d 0a20 2020 2020 2020  cena(0)..       
+00026a20: 2046 6173 7441 7272 6179 285b 302e 2c20   FastArray([0., 
+00026a30: 312e 2c20 302e 2c20 332e 5d29 0d0a 0d0a  1., 0., 3.])....
+00026a40: 2020 2020 2020 2020 5265 706c 6163 6520          Replace 
+00026a50: 616c 6c20 696e 7661 6c69 6420 7661 6c75  all invalid valu
+00026a60: 6573 2077 6974 6820 3073 3a0d 0a0d 0a20  es with 0s:.... 
+00026a70: 2020 2020 2020 203e 3e3e 2062 203d 2072         >>> b = r
+00026a80: 742e 4661 7374 4172 7261 7928 5b30 2c20  t.FastArray([0, 
+00026a90: 312c 2032 2c20 332c 2034 2c20 355d 290d  1, 2, 3, 4, 5]).
+00026aa0: 0a20 2020 2020 2020 203e 3e3e 2062 5b30  .        >>> b[0
+00026ab0: 3a33 5d20 3d20 622e 696e 760d 0a20 2020  :3] = b.inv..   
+00026ac0: 2020 2020 203e 3e3e 2062 2e72 6570 6c61       >>> b.repla
+00026ad0: 6365 6e61 2830 290d 0a20 2020 2020 2020  cena(0)..       
+00026ae0: 2046 6173 7441 7272 6179 285b 302c 2030   FastArray([0, 0
+00026af0: 2c20 302c 2033 2c20 342c 2035 5d29 0d0a  , 0, 3, 4, 5])..
+00026b00: 0d0a 2020 2020 2020 2020 5265 706c 6163  ..        Replac
+00026b10: 6520 6561 6368 2069 6e73 7461 6e63 6520  e each instance 
+00026b20: 6f66 204e 614e 2077 6974 6820 6120 6469  of NaN with a di
+00026b30: 6666 6572 656e 7420 7661 6c75 653a 0d0a  fferent value:..
+00026b40: 0d0a 2020 2020 2020 2020 3e3e 3e20 612e  ..        >>> a.
+00026b50: 7265 706c 6163 656e 6128 5b30 2c20 325d  replacena([0, 2]
+00026b60: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
+00026b70: 7272 6179 285b 302e 2c20 312e 2c20 322e  rray([0., 1., 2.
+00026b80: 2c20 332e 5d29 0d0a 2020 2020 2020 2020  , 3.])..        
+00026b90: 2222 220d 0a20 2020 2020 2020 2069 6e73  """..        ins
+00026ba0: 7420 3d20 7365 6c66 2069 6620 696e 706c  t = self if inpl
+00026bb0: 6163 6520 656c 7365 2073 656c 662e 636f  ace else self.co
+00026bc0: 7079 2829 0d0a 2020 2020 2020 2020 6973  py()..        is
+00026bd0: 6e61 203d 2069 6e73 742e 6973 6e61 2829  na = inst.isna()
+00026be0: 0d0a 2020 2020 2020 2020 6966 2069 736e  ..        if isn
+00026bf0: 612e 616e 7928 293a 0d0a 2020 2020 2020  a.any():..      
+00026c00: 2020 2020 2020 696e 7374 5b69 736e 615d        inst[isna]
+00026c10: 203d 2076 616c 7565 0d0a 2020 2020 2020   = value..      
+00026c20: 2020 6966 2069 6e70 6c61 6365 3a0d 0a20    if inplace:.. 
+00026c30: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00026c40: 6e20 4e6f 6e65 0d0a 2020 2020 2020 2020  n None..        
+00026c50: 7265 7475 726e 2069 6e73 740d 0a0d 0a20  return inst.... 
+00026c60: 2020 2064 6566 2066 696c 6c6e 6128 7365     def fillna(se
+00026c70: 6c66 2c20 7661 6c75 653d 4e6f 6e65 2c20  lf, value=None, 
+00026c80: 6d65 7468 6f64 3d4e 6f6e 652c 2069 6e70  method=None, inp
+00026c90: 6c61 6365 3d46 616c 7365 2c20 6c69 6d69  lace=False, limi
+00026ca0: 743d 4e6f 6e65 2920 2d3e 2046 6173 7441  t=None) -> FastA
+00026cb0: 7272 6179 3a0d 0a20 2020 2020 2020 2022  rray:..        "
+00026cc0: 2222 0d0a 2020 2020 2020 2020 5265 706c  ""..        Repl
+00026cd0: 6163 6520 4e61 4e20 616e 6420 696e 7661  ace NaN and inva
+00026ce0: 6c69 6420 7661 6c75 6573 2077 6974 6820  lid values with 
+00026cf0: 6120 7370 6563 6966 6965 6420 7661 6c75  a specified valu
+00026d00: 6520 6f72 206e 6561 7262 7920 6461 7461  e or nearby data
+00026d10: 2e0d 0a0d 0a20 2020 2020 2020 204f 7074  .....        Opt
+00026d20: 696f 6e61 6c6c 792c 2079 6f75 2063 616e  ionally, you can
+00026d30: 206d 6f64 6966 7920 7468 6520 6f72 6967   modify the orig
+00026d40: 696e 616c 2060 4661 7374 4172 7261 7960  inal `FastArray`
+00026d50: 2069 6620 6974 2773 206e 6f74 206c 6f63   if it's not loc
+00026d60: 6b65 642e 0d0a 0d0a 2020 2020 2020 2020  ked.....        
+00026d70: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
+00026d80: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
+00026d90: 2020 2020 2020 2020 7661 6c75 6520 3a20          value : 
+00026da0: 7363 616c 6172 206f 7220 6172 7261 792c  scalar or array,
+00026db0: 2064 6566 6175 6c74 204e 6f6e 650d 0a20   default None.. 
+00026dc0: 2020 2020 2020 2020 2020 2041 2076 616c             A val
+00026dd0: 7565 206f 7220 616e 2061 7272 6179 206f  ue or an array o
+00026de0: 6620 7661 6c75 6573 2074 6f20 7265 706c  f values to repl
+00026df0: 6163 6520 616c 6c20 4e61 4e20 616e 6420  ace all NaN and 
+00026e00: 696e 7661 6c69 6420 7661 6c75 6573 2e0d  invalid values..
+00026e10: 0a20 2020 2020 2020 2020 2020 2041 2060  .            A `
+00026e20: 7661 6c75 6560 2069 7320 7265 7175 6972  value` is requir
+00026e30: 6564 2069 6620 6060 6d65 7468 6f64 203d  ed if ``method =
+00026e40: 204e 6f6e 6560 602e 2041 6e20 6172 7261   None``. An arra
+00026e50: 7920 6361 6e20 6265 2075 7365 6420 6f6e  y can be used on
+00026e60: 6c79 2077 6865 6e0d 0a20 2020 2020 2020  ly when..       
+00026e70: 2020 2020 2060 606d 6574 686f 6420 3d20       ``method = 
+00026e80: 4e6f 6e65 6060 2e20 4966 2061 6e20 6172  None``. If an ar
+00026e90: 7261 7920 6973 2075 7365 642c 2074 6865  ray is used, the
+00026ea0: 206e 756d 6265 7220 6f66 2076 616c 7565   number of value
+00026eb0: 7320 696e 2074 6865 2061 7272 6179 0d0a  s in the array..
+00026ec0: 2020 2020 2020 2020 2020 2020 6d75 7374              must
+00026ed0: 2065 7175 616c 2074 6865 206e 756d 6265   equal the numbe
+00026ee0: 7220 6f66 204e 614e 2061 6e64 2069 6e76  r of NaN and inv
+00026ef0: 616c 6964 2076 616c 7565 732e 0d0a 2020  alid values...  
+00026f00: 2020 2020 2020 6d65 7468 6f64 203a 207b        method : {
+00026f10: 4e6f 6e65 2c20 2762 6163 6b66 696c 6c27  None, 'backfill'
+00026f20: 2c20 2762 6669 6c6c 272c 2027 7061 6427  , 'bfill', 'pad'
+00026f30: 2c20 2766 6669 6c6c 277d 2c20 6465 6661  , 'ffill'}, defa
+00026f40: 756c 7420 4e6f 6e65 0d0a 2020 2020 2020  ult None..      
+00026f50: 2020 2020 2020 4d65 7468 6f64 2074 6f20        Method to 
+00026f60: 7573 6520 746f 2070 726f 7061 6761 7465  use to propagate
+00026f70: 2076 616c 6964 2076 616c 7565 732e 0d0a   valid values...
+00026f80: 0d0a 2020 2020 2020 2020 2020 2020 2a20  ..            * 
+00026f90: 6261 636b 6669 6c6c 2f62 6669 6c6c 3a20  backfill/bfill: 
+00026fa0: 5072 6f70 6167 6174 6573 2074 6865 206e  Propagates the n
+00026fb0: 6578 7420 656e 636f 756e 7465 7265 6420  ext encountered 
+00026fc0: 7661 6c69 6420 7661 6c75 6520 6261 636b  valid value back
+00026fd0: 7761 7264 2e0d 0a20 2020 2020 2020 2020  ward...         
+00026fe0: 2020 2020 2043 616c 6c73 203a 6d65 7468       Calls :meth
+00026ff0: 3a60 4661 7374 4172 7261 792e 6669 6c6c  :`FastArray.fill
+00027000: 5f62 6163 6b77 6172 6460 2e0d 0a20 2020  _backward`...   
+00027010: 2020 2020 2020 2020 202a 2070 6164 2f66           * pad/f
+00027020: 6669 6c6c 3a20 5072 6f70 6167 6174 6573  fill: Propagates
+00027030: 2074 6865 206c 6173 7420 656e 636f 756e   the last encoun
+00027040: 7465 7265 6420 7661 6c69 6420 7661 6c75  tered valid valu
+00027050: 6520 666f 7277 6172 642e 2043 616c 6c73  e forward. Calls
+00027060: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00027070: 3a6d 6574 683a 6046 6173 7441 7272 6179  :meth:`FastArray
+00027080: 2e66 696c 6c5f 666f 7277 6172 6460 2e0d  .fill_forward`..
+00027090: 0a20 2020 2020 2020 2020 2020 202a 204e  .            * N
+000270a0: 6f6e 653a 2041 2072 6570 6c61 6365 6d65  one: A replaceme
+000270b0: 6e74 2076 616c 7565 2069 7320 7265 7175  nt value is requ
+000270c0: 6972 6564 2069 6620 6060 6d65 7468 6f64  ired if ``method
+000270d0: 203d 204e 6f6e 6560 602e 2043 616c 6c73   = None``. Calls
+000270e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000270f0: 3a6d 6574 683a 6046 6173 7441 7272 6179  :meth:`FastArray
+00027100: 2e72 6570 6c61 6365 6e61 602e 0d0a 2020  .replacena`...  
+00027110: 2020 2020 2020 2020 2020 4966 2074 6865            If the
+00027120: 7265 2773 206e 6f74 2061 2076 616c 6964  re's not a valid
+00027130: 2076 616c 7565 2074 6f20 7072 6f70 6167   value to propag
+00027140: 6174 6520 666f 7277 6172 6420 6f72 2062  ate forward or b
+00027150: 6163 6b77 6172 642c 2074 6865 204e 614e  ackward, the NaN
+00027160: 206f 720d 0a20 2020 2020 2020 2020 2020   or..           
+00027170: 2069 6e76 616c 6964 2076 616c 7565 2069   invalid value i
+00027180: 7320 6e6f 7420 7265 706c 6163 6564 2075  s not replaced u
+00027190: 6e6c 6573 7320 796f 7520 616c 736f 2073  nless you also s
+000271a0: 7065 6369 6679 2061 2060 7661 6c75 6560  pecify a `value`
+000271b0: 2e0d 0a20 2020 2020 2020 2069 6e70 6c61  ...        inpla
+000271c0: 6365 203a 2062 6f6f 6c2c 2064 6566 6175  ce : bool, defau
+000271d0: 6c74 2046 616c 7365 0d0a 2020 2020 2020  lt False..      
+000271e0: 2020 2020 2020 4966 2046 616c 7365 2c20        If False, 
+000271f0: 7265 7475 726e 2061 2063 6f70 7920 6f66  return a copy of
+00027200: 2074 6865 2060 4661 7374 4172 7261 7960   the `FastArray`
+00027210: 2e20 4966 2054 7275 652c 206d 6f64 6966  . If True, modif
+00027220: 7920 6f72 6967 696e 616c 2064 6174 612e  y original data.
+00027230: 0d0a 2020 2020 2020 2020 2020 2020 5468  ..            Th
+00027240: 6973 2077 696c 6c20 6d6f 6469 6679 2061  is will modify a
+00027250: 6e79 206f 7468 6572 2076 6965 7773 206f  ny other views o
+00027260: 6e20 7468 6973 206f 626a 6563 742e 2054  n this object. T
+00027270: 6869 7320 6661 696c 7320 6966 2074 6865  his fails if the
+00027280: 0d0a 2020 2020 2020 2020 2020 2020 6046  ..            `F
+00027290: 6173 7441 7272 6179 6020 6973 206c 6f63  astArray` is loc
+000272a0: 6b65 642e 0d0a 2020 2020 2020 2020 6c69  ked...        li
+000272b0: 6d69 7420 3a20 696e 742c 2064 6566 6175  mit : int, defau
+000272c0: 6c74 204e 6f6e 650d 0a20 2020 2020 2020  lt None..       
+000272d0: 2020 2020 2049 6620 606d 6574 686f 6460       If `method`
+000272e0: 2069 7320 7370 6563 6966 6965 642c 2074   is specified, t
+000272f0: 6869 7320 6973 2074 6865 206d 6178 696d  his is the maxim
+00027300: 6975 6d20 6e75 6d62 6572 206f 6620 636f  ium number of co
+00027310: 6e73 6563 7574 6976 6520 4e61 4e20 6f72  nsecutive NaN or
+00027320: 0d0a 2020 2020 2020 2020 2020 2020 696e  ..            in
+00027330: 7661 6c69 6420 7661 6c75 6573 2074 6f20  valid values to 
+00027340: 6669 6c6c 2e20 4966 2074 6865 7265 2069  fill. If there i
+00027350: 7320 6120 6761 7020 7769 7468 206d 6f72  s a gap with mor
+00027360: 6520 7468 616e 2074 6869 7320 6e75 6d62  e than this numb
+00027370: 6572 206f 660d 0a20 2020 2020 2020 2020  er of..         
+00027380: 2020 2063 6f6e 7365 6375 7469 7665 204e     consecutive N
+00027390: 614e 206f 7220 696e 7661 6c69 6420 7661  aN or invalid va
+000273a0: 6c75 6573 2c20 7468 6520 6761 7020 7769  lues, the gap wi
+000273b0: 6c6c 2062 6520 6f6e 6c79 2070 6172 7469  ll be only parti
+000273c0: 616c 6c79 2066 696c 6c65 642e 0d0a 0d0a  ally filled.....
+000273d0: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
+000273e0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+000273f0: 0d0a 2020 2020 2020 2020 6046 6173 7441  ..        `FastA
+00027400: 7272 6179 600d 0a20 2020 2020 2020 2020  rray`..         
+00027410: 2020 2054 6865 2060 4661 7374 4172 7261     The `FastArra
+00027420: 7960 2077 696c 6c20 6265 2074 6865 2073  y` will be the s
+00027430: 616d 6520 7369 7a65 2061 6e64 2064 7479  ame size and dty
+00027440: 7065 2061 7320 7468 6520 6f72 6967 696e  pe as the origin
+00027450: 616c 2061 7272 6179 2e0d 0a0d 0a20 2020  al array.....   
+00027460: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
+00027470: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+00027480: 0a20 2020 2020 2020 2072 6970 7461 626c  .        riptabl
+00027490: 652e 7274 5f66 6173 7461 7272 6179 6e75  e.rt_fastarraynu
+000274a0: 6d62 612e 6669 6c6c 5f66 6f72 7761 7264  mba.fill_forward
+000274b0: 203a 2052 6570 6c61 6365 204e 614e 2061   : Replace NaN a
+000274c0: 6e64 2069 6e76 616c 6964 2076 616c 7565  nd invalid value
+000274d0: 7320 7769 7468 0d0a 2020 2020 2020 2020  s with..        
+000274e0: 2020 2020 7468 6520 6c61 7374 2076 616c      the last val
+000274f0: 6964 2076 616c 7565 2e0d 0a20 2020 2020  id value...     
+00027500: 2020 2072 6970 7461 626c 652e 7274 5f66     riptable.rt_f
+00027510: 6173 7461 7272 6179 6e75 6d62 612e 6669  astarraynumba.fi
+00027520: 6c6c 5f62 6163 6b77 6172 6420 3a20 5265  ll_backward : Re
+00027530: 706c 6163 6520 4e61 4e20 616e 6420 696e  place NaN and in
+00027540: 7661 6c69 6420 7661 6c75 6573 2077 6974  valid values wit
+00027550: 680d 0a20 2020 2020 2020 2020 2020 2074  h..            t
+00027560: 6865 206e 6578 7420 7661 6c69 6420 7661  he next valid va
+00027570: 6c75 652e 0d0a 2020 2020 2020 2020 7269  lue...        ri
+00027580: 7074 6162 6c65 2e66 696c 6c5f 666f 7277  ptable.fill_forw
+00027590: 6172 6420 3a20 5265 706c 6163 6520 4e61  ard : Replace Na
+000275a0: 4e20 616e 6420 696e 7661 6c69 6420 7661  N and invalid va
+000275b0: 6c75 6573 2077 6974 6820 7468 6520 6c61  lues with the la
+000275c0: 7374 2076 616c 6964 0d0a 2020 2020 2020  st valid..      
+000275d0: 2020 2020 2020 7661 6c75 652e 0d0a 2020        value...  
+000275e0: 2020 2020 2020 7269 7074 6162 6c65 2e66        riptable.f
+000275f0: 696c 6c5f 6261 636b 7761 7264 203a 2052  ill_backward : R
+00027600: 6570 6c61 6365 204e 614e 2061 6e64 2069  eplace NaN and i
+00027610: 6e76 616c 6964 2076 616c 7565 7320 7769  nvalid values wi
+00027620: 7468 2074 6865 206e 6578 7420 7661 6c69  th the next vali
+00027630: 640d 0a20 2020 2020 2020 2020 2020 2076  d..            v
+00027640: 616c 7565 2e0d 0a20 2020 2020 2020 2044  alue...        D
+00027650: 6174 6173 6574 2e66 696c 6c6e 6120 3a20  ataset.fillna : 
+00027660: 5265 706c 6163 6520 4e61 4e20 616e 6420  Replace NaN and 
+00027670: 696e 7661 6c69 6420 7661 6c75 6573 2077  invalid values w
+00027680: 6974 6820 6120 7370 6563 6966 6965 6420  ith a specified 
+00027690: 7661 6c75 6520 6f72 0d0a 2020 2020 2020  value or..      
+000276a0: 2020 2020 2020 6e65 6172 6279 2064 6174        nearby dat
+000276b0: 612e 0d0a 2020 2020 2020 2020 4661 7374  a...        Fast
+000276c0: 4172 7261 792e 7265 706c 6163 656e 6120  Array.replacena 
+000276d0: 3a20 5265 706c 6163 6520 4e61 4e20 616e  : Replace NaN an
+000276e0: 6420 696e 7661 6c69 6420 7661 6c75 6573  d invalid values
+000276f0: 2077 6974 6820 6120 7370 6563 6966 6965   with a specifie
+00027700: 6420 7661 6c75 652e 0d0a 2020 2020 2020  d value...      
+00027710: 2020 4361 7465 676f 7269 6361 6c2e 6669    Categorical.fi
+00027720: 6c6c 5f66 6f72 7761 7264 203a 2052 6570  ll_forward : Rep
+00027730: 6c61 6365 204e 614e 2061 6e64 2069 6e76  lace NaN and inv
+00027740: 616c 6964 2076 616c 7565 7320 7769 7468  alid values with
+00027750: 2074 6865 206c 6173 7420 7661 6c69 640d   the last valid.
+00027760: 0a20 2020 2020 2020 2020 2020 2067 726f  .            gro
+00027770: 7570 2076 616c 7565 2e0d 0a20 2020 2020  up value...     
+00027780: 2020 2043 6174 6567 6f72 6963 616c 2e66     Categorical.f
+00027790: 696c 6c5f 6261 636b 7761 7264 203a 2052  ill_backward : R
+000277a0: 6570 6c61 6365 204e 614e 2061 6e64 2069  eplace NaN and i
+000277b0: 6e76 616c 6964 2076 616c 7565 7320 7769  nvalid values wi
+000277c0: 7468 2074 6865 206e 6578 7420 7661 6c69  th the next vali
+000277d0: 640d 0a20 2020 2020 2020 2020 2020 2067  d..            g
+000277e0: 726f 7570 2076 616c 7565 2e0d 0a20 2020  roup value...   
+000277f0: 2020 2020 2047 726f 7570 4279 2e66 696c       GroupBy.fil
+00027800: 6c5f 666f 7277 6172 6420 3a20 5265 706c  l_forward : Repl
+00027810: 6163 6520 4e61 4e20 616e 6420 696e 7661  ace NaN and inva
+00027820: 6c69 6420 7661 6c75 6573 2077 6974 6820  lid values with 
+00027830: 7468 6520 6c61 7374 2076 616c 6964 0d0a  the last valid..
+00027840: 2020 2020 2020 2020 2020 2020 6772 6f75              grou
+00027850: 7020 7661 6c75 652e 0d0a 2020 2020 2020  p value...      
+00027860: 2020 4772 6f75 7042 792e 6669 6c6c 5f62    GroupBy.fill_b
+00027870: 6163 6b77 6172 6420 3a20 5265 706c 6163  ackward : Replac
+00027880: 6520 4e61 4e20 616e 6420 696e 7661 6c69  e NaN and invali
+00027890: 6420 7661 6c75 6573 2077 6974 6820 7468  d values with th
+000278a0: 6520 6e65 7874 2076 616c 6964 0d0a 2020  e next valid..  
+000278b0: 2020 2020 2020 2020 2020 6772 6f75 7020            group 
+000278c0: 7661 6c75 652e 0d0a 0d0a 2020 2020 2020  value.....      
+000278d0: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
+000278e0: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
+000278f0: 2020 2020 2020 5265 706c 6163 6520 616c        Replace al
+00027900: 6c20 4e61 4e20 7661 6c75 6573 2077 6974  l NaN values wit
+00027910: 6820 3073 3a0d 0a0d 0a20 2020 2020 2020  h 0s:....       
+00027920: 203e 3e3e 2061 203d 2072 742e 4661 7374   >>> a = rt.Fast
+00027930: 4172 7261 7928 5b72 742e 6e61 6e2c 2031  Array([rt.nan, 1
+00027940: 2e30 2c20 7274 2e6e 616e 2c20 7274 2e6e  .0, rt.nan, rt.n
+00027950: 616e 2c20 7274 2e6e 616e 2c20 352e 305d  an, rt.nan, 5.0]
+00027960: 290d 0a20 2020 2020 2020 203e 3e3e 2061  )..        >>> a
+00027970: 2e66 696c 6c6e 6128 3029 0d0a 2020 2020  .fillna(0)..    
+00027980: 2020 2020 4661 7374 4172 7261 7928 5b30      FastArray([0
+00027990: 2e2c 2031 2e2c 2030 2e2c 2030 2e2c 2030  ., 1., 0., 0., 0
+000279a0: 2e2c 2035 2e5d 290d 0a0d 0a20 2020 2020  ., 5.])....     
+000279b0: 2020 2052 6570 6c61 6365 2061 6c6c 2069     Replace all i
+000279c0: 6e76 616c 6964 2076 616c 7565 7320 7769  nvalid values wi
+000279d0: 7468 2030 733a 0d0a 0d0a 2020 2020 2020  th 0s:....      
+000279e0: 2020 3e3e 3e20 6220 3d20 7274 2e46 6173    >>> b = rt.Fas
+000279f0: 7441 7272 6179 285b 302c 2031 2c20 322c  tArray([0, 1, 2,
+00027a00: 2033 2c20 342c 2035 5d29 0d0a 2020 2020   3, 4, 5])..    
+00027a10: 2020 2020 3e3e 3e20 625b 303a 335d 203d      >>> b[0:3] =
+00027a20: 2062 2e69 6e76 0d0a 2020 2020 2020 2020   b.inv..        
+00027a30: 3e3e 3e20 622e 6669 6c6c 6e61 2830 290d  >>> b.fillna(0).
+00027a40: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+00027a50: 6179 285b 302c 2030 2c20 302c 2033 2c20  ay([0, 0, 0, 3, 
+00027a60: 342c 2035 5d29 0d0a 0d0a 2020 2020 2020  4, 5])....      
+00027a70: 2020 5265 706c 6163 6520 6561 6368 2069    Replace each i
+00027a80: 6e73 7461 6e63 6520 6f66 204e 614e 2077  nstance of NaN w
+00027a90: 6974 6820 6120 6469 6666 6572 656e 7420  ith a different 
+00027aa0: 7661 6c75 653a 0d0a 0d0a 2020 2020 2020  value:....      
+00027ab0: 2020 3e3e 3e20 612e 6669 6c6c 6e61 285b    >>> a.fillna([
+00027ac0: 302c 2032 2c20 332c 2034 5d29 0d0a 2020  0, 2, 3, 4])..  
+00027ad0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+00027ae0: 5b30 2e2c 2031 2e2c 2032 2e2c 2033 2e2c  [0., 1., 2., 3.,
+00027af0: 2034 2e2c 2035 2e5d 290d 0a0d 0a20 2020   4., 5.])....   
+00027b00: 2020 2020 2050 726f 7061 6761 7465 2074       Propagate t
+00027b10: 6865 206c 6173 7420 656e 636f 756e 7465  he last encounte
+00027b20: 7265 6420 7661 6c69 6420 7661 6c75 6520  red valid value 
+00027b30: 666f 7277 6172 642e 204e 6f74 6520 7468  forward. Note th
+00027b40: 6174 2077 6865 7265 2074 6865 7265 2773  at where there's
+00027b50: 206e 6f0d 0a20 2020 2020 2020 2076 616c   no..        val
+00027b60: 6964 2076 616c 7565 2074 6f20 7072 6f70  id value to prop
+00027b70: 6167 6174 652c 2074 6865 204e 614e 206f  agate, the NaN o
+00027b80: 7220 696e 7661 6c69 6420 7661 6c75 6520  r invalid value 
+00027b90: 6973 6e27 7420 7265 706c 6163 6564 2e0d  isn't replaced..
+00027ba0: 0a0d 0a20 2020 2020 2020 203e 3e3e 2061  ...        >>> a
+00027bb0: 2e66 696c 6c6e 6128 6d65 7468 6f64 203d  .fillna(method =
+00027bc0: 2027 6666 696c 6c27 290d 0a20 2020 2020   'ffill')..     
+00027bd0: 2020 2046 6173 7441 7272 6179 285b 6e61     FastArray([na
+00027be0: 6e2c 2020 312e 2c20 2031 2e2c 2020 312e  n,  1.,  1.,  1.
+00027bf0: 2c20 2031 2e2c 2020 352e 5d29 0d0a 0d0a  ,  1.,  5.])....
+00027c00: 2020 2020 2020 2020 596f 7520 6361 6e20          You can 
+00027c10: 7573 6520 7468 6520 6076 616c 7565 6020  use the `value` 
+00027c20: 7061 7261 6d65 7465 7220 746f 2073 7065  parameter to spe
+00027c30: 6369 6679 2061 2076 616c 7565 2074 6f20  cify a value to 
+00027c40: 7573 6520 7768 6572 6520 7468 6572 6527  use where there'
+00027c50: 7320 6e6f 0d0a 2020 2020 2020 2020 7661  s no..        va
+00027c60: 6c69 6420 7661 6c75 6520 746f 2070 726f  lid value to pro
+00027c70: 7061 6761 7465 2e0d 0a0d 0a20 2020 2020  pagate.....     
+00027c80: 2020 203e 3e3e 2061 2e66 696c 6c6e 6128     >>> a.fillna(
+00027c90: 7661 6c75 6520 3d20 302c 206d 6574 686f  value = 0, metho
+00027ca0: 6420 3d20 2766 6669 6c6c 2729 0d0a 2020  d = 'ffill')..  
+00027cb0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+00027cc0: 5b30 2e2c 2031 2e2c 2031 2e2c 2031 2e2c  [0., 1., 1., 1.,
+00027cd0: 2031 2e2c 2035 2e5d 290d 0a0d 0a20 2020   1., 5.])....   
+00027ce0: 2020 2020 2052 6570 6c61 6365 206f 6e6c       Replace onl
+00027cf0: 7920 7468 6520 6669 7273 7420 4e61 4e20  y the first NaN 
+00027d00: 6f72 2069 6e76 616c 6964 2076 616c 7565  or invalid value
+00027d10: 2069 6e20 616e 7920 636f 6e73 6563 7574   in any consecut
+00027d20: 6976 6520 7365 7269 6573 206f 6620 4e61  ive series of Na
+00027d30: 4e20 6f72 0d0a 2020 2020 2020 2020 696e  N or..        in
+00027d40: 7661 6c69 6420 7661 6c75 6573 2e0d 0a0d  valid values....
+00027d50: 0a20 2020 2020 2020 203e 3e3e 2061 2e66  .        >>> a.f
+00027d60: 696c 6c6e 6128 6d65 7468 6f64 203d 2027  illna(method = '
+00027d70: 6266 696c 6c27 2c20 6c69 6d69 7420 3d20  bfill', limit = 
+00027d80: 3129 0d0a 2020 2020 2020 2020 4661 7374  1)..        Fast
+00027d90: 4172 7261 7928 5b20 312e 2c20 2031 2e2c  Array([ 1.,  1.,
+00027da0: 206e 616e 2c20 6e61 6e2c 2020 352e 2c20   nan, nan,  5., 
+00027db0: 2035 2e5d 290d 0a20 2020 2020 2020 2022   5.])..        "
+00027dc0: 2222 0d0a 2020 2020 2020 2020 6966 206d  ""..        if m
+00027dd0: 6574 686f 6420 6973 206e 6f74 204e 6f6e  ethod is not Non
+00027de0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00027df0: 6966 206d 6574 686f 6420 696e 205b 2262  if method in ["b
+00027e00: 6163 6b66 696c 6c22 2c20 2262 6669 6c6c  ackfill", "bfill
+00027e10: 225d 3a0d 0a20 2020 2020 2020 2020 2020  "]:..           
+00027e20: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00027e30: 2e66 696c 6c5f 6261 636b 7761 7264 2876  .fill_backward(v
+00027e40: 616c 7565 2c20 696e 706c 6163 653d 696e  alue, inplace=in
+00027e50: 706c 6163 652c 206c 696d 6974 3d6c 696d  place, limit=lim
+00027e60: 6974 290d 0a20 2020 2020 2020 2020 2020  it)..           
+00027e70: 2069 6620 6d65 7468 6f64 2069 6e20 5b22   if method in ["
+00027e80: 7061 6422 2c20 2266 6669 6c6c 225d 3a0d  pad", "ffill"]:.
+00027e90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027ea0: 2072 6574 7572 6e20 7365 6c66 2e66 696c   return self.fil
+00027eb0: 6c5f 666f 7277 6172 6428 7661 6c75 652c  l_forward(value,
+00027ec0: 2069 6e70 6c61 6365 3d69 6e70 6c61 6365   inplace=inplace
+00027ed0: 2c20 6c69 6d69 743d 6c69 6d69 7429 0d0a  , limit=limit)..
+00027ee0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00027ef0: 6520 4b65 7945 7272 6f72 2866 2266 696c  e KeyError(f"fil
+00027f00: 6c6e 613a 2054 6865 206d 6574 686f 6420  lna: The method 
+00027f10: 7b6d 6574 686f 6421 727d 206d 7573 7420  {method!r} must 
+00027f20: 6265 2027 6261 636b 6669 6c6c 272c 2027  be 'backfill', '
+00027f30: 6266 696c 6c27 2c20 2770 6164 272c 2027  bfill', 'pad', '
+00027f40: 6666 696c 6c27 2229 0d0a 0d0a 2020 2020  ffill'")....    
+00027f50: 2020 2020 6966 2076 616c 7565 2069 7320      if value is 
+00027f60: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+00027f70: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
+00027f80: 726f 7228 6622 6669 6c6c 6e61 3a20 4d75  ror(f"fillna: Mu
+00027f90: 7374 2073 7065 6369 6679 2065 6974 6865  st specify eithe
+00027fa0: 7220 6120 2776 616c 7565 2720 7468 6174  r a 'value' that
+00027fb0: 2069 7320 6e6f 7420 4e6f 6e65 206f 7220   is not None or 
+00027fc0: 6120 276d 6574 686f 6427 2074 6861 7420  a 'method' that 
+00027fd0: 6973 206e 6f74 204e 6f6e 652e 2229 0d0a  is not None.")..
+00027fe0: 0d0a 2020 2020 2020 2020 6966 206c 696d  ..        if lim
+00027ff0: 6974 2069 7320 6e6f 7420 4e6f 6e65 3a0d  it is not None:.
+00028000: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00028010: 7365 204b 6579 4572 726f 7228 6622 6669  se KeyError(f"fi
+00028020: 6c6c 6e61 3a20 5468 6572 6520 6973 206e  llna: There is n
+00028030: 6f20 6c69 6d69 7420 7768 656e 206d 6574  o limit when met
+00028040: 686f 6420 6973 204e 6f6e 6522 290d 0a0d  hod is None")...
+00028050: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00028060: 7365 6c66 2e72 6570 6c61 6365 6e61 2876  self.replacena(v
+00028070: 616c 7565 2c20 696e 706c 6163 653d 696e  alue, inplace=in
+00028080: 706c 6163 6529 0d0a 0d0a 2020 2020 6465  place)....    de
+00028090: 6620 7374 6174 7828 7365 6c66 2920 2d3e  f statx(self) ->
+000280a0: 2044 6174 6173 6574 3a0d 0a20 2020 2020   Dataset:..     
+000280b0: 2020 2072 6574 7572 6e20 7374 6174 7828     return statx(
+000280c0: 7365 6c66 290d 0a0d 0a20 2020 2023 202d  self)....    # -
+000280d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000280e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000280f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00028100: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00028110: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+00028120: 6465 6620 5f69 735f 6e6f 745f 7375 7070  def _is_not_supp
+00028130: 6f72 7465 6428 7365 6c66 2c20 6172 7229  orted(self, arr)
+00028140: 3a0d 0a20 2020 2020 2020 2022 2222 7265  :..        """re
+00028150: 7475 726e 7320 5472 7565 2069 6620 6120  turns True if a 
+00028160: 6e75 6d70 7920 6172 7261 7920 6973 206e  numpy array is n
+00028170: 6f74 2046 6173 7441 7272 6179 2069 6e74  ot FastArray int
+00028180: 6572 6e61 6c6c 7920 7375 7070 6f72 7465  ernally supporte
+00028190: 6422 2222 0d0a 2020 2020 2020 2020 6966  d"""..        if
+000281a0: 206e 6f74 2028 6172 722e 666c 6167 732e   not (arr.flags.
+000281b0: 635f 636f 6e74 6967 756f 7573 206f 7220  c_contiguous or 
+000281c0: 6172 722e 666c 6167 732e 665f 636f 6e74  arr.flags.f_cont
+000281d0: 6967 756f 7573 293a 0d0a 2020 2020 2020  iguous):..      
+000281e0: 2020 2020 2020 2320 544f 444f 2065 6e61        # TODO ena
+000281f0: 626c 6520 7468 6973 2077 6172 6e69 6e67  ble this warning
+00028200: 2069 6e20 6120 6675 7475 7265 206d 696e   in a future min
+00028210: 6f72 2072 656c 6561 7365 0d0a 2020 2020  or release..    
+00028220: 2020 2020 2020 2020 2320 4661 7374 4172          # FastAr
+00028230: 7261 792e 5f70 6f73 7369 626c 795f 7761  ray._possibly_wa
+00028240: 726e 2866 275f 6973 5f6e 6f74 5f73 7570  rn(f'_is_not_sup
+00028250: 706f 7274 6564 3a20 756e 7375 7070 6f72  ported: unsuppor
+00028260: 7465 6420 6172 7261 7920 666c 6167 7320  ted array flags 
+00028270: 7b61 7272 2e66 6c61 6773 7d27 290d 0a20  {arr.flags}').. 
+00028280: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00028290: 6e20 5472 7565 0d0a 2020 2020 2020 2020  n True..        
+000282a0: 6966 2061 7272 2e64 7479 7065 2e63 6861  if arr.dtype.cha
+000282b0: 7220 6e6f 7420 696e 204e 756d 7079 4368  r not in NumpyCh
+000282c0: 6172 5479 7065 732e 5375 7070 6f72 7465  arTypes.Supporte
+000282d0: 643a 0d0a 2020 2020 2020 2020 2020 2020  d:..            
+000282e0: 2320 544f 444f 2065 6e61 626c 6520 7468  # TODO enable th
+000282f0: 6973 2077 6172 6e69 6e67 2069 6e20 6120  is warning in a 
+00028300: 6675 7475 7265 206d 696e 6f72 2072 656c  future minor rel
+00028310: 6561 7365 0d0a 2020 2020 2020 2020 2020  ease..          
+00028320: 2020 2320 4661 7374 4172 7261 792e 5f70    # FastArray._p
+00028330: 6f73 7369 626c 795f 7761 726e 2866 275f  ossibly_warn(f'_
+00028340: 6973 5f6e 6f74 5f73 7570 706f 7274 6564  is_not_supported
+00028350: 3a20 756e 7375 7070 6f72 7465 6420 6172  : unsupported ar
+00028360: 7261 7920 6474 7970 6520 7b61 7272 2e64  ray dtype {arr.d
+00028370: 7479 7065 7d5c 6e53 7570 706f 7274 6564  type}\nSupported
+00028380: 2064 7479 7065 7320 7b4e 756d 7079 4368   dtypes {NumpyCh
+00028390: 6172 5479 7065 732e 5375 7070 6f72 7465  arTypes.Supporte
+000283a0: 647d 2729 0d0a 2020 2020 2020 2020 2020  d}')..          
+000283b0: 2020 7265 7475 726e 2054 7275 650d 0a20    return True.. 
+000283c0: 2020 2020 2020 2069 6620 6c65 6e28 6172         if len(ar
+000283d0: 722e 7374 7269 6465 7329 203d 3d20 303a  r.strides) == 0:
+000283e0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+000283f0: 544f 444f 2065 6e61 626c 6520 7468 6973  TODO enable this
+00028400: 2077 6172 6e69 6e67 2069 6e20 6120 6675   warning in a fu
+00028410: 7475 7265 206d 696e 6f72 2072 656c 6561  ture minor relea
+00028420: 7365 0d0a 2020 2020 2020 2020 2020 2020  se..            
+00028430: 2320 4661 7374 4172 7261 792e 5f70 6f73  # FastArray._pos
+00028440: 7369 626c 795f 7761 726e 2866 275f 6973  sibly_warn(f'_is
+00028450: 5f6e 6f74 5f73 7570 706f 7274 6564 3a20  _not_supported: 
+00028460: 756e 7375 7070 6f72 7465 6420 6172 7261  unsupported arra
+00028470: 7920 7374 7269 6465 7320 7b61 7272 2e73  y strides {arr.s
+00028480: 7472 6964 6573 7d27 290d 0a20 2020 2020  trides}')..     
+00028490: 2020 2020 2020 2072 6574 7572 6e20 5472         return Tr
+000284a0: 7565 0d0a 2020 2020 2020 2020 7265 7475  ue..        retu
+000284b0: 726e 2046 616c 7365 0d0a 0d0a 2020 2020  rn False....    
+000284c0: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+000284d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000284e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000284f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00028500: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
+00028510: 2020 2064 6566 205f 5f61 7272 6179 5f66     def __array_f
+00028520: 756e 6374 696f 6e5f 5f28 7365 6c66 2c20  unction__(self, 
+00028530: 6675 6e63 2c20 7479 7065 732c 2061 7267  func, types, arg
+00028540: 732c 206b 7761 7267 7329 3a0d 0a20 2020  s, kwargs):..   
+00028550: 2020 2020 2069 6620 7365 6c66 2e4e 4557       if self.NEW
+00028560: 5f41 5252 4159 5f46 554e 4354 494f 4e5f  _ARRAY_FUNCTION_
+00028570: 454e 4142 4c45 443a 0d0a 2020 2020 2020  ENABLED:..      
+00028580: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00028590: 662e 5f6e 6577 5f61 7272 6179 5f66 756e  f._new_array_fun
+000285a0: 6374 696f 6e28 6675 6e63 2c20 7479 7065  ction(func, type
+000285b0: 732c 2061 7267 732c 206b 7761 7267 7329  s, args, kwargs)
+000285c0: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
+000285d0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+000285e0: 7572 6e20 7365 6c66 2e5f 6c65 6761 6379  urn self._legacy
+000285f0: 5f61 7272 6179 5f66 756e 6374 696f 6e28  _array_function(
+00028600: 6675 6e63 2c20 7479 7065 732c 2061 7267  func, types, arg
+00028610: 732c 206b 7761 7267 7329 0d0a 0d0a 2020  s, kwargs)....  
+00028620: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
+00028630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00028640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00028650: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00028660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
+00028670: 0a20 2020 2064 6566 205f 6c65 6761 6379  .    def _legacy
+00028680: 5f61 7272 6179 5f66 756e 6374 696f 6e28  _array_function(
+00028690: 7365 6c66 2c20 6675 6e63 2c20 7479 7065  self, func, type
+000286a0: 732c 2061 7267 732c 206b 7761 7267 7329  s, args, kwargs)
+000286b0: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+000286c0: 2020 2020 2020 2020 4361 6c6c 6564 2062          Called b
+000286d0: 6566 6f72 6520 6172 7261 795f 7566 756e  efore array_ufun
+000286e0: 632e 0d0a 2020 2020 2020 2020 446f 6573  c...        Does
+000286f0: 206e 6f74 2067 6574 2063 616c 6c65 6420   not get called 
+00028700: 666f 7220 6576 6572 7920 6675 6e63 7469  for every functi
+00028710: 6f6e 206e 702e 6973 6e61 6e2f 7472 756e  on np.isnan/trun
+00028720: 632f 7472 7565 5f64 6976 6964 6520 666f  c/true_divide fo
+00028730: 7220 696e 7374 616e 6365 2e0d 0a20 2020  r instance...   
+00028740: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00028750: 2020 7265 6475 6365 4675 6e63 203d 204e    reduceFunc = N
+00028760: 554d 5059 5f43 4f4e 5645 5253 494f 4e5f  UMPY_CONVERSION_
+00028770: 5441 424c 452e 6765 7428 6675 6e63 2c20  TABLE.get(func, 
+00028780: 4e6f 6e65 290d 0a0d 0a20 2020 2020 2020  None)....       
+00028790: 2023 2054 4f44 4f3a 0d0a 2020 2020 2020   # TODO:..      
+000287a0: 2020 2320 6b77 6172 6773 206f 6620 2761    # kwargs of 'a
+000287b0: 7869 7327 3a20 4e6f 6e65 2020 276f 7574  xis': None  'out
+000287c0: 273a 204e 6f6e 6520 7368 6f75 6c64 2062  ': None should b
+000287d0: 6520 6163 6365 7074 6564 0d0a 0d0a 2020  e accepted....  
+000287e0: 2020 2020 2020 6966 2072 6564 7563 6546        if reduceF
+000287f0: 756e 6320 6973 206e 6f74 204e 6f6e 6520  unc is not None 
+00028800: 616e 6420 6c65 6e28 6b77 6172 6773 2920  and len(kwargs) 
+00028810: 3d3d 2030 3a0d 0a20 2020 2020 2020 2020  == 0:..         
+00028820: 2020 2023 2073 7065 6564 2070 6174 6820     # speed path 
+00028830: 2874 6f64 6f20 6164 6420 6361 6c6c 2074  (todo add call t
+00028840: 6f20 6c65 6467 6572 290d 0a20 2020 2020  o ledger)..     
+00028850: 2020 2020 2020 2023 2064 6566 6175 6c74         # default
+00028860: 2074 6f20 6464 6f66 3d30 2077 6865 6e20   to ddof=0 when 
+00028870: 6e6f 206b 7761 7267 7320 7061 7373 6564  no kwargs passed
+00028880: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+00028890: 7375 6c74 203d 2072 632e 5265 6475 6365  sult = rc.Reduce
+000288a0: 2861 7267 735b 305d 2c20 7265 6475 6365  (args[0], reduce
+000288b0: 4675 6e63 2c20 3029 0d0a 0d0a 2020 2020  Func, 0)....    
+000288c0: 2020 2020 2020 2020 6966 2072 6573 756c          if resul
+000288d0: 7420 6973 206e 6f74 204e 6f6e 653a 0d0a  t is not None:..
+000288e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000288f0: 2320 5479 7065 5265 6769 7374 6572 2e4d  # TypeRegister.M
+00028900: 6174 684c 6564 6765 722e 5f52 4544 5543  athLedger._REDUC
+00028910: 4528 6172 6773 5b30 5d2c 206e 6577 6675  E(args[0], newfu
+00028920: 6e63 290d 0a0d 0a20 2020 2020 2020 2020  nc)....         
+00028930: 2020 2020 2020 2064 7479 7065 203d 206b         dtype = k
+00028940: 7761 7267 732e 6765 7428 2264 7479 7065  wargs.get("dtype
+00028950: 222c 204e 6f6e 6529 0d0a 2020 2020 2020  ", None)..      
+00028960: 2020 2020 2020 2020 2020 6966 2064 7479            if dty
+00028970: 7065 2069 7320 6e6f 7420 4e6f 6e65 3a0d  pe is not None:.
+00028980: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00028990: 2020 2020 2023 2075 7365 7220 666f 7263       # user forc
+000289a0: 6564 2064 7479 7065 2072 6574 7572 6e20  ed dtype return 
+000289b0: 7661 6c75 650d 0a20 2020 2020 2020 2020  value..         
+000289c0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000289d0: 6e20 6474 7970 6528 7265 7375 6c74 290d  n dtype(result).
+000289e0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+000289f0: 2020 2023 2070 7265 7365 7276 6520 7479     # preserve ty
+00028a00: 7065 2066 6f72 206d 696e 2f6d 6178 2f6e  pe for min/max/n
+00028a10: 616e 6d69 6e2f 6e61 6e6d 6178 0d0a 2020  anmin/nanmax..  
+00028a20: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00028a30: 2072 6564 7563 6546 756e 6320 696e 205b   reduceFunc in [
+00028a40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00028a50: 2020 2020 2020 5245 4455 4345 5f46 554e        REDUCE_FUN
+00028a60: 4354 494f 4e53 2e52 4544 5543 455f 4d49  CTIONS.REDUCE_MI
+00028a70: 4e2c 0d0a 2020 2020 2020 2020 2020 2020  N,..            
+00028a80: 2020 2020 2020 2020 5245 4455 4345 5f46          REDUCE_F
+00028a90: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
+00028aa0: 4e41 4e4d 494e 2c0d 0a20 2020 2020 2020  NANMIN,..       
+00028ab0: 2020 2020 2020 2020 2020 2020 2052 4544               RED
+00028ac0: 5543 455f 4655 4e43 5449 4f4e 532e 5245  UCE_FUNCTIONS.RE
+00028ad0: 4455 4345 5f4d 4158 2c0d 0a20 2020 2020  DUCE_MAX,..     
+00028ae0: 2020 2020 2020 2020 2020 2020 2020 2052                 R
+00028af0: 4544 5543 455f 4655 4e43 5449 4f4e 532e  EDUCE_FUNCTIONS.
+00028b00: 5245 4455 4345 5f4e 414e 4d41 582c 0d0a  REDUCE_NANMAX,..
+00028b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028b20: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
+00028b30: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00028b40: 656c 662e 6474 7970 652e 7479 7065 2872  elf.dtype.type(r
+00028b50: 6573 756c 7429 0d0a 0d0a 2020 2020 2020  esult)....      
+00028b60: 2020 2020 2020 2020 2020 2320 696e 7465            # inte
+00028b70: 726e 616c 6c79 206e 756d 7079 2065 7870  rnally numpy exp
+00028b80: 6563 7473 2061 2064 7479 7065 2072 6574  ects a dtype ret
+00028b90: 7572 6e65 6420 666f 7220 6e61 6e73 7464  urned for nanstd
+00028ba0: 2061 6e64 206f 7468 6572 2063 616c 6375   and other calcu
+00028bb0: 6c61 7469 6f6e 730d 0a20 2020 2020 2020  lations..       
+00028bc0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+00028bd0: 7374 616e 6365 2872 6573 756c 742c 2028  stance(result, (
+00028be0: 696e 742c 206e 702e 696e 7465 6765 7229  int, np.integer)
+00028bf0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00028c00: 2020 2020 2020 2020 2320 666f 7220 7569          # for ui
+00028c10: 6e74 3634 2c20 7468 6520 6869 6768 2062  nt64, the high b
+00028c20: 6974 206d 7573 7420 6265 2070 7265 7365  it must be prese
+00028c30: 7276 6564 0d0a 2020 2020 2020 2020 2020  rved..          
+00028c40: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
+00028c50: 662e 6474 7970 652e 6368 6172 2069 6e20  f.dtype.char in 
+00028c60: 4e75 6d70 7943 6861 7254 7970 6573 2e55  NumpyCharTypes.U
+00028c70: 6e73 6967 6e65 6449 6e74 6567 6572 3634  nsignedInteger64
+00028c80: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00028c90: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00028ca0: 6e20 6e70 2e75 696e 7436 3428 7265 7375  n np.uint64(resu
+00028cb0: 6c74 290d 0a20 2020 2020 2020 2020 2020  lt)..           
+00028cc0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00028cd0: 6e70 2e69 6e74 3634 2872 6573 756c 7429  np.int64(result)
+00028ce0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00028cf0: 2020 2020 7265 7475 726e 206e 702e 666c      return np.fl
+00028d00: 6f61 7436 3428 7265 7375 6c74 290d 0a20  oat64(result).. 
+00028d10: 2020 2020 2020 2023 2063 616c 6c20 7468         # call th
+00028d20: 6520 7665 7273 696f 6e20 6e75 6d70 7920  e version numpy 
+00028d30: 7761 6e74 6564 2075 7365 2074 6f0d 0a20  wanted use to.. 
+00028d40: 2020 2020 2020 2072 6574 7572 6e20 7375         return su
+00028d50: 7065 7228 4661 7374 4172 7261 792c 2073  per(FastArray, s
+00028d60: 656c 6629 2e5f 5f61 7272 6179 5f66 756e  elf).__array_fun
+00028d70: 6374 696f 6e5f 5f28 6675 6e63 2c20 7479  ction__(func, ty
+00028d80: 7065 732c 2061 7267 732c 206b 7761 7267  pes, args, kwarg
+00028d90: 7329 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  s)....    # ----
+00028da0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00028db0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00028dc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00028dd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00028de0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
+00028df0: 205f 6e65 775f 6172 7261 795f 6675 6e63   _new_array_func
+00028e00: 7469 6f6e 2873 656c 662c 2066 756e 633a  tion(self, func:
+00028e10: 2043 616c 6c61 626c 652c 2074 7970 6573   Callable, types
+00028e20: 3a20 7475 706c 652c 2061 7267 733a 2074  : tuple, args: t
+00028e30: 7570 6c65 2c20 6b77 6172 6773 3a20 6469  uple, kwargs: di
+00028e40: 6374 293a 0d0a 2020 2020 2020 2020 2222  ct):..        ""
+00028e50: 220d 0a20 2020 2020 2020 2046 6173 7441  "..        FastA
+00028e60: 7272 6179 2069 6d70 6c65 6d65 6e74 6174  rray implementat
+00028e70: 696f 6e20 6f66 2074 6865 2061 7272 6179  ion of the array
+00028e80: 2066 756e 6374 696f 6e20 7072 6f74 6f63   function protoc
+00028e90: 6f6c 2e0d 0a0d 0a20 2020 2020 2020 2050  ol.....        P
+00028ea0: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
+00028eb0: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
+00028ec0: 2020 2020 2020 2066 756e 633a 2063 616c         func: cal
+00028ed0: 6c61 626c 650d 0a20 2020 2020 2020 2020  lable..         
+00028ee0: 2020 2041 6e20 6361 6c6c 6162 6c65 2065     An callable e
+00028ef0: 7870 6f73 6564 2062 7920 4e75 6d50 79e2  xposed by NumPy.
+00028f00: 8099 7320 7075 626c 6963 2041 5049 2c20  ..s public API, 
+00028f10: 7768 6963 6820 7761 7320 6361 6c6c 6564  which was called
+00028f20: 2069 6e20 7468 6520 666f 726d 2060 6066   in the form ``f
+00028f30: 756e 6328 2a61 7267 732c 202a 2a6b 7761  unc(*args, **kwa
+00028f40: 7267 7329 6060 2e0d 0a20 2020 2020 2020  rgs)``...       
+00028f50: 2074 7970 6573 3a20 7475 706c 650d 0a20   types: tuple.. 
+00028f60: 2020 2020 2020 2020 2020 2041 2074 7570             A tup
+00028f70: 6c65 206f 6620 756e 6971 7565 2061 7267  le of unique arg
+00028f80: 756d 656e 7420 7479 7065 7320 6672 6f6d  ument types from
+00028f90: 2074 6865 206f 7269 6769 6e61 6c20 4e75   the original Nu
+00028fa0: 6d50 7920 6675 6e63 7469 6f6e 2063 616c  mPy function cal
+00028fb0: 6c20 7468 6174 2069 6d70 6c65 6d65 6e74  l that implement
+00028fc0: 2060 605f 5f61 7272 6179 5f66 756e 6374   ``__array_funct
+00028fd0: 696f 6e5f 5f60 602e 0d0a 2020 2020 2020  ion__``...      
+00028fe0: 2020 6172 6773 3a20 7475 706c 650d 0a20    args: tuple.. 
+00028ff0: 2020 2020 2020 2020 2020 2054 6865 2074             The t
+00029000: 7570 6c65 206f 6620 6172 6775 6d65 6e74  uple of argument
+00029010: 7320 7468 6174 2077 696c 6c20 6265 2070  s that will be p
+00029020: 6173 7365 6420 746f 2060 6675 6e63 602e  assed to `func`.
+00029030: 0d0a 2020 2020 2020 2020 6b77 6172 6773  ..        kwargs
+00029040: 3a20 6469 6374 0d0a 2020 2020 2020 2020  : dict..        
+00029050: 2020 2020 5468 6520 6469 6374 696f 6e61      The dictiona
+00029060: 7279 206f 6620 6b65 7977 6f72 6420 6172  ry of keyword ar
+00029070: 6775 6d65 6e74 7320 7468 6174 2077 696c  guments that wil
+00029080: 6c20 6265 2070 6173 7365 6420 746f 2060  l be passed to `
+00029090: 6675 6e63 602e 0d0a 0d0a 2020 2020 2020  func`.....      
+000290a0: 2020 5261 6973 6573 0d0a 2020 2020 2020    Raises..      
+000290b0: 2020 2d2d 2d2d 2d2d 0d0a 2020 2020 2020    ------..      
+000290c0: 2020 5479 7065 4572 726f 720d 0a20 2020    TypeError..   
+000290d0: 2020 2020 2020 2020 2049 6620 6066 756e           If `fun
+000290e0: 6360 2069 7320 6e6f 7420 6f76 6572 7269  c` is not overri
+000290f0: 6464 656e 2062 7920 6120 636f 7272 6573  dden by a corres
+00029100: 706f 6e64 696e 6720 7269 7074 6162 6c65  ponding riptable
+00029110: 2061 7272 6179 2066 756e 6374 696f 6e20   array function 
+00029120: 7468 656e 2061 2054 7970 6545 7272 6f72  then a TypeError
+00029130: 2069 7320 7261 6973 6564 2e0d 0a0d 0a20   is raised..... 
+00029140: 2020 2020 2020 204e 6f74 6573 0d0a 2020         Notes..  
+00029150: 2020 2020 2020 2d2d 2d2d 2d0d 0a20 2020        -----..   
+00029160: 2020 2020 2054 6869 7320 6172 7261 7920       This array 
+00029170: 6675 6e63 7469 6f6e 2069 6d70 6c65 6d65  function impleme
+00029180: 6e74 6174 696f 6e20 7265 7175 6972 6573  ntation requires
+00029190: 2065 6163 6820 636c 6173 732c 2073 7563   each class, suc
+000291a0: 6820 6173 2046 6173 7441 7272 6179 2061  h as FastArray a
+000291b0: 6e64 2061 6e79 206f 7468 6572 2064 6572  nd any other der
+000291c0: 6976 6564 2063 6c61 7373 2c0d 0a20 2020  ived class,..   
+000291d0: 2020 2020 2074 6f20 696d 706c 656d 656e       to implemen
+000291e0: 7420 7468 6569 7220 6f77 6e20 7665 7273  t their own vers
+000291f0: 696f 6e20 6f66 2074 6865 204e 756d 7079  ion of the Numpy
+00029200: 2061 7272 6179 2066 756e 6374 696f 6e20   array function 
+00029210: 4150 492e 2049 6e20 7468 6520 6576 656e  API. In the even
+00029220: 7420 7468 6573 6520 6172 7261 7920 6675  t these array fu
+00029230: 6e63 7469 6f6e 7320 6465 6665 7220 746f  nctions defer to
+00029240: 2074 6865 0d0a 2020 2020 2020 2020 696e   the..        in
+00029250: 6865 7269 7469 6e67 2063 6c61 7373 2074  heriting class t
+00029260: 6865 7920 7769 6c6c 206e 6565 6420 746f  hey will need to
+00029270: 2065 6974 6865 7220 7265 2d77 7261 7020   either re-wrap 
+00029280: 7468 6520 7265 7375 6c74 7320 696e 2074  the results in t
+00029290: 6865 2063 6f72 7265 6374 2074 7970 6520  he correct type 
+000292a0: 6f72 2072 6169 7365 2065 7863 6570 7469  or raise excepti
+000292b0: 6f6e 2069 6620 610d 0a20 2020 2020 2020  on if a..       
+000292c0: 2070 6172 7469 6375 6c61 7220 6f70 6572   particular oper
+000292d0: 6174 696f 6e20 6973 206e 6f74 2077 656c  ation is not wel
+000292e0: 6c2d 6465 6669 6e65 6420 6e6f 7220 6d65  l-defined nor me
+000292f0: 616e 696e 6766 756c 2066 6f72 2074 6865  aningful for the
+00029300: 2064 6572 6976 6564 2063 6c61 7373 2e0d   derived class..
+00029310: 0a20 2020 2020 2020 2049 6620 616e 2061  .        If an a
+00029320: 7272 6179 2066 756e 6374 696f 6e2c 2077  rray function, w
+00029330: 6869 6368 2069 7320 616c 736f 2061 2075  hich is also a u
+00029340: 6e69 7665 7273 616c 2066 756e 6374 696f  niversal functio
+00029350: 6e2c 2069 7320 6e6f 7420 6f76 6572 7269  n, is not overri
+00029360: 6464 656e 2061 7320 616e 2061 7272 6179  dden as an array
+00029370: 2066 756e 6374 696f 6e2c 2062 7574 2064   function, but d
+00029380: 6566 696e 6564 0d0a 2020 2020 2020 2020  efined..        
+00029390: 6173 2061 2075 6675 6e63 2074 6865 6e20  as a ufunc then 
+000293a0: 6974 2077 696c 6c20 6e6f 7420 6265 2063  it will not be c
+000293b0: 616c 6c65 6420 756e 6c65 7373 2069 7420  alled unless it 
+000293c0: 6973 2072 6567 6973 7465 7265 6420 7769  is registered wi
+000293d0: 7468 2074 6865 2061 7272 6179 2066 756e  th the array fun
+000293e0: 6374 696f 6e20 6865 6c70 6572 2073 696e  ction helper sin
+000293f0: 6365 2061 7272 6179 2066 756e 6374 696f  ce array functio
+00029400: 6e0d 0a20 2020 2020 2020 2070 726f 746f  n..        proto
+00029410: 636f 6c20 7461 6b65 7320 7072 696f 7269  col takes priori
+00029420: 7479 206f 7665 7220 7468 6520 756e 6976  ty over the univ
+00029430: 6572 7361 6c20 6675 6e63 7469 6f6e 2070  ersal function p
+00029440: 726f 746f 636f 6c2e 0d0a 0d0a 2020 2020  rotocol.....    
+00029450: 2020 2020 5265 6665 7265 6e63 653a 2060      Reference: `
+00029460: 4e45 5020 3138 2041 7272 6179 2046 756e  NEP 18 Array Fun
+00029470: 6374 696f 6e20 5072 6f74 6f63 6f6c 203c  ction Protocol <
+00029480: 6874 7470 733a 2f2f 6e75 6d70 792e 6f72  https://numpy.or
+00029490: 672f 6e65 7073 2f6e 6570 2d30 3031 382d  g/neps/nep-0018-
+000294a0: 6172 7261 792d 6675 6e63 7469 6f6e 2d70  array-function-p
+000294b0: 726f 746f 636f 6c2e 6874 6d6c 3e60 5f0d  rotocol.html>`_.
+000294c0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+000294d0: 2020 2020 2020 6966 206c 6f67 6765 722e        if logger.
+000294e0: 6973 456e 6162 6c65 6446 6f72 286c 6f67  isEnabledFor(log
+000294f0: 6769 6e67 2e44 4542 5547 293a 0d0a 2020  ging.DEBUG):..  
+00029500: 2020 2020 2020 2020 2020 6c6f 6767 6572            logger
+00029510: 2e64 6562 7567 280d 0a20 2020 2020 2020  .debug(..       
+00029520: 2020 2020 2020 2020 2066 227b 4661 7374           f"{Fast
+00029530: 4172 7261 792e 5f5f 6e61 6d65 5f5f 7d2e  Array.__name__}.
+00029540: 5f6e 6577 5f61 7272 6179 5f66 756e 6374  _new_array_funct
+00029550: 696f 6e28 6675 6e3d 7b66 756e 637d 2c20  ion(fun={func}, 
+00029560: 7479 7065 733d 7b74 7970 6573 7d2c 2061  types={types}, a
+00029570: 7267 733d 7b61 7267 737d 2c20 6b77 6172  rgs={args}, kwar
+00029580: 6773 3d7b 6b77 6172 6773 7d29 220d 0a20  gs={kwargs})".. 
+00029590: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
+000295a0: 2020 2020 2020 2320 6861 6e64 6c65 2060        # handle `
+000295b0: 6675 6e63 6020 6172 6775 6d65 6e74 0d0a  func` argument..
+000295c0: 2020 2020 2020 2020 6172 7261 795f 6675          array_fu
+000295d0: 6e63 3a20 4361 6c6c 6162 6c65 203d 2046  nc: Callable = F
+000295e0: 6173 7441 7272 6179 2e5f 4172 7261 7946  astArray._ArrayF
+000295f0: 756e 6374 696f 6e48 656c 7065 722e 6765  unctionHelper.ge
+00029600: 745f 6172 7261 795f 6675 6e63 7469 6f6e  t_array_function
+00029610: 2866 756e 6329 0d0a 2020 2020 2020 2020  (func)..        
+00029620: 6966 2061 7272 6179 5f66 756e 6320 6973  if array_func is
+00029630: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00029640: 2020 2020 2320 6661 6c6c 6261 636b 2074      # fallback t
+00029650: 6f20 6e75 6d70 7920 666f 7220 756e 6861  o numpy for unha
+00029660: 6e64 6c65 6420 6172 7261 7920 6675 6e63  ndled array func
+00029670: 7469 6f6e 7320 616e 6420 6174 7465 6d70  tions and attemp
+00029680: 7420 746f 2063 6173 7420 6261 636b 2074  t to cast back t
+00029690: 6f20 4661 7374 4172 7261 790d 0a20 2020  o FastArray..   
+000296a0: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+000296b0: 3d20 7375 7065 7228 292e 5f5f 6172 7261  = super().__arra
+000296c0: 795f 6675 6e63 7469 6f6e 5f5f 2866 756e  y_function__(fun
+000296d0: 632c 2074 7970 6573 2c20 6172 6773 2c20  c, types, args, 
+000296e0: 6b77 6172 6773 290d 0a20 2020 2020 2020  kwargs)..       
+000296f0: 2020 2020 2069 6620 7265 7375 6c74 2069       if result i
+00029700: 7320 4e6f 7449 6d70 6c65 6d65 6e74 6564  s NotImplemented
+00029710: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00029720: 2020 2072 6574 7572 6e20 4e6f 7449 6d70     return NotImp
+00029730: 6c65 6d65 6e74 6564 0d0a 2020 2020 2020  lemented..      
+00029740: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
+00029750: 7461 6e63 6528 7265 7375 6c74 2c20 6e70  tance(result, np
+00029760: 2e6e 6461 7272 6179 293a 0d0a 2020 2020  .ndarray):..    
+00029770: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00029780: 726e 2072 6573 756c 742e 7669 6577 2846  rn result.view(F
+00029790: 6173 7441 7272 6179 290d 0a20 2020 2020  astArray)..     
+000297a0: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
+000297b0: 7374 616e 6365 2872 6573 756c 742c 206c  stance(result, l
+000297c0: 6973 7429 3a0d 0a20 2020 2020 2020 2020  ist):..         
+000297d0: 2020 2020 2020 2072 6574 7572 6e20 5b28         return [(
+000297e0: 782e 7669 6577 2846 6173 7441 7272 6179  x.view(FastArray
+000297f0: 2920 6966 2069 7369 6e73 7461 6e63 6528  ) if isinstance(
+00029800: 782c 206e 702e 6e64 6172 7261 7929 2065  x, np.ndarray) e
+00029810: 6c73 6520 7829 2066 6f72 2078 2069 6e20  lse x) for x in 
+00029820: 7265 7375 6c74 5d0d 0a20 2020 2020 2020  result]..       
+00029830: 2020 2020 2065 6c69 6620 6973 696e 7374       elif isinst
+00029840: 616e 6365 2872 6573 756c 742c 2074 7570  ance(result, tup
+00029850: 6c65 293a 0d0a 2020 2020 2020 2020 2020  le):..          
+00029860: 2020 2020 2020 7265 7475 726e 2074 7570        return tup
+00029870: 6c65 285b 2878 2e76 6965 7728 4661 7374  le([(x.view(Fast
+00029880: 4172 7261 7929 2069 6620 6973 696e 7374  Array) if isinst
+00029890: 616e 6365 2878 2c20 6e70 2e6e 6461 7272  ance(x, np.ndarr
+000298a0: 6179 2920 656c 7365 2078 2920 666f 7220  ay) else x) for 
+000298b0: 7820 696e 2072 6573 756c 745d 290d 0a20  x in result]).. 
+000298c0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+000298d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000298e0: 2020 2320 556e 6b6e 6f77 6e20 7265 7375    # Unknown resu
+000298f0: 6c74 2074 7970 652e 0d0a 2020 2020 2020  lt type...      
+00029900: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00029910: 5479 7065 4572 726f 7228 6622 556e 6b6e  TypeError(f"Unkn
+00029920: 6f77 6e20 7265 7375 6c74 2074 7970 6520  own result type 
+00029930: 277b 7479 7065 2872 6573 756c 7429 7d27  '{type(result)}'
+00029940: 2072 6574 7572 6e65 6420 6279 206e 6461   returned by nda
+00029950: 7272 6179 2e7b 6675 6e63 7d2e 2229 0d0a  rray.{func}.")..
+00029960: 0d0a 2020 2020 2020 2020 2320 6861 6e64  ..        # hand
+00029970: 6c65 2060 7479 7065 7360 2061 7267 756d  le `types` argum
+00029980: 656e 740d 0a20 2020 2020 2020 2061 7272  ent..        arr
+00029990: 6179 5f66 756e 635f 7479 7065 5f63 6865  ay_func_type_che
+000299a0: 636b 3a20 4361 6c6c 6162 6c65 203d 2046  ck: Callable = F
+000299b0: 6173 7441 7272 6179 2e5f 4172 7261 7946  astArray._ArrayF
+000299c0: 756e 6374 696f 6e48 656c 7065 722e 6765  unctionHelper.ge
+000299d0: 745f 6172 7261 795f 6675 6e63 7469 6f6e  t_array_function
+000299e0: 5f74 7970 655f 636f 6d70 6174 6962 696c  _type_compatibil
+000299f0: 6974 795f 6368 6563 6b28 0d0a 2020 2020  ity_check(..    
+00029a00: 2020 2020 2020 2020 6675 6e63 0d0a 2020          func..  
+00029a10: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+00029a20: 2069 6620 6172 7261 795f 6675 6e63 5f74   if array_func_t
+00029a30: 7970 655f 6368 6563 6b20 6973 204e 6f6e  ype_check is Non
+00029a40: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00029a50: 2320 6e6f 2063 7573 746f 6d20 7479 7065  # no custom type
+00029a60: 2063 6f6d 7061 7469 6269 6c69 7479 2063   compatibility c
+00029a70: 6865 636b 3b20 6465 6661 756c 7420 7479  heck; default ty
+00029a80: 7065 2063 6f6d 7061 7469 6269 6c69 7479  pe compatibility
+00029a90: 2063 6865 636b 0d0a 2020 2020 2020 2020   check..        
+00029aa0: 2020 2020 2320 7468 6973 2061 6c6c 6f77      # this allow
+00029ab0: 7320 7375 6263 6c61 7373 6573 2074 6861  s subclasses tha
+00029ac0: 7420 646f 6e27 7420 6f76 6572 7269 6465  t don't override
+00029ad0: 205f 5f61 7272 6179 5f66 756e 6374 696f   __array_functio
+00029ae0: 6e5f 5f20 746f 2068 616e 646c 6520 4661  n__ to handle Fa
+00029af0: 7374 4172 7261 7920 6f62 6a65 6374 730d  stArray objects.
+00029b00: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00029b10: 2074 7970 2069 6e20 7479 7065 733a 0d0a   typ in types:..
+00029b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029b30: 6966 206e 6f74 2069 7373 7562 636c 6173  if not issubclas
+00029b40: 7328 7479 702c 2046 6173 7441 7272 6179  s(typ, FastArray
+00029b50: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00029b60: 2020 2020 2020 2020 6966 206c 6f67 6765          if logge
+00029b70: 722e 6973 456e 6162 6c65 6446 6f72 286c  r.isEnabledFor(l
+00029b80: 6f67 6769 6e67 2e44 4542 5547 293a 0d0a  ogging.DEBUG):..
+00029b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029ba0: 2020 2020 2020 2020 6c6f 6767 6572 2e64          logger.d
+00029bb0: 6562 7567 2866 227b 4661 7374 4172 7261  ebug(f"{FastArra
+00029bc0: 792e 5f5f 6e61 6d65 5f5f 7d2e 5f5f 6172  y.__name__}.__ar
+00029bd0: 7261 795f 6675 6e63 7469 6f6e 5f5f 3a20  ray_function__: 
+00029be0: 756e 7375 7070 6f72 7465 6420 7479 7065  unsupported type
+00029bf0: 207b 7265 7072 2874 7970 297d 2229 0d0a   {repr(typ)}")..
+00029c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029c10: 2020 2020 7265 7475 726e 204e 6f74 496d      return NotIm
+00029c20: 706c 656d 656e 7465 640d 0a20 2020 2020  plemented..     
+00029c30: 2020 2065 6c73 653a 2020 2320 6375 7374     else:  # cust
+00029c40: 6f6d 2074 7970 6520 636f 6d70 6174 6962  om type compatib
+00029c50: 696c 6974 7920 6368 6563 6b0d 0a20 2020  ility check..   
+00029c60: 2020 2020 2020 2020 2076 616c 6964 3a20           valid: 
+00029c70: 626f 6f6c 203d 2061 7272 6179 5f66 756e  bool = array_fun
+00029c80: 635f 7479 7065 5f63 6865 636b 2874 7970  c_type_check(typ
+00029c90: 6573 290d 0a20 2020 2020 2020 2020 2020  es)..           
+00029ca0: 2069 6620 6e6f 7420 7661 6c69 643a 0d0a   if not valid:..
+00029cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029cc0: 6966 206c 6f67 6765 722e 6973 456e 6162  if logger.isEnab
+00029cd0: 6c65 6446 6f72 286c 6f67 6769 6e67 2e44  ledFor(logging.D
+00029ce0: 4542 5547 293a 0d0a 2020 2020 2020 2020  EBUG):..        
+00029cf0: 2020 2020 2020 2020 2020 2020 6c6f 6767              logg
+00029d00: 6572 2e64 6562 7567 2866 227b 4661 7374  er.debug(f"{Fast
+00029d10: 4172 7261 792e 5f5f 6e61 6d65 5f5f 7d2e  Array.__name__}.
+00029d20: 5f5f 6172 7261 795f 6675 6e63 7469 6f6e  __array_function
+00029d30: 5f5f 3a20 756e 7375 7070 6f72 7465 6420  __: unsupported 
+00029d40: 7479 7065 2069 6e20 7b72 6570 7228 7479  type in {repr(ty
+00029d50: 7065 7329 7d22 290d 0a20 2020 2020 2020  pes)}")..       
+00029d60: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00029d70: 4e6f 7449 6d70 6c65 6d65 6e74 6564 0d0a  NotImplemented..
+00029d80: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00029d90: 2061 7272 6179 5f66 756e 6328 2a61 7267   array_func(*arg
+00029da0: 732c 202a 2a6b 7761 7267 7329 0d0a 0d0a  s, **kwargs)....
+00029db0: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00029dc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00029dd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00029de0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00029df0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00029e00: 2d0d 0a20 2020 2064 6566 205f 5f61 7272  -..    def __arr
+00029e10: 6179 5f75 6675 6e63 5f5f 2873 656c 662c  ay_ufunc__(self,
+00029e20: 2075 6675 6e63 3a20 4361 6c6c 6162 6c65   ufunc: Callable
+00029e30: 2c20 6d65 7468 6f64 3a20 7374 722c 202a  , method: str, *
+00029e40: 696e 7075 7473 3a20 416e 792c 202a 2a6b  inputs: Any, **k
+00029e50: 7761 7267 733a 2041 6e79 293a 0d0a 2020  wargs: Any):..  
+00029e60: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+00029e70: 2020 2054 6865 2046 6173 7441 7272 6179     The FastArray
+00029e80: 2075 6e69 7665 7273 616c 2066 756e 6374   universal funct
+00029e90: 696f 6e20 286f 7220 7566 756e 6329 206f  ion (or ufunc) o
+00029ea0: 7665 7272 6964 6520 6f66 6665 7273 206d  verride offers m
+00029eb0: 756c 7469 7468 7265 6164 6564 2043 2f43  ultithreaded C/C
+00029ec0: 2b2b 2069 6d70 6c65 6d65 6e74 6174 696f  ++ implementatio
+00029ed0: 6e20 6174 2074 6865 2052 6970 7469 6465  n at the Riptide
+00029ee0: 4350 5020 6c61 7965 722e 0d0a 0d0a 2020  CPP layer.....  
+00029ef0: 2020 2020 2020 5768 656e 2046 6173 7441        When FastA
+00029f00: 7272 6179 2072 6563 6569 7665 7320 6120  rray receives a 
+00029f10: 6075 6675 6e63 6020 6361 6c6c 6162 6c65  `ufunc` callable
+00029f20: 2069 7420 7769 6c6c 2061 7474 656d 7074   it will attempt
+00029f30: 2074 6f20 6861 6e64 6c65 2069 7420 696e   to handle it in
+00029f40: 2070 7269 6f72 6974 7920 6f72 6465 723a   priority order:
+00029f50: 0d0a 2020 2020 2020 2020 2020 2020 312e  ..            1.
+00029f60: 2063 6f6e 7369 6465 7269 6e67 2060 6046   considering ``F
+00029f70: 6173 7441 7272 6179 6060 2060 6046 6173  astArray`` ``Fas
+00029f80: 7446 756e 6374 696f 6e60 6020 6973 2065  tFunction`` is e
+00029f90: 6e61 626c 6564 2c20 7566 756e 6320 6973  nabled, ufunc is
+00029fa0: 2068 616e 646c 6564 2062 7920 616e 2065   handled by an e
+00029fb0: 7870 6c69 6369 7420 7566 756e 6320 6f76  xplicit ufunc ov
+00029fc0: 6572 7269 6465 2c20 6f74 6865 7277 6973  erride, otherwis
+00029fd0: 650d 0a20 2020 2020 2020 2020 2020 2032  e..            2
+00029fe0: 2e20 7566 756e 6320 6973 2068 616e 646c  . ufunc is handl
+00029ff0: 6564 2061 7420 7468 6520 5269 7074 6162  ed at the Riptab
+0002a000: 6c65 202f 204e 756d 7079 2041 5049 206f  le / Numpy API o
+0002a010: 7665 7272 6964 6573 206c 6576 656c 2c20  verrides level, 
+0002a020: 6f74 6865 7277 6973 650d 0a20 2020 2020  otherwise..     
+0002a030: 2020 2020 2020 2033 2e20 7566 756e 6320         3. ufunc 
+0002a040: 6973 2068 616e 646c 6564 2061 7420 7468  is handled at th
+0002a050: 6520 4e75 6d70 7920 4150 4920 6c65 7665  e Numpy API leve
+0002a060: 6c2e 0d0a 0d0a 2020 2020 2020 2020 4769  l.....        Gi
+0002a070: 7665 6e20 6120 636f 6d62 696e 6174 696f  ven a combinatio
+0002a080: 6e20 6f66 2060 7566 756e 6360 2c20 6069  n of `ufunc`, `i
+0002a090: 6e70 7574 7360 2c20 616e 6420 606b 7761  nputs`, and `kwa
+0002a0a0: 7267 7360 2c20 6966 206e 6569 7468 6572  rgs`, if neither
+0002a0b0: 206f 6620 7468 6520 6166 6f72 656d 656e   of the aforemen
+0002a0c0: 7469 6f6e 6564 2063 6173 6573 2073 7570  tioned cases sup
+0002a0d0: 706f 7274 2074 6869 730d 0a20 2020 2020  port this..     
+0002a0e0: 2020 2074 6865 6e20 6120 7761 726e 696e     then a warnin
+0002a0f0: 6720 6973 2065 6d69 7474 6564 2e0d 0a0d  g is emitted....
+0002a100: 0a20 2020 2020 2020 2054 6865 2066 6f6c  .        The fol
+0002a110: 6c6f 7769 6e67 2072 6566 6572 656e 6365  lowing reference
+0002a120: 7320 746f 2073 7570 706f 7274 6564 2075  s to supported u
+0002a130: 6675 6e63 7320 6172 6520 6772 6f75 7065  funcs are groupe
+0002a140: 6420 6279 206d 6574 686f 6420 7479 7065  d by method type
+0002a150: 2e0d 0a20 2020 2020 2020 2020 2020 202d  ...            -
+0002a160: 2046 6f72 2060 6d65 7468 6f64 6020 7479   For `method` ty
+0002a170: 7065 2060 6072 6564 7563 6560 602c 2073  pe ``reduce``, s
+0002a180: 6565 2060 6067 5265 6475 6365 5546 756e  ee ``gReduceUFun
+0002a190: 6373 6060 2e0d 0a20 2020 2020 2020 2020  cs``...         
+0002a1a0: 2020 202d 2046 6f72 2060 6d65 7468 6f64     - For `method
+0002a1b0: 6020 7479 7065 2060 605f 5f63 616c 6c5f  ` type ``__call_
+0002a1c0: 5f60 602c 2073 6565 2060 6067 4269 6e61  _``, see ``gBina
+0002a1d0: 7279 5546 756e 6373 6060 2c20 6060 6742  ryUFuncs``, ``gB
+0002a1e0: 696e 6172 794c 6f67 6963 616c 5546 756e  inaryLogicalUFun
+0002a1f0: 6373 6060 2c20 6060 6742 696e 6172 7942  cs``, ``gBinaryB
+0002a200: 6974 7769 7365 5546 756e 6373 6060 2c20  itwiseUFuncs``, 
+0002a210: 616e 6420 6060 6755 6e61 7279 5546 756e  and ``gUnaryUFun
+0002a220: 6373 6060 2e0d 0a20 2020 2020 2020 2020  cs``...         
+0002a230: 2020 202d 2046 6f72 2060 6d65 7468 6f64     - For `method
+0002a240: 6020 7479 7065 2060 6061 7460 6020 7265  ` type ``at`` re
+0002a250: 7475 726e 2060 604e 6f6e 6560 602e 0d0a  turn ``None``...
+0002a260: 0d0a 2020 2020 2020 2020 4966 2060 6f75  ..        If `ou
+0002a270: 7460 2061 7267 756d 656e 7420 6973 2073  t` argument is s
+0002a280: 7065 6369 6669 6564 2c20 7468 656e 2061  pecified, then a
+0002a290: 6e20 6578 7472 6120 6172 7261 7920 636f  n extra array co
+0002a2a0: 7079 2069 7320 7065 7266 6f72 6d65 6420  py is performed 
+0002a2b0: 6f6e 2074 6865 2072 6573 756c 7420 6f66  on the result of
+0002a2c0: 2074 6865 2075 6675 6e63 2063 6f6d 7075   the ufunc compu
+0002a2d0: 7461 7469 6f6e 2e0d 0a0d 0a20 2020 2020  tation.....     
+0002a2e0: 2020 2049 6620 6120 6064 7479 7065 6020     If a `dtype` 
+0002a2f0: 6b65 7977 6f72 6420 6973 2073 7065 6369  keyword is speci
+0002a300: 6669 6564 2c20 616c 6c20 6566 666f 7274  fied, all effort
+0002a310: 7320 6172 6520 6d61 6465 2074 6f20 7265  s are made to re
+0002a320: 7370 6563 7420 7468 6520 6064 7479 7065  spect the `dtype
+0002a330: 6020 6f6e 2074 6865 2072 6573 756c 7420  ` on the result 
+0002a340: 6f66 2074 6865 2063 6f6d 7075 7461 7469  of the computati
+0002a350: 6f6e 2e0d 0a0d 0a20 2020 2020 2020 2050  on.....        P
+0002a360: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
+0002a370: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
+0002a380: 2020 2020 2020 2075 6675 6e63 203a 2063         ufunc : c
+0002a390: 616c 6c61 626c 650d 0a20 2020 2020 2020  allable..       
+0002a3a0: 2020 2020 2054 6865 2075 6675 6e63 206f       The ufunc o
+0002a3b0: 626a 6563 7420 7468 6174 2077 6173 2063  bject that was c
+0002a3c0: 616c 6c65 642e 0d0a 2020 2020 2020 2020  alled...        
+0002a3d0: 6d65 7468 6f64 203a 2073 7472 0d0a 2020  method : str..  
+0002a3e0: 2020 2020 2020 2020 2020 4120 7374 7269            A stri
+0002a3f0: 6e67 2069 6e64 6963 6174 696e 6720 7768  ng indicating wh
+0002a400: 6963 6820 5566 756e 6320 6d65 7468 6f64  ich Ufunc method
+0002a410: 2077 6173 2063 616c 6c65 6420 286f 6e65   was called (one
+0002a420: 206f 6620 225f 5f63 616c 6c5f 5f22 2c20   of "__call__", 
+0002a430: 2272 6564 7563 6522 2c20 2272 6564 7563  "reduce", "reduc
+0002a440: 6561 7422 2c20 2261 6363 756d 756c 6174  eat", "accumulat
+0002a450: 6522 2c20 226f 7574 6572 222c 2022 696e  e", "outer", "in
+0002a460: 6e65 7222 292e 0d0a 2020 2020 2020 2020  ner")...        
+0002a470: 696e 7075 7473 0d0a 2020 2020 2020 2020  inputs..        
+0002a480: 2020 2020 4120 7475 706c 6520 6f66 2074      A tuple of t
+0002a490: 6865 2069 6e70 7574 2061 7267 756d 656e  he input argumen
+0002a4a0: 7473 2074 6f20 7468 6520 7566 756e 632e  ts to the ufunc.
+0002a4b0: 0d0a 2020 2020 2020 2020 6b77 6172 6773  ..        kwargs
+0002a4c0: 0d0a 2020 2020 2020 2020 2020 2020 4120  ..            A 
+0002a4d0: 6469 6374 696f 6e61 7279 2063 6f6e 7461  dictionary conta
+0002a4e0: 696e 696e 6720 7468 6520 6f70 7469 6f6e  ining the option
+0002a4f0: 616c 2069 6e70 7574 2061 7267 756d 656e  al input argumen
+0002a500: 7473 206f 6620 7468 6520 7566 756e 632e  ts of the ufunc.
+0002a510: 2049 6620 6769 7665 6e2c 2061 6e79 206f   If given, any o
+0002a520: 7574 2061 7267 756d 656e 7473 2c20 626f  ut arguments, bo
+0002a530: 7468 2070 6f73 6974 696f 6e61 6c20 616e  th positional an
+0002a540: 6420 6b65 7977 6f72 642c 2061 7265 2070  d keyword, are p
+0002a550: 6173 7365 6420 6173 2061 2074 7570 6c65  assed as a tuple
+0002a560: 2069 6e20 6b77 6172 6773 2e0d 0a0d 0a20   in kwargs..... 
+0002a570: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+0002a580: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+0002a590: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
+0002a5a0: 206d 6574 686f 6420 7368 6f75 6c64 2072   method should r
+0002a5b0: 6574 7572 6e20 6569 7468 6572 2074 6865  eturn either the
+0002a5c0: 2072 6573 756c 7420 6f66 2074 6865 206f   result of the o
+0002a5d0: 7065 7261 7469 6f6e 2c20 6f72 204e 6f74  peration, or Not
+0002a5e0: 496d 706c 656d 656e 7465 6420 6966 2074  Implemented if t
+0002a5f0: 6865 206f 7065 7261 7469 6f6e 2072 6571  he operation req
+0002a600: 7565 7374 6564 2069 7320 6e6f 7420 696d  uested is not im
+0002a610: 706c 656d 656e 7465 642e 0d0a 0d0a 2020  plemented.....  
+0002a620: 2020 2020 2020 4e6f 7465 730d 0a20 2020        Notes..   
+0002a630: 2020 2020 202d 2d2d 2d2d 0d0a 2020 2020       -----..    
+0002a640: 2020 2020 5468 6520 6375 7272 656e 7420      The current 
+0002a650: 696d 706c 656d 656e 7461 7469 6f6e 2064  implementation d
+0002a660: 6f65 7320 6e6f 7420 7375 7070 6f72 7420  oes not support 
+0002a670: 7468 6520 666f 6c6c 6f77 696e 6720 6b65  the following ke
+0002a680: 7977 6f72 6420 6172 6775 6d65 6e74 733a  yword arguments:
+0002a690: 2060 6361 7374 696e 6760 2c20 6073 6967   `casting`, `sig
+0002a6a0: 602c 2060 7369 676e 6174 7572 6560 2c20  `, `signature`, 
+0002a6b0: 616e 640d 0a20 2020 2020 2020 2060 636f  and..        `co
+0002a6c0: 7265 5f73 6967 6e61 7475 7265 602e 0d0a  re_signature`...
+0002a6d0: 0d0a 2020 2020 2020 2020 4974 2068 6173  ..        It has
+0002a6e0: 2070 6172 7469 616c 2073 7570 706f 7274   partial support
+0002a6f0: 2066 6f72 206b 6579 776f 7264 2061 7267   for keyword arg
+0002a700: 756d 656e 7473 3a20 6077 6865 7265 602c  uments: `where`,
+0002a710: 2060 6178 6973 602c 2061 6e64 2060 6178   `axis`, and `ax
+0002a720: 6573 602c 2069 6620 7468 6579 206d 6174  es`, if they mat
+0002a730: 6368 0d0a 2020 2020 2020 2020 7468 6520  ch..        the 
+0002a740: 6465 6661 756c 7420 7661 6c75 6573 2e0d  default values..
+0002a750: 0a0d 0a20 2020 2020 2020 2049 6620 4661  ...        If Fa
+0002a760: 7374 4172 7261 7927 7320 6060 5761 726e  stArray's ``Warn
+0002a770: 696e 674c 6576 656c 6060 2069 7320 656e  ingLevel`` is en
+0002a780: 6162 6c65 642c 2074 6865 6e20 7761 726e  abled, then warn
+0002a790: 696e 6773 2077 696c 6c20 6265 2065 6d69  ings will be emi
+0002a7a0: 7474 6564 2069 6620 616e 7920 6f66 2075  tted if any of u
+0002a7b0: 6e73 7570 706f 7274 6564 206f 7220 7061  nsupported or pa
+0002a7c0: 7274 6961 6c6c 790d 0a20 2020 2020 2020  rtially..       
+0002a7d0: 2073 7570 706f 7274 6564 206b 6579 776f   supported keywo
+0002a7e0: 7264 2061 7267 756d 656e 7473 2061 7265  rd arguments are
+0002a7f0: 2070 6173 7365 642e 0d0a 0d0a 2020 2020   passed.....    
+0002a800: 2020 2020 544f 444f 2064 6f63 756d 656e      TODO documen
+0002a810: 7420 6375 7374 6f6d 2075 7020 6361 7374  t custom up cast
+0002a820: 696e 6720 7275 6c65 732e 0d0a 0d0a 2020  ing rules.....  
+0002a830: 2020 2020 2020 5365 6520 416c 736f 0d0a        See Also..
+0002a840: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+0002a850: 0d0a 2020 2020 2020 2020 466f 7220 6d6f  ..        For mo
+0002a860: 7265 2069 6e66 6f72 6d61 7469 6f6e 206f  re information o
+0002a870: 6e20 7566 756e 6320 7365 6520 7468 6520  n ufunc see the 
+0002a880: 666f 6c6c 6f77 696e 6720 6e75 6d70 7920  following numpy 
+0002a890: 646f 6375 6d65 6e74 733a 0d0a 2020 2020  documents:..    
+0002a8a0: 2020 2020 2020 2020 2d20 6874 7470 733a          - https:
+0002a8b0: 2f2f 6e75 6d70 792e 6f72 672f 646f 632f  //numpy.org/doc/
+0002a8c0: 7374 6162 6c65 2f72 6566 6572 656e 6365  stable/reference
+0002a8d0: 2f61 7272 6179 732e 636c 6173 7365 732e  /arrays.classes.
+0002a8e0: 6874 6d6c 236e 756d 7079 2e63 6c61 7373  html#numpy.class
+0002a8f0: 2e5f 5f61 7272 6179 5f75 6675 6e63 5f5f  .__array_ufunc__
+0002a900: 0d0a 2020 2020 2020 2020 2020 2020 2d20  ..            - 
+0002a910: 6874 7470 733a 2f2f 6e75 6d70 792e 6f72  https://numpy.or
+0002a920: 672f 646f 632f 7374 6162 6c65 2f72 6566  g/doc/stable/ref
+0002a930: 6572 656e 6365 2f75 6675 6e63 732e 6874  erence/ufuncs.ht
+0002a940: 6d6c 0d0a 0d0a 2020 2020 2020 2020 4e6f  ml....        No
+0002a950: 7465 2c20 7468 6520 646f 6373 7472 696e  te, the docstrin
+0002a960: 6720 5061 7261 6d65 7465 7273 2061 6e64  g Parameters and
+0002a970: 2052 6574 7572 6e20 7365 6374 696f 6e20   Return section 
+0002a980: 6973 2072 6570 6561 7465 6420 6672 6f6d  is repeated from
+0002a990: 2074 6865 206e 756d 7079 0d0a 2020 2020   the numpy..    
+0002a9a0: 2020 2020 605f 5f61 7272 6179 5f75 6675      `__array_ufu
+0002a9b0: 6e63 5f5f 6020 646f 6373 7472 696e 6720  nc__` docstring 
+0002a9c0: 7369 6e63 6520 7468 6973 2069 7320 6f76  since this is ov
+0002a9d0: 6572 7269 6469 6e67 2074 6861 7420 6d65  erriding that me
+0002a9e0: 7468 6f64 2e0d 0a20 2020 2020 2020 2022  thod...        "
+0002a9f0: 2222 0d0a 2020 2020 2020 2020 2320 544f  ""..        # TO
+0002aa00: 444f 2063 6f6e 7369 6465 7220 7573 696e  DO consider usin
+0002aa10: 6720 7479 7065 2061 6e6e 6f74 6174 696f  g type annotatio
+0002aa20: 6e20 7479 7069 6e67 2e46 696e 616c 2066  n typing.Final f
+0002aa30: 6f72 2074 6865 7365 2072 6561 642d 6f6e  or these read-on
+0002aa40: 6c79 2076 6172 6961 626c 6573 2077 6865  ly variables whe
+0002aa50: 6e20 6d6f 7669 6e67 2074 6f20 5079 7468  n moving to Pyth
+0002aa60: 6f6e 2033 2e38 0d0a 2020 2020 2020 2020  on 3.8..        
+0002aa70: 2320 5079 7468 6f6e 2033 2e38 2061 6464  # Python 3.8 add
+0002aa80: 6564 2073 7570 706f 7274 2066 6f72 2074  ed support for t
+0002aa90: 7970 696e 672e 4669 6e61 6c2e 2046 696e  yping.Final. Fin
+0002aaa0: 616c 2077 696c 6c20 6361 7463 6820 756e  al will catch un
+0002aab0: 696e 7465 6e64 6564 2061 7373 6967 6e6d  intended assignm
+0002aac0: 656e 7473 2066 6f72 2063 6f6e 7374 616e  ents for constan
+0002aad0: 7473 2077 6865 6e20 7275 6e6e 696e 670d  ts when running.
+0002aae0: 0a20 2020 2020 2020 2023 2073 7461 7469  .        # stati
+0002aaf0: 6320 7479 7065 2063 6865 636b 6572 7320  c type checkers 
+0002ab00: 7375 6368 2061 7320 6d79 7079 2e0d 0a20  such as mypy... 
+0002ab10: 2020 2020 2020 205f 554e 5355 5050 4f52         _UNSUPPOR
+0002ab20: 5445 445f 4b45 5957 4f52 4453 3a20 5475  TED_KEYWORDS: Tu
+0002ab30: 706c 655b 7374 722c 2073 7472 2c20 7374  ple[str, str, st
+0002ab40: 722c 2073 7472 5d20 3d20 2822 6361 7374  r, str] = ("cast
+0002ab50: 696e 6722 2c20 2273 6967 222c 2022 7369  ing", "sig", "si
+0002ab60: 676e 6174 7572 6522 2c20 2263 6f72 655f  gnature", "core_
+0002ab70: 7369 676e 6174 7572 6522 290d 0a20 2020  signature")..   
+0002ab80: 2020 2020 205f 5041 5254 4941 4c4c 595f       _PARTIALLY_
+0002ab90: 5355 5050 4f52 5445 445f 4b45 5957 4f52  SUPPORTED_KEYWOR
+0002aba0: 4453 5f54 4f5f 4445 4641 554c 5453 3a20  DS_TO_DEFAULTS: 
+0002abb0: 4d61 7070 696e 675b 7374 722c 2055 6e69  Mapping[str, Uni
+0002abc0: 6f6e 5b4e 6f6e 652c 2062 6f6f 6c5d 5d20  on[None, bool]] 
+0002abd0: 3d20 7b0d 0a20 2020 2020 2020 2020 2020  = {..           
+0002abe0: 2022 7768 6572 6522 3a20 5472 7565 2c0d   "where": True,.
+0002abf0: 0a20 2020 2020 2020 2020 2020 2022 6178  .            "ax
+0002ac00: 6973 223a 204e 6f6e 652c 0d0a 2020 2020  is": None,..    
+0002ac10: 2020 2020 2020 2020 2261 7865 7322 3a20          "axes": 
+0002ac20: 4e6f 6e65 2c0d 0a20 2020 2020 2020 207d  None,..        }
+0002ac30: 0d0a 2020 2020 2020 2020 746f 706c 6576  ..        toplev
+0002ac40: 656c 5f61 626f 7274 3a20 626f 6f6c 203d  el_abort: bool =
+0002ac50: 2046 616c 7365 0d0a 0d0a 2020 2020 2020   False....      
+0002ac60: 2020 6966 2046 6173 7441 7272 6179 2e56    if FastArray.V
+0002ac70: 6572 626f 7365 203e 2032 3a0d 0a20 2020  erbose > 2:..   
+0002ac80: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
+0002ac90: 2a2a 2a20 746f 7020 6c65 7665 6c20 6172  *** top level ar
+0002aca0: 7261 795f 7566 756e 6322 2c20 7566 756e  ray_ufunc", ufun
+0002acb0: 632c 206d 6574 686f 642c 202a 696e 7075  c, method, *inpu
+0002acc0: 7473 2c20 6b77 6172 6773 290d 0a0d 0a20  ts, kwargs).... 
+0002acd0: 2020 2020 2020 2023 2066 6c69 7020 616e         # flip an
+0002ace0: 7920 696e 7075 7473 2074 6861 7420 6172  y inputs that ar
+0002acf0: 6520 6661 7374 6172 7261 7973 2062 6163  e fastarrays bac
+0002ad00: 6b20 746f 2061 6e20 6e64 6172 7261 792e  k to an ndarray.
+0002ad10: 2e2e 0d0a 2020 2020 2020 2020 6172 6773  ....        args
+0002ad20: 3a20 4c69 7374 5b41 6e79 5d20 3d20 5b5d  : List[Any] = []
+0002ad30: 0d0a 2020 2020 2020 2020 666f 7220 696e  ..        for in
+0002ad40: 7075 7420 696e 2069 6e70 7574 733a 0d0a  put in inputs:..
+0002ad50: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0002ad60: 7369 6e73 7461 6e63 6528 696e 7075 742c  sinstance(input,
+0002ad70: 206e 702e 6e64 6172 7261 7929 3a0d 0a20   np.ndarray):.. 
+0002ad80: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002ad90: 735f 6e6f 745f 7375 7070 6f72 7465 6420  s_not_supported 
+0002ada0: 3d20 7365 6c66 2e5f 6973 5f6e 6f74 5f73  = self._is_not_s
+0002adb0: 7570 706f 7274 6564 2869 6e70 7574 290d  upported(input).
+0002adc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002add0: 2069 6620 6973 5f6e 6f74 5f73 7570 706f   if is_not_suppo
+0002ade0: 7274 6564 3a0d 0a20 2020 2020 2020 2020  rted:..         
+0002adf0: 2020 2020 2020 2020 2020 2023 2054 4f44             # TOD
+0002ae00: 4f20 656e 6162 6c65 2074 6869 7320 7761  O enable this wa
+0002ae10: 726e 696e 6720 696e 2061 2066 7574 7572  rning in a futur
+0002ae20: 6520 6d69 6e6f 7220 7265 6c65 6173 650d  e minor release.
+0002ae30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002ae40: 2020 2020 2023 2046 6173 7441 7272 6179       # FastArray
+0002ae50: 2e5f 706f 7373 6962 6c79 5f77 6172 6e28  ._possibly_warn(
+0002ae60: 6627 5f5f 6172 7261 795f 7566 756e 635f  f'__array_ufunc_
+0002ae70: 5f3a 2075 6e73 7570 706f 7274 6564 2069  _: unsupported i
+0002ae80: 6e70 7574 2022 7b69 6e70 7574 7d22 2729  nput "{input}"')
+0002ae90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002aea0: 2020 2020 2020 746f 706c 6576 656c 5f61        toplevel_a
+0002aeb0: 626f 7274 207c 3d20 6973 5f6e 6f74 5f73  bort |= is_not_s
+0002aec0: 7570 706f 7274 6564 0d0a 2020 2020 2020  upported..      
+0002aed0: 2020 2020 2020 6172 6773 2e61 7070 656e        args.appen
+0002aee0: 6428 696e 7075 7429 0d0a 0d0a 2020 2020  d(input)....    
+0002aef0: 2020 2020 2320 4368 6563 6b20 666f 7220      # Check for 
+0002af00: 6e75 6d70 7920 7275 6c65 7320 7468 6174  numpy rules that
+0002af10: 2077 6520 6361 6e6e 6f74 2068 616e 646c   we cannot handl
+0002af20: 652e 0d0a 2020 2020 2020 2020 666f 7220  e...        for 
+0002af30: 6b77 2069 6e20 5f55 4e53 5550 504f 5254  kw in _UNSUPPORT
+0002af40: 4544 5f4b 4559 574f 5244 533a 0d0a 2020  ED_KEYWORDS:..  
+0002af50: 2020 2020 2020 2020 2020 6966 206b 7720            if kw 
+0002af60: 696e 206b 7761 7267 733a 0d0a 2020 2020  in kwargs:..    
+0002af70: 2020 2020 2020 2020 2020 2020 2320 544f              # TO
+0002af80: 444f 2065 6e61 626c 6520 7468 6973 2077  DO enable this w
+0002af90: 6172 6e69 6e67 2069 6e20 6120 6675 7475  arning in a futu
+0002afa0: 7265 206d 696e 6f72 2072 656c 6561 7365  re minor release
+0002afb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002afc0: 2020 2320 4661 7374 4172 7261 792e 5f70    # FastArray._p
+0002afd0: 6f73 7369 626c 795f 7761 726e 2866 275f  ossibly_warn(f'_
+0002afe0: 5f61 7272 6179 5f75 6675 6e63 5f5f 3a20  _array_ufunc__: 
+0002aff0: 756e 7375 7070 6f72 7465 6420 6b65 7977  unsupported keyw
+0002b000: 6f72 6420 6172 6775 6d65 6e74 2022 7b6b  ord argument "{k
+0002b010: 777d 2227 290d 0a20 2020 2020 2020 2020  w}"')..         
+0002b020: 2020 2020 2020 2074 6f70 6c65 7665 6c5f         toplevel_
+0002b030: 6162 6f72 7420 7c3d 2054 7275 650d 0a0d  abort |= True...
+0002b040: 0a20 2020 2020 2020 2023 2043 6865 636b  .        # Check
+0002b050: 2066 6f72 206e 756d 7079 2072 756c 6573   for numpy rules
+0002b060: 2074 6861 7420 7765 2070 6172 7469 616c   that we partial
+0002b070: 6c79 2073 7570 706f 7274 3b20 7468 6174  ly support; that
+0002b080: 2069 732c 2077 6865 7265 2077 6520 6f6e   is, where we on
+0002b090: 6c79 2073 7570 706f 7274 0d0a 2020 2020  ly support..    
+0002b0a0: 2020 2020 2320 7468 6520 6b65 7977 6f72      # the keywor
+0002b0b0: 6420 6966 2074 6865 2076 616c 7565 2069  d if the value i
+0002b0c0: 7320 736f 6d65 2064 6566 6175 6c74 2076  s some default v
+0002b0d0: 616c 7565 2061 6e64 206f 7468 6572 7769  alue and otherwi
+0002b0e0: 7365 2070 756e 7420 746f 206e 756d 7079  se punt to numpy
+0002b0f0: 2e0d 0a20 2020 2020 2020 2023 2054 6865  ...        # The
+0002b100: 2076 616c 7565 2061 7373 6f63 6961 7465   value associate
+0002b110: 6420 7769 7468 2065 6163 6820 6b65 7977  d with each keyw
+0002b120: 6f72 6420 696e 2074 6865 2064 6963 7469  ord in the dicti
+0002b130: 6f6e 6172 7920 6973 2074 6865 206f 6e6c  onary is the onl
+0002b140: 7920 7661 6c75 6520 7765 276c 6c0d 0a20  y value we'll.. 
+0002b150: 2020 2020 2020 2023 2073 7570 706f 7274         # support
+0002b160: 2066 6f72 2074 6861 7420 6b65 7977 6f72   for that keywor
+0002b170: 642e 0d0a 2020 2020 2020 2020 2320 466f  d...        # Fo
+0002b180: 7220 6578 616d 706c 652c 2069 6e20 6e75  r example, in nu
+0002b190: 6d70 7920 312e 3137 2074 6865 2073 756d  mpy 1.17 the sum
+0002b1a0: 2829 2066 756e 6374 696f 6e20 7061 7373  () function pass
+0002b1b0: 6573 2077 6865 7265 3d54 7275 6520 6279  es where=True by
+0002b1c0: 2064 6566 6175 6c74 2e0d 0a20 2020 2020   default...     
+0002b1d0: 2020 2066 6f72 206b 772c 2064 6566 6175     for kw, defau
+0002b1e0: 6c74 5f76 616c 2069 6e20 5f50 4152 5449  lt_val in _PARTI
+0002b1f0: 414c 4c59 5f53 5550 504f 5254 4544 5f4b  ALLY_SUPPORTED_K
+0002b200: 4559 574f 5244 535f 544f 5f44 4546 4155  EYWORDS_TO_DEFAU
+0002b210: 4c54 532e 6974 656d 7328 293a 0d0a 2020  LTS.items():..  
+0002b220: 2020 2020 2020 2020 2020 6966 206b 7720            if kw 
+0002b230: 696e 206b 7761 7267 733a 0d0a 2020 2020  in kwargs:..    
+0002b240: 2020 2020 2020 2020 2020 2020 2320 5573              # Us
+0002b250: 6520 6120 7479 7065 2063 6865 636b 2062  e a type check b
+0002b260: 6566 6f72 6520 6571 7561 6c69 7479 2068  efore equality h
+0002b270: 6572 6520 746f 2061 766f 6964 2065 7272  ere to avoid err
+0002b280: 6f72 7320 6361 7573 6564 0d0a 2020 2020  ors caused..    
+0002b290: 2020 2020 2020 2020 2020 2020 2320 6279              # by
+0002b2a0: 2063 6865 636b 696e 6720 6571 7561 6c69   checking equali
+0002b2b0: 7479 2062 6574 7765 656e 2062 6f6f 6c73  ty between bools
+0002b2c0: 2061 6e64 2061 7272 6179 732e 0d0a 2020   and arrays...  
+0002b2d0: 2020 2020 2020 2020 2020 2020 2020 6b77                kw
+0002b2e0: 6172 675f 7661 6c20 3d20 6b77 6172 6773  arg_val = kwargs
+0002b2f0: 5b6b 775d 0d0a 2020 2020 2020 2020 2020  [kw]..          
+0002b300: 2020 2020 2020 6966 2074 7970 6528 6465        if type(de
+0002b310: 6661 756c 745f 7661 6c29 2021 3d20 7479  fault_val) != ty
+0002b320: 7065 286b 7761 7267 5f76 616c 2920 6f72  pe(kwarg_val) or
+0002b330: 206b 7761 7267 5f76 616c 2021 3d20 6465   kwarg_val != de
+0002b340: 6661 756c 745f 7661 6c3a 0d0a 2020 2020  fault_val:..    
+0002b350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b360: 746f 706c 6576 656c 5f61 626f 7274 207c  toplevel_abort |
+0002b370: 3d20 5472 7565 0d0a 0d0a 2020 2020 2020  = True....      
+0002b380: 2020 6474 7970 653a 204f 7074 696f 6e61    dtype: Optiona
+0002b390: 6c5b 6e70 2e64 7479 7065 5d20 3d20 6b77  l[np.dtype] = kw
+0002b3a0: 6172 6773 2e67 6574 2822 6474 7970 6522  args.get("dtype"
+0002b3b0: 2c20 4e6f 6e65 290d 0a0d 0a20 2020 2020  , None)....     
+0002b3c0: 2020 2068 6173 5f6f 7574 7075 7473 3a20     has_outputs: 
+0002b3d0: 626f 6f6c 203d 2046 616c 7365 0d0a 2020  bool = False..  
+0002b3e0: 2020 2020 2020 6f75 745f 6172 6773 3a20        out_args: 
+0002b3f0: 4c69 7374 5b41 6e79 5d20 3d20 5b5d 0d0a  List[Any] = []..
+0002b400: 0d0a 2020 2020 2020 2020 2320 666c 6970  ..        # flip
+0002b410: 2061 6e79 206f 7574 7075 7473 2074 6f20   any outputs to 
+0002b420: 6e64 6172 7261 792e 2e2e 0d0a 2020 2020  ndarray.....    
+0002b430: 2020 2020 6f75 7470 7574 7320 3d20 6b77      outputs = kw
+0002b440: 6172 6773 2e70 6f70 2822 6f75 7422 2c20  args.pop("out", 
+0002b450: 4e6f 6e65 290d 0a20 2020 2020 2020 2069  None)..        i
+0002b460: 6620 6f75 7470 7574 733a 0d0a 2020 2020  f outputs:..    
+0002b470: 2020 2020 2020 2020 6861 735f 6f75 7470          has_outp
+0002b480: 7574 7320 3d20 5472 7565 0d0a 2020 2020  uts = True..    
+0002b490: 2020 2020 2020 2020 666f 7220 6f75 7470          for outp
+0002b4a0: 7574 2069 6e20 6f75 7470 7574 733a 0d0a  ut in outputs:..
+0002b4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b4c0: 6966 2069 7369 6e73 7461 6e63 6528 6f75  if isinstance(ou
+0002b4d0: 7470 7574 2c20 6e70 2e6e 6461 7272 6179  tput, np.ndarray
+0002b4e0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0002b4f0: 2020 2020 2020 2020 6973 5f6e 6f74 5f73          is_not_s
+0002b500: 7570 706f 7274 6564 203d 2073 656c 662e  upported = self.
+0002b510: 5f69 735f 6e6f 745f 7375 7070 6f72 7465  _is_not_supporte
+0002b520: 6428 6f75 7470 7574 290d 0a20 2020 2020  d(output)..     
+0002b530: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002b540: 6620 6973 5f6e 6f74 5f73 7570 706f 7274  f is_not_support
+0002b550: 6564 3a0d 0a20 2020 2020 2020 2020 2020  ed:..           
+0002b560: 2020 2020 2020 2020 2020 2020 2023 2054               # T
+0002b570: 4f44 4f20 656e 6162 6c65 2074 6869 7320  ODO enable this 
+0002b580: 7761 726e 696e 6720 696e 2061 2066 7574  warning in a fut
+0002b590: 7572 6520 6d69 6e6f 7220 7265 6c65 6173  ure minor releas
+0002b5a0: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+0002b5b0: 2020 2020 2020 2020 2020 2023 2046 6173             # Fas
+0002b5c0: 7441 7272 6179 2e5f 706f 7373 6962 6c79  tArray._possibly
+0002b5d0: 5f77 6172 6e28 6627 5f5f 6172 7261 795f  _warn(f'__array_
+0002b5e0: 7566 756e 635f 5f3a 2075 6e73 7570 706f  ufunc__: unsuppo
+0002b5f0: 7274 6564 206f 7574 7075 7420 227b 6f75  rted output "{ou
+0002b600: 7470 7574 7d22 2729 0d0a 2020 2020 2020  tput}"')..      
+0002b610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b620: 2020 746f 706c 6576 656c 5f61 626f 7274    toplevel_abort
+0002b630: 207c 3d20 6973 5f6e 6f74 5f73 7570 706f   |= is_not_suppo
+0002b640: 7274 6564 0d0a 2020 2020 2020 2020 2020  rted..          
+0002b650: 2020 2020 2020 6f75 745f 6172 6773 2e61        out_args.a
+0002b660: 7070 656e 6428 6f75 7470 7574 290d 0a20  ppend(output).. 
+0002b670: 2020 2020 2020 2020 2020 2023 2072 6570             # rep
+0002b680: 6c61 6365 206f 7574 0d0a 2020 2020 2020  lace out..      
+0002b690: 2020 2020 2020 6b77 6172 6773 5b22 6f75        kwargs["ou
+0002b6a0: 7422 5d20 3d20 7475 706c 6528 6f75 745f  t"] = tuple(out_
+0002b6b0: 6172 6773 290d 0a20 2020 2020 2020 2065  args)..        e
+0002b6c0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+0002b6d0: 2020 2320 544a 4420 2d20 6865 7265 206f    # TJD - here o
+0002b6e0: 7574 7075 7473 2077 6173 206e 6f74 2073  utputs was not s
+0002b6f0: 7065 6369 6669 6564 0d0a 2020 2020 2020  pecified..      
+0002b700: 2020 2020 2020 2320 6e6f 7720 6966 2055        # now if U
+0002b710: 4675 6e63 2e6e 6f75 7420 3d3d 312c 2074  Func.nout ==1, t
+0002b720: 6869 7320 6675 6e63 7469 6f6e 2072 6571  his function req
+0002b730: 7569 7265 7320 616e 206f 7574 7075 740d  uires an output.
+0002b740: 0a20 2020 2020 2020 2020 2020 206f 7574  .            out
+0002b750: 7075 7473 203d 2028 4e6f 6e65 2c29 202a  puts = (None,) *
+0002b760: 2075 6675 6e63 2e6e 6f75 740d 0a0d 0a20   ufunc.nout.... 
+0002b770: 2020 2020 2020 2023 2053 6565 2068 7474         # See htt
+0002b780: 7073 3a2f 2f64 6f63 732e 7079 7468 6f6e  ps://docs.python
+0002b790: 2e6f 7267 2f33 2f63 2d61 7069 2f74 7970  .org/3/c-api/typ
+0002b7a0: 656f 626a 2e68 746d 6c0d 0a20 2020 2020  eobj.html..     
+0002b7b0: 2020 2023 2053 6565 204e 756d 6265 7220     # See Number 
+0002b7c0: 4f62 6a65 6374 2053 7472 7563 7475 7265  Object Structure
+0002b7d0: 7320 616e 6420 4d61 7070 696e 6720 4f62  s and Mapping Ob
+0002b7e0: 6a65 6374 2053 7472 7563 7475 7265 2066  ject Structure f
+0002b7f0: 6f72 2069 6e64 6578 696e 670d 0a0d 0a20  or indexing.... 
+0002b800: 2020 2020 2020 2023 2075 6675 6e63 2e6e         # ufunc.n
+0002b810: 696e 0920 2020 2054 6865 206e 756d 6265  in.    The numbe
+0002b820: 7220 6f66 2069 6e70 7574 732e 0d0a 2020  r of inputs...  
+0002b830: 2020 2020 2020 2320 7566 756e 632e 6e6f        # ufunc.no
+0002b840: 7574 0920 2020 2054 6865 206e 756d 6265  ut.    The numbe
+0002b850: 7220 6f66 206f 7574 7075 7473 2e0d 0a20  r of outputs... 
+0002b860: 2020 2020 2020 2023 2075 6675 6e63 2e6e         # ufunc.n
+0002b870: 6172 6773 0954 6865 206e 756d 6265 7220  args.The number 
+0002b880: 6f66 2061 7267 756d 656e 7473 2e0d 0a20  of arguments... 
+0002b890: 2020 2020 2020 2023 2075 6675 6e63 2e6e         # ufunc.n
+0002b8a0: 7479 7065 7309 5468 6520 6e75 6d62 6572  types.The number
+0002b8b0: 206f 6620 7479 7065 732e 0d0a 2020 2020   of types...    
+0002b8c0: 2020 2020 2320 7566 756e 632e 7479 7065      # ufunc.type
+0002b8d0: 7309 5265 7475 726e 7320 6120 6c69 7374  s.Returns a list
+0002b8e0: 2077 6974 6820 7479 7065 7320 6772 6f75   with types grou
+0002b8f0: 7065 6420 696e 7075 742d 3e6f 7574 7075  ped input->outpu
+0002b900: 742e 0d0a 2020 2020 2020 2020 2320 7566  t...        # uf
+0002b910: 756e 632e 6964 656e 7469 7479 0954 6865  unc.identity.The
+0002b920: 2069 6465 6e74 6974 7920 7661 6c75 652e   identity value.
+0002b930: 0d0a 0d0a 2020 2020 2020 2020 6669 6e61  ....        fina
+0002b940: 6c5f 6474 7970 653a 204f 7074 696f 6e61  l_dtype: Optiona
+0002b950: 6c5b 6e70 2e64 7479 7065 5d20 3d20 4e6f  l[np.dtype] = No
+0002b960: 6e65 0d0a 2020 2020 2020 2020 6661 7374  ne..        fast
+0002b970: 5f66 756e 6374 696f 6e3a 204f 7074 696f  _function: Optio
+0002b980: 6e61 6c5b 4d41 5448 5f4f 5045 5241 5449  nal[MATH_OPERATI
+0002b990: 4f4e 5d20 3d20 4e6f 6e65 0d0a 2020 2020  ON] = None..    
+0002b9a0: 2020 2020 7265 6475 6365 5f66 756e 633a      reduce_func:
+0002b9b0: 204f 7074 696f 6e61 6c5b 5245 4455 4345   Optional[REDUCE
+0002b9c0: 5f46 554e 4354 494f 4e53 5d20 3d20 4e6f  _FUNCTIONS] = No
+0002b9d0: 6e65 0d0a 0d0a 2020 2020 2020 2020 2320  ne....        # 
+0002b9e0: 4861 6e64 6c65 2072 6564 7563 6520 7566  Handle reduce uf
+0002b9f0: 756e 6320 6d65 7468 6f64 732e 0d0a 2020  unc methods...  
+0002ba00: 2020 2020 2020 2320 6e6f 7465 3a20 7768        # note: wh
+0002ba10: 656e 206d 6574 686f 6420 6973 2027 6174  en method is 'at
+0002ba20: 2720 7468 6973 2069 7320 616e 2069 6e70  ' this is an inp
+0002ba30: 6c61 6365 2075 6e62 7566 6665 7265 6420  lace unbuffered 
+0002ba40: 6f70 6572 6174 696f 6e0d 0a20 2020 2020  operation..     
+0002ba50: 2020 2023 2074 6869 7320 6361 6e20 7370     # this can sp
+0002ba60: 6565 6420 7570 2072 6f75 7469 6e65 7320  eed up routines 
+0002ba70: 7468 6174 2075 7365 2068 6561 7679 206d  that use heavy m
+0002ba80: 6173 6b65 6420 6f70 6572 6174 696f 6e73  asked operations
+0002ba90: 0d0a 2020 2020 2020 2020 6966 206d 6574  ..        if met
+0002baa0: 686f 6420 3d3d 2022 7265 6475 6365 2220  hod == "reduce" 
+0002bab0: 616e 6420 4661 7374 4172 7261 792e 4661  and FastArray.Fa
+0002bac0: 7374 6572 5546 756e 6320 616e 6420 6e6f  sterUFunc and no
+0002bad0: 7420 746f 706c 6576 656c 5f61 626f 7274  t toplevel_abort
+0002bae0: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
+0002baf0: 2061 2e61 6e79 2829 2061 6e64 2061 2e61   a.any() and a.a
+0002bb00: 6c6c 2829 2061 7265 206c 6f67 6963 616c  ll() are logical
+0002bb10: 2072 6564 7563 6520 6f70 6572 6174 696f   reduce operatio
+0002bb20: 6e73 0d0a 2020 2020 2020 2020 2020 2020  ns..            
+0002bb30: 2320 4578 616d 706c 6573 0d0a 2020 2020  # Examples..    
+0002bb40: 2020 2020 2020 2020 2320 4c6f 6f6b 2066          # Look f
+0002bb50: 6f72 2061 7869 733a 4e6f 6e65 202d 2d20  or axis:None -- 
+0002bb60: 6f74 6865 7277 6973 6520 4142 4f52 540d  otherwise ABORT.
+0002bb70: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
+0002bb80: 6865 6e20 6c6f 6f6b 2066 6f72 204b 6565  hen look for Kee
+0002bb90: 7064 696d 7320 7769 6863 6820 6d65 616e  pdims wihch mean
+0002bba0: 7320 746f 2077 7261 7020 7265 7375 6c74  s to wrap result
+0002bbb0: 2069 6e20 6c69 7374 2f61 7272 6179 3f0d   in list/array?.
+0002bbc0: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
+0002bbd0: 6865 6e20 6368 6563 6b20 6474 7970 6520  hen check dtype 
+0002bbe0: 616c 736f 0d0a 2020 2020 2020 2020 2020  also..          
+0002bbf0: 2020 230d 0a20 2020 2020 2020 2020 2020    #..           
+0002bc00: 2023 2049 6e20 5b32 325d 3a20 743d 4641   # In [22]: t=FA
+0002bc10: 285b 5b33 2c34 2c35 5d2c 5b36 2c37 2c38  ([[3,4,5],[6,7,8
+0002bc20: 5d5d 290d 0a20 2020 2020 2020 2020 2020  ]])..           
+0002bc30: 2023 2049 6e20 5b32 335d 3a20 6e70 2e61   # In [23]: np.a
+0002bc40: 6464 2e72 6564 7563 6528 7429 0d0a 2020  dd.reduce(t)..  
+0002bc50: 2020 2020 2020 2020 2020 2321 2172 6564            #!!red
+0002bc60: 7563 6520 2072 6564 7563 6520 6e69 6e3a  uce  reduce nin:
+0002bc70: 2032 2031 203c 7566 756e 6320 2761 6464   2 1 <ufunc 'add
+0002bc80: 273e 205b 6172 7261 7928 5b5b 332c 2034  '> [array([[3, 4
+0002bc90: 2c20 355d 2c0d 0a20 2020 2020 2020 2020  , 5],..         
+0002bca0: 2020 2023 2020 2020 2020 205b 362c 2037     #       [6, 7
+0002bcb0: 2c20 385d 5d29 5d20 6f75 743a 2028 4e6f  , 8]])] out: (No
+0002bcc0: 6e65 2c29 206b 7761 7267 733a 207b 7d0d  ne,) kwargs: {}.
+0002bcd0: 0a20 2020 2020 2020 2020 2020 2023 2072  .            # r
+0002bce0: 6573 756c 7473 205b 2039 2031 3120 3133  esults [ 9 11 13
+0002bcf0: 5d0d 0a20 2020 2020 2020 2020 2020 2023  ]..            #
+0002bd00: 204f 7574 5b32 335d 3a20 6172 7261 7928   Out[23]: array(
+0002bd10: 5b20 392c 2031 312c 2031 335d 290d 0a20  [ 9, 11, 13]).. 
+0002bd20: 2020 2020 2020 2020 2020 2023 2049 6e20             # In 
+0002bd30: 5b32 345d 3a20 6e70 2e61 6464 2e72 6564  [24]: np.add.red
+0002bd40: 7563 6528 742c 2061 7869 733d 4e6f 6e65  uce(t, axis=None
+0002bd50: 290d 0a20 2020 2020 2020 2020 2020 2023  )..            #
+0002bd60: 2121 7265 6475 6365 2020 7265 6475 6365  !!reduce  reduce
+0002bd70: 206e 696e 3a20 3220 3120 3c75 6675 6e63   nin: 2 1 <ufunc
+0002bd80: 2027 6164 6427 3e20 5b61 7272 6179 285b   'add'> [array([
+0002bd90: 5b33 2c20 342c 2035 5d2c 0d0a 2020 2020  [3, 4, 5],..    
+0002bda0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002bdb0: 5b36 2c20 372c 2038 5d5d 295d 206f 7574  [6, 7, 8]])] out
+0002bdc0: 3a20 284e 6f6e 652c 2920 6b77 6172 6773  : (None,) kwargs
+0002bdd0: 3a20 7b27 6178 6973 273a 204e 6f6e 657d  : {'axis': None}
+0002bde0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0002bdf0: 7265 7375 6c74 7320 3333 0d0a 2020 2020  results 33..    
+0002be00: 2020 2020 2020 2020 2320 4f75 745b 3234          # Out[24
+0002be10: 5d3a 2033 330d 0a20 2020 2020 2020 2020  ]: 33..         
+0002be20: 2020 2023 2049 6e20 5b32 355d 3a20 6e70     # In [25]: np
+0002be30: 2e61 6464 2e72 6564 7563 6528 742c 2061  .add.reduce(t, a
+0002be40: 7869 733d 4e6f 6e65 2c20 6b65 6570 6469  xis=None, keepdi
+0002be50: 6d73 3d54 7275 6529 0d0a 2020 2020 2020  ms=True)..      
+0002be60: 2020 2020 2020 2321 2172 6564 7563 6520        #!!reduce 
+0002be70: 2072 6564 7563 6520 6e69 6e3a 2032 2031   reduce nin: 2 1
+0002be80: 203c 7566 756e 6320 2761 6464 273e 205b   <ufunc 'add'> [
+0002be90: 6172 7261 7928 5b5b 332c 2034 2c20 355d  array([[3, 4, 5]
+0002bea0: 2c0d 0a20 2020 2020 2020 2020 2020 2023  ,..            #
+0002beb0: 2020 2020 2020 205b 362c 2037 2c20 385d         [6, 7, 8]
+0002bec0: 5d29 5d20 6f75 743a 2028 4e6f 6e65 2c29  ])] out: (None,)
+0002bed0: 206b 7761 7267 733a 207b 2761 7869 7327   kwargs: {'axis'
+0002bee0: 3a20 4e6f 6e65 2c20 276b 6565 7064 696d  : None, 'keepdim
+0002bef0: 7327 3a20 5472 7565 7d0d 0a20 2020 2020  s': True}..     
+0002bf00: 2020 2020 2020 2023 2072 6573 756c 7473         # results
+0002bf10: 205b 5b33 335d 5d0d 0a20 2020 2020 2020   [[33]]..       
+0002bf20: 2020 2020 2023 204f 7574 5b32 355d 3a20       # Out[25]: 
+0002bf30: 6172 7261 7928 5b5b 3333 5d5d 290d 0a20  array([[33]]).. 
+0002bf40: 2020 2020 2020 2020 2020 2023 2049 6e20             # In 
+0002bf50: 5b32 365d 3a20 6e70 2e61 6464 2e72 6564  [26]: np.add.red
+0002bf60: 7563 6528 742c 2061 7869 733d 4e6f 6e65  uce(t, axis=None
+0002bf70: 2c20 6b65 6570 6469 6d73 3d54 7275 652c  , keepdims=True,
+0002bf80: 2064 7479 7065 3d6e 702e 666c 6f61 7433   dtype=np.float3
+0002bf90: 3229 0d0a 2020 2020 2020 2020 2020 2020  2)..            
+0002bfa0: 2321 2172 6564 7563 6520 2072 6564 7563  #!!reduce  reduc
+0002bfb0: 6520 6e69 6e3a 2032 2031 203c 7566 756e  e nin: 2 1 <ufun
+0002bfc0: 6320 2761 6464 273e 205b 6172 7261 7928  c 'add'> [array(
+0002bfd0: 5b5b 332c 2034 2c20 355d 2c0d 0a20 2020  [[3, 4, 5],..   
+0002bfe0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+0002bff0: 205b 362c 2037 2c20 385d 5d29 5d20 6f75   [6, 7, 8]])] ou
+0002c000: 743a 2028 4e6f 6e65 2c29 206b 7761 7267  t: (None,) kwarg
+0002c010: 733a 207b 2761 7869 7327 3a20 4e6f 6e65  s: {'axis': None
+0002c020: 2c20 276b 6565 7064 696d 7327 3a20 5472  , 'keepdims': Tr
+0002c030: 7565 2c20 2764 7479 7065 273a 203c 636c  ue, 'dtype': <cl
+0002c040: 6173 7320 276e 756d 7079 2e66 6c6f 6174  ass 'numpy.float
+0002c050: 3332 273e 7d0d 0a20 2020 2020 2020 2020  32'>}..         
+0002c060: 2020 2023 2072 6573 756c 7473 205b 5b33     # results [[3
+0002c070: 332e 5d5d 0d0a 2020 2020 2020 2020 2020  3.]]..          
+0002c080: 2020 2320 4f75 745b 3236 5d3a 2061 7272    # Out[26]: arr
+0002c090: 6179 285b 5b33 332e 5d5d 2c20 6474 7970  ay([[33.]], dtyp
+0002c0a0: 653d 666c 6f61 7433 3229 0d0a 2020 2020  e=float32)..    
+0002c0b0: 2020 2020 2020 2020 2320 7072 696e 7428          # print(
+0002c0c0: 2221 2172 6564 7563 6520 222c 206d 6574  "!!reduce ", met
+0002c0d0: 686f 642c 2027 6e69 6e3a 272c 2075 6675  hod, 'nin:', ufu
+0002c0e0: 6e63 2e6e 696e 2c20 7566 756e 632e 6e6f  nc.nin, ufunc.no
+0002c0f0: 7574 2c20 7566 756e 632c 2020 6172 6773  ut, ufunc,  args
+0002c100: 2c20 276f 7574 3a27 2c20 6f75 7470 7574  , 'out:', output
+0002c110: 732c 2020 276b 7761 7267 733a 272c 206b  s,  'kwargs:', k
+0002c120: 7761 7267 732c 276e 6469 6d27 2c20 6172  wargs,'ndim', ar
+0002c130: 6773 5b30 5d2e 6e64 696d 290d 0a20 2020  gs[0].ndim)..   
+0002c140: 2020 2020 2020 2020 2023 2072 6573 756c           # resul
+0002c150: 744e 203d 2073 7570 6572 2846 6173 7441  tN = super(FastA
+0002c160: 7272 6179 2c20 7365 6c66 292e 5f5f 6172  rray, self).__ar
+0002c170: 7261 795f 7566 756e 635f 5f28 7566 756e  ray_ufunc__(ufun
+0002c180: 632c 206d 6574 686f 642c 2a2a 6b77 6172  c, method,**kwar
+0002c190: 6773 290d 0a20 2020 2020 2020 2020 2020  gs)..           
+0002c1a0: 2023 2070 7269 6e74 2822 2121 7265 7375   # print("!!resu
+0002c1b0: 6c74 206e 756d 7079 222c 2072 6573 756c  lt numpy", resul
+0002c1c0: 744e 2c20 7479 7065 2872 6573 756c 744e  tN, type(resultN
+0002c1d0: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
+0002c1e0: 2320 4e4f 5445 3a0d 0a20 2020 2020 2020  # NOTE:..       
+0002c1f0: 2020 2020 2023 206c 6f6f 6b20 666f 7220       # look for 
+0002c200: 7265 6475 6365 206c 6f67 6963 616c 5f6f  reduce logical_o
+0002c210: 720d 0a20 2020 2020 2020 2020 2020 2023  r..            #
+0002c220: 206c 6f6f 6b20 666f 7220 7265 6475 6365   look for reduce
+0002c230: 5f6c 6f67 6963 616c 5f61 6e64 2020 2028  _logical_and   (
+0002c240: 7573 6564 2077 6974 6820 6e70 2e66 6d69  used with np.fmi
+0002c250: 6e20 666f 7220 696e 7374 616e 6365 290d  n for instance).
+0002c260: 0a0d 0a20 2020 2020 2020 2020 2020 2072  ...            r
+0002c270: 6564 7563 655f 6675 6e63 203d 2067 5265  educe_func = gRe
+0002c280: 6475 6365 5546 756e 6373 2e67 6574 2875  duceUFuncs.get(u
+0002c290: 6675 6e63 2c20 4e6f 6e65 290d 0a0d 0a20  func, None).... 
+0002c2a0: 2020 2020 2020 2023 2063 6865 636b 2069         # check i
+0002c2b0: 6620 7765 2063 616e 2070 726f 6365 6564  f we can proceed
+0002c2c0: 2074 6f20 6361 6c63 756c 6174 6520 6120   to calculate a 
+0002c2d0: 6661 7374 6572 2077 6179 0d0a 2020 2020  faster way..    
+0002c2e0: 2020 2020 6966 206d 6574 686f 6420 3d3d      if method ==
+0002c2f0: 2022 5f5f 6361 6c6c 5f5f 2220 616e 6420   "__call__" and 
+0002c300: 4661 7374 4172 7261 792e 4661 7374 6572  FastArray.Faster
+0002c310: 5546 756e 6320 616e 6420 6e6f 7420 746f  UFunc and not to
+0002c320: 706c 6576 656c 5f61 626f 7274 3a0d 0a20  plevel_abort:.. 
+0002c330: 2020 2020 2020 2020 2020 2023 2063 6865             # che
+0002c340: 636b 2066 6f72 2062 696e 6172 7920 7566  ck for binary uf
+0002c350: 756e 630d 0a20 2020 2020 2020 2020 2020  unc..           
+0002c360: 2069 6620 6c65 6e28 6172 6773 2920 3d3d   if len(args) ==
+0002c370: 2032 2061 6e64 2075 6675 6e63 2e6e 6f75   2 and ufunc.nou
+0002c380: 7420 3d3d 2031 3a0d 0a20 2020 2020 2020  t == 1:..       
+0002c390: 2020 2020 2020 2020 2023 2323 2323 2323           #######
+0002c3a0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002c3b0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002c3c0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002c3d0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002c3e0: 2323 2323 0d0a 2020 2020 2020 2020 2020  ####..          
+0002c3f0: 2020 2020 2020 2323 2042 494e 4152 590d        ## BINARY.
+0002c400: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c410: 2023 2323 2323 2323 2323 2323 2323 2323   ###############
+0002c420: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002c430: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002c440: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002c450: 2323 2323 2323 2323 2323 2323 0d0a 2020  ############..  
+0002c460: 2020 2020 2020 2020 2020 2020 2020 6172                ar
+0002c470: 7261 795f 7479 7065 733a 204c 6973 745b  ray_types: List[
+0002c480: 6e70 2e64 7479 7065 5d20 3d20 5b5d 0d0a  np.dtype] = []..
 0002c490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c4b0: 2020 7072 696e 7428 6622 2a2a 6c6f 6769    print(f"**logi
-0002c4c0: 6361 6c20 6675 6e63 7469 6f6e 2063 616c  cal function cal
-0002c4d0: 6c65 6420 7b75 6675 6e63 7d20 6172 6773  led {ufunc} args
-0002c4e0: 3a20 7b61 7267 737d 2229 0d0a 2020 2020  : {args}")..    
-0002c4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c500: 2020 2020 2020 2020 2020 2020 6973 5f6c              is_l
-0002c510: 6f67 6963 616c 203d 2031 0d0a 2020 2020  ogical = 1..    
-0002c520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c530: 2020 2020 2020 2020 2020 2020 6669 6e61              fina
-0002c540: 6c5f 6474 7970 6520 3d20 6e70 2e62 6f6f  l_dtype = np.boo
-0002c550: 6c5f 0d0a 0d0a 2020 2020 2020 2020 2020  l_....          
-0002c560: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002c570: 2066 6173 745f 6675 6e63 7469 6f6e 2069   fast_function i
-0002c580: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
-0002c590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c5a0: 2020 2020 2023 2063 6865 636b 2066 6f72       # check for
-0002c5b0: 2062 6974 7769 7365 2066 756e 6374 696f   bitwise functio
-0002c5c0: 6e73 3f20 2874 6573 7420 7468 6973 290d  ns? (test this).
-0002c5d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c5e0: 2020 2020 2020 2020 2020 2020 2066 6173               fas
-0002c5f0: 745f 6675 6e63 7469 6f6e 203d 2067 4269  t_function = gBi
-0002c600: 6e61 7279 4269 7477 6973 6555 4675 6e63  naryBitwiseUFunc
-0002c610: 732e 6765 7428 7566 756e 632c 204e 6f6e  s.get(ufunc, Non
-0002c620: 6529 0d0a 0d0a 2020 2020 2020 2020 2020  e)....          
-0002c630: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002c640: 2066 6173 745f 6675 6e63 7469 6f6e 2069   fast_function i
-0002c650: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
-0002c660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c670: 2020 2020 2020 2020 2069 6620 6861 735f           if has_
-0002c680: 6f75 7470 7574 7320 616e 6420 6973 5f6c  outputs and is_l
-0002c690: 6f67 6963 616c 203d 3d20 303a 0d0a 2020  ogical == 0:..  
-0002c6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c6b0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0002c6c0: 6861 7665 2074 6f20 636f 6e66 6f72 6d20  have to conform 
-0002c6d0: 746f 206f 7574 7075 740d 0a20 2020 2020  to output..     
+0002c4a0: 7363 616c 6172 5f74 7970 6573 3a20 4c69  scalar_types: Li
+0002c4b0: 7374 5b53 6361 6c61 7254 7970 655d 203d  st[ScalarType] =
+0002c4c0: 205b 5d0d 0a0d 0a20 2020 2020 2020 2020   []....         
+0002c4d0: 2020 2020 2020 2073 6361 6c61 7273 3a20         scalars: 
+0002c4e0: 696e 7420 3d20 300d 0a20 2020 2020 2020  int = 0..       
+0002c4f0: 2020 2020 2020 2020 2061 626f 7274 3a20           abort: 
+0002c500: 696e 7420 3d20 300d 0a20 2020 2020 2020  int = 0..       
+0002c510: 2020 2020 2020 2020 2066 6f72 2061 7272           for arr
+0002c520: 2069 6e20 6172 6773 3a0d 0a20 2020 2020   in args:..     
+0002c530: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0002c540: 7272 5479 7065 203d 2074 7970 6528 6172  rrType = type(ar
+0002c550: 7229 0d0a 2020 2020 2020 2020 2020 2020  r)..            
+0002c560: 2020 2020 2020 2020 6966 2061 7272 5479          if arrTy
+0002c570: 7065 2069 6e20 5363 616c 6172 5479 7065  pe in ScalarType
+0002c580: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002c590: 2020 2020 2020 2020 2020 2073 6361 6c61             scala
+0002c5a0: 7273 202b 3d20 310d 0a20 2020 2020 2020  rs += 1..       
+0002c5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c5c0: 2073 6361 6c61 725f 7479 7065 732e 6170   scalar_types.ap
+0002c5d0: 7065 6e64 2861 7272 5479 7065 290d 0a20  pend(arrType).. 
+0002c5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c5f0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+0002c600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c610: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
+0002c620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c630: 2020 2020 6172 7261 795f 7479 7065 732e      array_types.
+0002c640: 6170 7065 6e64 2861 7272 2e64 7479 7065  append(arr.dtype
+0002c650: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0002c660: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0002c670: 2063 6865 636b 2066 6f72 206e 6f6e 2063   check for non c
+0002c680: 6f6e 7469 6e67 6f75 7320 6172 7261 7973  ontingous arrays
+0002c690: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002c6a0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002c6b0: 2061 7272 2e69 7465 6d73 697a 6520 213d   arr.itemsize !=
+0002c6c0: 2061 7272 2e73 7472 6964 6573 5b30 5d3a   arr.strides[0]:
+0002c6d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 0002c6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c6f0: 2020 2020 2020 2020 2020 2066 696e 616c             final
-0002c700: 5f64 7479 7065 203d 206f 7574 5f61 7267  _dtype = out_arg
-0002c710: 735b 305d 2e64 7479 7065 0d0a 2020 2020  s[0].dtype..    
+0002c6f0: 2020 6162 6f72 7420 3d20 310d 0a20 2020    abort = 1..   
+0002c700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c710: 2020 2020 2065 7863 6570 743a 0d0a 2020       except:..  
 0002c720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c730: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-0002c740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c750: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002c760: 6620 6973 5f6c 6f67 6963 616c 203d 3d20  f is_logical == 
-0002c770: 3120 616e 6420 7363 616c 6172 7320 3d3d  1 and scalars ==
-0002c780: 2031 3a0d 0a20 2020 2020 2020 2020 2020   1:..           
-0002c790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c7a0: 2020 2020 2020 2020 2023 204e 4f54 453a           # NOTE:
-0002c7b0: 2073 6361 6c61 7220 7570 6361 7374 2072   scalar upcast r
-0002c7c0: 756c 6573 202d 2d20 6a75 7374 2061 7070  ules -- just app
-0002c7d0: 6c79 2074 6f20 6c6f 6769 6361 6c73 2073  ly to logicals s
-0002c7e0: 6f20 7468 6174 2061 7272 203c 2035 2064  o that arr < 5 d
-0002c7f0: 6f65 7320 6e6f 7420 7570 6361 7374 3f0d  oes not upcast?.
-0002c800: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c820: 2020 2020 2023 2020 2020 2020 206f 7220       #       or 
-0002c830: 676c 6f62 616c 6c79 2061 7070 6c79 2074  globally apply t
-0002c840: 6869 7320 7275 6c65 2073 6f20 7468 6174  his rule so that
-0002c850: 2061 7272 203d 2061 7272 202b 2035 0d0a   arr = arr + 5..
-0002c860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c730: 2020 2020 2020 2020 2020 6162 6f72 7420            abort 
+0002c740: 3d20 310d 0a20 2020 2020 2020 2020 2020  = 1..           
+0002c750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c760: 2023 2063 616e 2068 6170 7065 6e20 7768   # can happen wh
+0002c770: 656e 204e 6f6e 6520 6f72 2061 2070 7974  en None or a pyt
+0002c780: 686f 6e20 6c69 7374 2069 7320 7061 7373  hon list is pass
+0002c790: 6564 0d0a 2020 2020 2020 2020 2020 2020  ed..            
+0002c7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c7b0: 6966 2046 6173 7441 7272 6179 2e56 6572  if FastArray.Ver
+0002c7c0: 626f 7365 203e 2031 3a0d 0a20 2020 2020  bose > 1:..     
+0002c7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c7e0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+0002c7f0: 2866 222a 2a64 6f6e 7420 6b6e 6f77 2068  (f"**dont know h
+0002c800: 6f77 2074 6f20 6861 6e64 6c65 2061 7272  ow to handle arr
+0002c810: 6179 207b 6172 727d 2061 7267 733a 207b  ay {arr} args: {
+0002c820: 6172 6773 7d22 290d 0a0d 0a20 2020 2020  args}")....     
+0002c830: 2020 2020 2020 2020 2020 2069 6620 6162             if ab
+0002c840: 6f72 7420 3d3d 2030 3a0d 0a20 2020 2020  ort == 0:..     
+0002c850: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002c860: 6620 7363 616c 6172 7320 3c20 323a 0d0a  f scalars < 2:..
 0002c870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c880: 2020 2020 2320 6966 2073 6361 6c61 7273      # if scalars
-0002c890: 203d 3d20 313a 0d0a 2020 2020 2020 2020   == 1:..        
+0002c880: 2020 2020 2020 2020 6973 5f6c 6f67 6963          is_logic
+0002c890: 616c 203d 2030 0d0a 2020 2020 2020 2020  al = 0..        
 0002c8a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c8b0: 2020 2020 2020 2020 2020 2020 2320 7370              # sp
-0002c8c0: 6563 6961 6c20 6361 7365 2068 6176 6520  ecial case have 
-0002c8d0: 746f 2073 6565 2069 6620 7363 616c 6172  to see if scalar
-0002c8e0: 2069 7320 696e 2072 616e 6765 0d0a 2020   is in range..  
-0002c8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c910: 2020 6966 2074 7970 6528 6172 6773 5b30    if type(args[0
-0002c920: 5d29 2069 6e20 5363 616c 6172 5479 7065  ]) in ScalarType
-0002c930: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002c940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c950: 2020 2020 2020 2020 2020 2073 6361 6c61             scala
-0002c960: 725f 7661 6c20 3d20 6172 6773 5b30 5d0d  r_val = args[0].
-0002c970: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c990: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-0002c9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c8b0: 2320 6368 6563 6b20 666f 7220 6164 642c  # check for add,
+0002c8c0: 2073 7562 2c20 6d75 6c2c 2064 6976 6964   sub, mul, divid
+0002c8d0: 652c 2070 6f77 6572 0d0a 2020 2020 2020  e, power..      
+0002c8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c8f0: 2020 6661 7374 5f66 756e 6374 696f 6e20    fast_function 
+0002c900: 3d20 6742 696e 6172 7955 4675 6e63 732e  = gBinaryUFuncs.
+0002c910: 6765 7428 7566 756e 632c 204e 6f6e 6529  get(ufunc, None)
+0002c920: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002c930: 2020 2020 2020 2020 2020 6966 2066 6173            if fas
+0002c940: 745f 6675 6e63 7469 6f6e 2069 7320 4e6f  t_function is No
+0002c950: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
+0002c960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c970: 2023 2063 6865 636b 2066 6f72 2063 6f6d   # check for com
+0002c980: 7061 7269 736f 6e20 616e 6420 6c6f 6769  parison and logi
+0002c990: 6361 6c20 6f72 2f61 6e64 2066 756e 6374  cal or/and funct
+0002c9a0: 696f 6e73 0d0a 2020 2020 2020 2020 2020  ions..          
 0002c9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c9c0: 2020 2020 7363 616c 6172 5f76 616c 203d      scalar_val =
-0002c9d0: 2061 7267 735b 315d 0d0a 0d0a 2020 2020   args[1]....    
-0002c9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ca00: 6669 6e61 6c5f 6474 7970 6520 3d20 6c6f  final_dtype = lo
-0002ca10: 6769 6361 6c5f 6669 6e64 5f63 6f6d 6d6f  gical_find_commo
-0002ca20: 6e5f 7479 7065 2861 7272 6179 5f74 7970  n_type(array_typ
-0002ca30: 6573 2c20 7363 616c 6172 5f74 7970 6573  es, scalar_types
-0002ca40: 2c20 7363 616c 6172 5f76 616c 290d 0a0d  , scalar_val)...
-0002ca50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002ca60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ca70: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+0002c9c0: 2020 6661 7374 5f66 756e 6374 696f 6e20    fast_function 
+0002c9d0: 3d20 6742 696e 6172 794c 6f67 6963 616c  = gBinaryLogical
+0002c9e0: 5546 756e 6373 2e67 6574 2875 6675 6e63  UFuncs.get(ufunc
+0002c9f0: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
+0002ca00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ca10: 2020 2020 2069 6620 6661 7374 5f66 756e       if fast_fun
+0002ca20: 6374 696f 6e20 6973 206e 6f74 204e 6f6e  ction is not Non
+0002ca30: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0002ca40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ca50: 2020 2020 6966 2046 6173 7441 7272 6179      if FastArray
+0002ca60: 2e56 6572 626f 7365 203e 2032 3a0d 0a20  .Verbose > 2:.. 
+0002ca70: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002ca80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ca90: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-0002caa0: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
-0002cab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cac0: 2020 2020 2020 2023 2054 4f44 4f3a 2063         # TODO: c
-0002cad0: 6865 636b 2066 6f72 2062 7567 2077 6865  heck for bug whe
-0002cae0: 7265 206e 702e 696e 7433 3220 7479 7065  re np.int32 type
-0002caf0: 2037 2067 6574 7320 666c 6970 7065 6420   7 gets flipped 
-0002cb00: 746f 206e 702e 696e 7433 3220 7479 7065  to np.int32 type
-0002cb10: 2035 0d0a 2020 2020 2020 2020 2020 2020   5..            
-0002cb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cb30: 2020 2020 2020 2020 6966 2073 6361 6c61          if scala
-0002cb40: 7273 203d 3d20 3020 616e 6420 6c65 6e28  rs == 0 and len(
-0002cb50: 6172 7261 795f 7479 7065 7329 203d 3d20  array_types) == 
-0002cb60: 3220 616e 6420 2861 7272 6179 5f74 7970  2 and (array_typ
-0002cb70: 6573 5b30 5d20 3d3d 2061 7272 6179 5f74  es[0] == array_t
-0002cb80: 7970 6573 5b31 5d29 3a0d 0a20 2020 2020  ypes[1]):..     
-0002cb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cbb0: 2020 2066 696e 616c 5f64 7479 7065 203d     final_dtype =
-0002cbc0: 2061 7272 6179 5f74 7970 6573 5b30 5d0d   array_types[0].
-0002cbd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002cbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cbf0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-0002cc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cc20: 2020 2020 2320 6368 6563 6b20 666f 7220      # check for 
-0002cc30: 696e 7420 7363 616c 6172 2061 6761 696e  int scalar again
-0002cc40: 7374 2069 6e74 0d0a 2020 2020 2020 2020  st int..        
-0002cc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cc70: 2320 6275 6720 7768 6572 6520 6e70 2e69  # bug where np.i
-0002cc80: 6e74 3820 616e 6420 7468 656e 2061 6464  nt8 and then add
-0002cc90: 202b 3139 3939 206f 7220 6c61 7267 6572   +1999 or larger
-0002cca0: 206e 756d 6265 722e 2020 6e65 6564 2074   number.  need t
-0002ccb0: 6f20 7570 6361 7374 0d0a 2020 2020 2020  o upcast..      
+0002ca90: 2020 2070 7269 6e74 2866 222a 2a6c 6f67     print(f"**log
+0002caa0: 6963 616c 2066 756e 6374 696f 6e20 6361  ical function ca
+0002cab0: 6c6c 6564 207b 7566 756e 637d 2061 7267  lled {ufunc} arg
+0002cac0: 733a 207b 6172 6773 7d22 290d 0a20 2020  s: {args}")..   
+0002cad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cae0: 2020 2020 2020 2020 2020 2020 2069 735f               is_
+0002caf0: 6c6f 6769 6361 6c20 3d20 310d 0a20 2020  logical = 1..   
+0002cb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cb10: 2020 2020 2020 2020 2020 2020 2066 696e               fin
+0002cb20: 616c 5f64 7479 7065 203d 206e 702e 626f  al_dtype = np.bo
+0002cb30: 6f6c 5f0d 0a0d 0a20 2020 2020 2020 2020  ol_....         
+0002cb40: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002cb50: 6620 6661 7374 5f66 756e 6374 696f 6e20  f fast_function 
+0002cb60: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
+0002cb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cb80: 2020 2020 2020 2320 6368 6563 6b20 666f        # check fo
+0002cb90: 7220 6269 7477 6973 6520 6675 6e63 7469  r bitwise functi
+0002cba0: 6f6e 733f 2028 7465 7374 2074 6869 7329  ons? (test this)
+0002cbb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002cbc0: 2020 2020 2020 2020 2020 2020 2020 6661                fa
+0002cbd0: 7374 5f66 756e 6374 696f 6e20 3d20 6742  st_function = gB
+0002cbe0: 696e 6172 7942 6974 7769 7365 5546 756e  inaryBitwiseUFun
+0002cbf0: 6373 2e67 6574 2875 6675 6e63 2c20 4e6f  cs.get(ufunc, No
+0002cc00: 6e65 290d 0a0d 0a20 2020 2020 2020 2020  ne)....         
+0002cc10: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002cc20: 6620 6661 7374 5f66 756e 6374 696f 6e20  f fast_function 
+0002cc30: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+0002cc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cc50: 2020 2020 2020 2020 2020 6966 2068 6173            if has
+0002cc60: 5f6f 7574 7075 7473 2061 6e64 2069 735f  _outputs and is_
+0002cc70: 6c6f 6769 6361 6c20 3d3d 2030 3a0d 0a20  logical == 0:.. 
+0002cc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cc90: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0002cca0: 2068 6176 6520 746f 2063 6f6e 666f 726d   have to conform
+0002ccb0: 2074 6f20 6f75 7470 7574 0d0a 2020 2020   to output..    
 0002ccc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ccd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cce0: 2020 6966 2073 6361 6c61 7273 203d 3d20    if scalars == 
-0002ccf0: 3120 616e 6420 6172 7261 795f 7479 7065  1 and array_type
-0002cd00: 735b 305d 2e6e 756d 203c 3d20 3130 3a0d  s[0].num <= 10:.
-0002cd10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002ccd0: 2020 2020 2020 2020 2020 2020 6669 6e61              fina
+0002cce0: 6c5f 6474 7970 6520 3d20 6f75 745f 6172  l_dtype = out_ar
+0002ccf0: 6773 5b30 5d2e 6474 7970 650d 0a20 2020  gs[0].dtype..   
+0002cd00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cd10: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
 0002cd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cd30: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002cd40: 7479 7065 2861 7267 735b 305d 2920 696e  type(args[0]) in
-0002cd50: 2053 6361 6c61 7254 7970 653a 0d0a 2020   ScalarType:..  
-0002cd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cd30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cd40: 6966 2069 735f 6c6f 6769 6361 6c20 3d3d  if is_logical ==
+0002cd50: 2031 2061 6e64 2073 6361 6c61 7273 203d   1 and scalars =
+0002cd60: 3d20 313a 0d0a 2020 2020 2020 2020 2020  = 1:..          
 0002cd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cd80: 2020 2020 2020 2020 2020 2020 2020 7363                sc
-0002cd90: 616c 6172 5f76 616c 203d 2061 7267 735b  alar_val = args[
-0002cda0: 305d 0d0a 2020 2020 2020 2020 2020 2020  0]..            
-0002cdb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cdc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cdd0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-0002cde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cd80: 2020 2020 2020 2020 2020 2320 4e4f 5445            # NOTE
+0002cd90: 3a20 7363 616c 6172 2075 7063 6173 7420  : scalar upcast 
+0002cda0: 7275 6c65 7320 2d2d 206a 7573 7420 6170  rules -- just ap
+0002cdb0: 706c 7920 746f 206c 6f67 6963 616c 7320  ply to logicals 
+0002cdc0: 736f 2074 6861 7420 6172 7220 3c20 3520  so that arr < 5 
+0002cdd0: 646f 6573 206e 6f74 2075 7063 6173 743f  does not upcast?
+0002cde0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 0002cdf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ce00: 2020 2020 2020 2073 6361 6c61 725f 7661         scalar_va
-0002ce10: 6c20 3d20 6172 6773 5b31 5d0d 0a0d 0a20  l = args[1].... 
-0002ce20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ce30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ce40: 2020 2020 2020 2020 2020 2066 696e 616c             final
-0002ce50: 5f64 7479 7065 203d 206c 6f67 6963 616c  _dtype = logical
-0002ce60: 5f66 696e 645f 636f 6d6d 6f6e 5f74 7970  _find_common_typ
-0002ce70: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
+0002ce00: 2020 2020 2020 2320 2020 2020 2020 6f72        #       or
+0002ce10: 2067 6c6f 6261 6c6c 7920 6170 706c 7920   globally apply 
+0002ce20: 7468 6973 2072 756c 6520 736f 2074 6861  this rule so tha
+0002ce30: 7420 6172 7220 3d20 6172 7220 2b20 350d  t arr = arr + 5.
+0002ce40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002ce50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ce60: 2020 2020 2023 2069 6620 7363 616c 6172       # if scalar
+0002ce70: 7320 3d3d 2031 3a0d 0a20 2020 2020 2020  s == 1:..       
 0002ce80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ce90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cea0: 2020 2020 6172 7261 795f 7479 7065 732c      array_types,
-0002ceb0: 2073 6361 6c61 725f 7479 7065 732c 2073   scalar_types, s
-0002cec0: 6361 6c61 725f 7661 6c0d 0a20 2020 2020  calar_val..     
+0002ce90: 2020 2020 2020 2020 2020 2020 2023 2073               # s
+0002cea0: 7065 6369 616c 2063 6173 6520 6861 7665  pecial case have
+0002ceb0: 2074 6f20 7365 6520 6966 2073 6361 6c61   to see if scala
+0002cec0: 7220 6973 2069 6e20 7261 6e67 650d 0a20  r is in range.. 
 0002ced0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002cee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cef0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-0002cf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cf10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cf20: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-0002cf30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cf40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cf50: 2020 2020 2066 696e 616c 5f64 7479 7065       final_dtype
-0002cf60: 203d 206e 702e 6669 6e64 5f63 6f6d 6d6f   = np.find_commo
-0002cf70: 6e5f 7479 7065 2861 7272 6179 5f74 7970  n_type(array_typ
-0002cf80: 6573 2c20 7363 616c 6172 5f74 7970 6573  es, scalar_types
-0002cf90: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0002cfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cfb0: 2023 2069 6620 7765 2061 7265 2061 6464   # if we are add
-0002cfc0: 696e 6720 7477 6f20 7374 7269 6e67 7320  ing two strings 
-0002cfd0: 6f72 2075 6e69 636f 6465 2c20 7370 6563  or unicode, spec
-0002cfe0: 6961 6c20 6361 7365 0d0a 2020 2020 2020  ial case..      
-0002cff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d000: 2020 2020 2020 2320 6966 2077 6520 7468        # if we th
-0002d010: 696e 6b20 7468 6520 6669 6e61 6c20 6474  ink the final dt
-0002d020: 7970 6520 6973 2061 6e20 6f62 6a65 6374  ype is an object
-0002d030: 2c20 6368 6563 6b20 6966 2074 6869 7320  , check if this 
-0002d040: 6973 2072 6561 6c6c 7920 7477 6f20 7374  is really two st
-0002d050: 7269 6e67 730d 0a20 2020 2020 2020 2020  rings..         
+0002cef0: 2020 2069 6620 7479 7065 2861 7267 735b     if type(args[
+0002cf00: 305d 2920 696e 2053 6361 6c61 7254 7970  0]) in ScalarTyp
+0002cf10: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0002cf20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cf30: 2020 2020 2020 2020 2020 2020 7363 616c              scal
+0002cf40: 6172 5f76 616c 203d 2061 7267 735b 305d  ar_val = args[0]
+0002cf50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002cf60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cf70: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0002cf80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cf90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cfa0: 2020 2020 2073 6361 6c61 725f 7661 6c20       scalar_val 
+0002cfb0: 3d20 6172 6773 5b31 5d0d 0a0d 0a20 2020  = args[1]....   
+0002cfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cfe0: 2066 696e 616c 5f64 7479 7065 203d 206c   final_dtype = l
+0002cff0: 6f67 6963 616c 5f66 696e 645f 636f 6d6d  ogical_find_comm
+0002d000: 6f6e 5f74 7970 6528 6172 7261 795f 7479  on_type(array_ty
+0002d010: 7065 732c 2073 6361 6c61 725f 7479 7065  pes, scalar_type
+0002d020: 732c 2073 6361 6c61 725f 7661 6c29 0d0a  s, scalar_val)..
+0002d030: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002d040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d050: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
 0002d060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d070: 2020 2069 6620 6661 7374 5f66 756e 6374     if fast_funct
-0002d080: 696f 6e20 3d3d 204d 4154 485f 4f50 4552  ion == MATH_OPER
-0002d090: 4154 494f 4e2e 4144 4420 616e 6420 280d  ATION.ADD and (.
-0002d0a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d0c0: 2061 7272 6179 5f74 7970 6573 5b30 5d2e   array_types[0].
-0002d0d0: 6e75 6d20 3d3d 2031 3820 6f72 2061 7272  num == 18 or arr
-0002d0e0: 6179 5f74 7970 6573 5b30 5d2e 6e75 6d20  ay_types[0].num 
-0002d0f0: 3d3d 2031 390d 0a20 2020 2020 2020 2020  == 19..         
+0002d070: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+0002d080: 6e74 0d0a 2020 2020 2020 2020 2020 2020  nt..            
+0002d090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d0a0: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
+0002d0b0: 6368 6563 6b20 666f 7220 6275 6720 7768  check for bug wh
+0002d0c0: 6572 6520 6e70 2e69 6e74 3332 2074 7970  ere np.int32 typ
+0002d0d0: 6520 3720 6765 7473 2066 6c69 7070 6564  e 7 gets flipped
+0002d0e0: 2074 6f20 6e70 2e69 6e74 3332 2074 7970   to np.int32 typ
+0002d0f0: 6520 350d 0a20 2020 2020 2020 2020 2020  e 5..           
 0002d100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d110: 2020 2029 3a0d 0a20 2020 2020 2020 2020     ):..         
-0002d120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d130: 2020 2020 2020 2023 2061 7373 756d 6520         # assume 
-0002d140: 6164 6469 7469 6f6e 206f 6620 7477 6f20  addition of two 
-0002d150: 7374 7269 6e67 730d 0a20 2020 2020 2020  strings..       
-0002d160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d170: 2020 2020 2020 2020 2066 696e 616c 5f64           final_d
-0002d180: 7479 7065 203d 2061 7272 6179 5f74 7970  type = array_typ
-0002d190: 6573 5b30 5d0d 0a20 2020 2020 2020 2020  es[0]..         
-0002d1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d1b0: 2020 2020 2020 2069 6620 7363 616c 6172         if scalar
-0002d1c0: 7320 213d 2030 3a0d 0a20 2020 2020 2020  s != 0:..       
-0002d1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d1e0: 2020 2020 2020 2020 2020 2020 2023 2077               # w
-0002d1f0: 6520 6861 7665 2061 2073 6361 6c61 722e  e have a scalar.
-0002d200: 2e2e 206d 616b 6520 7375 7265 2077 6520  .. make sure we 
-0002d210: 636f 6e76 6572 7420 6974 0d0a 2020 2020  convert it..    
-0002d220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d110: 2020 2020 2020 2020 2069 6620 7363 616c           if scal
+0002d120: 6172 7320 3d3d 2030 2061 6e64 206c 656e  ars == 0 and len
+0002d130: 2861 7272 6179 5f74 7970 6573 2920 3d3d  (array_types) ==
+0002d140: 2032 2061 6e64 2028 6172 7261 795f 7479   2 and (array_ty
+0002d150: 7065 735b 305d 203d 3d20 6172 7261 795f  pes[0] == array_
+0002d160: 7479 7065 735b 315d 293a 0d0a 2020 2020  types[1]):..    
+0002d170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d190: 2020 2020 6669 6e61 6c5f 6474 7970 6520      final_dtype 
+0002d1a0: 3d20 6172 7261 795f 7479 7065 735b 305d  = array_types[0]
+0002d1b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002d1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d1d0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0002d1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d200: 2020 2020 2023 2063 6865 636b 2066 6f72       # check for
+0002d210: 2069 6e74 2073 6361 6c61 7220 6167 6169   int scalar agai
+0002d220: 6e73 7420 696e 740d 0a20 2020 2020 2020  nst int..       
 0002d230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d240: 6966 2074 7970 6528 6172 6773 5b30 5d29  if type(args[0])
-0002d250: 2069 6e20 5363 616c 6172 5479 7065 3a0d   in ScalarType:.
-0002d260: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d280: 2020 2020 2020 2020 2023 2066 6978 2073           # fix s
-0002d290: 6361 6c61 7220 7479 7065 206d 616b 6520  calar type make 
-0002d2a0: 7375 7265 2073 7472 696e 6720 6f72 2075  sure string or u
-0002d2b0: 6e69 636f 6465 0d0a 2020 2020 2020 2020  nicode..        
-0002d2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d2e0: 6966 2061 7272 6179 5f74 7970 6573 5b30  if array_types[0
-0002d2f0: 5d2e 6e75 6d20 3d3d 2031 383a 0d0a 2020  ].num == 18:..  
+0002d240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d250: 2023 2062 7567 2077 6865 7265 206e 702e   # bug where np.
+0002d260: 696e 7438 2061 6e64 2074 6865 6e20 6164  int8 and then ad
+0002d270: 6420 2b31 3939 3920 6f72 206c 6172 6765  d +1999 or large
+0002d280: 7220 6e75 6d62 6572 2e20 206e 6565 6420  r number.  need 
+0002d290: 746f 2075 7063 6173 740d 0a20 2020 2020  to upcast..     
+0002d2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d2c0: 2020 2069 6620 7363 616c 6172 7320 3d3d     if scalars ==
+0002d2d0: 2031 2061 6e64 2061 7272 6179 5f74 7970   1 and array_typ
+0002d2e0: 6573 5b30 5d2e 6e75 6d20 3c3d 2031 303a  es[0].num <= 10:
+0002d2f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 0002d300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d320: 2020 2020 2020 2020 2020 6172 6773 5b30            args[0
-0002d330: 5d20 3d20 7374 722e 656e 636f 6465 2873  ] = str.encode(s
-0002d340: 7472 2861 7267 735b 305d 2929 0d0a 2020  tr(args[0]))..  
+0002d310: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002d320: 2074 7970 6528 6172 6773 5b30 5d29 2069   type(args[0]) i
+0002d330: 6e20 5363 616c 6172 5479 7065 3a0d 0a20  n ScalarType:.. 
+0002d340: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002d350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d370: 2020 2020 2020 6966 2061 7272 6179 5f74        if array_t
-0002d380: 7970 6573 5b30 5d2e 6e75 6d20 3d3d 2031  ypes[0].num == 1
-0002d390: 393a 0d0a 2020 2020 2020 2020 2020 2020  9:..            
+0002d360: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0002d370: 6361 6c61 725f 7661 6c20 3d20 6172 6773  calar_val = args
+0002d380: 5b30 5d0d 0a20 2020 2020 2020 2020 2020  [0]..           
+0002d390: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002d3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d3c0: 6172 6773 5b30 5d20 3d20 7374 7228 6172  args[0] = str(ar
-0002d3d0: 6773 5b30 5d29 0d0a 2020 2020 2020 2020  gs[0])..        
-0002d3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d3f0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0002d400: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002d3b0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+0002d3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d3e0: 2020 2020 2020 2020 7363 616c 6172 5f76          scalar_v
+0002d3f0: 616c 203d 2061 7267 735b 315d 0d0a 0d0a  al = args[1]....
+0002d400: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002d410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d420: 2020 2020 2020 2020 2020 2069 6620 6172             if ar
-0002d430: 7261 795f 7479 7065 735b 305d 2e6e 756d  ray_types[0].num
-0002d440: 203d 3d20 3138 3a0d 0a20 2020 2020 2020   == 18:..       
-0002d450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d420: 2020 2020 2020 2020 2020 2020 6669 6e61              fina
+0002d430: 6c5f 6474 7970 6520 3d20 6c6f 6769 6361  l_dtype = logica
+0002d440: 6c5f 6669 6e64 5f63 6f6d 6d6f 6e5f 7479  l_find_common_ty
+0002d450: 7065 280d 0a20 2020 2020 2020 2020 2020  pe(..           
 0002d460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d470: 2020 2020 2061 7267 735b 315d 203d 2073       args[1] = s
-0002d480: 7472 2e65 6e63 6f64 6528 7374 7228 6172  tr.encode(str(ar
-0002d490: 6773 5b31 5d29 290d 0a20 2020 2020 2020  gs[1]))..       
-0002d4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d480: 2020 2020 2061 7272 6179 5f74 7970 6573       array_types
+0002d490: 2c20 7363 616c 6172 5f74 7970 6573 2c20  , scalar_types, 
+0002d4a0: 7363 616c 6172 5f76 616c 0d0a 2020 2020  scalar_val..    
 0002d4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d4c0: 2069 6620 6172 7261 795f 7479 7065 735b   if array_types[
-0002d4d0: 305d 2e6e 756d 203d 3d20 3139 3a0d 0a20  0].num == 19:.. 
+0002d4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d4d0: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
 0002d4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002d4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d500: 2020 2020 2020 2020 2020 2061 7267 735b             args[
-0002d510: 315d 203d 2073 7472 2861 7267 735b 315d  1] = str(args[1]
-0002d520: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0002d530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d540: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-0002d550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d560: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0002d570: 7765 2068 6176 6520 7477 6f20 6172 7261  we have two arra
-0002d580: 7973 2c20 6966 206f 6e65 2061 7272 6179  ys, if one array
-0002d590: 2069 7320 6e6f 7420 7072 6f70 6572 2073   is not proper s
-0002d5a0: 7472 696e 6720 7479 7065 2c20 636f 6e76  tring type, conv
-0002d5b0: 6572 7420 6974 0d0a 2020 2020 2020 2020  ert it..        
-0002d5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d5d0: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-0002d5e0: 7272 6179 5f74 7970 6573 5b31 5d20 213d  rray_types[1] !=
-0002d5f0: 2066 696e 616c 5f64 7479 7065 3a0d 0a20   final_dtype:.. 
-0002d600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d620: 2020 2020 2020 2069 6620 6172 7261 795f         if array_
-0002d630: 7479 7065 735b 305d 2e6e 756d 203d 3d20  types[0].num == 
-0002d640: 3138 3a0d 0a20 2020 2020 2020 2020 2020  18:..           
-0002d650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d670: 2061 7267 735b 315d 203d 2061 7267 735b   args[1] = args[
-0002d680: 315d 2e61 7374 7970 6528 2253 2229 0d0a  1].astype("S")..
+0002d500: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+0002d510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d530: 2020 2020 2020 6669 6e61 6c5f 6474 7970        final_dtyp
+0002d540: 6520 3d20 6e70 2e66 696e 645f 636f 6d6d  e = np.find_comm
+0002d550: 6f6e 5f74 7970 6528 6172 7261 795f 7479  on_type(array_ty
+0002d560: 7065 732c 2073 6361 6c61 725f 7479 7065  pes, scalar_type
+0002d570: 7329 0d0a 0d0a 2020 2020 2020 2020 2020  s)....          
+0002d580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d590: 2020 2320 6966 2077 6520 6172 6520 6164    # if we are ad
+0002d5a0: 6469 6e67 2074 776f 2073 7472 696e 6773  ding two strings
+0002d5b0: 206f 7220 756e 6963 6f64 652c 2073 7065   or unicode, spe
+0002d5c0: 6369 616c 2063 6173 650d 0a20 2020 2020  cial case..     
+0002d5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d5e0: 2020 2020 2020 2023 2069 6620 7765 2074         # if we t
+0002d5f0: 6869 6e6b 2074 6865 2066 696e 616c 2064  hink the final d
+0002d600: 7479 7065 2069 7320 616e 206f 626a 6563  type is an objec
+0002d610: 742c 2063 6865 636b 2069 6620 7468 6973  t, check if this
+0002d620: 2069 7320 7265 616c 6c79 2074 776f 2073   is really two s
+0002d630: 7472 696e 6773 0d0a 2020 2020 2020 2020  trings..        
+0002d640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d650: 2020 2020 6966 2066 6173 745f 6675 6e63      if fast_func
+0002d660: 7469 6f6e 203d 3d20 4d41 5448 5f4f 5045  tion == MATH_OPE
+0002d670: 5241 5449 4f4e 2e41 4444 2061 6e64 2028  RATION.ADD and (
+0002d680: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 0002d690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d6b0: 2020 2020 2020 2020 6966 2061 7272 6179          if array
-0002d6c0: 5f74 7970 6573 5b30 5d2e 6e75 6d20 3d3d  _types[0].num ==
-0002d6d0: 2031 393a 0d0a 2020 2020 2020 2020 2020   19:..          
+0002d6a0: 2020 6172 7261 795f 7479 7065 735b 305d    array_types[0]
+0002d6b0: 2e6e 756d 203d 3d20 3138 206f 7220 6172  .num == 18 or ar
+0002d6c0: 7261 795f 7479 7065 735b 305d 2e6e 756d  ray_types[0].num
+0002d6d0: 203d 3d20 3139 0d0a 2020 2020 2020 2020   == 19..        
 0002d6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d700: 2020 6172 6773 5b31 5d20 3d20 6172 6773    args[1] = args
-0002d710: 5b31 5d2e 6173 7479 7065 2822 5522 290d  [1].astype("U").
-0002d720: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0002d730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d740: 2020 2069 6620 4661 7374 4172 7261 792e     if FastArray.
-0002d750: 5665 7262 6f73 6520 3e20 323a 0d0a 2020  Verbose > 2:..  
-0002d760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d780: 2020 7072 696e 7428 2241 4444 2073 7472    print("ADD str
-0002d790: 696e 6720 6f70 6572 6174 696f 6e22 2c20  ing operation", 
-0002d7a0: 6172 7261 795f 7479 7065 732c 2073 6361  array_types, sca
-0002d7b0: 6c61 725f 7479 7065 7329 0d0a 0d0a 2020  lar_types)....  
-0002d7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d7d0: 2020 2020 2020 2020 2020 656c 6966 2073            elif s
-0002d7e0: 6361 6c61 7273 203d 3d20 303a 0d0a 2020  calars == 0:..  
-0002d7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d800: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002d810: 2061 7272 6179 5f74 7970 6573 5b30 5d20   array_types[0] 
-0002d820: 213d 2061 7272 6179 5f74 7970 6573 5b31  != array_types[1
-0002d830: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
-0002d840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d850: 2020 2020 2020 2020 2320 5550 4341 5354          # UPCAST
-0002d860: 2052 554c 4553 0d0a 2020 2020 2020 2020   RULES..        
-0002d870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d880: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-0002d890: 7272 6179 5f74 7970 6573 5b30 5d20 3d3d  rray_types[0] ==
-0002d8a0: 2066 696e 616c 5f64 7479 7065 2061 6e64   final_dtype and
-0002d8b0: 2061 7272 6179 5f74 7970 6573 5b31 5d20   array_types[1] 
-0002d8c0: 213d 2066 696e 616c 5f64 7479 7065 3a0d  != final_dtype:.
-0002d8d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d6f0: 2020 2020 293a 0d0a 2020 2020 2020 2020      ):..        
+0002d700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d710: 2020 2020 2020 2020 2320 6173 7375 6d65          # assume
+0002d720: 2061 6464 6974 696f 6e20 6f66 2074 776f   addition of two
+0002d730: 2073 7472 696e 6773 0d0a 2020 2020 2020   strings..      
+0002d740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d750: 2020 2020 2020 2020 2020 6669 6e61 6c5f            final_
+0002d760: 6474 7970 6520 3d20 6172 7261 795f 7479  dtype = array_ty
+0002d770: 7065 735b 305d 0d0a 2020 2020 2020 2020  pes[0]..        
+0002d780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d790: 2020 2020 2020 2020 6966 2073 6361 6c61          if scala
+0002d7a0: 7273 2021 3d20 303a 0d0a 2020 2020 2020  rs != 0:..      
+0002d7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d7c0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002d7d0: 7765 2068 6176 6520 6120 7363 616c 6172  we have a scalar
+0002d7e0: 2e2e 2e20 6d61 6b65 2073 7572 6520 7765  ... make sure we
+0002d7f0: 2063 6f6e 7665 7274 2069 740d 0a20 2020   convert it..   
+0002d800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d820: 2069 6620 7479 7065 2861 7267 735b 305d   if type(args[0]
+0002d830: 2920 696e 2053 6361 6c61 7254 7970 653a  ) in ScalarType:
+0002d840: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002d850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d860: 2020 2020 2020 2020 2020 2320 6669 7820            # fix 
+0002d870: 7363 616c 6172 2074 7970 6520 6d61 6b65  scalar type make
+0002d880: 2073 7572 6520 7374 7269 6e67 206f 7220   sure string or 
+0002d890: 756e 6963 6f64 650d 0a20 2020 2020 2020  unicode..       
+0002d8a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d8c0: 2069 6620 6172 7261 795f 7479 7065 735b   if array_types[
+0002d8d0: 305d 2e6e 756d 203d 3d20 3138 3a0d 0a20  0].num == 18:.. 
 0002d8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d8f0: 2020 2020 2020 2020 2023 2070 7269 6e74           # print
-0002d900: 2822 2121 2175 7063 6173 7420 7275 6c65  ("!!!upcast rule
-0002d910: 7320 7365 636f 6e64 222c 2061 7272 6179  s second", array
-0002d920: 5f74 7970 6573 5b30 5d2c 2061 7272 6179  _types[0], array
-0002d930: 5f74 7970 6573 5b31 5d2c 2066 696e 616c  _types[1], final
-0002d940: 5f64 7479 7065 290d 0a20 2020 2020 2020  _dtype)..       
-0002d950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d970: 2023 2063 6f6e 7665 7274 2074 6f20 7468   # convert to th
-0002d980: 6520 7072 6f70 6572 2074 7970 6520 6265  e proper type be
-0002d990: 666f 7220 6361 6c63 756c 6174 696f 6e0d  for calculation.
-0002d9a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d9c0: 2020 2020 2020 2020 2061 7267 735b 315d           args[1]
-0002d9d0: 203d 205f 4153 5459 5045 2861 7267 735b   = _ASTYPE(args[
-0002d9e0: 315d 2c20 6669 6e61 6c5f 6474 7970 6529  1], final_dtype)
-0002d9f0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0002da00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002da10: 2020 2020 2020 2020 656c 6966 2061 7272          elif arr
-0002da20: 6179 5f74 7970 6573 5b30 5d20 213d 2066  ay_types[0] != f
-0002da30: 696e 616c 5f64 7479 7065 2061 6e64 2061  inal_dtype and a
-0002da40: 7272 6179 5f74 7970 6573 5b31 5d20 3d3d  rray_types[1] ==
-0002da50: 2066 696e 616c 5f64 7479 7065 3a0d 0a20   final_dtype:.. 
-0002da60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002da70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002da80: 2020 2020 2020 2023 2070 7269 6e74 2822         # print("
-0002da90: 2121 2175 7063 6173 7420 7275 6c65 7320  !!!upcast rules 
-0002daa0: 6669 7273 7422 2c20 6172 7261 795f 7479  first", array_ty
-0002dab0: 7065 735b 305d 2c20 6172 7261 795f 7479  pes[0], array_ty
-0002dac0: 7065 735b 315d 2c20 6669 6e61 6c5f 6474  pes[1], final_dt
-0002dad0: 7970 6529 0d0a 2020 2020 2020 2020 2020  ype)..          
-0002dae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002daf0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0002db00: 636f 6e76 6572 7420 746f 2074 6865 2070  convert to the p
-0002db10: 726f 7065 7220 7479 7065 2062 6566 6f72  roper type befor
-0002db20: 2063 616c 6375 6c61 7469 6f6e 0d0a 2020   calculation..  
+0002d8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d900: 2020 2020 2020 2020 2020 2061 7267 735b             args[
+0002d910: 305d 203d 2073 7472 2e65 6e63 6f64 6528  0] = str.encode(
+0002d920: 7374 7228 6172 6773 5b30 5d29 290d 0a20  str(args[0])).. 
+0002d930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d950: 2020 2020 2020 2069 6620 6172 7261 795f         if array_
+0002d960: 7479 7065 735b 305d 2e6e 756d 203d 3d20  types[0].num == 
+0002d970: 3139 3a0d 0a20 2020 2020 2020 2020 2020  19:..           
+0002d980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d9a0: 2061 7267 735b 305d 203d 2073 7472 2861   args[0] = str(a
+0002d9b0: 7267 735b 305d 290d 0a20 2020 2020 2020  rgs[0])..       
+0002d9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d9d0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0002d9e0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0002d9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002da00: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+0002da10: 7272 6179 5f74 7970 6573 5b30 5d2e 6e75  rray_types[0].nu
+0002da20: 6d20 3d3d 2031 383a 0d0a 2020 2020 2020  m == 18:..      
+0002da30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002da40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002da50: 2020 2020 2020 6172 6773 5b31 5d20 3d20        args[1] = 
+0002da60: 7374 722e 656e 636f 6465 2873 7472 2861  str.encode(str(a
+0002da70: 7267 735b 315d 2929 0d0a 2020 2020 2020  rgs[1]))..      
+0002da80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002da90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002daa0: 2020 6966 2061 7272 6179 5f74 7970 6573    if array_types
+0002dab0: 5b30 5d2e 6e75 6d20 3d3d 2031 393a 0d0a  [0].num == 19:..
+0002dac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dae0: 2020 2020 2020 2020 2020 2020 6172 6773              args
+0002daf0: 5b31 5d20 3d20 7374 7228 6172 6773 5b31  [1] = str(args[1
+0002db00: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
+0002db10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002db20: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
 0002db30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002db40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002db50: 2020 2020 2020 6172 6773 5b30 5d20 3d20        args[0] = 
-0002db60: 5f41 5354 5950 4528 6172 6773 5b30 5d2c  _ASTYPE(args[0],
-0002db70: 2066 696e 616c 5f64 7479 7065 290d 0a20   final_dtype).. 
-0002db80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002db90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dba0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-0002dbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dbd0: 2020 2320 736f 6d65 7469 6d65 7320 626f    # sometimes bo
-0002dbe0: 7468 206f 6620 7468 656d 206d 7573 7420  th of them must 
-0002dbf0: 6265 2075 7063 6173 742e 2e2e 0d0a 2020  be upcast.....  
-0002dc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dc20: 2020 2020 2020 2320 636f 6e73 6964 6572        # consider
-0002dc30: 2020 696e 7438 202a 2075 696e 7438 203d    int8 * uint8 =
-0002dc40: 3d3e 2077 696c 6c20 7570 6361 7374 2074  => will upcast t
-0002dc50: 6f20 696e 7431 360d 0a20 2020 2020 2020  o int16..       
-0002dc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dc70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dc80: 2023 2070 7269 6e74 2822 2121 2163 616e   # print("!!!can
-0002dc90: 6e6f 7420 756e 6465 7273 7461 6e64 2075  not understand u
-0002dca0: 7063 6173 7420 7275 6c65 7322 2c20 6172  pcast rules", ar
-0002dcb0: 7261 7974 7970 6573 5b30 5d2c 2061 7272  raytypes[0], arr
-0002dcc0: 6179 7479 7065 735b 315d 2c20 6669 6e61  aytypes[1], fina
-0002dcd0: 6c5f 6474 7970 6529 0d0a 2020 2020 2020  l_dtype)..      
-0002dce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dcf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dd00: 2020 6172 6773 5b30 5d20 3d20 5f41 5354    args[0] = _AST
-0002dd10: 5950 4528 6172 6773 5b30 5d2c 2066 696e  YPE(args[0], fin
-0002dd20: 616c 5f64 7479 7065 290d 0a20 2020 2020  al_dtype)..     
-0002dd30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002db40: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0002db50: 2077 6520 6861 7665 2074 776f 2061 7272   we have two arr
+0002db60: 6179 732c 2069 6620 6f6e 6520 6172 7261  ays, if one arra
+0002db70: 7920 6973 206e 6f74 2070 726f 7065 7220  y is not proper 
+0002db80: 7374 7269 6e67 2074 7970 652c 2063 6f6e  string type, con
+0002db90: 7665 7274 2069 740d 0a20 2020 2020 2020  vert it..       
+0002dba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dbb0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002dbc0: 6172 7261 795f 7479 7065 735b 315d 2021  array_types[1] !
+0002dbd0: 3d20 6669 6e61 6c5f 6474 7970 653a 0d0a  = final_dtype:..
+0002dbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dc00: 2020 2020 2020 2020 6966 2061 7272 6179          if array
+0002dc10: 5f74 7970 6573 5b30 5d2e 6e75 6d20 3d3d  _types[0].num ==
+0002dc20: 2031 383a 0d0a 2020 2020 2020 2020 2020   18:..          
+0002dc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dc50: 2020 6172 6773 5b31 5d20 3d20 6172 6773    args[1] = args
+0002dc60: 5b31 5d2e 6173 7479 7065 2822 5322 290d  [1].astype("S").
+0002dc70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002dc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dc90: 2020 2020 2020 2020 2069 6620 6172 7261           if arra
+0002dca0: 795f 7479 7065 735b 305d 2e6e 756d 203d  y_types[0].num =
+0002dcb0: 3d20 3139 3a0d 0a20 2020 2020 2020 2020  = 19:..         
+0002dcc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dcd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dce0: 2020 2061 7267 735b 315d 203d 2061 7267     args[1] = arg
+0002dcf0: 735b 315d 2e61 7374 7970 6528 2255 2229  s[1].astype("U")
+0002dd00: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0002dd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dd20: 2020 2020 6966 2046 6173 7441 7272 6179      if FastArray
+0002dd30: 2e56 6572 626f 7365 203e 2032 3a0d 0a20  .Verbose > 2:.. 
 0002dd40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dd50: 2020 2061 7267 735b 315d 203d 205f 4153     args[1] = _AS
-0002dd60: 5459 5045 2861 7267 735b 315d 2c20 6669  TYPE(args[1], fi
-0002dd70: 6e61 6c5f 6474 7970 6529 0d0a 2020 2020  nal_dtype)..    
-0002dd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dda0: 2020 2020 2320 544a 4420 6368 6563 6b20      # TJD check 
-0002ddb0: 6c6f 6769 6320 6865 7265 2e2e 2e20 7768  logic here... wh
-0002ddc0: 6174 2064 6f65 7320 6e75 6d70 7920 7768  at does numpy wh
-0002ddd0: 656e 2069 6e74 2a20 2a20 7569 6e74 3820  en int* * uint8 
-0002dde0: 3f20 7370 6565 6420 7465 7374 0d0a 2020  ? speed test..  
-0002ddf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002de00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002de10: 2020 2020 2020 2323 5573 654e 756d 7079        ##UseNumpy
-0002de20: 203d 2054 7275 650d 0a20 2020 2020 2020   = True..       
-0002de30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002de40: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0002dd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dd60: 2020 2070 7269 6e74 2822 4144 4420 7374     print("ADD st
+0002dd70: 7269 6e67 206f 7065 7261 7469 6f6e 222c  ring operation",
+0002dd80: 2061 7272 6179 5f74 7970 6573 2c20 7363   array_types, sc
+0002dd90: 616c 6172 5f74 7970 6573 290d 0a0d 0a20  alar_types).... 
+0002dda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ddb0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0002ddc0: 7363 616c 6172 7320 3d3d 2030 3a0d 0a20  scalars == 0:.. 
+0002ddd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dde0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002ddf0: 6620 6172 7261 795f 7479 7065 735b 305d  f array_types[0]
+0002de00: 2021 3d20 6172 7261 795f 7479 7065 735b   != array_types[
+0002de10: 315d 3a0d 0a20 2020 2020 2020 2020 2020  1]:..           
+0002de20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002de30: 2020 2020 2020 2020 2023 2055 5043 4153           # UPCAS
+0002de40: 5420 5255 4c45 530d 0a20 2020 2020 2020  T RULES..       
 0002de50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002de60: 2020 2020 2020 2020 2020 2020 2320 5550              # UP
-0002de70: 4341 5354 2052 554c 4553 2077 6865 6e20  CAST RULES when 
-0002de80: 6f6e 6520 6973 2061 2073 6361 6c61 720d  one is a scalar.
-0002de90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002dea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002deb0: 2069 6620 6172 7261 795f 7479 7065 735b   if array_types[
-0002dec0: 305d 2021 3d20 6669 6e61 6c5f 6474 7970  0] != final_dtyp
-0002ded0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0002dee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002def0: 2020 2020 2020 2020 2320 7768 6963 6820          # which 
-0002df00: 6172 6775 6d65 6e74 2069 7320 7468 6520  argument is the 
-0002df10: 7363 616c 6172 3f20 2063 6f6e 7665 7274  scalar?  convert
-0002df20: 2074 6865 206f 7468 6572 206f 6e65 0d0a   the other one..
+0002de60: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002de70: 6172 7261 795f 7479 7065 735b 305d 203d  array_types[0] =
+0002de80: 3d20 6669 6e61 6c5f 6474 7970 6520 616e  = final_dtype an
+0002de90: 6420 6172 7261 795f 7479 7065 735b 315d  d array_types[1]
+0002dea0: 2021 3d20 6669 6e61 6c5f 6474 7970 653a   != final_dtype:
+0002deb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002dec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ded0: 2020 2020 2020 2020 2020 2320 7072 696e            # prin
+0002dee0: 7428 2221 2121 7570 6361 7374 2072 756c  t("!!!upcast rul
+0002def0: 6573 2073 6563 6f6e 6422 2c20 6172 7261  es second", arra
+0002df00: 795f 7479 7065 735b 305d 2c20 6172 7261  y_types[0], arra
+0002df10: 795f 7479 7065 735b 315d 2c20 6669 6e61  y_types[1], fina
+0002df20: 6c5f 6474 7970 6529 0d0a 2020 2020 2020  l_dtype)..      
 0002df30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002df40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002df50: 2020 2020 6966 2074 7970 6528 6172 6773      if type(args
-0002df60: 5b30 5d29 2069 6e20 5363 616c 6172 5479  [0]) in ScalarTy
-0002df70: 7065 3a0d 0a20 2020 2020 2020 2020 2020  pe:..           
-0002df80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002df90: 2020 2020 2020 2020 2020 2020 2023 2070               # p
-0002dfa0: 7269 6e74 2822 636f 6e76 6572 7469 6e67  rint("converting
-0002dfb0: 2061 7267 3220 6672 6f6d 222c 2061 7267   arg2 from", arg
-0002dfc0: 735b 315d 2c20 6669 6e61 6c5f 6474 7970  s[1], final_dtyp
-0002dfd0: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
+0002df50: 2020 2320 636f 6e76 6572 7420 746f 2074    # convert to t
+0002df60: 6865 2070 726f 7065 7220 7479 7065 2062  he proper type b
+0002df70: 6566 6f72 2063 616c 6375 6c61 7469 6f6e  efor calculation
+0002df80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002df90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dfa0: 2020 2020 2020 2020 2020 6172 6773 5b31            args[1
+0002dfb0: 5d20 3d20 5f41 5354 5950 4528 6172 6773  ] = _ASTYPE(args
+0002dfc0: 5b31 5d2c 2066 696e 616c 5f64 7479 7065  [1], final_dtype
+0002dfd0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
 0002dfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dff0: 2020 2020 2020 2020 2020 2020 6172 6773              args
-0002e000: 5b31 5d20 3d20 5f41 5354 5950 4528 6172  [1] = _ASTYPE(ar
-0002e010: 6773 5b31 5d2c 2066 696e 616c 5f64 7479  gs[1], final_dty
-0002e020: 7065 290d 0a20 2020 2020 2020 2020 2020  pe)..           
-0002e030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e040: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+0002dff0: 2020 2020 2020 2020 2065 6c69 6620 6172           elif ar
+0002e000: 7261 795f 7479 7065 735b 305d 2021 3d20  ray_types[0] != 
+0002e010: 6669 6e61 6c5f 6474 7970 6520 616e 6420  final_dtype and 
+0002e020: 6172 7261 795f 7479 7065 735b 315d 203d  array_types[1] =
+0002e030: 3d20 6669 6e61 6c5f 6474 7970 653a 0d0a  = final_dtype:..
+0002e040: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002e050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e070: 2020 2020 2020 2020 2320 7072 696e 7428          # print(
-0002e080: 2263 6f6e 7665 7274 696e 6720 6172 6731  "converting arg1
-0002e090: 2066 726f 6d20 222c 2061 7267 735b 305d   from ", args[0]
-0002e0a0: 2c20 6669 6e61 6c5f 6474 7970 6529 0d0a  , final_dtype)..
-0002e0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e060: 2020 2020 2020 2020 2320 7072 696e 7428          # print(
+0002e070: 2221 2121 7570 6361 7374 2072 756c 6573  "!!!upcast rules
+0002e080: 2066 6972 7374 222c 2061 7272 6179 5f74   first", array_t
+0002e090: 7970 6573 5b30 5d2c 2061 7272 6179 5f74  ypes[0], array_t
+0002e0a0: 7970 6573 5b31 5d2c 2066 696e 616c 5f64  ypes[1], final_d
+0002e0b0: 7479 7065 290d 0a20 2020 2020 2020 2020  type)..         
 0002e0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e0d0: 2020 2020 2020 2020 6172 6773 5b30 5d20          args[0] 
-0002e0e0: 3d20 5f41 5354 5950 4528 6172 6773 5b30  = _ASTYPE(args[0
-0002e0f0: 5d2c 2066 696e 616c 5f64 7479 7065 290d  ], final_dtype).
-0002e100: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-0002e110: 206e 6f74 2061 2062 696e 6172 7920 7566   not a binary uf
-0002e120: 756e 632c 2063 6865 636b 2066 6f72 2075  unc, check for u
-0002e130: 6e61 7279 2075 6675 6e63 0d0a 2020 2020  nary ufunc..    
-0002e140: 2020 2020 2020 2020 2320 6368 6563 6b20          # check 
-0002e150: 666f 7220 6a75 7374 2031 2069 6e70 7574  for just 1 input
-0002e160: 2028 756e 6172 7929 0d0a 0d0a 2020 2020   (unary)....    
-0002e170: 2020 2020 2020 2020 656c 6966 2028 7566          elif (uf
-0002e180: 756e 632e 6e69 6e20 3d3d 2031 2920 616e  unc.nin == 1) an
-0002e190: 6420 2875 6675 6e63 2e6e 6f75 7420 3d3d  d (ufunc.nout ==
-0002e1a0: 2031 293a 0d0a 2020 2020 2020 2020 2020   1):..          
-0002e1b0: 2020 2020 2020 2323 2323 2323 2323 2323        ##########
-0002e1c0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002e1d0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002e1e0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002e1f0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002e200: 230d 0a20 2020 2020 2020 2020 2020 2020  #..             
-0002e210: 2020 2023 2320 554e 4152 590d 0a20 2020     ## UNARY..   
-0002e220: 2020 2020 2020 2020 2020 2020 2023 2323               ###
-0002e230: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002e240: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002e250: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002e260: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0002e270: 2323 2323 2323 2323 0d0a 2020 2020 2020  ########..      
-0002e280: 2020 2020 2020 2020 2020 6661 7374 5f66            fast_f
-0002e290: 756e 6374 696f 6e20 3d20 6755 6e61 7279  unction = gUnary
-0002e2a0: 5546 756e 6373 2e67 6574 2875 6675 6e63  UFuncs.get(ufunc
-0002e2b0: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
-0002e2c0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-0002e2d0: 2020 2020 2020 2020 2020 2020 6966 2046              if F
-0002e2e0: 6173 7441 7272 6179 2e56 6572 626f 7365  astArray.Verbose
-0002e2f0: 203e 2031 3a0d 0a20 2020 2020 2020 2020   > 1:..         
-0002e300: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-0002e310: 2822 2a2a 2a75 6e6b 6e6f 776e 2075 6675  ("***unknown ufu
-0002e320: 6e63 2061 7267 2073 7479 6c65 3a20 222c  nc arg style: ",
-0002e330: 2075 6675 6e63 2e6e 696e 2c20 7566 756e   ufunc.nin, ufun
-0002e340: 632e 6e6f 7574 2c20 7566 756e 632c 2061  c.nout, ufunc, a
-0002e350: 7267 732c 206b 7761 7267 7329 0d0a 0d0a  rgs, kwargs)....
-0002e360: 2020 2020 2020 2020 2320 2d2d 2d2d 2d2d          # ------
-0002e370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002e380: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002e390: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002e3a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002e3b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002e3c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002e3d0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-0002e3e0: 2069 6620 6e6f 7420 4661 7374 4172 7261   if not FastArra
-0002e3f0: 792e 4661 7374 6572 5546 756e 633a 0d0a  y.FasterUFunc:..
-0002e400: 2020 2020 2020 2020 2020 2020 6661 7374              fast
-0002e410: 5f66 756e 6374 696f 6e20 3d20 4e6f 6e65  _function = None
-0002e420: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-0002e430: 6475 6365 5f66 756e 6320 3d20 4e6f 6e65  duce_func = None
-0002e440: 0d0a 0d0a 2020 2020 2020 2020 2320 6368  ....        # ch
-0002e450: 6563 6b20 666f 7220 6120 7265 6475 6365  eck for a reduce
-0002e460: 2066 756e 6320 6c69 6b65 2073 756d 206f   func like sum o
-0002e470: 7220 6d69 6e0d 0a20 2020 2020 2020 2069  r min..        i
-0002e480: 6620 7265 6475 6365 5f66 756e 6320 6973  f reduce_func is
-0002e490: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-0002e4a0: 2020 2020 2020 2020 6b65 6570 6469 6d73          keepdims
-0002e4b0: 3a20 626f 6f6c 203d 206b 7761 7267 732e  : bool = kwargs.
-0002e4c0: 6765 7428 226b 6565 7064 696d 7322 2c20  get("keepdims", 
-0002e4d0: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
-0002e4e0: 2020 2020 6966 2064 7479 7065 2069 7320      if dtype is 
-0002e4f0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-0002e500: 2020 2020 2020 2064 7479 7065 203d 2061         dtype = a
-0002e510: 7267 735b 305d 2e64 7479 7065 0d0a 0d0a  rgs[0].dtype....
-0002e520: 2020 2020 2020 2020 2020 2020 2320 4d61              # Ma
-0002e530: 7468 4c65 6467 6572 0d0a 2020 2020 2020  thLedger..      
-0002e540: 2020 2020 2020 7265 7375 6c74 203d 2054        result = T
-0002e550: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
-0002e560: 4c65 6467 6572 2e5f 5245 4455 4345 2861  Ledger._REDUCE(a
-0002e570: 7267 735b 305d 2c20 7265 6475 6365 5f66  rgs[0], reduce_f
-0002e580: 756e 6329 0d0a 2020 2020 2020 2020 2020  unc)..          
-0002e590: 2020 6368 6172 203d 206e 702e 6474 7970    char = np.dtyp
-0002e5a0: 6528 6474 7970 6529 2e63 6861 720d 0a20  e(dtype).char.. 
-0002e5b0: 2020 2020 2020 2020 2020 2069 6620 4661             if Fa
-0002e5c0: 7374 4172 7261 792e 5665 7262 6f73 6520  stArray.Verbose 
-0002e5d0: 3e20 313a 0d0a 2020 2020 2020 2020 2020  > 1:..          
-0002e5e0: 2020 2020 2020 7072 696e 7428 222a 2a2a        print("***
-0002e5f0: 7265 7375 6c74 2066 726f 6d20 7265 6475  result from redu
-0002e600: 6365 222c 2072 6573 756c 742c 2074 7970  ce", result, typ
-0002e610: 6528 7265 7375 6c74 292c 2064 7479 7065  e(result), dtype
-0002e620: 2c20 6368 6172 290d 0a0d 0a20 2020 2020  , char)....     
-0002e630: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
-0002e640: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-0002e650: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0002e660: 2070 7269 6e74 2822 7265 6475 6365 2063   print("reduce c
-0002e670: 616c 6c65 6422 2c20 7566 756e 632c 206b  alled", ufunc, k
-0002e680: 6565 7064 696d 732c 2064 7479 7065 290d  eepdims, dtype).
+0002e0d0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0002e0e0: 2063 6f6e 7665 7274 2074 6f20 7468 6520   convert to the 
+0002e0f0: 7072 6f70 6572 2074 7970 6520 6265 666f  proper type befo
+0002e100: 7220 6361 6c63 756c 6174 696f 6e0d 0a20  r calculation.. 
+0002e110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e130: 2020 2020 2020 2061 7267 735b 305d 203d         args[0] =
+0002e140: 205f 4153 5459 5045 2861 7267 735b 305d   _ASTYPE(args[0]
+0002e150: 2c20 6669 6e61 6c5f 6474 7970 6529 0d0a  , final_dtype)..
+0002e160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e180: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+0002e190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e1b0: 2020 2023 2073 6f6d 6574 696d 6573 2062     # sometimes b
+0002e1c0: 6f74 6820 6f66 2074 6865 6d20 6d75 7374  oth of them must
+0002e1d0: 2062 6520 7570 6361 7374 2e2e 2e0d 0a20   be upcast..... 
+0002e1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e200: 2020 2020 2020 2023 2063 6f6e 7369 6465         # conside
+0002e210: 7220 2069 6e74 3820 2a20 7569 6e74 3820  r  int8 * uint8 
+0002e220: 3d3d 3e20 7769 6c6c 2075 7063 6173 7420  ==> will upcast 
+0002e230: 746f 2069 6e74 3136 0d0a 2020 2020 2020  to int16..      
+0002e240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e260: 2020 2320 7072 696e 7428 2221 2121 6361    # print("!!!ca
+0002e270: 6e6e 6f74 2075 6e64 6572 7374 616e 6420  nnot understand 
+0002e280: 7570 6361 7374 2072 756c 6573 222c 2061  upcast rules", a
+0002e290: 7272 6179 7479 7065 735b 305d 2c20 6172  rraytypes[0], ar
+0002e2a0: 7261 7974 7970 6573 5b31 5d2c 2066 696e  raytypes[1], fin
+0002e2b0: 616c 5f64 7479 7065 290d 0a20 2020 2020  al_dtype)..     
+0002e2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e2e0: 2020 2061 7267 735b 305d 203d 205f 4153     args[0] = _AS
+0002e2f0: 5459 5045 2861 7267 735b 305d 2c20 6669  TYPE(args[0], fi
+0002e300: 6e61 6c5f 6474 7970 6529 0d0a 2020 2020  nal_dtype)..    
+0002e310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e330: 2020 2020 6172 6773 5b31 5d20 3d20 5f41      args[1] = _A
+0002e340: 5354 5950 4528 6172 6773 5b31 5d2c 2066  STYPE(args[1], f
+0002e350: 696e 616c 5f64 7479 7065 290d 0a20 2020  inal_dtype)..   
+0002e360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e380: 2020 2020 2023 2054 4a44 2063 6865 636b       # TJD check
+0002e390: 206c 6f67 6963 2068 6572 652e 2e2e 2077   logic here... w
+0002e3a0: 6861 7420 646f 6573 206e 756d 7079 2077  hat does numpy w
+0002e3b0: 6865 6e20 696e 742a 202a 2075 696e 7438  hen int* * uint8
+0002e3c0: 203f 2073 7065 6564 2074 6573 740d 0a20   ? speed test.. 
+0002e3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e3f0: 2020 2020 2020 2023 2355 7365 4e75 6d70         ##UseNump
+0002e400: 7920 3d20 5472 7565 0d0a 2020 2020 2020  y = True..      
+0002e410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e420: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0002e430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e440: 2020 2020 2020 2020 2020 2020 2023 2055               # U
+0002e450: 5043 4153 5420 5255 4c45 5320 7768 656e  PCAST RULES when
+0002e460: 206f 6e65 2069 7320 6120 7363 616c 6172   one is a scalar
+0002e470: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002e480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e490: 2020 6966 2061 7272 6179 5f74 7970 6573    if array_types
+0002e4a0: 5b30 5d20 213d 2066 696e 616c 5f64 7479  [0] != final_dty
+0002e4b0: 7065 3a0d 0a20 2020 2020 2020 2020 2020  pe:..           
+0002e4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e4d0: 2020 2020 2020 2020 2023 2077 6869 6368           # which
+0002e4e0: 2061 7267 756d 656e 7420 6973 2074 6865   argument is the
+0002e4f0: 2073 6361 6c61 723f 2020 636f 6e76 6572   scalar?  conver
+0002e500: 7420 7468 6520 6f74 6865 7220 6f6e 650d  t the other one.
+0002e510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e530: 2020 2020 2069 6620 7479 7065 2861 7267       if type(arg
+0002e540: 735b 305d 2920 696e 2053 6361 6c61 7254  s[0]) in ScalarT
+0002e550: 7970 653a 0d0a 2020 2020 2020 2020 2020  ype:..          
+0002e560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e570: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002e580: 7072 696e 7428 2263 6f6e 7665 7274 696e  print("convertin
+0002e590: 6720 6172 6732 2066 726f 6d22 2c20 6172  g arg2 from", ar
+0002e5a0: 6773 5b31 5d2c 2066 696e 616c 5f64 7479  gs[1], final_dty
+0002e5b0: 7065 290d 0a20 2020 2020 2020 2020 2020  pe)..           
+0002e5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e5d0: 2020 2020 2020 2020 2020 2020 2061 7267               arg
+0002e5e0: 735b 315d 203d 205f 4153 5459 5045 2861  s[1] = _ASTYPE(a
+0002e5f0: 7267 735b 315d 2c20 6669 6e61 6c5f 6474  rgs[1], final_dt
+0002e600: 7970 6529 0d0a 2020 2020 2020 2020 2020  ype)..          
+0002e610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e620: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+0002e630: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e650: 2020 2020 2020 2020 2023 2070 7269 6e74           # print
+0002e660: 2822 636f 6e76 6572 7469 6e67 2061 7267  ("converting arg
+0002e670: 3120 6672 6f6d 2022 2c20 6172 6773 5b30  1 from ", args[0
+0002e680: 5d2c 2066 696e 616c 5f64 7479 7065 290d  ], final_dtype).
 0002e690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002e6a0: 2069 6620 7265 6475 6365 5f66 756e 6320   if reduce_func 
-0002e6b0: 696e 205b 5245 4455 4345 5f46 554e 4354  in [REDUCE_FUNCT
-0002e6c0: 494f 4e53 2e52 4544 5543 455f 5355 4d2c  IONS.REDUCE_SUM,
-0002e6d0: 2052 4544 5543 455f 4655 4e43 5449 4f4e   REDUCE_FUNCTION
-0002e6e0: 532e 5245 4455 4345 5f4e 414e 5355 4d5d  S.REDUCE_NANSUM]
-0002e6f0: 2061 6e64 2069 7369 6e73 7461 6e63 6528   and isinstance(
-0002e700: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002e710: 2020 2020 2020 7265 7375 6c74 2c20 666c        result, fl
-0002e720: 6f61 740d 0a20 2020 2020 2020 2020 2020  oat..           
-0002e730: 2020 2020 2029 3a0d 0a20 2020 2020 2020       ):..       
-0002e740: 2020 2020 2020 2020 2020 2020 2072 6573               res
-0002e750: 756c 7420 3d20 6e70 2e66 6c6f 6174 3634  ult = np.float64
-0002e760: 2872 6573 756c 7429 0d0a 2020 2020 2020  (result)..      
-0002e770: 2020 2020 2020 2020 2020 656c 6966 2064            elif d
-0002e780: 7479 7065 2021 3d20 6e70 2e66 6c6f 6174  type != np.float
-0002e790: 3332 2061 6e64 2064 7479 7065 2021 3d20  32 and dtype != 
-0002e7a0: 6e70 2e66 6c6f 6174 3634 3a0d 0a20 2020  np.float64:..   
-0002e7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e7c0: 2023 2070 7265 7365 7276 6520 696e 7465   # preserve inte
-0002e7d0: 6765 7273 0d0a 2020 2020 2020 2020 2020  gers..          
-0002e7e0: 2020 2020 2020 2020 2020 6966 2063 6861            if cha
-0002e7f0: 7220 696e 204e 756d 7079 4368 6172 5479  r in NumpyCharTy
-0002e800: 7065 732e 556e 7369 676e 6564 496e 7465  pes.UnsignedInte
-0002e810: 6765 7236 343a 0d0a 2020 2020 2020 2020  ger64:..        
-0002e820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e830: 2320 7072 6573 6572 7665 2068 6967 6820  # preserve high 
-0002e840: 6269 740d 0a20 2020 2020 2020 2020 2020  bit..           
-0002e850: 2020 2020 2020 2020 2020 2020 2072 6573               res
-0002e860: 756c 7420 3d20 6e70 2e75 696e 7436 3428  ult = np.uint64(
-0002e870: 7265 7375 6c74 290d 0a20 2020 2020 2020  result)..       
-0002e880: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0002e890: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0002e8a0: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-0002e8b0: 6c74 203d 206e 702e 696e 7436 3428 7265  lt = np.int64(re
-0002e8c0: 7375 6c74 290d 0a20 2020 2020 2020 2020  sult)..         
-0002e8d0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-0002e8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e8f0: 2020 7265 7375 6c74 203d 206e 702e 666c    result = np.fl
-0002e900: 6f61 7436 3428 7265 7375 6c74 290d 0a0d  oat64(result)...
-0002e910: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002e920: 2023 204d 494e 2f4d 4158 206e 6565 6420   # MIN/MAX need 
-0002e930: 746f 2072 6574 7572 6e20 7361 6d65 2074  to return same t
-0002e940: 7970 650d 0a20 2020 2020 2020 2020 2020  ype..           
-0002e950: 2020 2020 2069 6620 7265 6475 6365 5f66       if reduce_f
-0002e960: 756e 6320 3e3d 2052 4544 5543 455f 4655  unc >= REDUCE_FU
-0002e970: 4e43 5449 4f4e 532e 5245 4455 4345 5f4d  NCTIONS.REDUCE_M
-0002e980: 494e 3a0d 0a20 2020 2020 2020 2020 2020  IN:..           
-0002e990: 2020 2020 2020 2020 2023 206d 696e 206d           # min m
-0002e9a0: 6178 206e 6f74 2061 6c6c 6f77 6564 206f  ax not allowed o
-0002e9b0: 6e20 656d 7074 7920 6172 7261 7920 7065  n empty array pe
-0002e9c0: 7220 756e 6974 2074 6573 740d 0a20 2020  r unit test..   
-0002e9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e9e0: 2069 6620 6c65 6e28 6172 6773 5b30 5d29   if len(args[0])
-0002e9f0: 203d 3d20 303a 0d0a 2020 2020 2020 2020   == 0:..        
-0002ea00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ea10: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
-0002ea20: 2822 6d69 6e2f 6d61 7820 6172 6720 6973  ("min/max arg is
-0002ea30: 2061 6e20 656d 7074 7920 7365 7175 656e   an empty sequen
-0002ea40: 6365 2e22 290d 0a0d 0a20 2020 2020 2020  ce.")....       
-0002ea50: 2020 2020 2020 2020 2020 2020 2023 206d               # m
-0002ea60: 696e 2f6d 6178 2f6e 616e 6d69 6e2f 6e61  in/max/nanmin/na
-0002ea70: 6e6d 6178 202d 2d20 7361 6d65 2072 6573  nmax -- same res
-0002ea80: 756c 740d 0a20 2020 2020 2020 2020 2020  ult..           
-0002ea90: 2020 2020 2020 2020 2069 6620 6474 7970           if dtyp
-0002eaa0: 6520 3d3d 206e 702e 626f 6f6c 5f3a 0d0a  e == np.bool_:..
-0002eab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002eac0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-0002ead0: 206e 702e 626f 6f6c 2872 6573 756c 7429   np.bool(result)
-0002eae0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002eaf0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-0002eb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002eb10: 2020 2020 2072 6573 756c 7420 3d20 6474       result = dt
-0002eb20: 7970 652e 7479 7065 2872 6573 756c 7429  ype.type(result)
-0002eb30: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0002eb40: 2020 2020 2020 2020 6966 206b 6565 7064          if keepd
-0002eb50: 696d 733a 0d0a 2020 2020 2020 2020 2020  ims:..          
-0002eb60: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0002eb70: 7375 6c74 203d 2046 6173 7441 7272 6179  sult = FastArray
-0002eb80: 285b 7265 7375 6c74 5d29 2e61 7374 7970  ([result]).astyp
-0002eb90: 6528 6474 7970 6529 0d0a 2020 2020 2020  e(dtype)..      
-0002eba0: 2020 2020 2020 2020 2020 656c 6966 206b            elif k
-0002ebb0: 6565 7064 696d 733a 0d0a 2020 2020 2020  eepdims:..      
-0002ebc0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0002ebd0: 666f 7263 6520 6261 636b 2069 6e74 6f20  force back into 
-0002ebe0: 616e 2061 7272 6179 2066 726f 6d20 7363  an array from sc
-0002ebf0: 616c 6172 0d0a 2020 2020 2020 2020 2020  alar..          
-0002ec00: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-0002ec10: 203d 2046 6173 7441 7272 6179 285b 7265   = FastArray([re
-0002ec20: 7375 6c74 5d29 0d0a 0d0a 2020 2020 2020  sult])....      
-0002ec30: 2020 2020 2020 2020 2020 2320 7765 2064            # we d
-0002ec40: 6964 2074 6865 2072 6564 7563 652c 206e  id the reduce, n
-0002ec50: 6f77 2072 6574 7572 6e20 7468 6520 7265  ow return the re
-0002ec60: 7375 6c74 0d0a 2020 2020 2020 2020 2020  sult..          
-0002ec70: 2020 2020 2020 7265 7475 726e 2072 6573        return res
-0002ec80: 756c 740d 0a0d 0a20 2020 2020 2020 2023  ult....        #
-0002ec90: 2063 6865 636b 2066 6f72 206e 6f72 6d61   check for norma
-0002eca0: 6c20 6361 6c6c 2066 756e 6374 696f 6e0d  l call function.
-0002ecb0: 0a20 2020 2020 2020 2065 6c69 6620 6661  .        elif fa
-0002ecc0: 7374 5f66 756e 6374 696f 6e20 6973 206e  st_function is n
-0002ecd0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
-0002ece0: 2020 2020 2020 2320 4361 6c6c 2074 6865        # Call the
-0002ecf0: 2046 6173 7441 7272 6179 2041 5049 7320   FastArray APIs 
-0002ed00: 696e 7374 6561 6420 6f66 206e 756d 7079  instead of numpy
-0002ed10: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0002ed20: 6361 6c6c 6d6f 6465 203d 2027 6627 0d0a  callmode = 'f'..
-0002ed30: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-0002ed40: 6c74 7320 3d20 4e6f 6e65 0d0a 2020 2020  lts = None..    
-0002ed50: 2020 2020 2020 2020 6966 2075 6675 6e63          if ufunc
-0002ed60: 2e6e 696e 203d 3d20 323a 0d0a 2020 2020  .nin == 2:..    
-0002ed70: 2020 2020 2020 2020 2020 2020 6669 6e61              fina
-0002ed80: 6c5f 6e75 6d20 3d20 2d31 0d0a 2020 2020  l_num = -1..    
-0002ed90: 2020 2020 2020 2020 2020 2020 6966 2066              if f
-0002eda0: 696e 616c 5f64 7479 7065 2069 7320 6e6f  inal_dtype is no
-0002edb0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
-0002edc0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002edd0: 6669 6e61 6c5f 6474 7970 6520 3d3d 206e  final_dtype == n
-0002ede0: 702e 626f 6f6c 5f3a 0d0a 2020 2020 2020  p.bool_:..      
-0002edf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ee00: 2020 6669 6e61 6c5f 6e75 6d20 3d20 300d    final_num = 0.
-0002ee10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002ee20: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-0002ee30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ee40: 2020 2020 6669 6e61 6c5f 6e75 6d20 3d20      final_num = 
-0002ee50: 6669 6e61 6c5f 6474 7970 652e 6e75 6d0d  final_dtype.num.
-0002ee60: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0002ee70: 2020 2023 2062 6563 6175 7365 2073 6361     # because sca
-0002ee80: 6c61 7273 2063 616e 2062 6520 7061 7373  lars can be pass
-0002ee90: 6564 2061 7320 6e70 2e69 6e74 3634 2838  ed as np.int64(8
-0002eea0: 3634 3030 3029 0d0a 2020 2020 2020 2020  64000)..        
-0002eeb0: 2020 2020 2020 2020 6966 2074 7970 6528          if type(
-0002eec0: 6172 6773 5b30 5d29 2069 6e20 674e 756d  args[0]) in gNum
-0002eed0: 7079 5363 616c 6172 5479 7065 3a0d 0a20  pyScalarType:.. 
-0002eee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002eef0: 2020 2023 2070 7269 6e74 2827 636f 6e76     # print('conv
-0002ef00: 6572 7469 6e67 2061 7267 3127 2c20 6172  erting arg1', ar
-0002ef10: 6773 5b30 5d29 0d0a 2020 2020 2020 2020  gs[0])..        
-0002ef20: 2020 2020 2020 2020 2020 2020 6172 6773              args
-0002ef30: 5b30 5d20 3d20 6e70 2e61 7361 7272 6179  [0] = np.asarray
-0002ef40: 2861 7267 735b 305d 290d 0a0d 0a20 2020  (args[0])....   
-0002ef50: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002ef60: 7479 7065 2861 7267 735b 315d 2920 696e  type(args[1]) in
-0002ef70: 2067 4e75 6d70 7953 6361 6c61 7254 7970   gNumpyScalarTyp
-0002ef80: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0002ef90: 2020 2020 2020 2020 2320 7072 696e 7428          # print(
-0002efa0: 2763 6f6e 7665 7274 696e 6720 6172 6732  'converting arg2
-0002efb0: 272c 2061 7267 735b 315d 290d 0a20 2020  ', args[1])..   
-0002efc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002efd0: 2061 7267 735b 315d 203d 206e 702e 6173   args[1] = np.as
-0002efe0: 6172 7261 7928 6172 6773 5b31 5d29 0d0a  array(args[1])..
-0002eff0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002f000: 2020 6966 2046 6173 7441 7272 6179 2e56    if FastArray.V
-0002f010: 6572 626f 7365 203e 2032 3a0d 0a20 2020  erbose > 2:..   
-0002f020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f030: 2070 7269 6e74 280d 0a20 2020 2020 2020   print(..       
-0002f040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f050: 2022 2a2a 2a20 6269 6e61 7279 2074 6869   "*** binary thi
-0002f060: 6e6b 2077 6520 6361 6e20 6361 6c6c 222c  nk we can call",
-0002f070: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002f080: 2020 2020 2020 2020 2020 6661 7374 5f66            fast_f
-0002f090: 756e 6374 696f 6e2c 0d0a 2020 2020 2020  unction,..      
-0002f0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f0b0: 2020 7566 756e 632e 6e69 6e2c 0d0a 2020    ufunc.nin,..  
-0002f0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f0d0: 2020 2020 2020 7566 756e 632e 6e6f 7574        ufunc.nout
-0002f0e0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0002f0f0: 2020 2020 2020 2020 2020 2022 6172 6731             "arg1
-0002f100: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-0002f110: 2020 2020 2020 2020 2020 2020 6172 6773              args
-0002f120: 5b30 5d2c 0d0a 2020 2020 2020 2020 2020  [0],..          
-0002f130: 2020 2020 2020 2020 2020 2020 2020 2261                "a
-0002f140: 7267 3222 2c0d 0a20 2020 2020 2020 2020  rg2",..         
-0002f150: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0002f160: 7267 735b 315d 2c0d 0a20 2020 2020 2020  rgs[1],..       
-0002f170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f180: 2022 6f75 7422 2c0d 0a20 2020 2020 2020   "out",..       
-0002f190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f1a0: 206f 7574 5f61 7267 732c 0d0a 2020 2020   out_args,..    
-0002f1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f1c0: 2020 2020 2266 696e 616c 222c 0d0a 2020      "final",..  
-0002f1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f1e0: 2020 2020 2020 6669 6e61 6c5f 6e75 6d2c        final_num,
-0002f1f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002f200: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-0002f210: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
-0002f220: 6f75 745f 6172 6773 2920 3d3d 2031 3a0d  out_args) == 1:.
-0002f230: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002f240: 2020 2020 2072 6573 756c 7473 203d 2054       results = T
-0002f250: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
-0002f260: 4c65 6467 6572 2e5f 4241 5349 434d 4154  Ledger._BASICMAT
-0002f270: 485f 5457 4f5f 494e 5055 5453 280d 0a20  H_TWO_INPUTS(.. 
-0002f280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f290: 2020 2020 2020 2028 6172 6773 5b30 5d2c         (args[0],
-0002f2a0: 2061 7267 735b 315d 2c20 6f75 745f 6172   args[1], out_ar
-0002f2b0: 6773 5b30 5d29 2c20 6661 7374 5f66 756e  gs[0]), fast_fun
-0002f2c0: 6374 696f 6e2c 2066 696e 616c 5f6e 756d  ction, final_num
-0002f2d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002f2e0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-0002f2f0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-0002f300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f310: 2020 2020 7265 7375 6c74 7320 3d20 5479      results = Ty
-0002f320: 7065 5265 6769 7374 6572 2e4d 6174 684c  peRegister.MathL
-0002f330: 6564 6765 722e 5f42 4153 4943 4d41 5448  edger._BASICMATH
-0002f340: 5f54 574f 5f49 4e50 5554 5328 0d0a 2020  _TWO_INPUTS(..  
-0002f350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f360: 2020 2020 2020 2861 7267 735b 305d 2c20        (args[0], 
-0002f370: 6172 6773 5b31 5d29 2c20 6661 7374 5f66  args[1]), fast_f
-0002f380: 756e 6374 696f 6e2c 2066 696e 616c 5f6e  unction, final_n
-0002f390: 756d 0d0a 2020 2020 2020 2020 2020 2020  um..            
-0002f3a0: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-0002f3b0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-0002f3c0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0002f3d0: 666f 7220 636f 6e76 6572 7369 6f6e 2066  for conversion f
-0002f3e0: 756e 6374 696f 6e73 0d0a 2020 2020 2020  unctions..      
-0002f3f0: 2020 2020 2020 2020 2020 2320 6474 7970            # dtyp
-0002f400: 653d 6b77 6172 6773 2e67 6574 2827 6474  e=kwargs.get('dt
-0002f410: 7970 6527 2c4e 6f6e 6529 0d0a 2020 2020  ype',None)..    
-0002f420: 2020 2020 2020 2020 2020 2020 6966 2046              if F
-0002f430: 6173 7441 7272 6179 2e56 6572 626f 7365  astArray.Verbose
-0002f440: 203e 2032 3a0d 0a20 2020 2020 2020 2020   > 2:..         
-0002f450: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-0002f460: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-0002f470: 2020 2020 2020 2020 2020 2022 2a2a 2a20             "*** 
-0002f480: 756e 6172 7920 7468 696e 6b20 7765 2063  unary think we c
-0002f490: 616e 2063 616c 6c22 2c0d 0a20 2020 2020  an call",..     
-0002f4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f4b0: 2020 2066 6173 745f 6675 6e63 7469 6f6e     fast_function
-0002f4c0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0002f4d0: 2020 2020 2020 2020 2020 2075 6675 6e63             ufunc
-0002f4e0: 2e6e 696e 2c0d 0a20 2020 2020 2020 2020  .nin,..         
-0002f4f0: 2020 2020 2020 2020 2020 2020 2020 2075                 u
-0002f500: 6675 6e63 2e6e 6f75 742c 0d0a 2020 2020  func.nout,..    
-0002f510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f520: 2020 2020 2261 7267 3122 2c0d 0a20 2020      "arg1",..   
-0002f530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f540: 2020 2020 2061 7267 735b 305d 2c0d 0a20       args[0],.. 
-0002f550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f560: 2020 2020 2020 2022 6f75 7422 2c0d 0a20         "out",.. 
-0002f570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f580: 2020 2020 2020 206f 7574 5f61 7267 732c         out_args,
-0002f590: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002f5a0: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
-0002f5b0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
-0002f5c0: 6e28 6f75 745f 6172 6773 2920 3d3d 2031  n(out_args) == 1
-0002f5d0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002f5e0: 2020 2020 2020 2072 6573 756c 7473 203d         results =
-0002f5f0: 2054 7970 6552 6567 6973 7465 722e 4d61   TypeRegister.Ma
-0002f600: 7468 4c65 6467 6572 2e5f 4241 5349 434d  thLedger._BASICM
-0002f610: 4154 485f 4f4e 455f 494e 5055 5428 2861  ATH_ONE_INPUT((a
-0002f620: 7267 735b 305d 2c20 6f75 745f 6172 6773  rgs[0], out_args
-0002f630: 5b30 5d29 2c20 6661 7374 5f66 756e 6374  [0]), fast_funct
-0002f640: 696f 6e2c 2030 290d 0a20 2020 2020 2020  ion, 0)..       
-0002f650: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-0002f660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f670: 2020 2020 7265 7375 6c74 7320 3d20 5479      results = Ty
-0002f680: 7065 5265 6769 7374 6572 2e4d 6174 684c  peRegister.MathL
-0002f690: 6564 6765 722e 5f42 4153 4943 4d41 5448  edger._BASICMATH
-0002f6a0: 5f4f 4e45 5f49 4e50 5554 2828 6172 6773  _ONE_INPUT((args
-0002f6b0: 5b30 5d29 2c20 6661 7374 5f66 756e 6374  [0]), fast_funct
-0002f6c0: 696f 6e2c 2030 290d 0a0d 0a20 2020 2020  ion, 0)....     
-0002f6d0: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
-0002f6e0: 7320 6973 206e 6f74 204e 6f6e 6520 616e  s is not None an
-0002f6f0: 6420 6c65 6e28 6f75 745f 6172 6773 2920  d len(out_args) 
-0002f700: 3d3d 2031 3a0d 0a20 2020 2020 2020 2020  == 1:..         
-0002f710: 2020 2020 2020 2023 2077 6865 6e20 7468         # when th
-0002f720: 6520 6f75 7470 7574 2061 7267 756d 656e  e output argumen
-0002f730: 7420 6973 2066 6f72 6365 6420 6275 7420  t is forced but 
-0002f740: 7765 2063 616c 6375 6c61 7465 2069 7420  we calculate it 
-0002f750: 696e 746f 2061 6e6f 7468 6572 2061 7272  into another arr
-0002f760: 6179 2077 6520 6e65 6564 2074 6f20 636f  ay we need to co
-0002f770: 7079 2074 6865 2072 6573 756c 7420 696e  py the result in
-0002f780: 746f 2074 6865 206f 7574 7075 740d 0a20  to the output.. 
-0002f790: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002f7a0: 6620 6e6f 7420 7263 2e43 6f6d 7061 7265  f not rc.Compare
-0002f7b0: 4e75 6d70 794d 656d 4164 6472 6573 7328  NumpyMemAddress(
-0002f7c0: 6f75 745f 6172 6773 5b30 5d2c 2072 6573  out_args[0], res
-0002f7d0: 756c 7473 293a 0d0a 2020 2020 2020 2020  ults):..        
-0002f7e0: 2020 2020 2020 2020 2020 2020 6966 2046              if F
-0002f7f0: 6173 7441 7272 6179 2e56 6572 626f 7365  astArray.Verbose
-0002f800: 203e 2032 3a0d 0a20 2020 2020 2020 2020   > 2:..         
-0002f810: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0002f820: 7269 6e74 280d 0a20 2020 2020 2020 2020  rint(..         
-0002f830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f840: 2020 2022 2a2a 2a20 7065 7266 6f72 6d69     "*** performi
-0002f850: 6e67 2061 6e20 6578 7472 6120 636f 7079  ng an extra copy
-0002f860: 2074 6f20 6d61 7463 6820 6f75 7470 7574   to match output
-0002f870: 2072 6571 7565 7374 222c 0d0a 2020 2020   request",..    
-0002f880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f890: 2020 2020 2020 2020 6964 286f 7574 5f61          id(out_a
-0002f8a0: 7267 735b 305d 292c 0d0a 2020 2020 2020  rgs[0]),..      
-0002f8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f8c0: 2020 2020 2020 6964 2872 6573 756c 7473        id(results
-0002f8d0: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
-0002f8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f8f0: 6f75 745f 6172 6773 5b30 5d2c 0d0a 2020  out_args[0],..  
-0002f900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f910: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-0002f920: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-0002f930: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-0002f940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f950: 2020 206f 7574 5f61 7267 735b 305d 5b2e     out_args[0][.
-0002f960: 2e2e 5d20 3d20 7265 7375 6c74 730d 0a20  ..] = results.. 
-0002f970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f980: 2020 2072 6573 756c 7473 203d 206f 7574     results = out
-0002f990: 5f61 7267 735b 305d 0d0a 0d0a 2020 2020  _args[0]....    
-0002f9a0: 2020 2020 2020 2020 6966 2072 6573 756c          if resul
-0002f9b0: 7473 2069 7320 4e6f 6e65 3a0d 0a20 2020  ts is None:..   
-0002f9c0: 2020 2020 2020 2020 2020 2020 2023 2070               # p
-0002f9d0: 756e 7465 640d 0a20 2020 2020 2020 2020  unted..         
-0002f9e0: 2020 2020 2020 2023 2063 616c 6c6d 6f64         # callmod
-0002f9f0: 653d 2770 270d 0a20 2020 2020 2020 2020  e='p'..         
-0002fa00: 2020 2020 2020 2069 6620 4661 7374 4172         if FastAr
-0002fa10: 7261 792e 5665 7262 6f73 6520 3e20 313a  ray.Verbose > 1:
-0002fa20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002fa30: 2020 2020 2020 7072 696e 7428 222a 2a2a        print("***
-0002fa40: 7075 6e74 6564 2075 6675 6e63 3a20 222c  punted ufunc: ",
-0002fa50: 2075 6675 6e63 2e6e 696e 2c20 7566 756e   ufunc.nin, ufun
-0002fa60: 632e 6e6f 7574 2c20 7566 756e 632c 2061  c.nout, ufunc, a
-0002fa70: 7267 732c 206b 7761 7267 7329 0d0a 2020  rgs, kwargs)..  
-0002fa80: 2020 2020 2020 2020 2020 2020 2020 6661                fa
-0002fa90: 7374 5f66 756e 6374 696f 6e20 3d20 4e6f  st_function = No
-0002faa0: 6e65 0d0a 2020 2020 2020 2020 2020 2020  ne..            
-0002fab0: 2020 2020 2320 6661 6c6c 2074 6f20 2269      # fall to "i
-0002fac0: 6620 6661 7374 5f66 756e 6374 696f 6e20  f fast_function 
-0002fad0: 6973 204e 6f6e 6522 2061 6e64 2072 756e  is None" and run
-0002fae0: 2074 6872 6f75 6768 206e 756d 7079 2e2e   through numpy..
-0002faf0: 2e0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
-0002fb00: 2023 2072 6573 7065 6374 2064 7479 7065   # respect dtype
-0002fb10: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
-0002fb20: 6966 2064 7479 7065 2069 7320 6e6f 7420  if dtype is not 
-0002fb30: 4e6f 6e65 2061 6e64 2069 7369 6e73 7461  None and isinsta
-0002fb40: 6e63 6528 7265 7375 6c74 732c 206e 702e  nce(results, np.
-0002fb50: 6e64 6172 7261 7929 3a0d 0a20 2020 2020  ndarray):..     
-0002fb60: 2020 2020 2020 2020 2020 2069 6620 6474             if dt
-0002fb70: 7970 6520 6973 206e 6f74 2072 6573 756c  ype is not resul
-0002fb80: 7473 2e64 7479 7065 3a0d 0a20 2020 2020  ts.dtype:..     
-0002fb90: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002fba0: 6620 4661 7374 4172 7261 792e 5665 7262  f FastArray.Verb
-0002fbb0: 6f73 6520 3e20 313a 0d0a 2020 2020 2020  ose > 1:..      
-0002fbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002fbd0: 2020 7072 696e 7428 222a 2a2a 7265 7375    print("***resu
-0002fbe0: 6c74 2066 726f 6d20 7265 6475 6365 222c  lt from reduce",
-0002fbf0: 2072 6573 756c 7473 2c20 7265 7375 6c74   results, result
-0002fc00: 732e 6474 7970 652c 2064 7479 7065 290d  s.dtype, dtype).
-0002fc10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002fc20: 2020 2020 2023 2063 6f6e 7665 7274 0d0a       # convert..
-0002fc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002fc40: 2020 2020 7265 7375 6c74 7320 3d20 7265      results = re
-0002fc50: 7375 6c74 732e 6173 7479 7065 2864 7479  sults.astype(dty
-0002fc60: 7065 290d 0a0d 0a20 2020 2020 2020 2069  pe)....        i
-0002fc70: 6620 6661 7374 5f66 756e 6374 696f 6e20  f fast_function 
-0002fc80: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
-0002fc90: 2020 2020 2020 2320 4361 6c6c 2074 6865        # Call the
-0002fca0: 206e 756d 7079 2041 5049 730d 0a20 2020   numpy APIs..   
-0002fcb0: 2020 2020 2020 2020 2023 2043 6865 636b           # Check
-0002fcc0: 2069 6620 7765 2063 616e 2075 7365 2074   if we can use t
-0002fcd0: 6865 2072 6563 7963 6c65 6420 6172 7261  he recycled arra
-0002fce0: 7973 2074 6f20 6176 6f69 6420 616e 2061  ys to avoid an a
-0002fcf0: 6c6c 6f63 6174 696f 6e20 666f 7220 7468  llocation for th
-0002fd00: 6520 6f75 7470 7574 2061 7272 6179 0d0a  e output array..
-0002fd10: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-0002fd20: 2046 6173 7441 7272 6179 2e56 6572 626f   FastArray.Verbo
-0002fd30: 7365 203e 2031 3a0d 0a20 2020 2020 2020  se > 1:..       
-0002fd40: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
-0002fd50: 2a2a 7075 6e74 6564 206f 6e20 6e75 6d70  **punted on nump
-0002fd60: 7921 222c 2075 6675 6e63 290d 0a0d 0a20  y!", ufunc).... 
-0002fd70: 2020 2020 2020 2020 2020 2023 204e 4f54             # NOT
-0002fd80: 453a 2057 6520 6172 6520 676f 696e 6720  E: We are going 
-0002fd90: 746f 206c 6574 206e 756d 7079 2070 726f  to let numpy pro
-0002fda0: 6365 7373 2069 740d 0a20 2020 2020 2020  cess it..       
-0002fdb0: 2020 2020 2023 2057 6520 6d75 7374 2063       # We must c
-0002fdc0: 6861 6e67 6520 616c 6c20 4661 7374 4172  hange all FastAr
-0002fdd0: 7261 7973 2074 6f20 6e6f 726d 616c 206e  rays to normal n
-0002fde0: 756d 7079 2061 7272 6179 730d 0a20 2020  umpy arrays..   
-0002fdf0: 2020 2020 2020 2020 2061 7267 7320 3d20           args = 
-0002fe00: 5b5d 0d0a 2020 2020 2020 2020 2020 2020  []..            
-0002fe10: 666f 7220 696e 7075 7420 696e 2069 6e70  for input in inp
-0002fe20: 7574 733a 0d0a 2020 2020 2020 2020 2020  uts:..          
-0002fe30: 2020 2020 2020 2320 666c 6970 2062 6163        # flip bac
-0002fe40: 6b20 746f 206e 756d 7079 2074 6f20 6176  k to numpy to av
-0002fe50: 6f69 6420 6572 726f 7273 2077 6865 6e20  oid errors when 
-0002fe60: 6e75 6d70 7920 6361 6c63 756c 6174 6573  numpy calculates
-0002fe70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002fe80: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0002fe90: 696e 7075 742c 2046 6173 7441 7272 6179  input, FastArray
-0002fea0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0002feb0: 2020 2020 2020 2020 6172 6773 2e61 7070          args.app
-0002fec0: 656e 6428 696e 7075 742e 7669 6577 286e  end(input.view(n
-0002fed0: 702e 6e64 6172 7261 7929 290d 0a20 2020  p.ndarray))..   
-0002fee0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0002fef0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0002ff00: 2020 2020 2020 2020 6172 6773 2e61 7070          args.app
-0002ff10: 656e 6428 696e 7075 7429 0d0a 0d0a 2020  end(input)....  
-0002ff20: 2020 2020 2020 2020 2020 6966 2068 6173            if has
-0002ff30: 5f6f 7574 7075 7473 3a0d 0a20 2020 2020  _outputs:..     
-0002ff40: 2020 2020 2020 2020 2020 206f 7574 7075             outpu
-0002ff50: 7473 203d 206b 7761 7267 732e 706f 7028  ts = kwargs.pop(
-0002ff60: 226f 7574 222c 204e 6f6e 6529 0d0a 2020  "out", None)..  
-0002ff70: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002ff80: 206f 7574 7075 7473 3a0d 0a20 2020 2020   outputs:..     
-0002ff90: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-0002ffa0: 7574 5f61 7267 7320 3d20 5b5d 0d0a 2020  ut_args = []..  
-0002ffb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ffc0: 2020 666f 7220 6f75 7470 7574 2069 6e20    for output in 
-0002ffd0: 6f75 7470 7574 733a 0d0a 2020 2020 2020  outputs:..      
-0002ffe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002fff0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00030000: 6f75 7470 7574 2c20 4661 7374 4172 7261  output, FastArra
-00030010: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
-00030020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030030: 206f 7574 5f61 7267 732e 6170 7065 6e64   out_args.append
-00030040: 286f 7574 7075 742e 7669 6577 286e 702e  (output.view(np.
-00030050: 6e64 6172 7261 7929 290d 0a20 2020 2020  ndarray))..     
-00030060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030070: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00030080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030090: 2020 2020 2020 6f75 745f 6172 6773 2e61        out_args.a
-000300a0: 7070 656e 6428 6f75 7470 7574 290d 0a20  ppend(output).. 
-000300b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000300c0: 2020 2023 2072 6570 6c61 6365 206f 7574     # replace out
-000300d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000300e0: 2020 2020 2020 6b77 6172 6773 5b22 6f75        kwargs["ou
-000300f0: 7422 5d20 3d20 7475 706c 6528 6f75 745f  t"] = tuple(out_
-00030100: 6172 6773 290d 0a0d 0a20 2020 2020 2020  args)....       
-00030110: 2020 2020 2023 204e 4f54 453a 2049 6620       # NOTE: If 
-00030120: 7468 6520 7370 6563 6966 6965 6420 7566  the specified uf
-00030130: 756e 6320 2b20 696e 7075 7473 2063 6f6d  unc + inputs com
-00030140: 6269 6e61 7469 6f6e 2069 736e 2774 2073  bination isn't s
-00030150: 7570 706f 7274 6564 2062 7920 6e75 6d70  upported by nump
-00030160: 7920 6569 7468 6572 2c0d 0a20 2020 2020  y either,..     
-00030170: 2020 2020 2020 2023 2020 2020 2020 2061         #       a
-00030180: 7320 6f66 206e 756d 7079 2031 2e31 372e  s of numpy 1.17.
-00030190: 7820 7468 6973 2063 616c 6c20 7769 6c6c  x this call will
-000301a0: 2065 6e64 2075 7020 7261 6973 696e 6720   end up raising 
-000301b0: 6120 5546 756e 6354 7970 6545 7272 6f72  a UFuncTypeError
-000301c0: 2073 6f20 7468 6520 7265 7374 0d0a 2020   so the rest..  
-000301d0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-000301e0: 2020 6f66 2074 6865 2046 6173 7441 7272    of the FastArr
-000301f0: 6179 2e5f 5f61 7272 6179 5f75 6675 6e63  ay.__array_ufunc
-00030200: 5f5f 2062 6f64 7920 2862 656c 6f77 2920  __ body (below) 
-00030210: 776f 6e27 7420 656e 6420 7570 2065 7865  won't end up exe
-00030220: 6375 7469 6e67 2e0d 0a20 2020 2020 2020  cuting...       
-00030230: 2020 2020 2072 6573 756c 7473 203d 2054       results = T
-00030240: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
-00030250: 4c65 6467 6572 2e5f 4152 5241 595f 5546  Ledger._ARRAY_UF
-00030260: 554e 4328 7375 7065 7228 4661 7374 4172  UNC(super(FastAr
-00030270: 7261 792c 2073 656c 6629 2c20 7566 756e  ray, self), ufun
-00030280: 632c 206d 6574 686f 642c 202a 6172 6773  c, method, *args
-00030290: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
-000302a0: 2020 2020 2020 2023 2049 6620 7269 7074         # If ript
-000302b0: 6162 6c65 2068 6173 206e 6f74 2069 6d70  able has not imp
-000302c0: 6c65 6d65 6e74 6564 2061 2063 6572 7461  lemented a certa
-000302d0: 696e 2075 6675 6e63 2028 6f72 2064 6f65  in ufunc (or doe
-000302e0: 736e 2774 2073 7570 706f 7274 2069 7420  sn't support it 
-000302f0: 666f 7220 7468 6520 6769 7665 6e20 6172  for the given ar
-00030300: 6775 6d65 6e74 7329 2c0d 0a20 2020 2020  guments),..     
-00030310: 2020 2023 2065 6d69 7420 6120 7761 726e     # emit a warn
-00030320: 696e 6720 6162 6f75 7420 6974 2074 6f20  ing about it to 
-00030330: 6c65 7420 7468 6520 7573 6572 206b 6e6f  let the user kno
-00030340: 772e 0d0a 2020 2020 2020 2020 2320 5768  w...        # Wh
-00030350: 656e 206e 756d 7079 2064 6f65 7320 6e6f  en numpy does no
-00030360: 7420 7375 7070 6f72 7420 7468 6520 7566  t support the uf
-00030370: 756e 632b 696e 7075 7473 2065 6974 6865  unc+inputs eithe
-00030380: 722c 2077 6520 776f 6e27 7420 7265 6163  r, we won't reac
-00030390: 6820 7468 6973 2070 6f69 6e74 2028 6173  h this point (as
-000303a0: 206f 6620 6e75 6d70 7920 312e 3137 2e78   of numpy 1.17.x
-000303b0: 292c 0d0a 2020 2020 2020 2020 2320 7369  ),..        # si
-000303c0: 6e63 6520 6e75 6d70 7920 7769 6c6c 2072  nce numpy will r
-000303d0: 6169 7365 2061 2055 4675 6e63 5479 7065  aise a UFuncType
-000303e0: 4572 726f 7220 6561 726c 6965 7220 2862  Error earlier (b
-000303f0: 6566 6f72 6520 7468 6973 2070 6f69 6e74  efore this point
-00030400: 2920 7261 7468 6572 2074 6861 6e20 6166  ) rather than af
-00030410: 7465 7220 7765 2072 6574 7572 6e20 4e6f  ter we return No
-00030420: 7449 6d70 6c65 6d65 6e74 6564 2e0d 0a20  tImplemented... 
-00030430: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
-00030440: 7320 6973 204e 6f74 496d 706c 656d 656e  s is NotImplemen
-00030450: 7465 643a 0d0a 2020 2020 2020 2020 2020  ted:..          
-00030460: 2020 7761 726e 696e 6773 2e77 6172 6e28    warnings.warn(
-00030470: 6622 2a2a 2a75 6675 6e63 207b 7566 756e  f"***ufunc {ufun
-00030480: 637d 207b 6172 6773 7d20 7b6b 7761 7267  c} {args} {kwarg
-00030490: 737d 2069 7320 6e6f 7420 696d 706c 656d  s} is not implem
-000304a0: 656e 7465 6422 290d 0a20 2020 2020 2020  ented")..       
-000304b0: 2020 2020 2072 6574 7572 6e20 4e6f 7449       return NotI
-000304c0: 6d70 6c65 6d65 6e74 6564 0d0a 0d0a 2020  mplemented....  
-000304d0: 2020 2020 2020 2320 5566 756e 6373 2061        # Ufuncs a
-000304e0: 6c73 6f20 6861 7665 2061 2066 6966 7468  lso have a fifth
-000304f0: 206d 6574 686f 6420 7468 6174 2061 6c6c   method that all
-00030500: 6f77 7320 696e 2070 6c61 6365 206f 7065  ows in place ope
-00030510: 7261 7469 6f6e 7320 746f 2062 6520 7065  rations to be pe
-00030520: 7266 6f72 6d65 6420 7573 696e 6720 6661  rformed using fa
-00030530: 6e63 7920 696e 6465 7869 6e67 2e0d 0a20  ncy indexing... 
-00030540: 2020 2020 2020 2023 204e 6f20 6275 6666         # No buff
-00030550: 6572 696e 6720 6973 2075 7365 6420 6f6e  ering is used on
-00030560: 2074 6865 2064 696d 656e 7369 6f6e 7320   the dimensions 
-00030570: 7768 6572 6520 6661 6e63 7920 696e 6465  where fancy inde
-00030580: 7869 6e67 2069 7320 7573 6564 2c20 736f  xing is used, so
-00030590: 2074 6865 2066 616e 6379 2069 6e64 6578   the fancy index
-000305a0: 2063 616e 206c 6973 7420 616e 2069 7465   can list an ite
-000305b0: 6d20 6d6f 7265 2074 6861 6e20 6f6e 6365  m more than once
-000305c0: 0d0a 2020 2020 2020 2020 2320 2020 2020  ..        #     
-000305d0: 616e 6420 7468 6520 6f70 6572 6174 696f  and the operatio
-000305e0: 6e20 7769 6c6c 2062 6520 7065 7266 6f72  n will be perfor
-000305f0: 6d65 6420 6f6e 2074 6865 2072 6573 756c  med on the resul
-00030600: 7420 6f66 2074 6865 2070 7265 7669 6f75  t of the previou
-00030610: 7320 6f70 6572 6174 696f 6e20 666f 7220  s operation for 
-00030620: 7468 6174 2069 7465 6d2e 0d0a 2020 2020  that item...    
-00030630: 2020 2020 2320 7566 756e 632e 7265 6475      # ufunc.redu
-00030640: 6365 2861 5b2c 2061 7869 732c 2064 7479  ce(a[, axis, dty
-00030650: 7065 2c20 6f75 742c 206b 6565 7064 696d  pe, out, keepdim
-00030660: 735d 2909 5265 6475 6365 7320 6127 7320  s]).Reduces a's 
-00030670: 6469 6d65 6e73 696f 6e20 6279 206f 6e65  dimension by one
-00030680: 2c20 6279 2061 7070 6c79 696e 6720 7566  , by applying uf
-00030690: 756e 6320 616c 6f6e 6720 6f6e 6520 6178  unc along one ax
-000306a0: 6973 2e0d 0a20 2020 2020 2020 2023 2075  is...        # u
-000306b0: 6675 6e63 2e61 6363 756d 756c 6174 6528  func.accumulate(
-000306c0: 6172 7261 795b 2c20 6178 6973 2c20 6474  array[, axis, dt
-000306d0: 7970 652c 206f 7574 5d29 0941 6363 756d  ype, out]).Accum
-000306e0: 756c 6174 6520 7468 6520 7265 7375 6c74  ulate the result
-000306f0: 206f 6620 6170 706c 7969 6e67 2074 6865   of applying the
-00030700: 206f 7065 7261 746f 7220 746f 2061 6c6c   operator to all
-00030710: 2065 6c65 6d65 6e74 732e 0d0a 2020 2020   elements...    
-00030720: 2020 2020 2320 7566 756e 632e 7265 6475      # ufunc.redu
-00030730: 6365 6174 2861 2c20 696e 6469 6365 735b  ceat(a, indices[
-00030740: 2c20 6178 6973 2c20 6474 7970 652c 206f  , axis, dtype, o
-00030750: 7574 5d29 0950 6572 666f 726d 7320 6120  ut]).Performs a 
-00030760: 286c 6f63 616c 2920 7265 6475 6365 2077  (local) reduce w
-00030770: 6974 6820 7370 6563 6966 6965 6420 736c  ith specified sl
-00030780: 6963 6573 206f 7665 7220 6120 7369 6e67  ices over a sing
-00030790: 6c65 2061 7869 732e 0d0a 2020 2020 2020  le axis...      
-000307a0: 2020 2320 7566 756e 632e 6f75 7465 7228    # ufunc.outer(
-000307b0: 412c 2042 2909 4170 706c 7920 7468 6520  A, B).Apply the 
-000307c0: 7566 756e 6320 6f70 2074 6f20 616c 6c20  ufunc op to all 
-000307d0: 7061 6972 7320 2861 2c20 6229 2077 6974  pairs (a, b) wit
-000307e0: 6820 6120 696e 2041 2061 6e64 2062 2069  h a in A and b i
-000307f0: 6e20 422e 0d0a 2020 2020 2020 2020 2320  n B...        # 
-00030800: 7566 756e 632e 6174 2861 2c20 696e 6469  ufunc.at(a, indi
-00030810: 6365 735b 2c20 625d 2909 5065 7266 6f72  ces[, b]).Perfor
-00030820: 6d73 2075 6e62 7566 6665 7265 6420 696e  ms unbuffered in
-00030830: 2070 6c61 6365 206f 7065 7261 7469 6f6e   place operation
-00030840: 206f 6e20 6f70 6572 616e 6420 2761 2720   on operand 'a' 
-00030850: 666f 7220 656c 656d 656e 7473 2073 7065  for elements spe
-00030860: 6369 6669 6564 2062 7920 2769 6e64 6963  cified by 'indic
-00030870: 6573 272e 0d0a 0d0a 2020 2020 2020 2020  es'.....        
-00030880: 6966 206d 6574 686f 6420 3d3d 2022 6174  if method == "at
-00030890: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
-000308a0: 7265 7475 726e 0d0a 0d0a 2020 2020 2020  return....      
-000308b0: 2020 6966 2075 6675 6e63 2e6e 6f75 7420    if ufunc.nout 
-000308c0: 3d3d 2031 3a0d 0a20 2020 2020 2020 2020  == 1:..         
-000308d0: 2020 2023 2063 6865 636b 2069 6620 7765     # check if we
-000308e0: 2075 7365 6420 6f75 7220 6f77 6e20 6f75   used our own ou
-000308f0: 7470 7574 0d0a 0d0a 2020 2020 2020 2020  tput....        
-00030900: 2020 2020 2320 6966 2069 7369 6e73 7461      # if isinsta
-00030910: 6e63 6528 6f75 7441 7272 6179 2c20 6e70  nce(outArray, np
-00030920: 2e6e 6461 7272 6179 293a 0d0a 2020 2020  .ndarray):..    
-00030930: 2020 2020 2020 2020 2320 2020 2072 6574          #    ret
-00030940: 7572 6e20 6f75 7441 7272 6179 2e76 6965  urn outArray.vie
-00030950: 7728 4661 7374 4172 7261 7929 0d0a 0d0a  w(FastArray)....
-00030960: 2020 2020 2020 2020 2020 2020 2320 6966              # if
-00030970: 2028 6669 6e61 6c5f 6474 7970 6520 213d   (final_dtype !=
-00030980: 204e 6f6e 6520 616e 6420 6669 6e61 6c5f   None and final_
-00030990: 6474 7970 6520 213d 2072 6573 756c 7473  dtype != results
-000309a0: 2e64 7479 7065 293a 0d0a 2020 2020 2020  .dtype):..      
-000309b0: 2020 2020 2020 2320 2020 2070 7269 6e74        #    print
-000309c0: 2822 2a2a 2a2a 2a2a 206d 6973 7072 6564  ("****** mispred
-000309d0: 6963 7465 6420 6669 6e61 6c22 2c20 6669  icted final", fi
-000309e0: 6e61 6c5f 6474 7970 652c 2072 6573 756c  nal_dtype, resul
-000309f0: 7473 2e64 7479 7065 2c20 7566 756e 632c  ts.dtype, ufunc,
-00030a00: 2073 6361 6c61 7274 7970 6573 2c20 6172   scalartypes, ar
-00030a10: 6773 2c20 6f75 7470 7574 732c 206b 7761  gs, outputs, kwa
-00030a20: 7267 7329 3b0d 0a20 2020 2020 2020 2020  rgs);..         
-00030a30: 2020 2023 2072 6573 756c 7473 203d 2028     # results = (
-00030a40: 7265 7375 6c74 732c 290d 0a0d 0a20 2020  results,)....   
-00030a50: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-00030a60: 6973 696e 7374 616e 6365 2872 6573 756c  isinstance(resul
-00030a70: 7473 2c20 4661 7374 4172 7261 7929 2061  ts, FastArray) a
-00030a80: 6e64 2069 7369 6e73 7461 6e63 6528 7265  nd isinstance(re
-00030a90: 7375 6c74 732c 206e 702e 6e64 6172 7261  sults, np.ndarra
-00030aa0: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
-00030ab0: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
-00030ac0: 6c74 732e 7669 6577 2846 6173 7441 7272  lts.view(FastArr
-00030ad0: 6179 290d 0a0d 0a20 2020 2020 2020 2020  ay)....         
-00030ae0: 2020 2023 2074 6869 6e6b 2068 6974 2068     # think hit h
-00030af0: 6572 6520 666f 7220 7375 6d20 7769 6863  ere for sum wihc
-00030b00: 6820 646f 6573 206e 6f74 2072 6574 7572  h does not retur
-00030b10: 6e20 616e 2061 7272 6179 2c20 6a75 7374  n an array, just
-00030b20: 2061 206e 756d 6265 720d 0a20 2020 2020   a number..     
-00030b30: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-00030b40: 7375 6c74 730d 0a0d 0a20 2020 2020 2020  sults....       
-00030b50: 2023 206d 6f72 6520 7468 616e 206f 6e65   # more than one
-00030b60: 2069 7465 6d2c 2073 6f20 7765 2061 7265   item, so we are
-00030b70: 206d 616b 696e 6720 6120 7475 706c 650d   making a tuple.
-00030b80: 0a20 2020 2020 2020 2023 2063 616e 2072  .        # can r
-00030b90: 6573 756c 7420 696e 205f 5f61 7272 6179  esult in __array
-00030ba0: 5f66 696e 616c 697a 655f 5f20 6265 696e  _finalize__ bein
-00030bb0: 6720 6361 6c6c 6564 0d0a 2020 2020 2020  g called..      
-00030bc0: 2020 7265 7375 6c74 7320 3d20 7475 706c    results = tupl
-00030bd0: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
-00030be0: 286e 702e 6173 6172 7261 7928 7265 7375  (np.asarray(resu
-00030bf0: 6c74 292e 7669 6577 2846 6173 7441 7272  lt).view(FastArr
-00030c00: 6179 2920 6966 206f 7574 7075 7420 6973  ay) if output is
-00030c10: 204e 6f6e 6520 656c 7365 206f 7574 7075   None else outpu
-00030c20: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
-00030c30: 666f 7220 7265 7375 6c74 2c20 6f75 7470  for result, outp
-00030c40: 7574 2069 6e20 7a69 7028 7265 7375 6c74  ut in zip(result
-00030c50: 732c 206f 7574 7075 7473 290d 0a20 2020  s, outputs)..   
-00030c60: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
-00030c70: 2020 2320 6368 6563 6b20 6966 2077 6520    # check if we 
-00030c80: 6861 7665 2061 2074 7570 6c65 206f 6620  have a tuple of 
-00030c90: 6f6e 6520 6974 656d 2c20 6966 2073 6f20  one item, if so 
-00030ca0: 6a75 7374 2072 6574 7572 6e20 7468 6520  just return the 
-00030cb0: 6f6e 6520 6974 656d 0d0a 2020 2020 2020  one item..      
-00030cc0: 2020 6966 206c 656e 2872 6573 756c 7473    if len(results
-00030cd0: 2920 3d3d 2031 3a0d 0a20 2020 2020 2020  ) == 1:..       
-00030ce0: 2020 2020 2072 6573 756c 7473 203d 2072       results = r
-00030cf0: 6573 756c 7473 5b30 5d0d 0a20 2020 2020  esults[0]..     
-00030d00: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
-00030d10: 730d 0a0d 0a20 2020 2040 7072 6f70 6572  s....    @proper
-00030d20: 7479 0d0a 2020 2020 6465 6620 6e75 6d62  ty..    def numb
-00030d30: 6173 7472 696e 6728 7365 6c66 293a 0d0a  astring(self):..
-00030d40: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00030d50: 2020 2020 2063 6f6e 7665 7274 7320 6279       converts by
-00030d60: 7465 2073 7472 696e 6720 616e 6420 756e  te string and un
-00030d70: 6963 6f64 6520 7374 7269 6e67 7320 746f  icode strings to
-00030d80: 2061 2032 6469 6d65 6e73 696f 6e61 6c20   a 2dimensional 
-00030d90: 6172 7261 790d 0a20 2020 2020 2020 2073  array..        s
-00030da0: 6f20 7468 6174 206e 756d 6261 2063 616e  o that numba can
-00030db0: 2070 726f 6365 7373 2069 7420 636f 7272   process it corr
-00030dc0: 6563 746c 790d 0a0d 0a20 2020 2020 2020  ectly....       
-00030dd0: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
-00030de0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-00030df0: 2020 2020 203e 3e3e 2040 6e75 6d62 612e       >>> @numba.
-00030e00: 6a69 7428 6e6f 7079 7468 6f6e 3d54 7275  jit(nopython=Tru
-00030e10: 6529 0d0a 2020 2020 2020 2020 2e2e 2e20  e)..        ... 
-00030e20: 6465 6620 6e75 6d62 615f 7374 7228 7478  def numba_str(tx
-00030e30: 7429 3a0d 0a20 2020 2020 2020 202e 2e2e  t):..        ...
-00030e40: 2020 2020 2078 3d30 0d0a 2020 2020 2020       x=0..      
-00030e50: 2020 2e2e 2e20 2020 2020 666f 7220 6920    ...     for i 
-00030e60: 696e 2072 616e 6765 2874 7874 2e73 6861  in range(txt.sha
-00030e70: 7065 5b30 5d29 3a0d 0a20 2020 2020 2020  pe[0]):..       
-00030e80: 202e 2e2e 2020 2020 2020 2020 2069 6620   ...         if 
-00030e90: 2874 7874 5b69 2c30 5d3d 3d31 3136 2061  (txt[i,0]==116 a
-00030ea0: 6e64 2020 2320 2774 270d 0a20 2020 2020  nd  # 't'..     
-00030eb0: 2020 202e 2e2e 2020 2020 2020 2020 2020     ...          
-00030ec0: 2020 2074 7874 5b69 2c31 5d3d 3d31 3031     txt[i,1]==101
-00030ed0: 2061 6e64 2020 2320 2765 270d 0a20 2020   and  # 'e'..   
-00030ee0: 2020 2020 202e 2e2e 2020 2020 2020 2020       ...        
-00030ef0: 2020 2020 2074 7874 5b69 2c32 5d3d 3d31       txt[i,2]==1
-00030f00: 3230 2061 6e64 2020 2320 2778 270d 0a20  20 and  # 'x'.. 
-00030f10: 2020 2020 2020 202e 2e2e 2020 2020 2020         ...      
-00030f20: 2020 2020 2020 2074 7874 5b69 2c33 5d3d         txt[i,3]=
-00030f30: 3d31 3136 293a 2020 2020 2320 2774 270d  =116):    # 't'.
-00030f40: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
-00030f50: 2020 2020 2020 2020 2078 202b 3d20 310d           x += 1.
-00030f60: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
-00030f70: 2072 6574 7572 6e20 780d 0a20 2020 2020   return x..     
-00030f80: 2020 203e 3e3e 0d0a 2020 2020 2020 2020     >>>..        
-00030f90: 3e3e 3e20 783d 4661 7374 4172 7261 7928  >>> x=FastArray(
-00030fa0: 5b27 736f 6d65 272c 2774 6578 7427 2c27  ['some','text','
-00030fb0: 7468 6973 272c 2769 7327 5d29 0d0a 2020  this','is'])..  
-00030fc0: 2020 2020 2020 3e3e 3e20 6e75 6d62 615f        >>> numba_
-00030fd0: 7374 7228 782e 7669 6577 286e 702e 7569  str(x.view(np.ui
-00030fe0: 6e74 3829 2e72 6573 6861 7065 2828 6c65  nt8).reshape((le
-00030ff0: 6e28 7829 2c20 782e 6974 656d 7369 7a65  n(x), x.itemsize
-00031000: 2929 290d 0a20 2020 2020 2020 203e 3e3e  )))..        >>>
-00031010: 206e 756d 6261 5f73 7472 2878 2e6e 756d   numba_str(x.num
-00031020: 6261 7374 7269 6e67 290d 0a20 2020 2020  bastring)..     
-00031030: 2020 2022 2222 0d0a 0d0a 2020 2020 2020     """....      
-00031040: 2020 696e 7479 7065 203d 2073 656c 662e    intype = self.
-00031050: 6474 7970 652e 5f5f 7374 725f 5f28 290d  dtype.__str__().
-00031060: 0a20 2020 2020 2020 2069 6620 696e 7479  .        if inty
-00031070: 7065 5b30 5d20 3d3d 2022 7c22 206f 7220  pe[0] == "|" or 
-00031080: 696e 7479 7065 5b30 5d20 3d3d 2022 3c22  intype[0] == "<"
-00031090: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
-000310a0: 6620 696e 7479 7065 5b31 5d20 3d3d 2022  f intype[1] == "
-000310b0: 5322 3a0d 0a20 2020 2020 2020 2020 2020  S":..           
-000310c0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-000310d0: 2e76 6965 7728 6e70 2e75 696e 7438 292e  .view(np.uint8).
-000310e0: 7265 7368 6170 6528 286c 656e 2873 656c  reshape((len(sel
-000310f0: 6629 2c20 7365 6c66 2e69 7465 6d73 697a  f), self.itemsiz
-00031100: 6529 290d 0a20 2020 2020 2020 2020 2020  e))..           
-00031110: 2069 6620 696e 7479 7065 5b31 5d20 3d3d   if intype[1] ==
-00031120: 2022 5522 3a0d 0a20 2020 2020 2020 2020   "U":..         
-00031130: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00031140: 6c66 2e76 6965 7728 6e70 2e75 696e 7433  lf.view(np.uint3
-00031150: 3229 2e72 6573 6861 7065 2828 6c65 6e28  2).reshape((len(
-00031160: 7365 6c66 292c 2073 656c 662e 6974 656d  self), self.item
-00031170: 7369 7a65 202f 2f20 3429 290d 0a20 2020  size // 4))..   
-00031180: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00031190: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
-000311a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000311b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000311c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000311d0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2061  -----..    def a
-000311e0: 7070 6c79 5f6e 756d 6261 2873 656c 662c  pply_numba(self,
-000311f0: 202a 6172 6773 2c20 6f74 7970 653d 4e6f   *args, otype=No
-00031200: 6e65 2c20 6d79 6675 6e63 3d22 6d79 6675  ne, myfunc="myfu
-00031210: 6e63 222c 206e 616d 653d 4e6f 6e65 293a  nc", name=None):
-00031220: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00031230: 2020 2020 2020 2050 7269 6e74 2074 6f20         Print to 
-00031240: 7363 7265 656e 2061 6e20 6578 616d 706c  screen an exampl
-00031250: 6520 6e75 6d62 6120 7369 676e 6174 7572  e numba signatur
-00031260: 6520 666f 7220 7468 6520 6172 7261 792e  e for the array.
-00031270: 0d0a 0d0a 2020 2020 2020 2020 596f 7520  ....        You 
-00031280: 6361 6e20 7468 656e 2063 6f70 7920 7468  can then copy th
-00031290: 6973 2065 7861 6d70 6c65 2074 6f20 6275  is example to bu
-000312a0: 696c 6420 796f 7572 206f 776e 206e 756d  ild your own num
-000312b0: 6261 2066 756e 6374 696f 6e2e 0d0a 0d0a  ba function.....
-000312c0: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
-000312d0: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
-000312e0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-000312f0: 2a61 7267 733a 0d0a 2020 2020 2020 2020  *args:..        
-00031300: 2020 2020 5465 7374 2061 7267 756d 656e      Test argumen
-00031310: 7473 0d0a 0d0a 2020 2020 2020 2020 6f74  ts....        ot
-00031320: 7970 653a 2073 7472 2c20 6465 6661 756c  ype: str, defaul
-00031330: 7420 4e6f 6e65 0d0a 2020 2020 2020 2020  t None..        
-00031340: 2020 2020 4120 6469 6666 6572 656e 7420      A different 
-00031350: 6f75 7470 7574 2064 6174 6120 7479 7065  output data type
-00031360: 0d0a 0d0a 2020 2020 2020 2020 6d79 6675  ....        myfu
-00031370: 6e63 3a20 7374 722c 2064 6566 6175 6c74  nc: str, default
-00031380: 2027 6d79 6675 6e63 270d 0a20 2020 2020   'myfunc'..     
-00031390: 2020 2020 2020 2041 2073 7472 696e 6720         A string 
-000313a0: 746f 2063 616c 6c20 7468 6520 6675 6e63  to call the func
-000313b0: 7469 6f6e 0d0a 0d0a 2020 2020 2020 2020  tion....        
-000313c0: 6e61 6d65 3a20 7374 722c 2064 6566 6175  name: str, defau
-000313d0: 6c74 204e 6f6e 650d 0a20 2020 2020 2020  lt None..       
-000313e0: 2020 2020 2041 2073 7472 696e 6720 746f       A string to
-000313f0: 206e 616d 6520 7468 6520 6172 7261 790d   name the array.
-00031400: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
-00031410: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
-00031420: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 203e  -----..        >
-00031430: 3e3e 2069 6d70 6f72 7420 6e75 6d62 610d  >> import numba.
-00031440: 0a20 2020 2020 2020 203e 3e3e 2040 6e75  .        >>> @nu
-00031450: 6d62 612e 6775 7665 6374 6f72 697a 6528  mba.guvectorize(
-00031460: 5b27 766f 6964 2869 6e74 3634 5b3a 5d2c  ['void(int64[:],
-00031470: 2069 6e74 3634 5b3a 5d29 275d 2c20 2728   int64[:])'], '(
-00031480: 6e29 2d3e 286e 2927 290d 0a20 2020 2020  n)->(n)')..     
-00031490: 2020 202e 2e2e 2064 6566 2073 7175 6172     ... def squar
-000314a0: 6576 2878 2c6f 7574 293a 0d0a 2020 2020  ev(x,out):..    
-000314b0: 2020 2020 2e2e 2e20 2020 2020 666f 7220      ...     for 
-000314c0: 6920 696e 2072 616e 6765 286c 656e 2878  i in range(len(x
-000314d0: 2929 3a0d 0a20 2020 2020 2020 202e 2e2e  )):..        ...
-000314e0: 2020 2020 2020 2020 206f 7574 5b69 5d3d           out[i]=
-000314f0: 785b 695d 2a2a 320d 0a20 2020 2020 2020  x[i]**2..       
-00031500: 202e 2e2e 0d0a 2020 2020 2020 2020 3e3e   .....        >>
-00031510: 3e20 613d 6172 616e 6765 2831 5f30 3030  > a=arange(1_000
-00031520: 5f30 3030 292e 6173 7479 7065 286e 702e  _000).astype(np.
-00031530: 696e 7436 3429 0d0a 2020 2020 2020 2020  int64)..        
-00031540: 3e3e 3e20 7371 7561 7265 7628 6129 0d0a  >>> squarev(a)..
-00031550: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-00031560: 7928 5b20 2020 2020 2020 2020 2020 302c  y([           0,
-00031570: 2020 2020 2020 2020 2020 2020 312c 2020              1,  
-00031580: 2020 2020 2020 2020 2020 342c 202e 2e2e            4, ...
-00031590: 2c20 3939 3939 3934 3030 3030 3039 2c0d  , 999994000009,.
-000315a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000315b0: 2020 2020 3939 3939 3936 3030 3030 3034      999996000004
-000315c0: 2c20 3939 3939 3938 3030 3030 3031 5d2c  , 999998000001],
-000315d0: 2064 7479 7065 3d69 6e74 3634 290d 0a20   dtype=int64).. 
-000315e0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-000315f0: 2020 2020 6966 206e 616d 6520 6973 204e      if name is N
-00031600: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-00031610: 2020 2320 7472 7920 6669 7273 7420 746f    # try first to
-00031620: 2067 6574 2074 6865 206e 616d 650d 0a20   get the name.. 
-00031630: 2020 2020 2020 2020 2020 206e 616d 6520             name 
-00031640: 3d20 7365 6c66 2e67 6574 5f6e 616d 6528  = self.get_name(
-00031650: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-00031660: 2069 6620 6e61 6d65 2069 7320 4e6f 6e65   if name is None
-00031670: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00031680: 2020 206e 616d 6520 3d20 2261 220d 0a0d     name = "a"...
-00031690: 0a20 2020 2020 2020 2069 6e74 7970 6520  .        intype 
-000316a0: 3d20 7365 6c66 2e64 7479 7065 2e5f 5f73  = self.dtype.__s
-000316b0: 7472 5f5f 2829 0d0a 0d0a 2020 2020 2020  tr__()....      
-000316c0: 2020 6966 206f 7479 7065 2069 7320 4e6f    if otype is No
-000316d0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-000316e0: 206f 7574 7479 7065 203d 2073 656c 662e   outtype = self.
-000316f0: 6474 7970 652e 5f5f 7374 725f 5f28 290d  dtype.__str__().
-00031700: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-00031710: 2020 2020 2020 2020 2020 2020 6f75 7474              outt
-00031720: 7970 6520 3d20 6e70 2e64 7479 7065 286f  ype = np.dtype(o
-00031730: 7479 7065 292e 5f5f 7374 725f 5f28 290d  type).__str__().
-00031740: 0a0d 0a20 2020 2020 2020 2023 2054 4f44  ...        # TOD
-00031750: 4f3a 2077 6861 7420 6966 2075 6e69 636f  O: what if unico
-00031760: 6465 206f 7220 7374 7269 6e67 3f20 202e  de or string?  .
-00031770: 6672 6f6d 6275 6666 6572 2f2e 7669 6577  frombuffer/.view
-00031780: 286e 702e 7569 6e74 3829 0d0a 0d0a 2020  (np.uint8)....  
-00031790: 2020 2020 2020 7072 6561 6d62 6c65 203d        preamble =
-000317a0: 2022 696d 706f 7274 206e 756d 6261 5c6e   "import numba\n
-000317b0: 406e 756d 6261 2e67 7576 6563 746f 7269  @numba.guvectori
-000317c0: 7a65 285b 5c6e 220d 0a0d 0a20 2020 2020  ze([\n"....     
-000317d0: 2020 206d 6964 646c 6520 3d20 6622 2776     middle = f"'v
-000317e0: 6f69 6428 7b69 6e74 7970 657d 5b3a 5d2c  oid({intype}[:],
-000317f0: 207b 6f75 7474 7970 657d 5b3a 5d29 272c   {outtype}[:])',
-00031800: 2020 2020 2020 2023 203c 2d2d 2063 616e         # <-- can
-00031810: 2073 7461 636b 206d 756c 7469 706c 6520   stack multiple 
-00031820: 6469 6666 6572 656e 7420 6474 7970 6573  different dtypes
-00031830: 2020 782e 7669 6577 286e 702e 7569 6e74    x.view(np.uint
-00031840: 3829 2e72 6573 6861 7065 282d 312c 2078  8).reshape(-1, x
-00031850: 2e69 7465 6d73 697a 6529 5c6e 220d 0a0d  .itemsize)\n"...
-00031860: 0a20 2020 2020 2020 2070 6f73 7461 6d62  .        postamb
-00031870: 6c65 203d 2022 2020 2020 5d2c 2027 286e  le = "    ], '(n
-00031880: 292d 3e28 6e29 272c 2074 6172 6765 743d  )->(n)', target=
-00031890: 2763 7075 2729 5c6e 220d 0a20 2020 2020  'cpu')\n"..     
-000318a0: 2020 2063 6f64 6520 3d20 6622 6465 6620     code = f"def 
-000318b0: 7b6d 7966 756e 637d 2864 6174 615f 696e  {myfunc}(data_in
-000318c0: 2c20 6461 7461 5f6f 7574 293a 5c6e 2020  , data_out):\n  
-000318d0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
-000318e0: 286c 656e 2864 6174 615f 696e 2929 3a5c  (len(data_in)):\
-000318f0: 6e20 2020 2020 2020 2064 6174 615f 6f75  n        data_ou
-00031900: 745b 695d 3d64 6174 615f 696e 5b69 5d20  t[i]=data_in[i] 
-00031910: 2020 233c 2d2d 2070 7574 2079 6f75 7220    #<-- put your 
-00031920: 636f 6465 2068 6572 655c 6e22 0d0a 2020  code here\n"..  
-00031930: 2020 2020 2020 6578 6563 203d 2070 7265        exec = pre
-00031940: 616d 626c 6520 2b20 6d69 6464 6c65 202b  amble + middle +
-00031950: 2070 6f73 7461 6d62 6c65 202b 2063 6f64   postamble + cod
-00031960: 650d 0a0d 0a20 2020 2020 2020 2070 7269  e....        pri
-00031970: 6e74 2822 436f 7079 2074 6865 2063 6f64  nt("Copy the cod
-00031980: 6520 736e 6970 7065 7420 6265 6c6f 7720  e snippet below 
-00031990: 616e 6420 7265 6e61 6d65 206d 7966 756e  and rename myfun
-000319a0: 6322 290d 0a20 2020 2020 2020 2070 7269  c")..        pri
-000319b0: 6e74 2822 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  nt("------------
-000319c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000319d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000319e0: 2d22 290d 0a20 2020 2020 2020 2070 7269  -")..        pri
-000319f0: 6e74 2865 7865 6329 0d0a 2020 2020 2020  nt(exec)..      
-00031a00: 2020 7072 696e 7428 222d 2d2d 2d2d 2d2d    print("-------
-00031a10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00031a20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00031a30: 2d2d 2d2d 2d2d 2229 0d0a 2020 2020 2020  ------")..      
-00031a40: 2020 6966 2069 6e74 7970 655b 305d 203d    if intype[0] =
-00031a50: 3d20 227c 2220 6f72 2069 6e74 7970 655b  = "|" or intype[
-00031a60: 305d 203d 3d20 223c 223a 0d0a 2020 2020  0] == "<":..    
-00031a70: 2020 2020 2020 2020 6966 2069 6e74 7970          if intyp
-00031a80: 655b 315d 203d 3d20 2253 223a 0d0a 2020  e[1] == "S":..  
-00031a90: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00031aa0: 696e 7428 0d0a 2020 2020 2020 2020 2020  int(..          
-00031ab0: 2020 2020 2020 2020 2020 6622 5468 656e            f"Then
-00031ac0: 2063 616c 6c20 7b6d 7966 756e 637d 287b   call {myfunc}({
-00031ad0: 6e61 6d65 7d2e 6e75 6d62 6173 7472 696e  name}.numbastrin
-00031ae0: 672c 656d 7074 795f 6c69 6b65 287b 6e61  g,empty_like({na
-00031af0: 6d65 7d29 2e6e 756d 6261 7374 7269 6e67  me}).numbastring
-00031b00: 2920 7768 6572 6520 7b6e 616d 657d 2069  ) where {name} i
-00031b10: 7320 7468 6520 696e 7075 7420 6172 7261  s the input arra
-00031b20: 7922 0d0a 2020 2020 2020 2020 2020 2020  y"..            
-00031b30: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
-00031b40: 2020 2065 6c69 6620 696e 7479 7065 5b31     elif intype[1
-00031b50: 5d20 3d3d 2022 5522 3a0d 0a20 2020 2020  ] == "U":..     
-00031b60: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00031b70: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00031b80: 2020 2020 2020 2066 2254 6865 6e20 6361         f"Then ca
-00031b90: 6c6c 207b 6d79 6675 6e63 7d28 7b6e 616d  ll {myfunc}({nam
-00031ba0: 657d 2e6e 756d 6261 7374 7269 6e67 2c65  e}.numbastring,e
-00031bb0: 6d70 7479 5f6c 696b 6528 7b6e 616d 657d  mpty_like({name}
-00031bc0: 292e 6e75 6d62 6173 7472 696e 6729 2077  ).numbastring) w
-00031bd0: 6865 7265 207b 6e61 6d65 7d20 6973 2074  here {name} is t
-00031be0: 6865 2069 6e70 7574 2061 7272 6179 220d  he input array".
-00031bf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00031c00: 2029 0d0a 2020 2020 2020 2020 656c 7365   )..        else
-00031c10: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
-00031c20: 7269 6e74 2866 2254 6865 6e20 6361 6c6c  rint(f"Then call
-00031c30: 207b 6d79 6675 6e63 7d28 7b6e 616d 657d   {myfunc}({name}
-00031c40: 2c65 6d70 7479 5f6c 696b 6528 7b6e 616d  ,empty_like({nam
-00031c50: 657d 2929 2077 6865 7265 207b 6e61 6d65  e})) where {name
-00031c60: 7d20 6973 2074 6865 2069 6e70 7574 2061  } is the input a
-00031c70: 7272 6179 2229 0d0a 2020 2020 2020 2020  rray")..        
-00031c80: 2320 7265 7475 726e 2065 7865 630d 0a0d  # return exec...
-00031c90: 0a20 2020 2064 6566 2061 7070 6c79 2873  .    def apply(s
-00031ca0: 656c 662c 2070 7966 756e 632c 202a 6172  elf, pyfunc, *ar
-00031cb0: 6773 2c20 6f74 7970 6573 3d4e 6f6e 652c  gs, otypes=None,
-00031cc0: 2064 6f63 3d4e 6f6e 652c 2065 7863 6c75   doc=None, exclu
-00031cd0: 6465 643d 4e6f 6e65 2c20 6361 6368 653d  ded=None, cache=
-00031ce0: 4661 6c73 652c 2073 6967 6e61 7475 7265  False, signature
-00031cf0: 3d4e 6f6e 6529 3a0d 0a20 2020 2020 2020  =None):..       
-00031d00: 2022 2222 0d0a 2020 2020 2020 2020 4765   """..        Ge
-00031d10: 6e65 7261 6c69 7a65 6420 6675 6e63 7469  neralized functi
-00031d20: 6f6e 2063 6c61 7373 2e20 2073 6565 3a20  on class.  see: 
-00031d30: 6e70 2e76 6563 746f 7269 7a65 0d0a 0d0a  np.vectorize....
-00031d40: 2020 2020 2020 2020 4372 6561 7465 7320          Creates 
-00031d50: 616e 6420 7468 656e 2061 7070 6c69 6573  and then applies
-00031d60: 2061 2076 6563 746f 7269 7a65 6420 6675   a vectorized fu
-00031d70: 6e63 7469 6f6e 2077 6869 6368 2074 616b  nction which tak
-00031d80: 6573 2061 206e 6573 7465 6420 7365 7175  es a nested sequ
-00031d90: 656e 6365 206f 6620 6f62 6a65 6374 7320  ence of objects 
-00031da0: 6f72 0d0a 2020 2020 2020 2020 6e75 6d70  or..        nump
-00031db0: 7920 6172 7261 7973 2061 7320 696e 7075  y arrays as inpu
-00031dc0: 7473 2061 6e64 2072 6574 7572 6e73 2061  ts and returns a
-00031dd0: 6e20 7369 6e67 6c65 206f 7220 7475 706c  n single or tupl
-00031de0: 6520 6f66 206e 756d 7079 2061 7272 6179  e of numpy array
-00031df0: 2061 730d 0a20 2020 2020 2020 206f 7574   as..        out
-00031e00: 7075 742e 2054 6865 2076 6563 746f 7269  put. The vectori
-00031e10: 7a65 6420 6675 6e63 7469 6f6e 2065 7661  zed function eva
-00031e20: 6c75 6174 6573 2060 7079 6675 6e63 6020  luates `pyfunc` 
-00031e30: 6f76 6572 2073 7563 6365 7373 6976 6520  over successive 
-00031e40: 7475 706c 6573 0d0a 2020 2020 2020 2020  tuples..        
-00031e50: 6f66 2074 6865 2069 6e70 7574 2061 7272  of the input arr
-00031e60: 6179 7320 6c69 6b65 2074 6865 2070 7974  ays like the pyt
-00031e70: 686f 6e20 6d61 7020 6675 6e63 7469 6f6e  hon map function
-00031e80: 2c20 6578 6365 7074 2069 7420 7573 6573  , except it uses
-00031e90: 2074 6865 0d0a 2020 2020 2020 2020 6272   the..        br
-00031ea0: 6f61 6463 6173 7469 6e67 2072 756c 6573  oadcasting rules
-00031eb0: 206f 6620 6e75 6d70 792e 0d0a 0d0a 2020   of numpy.....  
-00031ec0: 2020 2020 2020 5468 6520 6461 7461 2074        The data t
-00031ed0: 7970 6520 6f66 2074 6865 206f 7574 7075  ype of the outpu
-00031ee0: 7420 6f66 2060 7665 6374 6f72 697a 6564  t of `vectorized
-00031ef0: 6020 6973 2064 6574 6572 6d69 6e65 6420  ` is determined 
-00031f00: 6279 2063 616c 6c69 6e67 0d0a 2020 2020  by calling..    
-00031f10: 2020 2020 7468 6520 6675 6e63 7469 6f6e      the function
-00031f20: 2077 6974 6820 7468 6520 6669 7273 7420   with the first 
-00031f30: 656c 656d 656e 7420 6f66 2074 6865 2069  element of the i
-00031f40: 6e70 7574 2e20 2054 6869 7320 6361 6e20  nput.  This can 
-00031f50: 6265 2061 766f 6964 6564 0d0a 2020 2020  be avoided..    
-00031f60: 2020 2020 6279 2073 7065 6369 6679 696e      by specifyin
-00031f70: 6720 7468 6520 606f 7479 7065 7360 2061  g the `otypes` a
-00031f80: 7267 756d 656e 742e 0d0a 0d0a 2020 2020  rgument.....    
-00031f90: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
-00031fa0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-00031fb0: 2d2d 0d0a 2020 2020 2020 2020 7079 6675  --..        pyfu
-00031fc0: 6e63 203a 2063 616c 6c61 626c 650d 0a20  nc : callable.. 
-00031fd0: 2020 2020 2020 2020 2020 2041 2070 7974             A pyt
-00031fe0: 686f 6e20 6675 6e63 7469 6f6e 206f 7220  hon function or 
-00031ff0: 6d65 7468 6f64 2e0d 0a20 2020 2020 2020  method...       
-00032000: 206f 7479 7065 7320 3a20 7374 7220 6f72   otypes : str or
-00032010: 206c 6973 7420 6f66 2064 7479 7065 732c   list of dtypes,
-00032020: 206f 7074 696f 6e61 6c0d 0a20 2020 2020   optional..     
-00032030: 2020 2020 2020 2054 6865 206f 7574 7075         The outpu
-00032040: 7420 6461 7461 2074 7970 652e 2049 7420  t data type. It 
-00032050: 6d75 7374 2062 6520 7370 6563 6966 6965  must be specifie
-00032060: 6420 6173 2065 6974 6865 7220 6120 7374  d as either a st
-00032070: 7269 6e67 206f 660d 0a20 2020 2020 2020  ring of..       
-00032080: 2020 2020 2074 7970 6563 6f64 6520 6368       typecode ch
-00032090: 6172 6163 7465 7273 206f 7220 6120 6c69  aracters or a li
-000320a0: 7374 206f 6620 6461 7461 2074 7970 6520  st of data type 
-000320b0: 7370 6563 6966 6965 7273 2e20 5468 6572  specifiers. Ther
-000320c0: 6520 7368 6f75 6c64 0d0a 2020 2020 2020  e should..      
-000320d0: 2020 2020 2020 6265 206f 6e65 2064 6174        be one dat
-000320e0: 6120 7479 7065 2073 7065 6369 6669 6572  a type specifier
-000320f0: 2066 6f72 2065 6163 6820 6f75 7470 7574   for each output
-00032100: 2e0d 0a20 2020 2020 2020 2064 6f63 203a  ...        doc :
-00032110: 2073 7472 2c20 6f70 7469 6f6e 616c 0d0a   str, optional..
-00032120: 2020 2020 2020 2020 2020 2020 5468 6520              The 
-00032130: 646f 6373 7472 696e 6720 666f 7220 7468  docstring for th
-00032140: 6520 6675 6e63 7469 6f6e 2e20 4966 2060  e function. If `
-00032150: 4e6f 6e65 602c 2074 6865 2064 6f63 7374  None`, the docst
-00032160: 7269 6e67 2077 696c 6c20 6265 2074 6865  ring will be the
-00032170: 0d0a 2020 2020 2020 2020 2020 2020 6060  ..            ``
-00032180: 7079 6675 6e63 2e5f 5f64 6f63 5f5f 6060  pyfunc.__doc__``
-00032190: 2e0d 0a20 2020 2020 2020 2065 7863 6c75  ...        exclu
-000321a0: 6465 6420 3a20 7365 742c 206f 7074 696f  ded : set, optio
-000321b0: 6e61 6c0d 0a20 2020 2020 2020 2020 2020  nal..           
-000321c0: 2053 6574 206f 6620 7374 7269 6e67 7320   Set of strings 
-000321d0: 6f72 2069 6e74 6567 6572 7320 7265 7072  or integers repr
-000321e0: 6573 656e 7469 6e67 2074 6865 2070 6f73  esenting the pos
-000321f0: 6974 696f 6e61 6c20 6f72 206b 6579 776f  itional or keywo
-00032200: 7264 0d0a 2020 2020 2020 2020 2020 2020  rd..            
-00032210: 6172 6775 6d65 6e74 7320 666f 7220 7768  arguments for wh
-00032220: 6963 6820 7468 6520 6675 6e63 7469 6f6e  ich the function
-00032230: 2077 696c 6c20 6e6f 7420 6265 2076 6563   will not be vec
-00032240: 746f 7269 7a65 642e 2020 5468 6573 6520  torized.  These 
-00032250: 7769 6c6c 2062 650d 0a20 2020 2020 2020  will be..       
-00032260: 2020 2020 2070 6173 7365 6420 6469 7265       passed dire
-00032270: 6374 6c79 2074 6f20 6070 7966 756e 6360  ctly to `pyfunc`
-00032280: 2075 6e6d 6f64 6966 6965 642e 0d0a 0d0a   unmodified.....
-00032290: 2020 2020 2020 2020 2020 2020 2e2e 2076              .. v
-000322a0: 6572 7369 6f6e 6164 6465 643a 3a20 312e  ersionadded:: 1.
-000322b0: 372e 300d 0a0d 0a20 2020 2020 2020 2063  7.0....        c
-000322c0: 6163 6865 203a 2062 6f6f 6c2c 206f 7074  ache : bool, opt
-000322d0: 696f 6e61 6c0d 0a20 2020 2020 2020 2020  ional..         
-000322e0: 2020 4966 2060 5472 7565 602c 2074 6865    If `True`, the
-000322f0: 6e20 6361 6368 6520 7468 6520 6669 7273  n cache the firs
-00032300: 7420 6675 6e63 7469 6f6e 2063 616c 6c20  t function call 
-00032310: 7468 6174 2064 6574 6572 6d69 6e65 7320  that determines 
-00032320: 7468 6520 6e75 6d62 6572 0d0a 2020 2020  the number..    
-00032330: 2020 2020 2020 206f 6620 6f75 7470 7574         of output
-00032340: 7320 6966 2060 6f74 7970 6573 6020 6973  s if `otypes` is
-00032350: 206e 6f74 2070 726f 7669 6465 642e 0d0a   not provided...
-00032360: 0d0a 2020 2020 2020 2020 2020 2020 2e2e  ..            ..
-00032370: 2076 6572 7369 6f6e 6164 6465 643a 3a20   versionadded:: 
-00032380: 312e 372e 300d 0a0d 0a20 2020 2020 2020  1.7.0....       
-00032390: 2073 6967 6e61 7475 7265 203a 2073 7472   signature : str
-000323a0: 696e 672c 206f 7074 696f 6e61 6c0d 0a20  ing, optional.. 
-000323b0: 2020 2020 2020 2020 2020 2047 656e 6572             Gener
-000323c0: 616c 697a 6564 2075 6e69 7665 7273 616c  alized universal
-000323d0: 2066 756e 6374 696f 6e20 7369 676e 6174   function signat
-000323e0: 7572 652c 2065 2e67 2e2c 2060 6028 6d2c  ure, e.g., ``(m,
-000323f0: 6e29 2c28 6e29 2d3e 286d 2960 6020 666f  n),(n)->(m)`` fo
-00032400: 720d 0a20 2020 2020 2020 2020 2020 2076  r..            v
-00032410: 6563 746f 7269 7a65 6420 6d61 7472 6978  ectorized matrix
-00032420: 2d76 6563 746f 7220 6d75 6c74 6970 6c69  -vector multipli
-00032430: 6361 7469 6f6e 2e20 4966 2070 726f 7669  cation. If provi
-00032440: 6465 642c 2060 6070 7966 756e 6360 6020  ded, ``pyfunc`` 
-00032450: 7769 6c6c 0d0a 2020 2020 2020 2020 2020  will..          
-00032460: 2020 6265 2063 616c 6c65 6420 7769 7468    be called with
-00032470: 2028 616e 6420 6578 7065 6374 6564 2074   (and expected t
-00032480: 6f20 7265 7475 726e 2920 6172 7261 7973  o return) arrays
-00032490: 2077 6974 6820 7368 6170 6573 2067 6976   with shapes giv
-000324a0: 656e 2062 7920 7468 650d 0a20 2020 2020  en by the..     
-000324b0: 2020 2020 2020 2073 697a 6520 6f66 2063         size of c
-000324c0: 6f72 7265 7370 6f6e 6469 6e67 2063 6f72  orresponding cor
-000324d0: 6520 6469 6d65 6e73 696f 6e73 2e20 4279  e dimensions. By
-000324e0: 2064 6566 6175 6c74 2c20 6060 7079 6675   default, ``pyfu
-000324f0: 6e63 6060 2069 730d 0a20 2020 2020 2020  nc`` is..       
-00032500: 2020 2020 2061 7373 756d 6564 2074 6f20       assumed to 
-00032510: 7461 6b65 2073 6361 6c61 7273 2061 7320  take scalars as 
-00032520: 696e 7075 7420 616e 6420 6f75 7470 7574  input and output
-00032530: 2e0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
-00032540: 202e 2e20 7665 7273 696f 6e61 6464 6564   .. versionadded
-00032550: 3a3a 2031 2e31 322e 300d 0a0d 0a20 2020  :: 1.12.0....   
-00032560: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
-00032570: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-00032580: 2020 2020 2020 2076 6563 746f 7269 7a65         vectorize
-00032590: 6420 3a20 6361 6c6c 6162 6c65 0d0a 2020  d : callable..  
-000325a0: 2020 2020 2020 2020 2020 5665 6374 6f72            Vector
-000325b0: 697a 6564 2066 756e 6374 696f 6e2e 0d0a  ized function...
-000325c0: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
-000325d0: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
-000325e0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4661  ----..        Fa
-000325f0: 7374 4172 7261 792e 6170 706c 795f 6e75  stArray.apply_nu
-00032600: 6d62 610d 0a20 2020 2020 2020 2046 6173  mba..        Fas
-00032610: 7441 7272 6179 2e61 7070 6c79 5f70 616e  tArray.apply_pan
-00032620: 6461 730d 0a0d 0a20 2020 2020 2020 2045  das....        E
-00032630: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
-00032640: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
-00032650: 2020 203e 3e3e 2064 6566 206d 7966 756e     >>> def myfun
-00032660: 6328 612c 2062 293a 0d0a 2020 2020 2020  c(a, b):..      
-00032670: 2020 2e2e 2e20 2020 2020 2252 6574 7572    ...     "Retur
-00032680: 6e20 612d 6220 6966 2061 3e62 2c20 6f74  n a-b if a>b, ot
-00032690: 6865 7277 6973 6520 7265 7475 726e 2061  herwise return a
-000326a0: 2b62 220d 0a20 2020 2020 2020 202e 2e2e  +b"..        ...
-000326b0: 2020 2020 2069 6620 6120 3e20 623a 0d0a       if a > b:..
-000326c0: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
-000326d0: 2020 2020 7265 7475 726e 2061 202d 2062      return a - b
-000326e0: 0d0a 2020 2020 2020 2020 2e2e 2e20 2020  ..        ...   
-000326f0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00032700: 202e 2e2e 2020 2020 2020 2020 2072 6574   ...         ret
-00032710: 7572 6e20 6120 2b20 620d 0a20 2020 2020  urn a + b..     
-00032720: 2020 203e 3e3e 0d0a 2020 2020 2020 2020     >>>..        
-00032730: 3e3e 3e20 613d 6172 616e 6765 2831 3029  >>> a=arange(10)
-00032740: 0d0a 2020 2020 2020 2020 3e3e 3e20 623d  ..        >>> b=
-00032750: 6172 616e 6765 2831 3029 2b31 0d0a 2020  arange(10)+1..  
-00032760: 2020 2020 2020 3e3e 3e20 612e 6170 706c        >>> a.appl
-00032770: 7928 6d79 6675 6e63 2c62 290d 0a20 2020  y(myfunc,b)..   
-00032780: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
-00032790: 2031 2c20 2033 2c20 2035 2c20 2037 2c20   1,  3,  5,  7, 
-000327a0: 2039 2c20 3131 2c20 3133 2c20 3135 2c20   9, 11, 13, 15, 
-000327b0: 3137 2c20 3139 5d29 0d0a 0d0a 2020 2020  17, 19])....    
-000327c0: 2020 2020 4578 616d 706c 6520 7769 7468      Example with
-000327d0: 206f 6e65 2069 6e70 7574 2061 7272 6179   one input array
-000327e0: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
-000327f0: 6465 6620 7371 7561 7265 2878 293a 0d0a  def square(x):..
-00032800: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
-00032810: 7265 7475 726e 2078 2a2a 320d 0a20 2020  return x**2..   
-00032820: 2020 2020 203e 3e3e 0d0a 2020 2020 2020       >>>..      
-00032830: 2020 3e3e 3e20 613d 6172 616e 6765 2831    >>> a=arange(1
-00032840: 3029 0d0a 2020 2020 2020 2020 3e3e 3e20  0)..        >>> 
-00032850: 612e 6170 706c 7928 7371 7561 7265 290d  a.apply(square).
-00032860: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
-00032870: 6179 285b 2030 2c20 2031 2c20 2034 2c20  ay([ 0,  1,  4, 
-00032880: 2039 2c20 3136 2c20 3235 2c20 3336 2c20   9, 16, 25, 36, 
-00032890: 3439 2c20 3634 2c20 3831 5d29 0d0a 0d0a  49, 64, 81])....
-000328a0: 2020 2020 2020 2020 4578 616d 706c 6520          Example 
-000328b0: 7769 7468 206c 616d 6264 610d 0a0d 0a20  with lambda.... 
-000328c0: 2020 2020 2020 203e 3e3e 2061 3d61 7261         >>> a=ara
-000328d0: 6e67 6528 3130 290d 0a20 2020 2020 2020  nge(10)..       
-000328e0: 203e 3e3e 2061 2e61 7070 6c79 286c 616d   >>> a.apply(lam
-000328f0: 6264 6120 783a 2078 2a2a 3229 0d0a 2020  bda x: x**2)..  
-00032900: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
-00032910: 5b20 302c 2020 312c 2020 342c 2020 392c  [ 0,  1,  4,  9,
-00032920: 2031 362c 2032 352c 2033 362c 2034 392c   16, 25, 36, 49,
-00032930: 2036 342c 2038 315d 290d 0a0d 0a20 2020   64, 81])....   
-00032940: 2020 2020 2045 7861 6d70 6c65 2077 6974       Example wit
-00032950: 6820 6e75 6d62 610d 0a0d 0a20 2020 2020  h numba....     
-00032960: 2020 203e 3e3e 2066 726f 6d20 6e75 6d62     >>> from numb
-00032970: 6120 696d 706f 7274 206a 6974 0d0a 2020  a import jit..  
-00032980: 2020 2020 2020 3e3e 3e20 406a 6974 0d0a        >>> @jit..
-00032990: 2020 2020 2020 2020 2e2e 2e20 6465 6620          ... def 
-000329a0: 7371 7561 7265 6974 2878 293a 0d0a 2020  squareit(x):..  
-000329b0: 2020 2020 2020 2e2e 2e20 2020 2020 7265        ...     re
-000329c0: 7475 726e 2078 2a2a 320d 0a20 2020 2020  turn x**2..     
-000329d0: 2020 203e 3e3e 2061 2e61 7070 6c79 2873     >>> a.apply(s
-000329e0: 7175 6172 6569 7429 0d0a 2020 2020 2020  quareit)..      
-000329f0: 2020 4661 7374 4172 7261 7928 5b20 302c    FastArray([ 0,
-00032a00: 2020 312c 2020 342c 2020 392c 2031 362c    1,  4,  9, 16,
-00032a10: 2032 352c 2033 362c 2034 392c 2036 342c   25, 36, 49, 64,
-00032a20: 2038 315d 290d 0a0d 0a20 2020 2020 2020   81])....       
-00032a30: 2045 7861 6d70 6c65 7320 746f 2075 7365   Examples to use
-00032a40: 2065 7869 7374 696e 6720 6275 696c 7469   existing builti
-00032a50: 6e20 6f63 7420 6675 6e63 7469 6f6e 2062  n oct function b
-00032a60: 7574 2063 6861 6e67 6520 7468 6520 6f75  ut change the ou
-00032a70: 7470 7574 2066 726f 6d20 7374 7269 6e67  tput from string
-00032a80: 2c20 746f 2075 6e69 636f 6465 2c20 746f  , to unicode, to
-00032a90: 206f 626a 6563 740d 0a0d 0a20 2020 2020   object....     
-00032aa0: 2020 203e 3e3e 2061 3d61 7261 6e67 6528     >>> a=arange(
-00032ab0: 3130 290d 0a20 2020 2020 2020 203e 3e3e  10)..        >>>
-00032ac0: 2061 2e61 7070 6c79 286f 6374 2c20 6f74   a.apply(oct, ot
-00032ad0: 7970 6573 3d5b 2753 275d 290d 0a20 2020  ypes=['S'])..   
-00032ae0: 2020 2020 2046 6173 7441 7272 6179 285b       FastArray([
-00032af0: 6227 306f 3027 2c20 6227 306f 3127 2c20  b'0o0', b'0o1', 
-00032b00: 6227 306f 3227 2c20 6227 306f 3327 2c20  b'0o2', b'0o3', 
-00032b10: 6227 306f 3427 2c20 6227 306f 3527 2c20  b'0o4', b'0o5', 
-00032b20: 6227 306f 3627 2c20 6227 306f 3727 2c20  b'0o6', b'0o7', 
-00032b30: 6227 306f 3130 272c 2062 2730 6f31 3127  b'0o10', b'0o11'
-00032b40: 5d2c 2064 7479 7065 3d27 7c53 3427 290d  ], dtype='|S4').
-00032b50: 0a0d 0a20 2020 2020 2020 203e 3e3e 2061  ...        >>> a
-00032b60: 3d61 7261 6e67 6528 3130 290d 0a20 2020  =arange(10)..   
-00032b70: 2020 2020 203e 3e3e 2061 2e61 7070 6c79       >>> a.apply
-00032b80: 286f 6374 2c20 6f74 7970 6573 3d5b 2755  (oct, otypes=['U
-00032b90: 275d 290d 0a20 2020 2020 2020 2046 6173  '])..        Fas
-00032ba0: 7441 7272 6179 285b 2730 6f30 272c 2027  tArray(['0o0', '
-00032bb0: 306f 3127 2c20 2730 6f32 272c 2027 306f  0o1', '0o2', '0o
-00032bc0: 3327 2c20 2730 6f34 272c 2027 306f 3527  3', '0o4', '0o5'
-00032bd0: 2c20 2730 6f36 272c 2027 306f 3727 2c20  , '0o6', '0o7', 
-00032be0: 2730 6f31 3027 2c20 2730 6f31 3127 5d2c  '0o10', '0o11'],
-00032bf0: 2064 7479 7065 3d27 3c55 3427 290d 0a0d   dtype='<U4')...
-00032c00: 0a20 2020 2020 2020 203e 3e3e 2061 3d61  .        >>> a=a
-00032c10: 7261 6e67 6528 3130 290d 0a20 2020 2020  range(10)..     
-00032c20: 2020 203e 3e3e 2061 2e61 7070 6c79 286f     >>> a.apply(o
-00032c30: 6374 2c20 6f74 7970 6573 3d5b 274f 275d  ct, otypes=['O']
-00032c40: 290d 0a20 2020 2020 2020 2046 6173 7441  )..        FastA
-00032c50: 7272 6179 285b 2730 6f30 272c 2027 306f  rray(['0o0', '0o
-00032c60: 3127 2c20 2730 6f32 272c 2027 306f 3327  1', '0o2', '0o3'
-00032c70: 2c20 2730 6f34 272c 2027 306f 3527 2c20  , '0o4', '0o5', 
-00032c80: 2730 6f36 272c 2027 306f 3727 2c20 2730  '0o6', '0o7', '0
-00032c90: 6f31 3027 2c20 2730 6f31 3127 5d2c 2064  o10', '0o11'], d
-00032ca0: 7479 7065 3d6f 626a 6563 7429 0d0a 0d0a  type=object)....
-00032cb0: 2020 2020 2020 2020 2222 220d 0a0d 0a20          """.... 
-00032cc0: 2020 2020 2020 2076 6675 6e63 203d 206e         vfunc = n
-00032cd0: 702e 7665 6374 6f72 697a 6528 7079 6675  p.vectorize(pyfu
-00032ce0: 6e63 2c20 6f74 7970 6573 3d6f 7479 7065  nc, otypes=otype
-00032cf0: 732c 2064 6f63 3d64 6f63 2c20 6578 636c  s, doc=doc, excl
-00032d00: 7564 6564 3d65 7863 6c75 6465 642c 2063  uded=excluded, c
-00032d10: 6163 6865 3d63 6163 6865 2c20 7369 676e  ache=cache, sign
-00032d20: 6174 7572 653d 7369 676e 6174 7572 6529  ature=signature)
-00032d30: 0d0a 2020 2020 2020 2020 7265 7375 6c74  ..        result
-00032d40: 203d 2076 6675 6e63 2873 656c 662c 202a   = vfunc(self, *
-00032d50: 6172 6773 290d 0a20 2020 2020 2020 2072  args)..        r
-00032d60: 6574 7572 6e20 7265 7375 6c74 0d0a 0d0a  eturn result....
-00032d70: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
-00032d80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00032d90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00032da0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00032db0: 2d0d 0a20 2020 2064 6566 2061 7070 6c79  -..    def apply
-00032dc0: 5f70 616e 6461 7328 7365 6c66 2c20 6675  _pandas(self, fu
-00032dd0: 6e63 2c20 636f 6e76 6572 745f 6474 7970  nc, convert_dtyp
-00032de0: 653d 5472 7565 2c20 6172 6773 3d28 292c  e=True, args=(),
-00032df0: 202a 2a6b 7764 7329 3a0d 0a20 2020 2020   **kwds):..     
-00032e00: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00032e10: 496e 766f 6b65 2066 756e 6374 696f 6e20  Invoke function 
-00032e20: 6f6e 2076 616c 7565 7320 6f66 2046 6173  on values of Fas
-00032e30: 7441 7272 6179 2e20 4361 6e20 6265 2075  tArray. Can be u
-00032e40: 6675 6e63 2028 6120 4e75 6d50 7920 6675  func (a NumPy fu
-00032e50: 6e63 7469 6f6e 0d0a 2020 2020 2020 2020  nction..        
-00032e60: 7468 6174 2061 7070 6c69 6573 2074 6f20  that applies to 
-00032e70: 7468 6520 656e 7469 7265 2046 6173 7441  the entire FastA
-00032e80: 7272 6179 2920 6f72 2061 2050 7974 686f  rray) or a Pytho
-00032e90: 6e20 6675 6e63 7469 6f6e 2074 6861 7420  n function that 
-00032ea0: 6f6e 6c79 2077 6f72 6b73 0d0a 2020 2020  only works..    
-00032eb0: 2020 2020 6f6e 2073 696e 676c 6520 7661      on single va
-00032ec0: 6c75 6573 0d0a 0d0a 2020 2020 2020 2020  lues....        
-00032ed0: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
-00032ee0: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
-00032ef0: 2020 2020 2020 2020 6675 6e63 203a 2066          func : f
-00032f00: 756e 6374 696f 6e0d 0a20 2020 2020 2020  unction..       
-00032f10: 2063 6f6e 7665 7274 5f64 7479 7065 203a   convert_dtype :
-00032f20: 2062 6f6f 6c65 616e 2c20 6465 6661 756c   boolean, defaul
-00032f30: 7420 5472 7565 0d0a 2020 2020 2020 2020  t True..        
-00032f40: 2020 2020 5472 7920 746f 2066 696e 6420      Try to find 
-00032f50: 6265 7474 6572 2064 7479 7065 2066 6f72  better dtype for
-00032f60: 2065 6c65 6d65 6e74 7769 7365 2066 756e   elementwise fun
-00032f70: 6374 696f 6e20 7265 7375 6c74 732e 2049  ction results. I
-00032f80: 660d 0a20 2020 2020 2020 2020 2020 2046  f..            F
-00032f90: 616c 7365 2c20 6c65 6176 6520 6173 2064  alse, leave as d
-00032fa0: 7479 7065 3d6f 626a 6563 740d 0a20 2020  type=object..   
-00032fb0: 2020 2020 2061 7267 7320 3a20 7475 706c       args : tupl
-00032fc0: 650d 0a20 2020 2020 2020 2020 2020 2050  e..            P
-00032fd0: 6f73 6974 696f 6e61 6c20 6172 6775 6d65  ositional argume
-00032fe0: 6e74 7320 746f 2070 6173 7320 746f 2066  nts to pass to f
-00032ff0: 756e 6374 696f 6e20 696e 2061 6464 6974  unction in addit
-00033000: 696f 6e20 746f 2074 6865 2076 616c 7565  ion to the value
-00033010: 0d0a 2020 2020 2020 2020 4164 6469 7469  ..        Additi
-00033020: 6f6e 616c 206b 6579 776f 7264 2061 7267  onal keyword arg
-00033030: 756d 656e 7473 2077 696c 6c20 6265 2070  uments will be p
-00033040: 6173 7365 6420 6173 206b 6579 776f 7264  assed as keyword
-00033050: 7320 746f 2074 6865 2066 756e 6374 696f  s to the functio
-00033060: 6e0d 0a0d 0a20 2020 2020 2020 2052 6574  n....        Ret
-00033070: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
-00033080: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2079  -----..        y
-00033090: 203a 2046 6173 7441 7272 6179 206f 7220   : FastArray or 
-000330a0: 4461 7461 7365 7420 6966 2066 756e 6320  Dataset if func 
-000330b0: 7265 7475 726e 7320 6120 4661 7374 4172  returns a FastAr
-000330c0: 7261 790d 0a0d 0a20 2020 2020 2020 2053  ray....        S
-000330d0: 6565 2041 6c73 6f0d 0a20 2020 2020 2020  ee Also..       
-000330e0: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
-000330f0: 2020 2046 6173 7441 7272 6179 2e6d 6170     FastArray.map
-00033100: 3a20 466f 7220 656c 656d 656e 742d 7769  : For element-wi
-00033110: 7365 206f 7065 7261 7469 6f6e 730d 0a20  se operations.. 
-00033120: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-00033130: 2e61 6767 3a20 6f6e 6c79 2070 6572 666f  .agg: only perfo
-00033140: 726d 2061 6767 7265 6761 7469 6e67 2074  rm aggregating t
-00033150: 7970 6520 6f70 6572 6174 696f 6e73 0d0a  ype operations..
-00033160: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-00033170: 792e 7472 616e 7366 6f72 6d3a 206f 6e6c  y.transform: onl
-00033180: 7920 7065 7266 6f72 6d20 7472 616e 7366  y perform transf
-00033190: 6f72 6d69 6e67 2074 7970 6520 6f70 6572  orming type oper
-000331a0: 6174 696f 6e73 0d0a 0d0a 2020 2020 2020  ations....      
-000331b0: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
-000331c0: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
-000331d0: 2020 2020 2020 4372 6561 7465 2061 2046        Create a F
-000331e0: 6173 7441 7272 6179 2077 6974 6820 7479  astArray with ty
-000331f0: 7069 6361 6c20 7375 6d6d 6572 2074 656d  pical summer tem
-00033200: 7065 7261 7475 7265 7320 666f 7220 6561  peratures for ea
-00033210: 6368 2063 6974 792e 0d0a 0d0a 2020 2020  ch city.....    
-00033220: 2020 2020 3e3e 3e20 6661 203d 2072 742e      >>> fa = rt.
-00033230: 4661 7374 4172 7261 7928 5b32 302c 2032  FastArray([20, 2
-00033240: 312c 2031 325d 2c20 696e 6465 783d 5b27  1, 12], index=['
-00033250: 4c6f 6e64 6f6e 272c 2027 4e65 7720 596f  London', 'New Yo
-00033260: 726b 272c 2748 656c 7369 6e6b 6927 5d29  rk','Helsinki'])
-00033270: 0d0a 2020 2020 2020 2020 3e3e 3e20 6661  ..        >>> fa
-00033280: 0d0a 2020 2020 2020 2020 4c6f 6e64 6f6e  ..        London
-00033290: 2020 2020 2020 3230 0d0a 2020 2020 2020        20..      
-000332a0: 2020 4e65 7720 596f 726b 2020 2020 3231    New York    21
-000332b0: 0d0a 2020 2020 2020 2020 4865 6c73 696e  ..        Helsin
-000332c0: 6b69 2020 2020 3132 0d0a 2020 2020 2020  ki    12..      
-000332d0: 2020 6474 7970 653a 2069 6e74 3634 0d0a    dtype: int64..
-000332e0: 0d0a 2020 2020 2020 2020 5371 7561 7265  ..        Square
-000332f0: 2074 6865 2076 616c 7565 7320 6279 2064   the values by d
-00033300: 6566 696e 696e 6720 6120 6675 6e63 7469  efining a functi
-00033310: 6f6e 2061 6e64 2070 6173 7369 6e67 2069  on and passing i
-00033320: 7420 6173 2061 6e0d 0a20 2020 2020 2020  t as an..       
-00033330: 2061 7267 756d 656e 7420 746f 2060 6061   argument to ``a
-00033340: 7070 6c79 2829 6060 2e0d 0a0d 0a20 2020  pply()``.....   
-00033350: 2020 2020 203e 3e3e 2064 6566 2073 7175       >>> def squ
-00033360: 6172 6528 7829 3a0d 0a20 2020 2020 2020  are(x):..       
-00033370: 202e 2e2e 2020 2020 2072 6574 7572 6e20   ...     return 
-00033380: 782a 2a32 0d0a 2020 2020 2020 2020 3e3e  x**2..        >>
-00033390: 3e20 6661 2e61 7070 6c79 2873 7175 6172  > fa.apply(squar
-000333a0: 6529 0d0a 2020 2020 2020 2020 4c6f 6e64  e)..        Lond
-000333b0: 6f6e 2020 2020 2020 3430 300d 0a20 2020  on      400..   
-000333c0: 2020 2020 204e 6577 2059 6f72 6b20 2020       New York   
-000333d0: 2034 3431 0d0a 2020 2020 2020 2020 4865   441..        He
-000333e0: 6c73 696e 6b69 2020 2020 3134 340d 0a20  lsinki    144.. 
-000333f0: 2020 2020 2020 2064 7479 7065 3a20 696e         dtype: in
-00033400: 7436 340d 0a0d 0a20 2020 2020 2020 2053  t64....        S
-00033410: 7175 6172 6520 7468 6520 7661 6c75 6573  quare the values
-00033420: 2062 7920 7061 7373 696e 6720 616e 2061   by passing an a
-00033430: 6e6f 6e79 6d6f 7573 2066 756e 6374 696f  nonymous functio
-00033440: 6e20 6173 2061 6e0d 0a20 2020 2020 2020  n as an..       
-00033450: 2061 7267 756d 656e 7420 746f 2060 6061   argument to ``a
-00033460: 7070 6c79 2829 6060 2e0d 0a0d 0a20 2020  pply()``.....   
-00033470: 2020 2020 203e 3e3e 2066 612e 6170 706c       >>> fa.appl
-00033480: 7928 6c61 6d62 6461 2078 3a20 782a 2a32  y(lambda x: x**2
-00033490: 290d 0a20 2020 2020 2020 204c 6f6e 646f  )..        Londo
-000334a0: 6e20 2020 2020 2034 3030 0d0a 2020 2020  n      400..    
-000334b0: 2020 2020 4e65 7720 596f 726b 2020 2020      New York    
-000334c0: 3434 310d 0a20 2020 2020 2020 2048 656c  441..        Hel
-000334d0: 7369 6e6b 6920 2020 2031 3434 0d0a 2020  sinki    144..  
-000334e0: 2020 2020 2020 6474 7970 653a 2069 6e74        dtype: int
-000334f0: 3634 0d0a 0d0a 2020 2020 2020 2020 4465  64....        De
-00033500: 6669 6e65 2061 2063 7573 746f 6d20 6675  fine a custom fu
-00033510: 6e63 7469 6f6e 2074 6861 7420 6e65 6564  nction that need
-00033520: 7320 6164 6469 7469 6f6e 616c 2070 6f73  s additional pos
-00033530: 6974 696f 6e61 6c0d 0a20 2020 2020 2020  itional..       
-00033540: 2061 7267 756d 656e 7473 2061 6e64 2070   arguments and p
-00033550: 6173 7320 7468 6573 6520 6164 6469 7469  ass these additi
-00033560: 6f6e 616c 2061 7267 756d 656e 7473 2075  onal arguments u
-00033570: 7369 6e67 2074 6865 0d0a 2020 2020 2020  sing the..      
-00033580: 2020 6060 6172 6773 6060 206b 6579 776f    ``args`` keywo
-00033590: 7264 2e0d 0a0d 0a20 2020 2020 2020 203e  rd.....        >
-000335a0: 3e3e 2064 6566 2073 7562 7472 6163 745f  >> def subtract_
-000335b0: 6375 7374 6f6d 5f76 616c 7565 2878 2c20  custom_value(x, 
-000335c0: 6375 7374 6f6d 5f76 616c 7565 293a 0d0a  custom_value):..
-000335d0: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
-000335e0: 7265 7475 726e 2078 2d63 7573 746f 6d5f  return x-custom_
-000335f0: 7661 6c75 650d 0a20 2020 2020 2020 203e  value..        >
-00033600: 3e3e 2066 612e 6170 706c 7928 7375 6274  >> fa.apply(subt
-00033610: 7261 6374 5f63 7573 746f 6d5f 7661 6c75  ract_custom_valu
-00033620: 652c 2061 7267 733d 2835 2c29 290d 0a20  e, args=(5,)).. 
-00033630: 2020 2020 2020 204c 6f6e 646f 6e20 2020         London   
-00033640: 2020 2031 350d 0a20 2020 2020 2020 204e     15..        N
-00033650: 6577 2059 6f72 6b20 2020 2031 360d 0a20  ew York    16.. 
-00033660: 2020 2020 2020 2048 656c 7369 6e6b 6920         Helsinki 
-00033670: 2020 2020 370d 0a20 2020 2020 2020 2064      7..        d
-00033680: 7479 7065 3a20 696e 7436 340d 0a0d 0a20  type: int64.... 
-00033690: 2020 2020 2020 2044 6566 696e 6520 6120         Define a 
-000336a0: 6375 7374 6f6d 2066 756e 6374 696f 6e20  custom function 
-000336b0: 7468 6174 2074 616b 6573 206b 6579 776f  that takes keywo
-000336c0: 7264 2061 7267 756d 656e 7473 0d0a 2020  rd arguments..  
-000336d0: 2020 2020 2020 616e 6420 7061 7373 2074        and pass t
-000336e0: 6865 7365 2061 7267 756d 656e 7473 2074  hese arguments t
-000336f0: 6f20 6060 6170 706c 7960 602e 0d0a 0d0a  o ``apply``.....
-00033700: 2020 2020 2020 2020 3e3e 3e20 6465 6620          >>> def 
-00033710: 6164 645f 6375 7374 6f6d 5f76 616c 7565  add_custom_value
-00033720: 7328 782c 202a 2a6b 7761 7267 7329 3a0d  s(x, **kwargs):.
-00033730: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
-00033740: 2066 6f72 206d 6f6e 7468 2069 6e20 6b77   for month in kw
-00033750: 6172 6773 3a0d 0a20 2020 2020 2020 202e  args:..        .
-00033760: 2e2e 2020 2020 2020 2020 2078 2b3d 6b77  ..         x+=kw
-00033770: 6172 6773 5b6d 6f6e 7468 5d0d 0a20 2020  args[month]..   
-00033780: 2020 2020 202e 2e2e 2020 2020 2072 6574       ...     ret
-00033790: 7572 6e20 780d 0a20 2020 2020 2020 203e  urn x..        >
-000337a0: 3e3e 2066 612e 6170 706c 7928 6164 645f  >> fa.apply(add_
-000337b0: 6375 7374 6f6d 5f76 616c 7565 732c 206a  custom_values, j
-000337c0: 756e 653d 3330 2c20 6a75 6c79 3d32 302c  une=30, july=20,
-000337d0: 2061 7567 7573 743d 3235 290d 0a20 2020   august=25)..   
-000337e0: 2020 2020 204c 6f6e 646f 6e20 2020 2020       London     
-000337f0: 2039 350d 0a20 2020 2020 2020 204e 6577   95..        New
-00033800: 2059 6f72 6b20 2020 2039 360d 0a20 2020   York    96..   
-00033810: 2020 2020 2048 656c 7369 6e6b 6920 2020       Helsinki   
-00033820: 2038 370d 0a20 2020 2020 2020 2064 7479   87..        dty
-00033830: 7065 3a20 696e 7436 340d 0a0d 0a20 2020  pe: int64....   
-00033840: 2020 2020 2055 7365 2061 2066 756e 6374       Use a funct
-00033850: 696f 6e20 6672 6f6d 2074 6865 204e 756d  ion from the Num
-00033860: 7079 206c 6962 7261 7279 2e0d 0a0d 0a20  py library..... 
-00033870: 2020 2020 2020 203e 3e3e 2066 612e 6170         >>> fa.ap
-00033880: 706c 7928 6e70 2e6c 6f67 290d 0a20 2020  ply(np.log)..   
-00033890: 2020 2020 204c 6f6e 646f 6e20 2020 2020       London     
-000338a0: 2032 2e39 3935 3733 320d 0a20 2020 2020   2.995732..     
-000338b0: 2020 204e 6577 2059 6f72 6b20 2020 2033     New York    3
-000338c0: 2e30 3434 3532 320d 0a20 2020 2020 2020  .044522..       
-000338d0: 2048 656c 7369 6e6b 6920 2020 2032 2e34   Helsinki    2.4
-000338e0: 3834 3930 370d 0a20 2020 2020 2020 2064  84907..        d
-000338f0: 7479 7065 3a20 666c 6f61 7436 340d 0a20  type: float64.. 
-00033900: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00033910: 2020 2020 696d 706f 7274 2070 616e 6461      import panda
-00033920: 7320 6173 2070 640d 0a0d 0a20 2020 2020  s as pd....     
-00033930: 2020 2073 6572 6965 7320 3d20 7064 2e53     series = pd.S
-00033940: 6572 6965 7328 7365 6c66 290d 0a20 2020  eries(self)..   
-00033950: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
-00033960: 7269 6573 2e61 7070 6c79 2866 756e 632c  ries.apply(func,
-00033970: 2063 6f6e 7665 7274 5f64 7479 7065 3d63   convert_dtype=c
-00033980: 6f6e 7665 7274 5f64 7479 7065 2c20 6172  onvert_dtype, ar
-00033990: 6773 3d61 7267 732c 202a 2a6b 7764 7329  gs=args, **kwds)
-000339a0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-000339b0: 2072 6573 756c 742e 7661 6c75 6573 0d0a   result.values..
-000339c0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
-000339d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000339e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000339f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00033a00: 2d2d 2d0d 0a20 2020 2040 6361 6368 6564  ---..    @cached
-00033a10: 5f77 6561 6b72 6566 5f70 726f 7065 7274  _weakref_propert
-00033a20: 790d 0a20 2020 2064 6566 2073 7472 2873  y..    def str(s
-00033a30: 656c 6629 202d 3e20 2246 4153 7472 696e  elf) -> "FAStrin
-00033a40: 6722 3a0d 0a20 2020 2020 2020 2072 2222  g":..        r""
-00033a50: 2243 6173 7473 2061 6e20 6172 7261 7920  "Casts an array 
-00033a60: 6f66 2062 7974 6520 7374 7269 6e67 7320  of byte strings 
-00033a70: 6f72 2075 6e69 636f 6465 2061 7320 6060  or unicode as ``
-00033a80: 4641 5374 7269 6e67 6060 2e0d 0a0d 0a20  FAString``..... 
-00033a90: 2020 2020 2020 2045 6e61 626c 6573 2061         Enables a
-00033aa0: 2076 6172 6965 7479 206f 6620 7573 6566   variety of usef
-00033ab0: 756c 2073 7472 696e 6720 6d61 6e69 7075  ul string manipu
-00033ac0: 6c61 7469 6f6e 206d 6574 686f 6473 2e0d  lation methods..
-00033ad0: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
-00033ae0: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
-00033af0: 2d2d 2d0d 0a20 2020 2020 2020 2046 4153  ---..        FAS
-00033b00: 7472 696e 670d 0a0d 0a20 2020 2020 2020  tring....       
-00033b10: 2052 6169 7365 730d 0a20 2020 2020 2020   Raises..       
-00033b20: 202d 2d2d 2d2d 2d0d 0a20 2020 2020 2020   ------..       
-00033b30: 2054 7970 6545 7272 6f72 0d0a 2020 2020   TypeError..    
-00033b40: 2020 2020 2020 2020 4966 2074 6865 2046          If the F
-00033b50: 6173 7441 7272 6179 2069 7320 6f66 2064  astArray is of d
-00033b60: 7479 7065 206f 7468 6572 2074 6861 6e20  type other than 
-00033b70: 6279 7465 2073 7472 696e 6720 6f72 2075  byte string or u
-00033b80: 6e69 636f 6465 0d0a 0d0a 2020 2020 2020  nicode....      
-00033b90: 2020 5365 6520 416c 736f 0d0a 2020 2020    See Also..    
-00033ba0: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
-00033bb0: 2020 2020 2020 6e70 2e63 6861 7261 7272        np.chararr
-00033bc0: 6179 0d0a 2020 2020 2020 2020 6e70 2e63  ay..        np.c
-00033bd0: 6861 720d 0a20 2020 2020 2020 2072 742e  har..        rt.
-00033be0: 4641 5374 7269 6e67 2e61 7070 6c79 0d0a  FAString.apply..
-00033bf0: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
-00033c00: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
-00033c10: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
-00033c20: 3e20 733d 4641 285b 2774 6869 7327 2c27  > s=FA(['this','
-00033c30: 7468 6174 272c 2774 6573 7420 275d 2a31  that','test ']*1
-00033c40: 3030 5f30 3030 290d 0a20 2020 2020 2020  00_000)..       
-00033c50: 203e 3e3e 2073 2e73 7472 2e75 7070 6572   >>> s.str.upper
-00033c60: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
-00033c70: 7261 7928 5b62 2754 4849 5327 2c20 6227  ray([b'THIS', b'
-00033c80: 5448 4154 272c 2062 2754 4553 5420 272c  THAT', b'TEST ',
-00033c90: 202e 2e2e 2c20 6227 5448 4953 272c 2062   ..., b'THIS', b
-00033ca0: 2754 4841 5427 2c20 6227 5445 5354 2027  'THAT', b'TEST '
-00033cb0: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
-00033cc0: 2020 2020 2020 6474 7970 653d 277c 5335        dtype='|S5
-00033cd0: 2729 0d0a 0d0a 2020 2020 2020 2020 3e3e  ')....        >>
-00033ce0: 3e20 732e 7374 722e 6c6f 7765 720d 0a20  > s.str.lower.. 
-00033cf0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
-00033d00: 285b 6227 7468 6973 272c 2062 2774 6861  ([b'this', b'tha
-00033d10: 7427 2c20 6227 7465 7374 2027 2c20 2e2e  t', b'test ', ..
-00033d20: 2e2c 2062 2774 6869 7327 2c20 6227 7468  ., b'this', b'th
-00033d30: 6174 272c 2062 2774 6573 7420 275d 2c0d  at', b'test '],.
-00033d40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00033d50: 2020 2064 7479 7065 3d27 7c53 3527 290d     dtype='|S5').
-00033d60: 0a0d 0a20 2020 2020 2020 203e 3e3e 2073  ...        >>> s
-00033d70: 2e73 7472 2e72 656d 6f76 6574 7261 696c  .str.removetrail
-00033d80: 696e 6728 290d 0a20 2020 2020 2020 2046  ing()..        F
-00033d90: 6173 7441 7272 6179 285b 6227 7468 6973  astArray([b'this
-00033da0: 272c 2062 2774 6861 7427 2c20 6227 7465  ', b'that', b'te
-00033db0: 7374 272c 202e 2e2e 2c20 6227 7468 6973  st', ..., b'this
-00033dc0: 272c 2062 2774 6861 7427 2c20 6227 7465  ', b'that', b'te
-00033dd0: 7374 275d 2c0d 0a20 2020 2020 2020 2020  st'],..         
-00033de0: 2020 2020 2020 2020 2064 7479 7065 3d27           dtype='
-00033df0: 7c53 3527 290d 0a20 2020 2020 2020 2022  |S5')..        "
-00033e00: 2222 0d0a 2020 2020 2020 2020 6966 2073  ""..        if s
-00033e10: 656c 662e 6474 7970 652e 6368 6172 2069  elf.dtype.char i
-00033e20: 6e20 2255 5322 3a0d 0a20 2020 2020 2020  n "US":..       
-00033e30: 2020 2020 2072 6574 7572 6e20 5479 7065       return Type
-00033e40: 5265 6769 7374 6572 2e46 4153 7472 696e  Register.FAStrin
-00033e50: 6728 7365 6c66 290d 0a20 2020 2020 2020  g(self)..       
-00033e60: 2069 6620 7365 6c66 2e64 7479 7065 2e63   if self.dtype.c
-00033e70: 6861 7220 3d3d 2022 4f22 3a0d 0a20 2020  har == "O":..   
-00033e80: 2020 2020 2020 2020 2023 2074 7279 2074           # try t
-00033e90: 6f20 636f 6e76 6572 7420 746f 2073 7472  o convert to str
-00033ea0: 696e 6720 286d 6967 6874 2068 6176 6520  ing (might have 
-00033eb0: 636f 6d65 2066 726f 6d20 7061 6e64 6173  come from pandas
-00033ec0: 290d 0a20 2020 2020 2020 2020 2020 2074  )..            t
-00033ed0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
-00033ee0: 2020 2020 2063 6f6e 7620 3d20 7365 6c66       conv = self
-00033ef0: 2e61 7374 7970 6528 2253 2229 0d0a 2020  .astype("S")..  
-00033f00: 2020 2020 2020 2020 2020 6578 6365 7074            except
-00033f10: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00033f20: 2020 2063 6f6e 7620 3d20 7365 6c66 2e61     conv = self.a
-00033f30: 7374 7970 6528 2255 2229 0d0a 2020 2020  stype("U")..    
-00033f40: 2020 2020 2020 2020 7265 7475 726e 2054          return T
-00033f50: 7970 6552 6567 6973 7465 722e 4641 5374  ypeRegister.FASt
-00033f60: 7269 6e67 2863 6f6e 7629 0d0a 0d0a 2020  ring(conv)....  
-00033f70: 2020 2020 2020 7261 6973 6520 5479 7065        raise Type
-00033f80: 4572 726f 7228 6622 5468 6520 2e73 7472  Error(f"The .str
-00033f90: 2066 756e 6374 696f 6e20 6361 6e20 6f6e   function can on
-00033fa0: 6c79 2062 6520 7573 6564 206f 6e20 6279  ly be used on by
-00033fb0: 7465 2073 7472 696e 6720 616e 6420 756e  te string and un
-00033fc0: 6963 6f64 6520 6e6f 7420 7b73 656c 662e  icode not {self.
-00033fd0: 6474 7970 6521 727d 2229 0d0a 0d0a 2020  dtype!r}")....  
-00033fe0: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
-00033ff0: 0a20 2020 2064 6566 2066 726f 6d5f 6172  .    def from_ar
-00034000: 726f 7728 0d0a 2020 2020 2020 2020 6172  row(..        ar
-00034010: 723a 2055 6e69 6f6e 5b22 7061 2e41 7272  r: Union["pa.Arr
-00034020: 6179 222c 2022 7061 2e43 6875 6e6b 6564  ay", "pa.Chunked
-00034030: 4172 7261 7922 5d2c 0d0a 2020 2020 2020  Array"],..      
-00034040: 2020 7a65 726f 5f63 6f70 795f 6f6e 6c79    zero_copy_only
-00034050: 3a20 626f 6f6c 203d 2054 7275 652c 0d0a  : bool = True,..
-00034060: 2020 2020 2020 2020 7772 6974 6162 6c65          writable
-00034070: 3a20 626f 6f6c 203d 2046 616c 7365 2c0d  : bool = False,.
-00034080: 0a20 2020 2020 2020 2061 7574 6f5f 7769  .        auto_wi
-00034090: 6465 6e3a 2062 6f6f 6c20 3d20 4661 6c73  den: bool = Fals
-000340a0: 652c 0d0a 2020 2020 2920 2d3e 2022 4661  e,..    ) -> "Fa
-000340b0: 7374 4172 7261 7922 3a0d 0a20 2020 2020  stArray":..     
-000340c0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-000340d0: 436f 6e76 6572 7420 6120 7079 6172 726f  Convert a pyarro
-000340e0: 7720 6041 7272 6179 6020 746f 2061 2072  w `Array` to a r
-000340f0: 6970 7461 626c 6520 6046 6173 7441 7272  iptable `FastArr
-00034100: 6179 602e 0d0a 0d0a 2020 2020 2020 2020  ay`.....        
-00034110: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
-00034120: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
-00034130: 2020 2020 2020 2020 6172 7220 3a20 7079          arr : py
-00034140: 6172 726f 772e 4172 7261 7920 6f72 2070  arrow.Array or p
-00034150: 7961 7272 6f77 2e43 6875 6e6b 6564 4172  yarrow.ChunkedAr
-00034160: 7261 790d 0a20 2020 2020 2020 207a 6572  ray..        zer
-00034170: 6f5f 636f 7079 5f6f 6e6c 7920 3a20 626f  o_copy_only : bo
-00034180: 6f6c 2c20 6465 6661 756c 7420 5472 7565  ol, default True
-00034190: 0d0a 2020 2020 2020 2020 2020 2020 4966  ..            If
-000341a0: 2054 7275 652c 2061 6e20 6578 6365 7074   True, an except
-000341b0: 696f 6e20 7769 6c6c 2062 6520 7261 6973  ion will be rais
-000341c0: 6564 2069 6620 7468 6520 636f 6e76 6572  ed if the conver
-000341d0: 7369 6f6e 2074 6f20 6120 6046 6173 7441  sion to a `FastA
-000341e0: 7272 6179 6020 776f 756c 6420 7265 7175  rray` would requ
-000341f0: 6972 6520 636f 7079 696e 6720 7468 650d  ire copying the.
-00034200: 0a20 2020 2020 2020 2020 2020 2075 6e64  .            und
-00034210: 6572 6c79 696e 6720 6461 7461 2028 652e  erlying data (e.
-00034220: 672e 2069 6e20 7072 6573 656e 6365 206f  g. in presence o
-00034230: 6620 6e75 6c6c 732c 206f 7220 666f 7220  f nulls, or for 
-00034240: 6e6f 6e2d 7072 696d 6974 6976 6520 7479  non-primitive ty
-00034250: 7065 7329 2e0d 0a20 2020 2020 2020 2077  pes)...        w
-00034260: 7269 7461 626c 6520 3a20 626f 6f6c 2c20  ritable : bool, 
-00034270: 6465 6661 756c 7420 4661 6c73 650d 0a20  default False.. 
-00034280: 2020 2020 2020 2020 2020 2046 6f72 2061             For a
-00034290: 2060 4661 7374 4172 7261 7960 2063 7265   `FastArray` cre
-000342a0: 6174 6564 2077 6974 6820 7a65 726f 2063  ated with zero c
-000342b0: 6f70 7920 2876 6965 7720 6f6e 2074 6865  opy (view on the
-000342c0: 2041 7272 6f77 2064 6174 6129 2c20 7468   Arrow data), th
-000342d0: 6520 7265 7375 6c74 696e 6720 6172 7261  e resulting arra
-000342e0: 7920 6973 206e 6f74 2077 7269 7461 626c  y is not writabl
-000342f0: 6520 2841 7272 6f77 2064 6174 6120 6973  e (Arrow data is
-00034300: 2069 6d6d 7574 6162 6c65 292e 0d0a 2020   immutable)...  
-00034310: 2020 2020 2020 2020 2020 4279 2073 6574            By set
-00034320: 7469 6e67 2074 6869 7320 746f 2054 7275  ting this to Tru
-00034330: 652c 2061 2063 6f70 7920 6f66 2074 6865  e, a copy of the
-00034340: 2061 7272 6179 2069 7320 6d61 6465 2074   array is made t
-00034350: 6f20 656e 7375 7265 2069 7420 6973 2077  o ensure it is w
-00034360: 7269 7461 626c 652e 0d0a 2020 2020 2020  ritable...      
-00034370: 2020 6175 746f 5f77 6964 656e 203a 2062    auto_widen : b
-00034380: 6f6f 6c2c 206f 7074 696f 6e61 6c2c 2064  ool, optional, d
-00034390: 6566 6175 6c74 2074 6f20 4661 6c73 650d  efault to False.
-000343a0: 0a20 2020 2020 2020 2020 2020 2057 6865  .            Whe
-000343b0: 6e20 4661 6c73 6520 2874 6865 2064 6566  n False (the def
-000343c0: 6175 6c74 292c 2069 6620 616e 2061 7272  ault), if an arr
-000343d0: 6f77 2061 7272 6179 2063 6f6e 7461 696e  ow array contain
-000343e0: 7320 6120 7661 6c75 6520 7768 6963 6820  s a value which 
-000343f0: 776f 756c 6420 6265 2063 6f6e 7369 6465  would be conside
-00034400: 7265 640d 0a20 2020 2020 2020 2020 2020  red..           
-00034410: 2074 6865 2027 696e 7661 6c69 6427 2f4e   the 'invalid'/N
-00034420: 4120 7661 6c75 6520 666f 7220 7468 6520  A value for the 
-00034430: 6571 7569 7661 6c65 6e74 2064 7479 7065  equivalent dtype
-00034440: 2069 6e20 6120 6046 6173 7441 7272 6179   in a `FastArray
-00034450: 602c 2072 6169 7365 2061 6e20 6578 6365  `, raise an exce
-00034460: 7074 696f 6e0d 0a20 2020 2020 2020 2020  ption..         
-00034470: 2020 2062 6563 6175 7365 2064 6972 6563     because direc
-00034480: 7420 636f 6e76 6572 7369 6f6e 2077 6f75  t conversion wou
-00034490: 6c64 2062 6520 6c6f 7373 7920 2f20 6368  ld be lossy / ch
-000344a0: 616e 6765 2074 6865 2073 656d 616e 7469  ange the semanti
-000344b0: 6320 6d65 616e 696e 6720 6f66 2074 6865  c meaning of the
-000344c0: 2064 6174 612e 0d0a 2020 2020 2020 2020   data...        
-000344d0: 2020 2020 5768 656e 2054 7275 652c 2074      When True, t
-000344e0: 6865 2063 6f6e 7665 7274 6564 2061 7272  he converted arr
-000344f0: 6179 2077 696c 6c20 6265 2077 6964 656e  ay will be widen
-00034500: 6564 2028 6966 2070 6f73 7369 626c 6529  ed (if possible)
-00034510: 2074 6f20 7468 6520 6e65 7874 2d6c 6172   to the next-lar
-00034520: 6765 7374 2064 7479 7065 0d0a 2020 2020  gest dtype..    
-00034530: 2020 2020 2020 2020 746f 2065 6e73 7572          to ensur
-00034540: 6520 7468 6520 6461 7461 2077 696c 6c20  e the data will 
-00034550: 6265 2069 6e74 6572 7072 6574 6564 2069  be interpreted i
-00034560: 6e20 7468 6520 7361 6d65 2077 6179 2e0d  n the same way..
-00034570: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
-00034580: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
-00034590: 2d2d 2d0d 0a20 2020 2020 2020 2046 6173  ---..        Fas
-000345a0: 7441 7272 6179 0d0a 2020 2020 2020 2020  tArray..        
-000345b0: 2222 220d 0a20 2020 2020 2020 2069 6d70  """..        imp
-000345c0: 6f72 7420 7079 6172 726f 772e 7479 7065  ort pyarrow.type
-000345d0: 7320 6173 2070 6174 0d0a 0d0a 2020 2020  s as pat....    
-000345e0: 2020 2020 2320 4261 7365 6420 6f6e 2074      # Based on t
-000345f0: 6865 2074 7970 6520 6f66 2074 6865 2061  he type of the a
-00034600: 7272 6179 2c20 6469 7370 6174 6368 2074  rray, dispatch t
-00034610: 6f20 7479 7065 2d73 7065 6369 6669 6320  o type-specific 
-00034620: 696d 706c 656d 656e 7461 7469 6f6e 7320  implementations 
-00034630: 6f66 202e 6672 6f6d 5f61 7272 6f77 2829  of .from_arrow()
-00034640: 2e0d 0a20 2020 2020 2020 2070 615f 6172  ...        pa_ar
-00034650: 725f 7479 7065 203d 2061 7272 2e74 7970  r_type = arr.typ
-00034660: 650d 0a20 2020 2020 2020 2069 6620 280d  e..        if (.
-00034670: 0a20 2020 2020 2020 2020 2020 2070 6174  .            pat
-00034680: 2e69 735f 626f 6f6c 6561 6e28 7061 5f61  .is_boolean(pa_a
-00034690: 7272 5f74 7970 6529 0d0a 2020 2020 2020  rr_type)..      
-000346a0: 2020 2020 2020 6f72 2070 6174 2e69 735f        or pat.is_
-000346b0: 696e 7465 6765 7228 7061 5f61 7272 5f74  integer(pa_arr_t
-000346c0: 7970 6529 0d0a 2020 2020 2020 2020 2020  ype)..          
-000346d0: 2020 6f72 2070 6174 2e69 735f 666c 6f61    or pat.is_floa
-000346e0: 7469 6e67 2870 615f 6172 725f 7479 7065  ting(pa_arr_type
-000346f0: 290d 0a20 2020 2020 2020 2020 2020 206f  )..            o
-00034700: 7220 7061 742e 6973 5f73 7472 696e 6728  r pat.is_string(
-00034710: 7061 5f61 7272 5f74 7970 6529 0d0a 2020  pa_arr_type)..  
-00034720: 2020 2020 2020 2020 2020 6f72 2070 6174            or pat
-00034730: 2e69 735f 6269 6e61 7279 2870 615f 6172  .is_binary(pa_ar
-00034740: 725f 7479 7065 290d 0a20 2020 2020 2020  r_type)..       
-00034750: 2020 2020 206f 7220 7061 742e 6973 5f66       or pat.is_f
-00034760: 6978 6564 5f73 697a 655f 6269 6e61 7279  ixed_size_binary
-00034770: 2870 615f 6172 725f 7479 7065 290d 0a20  (pa_arr_type).. 
-00034780: 2020 2020 2020 2029 3a0d 0a20 2020 2020         ):..     
-00034790: 2020 2020 2020 2023 2054 4f44 4f3a 2043         # TODO: C
-000347a0: 6865 636b 2077 6865 7468 6572 2074 6869  heck whether thi
-000347b0: 7320 636f 6c75 6d6e 2068 6173 2061 2075  s column has a u
-000347c0: 7365 722d 7370 6563 6966 6965 6420 6669  ser-specified fi
-000347d0: 6c6c 2076 616c 7565 2070 726f 7669 6465  ll value provide
-000347e0: 643b 2069 6620 736f 2c20 7061 7373 2069  d; if so, pass i
-000347f0: 7420 616c 6f6e 6720 746f 0d0a 2020 2020  t along to..    
-00034800: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00034810: 7468 6520 4661 7374 4172 7261 792e 6672  the FastArray.fr
-00034820: 6f6d 5f61 7272 6f77 2829 206d 6574 686f  om_arrow() metho
-00034830: 6420 6361 6c6c 2062 656c 6f77 2e0d 0a20  d call below... 
-00034840: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00034850: 6e20 4661 7374 4172 7261 792e 5f66 726f  n FastArray._fro
-00034860: 6d5f 6172 726f 7728 6172 722c 207a 6572  m_arrow(arr, zer
-00034870: 6f5f 636f 7079 5f6f 6e6c 793d 7a65 726f  o_copy_only=zero
-00034880: 5f63 6f70 795f 6f6e 6c79 2c20 7772 6974  _copy_only, writ
-00034890: 6162 6c65 3d77 7269 7461 626c 652c 2061  able=writable, a
-000348a0: 7574 6f5f 7769 6465 6e3d 6175 746f 5f77  uto_widen=auto_w
-000348b0: 6964 656e 290d 0a0d 0a20 2020 2020 2020  iden)....       
-000348c0: 2065 6c69 6620 7061 742e 6973 5f64 6963   elif pat.is_dic
-000348d0: 7469 6f6e 6172 7928 7061 5f61 7272 5f74  tionary(pa_arr_t
-000348e0: 7970 6529 206f 7220 7061 742e 6973 5f73  ype) or pat.is_s
-000348f0: 7472 7563 7428 7061 5f61 7272 5f74 7970  truct(pa_arr_typ
-00034900: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
-00034910: 2072 6574 7572 6e20 5479 7065 5265 6769   return TypeRegi
-00034920: 7374 6572 2e43 6174 6567 6f72 6963 616c  ster.Categorical
-00034930: 2e5f 6672 6f6d 5f61 7272 6f77 2861 7272  ._from_arrow(arr
-00034940: 2c20 7a65 726f 5f63 6f70 795f 6f6e 6c79  , zero_copy_only
-00034950: 3d7a 6572 6f5f 636f 7079 5f6f 6e6c 792c  =zero_copy_only,
-00034960: 2077 7269 7461 626c 653d 7772 6974 6162   writable=writab
-00034970: 6c65 290d 0a0d 0a20 2020 2020 2020 2065  le)....        e
-00034980: 6c69 6620 7061 742e 6973 5f74 696d 6573  lif pat.is_times
-00034990: 7461 6d70 2870 615f 6172 725f 7479 7065  tamp(pa_arr_type
-000349a0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-000349b0: 7265 7475 726e 2054 7970 6552 6567 6973  return TypeRegis
-000349c0: 7465 722e 4461 7465 5469 6d65 4e61 6e6f  ter.DateTimeNano
-000349d0: 2e5f 6672 6f6d 5f61 7272 6f77 2861 7272  ._from_arrow(arr
-000349e0: 2c20 7a65 726f 5f63 6f70 795f 6f6e 6c79  , zero_copy_only
-000349f0: 3d7a 6572 6f5f 636f 7079 5f6f 6e6c 792c  =zero_copy_only,
-00034a00: 2077 7269 7461 626c 653d 7772 6974 6162   writable=writab
-00034a10: 6c65 290d 0a0d 0a20 2020 2020 2020 2065  le)....        e
-00034a20: 6c69 6620 7061 742e 6973 5f64 6174 6528  lif pat.is_date(
-00034a30: 7061 5f61 7272 5f74 7970 6529 3a0d 0a20  pa_arr_type):.. 
-00034a40: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00034a50: 6e20 5479 7065 5265 6769 7374 6572 2e44  n TypeRegister.D
-00034a60: 6174 652e 5f66 726f 6d5f 6172 726f 7728  ate._from_arrow(
-00034a70: 6172 722c 207a 6572 6f5f 636f 7079 5f6f  arr, zero_copy_o
-00034a80: 6e6c 793d 7a65 726f 5f63 6f70 795f 6f6e  nly=zero_copy_on
-00034a90: 6c79 2c20 7772 6974 6162 6c65 3d77 7269  ly, writable=wri
-00034aa0: 7461 626c 6529 0d0a 0d0a 2020 2020 2020  table)....      
-00034ab0: 2020 656c 6966 2070 6174 2e69 735f 6475    elif pat.is_du
-00034ac0: 7261 7469 6f6e 2870 615f 6172 725f 7479  ration(pa_arr_ty
-00034ad0: 7065 293a 0d0a 2020 2020 2020 2020 2020  pe):..          
-00034ae0: 2020 7265 7475 726e 2054 7970 6552 6567    return TypeReg
-00034af0: 6973 7465 722e 5469 6d65 5370 616e 2e5f  ister.TimeSpan._
-00034b00: 6672 6f6d 5f61 7272 6f77 2861 7272 2c20  from_arrow(arr, 
-00034b10: 7a65 726f 5f63 6f70 795f 6f6e 6c79 3d7a  zero_copy_only=z
-00034b20: 6572 6f5f 636f 7079 5f6f 6e6c 792c 2077  ero_copy_only, w
-00034b30: 7269 7461 626c 653d 7772 6974 6162 6c65  ritable=writable
-00034b40: 290d 0a0d 0a20 2020 2020 2020 2065 6c73  )....        els
-00034b50: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00034b60: 2320 556e 6b6e 6f77 6e2f 756e 7375 7070  # Unknown/unsupp
-00034b70: 6f72 7465 6420 6172 7261 7920 7479 7065  orted array type
-00034b80: 202d 2d20 6361 6e27 7420 636f 6e76 6572   -- can't conver
-00034b90: 742e 0d0a 2020 2020 2020 2020 2020 2020  t...            
-00034ba0: 7261 6973 6520 4e6f 7449 6d70 6c65 6d65  raise NotImpleme
-00034bb0: 6e74 6564 4572 726f 7228 6622 7079 6172  ntedError(f"pyar
-00034bc0: 726f 7720 6172 7261 7973 206f 6620 7479  row arrays of ty
-00034bd0: 7065 2027 7b70 615f 6172 725f 7479 7065  pe '{pa_arr_type
-00034be0: 7d27 2063 616e 2774 2062 6520 636f 6e76  }' can't be conv
-00034bf0: 6572 7465 6420 746f 2072 6970 7461 626c  erted to riptabl
-00034c00: 6520 6172 7261 7973 2e22 290d 0a0d 0a20  e arrays.").... 
-00034c10: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-00034c20: 0d0a 2020 2020 6465 6620 5f66 726f 6d5f  ..    def _from_
-00034c30: 6172 726f 7728 0d0a 2020 2020 2020 2020  arrow(..        
-00034c40: 6172 723a 2055 6e69 6f6e 5b22 7061 2e41  arr: Union["pa.A
-00034c50: 7272 6179 222c 2022 7061 2e43 6875 6e6b  rray", "pa.Chunk
-00034c60: 6564 4172 7261 7922 5d2c 0d0a 2020 2020  edArray"],..    
-00034c70: 2020 2020 7a65 726f 5f63 6f70 795f 6f6e      zero_copy_on
-00034c80: 6c79 3a20 626f 6f6c 203d 2054 7275 652c  ly: bool = True,
-00034c90: 0d0a 2020 2020 2020 2020 7772 6974 6162  ..        writab
-00034ca0: 6c65 3a20 626f 6f6c 203d 2046 616c 7365  le: bool = False
-00034cb0: 2c0d 0a20 2020 2020 2020 2061 7574 6f5f  ,..        auto_
-00034cc0: 7769 6465 6e3a 2062 6f6f 6c20 3d20 4661  widen: bool = Fa
-00034cd0: 6c73 652c 0d0a 2020 2020 2920 2d3e 2022  lse,..    ) -> "
-00034ce0: 4661 7374 4172 7261 7922 3a0d 0a20 2020  FastArray":..   
-00034cf0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00034d00: 2020 436f 6e76 6572 7420 6120 7079 6172    Convert a pyar
-00034d10: 726f 7720 6041 7272 6179 6020 746f 2061  row `Array` to a
-00034d20: 2072 6970 7461 626c 6520 6046 6173 7441   riptable `FastA
-00034d30: 7272 6179 602e 0d0a 0d0a 2020 2020 2020  rray`.....      
-00034d40: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
-00034d50: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-00034d60: 0d0a 2020 2020 2020 2020 6172 7220 3a20  ..        arr : 
-00034d70: 7079 6172 726f 772e 4172 7261 7920 6f72  pyarrow.Array or
-00034d80: 2070 7961 7272 6f77 2e43 6875 6e6b 6564   pyarrow.Chunked
-00034d90: 4172 7261 790d 0a20 2020 2020 2020 207a  Array..        z
-00034da0: 6572 6f5f 636f 7079 5f6f 6e6c 7920 3a20  ero_copy_only : 
-00034db0: 626f 6f6c 2c20 6465 6661 756c 7420 5472  bool, default Tr
-00034dc0: 7565 0d0a 2020 2020 2020 2020 2020 2020  ue..            
-00034dd0: 4966 2054 7275 652c 2061 6e20 6578 6365  If True, an exce
-00034de0: 7074 696f 6e20 7769 6c6c 2062 6520 7261  ption will be ra
-00034df0: 6973 6564 2069 6620 7468 6520 636f 6e76  ised if the conv
-00034e00: 6572 7369 6f6e 2074 6f20 6120 6046 6173  ersion to a `Fas
-00034e10: 7441 7272 6179 6020 776f 756c 6420 7265  tArray` would re
-00034e20: 7175 6972 6520 636f 7079 696e 6720 7468  quire copying th
-00034e30: 650d 0a20 2020 2020 2020 2020 2020 2075  e..            u
-00034e40: 6e64 6572 6c79 696e 6720 6461 7461 2028  nderlying data (
-00034e50: 652e 672e 2069 6e20 7072 6573 656e 6365  e.g. in presence
-00034e60: 206f 6620 6e75 6c6c 732c 206f 7220 666f   of nulls, or fo
-00034e70: 7220 6e6f 6e2d 7072 696d 6974 6976 6520  r non-primitive 
-00034e80: 7479 7065 7329 2e0d 0a20 2020 2020 2020  types)...       
-00034e90: 2077 7269 7461 626c 6520 3a20 626f 6f6c   writable : bool
-00034ea0: 2c20 6465 6661 756c 7420 4661 6c73 650d  , default False.
-00034eb0: 0a20 2020 2020 2020 2020 2020 2046 6f72  .            For
-00034ec0: 2061 2060 4661 7374 4172 7261 7960 2063   a `FastArray` c
-00034ed0: 7265 6174 6564 2077 6974 6820 7a65 726f  reated with zero
-00034ee0: 2063 6f70 7920 2876 6965 7720 6f6e 2074   copy (view on t
-00034ef0: 6865 2041 7272 6f77 2064 6174 6129 2c20  he Arrow data), 
-00034f00: 7468 6520 7265 7375 6c74 696e 6720 6172  the resulting ar
-00034f10: 7261 7920 6973 206e 6f74 2077 7269 7461  ray is not writa
-00034f20: 626c 6520 2841 7272 6f77 2064 6174 6120  ble (Arrow data 
-00034f30: 6973 2069 6d6d 7574 6162 6c65 292e 0d0a  is immutable)...
-00034f40: 2020 2020 2020 2020 2020 2020 4279 2073              By s
-00034f50: 6574 7469 6e67 2074 6869 7320 746f 2054  etting this to T
-00034f60: 7275 652c 2061 2063 6f70 7920 6f66 2074  rue, a copy of t
-00034f70: 6865 2061 7272 6179 2069 7320 6d61 6465  he array is made
-00034f80: 2074 6f20 656e 7375 7265 2069 7420 6973   to ensure it is
-00034f90: 2077 7269 7461 626c 652e 0d0a 2020 2020   writable...    
-00034fa0: 2020 2020 6175 746f 5f77 6964 656e 203a      auto_widen :
-00034fb0: 2062 6f6f 6c2c 206f 7074 696f 6e61 6c2c   bool, optional,
-00034fc0: 2064 6566 6175 6c74 2074 6f20 4661 6c73   default to Fals
-00034fd0: 650d 0a20 2020 2020 2020 2020 2020 2057  e..            W
-00034fe0: 6865 6e20 4661 6c73 6520 2874 6865 2064  hen False (the d
-00034ff0: 6566 6175 6c74 292c 2069 6620 616e 2061  efault), if an a
-00035000: 7272 6f77 2061 7272 6179 2063 6f6e 7461  rrow array conta
-00035010: 696e 7320 6120 7661 6c75 6520 7768 6963  ins a value whic
-00035020: 6820 776f 756c 6420 6265 2063 6f6e 7369  h would be consi
-00035030: 6465 7265 640d 0a20 2020 2020 2020 2020  dered..         
-00035040: 2020 2074 6865 2027 696e 7661 6c69 6427     the 'invalid'
-00035050: 2f4e 4120 7661 6c75 6520 666f 7220 7468  /NA value for th
-00035060: 6520 6571 7569 7661 6c65 6e74 2064 7479  e equivalent dty
-00035070: 7065 2069 6e20 6120 6046 6173 7441 7272  pe in a `FastArr
-00035080: 6179 602c 2072 6169 7365 2061 6e20 6578  ay`, raise an ex
-00035090: 6365 7074 696f 6e0d 0a20 2020 2020 2020  ception..       
-000350a0: 2020 2020 2062 6563 6175 7365 2064 6972       because dir
-000350b0: 6563 7420 636f 6e76 6572 7369 6f6e 2077  ect conversion w
-000350c0: 6f75 6c64 2062 6520 6c6f 7373 7920 2f20  ould be lossy / 
-000350d0: 6368 616e 6765 2074 6865 2073 656d 616e  change the seman
-000350e0: 7469 6320 6d65 616e 696e 6720 6f66 2074  tic meaning of t
-000350f0: 6865 2064 6174 612e 0d0a 2020 2020 2020  he data...      
-00035100: 2020 2020 2020 5768 656e 2054 7275 652c        When True,
-00035110: 2074 6865 2063 6f6e 7665 7274 6564 2061   the converted a
-00035120: 7272 6179 2077 696c 6c20 6265 2077 6964  rray will be wid
-00035130: 656e 6564 2028 6966 2070 6f73 7369 626c  ened (if possibl
-00035140: 6529 2074 6f20 7468 6520 6e65 7874 2d6c  e) to the next-l
-00035150: 6172 6765 7374 2064 7479 7065 0d0a 2020  argest dtype..  
-00035160: 2020 2020 2020 2020 2020 746f 2065 6e73            to ens
-00035170: 7572 6520 7468 6520 6461 7461 2077 696c  ure the data wil
-00035180: 6c20 6265 2069 6e74 6572 7072 6574 6564  l be interpreted
-00035190: 2069 6e20 7468 6520 7361 6d65 2077 6179   in the same way
-000351a0: 2e0d 0a0d 0a20 2020 2020 2020 2052 6574  .....        Ret
-000351b0: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
-000351c0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2046  -----..        F
-000351d0: 6173 7441 7272 6179 0d0a 2020 2020 2020  astArray..      
-000351e0: 2020 2222 220d 0a20 2020 2020 2020 2069    """..        i
-000351f0: 6d70 6f72 7420 7079 6172 726f 7720 6173  mport pyarrow as
-00035200: 2070 610d 0a20 2020 2020 2020 2069 6d70   pa..        imp
-00035210: 6f72 7420 7079 6172 726f 772e 636f 6d70  ort pyarrow.comp
-00035220: 7574 6520 6173 2070 630d 0a20 2020 2020  ute as pc..     
-00035230: 2020 2069 6d70 6f72 7420 7079 6172 726f     import pyarro
-00035240: 772e 7479 7065 7320 6173 2070 6174 0d0a  w.types as pat..
-00035250: 0d0a 2020 2020 2020 2020 2320 4d61 6b65  ..        # Make
-00035260: 2073 7572 6520 7468 6520 696e 7075 7420   sure the input 
-00035270: 6172 7261 7920 6973 206f 6e65 206f 6620  array is one of 
-00035280: 7468 6520 7079 6172 726f 7720 6172 7261  the pyarrow arra
-00035290: 7920 7479 7065 732e 0d0a 2020 2020 2020  y types...      
-000352a0: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
-000352b0: 6e63 6528 6172 722c 2028 7061 2e41 7272  nce(arr, (pa.Arr
-000352c0: 6179 2c20 7061 2e43 6875 6e6b 6564 4172  ay, pa.ChunkedAr
-000352d0: 7261 7929 293a 0d0a 2020 2020 2020 2020  ray)):..        
-000352e0: 2020 2020 7261 6973 6520 5479 7065 4572      raise TypeEr
-000352f0: 726f 7228 2254 6865 2061 7272 6179 2069  ror("The array i
-00035300: 7320 6e6f 7420 616e 2069 6e73 7461 6e63  s not an instanc
-00035310: 6520 6f66 2060 7079 6172 726f 772e 4172  e of `pyarrow.Ar
-00035320: 7261 7960 206f 7220 6070 7961 7272 6f77  ray` or `pyarrow
-00035330: 2e43 6875 6e6b 6564 4172 7261 7960 2e22  .ChunkedArray`."
-00035340: 290d 0a0d 0a20 2020 2020 2020 2023 2043  )....        # C
-00035350: 6875 6e6b 6564 4172 7261 7973 206e 6565  hunkedArrays nee
-00035360: 6420 7370 6563 6961 6c20 6861 6e64 6c69  d special handli
-00035370: 6e67 2e0d 0a20 2020 2020 2020 2069 6620  ng...        if 
-00035380: 6973 696e 7374 616e 6365 2861 7272 2c20  isinstance(arr, 
-00035390: 7061 2e43 6875 6e6b 6564 4172 7261 7929  pa.ChunkedArray)
-000353a0: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-000353b0: 2041 2073 696e 676c 652d 6368 756e 6b20   A single-chunk 
-000353c0: 4368 756e 6b65 6441 7272 6179 2063 616e  ChunkedArray can
-000353d0: 2062 6520 6861 6e64 6c65 6420 6279 206a   be handled by j
-000353e0: 7573 7420 6578 7472 6163 7469 6e67 2074  ust extracting t
-000353f0: 6861 7420 6368 756e 6b0d 0a20 2020 2020  hat chunk..     
-00035400: 2020 2020 2020 2023 2061 6e64 2072 6563         # and rec
-00035410: 7572 7369 7665 6c79 2070 726f 6365 7373  ursively process
-00035420: 696e 6720 6974 2e0d 0a20 2020 2020 2020  ing it...       
-00035430: 2020 2020 2069 6620 6172 722e 6e75 6d5f       if arr.num_
-00035440: 6368 756e 6b73 203d 3d20 313a 0d0a 2020  chunks == 1:..  
-00035450: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00035460: 7475 726e 2046 6173 7441 7272 6179 2e5f  turn FastArray._
-00035470: 6672 6f6d 5f61 7272 6f77 280d 0a20 2020  from_arrow(..   
-00035480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035490: 2061 7272 2e63 6875 6e6b 2830 292c 207a   arr.chunk(0), z
-000354a0: 6572 6f5f 636f 7079 5f6f 6e6c 793d 7a65  ero_copy_only=ze
-000354b0: 726f 5f63 6f70 795f 6f6e 6c79 2c20 7772  ro_copy_only, wr
-000354c0: 6974 6162 6c65 3d77 7269 7461 626c 652c  itable=writable,
-000354d0: 2061 7574 6f5f 7769 6465 6e3d 6175 746f   auto_widen=auto
-000354e0: 5f77 6964 656e 0d0a 2020 2020 2020 2020  _widen..        
-000354f0: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-00035500: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00035510: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00035520: 544f 444f 3a20 4265 6e63 686d 6172 6b20  TODO: Benchmark 
-00035530: 7468 6973 2076 732e 2075 7369 6e67 2043  this vs. using C
-00035540: 6875 6e6b 6564 4172 7261 792e 636f 6d62  hunkedArray.comb
-00035550: 696e 655f 6368 756e 6b73 2829 2074 6865  ine_chunks() the
-00035560: 6e20 636f 6e76 6572 7469 6e67 2e0d 0a20  n converting... 
-00035570: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00035580: 2054 4f44 4f3a 204c 6f6f 6b20 6174 2060   TODO: Look at `
-00035590: 7a65 726f 5f63 6f70 795f 6f6e 6c79 6020  zero_copy_only` 
-000355a0: 616e 6420 6077 7269 7461 626c 6560 202d  and `writable` -
-000355b0: 2d20 7468 6520 636f 6e76 6572 7465 6420  - the converted 
-000355c0: 6172 7261 7973 2063 6f75 6c64 2062 6520  arrays could be 
-000355d0: 6465 7374 726f 7965 6420 7768 696c 6520  destroyed while 
-000355e0: 6873 7461 636b 696e 670d 0a20 2020 2020  hstacking..     
-000355f0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00035600: 2020 2073 696e 6365 2077 6520 6b6e 6f77     since we know
-00035610: 2074 6865 7927 6c6c 2068 6176 6520 6a75   they'll have ju
-00035620: 7374 2062 6565 6e20 6372 6561 7465 643b  st been created;
-00035630: 2074 6869 7320 636f 756c 6420 7265 6475   this could redu
-00035640: 6365 2070 6561 6b20 6d65 6d6f 7279 2075  ce peak memory u
-00035650: 7469 6c69 7a61 7469 6f6e 2e0d 0a20 2020  tilization...   
-00035660: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00035670: 7572 6e20 6873 7461 636b 280d 0a20 2020  urn hstack(..   
-00035680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035690: 205b 0d0a 2020 2020 2020 2020 2020 2020   [..            
-000356a0: 2020 2020 2020 2020 2020 2020 4661 7374              Fast
-000356b0: 4172 7261 792e 5f66 726f 6d5f 6172 726f  Array._from_arro
-000356c0: 7728 0d0a 2020 2020 2020 2020 2020 2020  w(..            
-000356d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000356e0: 6172 725f 6368 756e 6b2c 207a 6572 6f5f  arr_chunk, zero_
-000356f0: 636f 7079 5f6f 6e6c 793d 7a65 726f 5f63  copy_only=zero_c
-00035700: 6f70 795f 6f6e 6c79 2c20 7772 6974 6162  opy_only, writab
-00035710: 6c65 3d77 7269 7461 626c 652c 2061 7574  le=writable, aut
-00035720: 6f5f 7769 6465 6e3d 6175 746f 5f77 6964  o_widen=auto_wid
-00035730: 656e 0d0a 2020 2020 2020 2020 2020 2020  en..            
-00035740: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-00035750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035760: 2020 2020 2020 2066 6f72 2061 7272 5f63         for arr_c
-00035770: 6875 6e6b 2069 6e20 6172 722e 6974 6572  hunk in arr.iter
-00035780: 6368 756e 6b73 2829 0d0a 2020 2020 2020  chunks()..      
-00035790: 2020 2020 2020 2020 2020 2020 2020 5d0d                ].
-000357a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000357b0: 2029 0d0a 0d0a 2020 2020 2020 2020 2320   )....        # 
-000357c0: 4861 6e64 6c65 2062 6173 6564 206f 6e20  Handle based on 
-000357d0: 7468 6520 7479 7065 206f 6620 7468 6520  the type of the 
-000357e0: 696e 7075 7420 6172 7261 792e 0d0a 2020  input array...  
-000357f0: 2020 2020 2020 6966 2070 6174 2e69 735f        if pat.is_
-00035800: 696e 7465 6765 7228 6172 722e 7479 7065  integer(arr.type
-00035810: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00035820: 2320 466f 7220 6172 7261 7973 206f 6620  # For arrays of 
-00035830: 7072 696d 6974 6976 6520 7479 7065 732c  primitive types,
-00035840: 2070 612e 4461 7461 5479 7065 2e74 6f5f   pa.DataType.to_
-00035850: 7061 6e64 6173 5f64 7479 7065 2829 2061  pandas_dtype() a
-00035860: 6374 7561 6c6c 7920 7265 7475 726e 7320  ctually returns 
-00035870: 7468 6520 6571 7569 7661 6c65 6e74 206e  the equivalent n
-00035880: 756d 7079 2064 7479 7065 2e0d 0a20 2020  umpy dtype...   
-00035890: 2020 2020 2020 2020 2061 7272 5f64 7479           arr_dty
-000358a0: 7065 203d 2061 7272 2e74 7970 652e 746f  pe = arr.type.to
-000358b0: 5f70 616e 6461 735f 6474 7970 6528 290d  _pandas_dtype().
-000358c0: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-000358d0: 2047 6574 2074 6865 2072 6970 7461 626c   Get the riptabl
-000358e0: 6520 696e 7661 6c69 6420 7661 6c75 6520  e invalid value 
-000358f0: 666f 7220 7468 6973 2061 7272 6179 2074  for this array t
-00035900: 7970 652e 0d0a 2020 2020 2020 2020 2020  ype...          
-00035910: 2020 6172 725f 7274 5f69 6e76 203d 2049    arr_rt_inv = I
-00035920: 4e56 414c 4944 5f44 4943 545b 6e70 2e64  NVALID_DICT[np.d
-00035930: 7479 7065 2861 7272 5f64 7479 7065 292e  type(arr_dtype).
-00035940: 6e75 6d5d 0d0a 0d0a 2020 2020 2020 2020  num]....        
-00035950: 2020 2020 2320 4765 7420 6d69 6e20 616e      # Get min an
-00035960: 6420 6d61 7820 7661 6c75 6520 6f66 2074  d max value of t
-00035970: 6865 2069 6e70 7574 2061 7272 6179 2c20  he input array, 
-00035980: 736f 2077 6520 6b6e 6f77 2069 6620 7765  so we know if we
-00035990: 206e 6565 6420 746f 2070 726f 6d6f 7465   need to promote
-000359a0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-000359b0: 746f 2074 6865 206e 6578 742d 6c61 7267  to the next-larg
-000359c0: 6573 7420 6474 7970 6520 746f 2062 6520  est dtype to be 
-000359d0: 6162 6c65 2074 6f20 636f 7272 6563 746c  able to correctl
-000359e0: 7920 7265 7072 6573 656e 7420 6e75 6c6c  y represent null
-000359f0: 732e 0d0a 2020 2020 2020 2020 2020 2020  s...            
-00035a00: 2320 5468 6973 206d 7573 7420 6265 2064  # This must be d
-00035a10: 6f6e 6520 6576 656e 2069 6620 7468 6520  one even if the 
-00035a20: 696e 7075 7420 6172 7261 7920 6861 7320  input array has 
-00035a30: 6e6f 206e 756c 6c73 2c20 6265 6361 7573  no nulls, becaus
-00035a40: 6520 6f74 6865 7277 6973 6520 7468 6520  e otherwise the 
-00035a50: 6e6f 6e2d 6e75 6c6c 0d0a 2020 2020 2020  non-null..      
-00035a60: 2020 2020 2020 2320 7661 6c75 6573 2069        # values i
-00035a70: 6e20 7468 6520 696e 7075 7420 636f 7272  n the input corr
-00035a80: 6573 706f 6e64 696e 6720 746f 2072 6970  esponding to rip
-00035a90: 7461 626c 6520 696e 7465 6765 7220 696e  table integer in
-00035aa0: 7661 6c69 6473 2077 6f75 6c64 2074 6865  valids would the
-00035ab0: 6e20 6265 2072 6563 6f67 6e69 7a65 640d  n be recognized.
-00035ac0: 0a20 2020 2020 2020 2020 2020 2023 2061  .            # a
-00035ad0: 7320 7375 6368 2061 6674 6572 2063 6f6e  s such after con
-00035ae0: 7665 7273 696f 6e2e 0d0a 2020 2020 2020  version...      
-00035af0: 2020 2020 2020 6d69 6e5f 6d61 785f 7265        min_max_re
-00035b00: 7375 6c74 3a20 7061 2e53 7472 7563 7453  sult: pa.StructS
-00035b10: 6361 6c61 7220 3d20 7063 2e6d 696e 5f6d  calar = pc.min_m
-00035b20: 6178 2861 7272 290d 0a20 2020 2020 2020  ax(arr)..       
-00035b30: 2020 2020 206d 696e 5f76 616c 7565 203d       min_value =
-00035b40: 206d 696e 5f6d 6178 5f72 6573 756c 745b   min_max_result[
-00035b50: 226d 696e 225d 0d0a 2020 2020 2020 2020  "min"]..        
-00035b60: 2020 2020 6d61 785f 7661 6c75 6520 3d20      max_value = 
-00035b70: 6d69 6e5f 6d61 785f 7265 7375 6c74 5b22  min_max_result["
-00035b80: 6d61 7822 5d0d 0a0d 0a20 2020 2020 2020  max"]....       
-00035b90: 2020 2020 2061 7272 5f70 615f 6474 7970       arr_pa_dtyp
-00035ba0: 655f 7769 6465 6e65 643a 204f 7074 696f  e_widened: Optio
-00035bb0: 6e61 6c5b 7061 2e44 6174 6154 7970 655d  nal[pa.DataType]
-00035bc0: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
-00035bd0: 2020 2020 2069 6620 6d69 6e5f 7661 6c75       if min_valu
-00035be0: 6520 3d3d 2061 7272 5f72 745f 696e 7620  e == arr_rt_inv 
-00035bf0: 6f72 206d 6178 5f76 616c 7565 203d 3d20  or max_value == 
-00035c00: 6172 725f 7274 5f69 6e76 3a0d 0a20 2020  arr_rt_inv:..   
-00035c10: 2020 2020 2020 2020 2020 2020 2023 2049               # I
-00035c20: 6620 7468 6520 696e 7075 7420 6172 7261  f the input arra
-00035c30: 7920 686f 6c64 7320 3634 2d62 6974 2069  y holds 64-bit i
-00035c40: 6e74 6567 6572 7320 2873 6967 6e65 6420  ntegers (signed 
-00035c50: 6f72 2075 6e73 6967 6e65 6429 2c20 7765  or unsigned), we
-00035c60: 2063 616e 2774 2064 6f20 6120 6c6f 7373   can't do a loss
-00035c70: 6c65 7373 2063 6f6e 7665 7273 696f 6e2c  less conversion,
-00035c80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00035c90: 2020 2320 7369 6e63 6520 7468 6572 6520    # since there 
-00035ca0: 6973 206e 6f20 7769 6465 7220 696e 7465  is no wider inte
-00035cb0: 6765 7220 6176 6169 6c61 626c 652e 0d0a  ger available...
-00035cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035cd0: 6966 207a 6572 6f5f 636f 7079 5f6f 6e6c  if zero_copy_onl
-00035ce0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-00035cf0: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-00035d00: 6c75 6545 7272 6f72 280d 0a20 2020 2020  lueError(..     
-00035d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035d20: 2020 2022 4361 6e6e 6f74 2070 6572 666f     "Cannot perfo
-00035d30: 726d 2061 207a 6572 6f2d 636f 7079 2063  rm a zero-copy c
-00035d40: 6f6e 7665 7273 696f 6e20 6f66 2061 6e20  onversion of an 
-00035d50: 6172 726f 7720 6172 7261 7920 636f 6e74  arrow array cont
-00035d60: 6169 6e69 6e67 2074 6865 2072 6970 7461  aining the ripta
-00035d70: 626c 6520 696e 7661 6c69 6420 7661 6c75  ble invalid valu
-00035d80: 6520 666f 7220 7468 6520 6172 7261 7920  e for the array 
-00035d90: 6474 7970 652e 220d 0a20 2020 2020 2020  dtype."..       
-00035da0: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
-00035db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035dc0: 656c 6966 2061 7272 5f64 7479 7065 2e69  elif arr_dtype.i
-00035dd0: 7465 6d73 697a 6520 3d3d 2038 3a0d 0a20  temsize == 8:.. 
-00035de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035df0: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
-00035e00: 726f 7228 0d0a 2020 2020 2020 2020 2020  ror(..          
-00035e10: 2020 2020 2020 2020 2020 2020 2020 2243                "C
-00035e20: 616e 6e6f 7420 6c6f 7373 6c65 7373 6c79  annot losslessly
-00035e30: 2063 6f6e 7665 7274 2061 6e20 6172 726f   convert an arro
-00035e40: 7720 6172 7261 7920 6f66 2028 7529 696e  w array of (u)in
-00035e50: 7436 3420 636f 6e74 6169 6e69 6e67 2074  t64 containing t
-00035e60: 6865 2072 6970 7461 626c 6520 696e 7661  he riptable inva
-00035e70: 6c69 6420 7661 6c75 6520 746f 2061 2072  lid value to a r
-00035e80: 6970 7461 626c 6520 6172 7261 792e 220d  iptable array.".
-00035e90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00035ea0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-00035eb0: 2020 2020 2020 2020 656c 6966 206e 6f74          elif not
-00035ec0: 2061 7574 6f5f 7769 6465 6e3a 0d0a 2020   auto_widen:..  
-00035ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035ee0: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-00035ef0: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
-00035f00: 2020 2020 2020 2020 2020 2020 2022 496e               "In
-00035f10: 7075 7420 6172 7261 7920 7265 7175 6972  put array requir
-00035f20: 6573 2077 6964 656e 696e 6720 666f 7220  es widening for 
-00035f30: 6c6f 7373 6c65 7373 2063 6f6e 7665 7273  lossless convers
-00035f40: 696f 6e2e 2053 7065 6369 6679 2061 7574  ion. Specify aut
-00035f50: 6f5f 7769 6465 6e3d 5472 7565 2069 6620  o_widen=True if 
-00035f60: 796f 7520 7761 6e74 2074 6f20 616c 6c6f  you want to allo
-00035f70: 7720 7468 6520 7769 6465 6e69 6e67 2063  w the widening c
-00035f80: 6f6e 7665 7273 696f 6e20 2877 6869 6368  onversion (which
-00035f90: 2072 6571 7569 7265 7320 616e 2061 7272   requires an arr
-00035fa0: 6179 2063 6f70 7929 2e22 0d0a 2020 2020  ay copy)."..    
-00035fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035fc0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00035fd0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00035fe0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00035ff0: 5769 6465 6e20 7468 6520 6474 7970 6520  Widen the dtype 
-00036000: 6f66 2074 6865 206f 7574 7075 7420 6172  of the output ar
-00036010: 7261 792e 0d0a 2020 2020 2020 2020 2020  ray...          
-00036020: 2020 2020 2020 2020 2020 6f75 7470 7574            output
-00036030: 5f64 7479 7065 203d 206e 702e 6d69 6e5f  _dtype = np.min_
-00036040: 7363 616c 6172 5f74 7970 6528 3220 2a20  scalar_type(2 * 
-00036050: 6172 725f 7274 5f69 6e76 290d 0a20 2020  arr_rt_inv)..   
-00036060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036070: 2061 7272 5f70 615f 6474 7970 655f 7769   arr_pa_dtype_wi
-00036080: 6465 6e65 6420 3d20 7061 2e66 726f 6d5f  dened = pa.from_
-00036090: 6e75 6d70 795f 6474 7970 6528 6f75 7470  numpy_dtype(outp
-000360a0: 7574 5f64 7479 7065 290d 0a0d 0a20 2020  ut_dtype)....   
-000360b0: 2020 2020 2020 2020 2023 2043 7265 6174           # Creat
-000360c0: 6520 7468 6520 6f75 7470 7574 2061 7272  e the output arr
-000360d0: 6179 2c20 7065 7266 6f72 6d69 6e67 2061  ay, performing a
-000360e0: 2077 6964 656e 696e 6720 636f 6e76 6572   widening conver
-000360f0: 7369 6f6e 202b 2066 696c 6c69 6e67 2069  sion + filling i
-00036100: 6e20 6e75 6c6c 7320 7769 7468 2074 6865  n nulls with the
-00036110: 2072 6970 7461 626c 6520 696e 7661 6c69   riptable invali
-00036120: 6420 6966 206e 6563 6573 7361 7279 2e0d  d if necessary..
-00036130: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
-00036140: 4f44 4f3a 2054 6869 7320 636f 756c 6420  ODO: This could 
-00036150: 6265 2066 6173 7465 7220 2d2d 2069 6620  be faster -- if 
-00036160: 7468 6572 6527 7320 6120 7761 7920 746f  there's a way to
-00036170: 2067 6574 2061 206e 756d 7079 2062 6f6f   get a numpy boo
-00036180: 6c65 616e 2061 7272 6179 2066 726f 6d20  lean array from 
-00036190: 6120 7079 6172 726f 7720 6172 7261 7927  a pyarrow array'
-000361a0: 7320 6e75 6c6c 2d6d 6173 6b2c 0d0a 2020  s null-mask,..  
-000361b0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-000361c0: 2020 7765 2063 616e 2063 6f6e 7665 7274    we can convert
-000361d0: 2064 6972 6563 746c 7920 746f 206e 756d   directly to num
-000361e0: 7079 2f72 6970 7461 626c 653b 2074 6865  py/riptable; the
-000361f0: 6e2c 2077 6964 656e 2074 6865 2046 6173  n, widen the Fas
-00036200: 7441 7272 6179 2028 7768 6963 6827 6c6c  tArray (which'll
-00036210: 2062 6520 7061 7261 6c6c 656c 697a 6564   be parallelized
-00036220: 293b 0d0a 2020 2020 2020 2020 2020 2020  );..            
-00036230: 2320 2020 2020 2020 7468 656e 2075 7365  #       then use
-00036240: 2072 742e 636f 7079 5f74 6f28 2920 2f20   rt.copy_to() / 
-00036250: 7274 2e70 7574 6d61 736b 2829 2074 6f20  rt.putmask() to 
-00036260: 6f76 6572 7772 6974 6520 7468 6520 656c  overwrite the el
-00036270: 656d 656e 7473 206f 6620 7468 6520 7769  ements of the wi
-00036280: 6465 6e65 6420 4661 7374 4172 7261 790d  dened FastArray.
-00036290: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-000362a0: 2020 2020 2063 6f72 7265 7370 6f6e 6469       correspondi
-000362b0: 6e67 2074 6f20 7468 6520 6e75 6c6c 7320  ng to the nulls 
-000362c0: 6672 6f6d 2074 6865 206d 6173 6b20 7769  from the mask wi
-000362d0: 7468 2074 6865 2072 6970 7461 626c 6520  th the riptable 
-000362e0: 696e 7661 6c69 6420 7661 6c75 6520 666f  invalid value fo
-000362f0: 7220 7468 6520 6f75 7470 7574 2061 7272  r the output arr
-00036300: 6179 2074 7970 652e 0d0a 2020 2020 2020  ay type...      
-00036310: 2020 2020 2020 6966 2061 7272 5f70 615f        if arr_pa_
-00036320: 6474 7970 655f 7769 6465 6e65 6420 6973  dtype_widened is
-00036330: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-00036340: 2020 2020 2020 2020 2020 2020 6172 723a              arr:
-00036350: 2070 612e 4172 7261 7920 3d20 6172 722e   pa.Array = arr.
-00036360: 6361 7374 2861 7272 5f70 615f 6474 7970  cast(arr_pa_dtyp
-00036370: 655f 7769 6465 6e65 6429 0d0a 0d0a 2020  e_widened)....  
-00036380: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00036390: 2061 7272 2e66 696c 6c5f 6e75 6c6c 2861   arr.fill_null(a
-000363a0: 7272 5f72 745f 696e 7629 2e74 6f5f 6e75  rr_rt_inv).to_nu
-000363b0: 6d70 7928 7a65 726f 5f63 6f70 795f 6f6e  mpy(zero_copy_on
-000363c0: 6c79 3d46 616c 7365 2c20 7772 6974 6162  ly=False, writab
-000363d0: 6c65 3d77 7269 7461 626c 6529 2e76 6965  le=writable).vie
-000363e0: 7728 4661 7374 4172 7261 7929 0d0a 0d0a  w(FastArray)....
-000363f0: 2020 2020 2020 2020 656c 6966 2070 6174          elif pat
-00036400: 2e69 735f 666c 6f61 7469 6e67 2861 7272  .is_floating(arr
-00036410: 2e74 7970 6529 3a0d 0a20 2020 2020 2020  .type):..       
-00036420: 2020 2020 2023 2046 6c6f 6174 696e 672d       # Floating-
-00036430: 706f 696e 7420 6172 7261 7973 2063 616e  point arrays can
-00036440: 2062 6520 636f 6e76 6572 7465 6420 6469   be converted di
-00036450: 7265 6374 6c79 2074 6f20 6e75 6d70 792c  rectly to numpy,
-00036460: 2073 696e 6365 2070 7961 7272 6f77 2077   since pyarrow w
-00036470: 696c 6c20 6175 746f 6d61 7469 6361 6c6c  ill automaticall
-00036480: 790d 0a20 2020 2020 2020 2020 2020 2023  y..            #
-00036490: 2066 696c 6c20 6e75 6c6c 2076 616c 7565   fill null value
-000364a0: 7320 7769 7468 204e 614e 2e0d 0a20 2020  s with NaN...   
-000364b0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000364c0: 6172 722e 746f 5f6e 756d 7079 287a 6572  arr.to_numpy(zer
-000364d0: 6f5f 636f 7079 5f6f 6e6c 793d 7a65 726f  o_copy_only=zero
-000364e0: 5f63 6f70 795f 6f6e 6c79 2c20 7772 6974  _copy_only, writ
-000364f0: 6162 6c65 3d77 7269 7461 626c 6529 2e76  able=writable).v
-00036500: 6965 7728 4661 7374 4172 7261 7929 0d0a  iew(FastArray)..
-00036510: 0d0a 2020 2020 2020 2020 656c 6966 2070  ..        elif p
-00036520: 6174 2e69 735f 626f 6f6c 6561 6e28 6172  at.is_boolean(ar
-00036530: 722e 7479 7065 293a 0d0a 2020 2020 2020  r.type):..      
-00036540: 2020 2020 2020 2320 426f 6f6c 6561 6e20        # Boolean 
-00036550: 6172 7261 7973 2063 616e 206f 6e6c 7920  arrays can only 
-00036560: 6265 2063 6f6e 7665 7274 6564 2077 6865  be converted whe
-00036570: 6e20 7468 6579 2064 6f20 6e6f 7420 636f  n they do not co
-00036580: 6e74 6169 6e20 6e75 6c6c 732e 0d0a 2020  ntain nulls...  
-00036590: 2020 2020 2020 2020 2020 2320 7269 7074            # ript
-000365a0: 6162 6c65 2064 6f65 7320 6e6f 7420 7375  able does not su
-000365b0: 7070 6f72 7420 616e 2027 696e 7661 6c69  pport an 'invali
-000365c0: 6427 2f4e 4120 7661 6c75 6520 666f 7220  d'/NA value for 
-000365d0: 626f 6f6c 6561 6e2c 2073 6f20 7079 6172  boolean, so pyar
-000365e0: 726f 7720 6172 7261 7973 0d0a 2020 2020  row arrays..    
-000365f0: 2020 2020 2020 2020 2320 7769 7468 206e          # with n
-00036600: 756c 6c73 2063 616e 2774 2062 6520 7265  ulls can't be re
-00036610: 7072 6573 656e 7465 6420 696e 2072 6970  presented in rip
-00036620: 7461 626c 652e 0d0a 2020 2020 2020 2020  table...        
-00036630: 2020 2020 6966 2061 7272 2e6e 756c 6c5f      if arr.null_
-00036640: 636f 756e 7420 3d3d 2030 3a0d 0a20 2020  count == 0:..   
-00036650: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00036660: 7572 6e20 6172 722e 746f 5f6e 756d 7079  urn arr.to_numpy
-00036670: 287a 6572 6f5f 636f 7079 5f6f 6e6c 793d  (zero_copy_only=
-00036680: 7a65 726f 5f63 6f70 795f 6f6e 6c79 2c20  zero_copy_only, 
-00036690: 7772 6974 6162 6c65 3d77 7269 7461 626c  writable=writabl
-000366a0: 6529 2e76 6965 7728 4661 7374 4172 7261  e).view(FastArra
-000366b0: 7929 0d0a 2020 2020 2020 2020 2020 2020  y)..            
-000366c0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-000366d0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
-000366e0: 7565 4572 726f 7228 0d0a 2020 2020 2020  ueError(..      
-000366f0: 2020 2020 2020 2020 2020 2020 2020 2272                "r
-00036700: 6970 7461 626c 6520 626f 6f6c 6561 6e20  iptable boolean 
-00036710: 6172 7261 7973 2064 6f20 6e6f 7420 7375  arrays do not su
-00036720: 7070 6f72 7420 616e 2069 6e76 616c 6964  pport an invalid
-00036730: 2076 616c 7565 2c20 736f 2074 6865 7920   value, so they 
-00036740: 6361 6e6e 6f74 2062 6520 6372 6561 7465  cannot be create
-00036750: 6420 6672 6f6d 2070 7961 7272 6f77 2061  d from pyarrow a
-00036760: 7272 6179 7320 636f 6e74 6169 6e69 6e67  rrays containing
-00036770: 206e 756c 6c73 2e22 0d0a 2020 2020 2020   nulls."..      
-00036780: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
-00036790: 2020 2020 2020 2065 6c69 6620 7061 742e         elif pat.
-000367a0: 6973 5f73 7472 696e 6728 6172 722e 7479  is_string(arr.ty
-000367b0: 7065 2920 6f72 2070 6174 2e69 735f 6c61  pe) or pat.is_la
-000367c0: 7267 655f 7374 7269 6e67 2861 7272 2e74  rge_string(arr.t
-000367d0: 7970 6529 3a0d 0a20 2020 2020 2020 2020  ype):..         
-000367e0: 2020 2023 2070 7961 7272 6f77 2076 6172     # pyarrow var
-000367f0: 6961 626c 652d 6c65 6e67 7468 2073 7472  iable-length str
-00036800: 696e 6720 6172 7261 7973 2063 616e 205f  ing arrays can _
-00036810: 6e65 7665 725f 2062 6520 7a65 726f 2d63  never_ be zero-c
-00036820: 6f70 7920 636f 6e76 6572 7465 6420 746f  opy converted to
-00036830: 2066 6978 6564 2d6c 656e 6774 6820 6e75   fixed-length nu
-00036840: 6d70 792f 7269 7074 6162 6c65 2061 7272  mpy/riptable arr
-00036850: 6179 730d 0a20 2020 2020 2020 2020 2020  ays..           
-00036860: 2023 2062 6563 6175 7365 206f 6620 6469   # because of di
-00036870: 6666 6572 656e 6365 7320 696e 2074 6865  fferences in the
-00036880: 206d 656d 6f72 7920 6c61 796f 7574 2e0d   memory layout..
-00036890: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000368a0: 7a65 726f 5f63 6f70 795f 6f6e 6c79 3a0d  zero_copy_only:.
-000368b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000368c0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-000368d0: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
-000368e0: 2020 2020 2020 2020 2270 7961 7272 6f77          "pyarrow
-000368f0: 2076 6172 6961 626c 652d 6c65 6e67 7468   variable-length
-00036900: 2073 7472 696e 6720 6172 7261 7973 2063   string arrays c
-00036910: 616e 6e6f 7420 6265 207a 6572 6f2d 636f  annot be zero-co
-00036920: 7079 2063 6f6e 7665 7274 6564 2074 6f20  py converted to 
-00036930: 7269 7074 6162 6c65 2061 7272 6179 732e  riptable arrays.
-00036940: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
-00036950: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
-00036960: 2020 2020 2320 4368 6563 6b20 666f 7220      # Check for 
-00036970: 7768 6574 6865 7220 7468 6520 6172 7261  whether the arra
-00036980: 7920 636f 6e74 6169 6e73 206f 6e6c 7920  y contains only 
-00036990: 4153 4349 4920 7374 7269 6e67 732e 0d0a  ASCII strings...
-000369a0: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
-000369b0: 6973 2069 7320 7573 6564 2074 6f20 6775  is is used to gu
-000369c0: 6964 6520 686f 7720 7468 6520 4661 7374  ide how the Fast
-000369d0: 4172 7261 7920 6973 2063 7265 6174 6564  Array is created
-000369e0: 2e0d 0a20 2020 2020 2020 2020 2020 2068  ...            h
-000369f0: 6173 5f75 6e69 636f 6465 203d 206e 6f74  as_unicode = not
-00036a00: 2070 632e 616c 6c28 7063 2e73 7472 696e   pc.all(pc.strin
-00036a10: 675f 6973 5f61 7363 6969 2861 7272 2929  g_is_ascii(arr))
-00036a20: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00036a30: 2320 436f 6e76 6572 7420 7468 6520 6172  # Convert the ar
-00036a40: 7261 7920 746f 2061 206e 756d 7079 2061  ray to a numpy a
-00036a50: 7272 6179 2e0d 0a20 2020 2020 2020 2020  rray...         
-00036a60: 2020 2023 2055 6e66 6f72 7475 6e61 7465     # Unfortunate
-00036a70: 6c79 2c20 6173 206f 6620 7079 6172 726f  ly, as of pyarro
-00036a80: 7720 342e 302c 2074 6869 7320 636f 6e76  w 4.0, this conv
-00036a90: 6572 7369 6f6e 2061 6c77 6179 7320 7072  ersion always pr
-00036aa0: 6f64 7563 6573 2061 206e 756d 7079 206f  oduces a numpy o
-00036ab0: 626a 6563 7420 6172 7261 7920 636f 6e74  bject array cont
-00036ac0: 6169 6e69 6e67 2074 6865 0d0a 2020 2020  aining the..    
-00036ad0: 2020 2020 2020 2020 2320 7374 7269 6e67          # string
-00036ae0: 7320 2861 7320 5079 7468 6f6e 2073 7472  s (as Python str
-00036af0: 696e 6773 2920 7261 7468 6572 2074 6861  ings) rather tha
-00036b00: 6e20 6120 6e75 6d70 7920 7374 7269 6e67  n a numpy string
-00036b10: 2061 7272 6179 2e0d 0a20 2020 2020 2020   array...       
-00036b20: 2020 2020 2023 2057 6527 7265 2061 626c       # We're abl
-00036b30: 6520 746f 2068 616e 646c 6520 7468 6973  e to handle this
-00036b40: 2074 6f20 7265 7475 726e 2074 6865 2073   to return the s
-00036b50: 656e 7369 626c 6520 7468 696e 6720 666f  ensible thing fo
-00036b60: 7220 7269 7074 6162 6c65 2075 7365 7273  r riptable users
-00036b70: 2c20 6275 7420 6974 2064 6f65 7320 6d65  , but it does me
-00036b80: 616e 2074 6869 7320 636f 6e76 6572 7369  an this conversi
-00036b90: 6f6e 0d0a 2020 2020 2020 2020 2020 2020  on..            
-00036ba0: 2320 6973 2073 6c6f 7765 7220 7468 616e  # is slower than
-00036bb0: 206e 6563 6573 7361 7279 2072 6967 6874   necessary right
-00036bc0: 206e 6f77 2e0d 0a20 2020 2020 2020 2020   now...         
-00036bd0: 2020 2023 2054 4f44 4f3a 2041 736b 2070     # TODO: Ask p
-00036be0: 7961 7272 6f77 2d64 6576 2061 626f 7574  yarrow-dev about
-00036bf0: 2069 6d70 6c65 6d65 6e74 696e 6720 616e   implementing an
-00036c00: 206f 7074 696f 6e20 746f 2072 6574 7572   option to retur
-00036c10: 6e20 6120 6e75 6d70 7920 2753 2720 6f72  n a numpy 'S' or
-00036c20: 2027 5527 2061 7272 6179 2069 6e73 7465   'U' array inste
-00036c30: 6164 2c20 6974 276c 6c20 6265 0d0a 2020  ad, it'll be..  
-00036c40: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00036c50: 2020 6d75 6368 206d 6f72 6520 6566 6669    much more effi
-00036c60: 6369 656e 742c 2065 7665 6e20 7468 6f75  cient, even thou
-00036c70: 6768 2073 6f6d 6520 7370 6163 6520 7769  gh some space wi
-00036c80: 6c6c 2062 6520 7761 7374 6564 2064 7565  ll be wasted due
-00036c90: 2074 6f20 6e75 6d70 7920 6e6f 7420 7375   to numpy not su
-00036ca0: 7070 6f72 7469 6e67 2076 6172 6961 626c  pporting variabl
-00036cb0: 652d 6c65 6e67 7468 2073 7472 696e 6773  e-length strings
-00036cc0: 2e0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-00036cd0: 2054 4f44 4f3a 2043 6f6e 7369 6465 7220   TODO: Consider 
-00036ce0: 636f 6e76 6572 7469 6e67 2074 6865 2070  converting the p
-00036cf0: 7961 7272 6f77 2061 7272 6179 2074 6f20  yarrow array to 
-00036d00: 6120 6469 6374 696f 6e61 7279 2d65 6e63  a dictionary-enc
-00036d10: 6f64 6564 2061 7272 6179 202d 2d20 6966  oded array -- if
-00036d20: 2074 6865 7265 2061 7265 206f 6e6c 7920   there are only 
-00036d30: 6120 6665 7720 756e 6971 7565 732c 0d0a  a few uniques,..
-00036d40: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-00036d50: 2020 2020 6974 276c 6c20 6265 206d 6f72      it'll be mor
-00036d60: 6520 6566 6669 6369 656e 7420 2865 7665  e efficient (eve
-00036d70: 6e20 7468 6f75 6768 2064 6f69 6e67 206d  n though doing m
-00036d80: 6f72 6520 776f 726b 2920 6279 2061 766f  ore work) by avo
-00036d90: 6964 696e 6720 7265 7065 7469 7469 7665  iding repetitive
-00036da0: 2063 7265 6174 696f 6e20 6f66 2074 6865   creation of the
-00036db0: 2050 7974 686f 6e20 7374 7269 6e67 206f   Python string o
-00036dc0: 626a 6563 7473 2e0d 0a20 2020 2020 2020  bjects...       
-00036dd0: 2020 2020 2069 6620 6172 722e 6e75 6c6c       if arr.null
-00036de0: 5f63 6f75 6e74 203d 3d20 303a 0d0a 2020  _count == 0:..  
-00036df0: 2020 2020 2020 2020 2020 2020 2020 746d                tm
-00036e00: 7020 3d20 6172 722e 746f 5f6e 756d 7079  p = arr.to_numpy
-00036e10: 287a 6572 6f5f 636f 7079 5f6f 6e6c 793d  (zero_copy_only=
-00036e20: 4661 6c73 652c 2077 7269 7461 626c 653d  False, writable=
-00036e30: 7772 6974 6162 6c65 290d 0a0d 0a20 2020  writable)....   
-00036e40: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-00036e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036e60: 2320 4e65 6564 2074 6f20 6669 6c6c 206e  # Need to fill n
-00036e70: 756c 6c73 2077 6974 6820 616e 2065 6d70  ulls with an emp
-00036e80: 7479 2073 7472 696e 6720 6265 666f 7265  ty string before
-00036e90: 2063 6f6e 7665 7274 696e 6720 746f 206e   converting to n
-00036ea0: 756d 7079 2e0d 0a20 2020 2020 2020 2020  umpy...         
-00036eb0: 2020 2020 2020 2023 2028 494e 5641 4c49         # (INVALI
-00036ec0: 445f 4449 4354 5b6e 702e 6474 7970 6528  D_DICT[np.dtype(
-00036ed0: 2755 2729 2e6e 756d 5d20 3d3d 2027 2729  'U').num] == '')
-00036ee0: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00036ef0: 2020 2074 6d70 203d 2061 7272 2e66 696c     tmp = arr.fil
-00036f00: 6c5f 6e75 6c6c 2822 2229 2e74 6f5f 6e75  l_null("").to_nu
-00036f10: 6d70 7928 7a65 726f 5f63 6f70 795f 6f6e  mpy(zero_copy_on
-00036f20: 6c79 3d46 616c 7365 2c20 7772 6974 6162  ly=False, writab
-00036f30: 6c65 3d77 7269 7461 626c 6529 0d0a 0d0a  le=writable)....
-00036f40: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00036f50: 6c74 203d 2046 6173 7441 7272 6179 2874  lt = FastArray(t
-00036f60: 6d70 2c20 6474 7970 653d 7374 722c 2075  mp, dtype=str, u
-00036f70: 6e69 636f 6465 3d68 6173 5f75 6e69 636f  nicode=has_unico
-00036f80: 6465 290d 0a20 2020 2020 2020 2020 2020  de)..           
-00036f90: 2069 6620 6e6f 7420 7772 6974 6162 6c65   if not writable
-00036fa0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00036fb0: 2020 2072 6573 756c 742e 666c 6167 732e     result.flags.
-00036fc0: 7772 6974 6561 626c 6520 3d20 4661 6c73  writeable = Fals
-00036fd0: 650d 0a20 2020 2020 2020 2020 2020 2072  e..            r
-00036fe0: 6574 7572 6e20 7265 7375 6c74 0d0a 0d0a  eturn result....
-00036ff0: 2020 2020 2020 2020 656c 6966 2070 6174          elif pat
-00037000: 2e69 735f 6669 7865 645f 7369 7a65 5f62  .is_fixed_size_b
-00037010: 696e 6172 7928 6172 722e 7479 7065 293a  inary(arr.type):
-00037020: 0d0a 2020 2020 2020 2020 2020 2020 6e75  ..            nu
-00037030: 6c6c 5f63 6f75 6e74 203d 2061 7272 2e6e  ll_count = arr.n
-00037040: 756c 6c5f 636f 756e 740d 0a20 2020 2020  ull_count..     
-00037050: 2020 2020 2020 2069 6620 6e75 6c6c 5f63         if null_c
-00037060: 6f75 6e74 2021 3d20 303a 0d0a 2020 2020  ount != 0:..    
-00037070: 2020 2020 2020 2020 2020 2020 6966 207a              if z
-00037080: 6572 6f5f 636f 7079 5f6f 6e6c 793a 0d0a  ero_copy_only:..
-00037090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000370a0: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
-000370b0: 7272 6f72 280d 0a20 2020 2020 2020 2020  rror(..         
-000370c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000370d0: 4361 6e27 7420 7065 7266 6f72 6d20 6120  Can't perform a 
-000370e0: 7a65 726f 2d63 6f70 7920 636f 6e76 6572  zero-copy conver
-000370f0: 7369 6f6e 206f 6620 6120 6669 7865 642d  sion of a fixed-
-00037100: 7369 7a65 2062 696e 6172 7920 6172 7261  size binary arra
-00037110: 7920 746f 2072 6970 7461 626c 6520 7768  y to riptable wh
-00037120: 656e 2074 6865 2069 6e70 7574 2061 7272  en the input arr
-00037130: 6179 2063 6f6e 7461 696e 7320 6e75 6c6c  ay contains null
-00037140: 732e 220d 0a20 2020 2020 2020 2020 2020  s."..           
-00037150: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
-00037160: 2020 2020 2020 2020 2020 2020 2020 6172                ar
-00037170: 7220 3d20 6172 722e 6669 6c6c 5f6e 756c  r = arr.fill_nul
-00037180: 6c28 0d0a 2020 2020 2020 2020 2020 2020  l(..            
-00037190: 2020 2020 2020 2020 6222 5c78 3030 2220          b"\x00" 
-000371a0: 2a20 6172 722e 7479 7065 2e62 7974 655f  * arr.type.byte_
-000371b0: 7769 6474 680d 0a20 2020 2020 2020 2020  width..         
-000371c0: 2020 2020 2020 2029 2020 2320 6361 6e27         )  # can'
-000371d0: 7420 6669 6c6c 2077 6974 6820 6222 222c  t fill with b"",
-000371e0: 2073 696e 6365 2062 2222 2069 7320 6e6f   since b"" is no
-000371f0: 7420 7661 6c69 6420 666f 7220 6669 7865  t valid for fixe
-00037200: 6420 7769 6474 6820 7479 7065 0d0a 0d0a  d width type....
-00037210: 2020 2020 2020 2020 2020 2020 2320 4361              # Ca
-00037220: 6c6c 696e 6720 7061 2e41 7272 6179 2e74  lling pa.Array.t
-00037230: 6f5f 6e75 6d70 7920 7769 7468 207a 6572  o_numpy with zer
-00037240: 6f5f 636f 7079 3d54 7275 6520 7261 6973  o_copy=True rais
-00037250: 6573 2061 6e20 6572 726f 7220 7769 7468  es an error with
-00037260: 2066 6978 6564 2073 697a 6564 2062 696e   fixed sized bin
-00037270: 6172 7920 7479 7065 2e0d 0a20 2020 2020  ary type...     
-00037280: 2020 2020 2020 2023 2043 616c 6c69 6e67         # Calling
-00037290: 2070 612e 4172 7261 792e 746f 5f6e 756d   pa.Array.to_num
-000372a0: 7079 2077 6974 6820 7a65 726f 5f63 6f70  py with zero_cop
-000372b0: 793d 4661 6c73 6520 7265 7475 726e 7320  y=False returns 
-000372c0: 6120 6e75 6d70 7920 6172 7261 7920 7768  a numpy array wh
-000372d0: 6572 6520 7479 7065 7320 6172 6520 7079  ere types are py
-000372e0: 7468 6f6e 2062 7974 6573 206f 626a 6563  thon bytes objec
-000372f0: 7473 2e0d 0a20 2020 2020 2020 2020 2020  ts...           
-00037300: 2023 2057 6f72 6b61 726f 756e 6420 6265   # Workaround be
-00037310: 6c6f 7720 6372 6561 7465 7320 7468 6520  low creates the 
-00037320: 6e75 6d70 7920 6275 6666 6572 206f 6620  numpy buffer of 
-00037330: 7479 7065 2022 5322 206d 616e 7561 6c6c  type "S" manuall
-00037340: 792e 0d0a 2020 2020 2020 2020 2020 2020  y...            
-00037350: 6275 6620 3d20 6e70 2e66 726f 6d62 7566  buf = np.frombuf
-00037360: 6665 7228 0d0a 2020 2020 2020 2020 2020  fer(..          
-00037370: 2020 2020 2020 6172 722e 6275 6666 6572        arr.buffer
-00037380: 7328 295b 315d 2c0d 0a20 2020 2020 2020  s()[1],..       
-00037390: 2020 2020 2020 2020 2064 7479 7065 3d22           dtype="
-000373a0: 5322 202b 2073 7472 2861 7272 2e74 7970  S" + str(arr.typ
-000373b0: 652e 6279 7465 5f77 6964 7468 292c 0d0a  e.byte_width),..
-000373c0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
-000373d0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000373e0: 7772 6974 6162 6c65 2061 6e64 206e 756c  writable and nul
-000373f0: 6c5f 636f 756e 7420 3d3d 2030 3a20 2023  l_count == 0:  #
-00037400: 2061 6c72 6561 6479 206d 6164 6520 6120   already made a 
-00037410: 636f 7079 2069 6620 6e75 6c6c 5f63 6f75  copy if null_cou
-00037420: 6e74 2021 3d20 300d 0a20 2020 2020 2020  nt != 0..       
-00037430: 2020 2020 2020 2020 2072 6573 756c 7420           result 
-00037440: 3d20 4661 7374 4172 7261 7928 6e70 2e63  = FastArray(np.c
-00037450: 6f70 7928 6275 6629 290d 0a20 2020 2020  opy(buf))..     
-00037460: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-00037470: 742e 666c 6167 732e 7772 6974 6561 626c  t.flags.writeabl
-00037480: 6520 3d20 7772 6974 6162 6c65 0d0a 2020  e = writable..  
-00037490: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000374a0: 7475 726e 2072 6573 756c 740d 0a0d 0a20  turn result.... 
-000374b0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-000374c0: 7420 3d20 4661 7374 4172 7261 7928 6275  t = FastArray(bu
-000374d0: 6629 0d0a 2020 2020 2020 2020 2020 2020  f)..            
-000374e0: 7265 7375 6c74 2e66 6c61 6773 2e77 7269  result.flags.wri
-000374f0: 7465 6162 6c65 203d 2077 7269 7461 626c  teable = writabl
-00037500: 650d 0a20 2020 2020 2020 2020 2020 2072  e..            r
-00037510: 6574 7572 6e20 7265 7375 6c74 0d0a 0d0a  eturn result....
-00037520: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00037530: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00037540: 2056 616c 7565 4572 726f 7228 0d0a 2020   ValueError(..  
-00037550: 2020 2020 2020 2020 2020 2020 2020 6622                f"
-00037560: 4661 7374 4172 7261 7920 6361 6e6e 6f74  FastArray cannot
-00037570: 2062 6520 6372 6561 7465 6420 6672 6f6d   be created from
-00037580: 2061 2070 7961 7272 6f77 2061 7272 6179   a pyarrow array
-00037590: 206f 6620 7479 7065 2027 7b61 7272 2e74   of type '{arr.t
-000375a0: 7970 657d 272e 2059 6f75 206d 6179 206e  ype}'. You may n
-000375b0: 6565 6420 746f 2063 616c 6c20 7468 6520  eed to call the 
-000375c0: 6066 726f 6d5f 6172 726f 7760 206d 6574  `from_arrow` met
-000375d0: 686f 6420 6f6e 206f 6e65 206f 6620 7468  hod on one of th
-000375e0: 6520 6465 7269 7665 6420 7375 6263 6c61  e derived subcla
-000375f0: 7373 6573 2069 6e73 7465 6164 2e22 0d0a  sses instead."..
-00037600: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
-00037610: 0a20 2020 2064 6566 2074 6f5f 6172 726f  .    def to_arro
-00037620: 7728 0d0a 2020 2020 2020 2020 7365 6c66  w(..        self
-00037630: 2c0d 0a20 2020 2020 2020 2074 7970 653a  ,..        type:
-00037640: 204f 7074 696f 6e61 6c5b 2270 612e 4461   Optional["pa.Da
-00037650: 7461 5479 7065 225d 203d 204e 6f6e 652c  taType"] = None,
-00037660: 0d0a 2020 2020 2020 2020 2a2c 0d0a 2020  ..        *,..  
-00037670: 2020 2020 2020 7072 6573 6572 7665 5f66        preserve_f
-00037680: 6978 6564 5f62 7974 6573 3a20 626f 6f6c  ixed_bytes: bool
-00037690: 203d 2046 616c 7365 2c0d 0a20 2020 2020   = False,..     
-000376a0: 2020 2065 6d70 7479 5f73 7472 696e 6773     empty_strings
-000376b0: 5f74 6f5f 6e75 6c6c 3a20 626f 6f6c 203d  _to_null: bool =
-000376c0: 2054 7275 652c 0d0a 2020 2020 2920 2d3e   True,..    ) ->
-000376d0: 2055 6e69 6f6e 5b22 7061 2e41 7272 6179   Union["pa.Array
-000376e0: 222c 2022 7061 2e43 6875 6e6b 6564 4172  ", "pa.ChunkedAr
-000376f0: 7261 7922 5d3a 0d0a 2020 2020 2020 2020  ray"]:..        
-00037700: 2222 220d 0a20 2020 2020 2020 2043 6f6e  """..        Con
-00037710: 7665 7274 2074 6869 7320 6046 6173 7441  vert this `FastA
-00037720: 7272 6179 6020 746f 2061 2060 7079 6172  rray` to a `pyar
-00037730: 726f 772e 4172 7261 7960 2e0d 0a0d 0a20  row.Array`..... 
-00037740: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
-00037750: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-00037760: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2074  -----..        t
-00037770: 7970 6520 3a20 7079 6172 726f 772e 4461  ype : pyarrow.Da
-00037780: 7461 5479 7065 2c20 6f70 7469 6f6e 616c  taType, optional
-00037790: 2c20 6465 6661 756c 7473 2074 6f20 4e6f  , defaults to No
-000377a0: 6e65 0d0a 2020 2020 2020 2020 7072 6573  ne..        pres
-000377b0: 6572 7665 5f66 6978 6564 5f62 7974 6573  erve_fixed_bytes
-000377c0: 203a 2062 6f6f 6c2c 206f 7074 696f 6e61   : bool, optiona
-000377d0: 6c2c 2064 6566 6175 6c74 7320 746f 2046  l, defaults to F
-000377e0: 616c 7365 0d0a 2020 2020 2020 2020 2020  alse..          
-000377f0: 2020 4966 2074 6869 7320 6046 6173 7441    If this `FastA
-00037800: 7272 6179 6020 6973 2061 6e20 4153 4349  rray` is an ASCI
-00037810: 4920 7374 7269 6e67 2061 7272 6179 2028  I string array (
-00037820: 6474 7970 652e 6b69 6e64 203d 3d20 2753  dtype.kind == 'S
-00037830: 2729 2c0d 0a20 2020 2020 2020 2020 2020  '),..           
-00037840: 2073 6574 2074 6869 7320 7061 7261 6d65   set this parame
-00037850: 7465 7220 746f 2054 7275 6520 746f 2070  ter to True to p
-00037860: 726f 6475 6365 2061 2066 6978 6564 2d6c  roduce a fixed-l
-00037870: 656e 6774 6820 6269 6e61 7279 2061 7272  ength binary arr
-00037880: 6179 0d0a 2020 2020 2020 2020 2020 2020  ay..            
-00037890: 696e 7374 6561 6420 6f66 2061 2076 6172  instead of a var
-000378a0: 6961 626c 652d 6c65 6e67 7468 2073 7472  iable-length str
-000378b0: 696e 6720 6172 7261 792e 0d0a 2020 2020  ing array...    
-000378c0: 2020 2020 656d 7074 795f 7374 7269 6e67      empty_string
-000378d0: 735f 746f 5f6e 756c 6c20 3a20 626f 6f6c  s_to_null : bool
-000378e0: 2c20 6f70 7469 6f6e 616c 2c20 6465 6661  , optional, defa
-000378f0: 756c 7473 2054 6f20 5472 7565 0d0a 2020  ults To True..  
-00037900: 2020 2020 2020 2020 2020 4966 2074 6869            If thi
-00037910: 7320 6046 6173 7441 7272 6179 6020 6973  s `FastArray` is
-00037920: 2061 6e20 4153 4349 4920 6f72 2055 6e69   an ASCII or Uni
-00037930: 636f 6465 2073 7472 696e 6720 6172 7261  code string arra
-00037940: 792c 0d0a 2020 2020 2020 2020 2020 2020  y,..            
-00037950: 7370 6563 6966 7920 5472 7565 2066 6f72  specify True for
-00037960: 2074 6869 7320 7061 7261 6d65 7465 7220   this parameter 
-00037970: 746f 2063 6f6e 7665 7274 2065 6d70 7479  to convert empty
-00037980: 2073 7472 696e 6773 2074 6f20 6e75 6c6c   strings to null
-00037990: 7320 696e 2074 6865 206f 7574 7075 742e  s in the output.
-000379a0: 0d0a 2020 2020 2020 2020 2020 2020 7269  ..            ri
-000379b0: 7074 6162 6c65 2069 6e63 6f6e 7369 7374  ptable inconsist
-000379c0: 656e 746c 7920 7265 636f 676e 697a 6573  ently recognizes
-000379d0: 2074 6865 2065 6d70 7479 2073 7472 696e   the empty strin
-000379e0: 6720 6173 2061 6e20 2769 6e76 616c 6964  g as an 'invalid
-000379f0: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
-00037a00: 736f 2074 6869 7320 7061 7261 6d65 7465  so this paramete
-00037a10: 7220 616c 6c6f 7773 2074 6865 2063 616c  r allows the cal
-00037a20: 6c65 7220 746f 2073 7065 6369 6679 2077  ler to specify w
-00037a30: 6869 6368 2069 6e74 6572 7072 6574 6174  hich interpretat
-00037a40: 696f 6e0d 0a20 2020 2020 2020 2020 2020  ion..           
-00037a50: 2074 6865 7920 7761 6e74 2e0d 0a0d 0a20   they want..... 
-00037a60: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
-00037a70: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
-00037a80: 0a20 2020 2020 2020 2070 7961 7272 6f77  .        pyarrow
-00037a90: 2e41 7272 6179 206f 7220 7079 6172 726f  .Array or pyarro
-00037aa0: 772e 4368 756e 6b65 6441 7272 6179 0d0a  w.ChunkedArray..
-00037ab0: 0d0a 2020 2020 2020 2020 4e6f 7465 730d  ..        Notes.
-00037ac0: 0a20 2020 2020 2020 202d 2d2d 2d2d 0d0a  .        -----..
-00037ad0: 2020 2020 2020 2020 544f 444f 3a20 4164          TODO: Ad
-00037ae0: 6420 626f 6f6c 2070 6172 616d 6574 6572  d bool parameter
-00037af0: 2077 6869 6368 2064 6972 6563 7473 2074   which directs t
-00037b00: 6865 2063 6f6e 7665 7273 696f 6e20 746f  he conversion to
-00037b10: 2063 686f 6f73 6520 7468 6520 6d6f 7374   choose the most
-00037b20: 2d63 6f6d 7061 6374 206f 7574 7075 7420  -compact output 
-00037b30: 7479 7065 2070 6f73 7369 626c 653f 0d0a  type possible?..
-00037b40: 2020 2020 2020 2020 2020 2020 2020 5468                Th
-00037b50: 6973 2077 6f75 6c64 2062 6520 7265 6c65  is would be rele
-00037b60: 7661 6e74 2074 6f20 696e 6469 6365 7320  vant to indices 
-00037b70: 6f66 2063 6174 6567 6f72 6963 616c 2f64  of categorical/d
-00037b80: 6963 7469 6f6e 6172 792d 656e 636f 6465  ictionary-encode
-00037b90: 6420 6172 7261 7973 2c20 6275 7420 636f  d arrays, but co
-00037ba0: 756c 6420 616c 736f 206d 616b 6520 7365  uld also make se
-00037bb0: 6e73 650d 0a20 2020 2020 2020 2020 2020  nse..           
-00037bc0: 2020 2066 6f72 2072 6567 756c 6172 2046     for regular F
-00037bd0: 6173 7441 7272 6179 2074 7970 6573 2028  astArray types (
-00037be0: 652e 672e 2074 6f20 7573 6520 616e 2069  e.g. to use an i
-00037bf0: 6e74 3820 696e 7374 6561 6420 6f66 2061  nt8 instead of a
-00037c00: 6e20 696e 7433 3220 7768 656e 2069 7427  n int32 when it'
-00037c10: 6420 6265 2061 206c 6f73 736c 6573 7320  d be a lossless 
-00037c20: 636f 6e76 6572 7369 6f6e 292e 0d0a 2020  conversion)...  
-00037c30: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00037c40: 2020 2069 6d70 6f72 7420 6275 696c 7469     import builti
-00037c50: 6e73 0d0a 0d0a 2020 2020 2020 2020 696d  ns....        im
-00037c60: 706f 7274 2070 7961 7272 6f77 2061 7320  port pyarrow as 
-00037c70: 7061 0d0a 0d0a 2020 2020 2020 2020 2320  pa....        # 
-00037c80: 4465 7269 7665 6420 6172 7261 7920 7479  Derived array ty
-00037c90: 7065 7320 4d55 5354 2069 6d70 6c65 6d65  pes MUST impleme
-00037ca0: 6e74 2074 6865 6972 206f 776e 206f 7665  nt their own ove
-00037cb0: 726c 6f61 6420 6f66 2074 6869 7320 6675  rload of this fu
-00037cc0: 6e63 7469 6f6e 0d0a 2020 2020 2020 2020  nction..        
-00037cd0: 2320 666f 7220 636f 7272 6563 746e 6573  # for correctnes
-00037ce0: 733b 2066 6f72 2074 6861 7420 7265 6173  s; for that reas
-00037cf0: 6f6e 2c20 7261 6973 6520 616e 2065 7272  on, raise an err
-00037d00: 6f72 2069 6620 736f 6d65 6f6e 6520 6174  or if someone at
-00037d10: 7465 6d70 7473 2074 6f0d 0a20 2020 2020  tempts to..     
-00037d20: 2020 2023 2063 616c 6c20 2a74 6869 732a     # call *this*
-00037d30: 2069 6d70 6c65 6d65 6e74 6174 696f 6e20   implementation 
-00037d40: 6f66 2074 6865 206d 6574 686f 6420 666f  of the method fo
-00037d50: 7220 6120 6465 7269 7665 6420 6172 7261  r a derived arra
-00037d60: 7920 7479 7065 2e0d 0a20 2020 2020 2020  y type...       
-00037d70: 2069 6620 6275 696c 7469 6e73 2e74 7970   if builtins.typ
-00037d80: 6528 7365 6c66 2920 213d 2046 6173 7441  e(self) != FastA
-00037d90: 7272 6179 3a0d 0a20 2020 2020 2020 2020  rray:..         
-00037da0: 2020 2072 6169 7365 204e 6f74 496d 706c     raise NotImpl
-00037db0: 656d 656e 7465 6445 7272 6f72 280d 0a20  ementedError(.. 
-00037dc0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00037dd0: 2254 6865 2060 7b62 7569 6c74 696e 732e  "The `{builtins.
-00037de0: 7479 7065 2873 656c 6629 2e5f 5f71 7561  type(self).__qua
-00037df0: 6c6e 616d 655f 5f7d 6020 7479 7065 206d  lname__}` type m
-00037e00: 7573 7420 696d 706c 656d 656e 7420 6974  ust implement it
-00037e10: 2773 206f 776e 206f 7665 7272 6964 6520  's own override 
-00037e20: 6f66 2074 6865 2060 746f 5f61 7272 6f77  of the `to_arrow
-00037e30: 2829 6020 6d65 7468 6f64 2e22 0d0a 2020  ()` method."..  
-00037e40: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
-00037e50: 2020 2020 2020 2023 2072 6970 7461 626c         # riptabl
-00037e60: 6520 2861 7420 6c65 6173 7420 6173 206f  e (at least as o
-00037e70: 6620 312e 302e 3536 2920 646f 6573 206e  f 1.0.56) does n
-00037e80: 6f74 202a 7472 756c 792a 2073 7570 706f  ot *truly* suppo
-00037e90: 7274 2069 6e76 616c 6964 2f4e 4120 7661  rt invalid/NA va
-00037ea0: 6c75 6573 0d0a 2020 2020 2020 2020 2320  lues..        # 
-00037eb0: 696e 2062 6f6f 6c20 6f72 2061 7363 6969  in bool or ascii
-00037ec0: 2f75 6e69 636f 6465 2073 7472 696e 672d  /unicode string-
-00037ed0: 7479 7065 6420 6172 7261 7973 2e20 4861  typed arrays. Ha
-00037ee0: 6e64 6c65 2074 686f 7365 2064 7479 7065  ndle those dtype
-00037ef0: 7320 7370 6563 6961 6c6c 792e 0d0a 2020  s specially...  
-00037f00: 2020 2020 2020 6966 206e 702e 6973 7375        if np.issu
-00037f10: 6264 7479 7065 2873 656c 662e 6474 7970  bdtype(self.dtyp
-00037f20: 652c 206e 702e 696e 7465 6765 7229 3a0d  e, np.integer):.
-00037f30: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
-00037f40: 4f44 4f3a 2049 6620 7468 6973 2061 7272  ODO: If this arr
-00037f50: 6179 2068 6173 202e 6e64 696d 7320 3e3d  ay has .ndims >=
-00037f60: 2032 2c20 6e65 6564 2074 6f20 636f 6e76   2, need to conv
-00037f70: 6572 7420 746f 2070 7961 7272 6f77 2075  ert to pyarrow u
-00037f80: 7369 6e67 2070 612e 5465 6e73 6f72 2e66  sing pa.Tensor.f
-00037f90: 726f 6d5f 6e75 6d70 7928 2e2e 2e29 2e20  rom_numpy(...). 
-00037fa0: 5468 6174 2064 6f65 736e 2774 2068 616e  That doesn't han
-00037fb0: 646c 6520 6d61 736b 7320 6173 206f 6620  dle masks as of 
-00037fc0: 7079 6172 726f 7720 342e 302e 0d0a 0d0a  pyarrow 4.0.....
-00037fd0: 2020 2020 2020 2020 2020 2020 2320 4765              # Ge
-00037fe0: 7420 6120 6d61 736b 206f 6620 696e 7661  t a mask of inva
-00037ff0: 6c69 6473 2e0d 0a20 2020 2020 2020 2020  lids...         
-00038000: 2020 2069 6e76 616c 6964 735f 6d61 736b     invalids_mask
-00038010: 203d 2073 656c 662e 6973 6e61 6e28 290d   = self.isnan().
-00038020: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-00038030: 2049 6620 616c 6c20 7661 6c75 6573 2061   If all values a
-00038040: 7265 2076 616c 6964 2c20 646f 6e27 7420  re valid, don't 
-00038050: 626f 7468 6572 2063 7265 6174 696e 6720  bother creating 
-00038060: 616e 2061 6c6c 2d46 616c 7365 206d 6173  an all-False mas
-00038070: 6b2c 2069 7427 7320 6a75 7374 2077 6173  k, it's just was
-00038080: 7469 6e67 206d 656d 6f72 792e 0d0a 2020  ting memory...  
-00038090: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-000380a0: 2069 6e76 616c 6964 735f 6d61 736b 2e61   invalids_mask.a
-000380b0: 6e79 2829 3a0d 0a20 2020 2020 2020 2020  ny():..         
-000380c0: 2020 2020 2020 2069 6e76 616c 6964 735f         invalids_
-000380d0: 6d61 736b 203d 204e 6f6e 650d 0a0d 0a20  mask = None.... 
-000380e0: 2020 2020 2020 2020 2020 2023 2043 7265             # Cre
-000380f0: 6174 6520 7468 6520 7079 6172 726f 7720  ate the pyarrow 
-00038100: 6172 7261 7920 6672 6f6d 2069 7420 2b20  array from it + 
-00038110: 7468 6973 2061 7272 6179 2e0d 0a20 2020  this array...   
-00038120: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00038130: 7061 2e61 7272 6179 2873 656c 662e 5f6e  pa.array(self._n
-00038140: 702c 206d 6173 6b3d 696e 7661 6c69 6473  p, mask=invalids
-00038150: 5f6d 6173 6b2c 2074 7970 653d 7479 7065  _mask, type=type
-00038160: 290d 0a0d 0a20 2020 2020 2020 2065 6c69  )....        eli
-00038170: 6620 6e70 2e69 7373 7562 6474 7970 6528  f np.issubdtype(
-00038180: 7365 6c66 2e64 7479 7065 2c20 6e70 2e66  self.dtype, np.f
-00038190: 6c6f 6174 696e 6729 3a0d 0a20 2020 2020  loating):..     
-000381a0: 2020 2020 2020 2023 2055 7369 6e67 2066         # Using f
-000381b0: 6c6f 6174 696e 672d 706f 696e 7420 4e61  loating-point Na
-000381c0: 4e20 746f 2073 6967 6e61 6c20 626f 7468  N to signal both
-000381d0: 204e 614e 2061 6e64 204e 412f 6e75 6c6c   NaN and NA/null
-000381e0: 2069 6e20 7269 7074 6162 6c65 206d 6561   in riptable mea
-000381f0: 6e73 2077 650d 0a20 2020 2020 2020 2020  ns we..         
-00038200: 2020 2023 206e 6565 6420 746f 206d 616b     # need to mak
-00038210: 6520 6120 6465 6369 7369 6f6e 2068 6572  e a decision her
-00038220: 6520 6f6e 2077 6865 7468 6572 2074 6f20  e on whether to 
-00038230: 6d61 726b 2074 686f 7365 2076 616c 7565  mark those value
-00038240: 7320 6173 204e 412f 6e75 6c6c 2076 616c  s as NA/null val
-00038250: 7565 730d 0a20 2020 2020 2020 2020 2020  ues..           
-00038260: 2023 2069 6e20 7468 6520 7265 7475 726e   # in the return
-00038270: 6564 2070 7961 7272 6f77 2061 7272 6179  ed pyarrow array
-00038280: 2e0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-00038290: 2046 6f72 206e 6f77 2c20 7765 2064 6f6e   For now, we don
-000382a0: 2774 202d 2d20 7765 206a 7573 7420 7061  't -- we just pa
-000382b0: 7373 2074 6865 2064 6174 6120 616c 6f6e  ss the data alon
-000382c0: 6720 6469 7265 6374 6c79 2c20 736f 2074  g directly, so t
-000382d0: 6865 2063 616c 6c65 7220 6361 6e20 6465  he caller can de
-000382e0: 6369 6465 0d0a 2020 2020 2020 2020 2020  cide..          
-000382f0: 2020 2320 6f6e 2077 6865 7468 6572 2074    # on whether t
-00038300: 6865 7920 7761 6e74 2074 6f20 6861 6e64  hey want to hand
-00038310: 6c65 2074 6861 742e 2028 4964 6561 6c6c  le that. (Ideall
-00038320: 792c 2077 6527 6420 6861 7665 2061 2077  y, we'd have a w
-00038330: 6179 2074 6f20 7061 7261 6d65 7465 7269  ay to parameteri
-00038340: 7a65 2074 6869 730d 0a20 2020 2020 2020  ze this..       
-00038350: 2020 2020 2023 2062 7574 2074 6865 2070       # but the p
-00038360: 726f 746f 636f 6c20 646f 6573 6e27 7420  rotocol doesn't 
-00038370: 7375 7070 6f72 7420 6974 2061 7320 6f66  support it as of
-00038380: 2070 7961 7272 6f77 2034 2e30 2e20 496e   pyarrow 4.0. In
-00038390: 2061 6e79 2063 6173 652c 206f 6e6c 7920   any case, only 
-000383a0: 7468 6520 6269 746d 6173 6b0d 0a20 2020  the bitmask..   
-000383b0: 2020 2020 2020 2020 2023 206e 6565 6473           # needs
-000383c0: 2074 6f20 6265 2072 652d 6372 6561 7465   to be re-create
-000383d0: 6420 6c61 7465 7220 6966 2074 6865 2075  d later if the u
-000383e0: 7365 7220 7761 6e74 7320 746f 2063 6f6e  ser wants to con
-000383f0: 7369 6465 7220 7468 6520 4e61 4e73 2061  sider the NaNs a
-00038400: 7320 4e41 2f6e 756c 6c20 7661 6c75 6573  s NA/null values
-00038410: 2e29 0d0a 2020 2020 2020 2020 2020 2020  .)..            
-00038420: 6966 2073 656c 662e 6e64 696d 203e 3d20  if self.ndim >= 
-00038430: 323a 0d0a 2020 2020 2020 2020 2020 2020  2:..            
-00038440: 2020 2020 2320 4e4f 5445 3a20 4173 206f      # NOTE: As o
-00038450: 6620 7079 6172 726f 7720 342e 302c 2074  f pyarrow 4.0, t
-00038460: 6869 7320 6d65 7468 6f64 2064 6f65 736e  his method doesn
-00038470: 2774 2073 7570 706f 7274 2061 2060 7479  't support a `ty
-00038480: 7065 6020 6172 6775 6d65 6e74 2e0d 0a20  pe` argument... 
-00038490: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000384a0: 6574 7572 6e20 7061 2e54 656e 736f 722e  eturn pa.Tensor.
-000384b0: 6672 6f6d 5f6e 756d 7079 2873 656c 662e  from_numpy(self.
-000384c0: 5f6e 7029 0d0a 2020 2020 2020 2020 2020  _np)..          
-000384d0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-000384e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000384f0: 7061 2e61 7272 6179 2873 656c 662e 5f6e  pa.array(self._n
-00038500: 702c 2074 7970 653d 7479 7065 290d 0a0d  p, type=type)...
-00038510: 0a20 2020 2020 2020 2065 6c69 6620 6e70  .        elif np
-00038520: 2e69 7373 7562 6474 7970 6528 7365 6c66  .issubdtype(self
-00038530: 2e64 7479 7065 2c20 626f 6f6c 293a 0d0a  .dtype, bool):..
-00038540: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00038550: 656c 662e 6e64 696d 203e 3d20 323a 0d0a  elf.ndim >= 2:..
-00038560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038570: 2320 4e4f 5445 3a20 4173 206f 6620 7079  # NOTE: As of py
-00038580: 6172 726f 7720 342e 302c 2074 6869 7320  arrow 4.0, this 
-00038590: 6d65 7468 6f64 2064 6f65 736e 2774 2073  method doesn't s
-000385a0: 7570 706f 7274 2061 2060 7479 7065 6020  upport a `type` 
-000385b0: 6172 6775 6d65 6e74 2e0d 0a20 2020 2020  argument...     
-000385c0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000385d0: 6e20 7061 2e54 656e 736f 722e 6672 6f6d  n pa.Tensor.from
-000385e0: 5f6e 756d 7079 2873 656c 662e 5f6e 7029  _numpy(self._np)
-000385f0: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
-00038600: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00038610: 2020 2020 2072 6574 7572 6e20 7061 2e61       return pa.a
-00038620: 7272 6179 2873 656c 662e 5f6e 702c 2074  rray(self._np, t
-00038630: 7970 653d 7479 7065 290d 0a0d 0a20 2020  ype=type)....   
-00038640: 2020 2020 2065 6c69 6620 6e70 2e69 7373       elif np.iss
-00038650: 7562 6474 7970 6528 7365 6c66 2e64 7479  ubdtype(self.dty
-00038660: 7065 2c20 6279 7465 7329 3a0d 0a20 2020  pe, bytes):..   
-00038670: 2020 2020 2020 2020 2023 2049 6620 7468           # If th
-00038680: 6520 6361 6c6c 6572 2077 616e 7473 2074  e caller wants t
-00038690: 6f20 636f 6e76 6572 7420 656d 7074 7920  o convert empty 
-000386a0: 7374 7269 6e67 7320 746f 206e 756c 6c73  strings to nulls
-000386b0: 2c20 6765 7420 6120 6d61 736b 206f 6620  , get a mask of 
-000386c0: 696e 7661 6c69 6473 2e0d 0a20 2020 2020  invalids...     
-000386d0: 2020 2020 2020 2069 6620 656d 7074 795f         if empty_
-000386e0: 7374 7269 6e67 735f 746f 5f6e 756c 6c3a  strings_to_null:
-000386f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00038700: 2020 696e 7661 6c69 6473 5f6d 6173 6b20    invalids_mask 
-00038710: 3d20 7365 6c66 203d 3d20 7365 6c66 2e69  = self == self.i
-00038720: 6e76 0d0a 0d0a 2020 2020 2020 2020 2020  nv....          
-00038730: 2020 2020 2020 2320 4966 2061 6c6c 2076        # If all v
-00038740: 616c 7565 7320 6172 6520 7661 6c69 642c  alues are valid,
-00038750: 2064 6f6e 2774 2062 6f74 6865 7220 6372   don't bother cr
-00038760: 6561 7469 6e67 2061 6e20 616c 6c2d 4661  eating an all-Fa
-00038770: 6c73 6520 6d61 736b 2c20 6974 2773 206a  lse mask, it's j
-00038780: 7573 7420 7761 7374 696e 6720 6d65 6d6f  ust wasting memo
-00038790: 7279 2e0d 0a20 2020 2020 2020 2020 2020  ry...           
-000387a0: 2020 2020 2069 6620 6e6f 7420 696e 7661       if not inva
-000387b0: 6c69 6473 5f6d 6173 6b2e 616e 7928 293a  lids_mask.any():
-000387c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000387d0: 2020 2020 2020 696e 7661 6c69 6473 5f6d        invalids_m
-000387e0: 6173 6b20 3d20 4e6f 6e65 0d0a 2020 2020  ask = None..    
-000387f0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00038800: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00038810: 6e76 616c 6964 735f 6d61 736b 203d 204e  nvalids_mask = N
-00038820: 6f6e 650d 0a0d 0a20 2020 2020 2020 2020  one....         
-00038830: 2020 2023 2044 6f65 7320 7468 6520 6361     # Does the ca
-00038840: 6c6c 6572 2077 616e 7420 746f 2070 7265  ller want to pre
-00038850: 7365 7276 6520 7468 6520 6669 7865 642d  serve the fixed-
-00038860: 6c65 6e67 7468 2062 696e 6172 7920 6461  length binary da
-00038870: 7461 3f0d 0a20 2020 2020 2020 2020 2020  ta?..           
-00038880: 2069 6620 7072 6573 6572 7665 5f66 6978   if preserve_fix
-00038890: 6564 5f62 7974 6573 3a0d 0a20 2020 2020  ed_bytes:..     
-000388a0: 2020 2020 2020 2020 2020 2023 2043 6f6e             # Con
-000388b0: 7665 7274 2074 6f20 6120 6669 7865 642d  vert to a fixed-
-000388c0: 6c65 6e67 7468 2062 696e 6172 7920 2827  length binary ('
-000388d0: 6279 7465 7327 2920 7479 7065 2e0d 0a20  bytes') type... 
-000388e0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000388f0: 6c65 6d65 6e74 5f73 7472 5f6c 656e 6774  lement_str_lengt
-00038900: 6820 3d20 6e70 2e64 7479 7065 2873 656c  h = np.dtype(sel
-00038910: 662e 6474 7970 6529 2e69 7465 6d73 697a  f.dtype).itemsiz
-00038920: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
-00038930: 2020 2061 7272 5f74 7970 6520 3d20 7061     arr_type = pa
-00038940: 2e62 696e 6172 7928 656c 656d 656e 745f  .binary(element_
-00038950: 7374 725f 6c65 6e67 7468 2920 6966 2074  str_length) if t
-00038960: 7970 6520 6973 204e 6f6e 6520 656c 7365  ype is None else
-00038970: 2074 7970 650d 0a20 2020 2020 2020 2020   type..         
-00038980: 2020 2020 2020 2072 6574 7572 6e20 7061         return pa
-00038990: 2e61 7272 6179 2873 656c 662e 5f6e 702c  .array(self._np,
-000389a0: 206d 6173 6b3d 696e 7661 6c69 6473 5f6d   mask=invalids_m
-000389b0: 6173 6b2c 2074 7970 653d 6172 725f 7479  ask, type=arr_ty
-000389c0: 7065 290d 0a20 2020 2020 2020 2020 2020  pe)..           
-000389d0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-000389e0: 2020 2020 2020 2020 2320 436f 6e76 6572          # Conver
-000389f0: 7420 7468 6973 2061 7272 6179 2074 6f20  t this array to 
-00038a00: 6120 7079 6172 726f 7720 7661 7269 6162  a pyarrow variab
-00038a10: 6c65 2d6c 656e 6774 6820 7374 7269 6e67  le-length string
-00038a20: 2061 7272 6179 2e0d 0a20 2020 2020 2020   array...       
-00038a30: 2020 2020 2020 2020 2069 6620 7479 7065           if type
-00038a40: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
-00038a50: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00038a60: 7970 6520 3d20 7061 2e73 7472 696e 6728  ype = pa.string(
-00038a70: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00038a80: 2020 2023 2043 6f6e 7665 7274 2061 7320     # Convert as 
-00038a90: 556e 6963 6f64 6520 6e64 6172 7261 7920  Unicode ndarray 
-00038aa0: 746f 2073 7472 696e 6761 7272 6179 2c20  to stringarray, 
-00038ab0: 6173 2062 7974 6573 7472 696e 6720 646f  as bytestring do
-00038ac0: 6573 206e 6f74 2070 7265 7365 7276 6520  es not preserve 
-00038ad0: 656c 656d 656e 7420 6c65 6e67 7468 2028  element length (
-00038ae0: 7269 7074 6162 6c65 2332 3439 290d 0a20  riptable#249).. 
-00038af0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00038b00: 6574 7572 6e20 7061 2e61 7272 6179 286e  eturn pa.array(n
-00038b10: 702e 6172 7261 7928 7365 6c66 2e5f 6e70  p.array(self._np
-00038b20: 2c20 6474 7970 653d 2255 2229 2c20 6d61  , dtype="U"), ma
-00038b30: 736b 3d69 6e76 616c 6964 735f 6d61 736b  sk=invalids_mask
-00038b40: 2c20 7479 7065 3d74 7970 6529 0d0a 0d0a  , type=type)....
-00038b50: 2020 2020 2020 2020 656c 6966 206e 702e          elif np.
-00038b60: 6973 7375 6264 7479 7065 2873 656c 662e  issubdtype(self.
-00038b70: 6474 7970 652c 2073 7472 293a 0d0a 2020  dtype, str):..  
-00038b80: 2020 2020 2020 2020 2020 2320 4966 2074            # If t
-00038b90: 6865 2063 616c 6c65 7220 7761 6e74 7320  he caller wants 
-00038ba0: 746f 2063 6f6e 7665 7274 2065 6d70 7479  to convert empty
-00038bb0: 2073 7472 696e 6773 2074 6f20 6e75 6c6c   strings to null
-00038bc0: 732c 2067 6574 2061 206d 6173 6b20 6f66  s, get a mask of
-00038bd0: 2069 6e76 616c 6964 732e 0d0a 2020 2020   invalids...    
-00038be0: 2020 2020 2020 2020 6966 2065 6d70 7479          if empty
-00038bf0: 5f73 7472 696e 6773 5f74 6f5f 6e75 6c6c  _strings_to_null
-00038c00: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00038c10: 2020 2069 6e76 616c 6964 735f 6d61 736b     invalids_mask
-00038c20: 203d 2073 656c 6620 3d3d 2073 656c 662e   = self == self.
-00038c30: 696e 760d 0a0d 0a20 2020 2020 2020 2020  inv....         
-00038c40: 2020 2020 2020 2023 2049 6620 616c 6c20         # If all 
-00038c50: 7661 6c75 6573 2061 7265 2076 616c 6964  values are valid
-00038c60: 2c20 646f 6e27 7420 626f 7468 6572 2063  , don't bother c
-00038c70: 7265 6174 696e 6720 616e 2061 6c6c 2d46  reating an all-F
-00038c80: 616c 7365 206d 6173 6b2c 2069 7427 7320  alse mask, it's 
-00038c90: 6a75 7374 2077 6173 7469 6e67 206d 656d  just wasting mem
-00038ca0: 6f72 792e 0d0a 2020 2020 2020 2020 2020  ory...          
-00038cb0: 2020 2020 2020 6966 206e 6f74 2069 6e76        if not inv
-00038cc0: 616c 6964 735f 6d61 736b 2e61 6e79 2829  alids_mask.any()
+0002e6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e6b0: 2020 2020 2020 2020 2061 7267 735b 305d           args[0]
+0002e6c0: 203d 205f 4153 5459 5045 2861 7267 735b   = _ASTYPE(args[
+0002e6d0: 305d 2c20 6669 6e61 6c5f 6474 7970 6529  0], final_dtype)
+0002e6e0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0002e6f0: 2320 6e6f 7420 6120 6269 6e61 7279 2075  # not a binary u
+0002e700: 6675 6e63 2c20 6368 6563 6b20 666f 7220  func, check for 
+0002e710: 756e 6172 7920 7566 756e 630d 0a20 2020  unary ufunc..   
+0002e720: 2020 2020 2020 2020 2023 2063 6865 636b           # check
+0002e730: 2066 6f72 206a 7573 7420 3120 696e 7075   for just 1 inpu
+0002e740: 7420 2875 6e61 7279 290d 0a0d 0a20 2020  t (unary)....   
+0002e750: 2020 2020 2020 2020 2065 6c69 6620 2875           elif (u
+0002e760: 6675 6e63 2e6e 696e 203d 3d20 3129 2061  func.nin == 1) a
+0002e770: 6e64 2028 7566 756e 632e 6e6f 7574 203d  nd (ufunc.nout =
+0002e780: 3d20 3129 3a0d 0a20 2020 2020 2020 2020  = 1):..         
+0002e790: 2020 2020 2020 2023 2323 2323 2323 2323         #########
+0002e7a0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002e7b0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002e7c0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002e7d0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002e7e0: 2323 0d0a 2020 2020 2020 2020 2020 2020  ##..            
+0002e7f0: 2020 2020 2323 2055 4e41 5259 0d0a 2020      ## UNARY..  
+0002e800: 2020 2020 2020 2020 2020 2020 2020 2323                ##
+0002e810: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002e820: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002e830: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002e840: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+0002e850: 2323 2323 2323 2323 230d 0a20 2020 2020  #########..     
+0002e860: 2020 2020 2020 2020 2020 2066 6173 745f             fast_
+0002e870: 6675 6e63 7469 6f6e 203d 2067 556e 6172  function = gUnar
+0002e880: 7955 4675 6e63 732e 6765 7428 7566 756e  yUFuncs.get(ufun
+0002e890: 632c 204e 6f6e 6529 0d0a 2020 2020 2020  c, None)..      
+0002e8a0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0002e8b0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002e8c0: 4661 7374 4172 7261 792e 5665 7262 6f73  FastArray.Verbos
+0002e8d0: 6520 3e20 313a 0d0a 2020 2020 2020 2020  e > 1:..        
+0002e8e0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+0002e8f0: 7428 222a 2a2a 756e 6b6e 6f77 6e20 7566  t("***unknown uf
+0002e900: 756e 6320 6172 6720 7374 796c 653a 2022  unc arg style: "
+0002e910: 2c20 7566 756e 632e 6e69 6e2c 2075 6675  , ufunc.nin, ufu
+0002e920: 6e63 2e6e 6f75 742c 2075 6675 6e63 2c20  nc.nout, ufunc, 
+0002e930: 6172 6773 2c20 6b77 6172 6773 290d 0a0d  args, kwargs)...
+0002e940: 0a20 2020 2020 2020 2023 202d 2d2d 2d2d  .        # -----
+0002e950: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002e960: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002e970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002e980: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002e990: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002e9a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0002e9b0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+0002e9c0: 2020 6966 206e 6f74 2046 6173 7441 7272    if not FastArr
+0002e9d0: 6179 2e46 6173 7465 7255 4675 6e63 3a0d  ay.FasterUFunc:.
+0002e9e0: 0a20 2020 2020 2020 2020 2020 2066 6173  .            fas
+0002e9f0: 745f 6675 6e63 7469 6f6e 203d 204e 6f6e  t_function = Non
+0002ea00: 650d 0a20 2020 2020 2020 2020 2020 2072  e..            r
+0002ea10: 6564 7563 655f 6675 6e63 203d 204e 6f6e  educe_func = Non
+0002ea20: 650d 0a0d 0a20 2020 2020 2020 2023 2063  e....        # c
+0002ea30: 6865 636b 2066 6f72 2061 2072 6564 7563  heck for a reduc
+0002ea40: 6520 6675 6e63 206c 696b 6520 7375 6d20  e func like sum 
+0002ea50: 6f72 206d 696e 0d0a 2020 2020 2020 2020  or min..        
+0002ea60: 6966 2072 6564 7563 655f 6675 6e63 2069  if reduce_func i
+0002ea70: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+0002ea80: 2020 2020 2020 2020 206b 6565 7064 696d           keepdim
+0002ea90: 733a 2062 6f6f 6c20 3d20 6b77 6172 6773  s: bool = kwargs
+0002eaa0: 2e67 6574 2822 6b65 6570 6469 6d73 222c  .get("keepdims",
+0002eab0: 2046 616c 7365 290d 0a20 2020 2020 2020   False)..       
+0002eac0: 2020 2020 2069 6620 6474 7970 6520 6973       if dtype is
+0002ead0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0002eae0: 2020 2020 2020 2020 6474 7970 6520 3d20          dtype = 
+0002eaf0: 6172 6773 5b30 5d2e 6474 7970 650d 0a0d  args[0].dtype...
+0002eb00: 0a20 2020 2020 2020 2020 2020 2023 204d  .            # M
+0002eb10: 6174 684c 6564 6765 720d 0a20 2020 2020  athLedger..     
+0002eb20: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+0002eb30: 5479 7065 5265 6769 7374 6572 2e4d 6174  TypeRegister.Mat
+0002eb40: 684c 6564 6765 722e 5f52 4544 5543 4528  hLedger._REDUCE(
+0002eb50: 6172 6773 5b30 5d2c 2072 6564 7563 655f  args[0], reduce_
+0002eb60: 6675 6e63 290d 0a20 2020 2020 2020 2020  func)..         
+0002eb70: 2020 2063 6861 7220 3d20 6e70 2e64 7479     char = np.dty
+0002eb80: 7065 2864 7479 7065 292e 6368 6172 0d0a  pe(dtype).char..
+0002eb90: 2020 2020 2020 2020 2020 2020 6966 2046              if F
+0002eba0: 6173 7441 7272 6179 2e56 6572 626f 7365  astArray.Verbose
+0002ebb0: 203e 2031 3a0d 0a20 2020 2020 2020 2020   > 1:..         
+0002ebc0: 2020 2020 2020 2070 7269 6e74 2822 2a2a         print("**
+0002ebd0: 2a72 6573 756c 7420 6672 6f6d 2072 6564  *result from red
+0002ebe0: 7563 6522 2c20 7265 7375 6c74 2c20 7479  uce", result, ty
+0002ebf0: 7065 2872 6573 756c 7429 2c20 6474 7970  pe(result), dtyp
+0002ec00: 652c 2063 6861 7229 0d0a 0d0a 2020 2020  e, char)....    
+0002ec10: 2020 2020 2020 2020 6966 2072 6573 756c          if resul
+0002ec20: 7420 6973 206e 6f74 204e 6f6e 653a 0d0a  t is not None:..
+0002ec30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ec40: 2320 7072 696e 7428 2272 6564 7563 6520  # print("reduce 
+0002ec50: 6361 6c6c 6564 222c 2075 6675 6e63 2c20  called", ufunc, 
+0002ec60: 6b65 6570 6469 6d73 2c20 6474 7970 6529  keepdims, dtype)
+0002ec70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002ec80: 2020 6966 2072 6564 7563 655f 6675 6e63    if reduce_func
+0002ec90: 2069 6e20 5b52 4544 5543 455f 4655 4e43   in [REDUCE_FUNC
+0002eca0: 5449 4f4e 532e 5245 4455 4345 5f53 554d  TIONS.REDUCE_SUM
+0002ecb0: 2c20 5245 4455 4345 5f46 554e 4354 494f  , REDUCE_FUNCTIO
+0002ecc0: 4e53 2e52 4544 5543 455f 4e41 4e53 554d  NS.REDUCE_NANSUM
+0002ecd0: 5d20 616e 6420 6973 696e 7374 616e 6365  ] and isinstance
+0002ece0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+0002ecf0: 2020 2020 2020 2072 6573 756c 742c 2066         result, f
+0002ed00: 6c6f 6174 0d0a 2020 2020 2020 2020 2020  loat..          
+0002ed10: 2020 2020 2020 293a 0d0a 2020 2020 2020        ):..      
+0002ed20: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0002ed30: 7375 6c74 203d 206e 702e 666c 6f61 7436  sult = np.float6
+0002ed40: 3428 7265 7375 6c74 290d 0a20 2020 2020  4(result)..     
+0002ed50: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0002ed60: 6474 7970 6520 213d 206e 702e 666c 6f61  dtype != np.floa
+0002ed70: 7433 3220 616e 6420 6474 7970 6520 213d  t32 and dtype !=
+0002ed80: 206e 702e 666c 6f61 7436 343a 0d0a 2020   np.float64:..  
+0002ed90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eda0: 2020 2320 7072 6573 6572 7665 2069 6e74    # preserve int
+0002edb0: 6567 6572 730d 0a20 2020 2020 2020 2020  egers..         
+0002edc0: 2020 2020 2020 2020 2020 2069 6620 6368             if ch
+0002edd0: 6172 2069 6e20 4e75 6d70 7943 6861 7254  ar in NumpyCharT
+0002ede0: 7970 6573 2e55 6e73 6967 6e65 6449 6e74  ypes.UnsignedInt
+0002edf0: 6567 6572 3634 3a0d 0a20 2020 2020 2020  eger64:..       
+0002ee00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ee10: 2023 2070 7265 7365 7276 6520 6869 6768   # preserve high
+0002ee20: 2062 6974 0d0a 2020 2020 2020 2020 2020   bit..          
+0002ee30: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0002ee40: 7375 6c74 203d 206e 702e 7569 6e74 3634  sult = np.uint64
+0002ee50: 2872 6573 756c 7429 0d0a 2020 2020 2020  (result)..      
+0002ee60: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0002ee70: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+0002ee80: 2020 2020 2020 2020 2020 2020 2072 6573               res
+0002ee90: 756c 7420 3d20 6e70 2e69 6e74 3634 2872  ult = np.int64(r
+0002eea0: 6573 756c 7429 0d0a 2020 2020 2020 2020  esult)..        
+0002eeb0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+0002eec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eed0: 2020 2072 6573 756c 7420 3d20 6e70 2e66     result = np.f
+0002eee0: 6c6f 6174 3634 2872 6573 756c 7429 0d0a  loat64(result)..
+0002eef0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002ef00: 2020 2320 4d49 4e2f 4d41 5820 6e65 6564    # MIN/MAX need
+0002ef10: 2074 6f20 7265 7475 726e 2073 616d 6520   to return same 
+0002ef20: 7479 7065 0d0a 2020 2020 2020 2020 2020  type..          
+0002ef30: 2020 2020 2020 6966 2072 6564 7563 655f        if reduce_
+0002ef40: 6675 6e63 203e 3d20 5245 4455 4345 5f46  func >= REDUCE_F
+0002ef50: 554e 4354 494f 4e53 2e52 4544 5543 455f  UNCTIONS.REDUCE_
+0002ef60: 4d49 4e3a 0d0a 2020 2020 2020 2020 2020  MIN:..          
+0002ef70: 2020 2020 2020 2020 2020 2320 6d69 6e20            # min 
+0002ef80: 6d61 7820 6e6f 7420 616c 6c6f 7765 6420  max not allowed 
+0002ef90: 6f6e 2065 6d70 7479 2061 7272 6179 2070  on empty array p
+0002efa0: 6572 2075 6e69 7420 7465 7374 0d0a 2020  er unit test..  
+0002efb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002efc0: 2020 6966 206c 656e 2861 7267 735b 305d    if len(args[0]
+0002efd0: 2920 3d3d 2030 3a0d 0a20 2020 2020 2020  ) == 0:..       
+0002efe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eff0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
+0002f000: 7228 226d 696e 2f6d 6178 2061 7267 2069  r("min/max arg i
+0002f010: 7320 616e 2065 6d70 7479 2073 6571 7565  s an empty seque
+0002f020: 6e63 652e 2229 0d0a 0d0a 2020 2020 2020  nce.")....      
+0002f030: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002f040: 6d69 6e2f 6d61 782f 6e61 6e6d 696e 2f6e  min/max/nanmin/n
+0002f050: 616e 6d61 7820 2d2d 2073 616d 6520 7265  anmax -- same re
+0002f060: 7375 6c74 0d0a 2020 2020 2020 2020 2020  sult..          
+0002f070: 2020 2020 2020 2020 2020 6966 2064 7479            if dty
+0002f080: 7065 203d 3d20 6e70 2e62 6f6f 6c5f 3a0d  pe == np.bool_:.
+0002f090: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002f0a0: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+0002f0b0: 3d20 6e70 2e62 6f6f 6c28 7265 7375 6c74  = np.bool(result
+0002f0c0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0002f0d0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+0002f0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f0f0: 2020 2020 2020 7265 7375 6c74 203d 2064        result = d
+0002f100: 7479 7065 2e74 7970 6528 7265 7375 6c74  type.type(result
+0002f110: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0002f120: 2020 2020 2020 2020 2069 6620 6b65 6570           if keep
+0002f130: 6469 6d73 3a0d 0a20 2020 2020 2020 2020  dims:..         
+0002f140: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0002f150: 6573 756c 7420 3d20 4661 7374 4172 7261  esult = FastArra
+0002f160: 7928 5b72 6573 756c 745d 292e 6173 7479  y([result]).asty
+0002f170: 7065 2864 7479 7065 290d 0a20 2020 2020  pe(dtype)..     
+0002f180: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0002f190: 6b65 6570 6469 6d73 3a0d 0a20 2020 2020  keepdims:..     
+0002f1a0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0002f1b0: 2066 6f72 6365 2062 6163 6b20 696e 746f   force back into
+0002f1c0: 2061 6e20 6172 7261 7920 6672 6f6d 2073   an array from s
+0002f1d0: 6361 6c61 720d 0a20 2020 2020 2020 2020  calar..         
+0002f1e0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+0002f1f0: 7420 3d20 4661 7374 4172 7261 7928 5b72  t = FastArray([r
+0002f200: 6573 756c 745d 290d 0a0d 0a20 2020 2020  esult])....     
+0002f210: 2020 2020 2020 2020 2020 2023 2077 6520             # we 
+0002f220: 6469 6420 7468 6520 7265 6475 6365 2c20  did the reduce, 
+0002f230: 6e6f 7720 7265 7475 726e 2074 6865 2072  now return the r
+0002f240: 6573 756c 740d 0a20 2020 2020 2020 2020  esult..         
+0002f250: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+0002f260: 7375 6c74 0d0a 0d0a 2020 2020 2020 2020  sult....        
+0002f270: 2320 6368 6563 6b20 666f 7220 6e6f 726d  # check for norm
+0002f280: 616c 2063 616c 6c20 6675 6e63 7469 6f6e  al call function
+0002f290: 0d0a 2020 2020 2020 2020 656c 6966 2066  ..        elif f
+0002f2a0: 6173 745f 6675 6e63 7469 6f6e 2069 7320  ast_function is 
+0002f2b0: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+0002f2c0: 2020 2020 2020 2023 2043 616c 6c20 7468         # Call th
+0002f2d0: 6520 4661 7374 4172 7261 7920 4150 4973  e FastArray APIs
+0002f2e0: 2069 6e73 7465 6164 206f 6620 6e75 6d70   instead of nump
+0002f2f0: 790d 0a20 2020 2020 2020 2020 2020 2023  y..            #
+0002f300: 2063 616c 6c6d 6f64 6520 3d20 2766 270d   callmode = 'f'.
+0002f310: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+0002f320: 756c 7473 203d 204e 6f6e 650d 0a20 2020  ults = None..   
+0002f330: 2020 2020 2020 2020 2069 6620 7566 756e           if ufun
+0002f340: 632e 6e69 6e20 3d3d 2032 3a0d 0a20 2020  c.nin == 2:..   
+0002f350: 2020 2020 2020 2020 2020 2020 2066 696e               fin
+0002f360: 616c 5f6e 756d 203d 202d 310d 0a20 2020  al_num = -1..   
+0002f370: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002f380: 6669 6e61 6c5f 6474 7970 6520 6973 206e  final_dtype is n
+0002f390: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+0002f3a0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002f3b0: 2066 696e 616c 5f64 7479 7065 203d 3d20   final_dtype == 
+0002f3c0: 6e70 2e62 6f6f 6c5f 3a0d 0a20 2020 2020  np.bool_:..     
+0002f3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f3e0: 2020 2066 696e 616c 5f6e 756d 203d 2030     final_num = 0
+0002f3f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002f400: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0002f410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f420: 2020 2020 2066 696e 616c 5f6e 756d 203d       final_num =
+0002f430: 2066 696e 616c 5f64 7479 7065 2e6e 756d   final_dtype.num
+0002f440: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0002f450: 2020 2020 2320 6265 6361 7573 6520 7363      # because sc
+0002f460: 616c 6172 7320 6361 6e20 6265 2070 6173  alars can be pas
+0002f470: 7365 6420 6173 206e 702e 696e 7436 3428  sed as np.int64(
+0002f480: 3836 3430 3030 290d 0a20 2020 2020 2020  864000)..       
+0002f490: 2020 2020 2020 2020 2069 6620 7479 7065           if type
+0002f4a0: 2861 7267 735b 305d 2920 696e 2067 4e75  (args[0]) in gNu
+0002f4b0: 6d70 7953 6361 6c61 7254 7970 653a 0d0a  mpyScalarType:..
+0002f4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f4d0: 2020 2020 2320 7072 696e 7428 2763 6f6e      # print('con
+0002f4e0: 7665 7274 696e 6720 6172 6731 272c 2061  verting arg1', a
+0002f4f0: 7267 735b 305d 290d 0a20 2020 2020 2020  rgs[0])..       
+0002f500: 2020 2020 2020 2020 2020 2020 2061 7267               arg
+0002f510: 735b 305d 203d 206e 702e 6173 6172 7261  s[0] = np.asarra
+0002f520: 7928 6172 6773 5b30 5d29 0d0a 0d0a 2020  y(args[0])....  
+0002f530: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002f540: 2074 7970 6528 6172 6773 5b31 5d29 2069   type(args[1]) i
+0002f550: 6e20 674e 756d 7079 5363 616c 6172 5479  n gNumpyScalarTy
+0002f560: 7065 3a0d 0a20 2020 2020 2020 2020 2020  pe:..           
+0002f570: 2020 2020 2020 2020 2023 2070 7269 6e74           # print
+0002f580: 2827 636f 6e76 6572 7469 6e67 2061 7267  ('converting arg
+0002f590: 3227 2c20 6172 6773 5b31 5d29 0d0a 2020  2', args[1])..  
+0002f5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f5b0: 2020 6172 6773 5b31 5d20 3d20 6e70 2e61    args[1] = np.a
+0002f5c0: 7361 7272 6179 2861 7267 735b 315d 290d  sarray(args[1]).
+0002f5d0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0002f5e0: 2020 2069 6620 4661 7374 4172 7261 792e     if FastArray.
+0002f5f0: 5665 7262 6f73 6520 3e20 323a 0d0a 2020  Verbose > 2:..  
+0002f600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f610: 2020 7072 696e 7428 0d0a 2020 2020 2020    print(..      
+0002f620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f630: 2020 222a 2a2a 2062 696e 6172 7920 7468    "*** binary th
+0002f640: 696e 6b20 7765 2063 616e 2063 616c 6c22  ink we can call"
+0002f650: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0002f660: 2020 2020 2020 2020 2020 2066 6173 745f             fast_
+0002f670: 6675 6e63 7469 6f6e 2c0d 0a20 2020 2020  function,..     
+0002f680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f690: 2020 2075 6675 6e63 2e6e 696e 2c0d 0a20     ufunc.nin,.. 
+0002f6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f6b0: 2020 2020 2020 2075 6675 6e63 2e6e 6f75         ufunc.nou
+0002f6c0: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
+0002f6d0: 2020 2020 2020 2020 2020 2020 2261 7267              "arg
+0002f6e0: 3122 2c0d 0a20 2020 2020 2020 2020 2020  1",..           
+0002f6f0: 2020 2020 2020 2020 2020 2020 2061 7267               arg
+0002f700: 735b 305d 2c0d 0a20 2020 2020 2020 2020  s[0],..         
+0002f710: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0002f720: 6172 6732 222c 0d0a 2020 2020 2020 2020  arg2",..        
+0002f730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f740: 6172 6773 5b31 5d2c 0d0a 2020 2020 2020  args[1],..      
+0002f750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f760: 2020 226f 7574 222c 0d0a 2020 2020 2020    "out",..      
+0002f770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f780: 2020 6f75 745f 6172 6773 2c0d 0a20 2020    out_args,..   
+0002f790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f7a0: 2020 2020 2022 6669 6e61 6c22 2c0d 0a20       "final",.. 
+0002f7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f7c0: 2020 2020 2020 2066 696e 616c 5f6e 756d         final_num
+0002f7d0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0002f7e0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+0002f7f0: 2020 2020 2020 2020 2020 6966 206c 656e            if len
+0002f800: 286f 7574 5f61 7267 7329 203d 3d20 313a  (out_args) == 1:
+0002f810: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002f820: 2020 2020 2020 7265 7375 6c74 7320 3d20        results = 
+0002f830: 5479 7065 5265 6769 7374 6572 2e4d 6174  TypeRegister.Mat
+0002f840: 684c 6564 6765 722e 5f42 4153 4943 4d41  hLedger._BASICMA
+0002f850: 5448 5f54 574f 5f49 4e50 5554 5328 0d0a  TH_TWO_INPUTS(..
+0002f860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f870: 2020 2020 2020 2020 2861 7267 735b 305d          (args[0]
+0002f880: 2c20 6172 6773 5b31 5d2c 206f 7574 5f61  , args[1], out_a
+0002f890: 7267 735b 305d 292c 2066 6173 745f 6675  rgs[0]), fast_fu
+0002f8a0: 6e63 7469 6f6e 2c20 6669 6e61 6c5f 6e75  nction, final_nu
+0002f8b0: 6d0d 0a20 2020 2020 2020 2020 2020 2020  m..             
+0002f8c0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+0002f8d0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+0002f8e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002f8f0: 2020 2020 2072 6573 756c 7473 203d 2054       results = T
+0002f900: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
+0002f910: 4c65 6467 6572 2e5f 4241 5349 434d 4154  Ledger._BASICMAT
+0002f920: 485f 5457 4f5f 494e 5055 5453 280d 0a20  H_TWO_INPUTS(.. 
+0002f930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f940: 2020 2020 2020 2028 6172 6773 5b30 5d2c         (args[0],
+0002f950: 2061 7267 735b 315d 292c 2066 6173 745f   args[1]), fast_
+0002f960: 6675 6e63 7469 6f6e 2c20 6669 6e61 6c5f  function, final_
+0002f970: 6e75 6d0d 0a20 2020 2020 2020 2020 2020  num..           
+0002f980: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
+0002f990: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+0002f9a0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0002f9b0: 2066 6f72 2063 6f6e 7665 7273 696f 6e20   for conversion 
+0002f9c0: 6675 6e63 7469 6f6e 730d 0a20 2020 2020  functions..     
+0002f9d0: 2020 2020 2020 2020 2020 2023 2064 7479             # dty
+0002f9e0: 7065 3d6b 7761 7267 732e 6765 7428 2764  pe=kwargs.get('d
+0002f9f0: 7479 7065 272c 4e6f 6e65 290d 0a20 2020  type',None)..   
+0002fa00: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002fa10: 4661 7374 4172 7261 792e 5665 7262 6f73  FastArray.Verbos
+0002fa20: 6520 3e20 323a 0d0a 2020 2020 2020 2020  e > 2:..        
+0002fa30: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+0002fa40: 7428 0d0a 2020 2020 2020 2020 2020 2020  t(..            
+0002fa50: 2020 2020 2020 2020 2020 2020 222a 2a2a              "***
+0002fa60: 2075 6e61 7279 2074 6869 6e6b 2077 6520   unary think we 
+0002fa70: 6361 6e20 6361 6c6c 222c 0d0a 2020 2020  can call",..    
+0002fa80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fa90: 2020 2020 6661 7374 5f66 756e 6374 696f      fast_functio
+0002faa0: 6e2c 0d0a 2020 2020 2020 2020 2020 2020  n,..            
+0002fab0: 2020 2020 2020 2020 2020 2020 7566 756e              ufun
+0002fac0: 632e 6e69 6e2c 0d0a 2020 2020 2020 2020  c.nin,..        
+0002fad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fae0: 7566 756e 632e 6e6f 7574 2c0d 0a20 2020  ufunc.nout,..   
+0002faf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fb00: 2020 2020 2022 6172 6731 222c 0d0a 2020       "arg1",..  
+0002fb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fb20: 2020 2020 2020 6172 6773 5b30 5d2c 0d0a        args[0],..
+0002fb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fb40: 2020 2020 2020 2020 226f 7574 222c 0d0a          "out",..
+0002fb50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fb60: 2020 2020 2020 2020 6f75 745f 6172 6773          out_args
+0002fb70: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0002fb80: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
+0002fb90: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+0002fba0: 656e 286f 7574 5f61 7267 7329 203d 3d20  en(out_args) == 
+0002fbb0: 313a 0d0a 2020 2020 2020 2020 2020 2020  1:..            
+0002fbc0: 2020 2020 2020 2020 7265 7375 6c74 7320          results 
+0002fbd0: 3d20 5479 7065 5265 6769 7374 6572 2e4d  = TypeRegister.M
+0002fbe0: 6174 684c 6564 6765 722e 5f42 4153 4943  athLedger._BASIC
+0002fbf0: 4d41 5448 5f4f 4e45 5f49 4e50 5554 2828  MATH_ONE_INPUT((
+0002fc00: 6172 6773 5b30 5d2c 206f 7574 5f61 7267  args[0], out_arg
+0002fc10: 735b 305d 292c 2066 6173 745f 6675 6e63  s[0]), fast_func
+0002fc20: 7469 6f6e 2c20 3029 0d0a 2020 2020 2020  tion, 0)..      
+0002fc30: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+0002fc40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002fc50: 2020 2020 2072 6573 756c 7473 203d 2054       results = T
+0002fc60: 7970 6552 6567 6973 7465 722e 4d61 7468  ypeRegister.Math
+0002fc70: 4c65 6467 6572 2e5f 4241 5349 434d 4154  Ledger._BASICMAT
+0002fc80: 485f 4f4e 455f 494e 5055 5428 2861 7267  H_ONE_INPUT((arg
+0002fc90: 735b 305d 292c 2066 6173 745f 6675 6e63  s[0]), fast_func
+0002fca0: 7469 6f6e 2c20 3029 0d0a 0d0a 2020 2020  tion, 0)....    
+0002fcb0: 2020 2020 2020 2020 6966 2072 6573 756c          if resul
+0002fcc0: 7473 2069 7320 6e6f 7420 4e6f 6e65 2061  ts is not None a
+0002fcd0: 6e64 206c 656e 286f 7574 5f61 7267 7329  nd len(out_args)
+0002fce0: 203d 3d20 313a 0d0a 2020 2020 2020 2020   == 1:..        
+0002fcf0: 2020 2020 2020 2020 2320 7768 656e 2074          # when t
+0002fd00: 6865 206f 7574 7075 7420 6172 6775 6d65  he output argume
+0002fd10: 6e74 2069 7320 666f 7263 6564 2062 7574  nt is forced but
+0002fd20: 2077 6520 6361 6c63 756c 6174 6520 6974   we calculate it
+0002fd30: 2069 6e74 6f20 616e 6f74 6865 7220 6172   into another ar
+0002fd40: 7261 7920 7765 206e 6565 6420 746f 2063  ray we need to c
+0002fd50: 6f70 7920 7468 6520 7265 7375 6c74 2069  opy the result i
+0002fd60: 6e74 6f20 7468 6520 6f75 7470 7574 0d0a  nto the output..
+0002fd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fd80: 6966 206e 6f74 2072 632e 436f 6d70 6172  if not rc.Compar
+0002fd90: 654e 756d 7079 4d65 6d41 6464 7265 7373  eNumpyMemAddress
+0002fda0: 286f 7574 5f61 7267 735b 305d 2c20 7265  (out_args[0], re
+0002fdb0: 7375 6c74 7329 3a0d 0a20 2020 2020 2020  sults):..       
+0002fdc0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002fdd0: 4661 7374 4172 7261 792e 5665 7262 6f73  FastArray.Verbos
+0002fde0: 6520 3e20 323a 0d0a 2020 2020 2020 2020  e > 2:..        
+0002fdf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fe00: 7072 696e 7428 0d0a 2020 2020 2020 2020  print(..        
+0002fe10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fe20: 2020 2020 222a 2a2a 2070 6572 666f 726d      "*** perform
+0002fe30: 696e 6720 616e 2065 7874 7261 2063 6f70  ing an extra cop
+0002fe40: 7920 746f 206d 6174 6368 206f 7574 7075  y to match outpu
+0002fe50: 7420 7265 7175 6573 7422 2c0d 0a20 2020  t request",..   
+0002fe60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fe70: 2020 2020 2020 2020 2069 6428 6f75 745f           id(out_
+0002fe80: 6172 6773 5b30 5d29 2c0d 0a20 2020 2020  args[0]),..     
+0002fe90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fea0: 2020 2020 2020 2069 6428 7265 7375 6c74         id(result
+0002feb0: 7329 2c0d 0a20 2020 2020 2020 2020 2020  s),..           
+0002fec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fed0: 206f 7574 5f61 7267 735b 305d 2c0d 0a20   out_args[0],.. 
+0002fee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fef0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+0002ff00: 7473 2c0d 0a20 2020 2020 2020 2020 2020  ts,..           
+0002ff10: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+0002ff20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ff30: 2020 2020 6f75 745f 6172 6773 5b30 5d5b      out_args[0][
+0002ff40: 2e2e 2e5d 203d 2072 6573 756c 7473 0d0a  ...] = results..
+0002ff50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ff60: 2020 2020 7265 7375 6c74 7320 3d20 6f75      results = ou
+0002ff70: 745f 6172 6773 5b30 5d0d 0a0d 0a20 2020  t_args[0]....   
+0002ff80: 2020 2020 2020 2020 2069 6620 7265 7375           if resu
+0002ff90: 6c74 7320 6973 204e 6f6e 653a 0d0a 2020  lts is None:..  
+0002ffa0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002ffb0: 7075 6e74 6564 0d0a 2020 2020 2020 2020  punted..        
+0002ffc0: 2020 2020 2020 2020 2320 6361 6c6c 6d6f          # callmo
+0002ffd0: 6465 3d27 7027 0d0a 2020 2020 2020 2020  de='p'..        
+0002ffe0: 2020 2020 2020 2020 6966 2046 6173 7441          if FastA
+0002fff0: 7272 6179 2e56 6572 626f 7365 203e 2031  rray.Verbose > 1
+00030000: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00030010: 2020 2020 2020 2070 7269 6e74 2822 2a2a         print("**
+00030020: 2a70 756e 7465 6420 7566 756e 633a 2022  *punted ufunc: "
+00030030: 2c20 7566 756e 632e 6e69 6e2c 2075 6675  , ufunc.nin, ufu
+00030040: 6e63 2e6e 6f75 742c 2075 6675 6e63 2c20  nc.nout, ufunc, 
+00030050: 6172 6773 2c20 6b77 6172 6773 290d 0a20  args, kwargs).. 
+00030060: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00030070: 6173 745f 6675 6e63 7469 6f6e 203d 204e  ast_function = N
+00030080: 6f6e 650d 0a20 2020 2020 2020 2020 2020  one..           
+00030090: 2020 2020 2023 2066 616c 6c20 746f 2022       # fall to "
+000300a0: 6966 2066 6173 745f 6675 6e63 7469 6f6e  if fast_function
+000300b0: 2069 7320 4e6f 6e65 2220 616e 6420 7275   is None" and ru
+000300c0: 6e20 7468 726f 7567 6820 6e75 6d70 792e  n through numpy.
+000300d0: 2e2e 0d0a 0d0a 2020 2020 2020 2020 2020  ......          
+000300e0: 2020 2320 7265 7370 6563 7420 6474 7970    # respect dtyp
+000300f0: 650d 0a20 2020 2020 2020 2020 2020 2065  e..            e
+00030100: 6c69 6620 6474 7970 6520 6973 206e 6f74  lif dtype is not
+00030110: 204e 6f6e 6520 616e 6420 6973 696e 7374   None and isinst
+00030120: 616e 6365 2872 6573 756c 7473 2c20 6e70  ance(results, np
+00030130: 2e6e 6461 7272 6179 293a 0d0a 2020 2020  .ndarray):..    
+00030140: 2020 2020 2020 2020 2020 2020 6966 2064              if d
+00030150: 7479 7065 2069 7320 6e6f 7420 7265 7375  type is not resu
+00030160: 6c74 732e 6474 7970 653a 0d0a 2020 2020  lts.dtype:..    
+00030170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030180: 6966 2046 6173 7441 7272 6179 2e56 6572  if FastArray.Ver
+00030190: 626f 7365 203e 2031 3a0d 0a20 2020 2020  bose > 1:..     
+000301a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000301b0: 2020 2070 7269 6e74 2822 2a2a 2a72 6573     print("***res
+000301c0: 756c 7420 6672 6f6d 2072 6564 7563 6522  ult from reduce"
+000301d0: 2c20 7265 7375 6c74 732c 2072 6573 756c  , results, resul
+000301e0: 7473 2e64 7479 7065 2c20 6474 7970 6529  ts.dtype, dtype)
+000301f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00030200: 2020 2020 2020 2320 636f 6e76 6572 740d        # convert.
+00030210: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00030220: 2020 2020 2072 6573 756c 7473 203d 2072       results = r
+00030230: 6573 756c 7473 2e61 7374 7970 6528 6474  esults.astype(dt
+00030240: 7970 6529 0d0a 0d0a 2020 2020 2020 2020  ype)....        
+00030250: 6966 2066 6173 745f 6675 6e63 7469 6f6e  if fast_function
+00030260: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
+00030270: 2020 2020 2020 2023 2043 616c 6c20 7468         # Call th
+00030280: 6520 6e75 6d70 7920 4150 4973 0d0a 2020  e numpy APIs..  
+00030290: 2020 2020 2020 2020 2020 2320 4368 6563            # Chec
+000302a0: 6b20 6966 2077 6520 6361 6e20 7573 6520  k if we can use 
+000302b0: 7468 6520 7265 6379 636c 6564 2061 7272  the recycled arr
+000302c0: 6179 7320 746f 2061 766f 6964 2061 6e20  ays to avoid an 
+000302d0: 616c 6c6f 6361 7469 6f6e 2066 6f72 2074  allocation for t
+000302e0: 6865 206f 7574 7075 7420 6172 7261 790d  he output array.
+000302f0: 0a0d 0a20 2020 2020 2020 2020 2020 2069  ...            i
+00030300: 6620 4661 7374 4172 7261 792e 5665 7262  f FastArray.Verb
+00030310: 6f73 6520 3e20 313a 0d0a 2020 2020 2020  ose > 1:..      
+00030320: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+00030330: 222a 2a70 756e 7465 6420 6f6e 206e 756d  "**punted on num
+00030340: 7079 2122 2c20 7566 756e 6329 0d0a 0d0a  py!", ufunc)....
+00030350: 2020 2020 2020 2020 2020 2020 2320 4e4f              # NO
+00030360: 5445 3a20 5765 2061 7265 2067 6f69 6e67  TE: We are going
+00030370: 2074 6f20 6c65 7420 6e75 6d70 7920 7072   to let numpy pr
+00030380: 6f63 6573 7320 6974 0d0a 2020 2020 2020  ocess it..      
+00030390: 2020 2020 2020 2320 5765 206d 7573 7420        # We must 
+000303a0: 6368 616e 6765 2061 6c6c 2046 6173 7441  change all FastA
+000303b0: 7272 6179 7320 746f 206e 6f72 6d61 6c20  rrays to normal 
+000303c0: 6e75 6d70 7920 6172 7261 7973 0d0a 2020  numpy arrays..  
+000303d0: 2020 2020 2020 2020 2020 6172 6773 203d            args =
+000303e0: 205b 5d0d 0a20 2020 2020 2020 2020 2020   []..           
+000303f0: 2066 6f72 2069 6e70 7574 2069 6e20 696e   for input in in
+00030400: 7075 7473 3a0d 0a20 2020 2020 2020 2020  puts:..         
+00030410: 2020 2020 2020 2023 2066 6c69 7020 6261         # flip ba
+00030420: 636b 2074 6f20 6e75 6d70 7920 746f 2061  ck to numpy to a
+00030430: 766f 6964 2065 7272 6f72 7320 7768 656e  void errors when
+00030440: 206e 756d 7079 2063 616c 6375 6c61 7465   numpy calculate
+00030450: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
+00030460: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00030470: 2869 6e70 7574 2c20 4661 7374 4172 7261  (input, FastArra
+00030480: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
+00030490: 2020 2020 2020 2020 2061 7267 732e 6170           args.ap
+000304a0: 7065 6e64 2869 6e70 7574 2e76 6965 7728  pend(input.view(
+000304b0: 6e70 2e6e 6461 7272 6179 2929 0d0a 2020  np.ndarray))..  
+000304c0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+000304d0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+000304e0: 2020 2020 2020 2020 2061 7267 732e 6170           args.ap
+000304f0: 7065 6e64 2869 6e70 7574 290d 0a0d 0a20  pend(input).... 
+00030500: 2020 2020 2020 2020 2020 2069 6620 6861             if ha
+00030510: 735f 6f75 7470 7574 733a 0d0a 2020 2020  s_outputs:..    
+00030520: 2020 2020 2020 2020 2020 2020 6f75 7470              outp
+00030530: 7574 7320 3d20 6b77 6172 6773 2e70 6f70  uts = kwargs.pop
+00030540: 2822 6f75 7422 2c20 4e6f 6e65 290d 0a20  ("out", None).. 
+00030550: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00030560: 6620 6f75 7470 7574 733a 0d0a 2020 2020  f outputs:..    
+00030570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030580: 6f75 745f 6172 6773 203d 205b 5d0d 0a20  out_args = [].. 
+00030590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000305a0: 2020 2066 6f72 206f 7574 7075 7420 696e     for output in
+000305b0: 206f 7574 7075 7473 3a0d 0a20 2020 2020   outputs:..     
+000305c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000305d0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+000305e0: 286f 7574 7075 742c 2046 6173 7441 7272  (output, FastArr
+000305f0: 6179 293a 0d0a 2020 2020 2020 2020 2020  ay):..          
+00030600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030610: 2020 6f75 745f 6172 6773 2e61 7070 656e    out_args.appen
+00030620: 6428 6f75 7470 7574 2e76 6965 7728 6e70  d(output.view(np
+00030630: 2e6e 6461 7272 6179 2929 0d0a 2020 2020  .ndarray))..    
+00030640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030650: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00030660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030670: 2020 2020 2020 206f 7574 5f61 7267 732e         out_args.
+00030680: 6170 7065 6e64 286f 7574 7075 7429 0d0a  append(output)..
+00030690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000306a0: 2020 2020 2320 7265 706c 6163 6520 6f75      # replace ou
+000306b0: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
+000306c0: 2020 2020 2020 206b 7761 7267 735b 226f         kwargs["o
+000306d0: 7574 225d 203d 2074 7570 6c65 286f 7574  ut"] = tuple(out
+000306e0: 5f61 7267 7329 0d0a 0d0a 2020 2020 2020  _args)....      
+000306f0: 2020 2020 2020 2320 4e4f 5445 3a20 4966        # NOTE: If
+00030700: 2074 6865 2073 7065 6369 6669 6564 2075   the specified u
+00030710: 6675 6e63 202b 2069 6e70 7574 7320 636f  func + inputs co
+00030720: 6d62 696e 6174 696f 6e20 6973 6e27 7420  mbination isn't 
+00030730: 7375 7070 6f72 7465 6420 6279 206e 756d  supported by num
+00030740: 7079 2065 6974 6865 722c 0d0a 2020 2020  py either,..    
+00030750: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00030760: 6173 206f 6620 6e75 6d70 7920 312e 3137  as of numpy 1.17
+00030770: 2e78 2074 6869 7320 6361 6c6c 2077 696c  .x this call wil
+00030780: 6c20 656e 6420 7570 2072 6169 7369 6e67  l end up raising
+00030790: 2061 2055 4675 6e63 5479 7065 4572 726f   a UFuncTypeErro
+000307a0: 7220 736f 2074 6865 2072 6573 740d 0a20  r so the rest.. 
+000307b0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+000307c0: 2020 206f 6620 7468 6520 4661 7374 4172     of the FastAr
+000307d0: 7261 792e 5f5f 6172 7261 795f 7566 756e  ray.__array_ufun
+000307e0: 635f 5f20 626f 6479 2028 6265 6c6f 7729  c__ body (below)
+000307f0: 2077 6f6e 2774 2065 6e64 2075 7020 6578   won't end up ex
+00030800: 6563 7574 696e 672e 0d0a 2020 2020 2020  ecuting...      
+00030810: 2020 2020 2020 7265 7375 6c74 7320 3d20        results = 
+00030820: 5479 7065 5265 6769 7374 6572 2e4d 6174  TypeRegister.Mat
+00030830: 684c 6564 6765 722e 5f41 5252 4159 5f55  hLedger._ARRAY_U
+00030840: 4655 4e43 2873 7570 6572 2846 6173 7441  FUNC(super(FastA
+00030850: 7272 6179 2c20 7365 6c66 292c 2075 6675  rray, self), ufu
+00030860: 6e63 2c20 6d65 7468 6f64 2c20 2a61 7267  nc, method, *arg
+00030870: 732c 202a 2a6b 7761 7267 7329 0d0a 0d0a  s, **kwargs)....
+00030880: 2020 2020 2020 2020 2320 4966 2072 6970          # If rip
+00030890: 7461 626c 6520 6861 7320 6e6f 7420 696d  table has not im
+000308a0: 706c 656d 656e 7465 6420 6120 6365 7274  plemented a cert
+000308b0: 6169 6e20 7566 756e 6320 286f 7220 646f  ain ufunc (or do
+000308c0: 6573 6e27 7420 7375 7070 6f72 7420 6974  esn't support it
+000308d0: 2066 6f72 2074 6865 2067 6976 656e 2061   for the given a
+000308e0: 7267 756d 656e 7473 292c 0d0a 2020 2020  rguments),..    
+000308f0: 2020 2020 2320 656d 6974 2061 2077 6172      # emit a war
+00030900: 6e69 6e67 2061 626f 7574 2069 7420 746f  ning about it to
+00030910: 206c 6574 2074 6865 2075 7365 7220 6b6e   let the user kn
+00030920: 6f77 2e0d 0a20 2020 2020 2020 2023 2057  ow...        # W
+00030930: 6865 6e20 6e75 6d70 7920 646f 6573 206e  hen numpy does n
+00030940: 6f74 2073 7570 706f 7274 2074 6865 2075  ot support the u
+00030950: 6675 6e63 2b69 6e70 7574 7320 6569 7468  func+inputs eith
+00030960: 6572 2c20 7765 2077 6f6e 2774 2072 6561  er, we won't rea
+00030970: 6368 2074 6869 7320 706f 696e 7420 2861  ch this point (a
+00030980: 7320 6f66 206e 756d 7079 2031 2e31 372e  s of numpy 1.17.
+00030990: 7829 2c0d 0a20 2020 2020 2020 2023 2073  x),..        # s
+000309a0: 696e 6365 206e 756d 7079 2077 696c 6c20  ince numpy will 
+000309b0: 7261 6973 6520 6120 5546 756e 6354 7970  raise a UFuncTyp
+000309c0: 6545 7272 6f72 2065 6172 6c69 6572 2028  eError earlier (
+000309d0: 6265 666f 7265 2074 6869 7320 706f 696e  before this poin
+000309e0: 7429 2072 6174 6865 7220 7468 616e 2061  t) rather than a
+000309f0: 6674 6572 2077 6520 7265 7475 726e 204e  fter we return N
+00030a00: 6f74 496d 706c 656d 656e 7465 642e 0d0a  otImplemented...
+00030a10: 2020 2020 2020 2020 6966 2072 6573 756c          if resul
+00030a20: 7473 2069 7320 4e6f 7449 6d70 6c65 6d65  ts is NotImpleme
+00030a30: 6e74 6564 3a0d 0a20 2020 2020 2020 2020  nted:..         
+00030a40: 2020 2077 6172 6e69 6e67 732e 7761 726e     warnings.warn
+00030a50: 2866 222a 2a2a 7566 756e 6320 7b75 6675  (f"***ufunc {ufu
+00030a60: 6e63 7d20 7b61 7267 737d 207b 6b77 6172  nc} {args} {kwar
+00030a70: 6773 7d20 6973 206e 6f74 2069 6d70 6c65  gs} is not imple
+00030a80: 6d65 6e74 6564 2229 0d0a 2020 2020 2020  mented")..      
+00030a90: 2020 2020 2020 7265 7475 726e 204e 6f74        return Not
+00030aa0: 496d 706c 656d 656e 7465 640d 0a0d 0a20  Implemented.... 
+00030ab0: 2020 2020 2020 2023 2055 6675 6e63 7320         # Ufuncs 
+00030ac0: 616c 736f 2068 6176 6520 6120 6669 6674  also have a fift
+00030ad0: 6820 6d65 7468 6f64 2074 6861 7420 616c  h method that al
+00030ae0: 6c6f 7773 2069 6e20 706c 6163 6520 6f70  lows in place op
+00030af0: 6572 6174 696f 6e73 2074 6f20 6265 2070  erations to be p
+00030b00: 6572 666f 726d 6564 2075 7369 6e67 2066  erformed using f
+00030b10: 616e 6379 2069 6e64 6578 696e 672e 0d0a  ancy indexing...
+00030b20: 2020 2020 2020 2020 2320 4e6f 2062 7566          # No buf
+00030b30: 6665 7269 6e67 2069 7320 7573 6564 206f  fering is used o
+00030b40: 6e20 7468 6520 6469 6d65 6e73 696f 6e73  n the dimensions
+00030b50: 2077 6865 7265 2066 616e 6379 2069 6e64   where fancy ind
+00030b60: 6578 696e 6720 6973 2075 7365 642c 2073  exing is used, s
+00030b70: 6f20 7468 6520 6661 6e63 7920 696e 6465  o the fancy inde
+00030b80: 7820 6361 6e20 6c69 7374 2061 6e20 6974  x can list an it
+00030b90: 656d 206d 6f72 6520 7468 616e 206f 6e63  em more than onc
+00030ba0: 650d 0a20 2020 2020 2020 2023 2020 2020  e..        #    
+00030bb0: 2061 6e64 2074 6865 206f 7065 7261 7469   and the operati
+00030bc0: 6f6e 2077 696c 6c20 6265 2070 6572 666f  on will be perfo
+00030bd0: 726d 6564 206f 6e20 7468 6520 7265 7375  rmed on the resu
+00030be0: 6c74 206f 6620 7468 6520 7072 6576 696f  lt of the previo
+00030bf0: 7573 206f 7065 7261 7469 6f6e 2066 6f72  us operation for
+00030c00: 2074 6861 7420 6974 656d 2e0d 0a20 2020   that item...   
+00030c10: 2020 2020 2023 2075 6675 6e63 2e72 6564       # ufunc.red
+00030c20: 7563 6528 615b 2c20 6178 6973 2c20 6474  uce(a[, axis, dt
+00030c30: 7970 652c 206f 7574 2c20 6b65 6570 6469  ype, out, keepdi
+00030c40: 6d73 5d29 0952 6564 7563 6573 2061 2773  ms]).Reduces a's
+00030c50: 2064 696d 656e 7369 6f6e 2062 7920 6f6e   dimension by on
+00030c60: 652c 2062 7920 6170 706c 7969 6e67 2075  e, by applying u
+00030c70: 6675 6e63 2061 6c6f 6e67 206f 6e65 2061  func along one a
+00030c80: 7869 732e 0d0a 2020 2020 2020 2020 2320  xis...        # 
+00030c90: 7566 756e 632e 6163 6375 6d75 6c61 7465  ufunc.accumulate
+00030ca0: 2861 7272 6179 5b2c 2061 7869 732c 2064  (array[, axis, d
+00030cb0: 7479 7065 2c20 6f75 745d 2909 4163 6375  type, out]).Accu
+00030cc0: 6d75 6c61 7465 2074 6865 2072 6573 756c  mulate the resul
+00030cd0: 7420 6f66 2061 7070 6c79 696e 6720 7468  t of applying th
+00030ce0: 6520 6f70 6572 6174 6f72 2074 6f20 616c  e operator to al
+00030cf0: 6c20 656c 656d 656e 7473 2e0d 0a20 2020  l elements...   
+00030d00: 2020 2020 2023 2075 6675 6e63 2e72 6564       # ufunc.red
+00030d10: 7563 6561 7428 612c 2069 6e64 6963 6573  uceat(a, indices
+00030d20: 5b2c 2061 7869 732c 2064 7479 7065 2c20  [, axis, dtype, 
+00030d30: 6f75 745d 2909 5065 7266 6f72 6d73 2061  out]).Performs a
+00030d40: 2028 6c6f 6361 6c29 2072 6564 7563 6520   (local) reduce 
+00030d50: 7769 7468 2073 7065 6369 6669 6564 2073  with specified s
+00030d60: 6c69 6365 7320 6f76 6572 2061 2073 696e  lices over a sin
+00030d70: 676c 6520 6178 6973 2e0d 0a20 2020 2020  gle axis...     
+00030d80: 2020 2023 2075 6675 6e63 2e6f 7574 6572     # ufunc.outer
+00030d90: 2841 2c20 4229 0941 7070 6c79 2074 6865  (A, B).Apply the
+00030da0: 2075 6675 6e63 206f 7020 746f 2061 6c6c   ufunc op to all
+00030db0: 2070 6169 7273 2028 612c 2062 2920 7769   pairs (a, b) wi
+00030dc0: 7468 2061 2069 6e20 4120 616e 6420 6220  th a in A and b 
+00030dd0: 696e 2042 2e0d 0a20 2020 2020 2020 2023  in B...        #
+00030de0: 2075 6675 6e63 2e61 7428 612c 2069 6e64   ufunc.at(a, ind
+00030df0: 6963 6573 5b2c 2062 5d29 0950 6572 666f  ices[, b]).Perfo
+00030e00: 726d 7320 756e 6275 6666 6572 6564 2069  rms unbuffered i
+00030e10: 6e20 706c 6163 6520 6f70 6572 6174 696f  n place operatio
+00030e20: 6e20 6f6e 206f 7065 7261 6e64 2027 6127  n on operand 'a'
+00030e30: 2066 6f72 2065 6c65 6d65 6e74 7320 7370   for elements sp
+00030e40: 6563 6966 6965 6420 6279 2027 696e 6469  ecified by 'indi
+00030e50: 6365 7327 2e0d 0a0d 0a20 2020 2020 2020  ces'.....       
+00030e60: 2069 6620 6d65 7468 6f64 203d 3d20 2261   if method == "a
+00030e70: 7422 3a0d 0a20 2020 2020 2020 2020 2020  t":..           
+00030e80: 2072 6574 7572 6e0d 0a0d 0a20 2020 2020   return....     
+00030e90: 2020 2069 6620 7566 756e 632e 6e6f 7574     if ufunc.nout
+00030ea0: 203d 3d20 313a 0d0a 2020 2020 2020 2020   == 1:..        
+00030eb0: 2020 2020 2320 6368 6563 6b20 6966 2077      # check if w
+00030ec0: 6520 7573 6564 206f 7572 206f 776e 206f  e used our own o
+00030ed0: 7574 7075 740d 0a0d 0a20 2020 2020 2020  utput....       
+00030ee0: 2020 2020 2023 2069 6620 6973 696e 7374       # if isinst
+00030ef0: 616e 6365 286f 7574 4172 7261 792c 206e  ance(outArray, n
+00030f00: 702e 6e64 6172 7261 7929 3a0d 0a20 2020  p.ndarray):..   
+00030f10: 2020 2020 2020 2020 2023 2020 2020 7265           #    re
+00030f20: 7475 726e 206f 7574 4172 7261 792e 7669  turn outArray.vi
+00030f30: 6577 2846 6173 7441 7272 6179 290d 0a0d  ew(FastArray)...
+00030f40: 0a20 2020 2020 2020 2020 2020 2023 2069  .            # i
+00030f50: 6620 2866 696e 616c 5f64 7479 7065 2021  f (final_dtype !
+00030f60: 3d20 4e6f 6e65 2061 6e64 2066 696e 616c  = None and final
+00030f70: 5f64 7479 7065 2021 3d20 7265 7375 6c74  _dtype != result
+00030f80: 732e 6474 7970 6529 3a0d 0a20 2020 2020  s.dtype):..     
+00030f90: 2020 2020 2020 2023 2020 2020 7072 696e         #    prin
+00030fa0: 7428 222a 2a2a 2a2a 2a20 6d69 7370 7265  t("****** mispre
+00030fb0: 6469 6374 6564 2066 696e 616c 222c 2066  dicted final", f
+00030fc0: 696e 616c 5f64 7479 7065 2c20 7265 7375  inal_dtype, resu
+00030fd0: 6c74 732e 6474 7970 652c 2075 6675 6e63  lts.dtype, ufunc
+00030fe0: 2c20 7363 616c 6172 7479 7065 732c 2061  , scalartypes, a
+00030ff0: 7267 732c 206f 7574 7075 7473 2c20 6b77  rgs, outputs, kw
+00031000: 6172 6773 293b 0d0a 2020 2020 2020 2020  args);..        
+00031010: 2020 2020 2320 7265 7375 6c74 7320 3d20      # results = 
+00031020: 2872 6573 756c 7473 2c29 0d0a 0d0a 2020  (results,)....  
+00031030: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+00031040: 2069 7369 6e73 7461 6e63 6528 7265 7375   isinstance(resu
+00031050: 6c74 732c 2046 6173 7441 7272 6179 2920  lts, FastArray) 
+00031060: 616e 6420 6973 696e 7374 616e 6365 2872  and isinstance(r
+00031070: 6573 756c 7473 2c20 6e70 2e6e 6461 7272  esults, np.ndarr
+00031080: 6179 293a 0d0a 2020 2020 2020 2020 2020  ay):..          
+00031090: 2020 2020 2020 7265 7475 726e 2072 6573        return res
+000310a0: 756c 7473 2e76 6965 7728 4661 7374 4172  ults.view(FastAr
+000310b0: 7261 7929 0d0a 0d0a 2020 2020 2020 2020  ray)....        
+000310c0: 2020 2020 2320 7468 696e 6b20 6869 7420      # think hit 
+000310d0: 6865 7265 2066 6f72 2073 756d 2077 6968  here for sum wih
+000310e0: 6368 2064 6f65 7320 6e6f 7420 7265 7475  ch does not retu
+000310f0: 726e 2061 6e20 6172 7261 792c 206a 7573  rn an array, jus
+00031100: 7420 6120 6e75 6d62 6572 0d0a 2020 2020  t a number..    
+00031110: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+00031120: 6573 756c 7473 0d0a 0d0a 2020 2020 2020  esults....      
+00031130: 2020 2320 6d6f 7265 2074 6861 6e20 6f6e    # more than on
+00031140: 6520 6974 656d 2c20 736f 2077 6520 6172  e item, so we ar
+00031150: 6520 6d61 6b69 6e67 2061 2074 7570 6c65  e making a tuple
+00031160: 0d0a 2020 2020 2020 2020 2320 6361 6e20  ..        # can 
+00031170: 7265 7375 6c74 2069 6e20 5f5f 6172 7261  result in __arra
+00031180: 795f 6669 6e61 6c69 7a65 5f5f 2062 6569  y_finalize__ bei
+00031190: 6e67 2063 616c 6c65 640d 0a20 2020 2020  ng called..     
+000311a0: 2020 2072 6573 756c 7473 203d 2074 7570     results = tup
+000311b0: 6c65 280d 0a20 2020 2020 2020 2020 2020  le(..           
+000311c0: 2028 6e70 2e61 7361 7272 6179 2872 6573   (np.asarray(res
+000311d0: 756c 7429 2e76 6965 7728 4661 7374 4172  ult).view(FastAr
+000311e0: 7261 7929 2069 6620 6f75 7470 7574 2069  ray) if output i
+000311f0: 7320 4e6f 6e65 2065 6c73 6520 6f75 7470  s None else outp
+00031200: 7574 290d 0a20 2020 2020 2020 2020 2020  ut)..           
+00031210: 2066 6f72 2072 6573 756c 742c 206f 7574   for result, out
+00031220: 7075 7420 696e 207a 6970 2872 6573 756c  put in zip(resul
+00031230: 7473 2c20 6f75 7470 7574 7329 0d0a 2020  ts, outputs)..  
+00031240: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
+00031250: 2020 2023 2063 6865 636b 2069 6620 7765     # check if we
+00031260: 2068 6176 6520 6120 7475 706c 6520 6f66   have a tuple of
+00031270: 206f 6e65 2069 7465 6d2c 2069 6620 736f   one item, if so
+00031280: 206a 7573 7420 7265 7475 726e 2074 6865   just return the
+00031290: 206f 6e65 2069 7465 6d0d 0a20 2020 2020   one item..     
+000312a0: 2020 2069 6620 6c65 6e28 7265 7375 6c74     if len(result
+000312b0: 7329 203d 3d20 313a 0d0a 2020 2020 2020  s) == 1:..      
+000312c0: 2020 2020 2020 7265 7375 6c74 7320 3d20        results = 
+000312d0: 7265 7375 6c74 735b 305d 0d0a 2020 2020  results[0]..    
+000312e0: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
+000312f0: 7473 0d0a 0d0a 2020 2020 4070 726f 7065  ts....    @prope
+00031300: 7274 790d 0a20 2020 2064 6566 206e 756d  rty..    def num
+00031310: 6261 7374 7269 6e67 2873 656c 6629 3a0d  bastring(self):.
+00031320: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00031330: 2020 2020 2020 636f 6e76 6572 7473 2062        converts b
+00031340: 7974 6520 7374 7269 6e67 2061 6e64 2075  yte string and u
+00031350: 6e69 636f 6465 2073 7472 696e 6773 2074  nicode strings t
+00031360: 6f20 6120 3264 696d 656e 7369 6f6e 616c  o a 2dimensional
+00031370: 2061 7272 6179 0d0a 2020 2020 2020 2020   array..        
+00031380: 736f 2074 6861 7420 6e75 6d62 6120 6361  so that numba ca
+00031390: 6e20 7072 6f63 6573 7320 6974 2063 6f72  n process it cor
+000313a0: 7265 6374 6c79 0d0a 0d0a 2020 2020 2020  rectly....      
+000313b0: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
+000313c0: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
+000313d0: 2020 2020 2020 3e3e 3e20 406e 756d 6261        >>> @numba
+000313e0: 2e6a 6974 286e 6f70 7974 686f 6e3d 5472  .jit(nopython=Tr
+000313f0: 7565 290d 0a20 2020 2020 2020 202e 2e2e  ue)..        ...
+00031400: 2064 6566 206e 756d 6261 5f73 7472 2874   def numba_str(t
+00031410: 7874 293a 0d0a 2020 2020 2020 2020 2e2e  xt):..        ..
+00031420: 2e20 2020 2020 783d 300d 0a20 2020 2020  .     x=0..     
+00031430: 2020 202e 2e2e 2020 2020 2066 6f72 2069     ...     for i
+00031440: 2069 6e20 7261 6e67 6528 7478 742e 7368   in range(txt.sh
+00031450: 6170 655b 305d 293a 0d0a 2020 2020 2020  ape[0]):..      
+00031460: 2020 2e2e 2e20 2020 2020 2020 2020 6966    ...         if
+00031470: 2028 7478 745b 692c 305d 3d3d 3131 3620   (txt[i,0]==116 
+00031480: 616e 6420 2023 2027 7427 0d0a 2020 2020  and  # 't'..    
+00031490: 2020 2020 2e2e 2e20 2020 2020 2020 2020      ...         
+000314a0: 2020 2020 7478 745b 692c 315d 3d3d 3130      txt[i,1]==10
+000314b0: 3120 616e 6420 2023 2027 6527 0d0a 2020  1 and  # 'e'..  
+000314c0: 2020 2020 2020 2e2e 2e20 2020 2020 2020        ...       
+000314d0: 2020 2020 2020 7478 745b 692c 325d 3d3d        txt[i,2]==
+000314e0: 3132 3020 616e 6420 2023 2027 7827 0d0a  120 and  # 'x'..
+000314f0: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
+00031500: 2020 2020 2020 2020 7478 745b 692c 335d          txt[i,3]
+00031510: 3d3d 3131 3629 3a20 2020 2023 2027 7427  ==116):    # 't'
+00031520: 0d0a 2020 2020 2020 2020 2e2e 2e20 2020  ..        ...   
+00031530: 2020 2020 2020 2020 2020 7820 2b3d 2031            x += 1
+00031540: 0d0a 2020 2020 2020 2020 2e2e 2e20 2020  ..        ...   
+00031550: 2020 7265 7475 726e 2078 0d0a 2020 2020    return x..    
+00031560: 2020 2020 3e3e 3e0d 0a20 2020 2020 2020      >>>..       
+00031570: 203e 3e3e 2078 3d46 6173 7441 7272 6179   >>> x=FastArray
+00031580: 285b 2773 6f6d 6527 2c27 7465 7874 272c  (['some','text',
+00031590: 2774 6869 7327 2c27 6973 275d 290d 0a20  'this','is']).. 
+000315a0: 2020 2020 2020 203e 3e3e 206e 756d 6261         >>> numba
+000315b0: 5f73 7472 2878 2e76 6965 7728 6e70 2e75  _str(x.view(np.u
+000315c0: 696e 7438 292e 7265 7368 6170 6528 286c  int8).reshape((l
+000315d0: 656e 2878 292c 2078 2e69 7465 6d73 697a  en(x), x.itemsiz
+000315e0: 6529 2929 0d0a 2020 2020 2020 2020 3e3e  e)))..        >>
+000315f0: 3e20 6e75 6d62 615f 7374 7228 782e 6e75  > numba_str(x.nu
+00031600: 6d62 6173 7472 696e 6729 0d0a 2020 2020  mbastring)..    
+00031610: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
+00031620: 2020 2069 6e74 7970 6520 3d20 7365 6c66     intype = self
+00031630: 2e64 7479 7065 2e5f 5f73 7472 5f5f 2829  .dtype.__str__()
+00031640: 0d0a 2020 2020 2020 2020 6966 2069 6e74  ..        if int
+00031650: 7970 655b 305d 203d 3d20 227c 2220 6f72  ype[0] == "|" or
+00031660: 2069 6e74 7970 655b 305d 203d 3d20 223c   intype[0] == "<
+00031670: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+00031680: 6966 2069 6e74 7970 655b 315d 203d 3d20  if intype[1] == 
+00031690: 2253 223a 0d0a 2020 2020 2020 2020 2020  "S":..          
+000316a0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+000316b0: 662e 7669 6577 286e 702e 7569 6e74 3829  f.view(np.uint8)
+000316c0: 2e72 6573 6861 7065 2828 6c65 6e28 7365  .reshape((len(se
+000316d0: 6c66 292c 2073 656c 662e 6974 656d 7369  lf), self.itemsi
+000316e0: 7a65 2929 0d0a 2020 2020 2020 2020 2020  ze))..          
+000316f0: 2020 6966 2069 6e74 7970 655b 315d 203d    if intype[1] =
+00031700: 3d20 2255 223a 0d0a 2020 2020 2020 2020  = "U":..        
+00031710: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00031720: 656c 662e 7669 6577 286e 702e 7569 6e74  elf.view(np.uint
+00031730: 3332 292e 7265 7368 6170 6528 286c 656e  32).reshape((len
+00031740: 2873 656c 6629 2c20 7365 6c66 2e69 7465  (self), self.ite
+00031750: 6d73 697a 6520 2f2f 2034 2929 0d0a 2020  msize // 4))..  
+00031760: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00031770: 660d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  f....    # -----
+00031780: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00031790: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000317a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000317b0: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
+000317c0: 6170 706c 795f 6e75 6d62 6128 7365 6c66  apply_numba(self
+000317d0: 2c20 2a61 7267 732c 206f 7479 7065 3d4e  , *args, otype=N
+000317e0: 6f6e 652c 206d 7966 756e 633d 226d 7966  one, myfunc="myf
+000317f0: 756e 6322 2c20 6e61 6d65 3d4e 6f6e 6529  unc", name=None)
+00031800: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+00031810: 2020 2020 2020 2020 5072 696e 7420 746f          Print to
+00031820: 2073 6372 6565 6e20 616e 2065 7861 6d70   screen an examp
+00031830: 6c65 206e 756d 6261 2073 6967 6e61 7475  le numba signatu
+00031840: 7265 2066 6f72 2074 6865 2061 7272 6179  re for the array
+00031850: 2e0d 0a0d 0a20 2020 2020 2020 2059 6f75  .....        You
+00031860: 2063 616e 2074 6865 6e20 636f 7079 2074   can then copy t
+00031870: 6869 7320 6578 616d 706c 6520 746f 2062  his example to b
+00031880: 7569 6c64 2079 6f75 7220 6f77 6e20 6e75  uild your own nu
+00031890: 6d62 6120 6675 6e63 7469 6f6e 2e0d 0a0d  mba function....
+000318a0: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
+000318b0: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
+000318c0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+000318d0: 202a 6172 6773 3a0d 0a20 2020 2020 2020   *args:..       
+000318e0: 2020 2020 2054 6573 7420 6172 6775 6d65       Test argume
+000318f0: 6e74 730d 0a0d 0a20 2020 2020 2020 206f  nts....        o
+00031900: 7479 7065 3a20 7374 722c 2064 6566 6175  type: str, defau
+00031910: 6c74 204e 6f6e 650d 0a20 2020 2020 2020  lt None..       
+00031920: 2020 2020 2041 2064 6966 6665 7265 6e74       A different
+00031930: 206f 7574 7075 7420 6461 7461 2074 7970   output data typ
+00031940: 650d 0a0d 0a20 2020 2020 2020 206d 7966  e....        myf
+00031950: 756e 633a 2073 7472 2c20 6465 6661 756c  unc: str, defaul
+00031960: 7420 276d 7966 756e 6327 0d0a 2020 2020  t 'myfunc'..    
+00031970: 2020 2020 2020 2020 4120 7374 7269 6e67          A string
+00031980: 2074 6f20 6361 6c6c 2074 6865 2066 756e   to call the fun
+00031990: 6374 696f 6e0d 0a0d 0a20 2020 2020 2020  ction....       
+000319a0: 206e 616d 653a 2073 7472 2c20 6465 6661   name: str, defa
+000319b0: 756c 7420 4e6f 6e65 0d0a 2020 2020 2020  ult None..      
+000319c0: 2020 2020 2020 4120 7374 7269 6e67 2074        A string t
+000319d0: 6f20 6e61 6d65 2074 6865 2061 7272 6179  o name the array
+000319e0: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
+000319f0: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
+00031a00: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00031a10: 3e3e 3e20 696d 706f 7274 206e 756d 6261  >>> import numba
+00031a20: 0d0a 2020 2020 2020 2020 3e3e 3e20 406e  ..        >>> @n
+00031a30: 756d 6261 2e67 7576 6563 746f 7269 7a65  umba.guvectorize
+00031a40: 285b 2776 6f69 6428 696e 7436 345b 3a5d  (['void(int64[:]
+00031a50: 2c20 696e 7436 345b 3a5d 2927 5d2c 2027  , int64[:])'], '
+00031a60: 286e 292d 3e28 6e29 2729 0d0a 2020 2020  (n)->(n)')..    
+00031a70: 2020 2020 2e2e 2e20 6465 6620 7371 7561      ... def squa
+00031a80: 7265 7628 782c 6f75 7429 3a0d 0a20 2020  rev(x,out):..   
+00031a90: 2020 2020 202e 2e2e 2020 2020 2066 6f72       ...     for
+00031aa0: 2069 2069 6e20 7261 6e67 6528 6c65 6e28   i in range(len(
+00031ab0: 7829 293a 0d0a 2020 2020 2020 2020 2e2e  x)):..        ..
+00031ac0: 2e20 2020 2020 2020 2020 6f75 745b 695d  .         out[i]
+00031ad0: 3d78 5b69 5d2a 2a32 0d0a 2020 2020 2020  =x[i]**2..      
+00031ae0: 2020 2e2e 2e0d 0a20 2020 2020 2020 203e    .....        >
+00031af0: 3e3e 2061 3d61 7261 6e67 6528 315f 3030  >> a=arange(1_00
+00031b00: 305f 3030 3029 2e61 7374 7970 6528 6e70  0_000).astype(np
+00031b10: 2e69 6e74 3634 290d 0a20 2020 2020 2020  .int64)..       
+00031b20: 203e 3e3e 2073 7175 6172 6576 2861 290d   >>> squarev(a).
+00031b30: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+00031b40: 6179 285b 2020 2020 2020 2020 2020 2030  ay([           0
+00031b50: 2c20 2020 2020 2020 2020 2020 2031 2c20  ,            1, 
+00031b60: 2020 2020 2020 2020 2020 2034 2c20 2e2e             4, ..
+00031b70: 2e2c 2039 3939 3939 3430 3030 3030 392c  ., 999994000009,
+00031b80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00031b90: 2020 2020 2039 3939 3939 3630 3030 3030       99999600000
+00031ba0: 342c 2039 3939 3939 3830 3030 3030 315d  4, 999998000001]
+00031bb0: 2c20 6474 7970 653d 696e 7436 3429 0d0a  , dtype=int64)..
+00031bc0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+00031bd0: 2020 2020 2069 6620 6e61 6d65 2069 7320       if name is 
+00031be0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+00031bf0: 2020 2023 2074 7279 2066 6972 7374 2074     # try first t
+00031c00: 6f20 6765 7420 7468 6520 6e61 6d65 0d0a  o get the name..
+00031c10: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
+00031c20: 203d 2073 656c 662e 6765 745f 6e61 6d65   = self.get_name
+00031c30: 2829 0d0a 0d0a 2020 2020 2020 2020 2020  ()....          
+00031c40: 2020 6966 206e 616d 6520 6973 204e 6f6e    if name is Non
+00031c50: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00031c60: 2020 2020 6e61 6d65 203d 2022 6122 0d0a      name = "a"..
+00031c70: 0d0a 2020 2020 2020 2020 696e 7479 7065  ..        intype
+00031c80: 203d 2073 656c 662e 6474 7970 652e 5f5f   = self.dtype.__
+00031c90: 7374 725f 5f28 290d 0a0d 0a20 2020 2020  str__()....     
+00031ca0: 2020 2069 6620 6f74 7970 6520 6973 204e     if otype is N
+00031cb0: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00031cc0: 2020 6f75 7474 7970 6520 3d20 7365 6c66    outtype = self
+00031cd0: 2e64 7479 7065 2e5f 5f73 7472 5f5f 2829  .dtype.__str__()
+00031ce0: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
+00031cf0: 0a20 2020 2020 2020 2020 2020 206f 7574  .            out
+00031d00: 7479 7065 203d 206e 702e 6474 7970 6528  type = np.dtype(
+00031d10: 6f74 7970 6529 2e5f 5f73 7472 5f5f 2829  otype).__str__()
+00031d20: 0d0a 0d0a 2020 2020 2020 2020 2320 544f  ....        # TO
+00031d30: 444f 3a20 7768 6174 2069 6620 756e 6963  DO: what if unic
+00031d40: 6f64 6520 6f72 2073 7472 696e 673f 2020  ode or string?  
+00031d50: 2e66 726f 6d62 7566 6665 722f 2e76 6965  .frombuffer/.vie
+00031d60: 7728 6e70 2e75 696e 7438 290d 0a0d 0a20  w(np.uint8).... 
+00031d70: 2020 2020 2020 2070 7265 616d 626c 6520         preamble 
+00031d80: 3d20 2269 6d70 6f72 7420 6e75 6d62 615c  = "import numba\
+00031d90: 6e40 6e75 6d62 612e 6775 7665 6374 6f72  n@numba.guvector
+00031da0: 697a 6528 5b5c 6e22 0d0a 0d0a 2020 2020  ize([\n"....    
+00031db0: 2020 2020 6d69 6464 6c65 203d 2066 2227      middle = f"'
+00031dc0: 766f 6964 287b 696e 7479 7065 7d5b 3a5d  void({intype}[:]
+00031dd0: 2c20 7b6f 7574 7479 7065 7d5b 3a5d 2927  , {outtype}[:])'
+00031de0: 2c20 2020 2020 2020 2320 3c2d 2d20 6361  ,       # <-- ca
+00031df0: 6e20 7374 6163 6b20 6d75 6c74 6970 6c65  n stack multiple
+00031e00: 2064 6966 6665 7265 6e74 2064 7479 7065   different dtype
+00031e10: 7320 2078 2e76 6965 7728 6e70 2e75 696e  s  x.view(np.uin
+00031e20: 7438 292e 7265 7368 6170 6528 2d31 2c20  t8).reshape(-1, 
+00031e30: 782e 6974 656d 7369 7a65 295c 6e22 0d0a  x.itemsize)\n"..
+00031e40: 0d0a 2020 2020 2020 2020 706f 7374 616d  ..        postam
+00031e50: 626c 6520 3d20 2220 2020 205d 2c20 2728  ble = "    ], '(
+00031e60: 6e29 2d3e 286e 2927 2c20 7461 7267 6574  n)->(n)', target
+00031e70: 3d27 6370 7527 295c 6e22 0d0a 2020 2020  ='cpu')\n"..    
+00031e80: 2020 2020 636f 6465 203d 2066 2264 6566      code = f"def
+00031e90: 207b 6d79 6675 6e63 7d28 6461 7461 5f69   {myfunc}(data_i
+00031ea0: 6e2c 2064 6174 615f 6f75 7429 3a5c 6e20  n, data_out):\n 
+00031eb0: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
+00031ec0: 6528 6c65 6e28 6461 7461 5f69 6e29 293a  e(len(data_in)):
+00031ed0: 5c6e 2020 2020 2020 2020 6461 7461 5f6f  \n        data_o
+00031ee0: 7574 5b69 5d3d 6461 7461 5f69 6e5b 695d  ut[i]=data_in[i]
+00031ef0: 2020 2023 3c2d 2d20 7075 7420 796f 7572     #<-- put your
+00031f00: 2063 6f64 6520 6865 7265 5c6e 220d 0a20   code here\n".. 
+00031f10: 2020 2020 2020 2065 7865 6320 3d20 7072         exec = pr
+00031f20: 6561 6d62 6c65 202b 206d 6964 646c 6520  eamble + middle 
+00031f30: 2b20 706f 7374 616d 626c 6520 2b20 636f  + postamble + co
+00031f40: 6465 0d0a 0d0a 2020 2020 2020 2020 7072  de....        pr
+00031f50: 696e 7428 2243 6f70 7920 7468 6520 636f  int("Copy the co
+00031f60: 6465 2073 6e69 7070 6574 2062 656c 6f77  de snippet below
+00031f70: 2061 6e64 2072 656e 616d 6520 6d79 6675   and rename myfu
+00031f80: 6e63 2229 0d0a 2020 2020 2020 2020 7072  nc")..        pr
+00031f90: 696e 7428 222d 2d2d 2d2d 2d2d 2d2d 2d2d  int("-----------
+00031fa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00031fb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00031fc0: 2d2d 2229 0d0a 2020 2020 2020 2020 7072  --")..        pr
+00031fd0: 696e 7428 6578 6563 290d 0a20 2020 2020  int(exec)..     
+00031fe0: 2020 2070 7269 6e74 2822 2d2d 2d2d 2d2d     print("------
+00031ff0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00032000: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00032010: 2d2d 2d2d 2d2d 2d22 290d 0a20 2020 2020  -------")..     
+00032020: 2020 2069 6620 696e 7479 7065 5b30 5d20     if intype[0] 
+00032030: 3d3d 2022 7c22 206f 7220 696e 7479 7065  == "|" or intype
+00032040: 5b30 5d20 3d3d 2022 3c22 3a0d 0a20 2020  [0] == "<":..   
+00032050: 2020 2020 2020 2020 2069 6620 696e 7479           if inty
+00032060: 7065 5b31 5d20 3d3d 2022 5322 3a0d 0a20  pe[1] == "S":.. 
+00032070: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00032080: 7269 6e74 280d 0a20 2020 2020 2020 2020  rint(..         
+00032090: 2020 2020 2020 2020 2020 2066 2254 6865             f"The
+000320a0: 6e20 6361 6c6c 207b 6d79 6675 6e63 7d28  n call {myfunc}(
+000320b0: 7b6e 616d 657d 2e6e 756d 6261 7374 7269  {name}.numbastri
+000320c0: 6e67 2c65 6d70 7479 5f6c 696b 6528 7b6e  ng,empty_like({n
+000320d0: 616d 657d 292e 6e75 6d62 6173 7472 696e  ame}).numbastrin
+000320e0: 6729 2077 6865 7265 207b 6e61 6d65 7d20  g) where {name} 
+000320f0: 6973 2074 6865 2069 6e70 7574 2061 7272  is the input arr
+00032100: 6179 220d 0a20 2020 2020 2020 2020 2020  ay"..           
+00032110: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00032120: 2020 2020 656c 6966 2069 6e74 7970 655b      elif intype[
+00032130: 315d 203d 3d20 2255 223a 0d0a 2020 2020  1] == "U":..    
+00032140: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00032150: 7428 0d0a 2020 2020 2020 2020 2020 2020  t(..            
+00032160: 2020 2020 2020 2020 6622 5468 656e 2063          f"Then c
+00032170: 616c 6c20 7b6d 7966 756e 637d 287b 6e61  all {myfunc}({na
+00032180: 6d65 7d2e 6e75 6d62 6173 7472 696e 672c  me}.numbastring,
+00032190: 656d 7074 795f 6c69 6b65 287b 6e61 6d65  empty_like({name
+000321a0: 7d29 2e6e 756d 6261 7374 7269 6e67 2920  }).numbastring) 
+000321b0: 7768 6572 6520 7b6e 616d 657d 2069 7320  where {name} is 
+000321c0: 7468 6520 696e 7075 7420 6172 7261 7922  the input array"
+000321d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000321e0: 2020 290d 0a20 2020 2020 2020 2065 6c73    )..        els
+000321f0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00032200: 7072 696e 7428 6622 5468 656e 2063 616c  print(f"Then cal
+00032210: 6c20 7b6d 7966 756e 637d 287b 6e61 6d65  l {myfunc}({name
+00032220: 7d2c 656d 7074 795f 6c69 6b65 287b 6e61  },empty_like({na
+00032230: 6d65 7d29 2920 7768 6572 6520 7b6e 616d  me})) where {nam
+00032240: 657d 2069 7320 7468 6520 696e 7075 7420  e} is the input 
+00032250: 6172 7261 7922 290d 0a20 2020 2020 2020  array")..       
+00032260: 2023 2072 6574 7572 6e20 6578 6563 0d0a   # return exec..
+00032270: 0d0a 2020 2020 6465 6620 6170 706c 7928  ..    def apply(
+00032280: 7365 6c66 2c20 7079 6675 6e63 2c20 2a61  self, pyfunc, *a
+00032290: 7267 732c 206f 7479 7065 733d 4e6f 6e65  rgs, otypes=None
+000322a0: 2c20 646f 633d 4e6f 6e65 2c20 6578 636c  , doc=None, excl
+000322b0: 7564 6564 3d4e 6f6e 652c 2063 6163 6865  uded=None, cache
+000322c0: 3d46 616c 7365 2c20 7369 676e 6174 7572  =False, signatur
+000322d0: 653d 4e6f 6e65 293a 0d0a 2020 2020 2020  e=None):..      
+000322e0: 2020 2222 220d 0a20 2020 2020 2020 2047    """..        G
+000322f0: 656e 6572 616c 697a 6564 2066 756e 6374  eneralized funct
+00032300: 696f 6e20 636c 6173 732e 2020 7365 653a  ion class.  see:
+00032310: 206e 702e 7665 6374 6f72 697a 650d 0a0d   np.vectorize...
+00032320: 0a20 2020 2020 2020 2043 7265 6174 6573  .        Creates
+00032330: 2061 6e64 2074 6865 6e20 6170 706c 6965   and then applie
+00032340: 7320 6120 7665 6374 6f72 697a 6564 2066  s a vectorized f
+00032350: 756e 6374 696f 6e20 7768 6963 6820 7461  unction which ta
+00032360: 6b65 7320 6120 6e65 7374 6564 2073 6571  kes a nested seq
+00032370: 7565 6e63 6520 6f66 206f 626a 6563 7473  uence of objects
+00032380: 206f 720d 0a20 2020 2020 2020 206e 756d   or..        num
+00032390: 7079 2061 7272 6179 7320 6173 2069 6e70  py arrays as inp
+000323a0: 7574 7320 616e 6420 7265 7475 726e 7320  uts and returns 
+000323b0: 616e 2073 696e 676c 6520 6f72 2074 7570  an single or tup
+000323c0: 6c65 206f 6620 6e75 6d70 7920 6172 7261  le of numpy arra
+000323d0: 7920 6173 0d0a 2020 2020 2020 2020 6f75  y as..        ou
+000323e0: 7470 7574 2e20 5468 6520 7665 6374 6f72  tput. The vector
+000323f0: 697a 6564 2066 756e 6374 696f 6e20 6576  ized function ev
+00032400: 616c 7561 7465 7320 6070 7966 756e 6360  aluates `pyfunc`
+00032410: 206f 7665 7220 7375 6363 6573 7369 7665   over successive
+00032420: 2074 7570 6c65 730d 0a20 2020 2020 2020   tuples..       
+00032430: 206f 6620 7468 6520 696e 7075 7420 6172   of the input ar
+00032440: 7261 7973 206c 696b 6520 7468 6520 7079  rays like the py
+00032450: 7468 6f6e 206d 6170 2066 756e 6374 696f  thon map functio
+00032460: 6e2c 2065 7863 6570 7420 6974 2075 7365  n, except it use
+00032470: 7320 7468 650d 0a20 2020 2020 2020 2062  s the..        b
+00032480: 726f 6164 6361 7374 696e 6720 7275 6c65  roadcasting rule
+00032490: 7320 6f66 206e 756d 7079 2e0d 0a0d 0a20  s of numpy..... 
+000324a0: 2020 2020 2020 2054 6865 2064 6174 6120         The data 
+000324b0: 7479 7065 206f 6620 7468 6520 6f75 7470  type of the outp
+000324c0: 7574 206f 6620 6076 6563 746f 7269 7a65  ut of `vectorize
+000324d0: 6460 2069 7320 6465 7465 726d 696e 6564  d` is determined
+000324e0: 2062 7920 6361 6c6c 696e 670d 0a20 2020   by calling..   
+000324f0: 2020 2020 2074 6865 2066 756e 6374 696f       the functio
+00032500: 6e20 7769 7468 2074 6865 2066 6972 7374  n with the first
+00032510: 2065 6c65 6d65 6e74 206f 6620 7468 6520   element of the 
+00032520: 696e 7075 742e 2020 5468 6973 2063 616e  input.  This can
+00032530: 2062 6520 6176 6f69 6465 640d 0a20 2020   be avoided..   
+00032540: 2020 2020 2062 7920 7370 6563 6966 7969       by specifyi
+00032550: 6e67 2074 6865 2060 6f74 7970 6573 6020  ng the `otypes` 
+00032560: 6172 6775 6d65 6e74 2e0d 0a0d 0a20 2020  argument.....   
+00032570: 2020 2020 2050 6172 616d 6574 6572 730d       Parameters.
+00032580: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00032590: 2d2d 2d0d 0a20 2020 2020 2020 2070 7966  ---..        pyf
+000325a0: 756e 6320 3a20 6361 6c6c 6162 6c65 0d0a  unc : callable..
+000325b0: 2020 2020 2020 2020 2020 2020 4120 7079              A py
+000325c0: 7468 6f6e 2066 756e 6374 696f 6e20 6f72  thon function or
+000325d0: 206d 6574 686f 642e 0d0a 2020 2020 2020   method...      
+000325e0: 2020 6f74 7970 6573 203a 2073 7472 206f    otypes : str o
+000325f0: 7220 6c69 7374 206f 6620 6474 7970 6573  r list of dtypes
+00032600: 2c20 6f70 7469 6f6e 616c 0d0a 2020 2020  , optional..    
+00032610: 2020 2020 2020 2020 5468 6520 6f75 7470          The outp
+00032620: 7574 2064 6174 6120 7479 7065 2e20 4974  ut data type. It
+00032630: 206d 7573 7420 6265 2073 7065 6369 6669   must be specifi
+00032640: 6564 2061 7320 6569 7468 6572 2061 2073  ed as either a s
+00032650: 7472 696e 6720 6f66 0d0a 2020 2020 2020  tring of..      
+00032660: 2020 2020 2020 7479 7065 636f 6465 2063        typecode c
+00032670: 6861 7261 6374 6572 7320 6f72 2061 206c  haracters or a l
+00032680: 6973 7420 6f66 2064 6174 6120 7479 7065  ist of data type
+00032690: 2073 7065 6369 6669 6572 732e 2054 6865   specifiers. The
+000326a0: 7265 2073 686f 756c 640d 0a20 2020 2020  re should..     
+000326b0: 2020 2020 2020 2062 6520 6f6e 6520 6461         be one da
+000326c0: 7461 2074 7970 6520 7370 6563 6966 6965  ta type specifie
+000326d0: 7220 666f 7220 6561 6368 206f 7574 7075  r for each outpu
+000326e0: 742e 0d0a 2020 2020 2020 2020 646f 6320  t...        doc 
+000326f0: 3a20 7374 722c 206f 7074 696f 6e61 6c0d  : str, optional.
+00032700: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
+00032710: 2064 6f63 7374 7269 6e67 2066 6f72 2074   docstring for t
+00032720: 6865 2066 756e 6374 696f 6e2e 2049 6620  he function. If 
+00032730: 604e 6f6e 6560 2c20 7468 6520 646f 6373  `None`, the docs
+00032740: 7472 696e 6720 7769 6c6c 2062 6520 7468  tring will be th
+00032750: 650d 0a20 2020 2020 2020 2020 2020 2060  e..            `
+00032760: 6070 7966 756e 632e 5f5f 646f 635f 5f60  `pyfunc.__doc__`
+00032770: 602e 0d0a 2020 2020 2020 2020 6578 636c  `...        excl
+00032780: 7564 6564 203a 2073 6574 2c20 6f70 7469  uded : set, opti
+00032790: 6f6e 616c 0d0a 2020 2020 2020 2020 2020  onal..          
+000327a0: 2020 5365 7420 6f66 2073 7472 696e 6773    Set of strings
+000327b0: 206f 7220 696e 7465 6765 7273 2072 6570   or integers rep
+000327c0: 7265 7365 6e74 696e 6720 7468 6520 706f  resenting the po
+000327d0: 7369 7469 6f6e 616c 206f 7220 6b65 7977  sitional or keyw
+000327e0: 6f72 640d 0a20 2020 2020 2020 2020 2020  ord..           
+000327f0: 2061 7267 756d 656e 7473 2066 6f72 2077   arguments for w
+00032800: 6869 6368 2074 6865 2066 756e 6374 696f  hich the functio
+00032810: 6e20 7769 6c6c 206e 6f74 2062 6520 7665  n will not be ve
+00032820: 6374 6f72 697a 6564 2e20 2054 6865 7365  ctorized.  These
+00032830: 2077 696c 6c20 6265 0d0a 2020 2020 2020   will be..      
+00032840: 2020 2020 2020 7061 7373 6564 2064 6972        passed dir
+00032850: 6563 746c 7920 746f 2060 7079 6675 6e63  ectly to `pyfunc
+00032860: 6020 756e 6d6f 6469 6669 6564 2e0d 0a0d  ` unmodified....
+00032870: 0a20 2020 2020 2020 2020 2020 202e 2e20  .            .. 
+00032880: 7665 7273 696f 6e61 6464 6564 3a3a 2031  versionadded:: 1
+00032890: 2e37 2e30 0d0a 0d0a 2020 2020 2020 2020  .7.0....        
+000328a0: 6361 6368 6520 3a20 626f 6f6c 2c20 6f70  cache : bool, op
+000328b0: 7469 6f6e 616c 0d0a 2020 2020 2020 2020  tional..        
+000328c0: 2020 2049 6620 6054 7275 6560 2c20 7468     If `True`, th
+000328d0: 656e 2063 6163 6865 2074 6865 2066 6972  en cache the fir
+000328e0: 7374 2066 756e 6374 696f 6e20 6361 6c6c  st function call
+000328f0: 2074 6861 7420 6465 7465 726d 696e 6573   that determines
+00032900: 2074 6865 206e 756d 6265 720d 0a20 2020   the number..   
+00032910: 2020 2020 2020 2020 6f66 206f 7574 7075          of outpu
+00032920: 7473 2069 6620 606f 7479 7065 7360 2069  ts if `otypes` i
+00032930: 7320 6e6f 7420 7072 6f76 6964 6564 2e0d  s not provided..
+00032940: 0a0d 0a20 2020 2020 2020 2020 2020 202e  ...            .
+00032950: 2e20 7665 7273 696f 6e61 6464 6564 3a3a  . versionadded::
+00032960: 2031 2e37 2e30 0d0a 0d0a 2020 2020 2020   1.7.0....      
+00032970: 2020 7369 676e 6174 7572 6520 3a20 7374    signature : st
+00032980: 7269 6e67 2c20 6f70 7469 6f6e 616c 0d0a  ring, optional..
+00032990: 2020 2020 2020 2020 2020 2020 4765 6e65              Gene
+000329a0: 7261 6c69 7a65 6420 756e 6976 6572 7361  ralized universa
+000329b0: 6c20 6675 6e63 7469 6f6e 2073 6967 6e61  l function signa
+000329c0: 7475 7265 2c20 652e 672e 2c20 6060 286d  ture, e.g., ``(m
+000329d0: 2c6e 292c 286e 292d 3e28 6d29 6060 2066  ,n),(n)->(m)`` f
+000329e0: 6f72 0d0a 2020 2020 2020 2020 2020 2020  or..            
+000329f0: 7665 6374 6f72 697a 6564 206d 6174 7269  vectorized matri
+00032a00: 782d 7665 6374 6f72 206d 756c 7469 706c  x-vector multipl
+00032a10: 6963 6174 696f 6e2e 2049 6620 7072 6f76  ication. If prov
+00032a20: 6964 6564 2c20 6060 7079 6675 6e63 6060  ided, ``pyfunc``
+00032a30: 2077 696c 6c0d 0a20 2020 2020 2020 2020   will..         
+00032a40: 2020 2062 6520 6361 6c6c 6564 2077 6974     be called wit
+00032a50: 6820 2861 6e64 2065 7870 6563 7465 6420  h (and expected 
+00032a60: 746f 2072 6574 7572 6e29 2061 7272 6179  to return) array
+00032a70: 7320 7769 7468 2073 6861 7065 7320 6769  s with shapes gi
+00032a80: 7665 6e20 6279 2074 6865 0d0a 2020 2020  ven by the..    
+00032a90: 2020 2020 2020 2020 7369 7a65 206f 6620          size of 
+00032aa0: 636f 7272 6573 706f 6e64 696e 6720 636f  corresponding co
+00032ab0: 7265 2064 696d 656e 7369 6f6e 732e 2042  re dimensions. B
+00032ac0: 7920 6465 6661 756c 742c 2060 6070 7966  y default, ``pyf
+00032ad0: 756e 6360 6020 6973 0d0a 2020 2020 2020  unc`` is..      
+00032ae0: 2020 2020 2020 6173 7375 6d65 6420 746f        assumed to
+00032af0: 2074 616b 6520 7363 616c 6172 7320 6173   take scalars as
+00032b00: 2069 6e70 7574 2061 6e64 206f 7574 7075   input and outpu
+00032b10: 742e 0d0a 0d0a 2020 2020 2020 2020 2020  t.....          
+00032b20: 2020 2e2e 2076 6572 7369 6f6e 6164 6465    .. versionadde
+00032b30: 643a 3a20 312e 3132 2e30 0d0a 0d0a 2020  d:: 1.12.0....  
+00032b40: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
+00032b50: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
+00032b60: 2020 2020 2020 2020 7665 6374 6f72 697a          vectoriz
+00032b70: 6564 203a 2063 616c 6c61 626c 650d 0a20  ed : callable.. 
+00032b80: 2020 2020 2020 2020 2020 2056 6563 746f             Vecto
+00032b90: 7269 7a65 6420 6675 6e63 7469 6f6e 2e0d  rized function..
+00032ba0: 0a0d 0a20 2020 2020 2020 2053 6565 2041  ...        See A
+00032bb0: 6c73 6f0d 0a20 2020 2020 2020 202d 2d2d  lso..        ---
+00032bc0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2046  -----..        F
+00032bd0: 6173 7441 7272 6179 2e61 7070 6c79 5f6e  astArray.apply_n
+00032be0: 756d 6261 0d0a 2020 2020 2020 2020 4661  umba..        Fa
+00032bf0: 7374 4172 7261 792e 6170 706c 795f 7061  stArray.apply_pa
+00032c00: 6e64 6173 0d0a 0d0a 2020 2020 2020 2020  ndas....        
+00032c10: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
+00032c20: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+00032c30: 2020 2020 3e3e 3e20 6465 6620 6d79 6675      >>> def myfu
+00032c40: 6e63 2861 2c20 6229 3a0d 0a20 2020 2020  nc(a, b):..     
+00032c50: 2020 202e 2e2e 2020 2020 2022 5265 7475     ...     "Retu
+00032c60: 726e 2061 2d62 2069 6620 613e 622c 206f  rn a-b if a>b, o
+00032c70: 7468 6572 7769 7365 2072 6574 7572 6e20  therwise return 
+00032c80: 612b 6222 0d0a 2020 2020 2020 2020 2e2e  a+b"..        ..
+00032c90: 2e20 2020 2020 6966 2061 203e 2062 3a0d  .     if a > b:.
+00032ca0: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
+00032cb0: 2020 2020 2072 6574 7572 6e20 6120 2d20       return a - 
+00032cc0: 620d 0a20 2020 2020 2020 202e 2e2e 2020  b..        ...  
+00032cd0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+00032ce0: 2020 2e2e 2e20 2020 2020 2020 2020 7265    ...         re
+00032cf0: 7475 726e 2061 202b 2062 0d0a 2020 2020  turn a + b..    
+00032d00: 2020 2020 3e3e 3e0d 0a20 2020 2020 2020      >>>..       
+00032d10: 203e 3e3e 2061 3d61 7261 6e67 6528 3130   >>> a=arange(10
+00032d20: 290d 0a20 2020 2020 2020 203e 3e3e 2062  )..        >>> b
+00032d30: 3d61 7261 6e67 6528 3130 292b 310d 0a20  =arange(10)+1.. 
+00032d40: 2020 2020 2020 203e 3e3e 2061 2e61 7070         >>> a.app
+00032d50: 6c79 286d 7966 756e 632c 6229 0d0a 2020  ly(myfunc,b)..  
+00032d60: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+00032d70: 5b20 312c 2020 332c 2020 352c 2020 372c  [ 1,  3,  5,  7,
+00032d80: 2020 392c 2031 312c 2031 332c 2031 352c    9, 11, 13, 15,
+00032d90: 2031 372c 2031 395d 290d 0a0d 0a20 2020   17, 19])....   
+00032da0: 2020 2020 2045 7861 6d70 6c65 2077 6974       Example wit
+00032db0: 6820 6f6e 6520 696e 7075 7420 6172 7261  h one input arra
+00032dc0: 790d 0a0d 0a20 2020 2020 2020 203e 3e3e  y....        >>>
+00032dd0: 2064 6566 2073 7175 6172 6528 7829 3a0d   def square(x):.
+00032de0: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
+00032df0: 2072 6574 7572 6e20 782a 2a32 0d0a 2020   return x**2..  
+00032e00: 2020 2020 2020 3e3e 3e0d 0a20 2020 2020        >>>..     
+00032e10: 2020 203e 3e3e 2061 3d61 7261 6e67 6528     >>> a=arange(
+00032e20: 3130 290d 0a20 2020 2020 2020 203e 3e3e  10)..        >>>
+00032e30: 2061 2e61 7070 6c79 2873 7175 6172 6529   a.apply(square)
+00032e40: 0d0a 2020 2020 2020 2020 4661 7374 4172  ..        FastAr
+00032e50: 7261 7928 5b20 302c 2020 312c 2020 342c  ray([ 0,  1,  4,
+00032e60: 2020 392c 2031 362c 2032 352c 2033 362c    9, 16, 25, 36,
+00032e70: 2034 392c 2036 342c 2038 315d 290d 0a0d   49, 64, 81])...
+00032e80: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
+00032e90: 2077 6974 6820 6c61 6d62 6461 0d0a 0d0a   with lambda....
+00032ea0: 2020 2020 2020 2020 3e3e 3e20 613d 6172          >>> a=ar
+00032eb0: 616e 6765 2831 3029 0d0a 2020 2020 2020  ange(10)..      
+00032ec0: 2020 3e3e 3e20 612e 6170 706c 7928 6c61    >>> a.apply(la
+00032ed0: 6d62 6461 2078 3a20 782a 2a32 290d 0a20  mbda x: x**2).. 
+00032ee0: 2020 2020 2020 2046 6173 7441 7272 6179         FastArray
+00032ef0: 285b 2030 2c20 2031 2c20 2034 2c20 2039  ([ 0,  1,  4,  9
+00032f00: 2c20 3136 2c20 3235 2c20 3336 2c20 3439  , 16, 25, 36, 49
+00032f10: 2c20 3634 2c20 3831 5d29 0d0a 0d0a 2020  , 64, 81])....  
+00032f20: 2020 2020 2020 4578 616d 706c 6520 7769        Example wi
+00032f30: 7468 206e 756d 6261 0d0a 0d0a 2020 2020  th numba....    
+00032f40: 2020 2020 3e3e 3e20 6672 6f6d 206e 756d      >>> from num
+00032f50: 6261 2069 6d70 6f72 7420 6a69 740d 0a20  ba import jit.. 
+00032f60: 2020 2020 2020 203e 3e3e 2040 6a69 740d         >>> @jit.
+00032f70: 0a20 2020 2020 2020 202e 2e2e 2064 6566  .        ... def
+00032f80: 2073 7175 6172 6569 7428 7829 3a0d 0a20   squareit(x):.. 
+00032f90: 2020 2020 2020 202e 2e2e 2020 2020 2072         ...     r
+00032fa0: 6574 7572 6e20 782a 2a32 0d0a 2020 2020  eturn x**2..    
+00032fb0: 2020 2020 3e3e 3e20 612e 6170 706c 7928      >>> a.apply(
+00032fc0: 7371 7561 7265 6974 290d 0a20 2020 2020  squareit)..     
+00032fd0: 2020 2046 6173 7441 7272 6179 285b 2030     FastArray([ 0
+00032fe0: 2c20 2031 2c20 2034 2c20 2039 2c20 3136  ,  1,  4,  9, 16
+00032ff0: 2c20 3235 2c20 3336 2c20 3439 2c20 3634  , 25, 36, 49, 64
+00033000: 2c20 3831 5d29 0d0a 0d0a 2020 2020 2020  , 81])....      
+00033010: 2020 4578 616d 706c 6573 2074 6f20 7573    Examples to us
+00033020: 6520 6578 6973 7469 6e67 2062 7569 6c74  e existing built
+00033030: 696e 206f 6374 2066 756e 6374 696f 6e20  in oct function 
+00033040: 6275 7420 6368 616e 6765 2074 6865 206f  but change the o
+00033050: 7574 7075 7420 6672 6f6d 2073 7472 696e  utput from strin
+00033060: 672c 2074 6f20 756e 6963 6f64 652c 2074  g, to unicode, t
+00033070: 6f20 6f62 6a65 6374 0d0a 0d0a 2020 2020  o object....    
+00033080: 2020 2020 3e3e 3e20 613d 6172 616e 6765      >>> a=arange
+00033090: 2831 3029 0d0a 2020 2020 2020 2020 3e3e  (10)..        >>
+000330a0: 3e20 612e 6170 706c 7928 6f63 742c 206f  > a.apply(oct, o
+000330b0: 7479 7065 733d 5b27 5327 5d29 0d0a 2020  types=['S'])..  
+000330c0: 2020 2020 2020 4661 7374 4172 7261 7928        FastArray(
+000330d0: 5b62 2730 6f30 272c 2062 2730 6f31 272c  [b'0o0', b'0o1',
+000330e0: 2062 2730 6f32 272c 2062 2730 6f33 272c   b'0o2', b'0o3',
+000330f0: 2062 2730 6f34 272c 2062 2730 6f35 272c   b'0o4', b'0o5',
+00033100: 2062 2730 6f36 272c 2062 2730 6f37 272c   b'0o6', b'0o7',
+00033110: 2062 2730 6f31 3027 2c20 6227 306f 3131   b'0o10', b'0o11
+00033120: 275d 2c20 6474 7970 653d 277c 5334 2729  '], dtype='|S4')
+00033130: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
+00033140: 613d 6172 616e 6765 2831 3029 0d0a 2020  a=arange(10)..  
+00033150: 2020 2020 2020 3e3e 3e20 612e 6170 706c        >>> a.appl
+00033160: 7928 6f63 742c 206f 7479 7065 733d 5b27  y(oct, otypes=['
+00033170: 5527 5d29 0d0a 2020 2020 2020 2020 4661  U'])..        Fa
+00033180: 7374 4172 7261 7928 5b27 306f 3027 2c20  stArray(['0o0', 
+00033190: 2730 6f31 272c 2027 306f 3227 2c20 2730  '0o1', '0o2', '0
+000331a0: 6f33 272c 2027 306f 3427 2c20 2730 6f35  o3', '0o4', '0o5
+000331b0: 272c 2027 306f 3627 2c20 2730 6f37 272c  ', '0o6', '0o7',
+000331c0: 2027 306f 3130 272c 2027 306f 3131 275d   '0o10', '0o11']
+000331d0: 2c20 6474 7970 653d 273c 5534 2729 0d0a  , dtype='<U4')..
+000331e0: 0d0a 2020 2020 2020 2020 3e3e 3e20 613d  ..        >>> a=
+000331f0: 6172 616e 6765 2831 3029 0d0a 2020 2020  arange(10)..    
+00033200: 2020 2020 3e3e 3e20 612e 6170 706c 7928      >>> a.apply(
+00033210: 6f63 742c 206f 7479 7065 733d 5b27 4f27  oct, otypes=['O'
+00033220: 5d29 0d0a 2020 2020 2020 2020 4661 7374  ])..        Fast
+00033230: 4172 7261 7928 5b27 306f 3027 2c20 2730  Array(['0o0', '0
+00033240: 6f31 272c 2027 306f 3227 2c20 2730 6f33  o1', '0o2', '0o3
+00033250: 272c 2027 306f 3427 2c20 2730 6f35 272c  ', '0o4', '0o5',
+00033260: 2027 306f 3627 2c20 2730 6f37 272c 2027   '0o6', '0o7', '
+00033270: 306f 3130 272c 2027 306f 3131 275d 2c20  0o10', '0o11'], 
+00033280: 6474 7970 653d 6f62 6a65 6374 290d 0a0d  dtype=object)...
+00033290: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
+000332a0: 2020 2020 2020 2020 7666 756e 6320 3d20          vfunc = 
+000332b0: 6e70 2e76 6563 746f 7269 7a65 2870 7966  np.vectorize(pyf
+000332c0: 756e 632c 206f 7479 7065 733d 6f74 7970  unc, otypes=otyp
+000332d0: 6573 2c20 646f 633d 646f 632c 2065 7863  es, doc=doc, exc
+000332e0: 6c75 6465 643d 6578 636c 7564 6564 2c20  luded=excluded, 
+000332f0: 6361 6368 653d 6361 6368 652c 2073 6967  cache=cache, sig
+00033300: 6e61 7475 7265 3d73 6967 6e61 7475 7265  nature=signature
+00033310: 290d 0a20 2020 2020 2020 2072 6573 756c  )..        resul
+00033320: 7420 3d20 7666 756e 6328 7365 6c66 2c20  t = vfunc(self, 
+00033330: 2a61 7267 7329 0d0a 2020 2020 2020 2020  *args)..        
+00033340: 7265 7475 726e 2072 6573 756c 740d 0a0d  return result...
+00033350: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+00033360: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00033370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00033380: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00033390: 2d2d 0d0a 2020 2020 6465 6620 6170 706c  --..    def appl
+000333a0: 795f 7061 6e64 6173 2873 656c 662c 2066  y_pandas(self, f
+000333b0: 756e 632c 2063 6f6e 7665 7274 5f64 7479  unc, convert_dty
+000333c0: 7065 3d54 7275 652c 2061 7267 733d 2829  pe=True, args=()
+000333d0: 2c20 2a2a 6b77 6473 293a 0d0a 2020 2020  , **kwds):..    
+000333e0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+000333f0: 2049 6e76 6f6b 6520 6675 6e63 7469 6f6e   Invoke function
+00033400: 206f 6e20 7661 6c75 6573 206f 6620 4661   on values of Fa
+00033410: 7374 4172 7261 792e 2043 616e 2062 6520  stArray. Can be 
+00033420: 7566 756e 6320 2861 204e 756d 5079 2066  ufunc (a NumPy f
+00033430: 756e 6374 696f 6e0d 0a20 2020 2020 2020  unction..       
+00033440: 2074 6861 7420 6170 706c 6965 7320 746f   that applies to
+00033450: 2074 6865 2065 6e74 6972 6520 4661 7374   the entire Fast
+00033460: 4172 7261 7929 206f 7220 6120 5079 7468  Array) or a Pyth
+00033470: 6f6e 2066 756e 6374 696f 6e20 7468 6174  on function that
+00033480: 206f 6e6c 7920 776f 726b 730d 0a20 2020   only works..   
+00033490: 2020 2020 206f 6e20 7369 6e67 6c65 2076       on single v
+000334a0: 616c 7565 730d 0a0d 0a20 2020 2020 2020  alues....       
+000334b0: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
+000334c0: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
+000334d0: 0a20 2020 2020 2020 2066 756e 6320 3a20  .        func : 
+000334e0: 6675 6e63 7469 6f6e 0d0a 2020 2020 2020  function..      
+000334f0: 2020 636f 6e76 6572 745f 6474 7970 6520    convert_dtype 
+00033500: 3a20 626f 6f6c 6561 6e2c 2064 6566 6175  : boolean, defau
+00033510: 6c74 2054 7275 650d 0a20 2020 2020 2020  lt True..       
+00033520: 2020 2020 2054 7279 2074 6f20 6669 6e64       Try to find
+00033530: 2062 6574 7465 7220 6474 7970 6520 666f   better dtype fo
+00033540: 7220 656c 656d 656e 7477 6973 6520 6675  r elementwise fu
+00033550: 6e63 7469 6f6e 2072 6573 756c 7473 2e20  nction results. 
+00033560: 4966 0d0a 2020 2020 2020 2020 2020 2020  If..            
+00033570: 4661 6c73 652c 206c 6561 7665 2061 7320  False, leave as 
+00033580: 6474 7970 653d 6f62 6a65 6374 0d0a 2020  dtype=object..  
+00033590: 2020 2020 2020 6172 6773 203a 2074 7570        args : tup
+000335a0: 6c65 0d0a 2020 2020 2020 2020 2020 2020  le..            
+000335b0: 506f 7369 7469 6f6e 616c 2061 7267 756d  Positional argum
+000335c0: 656e 7473 2074 6f20 7061 7373 2074 6f20  ents to pass to 
+000335d0: 6675 6e63 7469 6f6e 2069 6e20 6164 6469  function in addi
+000335e0: 7469 6f6e 2074 6f20 7468 6520 7661 6c75  tion to the valu
+000335f0: 650d 0a20 2020 2020 2020 2041 6464 6974  e..        Addit
+00033600: 696f 6e61 6c20 6b65 7977 6f72 6420 6172  ional keyword ar
+00033610: 6775 6d65 6e74 7320 7769 6c6c 2062 6520  guments will be 
+00033620: 7061 7373 6564 2061 7320 6b65 7977 6f72  passed as keywor
+00033630: 6473 2074 6f20 7468 6520 6675 6e63 7469  ds to the functi
+00033640: 6f6e 0d0a 0d0a 2020 2020 2020 2020 5265  on....        Re
+00033650: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
+00033660: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00033670: 7920 3a20 4661 7374 4172 7261 7920 6f72  y : FastArray or
+00033680: 2044 6174 6173 6574 2069 6620 6675 6e63   Dataset if func
+00033690: 2072 6574 7572 6e73 2061 2046 6173 7441   returns a FastA
+000336a0: 7272 6179 0d0a 0d0a 2020 2020 2020 2020  rray....        
+000336b0: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
+000336c0: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+000336d0: 2020 2020 4661 7374 4172 7261 792e 6d61      FastArray.ma
+000336e0: 703a 2046 6f72 2065 6c65 6d65 6e74 2d77  p: For element-w
+000336f0: 6973 6520 6f70 6572 6174 696f 6e73 0d0a  ise operations..
+00033700: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+00033710: 792e 6167 673a 206f 6e6c 7920 7065 7266  y.agg: only perf
+00033720: 6f72 6d20 6167 6772 6567 6174 696e 6720  orm aggregating 
+00033730: 7479 7065 206f 7065 7261 7469 6f6e 730d  type operations.
+00033740: 0a20 2020 2020 2020 2046 6173 7441 7272  .        FastArr
+00033750: 6179 2e74 7261 6e73 666f 726d 3a20 6f6e  ay.transform: on
+00033760: 6c79 2070 6572 666f 726d 2074 7261 6e73  ly perform trans
+00033770: 666f 726d 696e 6720 7479 7065 206f 7065  forming type ope
+00033780: 7261 7469 6f6e 730d 0a0d 0a20 2020 2020  rations....     
+00033790: 2020 2045 7861 6d70 6c65 730d 0a20 2020     Examples..   
+000337a0: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+000337b0: 2020 2020 2020 2043 7265 6174 6520 6120         Create a 
+000337c0: 4661 7374 4172 7261 7920 7769 7468 2074  FastArray with t
+000337d0: 7970 6963 616c 2073 756d 6d65 7220 7465  ypical summer te
+000337e0: 6d70 6572 6174 7572 6573 2066 6f72 2065  mperatures for e
+000337f0: 6163 6820 6369 7479 2e0d 0a0d 0a20 2020  ach city.....   
+00033800: 2020 2020 203e 3e3e 2066 6120 3d20 7274       >>> fa = rt
+00033810: 2e46 6173 7441 7272 6179 285b 3230 2c20  .FastArray([20, 
+00033820: 3231 2c20 3132 5d2c 2069 6e64 6578 3d5b  21, 12], index=[
+00033830: 274c 6f6e 646f 6e27 2c20 274e 6577 2059  'London', 'New Y
+00033840: 6f72 6b27 2c27 4865 6c73 696e 6b69 275d  ork','Helsinki']
+00033850: 290d 0a20 2020 2020 2020 203e 3e3e 2066  )..        >>> f
+00033860: 610d 0a20 2020 2020 2020 204c 6f6e 646f  a..        Londo
+00033870: 6e20 2020 2020 2032 300d 0a20 2020 2020  n      20..     
+00033880: 2020 204e 6577 2059 6f72 6b20 2020 2032     New York    2
+00033890: 310d 0a20 2020 2020 2020 2048 656c 7369  1..        Helsi
+000338a0: 6e6b 6920 2020 2031 320d 0a20 2020 2020  nki    12..     
+000338b0: 2020 2064 7479 7065 3a20 696e 7436 340d     dtype: int64.
+000338c0: 0a0d 0a20 2020 2020 2020 2053 7175 6172  ...        Squar
+000338d0: 6520 7468 6520 7661 6c75 6573 2062 7920  e the values by 
+000338e0: 6465 6669 6e69 6e67 2061 2066 756e 6374  defining a funct
+000338f0: 696f 6e20 616e 6420 7061 7373 696e 6720  ion and passing 
+00033900: 6974 2061 7320 616e 0d0a 2020 2020 2020  it as an..      
+00033910: 2020 6172 6775 6d65 6e74 2074 6f20 6060    argument to ``
+00033920: 6170 706c 7928 2960 602e 0d0a 0d0a 2020  apply()``.....  
+00033930: 2020 2020 2020 3e3e 3e20 6465 6620 7371        >>> def sq
+00033940: 7561 7265 2878 293a 0d0a 2020 2020 2020  uare(x):..      
+00033950: 2020 2e2e 2e20 2020 2020 7265 7475 726e    ...     return
+00033960: 2078 2a2a 320d 0a20 2020 2020 2020 203e   x**2..        >
+00033970: 3e3e 2066 612e 6170 706c 7928 7371 7561  >> fa.apply(squa
+00033980: 7265 290d 0a20 2020 2020 2020 204c 6f6e  re)..        Lon
+00033990: 646f 6e20 2020 2020 2034 3030 0d0a 2020  don      400..  
+000339a0: 2020 2020 2020 4e65 7720 596f 726b 2020        New York  
+000339b0: 2020 3434 310d 0a20 2020 2020 2020 2048    441..        H
+000339c0: 656c 7369 6e6b 6920 2020 2031 3434 0d0a  elsinki    144..
+000339d0: 2020 2020 2020 2020 6474 7970 653a 2069          dtype: i
+000339e0: 6e74 3634 0d0a 0d0a 2020 2020 2020 2020  nt64....        
+000339f0: 5371 7561 7265 2074 6865 2076 616c 7565  Square the value
+00033a00: 7320 6279 2070 6173 7369 6e67 2061 6e20  s by passing an 
+00033a10: 616e 6f6e 796d 6f75 7320 6675 6e63 7469  anonymous functi
+00033a20: 6f6e 2061 7320 616e 0d0a 2020 2020 2020  on as an..      
+00033a30: 2020 6172 6775 6d65 6e74 2074 6f20 6060    argument to ``
+00033a40: 6170 706c 7928 2960 602e 0d0a 0d0a 2020  apply()``.....  
+00033a50: 2020 2020 2020 3e3e 3e20 6661 2e61 7070        >>> fa.app
+00033a60: 6c79 286c 616d 6264 6120 783a 2078 2a2a  ly(lambda x: x**
+00033a70: 3229 0d0a 2020 2020 2020 2020 4c6f 6e64  2)..        Lond
+00033a80: 6f6e 2020 2020 2020 3430 300d 0a20 2020  on      400..   
+00033a90: 2020 2020 204e 6577 2059 6f72 6b20 2020       New York   
+00033aa0: 2034 3431 0d0a 2020 2020 2020 2020 4865   441..        He
+00033ab0: 6c73 696e 6b69 2020 2020 3134 340d 0a20  lsinki    144.. 
+00033ac0: 2020 2020 2020 2064 7479 7065 3a20 696e         dtype: in
+00033ad0: 7436 340d 0a0d 0a20 2020 2020 2020 2044  t64....        D
+00033ae0: 6566 696e 6520 6120 6375 7374 6f6d 2066  efine a custom f
+00033af0: 756e 6374 696f 6e20 7468 6174 206e 6565  unction that nee
+00033b00: 6473 2061 6464 6974 696f 6e61 6c20 706f  ds additional po
+00033b10: 7369 7469 6f6e 616c 0d0a 2020 2020 2020  sitional..      
+00033b20: 2020 6172 6775 6d65 6e74 7320 616e 6420    arguments and 
+00033b30: 7061 7373 2074 6865 7365 2061 6464 6974  pass these addit
+00033b40: 696f 6e61 6c20 6172 6775 6d65 6e74 7320  ional arguments 
+00033b50: 7573 696e 6720 7468 650d 0a20 2020 2020  using the..     
+00033b60: 2020 2060 6061 7267 7360 6020 6b65 7977     ``args`` keyw
+00033b70: 6f72 642e 0d0a 0d0a 2020 2020 2020 2020  ord.....        
+00033b80: 3e3e 3e20 6465 6620 7375 6274 7261 6374  >>> def subtract
+00033b90: 5f63 7573 746f 6d5f 7661 6c75 6528 782c  _custom_value(x,
+00033ba0: 2063 7573 746f 6d5f 7661 6c75 6529 3a0d   custom_value):.
+00033bb0: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
+00033bc0: 2072 6574 7572 6e20 782d 6375 7374 6f6d   return x-custom
+00033bd0: 5f76 616c 7565 0d0a 2020 2020 2020 2020  _value..        
+00033be0: 3e3e 3e20 6661 2e61 7070 6c79 2873 7562  >>> fa.apply(sub
+00033bf0: 7472 6163 745f 6375 7374 6f6d 5f76 616c  tract_custom_val
+00033c00: 7565 2c20 6172 6773 3d28 352c 2929 0d0a  ue, args=(5,))..
+00033c10: 2020 2020 2020 2020 4c6f 6e64 6f6e 2020          London  
+00033c20: 2020 2020 3135 0d0a 2020 2020 2020 2020      15..        
+00033c30: 4e65 7720 596f 726b 2020 2020 3136 0d0a  New York    16..
+00033c40: 2020 2020 2020 2020 4865 6c73 696e 6b69          Helsinki
+00033c50: 2020 2020 2037 0d0a 2020 2020 2020 2020       7..        
+00033c60: 6474 7970 653a 2069 6e74 3634 0d0a 0d0a  dtype: int64....
+00033c70: 2020 2020 2020 2020 4465 6669 6e65 2061          Define a
+00033c80: 2063 7573 746f 6d20 6675 6e63 7469 6f6e   custom function
+00033c90: 2074 6861 7420 7461 6b65 7320 6b65 7977   that takes keyw
+00033ca0: 6f72 6420 6172 6775 6d65 6e74 730d 0a20  ord arguments.. 
+00033cb0: 2020 2020 2020 2061 6e64 2070 6173 7320         and pass 
+00033cc0: 7468 6573 6520 6172 6775 6d65 6e74 7320  these arguments 
+00033cd0: 746f 2060 6061 7070 6c79 6060 2e0d 0a0d  to ``apply``....
+00033ce0: 0a20 2020 2020 2020 203e 3e3e 2064 6566  .        >>> def
+00033cf0: 2061 6464 5f63 7573 746f 6d5f 7661 6c75   add_custom_valu
+00033d00: 6573 2878 2c20 2a2a 6b77 6172 6773 293a  es(x, **kwargs):
+00033d10: 0d0a 2020 2020 2020 2020 2e2e 2e20 2020  ..        ...   
+00033d20: 2020 666f 7220 6d6f 6e74 6820 696e 206b    for month in k
+00033d30: 7761 7267 733a 0d0a 2020 2020 2020 2020  wargs:..        
+00033d40: 2e2e 2e20 2020 2020 2020 2020 782b 3d6b  ...         x+=k
+00033d50: 7761 7267 735b 6d6f 6e74 685d 0d0a 2020  wargs[month]..  
+00033d60: 2020 2020 2020 2e2e 2e20 2020 2020 7265        ...     re
+00033d70: 7475 726e 2078 0d0a 2020 2020 2020 2020  turn x..        
+00033d80: 3e3e 3e20 6661 2e61 7070 6c79 2861 6464  >>> fa.apply(add
+00033d90: 5f63 7573 746f 6d5f 7661 6c75 6573 2c20  _custom_values, 
+00033da0: 6a75 6e65 3d33 302c 206a 756c 793d 3230  june=30, july=20
+00033db0: 2c20 6175 6775 7374 3d32 3529 0d0a 2020  , august=25)..  
+00033dc0: 2020 2020 2020 4c6f 6e64 6f6e 2020 2020        London    
+00033dd0: 2020 3935 0d0a 2020 2020 2020 2020 4e65    95..        Ne
+00033de0: 7720 596f 726b 2020 2020 3936 0d0a 2020  w York    96..  
+00033df0: 2020 2020 2020 4865 6c73 696e 6b69 2020        Helsinki  
+00033e00: 2020 3837 0d0a 2020 2020 2020 2020 6474    87..        dt
+00033e10: 7970 653a 2069 6e74 3634 0d0a 0d0a 2020  ype: int64....  
+00033e20: 2020 2020 2020 5573 6520 6120 6675 6e63        Use a func
+00033e30: 7469 6f6e 2066 726f 6d20 7468 6520 4e75  tion from the Nu
+00033e40: 6d70 7920 6c69 6272 6172 792e 0d0a 0d0a  mpy library.....
+00033e50: 2020 2020 2020 2020 3e3e 3e20 6661 2e61          >>> fa.a
+00033e60: 7070 6c79 286e 702e 6c6f 6729 0d0a 2020  pply(np.log)..  
+00033e70: 2020 2020 2020 4c6f 6e64 6f6e 2020 2020        London    
+00033e80: 2020 322e 3939 3537 3332 0d0a 2020 2020    2.995732..    
+00033e90: 2020 2020 4e65 7720 596f 726b 2020 2020      New York    
+00033ea0: 332e 3034 3435 3232 0d0a 2020 2020 2020  3.044522..      
+00033eb0: 2020 4865 6c73 696e 6b69 2020 2020 322e    Helsinki    2.
+00033ec0: 3438 3439 3037 0d0a 2020 2020 2020 2020  484907..        
+00033ed0: 6474 7970 653a 2066 6c6f 6174 3634 0d0a  dtype: float64..
+00033ee0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+00033ef0: 2020 2020 2069 6d70 6f72 7420 7061 6e64       import pand
+00033f00: 6173 2061 7320 7064 0d0a 0d0a 2020 2020  as as pd....    
+00033f10: 2020 2020 7365 7269 6573 203d 2070 642e      series = pd.
+00033f20: 5365 7269 6573 2873 656c 6629 0d0a 2020  Series(self)..  
+00033f30: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
+00033f40: 6572 6965 732e 6170 706c 7928 6675 6e63  eries.apply(func
+00033f50: 2c20 636f 6e76 6572 745f 6474 7970 653d  , convert_dtype=
+00033f60: 636f 6e76 6572 745f 6474 7970 652c 2061  convert_dtype, a
+00033f70: 7267 733d 6172 6773 2c20 2a2a 6b77 6473  rgs=args, **kwds
+00033f80: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00033f90: 6e20 7265 7375 6c74 2e76 616c 7565 730d  n result.values.
+00033fa0: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+00033fb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00033fc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00033fd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00033fe0: 2d2d 2d2d 0d0a 2020 2020 4063 6163 6865  ----..    @cache
+00033ff0: 645f 7765 616b 7265 665f 7072 6f70 6572  d_weakref_proper
+00034000: 7479 0d0a 2020 2020 6465 6620 7374 7228  ty..    def str(
+00034010: 7365 6c66 2920 2d3e 2022 4641 5374 7269  self) -> "FAStri
+00034020: 6e67 223a 0d0a 2020 2020 2020 2020 7222  ng":..        r"
+00034030: 2222 4361 7374 7320 616e 2061 7272 6179  ""Casts an array
+00034040: 206f 6620 6279 7465 2073 7472 696e 6773   of byte strings
+00034050: 206f 7220 756e 6963 6f64 6520 6173 2060   or unicode as `
+00034060: 6046 4153 7472 696e 6760 602e 0d0a 0d0a  `FAString``.....
+00034070: 2020 2020 2020 2020 456e 6162 6c65 7320          Enables 
+00034080: 6120 7661 7269 6574 7920 6f66 2075 7365  a variety of use
+00034090: 6675 6c20 7374 7269 6e67 206d 616e 6970  ful string manip
+000340a0: 756c 6174 696f 6e20 6d65 7468 6f64 732e  ulation methods.
+000340b0: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
+000340c0: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
+000340d0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4641  ----..        FA
+000340e0: 5374 7269 6e67 0d0a 0d0a 2020 2020 2020  String....      
+000340f0: 2020 5261 6973 6573 0d0a 2020 2020 2020    Raises..      
+00034100: 2020 2d2d 2d2d 2d2d 0d0a 2020 2020 2020    ------..      
+00034110: 2020 5479 7065 4572 726f 720d 0a20 2020    TypeError..   
+00034120: 2020 2020 2020 2020 2049 6620 7468 6520           If the 
+00034130: 4661 7374 4172 7261 7920 6973 206f 6620  FastArray is of 
+00034140: 6474 7970 6520 6f74 6865 7220 7468 616e  dtype other than
+00034150: 2062 7974 6520 7374 7269 6e67 206f 7220   byte string or 
+00034160: 756e 6963 6f64 650d 0a0d 0a20 2020 2020  unicode....     
+00034170: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
+00034180: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+00034190: 2020 2020 2020 206e 702e 6368 6172 6172         np.charar
+000341a0: 7261 790d 0a20 2020 2020 2020 206e 702e  ray..        np.
+000341b0: 6368 6172 0d0a 2020 2020 2020 2020 7274  char..        rt
+000341c0: 2e46 4153 7472 696e 672e 6170 706c 790d  .FAString.apply.
+000341d0: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
+000341e0: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
+000341f0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 203e  -----..        >
+00034200: 3e3e 2073 3d46 4128 5b27 7468 6973 272c  >> s=FA(['this',
+00034210: 2774 6861 7427 2c27 7465 7374 2027 5d2a  'that','test ']*
+00034220: 3130 305f 3030 3029 0d0a 2020 2020 2020  100_000)..      
+00034230: 2020 3e3e 3e20 732e 7374 722e 7570 7065    >>> s.str.uppe
+00034240: 720d 0a20 2020 2020 2020 2046 6173 7441  r..        FastA
+00034250: 7272 6179 285b 6227 5448 4953 272c 2062  rray([b'THIS', b
+00034260: 2754 4841 5427 2c20 6227 5445 5354 2027  'THAT', b'TEST '
+00034270: 2c20 2e2e 2e2c 2062 2754 4849 5327 2c20  , ..., b'THIS', 
+00034280: 6227 5448 4154 272c 2062 2754 4553 5420  b'THAT', b'TEST 
+00034290: 275d 2c0d 0a20 2020 2020 2020 2020 2020  '],..           
+000342a0: 2020 2020 2020 2064 7479 7065 3d27 7c53         dtype='|S
+000342b0: 3527 290d 0a0d 0a20 2020 2020 2020 203e  5')....        >
+000342c0: 3e3e 2073 2e73 7472 2e6c 6f77 6572 0d0a  >> s.str.lower..
+000342d0: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
+000342e0: 7928 5b62 2774 6869 7327 2c20 6227 7468  y([b'this', b'th
+000342f0: 6174 272c 2062 2774 6573 7420 272c 202e  at', b'test ', .
+00034300: 2e2e 2c20 6227 7468 6973 272c 2062 2774  .., b'this', b't
+00034310: 6861 7427 2c20 6227 7465 7374 2027 5d2c  hat', b'test '],
+00034320: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00034330: 2020 2020 6474 7970 653d 277c 5335 2729      dtype='|S5')
+00034340: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
+00034350: 732e 7374 722e 7265 6d6f 7665 7472 6169  s.str.removetrai
+00034360: 6c69 6e67 2829 0d0a 2020 2020 2020 2020  ling()..        
+00034370: 4661 7374 4172 7261 7928 5b62 2774 6869  FastArray([b'thi
+00034380: 7327 2c20 6227 7468 6174 272c 2062 2774  s', b'that', b't
+00034390: 6573 7427 2c20 2e2e 2e2c 2062 2774 6869  est', ..., b'thi
+000343a0: 7327 2c20 6227 7468 6174 272c 2062 2774  s', b'that', b't
+000343b0: 6573 7427 5d2c 0d0a 2020 2020 2020 2020  est'],..        
+000343c0: 2020 2020 2020 2020 2020 6474 7970 653d            dtype=
+000343d0: 277c 5335 2729 0d0a 2020 2020 2020 2020  '|S5')..        
+000343e0: 2222 220d 0a20 2020 2020 2020 2069 6620  """..        if 
+000343f0: 7365 6c66 2e64 7479 7065 2e63 6861 7220  self.dtype.char 
+00034400: 696e 2022 5553 223a 0d0a 2020 2020 2020  in "US":..      
+00034410: 2020 2020 2020 7265 7475 726e 2054 7970        return Typ
+00034420: 6552 6567 6973 7465 722e 4641 5374 7269  eRegister.FAStri
+00034430: 6e67 2873 656c 6629 0d0a 2020 2020 2020  ng(self)..      
+00034440: 2020 6966 2073 656c 662e 6474 7970 652e    if self.dtype.
+00034450: 6368 6172 203d 3d20 224f 223a 0d0a 2020  char == "O":..  
+00034460: 2020 2020 2020 2020 2020 2320 7472 7920            # try 
+00034470: 746f 2063 6f6e 7665 7274 2074 6f20 7374  to convert to st
+00034480: 7269 6e67 2028 6d69 6768 7420 6861 7665  ring (might have
+00034490: 2063 6f6d 6520 6672 6f6d 2070 616e 6461   come from panda
+000344a0: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
+000344b0: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+000344c0: 2020 2020 2020 636f 6e76 203d 2073 656c        conv = sel
+000344d0: 662e 6173 7479 7065 2822 5322 290d 0a20  f.astype("S").. 
+000344e0: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+000344f0: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+00034500: 2020 2020 636f 6e76 203d 2073 656c 662e      conv = self.
+00034510: 6173 7479 7065 2822 5522 290d 0a20 2020  astype("U")..   
+00034520: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00034530: 5479 7065 5265 6769 7374 6572 2e46 4153  TypeRegister.FAS
+00034540: 7472 696e 6728 636f 6e76 290d 0a0d 0a20  tring(conv).... 
+00034550: 2020 2020 2020 2072 6169 7365 2054 7970         raise Typ
+00034560: 6545 7272 6f72 2866 2254 6865 202e 7374  eError(f"The .st
+00034570: 7220 6675 6e63 7469 6f6e 2063 616e 206f  r function can o
+00034580: 6e6c 7920 6265 2075 7365 6420 6f6e 2062  nly be used on b
+00034590: 7974 6520 7374 7269 6e67 2061 6e64 2075  yte string and u
+000345a0: 6e69 636f 6465 206e 6f74 207b 7365 6c66  nicode not {self
+000345b0: 2e64 7479 7065 2172 7d22 290d 0a0d 0a20  .dtype!r}").... 
+000345c0: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+000345d0: 0d0a 2020 2020 6465 6620 6672 6f6d 5f61  ..    def from_a
+000345e0: 7272 6f77 280d 0a20 2020 2020 2020 2061  rrow(..        a
+000345f0: 7272 3a20 556e 696f 6e5b 2270 612e 4172  rr: Union["pa.Ar
+00034600: 7261 7922 2c20 2270 612e 4368 756e 6b65  ray", "pa.Chunke
+00034610: 6441 7272 6179 225d 2c0d 0a20 2020 2020  dArray"],..     
+00034620: 2020 207a 6572 6f5f 636f 7079 5f6f 6e6c     zero_copy_onl
+00034630: 793a 2062 6f6f 6c20 3d20 5472 7565 2c0d  y: bool = True,.
+00034640: 0a20 2020 2020 2020 2077 7269 7461 626c  .        writabl
+00034650: 653a 2062 6f6f 6c20 3d20 4661 6c73 652c  e: bool = False,
+00034660: 0d0a 2020 2020 2020 2020 6175 746f 5f77  ..        auto_w
+00034670: 6964 656e 3a20 626f 6f6c 203d 2046 616c  iden: bool = Fal
+00034680: 7365 2c0d 0a20 2020 2029 202d 3e20 2246  se,..    ) -> "F
+00034690: 6173 7441 7272 6179 223a 0d0a 2020 2020  astArray":..    
+000346a0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+000346b0: 2043 6f6e 7665 7274 2061 2070 7961 7272   Convert a pyarr
+000346c0: 6f77 2060 4172 7261 7960 2074 6f20 6120  ow `Array` to a 
+000346d0: 7269 7074 6162 6c65 2060 4661 7374 4172  riptable `FastAr
+000346e0: 7261 7960 2e0d 0a0d 0a20 2020 2020 2020  ray`.....       
+000346f0: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
+00034700: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
+00034710: 0a20 2020 2020 2020 2061 7272 203a 2070  .        arr : p
+00034720: 7961 7272 6f77 2e41 7272 6179 206f 7220  yarrow.Array or 
+00034730: 7079 6172 726f 772e 4368 756e 6b65 6441  pyarrow.ChunkedA
+00034740: 7272 6179 0d0a 2020 2020 2020 2020 7a65  rray..        ze
+00034750: 726f 5f63 6f70 795f 6f6e 6c79 203a 2062  ro_copy_only : b
+00034760: 6f6f 6c2c 2064 6566 6175 6c74 2054 7275  ool, default Tru
+00034770: 650d 0a20 2020 2020 2020 2020 2020 2049  e..            I
+00034780: 6620 5472 7565 2c20 616e 2065 7863 6570  f True, an excep
+00034790: 7469 6f6e 2077 696c 6c20 6265 2072 6169  tion will be rai
+000347a0: 7365 6420 6966 2074 6865 2063 6f6e 7665  sed if the conve
+000347b0: 7273 696f 6e20 746f 2061 2060 4661 7374  rsion to a `Fast
+000347c0: 4172 7261 7960 2077 6f75 6c64 2072 6571  Array` would req
+000347d0: 7569 7265 2063 6f70 7969 6e67 2074 6865  uire copying the
+000347e0: 0d0a 2020 2020 2020 2020 2020 2020 756e  ..            un
+000347f0: 6465 726c 7969 6e67 2064 6174 6120 2865  derlying data (e
+00034800: 2e67 2e20 696e 2070 7265 7365 6e63 6520  .g. in presence 
+00034810: 6f66 206e 756c 6c73 2c20 6f72 2066 6f72  of nulls, or for
+00034820: 206e 6f6e 2d70 7269 6d69 7469 7665 2074   non-primitive t
+00034830: 7970 6573 292e 0d0a 2020 2020 2020 2020  ypes)...        
+00034840: 7772 6974 6162 6c65 203a 2062 6f6f 6c2c  writable : bool,
+00034850: 2064 6566 6175 6c74 2046 616c 7365 0d0a   default False..
+00034860: 2020 2020 2020 2020 2020 2020 466f 7220              For 
+00034870: 6120 6046 6173 7441 7272 6179 6020 6372  a `FastArray` cr
+00034880: 6561 7465 6420 7769 7468 207a 6572 6f20  eated with zero 
+00034890: 636f 7079 2028 7669 6577 206f 6e20 7468  copy (view on th
+000348a0: 6520 4172 726f 7720 6461 7461 292c 2074  e Arrow data), t
+000348b0: 6865 2072 6573 756c 7469 6e67 2061 7272  he resulting arr
+000348c0: 6179 2069 7320 6e6f 7420 7772 6974 6162  ay is not writab
+000348d0: 6c65 2028 4172 726f 7720 6461 7461 2069  le (Arrow data i
+000348e0: 7320 696d 6d75 7461 626c 6529 2e0d 0a20  s immutable)... 
+000348f0: 2020 2020 2020 2020 2020 2042 7920 7365             By se
+00034900: 7474 696e 6720 7468 6973 2074 6f20 5472  tting this to Tr
+00034910: 7565 2c20 6120 636f 7079 206f 6620 7468  ue, a copy of th
+00034920: 6520 6172 7261 7920 6973 206d 6164 6520  e array is made 
+00034930: 746f 2065 6e73 7572 6520 6974 2069 7320  to ensure it is 
+00034940: 7772 6974 6162 6c65 2e0d 0a20 2020 2020  writable...     
+00034950: 2020 2061 7574 6f5f 7769 6465 6e20 3a20     auto_widen : 
+00034960: 626f 6f6c 2c20 6f70 7469 6f6e 616c 2c20  bool, optional, 
+00034970: 6465 6661 756c 7420 746f 2046 616c 7365  default to False
+00034980: 0d0a 2020 2020 2020 2020 2020 2020 5768  ..            Wh
+00034990: 656e 2046 616c 7365 2028 7468 6520 6465  en False (the de
+000349a0: 6661 756c 7429 2c20 6966 2061 6e20 6172  fault), if an ar
+000349b0: 726f 7720 6172 7261 7920 636f 6e74 6169  row array contai
+000349c0: 6e73 2061 2076 616c 7565 2077 6869 6368  ns a value which
+000349d0: 2077 6f75 6c64 2062 6520 636f 6e73 6964   would be consid
+000349e0: 6572 6564 0d0a 2020 2020 2020 2020 2020  ered..          
+000349f0: 2020 7468 6520 2769 6e76 616c 6964 272f    the 'invalid'/
+00034a00: 4e41 2076 616c 7565 2066 6f72 2074 6865  NA value for the
+00034a10: 2065 7175 6976 616c 656e 7420 6474 7970   equivalent dtyp
+00034a20: 6520 696e 2061 2060 4661 7374 4172 7261  e in a `FastArra
+00034a30: 7960 2c20 7261 6973 6520 616e 2065 7863  y`, raise an exc
+00034a40: 6570 7469 6f6e 0d0a 2020 2020 2020 2020  eption..        
+00034a50: 2020 2020 6265 6361 7573 6520 6469 7265      because dire
+00034a60: 6374 2063 6f6e 7665 7273 696f 6e20 776f  ct conversion wo
+00034a70: 756c 6420 6265 206c 6f73 7379 202f 2063  uld be lossy / c
+00034a80: 6861 6e67 6520 7468 6520 7365 6d61 6e74  hange the semant
+00034a90: 6963 206d 6561 6e69 6e67 206f 6620 7468  ic meaning of th
+00034aa0: 6520 6461 7461 2e0d 0a20 2020 2020 2020  e data...       
+00034ab0: 2020 2020 2057 6865 6e20 5472 7565 2c20       When True, 
+00034ac0: 7468 6520 636f 6e76 6572 7465 6420 6172  the converted ar
+00034ad0: 7261 7920 7769 6c6c 2062 6520 7769 6465  ray will be wide
+00034ae0: 6e65 6420 2869 6620 706f 7373 6962 6c65  ned (if possible
+00034af0: 2920 746f 2074 6865 206e 6578 742d 6c61  ) to the next-la
+00034b00: 7267 6573 7420 6474 7970 650d 0a20 2020  rgest dtype..   
+00034b10: 2020 2020 2020 2020 2074 6f20 656e 7375           to ensu
+00034b20: 7265 2074 6865 2064 6174 6120 7769 6c6c  re the data will
+00034b30: 2062 6520 696e 7465 7270 7265 7465 6420   be interpreted 
+00034b40: 696e 2074 6865 2073 616d 6520 7761 792e  in the same way.
+00034b50: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
+00034b60: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
+00034b70: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4661  ----..        Fa
+00034b80: 7374 4172 7261 790d 0a20 2020 2020 2020  stArray..       
+00034b90: 2022 2222 0d0a 2020 2020 2020 2020 696d   """..        im
+00034ba0: 706f 7274 2070 7961 7272 6f77 2e74 7970  port pyarrow.typ
+00034bb0: 6573 2061 7320 7061 740d 0a0d 0a20 2020  es as pat....   
+00034bc0: 2020 2020 2023 2042 6173 6564 206f 6e20       # Based on 
+00034bd0: 7468 6520 7479 7065 206f 6620 7468 6520  the type of the 
+00034be0: 6172 7261 792c 2064 6973 7061 7463 6820  array, dispatch 
+00034bf0: 746f 2074 7970 652d 7370 6563 6966 6963  to type-specific
+00034c00: 2069 6d70 6c65 6d65 6e74 6174 696f 6e73   implementations
+00034c10: 206f 6620 2e66 726f 6d5f 6172 726f 7728   of .from_arrow(
+00034c20: 292e 0d0a 2020 2020 2020 2020 7061 5f61  )...        pa_a
+00034c30: 7272 5f74 7970 6520 3d20 6172 722e 7479  rr_type = arr.ty
+00034c40: 7065 0d0a 2020 2020 2020 2020 6966 2028  pe..        if (
+00034c50: 0d0a 2020 2020 2020 2020 2020 2020 7061  ..            pa
+00034c60: 742e 6973 5f62 6f6f 6c65 616e 2870 615f  t.is_boolean(pa_
+00034c70: 6172 725f 7479 7065 290d 0a20 2020 2020  arr_type)..     
+00034c80: 2020 2020 2020 206f 7220 7061 742e 6973         or pat.is
+00034c90: 5f69 6e74 6567 6572 2870 615f 6172 725f  _integer(pa_arr_
+00034ca0: 7479 7065 290d 0a20 2020 2020 2020 2020  type)..         
+00034cb0: 2020 206f 7220 7061 742e 6973 5f66 6c6f     or pat.is_flo
+00034cc0: 6174 696e 6728 7061 5f61 7272 5f74 7970  ating(pa_arr_typ
+00034cd0: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
+00034ce0: 6f72 2070 6174 2e69 735f 7374 7269 6e67  or pat.is_string
+00034cf0: 2870 615f 6172 725f 7479 7065 290d 0a20  (pa_arr_type).. 
+00034d00: 2020 2020 2020 2020 2020 206f 7220 7061             or pa
+00034d10: 742e 6973 5f62 696e 6172 7928 7061 5f61  t.is_binary(pa_a
+00034d20: 7272 5f74 7970 6529 0d0a 2020 2020 2020  rr_type)..      
+00034d30: 2020 2020 2020 6f72 2070 6174 2e69 735f        or pat.is_
+00034d40: 6669 7865 645f 7369 7a65 5f62 696e 6172  fixed_size_binar
+00034d50: 7928 7061 5f61 7272 5f74 7970 6529 0d0a  y(pa_arr_type)..
+00034d60: 2020 2020 2020 2020 293a 0d0a 2020 2020          ):..    
+00034d70: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
+00034d80: 4368 6563 6b20 7768 6574 6865 7220 7468  Check whether th
+00034d90: 6973 2063 6f6c 756d 6e20 6861 7320 6120  is column has a 
+00034da0: 7573 6572 2d73 7065 6369 6669 6564 2066  user-specified f
+00034db0: 696c 6c20 7661 6c75 6520 7072 6f76 6964  ill value provid
+00034dc0: 6564 3b20 6966 2073 6f2c 2070 6173 7320  ed; if so, pass 
+00034dd0: 6974 2061 6c6f 6e67 2074 6f0d 0a20 2020  it along to..   
+00034de0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+00034df0: 2074 6865 2046 6173 7441 7272 6179 2e66   the FastArray.f
+00034e00: 726f 6d5f 6172 726f 7728 2920 6d65 7468  rom_arrow() meth
+00034e10: 6f64 2063 616c 6c20 6265 6c6f 772e 0d0a  od call below...
+00034e20: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00034e30: 726e 2046 6173 7441 7272 6179 2e5f 6672  rn FastArray._fr
+00034e40: 6f6d 5f61 7272 6f77 2861 7272 2c20 7a65  om_arrow(arr, ze
+00034e50: 726f 5f63 6f70 795f 6f6e 6c79 3d7a 6572  ro_copy_only=zer
+00034e60: 6f5f 636f 7079 5f6f 6e6c 792c 2077 7269  o_copy_only, wri
+00034e70: 7461 626c 653d 7772 6974 6162 6c65 2c20  table=writable, 
+00034e80: 6175 746f 5f77 6964 656e 3d61 7574 6f5f  auto_widen=auto_
+00034e90: 7769 6465 6e29 0d0a 0d0a 2020 2020 2020  widen)....      
+00034ea0: 2020 656c 6966 2070 6174 2e69 735f 6469    elif pat.is_di
+00034eb0: 6374 696f 6e61 7279 2870 615f 6172 725f  ctionary(pa_arr_
+00034ec0: 7479 7065 2920 6f72 2070 6174 2e69 735f  type) or pat.is_
+00034ed0: 7374 7275 6374 2870 615f 6172 725f 7479  struct(pa_arr_ty
+00034ee0: 7065 293a 0d0a 2020 2020 2020 2020 2020  pe):..          
+00034ef0: 2020 7265 7475 726e 2054 7970 6552 6567    return TypeReg
+00034f00: 6973 7465 722e 4361 7465 676f 7269 6361  ister.Categorica
+00034f10: 6c2e 5f66 726f 6d5f 6172 726f 7728 6172  l._from_arrow(ar
+00034f20: 722c 207a 6572 6f5f 636f 7079 5f6f 6e6c  r, zero_copy_onl
+00034f30: 793d 7a65 726f 5f63 6f70 795f 6f6e 6c79  y=zero_copy_only
+00034f40: 2c20 7772 6974 6162 6c65 3d77 7269 7461  , writable=writa
+00034f50: 626c 6529 0d0a 0d0a 2020 2020 2020 2020  ble)....        
+00034f60: 656c 6966 2070 6174 2e69 735f 7469 6d65  elif pat.is_time
+00034f70: 7374 616d 7028 7061 5f61 7272 5f74 7970  stamp(pa_arr_typ
+00034f80: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
+00034f90: 2072 6574 7572 6e20 5479 7065 5265 6769   return TypeRegi
+00034fa0: 7374 6572 2e44 6174 6554 696d 654e 616e  ster.DateTimeNan
+00034fb0: 6f2e 5f66 726f 6d5f 6172 726f 7728 6172  o._from_arrow(ar
+00034fc0: 722c 207a 6572 6f5f 636f 7079 5f6f 6e6c  r, zero_copy_onl
+00034fd0: 793d 7a65 726f 5f63 6f70 795f 6f6e 6c79  y=zero_copy_only
+00034fe0: 2c20 7772 6974 6162 6c65 3d77 7269 7461  , writable=writa
+00034ff0: 626c 6529 0d0a 0d0a 2020 2020 2020 2020  ble)....        
+00035000: 656c 6966 2070 6174 2e69 735f 6461 7465  elif pat.is_date
+00035010: 2870 615f 6172 725f 7479 7065 293a 0d0a  (pa_arr_type):..
+00035020: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00035030: 726e 2054 7970 6552 6567 6973 7465 722e  rn TypeRegister.
+00035040: 4461 7465 2e5f 6672 6f6d 5f61 7272 6f77  Date._from_arrow
+00035050: 2861 7272 2c20 7a65 726f 5f63 6f70 795f  (arr, zero_copy_
+00035060: 6f6e 6c79 3d7a 6572 6f5f 636f 7079 5f6f  only=zero_copy_o
+00035070: 6e6c 792c 2077 7269 7461 626c 653d 7772  nly, writable=wr
+00035080: 6974 6162 6c65 290d 0a0d 0a20 2020 2020  itable)....     
+00035090: 2020 2065 6c69 6620 7061 742e 6973 5f64     elif pat.is_d
+000350a0: 7572 6174 696f 6e28 7061 5f61 7272 5f74  uration(pa_arr_t
+000350b0: 7970 6529 3a0d 0a20 2020 2020 2020 2020  ype):..         
+000350c0: 2020 2072 6574 7572 6e20 5479 7065 5265     return TypeRe
+000350d0: 6769 7374 6572 2e54 696d 6553 7061 6e2e  gister.TimeSpan.
+000350e0: 5f66 726f 6d5f 6172 726f 7728 6172 722c  _from_arrow(arr,
+000350f0: 207a 6572 6f5f 636f 7079 5f6f 6e6c 793d   zero_copy_only=
+00035100: 7a65 726f 5f63 6f70 795f 6f6e 6c79 2c20  zero_copy_only, 
+00035110: 7772 6974 6162 6c65 3d77 7269 7461 626c  writable=writabl
+00035120: 6529 0d0a 0d0a 2020 2020 2020 2020 656c  e)....        el
+00035130: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00035140: 2023 2055 6e6b 6e6f 776e 2f75 6e73 7570   # Unknown/unsup
+00035150: 706f 7274 6564 2061 7272 6179 2074 7970  ported array typ
+00035160: 6520 2d2d 2063 616e 2774 2063 6f6e 7665  e -- can't conve
+00035170: 7274 2e0d 0a20 2020 2020 2020 2020 2020  rt...           
+00035180: 2072 6169 7365 204e 6f74 496d 706c 656d   raise NotImplem
+00035190: 656e 7465 6445 7272 6f72 2866 2270 7961  entedError(f"pya
+000351a0: 7272 6f77 2061 7272 6179 7320 6f66 2074  rrow arrays of t
+000351b0: 7970 6520 277b 7061 5f61 7272 5f74 7970  ype '{pa_arr_typ
+000351c0: 657d 2720 6361 6e27 7420 6265 2063 6f6e  e}' can't be con
+000351d0: 7665 7274 6564 2074 6f20 7269 7074 6162  verted to riptab
+000351e0: 6c65 2061 7272 6179 732e 2229 0d0a 0d0a  le arrays.")....
+000351f0: 2020 2020 4073 7461 7469 636d 6574 686f      @staticmetho
+00035200: 640d 0a20 2020 2064 6566 205f 6672 6f6d  d..    def _from
+00035210: 5f61 7272 6f77 280d 0a20 2020 2020 2020  _arrow(..       
+00035220: 2061 7272 3a20 556e 696f 6e5b 2270 612e   arr: Union["pa.
+00035230: 4172 7261 7922 2c20 2270 612e 4368 756e  Array", "pa.Chun
+00035240: 6b65 6441 7272 6179 225d 2c0d 0a20 2020  kedArray"],..   
+00035250: 2020 2020 207a 6572 6f5f 636f 7079 5f6f       zero_copy_o
+00035260: 6e6c 793a 2062 6f6f 6c20 3d20 5472 7565  nly: bool = True
+00035270: 2c0d 0a20 2020 2020 2020 2077 7269 7461  ,..        writa
+00035280: 626c 653a 2062 6f6f 6c20 3d20 4661 6c73  ble: bool = Fals
+00035290: 652c 0d0a 2020 2020 2020 2020 6175 746f  e,..        auto
+000352a0: 5f77 6964 656e 3a20 626f 6f6c 203d 2046  _widen: bool = F
+000352b0: 616c 7365 2c0d 0a20 2020 2029 202d 3e20  alse,..    ) -> 
+000352c0: 2246 6173 7441 7272 6179 223a 0d0a 2020  "FastArray":..  
+000352d0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+000352e0: 2020 2043 6f6e 7665 7274 2061 2070 7961     Convert a pya
+000352f0: 7272 6f77 2060 4172 7261 7960 2074 6f20  rrow `Array` to 
+00035300: 6120 7269 7074 6162 6c65 2060 4661 7374  a riptable `Fast
+00035310: 4172 7261 7960 2e0d 0a0d 0a20 2020 2020  Array`.....     
+00035320: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
+00035330: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
+00035340: 2d0d 0a20 2020 2020 2020 2061 7272 203a  -..        arr :
+00035350: 2070 7961 7272 6f77 2e41 7272 6179 206f   pyarrow.Array o
+00035360: 7220 7079 6172 726f 772e 4368 756e 6b65  r pyarrow.Chunke
+00035370: 6441 7272 6179 0d0a 2020 2020 2020 2020  dArray..        
+00035380: 7a65 726f 5f63 6f70 795f 6f6e 6c79 203a  zero_copy_only :
+00035390: 2062 6f6f 6c2c 2064 6566 6175 6c74 2054   bool, default T
+000353a0: 7275 650d 0a20 2020 2020 2020 2020 2020  rue..           
+000353b0: 2049 6620 5472 7565 2c20 616e 2065 7863   If True, an exc
+000353c0: 6570 7469 6f6e 2077 696c 6c20 6265 2072  eption will be r
+000353d0: 6169 7365 6420 6966 2074 6865 2063 6f6e  aised if the con
+000353e0: 7665 7273 696f 6e20 746f 2061 2060 4661  version to a `Fa
+000353f0: 7374 4172 7261 7960 2077 6f75 6c64 2072  stArray` would r
+00035400: 6571 7569 7265 2063 6f70 7969 6e67 2074  equire copying t
+00035410: 6865 0d0a 2020 2020 2020 2020 2020 2020  he..            
+00035420: 756e 6465 726c 7969 6e67 2064 6174 6120  underlying data 
+00035430: 2865 2e67 2e20 696e 2070 7265 7365 6e63  (e.g. in presenc
+00035440: 6520 6f66 206e 756c 6c73 2c20 6f72 2066  e of nulls, or f
+00035450: 6f72 206e 6f6e 2d70 7269 6d69 7469 7665  or non-primitive
+00035460: 2074 7970 6573 292e 0d0a 2020 2020 2020   types)...      
+00035470: 2020 7772 6974 6162 6c65 203a 2062 6f6f    writable : boo
+00035480: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
+00035490: 0d0a 2020 2020 2020 2020 2020 2020 466f  ..            Fo
+000354a0: 7220 6120 6046 6173 7441 7272 6179 6020  r a `FastArray` 
+000354b0: 6372 6561 7465 6420 7769 7468 207a 6572  created with zer
+000354c0: 6f20 636f 7079 2028 7669 6577 206f 6e20  o copy (view on 
+000354d0: 7468 6520 4172 726f 7720 6461 7461 292c  the Arrow data),
+000354e0: 2074 6865 2072 6573 756c 7469 6e67 2061   the resulting a
+000354f0: 7272 6179 2069 7320 6e6f 7420 7772 6974  rray is not writ
+00035500: 6162 6c65 2028 4172 726f 7720 6461 7461  able (Arrow data
+00035510: 2069 7320 696d 6d75 7461 626c 6529 2e0d   is immutable)..
+00035520: 0a20 2020 2020 2020 2020 2020 2042 7920  .            By 
+00035530: 7365 7474 696e 6720 7468 6973 2074 6f20  setting this to 
+00035540: 5472 7565 2c20 6120 636f 7079 206f 6620  True, a copy of 
+00035550: 7468 6520 6172 7261 7920 6973 206d 6164  the array is mad
+00035560: 6520 746f 2065 6e73 7572 6520 6974 2069  e to ensure it i
+00035570: 7320 7772 6974 6162 6c65 2e0d 0a20 2020  s writable...   
+00035580: 2020 2020 2061 7574 6f5f 7769 6465 6e20       auto_widen 
+00035590: 3a20 626f 6f6c 2c20 6f70 7469 6f6e 616c  : bool, optional
+000355a0: 2c20 6465 6661 756c 7420 746f 2046 616c  , default to Fal
+000355b0: 7365 0d0a 2020 2020 2020 2020 2020 2020  se..            
+000355c0: 5768 656e 2046 616c 7365 2028 7468 6520  When False (the 
+000355d0: 6465 6661 756c 7429 2c20 6966 2061 6e20  default), if an 
+000355e0: 6172 726f 7720 6172 7261 7920 636f 6e74  arrow array cont
+000355f0: 6169 6e73 2061 2076 616c 7565 2077 6869  ains a value whi
+00035600: 6368 2077 6f75 6c64 2062 6520 636f 6e73  ch would be cons
+00035610: 6964 6572 6564 0d0a 2020 2020 2020 2020  idered..        
+00035620: 2020 2020 7468 6520 2769 6e76 616c 6964      the 'invalid
+00035630: 272f 4e41 2076 616c 7565 2066 6f72 2074  '/NA value for t
+00035640: 6865 2065 7175 6976 616c 656e 7420 6474  he equivalent dt
+00035650: 7970 6520 696e 2061 2060 4661 7374 4172  ype in a `FastAr
+00035660: 7261 7960 2c20 7261 6973 6520 616e 2065  ray`, raise an e
+00035670: 7863 6570 7469 6f6e 0d0a 2020 2020 2020  xception..      
+00035680: 2020 2020 2020 6265 6361 7573 6520 6469        because di
+00035690: 7265 6374 2063 6f6e 7665 7273 696f 6e20  rect conversion 
+000356a0: 776f 756c 6420 6265 206c 6f73 7379 202f  would be lossy /
+000356b0: 2063 6861 6e67 6520 7468 6520 7365 6d61   change the sema
+000356c0: 6e74 6963 206d 6561 6e69 6e67 206f 6620  ntic meaning of 
+000356d0: 7468 6520 6461 7461 2e0d 0a20 2020 2020  the data...     
+000356e0: 2020 2020 2020 2057 6865 6e20 5472 7565         When True
+000356f0: 2c20 7468 6520 636f 6e76 6572 7465 6420  , the converted 
+00035700: 6172 7261 7920 7769 6c6c 2062 6520 7769  array will be wi
+00035710: 6465 6e65 6420 2869 6620 706f 7373 6962  dened (if possib
+00035720: 6c65 2920 746f 2074 6865 206e 6578 742d  le) to the next-
+00035730: 6c61 7267 6573 7420 6474 7970 650d 0a20  largest dtype.. 
+00035740: 2020 2020 2020 2020 2020 2074 6f20 656e             to en
+00035750: 7375 7265 2074 6865 2064 6174 6120 7769  sure the data wi
+00035760: 6c6c 2062 6520 696e 7465 7270 7265 7465  ll be interprete
+00035770: 6420 696e 2074 6865 2073 616d 6520 7761  d in the same wa
+00035780: 792e 0d0a 0d0a 2020 2020 2020 2020 5265  y.....        Re
+00035790: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
+000357a0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+000357b0: 4661 7374 4172 7261 790d 0a20 2020 2020  FastArray..     
+000357c0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+000357d0: 696d 706f 7274 2070 7961 7272 6f77 2061  import pyarrow a
+000357e0: 7320 7061 0d0a 2020 2020 2020 2020 696d  s pa..        im
+000357f0: 706f 7274 2070 7961 7272 6f77 2e63 6f6d  port pyarrow.com
+00035800: 7075 7465 2061 7320 7063 0d0a 2020 2020  pute as pc..    
+00035810: 2020 2020 696d 706f 7274 2070 7961 7272      import pyarr
+00035820: 6f77 2e74 7970 6573 2061 7320 7061 740d  ow.types as pat.
+00035830: 0a0d 0a20 2020 2020 2020 2023 204d 616b  ...        # Mak
+00035840: 6520 7375 7265 2074 6865 2069 6e70 7574  e sure the input
+00035850: 2061 7272 6179 2069 7320 6f6e 6520 6f66   array is one of
+00035860: 2074 6865 2070 7961 7272 6f77 2061 7272   the pyarrow arr
+00035870: 6179 2074 7970 6573 2e0d 0a20 2020 2020  ay types...     
+00035880: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
+00035890: 616e 6365 2861 7272 2c20 2870 612e 4172  ance(arr, (pa.Ar
+000358a0: 7261 792c 2070 612e 4368 756e 6b65 6441  ray, pa.ChunkedA
+000358b0: 7272 6179 2929 3a0d 0a20 2020 2020 2020  rray)):..       
+000358c0: 2020 2020 2072 6169 7365 2054 7970 6545       raise TypeE
+000358d0: 7272 6f72 2822 5468 6520 6172 7261 7920  rror("The array 
+000358e0: 6973 206e 6f74 2061 6e20 696e 7374 616e  is not an instan
+000358f0: 6365 206f 6620 6070 7961 7272 6f77 2e41  ce of `pyarrow.A
+00035900: 7272 6179 6020 6f72 2060 7079 6172 726f  rray` or `pyarro
+00035910: 772e 4368 756e 6b65 6441 7272 6179 602e  w.ChunkedArray`.
+00035920: 2229 0d0a 0d0a 2020 2020 2020 2020 2320  ")....        # 
+00035930: 4368 756e 6b65 6441 7272 6179 7320 6e65  ChunkedArrays ne
+00035940: 6564 2073 7065 6369 616c 2068 616e 646c  ed special handl
+00035950: 696e 672e 0d0a 2020 2020 2020 2020 6966  ing...        if
+00035960: 2069 7369 6e73 7461 6e63 6528 6172 722c   isinstance(arr,
+00035970: 2070 612e 4368 756e 6b65 6441 7272 6179   pa.ChunkedArray
+00035980: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00035990: 2320 4120 7369 6e67 6c65 2d63 6875 6e6b  # A single-chunk
+000359a0: 2043 6875 6e6b 6564 4172 7261 7920 6361   ChunkedArray ca
+000359b0: 6e20 6265 2068 616e 646c 6564 2062 7920  n be handled by 
+000359c0: 6a75 7374 2065 7874 7261 6374 696e 6720  just extracting 
+000359d0: 7468 6174 2063 6875 6e6b 0d0a 2020 2020  that chunk..    
+000359e0: 2020 2020 2020 2020 2320 616e 6420 7265          # and re
+000359f0: 6375 7273 6976 656c 7920 7072 6f63 6573  cursively proces
+00035a00: 7369 6e67 2069 742e 0d0a 2020 2020 2020  sing it...      
+00035a10: 2020 2020 2020 6966 2061 7272 2e6e 756d        if arr.num
+00035a20: 5f63 6875 6e6b 7320 3d3d 2031 3a0d 0a20  _chunks == 1:.. 
+00035a30: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00035a40: 6574 7572 6e20 4661 7374 4172 7261 792e  eturn FastArray.
+00035a50: 5f66 726f 6d5f 6172 726f 7728 0d0a 2020  _from_arrow(..  
+00035a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035a70: 2020 6172 722e 6368 756e 6b28 3029 2c20    arr.chunk(0), 
+00035a80: 7a65 726f 5f63 6f70 795f 6f6e 6c79 3d7a  zero_copy_only=z
+00035a90: 6572 6f5f 636f 7079 5f6f 6e6c 792c 2077  ero_copy_only, w
+00035aa0: 7269 7461 626c 653d 7772 6974 6162 6c65  ritable=writable
+00035ab0: 2c20 6175 746f 5f77 6964 656e 3d61 7574  , auto_widen=aut
+00035ac0: 6f5f 7769 6465 6e0d 0a20 2020 2020 2020  o_widen..       
+00035ad0: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
+00035ae0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00035af0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00035b00: 2054 4f44 4f3a 2042 656e 6368 6d61 726b   TODO: Benchmark
+00035b10: 2074 6869 7320 7673 2e20 7573 696e 6720   this vs. using 
+00035b20: 4368 756e 6b65 6441 7272 6179 2e63 6f6d  ChunkedArray.com
+00035b30: 6269 6e65 5f63 6875 6e6b 7328 2920 7468  bine_chunks() th
+00035b40: 656e 2063 6f6e 7665 7274 696e 672e 0d0a  en converting...
+00035b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035b60: 2320 544f 444f 3a20 4c6f 6f6b 2061 7420  # TODO: Look at 
+00035b70: 607a 6572 6f5f 636f 7079 5f6f 6e6c 7960  `zero_copy_only`
+00035b80: 2061 6e64 2060 7772 6974 6162 6c65 6020   and `writable` 
+00035b90: 2d2d 2074 6865 2063 6f6e 7665 7274 6564  -- the converted
+00035ba0: 2061 7272 6179 7320 636f 756c 6420 6265   arrays could be
+00035bb0: 2064 6573 7472 6f79 6564 2077 6869 6c65   destroyed while
+00035bc0: 2068 7374 6163 6b69 6e67 0d0a 2020 2020   hstacking..    
+00035bd0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00035be0: 2020 2020 7369 6e63 6520 7765 206b 6e6f      since we kno
+00035bf0: 7720 7468 6579 276c 6c20 6861 7665 206a  w they'll have j
+00035c00: 7573 7420 6265 656e 2063 7265 6174 6564  ust been created
+00035c10: 3b20 7468 6973 2063 6f75 6c64 2072 6564  ; this could red
+00035c20: 7563 6520 7065 616b 206d 656d 6f72 7920  uce peak memory 
+00035c30: 7574 696c 697a 6174 696f 6e2e 0d0a 2020  utilization...  
+00035c40: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00035c50: 7475 726e 2068 7374 6163 6b28 0d0a 2020  turn hstack(..  
+00035c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035c70: 2020 5b0d 0a20 2020 2020 2020 2020 2020    [..           
+00035c80: 2020 2020 2020 2020 2020 2020 2046 6173               Fas
+00035c90: 7441 7272 6179 2e5f 6672 6f6d 5f61 7272  tArray._from_arr
+00035ca0: 6f77 280d 0a20 2020 2020 2020 2020 2020  ow(..           
+00035cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035cc0: 2061 7272 5f63 6875 6e6b 2c20 7a65 726f   arr_chunk, zero
+00035cd0: 5f63 6f70 795f 6f6e 6c79 3d7a 6572 6f5f  _copy_only=zero_
+00035ce0: 636f 7079 5f6f 6e6c 792c 2077 7269 7461  copy_only, writa
+00035cf0: 626c 653d 7772 6974 6162 6c65 2c20 6175  ble=writable, au
+00035d00: 746f 5f77 6964 656e 3d61 7574 6f5f 7769  to_widen=auto_wi
+00035d10: 6465 6e0d 0a20 2020 2020 2020 2020 2020  den..           
+00035d20: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+00035d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035d40: 2020 2020 2020 2020 666f 7220 6172 725f          for arr_
+00035d50: 6368 756e 6b20 696e 2061 7272 2e69 7465  chunk in arr.ite
+00035d60: 7263 6875 6e6b 7328 290d 0a20 2020 2020  rchunks()..     
+00035d70: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
+00035d80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00035d90: 2020 290d 0a0d 0a20 2020 2020 2020 2023    )....        #
+00035da0: 2048 616e 646c 6520 6261 7365 6420 6f6e   Handle based on
+00035db0: 2074 6865 2074 7970 6520 6f66 2074 6865   the type of the
+00035dc0: 2069 6e70 7574 2061 7272 6179 2e0d 0a20   input array... 
+00035dd0: 2020 2020 2020 2069 6620 7061 742e 6973         if pat.is
+00035de0: 5f69 6e74 6567 6572 2861 7272 2e74 7970  _integer(arr.typ
+00035df0: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
+00035e00: 2023 2046 6f72 2061 7272 6179 7320 6f66   # For arrays of
+00035e10: 2070 7269 6d69 7469 7665 2074 7970 6573   primitive types
+00035e20: 2c20 7061 2e44 6174 6154 7970 652e 746f  , pa.DataType.to
+00035e30: 5f70 616e 6461 735f 6474 7970 6528 2920  _pandas_dtype() 
+00035e40: 6163 7475 616c 6c79 2072 6574 7572 6e73  actually returns
+00035e50: 2074 6865 2065 7175 6976 616c 656e 7420   the equivalent 
+00035e60: 6e75 6d70 7920 6474 7970 652e 0d0a 2020  numpy dtype...  
+00035e70: 2020 2020 2020 2020 2020 6172 725f 6474            arr_dt
+00035e80: 7970 6520 3d20 6172 722e 7479 7065 2e74  ype = arr.type.t
+00035e90: 6f5f 7061 6e64 6173 5f64 7479 7065 2829  o_pandas_dtype()
+00035ea0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00035eb0: 2320 4765 7420 7468 6520 7269 7074 6162  # Get the riptab
+00035ec0: 6c65 2069 6e76 616c 6964 2076 616c 7565  le invalid value
+00035ed0: 2066 6f72 2074 6869 7320 6172 7261 7920   for this array 
+00035ee0: 7479 7065 2e0d 0a20 2020 2020 2020 2020  type...         
+00035ef0: 2020 2061 7272 5f72 745f 696e 7620 3d20     arr_rt_inv = 
+00035f00: 494e 5641 4c49 445f 4449 4354 5b6e 702e  INVALID_DICT[np.
+00035f10: 6474 7970 6528 6172 725f 6474 7970 6529  dtype(arr_dtype)
+00035f20: 2e6e 756d 5d0d 0a0d 0a20 2020 2020 2020  .num]....       
+00035f30: 2020 2020 2023 2047 6574 206d 696e 2061       # Get min a
+00035f40: 6e64 206d 6178 2076 616c 7565 206f 6620  nd max value of 
+00035f50: 7468 6520 696e 7075 7420 6172 7261 792c  the input array,
+00035f60: 2073 6f20 7765 206b 6e6f 7720 6966 2077   so we know if w
+00035f70: 6520 6e65 6564 2074 6f20 7072 6f6d 6f74  e need to promot
+00035f80: 650d 0a20 2020 2020 2020 2020 2020 2023  e..            #
+00035f90: 2074 6f20 7468 6520 6e65 7874 2d6c 6172   to the next-lar
+00035fa0: 6765 7374 2064 7479 7065 2074 6f20 6265  gest dtype to be
+00035fb0: 2061 626c 6520 746f 2063 6f72 7265 6374   able to correct
+00035fc0: 6c79 2072 6570 7265 7365 6e74 206e 756c  ly represent nul
+00035fd0: 6c73 2e0d 0a20 2020 2020 2020 2020 2020  ls...           
+00035fe0: 2023 2054 6869 7320 6d75 7374 2062 6520   # This must be 
+00035ff0: 646f 6e65 2065 7665 6e20 6966 2074 6865  done even if the
+00036000: 2069 6e70 7574 2061 7272 6179 2068 6173   input array has
+00036010: 206e 6f20 6e75 6c6c 732c 2062 6563 6175   no nulls, becau
+00036020: 7365 206f 7468 6572 7769 7365 2074 6865  se otherwise the
+00036030: 206e 6f6e 2d6e 756c 6c0d 0a20 2020 2020   non-null..     
+00036040: 2020 2020 2020 2023 2076 616c 7565 7320         # values 
+00036050: 696e 2074 6865 2069 6e70 7574 2063 6f72  in the input cor
+00036060: 7265 7370 6f6e 6469 6e67 2074 6f20 7269  responding to ri
+00036070: 7074 6162 6c65 2069 6e74 6567 6572 2069  ptable integer i
+00036080: 6e76 616c 6964 7320 776f 756c 6420 7468  nvalids would th
+00036090: 656e 2062 6520 7265 636f 676e 697a 6564  en be recognized
+000360a0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+000360b0: 6173 2073 7563 6820 6166 7465 7220 636f  as such after co
+000360c0: 6e76 6572 7369 6f6e 2e0d 0a20 2020 2020  nversion...     
+000360d0: 2020 2020 2020 206d 696e 5f6d 6178 5f72         min_max_r
+000360e0: 6573 756c 743a 2070 612e 5374 7275 6374  esult: pa.Struct
+000360f0: 5363 616c 6172 203d 2070 632e 6d69 6e5f  Scalar = pc.min_
+00036100: 6d61 7828 6172 7229 0d0a 2020 2020 2020  max(arr)..      
+00036110: 2020 2020 2020 6d69 6e5f 7661 6c75 6520        min_value 
+00036120: 3d20 6d69 6e5f 6d61 785f 7265 7375 6c74  = min_max_result
+00036130: 5b22 6d69 6e22 5d0d 0a20 2020 2020 2020  ["min"]..       
+00036140: 2020 2020 206d 6178 5f76 616c 7565 203d       max_value =
+00036150: 206d 696e 5f6d 6178 5f72 6573 756c 745b   min_max_result[
+00036160: 226d 6178 225d 0d0a 0d0a 2020 2020 2020  "max"]....      
+00036170: 2020 2020 2020 6172 725f 7061 5f64 7479        arr_pa_dty
+00036180: 7065 5f77 6964 656e 6564 3a20 4f70 7469  pe_widened: Opti
+00036190: 6f6e 616c 5b70 612e 4461 7461 5479 7065  onal[pa.DataType
+000361a0: 5d20 3d20 4e6f 6e65 0d0a 2020 2020 2020  ] = None..      
+000361b0: 2020 2020 2020 6966 206d 696e 5f76 616c        if min_val
+000361c0: 7565 203d 3d20 6172 725f 7274 5f69 6e76  ue == arr_rt_inv
+000361d0: 206f 7220 6d61 785f 7661 6c75 6520 3d3d   or max_value ==
+000361e0: 2061 7272 5f72 745f 696e 763a 0d0a 2020   arr_rt_inv:..  
+000361f0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00036200: 4966 2074 6865 2069 6e70 7574 2061 7272  If the input arr
+00036210: 6179 2068 6f6c 6473 2036 342d 6269 7420  ay holds 64-bit 
+00036220: 696e 7465 6765 7273 2028 7369 676e 6564  integers (signed
+00036230: 206f 7220 756e 7369 676e 6564 292c 2077   or unsigned), w
+00036240: 6520 6361 6e27 7420 646f 2061 206c 6f73  e can't do a los
+00036250: 736c 6573 7320 636f 6e76 6572 7369 6f6e  sless conversion
+00036260: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00036270: 2020 2023 2073 696e 6365 2074 6865 7265     # since there
+00036280: 2069 7320 6e6f 2077 6964 6572 2069 6e74   is no wider int
+00036290: 6567 6572 2061 7661 696c 6162 6c65 2e0d  eger available..
+000362a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000362b0: 2069 6620 7a65 726f 5f63 6f70 795f 6f6e   if zero_copy_on
+000362c0: 6c79 3a0d 0a20 2020 2020 2020 2020 2020  ly:..           
+000362d0: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
+000362e0: 616c 7565 4572 726f 7228 0d0a 2020 2020  alueError(..    
+000362f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036300: 2020 2020 2243 616e 6e6f 7420 7065 7266      "Cannot perf
+00036310: 6f72 6d20 6120 7a65 726f 2d63 6f70 7920  orm a zero-copy 
+00036320: 636f 6e76 6572 7369 6f6e 206f 6620 616e  conversion of an
+00036330: 2061 7272 6f77 2061 7272 6179 2063 6f6e   arrow array con
+00036340: 7461 696e 696e 6720 7468 6520 7269 7074  taining the ript
+00036350: 6162 6c65 2069 6e76 616c 6964 2076 616c  able invalid val
+00036360: 7565 2066 6f72 2074 6865 2061 7272 6179  ue for the array
+00036370: 2064 7479 7065 2e22 0d0a 2020 2020 2020   dtype."..      
+00036380: 2020 2020 2020 2020 2020 2020 2020 290d                ).
+00036390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000363a0: 2065 6c69 6620 6172 725f 6474 7970 652e   elif arr_dtype.
+000363b0: 6974 656d 7369 7a65 203d 3d20 383a 0d0a  itemsize == 8:..
+000363c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000363d0: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
+000363e0: 7272 6f72 280d 0a20 2020 2020 2020 2020  rror(..         
+000363f0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00036400: 4361 6e6e 6f74 206c 6f73 736c 6573 736c  Cannot losslessl
+00036410: 7920 636f 6e76 6572 7420 616e 2061 7272  y convert an arr
+00036420: 6f77 2061 7272 6179 206f 6620 2875 2969  ow array of (u)i
+00036430: 6e74 3634 2063 6f6e 7461 696e 696e 6720  nt64 containing 
+00036440: 7468 6520 7269 7074 6162 6c65 2069 6e76  the riptable inv
+00036450: 616c 6964 2076 616c 7565 2074 6f20 6120  alid value to a 
+00036460: 7269 7074 6162 6c65 2061 7272 6179 2e22  riptable array."
+00036470: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00036480: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+00036490: 2020 2020 2020 2020 2065 6c69 6620 6e6f           elif no
+000364a0: 7420 6175 746f 5f77 6964 656e 3a0d 0a20  t auto_widen:.. 
+000364b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000364c0: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
+000364d0: 726f 7228 0d0a 2020 2020 2020 2020 2020  ror(..          
+000364e0: 2020 2020 2020 2020 2020 2020 2020 2249                "I
+000364f0: 6e70 7574 2061 7272 6179 2072 6571 7569  nput array requi
+00036500: 7265 7320 7769 6465 6e69 6e67 2066 6f72  res widening for
+00036510: 206c 6f73 736c 6573 7320 636f 6e76 6572   lossless conver
+00036520: 7369 6f6e 2e20 5370 6563 6966 7920 6175  sion. Specify au
+00036530: 746f 5f77 6964 656e 3d54 7275 6520 6966  to_widen=True if
+00036540: 2079 6f75 2077 616e 7420 746f 2061 6c6c   you want to all
+00036550: 6f77 2074 6865 2077 6964 656e 696e 6720  ow the widening 
+00036560: 636f 6e76 6572 7369 6f6e 2028 7768 6963  conversion (whic
+00036570: 6820 7265 7175 6972 6573 2061 6e20 6172  h requires an ar
+00036580: 7261 7920 636f 7079 292e 220d 0a20 2020  ray copy)."..   
+00036590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000365a0: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
+000365b0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+000365c0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+000365d0: 2057 6964 656e 2074 6865 2064 7479 7065   Widen the dtype
+000365e0: 206f 6620 7468 6520 6f75 7470 7574 2061   of the output a
+000365f0: 7272 6179 2e0d 0a20 2020 2020 2020 2020  rray...         
+00036600: 2020 2020 2020 2020 2020 206f 7574 7075             outpu
+00036610: 745f 6474 7970 6520 3d20 6e70 2e6d 696e  t_dtype = np.min
+00036620: 5f73 6361 6c61 725f 7479 7065 2832 202a  _scalar_type(2 *
+00036630: 2061 7272 5f72 745f 696e 7629 0d0a 2020   arr_rt_inv)..  
+00036640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036650: 2020 6172 725f 7061 5f64 7479 7065 5f77    arr_pa_dtype_w
+00036660: 6964 656e 6564 203d 2070 612e 6672 6f6d  idened = pa.from
+00036670: 5f6e 756d 7079 5f64 7479 7065 286f 7574  _numpy_dtype(out
+00036680: 7075 745f 6474 7970 6529 0d0a 0d0a 2020  put_dtype)....  
+00036690: 2020 2020 2020 2020 2020 2320 4372 6561            # Crea
+000366a0: 7465 2074 6865 206f 7574 7075 7420 6172  te the output ar
+000366b0: 7261 792c 2070 6572 666f 726d 696e 6720  ray, performing 
+000366c0: 6120 7769 6465 6e69 6e67 2063 6f6e 7665  a widening conve
+000366d0: 7273 696f 6e20 2b20 6669 6c6c 696e 6720  rsion + filling 
+000366e0: 696e 206e 756c 6c73 2077 6974 6820 7468  in nulls with th
+000366f0: 6520 7269 7074 6162 6c65 2069 6e76 616c  e riptable inval
+00036700: 6964 2069 6620 6e65 6365 7373 6172 792e  id if necessary.
+00036710: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00036720: 544f 444f 3a20 5468 6973 2063 6f75 6c64  TODO: This could
+00036730: 2062 6520 6661 7374 6572 202d 2d20 6966   be faster -- if
+00036740: 2074 6865 7265 2773 2061 2077 6179 2074   there's a way t
+00036750: 6f20 6765 7420 6120 6e75 6d70 7920 626f  o get a numpy bo
+00036760: 6f6c 6561 6e20 6172 7261 7920 6672 6f6d  olean array from
+00036770: 2061 2070 7961 7272 6f77 2061 7272 6179   a pyarrow array
+00036780: 2773 206e 756c 6c2d 6d61 736b 2c0d 0a20  's null-mask,.. 
+00036790: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+000367a0: 2020 2077 6520 6361 6e20 636f 6e76 6572     we can conver
+000367b0: 7420 6469 7265 6374 6c79 2074 6f20 6e75  t directly to nu
+000367c0: 6d70 792f 7269 7074 6162 6c65 3b20 7468  mpy/riptable; th
+000367d0: 656e 2c20 7769 6465 6e20 7468 6520 4661  en, widen the Fa
+000367e0: 7374 4172 7261 7920 2877 6869 6368 276c  stArray (which'l
+000367f0: 6c20 6265 2070 6172 616c 6c65 6c69 7a65  l be parallelize
+00036800: 6429 3b0d 0a20 2020 2020 2020 2020 2020  d);..           
+00036810: 2023 2020 2020 2020 2074 6865 6e20 7573   #       then us
+00036820: 6520 7274 2e63 6f70 795f 746f 2829 202f  e rt.copy_to() /
+00036830: 2072 742e 7075 746d 6173 6b28 2920 746f   rt.putmask() to
+00036840: 206f 7665 7277 7269 7465 2074 6865 2065   overwrite the e
+00036850: 6c65 6d65 6e74 7320 6f66 2074 6865 2077  lements of the w
+00036860: 6964 656e 6564 2046 6173 7441 7272 6179  idened FastArray
+00036870: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00036880: 2020 2020 2020 636f 7272 6573 706f 6e64        correspond
+00036890: 696e 6720 746f 2074 6865 206e 756c 6c73  ing to the nulls
+000368a0: 2066 726f 6d20 7468 6520 6d61 736b 2077   from the mask w
+000368b0: 6974 6820 7468 6520 7269 7074 6162 6c65  ith the riptable
+000368c0: 2069 6e76 616c 6964 2076 616c 7565 2066   invalid value f
+000368d0: 6f72 2074 6865 206f 7574 7075 7420 6172  or the output ar
+000368e0: 7261 7920 7479 7065 2e0d 0a20 2020 2020  ray type...     
+000368f0: 2020 2020 2020 2069 6620 6172 725f 7061         if arr_pa
+00036900: 5f64 7479 7065 5f77 6964 656e 6564 2069  _dtype_widened i
+00036910: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+00036920: 2020 2020 2020 2020 2020 2020 2061 7272               arr
+00036930: 3a20 7061 2e41 7272 6179 203d 2061 7272  : pa.Array = arr
+00036940: 2e63 6173 7428 6172 725f 7061 5f64 7479  .cast(arr_pa_dty
+00036950: 7065 5f77 6964 656e 6564 290d 0a0d 0a20  pe_widened).... 
+00036960: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00036970: 6e20 6172 722e 6669 6c6c 5f6e 756c 6c28  n arr.fill_null(
+00036980: 6172 725f 7274 5f69 6e76 292e 746f 5f6e  arr_rt_inv).to_n
+00036990: 756d 7079 287a 6572 6f5f 636f 7079 5f6f  umpy(zero_copy_o
+000369a0: 6e6c 793d 4661 6c73 652c 2077 7269 7461  nly=False, writa
+000369b0: 626c 653d 7772 6974 6162 6c65 292e 7669  ble=writable).vi
+000369c0: 6577 2846 6173 7441 7272 6179 290d 0a0d  ew(FastArray)...
+000369d0: 0a20 2020 2020 2020 2065 6c69 6620 7061  .        elif pa
+000369e0: 742e 6973 5f66 6c6f 6174 696e 6728 6172  t.is_floating(ar
+000369f0: 722e 7479 7065 293a 0d0a 2020 2020 2020  r.type):..      
+00036a00: 2020 2020 2020 2320 466c 6f61 7469 6e67        # Floating
+00036a10: 2d70 6f69 6e74 2061 7272 6179 7320 6361  -point arrays ca
+00036a20: 6e20 6265 2063 6f6e 7665 7274 6564 2064  n be converted d
+00036a30: 6972 6563 746c 7920 746f 206e 756d 7079  irectly to numpy
+00036a40: 2c20 7369 6e63 6520 7079 6172 726f 7720  , since pyarrow 
+00036a50: 7769 6c6c 2061 7574 6f6d 6174 6963 616c  will automatical
+00036a60: 6c79 0d0a 2020 2020 2020 2020 2020 2020  ly..            
+00036a70: 2320 6669 6c6c 206e 756c 6c20 7661 6c75  # fill null valu
+00036a80: 6573 2077 6974 6820 4e61 4e2e 0d0a 2020  es with NaN...  
+00036a90: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00036aa0: 2061 7272 2e74 6f5f 6e75 6d70 7928 7a65   arr.to_numpy(ze
+00036ab0: 726f 5f63 6f70 795f 6f6e 6c79 3d7a 6572  ro_copy_only=zer
+00036ac0: 6f5f 636f 7079 5f6f 6e6c 792c 2077 7269  o_copy_only, wri
+00036ad0: 7461 626c 653d 7772 6974 6162 6c65 292e  table=writable).
+00036ae0: 7669 6577 2846 6173 7441 7272 6179 290d  view(FastArray).
+00036af0: 0a0d 0a20 2020 2020 2020 2065 6c69 6620  ...        elif 
+00036b00: 7061 742e 6973 5f62 6f6f 6c65 616e 2861  pat.is_boolean(a
+00036b10: 7272 2e74 7970 6529 3a0d 0a20 2020 2020  rr.type):..     
+00036b20: 2020 2020 2020 2023 2042 6f6f 6c65 616e         # Boolean
+00036b30: 2061 7272 6179 7320 6361 6e20 6f6e 6c79   arrays can only
+00036b40: 2062 6520 636f 6e76 6572 7465 6420 7768   be converted wh
+00036b50: 656e 2074 6865 7920 646f 206e 6f74 2063  en they do not c
+00036b60: 6f6e 7461 696e 206e 756c 6c73 2e0d 0a20  ontain nulls... 
+00036b70: 2020 2020 2020 2020 2020 2023 2072 6970             # rip
+00036b80: 7461 626c 6520 646f 6573 206e 6f74 2073  table does not s
+00036b90: 7570 706f 7274 2061 6e20 2769 6e76 616c  upport an 'inval
+00036ba0: 6964 272f 4e41 2076 616c 7565 2066 6f72  id'/NA value for
+00036bb0: 2062 6f6f 6c65 616e 2c20 736f 2070 7961   boolean, so pya
+00036bc0: 7272 6f77 2061 7272 6179 730d 0a20 2020  rrow arrays..   
+00036bd0: 2020 2020 2020 2020 2023 2077 6974 6820           # with 
+00036be0: 6e75 6c6c 7320 6361 6e27 7420 6265 2072  nulls can't be r
+00036bf0: 6570 7265 7365 6e74 6564 2069 6e20 7269  epresented in ri
+00036c00: 7074 6162 6c65 2e0d 0a20 2020 2020 2020  ptable...       
+00036c10: 2020 2020 2069 6620 6172 722e 6e75 6c6c       if arr.null
+00036c20: 5f63 6f75 6e74 203d 3d20 303a 0d0a 2020  _count == 0:..  
+00036c30: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00036c40: 7475 726e 2061 7272 2e74 6f5f 6e75 6d70  turn arr.to_nump
+00036c50: 7928 7a65 726f 5f63 6f70 795f 6f6e 6c79  y(zero_copy_only
+00036c60: 3d7a 6572 6f5f 636f 7079 5f6f 6e6c 792c  =zero_copy_only,
+00036c70: 2077 7269 7461 626c 653d 7772 6974 6162   writable=writab
+00036c80: 6c65 292e 7669 6577 2846 6173 7441 7272  le).view(FastArr
+00036c90: 6179 290d 0a20 2020 2020 2020 2020 2020  ay)..           
+00036ca0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00036cb0: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
+00036cc0: 6c75 6545 7272 6f72 280d 0a20 2020 2020  lueError(..     
+00036cd0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00036ce0: 7269 7074 6162 6c65 2062 6f6f 6c65 616e  riptable boolean
+00036cf0: 2061 7272 6179 7320 646f 206e 6f74 2073   arrays do not s
+00036d00: 7570 706f 7274 2061 6e20 696e 7661 6c69  upport an invali
+00036d10: 6420 7661 6c75 652c 2073 6f20 7468 6579  d value, so they
+00036d20: 2063 616e 6e6f 7420 6265 2063 7265 6174   cannot be creat
+00036d30: 6564 2066 726f 6d20 7079 6172 726f 7720  ed from pyarrow 
+00036d40: 6172 7261 7973 2063 6f6e 7461 696e 696e  arrays containin
+00036d50: 6720 6e75 6c6c 732e 220d 0a20 2020 2020  g nulls."..     
+00036d60: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
+00036d70: 2020 2020 2020 2020 656c 6966 2070 6174          elif pat
+00036d80: 2e69 735f 7374 7269 6e67 2861 7272 2e74  .is_string(arr.t
+00036d90: 7970 6529 206f 7220 7061 742e 6973 5f6c  ype) or pat.is_l
+00036da0: 6172 6765 5f73 7472 696e 6728 6172 722e  arge_string(arr.
+00036db0: 7479 7065 293a 0d0a 2020 2020 2020 2020  type):..        
+00036dc0: 2020 2020 2320 7079 6172 726f 7720 7661      # pyarrow va
+00036dd0: 7269 6162 6c65 2d6c 656e 6774 6820 7374  riable-length st
+00036de0: 7269 6e67 2061 7272 6179 7320 6361 6e20  ring arrays can 
+00036df0: 5f6e 6576 6572 5f20 6265 207a 6572 6f2d  _never_ be zero-
+00036e00: 636f 7079 2063 6f6e 7665 7274 6564 2074  copy converted t
+00036e10: 6f20 6669 7865 642d 6c65 6e67 7468 206e  o fixed-length n
+00036e20: 756d 7079 2f72 6970 7461 626c 6520 6172  umpy/riptable ar
+00036e30: 7261 7973 0d0a 2020 2020 2020 2020 2020  rays..          
+00036e40: 2020 2320 6265 6361 7573 6520 6f66 2064    # because of d
+00036e50: 6966 6665 7265 6e63 6573 2069 6e20 7468  ifferences in th
+00036e60: 6520 6d65 6d6f 7279 206c 6179 6f75 742e  e memory layout.
+00036e70: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00036e80: 207a 6572 6f5f 636f 7079 5f6f 6e6c 793a   zero_copy_only:
+00036e90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00036ea0: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+00036eb0: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
+00036ec0: 2020 2020 2020 2020 2022 7079 6172 726f           "pyarro
+00036ed0: 7720 7661 7269 6162 6c65 2d6c 656e 6774  w variable-lengt
+00036ee0: 6820 7374 7269 6e67 2061 7272 6179 7320  h string arrays 
+00036ef0: 6361 6e6e 6f74 2062 6520 7a65 726f 2d63  cannot be zero-c
+00036f00: 6f70 7920 636f 6e76 6572 7465 6420 746f  opy converted to
+00036f10: 2072 6970 7461 626c 6520 6172 7261 7973   riptable arrays
+00036f20: 2e22 0d0a 2020 2020 2020 2020 2020 2020  ."..            
+00036f30: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
+00036f40: 2020 2020 2023 2043 6865 636b 2066 6f72       # Check for
+00036f50: 2077 6865 7468 6572 2074 6865 2061 7272   whether the arr
+00036f60: 6179 2063 6f6e 7461 696e 7320 6f6e 6c79  ay contains only
+00036f70: 2041 5343 4949 2073 7472 696e 6773 2e0d   ASCII strings..
+00036f80: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
+00036f90: 6869 7320 6973 2075 7365 6420 746f 2067  his is used to g
+00036fa0: 7569 6465 2068 6f77 2074 6865 2046 6173  uide how the Fas
+00036fb0: 7441 7272 6179 2069 7320 6372 6561 7465  tArray is create
+00036fc0: 642e 0d0a 2020 2020 2020 2020 2020 2020  d...            
+00036fd0: 6861 735f 756e 6963 6f64 6520 3d20 6e6f  has_unicode = no
+00036fe0: 7420 7063 2e61 6c6c 2870 632e 7374 7269  t pc.all(pc.stri
+00036ff0: 6e67 5f69 735f 6173 6369 6928 6172 7229  ng_is_ascii(arr)
+00037000: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00037010: 2023 2043 6f6e 7665 7274 2074 6865 2061   # Convert the a
+00037020: 7272 6179 2074 6f20 6120 6e75 6d70 7920  rray to a numpy 
+00037030: 6172 7261 792e 0d0a 2020 2020 2020 2020  array...        
+00037040: 2020 2020 2320 556e 666f 7274 756e 6174      # Unfortunat
+00037050: 656c 792c 2061 7320 6f66 2070 7961 7272  ely, as of pyarr
+00037060: 6f77 2034 2e30 2c20 7468 6973 2063 6f6e  ow 4.0, this con
+00037070: 7665 7273 696f 6e20 616c 7761 7973 2070  version always p
+00037080: 726f 6475 6365 7320 6120 6e75 6d70 7920  roduces a numpy 
+00037090: 6f62 6a65 6374 2061 7272 6179 2063 6f6e  object array con
+000370a0: 7461 696e 696e 6720 7468 650d 0a20 2020  taining the..   
+000370b0: 2020 2020 2020 2020 2023 2073 7472 696e           # strin
+000370c0: 6773 2028 6173 2050 7974 686f 6e20 7374  gs (as Python st
+000370d0: 7269 6e67 7329 2072 6174 6865 7220 7468  rings) rather th
+000370e0: 616e 2061 206e 756d 7079 2073 7472 696e  an a numpy strin
+000370f0: 6720 6172 7261 792e 0d0a 2020 2020 2020  g array...      
+00037100: 2020 2020 2020 2320 5765 2772 6520 6162        # We're ab
+00037110: 6c65 2074 6f20 6861 6e64 6c65 2074 6869  le to handle thi
+00037120: 7320 746f 2072 6574 7572 6e20 7468 6520  s to return the 
+00037130: 7365 6e73 6962 6c65 2074 6869 6e67 2066  sensible thing f
+00037140: 6f72 2072 6970 7461 626c 6520 7573 6572  or riptable user
+00037150: 732c 2062 7574 2069 7420 646f 6573 206d  s, but it does m
+00037160: 6561 6e20 7468 6973 2063 6f6e 7665 7273  ean this convers
+00037170: 696f 6e0d 0a20 2020 2020 2020 2020 2020  ion..           
+00037180: 2023 2069 7320 736c 6f77 6572 2074 6861   # is slower tha
+00037190: 6e20 6e65 6365 7373 6172 7920 7269 6768  n necessary righ
+000371a0: 7420 6e6f 772e 0d0a 2020 2020 2020 2020  t now...        
+000371b0: 2020 2020 2320 544f 444f 3a20 4173 6b20      # TODO: Ask 
+000371c0: 7079 6172 726f 772d 6465 7620 6162 6f75  pyarrow-dev abou
+000371d0: 7420 696d 706c 656d 656e 7469 6e67 2061  t implementing a
+000371e0: 6e20 6f70 7469 6f6e 2074 6f20 7265 7475  n option to retu
+000371f0: 726e 2061 206e 756d 7079 2027 5327 206f  rn a numpy 'S' o
+00037200: 7220 2755 2720 6172 7261 7920 696e 7374  r 'U' array inst
+00037210: 6561 642c 2069 7427 6c6c 2062 650d 0a20  ead, it'll be.. 
+00037220: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+00037230: 2020 206d 7563 6820 6d6f 7265 2065 6666     much more eff
+00037240: 6963 6965 6e74 2c20 6576 656e 2074 686f  icient, even tho
+00037250: 7567 6820 736f 6d65 2073 7061 6365 2077  ugh some space w
+00037260: 696c 6c20 6265 2077 6173 7465 6420 6475  ill be wasted du
+00037270: 6520 746f 206e 756d 7079 206e 6f74 2073  e to numpy not s
+00037280: 7570 706f 7274 696e 6720 7661 7269 6162  upporting variab
+00037290: 6c65 2d6c 656e 6774 6820 7374 7269 6e67  le-length string
+000372a0: 732e 0d0a 2020 2020 2020 2020 2020 2020  s...            
+000372b0: 2320 544f 444f 3a20 436f 6e73 6964 6572  # TODO: Consider
+000372c0: 2063 6f6e 7665 7274 696e 6720 7468 6520   converting the 
+000372d0: 7079 6172 726f 7720 6172 7261 7920 746f  pyarrow array to
+000372e0: 2061 2064 6963 7469 6f6e 6172 792d 656e   a dictionary-en
+000372f0: 636f 6465 6420 6172 7261 7920 2d2d 2069  coded array -- i
+00037300: 6620 7468 6572 6520 6172 6520 6f6e 6c79  f there are only
+00037310: 2061 2066 6577 2075 6e69 7175 6573 2c0d   a few uniques,.
+00037320: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+00037330: 2020 2020 2069 7427 6c6c 2062 6520 6d6f       it'll be mo
+00037340: 7265 2065 6666 6963 6965 6e74 2028 6576  re efficient (ev
+00037350: 656e 2074 686f 7567 6820 646f 696e 6720  en though doing 
+00037360: 6d6f 7265 2077 6f72 6b29 2062 7920 6176  more work) by av
+00037370: 6f69 6469 6e67 2072 6570 6574 6974 6976  oiding repetitiv
+00037380: 6520 6372 6561 7469 6f6e 206f 6620 7468  e creation of th
+00037390: 6520 5079 7468 6f6e 2073 7472 696e 6720  e Python string 
+000373a0: 6f62 6a65 6374 732e 0d0a 2020 2020 2020  objects...      
+000373b0: 2020 2020 2020 6966 2061 7272 2e6e 756c        if arr.nul
+000373c0: 6c5f 636f 756e 7420 3d3d 2030 3a0d 0a20  l_count == 0:.. 
+000373d0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+000373e0: 6d70 203d 2061 7272 2e74 6f5f 6e75 6d70  mp = arr.to_nump
+000373f0: 7928 7a65 726f 5f63 6f70 795f 6f6e 6c79  y(zero_copy_only
+00037400: 3d46 616c 7365 2c20 7772 6974 6162 6c65  =False, writable
+00037410: 3d77 7269 7461 626c 6529 0d0a 0d0a 2020  =writable)....  
+00037420: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+00037430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00037440: 2023 204e 6565 6420 746f 2066 696c 6c20   # Need to fill 
+00037450: 6e75 6c6c 7320 7769 7468 2061 6e20 656d  nulls with an em
+00037460: 7074 7920 7374 7269 6e67 2062 6566 6f72  pty string befor
+00037470: 6520 636f 6e76 6572 7469 6e67 2074 6f20  e converting to 
+00037480: 6e75 6d70 792e 0d0a 2020 2020 2020 2020  numpy...        
+00037490: 2020 2020 2020 2020 2320 2849 4e56 414c          # (INVAL
+000374a0: 4944 5f44 4943 545b 6e70 2e64 7479 7065  ID_DICT[np.dtype
+000374b0: 2827 5527 292e 6e75 6d5d 203d 3d20 2727  ('U').num] == ''
+000374c0: 292e 0d0a 2020 2020 2020 2020 2020 2020  )...            
+000374d0: 2020 2020 746d 7020 3d20 6172 722e 6669      tmp = arr.fi
+000374e0: 6c6c 5f6e 756c 6c28 2222 292e 746f 5f6e  ll_null("").to_n
+000374f0: 756d 7079 287a 6572 6f5f 636f 7079 5f6f  umpy(zero_copy_o
+00037500: 6e6c 793d 4661 6c73 652c 2077 7269 7461  nly=False, writa
+00037510: 626c 653d 7772 6974 6162 6c65 290d 0a0d  ble=writable)...
+00037520: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+00037530: 756c 7420 3d20 4661 7374 4172 7261 7928  ult = FastArray(
+00037540: 746d 702c 2064 7479 7065 3d73 7472 2c20  tmp, dtype=str, 
+00037550: 756e 6963 6f64 653d 6861 735f 756e 6963  unicode=has_unic
+00037560: 6f64 6529 0d0a 2020 2020 2020 2020 2020  ode)..          
+00037570: 2020 6966 206e 6f74 2077 7269 7461 626c    if not writabl
+00037580: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00037590: 2020 2020 7265 7375 6c74 2e66 6c61 6773      result.flags
+000375a0: 2e77 7269 7465 6162 6c65 203d 2046 616c  .writeable = Fal
+000375b0: 7365 0d0a 2020 2020 2020 2020 2020 2020  se..            
+000375c0: 7265 7475 726e 2072 6573 756c 740d 0a0d  return result...
+000375d0: 0a20 2020 2020 2020 2065 6c69 6620 7061  .        elif pa
+000375e0: 742e 6973 5f66 6978 6564 5f73 697a 655f  t.is_fixed_size_
+000375f0: 6269 6e61 7279 2861 7272 2e74 7970 6529  binary(arr.type)
+00037600: 3a0d 0a20 2020 2020 2020 2020 2020 206e  :..            n
+00037610: 756c 6c5f 636f 756e 7420 3d20 6172 722e  ull_count = arr.
+00037620: 6e75 6c6c 5f63 6f75 6e74 0d0a 2020 2020  null_count..    
+00037630: 2020 2020 2020 2020 6966 206e 756c 6c5f          if null_
+00037640: 636f 756e 7420 213d 2030 3a0d 0a20 2020  count != 0:..   
+00037650: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00037660: 7a65 726f 5f63 6f70 795f 6f6e 6c79 3a0d  zero_copy_only:.
+00037670: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00037680: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
+00037690: 4572 726f 7228 0d0a 2020 2020 2020 2020  Error(..        
+000376a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000376b0: 2243 616e 2774 2070 6572 666f 726d 2061  "Can't perform a
+000376c0: 207a 6572 6f2d 636f 7079 2063 6f6e 7665   zero-copy conve
+000376d0: 7273 696f 6e20 6f66 2061 2066 6978 6564  rsion of a fixed
+000376e0: 2d73 697a 6520 6269 6e61 7279 2061 7272  -size binary arr
+000376f0: 6179 2074 6f20 7269 7074 6162 6c65 2077  ay to riptable w
+00037700: 6865 6e20 7468 6520 696e 7075 7420 6172  hen the input ar
+00037710: 7261 7920 636f 6e74 6169 6e73 206e 756c  ray contains nul
+00037720: 6c73 2e22 0d0a 2020 2020 2020 2020 2020  ls."..          
+00037730: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
+00037740: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00037750: 7272 203d 2061 7272 2e66 696c 6c5f 6e75  rr = arr.fill_nu
+00037760: 6c6c 280d 0a20 2020 2020 2020 2020 2020  ll(..           
+00037770: 2020 2020 2020 2020 2062 225c 7830 3022           b"\x00"
+00037780: 202a 2061 7272 2e74 7970 652e 6279 7465   * arr.type.byte
+00037790: 5f77 6964 7468 0d0a 2020 2020 2020 2020  _width..        
+000377a0: 2020 2020 2020 2020 2920 2023 2063 616e          )  # can
+000377b0: 2774 2066 696c 6c20 7769 7468 2062 2222  't fill with b""
+000377c0: 2c20 7369 6e63 6520 6222 2220 6973 206e  , since b"" is n
+000377d0: 6f74 2076 616c 6964 2066 6f72 2066 6978  ot valid for fix
+000377e0: 6564 2077 6964 7468 2074 7970 650d 0a0d  ed width type...
+000377f0: 0a20 2020 2020 2020 2020 2020 2023 2043  .            # C
+00037800: 616c 6c69 6e67 2070 612e 4172 7261 792e  alling pa.Array.
+00037810: 746f 5f6e 756d 7079 2077 6974 6820 7a65  to_numpy with ze
+00037820: 726f 5f63 6f70 793d 5472 7565 2072 6169  ro_copy=True rai
+00037830: 7365 7320 616e 2065 7272 6f72 2077 6974  ses an error wit
+00037840: 6820 6669 7865 6420 7369 7a65 6420 6269  h fixed sized bi
+00037850: 6e61 7279 2074 7970 652e 0d0a 2020 2020  nary type...    
+00037860: 2020 2020 2020 2020 2320 4361 6c6c 696e          # Callin
+00037870: 6720 7061 2e41 7272 6179 2e74 6f5f 6e75  g pa.Array.to_nu
+00037880: 6d70 7920 7769 7468 207a 6572 6f5f 636f  mpy with zero_co
+00037890: 7079 3d46 616c 7365 2072 6574 7572 6e73  py=False returns
+000378a0: 2061 206e 756d 7079 2061 7272 6179 2077   a numpy array w
+000378b0: 6865 7265 2074 7970 6573 2061 7265 2070  here types are p
+000378c0: 7974 686f 6e20 6279 7465 7320 6f62 6a65  ython bytes obje
+000378d0: 6374 732e 0d0a 2020 2020 2020 2020 2020  cts...          
+000378e0: 2020 2320 576f 726b 6172 6f75 6e64 2062    # Workaround b
+000378f0: 656c 6f77 2063 7265 6174 6573 2074 6865  elow creates the
+00037900: 206e 756d 7079 2062 7566 6665 7220 6f66   numpy buffer of
+00037910: 2074 7970 6520 2253 2220 6d61 6e75 616c   type "S" manual
+00037920: 6c79 2e0d 0a20 2020 2020 2020 2020 2020  ly...           
+00037930: 2062 7566 203d 206e 702e 6672 6f6d 6275   buf = np.frombu
+00037940: 6666 6572 280d 0a20 2020 2020 2020 2020  ffer(..         
+00037950: 2020 2020 2020 2061 7272 2e62 7566 6665         arr.buffe
+00037960: 7273 2829 5b31 5d2c 0d0a 2020 2020 2020  rs()[1],..      
+00037970: 2020 2020 2020 2020 2020 6474 7970 653d            dtype=
+00037980: 2253 2220 2b20 7374 7228 6172 722e 7479  "S" + str(arr.ty
+00037990: 7065 2e62 7974 655f 7769 6474 6829 2c0d  pe.byte_width),.
+000379a0: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+000379b0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+000379c0: 2077 7269 7461 626c 6520 616e 6420 6e75   writable and nu
+000379d0: 6c6c 5f63 6f75 6e74 203d 3d20 303a 2020  ll_count == 0:  
+000379e0: 2320 616c 7265 6164 7920 6d61 6465 2061  # already made a
+000379f0: 2063 6f70 7920 6966 206e 756c 6c5f 636f   copy if null_co
+00037a00: 756e 7420 213d 2030 0d0a 2020 2020 2020  unt != 0..      
+00037a10: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00037a20: 203d 2046 6173 7441 7272 6179 286e 702e   = FastArray(np.
+00037a30: 636f 7079 2862 7566 2929 0d0a 2020 2020  copy(buf))..    
+00037a40: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00037a50: 6c74 2e66 6c61 6773 2e77 7269 7465 6162  lt.flags.writeab
+00037a60: 6c65 203d 2077 7269 7461 626c 650d 0a20  le = writable.. 
+00037a70: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00037a80: 6574 7572 6e20 7265 7375 6c74 0d0a 0d0a  eturn result....
+00037a90: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00037aa0: 6c74 203d 2046 6173 7441 7272 6179 2862  lt = FastArray(b
+00037ab0: 7566 290d 0a20 2020 2020 2020 2020 2020  uf)..           
+00037ac0: 2072 6573 756c 742e 666c 6167 732e 7772   result.flags.wr
+00037ad0: 6974 6561 626c 6520 3d20 7772 6974 6162  iteable = writab
+00037ae0: 6c65 0d0a 2020 2020 2020 2020 2020 2020  le..            
+00037af0: 7265 7475 726e 2072 6573 756c 740d 0a0d  return result...
+00037b00: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
+00037b10: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00037b20: 6520 5661 6c75 6545 7272 6f72 280d 0a20  e ValueError(.. 
+00037b30: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00037b40: 2246 6173 7441 7272 6179 2063 616e 6e6f  "FastArray canno
+00037b50: 7420 6265 2063 7265 6174 6564 2066 726f  t be created fro
+00037b60: 6d20 6120 7079 6172 726f 7720 6172 7261  m a pyarrow arra
+00037b70: 7920 6f66 2074 7970 6520 277b 6172 722e  y of type '{arr.
+00037b80: 7479 7065 7d27 2e20 596f 7520 6d61 7920  type}'. You may 
+00037b90: 6e65 6564 2074 6f20 6361 6c6c 2074 6865  need to call the
+00037ba0: 2060 6672 6f6d 5f61 7272 6f77 6020 6d65   `from_arrow` me
+00037bb0: 7468 6f64 206f 6e20 6f6e 6520 6f66 2074  thod on one of t
+00037bc0: 6865 2064 6572 6976 6564 2073 7562 636c  he derived subcl
+00037bd0: 6173 7365 7320 696e 7374 6561 642e 220d  asses instead.".
+00037be0: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+00037bf0: 0d0a 2020 2020 6465 6620 746f 5f61 7272  ..    def to_arr
+00037c00: 6f77 280d 0a20 2020 2020 2020 2073 656c  ow(..        sel
+00037c10: 662c 0d0a 2020 2020 2020 2020 7479 7065  f,..        type
+00037c20: 3a20 4f70 7469 6f6e 616c 5b22 7061 2e44  : Optional["pa.D
+00037c30: 6174 6154 7970 6522 5d20 3d20 4e6f 6e65  ataType"] = None
+00037c40: 2c0d 0a20 2020 2020 2020 202a 2c0d 0a20  ,..        *,.. 
+00037c50: 2020 2020 2020 2070 7265 7365 7276 655f         preserve_
+00037c60: 6669 7865 645f 6279 7465 733a 2062 6f6f  fixed_bytes: boo
+00037c70: 6c20 3d20 4661 6c73 652c 0d0a 2020 2020  l = False,..    
+00037c80: 2020 2020 656d 7074 795f 7374 7269 6e67      empty_string
+00037c90: 735f 746f 5f6e 756c 6c3a 2062 6f6f 6c20  s_to_null: bool 
+00037ca0: 3d20 5472 7565 2c0d 0a20 2020 2029 202d  = True,..    ) -
+00037cb0: 3e20 556e 696f 6e5b 2270 612e 4172 7261  > Union["pa.Arra
+00037cc0: 7922 2c20 2270 612e 4368 756e 6b65 6441  y", "pa.ChunkedA
+00037cd0: 7272 6179 225d 3a0d 0a20 2020 2020 2020  rray"]:..       
+00037ce0: 2022 2222 0d0a 2020 2020 2020 2020 436f   """..        Co
+00037cf0: 6e76 6572 7420 7468 6973 2060 4661 7374  nvert this `Fast
+00037d00: 4172 7261 7960 2074 6f20 6120 6070 7961  Array` to a `pya
+00037d10: 7272 6f77 2e41 7272 6179 602e 0d0a 0d0a  rrow.Array`.....
+00037d20: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
+00037d30: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
+00037d40: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00037d50: 7479 7065 203a 2070 7961 7272 6f77 2e44  type : pyarrow.D
+00037d60: 6174 6154 7970 652c 206f 7074 696f 6e61  ataType, optiona
+00037d70: 6c2c 2064 6566 6175 6c74 7320 746f 204e  l, defaults to N
+00037d80: 6f6e 650d 0a20 2020 2020 2020 2070 7265  one..        pre
+00037d90: 7365 7276 655f 6669 7865 645f 6279 7465  serve_fixed_byte
+00037da0: 7320 3a20 626f 6f6c 2c20 6f70 7469 6f6e  s : bool, option
+00037db0: 616c 2c20 6465 6661 756c 7473 2074 6f20  al, defaults to 
+00037dc0: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
+00037dd0: 2020 2049 6620 7468 6973 2060 4661 7374     If this `Fast
+00037de0: 4172 7261 7960 2069 7320 616e 2041 5343  Array` is an ASC
+00037df0: 4949 2073 7472 696e 6720 6172 7261 7920  II string array 
+00037e00: 2864 7479 7065 2e6b 696e 6420 3d3d 2027  (dtype.kind == '
+00037e10: 5327 292c 0d0a 2020 2020 2020 2020 2020  S'),..          
+00037e20: 2020 7365 7420 7468 6973 2070 6172 616d    set this param
+00037e30: 6574 6572 2074 6f20 5472 7565 2074 6f20  eter to True to 
+00037e40: 7072 6f64 7563 6520 6120 6669 7865 642d  produce a fixed-
+00037e50: 6c65 6e67 7468 2062 696e 6172 7920 6172  length binary ar
+00037e60: 7261 790d 0a20 2020 2020 2020 2020 2020  ray..           
+00037e70: 2069 6e73 7465 6164 206f 6620 6120 7661   instead of a va
+00037e80: 7269 6162 6c65 2d6c 656e 6774 6820 7374  riable-length st
+00037e90: 7269 6e67 2061 7272 6179 2e0d 0a20 2020  ring array...   
+00037ea0: 2020 2020 2065 6d70 7479 5f73 7472 696e       empty_strin
+00037eb0: 6773 5f74 6f5f 6e75 6c6c 203a 2062 6f6f  gs_to_null : boo
+00037ec0: 6c2c 206f 7074 696f 6e61 6c2c 2064 6566  l, optional, def
+00037ed0: 6175 6c74 7320 546f 2054 7275 650d 0a20  aults To True.. 
+00037ee0: 2020 2020 2020 2020 2020 2049 6620 7468             If th
+00037ef0: 6973 2060 4661 7374 4172 7261 7960 2069  is `FastArray` i
+00037f00: 7320 616e 2041 5343 4949 206f 7220 556e  s an ASCII or Un
+00037f10: 6963 6f64 6520 7374 7269 6e67 2061 7272  icode string arr
+00037f20: 6179 2c0d 0a20 2020 2020 2020 2020 2020  ay,..           
+00037f30: 2073 7065 6369 6679 2054 7275 6520 666f   specify True fo
+00037f40: 7220 7468 6973 2070 6172 616d 6574 6572  r this parameter
+00037f50: 2074 6f20 636f 6e76 6572 7420 656d 7074   to convert empt
+00037f60: 7920 7374 7269 6e67 7320 746f 206e 756c  y strings to nul
+00037f70: 6c73 2069 6e20 7468 6520 6f75 7470 7574  ls in the output
+00037f80: 2e0d 0a20 2020 2020 2020 2020 2020 2072  ...            r
+00037f90: 6970 7461 626c 6520 696e 636f 6e73 6973  iptable inconsis
+00037fa0: 7465 6e74 6c79 2072 6563 6f67 6e69 7a65  tently recognize
+00037fb0: 7320 7468 6520 656d 7074 7920 7374 7269  s the empty stri
+00037fc0: 6e67 2061 7320 616e 2027 696e 7661 6c69  ng as an 'invali
+00037fd0: 6427 2c0d 0a20 2020 2020 2020 2020 2020  d',..           
+00037fe0: 2073 6f20 7468 6973 2070 6172 616d 6574   so this paramet
+00037ff0: 6572 2061 6c6c 6f77 7320 7468 6520 6361  er allows the ca
+00038000: 6c6c 6572 2074 6f20 7370 6563 6966 7920  ller to specify 
+00038010: 7768 6963 6820 696e 7465 7270 7265 7461  which interpreta
+00038020: 7469 6f6e 0d0a 2020 2020 2020 2020 2020  tion..          
+00038030: 2020 7468 6579 2077 616e 742e 0d0a 0d0a    they want.....
+00038040: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
+00038050: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00038060: 0d0a 2020 2020 2020 2020 7079 6172 726f  ..        pyarro
+00038070: 772e 4172 7261 7920 6f72 2070 7961 7272  w.Array or pyarr
+00038080: 6f77 2e43 6875 6e6b 6564 4172 7261 790d  ow.ChunkedArray.
+00038090: 0a0d 0a20 2020 2020 2020 204e 6f74 6573  ...        Notes
+000380a0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d0d  ..        -----.
+000380b0: 0a20 2020 2020 2020 2054 4f44 4f3a 2041  .        TODO: A
+000380c0: 6464 2062 6f6f 6c20 7061 7261 6d65 7465  dd bool paramete
+000380d0: 7220 7768 6963 6820 6469 7265 6374 7320  r which directs 
+000380e0: 7468 6520 636f 6e76 6572 7369 6f6e 2074  the conversion t
+000380f0: 6f20 6368 6f6f 7365 2074 6865 206d 6f73  o choose the mos
+00038100: 742d 636f 6d70 6163 7420 6f75 7470 7574  t-compact output
+00038110: 2074 7970 6520 706f 7373 6962 6c65 3f0d   type possible?.
+00038120: 0a20 2020 2020 2020 2020 2020 2020 2054  .              T
+00038130: 6869 7320 776f 756c 6420 6265 2072 656c  his would be rel
+00038140: 6576 616e 7420 746f 2069 6e64 6963 6573  evant to indices
+00038150: 206f 6620 6361 7465 676f 7269 6361 6c2f   of categorical/
+00038160: 6469 6374 696f 6e61 7279 2d65 6e63 6f64  dictionary-encod
+00038170: 6564 2061 7272 6179 732c 2062 7574 2063  ed arrays, but c
+00038180: 6f75 6c64 2061 6c73 6f20 6d61 6b65 2073  ould also make s
+00038190: 656e 7365 0d0a 2020 2020 2020 2020 2020  ense..          
+000381a0: 2020 2020 666f 7220 7265 6775 6c61 7220      for regular 
+000381b0: 4661 7374 4172 7261 7920 7479 7065 7320  FastArray types 
+000381c0: 2865 2e67 2e20 746f 2075 7365 2061 6e20  (e.g. to use an 
+000381d0: 696e 7438 2069 6e73 7465 6164 206f 6620  int8 instead of 
+000381e0: 616e 2069 6e74 3332 2077 6865 6e20 6974  an int32 when it
+000381f0: 2764 2062 6520 6120 6c6f 7373 6c65 7373  'd be a lossless
+00038200: 2063 6f6e 7665 7273 696f 6e29 2e0d 0a20   conversion)... 
+00038210: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00038220: 2020 2020 696d 706f 7274 2062 7569 6c74      import built
+00038230: 696e 730d 0a0d 0a20 2020 2020 2020 2069  ins....        i
+00038240: 6d70 6f72 7420 7079 6172 726f 7720 6173  mport pyarrow as
+00038250: 2070 610d 0a0d 0a20 2020 2020 2020 2023   pa....        #
+00038260: 2044 6572 6976 6564 2061 7272 6179 2074   Derived array t
+00038270: 7970 6573 204d 5553 5420 696d 706c 656d  ypes MUST implem
+00038280: 656e 7420 7468 6569 7220 6f77 6e20 6f76  ent their own ov
+00038290: 6572 6c6f 6164 206f 6620 7468 6973 2066  erload of this f
+000382a0: 756e 6374 696f 6e0d 0a20 2020 2020 2020  unction..       
+000382b0: 2023 2066 6f72 2063 6f72 7265 6374 6e65   # for correctne
+000382c0: 7373 3b20 666f 7220 7468 6174 2072 6561  ss; for that rea
+000382d0: 736f 6e2c 2072 6169 7365 2061 6e20 6572  son, raise an er
+000382e0: 726f 7220 6966 2073 6f6d 656f 6e65 2061  ror if someone a
+000382f0: 7474 656d 7074 7320 746f 0d0a 2020 2020  ttempts to..    
+00038300: 2020 2020 2320 6361 6c6c 202a 7468 6973      # call *this
+00038310: 2a20 696d 706c 656d 656e 7461 7469 6f6e  * implementation
+00038320: 206f 6620 7468 6520 6d65 7468 6f64 2066   of the method f
+00038330: 6f72 2061 2064 6572 6976 6564 2061 7272  or a derived arr
+00038340: 6179 2074 7970 652e 0d0a 2020 2020 2020  ay type...      
+00038350: 2020 6966 2062 7569 6c74 696e 732e 7479    if builtins.ty
+00038360: 7065 2873 656c 6629 2021 3d20 4661 7374  pe(self) != Fast
+00038370: 4172 7261 793a 0d0a 2020 2020 2020 2020  Array:..        
+00038380: 2020 2020 7261 6973 6520 4e6f 7449 6d70      raise NotImp
+00038390: 6c65 6d65 6e74 6564 4572 726f 7228 0d0a  lementedError(..
+000383a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000383b0: 6622 5468 6520 607b 6275 696c 7469 6e73  f"The `{builtins
+000383c0: 2e74 7970 6528 7365 6c66 292e 5f5f 7175  .type(self).__qu
+000383d0: 616c 6e61 6d65 5f5f 7d60 2074 7970 6520  alname__}` type 
+000383e0: 6d75 7374 2069 6d70 6c65 6d65 6e74 2069  must implement i
+000383f0: 7427 7320 6f77 6e20 6f76 6572 7269 6465  t's own override
+00038400: 206f 6620 7468 6520 6074 6f5f 6172 726f   of the `to_arro
+00038410: 7728 2960 206d 6574 686f 642e 220d 0a20  w()` method.".. 
+00038420: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
+00038430: 2020 2020 2020 2020 2320 7269 7074 6162          # riptab
+00038440: 6c65 2028 6174 206c 6561 7374 2061 7320  le (at least as 
+00038450: 6f66 2031 2e30 2e35 3629 2064 6f65 7320  of 1.0.56) does 
+00038460: 6e6f 7420 2a74 7275 6c79 2a20 7375 7070  not *truly* supp
+00038470: 6f72 7420 696e 7661 6c69 642f 4e41 2076  ort invalid/NA v
+00038480: 616c 7565 730d 0a20 2020 2020 2020 2023  alues..        #
+00038490: 2069 6e20 626f 6f6c 206f 7220 6173 6369   in bool or asci
+000384a0: 692f 756e 6963 6f64 6520 7374 7269 6e67  i/unicode string
+000384b0: 2d74 7970 6564 2061 7272 6179 732e 2048  -typed arrays. H
+000384c0: 616e 646c 6520 7468 6f73 6520 6474 7970  andle those dtyp
+000384d0: 6573 2073 7065 6369 616c 6c79 2e0d 0a20  es specially... 
+000384e0: 2020 2020 2020 2069 6620 6e70 2e69 7373         if np.iss
+000384f0: 7562 6474 7970 6528 7365 6c66 2e64 7479  ubdtype(self.dty
+00038500: 7065 2c20 6e70 2e69 6e74 6567 6572 293a  pe, np.integer):
+00038510: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00038520: 544f 444f 3a20 4966 2074 6869 7320 6172  TODO: If this ar
+00038530: 7261 7920 6861 7320 2e6e 6469 6d73 203e  ray has .ndims >
+00038540: 3d20 322c 206e 6565 6420 746f 2063 6f6e  = 2, need to con
+00038550: 7665 7274 2074 6f20 7079 6172 726f 7720  vert to pyarrow 
+00038560: 7573 696e 6720 7061 2e54 656e 736f 722e  using pa.Tensor.
+00038570: 6672 6f6d 5f6e 756d 7079 282e 2e2e 292e  from_numpy(...).
+00038580: 2054 6861 7420 646f 6573 6e27 7420 6861   That doesn't ha
+00038590: 6e64 6c65 206d 6173 6b73 2061 7320 6f66  ndle masks as of
+000385a0: 2070 7961 7272 6f77 2034 2e30 2e0d 0a0d   pyarrow 4.0....
+000385b0: 0a20 2020 2020 2020 2020 2020 2023 2047  .            # G
+000385c0: 6574 2061 206d 6173 6b20 6f66 2069 6e76  et a mask of inv
+000385d0: 616c 6964 732e 0d0a 2020 2020 2020 2020  alids...        
+000385e0: 2020 2020 696e 7661 6c69 6473 5f6d 6173      invalids_mas
+000385f0: 6b20 3d20 7365 6c66 2e69 736e 616e 2829  k = self.isnan()
+00038600: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00038610: 2320 4966 2061 6c6c 2076 616c 7565 7320  # If all values 
+00038620: 6172 6520 7661 6c69 642c 2064 6f6e 2774  are valid, don't
+00038630: 2062 6f74 6865 7220 6372 6561 7469 6e67   bother creating
+00038640: 2061 6e20 616c 6c2d 4661 6c73 6520 6d61   an all-False ma
+00038650: 736b 2c20 6974 2773 206a 7573 7420 7761  sk, it's just wa
+00038660: 7374 696e 6720 6d65 6d6f 7279 2e0d 0a20  sting memory... 
+00038670: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+00038680: 7420 696e 7661 6c69 6473 5f6d 6173 6b2e  t invalids_mask.
+00038690: 616e 7928 293a 0d0a 2020 2020 2020 2020  any():..        
+000386a0: 2020 2020 2020 2020 696e 7661 6c69 6473          invalids
+000386b0: 5f6d 6173 6b20 3d20 4e6f 6e65 0d0a 0d0a  _mask = None....
+000386c0: 2020 2020 2020 2020 2020 2020 2320 4372              # Cr
+000386d0: 6561 7465 2074 6865 2070 7961 7272 6f77  eate the pyarrow
+000386e0: 2061 7272 6179 2066 726f 6d20 6974 202b   array from it +
+000386f0: 2074 6869 7320 6172 7261 792e 0d0a 2020   this array...  
+00038700: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00038710: 2070 612e 6172 7261 7928 7365 6c66 2e5f   pa.array(self._
+00038720: 6e70 2c20 6d61 736b 3d69 6e76 616c 6964  np, mask=invalid
+00038730: 735f 6d61 736b 2c20 7479 7065 3d74 7970  s_mask, type=typ
+00038740: 6529 0d0a 0d0a 2020 2020 2020 2020 656c  e)....        el
+00038750: 6966 206e 702e 6973 7375 6264 7479 7065  if np.issubdtype
+00038760: 2873 656c 662e 6474 7970 652c 206e 702e  (self.dtype, np.
+00038770: 666c 6f61 7469 6e67 293a 0d0a 2020 2020  floating):..    
+00038780: 2020 2020 2020 2020 2320 5573 696e 6720          # Using 
+00038790: 666c 6f61 7469 6e67 2d70 6f69 6e74 204e  floating-point N
+000387a0: 614e 2074 6f20 7369 676e 616c 2062 6f74  aN to signal bot
+000387b0: 6820 4e61 4e20 616e 6420 4e41 2f6e 756c  h NaN and NA/nul
+000387c0: 6c20 696e 2072 6970 7461 626c 6520 6d65  l in riptable me
+000387d0: 616e 7320 7765 0d0a 2020 2020 2020 2020  ans we..        
+000387e0: 2020 2020 2320 6e65 6564 2074 6f20 6d61      # need to ma
+000387f0: 6b65 2061 2064 6563 6973 696f 6e20 6865  ke a decision he
+00038800: 7265 206f 6e20 7768 6574 6865 7220 746f  re on whether to
+00038810: 206d 6172 6b20 7468 6f73 6520 7661 6c75   mark those valu
+00038820: 6573 2061 7320 4e41 2f6e 756c 6c20 7661  es as NA/null va
+00038830: 6c75 6573 0d0a 2020 2020 2020 2020 2020  lues..          
+00038840: 2020 2320 696e 2074 6865 2072 6574 7572    # in the retur
+00038850: 6e65 6420 7079 6172 726f 7720 6172 7261  ned pyarrow arra
+00038860: 792e 0d0a 2020 2020 2020 2020 2020 2020  y...            
+00038870: 2320 466f 7220 6e6f 772c 2077 6520 646f  # For now, we do
+00038880: 6e27 7420 2d2d 2077 6520 6a75 7374 2070  n't -- we just p
+00038890: 6173 7320 7468 6520 6461 7461 2061 6c6f  ass the data alo
+000388a0: 6e67 2064 6972 6563 746c 792c 2073 6f20  ng directly, so 
+000388b0: 7468 6520 6361 6c6c 6572 2063 616e 2064  the caller can d
+000388c0: 6563 6964 650d 0a20 2020 2020 2020 2020  ecide..         
+000388d0: 2020 2023 206f 6e20 7768 6574 6865 7220     # on whether 
+000388e0: 7468 6579 2077 616e 7420 746f 2068 616e  they want to han
+000388f0: 646c 6520 7468 6174 2e20 2849 6465 616c  dle that. (Ideal
+00038900: 6c79 2c20 7765 2764 2068 6176 6520 6120  ly, we'd have a 
+00038910: 7761 7920 746f 2070 6172 616d 6574 6572  way to parameter
+00038920: 697a 6520 7468 6973 0d0a 2020 2020 2020  ize this..      
+00038930: 2020 2020 2020 2320 6275 7420 7468 6520        # but the 
+00038940: 7072 6f74 6f63 6f6c 2064 6f65 736e 2774  protocol doesn't
+00038950: 2073 7570 706f 7274 2069 7420 6173 206f   support it as o
+00038960: 6620 7079 6172 726f 7720 342e 302e 2049  f pyarrow 4.0. I
+00038970: 6e20 616e 7920 6361 7365 2c20 6f6e 6c79  n any case, only
+00038980: 2074 6865 2062 6974 6d61 736b 0d0a 2020   the bitmask..  
+00038990: 2020 2020 2020 2020 2020 2320 6e65 6564            # need
+000389a0: 7320 746f 2062 6520 7265 2d63 7265 6174  s to be re-creat
+000389b0: 6564 206c 6174 6572 2069 6620 7468 6520  ed later if the 
+000389c0: 7573 6572 2077 616e 7473 2074 6f20 636f  user wants to co
+000389d0: 6e73 6964 6572 2074 6865 204e 614e 7320  nsider the NaNs 
+000389e0: 6173 204e 412f 6e75 6c6c 2076 616c 7565  as NA/null value
+000389f0: 732e 290d 0a20 2020 2020 2020 2020 2020  s.)..           
+00038a00: 2069 6620 7365 6c66 2e6e 6469 6d20 3e3d   if self.ndim >=
+00038a10: 2032 3a0d 0a20 2020 2020 2020 2020 2020   2:..           
+00038a20: 2020 2020 2023 204e 4f54 453a 2041 7320       # NOTE: As 
+00038a30: 6f66 2070 7961 7272 6f77 2034 2e30 2c20  of pyarrow 4.0, 
+00038a40: 7468 6973 206d 6574 686f 6420 646f 6573  this method does
+00038a50: 6e27 7420 7375 7070 6f72 7420 6120 6074  n't support a `t
+00038a60: 7970 6560 2061 7267 756d 656e 742e 0d0a  ype` argument...
+00038a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038a80: 7265 7475 726e 2070 612e 5465 6e73 6f72  return pa.Tensor
+00038a90: 2e66 726f 6d5f 6e75 6d70 7928 7365 6c66  .from_numpy(self
+00038aa0: 2e5f 6e70 290d 0a20 2020 2020 2020 2020  ._np)..         
+00038ab0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+00038ac0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00038ad0: 2070 612e 6172 7261 7928 7365 6c66 2e5f   pa.array(self._
+00038ae0: 6e70 2c20 7479 7065 3d74 7970 6529 0d0a  np, type=type)..
+00038af0: 0d0a 2020 2020 2020 2020 656c 6966 206e  ..        elif n
+00038b00: 702e 6973 7375 6264 7479 7065 2873 656c  p.issubdtype(sel
+00038b10: 662e 6474 7970 652c 2062 6f6f 6c29 3a0d  f.dtype, bool):.
+00038b20: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00038b30: 7365 6c66 2e6e 6469 6d20 3e3d 2032 3a0d  self.ndim >= 2:.
+00038b40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00038b50: 2023 204e 4f54 453a 2041 7320 6f66 2070   # NOTE: As of p
+00038b60: 7961 7272 6f77 2034 2e30 2c20 7468 6973  yarrow 4.0, this
+00038b70: 206d 6574 686f 6420 646f 6573 6e27 7420   method doesn't 
+00038b80: 7375 7070 6f72 7420 6120 6074 7970 6560  support a `type`
+00038b90: 2061 7267 756d 656e 742e 0d0a 2020 2020   argument...    
+00038ba0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00038bb0: 726e 2070 612e 5465 6e73 6f72 2e66 726f  rn pa.Tensor.fro
+00038bc0: 6d5f 6e75 6d70 7928 7365 6c66 2e5f 6e70  m_numpy(self._np
+00038bd0: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
+00038be0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00038bf0: 2020 2020 2020 7265 7475 726e 2070 612e        return pa.
+00038c00: 6172 7261 7928 7365 6c66 2e5f 6e70 2c20  array(self._np, 
+00038c10: 7479 7065 3d74 7970 6529 0d0a 0d0a 2020  type=type)....  
+00038c20: 2020 2020 2020 656c 6966 206e 702e 6973        elif np.is
+00038c30: 7375 6264 7479 7065 2873 656c 662e 6474  subdtype(self.dt
+00038c40: 7970 652c 2062 7974 6573 293a 0d0a 2020  ype, bytes):..  
+00038c50: 2020 2020 2020 2020 2020 2320 4966 2074            # If t
+00038c60: 6865 2063 616c 6c65 7220 7761 6e74 7320  he caller wants 
+00038c70: 746f 2063 6f6e 7665 7274 2065 6d70 7479  to convert empty
+00038c80: 2073 7472 696e 6773 2074 6f20 6e75 6c6c   strings to null
+00038c90: 732c 2067 6574 2061 206d 6173 6b20 6f66  s, get a mask of
+00038ca0: 2069 6e76 616c 6964 732e 0d0a 2020 2020   invalids...    
+00038cb0: 2020 2020 2020 2020 6966 2065 6d70 7479          if empty
+00038cc0: 5f73 7472 696e 6773 5f74 6f5f 6e75 6c6c  _strings_to_null
 00038cd0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00038ce0: 2020 2020 2020 2069 6e76 616c 6964 735f         invalids_
-00038cf0: 6d61 736b 203d 204e 6f6e 650d 0a20 2020  mask = None..   
-00038d00: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-00038d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038d20: 696e 7661 6c69 6473 5f6d 6173 6b20 3d20  invalids_mask = 
-00038d30: 4e6f 6e65 0d0a 0d0a 2020 2020 2020 2020  None....        
-00038d40: 2020 2020 2320 7079 6172 726f 7720 2861      # pyarrow (a
-00038d50: 7320 6f66 2076 342e 3029 2064 6f65 7320  s of v4.0) does 
-00038d60: 6e6f 7420 6861 7665 2061 2066 6978 6564  not have a fixed
-00038d70: 2d73 697a 6520 556e 6963 6f64 6520 7374  -size Unicode st
-00038d80: 7269 6e67 2064 6174 6120 7479 7065 2c20  ring data type, 
-00038d90: 736f 2075 6e6c 696b 6520 7468 6520 2762  so unlike the 'b
-00038da0: 7974 6573 270d 0a20 2020 2020 2020 2020  ytes'..         
-00038db0: 2020 2023 2068 616e 646c 696e 6720 6162     # handling ab
-00038dc0: 6f76 6520 666f 7220 4153 4349 4920 7374  ove for ASCII st
-00038dd0: 7269 6e67 732c 2077 6520 6861 7665 2074  rings, we have t
-00038de0: 6f20 7573 6520 7468 6520 7661 7269 6162  o use the variab
-00038df0: 6c65 2d6c 656e 6774 6820 7374 7269 6e67  le-length string
-00038e00: 2061 7272 6179 2074 7970 652e 0d0a 2020   array type...  
-00038e10: 2020 2020 2020 2020 2020 6966 2074 7970            if typ
-00038e20: 6520 6973 204e 6f6e 653a 0d0a 2020 2020  e is None:..    
-00038e30: 2020 2020 2020 2020 2020 2020 7479 7065              type
-00038e40: 203d 2070 612e 7374 7269 6e67 2829 0d0a   = pa.string()..
-00038e50: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00038e60: 726e 2070 612e 6172 7261 7928 7365 6c66  rn pa.array(self
-00038e70: 2e5f 6e70 2c20 6d61 736b 3d69 6e76 616c  ._np, mask=inval
-00038e80: 6964 735f 6d61 736b 2c20 7479 7065 3d74  ids_mask, type=t
-00038e90: 7970 6529 0d0a 0d0a 2020 2020 2020 2020  ype)....        
-00038ea0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-00038eb0: 2020 2072 6169 7365 204e 6f74 496d 706c     raise NotImpl
-00038ec0: 656d 656e 7465 6445 7272 6f72 2866 2246  ementedError(f"F
-00038ed0: 6173 7441 7272 6179 2077 6974 6820 6474  astArray with dt
-00038ee0: 7970 6520 277b 6e70 2e64 7479 7065 2873  ype '{np.dtype(s
-00038ef0: 656c 662e 6474 7970 6529 7d27 2069 7320  elf.dtype)}' is 
-00038f00: 6e6f 7420 7375 7070 6f72 7465 642e 2229  not supported.")
-00038f10: 0d0a 0d0a 2020 2020 6465 6620 5f5f 6172  ....    def __ar
-00038f20: 726f 775f 6172 7261 795f 5f28 7365 6c66  row_array__(self
-00038f30: 2c20 7479 7065 3a20 4f70 7469 6f6e 616c  , type: Optional
-00038f40: 5b22 7061 2e44 6174 6154 7970 6522 5d20  ["pa.DataType"] 
-00038f50: 3d20 4e6f 6e65 2920 2d3e 2055 6e69 6f6e  = None) -> Union
-00038f60: 5b22 7061 2e41 7272 6179 222c 2022 7061  ["pa.Array", "pa
-00038f70: 2e43 6875 6e6b 6564 4172 7261 7922 5d3a  .ChunkedArray"]:
-00038f80: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00038f90: 2020 2020 2020 2049 6d70 6c65 6d65 6e74         Implement
-00038fa0: 6174 696f 6e20 6f66 2074 6865 2060 605f  ation of the ``_
-00038fb0: 5f61 7272 6f77 5f61 7272 6179 5f5f 6060  _arrow_array__``
-00038fc0: 2070 726f 746f 636f 6c20 666f 7220 636f   protocol for co
-00038fd0: 6e76 6572 7369 6f6e 2074 6f20 6120 7079  nversion to a py
-00038fe0: 6172 726f 7720 6172 7261 792e 0d0a 0d0a  arrow array.....
-00038ff0: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
-00039000: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
-00039010: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00039020: 7479 7065 203a 2070 7961 7272 6f77 2e44  type : pyarrow.D
-00039030: 6174 6154 7970 652c 206f 7074 696f 6e61  ataType, optiona
-00039040: 6c2c 2064 6566 6175 6c74 7320 746f 204e  l, defaults to N
-00039050: 6f6e 650d 0a0d 0a20 2020 2020 2020 2052  one....        R
-00039060: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
-00039070: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-00039080: 2070 7961 7272 6f77 2e41 7272 6179 206f   pyarrow.Array o
-00039090: 7220 7079 6172 726f 772e 4368 756e 6b65  r pyarrow.Chunke
-000390a0: 6441 7272 6179 0d0a 0d0a 2020 2020 2020  dArray....      
-000390b0: 2020 4e6f 7465 730d 0a20 2020 2020 2020    Notes..       
-000390c0: 202d 2d2d 2d2d 0d0a 2020 2020 2020 2020   -----..        
-000390d0: 6874 7470 733a 2f2f 6172 726f 772e 6170  https://arrow.ap
-000390e0: 6163 6865 2e6f 7267 2f64 6f63 732f 7079  ache.org/docs/py
-000390f0: 7468 6f6e 2f65 7874 656e 6469 6e67 5f74  thon/extending_t
-00039100: 7970 6573 2e68 746d 6c23 636f 6e74 726f  ypes.html#contro
-00039110: 6c6c 696e 672d 636f 6e76 6572 7369 6f6e  lling-conversion
-00039120: 2d74 6f2d 7079 6172 726f 772d 6172 7261  -to-pyarrow-arra
-00039130: 792d 7769 7468 2d74 6865 2d61 7272 6f77  y-with-the-arrow
-00039140: 2d61 7272 6179 2d70 726f 746f 636f 6c0d  -array-protocol.
-00039150: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00039160: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00039170: 662e 746f 5f61 7272 6f77 2874 7970 653d  f.to_arrow(type=
-00039180: 7479 7065 2c20 7072 6573 6572 7665 5f66  type, preserve_f
-00039190: 6978 6564 5f62 7974 6573 3d46 616c 7365  ixed_bytes=False
-000391a0: 2c20 656d 7074 795f 7374 7269 6e67 735f  , empty_strings_
-000391b0: 746f 5f6e 756c 6c3d 5472 7565 290d 0a0d  to_null=True)...
-000391c0: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
-000391d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000391e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000391f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039200: 2d2d 0d0a 2020 2020 4063 6c61 7373 6d65  --..    @classme
-00039210: 7468 6f64 0d0a 2020 2020 6465 6620 7265  thod..    def re
-00039220: 6769 7374 6572 5f66 756e 6374 696f 6e28  gister_function(
-00039230: 636c 732c 206e 616d 652c 2066 756e 6329  cls, name, func)
-00039240: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-00039250: 2020 2020 2020 2020 5573 6564 2074 6f20          Used to 
-00039260: 7265 6769 7374 6572 2066 756e 6374 696f  register functio
-00039270: 6e73 2074 6f20 4661 7374 4172 7261 792e  ns to FastArray.
-00039280: 0d0a 2020 2020 2020 2020 5573 6564 2062  ..        Used b
-00039290: 7920 7274 5f66 6173 7461 7272 6179 6e75  y rt_fastarraynu
-000392a0: 6d62 610d 0a20 2020 2020 2020 2022 2222  mba..        """
-000392b0: 0d0a 2020 2020 2020 2020 7365 7461 7474  ..        setatt
-000392c0: 7228 636c 732c 206e 616d 652c 2066 756e  r(cls, name, fun
-000392d0: 6329 0d0a 0d0a 2020 2020 6465 6620 6170  c)....    def ap
-000392e0: 706c 795f 7363 6865 6d61 2873 656c 662c  ply_schema(self,
-000392f0: 2073 6368 656d 6129 3a0d 0a20 2020 2020   schema):..     
-00039300: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00039310: 4170 706c 7920 6120 7363 6865 6d61 2063  Apply a schema c
-00039320: 6f6e 7461 696e 696e 6720 6465 7363 7269  ontaining descri
-00039330: 7074 6976 6520 696e 666f 726d 6174 696f  ptive informatio
-00039340: 6e20 746f 2074 6865 2046 6173 7441 7272  n to the FastArr
-00039350: 6179 0d0a 0d0a 2020 2020 2020 2020 3a70  ay....        :p
-00039360: 6172 616d 2073 6368 656d 613a 2064 6963  aram schema: dic
-00039370: 740d 0a20 2020 2020 2020 203a 7265 7475  t..        :retu
-00039380: 726e 3a20 6469 6374 696f 6e61 7279 206f  rn: dictionary o
-00039390: 6620 6465 7669 6174 696f 6e73 2066 726f  f deviations fro
-000393a0: 6d20 7468 6520 7363 6865 6d61 0d0a 2020  m the schema..  
-000393b0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-000393c0: 2020 2066 726f 6d20 2e72 745f 6d65 7461     from .rt_meta
-000393d0: 2069 6d70 6f72 7420 6170 706c 795f 7363   import apply_sc
-000393e0: 6865 6d61 2061 7320 5f61 7070 6c79 5f73  hema as _apply_s
-000393f0: 6368 656d 610d 0a0d 0a20 2020 2020 2020  chema....       
-00039400: 2072 6574 7572 6e20 5f61 7070 6c79 5f73   return _apply_s
-00039410: 6368 656d 6128 7365 6c66 2c20 7363 6865  chema(self, sche
-00039420: 6d61 290d 0a0d 0a20 2020 2064 6566 2069  ma)....    def i
-00039430: 6e66 6f28 7365 6c66 2c20 2a2a 6b77 6172  nfo(self, **kwar
-00039440: 6773 293a 0d0a 2020 2020 2020 2020 2222  gs):..        ""
-00039450: 220d 0a20 2020 2020 2020 2050 7269 6e74  "..        Print
-00039460: 2061 2064 6573 6372 6970 7469 6f6e 206f   a description o
-00039470: 6620 7468 6520 4661 7374 4172 7261 7927  f the FastArray'
-00039480: 7320 636f 6e74 656e 7473 0d0a 2020 2020  s contents..    
-00039490: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-000394a0: 2066 726f 6d20 2e72 745f 6d65 7461 2069   from .rt_meta i
-000394b0: 6d70 6f72 7420 696e 666f 2061 7320 5f69  mport info as _i
-000394c0: 6e66 6f0d 0a0d 0a20 2020 2020 2020 2072  nfo....        r
-000394d0: 6574 7572 6e20 5f69 6e66 6f28 7365 6c66  eturn _info(self
-000394e0: 2c20 2a2a 6b77 6172 6773 290d 0a0d 0a20  , **kwargs).... 
-000394f0: 2020 2040 7072 6f70 6572 7479 0d0a 2020     @property..  
-00039500: 2020 6465 6620 646f 6328 7365 6c66 293a    def doc(self):
-00039510: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00039520: 2020 2020 2020 2052 6574 7572 6e20 7468         Return th
-00039530: 6520 446f 6320 6f62 6a65 6374 2066 6f72  e Doc object for
-00039540: 2074 6865 2069 6e70 7574 2060 4661 7374   the input `Fast
-00039550: 4172 7261 7960 2e0d 0a0d 0a20 2020 2020  Array`.....     
-00039560: 2020 2049 6620 6e6f 2044 6f63 206f 626a     If no Doc obj
-00039570: 6563 7420 6578 6973 7473 2c20 7265 7475  ect exists, retu
-00039580: 726e 204e 6f6e 652e 0d0a 0d0a 2020 2020  rn None.....    
-00039590: 2020 2020 5265 7475 726e 730d 0a20 2020      Returns..   
-000395a0: 2020 2020 202d 2d2d 2d2d 2d2d 0d0a 2020       -------..  
-000395b0: 2020 2020 2020 646f 6320 3a20 607e 7269        doc : `~ri
-000395c0: 7074 6162 6c65 2e72 745f 6d65 7461 2e44  ptable.rt_meta.D
-000395d0: 6f63 600d 0a20 2020 2020 2020 2020 2020  oc`..           
-000395e0: 2054 6865 2044 6f63 206f 626a 6563 7420   The Doc object 
-000395f0: 666f 7220 7468 6520 696e 7075 7420 6046  for the input `F
-00039600: 6173 7441 7272 6179 602e 2049 6620 6e6f  astArray`. If no
-00039610: 2044 6f63 206f 626a 6563 7420 6578 6973   Doc object exis
-00039620: 7473 2c20 7265 7475 726e 204e 6f6e 652e  ts, return None.
-00039630: 0d0a 0d0a 2020 2020 2020 2020 5365 6520  ....        See 
-00039640: 416c 736f 0d0a 2020 2020 2020 2020 2d2d  Also..        --
-00039650: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00039660: 4661 7374 4172 7261 792e 696e 666f 203a  FastArray.info :
-00039670: 2052 6574 7572 6e20 6120 6465 7363 7269   Return a descri
-00039680: 7074 696f 6e20 6f66 2074 6865 2069 6e70  ption of the inp
-00039690: 7574 2061 7272 6179 2773 2063 6f6e 7465  ut array's conte
-000396a0: 6e74 732e 0d0a 2020 2020 2020 2020 7e72  nts...        ~r
-000396b0: 6970 7461 626c 652e 7274 5f6d 6574 612e  iptable.rt_meta.
-000396c0: 6170 706c 795f 7363 6865 6d61 203a 2053  apply_schema : S
-000396d0: 6574 2044 6f63 206f 626a 6563 7420 7661  et Doc object va
-000396e0: 6c75 6573 2e0d 0a0d 0a20 2020 2020 2020  lues.....       
-000396f0: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
-00039700: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-00039710: 2020 2020 204e 6f20 446f 6320 6f62 6a65       No Doc obje
-00039720: 6374 2065 7869 7374 733a 0d0a 0d0a 2020  ct exists:....  
-00039730: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
-00039740: 2e46 4128 5b31 2c20 322c 2033 2c20 342c  .FA([1, 2, 3, 4,
-00039750: 2035 5d29 0d0a 2020 2020 2020 2020 3e3e   5])..        >>
-00039760: 3e20 7072 696e 7428 612e 646f 6329 0d0a  > print(a.doc)..
-00039770: 2020 2020 2020 2020 4e6f 6e65 0d0a 0d0a          None....
-00039780: 2020 2020 2020 2020 4170 706c 7920 6120          Apply a 
-00039790: 7363 6865 6d61 2061 6e64 2072 6574 7572  schema and retur
-000397a0: 6e20 7468 6520 446f 6320 6f62 6a65 6374  n the Doc object
-000397b0: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
-000397c0: 2073 6368 656d 6120 3d20 7b22 4465 7363   schema = {"Desc
-000397d0: 7269 7074 696f 6e22 3a20 2254 6869 7320  ription": "This 
-000397e0: 6973 2061 6e20 6172 7261 7922 2c20 2253  is an array", "S
-000397f0: 7465 7761 7264 223a 2022 4272 6961 6e22  teward": "Brian"
-00039800: 2c20 2254 7970 6522 3a20 2269 6e74 3332  , "Type": "int32
-00039810: 227d 0d0a 2020 2020 2020 2020 3e3e 3e20  "}..        >>> 
-00039820: 612e 6170 706c 795f 7363 6865 6d61 2873  a.apply_schema(s
-00039830: 6368 656d 6129 0d0a 2020 2020 2020 2020  chema)..        
-00039840: 7b7d 0d0a 2020 2020 2020 2020 3e3e 3e20  {}..        >>> 
-00039850: 7072 696e 7428 612e 646f 6329 0d0a 2020  print(a.doc)..  
-00039860: 2020 2020 2020 4465 7363 7269 7074 696f        Descriptio
-00039870: 6e3a 2054 6869 7320 6973 2061 6e20 6172  n: This is an ar
-00039880: 7261 790d 0a20 2020 2020 2020 2053 7465  ray..        Ste
-00039890: 7761 7264 3a20 4272 6961 6e0d 0a20 2020  ward: Brian..   
-000398a0: 2020 2020 2054 7970 653a 2069 6e74 3332       Type: int32
-000398b0: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
-000398c0: 726e 2073 7065 6369 6669 6320 446f 6320  rn specific Doc 
-000398d0: 6f62 6a65 6374 2069 6e66 6f72 6d61 7469  object informati
-000398e0: 6f6e 3a0d 0a0d 0a20 2020 2020 2020 203e  on:....        >
-000398f0: 3e3e 2070 7269 6e74 2861 2e64 6f63 2e5f  >> print(a.doc._
-00039900: 7479 7065 290d 0a20 2020 2020 2020 2069  type)..        i
-00039910: 6e74 3332 0d0a 2020 2020 2020 2020 3e3e  nt32..        >>
-00039920: 3e20 7072 696e 7428 612e 646f 632e 5f64  > print(a.doc._d
-00039930: 6573 6372 6970 290d 0a20 2020 2020 2020  escrip)..       
-00039940: 2054 6869 7320 6973 2061 6e20 6172 7261   This is an arra
-00039950: 790d 0a20 2020 2020 2020 203e 3e3e 2070  y..        >>> p
-00039960: 7269 6e74 2861 2e64 6f63 2e5f 7374 6577  rint(a.doc._stew
-00039970: 6172 6429 0d0a 2020 2020 2020 2020 4272  ard)..        Br
-00039980: 6961 6e0d 0a20 2020 2020 2020 203e 3e3e  ian..        >>>
-00039990: 2070 7269 6e74 2861 2e64 6f63 2e5f 6465   print(a.doc._de
-000399a0: 7461 696c 290d 0a20 2020 2020 2020 204e  tail)..        N
-000399b0: 6f6e 650d 0a20 2020 2020 2020 2022 2222  one..        """
-000399c0: 0d0a 2020 2020 2020 2020 6672 6f6d 202e  ..        from .
-000399d0: 7274 5f6d 6574 6120 696d 706f 7274 2064  rt_meta import d
-000399e0: 6f63 2061 7320 5f64 6f63 0d0a 0d0a 2020  oc as _doc....  
-000399f0: 2020 2020 2020 7265 7475 726e 205f 646f        return _do
-00039a00: 6328 7365 6c66 290d 0a0d 0a20 2020 2023  c(self)....    #
-00039a10: 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   ===============
-00039a20: 3d3d 3d3d 3d3d 3d20 454e 4420 4f46 2043  ======= END OF C
-00039a30: 4c41 5353 2044 4546 494e 4954 494f 4e20  LASS DEFINITION 
-00039a40: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00039a50: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0d  ===============.
-00039a60: 0a0d 0a0d 0a23 202d 2d2d 2d2d 2d2d 2d2d  .....# ---------
-00039a70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039a80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039a90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039aa0: 2d2d 0d0a 6465 6620 5f73 6574 6661 7374  --..def _setfast
-00039ab0: 6172 7261 7976 6965 7728 6172 7229 3a0d  arrayview(arr):.
-00039ac0: 0a20 2020 2022 2222 0d0a 2020 2020 4361  .    """..    Ca
-00039ad0: 6c6c 2066 726f 6d20 4350 5020 696e 746f  ll from CPP into
-00039ae0: 2070 7974 686f 6e20 746f 2066 6c69 7020   python to flip 
-00039af0: 6172 7261 7920 7669 6577 0d0a 2020 2020  array view..    
-00039b00: 2222 220d 0a20 2020 2069 6620 6973 696e  """..    if isin
-00039b10: 7374 616e 6365 2861 7272 2c20 4661 7374  stance(arr, Fast
-00039b20: 4172 7261 7929 3a0d 0a20 2020 2020 2020  Array):..       
-00039b30: 2069 6620 4661 7374 4172 7261 792e 5665   if FastArray.Ve
-00039b40: 7262 6f73 6520 3e20 323a 0d0a 2020 2020  rbose > 2:..    
-00039b50: 2020 2020 2020 2020 7072 696e 7428 226e          print("n
-00039b60: 6f20 6e65 6564 2074 6f20 7365 7466 6173  o need to setfas
-00039b70: 7461 7272 6179 7669 6577 222c 2061 7272  tarrayview", arr
-00039b80: 2e64 7479 7065 2c20 6c65 6e28 6172 7229  .dtype, len(arr)
-00039b90: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-00039ba0: 6e20 6172 720d 0a0d 0a20 2020 2069 6620  n arr....    if 
-00039bb0: 4661 7374 4172 7261 792e 5665 7262 6f73  FastArray.Verbos
-00039bc0: 6520 3e20 323a 0d0a 2020 2020 2020 2020  e > 2:..        
-00039bd0: 7072 696e 7428 2273 6574 6661 7374 6172  print("setfastar
-00039be0: 7261 7976 6965 7722 2c20 6172 722e 6474  rayview", arr.dt
-00039bf0: 7970 652c 206c 656e 2861 7272 2929 0d0a  ype, len(arr))..
-00039c00: 0d0a 2020 2020 7265 7475 726e 2061 7272  ..    return arr
-00039c10: 2e76 6965 7728 4661 7374 4172 7261 7929  .view(FastArray)
-00039c20: 0d0a 0d0a 0d0a 2320 2d2d 2d2d 2d2d 2d2d  ......# --------
-00039c30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039c40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039c50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039c60: 2d2d 2d0d 0a64 6566 205f 7365 7466 6173  ---..def _setfas
-00039c70: 7461 7272 6179 7479 7065 2829 3a0d 0a20  tarraytype():.. 
-00039c80: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
-00039c90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039ca0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039cb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039cc0: 0d0a 2020 2020 2320 6361 6c6c 696e 6720  ..    # calling 
-00039cd0: 7468 6973 2066 756e 6374 696f 6e20 7769  this function wi
-00039ce0: 6c6c 2066 6f72 6365 2066 6d20 746f 2072  ll force fm to r
-00039cf0: 6574 7572 6e20 4661 7374 4172 7261 7920  eturn FastArray 
-00039d00: 7375 6263 6c61 7373 0d0a 2020 2020 2320  subclass..    # 
-00039d10: 7263 2e42 6173 6963 4d61 7468 486f 6f6b  rc.BasicMathHook
-00039d20: 2846 6173 7441 7272 6179 2c20 6e70 2e6e  (FastArray, np.n
-00039d30: 6461 7272 6179 290d 0a20 2020 2023 2043  darray)..    # C
-00039d40: 6f6d 696e 6720 6e65 7874 2062 7569 6c64  oming next build
-00039d50: 0d0a 2020 2020 6661 203d 206e 702e 6172  ..    fa = np.ar
-00039d60: 616e 6765 2831 292e 7669 6577 2846 6173  ange(1).view(Fas
-00039d70: 7441 7272 6179 290d 0a20 2020 2072 632e  tArray)..    rc.
-00039d80: 5365 7446 6173 7441 7272 6179 5479 7065  SetFastArrayType
-00039d90: 2866 612c 205f 7365 7466 6173 7461 7272  (fa, _setfastarr
-00039da0: 6179 7669 6577 290d 0a20 2020 2072 632e  ayview)..    rc.
-00039db0: 4261 7369 634d 6174 6848 6f6f 6b28 6661  BasicMathHook(fa
-00039dc0: 2c20 6661 2e5f 6e70 290d 0a0d 0a0d 0a23  , fa._np)......#
-00039dd0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
-00039de0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039df0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039e00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 6465  ------------..de
-00039e10: 6620 5f46 6978 7570 446f 6353 7472 696e  f _FixupDocStrin
-00039e20: 6773 2829 3a0d 0a20 2020 2022 2222 0d0a  gs():..    """..
-00039e30: 2020 2020 4c6f 6164 2061 6c6c 2074 6865      Load all the
-00039e40: 206d 656d 6265 7220 6675 6e63 7469 6f6e   member function
-00039e50: 206f 6620 7468 6973 206d 6f64 756c 650d   of this module.
-00039e60: 0a20 2020 204c 6f61 6420 616c 6c20 7468  .    Load all th
-00039e70: 6520 6d65 6d62 6572 2066 756e 6374 696f  e member functio
-00039e80: 6e73 206f 6620 7468 6520 6e70 206d 6f64  ns of the np mod
-00039e90: 756c 650d 0a20 2020 2049 6620 7765 2066  ule..    If we f
-00039ea0: 696e 6420 6120 6d61 7463 682c 2063 6f70  ind a match, cop
-00039eb0: 7920 6f76 6572 2074 6865 2064 6f63 2073  y over the doc s
-00039ec0: 7472 696e 6773 0d0a 2020 2020 2222 220d  trings..    """.
-00039ed0: 0a20 2020 2069 6d70 6f72 7420 696e 7370  .    import insp
-00039ee0: 6563 740d 0a20 2020 2069 6d70 6f72 7420  ect..    import 
-00039ef0: 7379 730d 0a0d 0a20 2020 206d 796d 6f64  sys....    mymod
-00039f00: 756c 6520 3d20 7379 732e 6d6f 6475 6c65  ule = sys.module
-00039f10: 735b 5f5f 6e61 6d65 5f5f 5d0d 0a20 2020  s[__name__]..   
-00039f20: 2061 6c6c 5f6d 7966 756e 6374 696f 6e73   all_myfunctions
-00039f30: 203d 2069 6e73 7065 6374 2e67 6574 6d65   = inspect.getme
-00039f40: 6d62 6572 7328 4661 7374 4172 7261 792c  mbers(FastArray,
-00039f50: 2069 6e73 7065 6374 2e69 7366 756e 6374   inspect.isfunct
-00039f60: 696f 6e29 0d0a 0d0a 2020 2020 7472 793a  ion)....    try:
-00039f70: 0d0a 2020 2020 2020 2020 2320 626f 7474  ..        # bott
-00039f80: 6c65 6e65 636b 2069 7320 6f70 7469 6f6e  leneck is option
-00039f90: 616c 0d0a 2020 2020 2020 2020 616c 6c5f  al..        all_
-00039fa0: 626e 6675 6e63 7469 6f6e 7320 3d20 696e  bnfunctions = in
-00039fb0: 7370 6563 742e 6765 746d 656d 6265 7273  spect.getmembers
-00039fc0: 2862 6e2c 2069 6e73 7065 6374 2e69 7366  (bn, inspect.isf
-00039fd0: 756e 6374 696f 6e29 0d0a 2020 2020 2020  unction)..      
-00039fe0: 2020 616c 6c5f 626e 6675 6e63 7469 6f6e    all_bnfunction
-00039ff0: 7320 2b3d 2069 6e73 7065 6374 2e67 6574  s += inspect.get
-0003a000: 6d65 6d62 6572 7328 626e 2c20 696e 7370  members(bn, insp
-0003a010: 6563 742e 6973 6275 696c 7469 6e29 0d0a  ect.isbuiltin)..
-0003a020: 0d0a 2020 2020 2020 2020 2320 6275 696c  ..        # buil
-0003a030: 6420 6469 6374 696f 6e61 7279 206f 6620  d dictionary of 
-0003a040: 626f 7474 6c65 6e65 636b 2064 6f63 730d  bottleneck docs.
-0003a050: 0a20 2020 2020 2020 2062 6e64 6963 7420  .        bndict 
-0003a060: 3d20 7b7d 0d0a 2020 2020 2020 2020 666f  = {}..        fo
-0003a070: 7220 6675 6e63 7320 696e 2061 6c6c 5f62  r funcs in all_b
-0003a080: 6e66 756e 6374 696f 6e73 3a0d 0a20 2020  nfunctions:..   
-0003a090: 2020 2020 2020 2020 2062 6e64 6963 745b           bndict[
-0003a0a0: 6675 6e63 735b 305d 5d20 3d20 6675 6e63  funcs[0]] = func
-0003a0b0: 735b 315d 0d0a 0d0a 2020 2020 2020 2020  s[1]....        
-0003a0c0: 2320 6e6f 7720 666f 7220 6561 6368 2066  # now for each f
-0003a0d0: 756e 6374 696f 6e20 7468 6174 2068 6173  unction that has
-0003a0e0: 2061 6e20 626e 2066 6c61 766f 722c 2063   an bn flavor, c
-0003a0f0: 6f70 7920 6f76 6572 2074 6865 2064 6f63  opy over the doc
-0003a100: 2073 7472 696e 6773 0d0a 2020 2020 2020   strings..      
-0003a110: 2020 666f 7220 6675 6e63 7320 696e 2061    for funcs in a
-0003a120: 6c6c 5f6d 7966 756e 6374 696f 6e73 3a0d  ll_myfunctions:.
-0003a130: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0003a140: 2866 756e 6373 5b30 5d20 696e 2062 6e64  (funcs[0] in bnd
-0003a150: 6963 7429 2061 6e64 2028 6675 6e63 735b  ict) and (funcs[
-0003a160: 315d 2e5f 5f64 6f63 5f5f 2069 7320 4e6f  1].__doc__ is No
-0003a170: 6e65 293a 0d0a 2020 2020 2020 2020 2020  ne):..          
-0003a180: 2020 2020 2020 6675 6e63 735b 315d 2e5f        funcs[1]._
-0003a190: 5f64 6f63 5f5f 203d 2062 6e64 6963 745b  _doc__ = bndict[
-0003a1a0: 6675 6e63 735b 305d 5d2e 5f5f 646f 635f  funcs[0]].__doc_
-0003a1b0: 5f0d 0a20 2020 2065 7863 6570 7420 4578  _..    except Ex
-0003a1c0: 6365 7074 696f 6e3a 0d0a 2020 2020 2020  ception:..      
-0003a1d0: 2020 7061 7373 0d0a 0d0a 2020 2020 616c    pass....    al
-0003a1e0: 6c5f 6e70 6675 6e63 7469 6f6e 7320 3d20  l_npfunctions = 
-0003a1f0: 5b66 756e 6320 666f 7220 6675 6e63 2069  [func for func i
-0003a200: 6e20 696e 7370 6563 742e 6765 746d 656d  n inspect.getmem
-0003a210: 6265 7273 286e 702e 6e64 6172 7261 7929  bers(np.ndarray)
-0003a220: 2069 6620 6e6f 7420 6675 6e63 5b30 5d2e   if not func[0].
-0003a230: 7374 6172 7473 7769 7468 2822 5f22 295d  startswith("_")]
-0003a240: 0d0a 0d0a 2020 2020 2320 6275 696c 6420  ....    # build 
-0003a250: 6469 6374 696f 6e61 7279 206f 6620 6e70  dictionary of np
-0003a260: 2e6e 6461 7272 6179 2064 6f63 730d 0a20  .ndarray docs.. 
-0003a270: 2020 206e 7064 6963 7420 3d20 7b7d 0d0a     npdict = {}..
-0003a280: 2020 2020 666f 7220 6675 6e63 7320 696e      for funcs in
-0003a290: 2061 6c6c 5f6e 7066 756e 6374 696f 6e73   all_npfunctions
-0003a2a0: 3a0d 0a20 2020 2020 2020 206e 7064 6963  :..        npdic
-0003a2b0: 745b 6675 6e63 735b 305d 5d20 3d20 6675  t[funcs[0]] = fu
-0003a2c0: 6e63 735b 315d 0d0a 0d0a 2020 2020 2320  ncs[1]....    # 
-0003a2d0: 6e6f 7720 666f 7220 6561 6368 2066 756e  now for each fun
-0003a2e0: 6374 696f 6e20 7468 6174 2068 6173 2061  ction that has a
-0003a2f0: 6e20 6e70 2066 6c61 766f 722c 2063 6f70  n np flavor, cop
-0003a300: 7920 6f76 6572 2074 6865 2064 6f63 2073  y over the doc s
-0003a310: 7472 696e 6773 0d0a 2020 2020 666f 7220  trings..    for 
-0003a320: 6675 6e63 7320 696e 2061 6c6c 5f6d 7966  funcs in all_myf
-0003a330: 756e 6374 696f 6e73 3a0d 0a20 2020 2020  unctions:..     
-0003a340: 2020 2069 6620 2866 756e 6373 5b30 5d20     if (funcs[0] 
-0003a350: 696e 206e 7064 6963 7429 2061 6e64 2028  in npdict) and (
-0003a360: 6675 6e63 735b 315d 2e5f 5f64 6f63 5f5f  funcs[1].__doc__
-0003a370: 2069 7320 4e6f 6e65 293a 0d0a 2020 2020   is None):..    
-0003a380: 2020 2020 2020 2020 6675 6e63 735b 315d          funcs[1]
-0003a390: 2e5f 5f64 6f63 5f5f 203d 206e 7064 6963  .__doc__ = npdic
-0003a3a0: 745b 6675 6e63 735b 305d 5d2e 5f5f 646f  t[funcs[0]].__do
-0003a3b0: 635f 5f0d 0a0d 0a20 2020 2023 206e 6f77  c__....    # now
-0003a3c0: 2064 6f20 6a75 7374 2070 6c61 696e 206e   do just plain n
-0003a3d0: 700d 0a20 2020 2061 6c6c 5f6e 7066 756e  p..    all_npfun
-0003a3e0: 6374 696f 6e73 203d 205b 6675 6e63 2066  ctions = [func f
-0003a3f0: 6f72 2066 756e 6320 696e 2069 6e73 7065  or func in inspe
-0003a400: 6374 2e67 6574 6d65 6d62 6572 7328 6e70  ct.getmembers(np
-0003a410: 2920 6966 2022 5f5f 2220 6e6f 7420 696e  ) if "__" not in
-0003a420: 2066 756e 6373 5b30 5d5d 0d0a 0d0a 2020   funcs[0]]....  
-0003a430: 2020 2320 6275 696c 6420 6469 6374 696f    # build dictio
-0003a440: 6e61 7279 206f 6620 6e70 2064 6f63 730d  nary of np docs.
-0003a450: 0a20 2020 206e 7064 6963 7420 3d20 7b7d  .    npdict = {}
-0003a460: 0d0a 2020 2020 666f 7220 6675 6e63 7320  ..    for funcs 
-0003a470: 696e 2061 6c6c 5f6e 7066 756e 6374 696f  in all_npfunctio
-0003a480: 6e73 3a0d 0a20 2020 2020 2020 2023 2070  ns:..        # p
-0003a490: 7269 6e74 2822 6765 7474 696e 6720 646f  rint("getting do
-0003a4a0: 6320 7374 7269 6e67 2066 6f72 2022 2c20  c string for ", 
-0003a4b0: 6675 6e63 735b 305d 290d 0a20 2020 2020  funcs[0])..     
-0003a4c0: 2020 206e 7064 6963 745b 6675 6e63 735b     npdict[funcs[
-0003a4d0: 305d 5d20 3d20 6675 6e63 735b 315d 0d0a  0]] = funcs[1]..
-0003a4e0: 0d0a 2020 2020 2320 6e6f 7720 666f 7220  ..    # now for 
-0003a4f0: 6561 6368 2066 756e 6374 696f 6e20 7468  each function th
-0003a500: 6174 2068 6173 2061 6e20 6e70 2066 6c61  at has an np fla
-0003a510: 766f 722c 2063 6f70 7920 6f76 6572 2074  vor, copy over t
-0003a520: 6865 2064 6f63 2073 7472 696e 6773 0d0a  he doc strings..
-0003a530: 2020 2020 666f 7220 6675 6e63 7320 696e      for funcs in
-0003a540: 2061 6c6c 5f6d 7966 756e 6374 696f 6e73   all_myfunctions
-0003a550: 3a0d 0a20 2020 2020 2020 2069 6620 2866  :..        if (f
-0003a560: 756e 6373 5b30 5d20 696e 206e 7064 6963  uncs[0] in npdic
-0003a570: 7429 2061 6e64 2028 6675 6e63 735b 315d  t) and (funcs[1]
-0003a580: 2e5f 5f64 6f63 5f5f 2069 7320 4e6f 6e65  .__doc__ is None
-0003a590: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0003a5a0: 6675 6e63 735b 315d 2e5f 5f64 6f63 5f5f  funcs[1].__doc__
-0003a5b0: 203d 206e 7064 6963 745b 6675 6e63 735b   = npdict[funcs[
-0003a5c0: 305d 5d2e 5f5f 646f 635f 5f0d 0a0d 0a0d  0]].__doc__.....
-0003a5d0: 0a23 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .# -------------
-0003a5e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0003a5f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0003a600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a63  -------------..c
-0003a610: 6c61 7373 2054 6872 6561 6469 6e67 3a0d  lass Threading:.
-0003a620: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
-0003a630: 6f64 0d0a 2020 2020 6465 6620 6f6e 2829  od..    def on()
-0003a640: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-0003a650: 2020 2020 2020 2020 5475 726e 2072 6970          Turn rip
-0003a660: 7461 626c 6520 7468 7265 6164 696e 6720  table threading 
-0003a670: 6f6e 2e0d 0a20 2020 2020 2020 2055 7365  on...        Use
-0003a680: 6420 6f6e 6c79 2077 6865 6e20 7269 7074  d only when ript
-0003a690: 6162 6c65 2074 6872 6561 6469 6e67 2077  able threading w
-0003a6a0: 6173 2074 7572 6e65 6420 6f66 662e 0d0a  as turned off...
-0003a6b0: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
-0003a6c0: 650d 0a20 2020 2020 2020 202d 2d2d 2d2d  e..        -----
-0003a6d0: 2d2d 0d0a 2020 2020 2020 2020 613d 7274  --..        a=rt
-0003a6e0: 2e61 7261 6e67 6528 315f 3030 305f 3030  .arange(1_000_00
-0003a6f0: 290d 0a20 2020 2020 2020 2054 6872 6561  )..        Threa
-0003a700: 6469 6e67 2e6f 6666 2829 0d0a 2020 2020  ding.off()..    
-0003a710: 2020 2020 2574 696d 6520 612b 3d31 0d0a      %time a+=1..
-0003a720: 2020 2020 2020 2020 5468 7265 6164 696e          Threadin
-0003a730: 672e 6f6e 2829 0d0a 2020 2020 2020 2020  g.on()..        
-0003a740: 2574 696d 6520 612b 3d31 0d0a 0d0a 2020  %time a+=1....  
-0003a750: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
-0003a760: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
-0003a770: 2020 2020 2020 2020 5072 6576 696f 7573          Previous
-0003a780: 6c79 2077 6865 7468 6572 2074 6872 6561  ly whether threa
-0003a790: 6469 6e67 2077 6173 206f 6e20 6f72 206e  ding was on or n
-0003a7a0: 6f74 2e20 3020 6f72 2031 2e20 303d 7468  ot. 0 or 1. 0=th
-0003a7b0: 7265 6164 696e 6720 7761 7320 6f66 6620  reading was off 
-0003a7c0: 6265 666f 7265 2e0d 0a0d 0a20 2020 2020  before.....     
-0003a7d0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-0003a7e0: 7265 7475 726e 2046 6173 7441 7272 6179  return FastArray
-0003a7f0: 2e5f 544f 4e28 290d 0a0d 0a20 2020 2040  ._TON()....    @
-0003a800: 7374 6174 6963 6d65 7468 6f64 0d0a 2020  staticmethod..  
-0003a810: 2020 6465 6620 6f66 6628 293a 0d0a 2020    def off():..  
-0003a820: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0003a830: 2020 2054 7572 6e20 7269 7074 6162 6c65     Turn riptable
-0003a840: 2074 6872 6561 6469 6e67 206f 6666 2e0d   threading off..
-0003a850: 0a20 2020 2020 2020 2055 7365 6675 6c20  .        Useful 
-0003a860: 666f 7220 7768 656e 2074 6865 2073 7973  for when the sys
-0003a870: 7465 6d20 6861 7320 6f74 6865 7220 7072  tem has other pr
-0003a880: 6f63 6573 7365 7320 7573 696e 6720 6f74  ocesses using ot
-0003a890: 6865 7220 7468 7265 6164 730d 0a20 2020  her threads..   
-0003a8a0: 2020 2020 206f 7220 746f 206c 696d 6974       or to limit
-0003a8b0: 2074 6872 6561 6469 6e67 2072 6573 6f75   threading resou
-0003a8c0: 7263 6573 2e0d 0a0d 0a20 2020 2020 2020  rces.....       
-0003a8d0: 2045 7861 6d70 6c65 0d0a 2020 2020 2020   Example..      
-0003a8e0: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
-0003a8f0: 2020 2061 3d72 742e 6172 616e 6765 2831     a=rt.arange(1
-0003a900: 5f30 3030 5f30 3029 0d0a 2020 2020 2020  _000_00)..      
-0003a910: 2020 5468 7265 6164 696e 672e 6f66 6628    Threading.off(
-0003a920: 290d 0a20 2020 2020 2020 2025 7469 6d65  )..        %time
-0003a930: 2061 2b3d 310d 0a20 2020 2020 2020 2054   a+=1..        T
-0003a940: 6872 6561 6469 6e67 2e6f 6e28 290d 0a20  hreading.on().. 
-0003a950: 2020 2020 2020 2025 7469 6d65 2061 2b3d         %time a+=
-0003a960: 310d 0a0d 0a20 2020 2020 2020 2052 6574  1....        Ret
-0003a970: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
-0003a980: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2050  -----..        P
-0003a990: 7265 7669 6f75 736c 7920 7768 6574 6865  reviously whethe
-0003a9a0: 7220 7468 7265 6164 696e 6720 7761 7320  r threading was 
-0003a9b0: 6f6e 206f 7220 6e6f 742e 2030 206f 7220  on or not. 0 or 
-0003a9c0: 312e 2030 3d74 6872 6561 6469 6e67 2077  1. 0=threading w
-0003a9d0: 6173 206f 6666 2062 6566 6f72 652e 0d0a  as off before...
-0003a9e0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-0003a9f0: 2020 2020 2072 6574 7572 6e20 4661 7374       return Fast
-0003aa00: 4172 7261 792e 5f54 4f46 4628 290d 0a0d  Array._TOFF()...
-0003aa10: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
-0003aa20: 6f64 0d0a 2020 2020 6465 6620 7468 7265  od..    def thre
-0003aa30: 6164 7328 7468 7265 6164 636f 756e 7429  ads(threadcount)
-0003aa40: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-0003aa50: 2020 2020 2020 2020 5365 7420 686f 7720          Set how 
-0003aa60: 6d61 6e79 2077 6f72 6b65 7220 7468 7265  many worker thre
-0003aa70: 6164 7320 7269 7074 6162 6c65 2063 616e  ads riptable can
-0003aa80: 2075 7365 2e0d 0a20 2020 2020 2020 204f   use...        O
-0003aa90: 6674 656e 2064 6566 6175 6c74 7320 746f  ften defaults to
-0003aaa0: 2031 3220 616e 6420 6361 6e6e 6f74 2062   12 and cannot b
-0003aab0: 6520 7365 7420 6265 6c6f 7720 3120 6f72  e set below 1 or
-0003aac0: 203e 2033 312e 0d0a 0d0a 2020 2020 2020   > 31.....      
-0003aad0: 2020 546f 2074 7572 6e20 7269 7074 6162    To turn riptab
-0003aae0: 6c65 2074 6872 6561 6469 6e67 206f 6666  le threading off
-0003aaf0: 2063 6f6d 706c 6574 656c 7920 7573 6520   completely use 
-0003ab00: 5468 7265 6164 696e 672e 6f66 6628 290d  Threading.off().
-0003ab10: 0a20 2020 2020 2020 2055 7365 6675 6c20  .        Useful 
-0003ab20: 666f 7220 7768 656e 2074 6865 2073 7973  for when the sys
-0003ab30: 7465 6d20 6861 7320 6f74 6865 7220 7072  tem has other pr
-0003ab40: 6f63 6573 7365 7320 7573 696e 6720 6f74  ocesses using ot
-0003ab50: 6865 7220 7468 7265 6164 730d 0a20 2020  her threads..   
-0003ab60: 2020 2020 206f 7220 746f 206c 696d 6974       or to limit
-0003ab70: 2074 6872 6561 6469 6e67 2072 6573 6f75   threading resou
-0003ab80: 7263 6573 2e0d 0a0d 0a20 2020 2020 2020  rces.....       
-0003ab90: 2045 7861 6d70 6c65 0d0a 2020 2020 2020   Example..      
-0003aba0: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
-0003abb0: 2020 2054 6872 6561 6469 6e67 2e74 6872     Threading.thr
-0003abc0: 6561 6473 2838 290d 0a0d 0a20 2020 2020  eads(8)....     
-0003abd0: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
-0003abe0: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
-0003abf0: 2020 2020 206e 756d 6265 7220 6f66 2074       number of t
-0003ac00: 6872 6561 6473 2070 7265 7669 6f75 736c  hreads previousl
-0003ac10: 7920 7573 6564 0d0a 2020 2020 2020 2020  y used..        
-0003ac20: 2222 220d 0a20 2020 2020 2020 2072 6574  """..        ret
-0003ac30: 7572 6e20 7263 2e53 6574 5468 7265 6164  urn rc.SetThread
-0003ac40: 5761 6b65 5570 2874 6872 6561 6463 6f75  WakeUp(threadcou
-0003ac50: 6e74 290d 0a0d 0a0d 0a23 202d 2d2d 2d2d  nt)......# -----
-0003ac60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0003ac70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0003ac80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0003ac90: 2d2d 2d2d 2d0d 0a63 6c61 7373 2052 6563  -----..class Rec
-0003aca0: 7963 6c65 3a0d 0a20 2020 2040 7374 6174  ycle:..    @stat
-0003acb0: 6963 6d65 7468 6f64 0d0a 2020 2020 6465  icmethod..    de
-0003acc0: 6620 6f6e 2829 3a0d 0a20 2020 2020 2020  f on():..       
-0003acd0: 2022 2222 0d0a 2020 2020 2020 2020 5475   """..        Tu
-0003ace0: 726e 2072 6970 7461 626c 6520 7265 6379  rn riptable recy
-0003acf0: 636c 696e 6720 6f6e 2e0d 0a20 2020 2020  cling on...     
-0003ad00: 2020 2055 7365 6420 6f6e 6c79 2077 6865     Used only whe
-0003ad10: 6e20 7269 7074 6162 6c65 2072 6563 7963  n riptable recyc
-0003ad20: 6c69 6e67 2077 6173 2074 7572 6e65 6420  ling was turned 
-0003ad30: 6f66 662e 0d0a 0d0a 2020 2020 2020 2020  off.....        
-0003ad40: 4578 616d 706c 650d 0a20 2020 2020 2020  Example..       
-0003ad50: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
-0003ad60: 2020 613d 6172 616e 6765 2831 5f30 3030    a=arange(1_000
-0003ad70: 5f30 3029 0d0a 2020 2020 2020 2020 5265  _00)..        Re
-0003ad80: 6379 636c 652e 6f66 6628 290d 0a20 2020  cycle.off()..   
-0003ad90: 2020 2020 2025 7469 6d65 6974 2061 3d61       %timeit a=a
-0003ada0: 202b 2031 0d0a 2020 2020 2020 2020 5265   + 1..        Re
-0003adb0: 6379 636c 652e 6f6e 2829 0d0a 2020 2020  cycle.on()..    
-0003adc0: 2020 2020 2574 696d 6569 7420 613d 6120      %timeit a=a 
-0003add0: 2b20 310d 0a0d 0a20 2020 2020 2020 2022  + 1....        "
-0003ade0: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
-0003adf0: 726e 2046 6173 7441 7272 6179 2e5f 524f  rn FastArray._RO
-0003ae00: 4e28 290d 0a0d 0a20 2020 2040 7374 6174  N()....    @stat
-0003ae10: 6963 6d65 7468 6f64 0d0a 2020 2020 6465  icmethod..    de
-0003ae20: 6620 6f66 6628 293a 0d0a 2020 2020 2020  f off():..      
-0003ae30: 2020 7265 7475 726e 2046 6173 7441 7272    return FastArr
-0003ae40: 6179 2e5f 524f 4646 2829 0d0a 0d0a 2020  ay._ROFF()....  
-0003ae50: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
-0003ae60: 0a20 2020 2064 6566 206e 6f77 2874 696d  .    def now(tim
-0003ae70: 656f 7574 3a20 696e 7420 3d20 3029 3a0d  eout: int = 0):.
-0003ae80: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-0003ae90: 2020 2020 2020 5061 7373 2074 6865 2067        Pass the g
-0003aea0: 6172 6261 6765 2063 6f6c 6c65 6374 6f72  arbage collector
-0003aeb0: 2074 696d 656f 7574 2076 616c 7565 2074   timeout value t
-0003aec0: 6f20 636c 6561 6e75 702e 0d0a 2020 2020  o cleanup...    
-0003aed0: 2020 2020 416c 736f 2063 616c 6c73 2074      Also calls t
-0003aee0: 6865 2070 7974 686f 6e20 6761 7262 6167  he python garbag
-0003aef0: 6520 636f 6c6c 6563 746f 722e 0d0a 0d0a  e collector.....
-0003af00: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
-0003af10: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
-0003af20: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0003af30: 7469 6d65 6f75 743a 2064 6566 6175 6c74  timeout: default
-0003af40: 2074 6f20 302e 2020 3020 7769 6c6c 206e   to 0.  0 will n
-0003af50: 6f74 2073 6574 2061 2074 696d 656f 7574  ot set a timeout
-0003af60: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
-0003af70: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
-0003af80: 2d2d 2d2d 0d0a 2020 2020 2020 2020 746f  ----..        to
-0003af90: 7461 6c20 6172 7261 7973 2064 656c 6574  tal arrays delet
-0003afa0: 6564 0d0a 2020 2020 2020 2020 2222 220d  ed..        """.
-0003afb0: 0a20 2020 2020 2020 2069 6d70 6f72 7420  .        import 
-0003afc0: 6763 0d0a 0d0a 2020 2020 2020 2020 6763  gc....        gc
-0003afd0: 2e63 6f6c 6c65 6374 2829 0d0a 2020 2020  .collect()..    
-0003afe0: 2020 2020 7265 7375 6c74 203d 2072 632e      result = rc.
-0003aff0: 5265 6379 636c 6547 6172 6261 6765 436f  RecycleGarbageCo
-0003b000: 6c6c 6563 744e 6f77 2874 696d 656f 7574  llectNow(timeout
-0003b010: 295b 2254 6f74 616c 4465 6c65 7465 6422  )["TotalDeleted"
-0003b020: 5d0d 0a20 2020 2020 2020 2069 6620 7265  ]..        if re
-0003b030: 7375 6c74 203e 2030 3a0d 0a20 2020 2020  sult > 0:..     
-0003b040: 2020 2020 2020 2072 632e 5265 6379 636c         rc.Recycl
-0003b050: 6547 6172 6261 6765 436f 6c6c 6563 744e  eGarbageCollectN
-0003b060: 6f77 2874 696d 656f 7574 290d 0a20 2020  ow(timeout)..   
-0003b070: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
-0003b080: 6c74 0d0a 0d0a 2020 2020 4073 7461 7469  lt....    @stati
-0003b090: 636d 6574 686f 640d 0a20 2020 2064 6566  cmethod..    def
-0003b0a0: 2074 696d 656f 7574 2874 696d 656f 7574   timeout(timeout
-0003b0b0: 3a20 696e 7420 3d20 3130 3029 3a0d 0a20  : int = 100):.. 
-0003b0c0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-0003b0d0: 2020 2020 5061 7373 2074 6865 2067 6172      Pass the gar
-0003b0e0: 6261 6765 2063 6f6c 6c65 6374 6f72 2074  bage collector t
-0003b0f0: 696d 656f 7574 2076 616c 7565 2074 6f20  imeout value to 
-0003b100: 6578 7069 7265 2e0d 0a20 2020 2020 2020  expire...       
-0003b110: 2054 6865 2074 696d 656f 7574 2076 616c   The timeout val
-0003b120: 7565 2069 7320 726f 7567 686c 7920 696e  ue is roughly in
-0003b130: 2032 2f35 2073 6563 732e 0d0a 2020 2020   2/5 secs...    
-0003b140: 2020 2020 4120 7661 6c75 6520 6f66 2031      A value of 1
-0003b150: 3030 2069 7320 7573 7561 6c6c 7920 6162  00 is usually ab
-0003b160: 6f75 7420 3430 2073 6563 6f6e 6473 2e0d  out 40 seconds..
-0003b170: 0a20 2020 2020 2020 2049 6620 616e 2061  .        If an a
-0003b180: 7272 6179 2068 6173 206e 6f74 2062 6565  rray has not bee
-0003b190: 6e20 7265 7573 6564 2062 7920 7468 6520  n reused by the 
-0003b1a0: 7469 6d65 6f75 742c 2069 7420 6973 2070  timeout, it is p
-0003b1b0: 6572 6d61 6e65 6e74 6c79 2064 656c 6574  ermanently delet
-0003b1c0: 6564 2e0d 0a0d 0a20 2020 2020 2020 2052  ed.....        R
-0003b1d0: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
-0003b1e0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-0003b1f0: 2070 7265 7669 6f75 7320 7469 6d65 7370   previous timesp
-0003b200: 616e 0d0a 2020 2020 2020 2020 2222 220d  an..        """.
-0003b210: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0003b220: 7263 2e52 6563 7963 6c65 5365 7447 6172  rc.RecycleSetGar
-0003b230: 6261 6765 436f 6c6c 6563 7454 696d 656f  bageCollectTimeo
-0003b240: 7574 2874 696d 656f 7574 290d 0a0d 0a0d  ut(timeout).....
-0003b250: 0a23 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .# -------------
-0003b260: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0003b270: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0003b280: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a63  -------------..c
-0003b290: 6c61 7373 204c 6564 6765 723a 0d0a 2020  lass Ledger:..  
-0003b2a0: 2020 4073 7461 7469 636d 6574 686f 640d    @staticmethod.
-0003b2b0: 0a20 2020 2064 6566 206f 6e28 293a 0d0a  .    def on():..
-0003b2c0: 2020 2020 2020 2020 2222 2254 7572 6e20          """Turn 
-0003b2d0: 7468 6520 6d61 7468 206c 6564 6765 7220  the math ledger 
-0003b2e0: 6f6e 2074 6f20 7265 636f 7264 2061 6c6c  on to record all
-0003b2f0: 2061 7272 6179 206d 6174 6820 726f 7574   array math rout
-0003b300: 696e 6573 2222 220d 0a20 2020 2020 2020  ines"""..       
-0003b310: 2072 6574 7572 6e20 5479 7065 5265 6769   return TypeRegi
-0003b320: 7374 6572 2e4d 6174 684c 6564 6765 722e  ster.MathLedger.
-0003b330: 5f4c 6564 6765 724f 6e28 290d 0a0d 0a20  _LedgerOn().... 
-0003b340: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-0003b350: 0d0a 2020 2020 6465 6620 6f66 6628 293a  ..    def off():
-0003b360: 0d0a 2020 2020 2020 2020 2222 2254 7572  ..        """Tur
-0003b370: 6e20 7468 6520 6d61 7468 206c 6564 6765  n the math ledge
-0003b380: 7220 6f66 6622 2222 0d0a 2020 2020 2020  r off"""..      
-0003b390: 2020 7265 7475 726e 2054 7970 6552 6567    return TypeReg
-0003b3a0: 6973 7465 722e 4d61 7468 4c65 6467 6572  ister.MathLedger
-0003b3b0: 2e5f 4c65 6467 6572 4f66 6628 290d 0a0d  ._LedgerOff()...
-0003b3c0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
-0003b3d0: 6f64 0d0a 2020 2020 6465 6620 6475 6d70  od..    def dump
-0003b3e0: 2864 6174 6173 6574 3d54 7275 6529 3a0d  (dataset=True):.
-0003b3f0: 0a20 2020 2020 2020 2022 2222 5072 696e  .        """Prin
-0003b400: 7420 6f75 7420 7468 6520 6d61 7468 206c  t out the math l
-0003b410: 6564 6765 7222 2222 0d0a 2020 2020 2020  edger"""..      
-0003b420: 2020 7265 7475 726e 2054 7970 6552 6567    return TypeReg
-0003b430: 6973 7465 722e 4d61 7468 4c65 6467 6572  ister.MathLedger
-0003b440: 2e5f 4c65 6467 6572 4475 6d70 2864 6174  ._LedgerDump(dat
-0003b450: 6173 6574 3d64 6174 6173 6574 290d 0a0d  aset=dataset)...
-0003b460: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
-0003b470: 6f64 0d0a 2020 2020 6465 6620 746f 5f66  od..    def to_f
-0003b480: 696c 6528 6669 6c65 6e61 6d65 293a 0d0a  ile(filename):..
-0003b490: 2020 2020 2020 2020 2222 2253 6176 6520          """Save 
-0003b4a0: 7468 6520 6d61 7468 206c 6564 6765 7220  the math ledger 
-0003b4b0: 746f 2061 2066 696c 6522 2222 0d0a 2020  to a file"""..  
-0003b4c0: 2020 2020 2020 7265 7475 726e 2054 7970        return Typ
-0003b4d0: 6552 6567 6973 7465 722e 4d61 7468 4c65  eRegister.MathLe
-0003b4e0: 6467 6572 2e5f 4c65 6467 6572 4475 6d70  dger._LedgerDump
-0003b4f0: 4669 6c65 2866 696c 656e 616d 6529 0d0a  File(filename)..
-0003b500: 0d0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
-0003b510: 686f 640d 0a20 2020 2064 6566 2063 6c65  hod..    def cle
-0003b520: 6172 2829 3a0d 0a20 2020 2020 2020 2022  ar():..        "
-0003b530: 2222 436c 6561 7220 616c 6c20 7468 6520  ""Clear all the 
-0003b540: 656e 7472 6965 7320 696e 2074 6865 206d  entries in the m
-0003b550: 6174 6820 6c65 6467 6572 2222 220d 0a20  ath ledger""".. 
-0003b560: 2020 2020 2020 2072 6574 7572 6e20 5479         return Ty
-0003b570: 7065 5265 6769 7374 6572 2e4d 6174 684c  peRegister.MathL
-0003b580: 6564 6765 722e 5f4c 6564 6765 7243 6c65  edger._LedgerCle
-0003b590: 6172 2829 0d0a 0d0a 0d0a 2320 2d2d 2d2d  ar()......# ----
-0003b5a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0003b5b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0003b5c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0003b5d0: 2d2d 2d2d 2d2d 0d0a 2320 7468 6973 2069  ------..# this i
-0003b5e0: 7320 6361 6c6c 6564 2077 6865 6e20 7468  s called when th
-0003b5f0: 6520 6d6f 6475 6c65 2069 7320 6c6f 6164  e module is load
-0003b600: 6564 0d0a 5f46 6978 7570 446f 6353 7472  ed.._FixupDocStr
-0003b610: 696e 6773 2829 0d0a 0d0a 2320 4e4f 5445  ings()....# NOTE
-0003b620: 3a20 4b65 6570 2074 6869 7320 6174 2074  : Keep this at t
-0003b630: 6865 2065 6e64 206f 6620 7468 6520 6669  he end of the fi
-0003b640: 6c65 0d0a 2320 2d2d 2d2d 2d2d 2d2d 2d2d  le..# ----------
-0003b650: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0003b660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0003b670: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0003b680: 2d0d 0a23 2063 616c 6c69 6e67 2074 6869  -..# calling thi
-0003b690: 7320 6675 6e63 7469 6f6e 2077 696c 6c20  s function will 
-0003b6a0: 666f 7263 6520 666d 2074 6f20 7265 7475  force fm to retu
-0003b6b0: 726e 2046 6173 7441 7272 6179 2073 7562  rn FastArray sub
-0003b6c0: 636c 6173 730d 0a5f 7365 7466 6173 7461  class.._setfasta
-0003b6d0: 7272 6179 7479 7065 2829 0d0a 0d0a 5479  rraytype()....Ty
-0003b6e0: 7065 5265 6769 7374 6572 2e46 6173 7441  peRegister.FastA
-0003b6f0: 7272 6179 203d 2046 6173 7441 7272 6179  rray = FastArray
-0003b700: 0d0a 0d0a 4661 7374 4172 7261 792e 7265  ....FastArray.re
-0003b710: 6769 7374 6572 5f66 756e 6374 696f 6e28  gister_function(
-0003b720: 2264 6573 6372 6962 6522 2c20 6465 7363  "describe", desc
-0003b730: 7269 6265 290d 0a                        ribe)..
+00038ce0: 2020 2069 6e76 616c 6964 735f 6d61 736b     invalids_mask
+00038cf0: 203d 2073 656c 6620 3d3d 2073 656c 662e   = self == self.
+00038d00: 696e 760d 0a0d 0a20 2020 2020 2020 2020  inv....         
+00038d10: 2020 2020 2020 2023 2049 6620 616c 6c20         # If all 
+00038d20: 7661 6c75 6573 2061 7265 2076 616c 6964  values are valid
+00038d30: 2c20 646f 6e27 7420 626f 7468 6572 2063  , don't bother c
+00038d40: 7265 6174 696e 6720 616e 2061 6c6c 2d46  reating an all-F
+00038d50: 616c 7365 206d 6173 6b2c 2069 7427 7320  alse mask, it's 
+00038d60: 6a75 7374 2077 6173 7469 6e67 206d 656d  just wasting mem
+00038d70: 6f72 792e 0d0a 2020 2020 2020 2020 2020  ory...          
+00038d80: 2020 2020 2020 6966 206e 6f74 2069 6e76        if not inv
+00038d90: 616c 6964 735f 6d61 736b 2e61 6e79 2829  alids_mask.any()
+00038da0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00038db0: 2020 2020 2020 2069 6e76 616c 6964 735f         invalids_
+00038dc0: 6d61 736b 203d 204e 6f6e 650d 0a20 2020  mask = None..   
+00038dd0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+00038de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038df0: 696e 7661 6c69 6473 5f6d 6173 6b20 3d20  invalids_mask = 
+00038e00: 4e6f 6e65 0d0a 0d0a 2020 2020 2020 2020  None....        
+00038e10: 2020 2020 2320 446f 6573 2074 6865 2063      # Does the c
+00038e20: 616c 6c65 7220 7761 6e74 2074 6f20 7072  aller want to pr
+00038e30: 6573 6572 7665 2074 6865 2066 6978 6564  eserve the fixed
+00038e40: 2d6c 656e 6774 6820 6269 6e61 7279 2064  -length binary d
+00038e50: 6174 613f 0d0a 2020 2020 2020 2020 2020  ata?..          
+00038e60: 2020 6966 2070 7265 7365 7276 655f 6669    if preserve_fi
+00038e70: 7865 645f 6279 7465 733a 0d0a 2020 2020  xed_bytes:..    
+00038e80: 2020 2020 2020 2020 2020 2020 2320 436f              # Co
+00038e90: 6e76 6572 7420 746f 2061 2066 6978 6564  nvert to a fixed
+00038ea0: 2d6c 656e 6774 6820 6269 6e61 7279 2028  -length binary (
+00038eb0: 2762 7974 6573 2729 2074 7970 652e 0d0a  'bytes') type...
+00038ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038ed0: 656c 656d 656e 745f 7374 725f 6c65 6e67  element_str_leng
+00038ee0: 7468 203d 206e 702e 6474 7970 6528 7365  th = np.dtype(se
+00038ef0: 6c66 2e64 7479 7065 292e 6974 656d 7369  lf.dtype).itemsi
+00038f00: 7a65 0d0a 2020 2020 2020 2020 2020 2020  ze..            
+00038f10: 2020 2020 6172 725f 7479 7065 203d 2070      arr_type = p
+00038f20: 612e 6269 6e61 7279 2865 6c65 6d65 6e74  a.binary(element
+00038f30: 5f73 7472 5f6c 656e 6774 6829 2069 6620  _str_length) if 
+00038f40: 7479 7065 2069 7320 4e6f 6e65 2065 6c73  type is None els
+00038f50: 6520 7479 7065 0d0a 2020 2020 2020 2020  e type..        
+00038f60: 2020 2020 2020 2020 7265 7475 726e 2070          return p
+00038f70: 612e 6172 7261 7928 7365 6c66 2e5f 6e70  a.array(self._np
+00038f80: 2c20 6d61 736b 3d69 6e76 616c 6964 735f  , mask=invalids_
+00038f90: 6d61 736b 2c20 7479 7065 3d61 7272 5f74  mask, type=arr_t
+00038fa0: 7970 6529 0d0a 2020 2020 2020 2020 2020  ype)..          
+00038fb0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00038fc0: 2020 2020 2020 2020 2023 2043 6f6e 7665           # Conve
+00038fd0: 7274 2074 6869 7320 6172 7261 7920 746f  rt this array to
+00038fe0: 2061 2070 7961 7272 6f77 2076 6172 6961   a pyarrow varia
+00038ff0: 626c 652d 6c65 6e67 7468 2073 7472 696e  ble-length strin
+00039000: 6720 6172 7261 792e 0d0a 2020 2020 2020  g array...      
+00039010: 2020 2020 2020 2020 2020 6966 2074 7970            if typ
+00039020: 6520 6973 204e 6f6e 653a 0d0a 2020 2020  e is None:..    
+00039030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00039040: 7479 7065 203d 2070 612e 7374 7269 6e67  type = pa.string
+00039050: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+00039060: 2020 2020 2320 436f 6e76 6572 7420 6173      # Convert as
+00039070: 2055 6e69 636f 6465 206e 6461 7272 6179   Unicode ndarray
+00039080: 2074 6f20 7374 7269 6e67 6172 7261 792c   to stringarray,
+00039090: 2061 7320 6279 7465 7374 7269 6e67 2064   as bytestring d
+000390a0: 6f65 7320 6e6f 7420 7072 6573 6572 7665  oes not preserve
+000390b0: 2065 6c65 6d65 6e74 206c 656e 6774 6820   element length 
+000390c0: 2872 6970 7461 626c 6523 3234 3929 0d0a  (riptable#249)..
+000390d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000390e0: 7265 7475 726e 2070 612e 6172 7261 7928  return pa.array(
+000390f0: 6e70 2e61 7272 6179 2873 656c 662e 5f6e  np.array(self._n
+00039100: 702c 2064 7479 7065 3d22 5522 292c 206d  p, dtype="U"), m
+00039110: 6173 6b3d 696e 7661 6c69 6473 5f6d 6173  ask=invalids_mas
+00039120: 6b2c 2074 7970 653d 7479 7065 290d 0a0d  k, type=type)...
+00039130: 0a20 2020 2020 2020 2065 6c69 6620 6e70  .        elif np
+00039140: 2e69 7373 7562 6474 7970 6528 7365 6c66  .issubdtype(self
+00039150: 2e64 7479 7065 2c20 7374 7229 3a0d 0a20  .dtype, str):.. 
+00039160: 2020 2020 2020 2020 2020 2023 2049 6620             # If 
+00039170: 7468 6520 6361 6c6c 6572 2077 616e 7473  the caller wants
+00039180: 2074 6f20 636f 6e76 6572 7420 656d 7074   to convert empt
+00039190: 7920 7374 7269 6e67 7320 746f 206e 756c  y strings to nul
+000391a0: 6c73 2c20 6765 7420 6120 6d61 736b 206f  ls, get a mask o
+000391b0: 6620 696e 7661 6c69 6473 2e0d 0a20 2020  f invalids...   
+000391c0: 2020 2020 2020 2020 2069 6620 656d 7074           if empt
+000391d0: 795f 7374 7269 6e67 735f 746f 5f6e 756c  y_strings_to_nul
+000391e0: 6c3a 0d0a 2020 2020 2020 2020 2020 2020  l:..            
+000391f0: 2020 2020 696e 7661 6c69 6473 5f6d 6173      invalids_mas
+00039200: 6b20 3d20 7365 6c66 203d 3d20 7365 6c66  k = self == self
+00039210: 2e69 6e76 0d0a 0d0a 2020 2020 2020 2020  .inv....        
+00039220: 2020 2020 2020 2020 2320 4966 2061 6c6c          # If all
+00039230: 2076 616c 7565 7320 6172 6520 7661 6c69   values are vali
+00039240: 642c 2064 6f6e 2774 2062 6f74 6865 7220  d, don't bother 
+00039250: 6372 6561 7469 6e67 2061 6e20 616c 6c2d  creating an all-
+00039260: 4661 6c73 6520 6d61 736b 2c20 6974 2773  False mask, it's
+00039270: 206a 7573 7420 7761 7374 696e 6720 6d65   just wasting me
+00039280: 6d6f 7279 2e0d 0a20 2020 2020 2020 2020  mory...         
+00039290: 2020 2020 2020 2069 6620 6e6f 7420 696e         if not in
+000392a0: 7661 6c69 6473 5f6d 6173 6b2e 616e 7928  valids_mask.any(
+000392b0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+000392c0: 2020 2020 2020 2020 696e 7661 6c69 6473          invalids
+000392d0: 5f6d 6173 6b20 3d20 4e6f 6e65 0d0a 2020  _mask = None..  
+000392e0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+000392f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00039300: 2069 6e76 616c 6964 735f 6d61 736b 203d   invalids_mask =
+00039310: 204e 6f6e 650d 0a0d 0a20 2020 2020 2020   None....       
+00039320: 2020 2020 2023 2070 7961 7272 6f77 2028       # pyarrow (
+00039330: 6173 206f 6620 7634 2e30 2920 646f 6573  as of v4.0) does
+00039340: 206e 6f74 2068 6176 6520 6120 6669 7865   not have a fixe
+00039350: 642d 7369 7a65 2055 6e69 636f 6465 2073  d-size Unicode s
+00039360: 7472 696e 6720 6461 7461 2074 7970 652c  tring data type,
+00039370: 2073 6f20 756e 6c69 6b65 2074 6865 2027   so unlike the '
+00039380: 6279 7465 7327 0d0a 2020 2020 2020 2020  bytes'..        
+00039390: 2020 2020 2320 6861 6e64 6c69 6e67 2061      # handling a
+000393a0: 626f 7665 2066 6f72 2041 5343 4949 2073  bove for ASCII s
+000393b0: 7472 696e 6773 2c20 7765 2068 6176 6520  trings, we have 
+000393c0: 746f 2075 7365 2074 6865 2076 6172 6961  to use the varia
+000393d0: 626c 652d 6c65 6e67 7468 2073 7472 696e  ble-length strin
+000393e0: 6720 6172 7261 7920 7479 7065 2e0d 0a20  g array type... 
+000393f0: 2020 2020 2020 2020 2020 2069 6620 7479             if ty
+00039400: 7065 2069 7320 4e6f 6e65 3a0d 0a20 2020  pe is None:..   
+00039410: 2020 2020 2020 2020 2020 2020 2074 7970               typ
+00039420: 6520 3d20 7061 2e73 7472 696e 6728 290d  e = pa.string().
+00039430: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00039440: 7572 6e20 7061 2e61 7272 6179 2873 656c  urn pa.array(sel
+00039450: 662e 5f6e 702c 206d 6173 6b3d 696e 7661  f._np, mask=inva
+00039460: 6c69 6473 5f6d 6173 6b2c 2074 7970 653d  lids_mask, type=
+00039470: 7479 7065 290d 0a0d 0a20 2020 2020 2020  type)....       
+00039480: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00039490: 2020 2020 7261 6973 6520 4e6f 7449 6d70      raise NotImp
+000394a0: 6c65 6d65 6e74 6564 4572 726f 7228 6622  lementedError(f"
+000394b0: 4661 7374 4172 7261 7920 7769 7468 2064  FastArray with d
+000394c0: 7479 7065 2027 7b6e 702e 6474 7970 6528  type '{np.dtype(
+000394d0: 7365 6c66 2e64 7479 7065 297d 2720 6973  self.dtype)}' is
+000394e0: 206e 6f74 2073 7570 706f 7274 6564 2e22   not supported."
+000394f0: 290d 0a0d 0a20 2020 2064 6566 205f 5f61  )....    def __a
+00039500: 7272 6f77 5f61 7272 6179 5f5f 2873 656c  rrow_array__(sel
+00039510: 662c 2074 7970 653a 204f 7074 696f 6e61  f, type: Optiona
+00039520: 6c5b 2270 612e 4461 7461 5479 7065 225d  l["pa.DataType"]
+00039530: 203d 204e 6f6e 6529 202d 3e20 556e 696f   = None) -> Unio
+00039540: 6e5b 2270 612e 4172 7261 7922 2c20 2270  n["pa.Array", "p
+00039550: 612e 4368 756e 6b65 6441 7272 6179 225d  a.ChunkedArray"]
+00039560: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+00039570: 2020 2020 2020 2020 496d 706c 656d 656e          Implemen
+00039580: 7461 7469 6f6e 206f 6620 7468 6520 6060  tation of the ``
+00039590: 5f5f 6172 726f 775f 6172 7261 795f 5f60  __arrow_array__`
+000395a0: 6020 7072 6f74 6f63 6f6c 2066 6f72 2063  ` protocol for c
+000395b0: 6f6e 7665 7273 696f 6e20 746f 2061 2070  onversion to a p
+000395c0: 7961 7272 6f77 2061 7272 6179 2e0d 0a0d  yarrow array....
+000395d0: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
+000395e0: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
+000395f0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+00039600: 2074 7970 6520 3a20 7079 6172 726f 772e   type : pyarrow.
+00039610: 4461 7461 5479 7065 2c20 6f70 7469 6f6e  DataType, option
+00039620: 616c 2c20 6465 6661 756c 7473 2074 6f20  al, defaults to 
+00039630: 4e6f 6e65 0d0a 0d0a 2020 2020 2020 2020  None....        
+00039640: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
+00039650: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
+00039660: 2020 7079 6172 726f 772e 4172 7261 7920    pyarrow.Array 
+00039670: 6f72 2070 7961 7272 6f77 2e43 6875 6e6b  or pyarrow.Chunk
+00039680: 6564 4172 7261 790d 0a0d 0a20 2020 2020  edArray....     
+00039690: 2020 204e 6f74 6573 0d0a 2020 2020 2020     Notes..      
+000396a0: 2020 2d2d 2d2d 2d0d 0a20 2020 2020 2020    -----..       
+000396b0: 2068 7474 7073 3a2f 2f61 7272 6f77 2e61   https://arrow.a
+000396c0: 7061 6368 652e 6f72 672f 646f 6373 2f70  pache.org/docs/p
+000396d0: 7974 686f 6e2f 6578 7465 6e64 696e 675f  ython/extending_
+000396e0: 7479 7065 732e 6874 6d6c 2363 6f6e 7472  types.html#contr
+000396f0: 6f6c 6c69 6e67 2d63 6f6e 7665 7273 696f  olling-conversio
+00039700: 6e2d 746f 2d70 7961 7272 6f77 2d61 7272  n-to-pyarrow-arr
+00039710: 6179 2d77 6974 682d 7468 652d 6172 726f  ay-with-the-arro
+00039720: 772d 6172 7261 792d 7072 6f74 6f63 6f6c  w-array-protocol
+00039730: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00039740: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00039750: 6c66 2e74 6f5f 6172 726f 7728 7479 7065  lf.to_arrow(type
+00039760: 3d74 7970 652c 2070 7265 7365 7276 655f  =type, preserve_
+00039770: 6669 7865 645f 6279 7465 733d 4661 6c73  fixed_bytes=Fals
+00039780: 652c 2065 6d70 7479 5f73 7472 696e 6773  e, empty_strings
+00039790: 5f74 6f5f 6e75 6c6c 3d54 7275 6529 0d0a  _to_null=True)..
+000397a0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+000397b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000397c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000397d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000397e0: 2d2d 2d0d 0a20 2020 2040 636c 6173 736d  ---..    @classm
+000397f0: 6574 686f 640d 0a20 2020 2064 6566 2072  ethod..    def r
+00039800: 6567 6973 7465 725f 6675 6e63 7469 6f6e  egister_function
+00039810: 2863 6c73 2c20 6e61 6d65 2c20 6675 6e63  (cls, name, func
+00039820: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
+00039830: 0a20 2020 2020 2020 2055 7365 6420 746f  .        Used to
+00039840: 2072 6567 6973 7465 7220 6675 6e63 7469   register functi
+00039850: 6f6e 7320 746f 2046 6173 7441 7272 6179  ons to FastArray
+00039860: 2e0d 0a20 2020 2020 2020 2055 7365 6420  ...        Used 
+00039870: 6279 2072 745f 6661 7374 6172 7261 796e  by rt_fastarrayn
+00039880: 756d 6261 0d0a 2020 2020 2020 2020 2222  umba..        ""
+00039890: 220d 0a20 2020 2020 2020 2073 6574 6174  "..        setat
+000398a0: 7472 2863 6c73 2c20 6e61 6d65 2c20 6675  tr(cls, name, fu
+000398b0: 6e63 290d 0a0d 0a20 2020 2064 6566 2061  nc)....    def a
+000398c0: 7070 6c79 5f73 6368 656d 6128 7365 6c66  pply_schema(self
+000398d0: 2c20 7363 6865 6d61 293a 0d0a 2020 2020  , schema):..    
+000398e0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+000398f0: 2041 7070 6c79 2061 2073 6368 656d 6120   Apply a schema 
+00039900: 636f 6e74 6169 6e69 6e67 2064 6573 6372  containing descr
+00039910: 6970 7469 7665 2069 6e66 6f72 6d61 7469  iptive informati
+00039920: 6f6e 2074 6f20 7468 6520 4661 7374 4172  on to the FastAr
+00039930: 7261 790d 0a0d 0a20 2020 2020 2020 203a  ray....        :
+00039940: 7061 7261 6d20 7363 6865 6d61 3a20 6469  param schema: di
+00039950: 6374 0d0a 2020 2020 2020 2020 3a72 6574  ct..        :ret
+00039960: 7572 6e3a 2064 6963 7469 6f6e 6172 7920  urn: dictionary 
+00039970: 6f66 2064 6576 6961 7469 6f6e 7320 6672  of deviations fr
+00039980: 6f6d 2074 6865 2073 6368 656d 610d 0a20  om the schema.. 
+00039990: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+000399a0: 2020 2020 6672 6f6d 202e 7274 5f6d 6574      from .rt_met
+000399b0: 6120 696d 706f 7274 2061 7070 6c79 5f73  a import apply_s
+000399c0: 6368 656d 6120 6173 205f 6170 706c 795f  chema as _apply_
+000399d0: 7363 6865 6d61 0d0a 0d0a 2020 2020 2020  schema....      
+000399e0: 2020 7265 7475 726e 205f 6170 706c 795f    return _apply_
+000399f0: 7363 6865 6d61 2873 656c 662c 2073 6368  schema(self, sch
+00039a00: 656d 6129 0d0a 0d0a 2020 2020 6465 6620  ema)....    def 
+00039a10: 696e 666f 2873 656c 662c 202a 2a6b 7761  info(self, **kwa
+00039a20: 7267 7329 3a0d 0a20 2020 2020 2020 2022  rgs):..        "
+00039a30: 2222 0d0a 2020 2020 2020 2020 5265 7475  ""..        Retu
+00039a40: 726e 2061 2064 6573 6372 6970 7469 6f6e  rn a description
+00039a50: 206f 6620 7468 6520 696e 7075 7420 6172   of the input ar
+00039a60: 7261 7927 7320 636f 6e74 656e 7473 2e0d  ray's contents..
+00039a70: 0a0d 0a20 2020 2020 2020 2054 6869 7320  ...        This 
+00039a80: 696e 666f 726d 6174 696f 6e20 6973 2073  information is s
+00039a90: 6574 2075 7369 6e67 2060 4661 7374 4172  et using `FastAr
+00039aa0: 7261 792e 6170 706c 795f 7363 6865 6d61  ray.apply_schema
+00039ab0: 6020 616e 6420 696e 636c 7564 6573 2073  ` and includes s
+00039ac0: 7465 7761 7264 2061 6e64 2064 7479 7065  teward and dtype
+00039ad0: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
+00039ae0: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
+00039af0: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
+00039b00: 2020 2020 202a 2a6b 7761 7267 7320 3a20       **kwargs : 
+00039b10: 206f 7074 696f 6e61 6c0d 0a20 2020 2020   optional..     
+00039b20: 2020 2020 2020 204b 6579 776f 7264 2061         Keyword a
+00039b30: 7267 756d 656e 7473 2070 6173 7365 6420  rguments passed 
+00039b40: 746f 203a 6675 6e63 3a60 2e72 745f 6d65  to :func:`.rt_me
+00039b50: 7461 2e69 6e66 6f60 0d0a 0d0a 2020 2020  ta.info`....    
+00039b60: 2020 2020 5265 7475 726e 730d 0a20 2020      Returns..   
+00039b70: 2020 2020 202d 2d2d 2d2d 2d2d 0d0a 2020       -------..  
+00039b80: 2020 2020 2020 696e 666f 203a 203a 636c        info : :cl
+00039b90: 6173 733a 602e 7274 5f6d 6574 612e 496e  ass:`.rt_meta.In
+00039ba0: 666f 600d 0a20 2020 2020 2020 2020 2020  fo`..           
+00039bb0: 2041 2064 6573 6372 6970 7469 6f6e 206f   A description o
+00039bc0: 6620 7468 6520 696e 7075 7420 6172 7261  f the input arra
+00039bd0: 7927 7320 636f 6e74 656e 7473 2e0d 0a0d  y's contents....
+00039be0: 0a20 2020 2020 2020 2053 6565 2041 6c73  .        See Als
+00039bf0: 6f0d 0a20 2020 2020 2020 202d 2d2d 2d2d  o..        -----
+00039c00: 2d2d 2d0d 0a20 2020 2020 2020 2046 6173  ---..        Fas
+00039c10: 7441 7272 6179 2e64 6f63 203a 2052 6574  tArray.doc : Ret
+00039c20: 7572 6e73 2074 6865 2044 6f63 206f 626a  urns the Doc obj
+00039c30: 6563 7420 666f 7220 7468 6520 696e 7075  ect for the inpu
+00039c40: 7420 6046 6173 7441 7272 6179 602e 0d0a  t `FastArray`...
+00039c50: 2020 2020 2020 2020 2e43 6174 6567 6f72          .Categor
+00039c60: 6963 616c 2e69 6e66 6f20 3a20 4469 7370  ical.info : Disp
+00039c70: 6c61 7973 2061 2064 6573 6372 6970 7469  lays a descripti
+00039c80: 6f6e 206f 6620 7468 6520 696e 7075 7420  on of the input 
+00039c90: 602e 4361 7465 676f 7269 6361 6c60 2e0d  `.Categorical`..
+00039ca0: 0a20 2020 2020 2020 202e 5374 7275 6374  .        .Struct
+00039cb0: 2e69 6e66 6f20 3a20 5265 7475 726e 7320  .info : Returns 
+00039cc0: 616e 206f 626a 6563 7420 636f 6e74 6169  an object contai
+00039cd0: 6e69 6e67 2061 2064 6573 6372 6970 7469  ning a descripti
+00039ce0: 6f6e 206f 6620 7468 6520 696e 7075 7420  on of the input 
+00039cf0: 7374 7275 6374 7572 6527 7320 636f 6e74  structure's cont
+00039d00: 656e 7473 2e0d 0a0d 0a20 2020 2020 2020  ents.....       
+00039d10: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
+00039d20: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+00039d30: 2020 2020 2052 6574 7572 6e20 7468 6520       Return the 
+00039d40: 6465 7363 7269 7074 696f 6e20 6f66 2074  description of t
+00039d50: 6865 2069 6e70 7574 2061 7272 6179 2773  he input array's
+00039d60: 2063 6f6e 7465 6e74 733a 0d0a 0d0a 2020   contents:....  
+00039d70: 2020 2020 2020 3e3e 3e20 6120 3d20 7274        >>> a = rt
+00039d80: 2e46 4128 5b31 2c20 322c 2033 2c20 342c  .FA([1, 2, 3, 4,
+00039d90: 2035 5d29 0d0a 2020 2020 2020 2020 3e3e   5])..        >>
+00039da0: 3e20 612e 696e 666f 2829 0d0a 2020 2020  > a.info()..    
+00039db0: 2020 2020 4465 7363 7269 7074 696f 6e3a      Description:
+00039dc0: 203c 6e6f 2064 6573 6372 6970 7469 6f6e   <no description
+00039dd0: 3e0d 0a20 2020 2020 2020 2053 7465 7761  >..        Stewa
+00039de0: 7264 3a20 3c6e 6f20 7374 6577 6172 643e  rd: <no steward>
+00039df0: 0d0a 2020 2020 2020 2020 5479 7065 3a20  ..        Type: 
+00039e00: 696e 7433 320d 0a0d 0a20 2020 2020 2020  int32....       
+00039e10: 2041 7070 6c79 2061 2073 6368 656d 6120   Apply a schema 
+00039e20: 616e 6420 7265 7475 726e 2074 6865 2064  and return the d
+00039e30: 6573 6372 6970 7469 6f6e 206f 6620 7468  escription of th
+00039e40: 6520 696e 7075 7420 6172 7261 7927 7320  e input array's 
+00039e50: 636f 6e74 656e 7473 3a0d 0a0d 0a20 2020  contents:....   
+00039e60: 2020 2020 203e 3e3e 2073 6368 656d 6120       >>> schema 
+00039e70: 3d20 7b22 4465 7363 7269 7074 696f 6e22  = {"Description"
+00039e80: 3a20 2254 6869 7320 6973 2061 6e20 6172  : "This is an ar
+00039e90: 7261 7922 2c20 2253 7465 7761 7264 223a  ray", "Steward":
+00039ea0: 2022 4272 6961 6e22 7d0d 0a20 2020 2020   "Brian"}..     
+00039eb0: 2020 203e 3e3e 2061 2e61 7070 6c79 5f73     >>> a.apply_s
+00039ec0: 6368 656d 6128 7363 6865 6d61 290d 0a20  chema(schema).. 
+00039ed0: 2020 2020 2020 207b 7d0d 0a20 2020 2020         {}..     
+00039ee0: 2020 203e 3e3e 2061 2e69 6e66 6f28 290d     >>> a.info().
+00039ef0: 0a20 2020 2020 2020 2044 6573 6372 6970  .        Descrip
+00039f00: 7469 6f6e 3a20 5468 6973 2069 7320 616e  tion: This is an
+00039f10: 2061 7272 6179 0d0a 2020 2020 2020 2020   array..        
+00039f20: 5374 6577 6172 643a 2042 7269 616e 0d0a  Steward: Brian..
+00039f30: 2020 2020 2020 2020 5479 7065 3a20 696e          Type: in
+00039f40: 7433 320d 0a0d 0a20 2020 2020 2020 2052  t32....        R
+00039f50: 6574 7572 6e20 7468 6520 6465 7363 7269  eturn the descri
+00039f60: 7074 696f 6e20 6f66 2074 6865 2069 6e70  ption of the inp
+00039f70: 7574 2061 7272 6179 2773 2063 6f6e 7465  ut array's conte
+00039f80: 6e74 7320 7769 7468 2061 2074 6974 6c65  nts with a title
+00039f90: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
+00039fa0: 2061 2e69 6e66 6f28 7469 746c 653d 2254   a.info(title="T
+00039fb0: 6573 7422 290d 0a20 2020 2020 2020 2054  est")..        T
+00039fc0: 6573 740d 0a20 2020 2020 2020 203d 3d3d  est..        ===
+00039fd0: 3d0d 0a20 2020 2020 2020 2044 6573 6372  =..        Descr
+00039fe0: 6970 7469 6f6e 3a20 5468 6973 2069 7320  iption: This is 
+00039ff0: 616e 2061 7272 6179 0d0a 2020 2020 2020  an array..      
+0003a000: 2020 5374 6577 6172 643a 2042 7269 616e    Steward: Brian
+0003a010: 0d0a 2020 2020 2020 2020 5479 7065 3a20  ..        Type: 
+0003a020: 696e 7433 320d 0a20 2020 2020 2020 2022  int32..        "
+0003a030: 2222 0d0a 2020 2020 2020 2020 6672 6f6d  ""..        from
+0003a040: 202e 7274 5f6d 6574 6120 696d 706f 7274   .rt_meta import
+0003a050: 2069 6e66 6f20 6173 205f 696e 666f 0d0a   info as _info..
+0003a060: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+0003a070: 205f 696e 666f 2873 656c 662c 202a 2a6b   _info(self, **k
+0003a080: 7761 7267 7329 0d0a 0d0a 2020 2020 4070  wargs)....    @p
+0003a090: 726f 7065 7274 790d 0a20 2020 2064 6566  roperty..    def
+0003a0a0: 2064 6f63 2873 656c 6629 3a0d 0a20 2020   doc(self):..   
+0003a0b0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+0003a0c0: 2020 5265 7475 726e 2074 6865 2044 6f63    Return the Doc
+0003a0d0: 206f 626a 6563 7420 666f 7220 7468 6520   object for the 
+0003a0e0: 696e 7075 7420 6046 6173 7441 7272 6179  input `FastArray
+0003a0f0: 602e 0d0a 0d0a 2020 2020 2020 2020 4966  `.....        If
+0003a100: 206e 6f20 446f 6320 6f62 6a65 6374 2065   no Doc object e
+0003a110: 7869 7374 732c 2072 6574 7572 6e20 4e6f  xists, return No
+0003a120: 6e65 2e0d 0a0d 0a20 2020 2020 2020 2052  ne.....        R
+0003a130: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
+0003a140: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0003a150: 2064 6f63 203a 2060 7e72 6970 7461 626c   doc : `~riptabl
+0003a160: 652e 7274 5f6d 6574 612e 446f 6360 0d0a  e.rt_meta.Doc`..
+0003a170: 2020 2020 2020 2020 2020 2020 5468 6520              The 
+0003a180: 446f 6320 6f62 6a65 6374 2066 6f72 2074  Doc object for t
+0003a190: 6865 2069 6e70 7574 2060 4661 7374 4172  he input `FastAr
+0003a1a0: 7261 7960 2e20 4966 206e 6f20 446f 6320  ray`. If no Doc 
+0003a1b0: 6f62 6a65 6374 2065 7869 7374 732c 2072  object exists, r
+0003a1c0: 6574 7572 6e20 4e6f 6e65 2e0d 0a0d 0a20  eturn None..... 
+0003a1d0: 2020 2020 2020 2053 6565 2041 6c73 6f0d         See Also.
+0003a1e0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0003a1f0: 2d0d 0a20 2020 2020 2020 2046 6173 7441  -..        FastA
+0003a200: 7272 6179 2e69 6e66 6f20 3a20 5265 7475  rray.info : Retu
+0003a210: 726e 2061 2064 6573 6372 6970 7469 6f6e  rn a description
+0003a220: 206f 6620 7468 6520 696e 7075 7420 6172   of the input ar
+0003a230: 7261 7927 7320 636f 6e74 656e 7473 2e0d  ray's contents..
+0003a240: 0a20 2020 2020 2020 207e 7269 7074 6162  .        ~riptab
+0003a250: 6c65 2e72 745f 6d65 7461 2e61 7070 6c79  le.rt_meta.apply
+0003a260: 5f73 6368 656d 6120 3a20 5365 7420 446f  _schema : Set Do
+0003a270: 6320 6f62 6a65 6374 2076 616c 7565 732e  c object values.
+0003a280: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
+0003a290: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
+0003a2a0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0003a2b0: 4e6f 2044 6f63 206f 626a 6563 7420 6578  No Doc object ex
+0003a2c0: 6973 7473 3a0d 0a0d 0a20 2020 2020 2020  ists:....       
+0003a2d0: 203e 3e3e 2061 203d 2072 742e 4641 285b   >>> a = rt.FA([
+0003a2e0: 312c 2032 2c20 332c 2034 2c20 355d 290d  1, 2, 3, 4, 5]).
+0003a2f0: 0a20 2020 2020 2020 203e 3e3e 2070 7269  .        >>> pri
+0003a300: 6e74 2861 2e64 6f63 290d 0a20 2020 2020  nt(a.doc)..     
+0003a310: 2020 204e 6f6e 650d 0a0d 0a20 2020 2020     None....     
+0003a320: 2020 2041 7070 6c79 2061 2073 6368 656d     Apply a schem
+0003a330: 6120 616e 6420 7265 7475 726e 2074 6865  a and return the
+0003a340: 2044 6f63 206f 626a 6563 743a 0d0a 0d0a   Doc object:....
+0003a350: 2020 2020 2020 2020 3e3e 3e20 7363 6865          >>> sche
+0003a360: 6d61 203d 207b 2244 6573 6372 6970 7469  ma = {"Descripti
+0003a370: 6f6e 223a 2022 5468 6973 2069 7320 616e  on": "This is an
+0003a380: 2061 7272 6179 222c 2022 5374 6577 6172   array", "Stewar
+0003a390: 6422 3a20 2242 7269 616e 222c 2022 5479  d": "Brian", "Ty
+0003a3a0: 7065 223a 2022 696e 7433 3222 7d0d 0a20  pe": "int32"}.. 
+0003a3b0: 2020 2020 2020 203e 3e3e 2061 2e61 7070         >>> a.app
+0003a3c0: 6c79 5f73 6368 656d 6128 7363 6865 6d61  ly_schema(schema
+0003a3d0: 290d 0a20 2020 2020 2020 207b 7d0d 0a20  )..        {}.. 
+0003a3e0: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
+0003a3f0: 2861 2e64 6f63 290d 0a20 2020 2020 2020  (a.doc)..       
+0003a400: 2044 6573 6372 6970 7469 6f6e 3a20 5468   Description: Th
+0003a410: 6973 2069 7320 616e 2061 7272 6179 0d0a  is is an array..
+0003a420: 2020 2020 2020 2020 5374 6577 6172 643a          Steward:
+0003a430: 2042 7269 616e 0d0a 2020 2020 2020 2020   Brian..        
+0003a440: 5479 7065 3a20 696e 7433 320d 0a0d 0a20  Type: int32.... 
+0003a450: 2020 2020 2020 2052 6574 7572 6e20 7370         Return sp
+0003a460: 6563 6966 6963 2044 6f63 206f 626a 6563  ecific Doc objec
+0003a470: 7420 696e 666f 726d 6174 696f 6e3a 0d0a  t information:..
+0003a480: 0d0a 2020 2020 2020 2020 3e3e 3e20 7072  ..        >>> pr
+0003a490: 696e 7428 612e 646f 632e 5f74 7970 6529  int(a.doc._type)
+0003a4a0: 0d0a 2020 2020 2020 2020 696e 7433 320d  ..        int32.
+0003a4b0: 0a20 2020 2020 2020 203e 3e3e 2070 7269  .        >>> pri
+0003a4c0: 6e74 2861 2e64 6f63 2e5f 6465 7363 7269  nt(a.doc._descri
+0003a4d0: 7029 0d0a 2020 2020 2020 2020 5468 6973  p)..        This
+0003a4e0: 2069 7320 616e 2061 7272 6179 0d0a 2020   is an array..  
+0003a4f0: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
+0003a500: 612e 646f 632e 5f73 7465 7761 7264 290d  a.doc._steward).
+0003a510: 0a20 2020 2020 2020 2042 7269 616e 0d0a  .        Brian..
+0003a520: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
+0003a530: 7428 612e 646f 632e 5f64 6574 6169 6c29  t(a.doc._detail)
+0003a540: 0d0a 2020 2020 2020 2020 4e6f 6e65 0d0a  ..        None..
+0003a550: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+0003a560: 2020 2020 2066 726f 6d20 2e72 745f 6d65       from .rt_me
+0003a570: 7461 2069 6d70 6f72 7420 646f 6320 6173  ta import doc as
+0003a580: 205f 646f 630d 0a0d 0a20 2020 2020 2020   _doc....       
+0003a590: 2072 6574 7572 6e20 5f64 6f63 2873 656c   return _doc(sel
+0003a5a0: 6629 0d0a 0d0a 2020 2020 2320 3d3d 3d3d  f)....    # ====
+0003a5b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0003a5c0: 3d3d 2045 4e44 204f 4620 434c 4153 5320  == END OF CLASS 
+0003a5d0: 4445 4649 4e49 5449 4f4e 203d 3d3d 3d3d  DEFINITION =====
+0003a5e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0003a5f0: 3d3d 3d3d 3d3d 3d3d 3d3d 0d0a 0d0a 0d0a  ==========......
+0003a600: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+0003a610: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003a620: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003a630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a64  -------------..d
+0003a640: 6566 205f 7365 7466 6173 7461 7272 6179  ef _setfastarray
+0003a650: 7669 6577 2861 7272 293a 0d0a 2020 2020  view(arr):..    
+0003a660: 2222 220d 0a20 2020 2043 616c 6c20 6672  """..    Call fr
+0003a670: 6f6d 2043 5050 2069 6e74 6f20 7079 7468  om CPP into pyth
+0003a680: 6f6e 2074 6f20 666c 6970 2061 7272 6179  on to flip array
+0003a690: 2076 6965 770d 0a20 2020 2022 2222 0d0a   view..    """..
+0003a6a0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+0003a6b0: 6528 6172 722c 2046 6173 7441 7272 6179  e(arr, FastArray
+0003a6c0: 293a 0d0a 2020 2020 2020 2020 6966 2046  ):..        if F
+0003a6d0: 6173 7441 7272 6179 2e56 6572 626f 7365  astArray.Verbose
+0003a6e0: 203e 2032 3a0d 0a20 2020 2020 2020 2020   > 2:..         
+0003a6f0: 2020 2070 7269 6e74 2822 6e6f 206e 6565     print("no nee
+0003a700: 6420 746f 2073 6574 6661 7374 6172 7261  d to setfastarra
+0003a710: 7976 6965 7722 2c20 6172 722e 6474 7970  yview", arr.dtyp
+0003a720: 652c 206c 656e 2861 7272 2929 0d0a 2020  e, len(arr))..  
+0003a730: 2020 2020 2020 7265 7475 726e 2061 7272        return arr
+0003a740: 0d0a 0d0a 2020 2020 6966 2046 6173 7441  ....    if FastA
+0003a750: 7272 6179 2e56 6572 626f 7365 203e 2032  rray.Verbose > 2
+0003a760: 3a0d 0a20 2020 2020 2020 2070 7269 6e74  :..        print
+0003a770: 2822 7365 7466 6173 7461 7272 6179 7669  ("setfastarrayvi
+0003a780: 6577 222c 2061 7272 2e64 7479 7065 2c20  ew", arr.dtype, 
+0003a790: 6c65 6e28 6172 7229 290d 0a0d 0a20 2020  len(arr))....   
+0003a7a0: 2072 6574 7572 6e20 6172 722e 7669 6577   return arr.view
+0003a7b0: 2846 6173 7441 7272 6179 290d 0a0d 0a0d  (FastArray).....
+0003a7c0: 0a23 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .# -------------
+0003a7d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003a7e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003a7f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+0003a800: 6465 6620 5f73 6574 6661 7374 6172 7261  def _setfastarra
+0003a810: 7974 7970 6528 293a 0d0a 2020 2020 2320  ytype():..    # 
+0003a820: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003a830: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003a840: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003a850: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
+0003a860: 2023 2063 616c 6c69 6e67 2074 6869 7320   # calling this 
+0003a870: 6675 6e63 7469 6f6e 2077 696c 6c20 666f  function will fo
+0003a880: 7263 6520 666d 2074 6f20 7265 7475 726e  rce fm to return
+0003a890: 2046 6173 7441 7272 6179 2073 7562 636c   FastArray subcl
+0003a8a0: 6173 730d 0a20 2020 2023 2072 632e 4261  ass..    # rc.Ba
+0003a8b0: 7369 634d 6174 6848 6f6f 6b28 4661 7374  sicMathHook(Fast
+0003a8c0: 4172 7261 792c 206e 702e 6e64 6172 7261  Array, np.ndarra
+0003a8d0: 7929 0d0a 2020 2020 2320 436f 6d69 6e67  y)..    # Coming
+0003a8e0: 206e 6578 7420 6275 696c 640d 0a20 2020   next build..   
+0003a8f0: 2066 6120 3d20 6e70 2e61 7261 6e67 6528   fa = np.arange(
+0003a900: 3129 2e76 6965 7728 4661 7374 4172 7261  1).view(FastArra
+0003a910: 7929 0d0a 2020 2020 7263 2e53 6574 4661  y)..    rc.SetFa
+0003a920: 7374 4172 7261 7954 7970 6528 6661 2c20  stArrayType(fa, 
+0003a930: 5f73 6574 6661 7374 6172 7261 7976 6965  _setfastarrayvie
+0003a940: 7729 0d0a 2020 2020 7263 2e42 6173 6963  w)..    rc.Basic
+0003a950: 4d61 7468 486f 6f6b 2866 612c 2066 612e  MathHook(fa, fa.
+0003a960: 5f6e 7029 0d0a 0d0a 0d0a 2320 2d2d 2d2d  _np)......# ----
+0003a970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003a980: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003a990: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003a9a0: 2d2d 2d2d 2d2d 2d0d 0a64 6566 205f 4669  -------..def _Fi
+0003a9b0: 7875 7044 6f63 5374 7269 6e67 7328 293a  xupDocStrings():
+0003a9c0: 0d0a 2020 2020 2222 220d 0a20 2020 204c  ..    """..    L
+0003a9d0: 6f61 6420 616c 6c20 7468 6520 6d65 6d62  oad all the memb
+0003a9e0: 6572 2066 756e 6374 696f 6e20 6f66 2074  er function of t
+0003a9f0: 6869 7320 6d6f 6475 6c65 0d0a 2020 2020  his module..    
+0003aa00: 4c6f 6164 2061 6c6c 2074 6865 206d 656d  Load all the mem
+0003aa10: 6265 7220 6675 6e63 7469 6f6e 7320 6f66  ber functions of
+0003aa20: 2074 6865 206e 7020 6d6f 6475 6c65 0d0a   the np module..
+0003aa30: 2020 2020 4966 2077 6520 6669 6e64 2061      If we find a
+0003aa40: 206d 6174 6368 2c20 636f 7079 206f 7665   match, copy ove
+0003aa50: 7220 7468 6520 646f 6320 7374 7269 6e67  r the doc string
+0003aa60: 730d 0a20 2020 2022 2222 0d0a 2020 2020  s..    """..    
+0003aa70: 696d 706f 7274 2069 6e73 7065 6374 0d0a  import inspect..
+0003aa80: 2020 2020 696d 706f 7274 2073 7973 0d0a      import sys..
+0003aa90: 0d0a 2020 2020 6d79 6d6f 6475 6c65 203d  ..    mymodule =
+0003aaa0: 2073 7973 2e6d 6f64 756c 6573 5b5f 5f6e   sys.modules[__n
+0003aab0: 616d 655f 5f5d 0d0a 2020 2020 616c 6c5f  ame__]..    all_
+0003aac0: 6d79 6675 6e63 7469 6f6e 7320 3d20 696e  myfunctions = in
+0003aad0: 7370 6563 742e 6765 746d 656d 6265 7273  spect.getmembers
+0003aae0: 2846 6173 7441 7272 6179 2c20 696e 7370  (FastArray, insp
+0003aaf0: 6563 742e 6973 6675 6e63 7469 6f6e 290d  ect.isfunction).
+0003ab00: 0a0d 0a20 2020 2074 7279 3a0d 0a20 2020  ...    try:..   
+0003ab10: 2020 2020 2023 2062 6f74 746c 656e 6563       # bottlenec
+0003ab20: 6b20 6973 206f 7074 696f 6e61 6c0d 0a20  k is optional.. 
+0003ab30: 2020 2020 2020 2061 6c6c 5f62 6e66 756e         all_bnfun
+0003ab40: 6374 696f 6e73 203d 2069 6e73 7065 6374  ctions = inspect
+0003ab50: 2e67 6574 6d65 6d62 6572 7328 626e 2c20  .getmembers(bn, 
+0003ab60: 696e 7370 6563 742e 6973 6675 6e63 7469  inspect.isfuncti
+0003ab70: 6f6e 290d 0a20 2020 2020 2020 2061 6c6c  on)..        all
+0003ab80: 5f62 6e66 756e 6374 696f 6e73 202b 3d20  _bnfunctions += 
+0003ab90: 696e 7370 6563 742e 6765 746d 656d 6265  inspect.getmembe
+0003aba0: 7273 2862 6e2c 2069 6e73 7065 6374 2e69  rs(bn, inspect.i
+0003abb0: 7362 7569 6c74 696e 290d 0a0d 0a20 2020  sbuiltin)....   
+0003abc0: 2020 2020 2023 2062 7569 6c64 2064 6963       # build dic
+0003abd0: 7469 6f6e 6172 7920 6f66 2062 6f74 746c  tionary of bottl
+0003abe0: 656e 6563 6b20 646f 6373 0d0a 2020 2020  eneck docs..    
+0003abf0: 2020 2020 626e 6469 6374 203d 207b 7d0d      bndict = {}.
+0003ac00: 0a20 2020 2020 2020 2066 6f72 2066 756e  .        for fun
+0003ac10: 6373 2069 6e20 616c 6c5f 626e 6675 6e63  cs in all_bnfunc
+0003ac20: 7469 6f6e 733a 0d0a 2020 2020 2020 2020  tions:..        
+0003ac30: 2020 2020 626e 6469 6374 5b66 756e 6373      bndict[funcs
+0003ac40: 5b30 5d5d 203d 2066 756e 6373 5b31 5d0d  [0]] = funcs[1].
+0003ac50: 0a0d 0a20 2020 2020 2020 2023 206e 6f77  ...        # now
+0003ac60: 2066 6f72 2065 6163 6820 6675 6e63 7469   for each functi
+0003ac70: 6f6e 2074 6861 7420 6861 7320 616e 2062  on that has an b
+0003ac80: 6e20 666c 6176 6f72 2c20 636f 7079 206f  n flavor, copy o
+0003ac90: 7665 7220 7468 6520 646f 6320 7374 7269  ver the doc stri
+0003aca0: 6e67 730d 0a20 2020 2020 2020 2066 6f72  ngs..        for
+0003acb0: 2066 756e 6373 2069 6e20 616c 6c5f 6d79   funcs in all_my
+0003acc0: 6675 6e63 7469 6f6e 733a 0d0a 2020 2020  functions:..    
+0003acd0: 2020 2020 2020 2020 6966 2028 6675 6e63          if (func
+0003ace0: 735b 305d 2069 6e20 626e 6469 6374 2920  s[0] in bndict) 
+0003acf0: 616e 6420 2866 756e 6373 5b31 5d2e 5f5f  and (funcs[1].__
+0003ad00: 646f 635f 5f20 6973 204e 6f6e 6529 3a0d  doc__ is None):.
+0003ad10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003ad20: 2066 756e 6373 5b31 5d2e 5f5f 646f 635f   funcs[1].__doc_
+0003ad30: 5f20 3d20 626e 6469 6374 5b66 756e 6373  _ = bndict[funcs
+0003ad40: 5b30 5d5d 2e5f 5f64 6f63 5f5f 0d0a 2020  [0]].__doc__..  
+0003ad50: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
+0003ad60: 6f6e 3a0d 0a20 2020 2020 2020 2070 6173  on:..        pas
+0003ad70: 730d 0a0d 0a20 2020 2061 6c6c 5f6e 7066  s....    all_npf
+0003ad80: 756e 6374 696f 6e73 203d 205b 6675 6e63  unctions = [func
+0003ad90: 2066 6f72 2066 756e 6320 696e 2069 6e73   for func in ins
+0003ada0: 7065 6374 2e67 6574 6d65 6d62 6572 7328  pect.getmembers(
+0003adb0: 6e70 2e6e 6461 7272 6179 2920 6966 206e  np.ndarray) if n
+0003adc0: 6f74 2066 756e 635b 305d 2e73 7461 7274  ot func[0].start
+0003add0: 7377 6974 6828 225f 2229 5d0d 0a0d 0a20  swith("_")].... 
+0003ade0: 2020 2023 2062 7569 6c64 2064 6963 7469     # build dicti
+0003adf0: 6f6e 6172 7920 6f66 206e 702e 6e64 6172  onary of np.ndar
+0003ae00: 7261 7920 646f 6373 0d0a 2020 2020 6e70  ray docs..    np
+0003ae10: 6469 6374 203d 207b 7d0d 0a20 2020 2066  dict = {}..    f
+0003ae20: 6f72 2066 756e 6373 2069 6e20 616c 6c5f  or funcs in all_
+0003ae30: 6e70 6675 6e63 7469 6f6e 733a 0d0a 2020  npfunctions:..  
+0003ae40: 2020 2020 2020 6e70 6469 6374 5b66 756e        npdict[fun
+0003ae50: 6373 5b30 5d5d 203d 2066 756e 6373 5b31  cs[0]] = funcs[1
+0003ae60: 5d0d 0a0d 0a20 2020 2023 206e 6f77 2066  ]....    # now f
+0003ae70: 6f72 2065 6163 6820 6675 6e63 7469 6f6e  or each function
+0003ae80: 2074 6861 7420 6861 7320 616e 206e 7020   that has an np 
+0003ae90: 666c 6176 6f72 2c20 636f 7079 206f 7665  flavor, copy ove
+0003aea0: 7220 7468 6520 646f 6320 7374 7269 6e67  r the doc string
+0003aeb0: 730d 0a20 2020 2066 6f72 2066 756e 6373  s..    for funcs
+0003aec0: 2069 6e20 616c 6c5f 6d79 6675 6e63 7469   in all_myfuncti
+0003aed0: 6f6e 733a 0d0a 2020 2020 2020 2020 6966  ons:..        if
+0003aee0: 2028 6675 6e63 735b 305d 2069 6e20 6e70   (funcs[0] in np
+0003aef0: 6469 6374 2920 616e 6420 2866 756e 6373  dict) and (funcs
+0003af00: 5b31 5d2e 5f5f 646f 635f 5f20 6973 204e  [1].__doc__ is N
+0003af10: 6f6e 6529 3a0d 0a20 2020 2020 2020 2020  one):..         
+0003af20: 2020 2066 756e 6373 5b31 5d2e 5f5f 646f     funcs[1].__do
+0003af30: 635f 5f20 3d20 6e70 6469 6374 5b66 756e  c__ = npdict[fun
+0003af40: 6373 5b30 5d5d 2e5f 5f64 6f63 5f5f 0d0a  cs[0]].__doc__..
+0003af50: 0d0a 2020 2020 2320 6e6f 7720 646f 206a  ..    # now do j
+0003af60: 7573 7420 706c 6169 6e20 6e70 0d0a 2020  ust plain np..  
+0003af70: 2020 616c 6c5f 6e70 6675 6e63 7469 6f6e    all_npfunction
+0003af80: 7320 3d20 5b66 756e 6320 666f 7220 6675  s = [func for fu
+0003af90: 6e63 2069 6e20 696e 7370 6563 742e 6765  nc in inspect.ge
+0003afa0: 746d 656d 6265 7273 286e 7029 2069 6620  tmembers(np) if 
+0003afb0: 225f 5f22 206e 6f74 2069 6e20 6675 6e63  "__" not in func
+0003afc0: 735b 305d 5d0d 0a0d 0a20 2020 2023 2062  s[0]]....    # b
+0003afd0: 7569 6c64 2064 6963 7469 6f6e 6172 7920  uild dictionary 
+0003afe0: 6f66 206e 7020 646f 6373 0d0a 2020 2020  of np docs..    
+0003aff0: 6e70 6469 6374 203d 207b 7d0d 0a20 2020  npdict = {}..   
+0003b000: 2066 6f72 2066 756e 6373 2069 6e20 616c   for funcs in al
+0003b010: 6c5f 6e70 6675 6e63 7469 6f6e 733a 0d0a  l_npfunctions:..
+0003b020: 2020 2020 2020 2020 2320 7072 696e 7428          # print(
+0003b030: 2267 6574 7469 6e67 2064 6f63 2073 7472  "getting doc str
+0003b040: 696e 6720 666f 7220 222c 2066 756e 6373  ing for ", funcs
+0003b050: 5b30 5d29 0d0a 2020 2020 2020 2020 6e70  [0])..        np
+0003b060: 6469 6374 5b66 756e 6373 5b30 5d5d 203d  dict[funcs[0]] =
+0003b070: 2066 756e 6373 5b31 5d0d 0a0d 0a20 2020   funcs[1]....   
+0003b080: 2023 206e 6f77 2066 6f72 2065 6163 6820   # now for each 
+0003b090: 6675 6e63 7469 6f6e 2074 6861 7420 6861  function that ha
+0003b0a0: 7320 616e 206e 7020 666c 6176 6f72 2c20  s an np flavor, 
+0003b0b0: 636f 7079 206f 7665 7220 7468 6520 646f  copy over the do
+0003b0c0: 6320 7374 7269 6e67 730d 0a20 2020 2066  c strings..    f
+0003b0d0: 6f72 2066 756e 6373 2069 6e20 616c 6c5f  or funcs in all_
+0003b0e0: 6d79 6675 6e63 7469 6f6e 733a 0d0a 2020  myfunctions:..  
+0003b0f0: 2020 2020 2020 6966 2028 6675 6e63 735b        if (funcs[
+0003b100: 305d 2069 6e20 6e70 6469 6374 2920 616e  0] in npdict) an
+0003b110: 6420 2866 756e 6373 5b31 5d2e 5f5f 646f  d (funcs[1].__do
+0003b120: 635f 5f20 6973 204e 6f6e 6529 3a0d 0a20  c__ is None):.. 
+0003b130: 2020 2020 2020 2020 2020 2066 756e 6373             funcs
+0003b140: 5b31 5d2e 5f5f 646f 635f 5f20 3d20 6e70  [1].__doc__ = np
+0003b150: 6469 6374 5b66 756e 6373 5b30 5d5d 2e5f  dict[funcs[0]]._
+0003b160: 5f64 6f63 5f5f 0d0a 0d0a 0d0a 2320 2d2d  _doc__......# --
+0003b170: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003b180: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003b190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003b1a0: 2d2d 2d2d 2d2d 2d2d 0d0a 636c 6173 7320  --------..class 
+0003b1b0: 5468 7265 6164 696e 673a 0d0a 2020 2020  Threading:..    
+0003b1c0: 4073 7461 7469 636d 6574 686f 640d 0a20  @staticmethod.. 
+0003b1d0: 2020 2064 6566 206f 6e28 293a 0d0a 2020     def on():..  
+0003b1e0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+0003b1f0: 2020 2054 7572 6e20 7269 7074 6162 6c65     Turn riptable
+0003b200: 2074 6872 6561 6469 6e67 206f 6e2e 0d0a   threading on...
+0003b210: 2020 2020 2020 2020 5573 6564 206f 6e6c          Used onl
+0003b220: 7920 7768 656e 2072 6970 7461 626c 6520  y when riptable 
+0003b230: 7468 7265 6164 696e 6720 7761 7320 7475  threading was tu
+0003b240: 726e 6564 206f 6666 2e0d 0a0d 0a20 2020  rned off.....   
+0003b250: 2020 2020 2045 7861 6d70 6c65 0d0a 2020       Example..  
+0003b260: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+0003b270: 2020 2020 2020 2061 3d72 742e 6172 616e         a=rt.aran
+0003b280: 6765 2831 5f30 3030 5f30 3029 0d0a 2020  ge(1_000_00)..  
+0003b290: 2020 2020 2020 5468 7265 6164 696e 672e        Threading.
+0003b2a0: 6f66 6628 290d 0a20 2020 2020 2020 2025  off()..        %
+0003b2b0: 7469 6d65 2061 2b3d 310d 0a20 2020 2020  time a+=1..     
+0003b2c0: 2020 2054 6872 6561 6469 6e67 2e6f 6e28     Threading.on(
+0003b2d0: 290d 0a20 2020 2020 2020 2025 7469 6d65  )..        %time
+0003b2e0: 2061 2b3d 310d 0a0d 0a20 2020 2020 2020   a+=1....       
+0003b2f0: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
+0003b300: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
+0003b310: 2020 2050 7265 7669 6f75 736c 7920 7768     Previously wh
+0003b320: 6574 6865 7220 7468 7265 6164 696e 6720  ether threading 
+0003b330: 7761 7320 6f6e 206f 7220 6e6f 742e 2030  was on or not. 0
+0003b340: 206f 7220 312e 2030 3d74 6872 6561 6469   or 1. 0=threadi
+0003b350: 6e67 2077 6173 206f 6666 2062 6566 6f72  ng was off befor
+0003b360: 652e 0d0a 0d0a 2020 2020 2020 2020 2222  e.....        ""
+0003b370: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
+0003b380: 6e20 4661 7374 4172 7261 792e 5f54 4f4e  n FastArray._TON
+0003b390: 2829 0d0a 0d0a 2020 2020 4073 7461 7469  ()....    @stati
+0003b3a0: 636d 6574 686f 640d 0a20 2020 2064 6566  cmethod..    def
+0003b3b0: 206f 6666 2829 3a0d 0a20 2020 2020 2020   off():..       
+0003b3c0: 2022 2222 0d0a 2020 2020 2020 2020 5475   """..        Tu
+0003b3d0: 726e 2072 6970 7461 626c 6520 7468 7265  rn riptable thre
+0003b3e0: 6164 696e 6720 6f66 662e 0d0a 2020 2020  ading off...    
+0003b3f0: 2020 2020 5573 6566 756c 2066 6f72 2077      Useful for w
+0003b400: 6865 6e20 7468 6520 7379 7374 656d 2068  hen the system h
+0003b410: 6173 206f 7468 6572 2070 726f 6365 7373  as other process
+0003b420: 6573 2075 7369 6e67 206f 7468 6572 2074  es using other t
+0003b430: 6872 6561 6473 0d0a 2020 2020 2020 2020  hreads..        
+0003b440: 6f72 2074 6f20 6c69 6d69 7420 7468 7265  or to limit thre
+0003b450: 6164 696e 6720 7265 736f 7572 6365 732e  ading resources.
+0003b460: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
+0003b470: 706c 650d 0a20 2020 2020 2020 202d 2d2d  ple..        ---
+0003b480: 2d2d 2d2d 0d0a 2020 2020 2020 2020 613d  ----..        a=
+0003b490: 7274 2e61 7261 6e67 6528 315f 3030 305f  rt.arange(1_000_
+0003b4a0: 3030 290d 0a20 2020 2020 2020 2054 6872  00)..        Thr
+0003b4b0: 6561 6469 6e67 2e6f 6666 2829 0d0a 2020  eading.off()..  
+0003b4c0: 2020 2020 2020 2574 696d 6520 612b 3d31        %time a+=1
+0003b4d0: 0d0a 2020 2020 2020 2020 5468 7265 6164  ..        Thread
+0003b4e0: 696e 672e 6f6e 2829 0d0a 2020 2020 2020  ing.on()..      
+0003b4f0: 2020 2574 696d 6520 612b 3d31 0d0a 0d0a    %time a+=1....
+0003b500: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
+0003b510: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0003b520: 0d0a 2020 2020 2020 2020 5072 6576 696f  ..        Previo
+0003b530: 7573 6c79 2077 6865 7468 6572 2074 6872  usly whether thr
+0003b540: 6561 6469 6e67 2077 6173 206f 6e20 6f72  eading was on or
+0003b550: 206e 6f74 2e20 3020 6f72 2031 2e20 303d   not. 0 or 1. 0=
+0003b560: 7468 7265 6164 696e 6720 7761 7320 6f66  threading was of
+0003b570: 6620 6265 666f 7265 2e0d 0a20 2020 2020  f before...     
+0003b580: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+0003b590: 7265 7475 726e 2046 6173 7441 7272 6179  return FastArray
+0003b5a0: 2e5f 544f 4646 2829 0d0a 0d0a 2020 2020  ._TOFF()....    
+0003b5b0: 4073 7461 7469 636d 6574 686f 640d 0a20  @staticmethod.. 
+0003b5c0: 2020 2064 6566 2074 6872 6561 6473 2874     def threads(t
+0003b5d0: 6872 6561 6463 6f75 6e74 293a 0d0a 2020  hreadcount):..  
+0003b5e0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+0003b5f0: 2020 2053 6574 2068 6f77 206d 616e 7920     Set how many 
+0003b600: 776f 726b 6572 2074 6872 6561 6473 2072  worker threads r
+0003b610: 6970 7461 626c 6520 6361 6e20 7573 652e  iptable can use.
+0003b620: 0d0a 2020 2020 2020 2020 4f66 7465 6e20  ..        Often 
+0003b630: 6465 6661 756c 7473 2074 6f20 3132 2061  defaults to 12 a
+0003b640: 6e64 2063 616e 6e6f 7420 6265 2073 6574  nd cannot be set
+0003b650: 2062 656c 6f77 2031 206f 7220 3e20 3331   below 1 or > 31
+0003b660: 2e0d 0a0d 0a20 2020 2020 2020 2054 6f20  .....        To 
+0003b670: 7475 726e 2072 6970 7461 626c 6520 7468  turn riptable th
+0003b680: 7265 6164 696e 6720 6f66 6620 636f 6d70  reading off comp
+0003b690: 6c65 7465 6c79 2075 7365 2054 6872 6561  letely use Threa
+0003b6a0: 6469 6e67 2e6f 6666 2829 0d0a 2020 2020  ding.off()..    
+0003b6b0: 2020 2020 5573 6566 756c 2066 6f72 2077      Useful for w
+0003b6c0: 6865 6e20 7468 6520 7379 7374 656d 2068  hen the system h
+0003b6d0: 6173 206f 7468 6572 2070 726f 6365 7373  as other process
+0003b6e0: 6573 2075 7369 6e67 206f 7468 6572 2074  es using other t
+0003b6f0: 6872 6561 6473 0d0a 2020 2020 2020 2020  hreads..        
+0003b700: 6f72 2074 6f20 6c69 6d69 7420 7468 7265  or to limit thre
+0003b710: 6164 696e 6720 7265 736f 7572 6365 732e  ading resources.
+0003b720: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
+0003b730: 706c 650d 0a20 2020 2020 2020 202d 2d2d  ple..        ---
+0003b740: 2d2d 2d2d 0d0a 2020 2020 2020 2020 5468  ----..        Th
+0003b750: 7265 6164 696e 672e 7468 7265 6164 7328  reading.threads(
+0003b760: 3829 0d0a 0d0a 2020 2020 2020 2020 5265  8)....        Re
+0003b770: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
+0003b780: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0003b790: 6e75 6d62 6572 206f 6620 7468 7265 6164  number of thread
+0003b7a0: 7320 7072 6576 696f 7573 6c79 2075 7365  s previously use
+0003b7b0: 640d 0a20 2020 2020 2020 2022 2222 0d0a  d..        """..
+0003b7c0: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+0003b7d0: 632e 5365 7454 6872 6561 6457 616b 6555  c.SetThreadWakeU
+0003b7e0: 7028 7468 7265 6164 636f 756e 7429 0d0a  p(threadcount)..
+0003b7f0: 0d0a 0d0a 2320 2d2d 2d2d 2d2d 2d2d 2d2d  ....# ----------
+0003b800: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003b810: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003b820: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003b830: 0d0a 636c 6173 7320 5265 6379 636c 653a  ..class Recycle:
+0003b840: 0d0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
+0003b850: 686f 640d 0a20 2020 2064 6566 206f 6e28  hod..    def on(
+0003b860: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
+0003b870: 0a20 2020 2020 2020 2054 7572 6e20 7269  .        Turn ri
+0003b880: 7074 6162 6c65 2072 6563 7963 6c69 6e67  ptable recycling
+0003b890: 206f 6e2e 0d0a 2020 2020 2020 2020 5573   on...        Us
+0003b8a0: 6564 206f 6e6c 7920 7768 656e 2072 6970  ed only when rip
+0003b8b0: 7461 626c 6520 7265 6379 636c 696e 6720  table recycling 
+0003b8c0: 7761 7320 7475 726e 6564 206f 6666 2e0d  was turned off..
+0003b8d0: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
+0003b8e0: 6c65 0d0a 2020 2020 2020 2020 2d2d 2d2d  le..        ----
+0003b8f0: 2d2d 2d0d 0a20 2020 2020 2020 2061 3d61  ---..        a=a
+0003b900: 7261 6e67 6528 315f 3030 305f 3030 290d  range(1_000_00).
+0003b910: 0a20 2020 2020 2020 2052 6563 7963 6c65  .        Recycle
+0003b920: 2e6f 6666 2829 0d0a 2020 2020 2020 2020  .off()..        
+0003b930: 2574 696d 6569 7420 613d 6120 2b20 310d  %timeit a=a + 1.
+0003b940: 0a20 2020 2020 2020 2052 6563 7963 6c65  .        Recycle
+0003b950: 2e6f 6e28 290d 0a20 2020 2020 2020 2025  .on()..        %
+0003b960: 7469 6d65 6974 2061 3d61 202b 2031 0d0a  timeit a=a + 1..
+0003b970: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0003b980: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+0003b990: 7374 4172 7261 792e 5f52 4f4e 2829 0d0a  stArray._RON()..
+0003b9a0: 0d0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
+0003b9b0: 686f 640d 0a20 2020 2064 6566 206f 6666  hod..    def off
+0003b9c0: 2829 3a0d 0a20 2020 2020 2020 2072 6574  ():..        ret
+0003b9d0: 7572 6e20 4661 7374 4172 7261 792e 5f52  urn FastArray._R
+0003b9e0: 4f46 4628 290d 0a0d 0a20 2020 2040 7374  OFF()....    @st
+0003b9f0: 6174 6963 6d65 7468 6f64 0d0a 2020 2020  aticmethod..    
+0003ba00: 6465 6620 6e6f 7728 7469 6d65 6f75 743a  def now(timeout:
+0003ba10: 2069 6e74 203d 2030 293a 0d0a 2020 2020   int = 0):..    
+0003ba20: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+0003ba30: 2050 6173 7320 7468 6520 6761 7262 6167   Pass the garbag
+0003ba40: 6520 636f 6c6c 6563 746f 7220 7469 6d65  e collector time
+0003ba50: 6f75 7420 7661 6c75 6520 746f 2063 6c65  out value to cle
+0003ba60: 616e 7570 2e0d 0a20 2020 2020 2020 2041  anup...        A
+0003ba70: 6c73 6f20 6361 6c6c 7320 7468 6520 7079  lso calls the py
+0003ba80: 7468 6f6e 2067 6172 6261 6765 2063 6f6c  thon garbage col
+0003ba90: 6c65 6374 6f72 2e0d 0a0d 0a20 2020 2020  lector.....     
+0003baa0: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
+0003bab0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
+0003bac0: 2d0d 0a20 2020 2020 2020 2074 696d 656f  -..        timeo
+0003bad0: 7574 3a20 6465 6661 756c 7420 746f 2030  ut: default to 0
+0003bae0: 2e20 2030 2077 696c 6c20 6e6f 7420 7365  .  0 will not se
+0003baf0: 7420 6120 7469 6d65 6f75 740d 0a0d 0a20  t a timeout.... 
+0003bb00: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+0003bb10: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+0003bb20: 0a20 2020 2020 2020 2074 6f74 616c 2061  .        total a
+0003bb30: 7272 6179 7320 6465 6c65 7465 640d 0a20  rrays deleted.. 
+0003bb40: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+0003bb50: 2020 2020 696d 706f 7274 2067 630d 0a0d      import gc...
+0003bb60: 0a20 2020 2020 2020 2067 632e 636f 6c6c  .        gc.coll
+0003bb70: 6563 7428 290d 0a20 2020 2020 2020 2072  ect()..        r
+0003bb80: 6573 756c 7420 3d20 7263 2e52 6563 7963  esult = rc.Recyc
+0003bb90: 6c65 4761 7262 6167 6543 6f6c 6c65 6374  leGarbageCollect
+0003bba0: 4e6f 7728 7469 6d65 6f75 7429 5b22 546f  Now(timeout)["To
+0003bbb0: 7461 6c44 656c 6574 6564 225d 0d0a 2020  talDeleted"]..  
+0003bbc0: 2020 2020 2020 6966 2072 6573 756c 7420        if result 
+0003bbd0: 3e20 303a 0d0a 2020 2020 2020 2020 2020  > 0:..          
+0003bbe0: 2020 7263 2e52 6563 7963 6c65 4761 7262    rc.RecycleGarb
+0003bbf0: 6167 6543 6f6c 6c65 6374 4e6f 7728 7469  ageCollectNow(ti
+0003bc00: 6d65 6f75 7429 0d0a 2020 2020 2020 2020  meout)..        
+0003bc10: 7265 7475 726e 2072 6573 756c 740d 0a0d  return result...
+0003bc20: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+0003bc30: 6f64 0d0a 2020 2020 6465 6620 7469 6d65  od..    def time
+0003bc40: 6f75 7428 7469 6d65 6f75 743a 2069 6e74  out(timeout: int
+0003bc50: 203d 2031 3030 293a 0d0a 2020 2020 2020   = 100):..      
+0003bc60: 2020 2222 220d 0a20 2020 2020 2020 2050    """..        P
+0003bc70: 6173 7320 7468 6520 6761 7262 6167 6520  ass the garbage 
+0003bc80: 636f 6c6c 6563 746f 7220 7469 6d65 6f75  collector timeou
+0003bc90: 7420 7661 6c75 6520 746f 2065 7870 6972  t value to expir
+0003bca0: 652e 0d0a 2020 2020 2020 2020 5468 6520  e...        The 
+0003bcb0: 7469 6d65 6f75 7420 7661 6c75 6520 6973  timeout value is
+0003bcc0: 2072 6f75 6768 6c79 2069 6e20 322f 3520   roughly in 2/5 
+0003bcd0: 7365 6373 2e0d 0a20 2020 2020 2020 2041  secs...        A
+0003bce0: 2076 616c 7565 206f 6620 3130 3020 6973   value of 100 is
+0003bcf0: 2075 7375 616c 6c79 2061 626f 7574 2034   usually about 4
+0003bd00: 3020 7365 636f 6e64 732e 0d0a 2020 2020  0 seconds...    
+0003bd10: 2020 2020 4966 2061 6e20 6172 7261 7920      If an array 
+0003bd20: 6861 7320 6e6f 7420 6265 656e 2072 6575  has not been reu
+0003bd30: 7365 6420 6279 2074 6865 2074 696d 656f  sed by the timeo
+0003bd40: 7574 2c20 6974 2069 7320 7065 726d 616e  ut, it is perman
+0003bd50: 656e 746c 7920 6465 6c65 7465 642e 0d0a  ently deleted...
+0003bd60: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+0003bd70: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+0003bd80: 2d2d 0d0a 2020 2020 2020 2020 7072 6576  --..        prev
+0003bd90: 696f 7573 2074 696d 6573 7061 6e0d 0a20  ious timespan.. 
+0003bda0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+0003bdb0: 2020 2020 7265 7475 726e 2072 632e 5265      return rc.Re
+0003bdc0: 6379 636c 6553 6574 4761 7262 6167 6543  cycleSetGarbageC
+0003bdd0: 6f6c 6c65 6374 5469 6d65 6f75 7428 7469  ollectTimeout(ti
+0003bde0: 6d65 6f75 7429 0d0a 0d0a 0d0a 2320 2d2d  meout)......# --
+0003bdf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003be00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003be10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003be20: 2d2d 2d2d 2d2d 2d2d 0d0a 636c 6173 7320  --------..class 
+0003be30: 4c65 6467 6572 3a0d 0a20 2020 2040 7374  Ledger:..    @st
+0003be40: 6174 6963 6d65 7468 6f64 0d0a 2020 2020  aticmethod..    
+0003be50: 6465 6620 6f6e 2829 3a0d 0a20 2020 2020  def on():..     
+0003be60: 2020 2022 2222 5475 726e 2074 6865 206d     """Turn the m
+0003be70: 6174 6820 6c65 6467 6572 206f 6e20 746f  ath ledger on to
+0003be80: 2072 6563 6f72 6420 616c 6c20 6172 7261   record all arra
+0003be90: 7920 6d61 7468 2072 6f75 7469 6e65 7322  y math routines"
+0003bea0: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
+0003beb0: 726e 2054 7970 6552 6567 6973 7465 722e  rn TypeRegister.
+0003bec0: 4d61 7468 4c65 6467 6572 2e5f 4c65 6467  MathLedger._Ledg
+0003bed0: 6572 4f6e 2829 0d0a 0d0a 2020 2020 4073  erOn()....    @s
+0003bee0: 7461 7469 636d 6574 686f 640d 0a20 2020  taticmethod..   
+0003bef0: 2064 6566 206f 6666 2829 3a0d 0a20 2020   def off():..   
+0003bf00: 2020 2020 2022 2222 5475 726e 2074 6865       """Turn the
+0003bf10: 206d 6174 6820 6c65 6467 6572 206f 6666   math ledger off
+0003bf20: 2222 220d 0a20 2020 2020 2020 2072 6574  """..        ret
+0003bf30: 7572 6e20 5479 7065 5265 6769 7374 6572  urn TypeRegister
+0003bf40: 2e4d 6174 684c 6564 6765 722e 5f4c 6564  .MathLedger._Led
+0003bf50: 6765 724f 6666 2829 0d0a 0d0a 2020 2020  gerOff()....    
+0003bf60: 4073 7461 7469 636d 6574 686f 640d 0a20  @staticmethod.. 
+0003bf70: 2020 2064 6566 2064 756d 7028 6461 7461     def dump(data
+0003bf80: 7365 743d 5472 7565 293a 0d0a 2020 2020  set=True):..    
+0003bf90: 2020 2020 2222 2250 7269 6e74 206f 7574      """Print out
+0003bfa0: 2074 6865 206d 6174 6820 6c65 6467 6572   the math ledger
+0003bfb0: 2222 220d 0a20 2020 2020 2020 2072 6574  """..        ret
+0003bfc0: 7572 6e20 5479 7065 5265 6769 7374 6572  urn TypeRegister
+0003bfd0: 2e4d 6174 684c 6564 6765 722e 5f4c 6564  .MathLedger._Led
+0003bfe0: 6765 7244 756d 7028 6461 7461 7365 743d  gerDump(dataset=
+0003bff0: 6461 7461 7365 7429 0d0a 0d0a 2020 2020  dataset)....    
+0003c000: 4073 7461 7469 636d 6574 686f 640d 0a20  @staticmethod.. 
+0003c010: 2020 2064 6566 2074 6f5f 6669 6c65 2866     def to_file(f
+0003c020: 696c 656e 616d 6529 3a0d 0a20 2020 2020  ilename):..     
+0003c030: 2020 2022 2222 5361 7665 2074 6865 206d     """Save the m
+0003c040: 6174 6820 6c65 6467 6572 2074 6f20 6120  ath ledger to a 
+0003c050: 6669 6c65 2222 220d 0a20 2020 2020 2020  file"""..       
+0003c060: 2072 6574 7572 6e20 5479 7065 5265 6769   return TypeRegi
+0003c070: 7374 6572 2e4d 6174 684c 6564 6765 722e  ster.MathLedger.
+0003c080: 5f4c 6564 6765 7244 756d 7046 696c 6528  _LedgerDumpFile(
+0003c090: 6669 6c65 6e61 6d65 290d 0a0d 0a20 2020  filename)....   
+0003c0a0: 2040 7374 6174 6963 6d65 7468 6f64 0d0a   @staticmethod..
+0003c0b0: 2020 2020 6465 6620 636c 6561 7228 293a      def clear():
+0003c0c0: 0d0a 2020 2020 2020 2020 2222 2243 6c65  ..        """Cle
+0003c0d0: 6172 2061 6c6c 2074 6865 2065 6e74 7269  ar all the entri
+0003c0e0: 6573 2069 6e20 7468 6520 6d61 7468 206c  es in the math l
+0003c0f0: 6564 6765 7222 2222 0d0a 2020 2020 2020  edger"""..      
+0003c100: 2020 7265 7475 726e 2054 7970 6552 6567    return TypeReg
+0003c110: 6973 7465 722e 4d61 7468 4c65 6467 6572  ister.MathLedger
+0003c120: 2e5f 4c65 6467 6572 436c 6561 7228 290d  ._LedgerClear().
+0003c130: 0a0d 0a0d 0a23 202d 2d2d 2d2d 2d2d 2d2d  .....# ---------
+0003c140: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003c150: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003c160: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003c170: 2d0d 0a23 2074 6869 7320 6973 2063 616c  -..# this is cal
+0003c180: 6c65 6420 7768 656e 2074 6865 206d 6f64  led when the mod
+0003c190: 756c 6520 6973 206c 6f61 6465 640d 0a5f  ule is loaded.._
+0003c1a0: 4669 7875 7044 6f63 5374 7269 6e67 7328  FixupDocStrings(
+0003c1b0: 290d 0a0d 0a23 204e 4f54 453a 204b 6565  )....# NOTE: Kee
+0003c1c0: 7020 7468 6973 2061 7420 7468 6520 656e  p this at the en
+0003c1d0: 6420 6f66 2074 6865 2066 696c 650d 0a23  d of the file..#
+0003c1e0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+0003c1f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003c200: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0003c210: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2320  ------------..# 
+0003c220: 6361 6c6c 696e 6720 7468 6973 2066 756e  calling this fun
+0003c230: 6374 696f 6e20 7769 6c6c 2066 6f72 6365  ction will force
+0003c240: 2066 6d20 746f 2072 6574 7572 6e20 4661   fm to return Fa
+0003c250: 7374 4172 7261 7920 7375 6263 6c61 7373  stArray subclass
+0003c260: 0d0a 5f73 6574 6661 7374 6172 7261 7974  .._setfastarrayt
+0003c270: 7970 6528 290d 0a0d 0a54 7970 6552 6567  ype()....TypeReg
+0003c280: 6973 7465 722e 4661 7374 4172 7261 7920  ister.FastArray 
+0003c290: 3d20 4661 7374 4172 7261 790d 0a0d 0a46  = FastArray....F
+0003c2a0: 6173 7441 7272 6179 2e72 6567 6973 7465  astArray.registe
+0003c2b0: 725f 6675 6e63 7469 6f6e 2822 6465 7363  r_function("desc
+0003c2c0: 7269 6265 222c 2064 6573 6372 6962 6529  ribe", describe)
+0003c2d0: 0d0a                                     ..
```

### Comparing `riptable-1.8.0/riptable/rt_fastarraynumba.py` & `riptable-1.8.1/riptable/rt_fastarraynumba.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_groupby.py` & `riptable-1.8.1/riptable/rt_groupby.py`

 * *Files 0% similar despite different names*

```diff
@@ -107,15 +107,14 @@
         rec: bool = False,
         totals=False,
         copy=False,
         cutoffs=None,
         verbose=False,
         **kwargs,
     ):
-
         # upon creation create a unique id to track sorting
         self._uniqueid = GetTSC()
 
         # short circuit in copy mode
         if copy:
             return
```

### Comparing `riptable-1.8.0/riptable/rt_groupbykeys.py` & `riptable-1.8.1/riptable/rt_groupbykeys.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_groupbynumba.py` & `riptable-1.8.1/riptable/rt_groupbynumba.py`

 * *Files 0% similar despite different names*

```diff
@@ -13,14 +13,15 @@
     TypeRegister,
 )
 from .rt_groupbyops import GroupByOps
 from .rt_numpy import empty, empty_like
 from .numba.invalid_values import get_invalid, is_valid
 from .rt_fastarraynumba import _check_fill_values
 
+
 # NOTE YOU MUST INSTALL tbb
 # conda install tbb
 # to confirm...
 # >>> from numba import threading_layer()
 # >>> threading_layer()
 # >>> 'tbb'
 #
@@ -46,15 +47,14 @@
         binHigh[i] = high
 
         # next low bin is the previous high bin
         low = high
 
 
 class GroupbyNumba(GroupByOps):
-
     # how many cores to cap the computation at
     # NOTE: this is not how many cores the system has but a number where
     # we believe thrashing takes place.  This number could be dynamic per algo in the future.
     CORE_COUNT = 12
 
     # -------------------------------------------------------------------------------------------------
     def _nb_groupbycalculateall(values, ikey, unique_rows, funcList, binLowList, binHighList, func_param):
@@ -100,15 +100,14 @@
         unique_rows,  # often the same as len(iFirstGroup)
         funcList,  # support aggregation
         binLowList,  # start bin to work on for prange
         binHighList,  # high bin to work on for prange
         inplace,  # if to apply function inplace
         func_param,
     ):  # parameters
-
         results = []
 
         # TODO: add enumerate here
         for funcnum, inputdata in zip(funcList, values):
             nbrev = NUMBA_REVERSE_TABLE[funcnum]
 
             # lookup function to call
@@ -232,15 +231,15 @@
             if nInGrp > 0:
                 rows = data[rowIdx]
                 times = time[rowIdx]
                 totalWeight = 0.0
                 totalValues = 0.0
                 pEMA = np.nan
                 pTime = times[0]
-                for (idx, (t, v)) in enumerate(zip(times, rows)):
+                for idx, (t, v) in enumerate(zip(times, rows)):
                     if not np.isnan(v):
                         deltaT = t - pTime
                         decay = np.exp(-decayRate * deltaT)
                         totalWeight = totalWeight * decay + 1
                         totalValues = totalValues * decay + v
                         pTime = t
                         pEMA = totalValues / totalWeight
```

### Comparing `riptable-1.8.0/riptable/rt_groupbyops.py` & `riptable-1.8.1/riptable/rt_groupbyops.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_grouping.py` & `riptable-1.8.1/riptable/rt_grouping.py`

 * *Files 1% similar despite different names*

```diff
@@ -699,14 +699,15 @@
         hash_mode : int
             Setting for hash technique. Defaults to 2, users should not override this.
         hint_size : int
             If number of uniques is known, provide it as a hint to the hashing logic. Defaults to zero.
         _trusted : bool
             If True, data used to initialize will not be validated. e.g. generation from a slice. Defaults to False.
         """
+
         # -------------------------------------------------
         def data_as_dict(grouping, name_def: Optional[str] = None) -> dict:
             if not isinstance(grouping, list):
                 grouping = [grouping]
 
             if len(grouping) != 1:
                 # cannot set name for multiple keys
@@ -941,15 +942,14 @@
 
                 # pull and store only the uniques
                 if categorical:
                     self._grouping_unique_dict = self._build_unique_dict(grouping)
 
                     # skip this if after lex
                     if self.Ordered and lex is not True:
-
                         # since the original lengths are being dropped, iFirstKey is no longer valid
                         self.iFirstKey = None
 
                         # this came from a hash (first occurrence)
                         # so now we sort the uniques and get back sortidx
                         sortidx = self._make_isortrows(self._grouping_unique_dict)
                         for k, v in self._grouping_unique_dict.items():
@@ -1302,15 +1302,14 @@
 
             if reverse:
                 return ismember(values, uniquelist)
             else:
                 return ismember(uniquelist, values)
 
         else:
-
             result_len = len(self.catinstance)
 
             if isinstance(values, tuple) or np.isscalar(values):
                 # convert to list
                 values = [values]
 
             if isinstance(values, list):
@@ -1560,15 +1559,14 @@
 
         Returns
         -------
         ifirstkey : np.ndarray of int
         """
         # only categoricals do not have an iFirstKey
         if self.iFirstKey is None:
-
             # TJD TODO: if iFirstGroup exists, we can derive ifirstkey
             # skip over 0 bin
             if self.base_index == 1:
                 self.iFirstKey = makeifirst(self.ikey, self.unique_count + 1)[1:-1]
             else:
                 self.iFirstKey = makeifirst(self.ikey, self.unique_count)[1:]
 
@@ -1582,15 +1580,14 @@
         returns the row locations of the last member of the group
 
         Returns
         -------
         ilastkey : np.ndarray of int
         """
         if self.iLastKey is None:
-
             # skip over 0 bin
             if self.base_index == 1:
                 self.iLastKey = makeilast(self.ikey, self.unique_count + 1)[1:-1]
             else:
                 self.iLastKey = makeilast(self.ikey, self.unique_count)[1:]
 
         return self.iLastKey
@@ -2060,15 +2057,14 @@
         -------
         Grouping
             New Grouping object created by regenerating the `ikey`, `ifirstkey`, and `unique_count`
             using data from this instance.
         """
 
         def ifirstkey_regroup(ikey, ifirstkey, lex=False):
-
             """
             Returns
             -------
             ifkremap is a fancy index mapping from the new ikey -> final ikey
             sortkey only if lex is True  (has unique old bin values)
             """
             ifkremap = empty(len(ifirstkey) + 1, dtype=self.ikey.dtype)
@@ -2688,15 +2684,14 @@
             outputs = None
 
         ifirst = self.iFirstGroup
         ncount = self.nCountGroup
 
         # for all the columns we have to process
         for colname, arr in npdict.items():
-
             # reorder the data so groups are contiguous
             # one big fancy index pull
             if tups > 0:
                 # TJD check for mode where tups are passed, but so is a dataset
                 # reorder multiple arrays to make groups contiguous
                 if tups == 1:
                     arr = tuple(v[self.iGroup] for v in arr)
@@ -2800,15 +2795,14 @@
 
             else:
                 # ----------------------------------------------
                 # NonReduce path -- expecting an array returned
                 # ----------------------------------------------
                 # check for multiple output array path
                 if outputs is not None:
-
                     if False:
                         pass
                         # TJD future speed ups will use a numba loop such as below
                         # import numba as nb
                         # @nb.njit(parallel=True, cache=get_global_settings().enable_numba_cache, nogil=True)
                         # def _numba_nonreduce2_1(userfunc, ifirst, ncount, in1, in2, kwarg1):
                         #    for i in nb.prange(1, ifirst.shape[0]):
@@ -2883,15 +2877,14 @@
                 else:
                     if dtype is not None:
                         return_arr = empty(self.iGroup.shape, dtype=dtype)
 
                     # loop over all groups
                     # TODO: consider c++ loop? (i.e. vectorize this)
                     for first, count in zip(ifirst, ncount):
-
                         # currently we do not pass in empty arrays... should we?i put in t
                         if count > 0:
                             last = first + count
 
                             if tups > 0:
                                 # call user function with multiple array inputs (with slice for the group)
                                 # inputarr = (v[first:last] for v in arr)
@@ -3169,30 +3162,28 @@
         result_len = result.shape[0]
 
         if Grouping.DebugMode:
             print("result_len, unique_rows, bins, totalcallbacks", result_len, unique_rows, len(bins), totalcallbacks)
 
         # check if the user wanted a reduce
         if result_len == totalcallbacks:
-
             inv_delta = unique_rows - totalcallbacks
             if inv_delta > 0:
                 f = self.nCountGroup[1:] > 0
                 if Grouping.DebugMode:
                     print("reduce with a filter", f)
                 # if a reduce function was used, and some rows were filtered out
                 # filter out the gbkeys the same way
                 for k, v in label_keys.gbkeys.items():
                     if Grouping.DebugMode:
                         print("adding column", k, "value", v, "filter", f)
                     result[k] = v[f]
 
             result = self._finalize_dataset(result, label_keys, label_keys.gbkeys, addkeys=(inv_delta <= 0), **kwargs)
         else:
-
             if self.nCountGroup[0] > 0:
                 # this group was probably filtered out, pass the user a row full of invalids
                 # only build the emptyGroup once
                 invcount = self.nCountGroup[0]
                 newdict = make_invalid_dict(invcount, result)
 
                 if Grouping.DebugMode:
@@ -3359,15 +3350,14 @@
 
         accum = []
         accum_tuple = None
         fullrows = False
         empty_allowed = self._empty_allowed(funcNum)
 
         if len(values) != 0 or empty_allowed:
-
             if Grouping.DebugMode:
                 print("values", values)
                 if isinstance(values, Iterable) and len(values):
                     print(values[0].dtype)
                 print("ikey", self.ikey, self.ikey.dtype)
                 if mustpack:
                     print("igroup", self.iGroup, self.iGroup.dtype)
@@ -3425,25 +3415,23 @@
             elif funcNum >= GB_FUNCTIONS.GB_CUMSUM:
                 # NOTE: filter is the third argument of the func_param tuple
                 # TODO: do you want to merge with iKey?
                 accum = rc.EmaAll32(values, ikey, unique_rows, funcNum, func_param)
 
             # basic not packed
             elif funcNum >= GB_FUNCTIONS.GB_SUM and funcNum < GB_FUNCTIONS.GB_FIRST:
-
                 accum_tuple = _groupbycalculateall(
                     values, ikey, unique_rows, funcList, binLowList, binHighList, func_param
                 )
 
                 if Grouping.DebugMode:
                     print("accum tuple", accum_tuple)
 
             # packed
             elif funcNum >= GB_FUNCTIONS.GB_FIRST and funcNum < GB_FUNCTIONS.GB_CUMSUM:
-
                 accum_tuple = _groupbycalculateallpack(
                     values,
                     ikey,
                     self.iGroup,
                     self.iFirstGroup,
                     self.nCountGroup,
                     unique_rows,
```

### Comparing `riptable-1.8.0/riptable/rt_hstack.py` & `riptable-1.8.1/riptable/rt_hstack.py`

 * *Files 0% similar despite different names*

```diff
@@ -61,14 +61,15 @@
 
     See Also
     --------
     np.hstack
     rt.Categorical.align
     rt.Dataset.concat_rows
     """
+
     # ------------------------------
     def hstack_containers(itemlist, fill_inv=True, destroy=False):
         # assembles all columns into lists for final hstack call
         # keeps running count for gap, creates invalid fill array
         # the invalid fill should get pushed down, provide cutoffs instead
         # should there be a flag to fill with invalid? can't get row length from structs
 
@@ -644,15 +645,14 @@
     # stack indices
     # this will stack the fastarrays
     indices = rc.HStack(cats)
     idx_cutoffs = TypeRegister.FastArray([len(c._fa) for c in cats], dtype=np.int64).cumsum()
 
     # ------------------------- start rebuild here
     if mode in (CategoryMode.Dictionary, CategoryMode.IntEnum):
-
         # -----------------------
         # use info from grouping objects to stack
         glist = [c.grouping for c in cats]
 
         underlying = hstack([[*g._grouping_dict.values()][0] for g in glist])
         # stack all unique string arrays
         listnames = hstack([g._enum.category_array for g in glist])
@@ -678,15 +678,14 @@
         else:
             newcats = dict(zip(listcats[0], listcats[1]))
 
     else:
         category_dict = {}
         # now we need stack the unique cats
         for c in cats:
-
             # it might be multikey
             for i, v in enumerate(c.category_dict.values()):
                 cv = category_dict.get(i, None)
                 if cv is None:
                     category_dict[i] = [v]
                 else:
                     cv.append(v)
```

### Comparing `riptable-1.8.0/riptable/rt_imatrix.py` & `riptable-1.8.1/riptable/rt_imatrix.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_io.py` & `riptable-1.8.1/riptable/rt_io.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_itemcontainer.py` & `riptable-1.8.1/riptable/rt_itemcontainer.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_ledger.py` & `riptable-1.8.1/riptable/rt_ledger.py`

 * *Files 0% similar despite different names*

```diff
@@ -232,15 +232,14 @@
             print(f"array ufunc ledger {func} {ufunc} {method} {args}")
             if cls.Verbose > 2:
                 cls._TRACEBACK(ufunc)
         return cls._FUNNEL_ALL(func.__array_ufunc__, ufunc, method, *args, **kwargs)
 
     @classmethod
     def _BASICMATH_ONE_INPUT(cls, tupleargs, fastfunction, final_num):
-
         if fastfunction == MATH_OPERATION.BITWISE_NOT:
             # speed up this common operation
             if isinstance(tupleargs, tuple) and tupleargs[0].dtype == bool:
                 return cls._BASICMATH_TWO_INPUTS(
                     (tupleargs[0], True, tupleargs[1]),
                     MATH_OPERATION.BITWISE_XOR,
                     final_num,
```

### Comparing `riptable-1.8.0/riptable/rt_matplotlib.py` & `riptable-1.8.1/riptable/rt_matplotlib.py`

 * *Files 1% similar despite different names*

```diff
@@ -366,15 +366,15 @@
         # Compute how wide the view is.
         width_nanos = abs(vmax - vmin)
         (self.scale, self.interval) = self.get_tick_interval(width_nanos)
         ticks = self.get_ticks(vmin, vmax)
         return ticks
 
     def get_tick_interval(self, width):
-        for (scale, sizes) in self.intervals.items():
+        for scale, sizes in self.intervals.items():
             nanos = sizes_ns[scale]
             max_tick = self.max_ticks[scale]
             for size in sizes:
                 if width / (nanos * size) < max_tick:
                     return (scale, size)
         else:
             raise ValueError("Could not determine tick interval")
@@ -658,15 +658,15 @@
         # Compute how wide the view is.
         width_nanos = abs(vmax - vmin)
         (self.scale, self.interval) = self.get_tick_interval(width_nanos)
         ticks = self.get_ticks(vmin, vmax)
         return ticks
 
     def get_tick_interval(self, width):
-        for (scale, sizes) in self.intervals.items():
+        for scale, sizes in self.intervals.items():
             nanos = sizes_ns[scale]
             max_tick = self.max_ticks[scale]
             for size in sizes:
                 if width / (nanos * size) < max_tick:
                     return (scale, size)
         else:
             raise ValueError("Could not determine tick interval")
```

### Comparing `riptable-1.8.0/riptable/rt_merge.py` & `riptable-1.8.1/riptable/rt_merge.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_merge_asof.py` & `riptable-1.8.1/riptable/rt_merge_asof.py`

 * *Files 1% similar despite different names*

```diff
@@ -35,15 +35,14 @@
     from .rt_dataset import Dataset
 
 
 _logger = logging.getLogger(__name__)
 """Logger for this module."""
 
 
-@nb.generated_jit(nopython=True)
 def _less_than_comparison(allow_exact_matches, x, y):
     """
     Numba-based wrapper for ``__lt__`` and ``__le__`` which allows them to be
     selected at compile-time using type-based dispatch.
 
     Parameters
     ----------
@@ -52,21 +51,25 @@
         Values to compare.
 
     Returns
     -------
     bool
         ``x < y`` if `allow_exact_matches` is ``None``; otherwise ``x <= y``.
     """
+    raise RuntimeError("Unexpected call")
+
+
+@nb.extending.overload(_less_than_comparison, nopython=True)
+def __less_than_comparison(allow_exact_matches, x, y):
     if isinstance(allow_exact_matches, nb.types.NoneType):
         return lambda allow_exact_matches, x, y: x < y
     else:
         return lambda allow_exact_matches, x, y: x <= y
 
 
-@nb.generated_jit(nopython=True)
 def _greater_than_comparison(allow_exact_matches, x, y):
     """
     Numba-based wrapper for ``__gt__`` and ``__ge__`` which allows them to be
     selected at compile-time using type-based dispatch.
 
     Parameters
     ----------
@@ -75,14 +78,19 @@
         Values to compare.
 
     Returns
     -------
     bool
         ``x > y`` if `allow_exact_matches` is ``None``; otherwise ``x >= y``.
     """
+    raise RuntimeError("Unexpected call")
+
+
+@nb.extending.overload(_greater_than_comparison, nopython=True)
+def __greater_than_comparison(allow_exact_matches, x, y):
     if isinstance(allow_exact_matches, nb.types.NoneType):
         return lambda allow_exact_matches, x, y: x > y
     else:
         return lambda allow_exact_matches, x, y: x >= y
 
 
 @nb.njit(cache=get_global_settings().enable_numba_cache)
```

### Comparing `riptable-1.8.0/riptable/rt_meta.py` & `riptable-1.8.1/riptable/rt_meta.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_misc.py` & `riptable-1.8.1/riptable/rt_misc.py`

 * *Files 1% similar despite different names*

```diff
@@ -388,15 +388,14 @@
     For debugging purpose we can also store the origin of the completion (``jedi``,
     ``IPython.python_matches``, ``IPython.magics_matches``...).
     """
 
     __slots__ = ["start", "end", "text", "type", "signature", "_origin"]
 
     def __init__(self, start: int, end: int, text: str, *, type: str = None, _origin="", signature="") -> None:
-
         self.start = start
         self.end = end
         self.text = text
         self.type = type
         self.signature = signature
         self._origin = _origin
 
@@ -619,15 +618,14 @@
         # we only autocomplete on dots
         dotpos = text.rfind(".")
 
         if dotpos > 0:
             acobj, startpos, mainpart, endpos, startwith = _evaluate_text(text, dotpos, careful=not found)
 
             if acobj is not None:
-
                 # calc the subsection
                 endpos = dotpos + 1
                 while endpos < len(text):
                     # search back until hit non-naming character
                     if text[endpos] not in Hooker.babydict:
                         break
                     endpos += 1
@@ -714,28 +712,26 @@
         if dotpos > 0:
             mainpart = code[:dotpos]
             acobj, startpos, mainpart, endpos, startwith = _evaluate_text(code, dotpos)
 
             if acobj is not None:
                 try:
                     if isinstance(acobj, TypeRegister.Struct):
-
                         oclass = acobj.__class__.__dict__
                         oinstance = acobj.__dict__
 
                         # add a dot to complete mainpart for string matching later
                         mainpart += "."
                         lenmainpart = len(mainpart)
 
                         # get the jedi completions
                         rmatches = result["matches"]
 
                         # check if there are any jedi completions
                         if len(rmatches) == 0:
-
                             # jedi failed, so we will attempt
                             matches = []
                             completions = []
                             ldir = dir(acobj)
                             for c in ldir:
                                 if not c.startswith("_"):
                                     # check if we have a startswith
```

### Comparing `riptable-1.8.0/riptable/rt_mlutils.py` & `riptable-1.8.1/riptable/rt_mlutils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_multiset.py` & `riptable-1.8.1/riptable/rt_multiset.py`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -378,19 +378,17 @@
 
         # allArrays will contain the numpy arrays to display
         allArrays = []
 
         colorgroup = 0
         # pass over all datasets until all arrays have been paired up
         for outerindex in range(numTier1):
-
             # search the next dataset for ANY array
             # then try to match the next datasets with the same key
             for k, v in returnlist[outerindex].items():
-
                 # always add the first item
                 allArrays.append(v)
                 cell_span = 1
                 newcol = ColHeader(tier1_list[outerindex], 1, colorgroup)
                 multiline_col[1].append(newcol)
 
                 # now scan other datasets for the same key -- pair up with sister items
@@ -851,14 +849,16 @@
         return self.cascade("abs", *args, **kwargs)
 
     def astype(self, *args, **kwargs):
         return self.cascade("astype", *args, **kwargs)
 
 
 MultisetFunc = {}
+
+
 # -----------------------------------------------------------
 def _FixupDocStrings():
     """
     Load all the member function of Dataset module
     Look up functions we want to copy, copy over docstring from Dataset to Multiset
     """
     import inspect
```

### Comparing `riptable-1.8.0/riptable/rt_numpy.py` & `riptable-1.8.1/riptable/rt_numpy.py`

 * *Files 0% similar despite different names*

```diff
@@ -594,15 +594,14 @@
         array = array._np
     result = LedgerFunction(np.empty_like, array, dtype=dtype, order=order, subok=subok, shape=shape)
     return result
 
 
 # -------------------------------------------------------
 def _searchsorted(array, v, side="left", sorter=None):
-
     # we cannot handle a sorter
     if sorter is None:
         try:
             if side == "leftplus":
                 return rc.BinsToCutsBSearch(v, array, 0)
             elif side == "left":
                 return rc.BinsToCutsBSearch(v, array, 1)
@@ -1289,15 +1288,14 @@
         if a_char not in allowed_types:
             raise TypeError(f"{a.dtype} not in allowed types for ismember")
         if b_char not in allowed_types:
             raise TypeError(f"{b.dtype} not in allowed types for ismember")
 
         # cast if necessary
         if a_char != b_char:
-
             # import traceback
             # for line in traceback.format_stack():
             #    print(line.strip())
 
             # warnings.warn(f"Performance warning: numeric arrays in ismember had different dtypes {a.dtype} {b.dtype}")
             # raise TypeError('numeric arrays in ismember need to be the same dtype')
             common_type = _get_lossless_common_array_type(a, b)
@@ -1812,14 +1810,15 @@
 
 
 # -------------------------------------------------------
 # def _groupbycrunch(*args):
 #    #return rc.GroupByOp32(*args)
 #    return LedgerFunction(rc.GroupByOp32,*args)
 
+
 # -------------------------------------------------------
 def groupbypack(ikey, ncountgroup, unique_count=None, cutoffs=None) -> dict:
     """
     A routine often called after groupbyhash or groupbylex.
     Operates on binned integer arrays only (int8, int16, int32, or int64).
 
     Parameters
@@ -2361,14 +2360,15 @@
     return LedgerFunction(np.argsort, *args, **kwargs)
 
 
 # -------------------------------------------------------
 # This is redefined down below...
 # def ceil(*args,**kwargs): return LedgerFunction(np.ceil,*args,**kwargs)
 
+
 # -------------------------------------------------------
 def concatenate(*args, **kwargs):
     firstarg, *_ = args[0]
     if type(firstarg) not in (np.ndarray, TypeRegister.FastArray):
         if kwargs:
             raise ValueError(
                 f"concatenate: keyword arguments not supported for arrays of type {type(firstarg)}\n\tGot keyword arguments {kwargs}"
@@ -2426,14 +2426,15 @@
 def diff(*args, **kwargs) -> FastArray:
     return LedgerFunction(np.diff, *args, **kwargs)
 
 
 # -------------------------------------------------------
 # this is a ufunc no need to take over def floor(*args,**kwargs): return LedgerFunction(np.floor,*args,**kwargs)
 
+
 # -------------------------------------------------------
 def full(shape, fill_value, dtype=None, order="C") -> FastArray:
     """
     Return a new array of a specified shape and type, filled with a specified value.
 
     Parameters
     ----------
@@ -2986,14 +2987,15 @@
 def sortinplaceindirect(*args, **kwargs):
     return LedgerFunction(rc.SortInPlaceIndirect, *args, **kwargs)
 
 
 # -------------------------------------------------------
 # is a ufunc def trunc(*args,**kwargs): return LedgerFunction(rc.IsSorted,*args,**kwargs)
 
+
 # -------------------------------------------------------
 def _unary_func(func, *args, **kwargs):
     """
     pooling of unary functions
     if not a fastarray, it will try to convert it
     then it will call the normal numpy routine, which will call FastArray unary func (which is parallelized)
     if a user calls rt.log(pandasarray) with a pandas array, it will get parallelized now
@@ -3110,15 +3112,14 @@
     a = args[0]
     if isinstance(a, np.ndarray):
         return np.round(*args, **kwargs)
     return builtins.round(a)
 
 
 def _np_keyword_wrapper(filter=None, dtype=None, **kwargs):
-
     if dtype is not None:
         kwargs["dtype"] = dtype
     if filter is not None:
         kwargs["filter"] = filter
 
     return kwargs
 
@@ -4590,14 +4591,15 @@
 
 
 ##-------------------------------------------------------
 # not allowed
 # class bool(np.bool):
 #    pass
 
+
 # -------------------------------------------------------
 class bool_(np.bool_):
     """
     The Riptable equivalent of `numpy.bool_`, with the concept of an invalid added.
 
     See Also
     --------
@@ -5008,14 +5010,15 @@
         return instance.view(TypeRegister.FastArray)
 
 
 # -------------------------------------------------------
 # linux only
 # class float128(np.float128):
 
+
 # -------------------------------------------------------
 def interp(x, xp, fp):
     """
     One-dimensional or two-dimensional linear interpolation with clipping.
 
     Returns the one-dimensional piecewise linear interpolant to a function
     with given discrete data points (`xp`, `fp`), evaluated at `x`.
```

### Comparing `riptable-1.8.0/riptable/rt_pdataset.py` & `riptable-1.8.1/riptable/rt_pdataset.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_pgroupby.py` & `riptable-1.8.1/riptable/rt_pgroupby.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_sds.py` & `riptable-1.8.1/riptable/rt_sds.py`

 * *Files 0% similar despite different names*

```diff
@@ -92,14 +92,15 @@
 """
 SDSRebuildRoot = False
 """
 If enabled, SDS will rebuilds the root SDS file, ``_root.sds``, in the event that a dataset is saved to an existing
 directory that was part of a previous ``Struct`` save.
 """
 
+
 # -----------------------------------------------------------------------------------------
 def SDSMakeDirsOn() -> None:
     """Enables ``SDSMakeDirs``."""
     global SDSMakeDirs
     SDSMakeDirs = True
 
 
@@ -606,23 +607,23 @@
     append=None,
     complevel=None,
 ):
     """
     Fast track for saving a single item in an .sds file. This will be called if someone saves
     a single array or FastArray subclass with the main save_sds() wrapper
     """
-    _, name, status = _sds_path_single(path, share=share, overwrite=overwrite, name=name, append=append)
+    new_path, new_name, status = _sds_path_single(path, share=share, overwrite=overwrite, name=name, append=append)
     if status is False:
         return
     # wrap in struct, struct build meta will call item build meta if necessary
-    item = TypeRegister.Struct({name: item})
+    item = TypeRegister.Struct({new_name: item})
     fileType = SDSFileType.Array
     _write_to_sds(
         item,
-        path,
+        path=new_path,
         name=None,
         compress=compress,
         sharename=share,
         fileType=fileType,
         onefile=onefile,
         bandsize=bandsize,
         append=append,
@@ -907,15 +908,14 @@
 # -----------------------------------------------------------------------------------------
 def sds_info(
     filepath: Union[AnyPath, Sequence[AnyPath]],
     share: Optional[Union[bytes, str]] = None,
     sections: Optional[List[str]] = None,
     threads: Optional[int] = None,
 ):
-
     # TODO: match the Matlab output (should it look the same, or print more information from array info?)
     return _sds_raw_info(filepath, share=share, sections=sections, threads=threads)
 
 
 # -----------------------------------------------------------------------------------------
 def sds_tree(filepath: AnyPath, threads: Optional[int] = None):
     r"""
@@ -1285,15 +1285,14 @@
 
             # save cutoffs for categorical fixup
             spec_cutoffs_list = spec_cutoffs.setdefault(spec_name, [])
             spec_cutoffs_list.append(cutoffs[item_idx])
 
     # categoricals only
     for spec_name, meta_list in spec_meta.items():
-
         underlying = data.get(spec_name, None)
         # only rebuild if the underlying was loaded (may not have been in include list)
         if underlying is not None:
             listcats = spec_items[spec_name]
             idx_cutoffs = data_cutoffs[spec_name]
             unique_cutoffs = spec_cutoffs[spec_name]
             stacked_categorical = _multistack_categoricals(
@@ -1361,15 +1360,14 @@
     ds = TypeRegister.PDataset(data, cutoffs=cutoffs, filenames=loadedpaths)
 
     return ds
 
 
 # -----------------------------------------------------------------------------------------
 def _convert_to_mask(filter):
-
     if not isinstance(filter, np.ndarray):
         filter = np.atleast_1d(filter)
 
     if isinstance(filter, np.ndarray) and filter.dtype.char != "O":
         if filter.dtype.char == "?" and len(filter) != 0:
             # no more bool to fancy
             # filter = bool_to_fancy(filter)
@@ -1673,15 +1671,14 @@
                 sections=sections,
             )
             origerror = None
         except Exception:
             origerror = sys.exc_info()[1]
 
         if origerror is not None:
-
             # try again with extension
             filepath = filepath + SDS_EXTENSION
 
             try:
                 result = _load_sds(
                     filepath,
                     sharename=share,
@@ -1994,14 +1991,15 @@
 
     Raises
     ------
     ValueError
         If `include` is not a list of column names.
         If the result doesn't contain any data.
     """
+
     # -------------------------------------------
     def _add_sds_ext(filename):
         """If a filename does not exist or is not a file, and has no extension, add extension"""
         try_add = False
         if sds_exists(filename):
             pass
         else:
@@ -2359,15 +2357,14 @@
         )
     except:
         warnings.warn(f"Could not add {dsname} to {rootpath}.")
 
 
 # ------------------------------------------------------------------------------------
 def skeleton_from_meta_data(container_type, filepath, meta, arrays, meta_tups, file_header):
-
     # bug when nested struct doesn't have its own file (only has containers)
     # need to find a general way to address this for all SDS loads
     # general loader should also look for files that start with end of path
     # if a folder is:
     # st1 /
     #   st2!ds1.sds
     #   st2!ds2.sds
@@ -2646,15 +2643,14 @@
                 # only pull info to check for nested containers
                 # replace with some sort of shared memory specific dir() call
                 firstsds = decompress_dataset_internal(filename, sharename=sharename, info=True, threads=threads)
                 meta, arrays, meta_tups, fileheader = firstsds[0]
 
                 # only structs can have nested containers
                 if fileheader["FileType"] == SDSFileType.Struct:
-
                     # chain off prefix
                     prefix = prefix + itemname + "!"
                     schema[itemname], dirlist = _build_schema_shared(meta_tups, sharename, prefix, dirlist, threads)
 
                 # wasn't a struct, stop the schema here
                 else:
                     schema[itemname] = {}
@@ -3292,15 +3288,14 @@
     if path is not None:
         path = _anypath_to_str(path)
 
     has_nested_containers = data.has_nested_containers
 
     # only create a directory if the struct has nested containers
     if has_nested_containers and not onefile:
-
         # add this change when matlab save changes
         # to mirror the save, strip .sds if the user added the extension
         # .sds should only be on files, not directories
         # if path.endswith(SDS_EXTENSION):
         #    path = path[:-4]
         if _sds_path_multi(path, share=sharename, overwrite=overwrite):
             # all structs with nested containers will get a _root.sds (helps maintain order)
```

### Comparing `riptable-1.8.0/riptable/rt_sharedmemory.py` & `riptable-1.8.1/riptable/rt_sharedmemory.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_sort_cache.py` & `riptable-1.8.1/riptable/rt_sort_cache.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_stats.py` & `riptable-1.8.1/riptable/rt_stats.py`

 * *Files 0% similar despite different names*

```diff
@@ -185,15 +185,14 @@
 # NOTE: Can we use regPlot from seaborn
 # won't display in jupyter lab
 # better auto-detect bounds
 # suppress nan warnings
 
 
 def plotPrediction(X, Yhat, Y, N, lb=None, ub=None):
-
     if lb is None:
         lowerBound = np.nanmin(X)
     else:
         lowerBound = lb
 
     if lb is None:
         upperBound = np.nanmax(X)
```

### Comparing `riptable-1.8.0/riptable/rt_str.py` & `riptable-1.8.1/riptable/rt_str.py`

 * *Files 0% similar despite different names*

```diff
@@ -478,15 +478,14 @@
             if itemsize >= str2len:
                 k = itemsize
                 while (k > 0) and (src[rowpos + k - 1] == 0):
                     k -= 1
 
                 # check if still enough space left
                 if k >= str2len:
-
                     k2 = str2len
                     # check if only the end matches
                     while k2 > 0:
                         if src[rowpos + k - 1] != str2[k2 - 1]:
                             break
                         k -= 1
                         k2 -= 1
```

### Comparing `riptable-1.8.0/riptable/rt_struct.py` & `riptable-1.8.1/riptable/rt_struct.py`

 * *Files 0% similar despite different names*

```diff
@@ -2431,9850 +2431,9849 @@
 000097e0: 656d 666c 6167 203d 2069 7465 6d66 6c61  emflag = itemfla
 000097f0: 6773 5b69 7465 6d69 6478 5d0d 0a0d 0a20  gs[itemidx].... 
 00009800: 2020 2020 2020 2020 2020 2023 2074 6f70             # top
 00009810: 2d6c 6576 656c 2069 7465 6d0d 0a20 2020  -level item..   
 00009820: 2020 2020 2020 2020 2069 6620 6974 656d           if item
 00009830: 666c 6167 2026 2053 4453 466c 6167 2e4f  flag & SDSFlag.O
 00009840: 7269 6769 6e61 6c43 6f6e 7461 696e 6572  riginalContainer
-00009850: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
-00009860: 2020 2020 2023 2074 6869 7320 6974 656d       # this item
-00009870: 7320 6172 7261 7973 2061 6e64 206f 7468  s arrays and oth
-00009880: 6572 2069 6e66 6f20 6172 6520 696e 2061  er info are in a
-00009890: 2064 6963 7469 6f6e 6172 790d 0a20 2020   dictionary..   
-000098a0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000098b0: 6974 656d 666c 6167 2026 2053 4453 466c  itemflag & SDSFl
-000098c0: 6167 2e4e 6573 7465 643a 0d0a 2020 2020  ag.Nested:..    
-000098d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000098e0: 6964 6963 7420 3d20 6974 656d 0d0a 2020  idict = item..  
+00009850: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00009860: 2020 2023 2074 6869 7320 6974 656d 7320     # this items 
+00009870: 6172 7261 7973 2061 6e64 206f 7468 6572  arrays and other
+00009880: 2069 6e66 6f20 6172 6520 696e 2061 2064   info are in a d
+00009890: 6963 7469 6f6e 6172 790d 0a20 2020 2020  ictionary..     
+000098a0: 2020 2020 2020 2020 2020 2069 6620 6974             if it
+000098b0: 656d 666c 6167 2026 2053 4453 466c 6167  emflag & SDSFlag
+000098c0: 2e4e 6573 7465 643a 0d0a 2020 2020 2020  .Nested:..      
+000098d0: 2020 2020 2020 2020 2020 2020 2020 6964                id
+000098e0: 6963 7420 3d20 6974 656d 0d0a 2020 2020  ict = item..    
 000098f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009900: 2020 6966 6c61 6773 203d 2069 7465 6d2e    iflags = item.
-00009910: 706f 7028 225f 666c 6167 7322 290d 0a20  pop("_flags").. 
+00009900: 6966 6c61 6773 203d 2069 7465 6d2e 706f  iflags = item.po
+00009910: 7028 225f 666c 6167 7322 290d 0a20 2020  p("_flags")..   
 00009920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009930: 2020 2069 6d65 7461 203d 2069 7465 6d2e     imeta = item.
-00009940: 706f 7028 225f 6d65 7461 2229 0d0a 2020  pop("_meta")..  
+00009930: 2069 6d65 7461 203d 2069 7465 6d2e 706f   imeta = item.po
+00009940: 7028 225f 6d65 7461 2229 0d0a 2020 2020  p("_meta")..    
 00009950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009960: 2020 2320 616c 736f 2075 7365 2074 6865    # also use the
-00009970: 2067 656e 6572 6963 2072 6f75 7469 6e65   generic routine
-00009980: 2066 6f72 2061 6c6c 2063 6c61 7373 6573   for all classes
-00009990: 2068 6572 650d 0a20 2020 2020 2020 2020   here..         
-000099a0: 2020 2020 2020 2020 2020 2069 7465 6d20             item 
-000099b0: 3d20 5479 7065 5265 6769 7374 6572 2e66  = TypeRegister.f
-000099c0: 726f 6d5f 6d65 7461 5f64 6174 6128 6964  rom_meta_data(id
-000099d0: 6963 742c 2069 666c 6167 732c 2069 6d65  ict, iflags, ime
-000099e0: 7461 290d 0a20 2020 2020 2020 2020 2020  ta)..           
-000099f0: 2020 2020 2020 2020 2061 6c6c 6974 656d           allitem
-00009a00: 735b 6974 656d 6e61 6d65 5d20 3d20 6974  s[itemname] = it
-00009a10: 656d 0d0a 0d0a 2020 2020 2020 2020 2020  em....          
-00009a20: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-00009a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009a40: 2023 2069 6620 4e6f 6e65 2069 7320 696e   # if None is in
-00009a50: 2061 7272 6179 732c 2069 7420 6d65 616e   arrays, it mean
-00009a60: 7320 7468 6520 6974 656d 2077 6173 2065  s the item was e
-00009a70: 7863 6c75 6465 640d 0a20 2020 2020 2020  xcluded..       
-00009a80: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00009a90: 6974 656d 2069 7320 4e6f 6e65 3a0d 0a20  item is None:.. 
+00009960: 2320 616c 736f 2075 7365 2074 6865 2067  # also use the g
+00009970: 656e 6572 6963 2072 6f75 7469 6e65 2066  eneric routine f
+00009980: 6f72 2061 6c6c 2063 6c61 7373 6573 2068  or all classes h
+00009990: 6572 650d 0a20 2020 2020 2020 2020 2020  ere..           
+000099a0: 2020 2020 2020 2020 2069 7465 6d20 3d20           item = 
+000099b0: 5479 7065 5265 6769 7374 6572 2e66 726f  TypeRegister.fro
+000099c0: 6d5f 6d65 7461 5f64 6174 6128 6964 6963  m_meta_data(idic
+000099d0: 742c 2069 666c 6167 732c 2069 6d65 7461  t, iflags, imeta
+000099e0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+000099f0: 2020 2020 2020 2061 6c6c 6974 656d 735b         allitems[
+00009a00: 6974 656d 6e61 6d65 5d20 3d20 6974 656d  itemname] = item
+00009a10: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00009a20: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00009a30: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00009a40: 2069 6620 4e6f 6e65 2069 7320 696e 2061   if None is in a
+00009a50: 7272 6179 732c 2069 7420 6d65 616e 7320  rrays, it means 
+00009a60: 7468 6520 6974 656d 2077 6173 2065 7863  the item was exc
+00009a70: 6c75 6465 640d 0a20 2020 2020 2020 2020  luded..         
+00009a80: 2020 2020 2020 2020 2020 2069 6620 6974             if it
+00009a90: 656d 2069 7320 4e6f 6e65 3a0d 0a20 2020  em is None:..   
 00009aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009ab0: 2020 2020 2020 2063 6f6e 7469 6e75 650d         continue.
-00009ac0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00009ad0: 2020 2020 2020 2023 2070 6f70 2073 6361         # pop sca
-00009ae0: 6c61 7220 7661 6c75 6520 756e 6c65 7373  lar value unless
-00009af0: 2069 7427 7320 6672 6f6d 206d 6174 6c61   it's from matla
-00009b00: 6220 286d 6174 6c61 6220 6861 7320 6e6f  b (matlab has no
-00009b10: 2073 6361 6c61 7273 290d 0a20 2020 2020   scalars)..     
-00009b20: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00009b30: 6620 2869 7465 6d66 6c61 6720 2620 5344  f (itemflag & SD
-00009b40: 5346 6c61 672e 5363 616c 6172 2920 616e  SFlag.Scalar) an
-00009b50: 6420 6e6f 7420 6672 6f6d 5f6d 6174 6c61  d not from_matla
-00009b60: 623a 0d0a 2020 2020 2020 2020 2020 2020  b:..            
-00009b70: 2020 2020 2020 2020 2020 2020 6974 656d              item
-00009b80: 203d 2069 7465 6d5b 305d 0d0a 0d0a 2020   = item[0]....  
+00009ab0: 2020 2020 2063 6f6e 7469 6e75 650d 0a0d       continue...
+00009ac0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009ad0: 2020 2020 2023 2070 6f70 2073 6361 6c61       # pop scala
+00009ae0: 7220 7661 6c75 6520 756e 6c65 7373 2069  r value unless i
+00009af0: 7427 7320 6672 6f6d 206d 6174 6c61 6220  t's from matlab 
+00009b00: 286d 6174 6c61 6220 6861 7320 6e6f 2073  (matlab has no s
+00009b10: 6361 6c61 7273 290d 0a20 2020 2020 2020  calars)..       
+00009b20: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00009b30: 2869 7465 6d66 6c61 6720 2620 5344 5346  (itemflag & SDSF
+00009b40: 6c61 672e 5363 616c 6172 2920 616e 6420  lag.Scalar) and 
+00009b50: 6e6f 7420 6672 6f6d 5f6d 6174 6c61 623a  not from_matlab:
+00009b60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00009b70: 2020 2020 2020 2020 2020 6974 656d 203d            item =
+00009b80: 2069 7465 6d5b 305d 0d0a 0d0a 2020 2020   item[0]....    
 00009b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009ba0: 2020 2320 7265 6775 6c61 7220 6172 7261    # regular arra
-00009bb0: 7920 6f72 2075 6e64 6572 6c79 696e 6720  y or underlying 
-00009bc0: 6172 7261 7920 6f66 2046 6173 7441 7272  array of FastArr
-00009bd0: 6179 2073 7562 636c 6173 730d 0a20 2020  ay subclass..   
-00009be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009bf0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00009c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009c10: 696d 6574 6120 3d20 6974 656d 5f6d 6574  imeta = item_met
-00009c20: 612e 6765 7428 6974 656d 6e61 6d65 2c20  a.get(itemname, 
-00009c30: 4e6f 6e65 290d 0a0d 0a20 2020 2020 2020  None)....       
-00009c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009c50: 2023 2073 7065 6369 616c 2072 6562 7569   # special rebui
-00009c60: 6c64 0d0a 2020 2020 2020 2020 2020 2020  ld..            
-00009c70: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00009c80: 6d65 7461 2069 7320 6e6f 7420 4e6f 6e65  meta is not None
-00009c90: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00009ca0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00009cb0: 2074 6869 7320 6e65 6564 7320 746f 2064   this needs to d
-00009cc0: 6f20 6120 7061 7373 206f 7665 7220 7468  o a pass over th
-00009cd0: 6520 7768 6f6c 6520 6469 6374 2066 6f72  e whole dict for
-00009ce0: 2065 6163 6820 7370 6563 6961 6c20 6974   each special it
-00009cf0: 656d 2e2e 2e0d 0a20 2020 2020 2020 2020  em.....         
+00009ba0: 2320 7265 6775 6c61 7220 6172 7261 7920  # regular array 
+00009bb0: 6f72 2075 6e64 6572 6c79 696e 6720 6172  or underlying ar
+00009bc0: 7261 7920 6f66 2046 6173 7441 7272 6179  ray of FastArray
+00009bd0: 2073 7562 636c 6173 730d 0a20 2020 2020   subclass..     
+00009be0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00009bf0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00009c00: 2020 2020 2020 2020 2020 2020 2020 696d                im
+00009c10: 6574 6120 3d20 6974 656d 5f6d 6574 612e  eta = item_meta.
+00009c20: 6765 7428 6974 656d 6e61 6d65 2c20 4e6f  get(itemname, No
+00009c30: 6e65 290d 0a0d 0a20 2020 2020 2020 2020  ne)....         
+00009c40: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00009c50: 2073 7065 6369 616c 2072 6562 7569 6c64   special rebuild
+00009c60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00009c70: 2020 2020 2020 2020 2020 6966 2069 6d65            if ime
+00009c80: 7461 2069 7320 6e6f 7420 4e6f 6e65 3a0d  ta is not None:.
+00009c90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009ca0: 2020 2020 2020 2020 2020 2020 2023 2074               # t
+00009cb0: 6869 7320 6e65 6564 7320 746f 2064 6f20  his needs to do 
+00009cc0: 6120 7061 7373 206f 7665 7220 7468 6520  a pass over the 
+00009cd0: 7768 6f6c 6520 6469 6374 2066 6f72 2065  whole dict for e
+00009ce0: 6163 6820 7370 6563 6961 6c20 6974 656d  ach special item
+00009cf0: 2e2e 2e0d 0a20 2020 2020 2020 2020 2020  .....           
 00009d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009d10: 2020 2023 2063 616e 2774 2070 6f70 2074     # can't pop t
-00009d20: 6865 2069 7465 6d20 6265 6361 7573 6520  he item because 
-00009d30: 6469 6374 2069 7320 6265 696e 6720 6974  dict is being it
-00009d40: 6572 6174 6564 206f 7665 720d 0a20 2020  erated over..   
+00009d10: 2023 2063 616e 2774 2070 6f70 2074 6865   # can't pop the
+00009d20: 2069 7465 6d20 6265 6361 7573 6520 6469   item because di
+00009d30: 6374 2069 7320 6265 696e 6720 6974 6572  ct is being iter
+00009d40: 6174 6564 206f 7665 720d 0a20 2020 2020  ated over..     
 00009d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009d60: 2020 2020 2020 2020 2023 206d 6179 6265           # maybe
-00009d70: 2075 7365 2061 6e6f 7468 6572 2064 6963   use another dic
-00009d80: 743f 0d0a 2020 2020 2020 2020 2020 2020  t?..            
-00009d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009da0: 6964 6963 7420 3d20 7b6b 3a20 7620 666f  idict = {k: v fo
-00009db0: 7220 6b2c 2076 2069 6e20 6974 656d 6469  r k, v in itemdi
-00009dc0: 6374 2e69 7465 6d73 2829 2069 6620 6b2e  ct.items() if k.
-00009dd0: 7374 6172 7473 7769 7468 2869 7465 6d6e  startswith(itemn
-00009de0: 616d 6520 2b20 2221 2229 7d0d 0a20 2020  ame + "!")}..   
+00009d60: 2020 2020 2020 2023 206d 6179 6265 2075         # maybe u
+00009d70: 7365 2061 6e6f 7468 6572 2064 6963 743f  se another dict?
+00009d80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00009d90: 2020 2020 2020 2020 2020 2020 2020 6964                id
+00009da0: 6963 7420 3d20 7b6b 3a20 7620 666f 7220  ict = {k: v for 
+00009db0: 6b2c 2076 2069 6e20 6974 656d 6469 6374  k, v in itemdict
+00009dc0: 2e69 7465 6d73 2829 2069 6620 6b2e 7374  .items() if k.st
+00009dd0: 6172 7473 7769 7468 2869 7465 6d6e 616d  artswith(itemnam
+00009de0: 6520 2b20 2221 2229 7d0d 0a20 2020 2020  e + "!")}..     
 00009df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009e00: 2020 2020 2020 2020 2069 6469 6374 5b69           idict[i
-00009e10: 7465 6d6e 616d 655d 203d 2069 7465 6d0d  temname] = item.
-00009e20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009e30: 2020 2020 2020 2020 2020 2020 2023 2066               # f
-00009e40: 6c61 6773 206f 6e6c 7920 7365 656d 2069  lags only seem i
-00009e50: 6d70 6f72 7461 6e74 2066 6f72 2063 6f6e  mportant for con
-00009e60: 7461 696e 6572 206c 6f61 6469 6e67 0d0a  tainer loading..
+00009e00: 2020 2020 2020 2069 6469 6374 5b69 7465         idict[ite
+00009e10: 6d6e 616d 655d 203d 2069 7465 6d0d 0a20  mname] = item.. 
+00009e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009e30: 2020 2020 2020 2020 2020 2023 2066 6c61             # fla
+00009e40: 6773 206f 6e6c 7920 7365 656d 2069 6d70  gs only seem imp
+00009e50: 6f72 7461 6e74 2066 6f72 2063 6f6e 7461  ortant for conta
+00009e60: 696e 6572 206c 6f61 6469 6e67 0d0a 2020  iner loading..  
 00009e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009e80: 2020 2020 2020 2020 2020 2020 6966 6c61              ifla
-00009e90: 6773 203d 205b 5d0d 0a0d 0a20 2020 2020  gs = []....     
+00009e80: 2020 2020 2020 2020 2020 6966 6c61 6773            iflags
+00009e90: 203d 205b 5d0d 0a0d 0a20 2020 2020 2020   = []....       
 00009ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009eb0: 2020 2020 2020 2069 7465 6d20 3d20 5479         item = Ty
-00009ec0: 7065 5265 6769 7374 6572 2e66 726f 6d5f  peRegister.from_
-00009ed0: 6d65 7461 5f64 6174 6128 6974 656d 6469  meta_data(itemdi
-00009ee0: 6374 3d69 6469 6374 2c20 6d65 7461 3d69  ct=idict, meta=i
-00009ef0: 6d65 7461 290d 0a0d 0a20 2020 2020 2020  meta)....       
-00009f00: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00009f10: 6e6f 7420 6672 6f6d 5f6d 6174 6c61 6220  not from_matlab 
-00009f20: 6f72 2069 7465 6d2e 7374 7269 6465 735b  or item.strides[
-00009f30: 305d 2021 3d20 303a 0d0a 2020 2020 2020  0] != 0:..      
+00009eb0: 2020 2020 2069 7465 6d20 3d20 5479 7065       item = Type
+00009ec0: 5265 6769 7374 6572 2e66 726f 6d5f 6d65  Register.from_me
+00009ed0: 7461 5f64 6174 6128 6974 656d 6469 6374  ta_data(itemdict
+00009ee0: 3d69 6469 6374 2c20 6d65 7461 3d69 6d65  =idict, meta=ime
+00009ef0: 7461 290d 0a0d 0a20 2020 2020 2020 2020  ta)....         
+00009f00: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+00009f10: 7420 6672 6f6d 5f6d 6174 6c61 6220 6f72  t from_matlab or
+00009f20: 2069 7465 6d2e 7374 7269 6465 735b 305d   item.strides[0]
+00009f30: 2021 3d20 303a 0d0a 2020 2020 2020 2020   != 0:..        
 00009f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009f50: 2020 2320 6d61 746c 6162 2063 616e 2073    # matlab can s
-00009f60: 6176 6520 3020 6c65 6e67 7468 2061 7272  ave 0 length arr
-00009f70: 6179 730d 0a20 2020 2020 2020 2020 2020  ays..           
-00009f80: 2020 2020 2020 2020 2020 2020 2061 6c6c               all
-00009f90: 6974 656d 735b 6974 656d 6e61 6d65 5d20  items[itemname] 
-00009fa0: 3d20 6974 656d 0d0a 0d0a 2020 2020 2020  = item....      
-00009fb0: 2020 7265 7375 6c74 203d 2063 6c73 2861    result = cls(a
-00009fc0: 6c6c 6974 656d 7329 0d0a 0d0a 2020 2020  llitems)....    
-00009fd0: 2020 2020 2320 544f 444f 3a20 6164 6420      # TODO: add 
-00009fe0: 636f 6465 2074 6f20 7265 7374 6f72 6520  code to restore 
-00009ff0: 666f 6f74 6572 730d 0a20 2020 2020 2020  footers..       
-0000a000: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-0000a010: 2020 2072 6573 756c 742e 6c61 6265 6c5f     result.label_
-0000a020: 7365 745f 6e61 6d65 7328 6d65 7461 5b22  set_names(meta["
-0000a030: 6c61 6265 6c73 225d 290d 0a20 2020 2020  labels"])..     
-0000a040: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
-0000a050: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
-0000a060: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-0000a070: 6573 756c 740d 0a0d 0a20 2020 2023 202d  esult....    # -
+00009f50: 2320 6d61 746c 6162 2063 616e 2073 6176  # matlab can sav
+00009f60: 6520 3020 6c65 6e67 7468 2061 7272 6179  e 0 length array
+00009f70: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
+00009f80: 2020 2020 2020 2020 2020 2061 6c6c 6974             allit
+00009f90: 656d 735b 6974 656d 6e61 6d65 5d20 3d20  ems[itemname] = 
+00009fa0: 6974 656d 0d0a 0d0a 2020 2020 2020 2020  item....        
+00009fb0: 7265 7375 6c74 203d 2063 6c73 2861 6c6c  result = cls(all
+00009fc0: 6974 656d 7329 0d0a 0d0a 2020 2020 2020  items)....      
+00009fd0: 2020 2320 544f 444f 3a20 6164 6420 636f    # TODO: add co
+00009fe0: 6465 2074 6f20 7265 7374 6f72 6520 666f  de to restore fo
+00009ff0: 6f74 6572 730d 0a20 2020 2020 2020 2074  oters..        t
+0000a000: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+0000a010: 2072 6573 756c 742e 6c61 6265 6c5f 7365   result.label_se
+0000a020: 745f 6e61 6d65 7328 6d65 7461 5b22 6c61  t_names(meta["la
+0000a030: 6265 6c73 225d 290d 0a20 2020 2020 2020  bels"])..       
+0000a040: 2065 7863 6570 743a 0d0a 2020 2020 2020   except:..      
+0000a050: 2020 2020 2020 7061 7373 0d0a 0d0a 2020        pass....  
+0000a060: 2020 2020 2020 7265 7475 726e 2072 6573        return res
+0000a070: 756c 740d 0a0d 0a20 2020 2023 202d 2d2d  ult....    # ---
 0000a080: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000a090: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000a0a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000a0b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
-0000a0c0: 2064 6566 205f 6173 5f6d 6574 615f 6461   def _as_meta_da
-0000a0d0: 7461 2873 656c 662c 206e 616d 653d 4e6f  ta(self, name=No
-0000a0e0: 6e65 2c20 6e65 7374 6564 3d54 7275 6529  ne, nested=True)
-0000a0f0: 3a0d 0a0d 0a20 2020 2020 2020 2069 7465  :....        ite
-0000a100: 6d64 6963 7420 3d20 7b7d 0d0a 2020 2020  mdict = {}..    
-0000a110: 2020 2020 6974 656d 666c 6167 7320 3d20      itemflags = 
-0000a120: 5b5d 0d0a 2020 2020 2020 2020 6d65 7461  []..        meta
-0000a130: 203d 204d 6574 6144 6174 6128 7365 6c66   = MetaData(self
-0000a140: 2e5f 6d65 7461 5f64 6963 7428 6e61 6d65  ._meta_dict(name
-0000a150: 3d6e 616d 6529 290d 0a0d 0a20 2020 2020  =name))....     
-0000a160: 2020 2023 206e 6565 6420 746f 2062 6520     # need to be 
-0000a170: 6162 6c65 2074 6f20 6164 6420 275f 6d65  able to add '_me
-0000a180: 7461 2720 6173 2061 6e20 6974 656d 2069  ta' as an item i
-0000a190: 6e20 5374 7275 6374 0d0a 2020 2020 2020  n Struct..      
-0000a1a0: 2020 7761 726e 7374 6174 6520 3d20 5374    warnstate = St
-0000a1b0: 7275 6374 2e57 6172 6e4f 6e49 6e76 616c  ruct.WarnOnInval
-0000a1c0: 6964 4e61 6d65 730d 0a20 2020 2020 2020  idNames..       
-0000a1d0: 2053 7472 7563 742e 5761 726e 4f6e 496e   Struct.WarnOnIn
-0000a1e0: 7661 6c69 644e 616d 6573 203d 2054 7275  validNames = Tru
-0000a1f0: 650d 0a0d 0a20 2020 2020 2020 2066 6f72  e....        for
-0000a200: 2069 7465 6d6e 616d 652c 2069 7465 6d20   itemname, item 
-0000a210: 696e 2073 656c 662e 6974 656d 7328 293a  in self.items():
-0000a220: 0d0a 2020 2020 2020 2020 2020 2020 7472  ..            tr
-0000a230: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-0000a240: 2020 2020 6966 2069 7465 6d2e 5f5f 6d6f      if item.__mo
-0000a250: 6475 6c65 5f5f 203d 3d20 2268 6466 352e  dule__ == "hdf5.
-0000a260: 696f 223a 0d0a 2020 2020 2020 2020 2020  io":..          
-0000a270: 2020 2020 2020 2020 2020 6974 656d 203d            item =
-0000a280: 2068 3569 6f5f 746f 5f73 7472 7563 7428   h5io_to_struct(
-0000a290: 6974 656d 290d 0a20 2020 2020 2020 2020  item)..         
-0000a2a0: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
-0000a2b0: 2020 2020 2020 2020 2020 2020 7061 7373              pass
-0000a2c0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000a2d0: 2320 6172 7261 7973 202f 2061 7272 6179  # arrays / array
-0000a2e0: 2073 7562 6c63 6c61 7373 6573 0d0a 2020   sublclasses..  
-0000a2f0: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-0000a300: 6e73 7461 6e63 6528 6974 656d 2c20 6e70  nstance(item, np
-0000a310: 2e6e 6461 7272 6179 293a 0d0a 2020 2020  .ndarray):..    
-0000a320: 2020 2020 2020 2020 2020 2020 6974 656d              item
-0000a330: 666c 6167 203d 2053 4453 466c 6167 2e4f  flag = SDSFlag.O
-0000a340: 7269 6769 6e61 6c43 6f6e 7461 696e 6572  riginalContainer
-0000a350: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000a360: 2020 2020 2320 6765 7420 6172 7261 7973      # get arrays
-0000a370: 2c20 666c 6167 732c 206d 6574 6120 6672  , flags, meta fr
-0000a380: 6f6d 2061 7272 6179 2073 7562 636c 6173  om array subclas
-0000a390: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
-0000a3a0: 2020 2069 6620 6861 7361 7474 7228 6974     if hasattr(it
-0000a3b0: 656d 2c20 225f 6173 5f6d 6574 615f 6461  em, "_as_meta_da
-0000a3c0: 7461 2229 3a0d 0a20 2020 2020 2020 2020  ta"):..         
-0000a3d0: 2020 2020 2020 2020 2020 2069 6469 6374             idict
-0000a3e0: 2c20 6966 6c61 6773 2c20 696d 6574 6120  , iflags, imeta 
-0000a3f0: 3d20 6974 656d 2e5f 6173 5f6d 6574 615f  = item._as_meta_
-0000a400: 6461 7461 286e 616d 653d 6974 656d 6e61  data(name=itemna
-0000a410: 6d65 290d 0a20 2020 2020 2020 2020 2020  me)..           
-0000a420: 2020 2020 2020 2020 2066 6f72 206b 2c20           for k, 
-0000a430: 7620 696e 2069 6469 6374 2e69 7465 6d73  v in idict.items
-0000a440: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
-0000a450: 2020 2020 2020 2020 2020 2020 2069 7465               ite
-0000a460: 6d64 6963 745b 6b5d 203d 2076 0d0a 2020  mdict[k] = v..  
-0000a470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a480: 2020 6974 656d 666c 6167 7320 3d20 6974    itemflags = it
-0000a490: 656d 666c 6167 7320 2b20 6966 6c61 6773  emflags + iflags
-0000a4a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a4b0: 2020 2020 2020 2320 6c69 6b65 2074 6869        # like thi
-0000a4c0: 7320 6f72 2073 746f 7265 2061 7320 7365  s or store as se
-0000a4d0: 7061 7261 7465 2069 7465 6d3f 0d0a 2020  parate item?..  
-0000a4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a4f0: 2020 6d65 7461 5b22 6974 656d 5f6d 6574    meta["item_met
-0000a500: 6122 5d2e 6170 7065 6e64 2869 6d65 7461  a"].append(imeta
-0000a510: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0000a520: 2020 2020 2023 2072 6567 756c 6172 2061       # regular a
-0000a530: 7272 6179 0d0a 2020 2020 2020 2020 2020  rray..          
-0000a540: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-0000a550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a560: 2023 206d 6967 6874 206e 6565 6420 746f   # might need to
-0000a570: 2063 6f70 7920 7374 7269 6465 6420 6461   copy strided da
-0000a580: 7461 0d0a 2020 2020 2020 2020 2020 2020  ta..            
-0000a590: 2020 2020 2020 2020 6966 2069 7465 6d2e          if item.
-0000a5a0: 6e64 696d 203d 3d20 313a 0d0a 2020 2020  ndim == 1:..    
+0000a0b0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
+0000a0c0: 6566 205f 6173 5f6d 6574 615f 6461 7461  ef _as_meta_data
+0000a0d0: 2873 656c 662c 206e 616d 653d 4e6f 6e65  (self, name=None
+0000a0e0: 2c20 6e65 7374 6564 3d54 7275 6529 3a0d  , nested=True):.
+0000a0f0: 0a20 2020 2020 2020 2069 7465 6d64 6963  .        itemdic
+0000a100: 7420 3d20 7b7d 0d0a 2020 2020 2020 2020  t = {}..        
+0000a110: 6974 656d 666c 6167 7320 3d20 5b5d 0d0a  itemflags = []..
+0000a120: 2020 2020 2020 2020 6d65 7461 203d 204d          meta = M
+0000a130: 6574 6144 6174 6128 7365 6c66 2e5f 6d65  etaData(self._me
+0000a140: 7461 5f64 6963 7428 6e61 6d65 3d6e 616d  ta_dict(name=nam
+0000a150: 6529 290d 0a0d 0a20 2020 2020 2020 2023  e))....        #
+0000a160: 206e 6565 6420 746f 2062 6520 6162 6c65   need to be able
+0000a170: 2074 6f20 6164 6420 275f 6d65 7461 2720   to add '_meta' 
+0000a180: 6173 2061 6e20 6974 656d 2069 6e20 5374  as an item in St
+0000a190: 7275 6374 0d0a 2020 2020 2020 2020 7761  ruct..        wa
+0000a1a0: 726e 7374 6174 6520 3d20 5374 7275 6374  rnstate = Struct
+0000a1b0: 2e57 6172 6e4f 6e49 6e76 616c 6964 4e61  .WarnOnInvalidNa
+0000a1c0: 6d65 730d 0a20 2020 2020 2020 2053 7472  mes..        Str
+0000a1d0: 7563 742e 5761 726e 4f6e 496e 7661 6c69  uct.WarnOnInvali
+0000a1e0: 644e 616d 6573 203d 2054 7275 650d 0a0d  dNames = True...
+0000a1f0: 0a20 2020 2020 2020 2066 6f72 2069 7465  .        for ite
+0000a200: 6d6e 616d 652c 2069 7465 6d20 696e 2073  mname, item in s
+0000a210: 656c 662e 6974 656d 7328 293a 0d0a 2020  elf.items():..  
+0000a220: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
+0000a230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a240: 6966 2069 7465 6d2e 5f5f 6d6f 6475 6c65  if item.__module
+0000a250: 5f5f 203d 3d20 2268 6466 352e 696f 223a  __ == "hdf5.io":
+0000a260: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000a270: 2020 2020 2020 6974 656d 203d 2068 3569        item = h5i
+0000a280: 6f5f 746f 5f73 7472 7563 7428 6974 656d  o_to_struct(item
+0000a290: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
+0000a2a0: 7863 6570 743a 0d0a 2020 2020 2020 2020  xcept:..        
+0000a2b0: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
+0000a2c0: 2020 2020 2020 2020 2020 2020 2320 6172              # ar
+0000a2d0: 7261 7973 202f 2061 7272 6179 2073 7562  rays / array sub
+0000a2e0: 6c63 6c61 7373 6573 0d0a 2020 2020 2020  lclasses..      
+0000a2f0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+0000a300: 6e63 6528 6974 656d 2c20 6e70 2e6e 6461  nce(item, np.nda
+0000a310: 7272 6179 293a 0d0a 2020 2020 2020 2020  rray):..        
+0000a320: 2020 2020 2020 2020 6974 656d 666c 6167          itemflag
+0000a330: 203d 2053 4453 466c 6167 2e4f 7269 6769   = SDSFlag.Origi
+0000a340: 6e61 6c43 6f6e 7461 696e 6572 0d0a 0d0a  nalContainer....
+0000a350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a360: 2320 6765 7420 6172 7261 7973 2c20 666c  # get arrays, fl
+0000a370: 6167 732c 206d 6574 6120 6672 6f6d 2061  ags, meta from a
+0000a380: 7272 6179 2073 7562 636c 6173 730d 0a20  rray subclass.. 
+0000a390: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0000a3a0: 6620 6861 7361 7474 7228 6974 656d 2c20  f hasattr(item, 
+0000a3b0: 225f 6173 5f6d 6574 615f 6461 7461 2229  "_as_meta_data")
+0000a3c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000a3d0: 2020 2020 2020 2069 6469 6374 2c20 6966         idict, if
+0000a3e0: 6c61 6773 2c20 696d 6574 6120 3d20 6974  lags, imeta = it
+0000a3f0: 656d 2e5f 6173 5f6d 6574 615f 6461 7461  em._as_meta_data
+0000a400: 286e 616d 653d 6974 656d 6e61 6d65 290d  (name=itemname).
+0000a410: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a420: 2020 2020 2066 6f72 206b 2c20 7620 696e       for k, v in
+0000a430: 2069 6469 6374 2e69 7465 6d73 2829 3a0d   idict.items():.
+0000a440: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a450: 2020 2020 2020 2020 2069 7465 6d64 6963           itemdic
+0000a460: 745b 6b5d 203d 2076 0d0a 2020 2020 2020  t[k] = v..      
+0000a470: 2020 2020 2020 2020 2020 2020 2020 6974                it
+0000a480: 656d 666c 6167 7320 3d20 6974 656d 666c  emflags = itemfl
+0000a490: 6167 7320 2b20 6966 6c61 6773 0d0a 2020  ags + iflags..  
+0000a4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a4b0: 2020 2320 6c69 6b65 2074 6869 7320 6f72    # like this or
+0000a4c0: 2073 746f 7265 2061 7320 7365 7061 7261   store as separa
+0000a4d0: 7465 2069 7465 6d3f 0d0a 2020 2020 2020  te item?..      
+0000a4e0: 2020 2020 2020 2020 2020 2020 2020 6d65                me
+0000a4f0: 7461 5b22 6974 656d 5f6d 6574 6122 5d2e  ta["item_meta"].
+0000a500: 6170 7065 6e64 2869 6d65 7461 290d 0a0d  append(imeta)...
+0000a510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a520: 2023 2072 6567 756c 6172 2061 7272 6179   # regular array
+0000a530: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000a540: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+0000a550: 2020 2020 2020 2020 2020 2020 2023 206d               # m
+0000a560: 6967 6874 206e 6565 6420 746f 2063 6f70  ight need to cop
+0000a570: 7920 7374 7269 6465 6420 6461 7461 0d0a  y strided data..
+0000a580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a590: 2020 2020 6966 2069 7465 6d2e 6e64 696d      if item.ndim
+0000a5a0: 203d 3d20 313a 0d0a 2020 2020 2020 2020   == 1:..        
 0000a5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a5c0: 2020 2020 6966 2069 7465 6d2e 7374 7269      if item.stri
-0000a5d0: 6465 735b 305d 2021 3d20 6974 656d 2e69  des[0] != item.i
-0000a5e0: 7465 6d73 697a 653a 0d0a 2020 2020 2020  temsize:..      
+0000a5c0: 6966 2069 7465 6d2e 7374 7269 6465 735b  if item.strides[
+0000a5d0: 305d 2021 3d20 6974 656d 2e69 7465 6d73  0] != item.items
+0000a5e0: 697a 653a 0d0a 2020 2020 2020 2020 2020  ize:..          
 0000a5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a600: 2020 2020 2020 7761 726e 696e 6773 2e77        warnings.w
-0000a610: 6172 6e28 6622 6172 7261 7920 6e61 6d65  arn(f"array name
-0000a620: 6420 7b69 7465 6d6e 616d 657d 2068 6164  d {itemname} had
-0000a630: 2062 6164 2031 6420 7374 7269 6465 7322   bad 1d strides"
-0000a640: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0000a650: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000a660: 7465 6d20 3d20 6974 656d 2e63 6f70 7928  tem = item.copy(
-0000a670: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0000a680: 2020 2020 2020 2020 2069 7465 6d66 6c61           itemfla
-0000a690: 6720 2b3d 2053 4453 466c 6167 2e53 7461  g += SDSFlag.Sta
-0000a6a0: 636b 6162 6c65 0d0a 2020 2020 2020 2020  ckable..        
-0000a6b0: 2020 2020 2020 2020 2020 2020 6974 656d              item
-0000a6c0: 666c 6167 732e 6170 7065 6e64 2869 7465  flags.append(ite
-0000a6d0: 6d66 6c61 6729 0d0a 2020 2020 2020 2020  mflag)..        
-0000a6e0: 2020 2020 2020 2020 2020 2020 6974 656d              item
-0000a6f0: 6469 6374 5b69 7465 6d6e 616d 655d 203d  dict[itemname] =
-0000a700: 2069 7465 6d0d 0a0d 0a20 2020 2020 2020   item....       
-0000a710: 2020 2020 2023 206e 6573 7465 6420 636f       # nested co
-0000a720: 6e74 6169 6e65 7273 0d0a 2020 2020 2020  ntainers..      
-0000a730: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
-0000a740: 7461 6e63 6528 6974 656d 2c20 5374 7275  tance(item, Stru
-0000a750: 6374 293a 0d0a 2020 2020 2020 2020 2020  ct):..          
-0000a760: 2020 2020 2020 2320 6164 6420 6e65 7374        # add nest
-0000a770: 6564 2073 7472 7563 7420 746f 2069 7465  ed struct to ite
-0000a780: 6d64 6963 743f 0d0a 2020 2020 2020 2020  mdict?..        
-0000a790: 2020 2020 2020 2020 2320 686f 7720 646f          # how do
-0000a7a0: 6573 2069 7473 206d 6574 6164 6174 6120  es its metadata 
-0000a7b0: 6765 7420 6164 6465 643f 0d0a 2020 2020  get added?..    
-0000a7c0: 2020 2020 2020 2020 2020 2020 2320 686f              # ho
-0000a7d0: 7720 646f 2066 6c61 6773 2067 6574 2061  w do flags get a
-0000a7e0: 6464 6564 3f0d 0a20 2020 2020 2020 2020  dded?..         
-0000a7f0: 2020 2020 2020 2069 6469 6374 2c20 6966         idict, if
-0000a800: 6c61 6773 2c20 696d 6574 6120 3d20 6974  lags, imeta = it
-0000a810: 656d 2e5f 6173 5f6d 6574 615f 6461 7461  em._as_meta_data
-0000a820: 286e 616d 653d 6974 656d 6e61 6d65 2c20  (name=itemname, 
-0000a830: 6e65 7374 6564 3d6e 6573 7465 6429 0d0a  nested=nested)..
-0000a840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a850: 6964 6963 745b 225f 6d65 7461 225d 203d  idict["_meta"] =
-0000a860: 2069 6d65 7461 0d0a 2020 2020 2020 2020   imeta..        
-0000a870: 2020 2020 2020 2020 6964 6963 745b 225f          idict["_
-0000a880: 666c 6167 7322 5d20 3d20 6966 6c61 6773  flags"] = iflags
-0000a890: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a8a0: 2020 6974 656d 6469 6374 5b69 7465 6d6e    itemdict[itemn
-0000a8b0: 616d 655d 203d 2069 6469 6374 0d0a 0d0a  ame] = idict....
-0000a8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a8d0: 6974 656d 666c 6167 203d 2053 4453 466c  itemflag = SDSFl
-0000a8e0: 6167 2e4f 7269 6769 6e61 6c43 6f6e 7461  ag.OriginalConta
-0000a8f0: 696e 6572 202b 2053 4453 466c 6167 2e4e  iner + SDSFlag.N
-0000a900: 6573 7465 640d 0a20 2020 2020 2020 2020  ested..         
-0000a910: 2020 2020 2020 2069 7465 6d66 6c61 6773         itemflags
-0000a920: 2e61 7070 656e 6428 6974 656d 666c 6167  .append(itemflag
-0000a930: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0000a940: 2023 2073 6361 6c61 7273 0d0a 2020 2020   # scalars..    
-0000a950: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-0000a960: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000a970: 7465 6d20 3d20 6e70 2e61 7361 7272 6179  tem = np.asarray
-0000a980: 285b 6974 656d 5d29 0d0a 2020 2020 2020  ([item])..      
-0000a990: 2020 2020 2020 2020 2020 2320 6966 2073            # if s
-0000a9a0: 6361 6c61 7220 6372 6561 7465 6420 616e  calar created an
-0000a9b0: 206f 626a 6563 7420 6172 7261 792c 2066   object array, f
-0000a9c0: 6c69 7020 746f 2073 7472 696e 6720 616e  lip to string an
-0000a9d0: 6420 7761 726e 0d0a 2020 2020 2020 2020  d warn..        
-0000a9e0: 2020 2020 2020 2020 6966 2069 7465 6d2e          if item.
-0000a9f0: 6474 7970 652e 6368 6172 203d 3d20 224f  dtype.char == "O
-0000aa00: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
-0000aa10: 2020 2020 2020 2020 7761 726e 696e 6773          warnings
-0000aa20: 2e77 6172 6e28 6622 4974 656d 207b 6974  .warn(f"Item {it
-0000aa30: 656d 5b30 5d7d 2077 6173 206e 6f74 2061  em[0]} was not a
-0000aa40: 2073 7570 706f 7274 6564 2073 6361 6c61   supported scala
-0000aa50: 7220 7479 7065 2e20 5361 7669 6e67 2061  r type. Saving a
-0000aa60: 7320 6279 7465 7374 7269 6e67 2e22 290d  s bytestring.").
-0000aa70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000aa80: 2020 2020 2069 7465 6d20 3d20 6974 656d       item = item
-0000aa90: 2e61 7374 7970 6528 2253 2229 0d0a 2020  .astype("S")..  
-0000aaa0: 2020 2020 2020 2020 2020 2020 2020 6974                it
-0000aab0: 656d 6469 6374 5b69 7465 6d6e 616d 655d  emdict[itemname]
-0000aac0: 203d 2069 7465 6d0d 0a20 2020 2020 2020   = item..       
-0000aad0: 2020 2020 2020 2020 2069 7465 6d66 6c61           itemfla
-0000aae0: 6720 3d20 5344 5346 6c61 672e 5363 616c  g = SDSFlag.Scal
-0000aaf0: 6172 202b 2053 4453 466c 6167 2e4f 7269  ar + SDSFlag.Ori
-0000ab00: 6769 6e61 6c43 6f6e 7461 696e 6572 0d0a  ginalContainer..
-0000ab10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab20: 6974 656d 666c 6167 732e 6170 7065 6e64  itemflags.append
-0000ab30: 2869 7465 6d66 6c61 6729 0d0a 0d0a 2020  (itemflag)....  
-0000ab40: 2020 2020 2020 2320 464f 4f54 4552 530d        # FOOTERS.
-0000ab50: 0a20 2020 2020 2020 2023 206a 7573 7420  .        # just 
-0000ab60: 7265 2d73 6f72 7420 7573 696e 6720 7468  re-sort using th
-0000ab70: 6520 636f 6c75 6d6e 2073 6f72 7420 6c69  e column sort li
-0000ab80: 7374 2066 726f 6d20 6f74 6865 7220 6d65  st from other me
-0000ab90: 7461 2064 6174 610d 0a20 2020 2020 2020  ta data..       
-0000aba0: 2023 2320 6765 7420 736f 7274 6564 2072   ## get sorted r
-0000abb0: 6f77 2069 6e64 6578 2028 4461 7461 7365  ow index (Datase
-0000abc0: 7420 6f6e 6c79 290d 0a20 2020 2020 2020  t only)..       
-0000abd0: 2023 2069 6620 6861 7361 7474 7228 2073   # if hasattr( s
-0000abe0: 656c 662c 2027 6765 745f 726f 775f 736f  elf, 'get_row_so
-0000abf0: 7274 5f69 6e66 6f27 2029 3a0d 0a20 2020  rt_info' ):..   
-0000ac00: 2020 2020 2023 2020 2020 736f 7274 5f69       #    sort_i
-0000ac10: 6420 3d20 7365 6c66 2e67 6574 5f72 6f77  d = self.get_row
-0000ac20: 5f73 6f72 745f 696e 666f 2829 0d0a 2020  _sort_info()..  
-0000ac30: 2020 2020 2020 2320 2020 2073 6f72 745f        #    sort_
-0000ac40: 6964 7820 3d20 5479 7065 5265 6769 7374  idx = TypeRegist
-0000ac50: 6572 2e53 6f72 7443 6163 6865 2e67 6574  er.SortCache.get
-0000ac60: 5f73 6f72 7465 645f 726f 775f 696e 6465  _sorted_row_inde
-0000ac70: 7828 2a73 6f72 745f 6964 290d 0a20 2020  x(*sort_id)..   
-0000ac80: 2020 2020 2023 2020 2020 6966 2073 6f72       #    if sor
-0000ac90: 745f 6964 7820 6973 206e 6f74 204e 6f6e  t_idx is not Non
-0000aca0: 653a 0d0a 2020 2020 2020 2020 2320 2020  e:..        #   
-0000acb0: 2020 2020 2069 7465 6d73 2e61 7070 656e       items.appen
-0000acc0: 6428 736f 7274 5f69 6478 290d 0a0d 0a20  d(sort_idx).... 
-0000acd0: 2020 2020 2020 2023 2053 4f52 540d 0a20         # SORT.. 
-0000ace0: 2020 2020 2020 2023 206e 6577 2066 6f6f         # new foo
-0000acf0: 7465 7273 202d 2063 616e 6e6f 7420 6265  ters - cannot be
-0000ad00: 2073 6176 6564 2074 6869 7320 7761 790d   saved this way.
-0000ad10: 0a20 2020 2020 2020 2023 2320 6765 7420  .        ## get 
-0000ad20: 666f 6f74 6572 7320 2863 7572 7265 6e74  footers (current
-0000ad30: 6c79 206f 6e6c 7920 696d 706c 656d 656e  ly only implemen
-0000ad40: 7465 6420 666f 7220 4163 6375 6d32 2072  ted for Accum2 r
-0000ad50: 6573 756c 7429 0d0a 2020 2020 2020 2020  esult)..        
-0000ad60: 2320 6966 2068 6173 6174 7472 2820 7365  # if hasattr( se
-0000ad70: 6c66 2c20 275f 666f 6f74 6572 7327 293a  lf, '_footers'):
-0000ad80: 0d0a 2020 2020 2020 2020 2320 2020 2066  ..        #    f
-0000ad90: 6f72 206b 2c20 7620 696e 2073 656c 662e  or k, v in self.
-0000ada0: 5f66 6f6f 7465 7273 2e69 7465 6d73 2829  _footers.items()
-0000adb0: 3a0d 0a20 2020 2020 2020 2023 2020 2020  :..        #    
-0000adc0: 2020 2020 6d65 7461 5b27 666f 6f74 6572      meta['footer
-0000add0: 7327 5d2e 6170 7065 6e64 286b 290d 0a20  s'].append(k).. 
-0000ade0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000adf0: 6974 656d 732e 6170 7065 6e64 2876 290d  items.append(v).
-0000ae00: 0a0d 0a20 2020 2020 2020 2023 2066 6c69  ...        # fli
-0000ae10: 7020 7761 726e 696e 6720 6d6f 6465 2062  p warning mode b
-0000ae20: 6163 6b20 666f 7220 636f 6c75 6d6e 206e  ack for column n
-0000ae30: 616d 6573 0d0a 2020 2020 2020 2020 5374  ames..        St
-0000ae40: 7275 6374 2e57 6172 6e4f 6e49 6e76 616c  ruct.WarnOnInval
-0000ae50: 6964 4e61 6d65 7320 3d20 7761 726e 7374  idNames = warnst
-0000ae60: 6174 650d 0a0d 0a20 2020 2020 2020 2072  ate....        r
-0000ae70: 6574 7572 6e20 6974 656d 6469 6374 2c20  eturn itemdict, 
-0000ae80: 6974 656d 666c 6167 732c 206d 6574 612e  itemflags, meta.
-0000ae90: 7374 7269 6e67 0d0a 0d0a 2020 2020 2320  string....    # 
+0000a600: 2020 7761 726e 696e 6773 2e77 6172 6e28    warnings.warn(
+0000a610: 6622 6172 7261 7920 6e61 6d65 6420 7b69  f"array named {i
+0000a620: 7465 6d6e 616d 657d 2068 6164 2062 6164  temname} had bad
+0000a630: 2031 6420 7374 7269 6465 7322 290d 0a20   1d strides").. 
+0000a640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a650: 2020 2020 2020 2020 2020 2069 7465 6d20             item 
+0000a660: 3d20 6974 656d 2e63 6f70 7928 290d 0a0d  = item.copy()...
+0000a670: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a680: 2020 2020 2069 7465 6d66 6c61 6720 2b3d       itemflag +=
+0000a690: 2053 4453 466c 6167 2e53 7461 636b 6162   SDSFlag.Stackab
+0000a6a0: 6c65 0d0a 2020 2020 2020 2020 2020 2020  le..            
+0000a6b0: 2020 2020 2020 2020 6974 656d 666c 6167          itemflag
+0000a6c0: 732e 6170 7065 6e64 2869 7465 6d66 6c61  s.append(itemfla
+0000a6d0: 6729 0d0a 2020 2020 2020 2020 2020 2020  g)..            
+0000a6e0: 2020 2020 2020 2020 6974 656d 6469 6374          itemdict
+0000a6f0: 5b69 7465 6d6e 616d 655d 203d 2069 7465  [itemname] = ite
+0000a700: 6d0d 0a0d 0a20 2020 2020 2020 2020 2020  m....           
+0000a710: 2023 206e 6573 7465 6420 636f 6e74 6169   # nested contai
+0000a720: 6e65 7273 0d0a 2020 2020 2020 2020 2020  ners..          
+0000a730: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
+0000a740: 6528 6974 656d 2c20 5374 7275 6374 293a  e(item, Struct):
+0000a750: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000a760: 2020 2320 6164 6420 6e65 7374 6564 2073    # add nested s
+0000a770: 7472 7563 7420 746f 2069 7465 6d64 6963  truct to itemdic
+0000a780: 743f 0d0a 2020 2020 2020 2020 2020 2020  t?..            
+0000a790: 2020 2020 2320 686f 7720 646f 6573 2069      # how does i
+0000a7a0: 7473 206d 6574 6164 6174 6120 6765 7420  ts metadata get 
+0000a7b0: 6164 6465 643f 0d0a 2020 2020 2020 2020  added?..        
+0000a7c0: 2020 2020 2020 2020 2320 686f 7720 646f          # how do
+0000a7d0: 2066 6c61 6773 2067 6574 2061 6464 6564   flags get added
+0000a7e0: 3f0d 0a20 2020 2020 2020 2020 2020 2020  ?..             
+0000a7f0: 2020 2069 6469 6374 2c20 6966 6c61 6773     idict, iflags
+0000a800: 2c20 696d 6574 6120 3d20 6974 656d 2e5f  , imeta = item._
+0000a810: 6173 5f6d 6574 615f 6461 7461 286e 616d  as_meta_data(nam
+0000a820: 653d 6974 656d 6e61 6d65 2c20 6e65 7374  e=itemname, nest
+0000a830: 6564 3d6e 6573 7465 6429 0d0a 2020 2020  ed=nested)..    
+0000a840: 2020 2020 2020 2020 2020 2020 6964 6963              idic
+0000a850: 745b 225f 6d65 7461 225d 203d 2069 6d65  t["_meta"] = ime
+0000a860: 7461 0d0a 2020 2020 2020 2020 2020 2020  ta..            
+0000a870: 2020 2020 6964 6963 745b 225f 666c 6167      idict["_flag
+0000a880: 7322 5d20 3d20 6966 6c61 6773 0d0a 2020  s"] = iflags..  
+0000a890: 2020 2020 2020 2020 2020 2020 2020 6974                it
+0000a8a0: 656d 6469 6374 5b69 7465 6d6e 616d 655d  emdict[itemname]
+0000a8b0: 203d 2069 6469 6374 0d0a 0d0a 2020 2020   = idict....    
+0000a8c0: 2020 2020 2020 2020 2020 2020 6974 656d              item
+0000a8d0: 666c 6167 203d 2053 4453 466c 6167 2e4f  flag = SDSFlag.O
+0000a8e0: 7269 6769 6e61 6c43 6f6e 7461 696e 6572  riginalContainer
+0000a8f0: 202b 2053 4453 466c 6167 2e4e 6573 7465   + SDSFlag.Neste
+0000a900: 640d 0a20 2020 2020 2020 2020 2020 2020  d..             
+0000a910: 2020 2069 7465 6d66 6c61 6773 2e61 7070     itemflags.app
+0000a920: 656e 6428 6974 656d 666c 6167 290d 0a0d  end(itemflag)...
+0000a930: 0a20 2020 2020 2020 2020 2020 2023 2073  .            # s
+0000a940: 6361 6c61 7273 0d0a 2020 2020 2020 2020  calars..        
+0000a950: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+0000a960: 2020 2020 2020 2020 2020 2069 7465 6d20             item 
+0000a970: 3d20 6e70 2e61 7361 7272 6179 285b 6974  = np.asarray([it
+0000a980: 656d 5d29 0d0a 2020 2020 2020 2020 2020  em])..          
+0000a990: 2020 2020 2020 2320 6966 2073 6361 6c61        # if scala
+0000a9a0: 7220 6372 6561 7465 6420 616e 206f 626a  r created an obj
+0000a9b0: 6563 7420 6172 7261 792c 2066 6c69 7020  ect array, flip 
+0000a9c0: 746f 2073 7472 696e 6720 616e 6420 7761  to string and wa
+0000a9d0: 726e 0d0a 2020 2020 2020 2020 2020 2020  rn..            
+0000a9e0: 2020 2020 6966 2069 7465 6d2e 6474 7970      if item.dtyp
+0000a9f0: 652e 6368 6172 203d 3d20 224f 223a 0d0a  e.char == "O":..
+0000aa00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aa10: 2020 2020 7761 726e 696e 6773 2e77 6172      warnings.war
+0000aa20: 6e28 6622 4974 656d 207b 6974 656d 5b30  n(f"Item {item[0
+0000aa30: 5d7d 2077 6173 206e 6f74 2061 2073 7570  ]} was not a sup
+0000aa40: 706f 7274 6564 2073 6361 6c61 7220 7479  ported scalar ty
+0000aa50: 7065 2e20 5361 7669 6e67 2061 7320 6279  pe. Saving as by
+0000aa60: 7465 7374 7269 6e67 2e22 290d 0a20 2020  testring.")..   
+0000aa70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aa80: 2069 7465 6d20 3d20 6974 656d 2e61 7374   item = item.ast
+0000aa90: 7970 6528 2253 2229 0d0a 2020 2020 2020  ype("S")..      
+0000aaa0: 2020 2020 2020 2020 2020 6974 656d 6469            itemdi
+0000aab0: 6374 5b69 7465 6d6e 616d 655d 203d 2069  ct[itemname] = i
+0000aac0: 7465 6d0d 0a20 2020 2020 2020 2020 2020  tem..           
+0000aad0: 2020 2020 2069 7465 6d66 6c61 6720 3d20       itemflag = 
+0000aae0: 5344 5346 6c61 672e 5363 616c 6172 202b  SDSFlag.Scalar +
+0000aaf0: 2053 4453 466c 6167 2e4f 7269 6769 6e61   SDSFlag.Origina
+0000ab00: 6c43 6f6e 7461 696e 6572 0d0a 2020 2020  lContainer..    
+0000ab10: 2020 2020 2020 2020 2020 2020 6974 656d              item
+0000ab20: 666c 6167 732e 6170 7065 6e64 2869 7465  flags.append(ite
+0000ab30: 6d66 6c61 6729 0d0a 0d0a 2020 2020 2020  mflag)....      
+0000ab40: 2020 2320 464f 4f54 4552 530d 0a20 2020    # FOOTERS..   
+0000ab50: 2020 2020 2023 206a 7573 7420 7265 2d73       # just re-s
+0000ab60: 6f72 7420 7573 696e 6720 7468 6520 636f  ort using the co
+0000ab70: 6c75 6d6e 2073 6f72 7420 6c69 7374 2066  lumn sort list f
+0000ab80: 726f 6d20 6f74 6865 7220 6d65 7461 2064  rom other meta d
+0000ab90: 6174 610d 0a20 2020 2020 2020 2023 2320  ata..        ## 
+0000aba0: 6765 7420 736f 7274 6564 2072 6f77 2069  get sorted row i
+0000abb0: 6e64 6578 2028 4461 7461 7365 7420 6f6e  ndex (Dataset on
+0000abc0: 6c79 290d 0a20 2020 2020 2020 2023 2069  ly)..        # i
+0000abd0: 6620 6861 7361 7474 7228 2073 656c 662c  f hasattr( self,
+0000abe0: 2027 6765 745f 726f 775f 736f 7274 5f69   'get_row_sort_i
+0000abf0: 6e66 6f27 2029 3a0d 0a20 2020 2020 2020  nfo' ):..       
+0000ac00: 2023 2020 2020 736f 7274 5f69 6420 3d20   #    sort_id = 
+0000ac10: 7365 6c66 2e67 6574 5f72 6f77 5f73 6f72  self.get_row_sor
+0000ac20: 745f 696e 666f 2829 0d0a 2020 2020 2020  t_info()..      
+0000ac30: 2020 2320 2020 2073 6f72 745f 6964 7820    #    sort_idx 
+0000ac40: 3d20 5479 7065 5265 6769 7374 6572 2e53  = TypeRegister.S
+0000ac50: 6f72 7443 6163 6865 2e67 6574 5f73 6f72  ortCache.get_sor
+0000ac60: 7465 645f 726f 775f 696e 6465 7828 2a73  ted_row_index(*s
+0000ac70: 6f72 745f 6964 290d 0a20 2020 2020 2020  ort_id)..       
+0000ac80: 2023 2020 2020 6966 2073 6f72 745f 6964   #    if sort_id
+0000ac90: 7820 6973 206e 6f74 204e 6f6e 653a 0d0a  x is not None:..
+0000aca0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000acb0: 2069 7465 6d73 2e61 7070 656e 6428 736f   items.append(so
+0000acc0: 7274 5f69 6478 290d 0a0d 0a20 2020 2020  rt_idx)....     
+0000acd0: 2020 2023 2053 4f52 540d 0a20 2020 2020     # SORT..     
+0000ace0: 2020 2023 206e 6577 2066 6f6f 7465 7273     # new footers
+0000acf0: 202d 2063 616e 6e6f 7420 6265 2073 6176   - cannot be sav
+0000ad00: 6564 2074 6869 7320 7761 790d 0a20 2020  ed this way..   
+0000ad10: 2020 2020 2023 2320 6765 7420 666f 6f74       ## get foot
+0000ad20: 6572 7320 2863 7572 7265 6e74 6c79 206f  ers (currently o
+0000ad30: 6e6c 7920 696d 706c 656d 656e 7465 6420  nly implemented 
+0000ad40: 666f 7220 4163 6375 6d32 2072 6573 756c  for Accum2 resul
+0000ad50: 7429 0d0a 2020 2020 2020 2020 2320 6966  t)..        # if
+0000ad60: 2068 6173 6174 7472 2820 7365 6c66 2c20   hasattr( self, 
+0000ad70: 275f 666f 6f74 6572 7327 293a 0d0a 2020  '_footers'):..  
+0000ad80: 2020 2020 2020 2320 2020 2066 6f72 206b        #    for k
+0000ad90: 2c20 7620 696e 2073 656c 662e 5f66 6f6f  , v in self._foo
+0000ada0: 7465 7273 2e69 7465 6d73 2829 3a0d 0a20  ters.items():.. 
+0000adb0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0000adc0: 6d65 7461 5b27 666f 6f74 6572 7327 5d2e  meta['footers'].
+0000add0: 6170 7065 6e64 286b 290d 0a20 2020 2020  append(k)..     
+0000ade0: 2020 2023 2020 2020 2020 2020 6974 656d     #        item
+0000adf0: 732e 6170 7065 6e64 2876 290d 0a0d 0a20  s.append(v).... 
+0000ae00: 2020 2020 2020 2023 2066 6c69 7020 7761         # flip wa
+0000ae10: 726e 696e 6720 6d6f 6465 2062 6163 6b20  rning mode back 
+0000ae20: 666f 7220 636f 6c75 6d6e 206e 616d 6573  for column names
+0000ae30: 0d0a 2020 2020 2020 2020 5374 7275 6374  ..        Struct
+0000ae40: 2e57 6172 6e4f 6e49 6e76 616c 6964 4e61  .WarnOnInvalidNa
+0000ae50: 6d65 7320 3d20 7761 726e 7374 6174 650d  mes = warnstate.
+0000ae60: 0a0d 0a20 2020 2020 2020 2072 6574 7572  ...        retur
+0000ae70: 6e20 6974 656d 6469 6374 2c20 6974 656d  n itemdict, item
+0000ae80: 666c 6167 732c 206d 6574 612e 7374 7269  flags, meta.stri
+0000ae90: 6e67 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  ng....    # ----
 0000aea0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000aeb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000aec0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000aed0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000aee0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000aef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000af00: 2d2d 0d0a 2020 2020 6465 6620 5f61 7574  --..    def _aut
-0000af10: 6f63 6f6d 706c 6574 6528 7365 6c66 2920  ocomplete(self) 
-0000af20: 2d3e 2073 7472 3a0d 0a20 2020 2020 2020  -> str:..       
-0000af30: 2072 6574 7572 6e20 6622 5374 7275 6374   return f"Struct
-0000af40: 7b73 656c 662e 7368 6170 657d 220d 0a0d  {self.shape}"...
-0000af50: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+0000aef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+0000af00: 2020 2020 6465 6620 5f61 7574 6f63 6f6d      def _autocom
+0000af10: 706c 6574 6528 7365 6c66 2920 2d3e 2073  plete(self) -> s
+0000af20: 7472 3a0d 0a20 2020 2020 2020 2072 6574  tr:..        ret
+0000af30: 7572 6e20 6622 5374 7275 6374 7b73 656c  urn f"Struct{sel
+0000af40: 662e 7368 6170 657d 220d 0a0d 0a20 2020  f.shape}"....   
+0000af50: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
 0000af60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000af70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000af80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000af90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000afa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000afb0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
-0000afc0: 6566 205f 6275 696c 645f 7364 735f 6d65  ef _build_sds_me
-0000afd0: 7461 5f64 6174 6128 7365 6c66 2c20 6e61  ta_data(self, na
-0000afe0: 6d65 3d4e 6f6e 652c 206e 6573 7469 6e67  me=None, nesting
-0000aff0: 3d54 7275 652c 202a 2a6b 7761 7267 7329  =True, **kwargs)
-0000b000: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-0000b010: 2020 2020 2020 2020 4669 6e61 6c20 5344          Final SD
-0000b020: 5320 6669 6c65 2077 696c 6c20 6265 206c  S file will be l
-0000b030: 6169 6420 6f75 7420 6173 2066 6f6c 6c6f  aid out as follo
-0000b040: 7773 3a0d 0a0d 0a20 2020 2020 2020 202d  ws:....        -
-0000b050: 2068 6561 6465 720d 0a20 2020 2020 2020   header..       
-0000b060: 202d 206d 6574 6120 6461 7461 2073 7472   - meta data str
-0000b070: 696e 6720 286a 736f 6e2c 2069 6e63 6c75  ing (json, inclu
-0000b080: 6465 7320 7363 616c 6172 7329 0d0a 2020  des scalars)..  
-0000b090: 2020 2020 2020 2d20 6172 7261 7973 0d0a        - arrays..
-0000b0a0: 2020 2020 2020 2020 2d20 7370 6563 6961          - specia
-0000b0b0: 6c20 6172 7261 7973 0d0a 2020 2020 2020  l arrays..      
-0000b0c0: 2020 2d20 6d65 7461 2074 7570 6c65 7320    - meta tuples 
-0000b0d0: 5b74 7570 6c65 2869 7465 6d20 6e61 6d65  [tuple(item name
-0000b0e0: 2c20 5344 5346 6c61 6773 2920 666f 7220  , SDSFlags) for 
-0000b0f0: 616c 6c20 6974 656d 735d 0d0a 0d0a 2020  all items]....  
-0000b100: 2020 2020 2020 4e65 7374 6564 2064 6174        Nested dat
-0000b110: 6120 7374 7275 6374 7572 6573 2077 696c  a structures wil
-0000b120: 6c20 6765 6e65 7261 7465 2074 6865 6972  l generate their
-0000b130: 206f 776e 2053 4453 2066 696c 6573 2e0d   own SDS files..
-0000b140: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
-0000b150: 2020 2020 2020 2020 6966 206e 616d 6520          if name 
-0000b160: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
-0000b170: 2020 2020 2020 6e61 6d65 203d 206b 7761        name = kwa
-0000b180: 7267 732e 6765 7428 226e 616d 6522 2c20  rgs.get("name", 
-0000b190: 2261 6e6f 6e5f 7374 7275 6374 3022 290d  "anon_struct0").
-0000b1a0: 0a0d 0a20 2020 2020 2020 2023 2073 7472  ...        # str
-0000b1b0: 7563 7473 2064 6f6e 2774 2068 6176 6520  ucts don't have 
-0000b1c0: 6e72 6f77 730d 0a20 2020 2020 2020 206d  nrows..        m
-0000b1d0: 6574 6120 3d20 4d65 7461 4461 7461 280d  eta = MetaData(.
-0000b1e0: 0a20 2020 2020 2020 2020 2020 207b 0d0a  .            {..
-0000b1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b200: 226e 616d 6522 3a20 6e61 6d65 2c0d 0a20  "name": name,.. 
-0000b210: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0000b220: 636c 6173 736e 616d 6522 3a20 7365 6c66  classname": self
-0000b230: 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e 616d  .__class__.__nam
-0000b240: 655f 5f2c 0d0a 2020 2020 2020 2020 2020  e__,..          
-0000b250: 2020 2020 2020 2261 7574 686f 7222 3a20        "author": 
-0000b260: 2270 7974 686f 6e22 2c0d 0a20 2020 2020  "python",..     
-0000b270: 2020 2020 2020 2020 2020 2022 7665 7273             "vers
-0000b280: 696f 6e22 3a20 312c 0d0a 2020 2020 2020  ion": 1,..      
-0000b290: 2020 2020 2020 2020 2020 2269 7465 6d5f            "item_
-0000b2a0: 6d65 7461 223a 205b 5d2c 2020 2320 6c69  meta": [],  # li
-0000b2b0: 7374 206f 6620 7370 6563 6961 6c20 6661  st of special fa
-0000b2c0: 7374 6172 7261 7920 6d65 7461 6461 7461  starray metadata
-0000b2d0: 2073 7472 696e 6773 0d0a 2020 2020 2020   strings..      
-0000b2e0: 2020 2020 2020 2020 2020 226c 6162 656c            "label
-0000b2f0: 7322 3a20 7365 6c66 2e6c 6162 656c 5f67  s": self.label_g
-0000b300: 6574 5f6e 616d 6573 2829 2c0d 0a20 2020  et_names(),..   
-0000b310: 2020 2020 2020 2020 2020 2020 2022 5f63               "_c
-0000b320: 6f6c 5f73 6f72 746c 6973 7422 3a20 7365  ol_sortlist": se
-0000b330: 6c66 2e5f 636f 6c5f 736f 7274 6c69 7374  lf._col_sortlist
-0000b340: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0000b350: 2020 2022 666f 6f74 6572 7322 3a20 5b5d     "footers": []
-0000b360: 2c0d 0a20 2020 2020 2020 2020 2020 207d  ,..            }
-0000b370: 0d0a 2020 2020 2020 2020 290d 0a0d 0a20  ..        ).... 
-0000b380: 2020 2020 2020 2069 7465 6d73 203d 205b         items = [
-0000b390: 5d0d 0a20 2020 2020 2020 2073 7065 635f  ]..        spec_
-0000b3a0: 6974 656d 7320 3d20 5b5d 0d0a 0d0a 2020  items = []....  
-0000b3b0: 2020 2020 2020 2320 666f 7220 6d61 746c        # for matl
-0000b3c0: 6162 206d 6574 6120 2f20 636f 6e73 6f6c  ab meta / consol
-0000b3d0: 6520 7375 6d6d 6172 790d 0a20 2020 2020  e summary..     
-0000b3e0: 2020 206d 6574 615f 7475 7073 203d 205b     meta_tups = [
-0000b3f0: 5d0d 0a20 2020 2020 2020 2073 7065 635f  ]..        spec_
-0000b400: 7475 7073 203d 205b 5d0d 0a0d 0a20 2020  tups = []....   
-0000b410: 2020 2020 2023 2066 6f72 2074 6573 7469       # for testi
-0000b420: 6e67 2061 6c6c 2069 7465 6d73 2077 6974  ng all items wit
-0000b430: 6820 6d65 7461 2074 7570 6c65 0d0a 2020  h meta tuple..  
-0000b440: 2020 2020 2020 616c 6c5f 7475 7073 203d        all_tups =
-0000b450: 205b 5d0d 0a0d 0a20 2020 2020 2020 2069   []....        i
-0000b460: 6620 6e65 7374 696e 673a 0d0a 2020 2020  f nesting:..    
-0000b470: 2020 2020 2020 2020 666f 7220 6b2c 2069          for k, i
-0000b480: 7465 6d20 696e 2073 656c 662e 6974 656d  tem in self.item
-0000b490: 7328 293a 0d0a 2020 2020 2020 2020 2020  s():..          
-0000b4a0: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
-0000b4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b4c0: 6966 2069 7465 6d2e 5f5f 6d6f 6475 6c65  if item.__module
-0000b4d0: 5f5f 203d 3d20 2268 6466 352e 696f 223a  __ == "hdf5.io":
-0000b4e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b4f0: 2020 2020 2020 2020 2020 6974 656d 203d            item =
-0000b500: 2068 3569 6f5f 746f 5f73 7472 7563 7428   h5io_to_struct(
-0000b510: 6974 656d 290d 0a20 2020 2020 2020 2020  item)..         
-0000b520: 2020 2020 2020 2065 7863 6570 743a 0d0a         except:..
+0000afb0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 205f  -----..    def _
+0000afc0: 6275 696c 645f 7364 735f 6d65 7461 5f64  build_sds_meta_d
+0000afd0: 6174 6128 7365 6c66 2c20 6e61 6d65 3d4e  ata(self, name=N
+0000afe0: 6f6e 652c 206e 6573 7469 6e67 3d54 7275  one, nesting=Tru
+0000aff0: 652c 202a 2a6b 7761 7267 7329 3a0d 0a20  e, **kwargs):.. 
+0000b000: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+0000b010: 2020 2020 4669 6e61 6c20 5344 5320 6669      Final SDS fi
+0000b020: 6c65 2077 696c 6c20 6265 206c 6169 6420  le will be laid 
+0000b030: 6f75 7420 6173 2066 6f6c 6c6f 7773 3a0d  out as follows:.
+0000b040: 0a0d 0a20 2020 2020 2020 202d 2068 6561  ...        - hea
+0000b050: 6465 720d 0a20 2020 2020 2020 202d 206d  der..        - m
+0000b060: 6574 6120 6461 7461 2073 7472 696e 6720  eta data string 
+0000b070: 286a 736f 6e2c 2069 6e63 6c75 6465 7320  (json, includes 
+0000b080: 7363 616c 6172 7329 0d0a 2020 2020 2020  scalars)..      
+0000b090: 2020 2d20 6172 7261 7973 0d0a 2020 2020    - arrays..    
+0000b0a0: 2020 2020 2d20 7370 6563 6961 6c20 6172      - special ar
+0000b0b0: 7261 7973 0d0a 2020 2020 2020 2020 2d20  rays..        - 
+0000b0c0: 6d65 7461 2074 7570 6c65 7320 5b74 7570  meta tuples [tup
+0000b0d0: 6c65 2869 7465 6d20 6e61 6d65 2c20 5344  le(item name, SD
+0000b0e0: 5346 6c61 6773 2920 666f 7220 616c 6c20  SFlags) for all 
+0000b0f0: 6974 656d 735d 0d0a 0d0a 2020 2020 2020  items]....      
+0000b100: 2020 4e65 7374 6564 2064 6174 6120 7374    Nested data st
+0000b110: 7275 6374 7572 6573 2077 696c 6c20 6765  ructures will ge
+0000b120: 6e65 7261 7465 2074 6865 6972 206f 776e  nerate their own
+0000b130: 2053 4453 2066 696c 6573 2e0d 0a20 2020   SDS files...   
+0000b140: 2020 2020 2022 2222 0d0a 0d0a 2020 2020       """....    
+0000b150: 2020 2020 6966 206e 616d 6520 6973 204e      if name is N
+0000b160: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+0000b170: 2020 6e61 6d65 203d 206b 7761 7267 732e    name = kwargs.
+0000b180: 6765 7428 226e 616d 6522 2c20 2261 6e6f  get("name", "ano
+0000b190: 6e5f 7374 7275 6374 3022 290d 0a0d 0a20  n_struct0").... 
+0000b1a0: 2020 2020 2020 2023 2073 7472 7563 7473         # structs
+0000b1b0: 2064 6f6e 2774 2068 6176 6520 6e72 6f77   don't have nrow
+0000b1c0: 730d 0a20 2020 2020 2020 206d 6574 6120  s..        meta 
+0000b1d0: 3d20 4d65 7461 4461 7461 280d 0a20 2020  = MetaData(..   
+0000b1e0: 2020 2020 2020 2020 207b 0d0a 2020 2020           {..    
+0000b1f0: 2020 2020 2020 2020 2020 2020 226e 616d              "nam
+0000b200: 6522 3a20 6e61 6d65 2c0d 0a20 2020 2020  e": name,..     
+0000b210: 2020 2020 2020 2020 2020 2022 636c 6173             "clas
+0000b220: 736e 616d 6522 3a20 7365 6c66 2e5f 5f63  sname": self.__c
+0000b230: 6c61 7373 5f5f 2e5f 5f6e 616d 655f 5f2c  lass__.__name__,
+0000b240: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000b250: 2020 2261 7574 686f 7222 3a20 2270 7974    "author": "pyt
+0000b260: 686f 6e22 2c0d 0a20 2020 2020 2020 2020  hon",..         
+0000b270: 2020 2020 2020 2022 7665 7273 696f 6e22         "version"
+0000b280: 3a20 312c 0d0a 2020 2020 2020 2020 2020  : 1,..          
+0000b290: 2020 2020 2020 2269 7465 6d5f 6d65 7461        "item_meta
+0000b2a0: 223a 205b 5d2c 2020 2320 6c69 7374 206f  ": [],  # list o
+0000b2b0: 6620 7370 6563 6961 6c20 6661 7374 6172  f special fastar
+0000b2c0: 7261 7920 6d65 7461 6461 7461 2073 7472  ray metadata str
+0000b2d0: 696e 6773 0d0a 2020 2020 2020 2020 2020  ings..          
+0000b2e0: 2020 2020 2020 226c 6162 656c 7322 3a20        "labels": 
+0000b2f0: 7365 6c66 2e6c 6162 656c 5f67 6574 5f6e  self.label_get_n
+0000b300: 616d 6573 2829 2c0d 0a20 2020 2020 2020  ames(),..       
+0000b310: 2020 2020 2020 2020 2022 5f63 6f6c 5f73           "_col_s
+0000b320: 6f72 746c 6973 7422 3a20 7365 6c66 2e5f  ortlist": self._
+0000b330: 636f 6c5f 736f 7274 6c69 7374 2c0d 0a20  col_sortlist,.. 
+0000b340: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000b350: 666f 6f74 6572 7322 3a20 5b5d 2c0d 0a20  footers": [],.. 
+0000b360: 2020 2020 2020 2020 2020 207d 0d0a 2020             }..  
+0000b370: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
+0000b380: 2020 2069 7465 6d73 203d 205b 5d0d 0a20     items = [].. 
+0000b390: 2020 2020 2020 2073 7065 635f 6974 656d         spec_item
+0000b3a0: 7320 3d20 5b5d 0d0a 0d0a 2020 2020 2020  s = []....      
+0000b3b0: 2020 2320 666f 7220 6d61 746c 6162 206d    # for matlab m
+0000b3c0: 6574 6120 2f20 636f 6e73 6f6c 6520 7375  eta / console su
+0000b3d0: 6d6d 6172 790d 0a20 2020 2020 2020 206d  mmary..        m
+0000b3e0: 6574 615f 7475 7073 203d 205b 5d0d 0a20  eta_tups = [].. 
+0000b3f0: 2020 2020 2020 2073 7065 635f 7475 7073         spec_tups
+0000b400: 203d 205b 5d0d 0a0d 0a20 2020 2020 2020   = []....       
+0000b410: 2023 2066 6f72 2074 6573 7469 6e67 2061   # for testing a
+0000b420: 6c6c 2069 7465 6d73 2077 6974 6820 6d65  ll items with me
+0000b430: 7461 2074 7570 6c65 0d0a 2020 2020 2020  ta tuple..      
+0000b440: 2020 616c 6c5f 7475 7073 203d 205b 5d0d    all_tups = [].
+0000b450: 0a0d 0a20 2020 2020 2020 2069 6620 6e65  ...        if ne
+0000b460: 7374 696e 673a 0d0a 2020 2020 2020 2020  sting:..        
+0000b470: 2020 2020 666f 7220 6b2c 2069 7465 6d20      for k, item 
+0000b480: 696e 2073 656c 662e 6974 656d 7328 293a  in self.items():
+0000b490: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000b4a0: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
+0000b4b0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0000b4c0: 7465 6d2e 5f5f 6d6f 6475 6c65 5f5f 203d  tem.__module__ =
+0000b4d0: 3d20 2268 6466 352e 696f 223a 0d0a 2020  = "hdf5.io":..  
+0000b4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b4f0: 2020 2020 2020 6974 656d 203d 2068 3569        item = h5i
+0000b500: 6f5f 746f 5f73 7472 7563 7428 6974 656d  o_to_struct(item
+0000b510: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0000b520: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
 0000b530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b540: 2020 2020 7061 7373 0d0a 0d0a 2020 2020      pass....    
-0000b550: 2020 2020 2020 2020 2020 2020 2320 536f              # So
-0000b560: 6d65 2063 6f64 6520 6265 6c6f 7720 6e65  me code below ne
-0000b570: 6564 7320 276b 2720 6173 2061 2073 7472  eds 'k' as a str
-0000b580: 3b20 736f 6d65 206e 6565 6473 2069 7420  ; some needs it 
-0000b590: 6173 2027 6279 7465 7327 2e0d 0a20 2020  as 'bytes'...   
-0000b5a0: 2020 2020 2020 2020 2020 2020 2023 2049               # I
-0000b5b0: 7420 6973 2070 6f73 7369 626c 6520 746f  t is possible to
-0000b5c0: 2067 6574 2027 6b27 2061 7320 6569 7468   get 'k' as eith
-0000b5d0: 6572 2074 7970 652c 2073 6f20 6e6f 726d  er type, so norm
-0000b5e0: 616c 697a 6520 6865 7265 2074 6f0d 0a20  alize here to.. 
-0000b5f0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000b600: 206d 616b 6520 6974 2065 6173 6965 7220   make it easier 
-0000b610: 6f6e 2074 6865 2063 6f64 6520 6265 6c6f  on the code belo
-0000b620: 772e 0d0a 2020 2020 2020 2020 2020 2020  w...            
-0000b630: 2020 2020 6b5f 6279 7465 7320 3d20 6b2e      k_bytes = k.
-0000b640: 656e 636f 6465 2829 2069 6620 6973 696e  encode() if isin
-0000b650: 7374 616e 6365 286b 2c20 7374 7229 2065  stance(k, str) e
-0000b660: 6c73 6520 6b0d 0a20 2020 2020 2020 2020  lse k..         
-0000b670: 2020 2020 2020 206b 203d 206b 2e64 6563         k = k.dec
-0000b680: 6f64 6528 2920 6966 2069 7369 6e73 7461  ode() if isinsta
-0000b690: 6e63 6528 6b2c 2062 7974 6573 2920 656c  nce(k, bytes) el
-0000b6a0: 7365 206b 0d0a 0d0a 2020 2020 2020 2020  se k....        
-0000b6b0: 2020 2020 2020 2020 2320 6372 6561 7465          # create
-0000b6c0: 2061 206d 6173 7465 7220 6c69 7374 206f   a master list o
-0000b6d0: 6620 6974 656d 206e 616d 6573 2069 6e20  f item names in 
-0000b6e0: 6f72 6465 720d 0a20 2020 2020 2020 2020  order..         
-0000b6f0: 2020 2020 2020 2023 206d 6574 615b 2769         # meta['i
-0000b700: 7465 6d5f 6e61 6d65 7327 5d2e 6170 7065  tem_names'].appe
-0000b710: 6e64 286b 290d 0a0d 0a20 2020 2020 2020  nd(k)....       
-0000b720: 2020 2020 2020 2020 2023 2061 6464 2069           # add i
-0000b730: 7465 6d20 746f 206d 6173 7465 7220 6c69  tem to master li
-0000b740: 7374 206f 6620 6974 656d 206e 616d 6573  st of item names
-0000b750: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b760: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0000b770: 6974 656d 2c20 6e70 2e6e 6461 7272 6179  item, np.ndarray
-0000b780: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0000b790: 2020 2020 2020 2020 6172 7261 795f 666c          array_fl
-0000b7a0: 6167 7320 3d20 5344 5346 6c61 672e 4f72  ags = SDSFlag.Or
-0000b7b0: 6967 696e 616c 436f 6e74 6169 6e65 720d  iginalContainer.
-0000b7c0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000b7d0: 2020 2020 2020 2023 206d 6967 6874 206e         # might n
-0000b7e0: 6565 6420 746f 2063 6f70 7920 7374 7269  eed to copy stri
-0000b7f0: 6465 6420 6461 7461 0d0a 2020 2020 2020  ded data..      
-0000b800: 2020 2020 2020 2020 2020 2020 2020 6164                ad
-0000b810: 6469 7465 6d20 3d20 6974 656d 0d0a 2020  ditem = item..  
-0000b820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b830: 2020 6966 2069 7465 6d2e 6e64 696d 203d    if item.ndim =
-0000b840: 3d20 313a 0d0a 2020 2020 2020 2020 2020  = 1:..          
-0000b850: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0000b860: 2069 7465 6d2e 7374 7269 6465 735b 305d   item.strides[0]
-0000b870: 2021 3d20 6974 656d 2e69 7465 6d73 697a   != item.itemsiz
-0000b880: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0000b890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b8a0: 7761 726e 696e 6773 2e77 6172 6e28 6622  warnings.warn(f"
-0000b8b0: 6172 7261 7920 6e61 6d65 6420 7b6b 7d20  array named {k} 
-0000b8c0: 6861 6420 6261 6420 3164 2073 7472 6964  had bad 1d strid
-0000b8d0: 6573 2229 0d0a 2020 2020 2020 2020 2020  es")..          
-0000b8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b8f0: 2020 6164 6469 7465 6d20 3d20 6974 656d    additem = item
-0000b900: 2e63 6f70 7928 290d 0a0d 0a20 2020 2020  .copy()....     
-0000b910: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000b920: 7465 6d73 2e61 7070 656e 6428 6164 6469  tems.append(addi
-0000b930: 7465 6d29 0d0a 0d0a 2020 2020 2020 2020  tem)....        
-0000b940: 2020 2020 2020 2020 2020 2020 2320 6f74              # ot
-0000b950: 6865 7220 6172 7261 7973 206d 6179 206e  her arrays may n
-0000b960: 6565 6420 746f 2062 6520 7374 6f72 6564  eed to be stored
-0000b970: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b980: 2020 2020 2020 6966 2068 6173 6174 7472        if hasattr
-0000b990: 2869 7465 6d2c 2022 5f62 7569 6c64 5f73  (item, "_build_s
-0000b9a0: 6473 5f6d 6574 615f 6461 7461 2229 3a0d  ds_meta_data"):.
-0000b9b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b9c0: 2020 2020 2020 2020 2069 5f6d 6574 612c           i_meta,
-0000b9d0: 2069 5f69 7465 6d73 2c20 695f 7475 7073   i_items, i_tups
-0000b9e0: 203d 2069 7465 6d2e 5f62 7569 6c64 5f73   = item._build_s
-0000b9f0: 6473 5f6d 6574 615f 6461 7461 286b 2c20  ds_meta_data(k, 
-0000ba00: 2a2a 6b77 6172 6773 290d 0a0d 0a20 2020  **kwargs)....   
+0000b540: 7061 7373 0d0a 0d0a 2020 2020 2020 2020  pass....        
+0000b550: 2020 2020 2020 2020 2320 536f 6d65 2063          # Some c
+0000b560: 6f64 6520 6265 6c6f 7720 6e65 6564 7320  ode below needs 
+0000b570: 276b 2720 6173 2061 2073 7472 3b20 736f  'k' as a str; so
+0000b580: 6d65 206e 6565 6473 2069 7420 6173 2027  me needs it as '
+0000b590: 6279 7465 7327 2e0d 0a20 2020 2020 2020  bytes'...       
+0000b5a0: 2020 2020 2020 2020 2023 2049 7420 6973           # It is
+0000b5b0: 2070 6f73 7369 626c 6520 746f 2067 6574   possible to get
+0000b5c0: 2027 6b27 2061 7320 6569 7468 6572 2074   'k' as either t
+0000b5d0: 7970 652c 2073 6f20 6e6f 726d 616c 697a  ype, so normaliz
+0000b5e0: 6520 6865 7265 2074 6f0d 0a20 2020 2020  e here to..     
+0000b5f0: 2020 2020 2020 2020 2020 2023 206d 616b             # mak
+0000b600: 6520 6974 2065 6173 6965 7220 6f6e 2074  e it easier on t
+0000b610: 6865 2063 6f64 6520 6265 6c6f 772e 0d0a  he code below...
+0000b620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b630: 6b5f 6279 7465 7320 3d20 6b2e 656e 636f  k_bytes = k.enco
+0000b640: 6465 2829 2069 6620 6973 696e 7374 616e  de() if isinstan
+0000b650: 6365 286b 2c20 7374 7229 2065 6c73 6520  ce(k, str) else 
+0000b660: 6b0d 0a20 2020 2020 2020 2020 2020 2020  k..             
+0000b670: 2020 206b 203d 206b 2e64 6563 6f64 6528     k = k.decode(
+0000b680: 2920 6966 2069 7369 6e73 7461 6e63 6528  ) if isinstance(
+0000b690: 6b2c 2062 7974 6573 2920 656c 7365 206b  k, bytes) else k
+0000b6a0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000b6b0: 2020 2020 2320 6372 6561 7465 2061 206d      # create a m
+0000b6c0: 6173 7465 7220 6c69 7374 206f 6620 6974  aster list of it
+0000b6d0: 656d 206e 616d 6573 2069 6e20 6f72 6465  em names in orde
+0000b6e0: 720d 0a20 2020 2020 2020 2020 2020 2020  r..             
+0000b6f0: 2020 2023 206d 6574 615b 2769 7465 6d5f     # meta['item_
+0000b700: 6e61 6d65 7327 5d2e 6170 7065 6e64 286b  names'].append(k
+0000b710: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000b720: 2020 2020 2023 2061 6464 2069 7465 6d20       # add item 
+0000b730: 746f 206d 6173 7465 7220 6c69 7374 206f  to master list o
+0000b740: 6620 6974 656d 206e 616d 6573 0d0a 2020  f item names..  
+0000b750: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0000b760: 2069 7369 6e73 7461 6e63 6528 6974 656d   isinstance(item
+0000b770: 2c20 6e70 2e6e 6461 7272 6179 293a 0d0a  , np.ndarray):..
+0000b780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b790: 2020 2020 6172 7261 795f 666c 6167 7320      array_flags 
+0000b7a0: 3d20 5344 5346 6c61 672e 4f72 6967 696e  = SDSFlag.Origin
+0000b7b0: 616c 436f 6e74 6169 6e65 720d 0a0d 0a20  alContainer.... 
+0000b7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b7d0: 2020 2023 206d 6967 6874 206e 6565 6420     # might need 
+0000b7e0: 746f 2063 6f70 7920 7374 7269 6465 6420  to copy strided 
+0000b7f0: 6461 7461 0d0a 2020 2020 2020 2020 2020  data..          
+0000b800: 2020 2020 2020 2020 2020 6164 6469 7465            addite
+0000b810: 6d20 3d20 6974 656d 0d0a 2020 2020 2020  m = item..      
+0000b820: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0000b830: 2069 7465 6d2e 6e64 696d 203d 3d20 313a   item.ndim == 1:
+0000b840: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000b850: 2020 2020 2020 2020 2020 6966 2069 7465            if ite
+0000b860: 6d2e 7374 7269 6465 735b 305d 2021 3d20  m.strides[0] != 
+0000b870: 6974 656d 2e69 7465 6d73 697a 653a 0d0a  item.itemsize:..
+0000b880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b890: 2020 2020 2020 2020 2020 2020 7761 726e              warn
+0000b8a0: 696e 6773 2e77 6172 6e28 6622 6172 7261  ings.warn(f"arra
+0000b8b0: 7920 6e61 6d65 6420 7b6b 7d20 6861 6420  y named {k} had 
+0000b8c0: 6261 6420 3164 2073 7472 6964 6573 2229  bad 1d strides")
+0000b8d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000b8e0: 2020 2020 2020 2020 2020 2020 2020 6164                ad
+0000b8f0: 6469 7465 6d20 3d20 6974 656d 2e63 6f70  ditem = item.cop
+0000b900: 7928 290d 0a0d 0a20 2020 2020 2020 2020  y()....         
+0000b910: 2020 2020 2020 2020 2020 2069 7465 6d73             items
+0000b920: 2e61 7070 656e 6428 6164 6469 7465 6d29  .append(additem)
+0000b930: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000b940: 2020 2020 2020 2020 2320 6f74 6865 7220          # other 
+0000b950: 6172 7261 7973 206d 6179 206e 6565 6420  arrays may need 
+0000b960: 746f 2062 6520 7374 6f72 6564 0d0a 2020  to be stored..  
+0000b970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b980: 2020 6966 2068 6173 6174 7472 2869 7465    if hasattr(ite
+0000b990: 6d2c 2022 5f62 7569 6c64 5f73 6473 5f6d  m, "_build_sds_m
+0000b9a0: 6574 615f 6461 7461 2229 3a0d 0a20 2020  eta_data"):..   
+0000b9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b9c0: 2020 2020 2069 5f6d 6574 612c 2069 5f69       i_meta, i_i
+0000b9d0: 7465 6d73 2c20 695f 7475 7073 203d 2069  tems, i_tups = i
+0000b9e0: 7465 6d2e 5f62 7569 6c64 5f73 6473 5f6d  tem._build_sds_m
+0000b9f0: 6574 615f 6461 7461 286b 2c20 2a2a 6b77  eta_data(k, **kw
+0000ba00: 6172 6773 290d 0a0d 0a20 2020 2020 2020  args)....       
 0000ba10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba20: 2020 2020 206d 6574 615b 2269 7465 6d5f       meta["item_
-0000ba30: 6d65 7461 225d 2e61 7070 656e 6428 695f  meta"].append(i_
-0000ba40: 6d65 7461 2e73 7472 696e 6729 0d0a 2020  meta.string)..  
+0000ba20: 206d 6574 615b 2269 7465 6d5f 6d65 7461   meta["item_meta
+0000ba30: 225d 2e61 7070 656e 6428 695f 6d65 7461  "].append(i_meta
+0000ba40: 2e73 7472 696e 6729 0d0a 2020 2020 2020  .string)..      
 0000ba50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba60: 2020 2020 2020 666f 7220 7370 6563 5f69        for spec_i
-0000ba70: 6478 2c20 695f 6974 656d 2069 6e20 656e  dx, i_item in en
-0000ba80: 756d 6572 6174 6528 695f 6974 656d 7329  umerate(i_items)
-0000ba90: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000baa0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000bab0: 7065 635f 6974 656d 732e 6170 7065 6e64  pec_items.append
-0000bac0: 2869 5f69 7465 6d29 0d0a 0d0a 2020 2020  (i_item)....    
+0000ba60: 2020 666f 7220 7370 6563 5f69 6478 2c20    for spec_idx, 
+0000ba70: 695f 6974 656d 2069 6e20 656e 756d 6572  i_item in enumer
+0000ba80: 6174 6528 695f 6974 656d 7329 3a0d 0a20  ate(i_items):.. 
+0000ba90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000baa0: 2020 2020 2020 2020 2020 2073 7065 635f             spec_
+0000bab0: 6974 656d 732e 6170 7065 6e64 2869 5f69  items.append(i_i
+0000bac0: 7465 6d29 0d0a 0d0a 2020 2020 2020 2020  tem)....        
 0000bad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bae0: 2020 2020 2320 6368 6563 6b20 6966 2075      # check if u
-0000baf0: 6e64 6572 6c79 696e 6720 6172 7261 7920  nderlying array 
-0000bb00: 6973 2073 7461 636b 6162 6c65 0d0a 2020  is stackable..  
+0000bae0: 2320 6368 6563 6b20 6966 2075 6e64 6572  # check if under
+0000baf0: 6c79 696e 6720 6172 7261 7920 6973 2073  lying array is s
+0000bb00: 7461 636b 6162 6c65 0d0a 2020 2020 2020  tackable..      
 0000bb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb20: 2020 2020 2020 2320 6e6f 2073 7472 7563        # no struc
-0000bb30: 7420 6172 7261 7973 2061 7265 2073 7461  t arrays are sta
-0000bb40: 636b 6162 6c65 0d0a 2020 2020 2020 2020  ckable..        
-0000bb50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb60: 6966 2074 7970 6528 7365 6c66 2920 213d  if type(self) !=
-0000bb70: 2054 7970 6552 6567 6973 7465 722e 5374   TypeRegister.St
-0000bb80: 7275 6374 3a0d 0a20 2020 2020 2020 2020  ruct:..         
-0000bb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bba0: 2020 2061 7272 6179 5f66 6c61 6773 202b     array_flags +
-0000bbb0: 3d20 695f 6d65 7461 2e67 6574 2822 5f62  = i_meta.get("_b
-0000bbc0: 6173 655f 6973 5f73 7461 636b 6162 6c65  ase_is_stackable
-0000bbd0: 222c 2030 290d 0a0d 0a20 2020 2020 2020  ", 0)....       
-0000bbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bbf0: 2023 2069 6620 696e 2073 7472 7563 742c   # if in struct,
-0000bc00: 2065 7874 7261 2061 7272 6179 2074 7570   extra array tup
-0000bc10: 6c65 7320 6e65 6564 2074 6f20 6265 2072  les need to be r
-0000bc20: 6562 7569 6c74 0d0a 2020 2020 2020 2020  ebuilt..        
-0000bc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bc40: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-0000bc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bc60: 2020 2066 6f72 2069 2c20 7475 7020 696e     for i, tup in
-0000bc70: 2065 6e75 6d65 7261 7465 2869 5f74 7570   enumerate(i_tup
-0000bc80: 7329 3a0d 0a20 2020 2020 2020 2020 2020  s):..           
+0000bb20: 2020 2320 6e6f 2073 7472 7563 7420 6172    # no struct ar
+0000bb30: 7261 7973 2061 7265 2073 7461 636b 6162  rays are stackab
+0000bb40: 6c65 0d0a 2020 2020 2020 2020 2020 2020  le..            
+0000bb50: 2020 2020 2020 2020 2020 2020 6966 2074              if t
+0000bb60: 7970 6528 7365 6c66 2920 213d 2054 7970  ype(self) != Typ
+0000bb70: 6552 6567 6973 7465 722e 5374 7275 6374  eRegister.Struct
+0000bb80: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000bb90: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0000bba0: 7272 6179 5f66 6c61 6773 202b 3d20 695f  rray_flags += i_
+0000bbb0: 6d65 7461 2e67 6574 2822 5f62 6173 655f  meta.get("_base_
+0000bbc0: 6973 5f73 7461 636b 6162 6c65 222c 2030  is_stackable", 0
+0000bbd0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000bbe0: 2020 2020 2020 2020 2020 2020 2023 2069               # i
+0000bbf0: 6620 696e 2073 7472 7563 742c 2065 7874  f in struct, ext
+0000bc00: 7261 2061 7272 6179 2074 7570 6c65 7320  ra array tuples 
+0000bc10: 6e65 6564 2074 6f20 6265 2072 6562 7569  need to be rebui
+0000bc20: 6c74 0d0a 2020 2020 2020 2020 2020 2020  lt..            
+0000bc30: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0000bc40: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000bc50: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0000bc60: 6f72 2069 2c20 7475 7020 696e 2065 6e75  or i, tup in enu
+0000bc70: 6d65 7261 7465 2869 5f74 7570 7329 3a0d  merate(i_tups):.
+0000bc80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0000bc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bca0: 2020 2020 2023 2030 206d 6561 6e73 206e       # 0 means n
-0000bcb0: 6f74 2073 7461 636b 6162 6c65 2f6e 6f74  ot stackable/not
-0000bcc0: 2069 6e20 6461 7461 7365 740d 0a20 2020   in dataset..   
+0000bca0: 2023 2030 206d 6561 6e73 206e 6f74 2073   # 0 means not s
+0000bcb0: 7461 636b 6162 6c65 2f6e 6f74 2069 6e20  tackable/not in 
+0000bcc0: 6461 7461 7365 740d 0a20 2020 2020 2020  dataset..       
 0000bcd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bce0: 2020 2020 2020 2020 2020 2020 2069 5f74               i_t
-0000bcf0: 7570 735b 695d 203d 2074 7570 6c65 2828  ups[i] = tuple((
-0000bd00: 7475 705b 305d 2c20 3029 290d 0a0d 0a20  tup[0], 0)).... 
+0000bce0: 2020 2020 2020 2020 2069 5f74 7570 735b           i_tups[
+0000bcf0: 695d 203d 2074 7570 6c65 2828 7475 705b  i] = tuple((tup[
+0000bd00: 305d 2c20 3029 290d 0a0d 0a20 2020 2020  0], 0))....     
 0000bd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bd20: 2020 2020 2020 2066 6f72 2074 7570 2069         for tup i
-0000bd30: 6e20 695f 7475 7073 3a0d 0a20 2020 2020  n i_tups:..     
+0000bd20: 2020 2066 6f72 2074 7570 2069 6e20 695f     for tup in i_
+0000bd30: 7475 7073 3a0d 0a20 2020 2020 2020 2020  tups:..         
 0000bd40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bd50: 2020 2020 2020 2073 7065 635f 7475 7073         spec_tups
-0000bd60: 2e61 7070 656e 6428 7475 7029 0d0a 0d0a  .append(tup)....
+0000bd50: 2020 2073 7065 635f 7475 7073 2e61 7070     spec_tups.app
+0000bd60: 656e 6428 7475 7029 0d0a 0d0a 2020 2020  end(tup)....    
 0000bd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bd80: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-0000bd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bda0: 2020 2069 6620 7479 7065 2873 656c 6629     if type(self)
-0000bdb0: 2021 3d20 5479 7065 5265 6769 7374 6572   != TypeRegister
-0000bdc0: 2e53 7472 7563 743a 0d0a 2020 2020 2020  .Struct:..      
+0000bd80: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+0000bd90: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0000bda0: 6620 7479 7065 2873 656c 6629 2021 3d20  f type(self) != 
+0000bdb0: 5479 7065 5265 6769 7374 6572 2e53 7472  TypeRegister.Str
+0000bdc0: 7563 743a 0d0a 2020 2020 2020 2020 2020  uct:..          
 0000bdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bde0: 2020 2020 2020 6172 7261 795f 666c 6167        array_flag
-0000bdf0: 7320 2b3d 2053 4453 466c 6167 2e53 7461  s += SDSFlag.Sta
-0000be00: 636b 6162 6c65 0d0a 0d0a 2020 2020 2020  ckable....      
-0000be10: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000be20: 4d61 746c 6162 2c20 4323 2065 742e 2061  Matlab, C# et. a
-0000be30: 6c2e 2077 696c 6c20 6e6f 7420 7265 6164  l. will not read
-0000be40: 206d 6574 6120 6461 7461 2c20 6d75 7374   meta data, must
-0000be50: 2072 656c 7920 6f6e 2063 6f6c 756d 6e20   rely on column 
-0000be60: 6e61 6d65 7320 2b20 656e 756d 0d0a 2020  names + enum..  
-0000be70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be80: 2020 6d74 7570 203d 2074 7570 6c65 2828    mtup = tuple((
-0000be90: 6b5f 6279 7465 732c 2061 7272 6179 5f66  k_bytes, array_f
-0000bea0: 6c61 6773 2929 0d0a 2020 2020 2020 2020  lags))..        
-0000beb0: 2020 2020 2020 2020 2020 2020 6d65 7461              meta
-0000bec0: 5f74 7570 732e 6170 7065 6e64 286d 7475  _tups.append(mtu
-0000bed0: 7029 0d0a 0d0a 2020 2020 2020 2020 2020  p)....          
-0000bee0: 2020 2020 2020 2020 2020 616c 6c5f 7475            all_tu
-0000bef0: 7073 2e61 7070 656e 6428 6d74 7570 290d  ps.append(mtup).
-0000bf00: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000bf10: 2020 2023 2064 6f20 7765 2069 6e63 6c75     # do we inclu
-0000bf20: 6465 2069 6e66 6f20 6162 6f75 7420 636f  de info about co
-0000bf30: 6e74 6169 6e65 6420 7374 7275 6374 7572  ntained structur
-0000bf40: 6573 2069 6e20 7468 6520 5344 5320 6669  es in the SDS fi
-0000bf50: 6c65 3f0d 0a20 2020 2020 2020 2020 2020  le?..           
-0000bf60: 2020 2020 2023 2077 696c 6c20 7468 6520       # will the 
-0000bf70: 7374 6f72 6520 636c 6173 7320 7461 6b65  store class take
-0000bf80: 2063 6172 6520 6f66 206d 616b 696e 6720   care of making 
-0000bf90: 6469 7265 6374 6f72 6965 732c 2071 7565  directories, que
-0000bfa0: 7279 696e 6720 6e65 7374 6564 2073 7472  rying nested str
-0000bfb0: 7563 7475 7265 7320 666f 7220 6d65 7461  uctures for meta
-0000bfc0: 2064 6174 613f 0d0a 2020 2020 2020 2020   data?..        
-0000bfd0: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
-0000bfe0: 6e73 7461 6e63 6528 6974 656d 2c20 5374  nstance(item, St
-0000bff0: 7275 6374 293a 0d0a 2020 2020 2020 2020  ruct):..        
-0000c000: 2020 2020 2020 2020 2020 2020 2320 636f              # co
-0000c010: 6e74 6169 6e65 7273 206e 6f74 2075 7365  ntainers not use
-0000c020: 640d 0a20 2020 2020 2020 2020 2020 2020  d..             
-0000c030: 2020 2020 2020 2023 206d 6574 615b 2763         # meta['c
-0000c040: 6f6e 7461 696e 6572 7327 5d2e 6170 7065  ontainers'].appe
-0000c050: 6e64 286b 290d 0a20 2020 2020 2020 2020  nd(k)..         
-0000c060: 2020 2020 2020 2020 2020 2023 2070 7574             # put
-0000c070: 204e 6f6e 6520 6173 2061 2070 6c61 6365   None as a place
-0000c080: 686f 6c64 6572 0d0a 2020 2020 2020 2020  holder..        
-0000c090: 2020 2020 2020 2020 2020 2020 6974 656d              item
-0000c0a0: 732e 6170 7065 6e64 284e 6f6e 6529 0d0a  s.append(None)..
-0000c0b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000c0c0: 2020 2020 2020 6974 656d 6e75 6d20 3d20        itemnum = 
-0000c0d0: 5344 5346 6c61 672e 4e65 7374 6564 207c  SDSFlag.Nested |
-0000c0e0: 2053 4453 466c 6167 2e4f 7269 6769 6e61   SDSFlag.Origina
-0000c0f0: 6c43 6f6e 7461 696e 6572 0d0a 2020 2020  lContainer..    
-0000c100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c110: 7420 3d20 7475 706c 6528 286b 5f62 7974  t = tuple((k_byt
-0000c120: 6573 2c20 6974 656d 6e75 6d29 290d 0a20  es, itemnum)).. 
-0000c130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c140: 2020 2061 6c6c 5f74 7570 732e 6170 7065     all_tups.appe
-0000c150: 6e64 2874 290d 0a0d 0a20 2020 2020 2020  nd(t)....       
-0000c160: 2020 2020 2020 2020 2023 206d 6973 6320           # misc 
-0000c170: 6974 656d 732c 2073 6361 6c61 7273 2c20  items, scalars, 
-0000c180: 6574 632e 2067 6574 2061 6464 6564 2074  etc. get added t
-0000c190: 6f20 636f 6e66 6967 2064 6963 740d 0a20  o config dict.. 
-0000c1a0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0000c1b0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-0000c1c0: 2020 2020 2020 2020 2020 2320 666f 7220            # for 
-0000c1d0: 6e6f 7720 6b65 6570 2061 2073 6570 6172  now keep a separ
-0000c1e0: 6174 6520 7265 6665 7265 6e63 6520 746f  ate reference to
-0000c1f0: 2074 6865 6972 206e 616d 6573 0d0a 0d0a   their names....
+0000bde0: 2020 6172 7261 795f 666c 6167 7320 2b3d    array_flags +=
+0000bdf0: 2053 4453 466c 6167 2e53 7461 636b 6162   SDSFlag.Stackab
+0000be00: 6c65 0d0a 0d0a 2020 2020 2020 2020 2020  le....          
+0000be10: 2020 2020 2020 2020 2020 2320 4d61 746c            # Matl
+0000be20: 6162 2c20 4323 2065 742e 2061 6c2e 2077  ab, C# et. al. w
+0000be30: 696c 6c20 6e6f 7420 7265 6164 206d 6574  ill not read met
+0000be40: 6120 6461 7461 2c20 6d75 7374 2072 656c  a data, must rel
+0000be50: 7920 6f6e 2063 6f6c 756d 6e20 6e61 6d65  y on column name
+0000be60: 7320 2b20 656e 756d 0d0a 2020 2020 2020  s + enum..      
+0000be70: 2020 2020 2020 2020 2020 2020 2020 6d74                mt
+0000be80: 7570 203d 2074 7570 6c65 2828 6b5f 6279  up = tuple((k_by
+0000be90: 7465 732c 2061 7272 6179 5f66 6c61 6773  tes, array_flags
+0000bea0: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
+0000beb0: 2020 2020 2020 2020 6d65 7461 5f74 7570          meta_tup
+0000bec0: 732e 6170 7065 6e64 286d 7475 7029 0d0a  s.append(mtup)..
+0000bed0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000bee0: 2020 2020 2020 616c 6c5f 7475 7073 2e61        all_tups.a
+0000bef0: 7070 656e 6428 6d74 7570 290d 0a0d 0a20  ppend(mtup).... 
+0000bf00: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000bf10: 2064 6f20 7765 2069 6e63 6c75 6465 2069   do we include i
+0000bf20: 6e66 6f20 6162 6f75 7420 636f 6e74 6169  nfo about contai
+0000bf30: 6e65 6420 7374 7275 6374 7572 6573 2069  ned structures i
+0000bf40: 6e20 7468 6520 5344 5320 6669 6c65 3f0d  n the SDS file?.
+0000bf50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000bf60: 2023 2077 696c 6c20 7468 6520 7374 6f72   # will the stor
+0000bf70: 6520 636c 6173 7320 7461 6b65 2063 6172  e class take car
+0000bf80: 6520 6f66 206d 616b 696e 6720 6469 7265  e of making dire
+0000bf90: 6374 6f72 6965 732c 2071 7565 7279 696e  ctories, queryin
+0000bfa0: 6720 6e65 7374 6564 2073 7472 7563 7475  g nested structu
+0000bfb0: 7265 7320 666f 7220 6d65 7461 2064 6174  res for meta dat
+0000bfc0: 613f 0d0a 2020 2020 2020 2020 2020 2020  a?..            
+0000bfd0: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+0000bfe0: 6e63 6528 6974 656d 2c20 5374 7275 6374  nce(item, Struct
+0000bff0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0000c000: 2020 2020 2020 2020 2320 636f 6e74 6169          # contai
+0000c010: 6e65 7273 206e 6f74 2075 7365 640d 0a20  ners not used.. 
+0000c020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c030: 2020 2023 206d 6574 615b 2763 6f6e 7461     # meta['conta
+0000c040: 696e 6572 7327 5d2e 6170 7065 6e64 286b  iners'].append(k
+0000c050: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0000c060: 2020 2020 2020 2023 2070 7574 204e 6f6e         # put Non
+0000c070: 6520 6173 2061 2070 6c61 6365 686f 6c64  e as a placehold
+0000c080: 6572 0d0a 2020 2020 2020 2020 2020 2020  er..            
+0000c090: 2020 2020 2020 2020 6974 656d 732e 6170          items.ap
+0000c0a0: 7065 6e64 284e 6f6e 6529 0d0a 0d0a 2020  pend(None)....  
+0000c0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c0c0: 2020 6974 656d 6e75 6d20 3d20 5344 5346    itemnum = SDSF
+0000c0d0: 6c61 672e 4e65 7374 6564 207c 2053 4453  lag.Nested | SDS
+0000c0e0: 466c 6167 2e4f 7269 6769 6e61 6c43 6f6e  Flag.OriginalCon
+0000c0f0: 7461 696e 6572 0d0a 2020 2020 2020 2020  tainer..        
+0000c100: 2020 2020 2020 2020 2020 2020 7420 3d20              t = 
+0000c110: 7475 706c 6528 286b 5f62 7974 6573 2c20  tuple((k_bytes, 
+0000c120: 6974 656d 6e75 6d29 290d 0a20 2020 2020  itemnum))..     
+0000c130: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0000c140: 6c6c 5f74 7570 732e 6170 7065 6e64 2874  ll_tups.append(t
+0000c150: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000c160: 2020 2020 2023 206d 6973 6320 6974 656d       # misc item
+0000c170: 732c 2073 6361 6c61 7273 2c20 6574 632e  s, scalars, etc.
+0000c180: 2067 6574 2061 6464 6564 2074 6f20 636f   get added to co
+0000c190: 6e66 6967 2064 6963 740d 0a20 2020 2020  nfig dict..     
+0000c1a0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0000c1b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000c1c0: 2020 2020 2020 2320 666f 7220 6e6f 7720        # for now 
+0000c1d0: 6b65 6570 2061 2073 6570 6172 6174 6520  keep a separate 
+0000c1e0: 7265 6665 7265 6e63 6520 746f 2074 6865  reference to the
+0000c1f0: 6972 206e 616d 6573 0d0a 0d0a 2020 2020  ir names....    
 0000c200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c210: 2020 2020 6974 656d 203d 206e 702e 6173      item = np.as
-0000c220: 6172 7261 7928 5b69 7465 6d5d 290d 0a20  array([item]).. 
-0000c230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c240: 2020 2023 2069 6620 7363 616c 6172 2063     # if scalar c
-0000c250: 7265 6174 6564 2061 6e20 6f62 6a65 6374  reated an object
-0000c260: 2061 7272 6179 2c20 666c 6970 2074 6f20   array, flip to 
-0000c270: 7374 7269 6e67 2061 6e64 2077 6172 6e0d  string and warn.
-0000c280: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000c290: 2020 2020 2069 6620 6974 656d 2e64 7479       if item.dty
-0000c2a0: 7065 2e63 6861 7220 3d3d 2022 4f22 3a0d  pe.char == "O":.
-0000c2b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000c2c0: 2020 2020 2020 2020 2077 6172 6e69 6e67           warning
-0000c2d0: 732e 7761 726e 2866 2249 7465 6d20 7b69  s.warn(f"Item {i
-0000c2e0: 7465 6d5b 305d 7d20 7761 7320 6e6f 7420  tem[0]} was not 
-0000c2f0: 6120 7375 7070 6f72 7465 6420 7363 616c  a supported scal
-0000c300: 6172 2074 7970 652e 2053 6176 696e 6720  ar type. Saving 
-0000c310: 6173 2062 7974 6573 7472 696e 672e 2229  as bytestring.")
-0000c320: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000c330: 2020 2020 2020 2020 2020 6974 656d 203d            item =
-0000c340: 2069 7465 6d2e 6173 7479 7065 2822 5322   item.astype("S"
-0000c350: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0000c360: 2020 2020 2020 2069 7465 6d73 2e61 7070         items.app
-0000c370: 656e 6428 6974 656d 290d 0a0d 0a20 2020  end(item)....   
-0000c380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c390: 2069 7465 6d6e 756d 203d 2053 4453 466c   itemnum = SDSFl
-0000c3a0: 6167 2e53 6361 6c61 7220 7c20 5344 5346  ag.Scalar | SDSF
-0000c3b0: 6c61 672e 4f72 6967 696e 616c 436f 6e74  lag.OriginalCont
-0000c3c0: 6169 6e65 720d 0a20 2020 2020 2020 2020  ainer..         
-0000c3d0: 2020 2020 2020 2020 2020 2074 203d 2074             t = t
-0000c3e0: 7570 6c65 2828 6b5f 6279 7465 732c 2069  uple((k_bytes, i
-0000c3f0: 7465 6d6e 756d 2929 0d0a 2020 2020 2020  temnum))..      
-0000c400: 2020 2020 2020 2020 2020 2020 2020 616c                al
-0000c410: 6c5f 7475 7073 2e61 7070 656e 6428 7429  l_tups.append(t)
-0000c420: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000c430: 2320 6164 6420 7370 6563 6961 6c20 636f  # add special co
-0000c440: 6c75 6d6e 7320 6c69 6b65 2063 6174 6567  lumns like categ
-0000c450: 6f72 6963 616c 2063 6174 6567 6f72 6965  orical categorie
-0000c460: 7320 746f 2061 7272 6179 206c 6973 740d  s to array list.
-0000c470: 0a20 2020 2020 2020 2020 2020 2023 2061  .            # a
-0000c480: 6464 2074 7570 6c65 7320 666f 7220 7370  dd tuples for sp
-0000c490: 6563 6961 6c20 6974 656d 732c 2077 696c  ecial items, wil
-0000c4a0: 6c20 6265 2073 616d 6520 6c65 6e67 7468  l be same length
-0000c4b0: 2061 7320 7370 6563 5f69 7465 6d73 0d0a   as spec_items..
-0000c4c0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0000c4d0: 7370 6563 5f69 6478 2c20 6974 656d 2069  spec_idx, item i
-0000c4e0: 6e20 656e 756d 6572 6174 6528 7370 6563  n enumerate(spec
-0000c4f0: 5f69 7465 6d73 293a 0d0a 2020 2020 2020  _items):..      
-0000c500: 2020 2020 2020 2020 2020 6974 656d 732e            items.
-0000c510: 6170 7065 6e64 2869 7465 6d29 0d0a 2020  append(item)..  
-0000c520: 2020 2020 2020 2020 2020 2020 2020 7420                t 
-0000c530: 3d20 7370 6563 5f74 7570 735b 7370 6563  = spec_tups[spec
-0000c540: 5f69 6478 5d0d 0a20 2020 2020 2020 2020  _idx]..         
-0000c550: 2020 2020 2020 206d 6574 615f 7475 7073         meta_tups
-0000c560: 2e61 7070 656e 6428 7429 0d0a 2020 2020  .append(t)..    
-0000c570: 2020 2020 2020 2020 2020 2020 616c 6c5f              all_
-0000c580: 7475 7073 2e61 7070 656e 6428 7429 0d0a  tups.append(t)..
-0000c590: 0d0a 2020 2020 2020 2020 2320 6765 7420  ..        # get 
-0000c5a0: 736f 7274 6564 2072 6f77 2069 6e64 6578  sorted row index
-0000c5b0: 2028 4461 7461 7365 7420 6f6e 6c79 290d   (Dataset only).
-0000c5c0: 0a20 2020 2020 2020 2069 6620 6861 7361  .        if hasa
-0000c5d0: 7474 7228 7365 6c66 2c20 2267 6574 5f72  ttr(self, "get_r
-0000c5e0: 6f77 5f73 6f72 745f 696e 666f 2229 3a0d  ow_sort_info"):.
-0000c5f0: 0a20 2020 2020 2020 2020 2020 2073 6f72  .            sor
-0000c600: 745f 6964 203d 2073 656c 662e 6765 745f  t_id = self.get_
-0000c610: 726f 775f 736f 7274 5f69 6e66 6f28 290d  row_sort_info().
-0000c620: 0a20 2020 2020 2020 2020 2020 2073 6f72  .            sor
-0000c630: 745f 6964 7820 3d20 5479 7065 5265 6769  t_idx = TypeRegi
-0000c640: 7374 6572 2e53 6f72 7443 6163 6865 2e67  ster.SortCache.g
-0000c650: 6574 5f73 6f72 7465 645f 726f 775f 696e  et_sorted_row_in
-0000c660: 6465 7828 2a73 6f72 745f 6964 290d 0a20  dex(*sort_id).. 
-0000c670: 2020 2020 2020 2020 2020 2069 6620 736f             if so
-0000c680: 7274 5f69 6478 2069 7320 6e6f 7420 4e6f  rt_idx is not No
-0000c690: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-0000c6a0: 2020 2020 2069 7465 6d73 2e61 7070 656e       items.appen
-0000c6b0: 6428 736f 7274 5f69 6478 290d 0a0d 0a20  d(sort_idx).... 
-0000c6c0: 2020 2020 2020 2023 2067 6574 2066 6f6f         # get foo
-0000c6d0: 7465 7273 2028 6375 7272 656e 746c 7920  ters (currently 
-0000c6e0: 6f6e 6c79 2069 6d70 6c65 6d65 6e74 6564  only implemented
-0000c6f0: 2066 6f72 2041 6363 756d 3220 7265 7375   for Accum2 resu
-0000c700: 6c74 290d 0a20 2020 2020 2020 2069 6620  lt)..        if 
-0000c710: 6861 7361 7474 7228 7365 6c66 2c20 225f  hasattr(self, "_
-0000c720: 666f 6f74 6572 7322 293a 0d0a 2020 2020  footers"):..    
-0000c730: 2020 2020 2020 2020 666f 7220 6b2c 2076          for k, v
-0000c740: 2069 6e20 7365 6c66 2e5f 666f 6f74 6572   in self._footer
-0000c750: 732e 6974 656d 7328 293a 0d0a 2020 2020  s.items():..    
-0000c760: 2020 2020 2020 2020 2020 2020 6d65 7461              meta
-0000c770: 5b22 666f 6f74 6572 7322 5d2e 6170 7065  ["footers"].appe
-0000c780: 6e64 286b 290d 0a20 2020 2020 2020 2020  nd(k)..         
-0000c790: 2020 2020 2020 2069 7465 6d73 2e61 7070         items.app
-0000c7a0: 656e 6428 7629 0d0a 0d0a 2020 2020 2020  end(v)....      
-0000c7b0: 2020 2320 7465 7374 2066 6f72 206c 6f61    # test for loa
-0000c7c0: 6469 6e67 2069 7465 6d73 2069 6e20 6f72  ding items in or
-0000c7d0: 6465 7220 7769 7468 2074 7570 6c65 7320  der with tuples 
-0000c7e0: 6f6e 6c79 0d0a 2020 2020 2020 2020 2320  only..        # 
-0000c7f0: 544a 4420 7265 6d6f 7665 2074 6869 7320  TJD remove this 
-0000c800: 6279 204a 756c 7920 3230 3139 2073 696e  by July 2019 sin
-0000c810: 6365 2069 7420 6973 206e 6f20 6c6f 6e67  ce it is no long
-0000c820: 6572 2063 6865 636b 6564 0d0a 2020 2020  er checked..    
-0000c830: 2020 2020 6d65 7461 5b22 6c6f 6164 5f66      meta["load_f
-0000c840: 726f 6d5f 7475 706c 6573 225d 203d 2031  rom_tuples"] = 1
-0000c850: 0d0a 2020 2020 2020 2020 6d65 7461 5f74  ..        meta_t
-0000c860: 7570 7320 3d20 616c 6c5f 7475 7073 0d0a  ups = all_tups..
-0000c870: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-0000c880: 206d 6574 612c 2069 7465 6d73 2c20 6d65   meta, items, me
-0000c890: 7461 5f74 7570 730d 0a0d 0a20 2020 2023  ta_tups....    #
-0000c8a0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+0000c210: 6974 656d 203d 206e 702e 6173 6172 7261  item = np.asarra
+0000c220: 7928 5b69 7465 6d5d 290d 0a20 2020 2020  y([item])..     
+0000c230: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000c240: 2069 6620 7363 616c 6172 2063 7265 6174   if scalar creat
+0000c250: 6564 2061 6e20 6f62 6a65 6374 2061 7272  ed an object arr
+0000c260: 6179 2c20 666c 6970 2074 6f20 7374 7269  ay, flip to stri
+0000c270: 6e67 2061 6e64 2077 6172 6e0d 0a20 2020  ng and warn..   
+0000c280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c290: 2069 6620 6974 656d 2e64 7479 7065 2e63   if item.dtype.c
+0000c2a0: 6861 7220 3d3d 2022 4f22 3a0d 0a20 2020  har == "O":..   
+0000c2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c2c0: 2020 2020 2077 6172 6e69 6e67 732e 7761       warnings.wa
+0000c2d0: 726e 2866 2249 7465 6d20 7b69 7465 6d5b  rn(f"Item {item[
+0000c2e0: 305d 7d20 7761 7320 6e6f 7420 6120 7375  0]} was not a su
+0000c2f0: 7070 6f72 7465 6420 7363 616c 6172 2074  pported scalar t
+0000c300: 7970 652e 2053 6176 696e 6720 6173 2062  ype. Saving as b
+0000c310: 7974 6573 7472 696e 672e 2229 0d0a 2020  ytestring.")..  
+0000c320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c330: 2020 2020 2020 6974 656d 203d 2069 7465        item = ite
+0000c340: 6d2e 6173 7479 7065 2822 5322 290d 0a20  m.astype("S").. 
+0000c350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c360: 2020 2069 7465 6d73 2e61 7070 656e 6428     items.append(
+0000c370: 6974 656d 290d 0a0d 0a20 2020 2020 2020  item)....       
+0000c380: 2020 2020 2020 2020 2020 2020 2069 7465               ite
+0000c390: 6d6e 756d 203d 2053 4453 466c 6167 2e53  mnum = SDSFlag.S
+0000c3a0: 6361 6c61 7220 7c20 5344 5346 6c61 672e  calar | SDSFlag.
+0000c3b0: 4f72 6967 696e 616c 436f 6e74 6169 6e65  OriginalContaine
+0000c3c0: 720d 0a20 2020 2020 2020 2020 2020 2020  r..             
+0000c3d0: 2020 2020 2020 2074 203d 2074 7570 6c65         t = tuple
+0000c3e0: 2828 6b5f 6279 7465 732c 2069 7465 6d6e  ((k_bytes, itemn
+0000c3f0: 756d 2929 0d0a 2020 2020 2020 2020 2020  um))..          
+0000c400: 2020 2020 2020 2020 2020 616c 6c5f 7475            all_tu
+0000c410: 7073 2e61 7070 656e 6428 7429 0d0a 0d0a  ps.append(t)....
+0000c420: 2020 2020 2020 2020 2020 2020 2320 6164              # ad
+0000c430: 6420 7370 6563 6961 6c20 636f 6c75 6d6e  d special column
+0000c440: 7320 6c69 6b65 2063 6174 6567 6f72 6963  s like categoric
+0000c450: 616c 2063 6174 6567 6f72 6965 7320 746f  al categories to
+0000c460: 2061 7272 6179 206c 6973 740d 0a20 2020   array list..   
+0000c470: 2020 2020 2020 2020 2023 2061 6464 2074           # add t
+0000c480: 7570 6c65 7320 666f 7220 7370 6563 6961  uples for specia
+0000c490: 6c20 6974 656d 732c 2077 696c 6c20 6265  l items, will be
+0000c4a0: 2073 616d 6520 6c65 6e67 7468 2061 7320   same length as 
+0000c4b0: 7370 6563 5f69 7465 6d73 0d0a 2020 2020  spec_items..    
+0000c4c0: 2020 2020 2020 2020 666f 7220 7370 6563          for spec
+0000c4d0: 5f69 6478 2c20 6974 656d 2069 6e20 656e  _idx, item in en
+0000c4e0: 756d 6572 6174 6528 7370 6563 5f69 7465  umerate(spec_ite
+0000c4f0: 6d73 293a 0d0a 2020 2020 2020 2020 2020  ms):..          
+0000c500: 2020 2020 2020 6974 656d 732e 6170 7065        items.appe
+0000c510: 6e64 2869 7465 6d29 0d0a 2020 2020 2020  nd(item)..      
+0000c520: 2020 2020 2020 2020 2020 7420 3d20 7370            t = sp
+0000c530: 6563 5f74 7570 735b 7370 6563 5f69 6478  ec_tups[spec_idx
+0000c540: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+0000c550: 2020 206d 6574 615f 7475 7073 2e61 7070     meta_tups.app
+0000c560: 656e 6428 7429 0d0a 2020 2020 2020 2020  end(t)..        
+0000c570: 2020 2020 2020 2020 616c 6c5f 7475 7073          all_tups
+0000c580: 2e61 7070 656e 6428 7429 0d0a 0d0a 2020  .append(t)....  
+0000c590: 2020 2020 2020 2320 6765 7420 736f 7274        # get sort
+0000c5a0: 6564 2072 6f77 2069 6e64 6578 2028 4461  ed row index (Da
+0000c5b0: 7461 7365 7420 6f6e 6c79 290d 0a20 2020  taset only)..   
+0000c5c0: 2020 2020 2069 6620 6861 7361 7474 7228       if hasattr(
+0000c5d0: 7365 6c66 2c20 2267 6574 5f72 6f77 5f73  self, "get_row_s
+0000c5e0: 6f72 745f 696e 666f 2229 3a0d 0a20 2020  ort_info"):..   
+0000c5f0: 2020 2020 2020 2020 2073 6f72 745f 6964           sort_id
+0000c600: 203d 2073 656c 662e 6765 745f 726f 775f   = self.get_row_
+0000c610: 736f 7274 5f69 6e66 6f28 290d 0a20 2020  sort_info()..   
+0000c620: 2020 2020 2020 2020 2073 6f72 745f 6964           sort_id
+0000c630: 7820 3d20 5479 7065 5265 6769 7374 6572  x = TypeRegister
+0000c640: 2e53 6f72 7443 6163 6865 2e67 6574 5f73  .SortCache.get_s
+0000c650: 6f72 7465 645f 726f 775f 696e 6465 7828  orted_row_index(
+0000c660: 2a73 6f72 745f 6964 290d 0a20 2020 2020  *sort_id)..     
+0000c670: 2020 2020 2020 2069 6620 736f 7274 5f69         if sort_i
+0000c680: 6478 2069 7320 6e6f 7420 4e6f 6e65 3a0d  dx is not None:.
+0000c690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c6a0: 2069 7465 6d73 2e61 7070 656e 6428 736f   items.append(so
+0000c6b0: 7274 5f69 6478 290d 0a0d 0a20 2020 2020  rt_idx)....     
+0000c6c0: 2020 2023 2067 6574 2066 6f6f 7465 7273     # get footers
+0000c6d0: 2028 6375 7272 656e 746c 7920 6f6e 6c79   (currently only
+0000c6e0: 2069 6d70 6c65 6d65 6e74 6564 2066 6f72   implemented for
+0000c6f0: 2041 6363 756d 3220 7265 7375 6c74 290d   Accum2 result).
+0000c700: 0a20 2020 2020 2020 2069 6620 6861 7361  .        if hasa
+0000c710: 7474 7228 7365 6c66 2c20 225f 666f 6f74  ttr(self, "_foot
+0000c720: 6572 7322 293a 0d0a 2020 2020 2020 2020  ers"):..        
+0000c730: 2020 2020 666f 7220 6b2c 2076 2069 6e20      for k, v in 
+0000c740: 7365 6c66 2e5f 666f 6f74 6572 732e 6974  self._footers.it
+0000c750: 656d 7328 293a 0d0a 2020 2020 2020 2020  ems():..        
+0000c760: 2020 2020 2020 2020 6d65 7461 5b22 666f          meta["fo
+0000c770: 6f74 6572 7322 5d2e 6170 7065 6e64 286b  oters"].append(k
+0000c780: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0000c790: 2020 2069 7465 6d73 2e61 7070 656e 6428     items.append(
+0000c7a0: 7629 0d0a 0d0a 2020 2020 2020 2020 2320  v)....        # 
+0000c7b0: 7465 7374 2066 6f72 206c 6f61 6469 6e67  test for loading
+0000c7c0: 2069 7465 6d73 2069 6e20 6f72 6465 7220   items in order 
+0000c7d0: 7769 7468 2074 7570 6c65 7320 6f6e 6c79  with tuples only
+0000c7e0: 0d0a 2020 2020 2020 2020 2320 544a 4420  ..        # TJD 
+0000c7f0: 7265 6d6f 7665 2074 6869 7320 6279 204a  remove this by J
+0000c800: 756c 7920 3230 3139 2073 696e 6365 2069  uly 2019 since i
+0000c810: 7420 6973 206e 6f20 6c6f 6e67 6572 2063  t is no longer c
+0000c820: 6865 636b 6564 0d0a 2020 2020 2020 2020  hecked..        
+0000c830: 6d65 7461 5b22 6c6f 6164 5f66 726f 6d5f  meta["load_from_
+0000c840: 7475 706c 6573 225d 203d 2031 0d0a 2020  tuples"] = 1..  
+0000c850: 2020 2020 2020 6d65 7461 5f74 7570 7320        meta_tups 
+0000c860: 3d20 616c 6c5f 7475 7073 0d0a 0d0a 2020  = all_tups....  
+0000c870: 2020 2020 2020 7265 7475 726e 206d 6574        return met
+0000c880: 612c 2069 7465 6d73 2c20 6d65 7461 5f74  a, items, meta_t
+0000c890: 7570 730d 0a0d 0a20 2020 2023 202d 2d2d  ups....    # ---
+0000c8a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000c8b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000c8c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c8d0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 4063  --------..    @c
-0000c8e0: 6c61 7373 6d65 7468 6f64 0d0a 2020 2020  lassmethod..    
-0000c8f0: 6465 6620 5f74 7265 655f 6672 6f6d 5f73  def _tree_from_s
-0000c900: 6473 5f6d 6574 615f 6461 7461 2863 6c73  ds_meta_data(cls
-0000c910: 2c20 6d65 7461 2c20 6172 7261 7973 2c20  , meta, arrays, 
-0000c920: 6d65 7461 5f74 7570 732c 2066 696c 655f  meta_tups, file_
-0000c930: 6865 6164 6572 293a 0d0a 2020 2020 2020  header):..      
-0000c940: 2020 2222 220d 0a20 2020 2020 2020 2053    """..        S
-0000c950: 4453 206c 6f61 6473 2069 6e20 696e 666f  DS loads in info
-0000c960: 206d 6f64 6520 286e 6f20 6461 7461 206c   mode (no data l
-0000c970: 6f61 6465 642c 206a 7573 7420 6d65 7461  oaded, just meta
-0000c980: 6461 7461 202b 2066 696c 6520 6865 6164  data + file head
-0000c990: 6572 2069 6e66 6f72 6d61 7469 6f6e 290d  er information).
-0000c9a0: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
-0000c9b0: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
-0000c9c0: 2d2d 2d0d 0a20 2020 2020 2020 2073 7472  ---..        str
-0000c9d0: 0d0a 2020 2020 2020 2020 2020 2020 5472  ..            Tr
-0000c9e0: 6565 2064 6973 706c 6179 206f 6620 6e65  ee display of ne
-0000c9f0: 7374 6564 2073 7472 7563 7475 7265 7320  sted structures 
-0000ca00: 696e 2053 4453 2064 6972 6563 746f 7279  in SDS directory
-0000ca10: 2e0d 0a20 2020 2020 2020 2022 2222 0d0a  ...        """..
-0000ca20: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
-0000ca30: 7369 6e73 7461 6e63 6528 6d65 7461 2c20  sinstance(meta, 
-0000ca40: 4d65 7461 4461 7461 293a 0d0a 2020 2020  MetaData):..    
-0000ca50: 2020 2020 2020 2020 6d65 7461 203d 204d          meta = M
-0000ca60: 6574 6144 6174 6128 6d65 7461 290d 0a0d  etaData(meta)...
-0000ca70: 0a20 2020 2020 2020 2064 6174 6120 3d20  .        data = 
-0000ca80: 7b7d 0d0a 2020 2020 2020 2020 7370 6563  {}..        spec
-0000ca90: 5f69 7465 6d73 203d 207b 7d0d 0a20 2020  _items = {}..   
-0000caa0: 2020 2020 2073 6361 6c61 7273 203d 207b       scalars = {
-0000cab0: 7d0d 0a20 2020 2020 2020 2063 6f6e 7461  }..        conta
-0000cac0: 696e 6572 7320 3d20 7b7d 0d0a 2020 2020  iners = {}..    
-0000cad0: 2020 2020 6172 725f 6964 7820 3d20 300d      arr_idx = 0.
-0000cae0: 0a0d 0a20 2020 2020 2020 2023 206e 6f20  ...        # no 
-0000caf0: 6c6f 6e67 6572 2063 6865 636b 2074 6869  longer check thi
-0000cb00: 730d 0a20 2020 2020 2020 2023 2066 726f  s..        # fro
-0000cb10: 6d5f 7475 7073 203d 206d 6574 612e 6765  m_tups = meta.ge
-0000cb20: 7428 276c 6f61 645f 6672 6f6d 5f74 7570  t('load_from_tup
-0000cb30: 6c65 7327 2c31 290d 0a20 2020 2020 2020  les',1)..       
-0000cb40: 2066 6f72 2069 6478 2c20 7475 7020 696e   for idx, tup in
-0000cb50: 2065 6e75 6d65 7261 7465 286d 6574 615f   enumerate(meta_
-0000cb60: 7475 7073 293a 0d0a 2020 2020 2020 2020  tups):..        
-0000cb70: 2020 2020 6e61 6d65 203d 2074 7570 5b30      name = tup[0
-0000cb80: 5d2e 6465 636f 6465 2829 0d0a 2020 2020  ].decode()..    
-0000cb90: 2020 2020 2020 2020 6974 656d 656e 756d          itemenum
-0000cba0: 203d 2074 7570 5b31 5d0d 0a0d 0a20 2020   = tup[1]....   
-0000cbb0: 2020 2020 2020 2020 2069 6620 6974 656d           if item
-0000cbc0: 656e 756d 2026 2053 4453 466c 6167 2e4f  enum & SDSFlag.O
-0000cbd0: 7269 6769 6e61 6c43 6f6e 7461 696e 6572  riginalContainer
-0000cbe0: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
-0000cbf0: 2020 2020 2023 2054 4f44 4f3a 2077 7269       # TODO: wri
-0000cc00: 7465 2061 2072 6f75 7469 6e65 2074 6f20  te a routine to 
-0000cc10: 6469 7370 6c61 7920 7363 616c 6172 730d  display scalars.
-0000cc20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000cc30: 2069 6620 6974 656d 656e 756d 2026 2053   if itemenum & S
-0000cc40: 4453 466c 6167 2e53 6361 6c61 723a 0d0a  DSFlag.Scalar:..
-0000cc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cc60: 2020 2020 7363 616c 6172 735b 6e61 6d65      scalars[name
-0000cc70: 5d20 3d20 636c 732e 5f73 6361 6c61 725f  ] = cls._scalar_
-0000cc80: 7375 6d6d 6172 7928 6172 7261 7973 5b69  summary(arrays[i
-0000cc90: 6478 5d29 0d0a 0d0a 2020 2020 2020 2020  dx])....        
-0000cca0: 2020 2020 2020 2020 2320 7468 6573 6520          # these 
-0000ccb0: 6974 656d 7320 7769 6c6c 2062 6520 7375  items will be su
-0000ccc0: 6d6d 6172 697a 6564 2066 726f 6d20 616e  mmarized from an
-0000ccd0: 6f74 6865 7220 6669 6c65 2773 2069 6e66  other file's inf
-0000cce0: 6f0d 0a20 2020 2020 2020 2020 2020 2020  o..             
-0000ccf0: 2020 2065 6c69 6620 6974 656d 656e 756d     elif itemenum
-0000cd00: 2026 2053 4453 466c 6167 2e4e 6573 7465   & SDSFlag.Neste
-0000cd10: 643a 0d0a 2020 2020 2020 2020 2020 2020  d:..            
-0000cd20: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
-0000cd30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cd40: 2320 6164 6420 6172 7261 7920 746f 2064  # add array to d
-0000cd50: 6963 7469 6f6e 6172 7920 666f 7220 6669  ictionary for fi
-0000cd60: 6e61 6c20 7375 6d6d 6172 790d 0a20 2020  nal summary..   
-0000cd70: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0000cd80: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0000cd90: 2020 2020 2020 2020 6461 7461 5b6e 616d          data[nam
-0000cda0: 655d 203d 2061 7272 6179 735b 6964 785d  e] = arrays[idx]
-0000cdb0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000cdc0: 2320 6d61 726b 2074 6865 2062 6173 6520  # mark the base 
-0000cdd0: 6974 656d 2061 7320 7370 6563 6961 6c0d  item as special.
-0000cde0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-0000cdf0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0000ce00: 2020 2020 7370 6563 5f69 7465 6d73 5b6e      spec_items[n
-0000ce10: 616d 655d 203d 2054 7275 650d 0a0d 0a20  ame] = True.... 
-0000ce20: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-0000ce30: 636c 732e 5f61 7272 6179 5f73 756d 6d61  cls._array_summa
-0000ce40: 7279 2864 6174 6129 0d0a 0d0a 2020 2020  ry(data)....    
-0000ce50: 2020 2020 666f 7220 7363 2c20 7363 5f69      for sc, sc_i
-0000ce60: 6e66 6f20 696e 2073 6361 6c61 7273 2e69  nfo in scalars.i
-0000ce70: 7465 6d73 2829 3a0d 0a20 2020 2020 2020  tems():..       
-0000ce80: 2020 2020 2072 6573 756c 745b 7363 5d20       result[sc] 
-0000ce90: 3d20 7363 5f69 6e66 6f0d 0a0d 0a20 2020  = sc_info....   
-0000cea0: 2020 2020 2023 2068 6172 6420 636f 6465       # hard code
-0000ceb0: 6420 666f 7220 6361 7465 676f 7269 6361  d for categorica
-0000cec0: 6c20 7269 6768 7420 6e6f 772c 206d 6179  l right now, may
-0000ced0: 6265 2061 6464 206d 6f72 6520 696e 666f  be add more info
-0000cee0: 2061 626f 7574 2053 4453 466c 6167 730d   about SDSFlags.
-0000cef0: 0a20 2020 2020 2020 2066 6f72 2073 7065  .        for spe
-0000cf00: 6320 696e 2073 7065 635f 6974 656d 733a  c in spec_items:
-0000cf10: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-0000cf20: 7375 6c74 5b73 7065 635d 203d 2022 4341  sult[spec] = "CA
-0000cf30: 5422 0d0a 0d0a 2020 2020 2020 2020 7265  T"....        re
-0000cf40: 7475 726e 2072 6573 756c 740d 0a0d 0a20  turn result.... 
-0000cf50: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+0000c8d0: 2d2d 2d2d 0d0a 2020 2020 4063 6c61 7373  ----..    @class
+0000c8e0: 6d65 7468 6f64 0d0a 2020 2020 6465 6620  method..    def 
+0000c8f0: 5f74 7265 655f 6672 6f6d 5f73 6473 5f6d  _tree_from_sds_m
+0000c900: 6574 615f 6461 7461 2863 6c73 2c20 6d65  eta_data(cls, me
+0000c910: 7461 2c20 6172 7261 7973 2c20 6d65 7461  ta, arrays, meta
+0000c920: 5f74 7570 732c 2066 696c 655f 6865 6164  _tups, file_head
+0000c930: 6572 293a 0d0a 2020 2020 2020 2020 2222  er):..        ""
+0000c940: 220d 0a20 2020 2020 2020 2053 4453 206c  "..        SDS l
+0000c950: 6f61 6473 2069 6e20 696e 666f 206d 6f64  oads in info mod
+0000c960: 6520 286e 6f20 6461 7461 206c 6f61 6465  e (no data loade
+0000c970: 642c 206a 7573 7420 6d65 7461 6461 7461  d, just metadata
+0000c980: 202b 2066 696c 6520 6865 6164 6572 2069   + file header i
+0000c990: 6e66 6f72 6d61 7469 6f6e 290d 0a0d 0a20  nformation).... 
+0000c9a0: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+0000c9b0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+0000c9c0: 0a20 2020 2020 2020 2073 7472 0d0a 2020  .        str..  
+0000c9d0: 2020 2020 2020 2020 2020 5472 6565 2064            Tree d
+0000c9e0: 6973 706c 6179 206f 6620 6e65 7374 6564  isplay of nested
+0000c9f0: 2073 7472 7563 7475 7265 7320 696e 2053   structures in S
+0000ca00: 4453 2064 6972 6563 746f 7279 2e0d 0a20  DS directory... 
+0000ca10: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+0000ca20: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
+0000ca30: 7461 6e63 6528 6d65 7461 2c20 4d65 7461  tance(meta, Meta
+0000ca40: 4461 7461 293a 0d0a 2020 2020 2020 2020  Data):..        
+0000ca50: 2020 2020 6d65 7461 203d 204d 6574 6144      meta = MetaD
+0000ca60: 6174 6128 6d65 7461 290d 0a0d 0a20 2020  ata(meta)....   
+0000ca70: 2020 2020 2064 6174 6120 3d20 7b7d 0d0a       data = {}..
+0000ca80: 2020 2020 2020 2020 7370 6563 5f69 7465          spec_ite
+0000ca90: 6d73 203d 207b 7d0d 0a20 2020 2020 2020  ms = {}..       
+0000caa0: 2073 6361 6c61 7273 203d 207b 7d0d 0a20   scalars = {}.. 
+0000cab0: 2020 2020 2020 2063 6f6e 7461 696e 6572         container
+0000cac0: 7320 3d20 7b7d 0d0a 2020 2020 2020 2020  s = {}..        
+0000cad0: 6172 725f 6964 7820 3d20 300d 0a0d 0a20  arr_idx = 0.... 
+0000cae0: 2020 2020 2020 2023 206e 6f20 6c6f 6e67         # no long
+0000caf0: 6572 2063 6865 636b 2074 6869 730d 0a20  er check this.. 
+0000cb00: 2020 2020 2020 2023 2066 726f 6d5f 7475         # from_tu
+0000cb10: 7073 203d 206d 6574 612e 6765 7428 276c  ps = meta.get('l
+0000cb20: 6f61 645f 6672 6f6d 5f74 7570 6c65 7327  oad_from_tuples'
+0000cb30: 2c31 290d 0a20 2020 2020 2020 2066 6f72  ,1)..        for
+0000cb40: 2069 6478 2c20 7475 7020 696e 2065 6e75   idx, tup in enu
+0000cb50: 6d65 7261 7465 286d 6574 615f 7475 7073  merate(meta_tups
+0000cb60: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0000cb70: 6e61 6d65 203d 2074 7570 5b30 5d2e 6465  name = tup[0].de
+0000cb80: 636f 6465 2829 0d0a 2020 2020 2020 2020  code()..        
+0000cb90: 2020 2020 6974 656d 656e 756d 203d 2074      itemenum = t
+0000cba0: 7570 5b31 5d0d 0a0d 0a20 2020 2020 2020  up[1]....       
+0000cbb0: 2020 2020 2069 6620 6974 656d 656e 756d       if itemenum
+0000cbc0: 2026 2053 4453 466c 6167 2e4f 7269 6769   & SDSFlag.Origi
+0000cbd0: 6e61 6c43 6f6e 7461 696e 6572 3a0d 0a20  nalContainer:.. 
+0000cbe0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000cbf0: 2054 4f44 4f3a 2077 7269 7465 2061 2072   TODO: write a r
+0000cc00: 6f75 7469 6e65 2074 6f20 6469 7370 6c61  outine to displa
+0000cc10: 7920 7363 616c 6172 730d 0a20 2020 2020  y scalars..     
+0000cc20: 2020 2020 2020 2020 2020 2069 6620 6974             if it
+0000cc30: 656d 656e 756d 2026 2053 4453 466c 6167  emenum & SDSFlag
+0000cc40: 2e53 6361 6c61 723a 0d0a 2020 2020 2020  .Scalar:..      
+0000cc50: 2020 2020 2020 2020 2020 2020 2020 7363                sc
+0000cc60: 616c 6172 735b 6e61 6d65 5d20 3d20 636c  alars[name] = cl
+0000cc70: 732e 5f73 6361 6c61 725f 7375 6d6d 6172  s._scalar_summar
+0000cc80: 7928 6172 7261 7973 5b69 6478 5d29 0d0a  y(arrays[idx])..
+0000cc90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000cca0: 2020 2320 7468 6573 6520 6974 656d 7320    # these items 
+0000ccb0: 7769 6c6c 2062 6520 7375 6d6d 6172 697a  will be summariz
+0000ccc0: 6564 2066 726f 6d20 616e 6f74 6865 7220  ed from another 
+0000ccd0: 6669 6c65 2773 2069 6e66 6f0d 0a20 2020  file's info..   
+0000cce0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+0000ccf0: 6620 6974 656d 656e 756d 2026 2053 4453  f itemenum & SDS
+0000cd00: 466c 6167 2e4e 6573 7465 643a 0d0a 2020  Flag.Nested:..  
+0000cd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cd20: 2020 7061 7373 0d0a 0d0a 2020 2020 2020    pass....      
+0000cd30: 2020 2020 2020 2020 2020 2320 6164 6420            # add 
+0000cd40: 6172 7261 7920 746f 2064 6963 7469 6f6e  array to diction
+0000cd50: 6172 7920 666f 7220 6669 6e61 6c20 7375  ary for final su
+0000cd60: 6d6d 6172 790d 0a20 2020 2020 2020 2020  mmary..         
+0000cd70: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+0000cd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cd90: 2020 6461 7461 5b6e 616d 655d 203d 2061    data[name] = a
+0000cda0: 7272 6179 735b 6964 785d 0d0a 0d0a 2020  rrays[idx]....  
+0000cdb0: 2020 2020 2020 2020 2020 2320 6d61 726b            # mark
+0000cdc0: 2074 6865 2062 6173 6520 6974 656d 2061   the base item a
+0000cdd0: 7320 7370 6563 6961 6c0d 0a20 2020 2020  s special..     
+0000cde0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+0000cdf0: 2020 2020 2020 2020 2020 2020 2020 7370                sp
+0000ce00: 6563 5f69 7465 6d73 5b6e 616d 655d 203d  ec_items[name] =
+0000ce10: 2054 7275 650d 0a0d 0a20 2020 2020 2020   True....       
+0000ce20: 2072 6573 756c 7420 3d20 636c 732e 5f61   result = cls._a
+0000ce30: 7272 6179 5f73 756d 6d61 7279 2864 6174  rray_summary(dat
+0000ce40: 6129 0d0a 0d0a 2020 2020 2020 2020 666f  a)....        fo
+0000ce50: 7220 7363 2c20 7363 5f69 6e66 6f20 696e  r sc, sc_info in
+0000ce60: 2073 6361 6c61 7273 2e69 7465 6d73 2829   scalars.items()
+0000ce70: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+0000ce80: 6573 756c 745b 7363 5d20 3d20 7363 5f69  esult[sc] = sc_i
+0000ce90: 6e66 6f0d 0a0d 0a20 2020 2020 2020 2023  nfo....        #
+0000cea0: 2068 6172 6420 636f 6465 6420 666f 7220   hard coded for 
+0000ceb0: 6361 7465 676f 7269 6361 6c20 7269 6768  categorical righ
+0000cec0: 7420 6e6f 772c 206d 6179 6265 2061 6464  t now, maybe add
+0000ced0: 206d 6f72 6520 696e 666f 2061 626f 7574   more info about
+0000cee0: 2053 4453 466c 6167 730d 0a20 2020 2020   SDSFlags..     
+0000cef0: 2020 2066 6f72 2073 7065 6320 696e 2073     for spec in s
+0000cf00: 7065 635f 6974 656d 733a 0d0a 2020 2020  pec_items:..    
+0000cf10: 2020 2020 2020 2020 7265 7375 6c74 5b73          result[s
+0000cf20: 7065 635d 203d 2022 4341 5422 0d0a 0d0a  pec] = "CAT"....
+0000cf30: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+0000cf40: 6573 756c 740d 0a0d 0a20 2020 2023 202d  esult....    # -
+0000cf50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000cf60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000cf70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000cf80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
-0000cf90: 2020 4063 6c61 7373 6d65 7468 6f64 0d0a    @classmethod..
-0000cfa0: 2020 2020 6465 6620 5f73 6361 6c61 725f      def _scalar_
-0000cfb0: 7375 6d6d 6172 7928 636c 732c 2073 6361  summary(cls, sca
-0000cfc0: 6c61 725f 7475 7029 3a0d 0a20 2020 2020  lar_tup):..     
-0000cfd0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-0000cfe0: 5363 616c 6172 7320 6172 6520 7374 6f72  Scalars are stor
-0000cff0: 6564 2061 7320 6172 7261 7973 2069 6e20  ed as arrays in 
-0000d000: 5344 532c 2062 7574 2061 2066 6c61 6720  SDS, but a flag 
-0000d010: 6973 2073 6574 2069 6e20 7468 6520 6d65  is set in the me
-0000d020: 7461 2074 7570 6c65 2e0d 0a20 2020 2020  ta tuple...     
-0000d030: 2020 2054 6865 7920 7769 6c6c 2062 6520     They will be 
-0000d040: 6c61 6265 6c65 6420 6173 2073 6361 6c61  labeled as scala
-0000d050: 7220 616e 6420 7468 6569 7220 6474 7970  r and their dtyp
-0000d060: 6520 7769 6c6c 2062 6520 6469 7370 6c61  e will be displa
-0000d070: 7965 642e 0d0a 2020 2020 2020 2020 2222  yed...        ""
-0000d080: 220d 0a20 2020 2020 2020 2069 6e66 6f5f  "..        info_
-0000d090: 7374 7220 3d20 5b22 7363 616c 6172 225d  str = ["scalar"]
-0000d0a0: 0d0a 2020 2020 2020 2020 7479 7065 6e61  ..        typena
-0000d0b0: 6d65 203d 2073 6361 6c61 725f 7475 705b  me = scalar_tup[
-0000d0c0: 315d 0d0a 2020 2020 2020 2020 7479 7065  1]..        type
-0000d0d0: 6e61 6d65 203d 2073 7472 286e 702e 7363  name = str(np.sc
-0000d0e0: 7479 7065 4469 6374 5b74 7970 656e 616d  typeDict[typenam
-0000d0f0: 655d 2e5f 5f6e 616d 655f 5f29 0d0a 2020  e].__name__)..  
-0000d100: 2020 2020 2020 6974 656d 7369 7a65 203d        itemsize =
-0000d110: 2073 7472 2873 6361 6c61 725f 7475 705b   str(scalar_tup[
-0000d120: 335d 290d 0a0d 0a20 2020 2020 2020 2069  3])....        i
-0000d130: 6e66 6f5f 7374 722e 6170 7065 6e64 2874  nfo_str.append(t
-0000d140: 7970 656e 616d 6529 0d0a 2020 2020 2020  ypename)..      
-0000d150: 2020 696e 666f 5f73 7472 2e61 7070 656e    info_str.appen
-0000d160: 6428 6974 656d 7369 7a65 202b 2022 2062  d(itemsize + " b
-0000d170: 7974 6573 2229 0d0a 0d0a 2020 2020 2020  ytes")....      
-0000d180: 2020 7265 7475 726e 2022 2022 2e6a 6f69    return " ".joi
-0000d190: 6e28 696e 666f 5f73 7472 290d 0a0d 0a20  n(info_str).... 
-0000d1a0: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+0000cf80: 2d2d 2d2d 2d2d 0d0a 2020 2020 4063 6c61  ------..    @cla
+0000cf90: 7373 6d65 7468 6f64 0d0a 2020 2020 6465  ssmethod..    de
+0000cfa0: 6620 5f73 6361 6c61 725f 7375 6d6d 6172  f _scalar_summar
+0000cfb0: 7928 636c 732c 2073 6361 6c61 725f 7475  y(cls, scalar_tu
+0000cfc0: 7029 3a0d 0a20 2020 2020 2020 2022 2222  p):..        """
+0000cfd0: 0d0a 2020 2020 2020 2020 5363 616c 6172  ..        Scalar
+0000cfe0: 7320 6172 6520 7374 6f72 6564 2061 7320  s are stored as 
+0000cff0: 6172 7261 7973 2069 6e20 5344 532c 2062  arrays in SDS, b
+0000d000: 7574 2061 2066 6c61 6720 6973 2073 6574  ut a flag is set
+0000d010: 2069 6e20 7468 6520 6d65 7461 2074 7570   in the meta tup
+0000d020: 6c65 2e0d 0a20 2020 2020 2020 2054 6865  le...        The
+0000d030: 7920 7769 6c6c 2062 6520 6c61 6265 6c65  y will be labele
+0000d040: 6420 6173 2073 6361 6c61 7220 616e 6420  d as scalar and 
+0000d050: 7468 6569 7220 6474 7970 6520 7769 6c6c  their dtype will
+0000d060: 2062 6520 6469 7370 6c61 7965 642e 0d0a   be displayed...
+0000d070: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+0000d080: 2020 2020 2069 6e66 6f5f 7374 7220 3d20       info_str = 
+0000d090: 5b22 7363 616c 6172 225d 0d0a 2020 2020  ["scalar"]..    
+0000d0a0: 2020 2020 7479 7065 6e61 6d65 203d 2073      typename = s
+0000d0b0: 6361 6c61 725f 7475 705b 315d 0d0a 2020  calar_tup[1]..  
+0000d0c0: 2020 2020 2020 7479 7065 6e61 6d65 203d        typename =
+0000d0d0: 2073 7472 286e 702e 7363 7479 7065 4469   str(np.sctypeDi
+0000d0e0: 6374 5b74 7970 656e 616d 655d 2e5f 5f6e  ct[typename].__n
+0000d0f0: 616d 655f 5f29 0d0a 2020 2020 2020 2020  ame__)..        
+0000d100: 6974 656d 7369 7a65 203d 2073 7472 2873  itemsize = str(s
+0000d110: 6361 6c61 725f 7475 705b 335d 290d 0a0d  calar_tup[3])...
+0000d120: 0a20 2020 2020 2020 2069 6e66 6f5f 7374  .        info_st
+0000d130: 722e 6170 7065 6e64 2874 7970 656e 616d  r.append(typenam
+0000d140: 6529 0d0a 2020 2020 2020 2020 696e 666f  e)..        info
+0000d150: 5f73 7472 2e61 7070 656e 6428 6974 656d  _str.append(item
+0000d160: 7369 7a65 202b 2022 2062 7974 6573 2229  size + " bytes")
+0000d170: 0d0a 0d0a 2020 2020 2020 2020 7265 7475  ....        retu
+0000d180: 726e 2022 2022 2e6a 6f69 6e28 696e 666f  rn " ".join(info
+0000d190: 5f73 7472 290d 0a0d 0a20 2020 2023 202d  _str)....    # -
+0000d1a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000d1b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000d1c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d1d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
-0000d1e0: 2020 4063 6c61 7373 6d65 7468 6f64 0d0a    @classmethod..
-0000d1f0: 2020 2020 6465 6620 5f61 7272 6179 5f69      def _array_i
-0000d200: 6e66 6f5f 6c69 7374 2863 6c73 2c20 6172  nfo_list(cls, ar
-0000d210: 7269 6e66 6f29 3a0d 0a20 2020 2020 2020  rinfo):..       
-0000d220: 2022 2222 0d0a 2020 2020 2020 2020 4275   """..        Bu
-0000d230: 696c 6420 6c69 7374 206f 6620 696e 666f  ild list of info
-0000d240: 2066 6f72 2073 696e 676c 6520 6172 7261   for single arra
-0000d250: 792e 0d0a 2020 2020 2020 2020 5573 6564  y...        Used
-0000d260: 2066 6f72 2061 6c6c 2061 7272 6179 7320   for all arrays 
-0000d270: 696e 2061 2063 6f6e 7461 696e 6572 206f  in a container o
-0000d280: 7220 6120 7369 6e67 6c65 2061 7272 6179  r a single array
-0000d290: 2073 746f 7265 6420 696e 2073 696e 676c   stored in singl
-0000d2a0: 6520 5344 5320 6669 6c65 2e0d 0a0d 0a20  e SDS file..... 
-0000d2b0: 2020 2020 2020 2072 6574 7572 6e73 205b         returns [
-0000d2c0: 2746 4127 2c20 2773 6861 7065 272c 2027  'FA', 'shape', '
-0000d2d0: 6474 7970 6520 6e61 6d65 272c 2027 692b  dtype name', 'i+
-0000d2e0: 6974 656d 7369 7a65 275d 0d0a 2020 2020  itemsize']..    
-0000d2f0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-0000d300: 2073 6861 7065 2c20 7479 7065 6e75 6d2c   shape, typenum,
-0000d310: 2066 6c61 676e 756d 2c20 6974 656d 7369   flagnum, itemsi
-0000d320: 7a65 203d 2061 7272 696e 666f 0d0a 2020  ze = arrinfo..  
-0000d330: 2020 2020 2020 696e 666f 5f73 7472 203d        info_str =
-0000d340: 205b 5d0d 0a20 2020 2020 2020 2069 6e66   []..        inf
-0000d350: 6f5f 7374 722e 6170 7065 6e64 2822 4641  o_str.append("FA
-0000d360: 2229 0d0a 2020 2020 2020 2020 696e 666f  ")..        info
-0000d370: 5f73 7472 2e61 7070 656e 6428 7374 7228  _str.append(str(
-0000d380: 7368 6170 6529 290d 0a20 2020 2020 2020  shape))..       
-0000d390: 2069 6e66 6f5f 7374 722e 6170 7065 6e64   info_str.append
-0000d3a0: 2873 7472 286e 702e 7363 7479 7065 4469  (str(np.sctypeDi
-0000d3b0: 6374 5b74 7970 656e 756d 5d2e 5f5f 6e61  ct[typenum].__na
-0000d3c0: 6d65 5f5f 2929 0d0a 2020 2020 2020 2020  me__))..        
-0000d3d0: 696e 666f 5f73 7472 2e61 7070 656e 6428  info_str.append(
-0000d3e0: 2269 2220 2b20 7374 7228 6974 656d 7369  "i" + str(itemsi
-0000d3f0: 7a65 2929 0d0a 2020 2020 2020 2020 7265  ze))..        re
-0000d400: 7475 726e 2069 6e66 6f5f 7374 720d 0a0d  turn info_str...
-0000d410: 0a20 2020 2040 636c 6173 736d 6574 686f  .    @classmetho
-0000d420: 640d 0a20 2020 2064 6566 205f 6172 7261  d..    def _arra
-0000d430: 795f 7375 6d6d 6172 795f 7369 6e67 6c65  y_summary_single
-0000d440: 2863 6c73 2c20 6172 7269 6e66 6f29 3a0d  (cls, arrinfo):.
-0000d450: 0a20 2020 2020 2020 2070 6173 730d 0a0d  .        pass...
-0000d460: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+0000d1d0: 2d2d 2d2d 2d2d 0d0a 2020 2020 4063 6c61  ------..    @cla
+0000d1e0: 7373 6d65 7468 6f64 0d0a 2020 2020 6465  ssmethod..    de
+0000d1f0: 6620 5f61 7272 6179 5f69 6e66 6f5f 6c69  f _array_info_li
+0000d200: 7374 2863 6c73 2c20 6172 7269 6e66 6f29  st(cls, arrinfo)
+0000d210: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+0000d220: 2020 2020 2020 2020 4275 696c 6420 6c69          Build li
+0000d230: 7374 206f 6620 696e 666f 2066 6f72 2073  st of info for s
+0000d240: 696e 676c 6520 6172 7261 792e 0d0a 2020  ingle array...  
+0000d250: 2020 2020 2020 5573 6564 2066 6f72 2061        Used for a
+0000d260: 6c6c 2061 7272 6179 7320 696e 2061 2063  ll arrays in a c
+0000d270: 6f6e 7461 696e 6572 206f 7220 6120 7369  ontainer or a si
+0000d280: 6e67 6c65 2061 7272 6179 2073 746f 7265  ngle array store
+0000d290: 6420 696e 2073 696e 676c 6520 5344 5320  d in single SDS 
+0000d2a0: 6669 6c65 2e0d 0a0d 0a20 2020 2020 2020  file.....       
+0000d2b0: 2072 6574 7572 6e73 205b 2746 4127 2c20   returns ['FA', 
+0000d2c0: 2773 6861 7065 272c 2027 6474 7970 6520  'shape', 'dtype 
+0000d2d0: 6e61 6d65 272c 2027 692b 6974 656d 7369  name', 'i+itemsi
+0000d2e0: 7a65 275d 0d0a 2020 2020 2020 2020 2222  ze']..        ""
+0000d2f0: 220d 0a20 2020 2020 2020 2073 6861 7065  "..        shape
+0000d300: 2c20 7479 7065 6e75 6d2c 2066 6c61 676e  , typenum, flagn
+0000d310: 756d 2c20 6974 656d 7369 7a65 203d 2061  um, itemsize = a
+0000d320: 7272 696e 666f 0d0a 2020 2020 2020 2020  rrinfo..        
+0000d330: 696e 666f 5f73 7472 203d 205b 5d0d 0a20  info_str = [].. 
+0000d340: 2020 2020 2020 2069 6e66 6f5f 7374 722e         info_str.
+0000d350: 6170 7065 6e64 2822 4641 2229 0d0a 2020  append("FA")..  
+0000d360: 2020 2020 2020 696e 666f 5f73 7472 2e61        info_str.a
+0000d370: 7070 656e 6428 7374 7228 7368 6170 6529  ppend(str(shape)
+0000d380: 290d 0a20 2020 2020 2020 2069 6e66 6f5f  )..        info_
+0000d390: 7374 722e 6170 7065 6e64 2873 7472 286e  str.append(str(n
+0000d3a0: 702e 7363 7479 7065 4469 6374 5b74 7970  p.sctypeDict[typ
+0000d3b0: 656e 756d 5d2e 5f5f 6e61 6d65 5f5f 2929  enum].__name__))
+0000d3c0: 0d0a 2020 2020 2020 2020 696e 666f 5f73  ..        info_s
+0000d3d0: 7472 2e61 7070 656e 6428 2269 2220 2b20  tr.append("i" + 
+0000d3e0: 7374 7228 6974 656d 7369 7a65 2929 0d0a  str(itemsize))..
+0000d3f0: 2020 2020 2020 2020 7265 7475 726e 2069          return i
+0000d400: 6e66 6f5f 7374 720d 0a0d 0a20 2020 2040  nfo_str....    @
+0000d410: 636c 6173 736d 6574 686f 640d 0a20 2020  classmethod..   
+0000d420: 2064 6566 205f 6172 7261 795f 7375 6d6d   def _array_summ
+0000d430: 6172 795f 7369 6e67 6c65 2863 6c73 2c20  ary_single(cls, 
+0000d440: 6172 7269 6e66 6f29 3a0d 0a20 2020 2020  arrinfo):..     
+0000d450: 2020 2070 6173 730d 0a0d 0a20 2020 2023     pass....    #
+0000d460: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
 0000d470: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000d480: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d490: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
-0000d4a0: 2020 2020 4063 6c61 7373 6d65 7468 6f64      @classmethod
-0000d4b0: 0d0a 2020 2020 6465 6620 5f61 7272 6179  ..    def _array
-0000d4c0: 5f73 756d 6d61 7279 2863 6c73 2c20 6461  _summary(cls, da
-0000d4d0: 7461 2c20 6e61 6d65 3d4e 6f6e 6529 3a0d  ta, name=None):.
-0000d4e0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-0000d4f0: 2020 2020 2020 3a70 6172 616d 2064 6174        :param dat
-0000d500: 613a 2054 7570 6c65 206f 6620 6172 7261  a: Tuple of arra
-0000d510: 7920 696e 666f 2066 726f 6d20 436f 6d70  y info from Comp
-0000d520: 7265 7373 696f 6e54 7970 652e 496e 666f  ressionType.Info
-0000d530: 0d0a 2020 2020 2020 2020 2020 2020 7475  ..            tu
-0000d540: 7031 3a20 2874 7570 6c65 2920 7368 6170  p1: (tuple) shap
-0000d550: 650d 0a20 2020 2020 2020 2020 2020 2074  e..            t
-0000d560: 7570 323a 2028 696e 7429 2064 7479 7065  up2: (int) dtype
-0000d570: 2e6e 756d 0d0a 2020 2020 2020 2020 2020  .num..          
-0000d580: 2020 7475 7033 3a20 2869 6e74 2920 6269    tup3: (int) bi
-0000d590: 746d 6173 6b20 666f 7220 6e75 6d70 7920  tmask for numpy 
-0000d5a0: 666c 6167 730d 0a20 2020 2020 2020 2020  flags..         
-0000d5b0: 2020 2074 7570 343a 2028 696e 7429 2069     tup4: (int) i
-0000d5c0: 7465 6d73 697a 650d 0a20 2020 2020 2020  temsize..       
-0000d5d0: 203a 7061 7261 6d20 6e61 6d65 3a20 4f70   :param name: Op
-0000d5e0: 7469 6f6e 616c 206e 616d 6520 666f 7220  tional name for 
-0000d5f0: 746f 702d 6c65 7665 6c20 5374 7275 6374  top-level Struct
-0000d600: 2e0d 0a0d 0a20 2020 2020 2020 2049 6e74  .....        Int
-0000d610: 656e 616c 2072 6f75 7469 6e65 2066 6f72  enal routine for
-0000d620: 2074 7265 6520 6672 6f6d 206d 6574 6120   tree from meta 
-0000d630: 7375 6d6d 6172 7920 2869 6e66 6f20 6f6e  summary (info on
-0000d640: 6c79 2c20 6e6f 2061 7272 6179 7329 0d0a  ly, no arrays)..
-0000d650: 0d0a 2020 2020 2020 2020 3a72 6574 7572  ..        :retur
-0000d660: 6e3a 2053 7472 696e 6720 6f66 2061 7272  n: String of arr
-0000d670: 6179 2069 6e66 6f20 666f 7220 6120 7369  ay info for a si
-0000d680: 6e67 6c65 2073 7472 7563 742e 0d0a 2020  ngle struct...  
-0000d690: 2020 2020 2020 2222 220d 0a0d 0a20 2020        """....   
-0000d6a0: 2020 2020 2023 2069 6e20 6361 7365 2061       # in case a
-0000d6b0: 2073 7472 7563 7420 6861 7320 6e6f 2061   struct has no a
-0000d6c0: 7272 6179 730d 0a20 2020 2020 2020 2069  rrays..        i
-0000d6d0: 6620 6c65 6e28 6461 7461 2920 3d3d 2030  f len(data) == 0
-0000d6e0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-0000d6f0: 6574 7572 6e20 5374 7275 6374 287b 7d29  eturn Struct({})
-0000d700: 0d0a 0d0a 2020 2020 2020 2020 616c 6c5f  ....        all_
-0000d710: 7374 7273 203d 205b 5d0d 0a20 2020 2020  strs = []..     
-0000d720: 2020 2066 6f72 206e 2c20 6172 7269 6e66     for n, arrinf
-0000d730: 6f20 696e 2064 6174 612e 6974 656d 7328  o in data.items(
-0000d740: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0000d750: 696e 666f 5f73 7472 203d 2063 6c73 2e5f  info_str = cls._
-0000d760: 6172 7261 795f 696e 666f 5f6c 6973 7428  array_info_list(
-0000d770: 6172 7269 6e66 6f29 0d0a 2020 2020 2020  arrinfo)..      
-0000d780: 2020 2020 2020 616c 6c5f 7374 7273 2e61        all_strs.a
-0000d790: 7070 656e 6428 696e 666f 5f73 7472 290d  ppend(info_str).
-0000d7a0: 0a20 2020 2020 2020 2020 2020 2023 2061  .            # a
-0000d7b0: 6464 2066 6c61 6720 696e 666f 0d0a 0d0a  dd flag info....
-0000d7c0: 2020 2020 2020 2020 2320 6361 6c63 206d          # calc m
-0000d7d0: 6178 2077 6964 7468 730d 0a20 2020 2020  ax widths..     
-0000d7e0: 2020 206e 756d 5f66 6965 6c64 7320 3d20     num_fields = 
-0000d7f0: 6c65 6e28 616c 6c5f 7374 7273 5b30 5d29  len(all_strs[0])
-0000d800: 0d0a 2020 2020 2020 2020 6d61 785f 7769  ..        max_wi
-0000d810: 6474 6873 203d 205b 5d0d 0a20 2020 2020  dths = []..     
-0000d820: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
-0000d830: 6528 6e75 6d5f 6669 656c 6473 293a 0d0a  e(num_fields):..
-0000d840: 2020 2020 2020 2020 2020 2020 6d61 785f              max_
-0000d850: 6c65 6e20 3d20 6c65 6e28 6d61 7828 5b69  len = len(max([i
-0000d860: 6e66 6f5b 695d 2066 6f72 2069 6e66 6f20  nfo[i] for info 
-0000d870: 696e 2061 6c6c 5f73 7472 735d 2c20 6b65  in all_strs], ke
-0000d880: 793d 6c65 6e29 290d 0a20 2020 2020 2020  y=len))..       
-0000d890: 2020 2020 206d 6178 5f77 6964 7468 732e       max_widths.
-0000d8a0: 6170 7065 6e64 286d 6178 5f6c 656e 290d  append(max_len).
-0000d8b0: 0a0d 0a20 2020 2020 2020 2023 2066 6978  ...        # fix
-0000d8c0: 2061 6c69 676e 6d65 6e74 2066 6f72 2063   alignment for c
-0000d8d0: 6f6e 736f 6c65 2064 6973 706c 6179 0d0a  onsole display..
-0000d8e0: 2020 2020 2020 2020 6669 6e61 6c5f 7375          final_su
-0000d8f0: 6d6d 6172 6965 7320 3d20 636c 732e 5f61  mmaries = cls._a
-0000d900: 6c69 676e 5f61 7272 6179 5f69 6e66 6f28  lign_array_info(
-0000d910: 616c 6c5f 7374 7273 2c20 6d61 785f 7769  all_strs, max_wi
-0000d920: 6474 6873 290d 0a0d 0a20 2020 2020 2020  dths)....       
-0000d930: 2023 2062 7569 6c64 2074 656d 7020 7374   # build temp st
-0000d940: 7275 6374 0d0a 2020 2020 2020 2020 7265  ruct..        re
-0000d950: 7375 6c74 203d 2053 7472 7563 7428 7b6e  sult = Struct({n
-0000d960: 3a20 6669 6e61 6c5f 7375 6d6d 6172 6965  : final_summarie
-0000d970: 735b 6964 785d 2066 6f72 2069 6478 2c20  s[idx] for idx, 
-0000d980: 6e20 696e 2065 6e75 6d65 7261 7465 2864  n in enumerate(d
-0000d990: 6174 612e 6b65 7973 2829 297d 290d 0a20  ata.keys())}).. 
-0000d9a0: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-0000d9b0: 7375 6c74 0d0a 0d0a 2020 2020 2020 2020  sult....        
-0000d9c0: 2323 2020 7265 7475 726e 2073 7472 7563  ##  return struc
-0000d9d0: 7420 6f66 2073 756d 6d61 7279 2073 7472  t of summary str
-0000d9e0: 696e 6773 0d0a 2020 2020 2020 2020 2320  ings..        # 
-0000d9f0: 7265 7475 726e 2072 6573 756c 742e 7472  return result.tr
-0000da00: 6565 286e 616d 653d 6e61 6d65 290d 0a0d  ee(name=name)...
-0000da10: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+0000d490: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 4063  --------..    @c
+0000d4a0: 6c61 7373 6d65 7468 6f64 0d0a 2020 2020  lassmethod..    
+0000d4b0: 6465 6620 5f61 7272 6179 5f73 756d 6d61  def _array_summa
+0000d4c0: 7279 2863 6c73 2c20 6461 7461 2c20 6e61  ry(cls, data, na
+0000d4d0: 6d65 3d4e 6f6e 6529 3a0d 0a20 2020 2020  me=None):..     
+0000d4e0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+0000d4f0: 3a70 6172 616d 2064 6174 613a 2054 7570  :param data: Tup
+0000d500: 6c65 206f 6620 6172 7261 7920 696e 666f  le of array info
+0000d510: 2066 726f 6d20 436f 6d70 7265 7373 696f   from Compressio
+0000d520: 6e54 7970 652e 496e 666f 0d0a 2020 2020  nType.Info..    
+0000d530: 2020 2020 2020 2020 7475 7031 3a20 2874          tup1: (t
+0000d540: 7570 6c65 2920 7368 6170 650d 0a20 2020  uple) shape..   
+0000d550: 2020 2020 2020 2020 2074 7570 323a 2028           tup2: (
+0000d560: 696e 7429 2064 7479 7065 2e6e 756d 0d0a  int) dtype.num..
+0000d570: 2020 2020 2020 2020 2020 2020 7475 7033              tup3
+0000d580: 3a20 2869 6e74 2920 6269 746d 6173 6b20  : (int) bitmask 
+0000d590: 666f 7220 6e75 6d70 7920 666c 6167 730d  for numpy flags.
+0000d5a0: 0a20 2020 2020 2020 2020 2020 2074 7570  .            tup
+0000d5b0: 343a 2028 696e 7429 2069 7465 6d73 697a  4: (int) itemsiz
+0000d5c0: 650d 0a20 2020 2020 2020 203a 7061 7261  e..        :para
+0000d5d0: 6d20 6e61 6d65 3a20 4f70 7469 6f6e 616c  m name: Optional
+0000d5e0: 206e 616d 6520 666f 7220 746f 702d 6c65   name for top-le
+0000d5f0: 7665 6c20 5374 7275 6374 2e0d 0a0d 0a20  vel Struct..... 
+0000d600: 2020 2020 2020 2049 6e74 656e 616c 2072         Intenal r
+0000d610: 6f75 7469 6e65 2066 6f72 2074 7265 6520  outine for tree 
+0000d620: 6672 6f6d 206d 6574 6120 7375 6d6d 6172  from meta summar
+0000d630: 7920 2869 6e66 6f20 6f6e 6c79 2c20 6e6f  y (info only, no
+0000d640: 2061 7272 6179 7329 0d0a 0d0a 2020 2020   arrays)....    
+0000d650: 2020 2020 3a72 6574 7572 6e3a 2053 7472      :return: Str
+0000d660: 696e 6720 6f66 2061 7272 6179 2069 6e66  ing of array inf
+0000d670: 6f20 666f 7220 6120 7369 6e67 6c65 2073  o for a single s
+0000d680: 7472 7563 742e 0d0a 2020 2020 2020 2020  truct...        
+0000d690: 2222 220d 0a0d 0a20 2020 2020 2020 2023  """....        #
+0000d6a0: 2069 6e20 6361 7365 2061 2073 7472 7563   in case a struc
+0000d6b0: 7420 6861 7320 6e6f 2061 7272 6179 730d  t has no arrays.
+0000d6c0: 0a20 2020 2020 2020 2069 6620 6c65 6e28  .        if len(
+0000d6d0: 6461 7461 2920 3d3d 2030 3a0d 0a20 2020  data) == 0:..   
+0000d6e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0000d6f0: 5374 7275 6374 287b 7d29 0d0a 0d0a 2020  Struct({})....  
+0000d700: 2020 2020 2020 616c 6c5f 7374 7273 203d        all_strs =
+0000d710: 205b 5d0d 0a20 2020 2020 2020 2066 6f72   []..        for
+0000d720: 206e 2c20 6172 7269 6e66 6f20 696e 2064   n, arrinfo in d
+0000d730: 6174 612e 6974 656d 7328 293a 0d0a 2020  ata.items():..  
+0000d740: 2020 2020 2020 2020 2020 696e 666f 5f73            info_s
+0000d750: 7472 203d 2063 6c73 2e5f 6172 7261 795f  tr = cls._array_
+0000d760: 696e 666f 5f6c 6973 7428 6172 7269 6e66  info_list(arrinf
+0000d770: 6f29 0d0a 2020 2020 2020 2020 2020 2020  o)..            
+0000d780: 616c 6c5f 7374 7273 2e61 7070 656e 6428  all_strs.append(
+0000d790: 696e 666f 5f73 7472 290d 0a20 2020 2020  info_str)..     
+0000d7a0: 2020 2020 2020 2023 2061 6464 2066 6c61         # add fla
+0000d7b0: 6720 696e 666f 0d0a 0d0a 2020 2020 2020  g info....      
+0000d7c0: 2020 2320 6361 6c63 206d 6178 2077 6964    # calc max wid
+0000d7d0: 7468 730d 0a20 2020 2020 2020 206e 756d  ths..        num
+0000d7e0: 5f66 6965 6c64 7320 3d20 6c65 6e28 616c  _fields = len(al
+0000d7f0: 6c5f 7374 7273 5b30 5d29 0d0a 2020 2020  l_strs[0])..    
+0000d800: 2020 2020 6d61 785f 7769 6474 6873 203d      max_widths =
+0000d810: 205b 5d0d 0a20 2020 2020 2020 2066 6f72   []..        for
+0000d820: 2069 2069 6e20 7261 6e67 6528 6e75 6d5f   i in range(num_
+0000d830: 6669 656c 6473 293a 0d0a 2020 2020 2020  fields):..      
+0000d840: 2020 2020 2020 6d61 785f 6c65 6e20 3d20        max_len = 
+0000d850: 6c65 6e28 6d61 7828 5b69 6e66 6f5b 695d  len(max([info[i]
+0000d860: 2066 6f72 2069 6e66 6f20 696e 2061 6c6c   for info in all
+0000d870: 5f73 7472 735d 2c20 6b65 793d 6c65 6e29  _strs], key=len)
+0000d880: 290d 0a20 2020 2020 2020 2020 2020 206d  )..            m
+0000d890: 6178 5f77 6964 7468 732e 6170 7065 6e64  ax_widths.append
+0000d8a0: 286d 6178 5f6c 656e 290d 0a0d 0a20 2020  (max_len)....   
+0000d8b0: 2020 2020 2023 2066 6978 2061 6c69 676e       # fix align
+0000d8c0: 6d65 6e74 2066 6f72 2063 6f6e 736f 6c65  ment for console
+0000d8d0: 2064 6973 706c 6179 0d0a 2020 2020 2020   display..      
+0000d8e0: 2020 6669 6e61 6c5f 7375 6d6d 6172 6965    final_summarie
+0000d8f0: 7320 3d20 636c 732e 5f61 6c69 676e 5f61  s = cls._align_a
+0000d900: 7272 6179 5f69 6e66 6f28 616c 6c5f 7374  rray_info(all_st
+0000d910: 7273 2c20 6d61 785f 7769 6474 6873 290d  rs, max_widths).
+0000d920: 0a0d 0a20 2020 2020 2020 2023 2062 7569  ...        # bui
+0000d930: 6c64 2074 656d 7020 7374 7275 6374 0d0a  ld temp struct..
+0000d940: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+0000d950: 2053 7472 7563 7428 7b6e 3a20 6669 6e61   Struct({n: fina
+0000d960: 6c5f 7375 6d6d 6172 6965 735b 6964 785d  l_summaries[idx]
+0000d970: 2066 6f72 2069 6478 2c20 6e20 696e 2065   for idx, n in e
+0000d980: 6e75 6d65 7261 7465 2864 6174 612e 6b65  numerate(data.ke
+0000d990: 7973 2829 297d 290d 0a20 2020 2020 2020  ys())})..       
+0000d9a0: 2072 6574 7572 6e20 7265 7375 6c74 0d0a   return result..
+0000d9b0: 0d0a 2020 2020 2020 2020 2323 2020 7265  ..        ##  re
+0000d9c0: 7475 726e 2073 7472 7563 7420 6f66 2073  turn struct of s
+0000d9d0: 756d 6d61 7279 2073 7472 696e 6773 0d0a  ummary strings..
+0000d9e0: 2020 2020 2020 2020 2320 7265 7475 726e          # return
+0000d9f0: 2072 6573 756c 742e 7472 6565 286e 616d   result.tree(nam
+0000da00: 653d 6e61 6d65 290d 0a0d 0a20 2020 2023  e=name)....    #
+0000da10: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
 0000da20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000da30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000da40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
-0000da50: 2020 2020 4063 6c61 7373 6d65 7468 6f64      @classmethod
-0000da60: 0d0a 2020 2020 6465 6620 5f61 6c69 676e  ..    def _align
-0000da70: 5f61 7272 6179 5f69 6e66 6f28 636c 732c  _array_info(cls,
-0000da80: 2061 6c6c 696e 666f 2c20 6d61 7877 6964   allinfo, maxwid
-0000da90: 7468 7329 3a0d 0a0d 0a20 2020 2020 2020  ths):....       
-0000daa0: 2066 696e 616c 696e 666f 203d 205b 5d0d   finalinfo = [].
-0000dab0: 0a20 2020 2020 2020 2066 6f72 2061 7272  .        for arr
-0000dac0: 696e 666f 2069 6e20 616c 6c69 6e66 6f3a  info in allinfo:
-0000dad0: 0d0a 2020 2020 2020 2020 2020 2020 6e65  ..            ne
-0000dae0: 7769 6e66 6f20 3d20 5b5d 0d0a 2020 2020  winfo = []..    
-0000daf0: 2020 2020 2020 2020 666f 7220 6964 782c          for idx,
-0000db00: 2069 7465 6d20 696e 2065 6e75 6d65 7261   item in enumera
-0000db10: 7465 2861 7272 696e 666f 293a 0d0a 2020  te(arrinfo):..  
-0000db20: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-0000db30: 6464 696e 6720 3d20 2220 220d 0a20 2020  dding = " "..   
-0000db40: 2020 2020 2020 2020 2020 2020 2070 6164               pad
-0000db50: 6469 6e67 202a 3d20 6d61 7877 6964 7468  ding *= maxwidth
-0000db60: 735b 6964 785d 202d 206c 656e 2869 7465  s[idx] - len(ite
-0000db70: 6d29 202b 2031 0d0a 2020 2020 2020 2020  m) + 1..        
-0000db80: 2020 2020 2020 2020 6e65 7769 6e66 6f2e          newinfo.
-0000db90: 6170 7065 6e64 2869 7465 6d20 2b20 7061  append(item + pa
-0000dba0: 6464 696e 6729 0d0a 2020 2020 2020 2020  dding)..        
-0000dbb0: 2020 2020 6669 6e61 6c69 6e66 6f2e 6170      finalinfo.ap
-0000dbc0: 7065 6e64 2822 2022 2e6a 6f69 6e28 6e65  pend(" ".join(ne
-0000dbd0: 7769 6e66 6f29 290d 0a0d 0a20 2020 2020  winfo))....     
-0000dbe0: 2020 2072 6574 7572 6e20 6669 6e61 6c69     return finali
-0000dbf0: 6e66 6f0d 0a0d 0a20 2020 2023 202d 2d2d  nfo....    # ---
+0000da40: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 4063  --------..    @c
+0000da50: 6c61 7373 6d65 7468 6f64 0d0a 2020 2020  lassmethod..    
+0000da60: 6465 6620 5f61 6c69 676e 5f61 7272 6179  def _align_array
+0000da70: 5f69 6e66 6f28 636c 732c 2061 6c6c 696e  _info(cls, allin
+0000da80: 666f 2c20 6d61 7877 6964 7468 7329 3a0d  fo, maxwidths):.
+0000da90: 0a20 2020 2020 2020 2066 696e 616c 696e  .        finalin
+0000daa0: 666f 203d 205b 5d0d 0a20 2020 2020 2020  fo = []..       
+0000dab0: 2066 6f72 2061 7272 696e 666f 2069 6e20   for arrinfo in 
+0000dac0: 616c 6c69 6e66 6f3a 0d0a 2020 2020 2020  allinfo:..      
+0000dad0: 2020 2020 2020 6e65 7769 6e66 6f20 3d20        newinfo = 
+0000dae0: 5b5d 0d0a 2020 2020 2020 2020 2020 2020  []..            
+0000daf0: 666f 7220 6964 782c 2069 7465 6d20 696e  for idx, item in
+0000db00: 2065 6e75 6d65 7261 7465 2861 7272 696e   enumerate(arrin
+0000db10: 666f 293a 0d0a 2020 2020 2020 2020 2020  fo):..          
+0000db20: 2020 2020 2020 7061 6464 696e 6720 3d20        padding = 
+0000db30: 2220 220d 0a20 2020 2020 2020 2020 2020  " "..           
+0000db40: 2020 2020 2070 6164 6469 6e67 202a 3d20       padding *= 
+0000db50: 6d61 7877 6964 7468 735b 6964 785d 202d  maxwidths[idx] -
+0000db60: 206c 656e 2869 7465 6d29 202b 2031 0d0a   len(item) + 1..
+0000db70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000db80: 6e65 7769 6e66 6f2e 6170 7065 6e64 2869  newinfo.append(i
+0000db90: 7465 6d20 2b20 7061 6464 696e 6729 0d0a  tem + padding)..
+0000dba0: 2020 2020 2020 2020 2020 2020 6669 6e61              fina
+0000dbb0: 6c69 6e66 6f2e 6170 7065 6e64 2822 2022  linfo.append(" "
+0000dbc0: 2e6a 6f69 6e28 6e65 7769 6e66 6f29 290d  .join(newinfo)).
+0000dbd0: 0a0d 0a20 2020 2020 2020 2072 6574 7572  ...        retur
+0000dbe0: 6e20 6669 6e61 6c69 6e66 6f0d 0a0d 0a20  n finalinfo.... 
+0000dbf0: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
 0000dc00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000dc10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000dc20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000dc30: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 205f  -----..    def _
-0000dc40: 636f 7079 2873 656c 662c 2064 6565 703a  copy(self, deep:
-0000dc50: 2062 6f6f 6c20 3d20 4661 6c73 652c 2063   bool = False, c
-0000dc60: 6c73 3a20 4f70 7469 6f6e 616c 5b74 7970  ls: Optional[typ
-0000dc70: 655d 203d 204e 6f6e 6529 3a0d 0a20 2020  e] = None):..   
-0000dc80: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-0000dc90: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
-0000dca0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-0000dcb0: 0d0a 2020 2020 2020 2020 6465 6570 203a  ..        deep :
-0000dcc0: 2062 6f6f 6c2c 2064 6566 6175 6c74 2054   bool, default T
-0000dcd0: 7275 650d 0a20 2020 2020 2020 2020 2020  rue..           
-0000dce0: 6966 2054 7275 652c 2070 6572 666f 726d  if True, perform
-0000dcf0: 2061 2064 6565 7020 636f 7079 2063 616c   a deep copy cal
-0000dd00: 6c69 6e67 2065 6163 6820 6f62 6a65 6374  ling each object
-0000dd10: 2064 6570 7468 2066 6972 7374 2077 6974   depth first wit
-0000dd20: 6820 6060 2e63 6f70 7928 5472 7565 2960  h ``.copy(True)`
-0000dd30: 600d 0a20 2020 2020 2020 2020 2020 6966  `..           if
-0000dd40: 2046 616c 7365 2c20 6120 7368 616c 6c6f   False, a shallo
-0000dd50: 7720 6060 2e63 6f70 7928 4661 6c73 6529  w ``.copy(False)
-0000dd60: 6060 2069 7320 6361 6c6c 6564 2c20 6f66  `` is called, of
-0000dd70: 7465 6e20 6a75 7374 2063 6f70 7969 6e67  ten just copying
-0000dd80: 2074 6865 2063 6f6e 7461 696e 6572 7320   the containers 
-0000dd90: 6469 6374 2e0d 0a0d 0a20 2020 2020 2020  dict.....       
-0000dda0: 2063 6c73 203a 2074 7970 652c 206f 7074   cls : type, opt
-0000ddb0: 696f 6e61 6c0d 0a20 2020 2020 2020 2020  ional..         
-0000ddc0: 2020 2043 6c61 7373 206f 6620 7265 7475     Class of retu
-0000ddd0: 726e 2074 7970 652c 2066 6f72 2073 7562  rn type, for sub
-0000dde0: 636c 6173 7320 7375 7065 7228 2920 6361  class super() ca
-0000ddf0: 6c6c 730d 0a0d 0a20 2020 2020 2020 2046  lls....        F
-0000de00: 6972 7374 2061 7267 756d 656e 7420 6d75  irst argument mu
-0000de10: 7374 2062 6520 6465 6570 2e20 2044 6565  st be deep.  Dee
-0000de20: 7020 6361 6e6e 6e6f 7420 6265 2073 6574  p cannnot be set
-0000de30: 2074 6f20 4e6f 6e65 2e20 2049 7420 6d75   to None.  It mu
-0000de40: 7374 2062 6520 5472 7565 206f 7220 4661  st be True or Fa
-0000de50: 6c73 652e 0d0a 2020 2020 2020 2020 2222  lse...        ""
-0000de60: 220d 0a20 2020 2020 2020 2069 6620 636c  "..        if cl
-0000de70: 7320 6973 204e 6f6e 653a 0d0a 2020 2020  s is None:..    
-0000de80: 2020 2020 2020 2020 636c 7320 3d20 7479          cls = ty
-0000de90: 7065 2873 656c 6629 0d0a 0d0a 2020 2020  pe(self)....    
-0000dea0: 2020 2020 7374 203d 2053 7472 7563 7428      st = Struct(
-0000deb0: 7b7d 290d 0a20 2020 2020 2020 2073 745f  {})..        st_
-0000dec0: 6c6f 636b 6564 203d 2073 656c 662e 6973  locked = self.is
-0000ded0: 5f6c 6f63 6b65 6428 290d 0a20 2020 2020  _locked()..     
-0000dee0: 2020 2069 6620 7374 5f6c 6f63 6b65 643a     if st_locked:
-0000def0: 0d0a 2020 2020 2020 2020 2020 2020 7374  ..            st
-0000df00: 2e5f 756e 6c6f 636b 2829 0d0a 0d0a 2020  ._unlock()....  
-0000df10: 2020 2020 2020 666f 7220 6e61 6d65 2c20        for name, 
-0000df20: 6f62 6a20 696e 2073 656c 662e 6974 656d  obj in self.item
-0000df30: 7328 293a 0d0a 2020 2020 2020 2020 2020  s():..          
-0000df40: 2020 6966 2064 6565 703a 0d0a 2020 2020    if deep:..    
-0000df50: 2020 2020 2020 2020 2020 2020 2320 7472              # tr
-0000df60: 7920 7661 7279 696e 6720 6f72 6465 7220  y varying order 
-0000df70: 6f66 2063 6f70 790d 0a20 2020 2020 2020  of copy..       
-0000df80: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
-0000df90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dfa0: 2020 2073 745b 6e61 6d65 5d20 3d20 6f62     st[name] = ob
-0000dfb0: 6a2e 636f 7079 2864 6565 703d 6465 6570  j.copy(deep=deep
-0000dfc0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0000dfd0: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-0000dfe0: 696f 6e3a 0d0a 2020 2020 2020 2020 2020  ion:..          
-0000dff0: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
+0000dc20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
+0000dc30: 2020 2064 6566 205f 636f 7079 2873 656c     def _copy(sel
+0000dc40: 662c 2064 6565 703a 2062 6f6f 6c20 3d20  f, deep: bool = 
+0000dc50: 4661 6c73 652c 2063 6c73 3a20 4f70 7469  False, cls: Opti
+0000dc60: 6f6e 616c 5b74 7970 655d 203d 204e 6f6e  onal[type] = Non
+0000dc70: 6529 3a0d 0a20 2020 2020 2020 2022 2222  e):..        """
+0000dc80: 0d0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
+0000dc90: 7465 7273 0d0a 2020 2020 2020 2020 2d2d  ters..        --
+0000dca0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+0000dcb0: 2020 6465 6570 203a 2062 6f6f 6c2c 2064    deep : bool, d
+0000dcc0: 6566 6175 6c74 2054 7275 650d 0a20 2020  efault True..   
+0000dcd0: 2020 2020 2020 2020 6966 2054 7275 652c          if True,
+0000dce0: 2070 6572 666f 726d 2061 2064 6565 7020   perform a deep 
+0000dcf0: 636f 7079 2063 616c 6c69 6e67 2065 6163  copy calling eac
+0000dd00: 6820 6f62 6a65 6374 2064 6570 7468 2066  h object depth f
+0000dd10: 6972 7374 2077 6974 6820 6060 2e63 6f70  irst with ``.cop
+0000dd20: 7928 5472 7565 2960 600d 0a20 2020 2020  y(True)``..     
+0000dd30: 2020 2020 2020 6966 2046 616c 7365 2c20        if False, 
+0000dd40: 6120 7368 616c 6c6f 7720 6060 2e63 6f70  a shallow ``.cop
+0000dd50: 7928 4661 6c73 6529 6060 2069 7320 6361  y(False)`` is ca
+0000dd60: 6c6c 6564 2c20 6f66 7465 6e20 6a75 7374  lled, often just
+0000dd70: 2063 6f70 7969 6e67 2074 6865 2063 6f6e   copying the con
+0000dd80: 7461 696e 6572 7320 6469 6374 2e0d 0a0d  tainers dict....
+0000dd90: 0a20 2020 2020 2020 2063 6c73 203a 2074  .        cls : t
+0000dda0: 7970 652c 206f 7074 696f 6e61 6c0d 0a20  ype, optional.. 
+0000ddb0: 2020 2020 2020 2020 2020 2043 6c61 7373             Class
+0000ddc0: 206f 6620 7265 7475 726e 2074 7970 652c   of return type,
+0000ddd0: 2066 6f72 2073 7562 636c 6173 7320 7375   for subclass su
+0000dde0: 7065 7228 2920 6361 6c6c 730d 0a0d 0a20  per() calls.... 
+0000ddf0: 2020 2020 2020 2046 6972 7374 2061 7267         First arg
+0000de00: 756d 656e 7420 6d75 7374 2062 6520 6465  ument must be de
+0000de10: 6570 2e20 2044 6565 7020 6361 6e6e 6e6f  ep.  Deep cannno
+0000de20: 7420 6265 2073 6574 2074 6f20 4e6f 6e65  t be set to None
+0000de30: 2e20 2049 7420 6d75 7374 2062 6520 5472  .  It must be Tr
+0000de40: 7565 206f 7220 4661 6c73 652e 0d0a 2020  ue or False...  
+0000de50: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+0000de60: 2020 2069 6620 636c 7320 6973 204e 6f6e     if cls is Non
+0000de70: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0000de80: 636c 7320 3d20 7479 7065 2873 656c 6629  cls = type(self)
+0000de90: 0d0a 0d0a 2020 2020 2020 2020 7374 203d  ....        st =
+0000dea0: 2053 7472 7563 7428 7b7d 290d 0a20 2020   Struct({})..   
+0000deb0: 2020 2020 2073 745f 6c6f 636b 6564 203d       st_locked =
+0000dec0: 2073 656c 662e 6973 5f6c 6f63 6b65 6428   self.is_locked(
+0000ded0: 290d 0a20 2020 2020 2020 2069 6620 7374  )..        if st
+0000dee0: 5f6c 6f63 6b65 643a 0d0a 2020 2020 2020  _locked:..      
+0000def0: 2020 2020 2020 7374 2e5f 756e 6c6f 636b        st._unlock
+0000df00: 2829 0d0a 0d0a 2020 2020 2020 2020 666f  ()....        fo
+0000df10: 7220 6e61 6d65 2c20 6f62 6a20 696e 2073  r name, obj in s
+0000df20: 656c 662e 6974 656d 7328 293a 0d0a 2020  elf.items():..  
+0000df30: 2020 2020 2020 2020 2020 6966 2064 6565            if dee
+0000df40: 703a 0d0a 2020 2020 2020 2020 2020 2020  p:..            
+0000df50: 2020 2020 2320 7472 7920 7661 7279 696e      # try varyin
+0000df60: 6720 6f72 6465 7220 6f66 2063 6f70 790d  g order of copy.
+0000df70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000df80: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+0000df90: 2020 2020 2020 2020 2020 2073 745b 6e61             st[na
+0000dfa0: 6d65 5d20 3d20 6f62 6a2e 636f 7079 2864  me] = obj.copy(d
+0000dfb0: 6565 703d 6465 6570 290d 0a20 2020 2020  eep=deep)..     
+0000dfc0: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+0000dfd0: 7420 4578 6365 7074 696f 6e3a 0d0a 2020  t Exception:..  
+0000dfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dff0: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
 0000e000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e010: 2020 2020 2020 2020 7374 5b6e 616d 655d          st[name]
-0000e020: 203d 206f 626a 2e63 6f70 7928 290d 0a20   = obj.copy().. 
-0000e030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e040: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-0000e050: 696f 6e3a 0d0a 2020 2020 2020 2020 2020  ion:..          
-0000e060: 2020 2020 2020 2020 2020 2020 2020 7374                st
-0000e070: 5b6e 616d 655d 203d 206f 626a 0d0a 2020  [name] = obj..  
-0000e080: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-0000e090: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000e0a0: 2073 745b 6e61 6d65 5d20 3d20 6f62 6a0d   st[name] = obj.
-0000e0b0: 0a0d 0a20 2020 2020 2020 2069 6620 7374  ...        if st
-0000e0c0: 5f6c 6f63 6b65 643a 0d0a 2020 2020 2020  _locked:..      
-0000e0d0: 2020 2020 2020 7374 2e5f 6c6f 636b 2829        st._lock()
-0000e0e0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-0000e0f0: 2073 740d 0a0d 0a20 2020 2023 202d 2d2d   st....    # ---
+0000e010: 7374 5b6e 616d 655d 203d 206f 626a 2e63  st[name] = obj.c
+0000e020: 6f70 7928 290d 0a20 2020 2020 2020 2020  opy()..         
+0000e030: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+0000e040: 7420 4578 6365 7074 696f 6e3a 0d0a 2020  t Exception:..  
+0000e050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e060: 2020 2020 2020 7374 5b6e 616d 655d 203d        st[name] =
+0000e070: 206f 626a 0d0a 2020 2020 2020 2020 2020   obj..          
+0000e080: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+0000e090: 2020 2020 2020 2020 2073 745b 6e61 6d65           st[name
+0000e0a0: 5d20 3d20 6f62 6a0d 0a0d 0a20 2020 2020  ] = obj....     
+0000e0b0: 2020 2069 6620 7374 5f6c 6f63 6b65 643a     if st_locked:
+0000e0c0: 0d0a 2020 2020 2020 2020 2020 2020 7374  ..            st
+0000e0d0: 2e5f 6c6f 636b 2829 0d0a 2020 2020 2020  ._lock()..      
+0000e0e0: 2020 7265 7475 726e 2073 740d 0a0d 0a20    return st.... 
+0000e0f0: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
 0000e100: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000e110: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e120: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e130: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2063  -----..    def c
-0000e140: 6f70 7928 7365 6c66 2c20 6465 6570 3a20  opy(self, deep: 
-0000e150: 626f 6f6c 203d 2054 7275 6529 3a0d 0a20  bool = True):.. 
-0000e160: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-0000e170: 2020 2020 5265 7475 726e 7320 6120 7368      Returns a sh
-0000e180: 616c 6c6f 7720 6f72 2064 6565 7020 636f  allow or deep co
-0000e190: 7079 206f 6620 7468 6520 6053 7472 7563  py of the `Struc
-0000e1a0: 7460 2e0d 0a20 2020 2020 2020 2044 6566  t`...        Def
-0000e1b0: 6175 6c74 7320 746f 2061 2064 6565 7020  aults to a deep 
-0000e1c0: 636f 7079 2e0d 0a0d 0a20 2020 2020 2020  copy.....       
-0000e1d0: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
-0000e1e0: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
-0000e1f0: 0a20 2020 2020 2020 2064 6565 7020 3a20  .        deep : 
-0000e200: 626f 6f6c 2c20 6465 6661 756c 7420 5472  bool, default Tr
-0000e210: 7565 0d0a 2020 2020 2020 2020 2020 2069  ue..           i
-0000e220: 6620 5472 7565 2c20 7065 7266 6f72 6d20  f True, perform 
-0000e230: 6120 6465 6570 2063 6f70 7920 6361 6c6c  a deep copy call
-0000e240: 696e 6720 6561 6368 206f 626a 6563 7420  ing each object 
-0000e250: 6465 7074 6820 6669 7273 7420 7769 7468  depth first with
-0000e260: 2060 602e 636f 7079 2854 7275 6529 6060   ``.copy(True)``
-0000e270: 0d0a 2020 2020 2020 2020 2020 2069 6620  ..           if 
-0000e280: 4661 6c73 652c 2061 2073 6861 6c6c 6f77  False, a shallow
-0000e290: 2060 602e 636f 7079 2846 616c 7365 2960   ``.copy(False)`
-0000e2a0: 6020 6973 2063 616c 6c65 642c 206f 6674  ` is called, oft
-0000e2b0: 656e 206a 7573 7420 636f 7079 696e 6720  en just copying 
-0000e2c0: 7468 6520 636f 6e74 6169 6e65 7273 2064  the containers d
-0000e2d0: 6963 742e 0d0a 0d0a 2020 2020 2020 2020  ict.....        
-0000e2e0: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
-0000e2f0: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-0000e300: 2020 2020 3e3e 3e20 6473 3d72 742e 4461      >>> ds=rt.Da
-0000e310: 7461 7365 7428 7b27 736f 6d65 6e61 6e73  taset({'somenans
-0000e320: 273a 205b 302e 2c20 312e 2c20 322e 2c20  ': [0., 1., 2., 
-0000e330: 6e61 6e2c 2034 2e2c 2035 2e5d 2c20 276d  nan, 4., 5.], 'm
-0000e340: 6f72 6573 7475 6666 273a 205b 2741 272c  orestuff': ['A',
-0000e350: 2742 272c 2743 272c 2744 272c 2745 272c  'B','C','D','E',
-0000e360: 2746 275d 7d29 0d0a 2020 2020 2020 2020  'F']})..        
-0000e370: 3e3e 3e20 6473 323d 7274 2e44 6174 6173  >>> ds2=rt.Datas
-0000e380: 6574 287b 2773 6f6d 656e 616e 7327 3a20  et({'somenans': 
-0000e390: 5b30 2e2c 2031 2e2c 206e 616e 2c20 332e  [0., 1., nan, 3.
-0000e3a0: 2c20 342e 2c20 352e 5d2c 2027 6d6f 7265  , 4., 5.], 'more
-0000e3b0: 7374 7566 6627 3a5b 2748 272c 2749 272c  stuff':['H','I',
-0000e3c0: 274a 272c 274b 272c 274c 272c 274d 275d  'J','K','L','M']
-0000e3d0: 7d29 0d0a 2020 2020 2020 2020 3e3e 3e20  })..        >>> 
-0000e3e0: 7374 3d53 7472 7563 7428 7b27 7465 7374  st=Struct({'test
-0000e3f0: 273a 6473 2c20 2774 6573 7432 273a 2053  ':ds, 'test2': S
-0000e400: 7472 7563 7428 7b27 6473 3227 3a64 7332  truct({'ds2':ds2
-0000e410: 7d29 2c20 2761 7272 273a 2061 7261 6e67  }), 'arr': arang
-0000e420: 6528 3130 297d 290d 0a20 2020 2020 2020  e(10)})..       
-0000e430: 203e 3e3e 2073 742e 636f 7079 2829 0d0a   >>> st.copy()..
-0000e440: 2020 2020 2020 2020 2320 2020 4e61 6d65          #   Name
-0000e450: 2020 2020 5479 7065 2020 2020 2020 5369      Type      Si
-0000e460: 7a65 2020 2020 2020 2020 2020 2020 2020  ze              
-0000e470: 3020 2020 2020 3120 2020 320d 0a20 2020  0     1   2..   
-0000e480: 2020 2020 202d 2020 202d 2d2d 2d2d 2020       -   -----  
-0000e490: 202d 2d2d 2d2d 2d2d 2020 202d 2d2d 2d2d   -------   -----
-0000e4a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2020 202d 2d2d  ----------   ---
-0000e4b0: 2020 202d 2020 202d 0d0a 2020 2020 2020     -   -..      
-0000e4c0: 2020 3020 2020 7465 7374 2020 2020 4461    0   test    Da
-0000e4d0: 7461 7365 7420 2020 3620 726f 7773 2078  taset   6 rows x
-0000e4e0: 2032 2063 6f6c 730d 0a20 2020 2020 2020   2 cols..       
-0000e4f0: 2031 2020 2074 6573 7432 2020 2053 7472   1   test2   Str
-0000e500: 7563 7420 2020 2031 2020 2020 2020 2020  uct    1        
-0000e510: 2020 2020 2020 2020 2064 7332 0d0a 2020           ds2..  
-0000e520: 2020 2020 2020 3220 2020 6172 7220 2020        2   arr   
-0000e530: 2020 696e 7433 3220 2020 2020 3130 2020    int32     10  
-0000e540: 2020 2020 2020 2020 2020 2020 2020 3020                0 
-0000e550: 2020 2020 3120 2020 320d 0a20 2020 2020      1   2..     
-0000e560: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-0000e570: 7265 7475 726e 2073 656c 662e 5f63 6f70  return self._cop
-0000e580: 7928 6465 6570 290d 0a0d 0a20 2020 2023  y(deep)....    #
-0000e590: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+0000e120: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
+0000e130: 2020 2064 6566 2063 6f70 7928 7365 6c66     def copy(self
+0000e140: 2c20 6465 6570 3a20 626f 6f6c 203d 2054  , deep: bool = T
+0000e150: 7275 6529 3a0d 0a20 2020 2020 2020 2022  rue):..        "
+0000e160: 2222 0d0a 2020 2020 2020 2020 5265 7475  ""..        Retu
+0000e170: 726e 7320 6120 7368 616c 6c6f 7720 6f72  rns a shallow or
+0000e180: 2064 6565 7020 636f 7079 206f 6620 7468   deep copy of th
+0000e190: 6520 6053 7472 7563 7460 2e0d 0a20 2020  e `Struct`...   
+0000e1a0: 2020 2020 2044 6566 6175 6c74 7320 746f       Defaults to
+0000e1b0: 2061 2064 6565 7020 636f 7079 2e0d 0a0d   a deep copy....
+0000e1c0: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
+0000e1d0: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
+0000e1e0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0000e1f0: 2064 6565 7020 3a20 626f 6f6c 2c20 6465   deep : bool, de
+0000e200: 6661 756c 7420 5472 7565 0d0a 2020 2020  fault True..    
+0000e210: 2020 2020 2020 2069 6620 5472 7565 2c20         if True, 
+0000e220: 7065 7266 6f72 6d20 6120 6465 6570 2063  perform a deep c
+0000e230: 6f70 7920 6361 6c6c 696e 6720 6561 6368  opy calling each
+0000e240: 206f 626a 6563 7420 6465 7074 6820 6669   object depth fi
+0000e250: 7273 7420 7769 7468 2060 602e 636f 7079  rst with ``.copy
+0000e260: 2854 7275 6529 6060 0d0a 2020 2020 2020  (True)``..      
+0000e270: 2020 2020 2069 6620 4661 6c73 652c 2061       if False, a
+0000e280: 2073 6861 6c6c 6f77 2060 602e 636f 7079   shallow ``.copy
+0000e290: 2846 616c 7365 2960 6020 6973 2063 616c  (False)`` is cal
+0000e2a0: 6c65 642c 206f 6674 656e 206a 7573 7420  led, often just 
+0000e2b0: 636f 7079 696e 6720 7468 6520 636f 6e74  copying the cont
+0000e2c0: 6169 6e65 7273 2064 6963 742e 0d0a 0d0a  ainers dict.....
+0000e2d0: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
+0000e2e0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+0000e2f0: 2d2d 0d0a 2020 2020 2020 2020 3e3e 3e20  --..        >>> 
+0000e300: 6473 3d72 742e 4461 7461 7365 7428 7b27  ds=rt.Dataset({'
+0000e310: 736f 6d65 6e61 6e73 273a 205b 302e 2c20  somenans': [0., 
+0000e320: 312e 2c20 322e 2c20 6e61 6e2c 2034 2e2c  1., 2., nan, 4.,
+0000e330: 2035 2e5d 2c20 276d 6f72 6573 7475 6666   5.], 'morestuff
+0000e340: 273a 205b 2741 272c 2742 272c 2743 272c  ': ['A','B','C',
+0000e350: 2744 272c 2745 272c 2746 275d 7d29 0d0a  'D','E','F']})..
+0000e360: 2020 2020 2020 2020 3e3e 3e20 6473 323d          >>> ds2=
+0000e370: 7274 2e44 6174 6173 6574 287b 2773 6f6d  rt.Dataset({'som
+0000e380: 656e 616e 7327 3a20 5b30 2e2c 2031 2e2c  enans': [0., 1.,
+0000e390: 206e 616e 2c20 332e 2c20 342e 2c20 352e   nan, 3., 4., 5.
+0000e3a0: 5d2c 2027 6d6f 7265 7374 7566 6627 3a5b  ], 'morestuff':[
+0000e3b0: 2748 272c 2749 272c 274a 272c 274b 272c  'H','I','J','K',
+0000e3c0: 274c 272c 274d 275d 7d29 0d0a 2020 2020  'L','M']})..    
+0000e3d0: 2020 2020 3e3e 3e20 7374 3d53 7472 7563      >>> st=Struc
+0000e3e0: 7428 7b27 7465 7374 273a 6473 2c20 2774  t({'test':ds, 't
+0000e3f0: 6573 7432 273a 2053 7472 7563 7428 7b27  est2': Struct({'
+0000e400: 6473 3227 3a64 7332 7d29 2c20 2761 7272  ds2':ds2}), 'arr
+0000e410: 273a 2061 7261 6e67 6528 3130 297d 290d  ': arange(10)}).
+0000e420: 0a20 2020 2020 2020 203e 3e3e 2073 742e  .        >>> st.
+0000e430: 636f 7079 2829 0d0a 2020 2020 2020 2020  copy()..        
+0000e440: 2320 2020 4e61 6d65 2020 2020 5479 7065  #   Name    Type
+0000e450: 2020 2020 2020 5369 7a65 2020 2020 2020        Size      
+0000e460: 2020 2020 2020 2020 3020 2020 2020 3120          0     1 
+0000e470: 2020 320d 0a20 2020 2020 2020 202d 2020    2..        -  
+0000e480: 202d 2d2d 2d2d 2020 202d 2d2d 2d2d 2d2d   -----   -------
+0000e490: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d     -------------
+0000e4a0: 2d2d 2020 202d 2d2d 2020 202d 2020 202d  --   ---   -   -
+0000e4b0: 0d0a 2020 2020 2020 2020 3020 2020 7465  ..        0   te
+0000e4c0: 7374 2020 2020 4461 7461 7365 7420 2020  st    Dataset   
+0000e4d0: 3620 726f 7773 2078 2032 2063 6f6c 730d  6 rows x 2 cols.
+0000e4e0: 0a20 2020 2020 2020 2031 2020 2074 6573  .        1   tes
+0000e4f0: 7432 2020 2053 7472 7563 7420 2020 2031  t2   Struct    1
+0000e500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e510: 2064 7332 0d0a 2020 2020 2020 2020 3220   ds2..        2 
+0000e520: 2020 6172 7220 2020 2020 696e 7433 3220    arr     int32 
+0000e530: 2020 2020 3130 2020 2020 2020 2020 2020      10          
+0000e540: 2020 2020 2020 3020 2020 2020 3120 2020        0     1   
+0000e550: 320d 0a20 2020 2020 2020 2022 2222 0d0a  2..        """..
+0000e560: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0000e570: 656c 662e 5f63 6f70 7928 6465 6570 290d  elf._copy(deep).
+0000e580: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+0000e590: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000e5a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000e5b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e5c0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 4063  --------..    @c
-0000e5d0: 6c61 7373 6d65 7468 6f64 0d0a 2020 2020  lassmethod..    
-0000e5e0: 6465 6620 636f 6e63 6174 5f73 7472 7563  def concat_struc
-0000e5f0: 7473 2863 6c73 2c20 7374 7275 6374 5f6c  ts(cls, struct_l
-0000e600: 6973 7429 3a0d 0a20 2020 2020 2020 2022  ist):..        "
-0000e610: 2222 4d65 7267 6573 2064 6174 6120 6672  ""Merges data fr
-0000e620: 6f6d 206d 756c 7469 706c 6520 7374 7275  om multiple stru
-0000e630: 6374 732e 0d0a 0d0a 2020 2020 2020 2020  cts.....        
-0000e640: 5374 7275 6374 7320 6d75 7374 2068 6176  Structs must hav
-0000e650: 6520 7468 6520 7361 6d65 206b 6579 732c  e the same keys,
-0000e660: 2061 6e64 2063 6f6e 7461 696e 206f 6e6c   and contain onl
-0000e670: 7920 5374 7275 6374 732c 2044 6174 6173  y Structs, Datas
-0000e680: 6574 732c 2061 7272 6179 732c 2061 6e64  ets, arrays, and
-0000e690: 2072 6970 7461 626c 6520 6172 7261 7973   riptable arrays
-0000e6a0: 2e0d 0a0d 0a20 2020 2020 2020 2041 2073  .....        A s
-0000e6b0: 7472 7563 7420 7574 696c 6974 7920 666f  truct utility fo
-0000e6c0: 7220 6d65 7267 696e 6720 6461 7461 2066  r merging data f
-0000e6d0: 726f 6d20 6d75 6c74 6970 6c65 2073 7472  rom multiple str
-0000e6e0: 7563 7473 2028 7573 6566 756c 2066 6f72  ucts (useful for
-0000e6f0: 206d 756c 7469 6461 7920 6c6f 6164 696e   multiday loadin
-0000e700: 6729 2e0d 0a20 2020 2020 2020 2053 7472  g)...        Str
-0000e710: 7563 7473 206d 7573 7420 6861 7665 2074  ucts must have t
-0000e720: 6865 2073 616d 6520 6b65 7973 2c20 616e  he same keys, an
-0000e730: 6420 636f 6e74 6169 6e20 6f6e 6c79 2053  d contain only S
-0000e740: 7472 7563 7473 2c20 4461 7461 7365 7473  tructs, Datasets
-0000e750: 2c20 4361 7465 676f 7269 6361 6c73 2c20  , Categoricals, 
-0000e760: 616e 6420 4e75 6d70 7920 4172 7261 7973  and Numpy Arrays
-0000e770: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
-0000e780: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
-0000e790: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
-0000e7a0: 2020 2020 2073 7472 7563 745f 6c69 7374       struct_list
-0000e7b0: 203a 206c 6973 7420 6f66 2060 5374 7275   : list of `Stru
-0000e7c0: 6374 600d 0a0d 0a20 2020 2020 2020 2052  ct`....        R
-0000e7d0: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
-0000e7e0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-0000e7f0: 206f 626a 3a60 5374 7275 6374 600d 0a0d   obj:`Struct`...
-0000e800: 0a20 2020 2020 2020 2053 6565 2041 6c73  .        See Als
-0000e810: 6f0d 0a20 2020 2020 2020 202d 2d2d 2d2d  o..        -----
-0000e820: 2d2d 2d0d 0a20 2020 2020 2020 203a 6675  ---..        :fu
-0000e830: 6e63 3a60 6873 7461 636b 600d 0a20 2020  nc:`hstack`..   
-0000e840: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-0000e850: 2020 7265 7475 726e 2063 6c73 2e68 7374    return cls.hst
-0000e860: 6163 6b28 7374 7275 6374 5f6c 6973 7429  ack(struct_list)
-0000e870: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+0000e5c0: 0d0a 2020 2020 4063 6c61 7373 6d65 7468  ..    @classmeth
+0000e5d0: 6f64 0d0a 2020 2020 6465 6620 636f 6e63  od..    def conc
+0000e5e0: 6174 5f73 7472 7563 7473 2863 6c73 2c20  at_structs(cls, 
+0000e5f0: 7374 7275 6374 5f6c 6973 7429 3a0d 0a20  struct_list):.. 
+0000e600: 2020 2020 2020 2022 2222 4d65 7267 6573         """Merges
+0000e610: 2064 6174 6120 6672 6f6d 206d 756c 7469   data from multi
+0000e620: 706c 6520 7374 7275 6374 732e 0d0a 0d0a  ple structs.....
+0000e630: 2020 2020 2020 2020 5374 7275 6374 7320          Structs 
+0000e640: 6d75 7374 2068 6176 6520 7468 6520 7361  must have the sa
+0000e650: 6d65 206b 6579 732c 2061 6e64 2063 6f6e  me keys, and con
+0000e660: 7461 696e 206f 6e6c 7920 5374 7275 6374  tain only Struct
+0000e670: 732c 2044 6174 6173 6574 732c 2061 7272  s, Datasets, arr
+0000e680: 6179 732c 2061 6e64 2072 6970 7461 626c  ays, and riptabl
+0000e690: 6520 6172 7261 7973 2e0d 0a0d 0a20 2020  e arrays.....   
+0000e6a0: 2020 2020 2041 2073 7472 7563 7420 7574       A struct ut
+0000e6b0: 696c 6974 7920 666f 7220 6d65 7267 696e  ility for mergin
+0000e6c0: 6720 6461 7461 2066 726f 6d20 6d75 6c74  g data from mult
+0000e6d0: 6970 6c65 2073 7472 7563 7473 2028 7573  iple structs (us
+0000e6e0: 6566 756c 2066 6f72 206d 756c 7469 6461  eful for multida
+0000e6f0: 7920 6c6f 6164 696e 6729 2e0d 0a20 2020  y loading)...   
+0000e700: 2020 2020 2053 7472 7563 7473 206d 7573       Structs mus
+0000e710: 7420 6861 7665 2074 6865 2073 616d 6520  t have the same 
+0000e720: 6b65 7973 2c20 616e 6420 636f 6e74 6169  keys, and contai
+0000e730: 6e20 6f6e 6c79 2053 7472 7563 7473 2c20  n only Structs, 
+0000e740: 4461 7461 7365 7473 2c20 4361 7465 676f  Datasets, Catego
+0000e750: 7269 6361 6c73 2c20 616e 6420 4e75 6d70  ricals, and Nump
+0000e760: 7920 4172 7261 7973 2e0d 0a0d 0a20 2020  y Arrays.....   
+0000e770: 2020 2020 2050 6172 616d 6574 6572 730d       Parameters.
+0000e780: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0000e790: 2d2d 2d0d 0a20 2020 2020 2020 2073 7472  ---..        str
+0000e7a0: 7563 745f 6c69 7374 203a 206c 6973 7420  uct_list : list 
+0000e7b0: 6f66 2060 5374 7275 6374 600d 0a0d 0a20  of `Struct`.... 
+0000e7c0: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+0000e7d0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+0000e7e0: 0a20 2020 2020 2020 206f 626a 3a60 5374  .        obj:`St
+0000e7f0: 7275 6374 600d 0a0d 0a20 2020 2020 2020  ruct`....       
+0000e800: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
+0000e810: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+0000e820: 2020 2020 203a 6675 6e63 3a60 6873 7461       :func:`hsta
+0000e830: 636b 600d 0a20 2020 2020 2020 2022 2222  ck`..        """
+0000e840: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+0000e850: 2063 6c73 2e68 7374 6163 6b28 7374 7275   cls.hstack(stru
+0000e860: 6374 5f6c 6973 7429 0d0a 0d0a 2020 2020  ct_list)....    
+0000e870: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
 0000e880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000e890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e8a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e8b0: 2d0d 0a20 2020 2040 636c 6173 736d 6574  -..    @classmet
-0000e8c0: 686f 640d 0a20 2020 2064 6566 2068 7374  hod..    def hst
-0000e8d0: 6163 6b28 636c 732c 2073 7472 7563 745f  ack(cls, struct_
-0000e8e0: 6c69 7374 293a 0d0a 2020 2020 2020 2020  list):..        
-0000e8f0: 2222 220d 0a20 2020 2020 2020 204d 6572  """..        Mer
-0000e900: 6765 7320 6461 7461 2066 726f 6d20 6d75  ges data from mu
-0000e910: 6c74 6970 6c65 2073 7472 7563 7473 2e0d  ltiple structs..
-0000e920: 0a20 2020 2020 2020 2053 7472 7563 7473  .        Structs
-0000e930: 206d 7573 7420 6861 7665 2074 6865 2073   must have the s
-0000e940: 616d 6520 6b65 7973 2c20 616e 6420 636f  ame keys, and co
-0000e950: 6e74 6169 6e20 6f6e 6c79 2053 7472 7563  ntain only Struc
-0000e960: 7473 2c20 4461 7461 7365 7473 2c20 6172  ts, Datasets, ar
-0000e970: 7261 7973 2c20 616e 6420 7269 7074 6162  rays, and riptab
-0000e980: 6c65 2061 7272 6179 732e 0d0a 0d0a 2020  le arrays.....  
-0000e990: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
-0000e9a0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-0000e9b0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 7374  ----..        st
-0000e9c0: 7275 6374 5f6c 6973 7420 3a20 6c69 7374  ruct_list : list
-0000e9d0: 206f 6620 6053 7472 7563 7460 0d0a 0d0a   of `Struct`....
-0000e9e0: 2020 2020 2020 2020 4120 7374 7275 6374          A struct
-0000e9f0: 2075 7469 6c69 7479 2066 6f72 206d 6572   utility for mer
-0000ea00: 6769 6e67 2064 6174 6120 6672 6f6d 206d  ging data from m
-0000ea10: 756c 7469 706c 6520 7374 7275 6374 7320  ultiple structs 
-0000ea20: 2875 7365 6675 6c20 666f 7220 6d75 6c74  (useful for mult
-0000ea30: 6964 6179 206c 6f61 6469 6e67 292e 0d0a  iday loading)...
-0000ea40: 2020 2020 2020 2020 5374 7275 6374 7320          Structs 
-0000ea50: 6d75 7374 2068 6176 6520 7468 6520 7361  must have the sa
-0000ea60: 6d65 206b 6579 732c 2061 6e64 2063 6f6e  me keys, and con
-0000ea70: 7461 696e 206f 6e6c 7920 5374 7275 6374  tain only Struct
-0000ea80: 732c 2044 6174 6173 6574 732c 2043 6174  s, Datasets, Cat
-0000ea90: 6567 6f72 6963 616c 732c 2061 6e64 204e  egoricals, and N
-0000eaa0: 756d 7079 2041 7272 6179 732e 0d0a 0d0a  umpy Arrays.....
-0000eab0: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
-0000eac0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-0000ead0: 0d0a 2020 2020 2020 2020 6f62 6a3a 6053  ..        obj:`S
-0000eae0: 7472 7563 7460 0d0a 0d0a 2020 2020 2020  truct`....      
-0000eaf0: 2020 5365 6520 416c 736f 0d0a 2020 2020    See Also..    
-0000eb00: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
-0000eb10: 2020 2020 2020 7269 7074 6162 6c65 2e68        riptable.h
-0000eb20: 7374 6163 6b0d 0a20 2020 2020 2020 2022  stack..        "
-0000eb30: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
-0000eb40: 726e 2068 7374 6163 6b5f 616e 7928 7374  rn hstack_any(st
-0000eb50: 7275 6374 5f6c 6973 742c 2063 6c73 2c20  ruct_list, cls, 
-0000eb60: 5374 7275 6374 290d 0a0d 0a20 2020 2023  Struct)....    #
-0000eb70: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+0000e8a0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2040  ---------..    @
+0000e8b0: 636c 6173 736d 6574 686f 640d 0a20 2020  classmethod..   
+0000e8c0: 2064 6566 2068 7374 6163 6b28 636c 732c   def hstack(cls,
+0000e8d0: 2073 7472 7563 745f 6c69 7374 293a 0d0a   struct_list):..
+0000e8e0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+0000e8f0: 2020 2020 204d 6572 6765 7320 6461 7461       Merges data
+0000e900: 2066 726f 6d20 6d75 6c74 6970 6c65 2073   from multiple s
+0000e910: 7472 7563 7473 2e0d 0a20 2020 2020 2020  tructs...       
+0000e920: 2053 7472 7563 7473 206d 7573 7420 6861   Structs must ha
+0000e930: 7665 2074 6865 2073 616d 6520 6b65 7973  ve the same keys
+0000e940: 2c20 616e 6420 636f 6e74 6169 6e20 6f6e  , and contain on
+0000e950: 6c79 2053 7472 7563 7473 2c20 4461 7461  ly Structs, Data
+0000e960: 7365 7473 2c20 6172 7261 7973 2c20 616e  sets, arrays, an
+0000e970: 6420 7269 7074 6162 6c65 2061 7272 6179  d riptable array
+0000e980: 732e 0d0a 0d0a 2020 2020 2020 2020 5061  s.....        Pa
+0000e990: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+0000e9a0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+0000e9b0: 2020 2020 2020 7374 7275 6374 5f6c 6973        struct_lis
+0000e9c0: 7420 3a20 6c69 7374 206f 6620 6053 7472  t : list of `Str
+0000e9d0: 7563 7460 0d0a 0d0a 2020 2020 2020 2020  uct`....        
+0000e9e0: 4120 7374 7275 6374 2075 7469 6c69 7479  A struct utility
+0000e9f0: 2066 6f72 206d 6572 6769 6e67 2064 6174   for merging dat
+0000ea00: 6120 6672 6f6d 206d 756c 7469 706c 6520  a from multiple 
+0000ea10: 7374 7275 6374 7320 2875 7365 6675 6c20  structs (useful 
+0000ea20: 666f 7220 6d75 6c74 6964 6179 206c 6f61  for multiday loa
+0000ea30: 6469 6e67 292e 0d0a 2020 2020 2020 2020  ding)...        
+0000ea40: 5374 7275 6374 7320 6d75 7374 2068 6176  Structs must hav
+0000ea50: 6520 7468 6520 7361 6d65 206b 6579 732c  e the same keys,
+0000ea60: 2061 6e64 2063 6f6e 7461 696e 206f 6e6c   and contain onl
+0000ea70: 7920 5374 7275 6374 732c 2044 6174 6173  y Structs, Datas
+0000ea80: 6574 732c 2043 6174 6567 6f72 6963 616c  ets, Categorical
+0000ea90: 732c 2061 6e64 204e 756d 7079 2041 7272  s, and Numpy Arr
+0000eaa0: 6179 732e 0d0a 0d0a 2020 2020 2020 2020  ays.....        
+0000eab0: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
+0000eac0: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
+0000ead0: 2020 6f62 6a3a 6053 7472 7563 7460 0d0a    obj:`Struct`..
+0000eae0: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
+0000eaf0: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
+0000eb00: 2d2d 2d2d 0d0a 2020 2020 2020 2020 7269  ----..        ri
+0000eb10: 7074 6162 6c65 2e68 7374 6163 6b0d 0a20  ptable.hstack.. 
+0000eb20: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+0000eb30: 2020 2020 7265 7475 726e 2068 7374 6163      return hstac
+0000eb40: 6b5f 616e 7928 7374 7275 6374 5f6c 6973  k_any(struct_lis
+0000eb50: 742c 2063 6c73 2c20 5374 7275 6374 290d  t, cls, Struct).
+0000eb60: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+0000eb70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000eb80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000eb90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000eba0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 4063  --------..    @c
-0000ebb0: 6c61 7373 6d65 7468 6f64 0d0a 2020 2020  lassmethod..    
-0000ebc0: 6465 6620 5f6c 6f61 645f 6672 6f6d 5f73  def _load_from_s
-0000ebd0: 6473 5f6d 6574 615f 6461 7461 5f6e 6573  ds_meta_data_nes
-0000ebe0: 7465 6428 636c 732c 206e 616d 652c 206d  ted(cls, name, m
-0000ebf0: 6574 612c 2061 7272 6469 6374 293a 0d0a  eta, arrdict):..
-0000ec00: 2020 2020 2020 2020 6473 5f73 7472 7563          ds_struc
-0000ec10: 7420 3d20 636c 7328 6172 7264 6963 7429  t = cls(arrdict)
-0000ec20: 0d0a 2020 2020 2020 2020 6473 5f73 7472  ..        ds_str
-0000ec30: 7563 742e 6c61 6265 6c5f 7365 745f 6e61  uct.label_set_na
-0000ec40: 6d65 7328 6d65 7461 5b22 6c61 6265 6c73  mes(meta["labels
-0000ec50: 225d 290d 0a20 2020 2020 2020 2072 6574  "])..        ret
-0000ec60: 7572 6e20 6473 5f73 7472 7563 740d 0a0d  urn ds_struct...
-0000ec70: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+0000eba0: 0d0a 2020 2020 4063 6c61 7373 6d65 7468  ..    @classmeth
+0000ebb0: 6f64 0d0a 2020 2020 6465 6620 5f6c 6f61  od..    def _loa
+0000ebc0: 645f 6672 6f6d 5f73 6473 5f6d 6574 615f  d_from_sds_meta_
+0000ebd0: 6461 7461 5f6e 6573 7465 6428 636c 732c  data_nested(cls,
+0000ebe0: 206e 616d 652c 206d 6574 612c 2061 7272   name, meta, arr
+0000ebf0: 6469 6374 293a 0d0a 2020 2020 2020 2020  dict):..        
+0000ec00: 6473 5f73 7472 7563 7420 3d20 636c 7328  ds_struct = cls(
+0000ec10: 6172 7264 6963 7429 0d0a 2020 2020 2020  arrdict)..      
+0000ec20: 2020 6473 5f73 7472 7563 742e 6c61 6265    ds_struct.labe
+0000ec30: 6c5f 7365 745f 6e61 6d65 7328 6d65 7461  l_set_names(meta
+0000ec40: 5b22 6c61 6265 6c73 225d 290d 0a20 2020  ["labels"])..   
+0000ec50: 2020 2020 2072 6574 7572 6e20 6473 5f73       return ds_s
+0000ec60: 7472 7563 740d 0a0d 0a20 2020 2023 202d  truct....    # -
+0000ec70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000ec80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000ec90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000eca0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
-0000ecb0: 2020 2020 4063 6c61 7373 6d65 7468 6f64      @classmethod
-0000ecc0: 0d0a 2020 2020 6465 6620 5f6c 6f61 645f  ..    def _load_
-0000ecd0: 6672 6f6d 5f73 6473 5f6d 6574 615f 6461  from_sds_meta_da
-0000ece0: 7461 2863 6c73 2c20 6d65 7461 2c20 6172  ta(cls, meta, ar
-0000ecf0: 7261 7973 2c20 6d65 7461 5f74 7570 733d  rays, meta_tups=
-0000ed00: 5b5d 2c20 6669 6c65 5f68 6561 6465 723d  [], file_header=
-0000ed10: 7b7d 2c20 696e 636c 7564 653d 4e6f 6e65  {}, include=None
-0000ed20: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
-0000ed30: 0a20 2020 2020 2020 2049 7465 7261 7465  .        Iterate
-0000ed40: 7320 6f76 6572 2073 6563 7469 6f6e 7320  s over sections 
-0000ed50: 6f66 2074 6865 206d 6574 6120 6461 7461  of the meta data
-0000ed60: 206f 626a 6563 7420 746f 2072 6562 7569   object to rebui
-0000ed70: 6c64 2061 2064 6174 6120 7374 7275 6374  ld a data struct
-0000ed80: 7572 652e 0d0a 0d0a 2020 2020 2020 2020  ure.....        
-0000ed90: 4172 7261 7973 2077 696c 6c20 6265 2069  Arrays will be i
-0000eda0: 6e20 7468 6520 666f 6c6c 6f77 696e 6720  n the following 
-0000edb0: 6f72 6465 723a 0d0a 2020 2020 2020 2020  order:..        
-0000edc0: 2d20 4d61 696e 2061 7272 6179 7320 286f  - Main arrays (o
-0000edd0: 7220 756e 6465 726c 7969 6e67 2046 6173  r underlying Fas
-0000ede0: 7441 7272 6179 7320 666f 7220 7375 6263  tArrays for subc
-0000edf0: 6c61 7373 6573 290d 0a20 2020 2020 2020  lasses)..       
-0000ee00: 202d 2053 6563 6f6e 6461 7279 2061 7272   - Secondary arr
-0000ee10: 6179 7320 666f 7220 4661 7374 4172 7261  ays for FastArra
-0000ee20: 7920 7375 6263 6c61 7373 6573 2074 6861  y subclasses tha
-0000ee30: 7420 7265 7175 6972 6520 6164 6469 7469  t require additi
-0000ee40: 6f6e 616c 2063 6f6e 7469 6775 6f75 7320  onal contiguous 
-0000ee50: 6461 7461 2028 652e 672e 2043 6174 6567  data (e.g. Categ
-0000ee60: 6f72 6963 616c 290d 0a20 2020 2020 2020  orical)..       
-0000ee70: 202d 2041 7272 6179 206f 6620 6661 6e63   - Array of fanc
-0000ee80: 7920 696e 6469 6365 7320 746f 2073 6f72  y indices to sor
-0000ee90: 7420 6279 0d0a 0d0a 2020 2020 2020 2020  t by....        
-0000eea0: 4120 6469 6374 696f 6e61 7279 2077 696c  A dictionary wil
-0000eeb0: 6c20 6265 2063 6f6e 7374 7275 6374 6564  l be constructed
-0000eec0: 2e0d 0a20 2020 2020 2020 2041 6c6c 2061  ...        All a
-0000eed0: 7272 6179 7320 7769 6c6c 2062 6520 696e  rrays will be in
-0000eee0: 7365 7274 6564 2062 7920 6e61 6d65 2066  serted by name f
-0000eef0: 726f 6d20 2769 7465 6d5f 6e61 6d65 7327  rom 'item_names'
-0000ef00: 2069 6e20 6d65 7461 206f 626a 6563 742e   in meta object.
-0000ef10: 0d0a 2020 2020 2020 2020 416c 6c20 2869  ..        All (i
-0000ef20: 6620 616e 7929 206d 6574 6120 6461 7461  f any) meta data
-0000ef30: 2077 696c 6c20 6265 2072 6561 6420 6672   will be read fr
-0000ef40: 6f6d 2027 6974 656d 5f6d 6574 6127 2069  om 'item_meta' i
-0000ef50: 6e20 6d65 7461 206f 626a 6563 742c 2061  n meta object, a
-0000ef60: 6e64 2046 6173 7441 7272 6179 2073 7562  nd FastArray sub
-0000ef70: 636c 6173 7365 7320 7769 6c6c 2062 6520  classes will be 
-0000ef80: 636f 6e73 7472 7563 7465 642e 0d0a 2020  constructed...  
-0000ef90: 2020 2020 2020 5468 6520 636f 6e74 6169        The contai
-0000efa0: 6e65 7220 6f62 6a65 6374 2077 696c 6c20  ner object will 
-0000efb0: 6265 2063 6f6e 7374 7275 6374 6564 2066  be constructed f
-0000efc0: 726f 6d20 7468 6520 6469 6374 696f 6e61  rom the dictiona
-0000efd0: 7279 2e0d 0a20 2020 2020 2020 2041 6e79  ry...        Any
-0000efe0: 206c 6162 656c 7320 2867 626b 6579 7329   labels (gbkeys)
-0000eff0: 2077 696c 6c20 6265 2073 6574 2e0d 0a20   will be set... 
-0000f000: 2020 2020 2020 2049 6620 736f 7274 6564         If sorted
-0000f010: 2063 6f6c 756d 6e20 6e61 6d65 7320 6578   column names ex
-0000f020: 6973 742c 2074 6865 7920 7769 6c6c 2062  ist, they will b
-0000f030: 6520 7365 742c 2061 6e64 2074 6865 2073  e set, and the s
-0000f040: 6f72 7465 6420 696e 6465 7820 7769 6c6c  orted index will
-0000f050: 2062 6520 6164 6465 6420 746f 2074 6865   be added to the
-0000f060: 2053 6f72 7443 6163 6865 2e0d 0a0d 0a20   SortCache..... 
-0000f070: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
-0000f080: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-0000f090: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 206d  -----..        m
-0000f0a0: 6574 6120 3a20 7269 7074 6162 6c65 204d  eta : riptable M
-0000f0b0: 6574 6144 6174 6120 6f62 6a65 6374 2028  etaData object (
-0000f0c0: 7365 6520 5574 696c 732f 7274 5f6d 6574  see Utils/rt_met
-0000f0d0: 6164 6174 612e 7079 290d 0a20 2020 2020  adata.py)..     
-0000f0e0: 2020 2061 7272 6179 7320 3a20 6c69 7374     arrays : list
-0000f0f0: 206f 6620 6e75 6d70 7920 6172 7261 7973   of numpy arrays
-0000f100: 2066 726f 6d20 616e 2065 7870 616e 6465   from an expande
-0000f110: 6420 5344 5320 6669 6c65 0d0a 0d0a 2020  d SDS file....  
-0000f120: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
-0000f130: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
-0000f140: 2020 2020 2020 2020 5374 7275 6374 2c20          Struct, 
-0000f150: 4461 7461 7365 742c 206f 7220 4d75 6c74  Dataset, or Mult
-0000f160: 6973 6574 0d0a 2020 2020 2020 2020 2020  iset..          
-0000f170: 2020 466f 7220 6e6f 772c 2053 7472 7563    For now, Struc
-0000f180: 742c 2044 6174 6173 6574 2c20 616e 6420  t, Dataset, and 
-0000f190: 4d75 6c74 6973 6574 2061 6c6c 2075 7365  Multiset all use
-0000f1a0: 2074 6869 7320 7061 7265 6e74 206d 6574   this parent met
-0000f1b0: 686f 642e 0d0a 2020 2020 2020 2020 2222  hod...        ""
-0000f1c0: 220d 0a20 2020 2020 2020 2023 2054 4f44  "..        # TOD
-0000f1d0: 4f3a 2063 6865 636b 2070 6f73 7369 626c  O: check possibl
-0000f1e0: 6520 696e 636c 7564 6520 6c69 7374 202d  e include list -
-0000f1f0: 2077 696c 6c20 7475 706c 6573 2073 7469   will tuples sti
-0000f200: 6c6c 2062 6520 7265 7475 726e 6564 2066  ll be returned f
-0000f210: 6f72 2065 7863 6c75 6465 6420 6974 656d  or excluded item
-0000f220: 733f 0d0a 2020 2020 2020 2020 2320 6375  s?..        # cu
-0000f230: 7272 656e 746c 7920 6765 7474 696e 6720  rrently getting 
-0000f240: 7265 6d6f 7665 6420 6672 6f6d 2072 6f6f  removed from roo
-0000f250: 7420 7374 7275 6374 206f 6e6c 790d 0a0d  t struct only...
-0000f260: 0a20 2020 2020 2020 2064 6566 206c 6f61  .        def loa
-0000f270: 645f 636c 6173 735f 6d65 7461 2864 6174  d_class_meta(dat
-0000f280: 612c 2061 7272 6179 732c 206d 6574 6129  a, arrays, meta)
-0000f290: 3a0d 0a20 2020 2020 2020 2020 2020 2061  :..            a
-0000f2a0: 7272 5f69 6478 203d 2030 0d0a 2020 2020  rr_idx = 0..    
-0000f2b0: 2020 2020 2020 2020 6461 7461 2e6c 6162          data.lab
-0000f2c0: 656c 5f73 6574 5f6e 616d 6573 286d 6574  el_set_names(met
-0000f2d0: 615b 226c 6162 656c 7322 5d29 0d0a 0d0a  a["labels"])....
-0000f2e0: 2020 2020 2020 2020 2020 2020 2320 7365              # se
-0000f2f0: 6e64 2074 6865 2073 6f72 7420 696e 6465  nd the sort inde
-0000f300: 7820 746f 2074 6865 2053 6f72 7443 6163  x to the SortCac
-0000f310: 6865 0d0a 2020 2020 2020 2020 2020 2020  he..            
-0000f320: 6461 7461 2e5f 636f 6c5f 736f 7274 6c69  data._col_sortli
-0000f330: 7374 203d 206d 6574 612e 6765 7428 225f  st = meta.get("_
-0000f340: 636f 6c5f 736f 7274 6c69 7374 222c 204e  col_sortlist", N
-0000f350: 6f6e 6529 0d0a 2020 2020 2020 2020 2020  one)..          
-0000f360: 2020 6966 2064 6174 612e 5f63 6f6c 5f73    if data._col_s
-0000f370: 6f72 746c 6973 7420 6973 206e 6f74 204e  ortlist is not N
-0000f380: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-0000f390: 2020 2020 2020 2320 6966 2061 2073 6f72        # if a sor
-0000f3a0: 7465 6420 696e 6465 7820 6578 6973 7473  ted index exists
-0000f3b0: 2c20 6974 2773 2074 6865 206c 6173 7420  , it's the last 
-0000f3c0: 6172 7261 7920 696e 2074 6865 206c 6973  array in the lis
-0000f3d0: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
-0000f3e0: 2020 2075 6964 203d 2064 6174 612e 5f75     uid = data._u
-0000f3f0: 6e69 7175 6569 640d 0a20 2020 2020 2020  niqueid..       
-0000f400: 2020 2020 2020 2020 2073 6f72 746c 6973           sortlis
-0000f410: 7420 3d20 5b64 6174 615b 636f 6c5d 2066  t = [data[col] f
-0000f420: 6f72 2063 6f6c 2069 6e20 6461 7461 2e5f  or col in data._
-0000f430: 636f 6c5f 736f 7274 6c69 7374 5d0d 0a20  col_sortlist].. 
-0000f440: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000f450: 6f72 7469 6478 203d 2061 7272 6179 735b  ortidx = arrays[
-0000f460: 6172 725f 6964 785d 0d0a 2020 2020 2020  arr_idx]..      
-0000f470: 2020 2020 2020 2020 2020 5479 7065 5265            TypeRe
-0000f480: 6769 7374 6572 2e53 6f72 7443 6163 6865  gister.SortCache
-0000f490: 2e73 746f 7265 5f73 6f72 7428 7569 642c  .store_sort(uid,
-0000f4a0: 2073 6f72 746c 6973 742c 2073 6f72 7469   sortlist, sorti
-0000f4b0: 6478 290d 0a20 2020 2020 2020 2020 2020  dx)..           
-0000f4c0: 2020 2020 2061 7272 5f69 6478 202b 3d20       arr_idx += 
-0000f4d0: 310d 0a0d 0a20 2020 2020 2020 2020 2020  1....           
-0000f4e0: 2023 2061 7474 6163 6820 666f 6f74 6572   # attach footer
-0000f4f0: 7320 2861 6363 756d 3220 6f70 6572 6174  s (accum2 operat
-0000f500: 696f 6e20 7265 7375 6c74 7329 0d0a 2020  ion results)..  
-0000f510: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-0000f520: 286d 6574 615b 2266 6f6f 7465 7273 225d  (meta["footers"]
-0000f530: 2920 3e20 303a 0d0a 2020 2020 2020 2020  ) > 0:..        
-0000f540: 2020 2020 2020 2020 666f 6f74 6572 7320          footers 
-0000f550: 3d20 7b7d 0d0a 2020 2020 2020 2020 2020  = {}..          
-0000f560: 2020 2020 2020 666f 7220 6620 696e 206d        for f in m
-0000f570: 6574 615b 2266 6f6f 7465 7273 225d 3a0d  eta["footers"]:.
-0000f580: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000f590: 2020 2020 2066 6f6f 7465 7273 5b66 5d20       footers[f] 
-0000f5a0: 3d20 6172 7261 7973 5b61 7272 5f69 6478  = arrays[arr_idx
-0000f5b0: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-0000f5c0: 2020 2020 2020 2061 7272 5f69 6478 202b         arr_idx +
-0000f5d0: 3d20 310d 0a20 2020 2020 2020 2020 2020  = 1..           
-0000f5e0: 2020 2020 2064 6174 612e 5f66 6f6f 7465       data._foote
-0000f5f0: 7273 203d 2066 6f6f 7465 7273 0d0a 0d0a  rs = footers....
-0000f600: 2020 2020 2020 2020 2320 2d2d 2d2d 2073          # ---- s
-0000f610: 7461 7274 206f 6620 6d65 7468 6f64 2062  tart of method b
-0000f620: 656c 6f77 202d 2d2d 2d2d 2d2d 2d2d 2d2d  elow -----------
-0000f630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
-0000f640: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
-0000f650: 696e 7374 616e 6365 286d 6574 612c 204d  instance(meta, M
-0000f660: 6574 6144 6174 6129 3a0d 0a20 2020 2020  etaData):..     
-0000f670: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-0000f680: 2020 2020 2020 2020 2020 2020 206d 6574               met
-0000f690: 6120 3d20 4d65 7461 4461 7461 286d 6574  a = MetaData(met
-0000f6a0: 6129 0d0a 2020 2020 2020 2020 2020 2020  a)..            
-0000f6b0: 6578 6365 7074 3a0d 0a20 2020 2020 2020  except:..       
-0000f6c0: 2020 2020 2020 2020 2077 6172 6e69 6e67           warning
-0000f6d0: 732e 7761 726e 2866 226d 6574 6120 6461  s.warn(f"meta da
-0000f6e0: 7461 2064 6964 206e 6f74 2063 6f6e 7461  ta did not conta
-0000f6f0: 696e 2061 2076 616c 6964 206a 736f 6e20  in a valid json 
-0000f700: 7374 7269 6e67 2e22 290d 0a0d 0a20 2020  string.")....   
-0000f710: 2020 2020 2064 6174 6120 3d20 7b7d 0d0a       data = {}..
-0000f720: 0d0a 2020 2020 2020 2020 6966 2069 7369  ..        if isi
-0000f730: 6e73 7461 6e63 6528 6d65 7461 2c20 4d65  nstance(meta, Me
-0000f740: 7461 4461 7461 293a 0d0a 2020 2020 2020  taData):..      
-0000f750: 2020 2020 2020 6175 7468 6f72 203d 206d        author = m
-0000f760: 6574 612e 6765 7428 2261 7574 686f 7222  eta.get("author"
-0000f770: 2c20 2275 6e6b 6e6f 776e 2229 0d0a 2020  , "unknown")..  
-0000f780: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
-0000f790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f7a0: 6672 6f6d 5f6d 6174 6c61 6220 3d20 6175  from_matlab = au
-0000f7b0: 7468 6f72 203d 3d20 226d 6174 6c61 6222  thor == "matlab"
-0000f7c0: 0d0a 2020 2020 2020 2020 2020 2020 6578  ..            ex
-0000f7d0: 6365 7074 3a0d 0a20 2020 2020 2020 2020  cept:..         
-0000f7e0: 2020 2020 2020 2066 726f 6d5f 6d61 746c         from_matl
-0000f7f0: 6162 203d 2046 616c 7365 0d0a 2020 2020  ab = False..    
-0000f800: 2020 2020 2020 2020 7370 6563 5f69 7465          spec_ite
-0000f810: 6d73 203d 207b 7d0d 0a20 2020 2020 2020  ms = {}..       
-0000f820: 2020 2020 2073 7065 635f 6974 656d 7332       spec_items2
-0000f830: 203d 207b 7d0d 0a0d 0a20 2020 2020 2020   = {}....       
-0000f840: 2020 2020 2066 6f72 2069 7465 6d5f 6964       for item_id
-0000f850: 782c 2074 7570 2069 6e20 656e 756d 6572  x, tup in enumer
-0000f860: 6174 6528 6d65 7461 5f74 7570 7329 3a0d  ate(meta_tups):.
-0000f870: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000f880: 2069 7465 6d6e 616d 6520 3d20 7475 705b   itemname = tup[
-0000f890: 305d 2e64 6563 6f64 6528 290d 0a20 2020  0].decode()..   
-0000f8a0: 2020 2020 2020 2020 2020 2020 2069 7465               ite
-0000f8b0: 6d65 6e75 6d20 3d20 7475 705b 315d 0d0a  menum = tup[1]..
-0000f8c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000f8d0: 2020 2320 7265 6775 6c61 7220 6974 656d    # regular item
-0000f8e0: 2028 6172 7261 792c 2073 6361 6c61 722c   (array, scalar,
-0000f8f0: 2063 6f6e 7461 696e 6572 290d 0a20 2020   container)..   
-0000f900: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000f910: 6974 656d 656e 756d 2026 2053 4453 466c  itemenum & SDSFl
-0000f920: 6167 2e4f 7269 6769 6e61 6c43 6f6e 7461  ag.OriginalConta
-0000f930: 696e 6572 3a0d 0a20 2020 2020 2020 2020  iner:..         
-0000f940: 2020 2020 2020 2020 2020 2023 2069 6e69             # ini
-0000f950: 7469 616c 697a 6520 7468 6520 636f 6e74  tialize the cont
-0000f960: 6169 6e65 7220 6e61 6d65 2074 6f20 7072  ainer name to pr
-0000f970: 6573 6572 7665 206f 7264 6572 0d0a 2020  eserve order..  
-0000f980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f990: 2020 6966 2069 7465 6d65 6e75 6d20 2620    if itemenum & 
-0000f9a0: 5344 5346 6c61 672e 4e65 7374 6564 3a0d  SDSFlag.Nested:.
-0000f9b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000f9c0: 2020 2020 2020 2020 2064 6174 615b 6974           data[it
-0000f9d0: 656d 6e61 6d65 5d20 3d20 4e6f 6e65 0d0a  emname] = None..
-0000f9e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000f9f0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-0000fa00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fa10: 2020 2020 2023 2069 6620 4e6f 6e65 2069       # if None i
-0000fa20: 7320 696e 2061 7272 6179 732c 2069 7420  s in arrays, it 
-0000fa30: 6d65 616e 7320 7468 6520 6974 656d 2077  means the item w
-0000fa40: 6173 2065 7863 6c75 6465 640d 0a20 2020  as excluded..   
-0000fa50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fa60: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
-0000fa70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fa80: 2020 2020 2020 2069 6620 6172 7261 7973         if arrays
-0000fa90: 5b69 7465 6d5f 6964 785d 2069 7320 4e6f  [item_idx] is No
-0000faa0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-0000fab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fac0: 2020 2020 2070 6173 730d 0a20 2020 2020       pass..     
-0000fad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fae0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+0000eca0: 2d2d 2d2d 2d2d 0d0a 2020 2020 4063 6c61  ------..    @cla
+0000ecb0: 7373 6d65 7468 6f64 0d0a 2020 2020 6465  ssmethod..    de
+0000ecc0: 6620 5f6c 6f61 645f 6672 6f6d 5f73 6473  f _load_from_sds
+0000ecd0: 5f6d 6574 615f 6461 7461 2863 6c73 2c20  _meta_data(cls, 
+0000ece0: 6d65 7461 2c20 6172 7261 7973 2c20 6d65  meta, arrays, me
+0000ecf0: 7461 5f74 7570 733d 5b5d 2c20 6669 6c65  ta_tups=[], file
+0000ed00: 5f68 6561 6465 723d 7b7d 2c20 696e 636c  _header={}, incl
+0000ed10: 7564 653d 4e6f 6e65 293a 0d0a 2020 2020  ude=None):..    
+0000ed20: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+0000ed30: 2049 7465 7261 7465 7320 6f76 6572 2073   Iterates over s
+0000ed40: 6563 7469 6f6e 7320 6f66 2074 6865 206d  ections of the m
+0000ed50: 6574 6120 6461 7461 206f 626a 6563 7420  eta data object 
+0000ed60: 746f 2072 6562 7569 6c64 2061 2064 6174  to rebuild a dat
+0000ed70: 6120 7374 7275 6374 7572 652e 0d0a 0d0a  a structure.....
+0000ed80: 2020 2020 2020 2020 4172 7261 7973 2077          Arrays w
+0000ed90: 696c 6c20 6265 2069 6e20 7468 6520 666f  ill be in the fo
+0000eda0: 6c6c 6f77 696e 6720 6f72 6465 723a 0d0a  llowing order:..
+0000edb0: 2020 2020 2020 2020 2d20 4d61 696e 2061          - Main a
+0000edc0: 7272 6179 7320 286f 7220 756e 6465 726c  rrays (or underl
+0000edd0: 7969 6e67 2046 6173 7441 7272 6179 7320  ying FastArrays 
+0000ede0: 666f 7220 7375 6263 6c61 7373 6573 290d  for subclasses).
+0000edf0: 0a20 2020 2020 2020 202d 2053 6563 6f6e  .        - Secon
+0000ee00: 6461 7279 2061 7272 6179 7320 666f 7220  dary arrays for 
+0000ee10: 4661 7374 4172 7261 7920 7375 6263 6c61  FastArray subcla
+0000ee20: 7373 6573 2074 6861 7420 7265 7175 6972  sses that requir
+0000ee30: 6520 6164 6469 7469 6f6e 616c 2063 6f6e  e additional con
+0000ee40: 7469 6775 6f75 7320 6461 7461 2028 652e  tiguous data (e.
+0000ee50: 672e 2043 6174 6567 6f72 6963 616c 290d  g. Categorical).
+0000ee60: 0a20 2020 2020 2020 202d 2041 7272 6179  .        - Array
+0000ee70: 206f 6620 6661 6e63 7920 696e 6469 6365   of fancy indice
+0000ee80: 7320 746f 2073 6f72 7420 6279 0d0a 0d0a  s to sort by....
+0000ee90: 2020 2020 2020 2020 4120 6469 6374 696f          A dictio
+0000eea0: 6e61 7279 2077 696c 6c20 6265 2063 6f6e  nary will be con
+0000eeb0: 7374 7275 6374 6564 2e0d 0a20 2020 2020  structed...     
+0000eec0: 2020 2041 6c6c 2061 7272 6179 7320 7769     All arrays wi
+0000eed0: 6c6c 2062 6520 696e 7365 7274 6564 2062  ll be inserted b
+0000eee0: 7920 6e61 6d65 2066 726f 6d20 2769 7465  y name from 'ite
+0000eef0: 6d5f 6e61 6d65 7327 2069 6e20 6d65 7461  m_names' in meta
+0000ef00: 206f 626a 6563 742e 0d0a 2020 2020 2020   object...      
+0000ef10: 2020 416c 6c20 2869 6620 616e 7929 206d    All (if any) m
+0000ef20: 6574 6120 6461 7461 2077 696c 6c20 6265  eta data will be
+0000ef30: 2072 6561 6420 6672 6f6d 2027 6974 656d   read from 'item
+0000ef40: 5f6d 6574 6127 2069 6e20 6d65 7461 206f  _meta' in meta o
+0000ef50: 626a 6563 742c 2061 6e64 2046 6173 7441  bject, and FastA
+0000ef60: 7272 6179 2073 7562 636c 6173 7365 7320  rray subclasses 
+0000ef70: 7769 6c6c 2062 6520 636f 6e73 7472 7563  will be construc
+0000ef80: 7465 642e 0d0a 2020 2020 2020 2020 5468  ted...        Th
+0000ef90: 6520 636f 6e74 6169 6e65 7220 6f62 6a65  e container obje
+0000efa0: 6374 2077 696c 6c20 6265 2063 6f6e 7374  ct will be const
+0000efb0: 7275 6374 6564 2066 726f 6d20 7468 6520  ructed from the 
+0000efc0: 6469 6374 696f 6e61 7279 2e0d 0a20 2020  dictionary...   
+0000efd0: 2020 2020 2041 6e79 206c 6162 656c 7320       Any labels 
+0000efe0: 2867 626b 6579 7329 2077 696c 6c20 6265  (gbkeys) will be
+0000eff0: 2073 6574 2e0d 0a20 2020 2020 2020 2049   set...        I
+0000f000: 6620 736f 7274 6564 2063 6f6c 756d 6e20  f sorted column 
+0000f010: 6e61 6d65 7320 6578 6973 742c 2074 6865  names exist, the
+0000f020: 7920 7769 6c6c 2062 6520 7365 742c 2061  y will be set, a
+0000f030: 6e64 2074 6865 2073 6f72 7465 6420 696e  nd the sorted in
+0000f040: 6465 7820 7769 6c6c 2062 6520 6164 6465  dex will be adde
+0000f050: 6420 746f 2074 6865 2053 6f72 7443 6163  d to the SortCac
+0000f060: 6865 2e0d 0a0d 0a20 2020 2020 2020 2050  he.....        P
+0000f070: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
+0000f080: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
+0000f090: 2020 2020 2020 206d 6574 6120 3a20 7269         meta : ri
+0000f0a0: 7074 6162 6c65 204d 6574 6144 6174 6120  ptable MetaData 
+0000f0b0: 6f62 6a65 6374 2028 7365 6520 5574 696c  object (see Util
+0000f0c0: 732f 7274 5f6d 6574 6164 6174 612e 7079  s/rt_metadata.py
+0000f0d0: 290d 0a20 2020 2020 2020 2061 7272 6179  )..        array
+0000f0e0: 7320 3a20 6c69 7374 206f 6620 6e75 6d70  s : list of nump
+0000f0f0: 7920 6172 7261 7973 2066 726f 6d20 616e  y arrays from an
+0000f100: 2065 7870 616e 6465 6420 5344 5320 6669   expanded SDS fi
+0000f110: 6c65 0d0a 0d0a 2020 2020 2020 2020 5265  le....        Re
+0000f120: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
+0000f130: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0000f140: 5374 7275 6374 2c20 4461 7461 7365 742c  Struct, Dataset,
+0000f150: 206f 7220 4d75 6c74 6973 6574 0d0a 2020   or Multiset..  
+0000f160: 2020 2020 2020 2020 2020 466f 7220 6e6f            For no
+0000f170: 772c 2053 7472 7563 742c 2044 6174 6173  w, Struct, Datas
+0000f180: 6574 2c20 616e 6420 4d75 6c74 6973 6574  et, and Multiset
+0000f190: 2061 6c6c 2075 7365 2074 6869 7320 7061   all use this pa
+0000f1a0: 7265 6e74 206d 6574 686f 642e 0d0a 2020  rent method...  
+0000f1b0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+0000f1c0: 2020 2023 2054 4f44 4f3a 2063 6865 636b     # TODO: check
+0000f1d0: 2070 6f73 7369 626c 6520 696e 636c 7564   possible includ
+0000f1e0: 6520 6c69 7374 202d 2077 696c 6c20 7475  e list - will tu
+0000f1f0: 706c 6573 2073 7469 6c6c 2062 6520 7265  ples still be re
+0000f200: 7475 726e 6564 2066 6f72 2065 7863 6c75  turned for exclu
+0000f210: 6465 6420 6974 656d 733f 0d0a 2020 2020  ded items?..    
+0000f220: 2020 2020 2320 6375 7272 656e 746c 7920      # currently 
+0000f230: 6765 7474 696e 6720 7265 6d6f 7665 6420  getting removed 
+0000f240: 6672 6f6d 2072 6f6f 7420 7374 7275 6374  from root struct
+0000f250: 206f 6e6c 790d 0a0d 0a20 2020 2020 2020   only....       
+0000f260: 2064 6566 206c 6f61 645f 636c 6173 735f   def load_class_
+0000f270: 6d65 7461 2864 6174 612c 2061 7272 6179  meta(data, array
+0000f280: 732c 206d 6574 6129 3a0d 0a20 2020 2020  s, meta):..     
+0000f290: 2020 2020 2020 2061 7272 5f69 6478 203d         arr_idx =
+0000f2a0: 2030 0d0a 2020 2020 2020 2020 2020 2020   0..            
+0000f2b0: 6461 7461 2e6c 6162 656c 5f73 6574 5f6e  data.label_set_n
+0000f2c0: 616d 6573 286d 6574 615b 226c 6162 656c  ames(meta["label
+0000f2d0: 7322 5d29 0d0a 0d0a 2020 2020 2020 2020  s"])....        
+0000f2e0: 2020 2020 2320 7365 6e64 2074 6865 2073      # send the s
+0000f2f0: 6f72 7420 696e 6465 7820 746f 2074 6865  ort index to the
+0000f300: 2053 6f72 7443 6163 6865 0d0a 2020 2020   SortCache..    
+0000f310: 2020 2020 2020 2020 6461 7461 2e5f 636f          data._co
+0000f320: 6c5f 736f 7274 6c69 7374 203d 206d 6574  l_sortlist = met
+0000f330: 612e 6765 7428 225f 636f 6c5f 736f 7274  a.get("_col_sort
+0000f340: 6c69 7374 222c 204e 6f6e 6529 0d0a 2020  list", None)..  
+0000f350: 2020 2020 2020 2020 2020 6966 2064 6174            if dat
+0000f360: 612e 5f63 6f6c 5f73 6f72 746c 6973 7420  a._col_sortlist 
+0000f370: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+0000f380: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000f390: 6966 2061 2073 6f72 7465 6420 696e 6465  if a sorted inde
+0000f3a0: 7820 6578 6973 7473 2c20 6974 2773 2074  x exists, it's t
+0000f3b0: 6865 206c 6173 7420 6172 7261 7920 696e  he last array in
+0000f3c0: 2074 6865 206c 6973 740d 0a20 2020 2020   the list..     
+0000f3d0: 2020 2020 2020 2020 2020 2075 6964 203d             uid =
+0000f3e0: 2064 6174 612e 5f75 6e69 7175 6569 640d   data._uniqueid.
+0000f3f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f400: 2073 6f72 746c 6973 7420 3d20 5b64 6174   sortlist = [dat
+0000f410: 615b 636f 6c5d 2066 6f72 2063 6f6c 2069  a[col] for col i
+0000f420: 6e20 6461 7461 2e5f 636f 6c5f 736f 7274  n data._col_sort
+0000f430: 6c69 7374 5d0d 0a20 2020 2020 2020 2020  list]..         
+0000f440: 2020 2020 2020 2073 6f72 7469 6478 203d         sortidx =
+0000f450: 2061 7272 6179 735b 6172 725f 6964 785d   arrays[arr_idx]
+0000f460: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000f470: 2020 5479 7065 5265 6769 7374 6572 2e53    TypeRegister.S
+0000f480: 6f72 7443 6163 6865 2e73 746f 7265 5f73  ortCache.store_s
+0000f490: 6f72 7428 7569 642c 2073 6f72 746c 6973  ort(uid, sortlis
+0000f4a0: 742c 2073 6f72 7469 6478 290d 0a20 2020  t, sortidx)..   
+0000f4b0: 2020 2020 2020 2020 2020 2020 2061 7272               arr
+0000f4c0: 5f69 6478 202b 3d20 310d 0a0d 0a20 2020  _idx += 1....   
+0000f4d0: 2020 2020 2020 2020 2023 2061 7474 6163           # attac
+0000f4e0: 6820 666f 6f74 6572 7320 2861 6363 756d  h footers (accum
+0000f4f0: 3220 6f70 6572 6174 696f 6e20 7265 7375  2 operation resu
+0000f500: 6c74 7329 0d0a 2020 2020 2020 2020 2020  lts)..          
+0000f510: 2020 6966 206c 656e 286d 6574 615b 2266    if len(meta["f
+0000f520: 6f6f 7465 7273 225d 2920 3e20 303a 0d0a  ooters"]) > 0:..
+0000f530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f540: 666f 6f74 6572 7320 3d20 7b7d 0d0a 2020  footers = {}..  
+0000f550: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+0000f560: 7220 6620 696e 206d 6574 615b 2266 6f6f  r f in meta["foo
+0000f570: 7465 7273 225d 3a0d 0a20 2020 2020 2020  ters"]:..       
+0000f580: 2020 2020 2020 2020 2020 2020 2066 6f6f               foo
+0000f590: 7465 7273 5b66 5d20 3d20 6172 7261 7973  ters[f] = arrays
+0000f5a0: 5b61 7272 5f69 6478 5d0d 0a20 2020 2020  [arr_idx]..     
+0000f5b0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0000f5c0: 7272 5f69 6478 202b 3d20 310d 0a20 2020  rr_idx += 1..   
+0000f5d0: 2020 2020 2020 2020 2020 2020 2064 6174               dat
+0000f5e0: 612e 5f66 6f6f 7465 7273 203d 2066 6f6f  a._footers = foo
+0000f5f0: 7465 7273 0d0a 0d0a 2020 2020 2020 2020  ters....        
+0000f600: 2320 2d2d 2d2d 2073 7461 7274 206f 6620  # ---- start of 
+0000f610: 6d65 7468 6f64 2062 656c 6f77 202d 2d2d  method below ---
+0000f620: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f630: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2069  -----..        i
+0000f640: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
+0000f650: 286d 6574 612c 204d 6574 6144 6174 6129  (meta, MetaData)
+0000f660: 3a0d 0a20 2020 2020 2020 2020 2020 2074  :..            t
+0000f670: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+0000f680: 2020 2020 206d 6574 6120 3d20 4d65 7461       meta = Meta
+0000f690: 4461 7461 286d 6574 6129 0d0a 2020 2020  Data(meta)..    
+0000f6a0: 2020 2020 2020 2020 6578 6365 7074 3a0d          except:.
+0000f6b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f6c0: 2077 6172 6e69 6e67 732e 7761 726e 2866   warnings.warn(f
+0000f6d0: 226d 6574 6120 6461 7461 2064 6964 206e  "meta data did n
+0000f6e0: 6f74 2063 6f6e 7461 696e 2061 2076 616c  ot contain a val
+0000f6f0: 6964 206a 736f 6e20 7374 7269 6e67 2e22  id json string."
+0000f700: 290d 0a0d 0a20 2020 2020 2020 2064 6174  )....        dat
+0000f710: 6120 3d20 7b7d 0d0a 0d0a 2020 2020 2020  a = {}....      
+0000f720: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0000f730: 6d65 7461 2c20 4d65 7461 4461 7461 293a  meta, MetaData):
+0000f740: 0d0a 2020 2020 2020 2020 2020 2020 6175  ..            au
+0000f750: 7468 6f72 203d 206d 6574 612e 6765 7428  thor = meta.get(
+0000f760: 2261 7574 686f 7222 2c20 2275 6e6b 6e6f  "author", "unkno
+0000f770: 776e 2229 0d0a 2020 2020 2020 2020 2020  wn")..          
+0000f780: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
+0000f790: 2020 2020 2020 2020 6672 6f6d 5f6d 6174          from_mat
+0000f7a0: 6c61 6220 3d20 6175 7468 6f72 203d 3d20  lab = author == 
+0000f7b0: 226d 6174 6c61 6222 0d0a 2020 2020 2020  "matlab"..      
+0000f7c0: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
+0000f7d0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0000f7e0: 726f 6d5f 6d61 746c 6162 203d 2046 616c  rom_matlab = Fal
+0000f7f0: 7365 0d0a 2020 2020 2020 2020 2020 2020  se..            
+0000f800: 7370 6563 5f69 7465 6d73 203d 207b 7d0d  spec_items = {}.
+0000f810: 0a20 2020 2020 2020 2020 2020 2073 7065  .            spe
+0000f820: 635f 6974 656d 7332 203d 207b 7d0d 0a0d  c_items2 = {}...
+0000f830: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+0000f840: 2069 7465 6d5f 6964 782c 2074 7570 2069   item_idx, tup i
+0000f850: 6e20 656e 756d 6572 6174 6528 6d65 7461  n enumerate(meta
+0000f860: 5f74 7570 7329 3a0d 0a20 2020 2020 2020  _tups):..       
+0000f870: 2020 2020 2020 2020 2069 7465 6d6e 616d           itemnam
+0000f880: 6520 3d20 7475 705b 305d 2e64 6563 6f64  e = tup[0].decod
+0000f890: 6528 290d 0a20 2020 2020 2020 2020 2020  e()..           
+0000f8a0: 2020 2020 2069 7465 6d65 6e75 6d20 3d20       itemenum = 
+0000f8b0: 7475 705b 315d 0d0a 0d0a 2020 2020 2020  tup[1]....      
+0000f8c0: 2020 2020 2020 2020 2020 2320 7265 6775            # regu
+0000f8d0: 6c61 7220 6974 656d 2028 6172 7261 792c  lar item (array,
+0000f8e0: 2073 6361 6c61 722c 2063 6f6e 7461 696e   scalar, contain
+0000f8f0: 6572 290d 0a20 2020 2020 2020 2020 2020  er)..           
+0000f900: 2020 2020 2069 6620 6974 656d 656e 756d       if itemenum
+0000f910: 2026 2053 4453 466c 6167 2e4f 7269 6769   & SDSFlag.Origi
+0000f920: 6e61 6c43 6f6e 7461 696e 6572 3a0d 0a20  nalContainer:.. 
+0000f930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f940: 2020 2023 2069 6e69 7469 616c 697a 6520     # initialize 
+0000f950: 7468 6520 636f 6e74 6169 6e65 7220 6e61  the container na
+0000f960: 6d65 2074 6f20 7072 6573 6572 7665 206f  me to preserve o
+0000f970: 7264 6572 0d0a 2020 2020 2020 2020 2020  rder..          
+0000f980: 2020 2020 2020 2020 2020 6966 2069 7465            if ite
+0000f990: 6d65 6e75 6d20 2620 5344 5346 6c61 672e  menum & SDSFlag.
+0000f9a0: 4e65 7374 6564 3a0d 0a20 2020 2020 2020  Nested:..       
+0000f9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f9c0: 2064 6174 615b 6974 656d 6e61 6d65 5d20   data[itemname] 
+0000f9d0: 3d20 4e6f 6e65 0d0a 0d0a 2020 2020 2020  = None....      
+0000f9e0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0000f9f0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+0000fa00: 2020 2020 2020 2020 2020 2020 2023 2069               # i
+0000fa10: 6620 4e6f 6e65 2069 7320 696e 2061 7272  f None is in arr
+0000fa20: 6179 732c 2069 7420 6d65 616e 7320 7468  ays, it means th
+0000fa30: 6520 6974 656d 2077 6173 2065 7863 6c75  e item was exclu
+0000fa40: 6465 640d 0a20 2020 2020 2020 2020 2020  ded..           
+0000fa50: 2020 2020 2020 2020 2020 2020 2074 7279               try
+0000fa60: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000fa70: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0000fa80: 6620 6172 7261 7973 5b69 7465 6d5f 6964  f arrays[item_id
+0000fa90: 785d 2069 7320 4e6f 6e65 3a0d 0a20 2020  x] is None:..   
+0000faa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fab0: 2020 2020 2020 2020 2020 2020 2070 6173               pas
+0000fac0: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
+0000fad0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0000fae0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
 0000faf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fb00: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000fb10: 706f 7020 7363 616c 6172 2076 616c 7565  pop scalar value
-0000fb20: 2075 6e6c 6573 7320 6974 2773 2066 726f   unless it's fro
-0000fb30: 6d20 6d61 746c 6162 2028 6d61 746c 6162  m matlab (matlab
-0000fb40: 2068 6173 206e 6f20 7363 616c 6172 7329   has no scalars)
-0000fb50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000fb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fb70: 2020 6966 2028 6974 656d 656e 756d 2026    if (itemenum &
-0000fb80: 2053 4453 466c 6167 2e53 6361 6c61 7229   SDSFlag.Scalar)
-0000fb90: 2061 6e64 206e 6f74 2066 726f 6d5f 6d61   and not from_ma
-0000fba0: 746c 6162 3a0d 0a20 2020 2020 2020 2020  tlab:..         
+0000fb00: 2020 2020 2020 2320 706f 7020 7363 616c        # pop scal
+0000fb10: 6172 2076 616c 7565 2075 6e6c 6573 7320  ar value unless 
+0000fb20: 6974 2773 2066 726f 6d20 6d61 746c 6162  it's from matlab
+0000fb30: 2028 6d61 746c 6162 2068 6173 206e 6f20   (matlab has no 
+0000fb40: 7363 616c 6172 7329 0d0a 2020 2020 2020  scalars)..      
+0000fb50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fb60: 2020 2020 2020 2020 2020 6966 2028 6974            if (it
+0000fb70: 656d 656e 756d 2026 2053 4453 466c 6167  emenum & SDSFlag
+0000fb80: 2e53 6361 6c61 7229 2061 6e64 206e 6f74  .Scalar) and not
+0000fb90: 2066 726f 6d5f 6d61 746c 6162 3a0d 0a20   from_matlab:.. 
+0000fba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000fbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fbc0: 2020 2020 2020 2020 2020 2069 7465 6d20             item 
-0000fbd0: 3d20 6172 7261 7973 5b69 7465 6d5f 6964  = arrays[item_id
-0000fbe0: 785d 5b30 5d0d 0a0d 0a20 2020 2020 2020  x][0]....       
+0000fbc0: 2020 2069 7465 6d20 3d20 6172 7261 7973     item = arrays
+0000fbd0: 5b69 7465 6d5f 6964 785d 5b30 5d0d 0a0d  [item_idx][0]...
+0000fbe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0000fbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fc00: 2020 2020 2020 2020 2023 2072 6567 756c           # regul
-0000fc10: 6172 2061 7272 6179 206f 7220 756e 6465  ar array or unde
-0000fc20: 726c 7969 6e67 2061 7272 6179 206f 6620  rlying array of 
-0000fc30: 4661 7374 4172 7261 7920 7375 6263 6c61  FastArray subcla
-0000fc40: 7373 0d0a 2020 2020 2020 2020 2020 2020  ss..            
-0000fc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fc60: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+0000fc00: 2023 2072 6567 756c 6172 2061 7272 6179   # regular array
+0000fc10: 206f 7220 756e 6465 726c 7969 6e67 2061   or underlying a
+0000fc20: 7272 6179 206f 6620 4661 7374 4172 7261  rray of FastArra
+0000fc30: 7920 7375 6263 6c61 7373 0d0a 2020 2020  y subclass..    
+0000fc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fc50: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0000fc60: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
 0000fc70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fc80: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000fc90: 7465 6d20 3d20 6172 7261 7973 5b69 7465  tem = arrays[ite
-0000fca0: 6d5f 6964 785d 0d0a 0d0a 2020 2020 2020  m_idx]....      
+0000fc80: 2020 2020 2020 2069 7465 6d20 3d20 6172         item = ar
+0000fc90: 7261 7973 5b69 7465 6d5f 6964 785d 0d0a  rays[item_idx]..
+0000fca0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 0000fcb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fcc0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-0000fcd0: 2066 726f 6d5f 6d61 746c 6162 206f 7220   from_matlab or 
-0000fce0: 6974 656d 2e73 7472 6964 6573 5b30 5d20  item.strides[0] 
-0000fcf0: 213d 2030 3a0d 0a20 2020 2020 2020 2020  != 0:..         
+0000fcc0: 2020 6966 206e 6f74 2066 726f 6d5f 6d61    if not from_ma
+0000fcd0: 746c 6162 206f 7220 6974 656d 2e73 7472  tlab or item.str
+0000fce0: 6964 6573 5b30 5d20 213d 2030 3a0d 0a20  ides[0] != 0:.. 
+0000fcf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000fd00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fd10: 2020 2020 2020 2020 2020 2023 206d 6174             # mat
-0000fd20: 6c61 6220 6361 6e20 7361 7665 2030 206c  lab can save 0 l
-0000fd30: 656e 6774 6820 6172 7261 7973 0d0a 2020  ength arrays..  
+0000fd10: 2020 2023 206d 6174 6c61 6220 6361 6e20     # matlab can 
+0000fd20: 7361 7665 2030 206c 656e 6774 6820 6172  save 0 length ar
+0000fd30: 7261 7973 0d0a 2020 2020 2020 2020 2020  rays..          
 0000fd40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fd60: 2020 6461 7461 5b69 7465 6d6e 616d 655d    data[itemname]
-0000fd70: 203d 2069 7465 6d0d 0a20 2020 2020 2020   = item..       
-0000fd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fd90: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-0000fda0: 6e3a 0d0a 2020 2020 2020 2020 2020 2020  n:..            
-0000fdb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fdc0: 2320 544f 444f 3a20 6368 616e 6765 2074  # TODO: change t
-0000fdd0: 6869 7320 7768 656e 206d 6174 6c61 6220  his when matlab 
-0000fde0: 7374 6f72 6573 206d 6574 6164 6174 610d  stores metadata.
-0000fdf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000fe00: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000fe10: 6e6f 7420 6672 6f6d 5f6d 6174 6c61 623a  not from_matlab:
-0000fe20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000fe30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fe40: 2020 6f72 6967 6572 726f 7220 3d20 7379    origerror = sy
-0000fe50: 732e 6578 635f 696e 666f 2829 5b31 5d0d  s.exc_info()[1].
-0000fe60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000fe70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fe80: 2077 6172 6e69 6e67 732e 7761 726e 280d   warnings.warn(.
-0000fe90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000fea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000feb0: 2020 2020 2066 2245 7272 6f72 206f 6363       f"Error occ
-0000fec0: 7572 6564 2077 6865 6e20 7072 6f63 6573  ured when proces
-0000fed0: 7369 6e67 206d 6574 6120 6461 7461 206f  sing meta data o
-0000fee0: 6e20 696e 6465 7820 7b69 7465 6d5f 6964  n index {item_id
-0000fef0: 787d 2e20 2041 7574 686f 723a 207b 6175  x}.  Author: {au
-0000ff00: 7468 6f72 7d2e 2045 7272 6f72 3a20 7b6f  thor}. Error: {o
-0000ff10: 7269 6765 7272 6f72 2172 7d22 0d0a 2020  rigerror!r}"..  
+0000fd50: 2020 2020 2020 2020 2020 6461 7461 5b69            data[i
+0000fd60: 7465 6d6e 616d 655d 203d 2069 7465 6d0d  temname] = item.
+0000fd70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000fd80: 2020 2020 2020 2020 2065 7863 6570 7420           except 
+0000fd90: 4578 6365 7074 696f 6e3a 0d0a 2020 2020  Exception:..    
+0000fda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fdb0: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
+0000fdc0: 6368 616e 6765 2074 6869 7320 7768 656e  change this when
+0000fdd0: 206d 6174 6c61 6220 7374 6f72 6573 206d   matlab stores m
+0000fde0: 6574 6164 6174 610d 0a20 2020 2020 2020  etadata..       
+0000fdf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fe00: 2020 2020 2069 6620 6e6f 7420 6672 6f6d       if not from
+0000fe10: 5f6d 6174 6c61 623a 0d0a 2020 2020 2020  _matlab:..      
+0000fe20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fe30: 2020 2020 2020 2020 2020 6f72 6967 6572            origer
+0000fe40: 726f 7220 3d20 7379 732e 6578 635f 696e  ror = sys.exc_in
+0000fe50: 666f 2829 5b31 5d0d 0a20 2020 2020 2020  fo()[1]..       
+0000fe60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fe70: 2020 2020 2020 2020 2077 6172 6e69 6e67           warning
+0000fe80: 732e 7761 726e 280d 0a20 2020 2020 2020  s.warn(..       
+0000fe90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fea0: 2020 2020 2020 2020 2020 2020 2066 2245               f"E
+0000feb0: 7272 6f72 206f 6363 7572 6564 2077 6865  rror occured whe
+0000fec0: 6e20 7072 6f63 6573 7369 6e67 206d 6574  n processing met
+0000fed0: 6120 6461 7461 206f 6e20 696e 6465 7820  a data on index 
+0000fee0: 7b69 7465 6d5f 6964 787d 2e20 2041 7574  {item_idx}.  Aut
+0000fef0: 686f 723a 207b 6175 7468 6f72 7d2e 2045  hor: {author}. E
+0000ff00: 7272 6f72 3a20 7b6f 7269 6765 7272 6f72  rror: {origerror
+0000ff10: 2172 7d22 0d0a 2020 2020 2020 2020 2020  !r}"..          
 0000ff20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ff30: 2020 2020 2020 2020 2020 2020 2020 290d                ).
-0000ff40: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000ff50: 2020 2023 2061 7578 696c 6572 7920 6974     # auxilery it
-0000ff60: 656d 2028 6361 7465 676f 7269 6361 6c20  em (categorical 
-0000ff70: 756e 6971 7565 732c 2065 7463 2e29 0d0a  uniques, etc.)..
-0000ff80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ff90: 2320 7079 7468 6f6e 206f 6e6c 790d 0a20  # python only.. 
-0000ffa0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0000ffb0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-0000ffc0: 2020 2020 2020 2020 2020 7365 705f 6964            sep_id
-0000ffd0: 7820 3d20 6974 656d 6e61 6d65 2e66 696e  x = itemname.fin
-0000ffe0: 6428 2221 2229 0d0a 2020 2020 2020 2020  d("!")..        
-0000fff0: 2020 2020 2020 2020 2020 2020 7370 6563              spec
-00010000: 5f6e 616d 6520 3d20 6974 656d 6e61 6d65  _name = itemname
-00010010: 5b3a 7365 705f 6964 785d 0d0a 0d0a 2020  [:sep_idx]....  
-00010020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010030: 2020 2320 6561 6368 2064 6963 7469 6f6e    # each diction
-00010040: 6172 7920 6b65 7920 696e 2073 7065 635f  ary key in spec_
-00010050: 6172 7261 7973 2063 6f72 7265 7370 6f6e  arrays correspon
-00010060: 6473 2074 6f20 616e 2069 7465 6d20 696e  ds to an item in
-00010070: 2074 6865 206f 7269 6769 6e61 6c20 636f   the original co
-00010080: 6e74 6169 6e65 720d 0a20 2020 2020 2020  ntainer..       
-00010090: 2020 2020 2020 2020 2020 2020 2023 2073               # s
-000100a0: 7065 635f 6974 656d 7320 3d20 7b69 7465  pec_items = {ite
-000100b0: 6d6e 616d 653a 205b 6172 7231 2c20 6172  mname: [arr1, ar
-000100c0: 7232 2c20 6172 7233 2e2e 2e5d 7d0d 0a20  r2, arr3...]}.. 
-000100d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000100e0: 2020 2073 7065 635f 6c69 7374 203d 2073     spec_list = s
-000100f0: 7065 635f 6974 656d 732e 7365 7464 6566  pec_items.setdef
-00010100: 6175 6c74 2873 7065 635f 6e61 6d65 2c20  ault(spec_name, 
-00010110: 5b5d 290d 0a20 2020 2020 2020 2020 2020  [])..           
-00010120: 2020 2020 2020 2020 2073 7065 635f 6c69           spec_li
-00010130: 7374 2e61 7070 656e 6428 6172 7261 7973  st.append(arrays
-00010140: 5b69 7465 6d5f 6964 785d 290d 0a0d 0a20  [item_idx]).... 
-00010150: 2020 2020 2020 2020 2020 2023 206f 6e6c             # onl
-00010160: 7920 7573 6520 7468 6520 6d65 7461 2064  y use the meta d
-00010170: 6174 6120 666f 7220 7265 6275 696c 6469  ata for rebuildi
-00010180: 6e67 2073 7065 6369 616c 2073 7562 636c  ng special subcl
-00010190: 6173 7365 730d 0a20 2020 2020 2020 2020  asses..         
-000101a0: 2020 2023 2070 7974 686f 6e20 6f6e 6c79     # python only
-000101b0: 0d0a 2020 2020 2020 2020 2020 2020 6974  ..            it
-000101c0: 656d 5f6d 6574 6120 3d20 6d65 7461 2e67  em_meta = meta.g
-000101d0: 6574 2822 6974 656d 5f6d 6574 6122 2c20  et("item_meta", 
-000101e0: 5b5d 290d 0a20 2020 2020 2020 2020 2020  [])..           
-000101f0: 2066 6f72 2069 5f6d 6574 6120 696e 2069   for i_meta in i
-00010200: 7465 6d5f 6d65 7461 3a0d 0a20 2020 2020  tem_meta:..     
-00010210: 2020 2020 2020 2020 2020 2069 5f6d 6574             i_met
-00010220: 6120 3d20 4d65 7461 4461 7461 2869 5f6d  a = MetaData(i_m
-00010230: 6574 6129 0d0a 0d0a 2020 2020 2020 2020  eta)....        
-00010240: 2020 2020 2020 2020 695f 6e61 6d65 203d          i_name =
-00010250: 2069 5f6d 6574 615b 226e 616d 6522 5d0d   i_meta["name"].
-00010260: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010270: 2023 2069 7465 6d20 6d61 7920 6861 7665   # item may have
-00010280: 2062 6565 6e20 6578 636c 7564 6564 2c20   been excluded, 
-00010290: 6275 7420 7769 6c6c 2073 7469 6c6c 2061  but will still a
-000102a0: 7070 6561 7220 696e 2069 7465 6d5f 6d65  ppear in item_me
-000102b0: 7461 206c 6973 740d 0a20 2020 2020 2020  ta list..       
-000102c0: 2020 2020 2020 2020 2069 6620 695f 6e61           if i_na
-000102d0: 6d65 2069 6e20 6461 7461 3a0d 0a20 2020  me in data:..   
-000102e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000102f0: 2075 6e64 6572 6c79 696e 675f 6172 7220   underlying_arr 
-00010300: 3d20 6461 7461 5b69 5f6e 616d 655d 0d0a  = data[i_name]..
-00010310: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00010320: 2020 2020 2020 2320 6173 7369 676e 2074        # assign t
-00010330: 6865 2061 7272 6179 2061 206e 616d 6520  he array a name 
-00010340: 6561 726c 7920 736f 2074 6861 7420 6361  early so that ca
-00010350: 7465 676f 7269 6361 6c20 6361 6e20 7573  tegorical can us
-00010360: 6520 6974 0d0a 2020 2020 2020 2020 2020  e it..          
-00010370: 2020 2020 2020 2020 2020 756e 6465 726c            underl
-00010380: 7969 6e67 5f61 7272 2e73 6574 5f6e 616d  ying_arr.set_nam
-00010390: 6528 695f 6e61 6d65 290d 0a20 2020 2020  e(i_name)..     
-000103a0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-000103b0: 7272 6c69 7374 203d 2073 7065 635f 6974  rrlist = spec_it
-000103c0: 656d 732e 6765 7428 695f 6e61 6d65 2c20  ems.get(i_name, 
-000103d0: 5b5d 290d 0a0d 0a20 2020 2020 2020 2020  [])....         
-000103e0: 2020 2020 2020 2020 2020 2069 5f63 6c61             i_cla
-000103f0: 7373 203d 2069 5f6d 6574 612e 6974 656d  ss = i_meta.item
-00010400: 636c 6173 730d 0a0d 0a20 2020 2020 2020  class....       
-00010410: 2020 2020 2020 2020 2020 2020 2023 2054               # T
-00010420: 4553 540d 0a20 2020 2020 2020 2020 2020  EST..           
-00010430: 2020 2020 2020 2020 2064 6174 615b 695f           data[i_
-00010440: 6e61 6d65 5d20 3d20 695f 636c 6173 732e  name] = i_class.
-00010450: 5f6c 6f61 645f 6672 6f6d 5f73 6473 5f6d  _load_from_sds_m
-00010460: 6574 615f 6461 7461 2869 5f6e 616d 652c  eta_data(i_name,
-00010470: 2075 6e64 6572 6c79 696e 675f 6172 722c   underlying_arr,
-00010480: 2061 7272 6c69 7374 2c20 695f 6d65 7461   arrlist, i_meta
-00010490: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-000104a0: 2023 2062 7569 6c64 2064 6174 6120 7374   # build data st
-000104b0: 7275 6374 7572 6520 6672 6f6d 2064 6963  ructure from dic
-000104c0: 7469 6f6e 6172 790d 0a20 2020 2020 2020  tionary..       
-000104d0: 2020 2020 2023 2054 4553 540d 0a20 2020       # TEST..   
-000104e0: 2020 2020 2020 2020 2064 6174 6120 3d20           data = 
-000104f0: 636c 7328 6461 7461 290d 0a0d 0a20 2020  cls(data)....   
-00010500: 2020 2020 2020 2020 2023 206f 6e6c 7920           # only 
-00010510: 7079 7468 6f6e 2068 6173 206c 6162 656c  python has label
-00010520: 732c 2073 6f72 7420 696e 6465 782c 2066  s, sort index, f
-00010530: 6f6f 7465 7273 0d0a 2020 2020 2020 2020  ooters..        
-00010540: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-00010550: 2020 2020 2020 2020 2020 6c6f 6164 5f63            load_c
-00010560: 6c61 7373 5f6d 6574 6128 6461 7461 2c20  lass_meta(data, 
-00010570: 6172 7261 7973 2c20 6d65 7461 290d 0a20  arrays, meta).. 
-00010580: 2020 2020 2020 2020 2020 2065 7863 6570             excep
-00010590: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
-000105a0: 2020 2020 7061 7373 0d0a 2020 2020 2020      pass..      
-000105b0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-000105c0: 2020 2020 2023 206e 6565 6420 616e 2065       # need an e
-000105d0: 7861 6d70 6c65 206f 6620 7468 6973 2c20  xample of this, 
-000105e0: 6e6f 6e2d 7079 7468 6f6e 2f6d 6174 6c61  non-python/matla
-000105f0: 6220 7364 7320 6669 6c65 3f0d 0a20 2020  b sds file?..   
-00010600: 2020 2020 2020 2020 2064 6174 6120 3d20           data = 
-00010610: 636c 732e 5f6c 6f61 645f 7769 7468 6f75  cls._load_withou
-00010620: 745f 6d65 7461 5f64 6174 6128 6d65 7461  t_meta_data(meta
-00010630: 2c20 6172 7261 7973 2c20 6d65 7461 5f74  , arrays, meta_t
-00010640: 7570 732c 2066 696c 655f 6865 6164 6572  ups, file_header
-00010650: 290d 0a0d 0a20 2020 2020 2020 2072 6574  )....        ret
-00010660: 7572 6e20 6461 7461 0d0a 0d0a 2020 2020  urn data....    
-00010670: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+0000ff30: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
+0000ff40: 2020 2020 2020 2020 2020 2023 2061 7578             # aux
+0000ff50: 696c 6572 7920 6974 656d 2028 6361 7465  ilery item (cate
+0000ff60: 676f 7269 6361 6c20 756e 6971 7565 732c  gorical uniques,
+0000ff70: 2065 7463 2e29 0d0a 2020 2020 2020 2020   etc.)..        
+0000ff80: 2020 2020 2020 2020 2320 7079 7468 6f6e          # python
+0000ff90: 206f 6e6c 790d 0a20 2020 2020 2020 2020   only..         
+0000ffa0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+0000ffb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ffc0: 2020 7365 705f 6964 7820 3d20 6974 656d    sep_idx = item
+0000ffd0: 6e61 6d65 2e66 696e 6428 2221 2229 0d0a  name.find("!")..
+0000ffe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fff0: 2020 2020 7370 6563 5f6e 616d 6520 3d20      spec_name = 
+00010000: 6974 656d 6e61 6d65 5b3a 7365 705f 6964  itemname[:sep_id
+00010010: 785d 0d0a 0d0a 2020 2020 2020 2020 2020  x]....          
+00010020: 2020 2020 2020 2020 2020 2320 6561 6368            # each
+00010030: 2064 6963 7469 6f6e 6172 7920 6b65 7920   dictionary key 
+00010040: 696e 2073 7065 635f 6172 7261 7973 2063  in spec_arrays c
+00010050: 6f72 7265 7370 6f6e 6473 2074 6f20 616e  orresponds to an
+00010060: 2069 7465 6d20 696e 2074 6865 206f 7269   item in the ori
+00010070: 6769 6e61 6c20 636f 6e74 6169 6e65 720d  ginal container.
+00010080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010090: 2020 2020 2023 2073 7065 635f 6974 656d       # spec_item
+000100a0: 7320 3d20 7b69 7465 6d6e 616d 653a 205b  s = {itemname: [
+000100b0: 6172 7231 2c20 6172 7232 2c20 6172 7233  arr1, arr2, arr3
+000100c0: 2e2e 2e5d 7d0d 0a20 2020 2020 2020 2020  ...]}..         
+000100d0: 2020 2020 2020 2020 2020 2073 7065 635f             spec_
+000100e0: 6c69 7374 203d 2073 7065 635f 6974 656d  list = spec_item
+000100f0: 732e 7365 7464 6566 6175 6c74 2873 7065  s.setdefault(spe
+00010100: 635f 6e61 6d65 2c20 5b5d 290d 0a20 2020  c_name, [])..   
+00010110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010120: 2073 7065 635f 6c69 7374 2e61 7070 656e   spec_list.appen
+00010130: 6428 6172 7261 7973 5b69 7465 6d5f 6964  d(arrays[item_id
+00010140: 785d 290d 0a0d 0a20 2020 2020 2020 2020  x])....         
+00010150: 2020 2023 206f 6e6c 7920 7573 6520 7468     # only use th
+00010160: 6520 6d65 7461 2064 6174 6120 666f 7220  e meta data for 
+00010170: 7265 6275 696c 6469 6e67 2073 7065 6369  rebuilding speci
+00010180: 616c 2073 7562 636c 6173 7365 730d 0a20  al subclasses.. 
+00010190: 2020 2020 2020 2020 2020 2023 2070 7974             # pyt
+000101a0: 686f 6e20 6f6e 6c79 0d0a 2020 2020 2020  hon only..      
+000101b0: 2020 2020 2020 6974 656d 5f6d 6574 6120        item_meta 
+000101c0: 3d20 6d65 7461 2e67 6574 2822 6974 656d  = meta.get("item
+000101d0: 5f6d 6574 6122 2c20 5b5d 290d 0a20 2020  _meta", [])..   
+000101e0: 2020 2020 2020 2020 2066 6f72 2069 5f6d           for i_m
+000101f0: 6574 6120 696e 2069 7465 6d5f 6d65 7461  eta in item_meta
+00010200: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00010210: 2020 2069 5f6d 6574 6120 3d20 4d65 7461     i_meta = Meta
+00010220: 4461 7461 2869 5f6d 6574 6129 0d0a 0d0a  Data(i_meta)....
+00010230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010240: 695f 6e61 6d65 203d 2069 5f6d 6574 615b  i_name = i_meta[
+00010250: 226e 616d 6522 5d0d 0a20 2020 2020 2020  "name"]..       
+00010260: 2020 2020 2020 2020 2023 2069 7465 6d20           # item 
+00010270: 6d61 7920 6861 7665 2062 6565 6e20 6578  may have been ex
+00010280: 636c 7564 6564 2c20 6275 7420 7769 6c6c  cluded, but will
+00010290: 2073 7469 6c6c 2061 7070 6561 7220 696e   still appear in
+000102a0: 2069 7465 6d5f 6d65 7461 206c 6973 740d   item_meta list.
+000102b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000102c0: 2069 6620 695f 6e61 6d65 2069 6e20 6461   if i_name in da
+000102d0: 7461 3a0d 0a20 2020 2020 2020 2020 2020  ta:..           
+000102e0: 2020 2020 2020 2020 2075 6e64 6572 6c79           underly
+000102f0: 696e 675f 6172 7220 3d20 6461 7461 5b69  ing_arr = data[i
+00010300: 5f6e 616d 655d 0d0a 0d0a 2020 2020 2020  _name]....      
+00010310: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00010320: 6173 7369 676e 2074 6865 2061 7272 6179  assign the array
+00010330: 2061 206e 616d 6520 6561 726c 7920 736f   a name early so
+00010340: 2074 6861 7420 6361 7465 676f 7269 6361   that categorica
+00010350: 6c20 6361 6e20 7573 6520 6974 0d0a 2020  l can use it..  
+00010360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010370: 2020 756e 6465 726c 7969 6e67 5f61 7272    underlying_arr
+00010380: 2e73 6574 5f6e 616d 6528 695f 6e61 6d65  .set_name(i_name
+00010390: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+000103a0: 2020 2020 2020 2061 7272 6c69 7374 203d         arrlist =
+000103b0: 2073 7065 635f 6974 656d 732e 6765 7428   spec_items.get(
+000103c0: 695f 6e61 6d65 2c20 5b5d 290d 0a0d 0a20  i_name, []).... 
+000103d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000103e0: 2020 2069 5f63 6c61 7373 203d 2069 5f6d     i_class = i_m
+000103f0: 6574 612e 6974 656d 636c 6173 730d 0a0d  eta.itemclass...
+00010400: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010410: 2020 2020 2023 2054 4553 540d 0a20 2020       # TEST..   
+00010420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010430: 2064 6174 615b 695f 6e61 6d65 5d20 3d20   data[i_name] = 
+00010440: 695f 636c 6173 732e 5f6c 6f61 645f 6672  i_class._load_fr
+00010450: 6f6d 5f73 6473 5f6d 6574 615f 6461 7461  om_sds_meta_data
+00010460: 2869 5f6e 616d 652c 2075 6e64 6572 6c79  (i_name, underly
+00010470: 696e 675f 6172 722c 2061 7272 6c69 7374  ing_arr, arrlist
+00010480: 2c20 695f 6d65 7461 290d 0a0d 0a20 2020  , i_meta)....   
+00010490: 2020 2020 2020 2020 2023 2062 7569 6c64           # build
+000104a0: 2064 6174 6120 7374 7275 6374 7572 6520   data structure 
+000104b0: 6672 6f6d 2064 6963 7469 6f6e 6172 790d  from dictionary.
+000104c0: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
+000104d0: 4553 540d 0a20 2020 2020 2020 2020 2020  EST..           
+000104e0: 2064 6174 6120 3d20 636c 7328 6461 7461   data = cls(data
+000104f0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00010500: 2023 206f 6e6c 7920 7079 7468 6f6e 2068   # only python h
+00010510: 6173 206c 6162 656c 732c 2073 6f72 7420  as labels, sort 
+00010520: 696e 6465 782c 2066 6f6f 7465 7273 0d0a  index, footers..
+00010530: 2020 2020 2020 2020 2020 2020 7472 793a              try:
+00010540: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00010550: 2020 6c6f 6164 5f63 6c61 7373 5f6d 6574    load_class_met
+00010560: 6128 6461 7461 2c20 6172 7261 7973 2c20  a(data, arrays, 
+00010570: 6d65 7461 290d 0a20 2020 2020 2020 2020  meta)..         
+00010580: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
+00010590: 2020 2020 2020 2020 2020 2020 7061 7373              pass
+000105a0: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
+000105b0: 0a20 2020 2020 2020 2020 2020 2023 206e  .            # n
+000105c0: 6565 6420 616e 2065 7861 6d70 6c65 206f  eed an example o
+000105d0: 6620 7468 6973 2c20 6e6f 6e2d 7079 7468  f this, non-pyth
+000105e0: 6f6e 2f6d 6174 6c61 6220 7364 7320 6669  on/matlab sds fi
+000105f0: 6c65 3f0d 0a20 2020 2020 2020 2020 2020  le?..           
+00010600: 2064 6174 6120 3d20 636c 732e 5f6c 6f61   data = cls._loa
+00010610: 645f 7769 7468 6f75 745f 6d65 7461 5f64  d_without_meta_d
+00010620: 6174 6128 6d65 7461 2c20 6172 7261 7973  ata(meta, arrays
+00010630: 2c20 6d65 7461 5f74 7570 732c 2066 696c  , meta_tups, fil
+00010640: 655f 6865 6164 6572 290d 0a0d 0a20 2020  e_header)....   
+00010650: 2020 2020 2072 6574 7572 6e20 6461 7461       return data
+00010660: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+00010670: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00010680: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00010690: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000106a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000106b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
-000106c0: 2020 4063 6c61 7373 6d65 7468 6f64 0d0a    @classmethod..
-000106d0: 2020 2020 6465 6620 5f6c 6f61 645f 7769      def _load_wi
-000106e0: 7468 6f75 745f 6d65 7461 5f64 6174 6128  thout_meta_data(
-000106f0: 636c 732c 206d 6574 612c 2061 7272 6179  cls, meta, array
-00010700: 732c 206d 6574 615f 7475 7073 2c20 6669  s, meta_tups, fi
-00010710: 6c65 5f68 6561 6465 723a 204f 7074 696f  le_header: Optio
-00010720: 6e61 6c5b 6469 6374 5d20 3d20 4e6f 6e65  nal[dict] = None
-00010730: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
-00010740: 0a20 2020 2020 2020 204c 6f61 6473 2066  .        Loads f
-00010750: 726f 6d20 6d65 7461 2074 7570 6c65 7320  rom meta tuples 
-00010760: 6f6e 6c79 2028 652e 672e 2077 6865 6e20  only (e.g. when 
-00010770: 6e6f 206d 6574 6164 6174 6120 6973 2067  no metadata is g
-00010780: 656e 6572 6174 6564 2062 7920 4d61 746c  enerated by Matl
-00010790: 6162 290d 0a20 2020 2020 2020 2022 2222  ab)..        """
-000107a0: 0d0a 2020 2020 2020 2020 6966 2066 696c  ..        if fil
-000107b0: 655f 6865 6164 6572 2069 7320 4e6f 6e65  e_header is None
-000107c0: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
-000107d0: 696c 655f 6865 6164 6572 203d 2064 6963  ile_header = dic
-000107e0: 7428 290d 0a20 2020 2020 2020 2064 6174  t()..        dat
-000107f0: 6120 3d20 7b7d 0d0a 2020 2020 2020 2020  a = {}..        
-00010800: 6578 7472 615f 636f 6c73 203d 205b 5d20  extra_cols = [] 
-00010810: 2023 206e 6f74 2075 7365 6420 7965 740d   # not used yet.
-00010820: 0a0d 0a20 2020 2020 2020 2066 6f72 2069  ...        for i
-00010830: 6478 2c20 6d65 7461 5f74 7570 2069 6e20  dx, meta_tup in 
-00010840: 656e 756d 6572 6174 6528 6d65 7461 5f74  enumerate(meta_t
-00010850: 7570 7329 3a0d 0a20 2020 2020 2020 2020  ups):..         
-00010860: 2020 206e 616d 6520 3d20 6d65 7461 5f74     name = meta_t
-00010870: 7570 5b30 5d2e 6465 636f 6465 2829 0d0a  up[0].decode()..
-00010880: 2020 2020 2020 2020 2020 2020 6d65 7461              meta
-00010890: 5f65 6e75 6d20 3d20 6d65 7461 5f74 7570  _enum = meta_tup
-000108a0: 5b31 5d0d 0a20 2020 2020 2020 2020 2020  [1]..           
-000108b0: 2069 6620 6d65 7461 5f65 6e75 6d20 2620   if meta_enum & 
-000108c0: 5344 5346 6c61 672e 4f72 6967 696e 616c  SDSFlag.Original
-000108d0: 436f 6e74 6169 6e65 723a 0d0a 2020 2020  Container:..    
-000108e0: 2020 2020 2020 2020 2020 2020 2320 6578              # ex
-000108f0: 7472 6163 7420 7363 616c 6172 730d 0a20  tract scalars.. 
-00010900: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00010910: 6620 6d65 7461 5f65 6e75 6d20 2620 5344  f meta_enum & SD
-00010920: 5346 6c61 672e 5363 616c 6172 3a0d 0a20  SFlag.Scalar:.. 
-00010930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010940: 2020 2069 7465 6d20 3d20 6172 7261 7973     item = arrays
-00010950: 5b69 6478 5d5b 305d 0d0a 0d0a 2020 2020  [idx][0]....    
-00010960: 2020 2020 2020 2020 2020 2020 2320 7369              # si
-00010970: 6e67 6c65 2061 7272 6179 206f 7220 636f  ngle array or co
-00010980: 6e74 6169 6e65 720d 0a20 2020 2020 2020  ntainer..       
-00010990: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-000109a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000109b0: 2020 2020 2320 544f 444f 3a20 6164 6420      # TODO: add 
-000109c0: 7061 7468 2069 6620 6974 656d 2077 6173  path if item was
-000109d0: 206e 6573 7465 6420 636f 6e74 6169 6e65   nested containe
-000109e0: 7220 2d20 6861 7320 7468 6520 636f 6e74  r - has the cont
-000109f0: 6169 6e65 7220 616c 7265 6164 7920 6265  ainer already be
-00010a00: 656e 2062 7569 6c74 3f0d 0a20 2020 2020  en built?..     
-00010a10: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00010a20: 7465 6d20 3d20 6172 7261 7973 5b69 6478  tem = arrays[idx
-00010a30: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-00010a40: 2020 2023 2054 4f44 4f3a 2065 7665 6e74     # TODO: event
-00010a50: 7561 6c6c 7920 6368 6563 6b20 7374 6163  ually check stac
-00010a60: 6b61 626c 6520 666c 6167 2028 7769 6c6c  kable flag (will
-00010a70: 2062 6520 6170 706c 6965 6420 7769 7468   be applied with
-00010a80: 206d 756c 7469 6461 7920 6c6f 6164 290d   multiday load).
-00010a90: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00010aa0: 2020 2064 6174 615b 6e61 6d65 5d20 3d20     data[name] = 
-00010ab0: 6974 656d 0d0a 2020 2020 2020 2020 2020  item..          
-00010ac0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00010ad0: 2020 2020 2020 2020 2023 2065 7874 7261           # extra
-00010ae0: 5f63 6f6c 732e 6170 7065 6e64 286d 6574  _cols.append(met
-00010af0: 615f 7475 7029 0d0a 2020 2020 2020 2020  a_tup)..        
-00010b00: 2020 2020 2020 2020 7072 696e 7428 6622          print(f"
-00010b10: 636f 6c75 6d6e 207b 6e61 6d65 7d20 7761  column {name} wa
-00010b20: 7320 6e6f 7420 6672 6f6d 206f 7269 6769  s not from origi
-00010b30: 6e61 6c20 6461 7461 7365 7422 290d 0a0d  nal dataset")...
-00010b40: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
-00010b50: 2020 2020 2020 2020 2020 2023 2054 4f44             # TOD
-00010b60: 4f3a 2067 6574 2064 6174 6173 6574 2f73  O: get dataset/s
-00010b70: 7472 7563 742f 7461 626c 6520 696e 666f  truct/table info
-00010b80: 2066 726f 6d20 5344 5320 6c6f 6164 2063   from SDS load c
-00010b90: 616c 6c0d 0a20 2020 2020 2020 2020 2020  all..           
-00010ba0: 2064 6174 6120 3d20 636c 7328 6461 7461   data = cls(data
-00010bb0: 290d 0a20 2020 2020 2020 2065 7863 6570  )..        excep
-00010bc0: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
-00010bd0: 2320 616c 7761 7973 2066 616c 6c20 6261  # always fall ba
-00010be0: 636b 206f 6e20 7374 7275 6374 0d0a 2020  ck on struct..  
-00010bf0: 2020 2020 2020 2020 2020 6461 7461 203d            data =
-00010c00: 2053 7472 7563 7428 6461 7461 290d 0a0d   Struct(data)...
-00010c10: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00010c20: 6461 7461 0d0a 0d0a 2020 2020 2320 2d2d  data....    # --
+000106b0: 2d2d 2d2d 0d0a 2020 2020 4063 6c61 7373  ----..    @class
+000106c0: 6d65 7468 6f64 0d0a 2020 2020 6465 6620  method..    def 
+000106d0: 5f6c 6f61 645f 7769 7468 6f75 745f 6d65  _load_without_me
+000106e0: 7461 5f64 6174 6128 636c 732c 206d 6574  ta_data(cls, met
+000106f0: 612c 2061 7272 6179 732c 206d 6574 615f  a, arrays, meta_
+00010700: 7475 7073 2c20 6669 6c65 5f68 6561 6465  tups, file_heade
+00010710: 723a 204f 7074 696f 6e61 6c5b 6469 6374  r: Optional[dict
+00010720: 5d20 3d20 4e6f 6e65 293a 0d0a 2020 2020  ] = None):..    
+00010730: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00010740: 204c 6f61 6473 2066 726f 6d20 6d65 7461   Loads from meta
+00010750: 2074 7570 6c65 7320 6f6e 6c79 2028 652e   tuples only (e.
+00010760: 672e 2077 6865 6e20 6e6f 206d 6574 6164  g. when no metad
+00010770: 6174 6120 6973 2067 656e 6572 6174 6564  ata is generated
+00010780: 2062 7920 4d61 746c 6162 290d 0a20 2020   by Matlab)..   
+00010790: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+000107a0: 2020 6966 2066 696c 655f 6865 6164 6572    if file_header
+000107b0: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
+000107c0: 2020 2020 2020 2066 696c 655f 6865 6164         file_head
+000107d0: 6572 203d 2064 6963 7428 290d 0a20 2020  er = dict()..   
+000107e0: 2020 2020 2064 6174 6120 3d20 7b7d 0d0a       data = {}..
+000107f0: 2020 2020 2020 2020 6578 7472 615f 636f          extra_co
+00010800: 6c73 203d 205b 5d20 2023 206e 6f74 2075  ls = []  # not u
+00010810: 7365 6420 7965 740d 0a0d 0a20 2020 2020  sed yet....     
+00010820: 2020 2066 6f72 2069 6478 2c20 6d65 7461     for idx, meta
+00010830: 5f74 7570 2069 6e20 656e 756d 6572 6174  _tup in enumerat
+00010840: 6528 6d65 7461 5f74 7570 7329 3a0d 0a20  e(meta_tups):.. 
+00010850: 2020 2020 2020 2020 2020 206e 616d 6520             name 
+00010860: 3d20 6d65 7461 5f74 7570 5b30 5d2e 6465  = meta_tup[0].de
+00010870: 636f 6465 2829 0d0a 2020 2020 2020 2020  code()..        
+00010880: 2020 2020 6d65 7461 5f65 6e75 6d20 3d20      meta_enum = 
+00010890: 6d65 7461 5f74 7570 5b31 5d0d 0a20 2020  meta_tup[1]..   
+000108a0: 2020 2020 2020 2020 2069 6620 6d65 7461           if meta
+000108b0: 5f65 6e75 6d20 2620 5344 5346 6c61 672e  _enum & SDSFlag.
+000108c0: 4f72 6967 696e 616c 436f 6e74 6169 6e65  OriginalContaine
+000108d0: 723a 0d0a 2020 2020 2020 2020 2020 2020  r:..            
+000108e0: 2020 2020 2320 6578 7472 6163 7420 7363      # extract sc
+000108f0: 616c 6172 730d 0a20 2020 2020 2020 2020  alars..         
+00010900: 2020 2020 2020 2069 6620 6d65 7461 5f65         if meta_e
+00010910: 6e75 6d20 2620 5344 5346 6c61 672e 5363  num & SDSFlag.Sc
+00010920: 616c 6172 3a0d 0a20 2020 2020 2020 2020  alar:..         
+00010930: 2020 2020 2020 2020 2020 2069 7465 6d20             item 
+00010940: 3d20 6172 7261 7973 5b69 6478 5d5b 305d  = arrays[idx][0]
+00010950: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00010960: 2020 2020 2320 7369 6e67 6c65 2061 7272      # single arr
+00010970: 6179 206f 7220 636f 6e74 6169 6e65 720d  ay or container.
+00010980: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010990: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+000109a0: 2020 2020 2020 2020 2020 2020 2320 544f              # TO
+000109b0: 444f 3a20 6164 6420 7061 7468 2069 6620  DO: add path if 
+000109c0: 6974 656d 2077 6173 206e 6573 7465 6420  item was nested 
+000109d0: 636f 6e74 6169 6e65 7220 2d20 6861 7320  container - has 
+000109e0: 7468 6520 636f 6e74 6169 6e65 7220 616c  the container al
+000109f0: 7265 6164 7920 6265 656e 2062 7569 6c74  ready been built
+00010a00: 3f0d 0a20 2020 2020 2020 2020 2020 2020  ?..             
+00010a10: 2020 2020 2020 2069 7465 6d20 3d20 6172         item = ar
+00010a20: 7261 7973 5b69 6478 5d0d 0a20 2020 2020  rays[idx]..     
+00010a30: 2020 2020 2020 2020 2020 2023 2054 4f44             # TOD
+00010a40: 4f3a 2065 7665 6e74 7561 6c6c 7920 6368  O: eventually ch
+00010a50: 6563 6b20 7374 6163 6b61 626c 6520 666c  eck stackable fl
+00010a60: 6167 2028 7769 6c6c 2062 6520 6170 706c  ag (will be appl
+00010a70: 6965 6420 7769 7468 206d 756c 7469 6461  ied with multida
+00010a80: 7920 6c6f 6164 290d 0a0d 0a20 2020 2020  y load)....     
+00010a90: 2020 2020 2020 2020 2020 2064 6174 615b             data[
+00010aa0: 6e61 6d65 5d20 3d20 6974 656d 0d0a 2020  name] = item..  
+00010ab0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+00010ac0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010ad0: 2023 2065 7874 7261 5f63 6f6c 732e 6170   # extra_cols.ap
+00010ae0: 7065 6e64 286d 6574 615f 7475 7029 0d0a  pend(meta_tup)..
+00010af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010b00: 7072 696e 7428 6622 636f 6c75 6d6e 207b  print(f"column {
+00010b10: 6e61 6d65 7d20 7761 7320 6e6f 7420 6672  name} was not fr
+00010b20: 6f6d 206f 7269 6769 6e61 6c20 6461 7461  om original data
+00010b30: 7365 7422 290d 0a0d 0a20 2020 2020 2020  set")....       
+00010b40: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+00010b50: 2020 2023 2054 4f44 4f3a 2067 6574 2064     # TODO: get d
+00010b60: 6174 6173 6574 2f73 7472 7563 742f 7461  ataset/struct/ta
+00010b70: 626c 6520 696e 666f 2066 726f 6d20 5344  ble info from SD
+00010b80: 5320 6c6f 6164 2063 616c 6c0d 0a20 2020  S load call..   
+00010b90: 2020 2020 2020 2020 2064 6174 6120 3d20           data = 
+00010ba0: 636c 7328 6461 7461 290d 0a20 2020 2020  cls(data)..     
+00010bb0: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
+00010bc0: 2020 2020 2020 2020 2320 616c 7761 7973          # always
+00010bd0: 2066 616c 6c20 6261 636b 206f 6e20 7374   fall back on st
+00010be0: 7275 6374 0d0a 2020 2020 2020 2020 2020  ruct..          
+00010bf0: 2020 6461 7461 203d 2053 7472 7563 7428    data = Struct(
+00010c00: 6461 7461 290d 0a0d 0a20 2020 2020 2020  data)....       
+00010c10: 2072 6574 7572 6e20 6461 7461 0d0a 0d0a   return data....
+00010c20: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
 00010c30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00010c40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00010c50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00010c60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010c70: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 6465  --------..    de
-00010c80: 6620 6d61 6b65 5f63 6174 6567 6f72 6963  f make_categoric
-00010c90: 616c 7328 7365 6c66 2c20 636f 6c75 6d6e  als(self, column
-00010ca0: 6c69 7374 3d4e 6f6e 652c 2064 7479 7065  list=None, dtype
-00010cb0: 3d4e 6f6e 6529 202d 3e20 4e6f 6e65 3a0d  =None) -> None:.
-00010cc0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00010cd0: 2020 2020 2020 436f 6e76 6572 7473 2073        Converts s
-00010ce0: 7065 6369 6669 6564 2073 7472 696e 672f  pecified string/
-00010cf0: 6279 7465 7320 636f 6c75 6d6e 7320 6f72  bytes columns or
-00010d00: 2061 6c6c 2073 7472 696e 672f 6279 7465   all string/byte
-00010d10: 7320 636f 6c75 6d6e 7320 746f 2043 6174  s columns to Cat
-00010d20: 6567 6f72 6963 616c 2e0d 0a20 2020 2020  egorical...     
-00010d30: 2020 2057 696c 6c20 616c 736f 2063 7261     Will also cra
-00010d40: 776c 2074 6872 6f75 6768 206e 6573 7465  wl through neste
-00010d50: 6420 7374 7275 6374 732f 6461 7461 7365  d structs/datase
-00010d60: 7473 2061 6e64 2063 6f6e 7665 7274 2074  ts and convert t
-00010d70: 6865 6972 2073 7472 696e 6773 2074 6f20  heir strings to 
-00010d80: 6361 7465 676f 7269 6361 6c73 2e0d 0a0d  categoricals....
-00010d90: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
-00010da0: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
-00010db0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-00010dc0: 2063 6f6c 756d 6e6c 6973 7420 3a20 6073   columnlist : `s
-00010dd0: 7472 6020 6f72 2060 6c69 7374 602c 206f  tr` or `list`, o
-00010de0: 7074 696f 6e61 6c0d 0a20 2020 2020 2020  ptional..       
-00010df0: 2020 2020 2053 696e 676c 6520 6e61 6d65       Single name
-00010e00: 2c20 6f72 206c 6973 7420 6f66 206e 616d  , or list of nam
-00010e10: 6573 206f 6620 6974 656d 7320 746f 2063  es of items to c
-00010e20: 6f6e 7665 7274 2074 6f20 6361 7465 676f  onvert to catego
-00010e30: 7269 6361 6c73 2e0d 0a20 2020 2020 2020  ricals...       
-00010e40: 2064 7479 7065 203a 2060 6e75 6d70 792e   dtype : `numpy.
-00010e50: 6474 7970 6560 2c20 6f70 7469 6f6e 616c  dtype`, optional
-00010e60: 0d0a 2020 2020 2020 2020 2020 2020 496e  ..            In
-00010e70: 7465 6765 7220 6474 7970 6520 666f 7220  teger dtype for 
-00010e80: 7468 6520 6361 7465 676f 7269 6361 6c73  the categoricals
-00010e90: 2720 756e 6465 726c 7969 6e67 2061 7272  ' underlying arr
-00010ea0: 6179 732e 0d0a 0d0a 2020 2020 2020 2020  ays.....        
-00010eb0: 5261 6973 6573 0d0a 2020 2020 2020 2020  Raises..        
-00010ec0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00010ed0: 5479 7065 4572 726f 720d 0a20 2020 2020  TypeError..     
-00010ee0: 2020 2020 2020 2049 6620 7468 6520 6474         If the dt
-00010ef0: 7970 6520 7761 7320 7365 7420 746f 2061  ype was set to a
-00010f00: 206e 6f6e 2d64 7479 7065 206f 626a 6563   non-dtype objec
-00010f10: 742e 0d0a 2020 2020 2020 2020 5661 6c75  t...        Valu
-00010f20: 6545 7272 6f72 0d0a 2020 2020 2020 2020  eError..        
-00010f30: 2020 2020 4966 2061 2072 6571 7565 7374      If a request
-00010f40: 6564 2069 7465 6d20 636f 756c 6420 6e6f  ed item could no
-00010f50: 7420 6265 2066 6f75 6e64 2069 6e20 7468  t be found in th
-00010f60: 6520 636f 6e74 6169 6e65 722e 0d0a 0d0a  e container.....
-00010f70: 2020 2020 2020 2020 4e6f 7465 730d 0a20          Notes.. 
-00010f80: 2020 2020 2020 202d 2d2d 2d2d 0d0a 2020         -----..  
-00010f90: 2020 2020 2020 4572 726f 7220 6368 6563        Error chec
-00010fa0: 6b69 6e67 2077 696c 6c20 636f 6d70 6c65  king will comple
-00010fb0: 7465 2069 6e20 7468 6520 726f 6f74 2073  te in the root s
-00010fc0: 7472 7563 7475 7265 2062 6566 6f72 6520  tructure before 
-00010fd0: 616e 7920 636f 6e76 6572 7369 6f6e 2062  any conversion b
-00010fe0: 6567 696e 732e 0d0a 2020 2020 2020 2020  egins...        
-00010ff0: 2222 220d 0a0d 0a20 2020 2020 2020 2069  """....        i
-00011000: 6620 6474 7970 6520 6973 206e 6f74 204e  f dtype is not N
-00011010: 6f6e 6520 616e 6420 6973 696e 7374 616e  one and isinstan
-00011020: 6365 2864 7479 7065 2c20 6e70 2e64 7479  ce(dtype, np.dty
-00011030: 7065 2920 6973 2046 616c 7365 3a0d 0a20  pe) is False:.. 
-00011040: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00011050: 2054 7970 6545 7272 6f72 2866 2264 7479   TypeError(f"dty
-00011060: 7065 206b 6579 776f 7264 2077 6173 206e  pe keyword was n
-00011070: 6f74 206e 756d 7079 2064 7479 7065 2e20  ot numpy dtype. 
-00011080: 676f 7420 7b74 7970 6528 6474 7970 6529  got {type(dtype)
-00011090: 7d20 696e 7374 6561 642e 2229 0d0a 0d0a  } instead.")....
-000110a0: 2020 2020 2020 2020 6966 2063 6f6c 756d          if colum
-000110b0: 6e6c 6973 7420 6973 204e 6f6e 653a 0d0a  nlist is None:..
-000110c0: 2020 2020 2020 2020 2020 2020 636f 6c75              colu
-000110d0: 6d6e 6c69 7374 203d 2073 656c 662e 6b65  mnlist = self.ke
-000110e0: 7973 2829 0d0a 0d0a 2020 2020 2020 2020  ys()....        
-000110f0: 2320 6d61 6b65 2073 7572 6520 616c 6c20  # make sure all 
-00011100: 636f 6c75 6d6e 7320 6578 6973 7420 6265  columns exist be
-00011110: 666f 7265 2073 7461 7274 696e 6720 636f  fore starting co
-00011120: 6e76 6572 7369 6f6e 0d0a 2020 2020 2020  nversion..      
-00011130: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00011140: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
-00011150: 7374 616e 6365 2863 6f6c 756d 6e6c 6973  stance(columnlis
-00011160: 742c 206c 6973 7429 3a0d 0a20 2020 2020  t, list):..     
-00011170: 2020 2020 2020 2020 2020 2063 6f6c 756d             colum
-00011180: 6e6c 6973 7420 3d20 5b63 6f6c 756d 6e6c  nlist = [columnl
-00011190: 6973 745d 0d0a 0d0a 2020 2020 2020 2020  ist]....        
-000111a0: 2020 2020 666f 7220 6320 696e 2063 6f6c      for c in col
-000111b0: 756d 6e6c 6973 743a 0d0a 2020 2020 2020  umnlist:..      
-000111c0: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
-000111d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000111e0: 2020 2020 6765 7461 7474 7228 7365 6c66      getattr(self
-000111f0: 2c20 6329 0d0a 2020 2020 2020 2020 2020  , c)..          
-00011200: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
-00011210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011220: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
-00011230: 726f 7228 6622 436f 756c 6420 6e6f 7420  ror(f"Could not 
-00011240: 6669 6e64 2063 6f6c 756d 6e20 7b63 7d20  find column {c} 
-00011250: 696e 2044 6174 6173 6574 2e20 436f 756c  in Dataset. Coul
-00011260: 6420 6e6f 7420 666c 6970 2074 6f20 6361  d not flip to ca
-00011270: 7465 676f 7269 6361 6c2e 2229 0d0a 0d0a  tegorical.")....
-00011280: 2020 2020 2020 2020 666f 7220 636f 6c6e          for coln
-00011290: 616d 6520 696e 2063 6f6c 756d 6e6c 6973  ame in columnlis
-000112a0: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
-000112b0: 636f 6c20 3d20 7365 6c66 5b63 6f6c 6e61  col = self[colna
-000112c0: 6d65 5d0d 0a20 2020 2020 2020 2020 2020  me]..           
-000112d0: 2023 2063 6865 636b 2074 6f20 7365 6520   # check to see 
-000112e0: 6966 2077 6520 6e65 6564 2074 6f20 6d61  if we need to ma
-000112f0: 6b65 2061 206e 6573 7465 6420 6361 6c6c  ke a nested call
-00011300: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00011310: 2068 6173 6174 7472 2863 6f6c 2c20 226d   hasattr(col, "m
-00011320: 616b 655f 6361 7465 676f 7269 6361 6c73  ake_categoricals
-00011330: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
-00011340: 2020 2020 2063 6f6c 2e6d 616b 655f 6361       col.make_ca
-00011350: 7465 676f 7269 6361 6c73 2864 7479 7065  tegoricals(dtype
-00011360: 3d64 7479 7065 290d 0a20 2020 2020 2020  =dtype)..       
-00011370: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00011380: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00011390: 7369 6e73 7461 6e63 6528 636f 6c2c 206e  sinstance(col, n
-000113a0: 702e 6e64 6172 7261 7929 2061 6e64 2063  p.ndarray) and c
-000113b0: 6f6c 2e64 7479 7065 2e63 6861 7220 696e  ol.dtype.char in
-000113c0: 2022 5553 223a 0d0a 2020 2020 2020 2020   "US":..        
-000113d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000113e0: 5b63 6f6c 6e61 6d65 5d20 3d20 5479 7065  [colname] = Type
-000113f0: 5265 6769 7374 6572 2e43 6174 6567 6f72  Register.Categor
-00011400: 6963 616c 2863 6f6c 2c20 6474 7970 653d  ical(col, dtype=
-00011410: 6474 7970 6529 0d0a 0d0a 2020 2020 2320  dtype)....    # 
+00010c70: 0d0a 2020 2020 6465 6620 6d61 6b65 5f63  ..    def make_c
+00010c80: 6174 6567 6f72 6963 616c 7328 7365 6c66  ategoricals(self
+00010c90: 2c20 636f 6c75 6d6e 6c69 7374 3d4e 6f6e  , columnlist=Non
+00010ca0: 652c 2064 7479 7065 3d4e 6f6e 6529 202d  e, dtype=None) -
+00010cb0: 3e20 4e6f 6e65 3a0d 0a20 2020 2020 2020  > None:..       
+00010cc0: 2022 2222 0d0a 2020 2020 2020 2020 436f   """..        Co
+00010cd0: 6e76 6572 7473 2073 7065 6369 6669 6564  nverts specified
+00010ce0: 2073 7472 696e 672f 6279 7465 7320 636f   string/bytes co
+00010cf0: 6c75 6d6e 7320 6f72 2061 6c6c 2073 7472  lumns or all str
+00010d00: 696e 672f 6279 7465 7320 636f 6c75 6d6e  ing/bytes column
+00010d10: 7320 746f 2043 6174 6567 6f72 6963 616c  s to Categorical
+00010d20: 2e0d 0a20 2020 2020 2020 2057 696c 6c20  ...        Will 
+00010d30: 616c 736f 2063 7261 776c 2074 6872 6f75  also crawl throu
+00010d40: 6768 206e 6573 7465 6420 7374 7275 6374  gh nested struct
+00010d50: 732f 6461 7461 7365 7473 2061 6e64 2063  s/datasets and c
+00010d60: 6f6e 7665 7274 2074 6865 6972 2073 7472  onvert their str
+00010d70: 696e 6773 2074 6f20 6361 7465 676f 7269  ings to categori
+00010d80: 6361 6c73 2e0d 0a0d 0a20 2020 2020 2020  cals.....       
+00010d90: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
+00010da0: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
+00010db0: 0a20 2020 2020 2020 2063 6f6c 756d 6e6c  .        columnl
+00010dc0: 6973 7420 3a20 6073 7472 6020 6f72 2060  ist : `str` or `
+00010dd0: 6c69 7374 602c 206f 7074 696f 6e61 6c0d  list`, optional.
+00010de0: 0a20 2020 2020 2020 2020 2020 2053 696e  .            Sin
+00010df0: 676c 6520 6e61 6d65 2c20 6f72 206c 6973  gle name, or lis
+00010e00: 7420 6f66 206e 616d 6573 206f 6620 6974  t of names of it
+00010e10: 656d 7320 746f 2063 6f6e 7665 7274 2074  ems to convert t
+00010e20: 6f20 6361 7465 676f 7269 6361 6c73 2e0d  o categoricals..
+00010e30: 0a20 2020 2020 2020 2064 7479 7065 203a  .        dtype :
+00010e40: 2060 6e75 6d70 792e 6474 7970 6560 2c20   `numpy.dtype`, 
+00010e50: 6f70 7469 6f6e 616c 0d0a 2020 2020 2020  optional..      
+00010e60: 2020 2020 2020 496e 7465 6765 7220 6474        Integer dt
+00010e70: 7970 6520 666f 7220 7468 6520 6361 7465  ype for the cate
+00010e80: 676f 7269 6361 6c73 2720 756e 6465 726c  goricals' underl
+00010e90: 7969 6e67 2061 7272 6179 732e 0d0a 0d0a  ying arrays.....
+00010ea0: 2020 2020 2020 2020 5261 6973 6573 0d0a          Raises..
+00010eb0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 0d0a          ------..
+00010ec0: 2020 2020 2020 2020 5479 7065 4572 726f          TypeErro
+00010ed0: 720d 0a20 2020 2020 2020 2020 2020 2049  r..            I
+00010ee0: 6620 7468 6520 6474 7970 6520 7761 7320  f the dtype was 
+00010ef0: 7365 7420 746f 2061 206e 6f6e 2d64 7479  set to a non-dty
+00010f00: 7065 206f 626a 6563 742e 0d0a 2020 2020  pe object...    
+00010f10: 2020 2020 5661 6c75 6545 7272 6f72 0d0a      ValueError..
+00010f20: 2020 2020 2020 2020 2020 2020 4966 2061              If a
+00010f30: 2072 6571 7565 7374 6564 2069 7465 6d20   requested item 
+00010f40: 636f 756c 6420 6e6f 7420 6265 2066 6f75  could not be fou
+00010f50: 6e64 2069 6e20 7468 6520 636f 6e74 6169  nd in the contai
+00010f60: 6e65 722e 0d0a 0d0a 2020 2020 2020 2020  ner.....        
+00010f70: 4e6f 7465 730d 0a20 2020 2020 2020 202d  Notes..        -
+00010f80: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4572  ----..        Er
+00010f90: 726f 7220 6368 6563 6b69 6e67 2077 696c  ror checking wil
+00010fa0: 6c20 636f 6d70 6c65 7465 2069 6e20 7468  l complete in th
+00010fb0: 6520 726f 6f74 2073 7472 7563 7475 7265  e root structure
+00010fc0: 2062 6566 6f72 6520 616e 7920 636f 6e76   before any conv
+00010fd0: 6572 7369 6f6e 2062 6567 696e 732e 0d0a  ersion begins...
+00010fe0: 2020 2020 2020 2020 2222 220d 0a0d 0a20          """.... 
+00010ff0: 2020 2020 2020 2069 6620 6474 7970 6520         if dtype 
+00011000: 6973 206e 6f74 204e 6f6e 6520 616e 6420  is not None and 
+00011010: 6973 696e 7374 616e 6365 2864 7479 7065  isinstance(dtype
+00011020: 2c20 6e70 2e64 7479 7065 2920 6973 2046  , np.dtype) is F
+00011030: 616c 7365 3a0d 0a20 2020 2020 2020 2020  alse:..         
+00011040: 2020 2072 6169 7365 2054 7970 6545 7272     raise TypeErr
+00011050: 6f72 2866 2264 7479 7065 206b 6579 776f  or(f"dtype keywo
+00011060: 7264 2077 6173 206e 6f74 206e 756d 7079  rd was not numpy
+00011070: 2064 7479 7065 2e20 676f 7420 7b74 7970   dtype. got {typ
+00011080: 6528 6474 7970 6529 7d20 696e 7374 6561  e(dtype)} instea
+00011090: 642e 2229 0d0a 0d0a 2020 2020 2020 2020  d.")....        
+000110a0: 6966 2063 6f6c 756d 6e6c 6973 7420 6973  if columnlist is
+000110b0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+000110c0: 2020 2020 636f 6c75 6d6e 6c69 7374 203d      columnlist =
+000110d0: 2073 656c 662e 6b65 7973 2829 0d0a 0d0a   self.keys()....
+000110e0: 2020 2020 2020 2020 2320 6d61 6b65 2073          # make s
+000110f0: 7572 6520 616c 6c20 636f 6c75 6d6e 7320  ure all columns 
+00011100: 6578 6973 7420 6265 666f 7265 2073 7461  exist before sta
+00011110: 7274 696e 6720 636f 6e76 6572 7369 6f6e  rting conversion
+00011120: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
+00011130: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00011140: 6e6f 7420 6973 696e 7374 616e 6365 2863  not isinstance(c
+00011150: 6f6c 756d 6e6c 6973 742c 206c 6973 7429  olumnlist, list)
+00011160: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00011170: 2020 2063 6f6c 756d 6e6c 6973 7420 3d20     columnlist = 
+00011180: 5b63 6f6c 756d 6e6c 6973 745d 0d0a 0d0a  [columnlist]....
+00011190: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+000111a0: 6320 696e 2063 6f6c 756d 6e6c 6973 743a  c in columnlist:
+000111b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000111c0: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
+000111d0: 2020 2020 2020 2020 2020 2020 6765 7461              geta
+000111e0: 7474 7228 7365 6c66 2c20 6329 0d0a 2020  ttr(self, c)..  
+000111f0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
+00011200: 6365 7074 3a0d 0a20 2020 2020 2020 2020  cept:..         
+00011210: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00011220: 2056 616c 7565 4572 726f 7228 6622 436f   ValueError(f"Co
+00011230: 756c 6420 6e6f 7420 6669 6e64 2063 6f6c  uld not find col
+00011240: 756d 6e20 7b63 7d20 696e 2044 6174 6173  umn {c} in Datas
+00011250: 6574 2e20 436f 756c 6420 6e6f 7420 666c  et. Could not fl
+00011260: 6970 2074 6f20 6361 7465 676f 7269 6361  ip to categorica
+00011270: 6c2e 2229 0d0a 0d0a 2020 2020 2020 2020  l.")....        
+00011280: 666f 7220 636f 6c6e 616d 6520 696e 2063  for colname in c
+00011290: 6f6c 756d 6e6c 6973 743a 0d0a 2020 2020  olumnlist:..    
+000112a0: 2020 2020 2020 2020 636f 6c20 3d20 7365          col = se
+000112b0: 6c66 5b63 6f6c 6e61 6d65 5d0d 0a20 2020  lf[colname]..   
+000112c0: 2020 2020 2020 2020 2023 2063 6865 636b           # check
+000112d0: 2074 6f20 7365 6520 6966 2077 6520 6e65   to see if we ne
+000112e0: 6564 2074 6f20 6d61 6b65 2061 206e 6573  ed to make a nes
+000112f0: 7465 6420 6361 6c6c 0d0a 2020 2020 2020  ted call..      
+00011300: 2020 2020 2020 6966 2068 6173 6174 7472        if hasattr
+00011310: 2863 6f6c 2c20 226d 616b 655f 6361 7465  (col, "make_cate
+00011320: 676f 7269 6361 6c73 2229 3a0d 0a20 2020  goricals"):..   
+00011330: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
+00011340: 2e6d 616b 655f 6361 7465 676f 7269 6361  .make_categorica
+00011350: 6c73 2864 7479 7065 3d64 7479 7065 290d  ls(dtype=dtype).
+00011360: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00011370: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00011380: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00011390: 6528 636f 6c2c 206e 702e 6e64 6172 7261  e(col, np.ndarra
+000113a0: 7929 2061 6e64 2063 6f6c 2e64 7479 7065  y) and col.dtype
+000113b0: 2e63 6861 7220 696e 2022 5553 223a 0d0a  .char in "US":..
+000113c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000113d0: 2020 2020 7365 6c66 5b63 6f6c 6e61 6d65      self[colname
+000113e0: 5d20 3d20 5479 7065 5265 6769 7374 6572  ] = TypeRegister
+000113f0: 2e43 6174 6567 6f72 6963 616c 2863 6f6c  .Categorical(col
+00011400: 2c20 6474 7970 653d 6474 7970 6529 0d0a  , dtype=dtype)..
+00011410: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
 00011420: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00011430: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00011440: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00011450: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011460: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-00011470: 6465 6620 6d61 6b65 5f73 7472 7563 745f  def make_struct_
-00011480: 6672 6f6d 5f63 6174 6567 6f72 6965 7328  from_categories(
-00011490: 7365 6c66 2c20 7072 6566 6978 3d4e 6f6e  self, prefix=Non
-000114a0: 652c 206b 6565 705f 7072 6566 6978 3d46  e, keep_prefix=F
-000114b0: 616c 7365 293a 0d0a 2020 2020 2020 2020  alse):..        
-000114c0: 2222 220d 0a20 2020 2020 2020 2042 7569  """..        Bui
-000114d0: 6c64 2061 2073 7472 7563 7420 6f66 2075  ld a struct of u
-000114e0: 6e69 7175 6520 6172 7261 7973 2066 726f  nique arrays fro
-000114f0: 6d20 616c 6c20 6361 7465 676f 7269 6361  m all categorica
-00011500: 6c73 2069 6e20 7468 6520 636f 6e74 6169  ls in the contai
-00011510: 6e65 722c 206f 7220 7468 6f73 6520 7769  ner, or those wi
-00011520: 7468 2061 2073 7065 6369 6669 6564 2070  th a specified p
-00011530: 7265 6669 782e 0d0a 0d0a 2020 2020 2020  refix.....      
-00011540: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
-00011550: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-00011560: 0d0a 2020 2020 2020 2020 7072 6566 6978  ..        prefix
-00011570: 203a 2060 7374 7260 2c20 6f70 7469 6f6e   : `str`, option
-00011580: 616c 0d0a 2020 2020 2020 2020 2020 2020  al..            
-00011590: 4f6e 6c79 2069 6e63 6c75 6465 2063 6f6c  Only include col
-000115a0: 756d 6e73 2077 6974 6820 6e61 6d65 7320  umns with names 
-000115b0: 7468 6174 2062 6567 696e 2077 6974 6820  that begin with 
-000115c0: 7468 6973 2073 7472 696e 672e 0d0a 2020  this string...  
-000115d0: 2020 2020 2020 6b65 6570 5f70 7265 6669        keep_prefi
-000115e0: 7820 3a20 626f 6f6c 2c20 6465 6661 756c  x : bool, defaul
-000115f0: 7420 4661 6c73 650d 0a20 2020 2020 2020  t False..       
-00011600: 2020 2020 2049 6620 5472 7565 2c20 6b65       If True, ke
-00011610: 6570 2074 6865 2070 7265 6669 7820 7768  ep the prefix wh
-00011620: 656e 206e 616d 696e 6720 7468 6520 6974  en naming the it
-00011630: 656d 2069 6e20 7468 6520 6e65 7720 7374  em in the new st
-00011640: 7275 6374 7572 652e 0d0a 0d0a 2020 2020  ructure.....    
-00011650: 2020 2020 4578 616d 706c 6573 0d0a 2020      Examples..  
-00011660: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-00011670: 2020 2020 2020 2020 544f 444f 202d 2073          TODO - s
-00011680: 616e 6974 697a 6520 2d20 6164 6420 6578  anitize - add ex
-00011690: 616d 706c 6520 7468 6174 206d 616b 6573  ample that makes
-000116a0: 2061 2073 7472 7563 7420 6672 6f6d 2063   a struct from c
-000116b0: 6174 6567 6f72 6963 616c 7320 616e 6420  ategoricals and 
-000116c0: 7072 696e 7473 2069 7473 2072 6570 7265  prints its repre
-000116d0: 7365 6e74 6174 696f 6e0d 0a20 2020 2020  sentation..     
-000116e0: 2020 2053 6565 2074 6865 2076 6572 7369     See the versi
-000116f0: 6f6e 2068 6973 746f 7279 2066 6f72 2073  on history for s
-00011700: 7472 7563 7475 7265 206f 6620 6f6c 6465  tructure of olde
-00011710: 7220 6578 616d 706c 6573 2e0d 0a0d 0a20  r examples..... 
-00011720: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
-00011730: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
-00011740: 0a20 2020 2020 2020 2063 6174 7320 3a20  .        cats : 
-00011750: 5374 7275 6374 0d0a 0d0a 2020 2020 2020  Struct....      
-00011760: 2020 4e6f 7465 730d 0a20 2020 2020 2020    Notes..       
-00011770: 202d 2d2d 2d2d 0d0a 2020 2020 2020 2020   -----..        
-00011780: 5468 6973 2069 7320 6120 7061 7274 6961  This is a partia
-00011790: 6c20 696e 7665 7273 6520 6f70 6572 6174  l inverse operat
-000117a0: 696f 6e20 6f66 2053 7472 7563 742e 6d61  ion of Struct.ma
-000117b0: 6b65 5f6d 6174 6c61 625f 6361 7465 676f  ke_matlab_catego
-000117c0: 7269 6361 6c73 0d0a 2020 2020 2020 2020  ricals..        
-000117d0: 2222 220d 0a20 2020 2020 2020 2069 6620  """..        if 
-000117e0: 7072 6566 6978 2069 7320 4e6f 6e65 3a0d  prefix is None:.
-000117f0: 0a20 2020 2020 2020 2020 2020 206e 616d  .            nam
-00011800: 6573 203d 2073 656c 662e 6b65 7973 2829  es = self.keys()
-00011810: 0d0a 2020 2020 2020 2020 2020 2020 706c  ..            pl
-00011820: 656e 203d 2030 0d0a 2020 2020 2020 2020  en = 0..        
-00011830: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-00011840: 2020 206e 616d 6573 203d 205b 6e20 666f     names = [n fo
-00011850: 7220 6e20 696e 2073 656c 662e 6b65 7973  r n in self.keys
-00011860: 2829 2069 6620 6e2e 7374 6172 7473 7769  () if n.startswi
-00011870: 7468 2870 7265 6669 7829 5d0d 0a20 2020  th(prefix)]..   
-00011880: 2020 2020 2020 2020 2069 6620 6b65 6570           if keep
-00011890: 5f70 7265 6669 783a 0d0a 2020 2020 2020  _prefix:..      
-000118a0: 2020 2020 2020 2020 2020 706c 656e 203d            plen =
-000118b0: 2030 0d0a 2020 2020 2020 2020 2020 2020   0..            
-000118c0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-000118d0: 2020 2020 2020 2070 6c65 6e20 3d20 6c65         plen = le
-000118e0: 6e28 7072 6566 6978 290d 0a0d 0a20 2020  n(prefix)....   
-000118f0: 2020 2020 2063 6174 7320 3d20 7b7d 0d0a       cats = {}..
-00011900: 2020 2020 2020 2020 666f 7220 6e20 696e          for n in
-00011910: 206e 616d 6573 3a0d 0a20 2020 2020 2020   names:..       
-00011920: 2020 2020 2063 6f6c 203d 2073 656c 665b       col = self[
-00011930: 6e5d 0d0a 2020 2020 2020 2020 2020 2020  n]..            
-00011940: 6966 2069 7369 6e73 7461 6e63 6528 636f  if isinstance(co
-00011950: 6c2c 2054 7970 6552 6567 6973 7465 722e  l, TypeRegister.
-00011960: 4361 7465 676f 7269 6361 6c29 3a0d 0a20  Categorical):.. 
-00011970: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00011980: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
-00011990: 2020 2020 2020 2020 2063 6174 735b 6e5b           cats[n[
-000119a0: 706c 656e 3a5d 5d20 3d20 636f 6c2e 6361  plen:]] = col.ca
-000119b0: 7465 676f 7279 5f61 7272 6179 0d0a 2020  tegory_array..  
-000119c0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-000119d0: 6365 7074 3a0d 0a20 2020 2020 2020 2020  cept:..         
-000119e0: 2020 2020 2020 2020 2020 204e 6f74 496d             NotIm
-000119f0: 706c 656d 656e 7465 6445 7272 6f72 2866  plementedError(f
-00011a00: 2243 6174 6567 6f72 6963 616c 2073 7472  "Categorical str
-00011a10: 7563 7420 7265 7475 726e 206f 6e6c 7920  uct return only 
-00011a20: 7375 7070 6f72 7473 2063 6174 6567 6f72  supports categor
-00011a30: 6963 616c 7320 6672 6f6d 2073 696e 676c  icals from singl
-00011a40: 6520 6172 7261 7973 2e22 290d 0a0d 0a20  e arrays.").... 
-00011a50: 2020 2020 2020 2063 6174 7320 3d20 5479         cats = Ty
-00011a60: 7065 5265 6769 7374 6572 2e53 7472 7563  peRegister.Struc
-00011a70: 7428 6361 7473 290d 0a20 2020 2020 2020  t(cats)..       
-00011a80: 2072 6574 7572 6e20 6361 7473 0d0a 0d0a   return cats....
-00011a90: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00011460: 2d2d 0d0a 2020 2020 6465 6620 6d61 6b65  --..    def make
+00011470: 5f73 7472 7563 745f 6672 6f6d 5f63 6174  _struct_from_cat
+00011480: 6567 6f72 6965 7328 7365 6c66 2c20 7072  egories(self, pr
+00011490: 6566 6978 3d4e 6f6e 652c 206b 6565 705f  efix=None, keep_
+000114a0: 7072 6566 6978 3d46 616c 7365 293a 0d0a  prefix=False):..
+000114b0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+000114c0: 2020 2020 2042 7569 6c64 2061 2073 7472       Build a str
+000114d0: 7563 7420 6f66 2075 6e69 7175 6520 6172  uct of unique ar
+000114e0: 7261 7973 2066 726f 6d20 616c 6c20 6361  rays from all ca
+000114f0: 7465 676f 7269 6361 6c73 2069 6e20 7468  tegoricals in th
+00011500: 6520 636f 6e74 6169 6e65 722c 206f 7220  e container, or 
+00011510: 7468 6f73 6520 7769 7468 2061 2073 7065  those with a spe
+00011520: 6369 6669 6564 2070 7265 6669 782e 0d0a  cified prefix...
+00011530: 0d0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
+00011540: 7465 7273 0d0a 2020 2020 2020 2020 2d2d  ters..        --
+00011550: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+00011560: 2020 7072 6566 6978 203a 2060 7374 7260    prefix : `str`
+00011570: 2c20 6f70 7469 6f6e 616c 0d0a 2020 2020  , optional..    
+00011580: 2020 2020 2020 2020 4f6e 6c79 2069 6e63          Only inc
+00011590: 6c75 6465 2063 6f6c 756d 6e73 2077 6974  lude columns wit
+000115a0: 6820 6e61 6d65 7320 7468 6174 2062 6567  h names that beg
+000115b0: 696e 2077 6974 6820 7468 6973 2073 7472  in with this str
+000115c0: 696e 672e 0d0a 2020 2020 2020 2020 6b65  ing...        ke
+000115d0: 6570 5f70 7265 6669 7820 3a20 626f 6f6c  ep_prefix : bool
+000115e0: 2c20 6465 6661 756c 7420 4661 6c73 650d  , default False.
+000115f0: 0a20 2020 2020 2020 2020 2020 2049 6620  .            If 
+00011600: 5472 7565 2c20 6b65 6570 2074 6865 2070  True, keep the p
+00011610: 7265 6669 7820 7768 656e 206e 616d 696e  refix when namin
+00011620: 6720 7468 6520 6974 656d 2069 6e20 7468  g the item in th
+00011630: 6520 6e65 7720 7374 7275 6374 7572 652e  e new structure.
+00011640: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
+00011650: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
+00011660: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00011670: 544f 444f 202d 2073 616e 6974 697a 6520  TODO - sanitize 
+00011680: 2d20 6164 6420 6578 616d 706c 6520 7468  - add example th
+00011690: 6174 206d 616b 6573 2061 2073 7472 7563  at makes a struc
+000116a0: 7420 6672 6f6d 2063 6174 6567 6f72 6963  t from categoric
+000116b0: 616c 7320 616e 6420 7072 696e 7473 2069  als and prints i
+000116c0: 7473 2072 6570 7265 7365 6e74 6174 696f  ts representatio
+000116d0: 6e0d 0a20 2020 2020 2020 2053 6565 2074  n..        See t
+000116e0: 6865 2076 6572 7369 6f6e 2068 6973 746f  he version histo
+000116f0: 7279 2066 6f72 2073 7472 7563 7475 7265  ry for structure
+00011700: 206f 6620 6f6c 6465 7220 6578 616d 706c   of older exampl
+00011710: 6573 2e0d 0a0d 0a20 2020 2020 2020 2052  es.....        R
+00011720: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
+00011730: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+00011740: 2063 6174 7320 3a20 5374 7275 6374 0d0a   cats : Struct..
+00011750: 0d0a 2020 2020 2020 2020 4e6f 7465 730d  ..        Notes.
+00011760: 0a20 2020 2020 2020 202d 2d2d 2d2d 0d0a  .        -----..
+00011770: 2020 2020 2020 2020 5468 6973 2069 7320          This is 
+00011780: 6120 7061 7274 6961 6c20 696e 7665 7273  a partial invers
+00011790: 6520 6f70 6572 6174 696f 6e20 6f66 2053  e operation of S
+000117a0: 7472 7563 742e 6d61 6b65 5f6d 6174 6c61  truct.make_matla
+000117b0: 625f 6361 7465 676f 7269 6361 6c73 0d0a  b_categoricals..
+000117c0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+000117d0: 2020 2020 2069 6620 7072 6566 6978 2069       if prefix i
+000117e0: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
+000117f0: 2020 2020 206e 616d 6573 203d 2073 656c       names = sel
+00011800: 662e 6b65 7973 2829 0d0a 2020 2020 2020  f.keys()..      
+00011810: 2020 2020 2020 706c 656e 203d 2030 0d0a        plen = 0..
+00011820: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00011830: 2020 2020 2020 2020 2020 206e 616d 6573             names
+00011840: 203d 205b 6e20 666f 7220 6e20 696e 2073   = [n for n in s
+00011850: 656c 662e 6b65 7973 2829 2069 6620 6e2e  elf.keys() if n.
+00011860: 7374 6172 7473 7769 7468 2870 7265 6669  startswith(prefi
+00011870: 7829 5d0d 0a20 2020 2020 2020 2020 2020  x)]..           
+00011880: 2069 6620 6b65 6570 5f70 7265 6669 783a   if keep_prefix:
+00011890: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000118a0: 2020 706c 656e 203d 2030 0d0a 2020 2020    plen = 0..    
+000118b0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+000118c0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+000118d0: 6c65 6e20 3d20 6c65 6e28 7072 6566 6978  len = len(prefix
+000118e0: 290d 0a0d 0a20 2020 2020 2020 2063 6174  )....        cat
+000118f0: 7320 3d20 7b7d 0d0a 2020 2020 2020 2020  s = {}..        
+00011900: 666f 7220 6e20 696e 206e 616d 6573 3a0d  for n in names:.
+00011910: 0a20 2020 2020 2020 2020 2020 2063 6f6c  .            col
+00011920: 203d 2073 656c 665b 6e5d 0d0a 2020 2020   = self[n]..    
+00011930: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00011940: 7461 6e63 6528 636f 6c2c 2054 7970 6552  tance(col, TypeR
+00011950: 6567 6973 7465 722e 4361 7465 676f 7269  egister.Categori
+00011960: 6361 6c29 3a0d 0a20 2020 2020 2020 2020  cal):..         
+00011970: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+00011980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011990: 2063 6174 735b 6e5b 706c 656e 3a5d 5d20   cats[n[plen:]] 
+000119a0: 3d20 636f 6c2e 6361 7465 676f 7279 5f61  = col.category_a
+000119b0: 7272 6179 0d0a 2020 2020 2020 2020 2020  rray..          
+000119c0: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
+000119d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000119e0: 2020 204e 6f74 496d 706c 656d 656e 7465     NotImplemente
+000119f0: 6445 7272 6f72 2866 2243 6174 6567 6f72  dError(f"Categor
+00011a00: 6963 616c 2073 7472 7563 7420 7265 7475  ical struct retu
+00011a10: 726e 206f 6e6c 7920 7375 7070 6f72 7473  rn only supports
+00011a20: 2063 6174 6567 6f72 6963 616c 7320 6672   categoricals fr
+00011a30: 6f6d 2073 696e 676c 6520 6172 7261 7973  om single arrays
+00011a40: 2e22 290d 0a0d 0a20 2020 2020 2020 2063  .")....        c
+00011a50: 6174 7320 3d20 5479 7065 5265 6769 7374  ats = TypeRegist
+00011a60: 6572 2e53 7472 7563 7428 6361 7473 290d  er.Struct(cats).
+00011a70: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00011a80: 6361 7473 0d0a 0d0a 2020 2020 2320 2d2d  cats....    # --
+00011a90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00011aa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00011ab0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011ac0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
-00011ad0: 2020 2064 6566 206d 616b 655f 6d61 746c     def make_matl
-00011ae0: 6162 5f64 6174 6574 696d 6573 280d 0a20  ab_datetimes(.. 
-00011af0: 2020 2020 2020 2073 656c 662c 2064 7463         self, dtc
-00011b00: 6f6c 733a 204f 7074 696f 6e61 6c5b 556e  ols: Optional[Un
-00011b10: 696f 6e5b 7374 722c 206c 6973 745d 5d20  ion[str, list]] 
-00011b20: 3d20 4e6f 6e65 2c20 676d 743a 2062 6f6f  = None, gmt: boo
-00011b30: 6c20 3d20 4661 6c73 652c 2061 7574 6f3a  l = False, auto:
-00011b40: 2062 6f6f 6c20 3d20 5472 7565 0d0a 2020   bool = True..  
-00011b50: 2020 2920 2d3e 204e 6f6e 653a 0d0a 2020    ) -> None:..  
-00011b60: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00011b70: 2020 2043 6f6e 7665 7274 2064 6174 6574     Convert datet
-00011b80: 696d 6520 636f 6c75 6d6e 7320 6672 6f6d  ime columns from
-00011b90: 204d 6174 6c61 6220 746f 2044 6174 6554   Matlab to DateT
-00011ba0: 696d 654e 616e 6f20 616e 6420 5469 6d65  imeNano and Time
-00011bb0: 5370 616e 2061 7272 6179 732e 0d0a 0d0a  Span arrays.....
-00011bc0: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
-00011bd0: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
-00011be0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00011bf0: 6474 636f 6c73 203a 2060 7374 7260 206f  dtcols : `str` o
-00011c00: 7220 606c 6973 7460 0d0a 2020 2020 2020  r `list`..      
-00011c10: 2020 2020 2020 4e61 6d65 206f 7220 6c69        Name or li
-00011c20: 7374 206f 6620 6e61 6d65 7320 6f66 2063  st of names of c
-00011c30: 6f6c 756d 6e73 2074 6f20 636f 6e76 6572  olumns to conver
-00011c40: 7420 746f 2044 6174 6554 696d 654e 616e  t to DateTimeNan
-00011c50: 6f20 6172 7261 7973 2e0d 0a20 2020 2020  o arrays...     
-00011c60: 2020 2067 6d74 203a 2062 6f6f 6c2c 206f     gmt : bool, o
-00011c70: 7074 696f 6e61 6c2c 2064 6566 6175 6c74  ptional, default
-00011c80: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
-00011c90: 2020 2020 4e6f 7420 696d 706c 656d 656e      Not implemen
-00011ca0: 7465 642e 0d0a 2020 2020 2020 2020 6175  ted...        au
-00011cb0: 746f 203a 2062 6f6f 6c2c 206f 7074 696f  to : bool, optio
-00011cc0: 6e61 6c2c 2064 6566 6175 6c74 2054 7275  nal, default Tru
-00011cd0: 650d 0a20 2020 2020 2020 2020 2020 2049  e..            I
-00011ce0: 6620 5472 7565 2c20 6c6f 6f6b 2066 6f72  f True, look for
-00011cf0: 2027 4d53 2720 696e 2074 6865 206e 616d   'MS' in the nam
-00011d00: 6573 206f 6620 616c 6c20 636f 6c75 6d6e  es of all column
-00011d10: 732c 2061 6e64 2066 6c69 7020 7468 656d  s, and flip them
-00011d20: 2074 6f20 5469 6d65 5370 616e 206f 626a   to TimeSpan obj
-00011d30: 6563 7473 2e0d 0a0d 0a20 2020 2020 2020  ects.....       
-00011d40: 2022 2222 0d0a 2020 2020 2020 2020 6966   """..        if
-00011d50: 2064 7463 6f6c 7320 6973 204e 6f6e 653a   dtcols is None:
-00011d60: 0d0a 2020 2020 2020 2020 2020 2020 6474  ..            dt
-00011d70: 636f 6c73 203d 206c 6973 7428 290d 0a20  cols = list().. 
-00011d80: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00011d90: 616e 6365 2864 7463 6f6c 732c 2073 7472  ance(dtcols, str
-00011da0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00011db0: 6474 636f 6c73 203d 205b 6474 636f 6c73  dtcols = [dtcols
-00011dc0: 5d0d 0a0d 0a20 2020 2020 2020 2069 6620  ]....        if 
-00011dd0: 6175 746f 3a0d 0a20 2020 2020 2020 2020  auto:..         
-00011de0: 2020 2066 6f72 206e 616d 652c 2063 6f6c     for name, col
-00011df0: 2069 6e20 7365 6c66 2e69 7465 6d73 2829   in self.items()
-00011e00: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00011e10: 2020 2069 6620 6e61 6d65 2e65 6e64 7377     if name.endsw
-00011e20: 6974 6828 224d 5322 2920 616e 6420 636f  ith("MS") and co
-00011e30: 6c2e 6474 7970 652e 6368 6172 2069 6e20  l.dtype.char in 
-00011e40: 4e75 6d70 7943 6861 7254 7970 6573 2e41  NumpyCharTypes.A
-00011e50: 6c6c 466c 6f61 743a 0d0a 2020 2020 2020  llFloat:..      
-00011e60: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00011e70: 6c66 5b6e 616d 655d 203d 2054 7970 6552  lf[name] = TypeR
-00011e80: 6567 6973 7465 722e 5469 6d65 5370 616e  egister.TimeSpan
-00011e90: 2863 6f6c 202a 2031 5f30 3030 5f30 3030  (col * 1_000_000
-00011ea0: 290d 0a0d 0a20 2020 2020 2020 2066 6f72  )....        for
-00011eb0: 206e 616d 6520 696e 2064 7463 6f6c 733a   name in dtcols:
-00011ec0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00011ed0: 6c66 5b6e 616d 655d 203d 2054 7970 6552  lf[name] = TypeR
-00011ee0: 6567 6973 7465 722e 4461 7465 5469 6d65  egister.DateTime
-00011ef0: 4e61 6e6f 2873 656c 665b 6e61 6d65 5d2c  Nano(self[name],
-00011f00: 2066 726f 6d5f 747a 3d22 474d 5422 2c20   from_tz="GMT", 
-00011f10: 746f 5f74 7a3d 224e 5943 2229 0d0a 0d0a  to_tz="NYC")....
-00011f20: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00011ac0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 206d  -----..    def m
+00011ad0: 616b 655f 6d61 746c 6162 5f64 6174 6574  ake_matlab_datet
+00011ae0: 696d 6573 280d 0a20 2020 2020 2020 2073  imes(..        s
+00011af0: 656c 662c 2064 7463 6f6c 733a 204f 7074  elf, dtcols: Opt
+00011b00: 696f 6e61 6c5b 556e 696f 6e5b 7374 722c  ional[Union[str,
+00011b10: 206c 6973 745d 5d20 3d20 4e6f 6e65 2c20   list]] = None, 
+00011b20: 676d 743a 2062 6f6f 6c20 3d20 4661 6c73  gmt: bool = Fals
+00011b30: 652c 2061 7574 6f3a 2062 6f6f 6c20 3d20  e, auto: bool = 
+00011b40: 5472 7565 0d0a 2020 2020 2920 2d3e 204e  True..    ) -> N
+00011b50: 6f6e 653a 0d0a 2020 2020 2020 2020 2222  one:..        ""
+00011b60: 220d 0a20 2020 2020 2020 2043 6f6e 7665  "..        Conve
+00011b70: 7274 2064 6174 6574 696d 6520 636f 6c75  rt datetime colu
+00011b80: 6d6e 7320 6672 6f6d 204d 6174 6c61 6220  mns from Matlab 
+00011b90: 746f 2044 6174 6554 696d 654e 616e 6f20  to DateTimeNano 
+00011ba0: 616e 6420 5469 6d65 5370 616e 2061 7272  and TimeSpan arr
+00011bb0: 6179 732e 0d0a 0d0a 2020 2020 2020 2020  ays.....        
+00011bc0: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
+00011bd0: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
+00011be0: 2020 2020 2020 2020 6474 636f 6c73 203a          dtcols :
+00011bf0: 2060 7374 7260 206f 7220 606c 6973 7460   `str` or `list`
+00011c00: 0d0a 2020 2020 2020 2020 2020 2020 4e61  ..            Na
+00011c10: 6d65 206f 7220 6c69 7374 206f 6620 6e61  me or list of na
+00011c20: 6d65 7320 6f66 2063 6f6c 756d 6e73 2074  mes of columns t
+00011c30: 6f20 636f 6e76 6572 7420 746f 2044 6174  o convert to Dat
+00011c40: 6554 696d 654e 616e 6f20 6172 7261 7973  eTimeNano arrays
+00011c50: 2e0d 0a20 2020 2020 2020 2067 6d74 203a  ...        gmt :
+00011c60: 2062 6f6f 6c2c 206f 7074 696f 6e61 6c2c   bool, optional,
+00011c70: 2064 6566 6175 6c74 2046 616c 7365 0d0a   default False..
+00011c80: 2020 2020 2020 2020 2020 2020 4e6f 7420              Not 
+00011c90: 696d 706c 656d 656e 7465 642e 0d0a 2020  implemented...  
+00011ca0: 2020 2020 2020 6175 746f 203a 2062 6f6f        auto : boo
+00011cb0: 6c2c 206f 7074 696f 6e61 6c2c 2064 6566  l, optional, def
+00011cc0: 6175 6c74 2054 7275 650d 0a20 2020 2020  ault True..     
+00011cd0: 2020 2020 2020 2049 6620 5472 7565 2c20         If True, 
+00011ce0: 6c6f 6f6b 2066 6f72 2027 4d53 2720 696e  look for 'MS' in
+00011cf0: 2074 6865 206e 616d 6573 206f 6620 616c   the names of al
+00011d00: 6c20 636f 6c75 6d6e 732c 2061 6e64 2066  l columns, and f
+00011d10: 6c69 7020 7468 656d 2074 6f20 5469 6d65  lip them to Time
+00011d20: 5370 616e 206f 626a 6563 7473 2e0d 0a0d  Span objects....
+00011d30: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00011d40: 2020 2020 2020 6966 2064 7463 6f6c 7320        if dtcols 
+00011d50: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
+00011d60: 2020 2020 2020 6474 636f 6c73 203d 206c        dtcols = l
+00011d70: 6973 7428 290d 0a20 2020 2020 2020 2069  ist()..        i
+00011d80: 6620 6973 696e 7374 616e 6365 2864 7463  f isinstance(dtc
+00011d90: 6f6c 732c 2073 7472 293a 0d0a 2020 2020  ols, str):..    
+00011da0: 2020 2020 2020 2020 6474 636f 6c73 203d          dtcols =
+00011db0: 205b 6474 636f 6c73 5d0d 0a0d 0a20 2020   [dtcols]....   
+00011dc0: 2020 2020 2069 6620 6175 746f 3a0d 0a20       if auto:.. 
+00011dd0: 2020 2020 2020 2020 2020 2066 6f72 206e             for n
+00011de0: 616d 652c 2063 6f6c 2069 6e20 7365 6c66  ame, col in self
+00011df0: 2e69 7465 6d73 2829 3a0d 0a20 2020 2020  .items():..     
+00011e00: 2020 2020 2020 2020 2020 2069 6620 6e61             if na
+00011e10: 6d65 2e65 6e64 7377 6974 6828 224d 5322  me.endswith("MS"
+00011e20: 2920 616e 6420 636f 6c2e 6474 7970 652e  ) and col.dtype.
+00011e30: 6368 6172 2069 6e20 4e75 6d70 7943 6861  char in NumpyCha
+00011e40: 7254 7970 6573 2e41 6c6c 466c 6f61 743a  rTypes.AllFloat:
+00011e50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00011e60: 2020 2020 2020 7365 6c66 5b6e 616d 655d        self[name]
+00011e70: 203d 2054 7970 6552 6567 6973 7465 722e   = TypeRegister.
+00011e80: 5469 6d65 5370 616e 2863 6f6c 202a 2031  TimeSpan(col * 1
+00011e90: 5f30 3030 5f30 3030 290d 0a0d 0a20 2020  _000_000)....   
+00011ea0: 2020 2020 2066 6f72 206e 616d 6520 696e       for name in
+00011eb0: 2064 7463 6f6c 733a 0d0a 2020 2020 2020   dtcols:..      
+00011ec0: 2020 2020 2020 7365 6c66 5b6e 616d 655d        self[name]
+00011ed0: 203d 2054 7970 6552 6567 6973 7465 722e   = TypeRegister.
+00011ee0: 4461 7465 5469 6d65 4e61 6e6f 2873 656c  DateTimeNano(sel
+00011ef0: 665b 6e61 6d65 5d2c 2066 726f 6d5f 747a  f[name], from_tz
+00011f00: 3d22 474d 5422 2c20 746f 5f74 7a3d 224e  ="GMT", to_tz="N
+00011f10: 5943 2229 0d0a 0d0a 2020 2020 2320 2d2d  YC")....    # --
+00011f20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00011f30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00011f40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011f50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
-00011f60: 2020 2064 6566 206d 616b 655f 6d61 746c     def make_matl
-00011f70: 6162 5f63 6174 6567 6f72 6963 616c 7328  ab_categoricals(
-00011f80: 7365 6c66 2c20 7874 7261 2c20 7265 6d6f  self, xtra, remo
-00011f90: 7665 5f74 7261 696c 696e 673d 5472 7565  ve_trailing=True
-00011fa0: 2c20 6474 7970 653d 4e6f 6e65 2c20 7072  , dtype=None, pr
-00011fb0: 6566 6978 3d22 7022 2c20 6b65 6570 5f70  efix="p", keep_p
-00011fc0: 7265 6669 783d 5472 7565 2920 2d3e 204e  refix=True) -> N
-00011fd0: 6f6e 653a 0d0a 2020 2020 2020 2020 2222  one:..        ""
-00011fe0: 220d 0a20 2020 2020 2020 2054 7572 6e20  "..        Turn 
-00011ff0: 6d61 746c 6162 2063 6174 6567 6f72 6963  matlab categoric
-00012000: 616c 2069 6e64 6963 6573 2061 6e64 2063  al indices and c
-00012010: 6f72 7265 7370 6f6e 6469 6e67 2075 6e69  orresponding uni
-00012020: 7175 6520 6172 7261 7973 2069 6e74 6f20  que arrays into 
-00012030: 7269 7074 6162 6c65 2063 6174 6567 6f72  riptable categor
-00012040: 6963 616c 732e 0d0a 0d0a 2020 2020 2020  icals.....      
-00012050: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
-00012060: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-00012070: 0d0a 2020 2020 2020 2020 7874 7261 203a  ..        xtra :
-00012080: 2060 5374 7275 6374 600d 0a20 2020 2020   `Struct`..     
-00012090: 2020 2020 2020 2043 6f6e 7461 696e 6572         Container
-000120a0: 2068 6f6c 6469 6e67 2075 6e69 7175 6520   holding unique 
-000120b0: 6172 7261 7973 2e0d 0a20 2020 2020 2020  arrays...       
-000120c0: 2072 656d 6f76 655f 7472 6169 6c69 6e67   remove_trailing
-000120d0: 203a 2062 6f6f 6c2c 206f 7074 696f 6e61   : bool, optiona
-000120e0: 6c2c 2064 6566 6175 6c74 2054 7275 650d  l, default True.
-000120f0: 0a20 2020 2020 2020 2020 2020 2049 6620  .            If 
-00012100: 5472 7565 2c20 7265 6d6f 7665 2074 7261  True, remove tra
-00012110: 696c 696e 6720 7370 6163 6573 2066 726f  iling spaces fro
-00012120: 6d20 4d61 746c 6162 2073 7472 696e 6773  m Matlab strings
-00012130: 2e0d 0a20 2020 2020 2020 2064 7479 7065  ...        dtype
-00012140: 203a 2060 6e75 6d70 792e 6474 7970 6560   : `numpy.dtype`
-00012150: 2c20 6f70 7469 6f6e 616c 2c20 6465 6661  , optional, defa
-00012160: 756c 7420 4e6f 6e65 0d0a 2020 2020 2020  ult None..      
-00012170: 2020 2020 2020 496e 7465 6765 7220 6474        Integer dt
-00012180: 7970 6520 666f 7220 756e 6465 726c 7969  ype for underlyi
-00012190: 6e67 2061 7272 6179 206f 6620 636f 6e73  ng array of cons
-000121a0: 7472 7563 7465 6420 6361 7465 676f 7269  tructed categori
-000121b0: 6361 6c73 2e0d 0a20 2020 2020 2020 2070  cals...        p
-000121c0: 7265 6669 7820 3a20 6073 7472 602c 206f  refix : `str`, o
-000121d0: 7074 696f 6e61 6c2c 2064 6566 6175 6c74  ptional, default
-000121e0: 2027 7027 0d0a 2020 2020 2020 2020 2020   'p'..          
-000121f0: 2020 5072 6566 6978 2066 6f72 2069 6e74    Prefix for int
-00012200: 6567 6572 2061 7272 6179 7320 696e 2063  eger arrays in c
-00012210: 616c 6c69 6e67 2064 6174 6173 6574 202d  alling dataset -
-00012220: 2063 6f6c 756d 6e73 2074 6861 7420 7769   columns that wi
-00012230: 6c6c 2062 6520 6c6f 6f6b 6564 2066 6f72  ll be looked for
-00012240: 2069 6e20 7468 6520 7374 7275 6374 2e0d   in the struct..
-00012250: 0a20 2020 2020 2020 206b 6565 705f 7072  .        keep_pr
-00012260: 6566 6978 203a 2062 6f6f 6c2c 2064 6566  efix : bool, def
-00012270: 6175 6c74 2054 7275 650d 0a20 2020 2020  ault True..     
-00012280: 2020 2020 2020 2049 6620 5472 7565 2c20         If True, 
-00012290: 4472 6f70 2074 6865 2070 7265 6669 7820  Drop the prefix 
-000122a0: 6166 7465 7220 666c 6970 7069 6e67 2074  after flipping t
-000122b0: 6865 2063 6f6c 756d 6e20 746f 2063 6174  he column to cat
-000122c0: 6567 6f72 6963 616c 2069 6e20 7468 6520  egorical in the 
-000122d0: 6461 7461 7365 742e 2049 6620 7468 6520  dataset. If the 
-000122e0: 6120 636f 6c75 6d6e 2065 7869 7374 7320  a column exists 
-000122f0: 7769 7468 2074 6861 7420 6e61 6d65 2c20  with that name, 
-00012300: 7468 6520 7573 6572 2077 696c 6c20 6265  the user will be
-00012310: 2077 6172 6e65 642e 0d0a 2020 2020 2020   warned...      
-00012320: 2020 2222 220d 0a20 2020 2020 2020 2069    """..        i
-00012330: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
-00012340: 2878 7472 612c 2064 6963 7429 3a0d 0a20  (xtra, dict):.. 
-00012350: 2020 2020 2020 2020 2020 2078 7472 6120             xtra 
-00012360: 3d20 7874 7261 2e61 7364 6963 7428 290d  = xtra.asdict().
-00012370: 0a20 2020 2020 2020 2023 2070 6c61 6365  .        # place
-00012380: 2061 2070 2069 6e20 6672 6f6e 7420 6f66   a p in front of
-00012390: 2061 6c6c 206e 616d 6573 0d0a 2020 2020   all names..    
-000123a0: 2020 2020 704e 616d 6573 203d 205b 7072      pNames = [pr
-000123b0: 6566 6978 202b 206b 2066 6f72 206b 2069  efix + k for k i
-000123c0: 6e20 7874 7261 5d0d 0a0d 0a20 2020 2020  n xtra]....     
-000123d0: 2020 2073 7472 436f 6e76 6572 7420 3d20     strConvert = 
-000123e0: 5b5d 0d0a 2020 2020 2020 2020 7374 7243  []..        strC
-000123f0: 6f75 6e74 203d 2030 0d0a 2020 2020 2020  ount = 0..      
-00012400: 2020 666f 7220 706e 616d 6520 696e 2070    for pname in p
-00012410: 4e61 6d65 733a 0d0a 2020 2020 2020 2020  Names:..        
-00012420: 2020 2020 6966 2068 6173 6174 7472 2873      if hasattr(s
-00012430: 656c 662c 2070 6e61 6d65 293a 0d0a 2020  elf, pname):..  
-00012440: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00012450: 6d6f 7665 2070 6173 7420 7468 6520 6c65  move past the le
-00012460: 7474 6572 2027 7027 2069 6e20 7468 6520  tter 'p' in the 
-00012470: 6e61 6d65 2074 6f20 6765 7420 746f 2074  name to get to t
-00012480: 6865 2061 7272 6179 2074 6865 2069 6e64  he array the ind
-00012490: 6578 2069 7320 7265 6665 7265 6e63 696e  ex is referencin
-000124a0: 670d 0a20 2020 2020 2020 2020 2020 2020  g..             
-000124b0: 2020 2073 7472 4e61 6d65 7320 3d20 7874     strNames = xt
-000124c0: 7261 5b70 6e61 6d65 5b6c 656e 2870 7265  ra[pname[len(pre
-000124d0: 6669 7829 203a 5d5d 0d0a 0d0a 2020 2020  fix) :]]....    
-000124e0: 2020 2020 2020 2020 2020 2020 2320 6368              # ch
-000124f0: 6563 6b20 746f 2073 6565 2069 6620 7765  eck to see if we
-00012500: 2068 6176 6520 7468 6520 7056 6572 7369   have the pVersi
-00012510: 6f6e 206f 6620 7468 6520 6e61 6d65 0d0a  on of the name..
-00012520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012530: 7041 7272 6179 203d 2067 6574 6174 7472  pArray = getattr
-00012540: 2873 656c 662c 2070 6e61 6d65 290d 0a20  (self, pname).. 
-00012550: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00012560: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
-00012570: 2870 4172 7261 792c 2054 7970 6552 6567  (pArray, TypeReg
-00012580: 6973 7465 722e 4361 7465 676f 7269 6361  ister.Categorica
-00012590: 6c29 3a0d 0a20 2020 2020 2020 2020 2020  l):..           
-000125a0: 2020 2020 2020 2020 2073 7472 436f 6e76           strConv
-000125b0: 6572 742e 6170 7065 6e64 2870 6e61 6d65  ert.append(pname
-000125c0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-000125d0: 2020 2020 2020 2073 7472 436f 756e 7420         strCount 
-000125e0: 2b3d 2031 0d0a 2020 2020 2020 2020 2020  += 1..          
-000125f0: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
+00011f50: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 206d  -----..    def m
+00011f60: 616b 655f 6d61 746c 6162 5f63 6174 6567  ake_matlab_categ
+00011f70: 6f72 6963 616c 7328 7365 6c66 2c20 7874  oricals(self, xt
+00011f80: 7261 2c20 7265 6d6f 7665 5f74 7261 696c  ra, remove_trail
+00011f90: 696e 673d 5472 7565 2c20 6474 7970 653d  ing=True, dtype=
+00011fa0: 4e6f 6e65 2c20 7072 6566 6978 3d22 7022  None, prefix="p"
+00011fb0: 2c20 6b65 6570 5f70 7265 6669 783d 5472  , keep_prefix=Tr
+00011fc0: 7565 2920 2d3e 204e 6f6e 653a 0d0a 2020  ue) -> None:..  
+00011fd0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+00011fe0: 2020 2054 7572 6e20 6d61 746c 6162 2063     Turn matlab c
+00011ff0: 6174 6567 6f72 6963 616c 2069 6e64 6963  ategorical indic
+00012000: 6573 2061 6e64 2063 6f72 7265 7370 6f6e  es and correspon
+00012010: 6469 6e67 2075 6e69 7175 6520 6172 7261  ding unique arra
+00012020: 7973 2069 6e74 6f20 7269 7074 6162 6c65  ys into riptable
+00012030: 2063 6174 6567 6f72 6963 616c 732e 0d0a   categoricals...
+00012040: 0d0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
+00012050: 7465 7273 0d0a 2020 2020 2020 2020 2d2d  ters..        --
+00012060: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+00012070: 2020 7874 7261 203a 2060 5374 7275 6374    xtra : `Struct
+00012080: 600d 0a20 2020 2020 2020 2020 2020 2043  `..            C
+00012090: 6f6e 7461 696e 6572 2068 6f6c 6469 6e67  ontainer holding
+000120a0: 2075 6e69 7175 6520 6172 7261 7973 2e0d   unique arrays..
+000120b0: 0a20 2020 2020 2020 2072 656d 6f76 655f  .        remove_
+000120c0: 7472 6169 6c69 6e67 203a 2062 6f6f 6c2c  trailing : bool,
+000120d0: 206f 7074 696f 6e61 6c2c 2064 6566 6175   optional, defau
+000120e0: 6c74 2054 7275 650d 0a20 2020 2020 2020  lt True..       
+000120f0: 2020 2020 2049 6620 5472 7565 2c20 7265       If True, re
+00012100: 6d6f 7665 2074 7261 696c 696e 6720 7370  move trailing sp
+00012110: 6163 6573 2066 726f 6d20 4d61 746c 6162  aces from Matlab
+00012120: 2073 7472 696e 6773 2e0d 0a20 2020 2020   strings...     
+00012130: 2020 2064 7479 7065 203a 2060 6e75 6d70     dtype : `nump
+00012140: 792e 6474 7970 6560 2c20 6f70 7469 6f6e  y.dtype`, option
+00012150: 616c 2c20 6465 6661 756c 7420 4e6f 6e65  al, default None
+00012160: 0d0a 2020 2020 2020 2020 2020 2020 496e  ..            In
+00012170: 7465 6765 7220 6474 7970 6520 666f 7220  teger dtype for 
+00012180: 756e 6465 726c 7969 6e67 2061 7272 6179  underlying array
+00012190: 206f 6620 636f 6e73 7472 7563 7465 6420   of constructed 
+000121a0: 6361 7465 676f 7269 6361 6c73 2e0d 0a20  categoricals... 
+000121b0: 2020 2020 2020 2070 7265 6669 7820 3a20         prefix : 
+000121c0: 6073 7472 602c 206f 7074 696f 6e61 6c2c  `str`, optional,
+000121d0: 2064 6566 6175 6c74 2027 7027 0d0a 2020   default 'p'..  
+000121e0: 2020 2020 2020 2020 2020 5072 6566 6978            Prefix
+000121f0: 2066 6f72 2069 6e74 6567 6572 2061 7272   for integer arr
+00012200: 6179 7320 696e 2063 616c 6c69 6e67 2064  ays in calling d
+00012210: 6174 6173 6574 202d 2063 6f6c 756d 6e73  ataset - columns
+00012220: 2074 6861 7420 7769 6c6c 2062 6520 6c6f   that will be lo
+00012230: 6f6b 6564 2066 6f72 2069 6e20 7468 6520  oked for in the 
+00012240: 7374 7275 6374 2e0d 0a20 2020 2020 2020  struct...       
+00012250: 206b 6565 705f 7072 6566 6978 203a 2062   keep_prefix : b
+00012260: 6f6f 6c2c 2064 6566 6175 6c74 2054 7275  ool, default Tru
+00012270: 650d 0a20 2020 2020 2020 2020 2020 2049  e..            I
+00012280: 6620 5472 7565 2c20 4472 6f70 2074 6865  f True, Drop the
+00012290: 2070 7265 6669 7820 6166 7465 7220 666c   prefix after fl
+000122a0: 6970 7069 6e67 2074 6865 2063 6f6c 756d  ipping the colum
+000122b0: 6e20 746f 2063 6174 6567 6f72 6963 616c  n to categorical
+000122c0: 2069 6e20 7468 6520 6461 7461 7365 742e   in the dataset.
+000122d0: 2049 6620 7468 6520 6120 636f 6c75 6d6e   If the a column
+000122e0: 2065 7869 7374 7320 7769 7468 2074 6861   exists with tha
+000122f0: 7420 6e61 6d65 2c20 7468 6520 7573 6572  t name, the user
+00012300: 2077 696c 6c20 6265 2077 6172 6e65 642e   will be warned.
+00012310: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00012320: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
+00012330: 696e 7374 616e 6365 2878 7472 612c 2064  instance(xtra, d
+00012340: 6963 7429 3a0d 0a20 2020 2020 2020 2020  ict):..         
+00012350: 2020 2078 7472 6120 3d20 7874 7261 2e61     xtra = xtra.a
+00012360: 7364 6963 7428 290d 0a20 2020 2020 2020  sdict()..       
+00012370: 2023 2070 6c61 6365 2061 2070 2069 6e20   # place a p in 
+00012380: 6672 6f6e 7420 6f66 2061 6c6c 206e 616d  front of all nam
+00012390: 6573 0d0a 2020 2020 2020 2020 704e 616d  es..        pNam
+000123a0: 6573 203d 205b 7072 6566 6978 202b 206b  es = [prefix + k
+000123b0: 2066 6f72 206b 2069 6e20 7874 7261 5d0d   for k in xtra].
+000123c0: 0a0d 0a20 2020 2020 2020 2073 7472 436f  ...        strCo
+000123d0: 6e76 6572 7420 3d20 5b5d 0d0a 2020 2020  nvert = []..    
+000123e0: 2020 2020 7374 7243 6f75 6e74 203d 2030      strCount = 0
+000123f0: 0d0a 2020 2020 2020 2020 666f 7220 706e  ..        for pn
+00012400: 616d 6520 696e 2070 4e61 6d65 733a 0d0a  ame in pNames:..
+00012410: 2020 2020 2020 2020 2020 2020 6966 2068              if h
+00012420: 6173 6174 7472 2873 656c 662c 2070 6e61  asattr(self, pna
+00012430: 6d65 293a 0d0a 2020 2020 2020 2020 2020  me):..          
+00012440: 2020 2020 2020 2320 6d6f 7665 2070 6173        # move pas
+00012450: 7420 7468 6520 6c65 7474 6572 2027 7027  t the letter 'p'
+00012460: 2069 6e20 7468 6520 6e61 6d65 2074 6f20   in the name to 
+00012470: 6765 7420 746f 2074 6865 2061 7272 6179  get to the array
+00012480: 2074 6865 2069 6e64 6578 2069 7320 7265   the index is re
+00012490: 6665 7265 6e63 696e 670d 0a20 2020 2020  ferencing..     
+000124a0: 2020 2020 2020 2020 2020 2073 7472 4e61             strNa
+000124b0: 6d65 7320 3d20 7874 7261 5b70 6e61 6d65  mes = xtra[pname
+000124c0: 5b6c 656e 2870 7265 6669 7829 203a 5d5d  [len(prefix) :]]
+000124d0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+000124e0: 2020 2020 2320 6368 6563 6b20 746f 2073      # check to s
+000124f0: 6565 2069 6620 7765 2068 6176 6520 7468  ee if we have th
+00012500: 6520 7056 6572 7369 6f6e 206f 6620 7468  e pVersion of th
+00012510: 6520 6e61 6d65 0d0a 2020 2020 2020 2020  e name..        
+00012520: 2020 2020 2020 2020 7041 7272 6179 203d          pArray =
+00012530: 2067 6574 6174 7472 2873 656c 662c 2070   getattr(self, p
+00012540: 6e61 6d65 290d 0a20 2020 2020 2020 2020  name)..         
+00012550: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
+00012560: 696e 7374 616e 6365 2870 4172 7261 792c  instance(pArray,
+00012570: 2054 7970 6552 6567 6973 7465 722e 4361   TypeRegister.Ca
+00012580: 7465 676f 7269 6361 6c29 3a0d 0a20 2020  tegorical):..   
+00012590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000125a0: 2073 7472 436f 6e76 6572 742e 6170 7065   strConvert.appe
+000125b0: 6e64 2870 6e61 6d65 290d 0a20 2020 2020  nd(pname)..     
+000125c0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+000125d0: 7472 436f 756e 7420 2b3d 2031 0d0a 2020  trCount += 1..  
+000125e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000125f0: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
 00012600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012610: 2020 2020 2020 2020 2320 636f 6e76 6572          # conver
-00012620: 7420 6d61 746c 6162 2073 6361 6c61 7273  t matlab scalars
-00012630: 2074 6f20 6172 7261 7920 6f66 206f 6e65   to array of one
-00012640: 2069 7465 6d0d 0a20 2020 2020 2020 2020   item..         
-00012650: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00012660: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
-00012670: 2873 7472 4e61 6d65 732c 206e 702e 6e64  (strNames, np.nd
-00012680: 6172 7261 7929 3a0d 0a20 2020 2020 2020  array):..       
-00012690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000126a0: 2020 2020 2073 7472 4e61 6d65 7320 3d20       strNames = 
-000126b0: 5479 7065 5265 6769 7374 6572 2e46 6173  TypeRegister.Fas
-000126c0: 7441 7272 6179 2873 7472 4e61 6d65 7329  tArray(strNames)
-000126d0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-000126e0: 2020 2020 2020 2020 2020 2020 2320 6d61              # ma
-000126f0: 746c 6162 2068 6173 2070 6164 6465 6420  tlab has padded 
-00012700: 7374 7269 6e67 732c 2075 6e70 6164 2066  strings, unpad f
-00012710: 6f72 2063 6f72 7265 6374 2063 6f6d 7061  or correct compa
-00012720: 7269 736f 6e73 0d0a 2020 2020 2020 2020  risons..        
-00012730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012740: 6966 2072 656d 6f76 655f 7472 6169 6c69  if remove_traili
-00012750: 6e67 2061 6e64 2073 7472 4e61 6d65 732e  ng and strNames.
-00012760: 6474 7970 652e 6368 6172 2069 6e20 2822  dtype.char in ("
-00012770: 5522 2c20 2253 2229 3a0d 0a20 2020 2020  U", "S"):..     
-00012780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012790: 2020 2020 2020 2073 7472 4e61 6d65 7320         strNames 
-000127a0: 3d20 7263 2e52 656d 6f76 6554 7261 696c  = rc.RemoveTrail
-000127b0: 696e 6753 7061 6365 7328 7374 724e 616d  ingSpaces(strNam
-000127c0: 6573 290d 0a20 2020 2020 2020 2020 2020  es)..           
-000127d0: 2020 2020 2020 2020 2020 2020 206e 6577               new
-000127e0: 6361 7465 676f 7279 203d 2054 7970 6552  category = TypeR
-000127f0: 6567 6973 7465 722e 4361 7465 676f 7269  egister.Categori
-00012800: 6361 6c28 7041 7272 6179 2c20 7374 724e  cal(pArray, strN
-00012810: 616d 6573 2c20 6261 7365 5f69 6e64 6578  ames, base_index
-00012820: 3d31 2c20 6672 6f6d 5f6d 6174 6c61 623d  =1, from_matlab=
-00012830: 5472 7565 290d 0a0d 0a20 2020 2020 2020  True)....       
-00012840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012850: 2023 2064 726f 7020 7468 6520 6c65 6164   # drop the lead
-00012860: 696e 6720 7072 6566 6978 2066 726f 6d20  ing prefix from 
-00012870: 7468 6520 696e 6465 7820 636f 6c75 6d6e  the index column
-00012880: 2c20 7265 6d6f 7665 2069 6e64 6578 2063  , remove index c
-00012890: 6f6c 756d 6e0d 0a20 2020 2020 2020 2020  olumn..         
-000128a0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000128b0: 6620 6e6f 7420 6b65 6570 5f70 7265 6669  f not keep_prefi
-000128c0: 783a 0d0a 2020 2020 2020 2020 2020 2020  x:..            
-000128d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000128e0: 7472 696d 6d65 645f 6e61 6d65 203d 2070  trimmed_name = p
-000128f0: 6e61 6d65 5b6c 656e 2870 7265 6669 7829  name[len(prefix)
-00012900: 203a 5d0d 0a20 2020 2020 2020 2020 2020   :]..           
-00012910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012920: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-00012930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012940: 2020 2020 2020 2073 656c 662e 636f 6c5f         self.col_
-00012950: 7265 6d6f 7665 2874 7269 6d6d 6564 5f6e  remove(trimmed_n
-00012960: 616d 6529 0d0a 2020 2020 2020 2020 2020  ame)..          
-00012970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012980: 2020 2020 2020 7761 726e 696e 6773 2e77        warnings.w
-00012990: 6172 6e28 6622 5265 706c 6163 6564 2063  arn(f"Replaced c
-000129a0: 6f6c 756d 6e20 7b74 7269 6d6d 6564 5f6e  olumn {trimmed_n
-000129b0: 616d 657d 2077 6974 6820 6361 7465 676f  ame} with catego
-000129c0: 7269 6361 6c20 6672 6f6d 206d 6174 6c61  rical from matla
-000129d0: 622e 2229 0d0a 2020 2020 2020 2020 2020  b.")..          
-000129e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000129f0: 2020 6578 6365 7074 3a0d 0a20 2020 2020    except:..     
+00012610: 2320 636f 6e76 6572 7420 6d61 746c 6162  # convert matlab
+00012620: 2073 6361 6c61 7273 2074 6f20 6172 7261   scalars to arra
+00012630: 7920 6f66 206f 6e65 2069 7465 6d0d 0a20  y of one item.. 
+00012640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012650: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
+00012660: 696e 7374 616e 6365 2873 7472 4e61 6d65  instance(strName
+00012670: 732c 206e 702e 6e64 6172 7261 7929 3a0d  s, np.ndarray):.
+00012680: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012690: 2020 2020 2020 2020 2020 2020 2073 7472               str
+000126a0: 4e61 6d65 7320 3d20 5479 7065 5265 6769  Names = TypeRegi
+000126b0: 7374 6572 2e46 6173 7441 7272 6179 2873  ster.FastArray(s
+000126c0: 7472 4e61 6d65 7329 0d0a 0d0a 2020 2020  trNames)....    
+000126d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000126e0: 2020 2020 2320 6d61 746c 6162 2068 6173      # matlab has
+000126f0: 2070 6164 6465 6420 7374 7269 6e67 732c   padded strings,
+00012700: 2075 6e70 6164 2066 6f72 2063 6f72 7265   unpad for corre
+00012710: 6374 2063 6f6d 7061 7269 736f 6e73 0d0a  ct comparisons..
+00012720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012730: 2020 2020 2020 2020 6966 2072 656d 6f76          if remov
+00012740: 655f 7472 6169 6c69 6e67 2061 6e64 2073  e_trailing and s
+00012750: 7472 4e61 6d65 732e 6474 7970 652e 6368  trNames.dtype.ch
+00012760: 6172 2069 6e20 2822 5522 2c20 2253 2229  ar in ("U", "S")
+00012770: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00012780: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00012790: 7472 4e61 6d65 7320 3d20 7263 2e52 656d  trNames = rc.Rem
+000127a0: 6f76 6554 7261 696c 696e 6753 7061 6365  oveTrailingSpace
+000127b0: 7328 7374 724e 616d 6573 290d 0a20 2020  s(strNames)..   
+000127c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000127d0: 2020 2020 206e 6577 6361 7465 676f 7279       newcategory
+000127e0: 203d 2054 7970 6552 6567 6973 7465 722e   = TypeRegister.
+000127f0: 4361 7465 676f 7269 6361 6c28 7041 7272  Categorical(pArr
+00012800: 6179 2c20 7374 724e 616d 6573 2c20 6261  ay, strNames, ba
+00012810: 7365 5f69 6e64 6578 3d31 2c20 6672 6f6d  se_index=1, from
+00012820: 5f6d 6174 6c61 623d 5472 7565 290d 0a0d  _matlab=True)...
+00012830: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012840: 2020 2020 2020 2020 2023 2064 726f 7020           # drop 
+00012850: 7468 6520 6c65 6164 696e 6720 7072 6566  the leading pref
+00012860: 6978 2066 726f 6d20 7468 6520 696e 6465  ix from the inde
+00012870: 7820 636f 6c75 6d6e 2c20 7265 6d6f 7665  x column, remove
+00012880: 2069 6e64 6578 2063 6f6c 756d 6e0d 0a20   index column.. 
+00012890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000128a0: 2020 2020 2020 2069 6620 6e6f 7420 6b65         if not ke
+000128b0: 6570 5f70 7265 6669 783a 0d0a 2020 2020  ep_prefix:..    
+000128c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000128d0: 2020 2020 2020 2020 7472 696d 6d65 645f          trimmed_
+000128e0: 6e61 6d65 203d 2070 6e61 6d65 5b6c 656e  name = pname[len
+000128f0: 2870 7265 6669 7829 203a 5d0d 0a20 2020  (prefix) :]..   
+00012900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012910: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
+00012920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012930: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00012940: 656c 662e 636f 6c5f 7265 6d6f 7665 2874  elf.col_remove(t
+00012950: 7269 6d6d 6564 5f6e 616d 6529 0d0a 2020  rimmed_name)..  
+00012960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012970: 2020 2020 2020 2020 2020 2020 2020 7761                wa
+00012980: 726e 696e 6773 2e77 6172 6e28 6622 5265  rnings.warn(f"Re
+00012990: 706c 6163 6564 2063 6f6c 756d 6e20 7b74  placed column {t
+000129a0: 7269 6d6d 6564 5f6e 616d 657d 2077 6974  rimmed_name} wit
+000129b0: 6820 6361 7465 676f 7269 6361 6c20 6672  h categorical fr
+000129c0: 6f6d 206d 6174 6c61 622e 2229 0d0a 2020  om matlab.")..  
+000129d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000129e0: 2020 2020 2020 2020 2020 6578 6365 7074            except
+000129f0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
 00012a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012a10: 2020 2020 2020 2020 2020 2070 6173 730d             pass.
-00012a20: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00012a30: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00012a40: 2069 6620 7265 6e61 6d69 6e67 2066 6169   if renaming fai
-00012a50: 6c73 2c20 7472 7920 6361 7069 7461 6c69  ls, try capitali
-00012a60: 7a65 640d 0a20 2020 2020 2020 2020 2020  zed..           
-00012a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012a80: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-00012a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012aa0: 2020 2020 2020 2073 656c 662e 636f 6c5f         self.col_
-00012ab0: 7265 6e61 6d65 2870 6e61 6d65 2c20 7472  rename(pname, tr
-00012ac0: 696d 6d65 645f 6e61 6d65 290d 0a20 2020  immed_name)..   
+00012a10: 2020 2070 6173 730d 0a0d 0a20 2020 2020     pass....     
+00012a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012a30: 2020 2020 2020 2023 2069 6620 7265 6e61         # if rena
+00012a40: 6d69 6e67 2066 6169 6c73 2c20 7472 7920  ming fails, try 
+00012a50: 6361 7069 7461 6c69 7a65 640d 0a20 2020  capitalized..   
+00012a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012a70: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
+00012a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012a90: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00012aa0: 656c 662e 636f 6c5f 7265 6e61 6d65 2870  elf.col_rename(p
+00012ab0: 6e61 6d65 2c20 7472 696d 6d65 645f 6e61  name, trimmed_na
+00012ac0: 6d65 290d 0a20 2020 2020 2020 2020 2020  me)..           
 00012ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012ae0: 2020 2020 2020 2020 2065 7863 6570 7420           except 
-00012af0: 4578 6365 7074 696f 6e3a 0d0a 2020 2020  Exception:..    
+00012ae0: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
+00012af0: 6e3a 0d0a 2020 2020 2020 2020 2020 2020  n:..            
 00012b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012b10: 2020 2020 2020 2020 2020 2020 7472 696d              trim
-00012b20: 6d65 645f 6e61 6d65 203d 2074 7269 6d6d  med_name = trimm
-00012b30: 6564 5f6e 616d 652e 6361 7069 7461 6c69  ed_name.capitali
-00012b40: 7a65 2829 0d0a 2020 2020 2020 2020 2020  ze()..          
-00012b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012b60: 2020 2020 2020 7365 6c66 2e63 6f6c 5f72        self.col_r
-00012b70: 656e 616d 6528 706e 616d 652c 2074 7269  ename(pname, tri
-00012b80: 6d6d 6564 5f6e 616d 6529 0d0a 0d0a 2020  mmed_name)....  
+00012b10: 2020 2020 7472 696d 6d65 645f 6e61 6d65      trimmed_name
+00012b20: 203d 2074 7269 6d6d 6564 5f6e 616d 652e   = trimmed_name.
+00012b30: 6361 7069 7461 6c69 7a65 2829 0d0a 2020  capitalize()..  
+00012b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b50: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00012b60: 6c66 2e63 6f6c 5f72 656e 616d 6528 706e  lf.col_rename(pn
+00012b70: 616d 652c 2074 7269 6d6d 6564 5f6e 616d  ame, trimmed_nam
+00012b80: 6529 0d0a 0d0a 2020 2020 2020 2020 2020  e)....          
 00012b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012ba0: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
-00012bb0: 6f6c 5f73 6574 5f76 616c 7565 2874 7269  ol_set_value(tri
-00012bc0: 6d6d 6564 5f6e 616d 652c 206e 6577 6361  mmed_name, newca
-00012bd0: 7465 676f 7279 290d 0a20 2020 2020 2020  tegory)..       
-00012be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012bf0: 2023 206b 6565 7020 7468 6520 6c65 6164   # keep the lead
-00012c00: 696e 6720 7072 6566 6978 0d0a 2020 2020  ing prefix..    
-00012c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012c20: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00012c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012c40: 2020 2020 2020 2073 656c 662e 636f 6c5f         self.col_
-00012c50: 7365 745f 7661 6c75 6528 706e 616d 652c  set_value(pname,
-00012c60: 206e 6577 6361 7465 676f 7279 290d 0a0d   newcategory)...
-00012c70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012c80: 2020 2020 2020 2020 2023 2068 656c 7020           # help 
-00012c90: 7265 6379 636c 6572 0d0a 2020 2020 2020  recycler..      
-00012ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012cb0: 2020 6465 6c20 6e65 7763 6174 6567 6f72    del newcategor
-00012cc0: 790d 0a20 2020 2020 2020 2020 2020 2020  y..             
-00012cd0: 2020 2020 2020 2065 7863 6570 743a 0d0a         except:..
+00012ba0: 2020 7365 6c66 2e63 6f6c 5f73 6574 5f76    self.col_set_v
+00012bb0: 616c 7565 2874 7269 6d6d 6564 5f6e 616d  alue(trimmed_nam
+00012bc0: 652c 206e 6577 6361 7465 676f 7279 290d  e, newcategory).
+00012bd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012be0: 2020 2020 2020 2020 2023 206b 6565 7020           # keep 
+00012bf0: 7468 6520 6c65 6164 696e 6720 7072 6566  the leading pref
+00012c00: 6978 0d0a 2020 2020 2020 2020 2020 2020  ix..            
+00012c10: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00012c20: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00012c30: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00012c40: 656c 662e 636f 6c5f 7365 745f 7661 6c75  elf.col_set_valu
+00012c50: 6528 706e 616d 652c 206e 6577 6361 7465  e(pname, newcate
+00012c60: 676f 7279 290d 0a0d 0a20 2020 2020 2020  gory)....       
+00012c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012c80: 2023 2068 656c 7020 7265 6379 636c 6572   # help recycler
+00012c90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00012ca0: 2020 2020 2020 2020 2020 6465 6c20 6e65            del ne
+00012cb0: 7763 6174 6567 6f72 790d 0a20 2020 2020  wcategory..     
+00012cc0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00012cd0: 7863 6570 743a 0d0a 2020 2020 2020 2020  xcept:..        
 00012ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012cf0: 2020 2020 2020 2020 7261 6973 6520 5479          raise Ty
-00012d00: 7065 4572 726f 7228 6622 4361 6e6e 6f74  peError(f"Cannot
-00012d10: 2063 6f6e 7665 7274 207b 706e 616d 657d   convert {pname}
-00012d20: 2061 7320 6120 4361 7465 676f 7269 6361   as a Categorica
-00012d30: 6c22 290d 0a0d 0a20 2020 2020 2020 2020  l")....         
-00012d40: 2020 2020 2020 2023 2068 656c 7020 7265         # help re
-00012d50: 6379 636c 6572 0d0a 2020 2020 2020 2020  cycler..        
-00012d60: 2020 2020 2020 2020 6465 6c20 7041 7272          del pArr
-00012d70: 6179 0d0a 0d0a 2020 2020 2020 2020 7072  ay....        pr
-00012d80: 696e 7428 6622 436f 6e76 6572 7465 6420  int(f"Converted 
-00012d90: 7b73 7472 436f 756e 747d 2061 7272 6179  {strCount} array
-00012da0: 733a 207b 7374 7243 6f6e 7665 7274 7d22  s: {strConvert}"
-00012db0: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
+00012cf0: 7261 6973 6520 5479 7065 4572 726f 7228  raise TypeError(
+00012d00: 6622 4361 6e6e 6f74 2063 6f6e 7665 7274  f"Cannot convert
+00012d10: 207b 706e 616d 657d 2061 7320 6120 4361   {pname} as a Ca
+00012d20: 7465 676f 7269 6361 6c22 290d 0a0d 0a20  tegorical").... 
+00012d30: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00012d40: 2068 656c 7020 7265 6379 636c 6572 0d0a   help recycler..
+00012d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d60: 6465 6c20 7041 7272 6179 0d0a 0d0a 2020  del pArray....  
+00012d70: 2020 2020 2020 7072 696e 7428 6622 436f        print(f"Co
+00012d80: 6e76 6572 7465 6420 7b73 7472 436f 756e  nverted {strCoun
+00012d90: 747d 2061 7272 6179 733a 207b 7374 7243  t} arrays: {strC
+00012da0: 6f6e 7665 7274 7d22 290d 0a0d 0a20 2020  onvert}")....   
+00012db0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
 00012dc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00012dd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00012de0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00012df0: 2d2d 0d0a 2020 2020 4063 6c61 7373 6d65  --..    @classme
-00012e00: 7468 6f64 0d0a 2020 2020 6465 6620 6c6f  thod..    def lo
-00012e10: 6164 280d 0a20 2020 2020 2020 2063 6c73  ad(..        cls
-00012e20: 2c0d 0a20 2020 2020 2020 2070 6174 683a  ,..        path:
-00012e30: 2055 6e69 6f6e 5b73 7472 2c20 6f73 2e50   Union[str, os.P
-00012e40: 6174 684c 696b 655d 203d 2022 222c 0d0a  athLike] = "",..
-00012e50: 2020 2020 2020 2020 6e61 6d65 3a20 4f70          name: Op
-00012e60: 7469 6f6e 616c 5b73 7472 5d20 3d20 4e6f  tional[str] = No
-00012e70: 6e65 2c0d 0a20 2020 2020 2020 2073 6861  ne,..        sha
-00012e80: 7265 3a20 4f70 7469 6f6e 616c 5b73 7472  re: Optional[str
-00012e90: 5d20 3d20 4e6f 6e65 2c0d 0a20 2020 2020  ] = None,..     
-00012ea0: 2020 2069 6e66 6f3a 2062 6f6f 6c20 3d20     info: bool = 
-00012eb0: 4661 6c73 652c 0d0a 2020 2020 2020 2020  False,..        
-00012ec0: 636f 6c75 6d6e 733d 4e6f 6e65 2c0d 0a20  columns=None,.. 
-00012ed0: 2020 2020 2020 2069 6e63 6c75 6465 5f61         include_a
-00012ee0: 6c6c 5f73 6473 3d46 616c 7365 2c0d 0a20  ll_sds=False,.. 
-00012ef0: 2020 2020 2020 2069 6e63 6c75 6465 3a20         include: 
-00012f00: 4f70 7469 6f6e 616c 5b53 6571 7565 6e63  Optional[Sequenc
-00012f10: 655b 7374 725d 5d20 3d20 4e6f 6e65 2c0d  e[str]] = None,.
-00012f20: 0a20 2020 2020 2020 2074 6872 6561 6473  .        threads
-00012f30: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
-00012f40: 3d20 4e6f 6e65 2c0d 0a20 2020 2020 2020  = None,..       
-00012f50: 2066 6f6c 6465 7273 3a20 4f70 7469 6f6e   folders: Option
-00012f60: 616c 5b53 6571 7565 6e63 655b 7374 725d  al[Sequence[str]
-00012f70: 5d20 3d20 4e6f 6e65 2c0d 0a20 2020 2029  ] = None,..    )
-00012f80: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-00012f90: 2020 2020 2020 2020 4c6f 6164 2061 2053          Load a S
-00012fa0: 7472 7563 7420 6672 6f6d 2061 2064 6972  truct from a dir
-00012fb0: 6563 746f 7279 206f 7220 7369 6e67 6c65  ectory or single
-00012fc0: 2053 4453 2066 696c 652e 0d0a 0d0a 2020   SDS file.....  
-00012fd0: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
-00012fe0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-00012ff0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 7061  ----..        pa
-00013000: 7468 203a 2073 7472 206f 7220 6f73 2e50  th : str or os.P
-00013010: 6174 684c 696b 650d 0a20 2020 2020 2020  athLike..       
-00013020: 2020 2020 2046 756c 6c20 7061 7468 2074       Full path t
-00013030: 6f20 6469 7265 6374 6f72 7920 6f72 2073  o directory or s
-00013040: 696e 676c 6520 5344 5320 6669 6c65 2077  ingle SDS file w
-00013050: 6974 6820 5374 7275 6374 2064 6174 612e  ith Struct data.
-00013060: 0d0a 2020 2020 2020 2020 6e61 6d65 203a  ..        name :
-00013070: 2060 7374 7260 2c20 6f70 7469 6f6e 616c   `str`, optional
-00013080: 2c20 6465 6661 756c 7420 4e6f 6e65 0d0a  , default None..
-00013090: 2020 2020 2020 2020 2020 2020 4e61 6d65              Name
-000130a0: 206f 6620 6120 6e65 7374 6564 2063 6f6e   of a nested con
-000130b0: 7461 696e 6572 2074 6f20 7365 6172 6368  tainer to search
-000130c0: 2066 6f72 2069 6e20 7468 6520 726f 6f74   for in the root
-000130d0: 2064 6972 6563 746f 7279 2e20 4d75 6c74   directory. Mult
-000130e0: 6970 6c65 2074 6965 7273 2063 616e 2062  iple tiers can b
-000130f0: 6520 7365 7061 7261 7465 6420 6279 2027  e separated by '
-00013100: 2f2f 270d 0a20 2020 2020 2020 2069 6e66  //'..        inf
-00013110: 6f20 3a20 626f 6f6c 2c20 6f70 7469 6f6e  o : bool, option
-00013120: 616c 2c20 6465 6661 756c 7420 4661 6c73  al, default Fals
-00013130: 650d 0a20 2020 2020 2020 2020 2020 2049  e..            I
-00013140: 6620 5472 7565 2c20 6e6f 2061 7272 6179  f True, no array
-00013150: 2064 6174 6120 7769 6c6c 2062 6520 6c6f   data will be lo
-00013160: 6164 6564 2c20 696e 7374 6561 6420 6120  aded, instead a 
-00013170: 6469 7370 6c61 7920 7472 6565 206f 6620  display tree of 
-00013180: 696e 666f 726d 6174 696f 6e20 6162 6f75  information abou
-00013190: 7420 6e65 7374 6564 2073 7472 7563 7475  t nested structu
-000131a0: 7265 730d 0a20 2020 2020 2020 2020 2020  res..           
-000131b0: 2061 6e64 2074 6865 6972 2063 6f6e 7465   and their conte
-000131c0: 6e74 7320 7769 6c6c 2062 6520 7265 7475  nts will be retu
-000131d0: 726e 6564 2e0d 0a20 2020 2020 2020 2063  rned...        c
-000131e0: 6f6c 756d 6e73 203a 2060 6c69 7374 602c  olumns : `list`,
-000131f0: 206f 7074 696f 6e61 6c2c 2064 6566 6175   optional, defau
-00013200: 6c74 204e 6f6e 650d 0a20 2020 2020 2020  lt None..       
-00013210: 2020 2020 204e 6f74 2069 6d70 6c65 6d65       Not impleme
-00013220: 6e74 6564 0d0a 2020 2020 2020 2020 696e  nted..        in
-00013230: 636c 7564 655f 616c 6c5f 7364 7320 3a20  clude_all_sds : 
-00013240: 626f 6f6c 2c20 6f70 7469 6f6e 616c 2c20  bool, optional, 
-00013250: 6465 6661 756c 7420 4661 6c73 650d 0a20  default False.. 
-00013260: 2020 2020 2020 2020 2020 2049 6620 4661             If Fa
-00013270: 6c73 652c 2077 6865 6e20 6164 6469 7469  lse, when additi
-00013280: 6f6e 616c 2066 696c 6573 2077 6572 6520  onal files were 
-00013290: 666f 756e 6420 696e 2061 2064 6972 6563  found in a direc
-000132a0: 746f 7279 2c20 616e 6420 7468 6579 2077  tory, and they w
-000132b0: 6572 6520 6e6f 7420 696e 2074 6865 2072  ere not in the r
-000132c0: 6f6f 7420 7374 7275 6374 7320 6d65 7461  oot structs meta
-000132d0: 2064 6174 612c 2074 6865 2075 7365 720d   data, the user.
-000132e0: 0a20 2020 2020 2020 2020 2020 2077 696c  .            wil
-000132f0: 6c20 6265 2070 726f 6d70 7465 6420 746f  l be prompted to
-00013300: 206c 6f61 6420 7468 656d 2e20 4966 2054   load them. If T
-00013310: 7275 652c 2061 6c6c 2066 696c 6573 2077  rue, all files w
-00013320: 696c 6c20 6265 2061 7574 6f6d 6174 6963  ill be automatic
-00013330: 616c 6c79 206c 6f61 6465 642e 0d0a 2020  ally loaded...  
-00013340: 2020 2020 2020 696e 636c 7564 6520 3a20        include : 
-00013350: 6c69 7374 206f 6620 7374 722c 206f 7074  list of str, opt
-00013360: 696f 6e61 6c2c 2064 6566 6175 6c74 204e  ional, default N
-00013370: 6f6e 650d 0a20 2020 2020 2020 2020 2020  one..           
-00013380: 2041 206c 6973 7420 6f66 2073 7065 6369   A list of speci
-00013390: 6669 6320 6974 656d 7320 746f 206c 6f61  fic items to loa
-000133a0: 642e 2054 6869 7320 6c69 7374 2077 696c  d. This list wil
-000133b0: 6c20 6f6e 6c79 2062 6520 6170 706c 6965  l only be applie
-000133c0: 6420 746f 2074 6865 2072 6f6f 7420 5374  d to the root St
-000133d0: 7275 6374 202d 206e 6f74 2074 6f20 6e65  ruct - not to ne
-000133e0: 7374 6564 2063 6f6e 7461 696e 6572 732e  sted containers.
-000133f0: 0d0a 2020 2020 2020 2020 7468 7265 6164  ..        thread
-00013400: 7320 3a20 696e 742c 206f 7074 696f 6e61  s : int, optiona
-00013410: 6c2c 2064 6566 6175 6c74 204e 6f6e 650d  l, default None.
-00013420: 0a20 2020 2020 2020 2020 2020 204e 756d  .            Num
-00013430: 6265 7220 6f66 2074 6872 6561 6473 2074  ber of threads t
-00013440: 6f20 7573 6520 6475 7269 6e67 2074 6865  o use during the
-00013450: 2053 4453 206c 6f61 642e 204e 756d 6265   SDS load. Numbe
-00013460: 7220 6f66 2074 6872 6561 6473 2062 6566  r of threads bef
-00013470: 6f72 6520 7468 6520 6c6f 6164 2077 696c  ore the load wil
-00013480: 6c20 6265 2072 6573 746f 7265 6420 6166  l be restored af
-00013490: 7465 7220 7468 6520 6c6f 6164 0d0a 2020  ter the load..  
-000134a0: 2020 2020 2020 2020 2020 6f72 2069 6620            or if 
-000134b0: 7468 6520 6c6f 6164 2066 6169 6c73 2e20  the load fails. 
-000134c0: 5365 6520 616c 736f 2060 7269 7074 6964  See also `riptid
-000134d0: 655f 6370 702e 5365 7454 6872 6561 6457  e_cpp.SetThreadW
-000134e0: 616b 6555 7060 2e0d 0a0d 0a20 2020 2020  akeUp`.....     
-000134f0: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
-00013500: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
-00013510: 2020 2020 2060 5374 7275 6374 600d 0a20       `Struct`.. 
-00013520: 2020 2020 2020 2020 2020 204c 6f61 6465             Loade
-00013530: 6420 6461 7461 2077 6974 6820 706f 7373  d data with poss
-00013540: 6962 6c79 206e 6573 7465 6420 636f 6e74  ibly nested cont
-00013550: 6169 6e65 7273 2061 6e64 2072 6970 7461  ainers and ripta
-00013560: 626c 6520 636c 6173 7365 7320 7265 7374  ble classes rest
-00013570: 6f72 6564 2e0d 0a0d 0a20 2020 2020 2020  ored.....       
-00013580: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
-00013590: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-000135a0: 2020 2020 2072 6970 7461 626c 652e 6c6f       riptable.lo
-000135b0: 6164 5f73 6473 0d0a 0d0a 2020 2020 2020  ad_sds....      
-000135c0: 2020 2222 220d 0a20 2020 2020 2020 2072    """..        r
-000135d0: 6573 756c 7420 3d20 5f6c 6f61 645f 7364  esult = _load_sd
-000135e0: 7328 0d0a 2020 2020 2020 2020 2020 2020  s(..            
-000135f0: 7061 7468 2c0d 0a20 2020 2020 2020 2020  path,..         
-00013600: 2020 206e 616d 653d 6e61 6d65 2c0d 0a20     name=name,.. 
-00013610: 2020 2020 2020 2020 2020 2073 6861 7265             share
-00013620: 6e61 6d65 3d73 6861 7265 2c0d 0a20 2020  name=share,..   
-00013630: 2020 2020 2020 2020 2069 6e66 6f3d 696e           info=in
-00013640: 666f 2c0d 0a20 2020 2020 2020 2020 2020  fo,..           
-00013650: 2069 6e63 6c75 6465 5f61 6c6c 5f73 6473   include_all_sds
-00013660: 3d69 6e63 6c75 6465 5f61 6c6c 5f73 6473  =include_all_sds
-00013670: 2c0d 0a20 2020 2020 2020 2020 2020 2069  ,..            i
-00013680: 6e63 6c75 6465 3d69 6e63 6c75 6465 2c0d  nclude=include,.
-00013690: 0a20 2020 2020 2020 2020 2020 2074 6872  .            thr
-000136a0: 6561 6473 3d74 6872 6561 6473 2c0d 0a20  eads=threads,.. 
-000136b0: 2020 2020 2020 2020 2020 2066 6f6c 6465             folde
-000136c0: 7273 3d66 6f6c 6465 7273 2c0d 0a20 2020  rs=folders,..   
-000136d0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-000136e0: 6966 2069 6e66 6f3a 0d0a 2020 2020 2020  if info:..      
-000136f0: 2020 2020 2020 7265 7375 6c74 203d 2063        result = c
-00013700: 6c73 2e5f 696e 666f 5f74 7265 6528 7061  ls._info_tree(pa
-00013710: 7468 2c20 7265 7375 6c74 290d 0a20 2020  th, result)..   
-00013720: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
-00013730: 6c74 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  lt....    # ----
+00012de0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+00012df0: 4063 6c61 7373 6d65 7468 6f64 0d0a 2020  @classmethod..  
+00012e00: 2020 6465 6620 6c6f 6164 280d 0a20 2020    def load(..   
+00012e10: 2020 2020 2063 6c73 2c0d 0a20 2020 2020       cls,..     
+00012e20: 2020 2070 6174 683a 2055 6e69 6f6e 5b73     path: Union[s
+00012e30: 7472 2c20 6f73 2e50 6174 684c 696b 655d  tr, os.PathLike]
+00012e40: 203d 2022 222c 0d0a 2020 2020 2020 2020   = "",..        
+00012e50: 6e61 6d65 3a20 4f70 7469 6f6e 616c 5b73  name: Optional[s
+00012e60: 7472 5d20 3d20 4e6f 6e65 2c0d 0a20 2020  tr] = None,..   
+00012e70: 2020 2020 2073 6861 7265 3a20 4f70 7469       share: Opti
+00012e80: 6f6e 616c 5b73 7472 5d20 3d20 4e6f 6e65  onal[str] = None
+00012e90: 2c0d 0a20 2020 2020 2020 2069 6e66 6f3a  ,..        info:
+00012ea0: 2062 6f6f 6c20 3d20 4661 6c73 652c 0d0a   bool = False,..
+00012eb0: 2020 2020 2020 2020 636f 6c75 6d6e 733d          columns=
+00012ec0: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2069  None,..        i
+00012ed0: 6e63 6c75 6465 5f61 6c6c 5f73 6473 3d46  nclude_all_sds=F
+00012ee0: 616c 7365 2c0d 0a20 2020 2020 2020 2069  alse,..        i
+00012ef0: 6e63 6c75 6465 3a20 4f70 7469 6f6e 616c  nclude: Optional
+00012f00: 5b53 6571 7565 6e63 655b 7374 725d 5d20  [Sequence[str]] 
+00012f10: 3d20 4e6f 6e65 2c0d 0a20 2020 2020 2020  = None,..       
+00012f20: 2074 6872 6561 6473 3a20 4f70 7469 6f6e   threads: Option
+00012f30: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c0d  al[int] = None,.
+00012f40: 0a20 2020 2020 2020 2066 6f6c 6465 7273  .        folders
+00012f50: 3a20 4f70 7469 6f6e 616c 5b53 6571 7565  : Optional[Seque
+00012f60: 6e63 655b 7374 725d 5d20 3d20 4e6f 6e65  nce[str]] = None
+00012f70: 2c0d 0a20 2020 2029 3a0d 0a20 2020 2020  ,..    ):..     
+00012f80: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00012f90: 4c6f 6164 2061 2053 7472 7563 7420 6672  Load a Struct fr
+00012fa0: 6f6d 2061 2064 6972 6563 746f 7279 206f  om a directory o
+00012fb0: 7220 7369 6e67 6c65 2053 4453 2066 696c  r single SDS fil
+00012fc0: 652e 0d0a 0d0a 2020 2020 2020 2020 5061  e.....        Pa
+00012fd0: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+00012fe0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+00012ff0: 2020 2020 2020 7061 7468 203a 2073 7472        path : str
+00013000: 206f 7220 6f73 2e50 6174 684c 696b 650d   or os.PathLike.
+00013010: 0a20 2020 2020 2020 2020 2020 2046 756c  .            Ful
+00013020: 6c20 7061 7468 2074 6f20 6469 7265 6374  l path to direct
+00013030: 6f72 7920 6f72 2073 696e 676c 6520 5344  ory or single SD
+00013040: 5320 6669 6c65 2077 6974 6820 5374 7275  S file with Stru
+00013050: 6374 2064 6174 612e 0d0a 2020 2020 2020  ct data...      
+00013060: 2020 6e61 6d65 203a 2060 7374 7260 2c20    name : `str`, 
+00013070: 6f70 7469 6f6e 616c 2c20 6465 6661 756c  optional, defaul
+00013080: 7420 4e6f 6e65 0d0a 2020 2020 2020 2020  t None..        
+00013090: 2020 2020 4e61 6d65 206f 6620 6120 6e65      Name of a ne
+000130a0: 7374 6564 2063 6f6e 7461 696e 6572 2074  sted container t
+000130b0: 6f20 7365 6172 6368 2066 6f72 2069 6e20  o search for in 
+000130c0: 7468 6520 726f 6f74 2064 6972 6563 746f  the root directo
+000130d0: 7279 2e20 4d75 6c74 6970 6c65 2074 6965  ry. Multiple tie
+000130e0: 7273 2063 616e 2062 6520 7365 7061 7261  rs can be separa
+000130f0: 7465 6420 6279 2027 2f2f 270d 0a20 2020  ted by '//'..   
+00013100: 2020 2020 2069 6e66 6f20 3a20 626f 6f6c       info : bool
+00013110: 2c20 6f70 7469 6f6e 616c 2c20 6465 6661  , optional, defa
+00013120: 756c 7420 4661 6c73 650d 0a20 2020 2020  ult False..     
+00013130: 2020 2020 2020 2049 6620 5472 7565 2c20         If True, 
+00013140: 6e6f 2061 7272 6179 2064 6174 6120 7769  no array data wi
+00013150: 6c6c 2062 6520 6c6f 6164 6564 2c20 696e  ll be loaded, in
+00013160: 7374 6561 6420 6120 6469 7370 6c61 7920  stead a display 
+00013170: 7472 6565 206f 6620 696e 666f 726d 6174  tree of informat
+00013180: 696f 6e20 6162 6f75 7420 6e65 7374 6564  ion about nested
+00013190: 2073 7472 7563 7475 7265 730d 0a20 2020   structures..   
+000131a0: 2020 2020 2020 2020 2061 6e64 2074 6865           and the
+000131b0: 6972 2063 6f6e 7465 6e74 7320 7769 6c6c  ir contents will
+000131c0: 2062 6520 7265 7475 726e 6564 2e0d 0a20   be returned... 
+000131d0: 2020 2020 2020 2063 6f6c 756d 6e73 203a         columns :
+000131e0: 2060 6c69 7374 602c 206f 7074 696f 6e61   `list`, optiona
+000131f0: 6c2c 2064 6566 6175 6c74 204e 6f6e 650d  l, default None.
+00013200: 0a20 2020 2020 2020 2020 2020 204e 6f74  .            Not
+00013210: 2069 6d70 6c65 6d65 6e74 6564 0d0a 2020   implemented..  
+00013220: 2020 2020 2020 696e 636c 7564 655f 616c        include_al
+00013230: 6c5f 7364 7320 3a20 626f 6f6c 2c20 6f70  l_sds : bool, op
+00013240: 7469 6f6e 616c 2c20 6465 6661 756c 7420  tional, default 
+00013250: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
+00013260: 2020 2049 6620 4661 6c73 652c 2077 6865     If False, whe
+00013270: 6e20 6164 6469 7469 6f6e 616c 2066 696c  n additional fil
+00013280: 6573 2077 6572 6520 666f 756e 6420 696e  es were found in
+00013290: 2061 2064 6972 6563 746f 7279 2c20 616e   a directory, an
+000132a0: 6420 7468 6579 2077 6572 6520 6e6f 7420  d they were not 
+000132b0: 696e 2074 6865 2072 6f6f 7420 7374 7275  in the root stru
+000132c0: 6374 7320 6d65 7461 2064 6174 612c 2074  cts meta data, t
+000132d0: 6865 2075 7365 720d 0a20 2020 2020 2020  he user..       
+000132e0: 2020 2020 2077 696c 6c20 6265 2070 726f       will be pro
+000132f0: 6d70 7465 6420 746f 206c 6f61 6420 7468  mpted to load th
+00013300: 656d 2e20 4966 2054 7275 652c 2061 6c6c  em. If True, all
+00013310: 2066 696c 6573 2077 696c 6c20 6265 2061   files will be a
+00013320: 7574 6f6d 6174 6963 616c 6c79 206c 6f61  utomatically loa
+00013330: 6465 642e 0d0a 2020 2020 2020 2020 696e  ded...        in
+00013340: 636c 7564 6520 3a20 6c69 7374 206f 6620  clude : list of 
+00013350: 7374 722c 206f 7074 696f 6e61 6c2c 2064  str, optional, d
+00013360: 6566 6175 6c74 204e 6f6e 650d 0a20 2020  efault None..   
+00013370: 2020 2020 2020 2020 2041 206c 6973 7420           A list 
+00013380: 6f66 2073 7065 6369 6669 6320 6974 656d  of specific item
+00013390: 7320 746f 206c 6f61 642e 2054 6869 7320  s to load. This 
+000133a0: 6c69 7374 2077 696c 6c20 6f6e 6c79 2062  list will only b
+000133b0: 6520 6170 706c 6965 6420 746f 2074 6865  e applied to the
+000133c0: 2072 6f6f 7420 5374 7275 6374 202d 206e   root Struct - n
+000133d0: 6f74 2074 6f20 6e65 7374 6564 2063 6f6e  ot to nested con
+000133e0: 7461 696e 6572 732e 0d0a 2020 2020 2020  tainers...      
+000133f0: 2020 7468 7265 6164 7320 3a20 696e 742c    threads : int,
+00013400: 206f 7074 696f 6e61 6c2c 2064 6566 6175   optional, defau
+00013410: 6c74 204e 6f6e 650d 0a20 2020 2020 2020  lt None..       
+00013420: 2020 2020 204e 756d 6265 7220 6f66 2074       Number of t
+00013430: 6872 6561 6473 2074 6f20 7573 6520 6475  hreads to use du
+00013440: 7269 6e67 2074 6865 2053 4453 206c 6f61  ring the SDS loa
+00013450: 642e 204e 756d 6265 7220 6f66 2074 6872  d. Number of thr
+00013460: 6561 6473 2062 6566 6f72 6520 7468 6520  eads before the 
+00013470: 6c6f 6164 2077 696c 6c20 6265 2072 6573  load will be res
+00013480: 746f 7265 6420 6166 7465 7220 7468 6520  tored after the 
+00013490: 6c6f 6164 0d0a 2020 2020 2020 2020 2020  load..          
+000134a0: 2020 6f72 2069 6620 7468 6520 6c6f 6164    or if the load
+000134b0: 2066 6169 6c73 2e20 5365 6520 616c 736f   fails. See also
+000134c0: 2060 7269 7074 6964 655f 6370 702e 5365   `riptide_cpp.Se
+000134d0: 7454 6872 6561 6457 616b 6555 7060 2e0d  tThreadWakeUp`..
+000134e0: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+000134f0: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
+00013500: 2d2d 2d0d 0a20 2020 2020 2020 2060 5374  ---..        `St
+00013510: 7275 6374 600d 0a20 2020 2020 2020 2020  ruct`..         
+00013520: 2020 204c 6f61 6465 6420 6461 7461 2077     Loaded data w
+00013530: 6974 6820 706f 7373 6962 6c79 206e 6573  ith possibly nes
+00013540: 7465 6420 636f 6e74 6169 6e65 7273 2061  ted containers a
+00013550: 6e64 2072 6970 7461 626c 6520 636c 6173  nd riptable clas
+00013560: 7365 7320 7265 7374 6f72 6564 2e0d 0a0d  ses restored....
+00013570: 0a20 2020 2020 2020 2053 6565 2041 6c73  .        See Als
+00013580: 6f0d 0a20 2020 2020 2020 202d 2d2d 2d2d  o..        -----
+00013590: 2d2d 2d0d 0a20 2020 2020 2020 2072 6970  ---..        rip
+000135a0: 7461 626c 652e 6c6f 6164 5f73 6473 0d0a  table.load_sds..
+000135b0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+000135c0: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+000135d0: 5f6c 6f61 645f 7364 7328 0d0a 2020 2020  _load_sds(..    
+000135e0: 2020 2020 2020 2020 7061 7468 2c0d 0a20          path,.. 
+000135f0: 2020 2020 2020 2020 2020 206e 616d 653d             name=
+00013600: 6e61 6d65 2c0d 0a20 2020 2020 2020 2020  name,..         
+00013610: 2020 2073 6861 7265 6e61 6d65 3d73 6861     sharename=sha
+00013620: 7265 2c0d 0a20 2020 2020 2020 2020 2020  re,..           
+00013630: 2069 6e66 6f3d 696e 666f 2c0d 0a20 2020   info=info,..   
+00013640: 2020 2020 2020 2020 2069 6e63 6c75 6465           include
+00013650: 5f61 6c6c 5f73 6473 3d69 6e63 6c75 6465  _all_sds=include
+00013660: 5f61 6c6c 5f73 6473 2c0d 0a20 2020 2020  _all_sds,..     
+00013670: 2020 2020 2020 2069 6e63 6c75 6465 3d69         include=i
+00013680: 6e63 6c75 6465 2c0d 0a20 2020 2020 2020  nclude,..       
+00013690: 2020 2020 2074 6872 6561 6473 3d74 6872       threads=thr
+000136a0: 6561 6473 2c0d 0a20 2020 2020 2020 2020  eads,..         
+000136b0: 2020 2066 6f6c 6465 7273 3d66 6f6c 6465     folders=folde
+000136c0: 7273 2c0d 0a20 2020 2020 2020 2029 0d0a  rs,..        )..
+000136d0: 2020 2020 2020 2020 6966 2069 6e66 6f3a          if info:
+000136e0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+000136f0: 7375 6c74 203d 2063 6c73 2e5f 696e 666f  sult = cls._info
+00013700: 5f74 7265 6528 7061 7468 2c20 7265 7375  _tree(path, resu
+00013710: 6c74 290d 0a20 2020 2020 2020 2072 6574  lt)..        ret
+00013720: 7572 6e20 7265 7375 6c74 0d0a 0d0a 2020  urn result....  
+00013730: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
 00013740: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00013750: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00013760: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00013770: 2d2d 2d0d 0a20 2020 2040 636c 6173 736d  ---..    @classm
-00013780: 6574 686f 640d 0a20 2020 2064 6566 205f  ethod..    def _
-00013790: 696e 666f 5f74 7265 6528 636c 732c 2070  info_tree(cls, p
-000137a0: 6174 683a 2055 6e69 6f6e 5b73 7472 2c20  ath: Union[str, 
-000137b0: 6f73 2e50 6174 684c 696b 655d 2c20 6461  os.PathLike], da
-000137c0: 7461 293a 0d0a 2020 2020 2020 2020 2222  ta):..        ""
-000137d0: 220d 0a20 2020 2020 2020 2043 6f6e 7665  "..        Conve
-000137e0: 7274 7320 6e65 7374 6564 2073 7472 7563  rts nested struc
-000137f0: 7475 7265 2074 6f20 7472 6565 2076 6965  ture to tree vie
-00013800: 7720 6f66 2066 696c 6520 696e 666f 2066  w of file info f
-00013810: 6f72 2053 7472 7563 7420 616e 6420 4461  or Struct and Da
-00013820: 7461 7365 742e 0d0a 2020 2020 2020 2020  taset...        
-00013830: 546f 7020 6c65 7665 6c20 7769 6c6c 2062  Top level will b
-00013840: 6520 6e61 6d65 6420 6261 7365 6420 6f6e  e named based on
-00013850: 2073 696e 676c 6520 6669 6c65 206f 7220   single file or 
-00013860: 6469 7265 6374 6f72 792e 0d0a 2020 2020  directory...    
-00013870: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00013880: 2070 6174 6820 3d20 6f73 2e70 6174 682e   path = os.path.
-00013890: 6261 7365 6e61 6d65 2870 6174 6829 0d0a  basename(path)..
-000138a0: 2020 2020 2020 2020 6e61 6d65 203d 206f          name = o
-000138b0: 732e 7061 7468 2e73 706c 6974 6578 7428  s.path.splitext(
-000138c0: 7061 7468 295b 305d 0d0a 2020 2020 2020  path)[0]..      
-000138d0: 2020 7265 7475 726e 2064 6174 612e 7472    return data.tr
-000138e0: 6565 286e 616d 653d 6e61 6d65 2c20 696e  ee(name=name, in
-000138f0: 666f 3d54 7275 6529 0d0a 0d0a 2020 2020  fo=True)....    
-00013900: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+00013760: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
+00013770: 2040 636c 6173 736d 6574 686f 640d 0a20   @classmethod.. 
+00013780: 2020 2064 6566 205f 696e 666f 5f74 7265     def _info_tre
+00013790: 6528 636c 732c 2070 6174 683a 2055 6e69  e(cls, path: Uni
+000137a0: 6f6e 5b73 7472 2c20 6f73 2e50 6174 684c  on[str, os.PathL
+000137b0: 696b 655d 2c20 6461 7461 293a 0d0a 2020  ike], data):..  
+000137c0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+000137d0: 2020 2043 6f6e 7665 7274 7320 6e65 7374     Converts nest
+000137e0: 6564 2073 7472 7563 7475 7265 2074 6f20  ed structure to 
+000137f0: 7472 6565 2076 6965 7720 6f66 2066 696c  tree view of fil
+00013800: 6520 696e 666f 2066 6f72 2053 7472 7563  e info for Struc
+00013810: 7420 616e 6420 4461 7461 7365 742e 0d0a  t and Dataset...
+00013820: 2020 2020 2020 2020 546f 7020 6c65 7665          Top leve
+00013830: 6c20 7769 6c6c 2062 6520 6e61 6d65 6420  l will be named 
+00013840: 6261 7365 6420 6f6e 2073 696e 676c 6520  based on single 
+00013850: 6669 6c65 206f 7220 6469 7265 6374 6f72  file or director
+00013860: 792e 0d0a 2020 2020 2020 2020 2222 220d  y...        """.
+00013870: 0a20 2020 2020 2020 2070 6174 6820 3d20  .        path = 
+00013880: 6f73 2e70 6174 682e 6261 7365 6e61 6d65  os.path.basename
+00013890: 2870 6174 6829 0d0a 2020 2020 2020 2020  (path)..        
+000138a0: 6e61 6d65 203d 206f 732e 7061 7468 2e73  name = os.path.s
+000138b0: 706c 6974 6578 7428 7061 7468 295b 305d  plitext(path)[0]
+000138c0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+000138d0: 2064 6174 612e 7472 6565 286e 616d 653d   data.tree(name=
+000138e0: 6e61 6d65 2c20 696e 666f 3d54 7275 6529  name, info=True)
+000138f0: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+00013900: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00013910: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00013920: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00013930: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
-00013940: 6566 2073 6176 6528 0d0a 2020 2020 2020  ef save(..      
-00013950: 2020 7365 6c66 2c0d 0a20 2020 2020 2020    self,..       
-00013960: 2070 6174 683a 2055 6e69 6f6e 5b73 7472   path: Union[str
-00013970: 2c20 6f73 2e50 6174 684c 696b 655d 203d  , os.PathLike] =
-00013980: 2022 222c 0d0a 2020 2020 2020 2020 6e61   "",..        na
-00013990: 6d65 3a20 4f70 7469 6f6e 616c 5b73 7472  me: Optional[str
-000139a0: 5d20 3d20 4e6f 6e65 2c0d 0a20 2020 2020  ] = None,..     
-000139b0: 2020 2073 6861 7265 3a20 4f70 7469 6f6e     share: Option
-000139c0: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c0d  al[str] = None,.
-000139d0: 0a20 2020 2020 2020 206f 7665 7277 7269  .        overwri
-000139e0: 7465 3a20 626f 6f6c 203d 2054 7275 652c  te: bool = True,
-000139f0: 0d0a 2020 2020 2020 2020 636f 6d70 7265  ..        compre
-00013a00: 7373 3a20 626f 6f6c 203d 2054 7275 652c  ss: bool = True,
-00013a10: 0d0a 2020 2020 2020 2020 6f6e 6566 696c  ..        onefil
-00013a20: 653a 2062 6f6f 6c20 3d20 4661 6c73 652c  e: bool = False,
-00013a30: 0d0a 2020 2020 2020 2020 6261 6e64 7369  ..        bandsi
-00013a40: 7a65 3a20 4f70 7469 6f6e 616c 5b69 6e74  ze: Optional[int
-00013a50: 5d20 3d20 4e6f 6e65 2c0d 0a20 2020 2029  ] = None,..    )
-00013a60: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-00013a70: 2020 2020 2020 2020 5361 7665 2061 2073          Save a s
-00013a80: 7472 7563 7420 746f 2061 2064 6972 6563  truct to a direc
-00013a90: 746f 7279 2e20 4966 2074 6865 2073 7472  tory. If the str
-00013aa0: 7563 7420 636f 6e74 6169 6e73 206f 6e6c  uct contains onl
-00013ab0: 7920 6172 7261 7973 2c20 7769 6c6c 2062  y arrays, will b
-00013ac0: 6520 7361 7665 6420 6173 2061 2073 696e  e saved as a sin
-00013ad0: 676c 6520 2e53 4453 2066 696c 652e 0d0a  gle .SDS file...
-00013ae0: 0d0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
-00013af0: 7465 7273 0d0a 2020 2020 2020 2020 2d2d  ters..        --
-00013b00: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
-00013b10: 2020 7061 7468 203a 2073 7472 206f 7220    path : str or 
-00013b20: 6f73 2e50 6174 684c 696b 650d 0a20 2020  os.PathLike..   
-00013b30: 2020 2020 2020 2020 2046 756c 6c20 7061           Full pa
-00013b40: 7468 2074 6f20 7361 7665 2e20 4469 7265  th to save. Dire
-00013b50: 6374 6f72 7920 7769 6c6c 2062 6520 6372  ctory will be cr
-00013b60: 6561 7465 6420 6175 746f 6d61 7469 6361  eated automatica
-00013b70: 6c6c 7920 6966 2069 7420 646f 6573 6e27  lly if it doesn'
-00013b80: 7420 6578 6973 742e 0d0a 2020 2020 2020  t exist...      
-00013b90: 2020 2020 2020 2e53 4453 2065 7874 656e        .SDS exten
-00013ba0: 7369 6f6e 2077 696c 6c20 6265 2061 7070  sion will be app
-00013bb0: 656e 6465 6420 6966 2061 2073 696e 676c  ended if a singl
-00013bc0: 6520 6669 6c65 2069 7320 6265 696e 6720  e file is being 
-00013bd0: 7361 7665 6420 616e 6420 6973 206e 6563  saved and is nec
-00013be0: 6573 7361 7279 2e0d 0a20 2020 2020 2020  essary...       
-00013bf0: 206e 616d 6520 3a20 7374 722c 206f 7074   name : str, opt
-00013c00: 696f 6e61 6c0d 0a20 2020 2020 2020 2020  ional..         
-00013c10: 2020 204e 616d 6520 666f 7220 7468 6520     Name for the 
-00013c20: 726f 6f74 2073 7472 7563 7475 7265 2069  root structure i
-00013c30: 6620 6974 2773 2062 6569 6e67 2061 7070  f it's being app
-00013c40: 656e 6465 6420 746f 2061 6e20 6578 6973  ended to an exis
-00013c50: 7469 6e67 2073 7472 7563 7427 7320 6469  ting struct's di
-00013c60: 7265 6374 6f72 792e 0d0a 2020 2020 2020  rectory...      
-00013c70: 2020 2020 2020 5468 6520 6578 6973 7469        The existi
-00013c80: 6e67 205f 726f 6f74 2e73 6473 2064 6f65  ng _root.sds doe
-00013c90: 7320 6e6f 7420 6765 7420 6f76 6572 7772  s not get overwr
-00013ca0: 6974 7465 6e2c 2061 6e64 2073 7472 7563  itten, and struc
-00013cb0: 7473 2063 616e 2062 6520 636f 6d62 696e  ts can be combin
-00013cc0: 6564 2077 6974 686f 7574 2061 2066 756c  ed without a ful
-00013cd0: 6c20 6c6f 6164 2e0d 0a20 2020 2020 2020  l load...       
-00013ce0: 2073 6861 7265 203a 2073 7472 2c20 6f70   share : str, op
-00013cf0: 7469 6f6e 616c 0d0a 2020 2020 2020 2020  tional..        
-00013d00: 6f76 6572 7772 6974 6520 3a20 626f 6f6c  overwrite : bool
-00013d10: 2c20 6f70 7469 6f6e 616c 2c20 6465 6661  , optional, defa
-00013d20: 756c 7420 5472 7565 0d0a 2020 2020 2020  ult True..      
-00013d30: 2020 2020 2020 4966 2054 7275 652c 2075        If True, u
-00013d40: 7365 7220 7769 6c6c 206e 6f74 2062 6520  ser will not be 
-00013d50: 7072 6f6d 7074 6564 206f 6e20 7768 6574  prompted on whet
-00013d60: 6865 7220 6f72 206e 6f74 2074 6f20 6f76  her or not to ov
-00013d70: 6572 7772 6974 6520 6578 6973 7469 6e67  erwrite existing
-00013d80: 202e 5344 5320 6669 6c65 732e 204f 7468   .SDS files. Oth
-00013d90: 6572 7769 7365 2c0d 0a20 2020 2020 2020  erwise,..       
-00013da0: 2020 2020 2070 726f 6d70 7420 7769 6c6c       prompt will
-00013db0: 2061 7070 6561 7220 6966 2064 6972 6563   appear if direc
-00013dc0: 746f 7279 2065 7869 7374 732e 0d0a 2020  tory exists...  
-00013dd0: 2020 2020 2020 636f 6d70 7265 7373 203a        compress :
-00013de0: 2062 6f6f 6c2c 206f 7074 696f 6e61 6c2c   bool, optional,
-00013df0: 2064 6566 6175 6c74 2054 7275 650d 0a20   default True.. 
-00013e00: 2020 2020 2020 2020 2020 2049 6620 5472             If Tr
-00013e10: 7565 2c20 5a53 7461 6e64 6172 6420 636f  ue, ZStandard co
-00013e20: 6d70 7265 7373 696f 6e20 7769 6c6c 2062  mpression will b
-00013e30: 6520 7573 6564 2077 6865 6e20 7772 6974  e used when writ
-00013e40: 696e 6720 746f 2053 4453 2c20 6f74 6865  ing to SDS, othe
-00013e50: 7277 6973 652c 206e 6f20 636f 6d70 7265  rwise, no compre
-00013e60: 7373 696f 6e0d 0a20 2020 2020 2020 2020  ssion..         
-00013e70: 2020 2077 696c 6c20 6265 2075 7365 642e     will be used.
-00013e80: 0d0a 2020 2020 2020 2020 6f6e 6566 696c  ..        onefil
-00013e90: 6520 3a20 626f 6f6c 2c20 6f70 7469 6f6e  e : bool, option
-00013ea0: 616c 2c20 6465 6661 756c 7420 4661 6c73  al, default Fals
-00013eb0: 650d 0a20 2020 2020 2020 2020 2020 2049  e..            I
-00013ec0: 6620 5472 7565 2077 696c 6c20 636f 6c6c  f True will coll
-00013ed0: 6170 7365 2061 6c6c 206e 6573 7469 6e67  apse all nesting
-00013ee0: 2053 7472 7563 7473 0d0a 2020 2020 2020   Structs..      
-00013ef0: 2020 6261 6e64 7369 7a65 203a 2069 6e74    bandsize : int
-00013f00: 2c20 6f70 7469 6f6e 616c 2c20 6465 6661  , optional, defa
-00013f10: 756c 7420 4e6f 6e65 0d0a 2020 2020 2020  ult None..      
-00013f20: 2020 2222 220d 0a20 2020 2020 2020 2073    """..        s
-00013f30: 6176 655f 7364 7328 0d0a 2020 2020 2020  ave_sds(..      
-00013f40: 2020 2020 2020 7061 7468 2c0d 0a20 2020        path,..   
-00013f50: 2020 2020 2020 2020 2073 656c 662c 0d0a           self,..
-00013f60: 2020 2020 2020 2020 2020 2020 7368 6172              shar
-00013f70: 653d 7368 6172 652c 0d0a 2020 2020 2020  e=share,..      
-00013f80: 2020 2020 2020 636f 6d70 7265 7373 3d63        compress=c
-00013f90: 6f6d 7072 6573 732c 0d0a 2020 2020 2020  ompress,..      
-00013fa0: 2020 2020 2020 6f76 6572 7772 6974 653d        overwrite=
-00013fb0: 6f76 6572 7772 6974 652c 0d0a 2020 2020  overwrite,..    
-00013fc0: 2020 2020 2020 2020 6e61 6d65 3d6e 616d          name=nam
-00013fd0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
-00013fe0: 6f6e 6566 696c 653d 6f6e 6566 696c 652c  onefile=onefile,
-00013ff0: 0d0a 2020 2020 2020 2020 2020 2020 6261  ..            ba
-00014000: 6e64 7369 7a65 3d62 616e 6473 697a 652c  ndsize=bandsize,
-00014010: 0d0a 2020 2020 2020 2020 290d 0a0d 0a20  ..        ).... 
-00014020: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+00013930: 2d0d 0a20 2020 2064 6566 2073 6176 6528  -..    def save(
+00013940: 0d0a 2020 2020 2020 2020 7365 6c66 2c0d  ..        self,.
+00013950: 0a20 2020 2020 2020 2070 6174 683a 2055  .        path: U
+00013960: 6e69 6f6e 5b73 7472 2c20 6f73 2e50 6174  nion[str, os.Pat
+00013970: 684c 696b 655d 203d 2022 222c 0d0a 2020  hLike] = "",..  
+00013980: 2020 2020 2020 6e61 6d65 3a20 4f70 7469        name: Opti
+00013990: 6f6e 616c 5b73 7472 5d20 3d20 4e6f 6e65  onal[str] = None
+000139a0: 2c0d 0a20 2020 2020 2020 2073 6861 7265  ,..        share
+000139b0: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
+000139c0: 3d20 4e6f 6e65 2c0d 0a20 2020 2020 2020  = None,..       
+000139d0: 206f 7665 7277 7269 7465 3a20 626f 6f6c   overwrite: bool
+000139e0: 203d 2054 7275 652c 0d0a 2020 2020 2020   = True,..      
+000139f0: 2020 636f 6d70 7265 7373 3a20 626f 6f6c    compress: bool
+00013a00: 203d 2054 7275 652c 0d0a 2020 2020 2020   = True,..      
+00013a10: 2020 6f6e 6566 696c 653a 2062 6f6f 6c20    onefile: bool 
+00013a20: 3d20 4661 6c73 652c 0d0a 2020 2020 2020  = False,..      
+00013a30: 2020 6261 6e64 7369 7a65 3a20 4f70 7469    bandsize: Opti
+00013a40: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
+00013a50: 2c0d 0a20 2020 2029 3a0d 0a20 2020 2020  ,..    ):..     
+00013a60: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00013a70: 5361 7665 2061 2073 7472 7563 7420 746f  Save a struct to
+00013a80: 2061 2064 6972 6563 746f 7279 2e20 4966   a directory. If
+00013a90: 2074 6865 2073 7472 7563 7420 636f 6e74   the struct cont
+00013aa0: 6169 6e73 206f 6e6c 7920 6172 7261 7973  ains only arrays
+00013ab0: 2c20 7769 6c6c 2062 6520 7361 7665 6420  , will be saved 
+00013ac0: 6173 2061 2073 696e 676c 6520 2e53 4453  as a single .SDS
+00013ad0: 2066 696c 652e 0d0a 0d0a 2020 2020 2020   file.....      
+00013ae0: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
+00013af0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
+00013b00: 0d0a 2020 2020 2020 2020 7061 7468 203a  ..        path :
+00013b10: 2073 7472 206f 7220 6f73 2e50 6174 684c   str or os.PathL
+00013b20: 696b 650d 0a20 2020 2020 2020 2020 2020  ike..           
+00013b30: 2046 756c 6c20 7061 7468 2074 6f20 7361   Full path to sa
+00013b40: 7665 2e20 4469 7265 6374 6f72 7920 7769  ve. Directory wi
+00013b50: 6c6c 2062 6520 6372 6561 7465 6420 6175  ll be created au
+00013b60: 746f 6d61 7469 6361 6c6c 7920 6966 2069  tomatically if i
+00013b70: 7420 646f 6573 6e27 7420 6578 6973 742e  t doesn't exist.
+00013b80: 0d0a 2020 2020 2020 2020 2020 2020 2e53  ..            .S
+00013b90: 4453 2065 7874 656e 7369 6f6e 2077 696c  DS extension wil
+00013ba0: 6c20 6265 2061 7070 656e 6465 6420 6966  l be appended if
+00013bb0: 2061 2073 696e 676c 6520 6669 6c65 2069   a single file i
+00013bc0: 7320 6265 696e 6720 7361 7665 6420 616e  s being saved an
+00013bd0: 6420 6973 206e 6563 6573 7361 7279 2e0d  d is necessary..
+00013be0: 0a20 2020 2020 2020 206e 616d 6520 3a20  .        name : 
+00013bf0: 7374 722c 206f 7074 696f 6e61 6c0d 0a20  str, optional.. 
+00013c00: 2020 2020 2020 2020 2020 204e 616d 6520             Name 
+00013c10: 666f 7220 7468 6520 726f 6f74 2073 7472  for the root str
+00013c20: 7563 7475 7265 2069 6620 6974 2773 2062  ucture if it's b
+00013c30: 6569 6e67 2061 7070 656e 6465 6420 746f  eing appended to
+00013c40: 2061 6e20 6578 6973 7469 6e67 2073 7472   an existing str
+00013c50: 7563 7427 7320 6469 7265 6374 6f72 792e  uct's directory.
+00013c60: 0d0a 2020 2020 2020 2020 2020 2020 5468  ..            Th
+00013c70: 6520 6578 6973 7469 6e67 205f 726f 6f74  e existing _root
+00013c80: 2e73 6473 2064 6f65 7320 6e6f 7420 6765  .sds does not ge
+00013c90: 7420 6f76 6572 7772 6974 7465 6e2c 2061  t overwritten, a
+00013ca0: 6e64 2073 7472 7563 7473 2063 616e 2062  nd structs can b
+00013cb0: 6520 636f 6d62 696e 6564 2077 6974 686f  e combined witho
+00013cc0: 7574 2061 2066 756c 6c20 6c6f 6164 2e0d  ut a full load..
+00013cd0: 0a20 2020 2020 2020 2073 6861 7265 203a  .        share :
+00013ce0: 2073 7472 2c20 6f70 7469 6f6e 616c 0d0a   str, optional..
+00013cf0: 2020 2020 2020 2020 6f76 6572 7772 6974          overwrit
+00013d00: 6520 3a20 626f 6f6c 2c20 6f70 7469 6f6e  e : bool, option
+00013d10: 616c 2c20 6465 6661 756c 7420 5472 7565  al, default True
+00013d20: 0d0a 2020 2020 2020 2020 2020 2020 4966  ..            If
+00013d30: 2054 7275 652c 2075 7365 7220 7769 6c6c   True, user will
+00013d40: 206e 6f74 2062 6520 7072 6f6d 7074 6564   not be prompted
+00013d50: 206f 6e20 7768 6574 6865 7220 6f72 206e   on whether or n
+00013d60: 6f74 2074 6f20 6f76 6572 7772 6974 6520  ot to overwrite 
+00013d70: 6578 6973 7469 6e67 202e 5344 5320 6669  existing .SDS fi
+00013d80: 6c65 732e 204f 7468 6572 7769 7365 2c0d  les. Otherwise,.
+00013d90: 0a20 2020 2020 2020 2020 2020 2070 726f  .            pro
+00013da0: 6d70 7420 7769 6c6c 2061 7070 6561 7220  mpt will appear 
+00013db0: 6966 2064 6972 6563 746f 7279 2065 7869  if directory exi
+00013dc0: 7374 732e 0d0a 2020 2020 2020 2020 636f  sts...        co
+00013dd0: 6d70 7265 7373 203a 2062 6f6f 6c2c 206f  mpress : bool, o
+00013de0: 7074 696f 6e61 6c2c 2064 6566 6175 6c74  ptional, default
+00013df0: 2054 7275 650d 0a20 2020 2020 2020 2020   True..         
+00013e00: 2020 2049 6620 5472 7565 2c20 5a53 7461     If True, ZSta
+00013e10: 6e64 6172 6420 636f 6d70 7265 7373 696f  ndard compressio
+00013e20: 6e20 7769 6c6c 2062 6520 7573 6564 2077  n will be used w
+00013e30: 6865 6e20 7772 6974 696e 6720 746f 2053  hen writing to S
+00013e40: 4453 2c20 6f74 6865 7277 6973 652c 206e  DS, otherwise, n
+00013e50: 6f20 636f 6d70 7265 7373 696f 6e0d 0a20  o compression.. 
+00013e60: 2020 2020 2020 2020 2020 2077 696c 6c20             will 
+00013e70: 6265 2075 7365 642e 0d0a 2020 2020 2020  be used...      
+00013e80: 2020 6f6e 6566 696c 6520 3a20 626f 6f6c    onefile : bool
+00013e90: 2c20 6f70 7469 6f6e 616c 2c20 6465 6661  , optional, defa
+00013ea0: 756c 7420 4661 6c73 650d 0a20 2020 2020  ult False..     
+00013eb0: 2020 2020 2020 2049 6620 5472 7565 2077         If True w
+00013ec0: 696c 6c20 636f 6c6c 6170 7365 2061 6c6c  ill collapse all
+00013ed0: 206e 6573 7469 6e67 2053 7472 7563 7473   nesting Structs
+00013ee0: 0d0a 2020 2020 2020 2020 6261 6e64 7369  ..        bandsi
+00013ef0: 7a65 203a 2069 6e74 2c20 6f70 7469 6f6e  ze : int, option
+00013f00: 616c 2c20 6465 6661 756c 7420 4e6f 6e65  al, default None
+00013f10: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00013f20: 2020 2020 2020 2073 6176 655f 7364 7328         save_sds(
+00013f30: 0d0a 2020 2020 2020 2020 2020 2020 7061  ..            pa
+00013f40: 7468 2c0d 0a20 2020 2020 2020 2020 2020  th,..           
+00013f50: 2073 656c 662c 0d0a 2020 2020 2020 2020   self,..        
+00013f60: 2020 2020 7368 6172 653d 7368 6172 652c      share=share,
+00013f70: 0d0a 2020 2020 2020 2020 2020 2020 636f  ..            co
+00013f80: 6d70 7265 7373 3d63 6f6d 7072 6573 732c  mpress=compress,
+00013f90: 0d0a 2020 2020 2020 2020 2020 2020 6f76  ..            ov
+00013fa0: 6572 7772 6974 653d 6f76 6572 7772 6974  erwrite=overwrit
+00013fb0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00013fc0: 6e61 6d65 3d6e 616d 652c 0d0a 2020 2020  name=name,..    
+00013fd0: 2020 2020 2020 2020 6f6e 6566 696c 653d          onefile=
+00013fe0: 6f6e 6566 696c 652c 0d0a 2020 2020 2020  onefile,..      
+00013ff0: 2020 2020 2020 6261 6e64 7369 7a65 3d62        bandsize=b
+00014000: 616e 6473 697a 652c 0d0a 2020 2020 2020  andsize,..      
+00014010: 2020 290d 0a0d 0a20 2020 2023 202d 2d2d    )....    # ---
+00014020: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00014030: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00014040: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00014050: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
-00014060: 2020 4063 6c61 7373 6d65 7468 6f64 0d0a    @classmethod..
-00014070: 2020 2020 6465 6620 5f73 6572 6961 6c69      def _seriali
-00014080: 7a65 5f69 7465 6d28 636c 732c 2069 7465  ze_item(cls, ite
-00014090: 6d2c 2069 7465 6d6e 616d 6529 3a0d 0a20  m, itemname):.. 
-000140a0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-000140b0: 2020 2020 7265 7475 726e 2061 2064 6963      return a dic
-000140c0: 7420 6f66 207b 6e61 6d65 3a20 6172 7261  t of {name: arra
-000140d0: 797d 0d0a 2020 2020 2020 2020 6120 6d61  y}..        a ma
-000140e0: 7463 6869 6e67 206c 6973 7420 6f66 2069  tching list of i
-000140f0: 6e74 7320 7768 6963 6820 6172 6520 7468  nts which are th
-00014100: 6520 6172 7261 7966 6c61 6773 0d0a 2020  e arrayflags..  
-00014110: 2020 2020 2020 6120 6d65 7461 7374 7269        a metastri
-00014120: 6e67 2069 6620 6974 2065 7869 7374 730d  ng if it exists.
-00014130: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00014140: 2020 2020 2020 6974 656d 6469 6374 203d        itemdict =
-00014150: 207b 7d0d 0a20 2020 2020 2020 2069 7465   {}..        ite
-00014160: 6d66 6c61 6773 203d 205b 5d0d 0a20 2020  mflags = []..   
-00014170: 2020 2020 206d 6574 6173 7472 696e 6720       metastring 
-00014180: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-00014190: 2320 6172 7261 7973 202f 2061 7272 6179  # arrays / array
-000141a0: 2073 7562 6c63 6c61 7373 6573 0d0a 2020   sublclasses..  
-000141b0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-000141c0: 6e63 6528 6974 656d 2c20 6e70 2e6e 6461  nce(item, np.nda
-000141d0: 7272 6179 293a 0d0a 0d0a 2020 2020 2020  rray):....      
-000141e0: 2020 2020 2020 2320 6765 7420 6172 7261        # get arra
-000141f0: 7973 2c20 666c 6167 732c 206d 6574 6120  ys, flags, meta 
-00014200: 6672 6f6d 2061 7272 6179 2073 7562 636c  from array subcl
-00014210: 6173 730d 0a20 2020 2020 2020 2020 2020  ass..           
-00014220: 2069 6620 6861 7361 7474 7228 6974 656d   if hasattr(item
-00014230: 2c20 225f 6275 696c 645f 7364 735f 6d65  , "_build_sds_me
-00014240: 7461 5f64 6174 6122 293a 0d0a 2020 2020  ta_data"):..    
-00014250: 2020 2020 2020 2020 2020 2020 2320 7374              # st
-00014260: 6f72 6520 7468 6520 696e 7374 616e 6365  ore the instance
-00014270: 2061 7272 6179 0d0a 2020 2020 2020 2020   array..        
-00014280: 2020 2020 2020 2020 6974 656d 6469 6374          itemdict
-00014290: 5b69 7465 6d6e 616d 655d 203d 2069 7465  [itemname] = ite
-000142a0: 6d2e 5f66 610d 0a20 2020 2020 2020 2020  m._fa..         
-000142b0: 2020 2020 2020 2069 7465 6d66 6c61 6773         itemflags
-000142c0: 2e61 7070 656e 6428 5344 5346 6c61 672e  .append(SDSFlag.
-000142d0: 4f72 6967 696e 616c 436f 6e74 6169 6e65  OriginalContaine
-000142e0: 7220 2b20 5344 5346 6c61 672e 5374 6163  r + SDSFlag.Stac
-000142f0: 6b61 626c 6520 2b20 5344 5346 6c61 672e  kable + SDSFlag.
-00014300: 4d65 7461 290d 0a0d 0a20 2020 2020 2020  Meta)....       
-00014310: 2020 2020 2020 2020 2069 6d65 7461 2c20           imeta, 
-00014320: 6172 726c 6973 742c 206e 616d 6566 6c61  arrlist, namefla
-00014330: 6774 7570 203d 2069 7465 6d2e 5f62 7569  gtup = item._bui
-00014340: 6c64 5f73 6473 5f6d 6574 615f 6461 7461  ld_sds_meta_data
-00014350: 286e 616d 653d 6974 656d 6e61 6d65 290d  (name=itemname).
-00014360: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00014370: 2020 2023 2072 6574 7572 6e20 7468 6973     # return this
-00014380: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00014390: 2020 6d65 7461 7374 7269 6e67 203d 2069    metastring = i
-000143a0: 6d65 7461 2e73 7472 696e 670d 0a0d 0a20  meta.string.... 
-000143b0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-000143c0: 206e 6f77 2070 6963 6b20 7570 2074 6865   now pick up the
-000143d0: 2072 6573 740d 0a20 2020 2020 2020 2020   rest..         
-000143e0: 2020 2020 2020 2066 6f72 2061 7272 2c20         for arr, 
-000143f0: 7475 7020 696e 207a 6970 2861 7272 6c69  tup in zip(arrli
-00014400: 7374 2c20 6e61 6d65 666c 6167 7475 7029  st, nameflagtup)
-00014410: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00014420: 2020 2020 2020 2069 7465 6d64 6963 745b         itemdict[
-00014430: 7475 705b 305d 2e64 6563 6f64 6528 295d  tup[0].decode()]
-00014440: 203d 2061 7272 0d0a 2020 2020 2020 2020   = arr..        
-00014450: 2020 2020 2020 2020 2020 2020 6974 656d              item
-00014460: 666c 6167 732e 6170 7065 6e64 2874 7570  flags.append(tup
-00014470: 5b31 5d29 0d0a 0d0a 2020 2020 2020 2020  [1])....        
-00014480: 2020 2020 2320 7265 6775 6c61 7220 6172      # regular ar
-00014490: 7261 790d 0a20 2020 2020 2020 2020 2020  ray..           
-000144a0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-000144b0: 2020 2020 2020 2020 2320 6d69 6768 7420          # might 
-000144c0: 6e65 6564 2074 6f20 636f 7079 2073 7472  need to copy str
-000144d0: 6964 6564 2064 6174 610d 0a20 2020 2020  ided data..     
-000144e0: 2020 2020 2020 2020 2020 2069 6620 6974             if it
-000144f0: 656d 2e6e 6469 6d20 3d3d 2031 3a0d 0a20  em.ndim == 1:.. 
-00014500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014510: 2020 2069 6620 6974 656d 2e73 7472 6964     if item.strid
-00014520: 6573 5b30 5d20 213d 2069 7465 6d2e 6974  es[0] != item.it
-00014530: 656d 7369 7a65 3a0d 0a20 2020 2020 2020  emsize:..       
-00014540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014550: 2077 6172 6e69 6e67 732e 7761 726e 2866   warnings.warn(f
-00014560: 2261 7272 6179 206e 616d 6564 207b 6974  "array named {it
-00014570: 656d 6e61 6d65 7d20 6861 6420 6261 6420  emname} had bad 
-00014580: 3164 2073 7472 6964 6573 2229 0d0a 2020  1d strides")..  
-00014590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000145a0: 2020 2020 2020 6974 656d 203d 2069 7465        item = ite
-000145b0: 6d2e 636f 7079 2829 0d0a 0d0a 2020 2020  m.copy()....    
-000145c0: 2020 2020 2020 2020 2020 2020 6974 656d              item
-000145d0: 6469 6374 5b69 7465 6d6e 616d 655d 203d  dict[itemname] =
-000145e0: 2069 7465 6d0d 0a20 2020 2020 2020 2020   item..         
-000145f0: 2020 2020 2020 2069 7465 6d66 6c61 6773         itemflags
-00014600: 2e61 7070 656e 6428 5344 5346 6c61 672e  .append(SDSFlag.
-00014610: 4f72 6967 696e 616c 436f 6e74 6169 6e65  OriginalContaine
-00014620: 7220 2b20 5344 5346 6c61 672e 5374 6163  r + SDSFlag.Stac
-00014630: 6b61 626c 6529 0d0a 0d0a 2020 2020 2020  kable)....      
-00014640: 2020 2320 7363 616c 6172 730d 0a20 2020    # scalars..   
-00014650: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00014660: 2020 2020 2020 2020 6974 656d 203d 206e          item = n
-00014670: 702e 6173 6172 7261 7928 5b69 7465 6d5d  p.asarray([item]
-00014680: 290d 0a20 2020 2020 2020 2020 2020 2023  )..            #
-00014690: 2069 6620 7363 616c 6172 2063 7265 6174   if scalar creat
-000146a0: 6564 2061 6e20 6f62 6a65 6374 2061 7272  ed an object arr
-000146b0: 6179 2c20 666c 6970 2074 6f20 7374 7269  ay, flip to stri
-000146c0: 6e67 2061 6e64 2077 6172 6e0d 0a20 2020  ng and warn..   
-000146d0: 2020 2020 2020 2020 2069 6620 6974 656d           if item
-000146e0: 2e64 7479 7065 2e63 6861 7220 3d3d 2022  .dtype.char == "
-000146f0: 4f22 3a0d 0a20 2020 2020 2020 2020 2020  O":..           
-00014700: 2020 2020 2077 6172 6e69 6e67 732e 7761       warnings.wa
-00014710: 726e 2866 2249 7465 6d20 7b69 7465 6d5b  rn(f"Item {item[
-00014720: 305d 7d20 7761 7320 6e6f 7420 6120 7375  0]} was not a su
-00014730: 7070 6f72 7465 6420 7363 616c 6172 2074  pported scalar t
-00014740: 7970 652e 2053 6176 696e 6720 6173 2062  ype. Saving as b
-00014750: 7974 6573 7472 696e 672e 2229 0d0a 2020  ytestring.")..  
-00014760: 2020 2020 2020 2020 2020 2020 2020 6974                it
-00014770: 656d 203d 2069 7465 6d2e 6173 7479 7065  em = item.astype
-00014780: 2822 5322 290d 0a20 2020 2020 2020 2020  ("S")..         
-00014790: 2020 2069 7465 6d64 6963 745b 6974 656d     itemdict[item
-000147a0: 6e61 6d65 5d20 3d20 6974 656d 0d0a 2020  name] = item..  
-000147b0: 2020 2020 2020 2020 2020 6974 656d 666c            itemfl
-000147c0: 6167 732e 6170 7065 6e64 2853 4453 466c  ags.append(SDSFl
-000147d0: 6167 2e53 6361 6c61 7220 2b20 5344 5346  ag.Scalar + SDSF
-000147e0: 6c61 672e 4f72 6967 696e 616c 436f 6e74  lag.OriginalCont
-000147f0: 6169 6e65 7229 0d0a 0d0a 2020 2020 2020  ainer)....      
-00014800: 2020 7265 7475 726e 2069 7465 6d64 6963    return itemdic
-00014810: 742c 2069 7465 6d66 6c61 6773 2c20 6d65  t, itemflags, me
-00014820: 7461 7374 7269 6e67 0d0a 0d0a 2020 2020  tastring....    
-00014830: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+00014050: 2d2d 2d2d 0d0a 2020 2020 4063 6c61 7373  ----..    @class
+00014060: 6d65 7468 6f64 0d0a 2020 2020 6465 6620  method..    def 
+00014070: 5f73 6572 6961 6c69 7a65 5f69 7465 6d28  _serialize_item(
+00014080: 636c 732c 2069 7465 6d2c 2069 7465 6d6e  cls, item, itemn
+00014090: 616d 6529 3a0d 0a20 2020 2020 2020 2022  ame):..        "
+000140a0: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
+000140b0: 726e 2061 2064 6963 7420 6f66 207b 6e61  rn a dict of {na
+000140c0: 6d65 3a20 6172 7261 797d 0d0a 2020 2020  me: array}..    
+000140d0: 2020 2020 6120 6d61 7463 6869 6e67 206c      a matching l
+000140e0: 6973 7420 6f66 2069 6e74 7320 7768 6963  ist of ints whic
+000140f0: 6820 6172 6520 7468 6520 6172 7261 7966  h are the arrayf
+00014100: 6c61 6773 0d0a 2020 2020 2020 2020 6120  lags..        a 
+00014110: 6d65 7461 7374 7269 6e67 2069 6620 6974  metastring if it
+00014120: 2065 7869 7374 730d 0a20 2020 2020 2020   exists..       
+00014130: 2022 2222 0d0a 2020 2020 2020 2020 6974   """..        it
+00014140: 656d 6469 6374 203d 207b 7d0d 0a20 2020  emdict = {}..   
+00014150: 2020 2020 2069 7465 6d66 6c61 6773 203d       itemflags =
+00014160: 205b 5d0d 0a20 2020 2020 2020 206d 6574   []..        met
+00014170: 6173 7472 696e 6720 3d20 4e6f 6e65 0d0a  astring = None..
+00014180: 2020 2020 2020 2020 2320 6172 7261 7973          # arrays
+00014190: 202f 2061 7272 6179 2073 7562 6c63 6c61   / array sublcla
+000141a0: 7373 6573 0d0a 2020 2020 2020 2020 6966  sses..        if
+000141b0: 2069 7369 6e73 7461 6e63 6528 6974 656d   isinstance(item
+000141c0: 2c20 6e70 2e6e 6461 7272 6179 293a 0d0a  , np.ndarray):..
+000141d0: 2020 2020 2020 2020 2020 2020 2320 6765              # ge
+000141e0: 7420 6172 7261 7973 2c20 666c 6167 732c  t arrays, flags,
+000141f0: 206d 6574 6120 6672 6f6d 2061 7272 6179   meta from array
+00014200: 2073 7562 636c 6173 730d 0a20 2020 2020   subclass..     
+00014210: 2020 2020 2020 2069 6620 6861 7361 7474         if hasatt
+00014220: 7228 6974 656d 2c20 225f 6275 696c 645f  r(item, "_build_
+00014230: 7364 735f 6d65 7461 5f64 6174 6122 293a  sds_meta_data"):
+00014240: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00014250: 2020 2320 7374 6f72 6520 7468 6520 696e    # store the in
+00014260: 7374 616e 6365 2061 7272 6179 0d0a 2020  stance array..  
+00014270: 2020 2020 2020 2020 2020 2020 2020 6974                it
+00014280: 656d 6469 6374 5b69 7465 6d6e 616d 655d  emdict[itemname]
+00014290: 203d 2069 7465 6d2e 5f66 610d 0a20 2020   = item._fa..   
+000142a0: 2020 2020 2020 2020 2020 2020 2069 7465               ite
+000142b0: 6d66 6c61 6773 2e61 7070 656e 6428 5344  mflags.append(SD
+000142c0: 5346 6c61 672e 4f72 6967 696e 616c 436f  SFlag.OriginalCo
+000142d0: 6e74 6169 6e65 7220 2b20 5344 5346 6c61  ntainer + SDSFla
+000142e0: 672e 5374 6163 6b61 626c 6520 2b20 5344  g.Stackable + SD
+000142f0: 5346 6c61 672e 4d65 7461 290d 0a0d 0a20  SFlag.Meta).... 
+00014300: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00014310: 6d65 7461 2c20 6172 726c 6973 742c 206e  meta, arrlist, n
+00014320: 616d 6566 6c61 6774 7570 203d 2069 7465  ameflagtup = ite
+00014330: 6d2e 5f62 7569 6c64 5f73 6473 5f6d 6574  m._build_sds_met
+00014340: 615f 6461 7461 286e 616d 653d 6974 656d  a_data(name=item
+00014350: 6e61 6d65 290d 0a0d 0a20 2020 2020 2020  name)....       
+00014360: 2020 2020 2020 2020 2023 2072 6574 7572           # retur
+00014370: 6e20 7468 6973 0d0a 2020 2020 2020 2020  n this..        
+00014380: 2020 2020 2020 2020 6d65 7461 7374 7269          metastri
+00014390: 6e67 203d 2069 6d65 7461 2e73 7472 696e  ng = imeta.strin
+000143a0: 670d 0a0d 0a20 2020 2020 2020 2020 2020  g....           
+000143b0: 2020 2020 2023 206e 6f77 2070 6963 6b20       # now pick 
+000143c0: 7570 2074 6865 2072 6573 740d 0a20 2020  up the rest..   
+000143d0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+000143e0: 2061 7272 2c20 7475 7020 696e 207a 6970   arr, tup in zip
+000143f0: 2861 7272 6c69 7374 2c20 6e61 6d65 666c  (arrlist, namefl
+00014400: 6167 7475 7029 3a0d 0a20 2020 2020 2020  agtup):..       
+00014410: 2020 2020 2020 2020 2020 2020 2069 7465               ite
+00014420: 6d64 6963 745b 7475 705b 305d 2e64 6563  mdict[tup[0].dec
+00014430: 6f64 6528 295d 203d 2061 7272 0d0a 2020  ode()] = arr..  
+00014440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014450: 2020 6974 656d 666c 6167 732e 6170 7065    itemflags.appe
+00014460: 6e64 2874 7570 5b31 5d29 0d0a 0d0a 2020  nd(tup[1])....  
+00014470: 2020 2020 2020 2020 2020 2320 7265 6775            # regu
+00014480: 6c61 7220 6172 7261 790d 0a20 2020 2020  lar array..     
+00014490: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+000144a0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+000144b0: 6d69 6768 7420 6e65 6564 2074 6f20 636f  might need to co
+000144c0: 7079 2073 7472 6964 6564 2064 6174 610d  py strided data.
+000144d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000144e0: 2069 6620 6974 656d 2e6e 6469 6d20 3d3d   if item.ndim ==
+000144f0: 2031 3a0d 0a20 2020 2020 2020 2020 2020   1:..           
+00014500: 2020 2020 2020 2020 2069 6620 6974 656d           if item
+00014510: 2e73 7472 6964 6573 5b30 5d20 213d 2069  .strides[0] != i
+00014520: 7465 6d2e 6974 656d 7369 7a65 3a0d 0a20  tem.itemsize:.. 
+00014530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014540: 2020 2020 2020 2077 6172 6e69 6e67 732e         warnings.
+00014550: 7761 726e 2866 2261 7272 6179 206e 616d  warn(f"array nam
+00014560: 6564 207b 6974 656d 6e61 6d65 7d20 6861  ed {itemname} ha
+00014570: 6420 6261 6420 3164 2073 7472 6964 6573  d bad 1d strides
+00014580: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+00014590: 2020 2020 2020 2020 2020 2020 6974 656d              item
+000145a0: 203d 2069 7465 6d2e 636f 7079 2829 0d0a   = item.copy()..
+000145b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000145c0: 2020 6974 656d 6469 6374 5b69 7465 6d6e    itemdict[itemn
+000145d0: 616d 655d 203d 2069 7465 6d0d 0a20 2020  ame] = item..   
+000145e0: 2020 2020 2020 2020 2020 2020 2069 7465               ite
+000145f0: 6d66 6c61 6773 2e61 7070 656e 6428 5344  mflags.append(SD
+00014600: 5346 6c61 672e 4f72 6967 696e 616c 436f  SFlag.OriginalCo
+00014610: 6e74 6169 6e65 7220 2b20 5344 5346 6c61  ntainer + SDSFla
+00014620: 672e 5374 6163 6b61 626c 6529 0d0a 0d0a  g.Stackable)....
+00014630: 2020 2020 2020 2020 2320 7363 616c 6172          # scalar
+00014640: 730d 0a20 2020 2020 2020 2065 6c73 653a  s..        else:
+00014650: 0d0a 2020 2020 2020 2020 2020 2020 6974  ..            it
+00014660: 656d 203d 206e 702e 6173 6172 7261 7928  em = np.asarray(
+00014670: 5b69 7465 6d5d 290d 0a20 2020 2020 2020  [item])..       
+00014680: 2020 2020 2023 2069 6620 7363 616c 6172       # if scalar
+00014690: 2063 7265 6174 6564 2061 6e20 6f62 6a65   created an obje
+000146a0: 6374 2061 7272 6179 2c20 666c 6970 2074  ct array, flip t
+000146b0: 6f20 7374 7269 6e67 2061 6e64 2077 6172  o string and war
+000146c0: 6e0d 0a20 2020 2020 2020 2020 2020 2069  n..            i
+000146d0: 6620 6974 656d 2e64 7479 7065 2e63 6861  f item.dtype.cha
+000146e0: 7220 3d3d 2022 4f22 3a0d 0a20 2020 2020  r == "O":..     
+000146f0: 2020 2020 2020 2020 2020 2077 6172 6e69             warni
+00014700: 6e67 732e 7761 726e 2866 2249 7465 6d20  ngs.warn(f"Item 
+00014710: 7b69 7465 6d5b 305d 7d20 7761 7320 6e6f  {item[0]} was no
+00014720: 7420 6120 7375 7070 6f72 7465 6420 7363  t a supported sc
+00014730: 616c 6172 2074 7970 652e 2053 6176 696e  alar type. Savin
+00014740: 6720 6173 2062 7974 6573 7472 696e 672e  g as bytestring.
+00014750: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+00014760: 2020 2020 6974 656d 203d 2069 7465 6d2e      item = item.
+00014770: 6173 7479 7065 2822 5322 290d 0a20 2020  astype("S")..   
+00014780: 2020 2020 2020 2020 2069 7465 6d64 6963           itemdic
+00014790: 745b 6974 656d 6e61 6d65 5d20 3d20 6974  t[itemname] = it
+000147a0: 656d 0d0a 2020 2020 2020 2020 2020 2020  em..            
+000147b0: 6974 656d 666c 6167 732e 6170 7065 6e64  itemflags.append
+000147c0: 2853 4453 466c 6167 2e53 6361 6c61 7220  (SDSFlag.Scalar 
+000147d0: 2b20 5344 5346 6c61 672e 4f72 6967 696e  + SDSFlag.Origin
+000147e0: 616c 436f 6e74 6169 6e65 7229 0d0a 0d0a  alContainer)....
+000147f0: 2020 2020 2020 2020 7265 7475 726e 2069          return i
+00014800: 7465 6d64 6963 742c 2069 7465 6d66 6c61  temdict, itemfla
+00014810: 6773 2c20 6d65 7461 7374 7269 6e67 0d0a  gs, metastring..
+00014820: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+00014830: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00014840: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00014850: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00014860: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
-00014870: 6566 2066 6c61 7474 656e 2873 656c 662c  ef flatten(self,
-00014880: 2073 6570 3d22 2f22 2c20 6c65 7665 6c3d   sep="/", level=
-00014890: 3029 3a0d 0a20 2020 2020 2020 2022 2222  0):..        """
-000148a0: 0d0a 2020 2020 2020 2020 466c 6174 7465  ..        Flatte
-000148b0: 6e73 206f 7220 636f 6c6c 6170 7365 7320  ns or collapses 
-000148c0: 6120 5374 7275 6374 2c20 7265 6375 7273  a Struct, recurs
-000148d0: 6976 656c 7920 6361 6c6c 6564 0d0a 0d0a  ively called....
-000148e0: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
-000148f0: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
-00014900: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00014910: 7365 703d 272f 2720 2020 7468 6520 7365  sep='/'   the se
-00014920: 7061 7261 7469 6e67 2073 7472 696e 6720  parating string 
-00014930: 746f 2075 7365 0d0a 2020 2020 2020 2020  to use..        
-00014940: 2020 2020 506c 6561 7365 206e 6f74 6520      Please note 
-00014950: 7468 6174 2073 6f6d 6520 6368 6172 7320  that some chars 
-00014960: 6172 6520 6e6f 7420 616c 6c6f 7765 6420  are not allowed 
-00014970: 616e 6420 7769 6c6c 2062 6520 7265 706c  and will be repl
-00014980: 6163 6564 2077 6974 6820 5f2e 0d0a 0d0a  aced with _.....
-00014990: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
-000149a0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-000149b0: 0d0a 2020 2020 2020 2020 4e65 7720 5374  ..        New St
-000149c0: 7275 6374 2077 6974 6820 636f 6c6c 6170  ruct with collap
-000149d0: 7365 6420 6e61 6d65 7320 2873 6570 6172  sed names (separ
-000149e0: 6174 6564 2062 7920 7370 6563 6966 6965  ated by specifie
-000149f0: 6420 6368 6172 2920 7768 6963 6820 6361  d char) which ca
-00014a00: 6e20 7468 656e 2062 6520 7361 7665 640d  n then be saved.
-00014a10: 0a0d 0a20 2020 2020 2020 204e 6f74 650d  ...        Note.
-00014a20: 0a20 2020 2020 2020 202d 2d2d 2d0d 0a20  .        ----.. 
-00014a30: 2020 2020 2020 205f 7365 7020 6973 2073         _sep is s
-00014a40: 746f 7265 6420 696e 2074 6865 205f 5f64  tored in the __d
-00014a50: 6963 745f 5f20 746f 2068 656c 7020 7769  ict__ to help wi
-00014a60: 7468 2075 6e64 6f20 6f72 2073 6176 696e  th undo or savin
-00014a70: 6720 746f 2066 696c 650d 0a20 2020 2020  g to file..     
-00014a80: 2020 2061 7272 6179 666c 6167 732c 206d     arrayflags, m
-00014a90: 6574 6173 7472 696e 6720 6172 6520 6e6f  etastring are no
-00014aa0: 7720 6578 706f 7365 640d 0a0d 0a20 2020  w exposed....   
-00014ab0: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
-00014ac0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-00014ad0: 0a20 2020 2020 2020 2066 6c61 7474 656e  .        flatten
-00014ae0: 5f75 6e64 6f0d 0a20 2020 2020 2020 2022  _undo..        "
-00014af0: 2222 0d0a 0d0a 2020 2020 2020 2020 6465  ""....        de
-00014b00: 6620 6d61 6b65 5f6e 6573 7465 645f 6d65  f make_nested_me
-00014b10: 7461 2876 2c20 6e61 6d65 2c20 6d65 7461  ta(v, name, meta
-00014b20: 7374 7269 6e67 6469 6374 5f6f 7468 6572  stringdict_other
-00014b30: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00014b40: 6d65 7461 6a73 6f6e 203d 207b 7d0d 0a20  metajson = {}.. 
-00014b50: 2020 2020 2020 2020 2020 2023 206e 6573             # nes
-00014b60: 7465 6420 6974 656d 7320 6861 7665 2074  ted items have t
-00014b70: 6865 6972 206f 776e 206d 6574 6173 7472  heir own metastr
-00014b80: 696e 670d 0a20 2020 2020 2020 2020 2020  ing..           
-00014b90: 206d 6574 6173 7472 696e 6720 3d20 762e   metastring = v.
-00014ba0: 5f62 7569 6c64 5f73 6473 5f6d 6574 615f  _build_sds_meta_
-00014bb0: 6461 7461 286e 616d 653d 6e61 6d65 2c20  data(name=name, 
-00014bc0: 6e65 7374 696e 673d 4661 6c73 6529 5b30  nesting=False)[0
-00014bd0: 5d2e 7374 7269 6e67 0d0a 2020 2020 2020  ].string..      
-00014be0: 2020 2020 2020 6d65 7461 6a73 6f6e 5b22        metajson["
-00014bf0: 5f72 6f6f 7422 5d20 3d20 6d65 7461 7374  _root"] = metast
-00014c00: 7269 6e67 0d0a 2020 2020 2020 2020 2020  ring..          
-00014c10: 2020 666f 7220 6d65 7461 6e61 6d65 2c20    for metaname, 
-00014c20: 6d65 7461 7661 6c75 6520 696e 206d 6574  metavalue in met
-00014c30: 6173 7472 696e 6764 6963 745f 6f74 6865  astringdict_othe
-00014c40: 722e 6974 656d 7328 293a 0d0a 2020 2020  r.items():..    
-00014c50: 2020 2020 2020 2020 2020 2020 6d65 7461              meta
-00014c60: 6a73 6f6e 5b6d 6574 616e 616d 655d 203d  json[metaname] =
-00014c70: 206d 6574 6176 616c 7565 0d0a 2020 2020   metavalue..    
-00014c80: 2020 2020 2020 2020 7265 7475 726e 206e          return n
-00014c90: 702e 6173 616e 7961 7272 6179 285b 6a73  p.asanyarray([js
-00014ca0: 6f6e 2e64 756d 7073 286d 6574 616a 736f  on.dumps(metajso
-00014cb0: 6e29 5d2c 2064 7479 7065 3d22 5322 290d  n)], dtype="S").
-00014cc0: 0a0d 0a20 2020 2020 2020 2066 6c61 7474  ...        flatt
-00014cd0: 656e 6564 203d 207b 7d0d 0a20 2020 2020  ened = {}..     
-00014ce0: 2020 206d 6574 6173 7472 696e 6764 6963     metastringdic
-00014cf0: 7420 3d20 7b7d 0d0a 2020 2020 2020 2020  t = {}..        
-00014d00: 6172 7261 7966 6c61 6773 203d 205b 5d0d  arrayflags = [].
-00014d10: 0a0d 0a20 2020 2020 2020 2066 6f72 206e  ...        for n
-00014d20: 616d 652c 2076 2069 6e20 7365 6c66 2e69  ame, v in self.i
-00014d30: 7465 6d73 2829 3a0d 0a20 2020 2020 2020  tems():..       
-00014d40: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00014d50: 6365 2876 2c20 5374 7275 6374 293a 0d0a  ce(v, Struct):..
-00014d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014d70: 2320 6669 7273 7420 6164 6420 7468 6520  # first add the 
-00014d80: 6e65 7374 6564 2063 6f6e 7461 696e 6572  nested container
-00014d90: 2028 6461 7461 7365 7420 6f72 2073 7472   (dataset or str
-00014da0: 7563 7429 0d0a 2020 2020 2020 2020 2020  uct)..          
-00014db0: 2020 2020 2020 2320 6e65 7374 6564 2069        # nested i
-00014dc0: 7465 6d20 656e 6473 2069 6e20 736c 6173  tem ends in slas
-00014dd0: 6820 2873 6570 290d 0a20 2020 2020 2020  h (sep)..       
-00014de0: 2020 2020 2020 2020 2023 2061 6c77 6179           # alway
-00014df0: 7320 6372 6561 7465 2074 776f 2069 6e20  s create two in 
-00014e00: 6120 726f 772c 2073 6563 6f6e 6420 6f6e  a row, second on
-00014e10: 6520 666f 7220 6d65 7461 0d0a 2020 2020  e for meta..    
-00014e20: 2020 2020 2020 2020 2020 2020 7072 6566              pref
-00014e30: 6978 203d 206e 616d 6520 2b20 7365 700d  ix = name + sep.
-00014e40: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00014e50: 2020 2023 2070 6c61 6365 2068 6f6c 6465     # place holde
-00014e60: 7220 666f 7220 6f72 6465 7265 6420 6469  r for ordered di
-00014e70: 6374 0d0a 2020 2020 2020 2020 2020 2020  ct..            
-00014e80: 2020 2020 666c 6174 7465 6e65 645b 7072      flattened[pr
-00014e90: 6566 6978 5d20 3d20 4e6f 6e65 0d0a 2020  efix] = None..  
-00014ea0: 2020 2020 2020 2020 2020 2020 2020 6172                ar
-00014eb0: 7261 7966 6c61 6773 2e61 7070 656e 6428  rayflags.append(
-00014ec0: 3020 2b20 5344 5346 6c61 672e 4e65 7374  0 + SDSFlag.Nest
-00014ed0: 6564 290d 0a0d 0a20 2020 2020 2020 2020  ed)....         
-00014ee0: 2020 2020 2020 2066 6c61 7474 656e 6564         flattened
-00014ef0: 5f6f 7468 6572 2c20 6172 7261 7966 6c61  _other, arrayfla
-00014f00: 6773 5f6f 7468 6572 2c20 6d65 7461 7374  gs_other, metast
-00014f10: 7269 6e67 6469 6374 5f6f 7468 6572 203d  ringdict_other =
-00014f20: 2076 2e66 6c61 7474 656e 2873 6570 2c20   v.flatten(sep, 
-00014f30: 6c65 7665 6c20 2b20 3129 0d0a 0d0a 2020  level + 1)....  
-00014f40: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00014f50: 6669 6e61 6c6c 7920 7075 7420 696e 2074  finally put in t
-00014f60: 6865 206a 736f 6e0d 0a20 2020 2020 2020  he json..       
-00014f70: 2020 2020 2020 2020 2066 6c61 7474 656e           flatten
-00014f80: 6564 5b70 7265 6669 785d 203d 206d 616b  ed[prefix] = mak
-00014f90: 655f 6e65 7374 6564 5f6d 6574 6128 762c  e_nested_meta(v,
-00014fa0: 206e 616d 652c 206d 6574 6173 7472 696e   name, metastrin
-00014fb0: 6764 6963 745f 6f74 6865 7229 0d0a 0d0a  gdict_other)....
-00014fc0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00014fd0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00014fe0: 2020 2070 7265 6669 7820 3d20 2222 0d0a     prefix = ""..
-00014ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015000: 666c 6174 7465 6e65 645f 6f74 6865 722c  flattened_other,
-00015010: 2061 7272 6179 666c 6167 735f 6f74 6865   arrayflags_othe
-00015020: 722c 206d 6574 6173 7472 696e 6720 3d20  r, metastring = 
-00015030: 5374 7275 6374 2e5f 7365 7269 616c 697a  Struct._serializ
-00015040: 655f 6974 656d 2876 2c20 6e61 6d65 290d  e_item(v, name).
-00015050: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015060: 2069 6620 6d65 7461 7374 7269 6e67 3a0d   if metastring:.
-00015070: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015080: 2020 2020 206d 6574 6173 7472 696e 6764       metastringd
-00015090: 6963 745b 6e61 6d65 5d20 3d20 6d65 7461  ict[name] = meta
-000150a0: 7374 7269 6e67 0d0a 0d0a 2020 2020 2020  string....      
-000150b0: 2020 2020 2020 666f 7220 6b2c 2076 2069        for k, v i
-000150c0: 6e20 666c 6174 7465 6e65 645f 6f74 6865  n flattened_othe
-000150d0: 722e 6974 656d 7328 293a 0d0a 2020 2020  r.items():..    
-000150e0: 2020 2020 2020 2020 2020 2020 666c 6174              flat
-000150f0: 7465 6e65 645b 7072 6566 6978 202b 206b  tened[prefix + k
-00015100: 5d20 3d20 760d 0a0d 0a20 2020 2020 2020  ] = v....       
-00015110: 2020 2020 2061 7272 6179 666c 6167 7320       arrayflags 
-00015120: 2b3d 2061 7272 6179 666c 6167 735f 6f74  += arrayflags_ot
-00015130: 6865 720d 0a0d 0a20 2020 2020 2020 2069  her....        i
-00015140: 6620 6c65 7665 6c20 3d3d 2030 3a0d 0a20  f level == 0:.. 
-00015150: 2020 2020 2020 2020 2020 2073 7420 3d20             st = 
-00015160: 5374 7275 6374 2866 6c61 7474 656e 6564  Struct(flattened
-00015170: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-00015180: 2023 2072 656d 656d 6265 7220 696e 666f   # remember info
-00015190: 2074 6f20 756e 646f 2074 6865 2066 6c61   to undo the fla
-000151a0: 7474 656e 696e 670d 0a20 2020 2020 2020  ttening..       
-000151b0: 2020 2020 2073 742e 5f73 6570 203d 2073       st._sep = s
-000151c0: 6570 0d0a 2020 2020 2020 2020 2020 2020  ep..            
-000151d0: 7374 2e61 7272 6179 666c 6167 7320 3d20  st.arrayflags = 
-000151e0: 5479 7065 5265 6769 7374 6572 2e46 6173  TypeRegister.Fas
-000151f0: 7441 7272 6179 2861 7272 6179 666c 6167  tArray(arrayflag
-00015200: 7329 0d0a 0d0a 2020 2020 2020 2020 2020  s)....          
-00015210: 2020 2320 7573 6520 6a73 6f6e 2e6c 6f61    # use json.loa
-00015220: 6473 2862 7974 6573 2873 742e 5f6d 6574  ds(bytes(st._met
-00015230: 6173 7472 696e 6729 290d 0a20 2020 2020  astring))..     
-00015240: 2020 2020 2020 2073 742e 6d65 7461 7374         st.metast
-00015250: 7269 6e67 203d 2062 7974 6573 286d 616b  ring = bytes(mak
-00015260: 655f 6e65 7374 6564 5f6d 6574 6128 7365  e_nested_meta(se
-00015270: 6c66 2c20 225f 726f 6f74 222c 206d 6574  lf, "_root", met
-00015280: 6173 7472 696e 6764 6963 7429 290d 0a20  astringdict)).. 
-00015290: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000152a0: 6e20 7374 0d0a 0d0a 2020 2020 2020 2020  n st....        
-000152b0: 7265 7475 726e 2066 6c61 7474 656e 6564  return flattened
-000152c0: 2c20 6172 7261 7966 6c61 6773 2c20 6d65  , arrayflags, me
-000152d0: 7461 7374 7269 6e67 6469 6374 0d0a 0d0a  tastringdict....
-000152e0: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00014850: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
+00014860: 0a20 2020 2064 6566 2066 6c61 7474 656e  .    def flatten
+00014870: 2873 656c 662c 2073 6570 3d22 2f22 2c20  (self, sep="/", 
+00014880: 6c65 7665 6c3d 3029 3a0d 0a20 2020 2020  level=0):..     
+00014890: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+000148a0: 466c 6174 7465 6e73 206f 7220 636f 6c6c  Flattens or coll
+000148b0: 6170 7365 7320 6120 5374 7275 6374 2c20  apses a Struct, 
+000148c0: 7265 6375 7273 6976 656c 7920 6361 6c6c  recursively call
+000148d0: 6564 0d0a 0d0a 2020 2020 2020 2020 5061  ed....        Pa
+000148e0: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+000148f0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+00014900: 2020 2020 2020 7365 703d 272f 2720 2020        sep='/'   
+00014910: 7468 6520 7365 7061 7261 7469 6e67 2073  the separating s
+00014920: 7472 696e 6720 746f 2075 7365 0d0a 2020  tring to use..  
+00014930: 2020 2020 2020 2020 2020 506c 6561 7365            Please
+00014940: 206e 6f74 6520 7468 6174 2073 6f6d 6520   note that some 
+00014950: 6368 6172 7320 6172 6520 6e6f 7420 616c  chars are not al
+00014960: 6c6f 7765 6420 616e 6420 7769 6c6c 2062  lowed and will b
+00014970: 6520 7265 706c 6163 6564 2077 6974 6820  e replaced with 
+00014980: 5f2e 0d0a 0d0a 2020 2020 2020 2020 5265  _.....        Re
+00014990: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
+000149a0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+000149b0: 4e65 7720 5374 7275 6374 2077 6974 6820  New Struct with 
+000149c0: 636f 6c6c 6170 7365 6420 6e61 6d65 7320  collapsed names 
+000149d0: 2873 6570 6172 6174 6564 2062 7920 7370  (separated by sp
+000149e0: 6563 6966 6965 6420 6368 6172 2920 7768  ecified char) wh
+000149f0: 6963 6820 6361 6e20 7468 656e 2062 6520  ich can then be 
+00014a00: 7361 7665 640d 0a0d 0a20 2020 2020 2020  saved....       
+00014a10: 204e 6f74 650d 0a20 2020 2020 2020 202d   Note..        -
+00014a20: 2d2d 2d0d 0a20 2020 2020 2020 205f 7365  ---..        _se
+00014a30: 7020 6973 2073 746f 7265 6420 696e 2074  p is stored in t
+00014a40: 6865 205f 5f64 6963 745f 5f20 746f 2068  he __dict__ to h
+00014a50: 656c 7020 7769 7468 2075 6e64 6f20 6f72  elp with undo or
+00014a60: 2073 6176 696e 6720 746f 2066 696c 650d   saving to file.
+00014a70: 0a20 2020 2020 2020 2061 7272 6179 666c  .        arrayfl
+00014a80: 6167 732c 206d 6574 6173 7472 696e 6720  ags, metastring 
+00014a90: 6172 6520 6e6f 7720 6578 706f 7365 640d  are now exposed.
+00014aa0: 0a0d 0a20 2020 2020 2020 2053 6565 2041  ...        See A
+00014ab0: 6c73 6f0d 0a20 2020 2020 2020 202d 2d2d  lso..        ---
+00014ac0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2066  -----..        f
+00014ad0: 6c61 7474 656e 5f75 6e64 6f0d 0a20 2020  latten_undo..   
+00014ae0: 2020 2020 2022 2222 0d0a 0d0a 2020 2020       """....    
+00014af0: 2020 2020 6465 6620 6d61 6b65 5f6e 6573      def make_nes
+00014b00: 7465 645f 6d65 7461 2876 2c20 6e61 6d65  ted_meta(v, name
+00014b10: 2c20 6d65 7461 7374 7269 6e67 6469 6374  , metastringdict
+00014b20: 5f6f 7468 6572 293a 0d0a 2020 2020 2020  _other):..      
+00014b30: 2020 2020 2020 6d65 7461 6a73 6f6e 203d        metajson =
+00014b40: 207b 7d0d 0a20 2020 2020 2020 2020 2020   {}..           
+00014b50: 2023 206e 6573 7465 6420 6974 656d 7320   # nested items 
+00014b60: 6861 7665 2074 6865 6972 206f 776e 206d  have their own m
+00014b70: 6574 6173 7472 696e 670d 0a20 2020 2020  etastring..     
+00014b80: 2020 2020 2020 206d 6574 6173 7472 696e         metastrin
+00014b90: 6720 3d20 762e 5f62 7569 6c64 5f73 6473  g = v._build_sds
+00014ba0: 5f6d 6574 615f 6461 7461 286e 616d 653d  _meta_data(name=
+00014bb0: 6e61 6d65 2c20 6e65 7374 696e 673d 4661  name, nesting=Fa
+00014bc0: 6c73 6529 5b30 5d2e 7374 7269 6e67 0d0a  lse)[0].string..
+00014bd0: 2020 2020 2020 2020 2020 2020 6d65 7461              meta
+00014be0: 6a73 6f6e 5b22 5f72 6f6f 7422 5d20 3d20  json["_root"] = 
+00014bf0: 6d65 7461 7374 7269 6e67 0d0a 2020 2020  metastring..    
+00014c00: 2020 2020 2020 2020 666f 7220 6d65 7461          for meta
+00014c10: 6e61 6d65 2c20 6d65 7461 7661 6c75 6520  name, metavalue 
+00014c20: 696e 206d 6574 6173 7472 696e 6764 6963  in metastringdic
+00014c30: 745f 6f74 6865 722e 6974 656d 7328 293a  t_other.items():
+00014c40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00014c50: 2020 6d65 7461 6a73 6f6e 5b6d 6574 616e    metajson[metan
+00014c60: 616d 655d 203d 206d 6574 6176 616c 7565  ame] = metavalue
+00014c70: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+00014c80: 7475 726e 206e 702e 6173 616e 7961 7272  turn np.asanyarr
+00014c90: 6179 285b 6a73 6f6e 2e64 756d 7073 286d  ay([json.dumps(m
+00014ca0: 6574 616a 736f 6e29 5d2c 2064 7479 7065  etajson)], dtype
+00014cb0: 3d22 5322 290d 0a0d 0a20 2020 2020 2020  ="S")....       
+00014cc0: 2066 6c61 7474 656e 6564 203d 207b 7d0d   flattened = {}.
+00014cd0: 0a20 2020 2020 2020 206d 6574 6173 7472  .        metastr
+00014ce0: 696e 6764 6963 7420 3d20 7b7d 0d0a 2020  ingdict = {}..  
+00014cf0: 2020 2020 2020 6172 7261 7966 6c61 6773        arrayflags
+00014d00: 203d 205b 5d0d 0a0d 0a20 2020 2020 2020   = []....       
+00014d10: 2066 6f72 206e 616d 652c 2076 2069 6e20   for name, v in 
+00014d20: 7365 6c66 2e69 7465 6d73 2829 3a0d 0a20  self.items():.. 
+00014d30: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+00014d40: 696e 7374 616e 6365 2876 2c20 5374 7275  instance(v, Stru
+00014d50: 6374 293a 0d0a 2020 2020 2020 2020 2020  ct):..          
+00014d60: 2020 2020 2020 2320 6669 7273 7420 6164        # first ad
+00014d70: 6420 7468 6520 6e65 7374 6564 2063 6f6e  d the nested con
+00014d80: 7461 696e 6572 2028 6461 7461 7365 7420  tainer (dataset 
+00014d90: 6f72 2073 7472 7563 7429 0d0a 2020 2020  or struct)..    
+00014da0: 2020 2020 2020 2020 2020 2020 2320 6e65              # ne
+00014db0: 7374 6564 2069 7465 6d20 656e 6473 2069  sted item ends i
+00014dc0: 6e20 736c 6173 6820 2873 6570 290d 0a20  n slash (sep).. 
+00014dd0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00014de0: 2061 6c77 6179 7320 6372 6561 7465 2074   always create t
+00014df0: 776f 2069 6e20 6120 726f 772c 2073 6563  wo in a row, sec
+00014e00: 6f6e 6420 6f6e 6520 666f 7220 6d65 7461  ond one for meta
+00014e10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00014e20: 2020 7072 6566 6978 203d 206e 616d 6520    prefix = name 
+00014e30: 2b20 7365 700d 0a0d 0a20 2020 2020 2020  + sep....       
+00014e40: 2020 2020 2020 2020 2023 2070 6c61 6365           # place
+00014e50: 2068 6f6c 6465 7220 666f 7220 6f72 6465   holder for orde
+00014e60: 7265 6420 6469 6374 0d0a 2020 2020 2020  red dict..      
+00014e70: 2020 2020 2020 2020 2020 666c 6174 7465            flatte
+00014e80: 6e65 645b 7072 6566 6978 5d20 3d20 4e6f  ned[prefix] = No
+00014e90: 6e65 0d0a 2020 2020 2020 2020 2020 2020  ne..            
+00014ea0: 2020 2020 6172 7261 7966 6c61 6773 2e61      arrayflags.a
+00014eb0: 7070 656e 6428 3020 2b20 5344 5346 6c61  ppend(0 + SDSFla
+00014ec0: 672e 4e65 7374 6564 290d 0a0d 0a20 2020  g.Nested)....   
+00014ed0: 2020 2020 2020 2020 2020 2020 2066 6c61               fla
+00014ee0: 7474 656e 6564 5f6f 7468 6572 2c20 6172  ttened_other, ar
+00014ef0: 7261 7966 6c61 6773 5f6f 7468 6572 2c20  rayflags_other, 
+00014f00: 6d65 7461 7374 7269 6e67 6469 6374 5f6f  metastringdict_o
+00014f10: 7468 6572 203d 2076 2e66 6c61 7474 656e  ther = v.flatten
+00014f20: 2873 6570 2c20 6c65 7665 6c20 2b20 3129  (sep, level + 1)
+00014f30: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00014f40: 2020 2020 2320 6669 6e61 6c6c 7920 7075      # finally pu
+00014f50: 7420 696e 2074 6865 206a 736f 6e0d 0a20  t in the json.. 
+00014f60: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00014f70: 6c61 7474 656e 6564 5b70 7265 6669 785d  lattened[prefix]
+00014f80: 203d 206d 616b 655f 6e65 7374 6564 5f6d   = make_nested_m
+00014f90: 6574 6128 762c 206e 616d 652c 206d 6574  eta(v, name, met
+00014fa0: 6173 7472 696e 6764 6963 745f 6f74 6865  astringdict_othe
+00014fb0: 7229 0d0a 0d0a 2020 2020 2020 2020 2020  r)....          
+00014fc0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00014fd0: 2020 2020 2020 2020 2070 7265 6669 7820           prefix 
+00014fe0: 3d20 2222 0d0a 2020 2020 2020 2020 2020  = ""..          
+00014ff0: 2020 2020 2020 666c 6174 7465 6e65 645f        flattened_
+00015000: 6f74 6865 722c 2061 7272 6179 666c 6167  other, arrayflag
+00015010: 735f 6f74 6865 722c 206d 6574 6173 7472  s_other, metastr
+00015020: 696e 6720 3d20 5374 7275 6374 2e5f 7365  ing = Struct._se
+00015030: 7269 616c 697a 655f 6974 656d 2876 2c20  rialize_item(v, 
+00015040: 6e61 6d65 290d 0a20 2020 2020 2020 2020  name)..         
+00015050: 2020 2020 2020 2069 6620 6d65 7461 7374         if metast
+00015060: 7269 6e67 3a0d 0a20 2020 2020 2020 2020  ring:..         
+00015070: 2020 2020 2020 2020 2020 206d 6574 6173             metas
+00015080: 7472 696e 6764 6963 745b 6e61 6d65 5d20  tringdict[name] 
+00015090: 3d20 6d65 7461 7374 7269 6e67 0d0a 0d0a  = metastring....
+000150a0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+000150b0: 6b2c 2076 2069 6e20 666c 6174 7465 6e65  k, v in flattene
+000150c0: 645f 6f74 6865 722e 6974 656d 7328 293a  d_other.items():
+000150d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000150e0: 2020 666c 6174 7465 6e65 645b 7072 6566    flattened[pref
+000150f0: 6978 202b 206b 5d20 3d20 760d 0a0d 0a20  ix + k] = v.... 
+00015100: 2020 2020 2020 2020 2020 2061 7272 6179             array
+00015110: 666c 6167 7320 2b3d 2061 7272 6179 666c  flags += arrayfl
+00015120: 6167 735f 6f74 6865 720d 0a0d 0a20 2020  ags_other....   
+00015130: 2020 2020 2069 6620 6c65 7665 6c20 3d3d       if level ==
+00015140: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
+00015150: 2073 7420 3d20 5374 7275 6374 2866 6c61   st = Struct(fla
+00015160: 7474 656e 6564 290d 0a0d 0a20 2020 2020  ttened)....     
+00015170: 2020 2020 2020 2023 2072 656d 656d 6265         # remembe
+00015180: 7220 696e 666f 2074 6f20 756e 646f 2074  r info to undo t
+00015190: 6865 2066 6c61 7474 656e 696e 670d 0a20  he flattening.. 
+000151a0: 2020 2020 2020 2020 2020 2073 742e 5f73             st._s
+000151b0: 6570 203d 2073 6570 0d0a 2020 2020 2020  ep = sep..      
+000151c0: 2020 2020 2020 7374 2e61 7272 6179 666c        st.arrayfl
+000151d0: 6167 7320 3d20 5479 7065 5265 6769 7374  ags = TypeRegist
+000151e0: 6572 2e46 6173 7441 7272 6179 2861 7272  er.FastArray(arr
+000151f0: 6179 666c 6167 7329 0d0a 0d0a 2020 2020  ayflags)....    
+00015200: 2020 2020 2020 2020 2320 7573 6520 6a73          # use js
+00015210: 6f6e 2e6c 6f61 6473 2862 7974 6573 2873  on.loads(bytes(s
+00015220: 742e 5f6d 6574 6173 7472 696e 6729 290d  t._metastring)).
+00015230: 0a20 2020 2020 2020 2020 2020 2073 742e  .            st.
+00015240: 6d65 7461 7374 7269 6e67 203d 2062 7974  metastring = byt
+00015250: 6573 286d 616b 655f 6e65 7374 6564 5f6d  es(make_nested_m
+00015260: 6574 6128 7365 6c66 2c20 225f 726f 6f74  eta(self, "_root
+00015270: 222c 206d 6574 6173 7472 696e 6764 6963  ", metastringdic
+00015280: 7429 290d 0a20 2020 2020 2020 2020 2020  t))..           
+00015290: 2072 6574 7572 6e20 7374 0d0a 0d0a 2020   return st....  
+000152a0: 2020 2020 2020 7265 7475 726e 2066 6c61        return fla
+000152b0: 7474 656e 6564 2c20 6172 7261 7966 6c61  ttened, arrayfla
+000152c0: 6773 2c20 6d65 7461 7374 7269 6e67 6469  gs, metastringdi
+000152d0: 6374 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  ct....    # ----
+000152e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000152f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00015300: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015310: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
-00015320: 2020 2064 6566 2066 6c61 7474 656e 5f75     def flatten_u
-00015330: 6e64 6f28 7365 6c66 2c20 7365 703d 4e6f  ndo(self, sep=No
-00015340: 6e65 2c20 7374 6172 746e 616d 653d 2222  ne, startname=""
-00015350: 2c20 6f62 6a5f 6172 7261 793d 4e6f 6e65  , obj_array=None
-00015360: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
-00015370: 0a20 2020 2020 2020 2052 6573 746f 7265  .        Restore
-00015380: 7320 6120 5374 7275 6374 2074 6f20 6f72  s a Struct to or
-00015390: 6967 696e 616c 2066 6f72 6d20 6265 666f  iginal form befo
-000153a0: 7265 2053 7472 7563 742e 666c 6174 7465  re Struct.flatte
-000153b0: 6e28 290d 0a0d 0a20 2020 2020 2020 2050  n()....        P
-000153c0: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
-000153d0: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
-000153e0: 2020 2020 2020 2073 6570 3d4e 6f6e 652c         sep=None,
-000153f0: 2075 7365 7220 6d61 7920 7061 7373 2069   user may pass i
-00015400: 6e20 7468 6520 7365 7061 7261 7469 6e67  n the separating
-00015410: 2073 7472 696e 6720 746f 2075 7365 2073   string to use s
-00015420: 7563 6820 6173 2027 2f27 0d0a 0d0a 2020  uch as '/'....  
-00015430: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
-00015440: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
-00015450: 2020 2020 2020 2020 4e65 7720 5374 7275          New Stru
-00015460: 6374 2074 6861 7420 6973 2062 6163 6b20  ct that is back 
-00015470: 746f 206f 7269 6769 6e61 6c20 666f 726d  to original form
-00015480: 2062 6566 6f72 6520 5374 7275 6374 2e66   before Struct.f
-00015490: 6c61 7474 656e 2829 0d0a 0d0a 2020 2020  latten()....    
-000154a0: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
-000154b0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-000154c0: 2020 2020 2020 2020 666c 6174 7465 6e0d          flatten.
-000154d0: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
-000154e0: 2020 2020 2020 2020 6966 2068 6173 6174          if hasat
-000154f0: 7472 2873 656c 662c 2022 6d65 7461 7374  tr(self, "metast
-00015500: 7269 6e67 2229 3a0d 0a20 2020 2020 2020  ring"):..       
-00015510: 2020 2020 206d 6574 6173 7472 696e 6720       metastring 
-00015520: 3d20 7365 6c66 2e6d 6574 6173 7472 696e  = self.metastrin
-00015530: 670d 0a20 2020 2020 2020 2065 6c73 653a  g..        else:
-00015540: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
-00015550: 6973 6520 5479 7065 4572 726f 7228 2254  ise TypeError("T
-00015560: 6869 7320 7374 7275 6374 7572 6520 6861  his structure ha
-00015570: 7320 6e6f 7420 6265 656e 2066 6c61 7474  s not been flatt
-00015580: 656e 6564 2c20 6e6f 206d 6574 6173 7472  ened, no metastr
-00015590: 696e 6722 290d 0a0d 0a20 2020 2020 2020  ing")....       
-000155a0: 2069 6620 6861 7361 7474 7228 7365 6c66   if hasattr(self
-000155b0: 2c20 2261 7272 6179 666c 6167 7322 293a  , "arrayflags"):
-000155c0: 0d0a 2020 2020 2020 2020 2020 2020 6172  ..            ar
-000155d0: 7261 7966 6c61 6773 203d 2073 656c 662e  rayflags = self.
-000155e0: 6172 7261 7966 6c61 6773 0d0a 2020 2020  arrayflags..    
-000155f0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00015600: 2020 2020 2020 2072 6169 7365 2054 7970         raise Typ
-00015610: 6545 7272 6f72 2822 5468 6973 2073 7472  eError("This str
-00015620: 7563 7475 7265 2068 6173 206e 6f74 2062  ucture has not b
-00015630: 6565 6e20 666c 6174 7465 6e65 642c 206e  een flattened, n
-00015640: 6f20 6172 7261 7966 6c61 6773 2229 0d0a  o arrayflags")..
-00015650: 0d0a 2020 2020 2020 2020 2320 7075 7420  ..        # put 
-00015660: 6261 636b 206c 6174 6572 0d0a 2020 2020  back later..    
-00015670: 2020 2020 6465 6c20 7365 6c66 2e6d 6574      del self.met
-00015680: 6173 7472 696e 670d 0a20 2020 2020 2020  astring..       
-00015690: 2064 656c 2073 656c 662e 6172 7261 7966   del self.arrayf
-000156a0: 6c61 6773 0d0a 0d0a 2020 2020 2020 2020  lags....        
-000156b0: 6966 206f 626a 5f61 7272 6179 2069 7320  if obj_array is 
-000156c0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-000156d0: 2020 2023 2066 6972 7374 2070 6173 732c     # first pass,
-000156e0: 2062 7569 6c64 2061 6e20 6172 7261 7920   build an array 
-000156f0: 6f66 2028 636f 6c6e 616d 652c 2076 616c  of (colname, val
-00015700: 7565 2c20 6172 7261 7966 6c61 6729 0d0a  ue, arrayflag)..
-00015710: 2020 2020 2020 2020 2020 2020 6f62 6a5f              obj_
-00015720: 6172 7261 7920 3d20 6e70 2e65 6d70 7479  array = np.empty
-00015730: 2873 656c 662e 5f6e 636f 6c73 2c20 6474  (self._ncols, dt
-00015740: 7970 653d 224f 2229 0d0a 2020 2020 2020  ype="O")..      
-00015750: 2020 2020 2020 666f 7220 692c 2028 2863        for i, ((c
-00015760: 6f6c 6e61 6d65 2c20 6172 7229 2c20 6166  olname, arr), af
-00015770: 2920 696e 2065 6e75 6d65 7261 7465 287a  ) in enumerate(z
-00015780: 6970 2873 656c 662e 6974 656d 7328 292c  ip(self.items(),
-00015790: 2061 7272 6179 666c 6167 7329 293a 0d0a   arrayflags)):..
-000157a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000157b0: 6f62 6a5f 6172 7261 795b 695d 203d 2028  obj_array[i] = (
-000157c0: 636f 6c6e 616d 652c 2061 7272 2c20 6166  colname, arr, af
-000157d0: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
-000157e0: 7365 7020 6973 204e 6f6e 653a 0d0a 2020  sep is None:..  
-000157f0: 2020 2020 2020 2020 2020 6966 2068 6173            if has
-00015800: 6174 7472 2873 656c 662c 2022 5f73 6570  attr(self, "_sep
-00015810: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
-00015820: 2020 2020 2073 6570 203d 2073 656c 662e       sep = self.
-00015830: 5f73 6570 0d0a 2020 2020 2020 2020 2020  _sep..          
-00015840: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00015850: 2020 2020 2020 2020 2073 6570 203d 2022           sep = "
-00015860: 2f22 0d0a 0d0a 2020 2020 2020 2020 7265  /"....        re
-00015870: 7375 6c74 203d 2053 7472 7563 742e 5f66  sult = Struct._f
-00015880: 6c61 7474 656e 5f75 6e64 6f28 7365 702c  latten_undo(sep,
-00015890: 2030 2c20 7374 6172 746e 616d 652c 206f   0, startname, o
-000158a0: 626a 5f61 7272 6179 2c20 6d65 7461 3d6d  bj_array, meta=m
-000158b0: 6574 6173 7472 696e 6729 0d0a 0d0a 2020  etastring)....  
-000158c0: 2020 2020 2020 2320 7075 7420 6974 2062        # put it b
-000158d0: 6163 6b0d 0a20 2020 2020 2020 2073 656c  ack..        sel
-000158e0: 662e 6172 7261 7966 6c61 6773 203d 2061  f.arrayflags = a
-000158f0: 7272 6179 666c 6167 730d 0a20 2020 2020  rrayflags..     
-00015900: 2020 2073 656c 662e 6d65 7461 7374 7269     self.metastri
-00015910: 6e67 203d 206d 6574 6173 7472 696e 670d  ng = metastring.
-00015920: 0a0d 0a20 2020 2020 2020 2072 6574 7572  ...        retur
-00015930: 6e20 7265 7375 6c74 0d0a 0d0a 2020 2020  n result....    
-00015940: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+00015310: 2d2d 2d0d 0a20 2020 2064 6566 2066 6c61  ---..    def fla
+00015320: 7474 656e 5f75 6e64 6f28 7365 6c66 2c20  tten_undo(self, 
+00015330: 7365 703d 4e6f 6e65 2c20 7374 6172 746e  sep=None, startn
+00015340: 616d 653d 2222 2c20 6f62 6a5f 6172 7261  ame="", obj_arra
+00015350: 793d 4e6f 6e65 293a 0d0a 2020 2020 2020  y=None):..      
+00015360: 2020 2222 220d 0a20 2020 2020 2020 2052    """..        R
+00015370: 6573 746f 7265 7320 6120 5374 7275 6374  estores a Struct
+00015380: 2074 6f20 6f72 6967 696e 616c 2066 6f72   to original for
+00015390: 6d20 6265 666f 7265 2053 7472 7563 742e  m before Struct.
+000153a0: 666c 6174 7465 6e28 290d 0a0d 0a20 2020  flatten()....   
+000153b0: 2020 2020 2050 6172 616d 6574 6572 730d       Parameters.
+000153c0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+000153d0: 2d2d 2d0d 0a20 2020 2020 2020 2073 6570  ---..        sep
+000153e0: 3d4e 6f6e 652c 2075 7365 7220 6d61 7920  =None, user may 
+000153f0: 7061 7373 2069 6e20 7468 6520 7365 7061  pass in the sepa
+00015400: 7261 7469 6e67 2073 7472 696e 6720 746f  rating string to
+00015410: 2075 7365 2073 7563 6820 6173 2027 2f27   use such as '/'
+00015420: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
+00015430: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
+00015440: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4e65  ----..        Ne
+00015450: 7720 5374 7275 6374 2074 6861 7420 6973  w Struct that is
+00015460: 2062 6163 6b20 746f 206f 7269 6769 6e61   back to origina
+00015470: 6c20 666f 726d 2062 6566 6f72 6520 5374  l form before St
+00015480: 7275 6374 2e66 6c61 7474 656e 2829 0d0a  ruct.flatten()..
+00015490: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
+000154a0: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
+000154b0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 666c  ----..        fl
+000154c0: 6174 7465 6e0d 0a20 2020 2020 2020 2022  atten..        "
+000154d0: 2222 0d0a 0d0a 2020 2020 2020 2020 6966  ""....        if
+000154e0: 2068 6173 6174 7472 2873 656c 662c 2022   hasattr(self, "
+000154f0: 6d65 7461 7374 7269 6e67 2229 3a0d 0a20  metastring"):.. 
+00015500: 2020 2020 2020 2020 2020 206d 6574 6173             metas
+00015510: 7472 696e 6720 3d20 7365 6c66 2e6d 6574  tring = self.met
+00015520: 6173 7472 696e 670d 0a20 2020 2020 2020  astring..       
+00015530: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00015540: 2020 2020 7261 6973 6520 5479 7065 4572      raise TypeEr
+00015550: 726f 7228 2254 6869 7320 7374 7275 6374  ror("This struct
+00015560: 7572 6520 6861 7320 6e6f 7420 6265 656e  ure has not been
+00015570: 2066 6c61 7474 656e 6564 2c20 6e6f 206d   flattened, no m
+00015580: 6574 6173 7472 696e 6722 290d 0a0d 0a20  etastring").... 
+00015590: 2020 2020 2020 2069 6620 6861 7361 7474         if hasatt
+000155a0: 7228 7365 6c66 2c20 2261 7272 6179 666c  r(self, "arrayfl
+000155b0: 6167 7322 293a 0d0a 2020 2020 2020 2020  ags"):..        
+000155c0: 2020 2020 6172 7261 7966 6c61 6773 203d      arrayflags =
+000155d0: 2073 656c 662e 6172 7261 7966 6c61 6773   self.arrayflags
+000155e0: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
+000155f0: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00015600: 7365 2054 7970 6545 7272 6f72 2822 5468  se TypeError("Th
+00015610: 6973 2073 7472 7563 7475 7265 2068 6173  is structure has
+00015620: 206e 6f74 2062 6565 6e20 666c 6174 7465   not been flatte
+00015630: 6e65 642c 206e 6f20 6172 7261 7966 6c61  ned, no arrayfla
+00015640: 6773 2229 0d0a 0d0a 2020 2020 2020 2020  gs")....        
+00015650: 2320 7075 7420 6261 636b 206c 6174 6572  # put back later
+00015660: 0d0a 2020 2020 2020 2020 6465 6c20 7365  ..        del se
+00015670: 6c66 2e6d 6574 6173 7472 696e 670d 0a20  lf.metastring.. 
+00015680: 2020 2020 2020 2064 656c 2073 656c 662e         del self.
+00015690: 6172 7261 7966 6c61 6773 0d0a 0d0a 2020  arrayflags....  
+000156a0: 2020 2020 2020 6966 206f 626a 5f61 7272        if obj_arr
+000156b0: 6179 2069 7320 4e6f 6e65 3a0d 0a20 2020  ay is None:..   
+000156c0: 2020 2020 2020 2020 2023 2066 6972 7374           # first
+000156d0: 2070 6173 732c 2062 7569 6c64 2061 6e20   pass, build an 
+000156e0: 6172 7261 7920 6f66 2028 636f 6c6e 616d  array of (colnam
+000156f0: 652c 2076 616c 7565 2c20 6172 7261 7966  e, value, arrayf
+00015700: 6c61 6729 0d0a 2020 2020 2020 2020 2020  lag)..          
+00015710: 2020 6f62 6a5f 6172 7261 7920 3d20 6e70    obj_array = np
+00015720: 2e65 6d70 7479 2873 656c 662e 5f6e 636f  .empty(self._nco
+00015730: 6c73 2c20 6474 7970 653d 224f 2229 0d0a  ls, dtype="O")..
+00015740: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00015750: 692c 2028 2863 6f6c 6e61 6d65 2c20 6172  i, ((colname, ar
+00015760: 7229 2c20 6166 2920 696e 2065 6e75 6d65  r), af) in enume
+00015770: 7261 7465 287a 6970 2873 656c 662e 6974  rate(zip(self.it
+00015780: 656d 7328 292c 2061 7272 6179 666c 6167  ems(), arrayflag
+00015790: 7329 293a 0d0a 2020 2020 2020 2020 2020  s)):..          
+000157a0: 2020 2020 2020 6f62 6a5f 6172 7261 795b        obj_array[
+000157b0: 695d 203d 2028 636f 6c6e 616d 652c 2061  i] = (colname, a
+000157c0: 7272 2c20 6166 290d 0a0d 0a20 2020 2020  rr, af)....     
+000157d0: 2020 2069 6620 7365 7020 6973 204e 6f6e     if sep is Non
+000157e0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+000157f0: 6966 2068 6173 6174 7472 2873 656c 662c  if hasattr(self,
+00015800: 2022 5f73 6570 2229 3a0d 0a20 2020 2020   "_sep"):..     
+00015810: 2020 2020 2020 2020 2020 2073 6570 203d             sep =
+00015820: 2073 656c 662e 5f73 6570 0d0a 2020 2020   self._sep..    
+00015830: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00015840: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00015850: 6570 203d 2022 2f22 0d0a 0d0a 2020 2020  ep = "/"....    
+00015860: 2020 2020 7265 7375 6c74 203d 2053 7472      result = Str
+00015870: 7563 742e 5f66 6c61 7474 656e 5f75 6e64  uct._flatten_und
+00015880: 6f28 7365 702c 2030 2c20 7374 6172 746e  o(sep, 0, startn
+00015890: 616d 652c 206f 626a 5f61 7272 6179 2c20  ame, obj_array, 
+000158a0: 6d65 7461 3d6d 6574 6173 7472 696e 6729  meta=metastring)
+000158b0: 0d0a 0d0a 2020 2020 2020 2020 2320 7075  ....        # pu
+000158c0: 7420 6974 2062 6163 6b0d 0a20 2020 2020  t it back..     
+000158d0: 2020 2073 656c 662e 6172 7261 7966 6c61     self.arrayfla
+000158e0: 6773 203d 2061 7272 6179 666c 6167 730d  gs = arrayflags.
+000158f0: 0a20 2020 2020 2020 2073 656c 662e 6d65  .        self.me
+00015900: 7461 7374 7269 6e67 203d 206d 6574 6173  tastring = metas
+00015910: 7472 696e 670d 0a0d 0a20 2020 2020 2020  tring....       
+00015920: 2072 6574 7572 6e20 7265 7375 6c74 0d0a   return result..
+00015930: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+00015940: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00015950: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015960: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015970: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2040  ---------..    @
-00015980: 636c 6173 736d 6574 686f 640d 0a20 2020  classmethod..   
-00015990: 2064 6566 205f 666c 6174 7465 6e5f 756e   def _flatten_un
-000159a0: 646f 2863 6c73 2c20 7365 702c 2073 7461  do(cls, sep, sta
-000159b0: 7274 706f 732c 2073 7461 7274 6e61 6d65  rtpos, startname
-000159c0: 2c20 6f62 6a5f 6172 7261 792c 206d 6574  , obj_array, met
-000159d0: 613d 4e6f 6e65 2c20 6375 746f 6666 733d  a=None, cutoffs=
-000159e0: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
-000159f0: 2222 220d 0a20 2020 2020 2020 2069 6e74  """..        int
-00015a00: 6572 6e61 6c20 726f 7574 696e 650d 0a20  ernal routine.. 
-00015a10: 2020 2020 2020 2022 2222 0d0a 0d0a 2020         """....  
-00015a20: 2020 2020 2020 6465 6620 6275 696c 645f        def build_
-00015a30: 636c 6173 735f 6e65 7374 6564 286d 6574  class_nested(met
-00015a40: 6173 7472 696e 672c 206e 7064 6963 7429  astring, npdict)
-00015a50: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
-00015a60: 6620 6d65 7461 7374 7269 6e67 2069 7320  f metastring is 
-00015a70: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
-00015a80: 2020 2020 2020 2020 2020 206d 6574 615f             meta_
-00015a90: 7374 7275 6374 203d 206a 736f 6e2e 6c6f  struct = json.lo
-00015aa0: 6164 7328 6d65 7461 7374 7269 6e67 290d  ads(metastring).
-00015ab0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015ac0: 2063 6c61 7373 6e61 6d65 203d 206d 6574   classname = met
-00015ad0: 615f 7374 7275 6374 5b22 636c 6173 736e  a_struct["classn
-00015ae0: 616d 6522 5d0d 0a20 2020 2020 2020 2020  ame"]..         
-00015af0: 2020 2020 2020 206e 616d 6520 3d20 6d65         name = me
-00015b00: 7461 5f73 7472 7563 745b 226e 616d 6522  ta_struct["name"
-00015b10: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-00015b20: 2020 2023 2064 6f6e 6520 7769 7468 2074     # done with t
-00015b30: 6869 7320 7375 6273 6563 7469 6f6e 2c20  his subsection, 
-00015b40: 7265 7475 726e 206f 7572 206c 6173 7420  return our last 
-00015b50: 6c6f 6361 7469 6f6e 0d0a 2020 2020 2020  location..      
-00015b60: 2020 2020 2020 2020 2020 6e65 7763 6c61            newcla
-00015b70: 7373 203d 2067 6574 6174 7472 2854 7970  ss = getattr(Typ
-00015b80: 6552 6567 6973 7465 722c 2063 6c61 7373  eRegister, class
-00015b90: 6e61 6d65 290d 0a20 2020 2020 2020 2020  name)..         
-00015ba0: 2020 2020 2020 2023 2070 7269 6e74 2822         # print("
-00015bb0: 2a2a 6e65 7763 6c61 7373 222c 206e 616d  **newclass", nam
-00015bc0: 652c 206d 6574 615f 7374 7275 6374 290d  e, meta_struct).
-00015bd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015be0: 2072 6574 7572 6e20 6e65 7763 6c61 7373   return newclass
-00015bf0: 2e5f 6c6f 6164 5f66 726f 6d5f 7364 735f  ._load_from_sds_
-00015c00: 6d65 7461 5f64 6174 615f 6e65 7374 6564  meta_data_nested
-00015c10: 286e 616d 652c 206d 6574 615f 7374 7275  (name, meta_stru
-00015c20: 6374 2c20 6e70 6469 6374 290d 0a20 2020  ct, npdict)..   
-00015c30: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00015c40: 4e6f 6e65 0d0a 0d0a 2020 2020 2020 2020  None....        
-00015c50: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+00015960: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
+00015970: 0a20 2020 2040 636c 6173 736d 6574 686f  .    @classmetho
+00015980: 640d 0a20 2020 2064 6566 205f 666c 6174  d..    def _flat
+00015990: 7465 6e5f 756e 646f 2863 6c73 2c20 7365  ten_undo(cls, se
+000159a0: 702c 2073 7461 7274 706f 732c 2073 7461  p, startpos, sta
+000159b0: 7274 6e61 6d65 2c20 6f62 6a5f 6172 7261  rtname, obj_arra
+000159c0: 792c 206d 6574 613d 4e6f 6e65 2c20 6375  y, meta=None, cu
+000159d0: 746f 6666 733d 4e6f 6e65 293a 0d0a 2020  toffs=None):..  
+000159e0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+000159f0: 2020 2069 6e74 6572 6e61 6c20 726f 7574     internal rout
+00015a00: 696e 650d 0a20 2020 2020 2020 2022 2222  ine..        """
+00015a10: 0d0a 0d0a 2020 2020 2020 2020 6465 6620  ....        def 
+00015a20: 6275 696c 645f 636c 6173 735f 6e65 7374  build_class_nest
+00015a30: 6564 286d 6574 6173 7472 696e 672c 206e  ed(metastring, n
+00015a40: 7064 6963 7429 3a0d 0a20 2020 2020 2020  pdict):..       
+00015a50: 2020 2020 2069 6620 6d65 7461 7374 7269       if metastri
+00015a60: 6e67 2069 7320 6e6f 7420 4e6f 6e65 3a0d  ng is not None:.
+00015a70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015a80: 206d 6574 615f 7374 7275 6374 203d 206a   meta_struct = j
+00015a90: 736f 6e2e 6c6f 6164 7328 6d65 7461 7374  son.loads(metast
+00015aa0: 7269 6e67 290d 0a20 2020 2020 2020 2020  ring)..         
+00015ab0: 2020 2020 2020 2063 6c61 7373 6e61 6d65         classname
+00015ac0: 203d 206d 6574 615f 7374 7275 6374 5b22   = meta_struct["
+00015ad0: 636c 6173 736e 616d 6522 5d0d 0a20 2020  classname"]..   
+00015ae0: 2020 2020 2020 2020 2020 2020 206e 616d               nam
+00015af0: 6520 3d20 6d65 7461 5f73 7472 7563 745b  e = meta_struct[
+00015b00: 226e 616d 6522 5d0d 0a20 2020 2020 2020  "name"]..       
+00015b10: 2020 2020 2020 2020 2023 2064 6f6e 6520           # done 
+00015b20: 7769 7468 2074 6869 7320 7375 6273 6563  with this subsec
+00015b30: 7469 6f6e 2c20 7265 7475 726e 206f 7572  tion, return our
+00015b40: 206c 6173 7420 6c6f 6361 7469 6f6e 0d0a   last location..
+00015b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015b60: 6e65 7763 6c61 7373 203d 2067 6574 6174  newclass = getat
+00015b70: 7472 2854 7970 6552 6567 6973 7465 722c  tr(TypeRegister,
+00015b80: 2063 6c61 7373 6e61 6d65 290d 0a20 2020   classname)..   
+00015b90: 2020 2020 2020 2020 2020 2020 2023 2070               # p
+00015ba0: 7269 6e74 2822 2a2a 6e65 7763 6c61 7373  rint("**newclass
+00015bb0: 222c 206e 616d 652c 206d 6574 615f 7374  ", name, meta_st
+00015bc0: 7275 6374 290d 0a20 2020 2020 2020 2020  ruct)..         
+00015bd0: 2020 2020 2020 2072 6574 7572 6e20 6e65         return ne
+00015be0: 7763 6c61 7373 2e5f 6c6f 6164 5f66 726f  wclass._load_fro
+00015bf0: 6d5f 7364 735f 6d65 7461 5f64 6174 615f  m_sds_meta_data_
+00015c00: 6e65 7374 6564 286e 616d 652c 206d 6574  nested(name, met
+00015c10: 615f 7374 7275 6374 2c20 6e70 6469 6374  a_struct, npdict
+00015c20: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
+00015c30: 6574 7572 6e20 4e6f 6e65 0d0a 0d0a 2020  eturn None....  
+00015c40: 2020 2020 2020 2320 2d2d 2d2d 2d2d 2d2d        # --------
+00015c50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00015c60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015c70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015c80: 0d0a 2020 2020 2020 2020 6966 206d 6574  ..        if met
-00015c90: 6120 6973 206e 6f74 204e 6f6e 653a 0d0a  a is not None:..
-00015ca0: 2020 2020 2020 2020 2020 2020 6d65 7461              meta
-00015cb0: 7374 7269 6e67 6469 6374 203d 206a 736f  stringdict = jso
-00015cc0: 6e2e 6c6f 6164 7328 6279 7465 7328 6d65  n.loads(bytes(me
-00015cd0: 7461 2929 0d0a 2020 2020 2020 2020 656c  ta))..        el
-00015ce0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00015cf0: 206d 6574 6173 7472 696e 6764 6963 7420   metastringdict 
-00015d00: 3d20 7b7d 0d0a 0d0a 2020 2020 2020 2020  = {}....        
-00015d10: 7365 706c 656e 203d 206c 656e 2873 6570  seplen = len(sep
-00015d20: 290d 0a20 2020 2020 2020 206e 6577 7374  )..        newst
-00015d30: 7275 6374 203d 207b 7d0d 0a20 2020 2020  ruct = {}..     
-00015d40: 2020 2069 203d 2073 7461 7274 706f 730d     i = startpos.
-00015d50: 0a20 2020 2020 2020 2073 746f 7070 6f73  .        stoppos
-00015d60: 203d 206c 656e 286f 626a 5f61 7272 6179   = len(obj_array
-00015d70: 290d 0a0d 0a20 2020 2020 2020 2077 6869  )....        whi
-00015d80: 6c65 2069 203c 2073 746f 7070 6f73 3a0d  le i < stoppos:.
-00015d90: 0a20 2020 2020 2020 2020 2020 2069 7465  .            ite
-00015da0: 6d6e 616d 6520 3d20 6f62 6a5f 6172 7261  mname = obj_arra
-00015db0: 795b 695d 5b30 5d0d 0a20 2020 2020 2020  y[i][0]..       
-00015dc0: 2020 2020 2023 2063 6865 636b 2069 6620       # check if 
-00015dd0: 7765 2061 7265 2061 7420 7468 6520 656e  we are at the en
-00015de0: 6420 6f66 2061 2073 7562 7374 7275 6374  d of a substruct
-00015df0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00015e00: 2073 7461 7274 706f 7320 213d 2030 2061   startpos != 0 a
-00015e10: 6e64 206e 6f74 2069 7465 6d6e 616d 652e  nd not itemname.
-00015e20: 7374 6172 7473 7769 7468 2873 7461 7274  startswith(start
-00015e30: 6e61 6d65 293a 0d0a 0d0a 2020 2020 2020  name):....      
-00015e40: 2020 2020 2020 2020 2020 2320 6275 696c            # buil
-00015e50: 6420 7468 6520 6e65 7374 6564 2063 6c61  d the nested cla
-00015e60: 7373 2077 6520 636f 6c6c 6563 7465 6420  ss we collected 
-00015e70: 6561 726c 6965 720d 0a20 2020 2020 2020  earlier..       
-00015e80: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00015e90: 6275 696c 645f 636c 6173 735f 6e65 7374  build_class_nest
-00015ea0: 6564 286d 6574 6173 7472 696e 6764 6963  ed(metastringdic
-00015eb0: 742e 6765 7428 225f 726f 6f74 222c 204e  t.get("_root", N
-00015ec0: 6f6e 6529 2c20 6e65 7773 7472 7563 7429  one), newstruct)
-00015ed0: 2c20 690d 0a0d 0a20 2020 2020 2020 2020  , i....         
-00015ee0: 2020 2023 2067 6574 2074 6865 2076 616c     # get the val
-00015ef0: 7565 2066 6f72 2074 6865 2069 7465 6d6e  ue for the itemn
-00015f00: 616d 6520 616e 6420 6974 7320 6172 7261  ame and its arra
-00015f10: 7966 6c61 670d 0a20 2020 2020 2020 2020  yflag..         
-00015f20: 2020 2076 616c 7565 203d 206f 626a 5f61     value = obj_a
-00015f30: 7272 6179 5b69 5d5b 315d 0d0a 2020 2020  rray[i][1]..    
-00015f40: 2020 2020 2020 2020 6966 2076 616c 7565          if value
-00015f50: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-00015f60: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00015f70: 7272 6179 666c 6167 7320 3d20 6f62 6a5f  rrayflags = obj_
-00015f80: 6172 7261 795b 695d 5b32 5d0d 0a0d 0a20  array[i][2].... 
-00015f90: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00015fa0: 2072 656d 6f76 6520 6e65 7374 6564 2070   remove nested p
-00015fb0: 6f72 7469 6f6e 206f 6620 6e61 6d65 0d0a  ortion of name..
-00015fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015fd0: 7075 7265 6e61 6d65 203d 2069 7465 6d6e  purename = itemn
-00015fe0: 616d 655b 6c65 6e28 7374 6172 746e 616d  ame[len(startnam
-00015ff0: 6529 203a 5d0d 0a0d 0a20 2020 2020 2020  e) :]....       
-00016000: 2020 2020 2020 2020 2023 2063 6865 636b           # check
-00016010: 2066 6f72 206e 6573 7469 6e67 0d0a 2020   for nesting..  
-00016020: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00016030: 2061 7272 6179 666c 6167 7320 2620 5344   arrayflags & SD
-00016040: 5346 6c61 672e 4e65 7374 6564 3a0d 0a20  SFlag.Nested:.. 
-00016050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016060: 2020 206e 6577 6d65 7461 203d 2076 616c     newmeta = val
-00016070: 7565 0d0a 0d0a 2020 2020 2020 2020 2020  ue....          
-00016080: 2020 2020 2020 2020 2020 2320 7265 6d6f            # remo
-00016090: 7665 2074 7261 696c 696e 6720 7365 700d  ve trailing sep.
-000160a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000160b0: 2020 2020 206e 6577 6e61 6d65 203d 2069       newname = i
-000160c0: 7465 6d6e 616d 655b 3a2d 7365 706c 656e  temname[:-seplen
-000160d0: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-000160e0: 2020 2020 2020 2070 7572 656e 616d 6520         purename 
-000160f0: 3d20 7075 7265 6e61 6d65 5b3a 2d73 6570  = purename[:-sep
-00016100: 6c65 6e5d 0d0a 0d0a 2020 2020 2020 2020  len]....        
-00016110: 2020 2020 2020 2020 2020 2020 2320 7769              # wi
-00016120: 6c6c 2072 6574 7572 6e20 6120 6e65 7720  ll return a new 
-00016130: 690d 0a20 2020 2020 2020 2020 2020 2020  i..             
-00016140: 2020 2020 2020 206e 6577 7374 7275 6374         newstruct
-00016150: 5b70 7572 656e 616d 655d 2c20 6920 3d20  [purename], i = 
-00016160: 5374 7275 6374 2e5f 666c 6174 7465 6e5f  Struct._flatten_
-00016170: 756e 646f 280d 0a20 2020 2020 2020 2020  undo(..         
-00016180: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00016190: 6570 2c20 6920 2b20 312c 2069 7465 6d6e  ep, i + 1, itemn
-000161a0: 616d 652c 206f 626a 5f61 7272 6179 2c20  ame, obj_array, 
-000161b0: 6d65 7461 3d6e 6577 6d65 7461 2c20 6375  meta=newmeta, cu
-000161c0: 746f 6666 733d 6375 746f 6666 730d 0a20  toffs=cutoffs.. 
-000161d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000161e0: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
-000161f0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-00016200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016210: 2023 206e 6f20 6e65 7374 696e 670d 0a20   # no nesting.. 
-00016220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016230: 2020 2069 6620 6172 7261 7966 6c61 6773     if arrayflags
-00016240: 2026 2053 4453 466c 6167 2e4d 6574 613a   & SDSFlag.Meta:
-00016250: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00016260: 2020 2020 2020 2020 2020 2320 6561 7420            # eat 
-00016270: 7570 2061 6c6c 2074 6865 2061 7272 6179  up all the array
-00016280: 7320 6265 6c6f 6e67 696e 6720 746f 2074  s belonging to t
-00016290: 6869 7320 6164 7661 6e63 6564 2063 6c61  his advanced cla
-000162a0: 7373 0d0a 2020 2020 2020 2020 2020 2020  ss..            
-000162b0: 2020 2020 2020 2020 2020 2020 6d65 7461              meta
-000162c0: 6279 7465 7320 3d20 6d65 7461 7374 7269  bytes = metastri
-000162d0: 6e67 6469 6374 2e67 6574 2870 7572 656e  ngdict.get(puren
-000162e0: 616d 652c 204e 6f6e 6529 0d0a 2020 2020  ame, None)..    
-000162f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016300: 2020 2020 2320 7072 696e 7428 222a 2a6d      # print("**m
-00016310: 6574 6120 666f 7222 2c20 7075 7265 6e61  eta for", purena
-00016320: 6d65 2c20 6d65 7461 6279 7465 7329 0d0a  me, metabytes)..
-00016330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016340: 2020 2020 2020 2020 6966 206d 6574 6162          if metab
-00016350: 7974 6573 2069 7320 6e6f 7420 4e6f 6e65  ytes is not None
-00016360: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00016370: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00016380: 6574 615f 7374 7275 6374 203d 206a 736f  eta_struct = jso
-00016390: 6e2e 6c6f 6164 7328 6d65 7461 6279 7465  n.loads(metabyte
-000163a0: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
-000163b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000163c0: 636c 6173 736e 616d 6520 3d20 6d65 7461  classname = meta
-000163d0: 5f73 7472 7563 745b 2263 6c61 7373 6e61  _struct["classna
-000163e0: 6d65 225d 0d0a 2020 2020 2020 2020 2020  me"]..          
-000163f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016400: 2020 6e65 7763 6c61 7373 203d 2067 6574    newclass = get
-00016410: 6174 7472 2854 7970 6552 6567 6973 7465  attr(TypeRegiste
-00016420: 722c 2063 6c61 7373 6e61 6d65 290d 0a20  r, classname).. 
-00016430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016440: 2020 2020 2020 2020 2020 2069 6620 6375             if cu
-00016450: 746f 6666 7320 6973 206e 6f74 204e 6f6e  toffs is not Non
-00016460: 6520 616e 6420 5479 7065 5265 6769 7374  e and TypeRegist
-00016470: 6572 2e69 735f 6269 6e6e 6564 5f74 7970  er.is_binned_typ
-00016480: 6528 6e65 7763 6c61 7373 293a 0d0a 2020  e(newclass):..  
+00015c70: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00015c80: 6966 206d 6574 6120 6973 206e 6f74 204e  if meta is not N
+00015c90: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00015ca0: 2020 6d65 7461 7374 7269 6e67 6469 6374    metastringdict
+00015cb0: 203d 206a 736f 6e2e 6c6f 6164 7328 6279   = json.loads(by
+00015cc0: 7465 7328 6d65 7461 2929 0d0a 2020 2020  tes(meta))..    
+00015cd0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00015ce0: 2020 2020 2020 206d 6574 6173 7472 696e         metastrin
+00015cf0: 6764 6963 7420 3d20 7b7d 0d0a 0d0a 2020  gdict = {}....  
+00015d00: 2020 2020 2020 7365 706c 656e 203d 206c        seplen = l
+00015d10: 656e 2873 6570 290d 0a20 2020 2020 2020  en(sep)..       
+00015d20: 206e 6577 7374 7275 6374 203d 207b 7d0d   newstruct = {}.
+00015d30: 0a20 2020 2020 2020 2069 203d 2073 7461  .        i = sta
+00015d40: 7274 706f 730d 0a20 2020 2020 2020 2073  rtpos..        s
+00015d50: 746f 7070 6f73 203d 206c 656e 286f 626a  toppos = len(obj
+00015d60: 5f61 7272 6179 290d 0a0d 0a20 2020 2020  _array)....     
+00015d70: 2020 2077 6869 6c65 2069 203c 2073 746f     while i < sto
+00015d80: 7070 6f73 3a0d 0a20 2020 2020 2020 2020  ppos:..         
+00015d90: 2020 2069 7465 6d6e 616d 6520 3d20 6f62     itemname = ob
+00015da0: 6a5f 6172 7261 795b 695d 5b30 5d0d 0a20  j_array[i][0].. 
+00015db0: 2020 2020 2020 2020 2020 2023 2063 6865             # che
+00015dc0: 636b 2069 6620 7765 2061 7265 2061 7420  ck if we are at 
+00015dd0: 7468 6520 656e 6420 6f66 2061 2073 7562  the end of a sub
+00015de0: 7374 7275 6374 0d0a 2020 2020 2020 2020  struct..        
+00015df0: 2020 2020 6966 2073 7461 7274 706f 7320      if startpos 
+00015e00: 213d 2030 2061 6e64 206e 6f74 2069 7465  != 0 and not ite
+00015e10: 6d6e 616d 652e 7374 6172 7473 7769 7468  mname.startswith
+00015e20: 2873 7461 7274 6e61 6d65 293a 0d0a 2020  (startname):..  
+00015e30: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00015e40: 6275 696c 6420 7468 6520 6e65 7374 6564  build the nested
+00015e50: 2063 6c61 7373 2077 6520 636f 6c6c 6563   class we collec
+00015e60: 7465 6420 6561 726c 6965 720d 0a20 2020  ted earlier..   
+00015e70: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00015e80: 7572 6e20 6275 696c 645f 636c 6173 735f  urn build_class_
+00015e90: 6e65 7374 6564 286d 6574 6173 7472 696e  nested(metastrin
+00015ea0: 6764 6963 742e 6765 7428 225f 726f 6f74  gdict.get("_root
+00015eb0: 222c 204e 6f6e 6529 2c20 6e65 7773 7472  ", None), newstr
+00015ec0: 7563 7429 2c20 690d 0a0d 0a20 2020 2020  uct), i....     
+00015ed0: 2020 2020 2020 2023 2067 6574 2074 6865         # get the
+00015ee0: 2076 616c 7565 2066 6f72 2074 6865 2069   value for the i
+00015ef0: 7465 6d6e 616d 6520 616e 6420 6974 7320  temname and its 
+00015f00: 6172 7261 7966 6c61 670d 0a20 2020 2020  arrayflag..     
+00015f10: 2020 2020 2020 2076 616c 7565 203d 206f         value = o
+00015f20: 626a 5f61 7272 6179 5b69 5d5b 315d 0d0a  bj_array[i][1]..
+00015f30: 2020 2020 2020 2020 2020 2020 6966 2076              if v
+00015f40: 616c 7565 2069 7320 6e6f 7420 4e6f 6e65  alue is not None
+00015f50: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00015f60: 2020 2061 7272 6179 666c 6167 7320 3d20     arrayflags = 
+00015f70: 6f62 6a5f 6172 7261 795b 695d 5b32 5d0d  obj_array[i][2].
+00015f80: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00015f90: 2020 2023 2072 656d 6f76 6520 6e65 7374     # remove nest
+00015fa0: 6564 2070 6f72 7469 6f6e 206f 6620 6e61  ed portion of na
+00015fb0: 6d65 0d0a 2020 2020 2020 2020 2020 2020  me..            
+00015fc0: 2020 2020 7075 7265 6e61 6d65 203d 2069      purename = i
+00015fd0: 7465 6d6e 616d 655b 6c65 6e28 7374 6172  temname[len(star
+00015fe0: 746e 616d 6529 203a 5d0d 0a0d 0a20 2020  tname) :]....   
+00015ff0: 2020 2020 2020 2020 2020 2020 2023 2063               # c
+00016000: 6865 636b 2066 6f72 206e 6573 7469 6e67  heck for nesting
+00016010: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00016020: 2020 6966 2061 7272 6179 666c 6167 7320    if arrayflags 
+00016030: 2620 5344 5346 6c61 672e 4e65 7374 6564  & SDSFlag.Nested
+00016040: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00016050: 2020 2020 2020 206e 6577 6d65 7461 203d         newmeta =
+00016060: 2076 616c 7565 0d0a 0d0a 2020 2020 2020   value....      
+00016070: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00016080: 7265 6d6f 7665 2074 7261 696c 696e 6720  remove trailing 
+00016090: 7365 700d 0a20 2020 2020 2020 2020 2020  sep..           
+000160a0: 2020 2020 2020 2020 206e 6577 6e61 6d65           newname
+000160b0: 203d 2069 7465 6d6e 616d 655b 3a2d 7365   = itemname[:-se
+000160c0: 706c 656e 5d0d 0a20 2020 2020 2020 2020  plen]..         
+000160d0: 2020 2020 2020 2020 2020 2070 7572 656e             puren
+000160e0: 616d 6520 3d20 7075 7265 6e61 6d65 5b3a  ame = purename[:
+000160f0: 2d73 6570 6c65 6e5d 0d0a 0d0a 2020 2020  -seplen]....    
+00016100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016110: 2320 7769 6c6c 2072 6574 7572 6e20 6120  # will return a 
+00016120: 6e65 7720 690d 0a20 2020 2020 2020 2020  new i..         
+00016130: 2020 2020 2020 2020 2020 206e 6577 7374             newst
+00016140: 7275 6374 5b70 7572 656e 616d 655d 2c20  ruct[purename], 
+00016150: 6920 3d20 5374 7275 6374 2e5f 666c 6174  i = Struct._flat
+00016160: 7465 6e5f 756e 646f 280d 0a20 2020 2020  ten_undo(..     
+00016170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016180: 2020 2073 6570 2c20 6920 2b20 312c 2069     sep, i + 1, i
+00016190: 7465 6d6e 616d 652c 206f 626a 5f61 7272  temname, obj_arr
+000161a0: 6179 2c20 6d65 7461 3d6e 6577 6d65 7461  ay, meta=newmeta
+000161b0: 2c20 6375 746f 6666 733d 6375 746f 6666  , cutoffs=cutoff
+000161c0: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
+000161d0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+000161e0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+000161f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016200: 2020 2020 2023 206e 6f20 6e65 7374 696e       # no nestin
+00016210: 670d 0a20 2020 2020 2020 2020 2020 2020  g..             
+00016220: 2020 2020 2020 2069 6620 6172 7261 7966         if arrayf
+00016230: 6c61 6773 2026 2053 4453 466c 6167 2e4d  lags & SDSFlag.M
+00016240: 6574 613a 0d0a 2020 2020 2020 2020 2020  eta:..          
+00016250: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00016260: 6561 7420 7570 2061 6c6c 2074 6865 2061  eat up all the a
+00016270: 7272 6179 7320 6265 6c6f 6e67 696e 6720  rrays belonging 
+00016280: 746f 2074 6869 7320 6164 7661 6e63 6564  to this advanced
+00016290: 2063 6c61 7373 0d0a 2020 2020 2020 2020   class..        
+000162a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000162b0: 6d65 7461 6279 7465 7320 3d20 6d65 7461  metabytes = meta
+000162c0: 7374 7269 6e67 6469 6374 2e67 6574 2870  stringdict.get(p
+000162d0: 7572 656e 616d 652c 204e 6f6e 6529 0d0a  urename, None)..
+000162e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000162f0: 2020 2020 2020 2020 2320 7072 696e 7428          # print(
+00016300: 222a 2a6d 6574 6120 666f 7222 2c20 7075  "**meta for", pu
+00016310: 7265 6e61 6d65 2c20 6d65 7461 6279 7465  rename, metabyte
+00016320: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
+00016330: 2020 2020 2020 2020 2020 2020 6966 206d              if m
+00016340: 6574 6162 7974 6573 2069 7320 6e6f 7420  etabytes is not 
+00016350: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+00016360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016370: 2020 206d 6574 615f 7374 7275 6374 203d     meta_struct =
+00016380: 206a 736f 6e2e 6c6f 6164 7328 6d65 7461   json.loads(meta
+00016390: 6279 7465 7329 0d0a 2020 2020 2020 2020  bytes)..        
+000163a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000163b0: 2020 2020 636c 6173 736e 616d 6520 3d20      classname = 
+000163c0: 6d65 7461 5f73 7472 7563 745b 2263 6c61  meta_struct["cla
+000163d0: 7373 6e61 6d65 225d 0d0a 2020 2020 2020  ssname"]..      
+000163e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000163f0: 2020 2020 2020 6e65 7763 6c61 7373 203d        newclass =
+00016400: 2067 6574 6174 7472 2854 7970 6552 6567   getattr(TypeReg
+00016410: 6973 7465 722c 2063 6c61 7373 6e61 6d65  ister, classname
+00016420: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00016430: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00016440: 6620 6375 746f 6666 7320 6973 206e 6f74  f cutoffs is not
+00016450: 204e 6f6e 6520 616e 6420 5479 7065 5265   None and TypeRe
+00016460: 6769 7374 6572 2e69 735f 6269 6e6e 6564  gister.is_binned
+00016470: 5f74 7970 6528 6e65 7763 6c61 7373 293a  _type(newclass):
+00016480: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 00016490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000164a0: 2020 2020 2020 2020 2020 2020 2020 6964                id
-000164b0: 785f 6375 746f 6666 7320 3d20 6375 746f  x_cutoffs = cuto
-000164c0: 6666 735b 695d 0d0a 2020 2020 2020 2020  ffs[i]..        
-000164d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000164e0: 2020 2020 2020 2020 2320 626c 696e 646c          # blindl
-000164f0: 7920 6173 7375 6d65 206e 6578 7420 7661  y assume next va
-00016500: 6c75 6520 6973 2074 6865 2063 6174 6567  lue is the categ
-00016510: 6f72 6963 616c 2075 6e69 7175 650d 0a20  orical unique.. 
+000164a0: 2020 6964 785f 6375 746f 6666 7320 3d20    idx_cutoffs = 
+000164b0: 6375 746f 6666 735b 695d 0d0a 2020 2020  cutoffs[i]..    
+000164c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000164d0: 2020 2020 2020 2020 2020 2020 2320 626c              # bl
+000164e0: 696e 646c 7920 6173 7375 6d65 206e 6578  indly assume nex
+000164f0: 7420 7661 6c75 6520 6973 2074 6865 2063  t value is the c
+00016500: 6174 6567 6f72 6963 616c 2075 6e69 7175  ategorical uniqu
+00016510: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
 00016520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016530: 2020 2020 2020 2020 2020 2020 2020 2075                 u
-00016540: 6e69 7175 655f 6375 746f 6666 7320 3d20  nique_cutoffs = 
-00016550: 5b5d 0d0a 2020 2020 2020 2020 2020 2020  []..            
-00016560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016570: 2020 2020 636f 6c73 203d 205b 5d0d 0a20      cols = [].. 
+00016530: 2020 2075 6e69 7175 655f 6375 746f 6666     unique_cutoff
+00016540: 7320 3d20 5b5d 0d0a 2020 2020 2020 2020  s = []..        
+00016550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016560: 2020 2020 2020 2020 636f 6c73 203d 205b          cols = [
+00016570: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
 00016580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016590: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-000165a0: 6869 6c65 2028 6920 2b20 3129 203c 2073  hile (i + 1) < s
-000165b0: 746f 7070 6f73 3a0d 0a20 2020 2020 2020  toppos:..       
+00016590: 2020 2077 6869 6c65 2028 6920 2b20 3129     while (i + 1)
+000165a0: 203c 2073 746f 7070 6f73 3a0d 0a20 2020   < stoppos:..   
+000165b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000165c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000165d0: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
-000165e0: 6e61 6d65 203d 206f 626a 5f61 7272 6179  name = obj_array
-000165f0: 5b69 202b 2031 5d5b 305d 0d0a 2020 2020  [i + 1][0]..    
+000165d0: 2063 6f6c 6e61 6d65 203d 206f 626a 5f61   colname = obj_a
+000165e0: 7272 6179 5b69 202b 2031 5d5b 305d 0d0a  rray[i + 1][0]..
+000165f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00016600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016620: 2320 6e6f 7465 2074 6869 7320 636f 6465  # note this code
-00016630: 2061 7373 756d 6573 2021 2069 7320 7468   assumes ! is th
-00016640: 6520 6465 6c69 6d69 7465 720d 0a20 2020  e delimiter..   
+00016610: 2020 2020 2320 6e6f 7465 2074 6869 7320      # note this 
+00016620: 636f 6465 2061 7373 756d 6573 2021 2069  code assumes ! i
+00016630: 7320 7468 6520 6465 6c69 6d69 7465 720d  s the delimiter.
+00016640: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00016650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016670: 2069 6620 6e6f 7420 636f 6c6e 616d 652e   if not colname.
-00016680: 7374 6172 7473 7769 7468 2869 7465 6d6e  startswith(itemn
-00016690: 616d 6520 2b20 2221 2229 3a0d 0a20 2020  ame + "!"):..   
+00016660: 2020 2020 2069 6620 6e6f 7420 636f 6c6e       if not coln
+00016670: 616d 652e 7374 6172 7473 7769 7468 2869  ame.startswith(i
+00016680: 7465 6d6e 616d 6520 2b20 2221 2229 3a0d  temname + "!"):.
+00016690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 000166a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000166b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000166c0: 2020 2020 2062 7265 616b 0d0a 2020 2020       break..    
+000166b0: 2020 2020 2020 2020 2062 7265 616b 0d0a           break..
+000166c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000166d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000166e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000166f0: 6920 3d20 6920 2b20 310d 0a20 2020 2020  i = i + 1..     
+000166e0: 2020 2020 6920 3d20 6920 2b20 310d 0a20      i = i + 1.. 
+000166f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00016700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016710: 2020 2020 2020 2020 2020 2020 2020 2075                 u
-00016720: 6e69 7175 655f 6375 746f 6666 732e 6170  nique_cutoffs.ap
-00016730: 7065 6e64 2863 7574 6f66 6673 5b69 5d29  pend(cutoffs[i])
-00016740: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00016750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016760: 2020 2020 2020 636f 6c73 2e61 7070 656e        cols.appen
-00016770: 6428 6f62 6a5f 6172 7261 795b 695d 5b31  d(obj_array[i][1
-00016780: 5d29 0d0a 0d0a 2020 2020 2020 2020 2020  ])....          
-00016790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000167a0: 2020 2020 2020 7661 6c75 6520 3d20 5f6d        value = _m
-000167b0: 756c 7469 7374 6163 6b5f 6361 7465 676f  ultistack_catego
-000167c0: 7269 6361 6c73 280d 0a20 2020 2020 2020  ricals(..       
+00016710: 2020 2075 6e69 7175 655f 6375 746f 6666     unique_cutoff
+00016720: 732e 6170 7065 6e64 2863 7574 6f66 6673  s.append(cutoffs
+00016730: 5b69 5d29 0d0a 2020 2020 2020 2020 2020  [i])..          
+00016740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016750: 2020 2020 2020 2020 2020 636f 6c73 2e61            cols.a
+00016760: 7070 656e 6428 6f62 6a5f 6172 7261 795b  ppend(obj_array[
+00016770: 695d 5b31 5d29 0d0a 0d0a 2020 2020 2020  i][1])....      
+00016780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016790: 2020 2020 2020 2020 2020 7661 6c75 6520            value 
+000167a0: 3d20 5f6d 756c 7469 7374 6163 6b5f 6361  = _multistack_ca
+000167b0: 7465 676f 7269 6361 6c73 280d 0a20 2020  tegoricals(..   
+000167c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000167d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000167e0: 2020 2020 2020 2020 2020 2020 2070 7572               pur
-000167f0: 656e 616d 652c 205b 6d65 7461 5f73 7472  ename, [meta_str
-00016800: 7563 745d 2c20 7661 6c75 652c 2063 6f6c  uct], value, col
-00016810: 732c 2069 6478 5f63 7574 6f66 6673 2c20  s, idx_cutoffs, 
-00016820: 756e 6971 7565 5f63 7574 6f66 6673 0d0a  unique_cutoffs..
+000167e0: 2070 7572 656e 616d 652c 205b 6d65 7461   purename, [meta
+000167f0: 5f73 7472 7563 745d 2c20 7661 6c75 652c  _struct], value,
+00016800: 2063 6f6c 732c 2069 6478 5f63 7574 6f66   cols, idx_cutof
+00016810: 6673 2c20 756e 6971 7565 5f63 7574 6f66  fs, unique_cutof
+00016820: 6673 0d0a 2020 2020 2020 2020 2020 2020  fs..            
 00016830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016850: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00016860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016870: 2020 2023 2076 616c 7565 203d 206e 6577     # value = new
-00016880: 636c 6173 732e 5f6c 6f61 645f 6672 6f6d  class._load_from
-00016890: 5f73 6473 5f6d 6574 615f 6461 7461 2870  _sds_meta_data(p
-000168a0: 7572 656e 616d 652c 2076 616c 7565 2c20  urename, value, 
-000168b0: 636f 6c73 2c20 6d65 7461 5f73 7472 7563  cols, meta_struc
-000168c0: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
-000168d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000168e0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-000168f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016900: 2020 2020 2020 2063 6f6c 7320 3d20 5b5d         cols = []
-00016910: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00016920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016930: 2020 7768 696c 6520 2869 202b 2031 2920    while (i + 1) 
-00016940: 3c20 7374 6f70 706f 733a 0d0a 2020 2020  < stoppos:..    
+00016840: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
+00016850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016860: 2020 2020 2020 2023 2076 616c 7565 203d         # value =
+00016870: 206e 6577 636c 6173 732e 5f6c 6f61 645f   newclass._load_
+00016880: 6672 6f6d 5f73 6473 5f6d 6574 615f 6461  from_sds_meta_da
+00016890: 7461 2870 7572 656e 616d 652c 2076 616c  ta(purename, val
+000168a0: 7565 2c20 636f 6c73 2c20 6d65 7461 5f73  ue, cols, meta_s
+000168b0: 7472 7563 7429 0d0a 2020 2020 2020 2020  truct)..        
+000168c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000168d0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+000168e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000168f0: 2020 2020 2020 2020 2020 2063 6f6c 7320             cols 
+00016900: 3d20 5b5d 0d0a 2020 2020 2020 2020 2020  = []..          
+00016910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016920: 2020 2020 2020 7768 696c 6520 2869 202b        while (i +
+00016930: 2031 2920 3c20 7374 6f70 706f 733a 0d0a   1) < stoppos:..
+00016940: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00016950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016970: 636f 6c6e 616d 6520 3d20 6f62 6a5f 6172  colname = obj_ar
-00016980: 7261 795b 6920 2b20 315d 5b30 5d0d 0a20  ray[i + 1][0].. 
+00016960: 2020 2020 636f 6c6e 616d 6520 3d20 6f62      colname = ob
+00016970: 6a5f 6172 7261 795b 6920 2b20 315d 5b30  j_array[i + 1][0
+00016980: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
 00016990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000169a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000169b0: 2020 2023 206e 6f74 6520 7468 6973 2063     # note this c
-000169c0: 6f64 6520 6173 7375 6d65 7320 2120 6973  ode assumes ! is
-000169d0: 2074 6865 2064 656c 696d 6974 6572 0d0a   the delimiter..
+000169a0: 2020 2020 2020 2023 206e 6f74 6520 7468         # note th
+000169b0: 6973 2063 6f64 6520 6173 7375 6d65 7320  is code assumes 
+000169c0: 2120 6973 2074 6865 2064 656c 696d 6974  ! is the delimit
+000169d0: 6572 0d0a 2020 2020 2020 2020 2020 2020  er..            
 000169e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000169f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016a00: 2020 2020 6966 206e 6f74 2063 6f6c 6e61      if not colna
-00016a10: 6d65 2e73 7461 7274 7377 6974 6828 6974  me.startswith(it
-00016a20: 656d 6e61 6d65 202b 2022 2122 293a 0d0a  emname + "!"):..
+000169f0: 2020 2020 2020 2020 6966 206e 6f74 2063          if not c
+00016a00: 6f6c 6e61 6d65 2e73 7461 7274 7377 6974  olname.startswit
+00016a10: 6828 6974 656d 6e61 6d65 202b 2022 2122  h(itemname + "!"
+00016a20: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
 00016a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016a50: 2020 2020 2020 2020 6272 6561 6b0d 0a20          break.. 
+00016a40: 2020 2020 2020 2020 2020 2020 6272 6561              brea
+00016a50: 6b0d 0a20 2020 2020 2020 2020 2020 2020  k..             
 00016a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016a80: 2020 2069 203d 2069 202b 2031 0d0a 2020     i = i + 1..  
+00016a70: 2020 2020 2020 2069 203d 2069 202b 2031         i = i + 1
+00016a80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 00016a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016ab0: 2020 636f 6c73 2e61 7070 656e 6428 6f62    cols.append(ob
-00016ac0: 6a5f 6172 7261 795b 695d 5b31 5d29 0d0a  j_array[i][1])..
+00016aa0: 2020 2020 2020 636f 6c73 2e61 7070 656e        cols.appen
+00016ab0: 6428 6f62 6a5f 6172 7261 795b 695d 5b31  d(obj_array[i][1
+00016ac0: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
 00016ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016af0: 7661 6c75 6520 3d20 6e65 7763 6c61 7373  value = newclass
-00016b00: 2e5f 6c6f 6164 5f66 726f 6d5f 7364 735f  ._load_from_sds_
-00016b10: 6d65 7461 5f64 6174 6128 7075 7265 6e61  meta_data(purena
-00016b20: 6d65 2c20 7661 6c75 652c 2063 6f6c 732c  me, value, cols,
-00016b30: 206d 6574 615f 7374 7275 6374 290d 0a0d   meta_struct)...
-00016b40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016b50: 2020 2020 2069 6620 6172 7261 7966 6c61       if arrayfla
-00016b60: 6773 2026 2053 4453 466c 6167 2e53 6361  gs & SDSFlag.Sca
-00016b70: 6c61 723a 0d0a 2020 2020 2020 2020 2020  lar:..          
-00016b80: 2020 2020 2020 2020 2020 2020 2020 7661                va
-00016b90: 6c75 6520 3d20 7661 6c75 655b 305d 0d0a  lue = value[0]..
-00016ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016bb0: 2020 2020 6e65 7773 7472 7563 745b 7075      newstruct[pu
-00016bc0: 7265 6e61 6d65 5d20 3d20 7661 6c75 650d  rename] = value.
-00016bd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016be0: 2020 2020 2069 203d 2069 202b 2031 0d0a       i = i + 1..
-00016bf0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00016c00: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00016c10: 2020 2069 203d 2069 202b 2031 0d0a 0d0a     i = i + 1....
-00016c20: 2020 2020 2020 2020 2320 6368 6563 6b20          # check 
-00016c30: 6966 2069 6e20 6d69 6464 6c65 206f 6620  if in middle of 
-00016c40: 7072 6f63 6573 7369 6e67 0d0a 2020 2020  processing..    
-00016c50: 2020 2020 6e65 7763 6c61 7373 203d 2062      newclass = b
-00016c60: 7569 6c64 5f63 6c61 7373 5f6e 6573 7465  uild_class_neste
-00016c70: 6428 6d65 7461 7374 7269 6e67 6469 6374  d(metastringdict
-00016c80: 2e67 6574 2822 5f72 6f6f 7422 2c20 4e6f  .get("_root", No
-00016c90: 6e65 292c 206e 6577 7374 7275 6374 290d  ne), newstruct).
-00016ca0: 0a0d 0a20 2020 2020 2020 2069 6620 7374  ...        if st
-00016cb0: 6172 7470 6f73 2021 3d20 303a 0d0a 2020  artpos != 0:..  
-00016cc0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00016cd0: 206e 6577 636c 6173 732c 2069 0d0a 2020   newclass, i..  
-00016ce0: 2020 2020 2020 2020 2020 2320 7265 7475            # retu
-00016cf0: 726e 2053 7472 7563 7428 6e65 7773 7472  rn Struct(newstr
-00016d00: 7563 7429 2c20 690d 0a20 2020 2020 2020  uct), i..       
-00016d10: 2072 6574 7572 6e20 6e65 7763 6c61 7373   return newclass
-00016d20: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+00016ae0: 2020 2020 7661 6c75 6520 3d20 6e65 7763      value = newc
+00016af0: 6c61 7373 2e5f 6c6f 6164 5f66 726f 6d5f  lass._load_from_
+00016b00: 7364 735f 6d65 7461 5f64 6174 6128 7075  sds_meta_data(pu
+00016b10: 7265 6e61 6d65 2c20 7661 6c75 652c 2063  rename, value, c
+00016b20: 6f6c 732c 206d 6574 615f 7374 7275 6374  ols, meta_struct
+00016b30: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00016b40: 2020 2020 2020 2020 2069 6620 6172 7261           if arra
+00016b50: 7966 6c61 6773 2026 2053 4453 466c 6167  yflags & SDSFlag
+00016b60: 2e53 6361 6c61 723a 0d0a 2020 2020 2020  .Scalar:..      
+00016b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016b80: 2020 7661 6c75 6520 3d20 7661 6c75 655b    value = value[
+00016b90: 305d 0d0a 2020 2020 2020 2020 2020 2020  0]..            
+00016ba0: 2020 2020 2020 2020 6e65 7773 7472 7563          newstruc
+00016bb0: 745b 7075 7265 6e61 6d65 5d20 3d20 7661  t[purename] = va
+00016bc0: 6c75 650d 0a20 2020 2020 2020 2020 2020  lue..           
+00016bd0: 2020 2020 2020 2020 2069 203d 2069 202b           i = i +
+00016be0: 2031 0d0a 2020 2020 2020 2020 2020 2020   1..            
+00016bf0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00016c00: 2020 2020 2020 2069 203d 2069 202b 2031         i = i + 1
+00016c10: 0d0a 0d0a 2020 2020 2020 2020 2320 6368  ....        # ch
+00016c20: 6563 6b20 6966 2069 6e20 6d69 6464 6c65  eck if in middle
+00016c30: 206f 6620 7072 6f63 6573 7369 6e67 0d0a   of processing..
+00016c40: 2020 2020 2020 2020 6e65 7763 6c61 7373          newclass
+00016c50: 203d 2062 7569 6c64 5f63 6c61 7373 5f6e   = build_class_n
+00016c60: 6573 7465 6428 6d65 7461 7374 7269 6e67  ested(metastring
+00016c70: 6469 6374 2e67 6574 2822 5f72 6f6f 7422  dict.get("_root"
+00016c80: 2c20 4e6f 6e65 292c 206e 6577 7374 7275  , None), newstru
+00016c90: 6374 290d 0a0d 0a20 2020 2020 2020 2069  ct)....        i
+00016ca0: 6620 7374 6172 7470 6f73 2021 3d20 303a  f startpos != 0:
+00016cb0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+00016cc0: 7475 726e 206e 6577 636c 6173 732c 2069  turn newclass, i
+00016cd0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00016ce0: 7265 7475 726e 2053 7472 7563 7428 6e65  return Struct(ne
+00016cf0: 7773 7472 7563 7429 2c20 690d 0a20 2020  wstruct), i..   
+00016d00: 2020 2020 2072 6574 7572 6e20 6e65 7763       return newc
+00016d10: 6c61 7373 0d0a 0d0a 2020 2020 2320 2d2d  lass....    # --
+00016d20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00016d30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00016d40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016d50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016d60: 2d0d 0a20 2020 2040 636c 6173 736d 6574  -..    @classmet
-00016d70: 686f 640d 0a20 2020 2064 6566 205f 6672  hod..    def _fr
-00016d80: 6f6d 5f73 6473 5f6f 6e65 6669 6c65 2863  om_sds_onefile(c
-00016d90: 6c73 2c20 6172 7273 2c20 6d65 7461 5f74  ls, arrs, meta_t
-00016da0: 7570 732c 206d 6574 613d 4e6f 6e65 2c20  ups, meta=None, 
-00016db0: 666f 6c64 6572 733d 4e6f 6e65 293a 0d0a  folders=None):..
-00016dc0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00016dd0: 2020 2020 2053 7065 6369 616c 2072 6f75       Special rou
-00016de0: 7469 6e65 2063 616c 6c65 6420 6166 7465  tine called afte
-00016df0: 7220 6c6f 6164 696e 6720 616e 2053 4453  r loading an SDS
-00016e00: 206f 6e65 6669 6c65 2074 6f20 7265 2d65   onefile to re-e
-00016e10: 7870 616e 640d 0a20 2020 2020 2020 2022  xpand..        "
-00016e20: 2222 0d0a 2020 2020 2020 2020 7365 7020  ""..        sep 
-00016e30: 3d20 222f 220d 0a20 2020 2020 2020 2073  = "/"..        s
-00016e40: 7461 7274 6e61 6d65 203d 2022 220d 0a0d  tartname = ""...
-00016e50: 0a20 2020 2020 2020 2023 2054 4f44 4f3a  .        # TODO:
-00016e60: 206d 6f76 6520 7468 6973 2072 6f75 7469   move this routi
-00016e70: 6e65 2074 6f20 5374 7275 6374 0d0a 2020  ne to Struct..  
-00016e80: 2020 2020 2020 2320 6275 696c 6420 616e        # build an
-00016e90: 2061 7272 6179 206f 6620 6f62 6a65 6374   array of object
-00016ea0: 7320 2863 6f6c 6e61 6d65 2c20 7661 6c75  s (colname, valu
-00016eb0: 652c 2061 7272 6179 666c 6167 2920 2d20  e, arrayflag) - 
-00016ec0: 7265 7175 6972 6564 2074 6f20 7265 7665  required to reve
-00016ed0: 7273 6520 666c 6174 7465 6e0d 0a20 2020  rse flatten..   
-00016ee0: 2020 2020 206f 626a 5f61 7272 6179 203d       obj_array =
-00016ef0: 206e 702e 656d 7074 7928 6c65 6e28 6172   np.empty(len(ar
-00016f00: 7273 292c 2064 7479 7065 3d22 4f22 290d  rs), dtype="O").
-00016f10: 0a20 2020 2020 2020 2066 6f72 2069 2c20  .        for i, 
-00016f20: 2861 7272 2c20 2863 6f6c 6e61 6d65 2c20  (arr, (colname, 
-00016f30: 6166 2929 2069 6e20 656e 756d 6572 6174  af)) in enumerat
-00016f40: 6528 7a69 7028 6172 7273 2c20 6d65 7461  e(zip(arrs, meta
-00016f50: 5f74 7570 7329 293a 0d0a 2020 2020 2020  _tups)):..      
-00016f60: 2020 2020 2020 6f62 6a5f 6172 7261 795b        obj_array[
-00016f70: 695d 203d 2028 636f 6c6e 616d 652e 6465  i] = (colname.de
-00016f80: 636f 6465 2829 2c20 6172 722c 2061 6629  code(), arr, af)
-00016f90: 0d0a 0d0a 2020 2020 2020 2020 6e65 7773  ....        news
-00016fa0: 7472 7563 7420 3d20 5479 7065 5265 6769  truct = TypeRegi
-00016fb0: 7374 6572 2e53 7472 7563 742e 5f66 6c61  ster.Struct._fla
-00016fc0: 7474 656e 5f75 6e64 6f28 7365 702c 2030  tten_undo(sep, 0
-00016fd0: 2c20 7374 6172 746e 616d 652c 206f 626a  , startname, obj
-00016fe0: 5f61 7272 6179 2c20 6d65 7461 3d6d 6574  _array, meta=met
-00016ff0: 6129 0d0a 0d0a 2020 2020 2020 2020 2320  a)....        # 
-00017000: 666f 7220 6a75 7374 206f 6e65 2066 6f6c  for just one fol
-00017010: 6465 722c 2072 6574 7572 6e20 7468 6520  der, return the 
-00017020: 6163 7475 616c 2044 6174 6173 6574 206f  actual Dataset o
-00017030: 7220 5374 7275 6374 206f 626a 6563 740d  r Struct object.
-00017040: 0a20 2020 2020 2020 2069 6620 666f 6c64  .        if fold
-00017050: 6572 7320 6973 206e 6f74 204e 6f6e 6520  ers is not None 
-00017060: 616e 6420 6c65 6e28 666f 6c64 6572 7329  and len(folders)
-00017070: 203d 3d20 313a 0d0a 2020 2020 2020 2020   == 1:..        
-00017080: 2020 2020 2320 7265 6d6f 7665 2074 6865      # remove the
-00017090: 206c 6173 7420 2f0d 0a20 2020 2020 2020   last /..       
-000170a0: 2020 2020 206e 6577 7374 7275 6374 203d       newstruct =
-000170b0: 206e 6577 7374 7275 6374 5b66 6f6c 6465   newstruct[folde
-000170c0: 7273 5b30 5d5b 3a2d 315d 5d0d 0a20 2020  rs[0][:-1]]..   
-000170d0: 2020 2020 2072 6574 7572 6e20 6e65 7773       return news
-000170e0: 7472 7563 740d 0a0d 0a20 2020 2023 202d  truct....    # -
+00016d50: 2d2d 2d2d 2d0d 0a20 2020 2040 636c 6173  -----..    @clas
+00016d60: 736d 6574 686f 640d 0a20 2020 2064 6566  smethod..    def
+00016d70: 205f 6672 6f6d 5f73 6473 5f6f 6e65 6669   _from_sds_onefi
+00016d80: 6c65 2863 6c73 2c20 6172 7273 2c20 6d65  le(cls, arrs, me
+00016d90: 7461 5f74 7570 732c 206d 6574 613d 4e6f  ta_tups, meta=No
+00016da0: 6e65 2c20 666f 6c64 6572 733d 4e6f 6e65  ne, folders=None
+00016db0: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
+00016dc0: 0a20 2020 2020 2020 2053 7065 6369 616c  .        Special
+00016dd0: 2072 6f75 7469 6e65 2063 616c 6c65 6420   routine called 
+00016de0: 6166 7465 7220 6c6f 6164 696e 6720 616e  after loading an
+00016df0: 2053 4453 206f 6e65 6669 6c65 2074 6f20   SDS onefile to 
+00016e00: 7265 2d65 7870 616e 640d 0a20 2020 2020  re-expand..     
+00016e10: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00016e20: 7365 7020 3d20 222f 220d 0a20 2020 2020  sep = "/"..     
+00016e30: 2020 2073 7461 7274 6e61 6d65 203d 2022     startname = "
+00016e40: 220d 0a0d 0a20 2020 2020 2020 2023 2054  "....        # T
+00016e50: 4f44 4f3a 206d 6f76 6520 7468 6973 2072  ODO: move this r
+00016e60: 6f75 7469 6e65 2074 6f20 5374 7275 6374  outine to Struct
+00016e70: 0d0a 2020 2020 2020 2020 2320 6275 696c  ..        # buil
+00016e80: 6420 616e 2061 7272 6179 206f 6620 6f62  d an array of ob
+00016e90: 6a65 6374 7320 2863 6f6c 6e61 6d65 2c20  jects (colname, 
+00016ea0: 7661 6c75 652c 2061 7272 6179 666c 6167  value, arrayflag
+00016eb0: 2920 2d20 7265 7175 6972 6564 2074 6f20  ) - required to 
+00016ec0: 7265 7665 7273 6520 666c 6174 7465 6e0d  reverse flatten.
+00016ed0: 0a20 2020 2020 2020 206f 626a 5f61 7272  .        obj_arr
+00016ee0: 6179 203d 206e 702e 656d 7074 7928 6c65  ay = np.empty(le
+00016ef0: 6e28 6172 7273 292c 2064 7479 7065 3d22  n(arrs), dtype="
+00016f00: 4f22 290d 0a20 2020 2020 2020 2066 6f72  O")..        for
+00016f10: 2069 2c20 2861 7272 2c20 2863 6f6c 6e61   i, (arr, (colna
+00016f20: 6d65 2c20 6166 2929 2069 6e20 656e 756d  me, af)) in enum
+00016f30: 6572 6174 6528 7a69 7028 6172 7273 2c20  erate(zip(arrs, 
+00016f40: 6d65 7461 5f74 7570 7329 293a 0d0a 2020  meta_tups)):..  
+00016f50: 2020 2020 2020 2020 2020 6f62 6a5f 6172            obj_ar
+00016f60: 7261 795b 695d 203d 2028 636f 6c6e 616d  ray[i] = (colnam
+00016f70: 652e 6465 636f 6465 2829 2c20 6172 722c  e.decode(), arr,
+00016f80: 2061 6629 0d0a 0d0a 2020 2020 2020 2020   af)....        
+00016f90: 6e65 7773 7472 7563 7420 3d20 5479 7065  newstruct = Type
+00016fa0: 5265 6769 7374 6572 2e53 7472 7563 742e  Register.Struct.
+00016fb0: 5f66 6c61 7474 656e 5f75 6e64 6f28 7365  _flatten_undo(se
+00016fc0: 702c 2030 2c20 7374 6172 746e 616d 652c  p, 0, startname,
+00016fd0: 206f 626a 5f61 7272 6179 2c20 6d65 7461   obj_array, meta
+00016fe0: 3d6d 6574 6129 0d0a 0d0a 2020 2020 2020  =meta)....      
+00016ff0: 2020 2320 666f 7220 6a75 7374 206f 6e65    # for just one
+00017000: 2066 6f6c 6465 722c 2072 6574 7572 6e20   folder, return 
+00017010: 7468 6520 6163 7475 616c 2044 6174 6173  the actual Datas
+00017020: 6574 206f 7220 5374 7275 6374 206f 626a  et or Struct obj
+00017030: 6563 740d 0a20 2020 2020 2020 2069 6620  ect..        if 
+00017040: 666f 6c64 6572 7320 6973 206e 6f74 204e  folders is not N
+00017050: 6f6e 6520 616e 6420 6c65 6e28 666f 6c64  one and len(fold
+00017060: 6572 7329 203d 3d20 313a 0d0a 2020 2020  ers) == 1:..    
+00017070: 2020 2020 2020 2020 2320 7265 6d6f 7665          # remove
+00017080: 2074 6865 206c 6173 7420 2f0d 0a20 2020   the last /..   
+00017090: 2020 2020 2020 2020 206e 6577 7374 7275           newstru
+000170a0: 6374 203d 206e 6577 7374 7275 6374 5b66  ct = newstruct[f
+000170b0: 6f6c 6465 7273 5b30 5d5b 3a2d 315d 5d0d  olders[0][:-1]].
+000170c0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000170d0: 6e65 7773 7472 7563 740d 0a0d 0a20 2020  newstruct....   
+000170e0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
 000170f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00017100: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017110: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017120: 2d2d 2d2d 2d2d 0d0a 2020 2020 4070 726f  ------..    @pro
-00017130: 7065 7274 790d 0a20 2020 2064 6566 2068  perty..    def h
-00017140: 6173 5f6e 6573 7465 645f 636f 6e74 6169  as_nested_contai
-00017150: 6e65 7273 2873 656c 6629 202d 3e20 626f  ners(self) -> bo
-00017160: 6f6c 3a0d 0a20 2020 2020 2020 2022 2222  ol:..        """
-00017170: 626f 6f6c 3a20 5472 7565 2069 6620 7468  bool: True if th
-00017180: 6520 5374 7275 6374 2063 6f6e 7461 696e  e Struct contain
-00017190: 7320 6f74 6865 7220 5374 7275 6374 2d6c  s other Struct-l
-000171a0: 696b 6520 6f62 6a65 6374 732e 2222 220d  ike objects.""".
-000171b0: 0a20 2020 2020 2020 2068 6173 5f6e 6573  .        has_nes
-000171c0: 7465 6420 3d20 4661 6c73 650d 0a20 2020  ted = False..   
-000171d0: 2020 2020 2066 6f72 2076 2069 6e20 7365       for v in se
-000171e0: 6c66 2e76 616c 7565 7328 293a 0d0a 2020  lf.values():..  
-000171f0: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-00017200: 6e73 7461 6e63 6528 762c 2053 7472 7563  nstance(v, Struc
-00017210: 7429 3a0d 0a20 2020 2020 2020 2020 2020  t):..           
-00017220: 2020 2020 2068 6173 5f6e 6573 7465 6420       has_nested 
-00017230: 3d20 5472 7565 0d0a 2020 2020 2020 2020  = True..        
-00017240: 2020 2020 2020 2020 6272 6561 6b0d 0a20          break.. 
-00017250: 2020 2020 2020 2072 6574 7572 6e20 6861         return ha
-00017260: 735f 6e65 7374 6564 0d0a 0d0a 2020 2020  s_nested....    
-00017270: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+00017110: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+00017120: 4070 726f 7065 7274 790d 0a20 2020 2064  @property..    d
+00017130: 6566 2068 6173 5f6e 6573 7465 645f 636f  ef has_nested_co
+00017140: 6e74 6169 6e65 7273 2873 656c 6629 202d  ntainers(self) -
+00017150: 3e20 626f 6f6c 3a0d 0a20 2020 2020 2020  > bool:..       
+00017160: 2022 2222 626f 6f6c 3a20 5472 7565 2069   """bool: True i
+00017170: 6620 7468 6520 5374 7275 6374 2063 6f6e  f the Struct con
+00017180: 7461 696e 7320 6f74 6865 7220 5374 7275  tains other Stru
+00017190: 6374 2d6c 696b 6520 6f62 6a65 6374 732e  ct-like objects.
+000171a0: 2222 220d 0a20 2020 2020 2020 2068 6173  """..        has
+000171b0: 5f6e 6573 7465 6420 3d20 4661 6c73 650d  _nested = False.
+000171c0: 0a20 2020 2020 2020 2066 6f72 2076 2069  .        for v i
+000171d0: 6e20 7365 6c66 2e76 616c 7565 7328 293a  n self.values():
+000171e0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+000171f0: 2069 7369 6e73 7461 6e63 6528 762c 2053   isinstance(v, S
+00017200: 7472 7563 7429 3a0d 0a20 2020 2020 2020  truct):..       
+00017210: 2020 2020 2020 2020 2068 6173 5f6e 6573           has_nes
+00017220: 7465 6420 3d20 5472 7565 0d0a 2020 2020  ted = True..    
+00017230: 2020 2020 2020 2020 2020 2020 6272 6561              brea
+00017240: 6b0d 0a20 2020 2020 2020 2072 6574 7572  k..        retur
+00017250: 6e20 6861 735f 6e65 7374 6564 0d0a 0d0a  n has_nested....
+00017260: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00017270: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00017280: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017290: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000172a0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2040  ---------..    @
-000172b0: 7072 6f70 6572 7479 0d0a 2020 2020 6465  property..    de
-000172c0: 6620 7368 6170 6528 7365 6c66 293a 0d0a  f shape(self):..
-000172d0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-000172e0: 2020 2020 2052 6574 7572 6e20 7468 6520       Return the 
-000172f0: 6e75 6d62 6572 206f 6620 726f 7773 2061  number of rows a
-00017300: 6e64 2063 6f6c 756d 6e73 2e0d 0a0d 0a20  nd columns..... 
-00017310: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
-00017320: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
-00017330: 0a20 2020 2020 2020 2074 7570 6c65 206f  .        tuple o
-00017340: 6620 696e 740d 0a20 2020 2020 2020 2020  f int..         
-00017350: 2020 204e 756d 6265 7220 6f66 2072 6f77     Number of row
-00017360: 732c 2063 6f6c 756d 6e73 2e0d 0a0d 0a20  s, columns..... 
-00017370: 2020 2020 2020 2053 6565 2041 6c73 6f0d         See Also.
-00017380: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00017390: 2d0d 0a20 2020 2020 2020 2072 6970 7461  -..        ripta
-000173a0: 626c 652e 7265 7368 6170 650d 0a20 2020  ble.reshape..   
-000173b0: 2020 2020 2020 2020 2052 6574 7572 6e20           Return 
-000173c0: 616e 2061 7272 6179 2063 6f6e 7461 696e  an array contain
-000173d0: 696e 6720 7468 6520 7361 6d65 2064 6174  ing the same dat
-000173e0: 6120 7769 7468 2061 206e 6577 2073 6861  a with a new sha
-000173f0: 7065 2e0d 0a20 2020 2020 2020 2046 6173  pe...        Fas
-00017400: 7441 7272 6179 2e72 6573 6861 7065 0d0a  tArray.reshape..
-00017410: 2020 2020 2020 2020 2020 2020 5265 7475              Retu
-00017420: 726e 2061 6e20 6172 7261 7920 636f 6e74  rn an array cont
-00017430: 6169 6e69 6e67 2074 6865 2073 616d 6520  aining the same 
-00017440: 6461 7461 2077 6974 6820 6120 6e65 7720  data with a new 
-00017450: 7368 6170 652e 0d0a 0d0a 2020 2020 2020  shape.....      
-00017460: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
-00017470: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
-00017480: 2020 2020 2020 3e3e 3e20 6473 203d 2072        >>> ds = r
-00017490: 742e 4461 7461 7365 7428 7b22 6f6e 6522  t.Dataset({"one"
-000174a0: 3a20 7274 2e61 7261 6e67 6528 3329 2c20  : rt.arange(3), 
-000174b0: 2274 776f 223a 2072 742e 6172 616e 6765  "two": rt.arange
-000174c0: 2833 2920 2520 327d 290d 0a20 2020 2020  (3) % 2})..     
-000174d0: 2020 203e 3e3e 2064 730d 0a20 2020 2020     >>> ds..     
-000174e0: 2020 2023 2020 206f 6e65 2020 2074 776f     #   one   two
-000174f0: 0d0a 2020 2020 2020 2020 2d20 2020 2d2d  ..        -   --
-00017500: 2d20 2020 2d2d 2d0d 0a20 2020 2020 2020  -   ---..       
-00017510: 2030 2020 2020 2030 2020 2020 2030 0d0a   0     0     0..
-00017520: 2020 2020 2020 2020 3120 2020 2020 3120          1     1 
-00017530: 2020 2020 310d 0a20 2020 2020 2020 2032      1..        2
-00017540: 2020 2020 2032 2020 2020 2030 0d0a 2020       2     0..  
-00017550: 2020 2020 2020 3e3e 3e20 6473 2e73 6861        >>> ds.sha
-00017560: 7065 0d0a 2020 2020 2020 2020 2833 2c20  pe..        (3, 
-00017570: 3229 0d0a 2020 2020 2020 2020 2222 220d  2)..        """.
-00017580: 0a20 2020 2020 2020 2069 6620 6861 7361  .        if hasa
-00017590: 7474 7228 7365 6c66 2c20 225f 6e72 6f77  ttr(self, "_nrow
-000175a0: 7322 2920 616e 6420 7365 6c66 2e5f 6e72  s") and self._nr
-000175b0: 6f77 7320 6973 206e 6f74 204e 6f6e 653a  ows is not None:
-000175c0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-000175d0: 7475 726e 2073 656c 662e 5f6e 726f 7773  turn self._nrows
-000175e0: 2c20 7365 6c66 2e5f 6e63 6f6c 730d 0a20  , self._ncols.. 
-000175f0: 2020 2020 2020 2072 6574 7572 6e20 302c         return 0,
-00017600: 2073 656c 662e 5f6e 636f 6c73 0d0a 0d0a   self._ncols....
-00017610: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00017290: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
+000172a0: 2020 2040 7072 6f70 6572 7479 0d0a 2020     @property..  
+000172b0: 2020 6465 6620 7368 6170 6528 7365 6c66    def shape(self
+000172c0: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
+000172d0: 0a20 2020 2020 2020 2052 6574 7572 6e20  .        Return 
+000172e0: 7468 6520 6e75 6d62 6572 206f 6620 726f  the number of ro
+000172f0: 7773 2061 6e64 2063 6f6c 756d 6e73 2e0d  ws and columns..
+00017300: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+00017310: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
+00017320: 2d2d 2d0d 0a20 2020 2020 2020 2074 7570  ---..        tup
+00017330: 6c65 206f 6620 696e 740d 0a20 2020 2020  le of int..     
+00017340: 2020 2020 2020 204e 756d 6265 7220 6f66         Number of
+00017350: 2072 6f77 732c 2063 6f6c 756d 6e73 2e0d   rows, columns..
+00017360: 0a0d 0a20 2020 2020 2020 2053 6565 2041  ...        See A
+00017370: 6c73 6f0d 0a20 2020 2020 2020 202d 2d2d  lso..        ---
+00017380: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2072  -----..        r
+00017390: 6970 7461 626c 652e 7265 7368 6170 650d  iptable.reshape.
+000173a0: 0a20 2020 2020 2020 2020 2020 2052 6574  .            Ret
+000173b0: 7572 6e20 616e 2061 7272 6179 2063 6f6e  urn an array con
+000173c0: 7461 696e 696e 6720 7468 6520 7361 6d65  taining the same
+000173d0: 2064 6174 6120 7769 7468 2061 206e 6577   data with a new
+000173e0: 2073 6861 7065 2e0d 0a20 2020 2020 2020   shape...       
+000173f0: 2046 6173 7441 7272 6179 2e72 6573 6861   FastArray.resha
+00017400: 7065 0d0a 2020 2020 2020 2020 2020 2020  pe..            
+00017410: 5265 7475 726e 2061 6e20 6172 7261 7920  Return an array 
+00017420: 636f 6e74 6169 6e69 6e67 2074 6865 2073  containing the s
+00017430: 616d 6520 6461 7461 2077 6974 6820 6120  ame data with a 
+00017440: 6e65 7720 7368 6170 652e 0d0a 0d0a 2020  new shape.....  
+00017450: 2020 2020 2020 4578 616d 706c 6573 0d0a        Examples..
+00017460: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+00017470: 0d0a 2020 2020 2020 2020 3e3e 3e20 6473  ..        >>> ds
+00017480: 203d 2072 742e 4461 7461 7365 7428 7b22   = rt.Dataset({"
+00017490: 6f6e 6522 3a20 7274 2e61 7261 6e67 6528  one": rt.arange(
+000174a0: 3329 2c20 2274 776f 223a 2072 742e 6172  3), "two": rt.ar
+000174b0: 616e 6765 2833 2920 2520 327d 290d 0a20  ange(3) % 2}).. 
+000174c0: 2020 2020 2020 203e 3e3e 2064 730d 0a20         >>> ds.. 
+000174d0: 2020 2020 2020 2023 2020 206f 6e65 2020         #   one  
+000174e0: 2074 776f 0d0a 2020 2020 2020 2020 2d20   two..        - 
+000174f0: 2020 2d2d 2d20 2020 2d2d 2d0d 0a20 2020    ---   ---..   
+00017500: 2020 2020 2030 2020 2020 2030 2020 2020       0     0    
+00017510: 2030 0d0a 2020 2020 2020 2020 3120 2020   0..        1   
+00017520: 2020 3120 2020 2020 310d 0a20 2020 2020    1     1..     
+00017530: 2020 2032 2020 2020 2032 2020 2020 2030     2     2     0
+00017540: 0d0a 2020 2020 2020 2020 3e3e 3e20 6473  ..        >>> ds
+00017550: 2e73 6861 7065 0d0a 2020 2020 2020 2020  .shape..        
+00017560: 2833 2c20 3229 0d0a 2020 2020 2020 2020  (3, 2)..        
+00017570: 2222 220d 0a20 2020 2020 2020 2069 6620  """..        if 
+00017580: 6861 7361 7474 7228 7365 6c66 2c20 225f  hasattr(self, "_
+00017590: 6e72 6f77 7322 2920 616e 6420 7365 6c66  nrows") and self
+000175a0: 2e5f 6e72 6f77 7320 6973 206e 6f74 204e  ._nrows is not N
+000175b0: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+000175c0: 2020 7265 7475 726e 2073 656c 662e 5f6e    return self._n
+000175d0: 726f 7773 2c20 7365 6c66 2e5f 6e63 6f6c  rows, self._ncol
+000175e0: 730d 0a20 2020 2020 2020 2072 6574 7572  s..        retur
+000175f0: 6e20 302c 2073 656c 662e 5f6e 636f 6c73  n 0, self._ncols
+00017600: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+00017610: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00017620: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00017630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
-00017650: 2020 2064 6566 2067 6574 5f6e 726f 7773     def get_nrows
-00017660: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-00017670: 2022 2222 0d0a 2020 2020 2020 2020 5265   """..        Re
-00017680: 7475 6e72 7320 302c 2061 7320 6120 5374  tunrs 0, as a St
-00017690: 7275 6374 2068 6173 206e 6f20 726f 7773  ruct has no rows
-000176a0: 2e0d 0a0d 0a20 2020 2020 2020 2052 6574  .....        Ret
-000176b0: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
-000176c0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2069  -----..        i
-000176d0: 6e74 0d0a 2020 2020 2020 2020 2020 2020  nt..            
-000176e0: 300d 0a0d 0a20 2020 2020 2020 204e 6f74  0....        Not
-000176f0: 650d 0a20 2020 2020 2020 202d 2d2d 2d0d  e..        ----.
-00017700: 0a20 2020 2020 2020 2053 7562 636c 6173  .        Subclas
-00017710: 7365 7320 6e65 6564 2074 6f20 6465 6669  ses need to defi
-00017720: 6e65 2074 6869 7320 6578 706c 6963 6974  ne this explicit
-00017730: 6c79 2e0d 0a20 2020 2020 2020 2022 2222  ly...        """
-00017740: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00017750: 2030 0d0a 0d0a 2020 2020 2320 2d2d 2d2d   0....    # ----
+00017640: 2d0d 0a20 2020 2064 6566 2067 6574 5f6e  -..    def get_n
+00017650: 726f 7773 2873 656c 6629 3a0d 0a20 2020  rows(self):..   
+00017660: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00017670: 2020 5265 7475 6e72 7320 302c 2061 7320    Retunrs 0, as 
+00017680: 6120 5374 7275 6374 2068 6173 206e 6f20  a Struct has no 
+00017690: 726f 7773 2e0d 0a0d 0a20 2020 2020 2020  rows.....       
+000176a0: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
+000176b0: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
+000176c0: 2020 2069 6e74 0d0a 2020 2020 2020 2020     int..        
+000176d0: 2020 2020 300d 0a0d 0a20 2020 2020 2020      0....       
+000176e0: 204e 6f74 650d 0a20 2020 2020 2020 202d   Note..        -
+000176f0: 2d2d 2d0d 0a20 2020 2020 2020 2053 7562  ---..        Sub
+00017700: 636c 6173 7365 7320 6e65 6564 2074 6f20  classes need to 
+00017710: 6465 6669 6e65 2074 6869 7320 6578 706c  define this expl
+00017720: 6963 6974 6c79 2e0d 0a20 2020 2020 2020  icitly...       
+00017730: 2022 2222 0d0a 2020 2020 2020 2020 7265   """..        re
+00017740: 7475 726e 2030 0d0a 0d0a 2020 2020 2320  turn 0....    # 
+00017750: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00017760: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00017770: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017780: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017790: 2d2d 2d0d 0a20 2020 2064 6566 2067 6574  ---..    def get
-000177a0: 5f6e 636f 6c73 2873 656c 6629 3a0d 0a20  _ncols(self):.. 
-000177b0: 2020 2020 2020 2022 2222 5265 7475 726e         """Return
-000177c0: 2074 6865 206e 756d 6265 7220 6f66 2069   the number of i
-000177d0: 7465 6d73 2069 6e20 7468 6520 5374 7275  tems in the Stru
-000177e0: 6374 2e0d 0a0d 0a20 2020 2020 2020 2052  ct.....        R
-000177f0: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
-00017800: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-00017810: 206e 636f 6c73 203a 2069 6e74 0d0a 2020   ncols : int..  
-00017820: 2020 2020 2020 2020 2020 5468 6520 6e75            The nu
-00017830: 6d62 6572 206f 6620 6974 656d 7320 696e  mber of items in
-00017840: 2074 6865 2053 7472 7563 740d 0a20 2020   the Struct..   
-00017850: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00017860: 2020 7265 7475 726e 2073 656c 662e 5f6e    return self._n
-00017870: 636f 6c73 0d0a 0d0a 2020 2020 2320 2d2d  cols....    # --
+00017780: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
+00017790: 2067 6574 5f6e 636f 6c73 2873 656c 6629   get_ncols(self)
+000177a0: 3a0d 0a20 2020 2020 2020 2022 2222 5265  :..        """Re
+000177b0: 7475 726e 2074 6865 206e 756d 6265 7220  turn the number 
+000177c0: 6f66 2069 7465 6d73 2069 6e20 7468 6520  of items in the 
+000177d0: 5374 7275 6374 2e0d 0a0d 0a20 2020 2020  Struct.....     
+000177e0: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
+000177f0: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
+00017800: 2020 2020 206e 636f 6c73 203a 2069 6e74       ncols : int
+00017810: 0d0a 2020 2020 2020 2020 2020 2020 5468  ..            Th
+00017820: 6520 6e75 6d62 6572 206f 6620 6974 656d  e number of item
+00017830: 7320 696e 2074 6865 2053 7472 7563 740d  s in the Struct.
+00017840: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00017850: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00017860: 662e 5f6e 636f 6c73 0d0a 0d0a 2020 2020  f._ncols....    
+00017870: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
 00017880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00017890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000178a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000178b0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-000178c0: 6465 6620 6b65 7973 2873 656c 6629 3a0d  def keys(self):.
-000178d0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-000178e0: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
-000178f0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
-00017900: 2020 2020 2020 2020 6c69 7374 0d0a 2020          list..  
-00017910: 2020 2020 2020 2020 2020 4974 656d 206e            Item n
-00017920: 616d 6573 2e0d 0a20 2020 2020 2020 2022  ames...        "
-00017930: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
-00017940: 726e 2073 656c 662e 5f61 6c6c 5f69 7465  rn self._all_ite
-00017950: 6d73 2e6b 6579 7328 290d 0a0d 0a20 2020  ms.keys()....   
-00017960: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+000178a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+000178b0: 2020 2020 6465 6620 6b65 7973 2873 656c      def keys(sel
+000178c0: 6629 3a0d 0a20 2020 2020 2020 2022 2222  f):..        """
+000178d0: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+000178e0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+000178f0: 2d2d 0d0a 2020 2020 2020 2020 6c69 7374  --..        list
+00017900: 0d0a 2020 2020 2020 2020 2020 2020 4974  ..            It
+00017910: 656d 206e 616d 6573 2e0d 0a20 2020 2020  em names...     
+00017920: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00017930: 7265 7475 726e 2073 656c 662e 5f61 6c6c  return self._all
+00017940: 5f69 7465 6d73 2e6b 6579 7328 290d 0a0d  _items.keys()...
+00017950: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+00017960: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00017970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00017980: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017990: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
-000179a0: 0a20 2020 2064 6566 2076 616c 7565 7328  .    def values(
-000179b0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-000179c0: 2222 220d 0a20 2020 2020 2020 2056 616c  """..        Val
-000179d0: 7565 7320 6172 6520 696e 6469 7669 6475  ues are individu
-000179e0: 616c 2069 7465 6d73 2066 726f 6d20 7468  al items from th
-000179f0: 6520 7374 7275 6374 2028 6e6f 2061 7474  e struct (no att
-00017a00: 7269 6275 7465 2066 726f 6d20 6974 656d  ribute from item
-00017a10: 2063 6f6e 7461 696e 6572 292e 0d0a 0d0a   container).....
-00017a20: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
-00017a30: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00017a40: 0d0a 2020 2020 2020 2020 6469 6374 5f76  ..        dict_v
-00017a50: 616c 7565 730d 0a20 2020 2020 2020 2020  alues..         
-00017a60: 2020 2049 7465 6d73 2e0d 0a20 2020 2020     Items...     
-00017a70: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00017a80: 7265 7475 726e 2073 656c 662e 5f61 735f  return self._as_
-00017a90: 6469 6374 696f 6e61 7279 2829 2e76 616c  dictionary().val
-00017aa0: 7565 7328 290d 0a0d 0a20 2020 2023 202d  ues()....    # -
+00017990: 2d2d 2d0d 0a20 2020 2064 6566 2076 616c  ---..    def val
+000179a0: 7565 7328 7365 6c66 293a 0d0a 2020 2020  ues(self):..    
+000179b0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+000179c0: 2056 616c 7565 7320 6172 6520 696e 6469   Values are indi
+000179d0: 7669 6475 616c 2069 7465 6d73 2066 726f  vidual items fro
+000179e0: 6d20 7468 6520 7374 7275 6374 2028 6e6f  m the struct (no
+000179f0: 2061 7474 7269 6275 7465 2066 726f 6d20   attribute from 
+00017a00: 6974 656d 2063 6f6e 7461 696e 6572 292e  item container).
+00017a10: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
+00017a20: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
+00017a30: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6469  ----..        di
+00017a40: 6374 5f76 616c 7565 730d 0a20 2020 2020  ct_values..     
+00017a50: 2020 2020 2020 2049 7465 6d73 2e0d 0a20         Items... 
+00017a60: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00017a70: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00017a80: 5f61 735f 6469 6374 696f 6e61 7279 2829  _as_dictionary()
+00017a90: 2e76 616c 7565 7328 290d 0a0d 0a20 2020  .values()....   
+00017aa0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
 00017ab0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00017ac0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017ad0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017ae0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
-00017af0: 2064 6566 2069 7465 6d73 2873 656c 6629   def items(self)
-00017b00: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-00017b10: 2020 2020 2020 2020 4469 6374 696f 6e61          Dictiona
-00017b20: 7279 2d69 7465 7261 746f 7220 6163 6365  ry-iterator acce
-00017b30: 7373 2074 6f20 5374 7275 6374 2069 7465  ss to Struct ite
-00017b40: 6d73 2e0d 0a0d 0a20 2020 2020 2020 2052  ms.....        R
-00017b50: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
-00017b60: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-00017b70: 2064 6963 745f 6974 656d 730d 0a20 2020   dict_items..   
-00017b80: 2020 2020 2020 2020 204e 616d 652c 2049           Name, I
-00017b90: 7465 6d20 7061 6972 732e 0d0a 0d0a 2020  tem pairs.....  
-00017ba0: 2020 2020 2020 3a72 6574 7572 6e3a 2069        :return: i
-00017bb0: 7465 7261 746f 7220 746f 2063 6f6c 756d  terator to colum
-00017bc0: 6e20 6b65 7973 2061 6e64 2076 616c 7565  n keys and value
-00017bd0: 730d 0a20 2020 2020 2020 2022 2222 0d0a  s..        """..
-00017be0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00017bf0: 656c 662e 5f61 735f 6469 6374 696f 6e61  elf._as_dictiona
-00017c00: 7279 2829 2e69 7465 6d73 2829 0d0a 0d0a  ry().items()....
-00017c10: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00017ad0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
+00017ae0: 0a20 2020 2064 6566 2069 7465 6d73 2873  .    def items(s
+00017af0: 656c 6629 3a0d 0a20 2020 2020 2020 2022  elf):..        "
+00017b00: 2222 0d0a 2020 2020 2020 2020 4469 6374  ""..        Dict
+00017b10: 696f 6e61 7279 2d69 7465 7261 746f 7220  ionary-iterator 
+00017b20: 6163 6365 7373 2074 6f20 5374 7275 6374  access to Struct
+00017b30: 2069 7465 6d73 2e0d 0a0d 0a20 2020 2020   items.....     
+00017b40: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
+00017b50: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
+00017b60: 2020 2020 2064 6963 745f 6974 656d 730d       dict_items.
+00017b70: 0a20 2020 2020 2020 2020 2020 204e 616d  .            Nam
+00017b80: 652c 2049 7465 6d20 7061 6972 732e 0d0a  e, Item pairs...
+00017b90: 0d0a 2020 2020 2020 2020 3a72 6574 7572  ..        :retur
+00017ba0: 6e3a 2069 7465 7261 746f 7220 746f 2063  n: iterator to c
+00017bb0: 6f6c 756d 6e20 6b65 7973 2061 6e64 2076  olumn keys and v
+00017bc0: 616c 7565 730d 0a20 2020 2020 2020 2022  alues..        "
+00017bd0: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
+00017be0: 726e 2073 656c 662e 5f61 735f 6469 6374  rn self._as_dict
+00017bf0: 696f 6e61 7279 2829 2e69 7465 6d73 2829  ionary().items()
+00017c00: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+00017c10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00017c20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00017c30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017c40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017c50: 2d2d 0d0a 2020 2020 6465 6620 6765 745f  --..    def get_
-00017c60: 6174 7472 6962 7574 6528 7365 6c66 2c20  attribute(self, 
-00017c70: 6174 7472 6962 5f6e 616d 652c 2064 6566  attrib_name, def
-00017c80: 6175 6c74 3d4e 6f6e 6529 3a0d 0a20 2020  ault=None):..   
-00017c90: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00017ca0: 2020 4765 7420 616e 2061 7474 7269 6275    Get an attribu
-00017cb0: 7465 2074 6861 7420 6170 706c 6965 7320  te that applies 
-00017cc0: 746f 2061 6c6c 2069 7465 6d73 2f63 6f6c  to all items/col
-00017cd0: 756d 6e73 2e0d 0a0d 0a20 2020 2020 2020  umns.....       
-00017ce0: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
-00017cf0: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
-00017d00: 0a20 2020 2020 2020 2061 7474 7269 625f  .        attrib_
-00017d10: 6e61 6d65 0d0a 2020 2020 2020 2020 2020  name..          
-00017d20: 2020 6e61 6d65 206f 6620 7468 6520 6174    name of the at
-00017d30: 7472 6962 7574 650d 0a20 2020 2020 2020  tribute..       
-00017d40: 2064 6566 6175 6c74 0d0a 2020 2020 2020   default..      
-00017d50: 2020 2020 2020 7265 7475 726e 2076 616c        return val
-00017d60: 7565 2069 6620 6174 7472 6962 5f6e 616d  ue if attrib_nam
-00017d70: 6520 6973 206e 6f74 2061 2076 616c 6964  e is not a valid
-00017d80: 2061 7474 7269 6275 7465 0d0a 0d0a 2020   attribute....  
-00017d90: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
-00017da0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
-00017db0: 2020 2020 2020 2020 7661 6c20 3a20 6174          val : at
-00017dc0: 7472 6962 7574 6520 7661 6c75 6520 6f72  tribute value or
-00017dd0: 204e 6f6e 650d 0a0d 0a20 2020 2020 2020   None....       
-00017de0: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
-00017df0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-00017e00: 2020 2020 2063 6f6c 5f67 6574 5f61 7474       col_get_att
-00017e10: 7269 6275 7465 2c20 7365 745f 6174 7472  ribute, set_attr
-00017e20: 6962 7574 650d 0a20 2020 2020 2020 2022  ibute..        "
-00017e30: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
-00017e40: 726e 2067 6574 6174 7472 2873 656c 662e  rn getattr(self.
-00017e50: 5f61 6c6c 5f69 7465 6d73 2c20 6174 7472  _all_items, attr
-00017e60: 6962 5f6e 616d 652c 2064 6566 6175 6c74  ib_name, default
-00017e70: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
+00017c40: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
+00017c50: 6765 745f 6174 7472 6962 7574 6528 7365  get_attribute(se
+00017c60: 6c66 2c20 6174 7472 6962 5f6e 616d 652c  lf, attrib_name,
+00017c70: 2064 6566 6175 6c74 3d4e 6f6e 6529 3a0d   default=None):.
+00017c80: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00017c90: 2020 2020 2020 4765 7420 616e 2061 7474        Get an att
+00017ca0: 7269 6275 7465 2074 6861 7420 6170 706c  ribute that appl
+00017cb0: 6965 7320 746f 2061 6c6c 2069 7465 6d73  ies to all items
+00017cc0: 2f63 6f6c 756d 6e73 2e0d 0a0d 0a20 2020  /columns.....   
+00017cd0: 2020 2020 2050 6172 616d 6574 6572 730d       Parameters.
+00017ce0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00017cf0: 2d2d 2d0d 0a20 2020 2020 2020 2061 7474  ---..        att
+00017d00: 7269 625f 6e61 6d65 0d0a 2020 2020 2020  rib_name..      
+00017d10: 2020 2020 2020 6e61 6d65 206f 6620 7468        name of th
+00017d20: 6520 6174 7472 6962 7574 650d 0a20 2020  e attribute..   
+00017d30: 2020 2020 2064 6566 6175 6c74 0d0a 2020       default..  
+00017d40: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00017d50: 2076 616c 7565 2069 6620 6174 7472 6962   value if attrib
+00017d60: 5f6e 616d 6520 6973 206e 6f74 2061 2076  _name is not a v
+00017d70: 616c 6964 2061 7474 7269 6275 7465 0d0a  alid attribute..
+00017d80: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+00017d90: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00017da0: 2d2d 0d0a 2020 2020 2020 2020 7661 6c20  --..        val 
+00017db0: 3a20 6174 7472 6962 7574 6520 7661 6c75  : attribute valu
+00017dc0: 6520 6f72 204e 6f6e 650d 0a0d 0a20 2020  e or None....   
+00017dd0: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
+00017de0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+00017df0: 0a20 2020 2020 2020 2063 6f6c 5f67 6574  .        col_get
+00017e00: 5f61 7474 7269 6275 7465 2c20 7365 745f  _attribute, set_
+00017e10: 6174 7472 6962 7574 650d 0a20 2020 2020  attribute..     
+00017e20: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00017e30: 7265 7475 726e 2067 6574 6174 7472 2873  return getattr(s
+00017e40: 656c 662e 5f61 6c6c 5f69 7465 6d73 2c20  elf._all_items, 
+00017e50: 6174 7472 6962 5f6e 616d 652c 2064 6566  attrib_name, def
+00017e60: 6175 6c74 290d 0a0d 0a20 2020 2023 202d  ault)....    # -
+00017e70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00017e80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00017e90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017ea0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017eb0: 2d2d 0d0a 2020 2020 6465 6620 7365 745f  --..    def set_
-00017ec0: 6174 7472 6962 7574 6528 7365 6c66 2c20  attribute(self, 
-00017ed0: 6174 7472 6962 5f6e 616d 652c 2061 7474  attrib_name, att
-00017ee0: 7269 625f 7661 6c75 6529 3a0d 0a20 2020  rib_value):..   
-00017ef0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00017f00: 2020 5365 7420 616e 2061 7474 7269 6275    Set an attribu
-00017f10: 7465 2074 6861 7420 6170 706c 6965 7320  te that applies 
-00017f20: 746f 2061 6c6c 2069 7465 6d73 2f63 6f6c  to all items/col
-00017f30: 756d 6e73 2e0d 0a0d 0a20 2020 2020 2020  umns.....       
-00017f40: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
-00017f50: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
-00017f60: 0a20 2020 2020 2020 2061 7474 7269 625f  .        attrib_
-00017f70: 6e61 6d65 0d0a 2020 2020 2020 2020 2020  name..          
-00017f80: 2020 6e61 6d65 206f 6620 7468 6520 6174    name of the at
-00017f90: 7472 6962 7574 650d 0a20 2020 2020 2020  tribute..       
-00017fa0: 2061 7474 7269 625f 7661 6c75 650d 0a20   attrib_value.. 
-00017fb0: 2020 2020 2020 2020 2020 2076 616c 7565             value
-00017fc0: 206f 6620 7468 6520 6174 7472 6962 7574   of the attribut
-00017fd0: 650d 0a0d 0a20 2020 2020 2020 2053 6565  e....        See
-00017fe0: 2041 6c73 6f0d 0a20 2020 2020 2020 202d   Also..        -
-00017ff0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-00018000: 2063 6f6c 5f73 6574 5f61 7474 7269 6275   col_set_attribu
-00018010: 7465 2c20 6765 745f 6174 7472 6962 7574  te, get_attribut
-00018020: 650d 0a20 2020 2020 2020 2022 2222 0d0a  e..        """..
-00018030: 2020 2020 2020 2020 7365 7461 7474 7228          setattr(
-00018040: 7365 6c66 2e5f 616c 6c5f 6974 656d 732c  self._all_items,
-00018050: 2061 7474 7269 625f 6e61 6d65 2c20 6174   attrib_name, at
-00018060: 7472 6962 5f76 616c 7565 290d 0a0d 0a20  trib_value).... 
-00018070: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+00017ea0: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
+00017eb0: 7365 745f 6174 7472 6962 7574 6528 7365  set_attribute(se
+00017ec0: 6c66 2c20 6174 7472 6962 5f6e 616d 652c  lf, attrib_name,
+00017ed0: 2061 7474 7269 625f 7661 6c75 6529 3a0d   attrib_value):.
+00017ee0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00017ef0: 2020 2020 2020 5365 7420 616e 2061 7474        Set an att
+00017f00: 7269 6275 7465 2074 6861 7420 6170 706c  ribute that appl
+00017f10: 6965 7320 746f 2061 6c6c 2069 7465 6d73  ies to all items
+00017f20: 2f63 6f6c 756d 6e73 2e0d 0a0d 0a20 2020  /columns.....   
+00017f30: 2020 2020 2050 6172 616d 6574 6572 730d       Parameters.
+00017f40: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00017f50: 2d2d 2d0d 0a20 2020 2020 2020 2061 7474  ---..        att
+00017f60: 7269 625f 6e61 6d65 0d0a 2020 2020 2020  rib_name..      
+00017f70: 2020 2020 2020 6e61 6d65 206f 6620 7468        name of th
+00017f80: 6520 6174 7472 6962 7574 650d 0a20 2020  e attribute..   
+00017f90: 2020 2020 2061 7474 7269 625f 7661 6c75       attrib_valu
+00017fa0: 650d 0a20 2020 2020 2020 2020 2020 2076  e..            v
+00017fb0: 616c 7565 206f 6620 7468 6520 6174 7472  alue of the attr
+00017fc0: 6962 7574 650d 0a0d 0a20 2020 2020 2020  ibute....       
+00017fd0: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
+00017fe0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+00017ff0: 2020 2020 2063 6f6c 5f73 6574 5f61 7474       col_set_att
+00018000: 7269 6275 7465 2c20 6765 745f 6174 7472  ribute, get_attr
+00018010: 6962 7574 650d 0a20 2020 2020 2020 2022  ibute..        "
+00018020: 2222 0d0a 2020 2020 2020 2020 7365 7461  ""..        seta
+00018030: 7474 7228 7365 6c66 2e5f 616c 6c5f 6974  ttr(self._all_it
+00018040: 656d 732c 2061 7474 7269 625f 6e61 6d65  ems, attrib_name
+00018050: 2c20 6174 7472 6962 5f76 616c 7565 290d  , attrib_value).
+00018060: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+00018070: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00018080: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00018090: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000180a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
-000180b0: 2020 6465 6620 636f 6c5f 6465 6c65 7465    def col_delete
-000180c0: 2873 656c 662c 206e 616d 653a 2055 6e69  (self, name: Uni
-000180d0: 6f6e 5b73 7472 2c20 4c69 7374 5b73 7472  on[str, List[str
-000180e0: 5d5d 2920 2d3e 204e 6f6e 653a 0d0a 2020  ]]) -> None:..  
-000180f0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00018100: 2020 2052 656d 6f76 6520 616e 6420 6974     Remove and it
-00018110: 656d 2066 726f 6d20 7468 6520 7374 7275  em from the stru
-00018120: 6374 2e0d 0a0d 0a20 2020 2020 2020 2050  ct.....        P
-00018130: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
-00018140: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
-00018150: 2020 2020 2020 206e 616d 6520 3a20 7374         name : st
-00018160: 7220 6f72 206c 6973 7420 6f66 2073 7472  r or list of str
-00018170: 0d0a 2020 2020 2020 2020 2020 2020 4e61  ..            Na
-00018180: 6d65 206f 7220 6c69 7374 206f 6620 6974  me or list of it
-00018190: 656d 206e 616d 6573 2074 6f20 6265 2072  em names to be r
-000181a0: 656d 6f76 6564 2e0d 0a0d 0a20 2020 2020  emoved.....     
-000181b0: 2020 2052 6169 7365 730d 0a20 2020 2020     Raises..     
-000181c0: 2020 202d 2d2d 2d2d 2d0d 0a20 2020 2020     ------..     
-000181d0: 2020 2049 6e64 6578 4572 726f 720d 0a20     IndexError.. 
-000181e0: 2020 2020 2020 2020 2020 2049 7465 6d20             Item 
-000181f0: 6e6f 7420 666f 756e 6420 7769 7468 2067  not found with g
-00018200: 6976 656e 206e 616d 652e 0d0a 2020 2020  iven name...    
-00018210: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00018220: 2073 656c 662e 636f 6c5f 7265 6d6f 7665   self.col_remove
-00018230: 286e 616d 6529 0d0a 0d0a 2020 2020 2320  (name)....    # 
+000180a0: 0d0a 2020 2020 6465 6620 636f 6c5f 6465  ..    def col_de
+000180b0: 6c65 7465 2873 656c 662c 206e 616d 653a  lete(self, name:
+000180c0: 2055 6e69 6f6e 5b73 7472 2c20 4c69 7374   Union[str, List
+000180d0: 5b73 7472 5d5d 2920 2d3e 204e 6f6e 653a  [str]]) -> None:
+000180e0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+000180f0: 2020 2020 2020 2052 656d 6f76 6520 616e         Remove an
+00018100: 6420 6974 656d 2066 726f 6d20 7468 6520  d item from the 
+00018110: 7374 7275 6374 2e0d 0a0d 0a20 2020 2020  struct.....     
+00018120: 2020 2050 6172 616d 6574 6572 730d 0a20     Parameters.. 
+00018130: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
+00018140: 2d0d 0a20 2020 2020 2020 206e 616d 6520  -..        name 
+00018150: 3a20 7374 7220 6f72 206c 6973 7420 6f66  : str or list of
+00018160: 2073 7472 0d0a 2020 2020 2020 2020 2020   str..          
+00018170: 2020 4e61 6d65 206f 7220 6c69 7374 206f    Name or list o
+00018180: 6620 6974 656d 206e 616d 6573 2074 6f20  f item names to 
+00018190: 6265 2072 656d 6f76 6564 2e0d 0a0d 0a20  be removed..... 
+000181a0: 2020 2020 2020 2052 6169 7365 730d 0a20         Raises.. 
+000181b0: 2020 2020 2020 202d 2d2d 2d2d 2d0d 0a20         ------.. 
+000181c0: 2020 2020 2020 2049 6e64 6578 4572 726f         IndexErro
+000181d0: 720d 0a20 2020 2020 2020 2020 2020 2049  r..            I
+000181e0: 7465 6d20 6e6f 7420 666f 756e 6420 7769  tem not found wi
+000181f0: 7468 2067 6976 656e 206e 616d 652e 0d0a  th given name...
+00018200: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+00018210: 2020 2020 2073 656c 662e 636f 6c5f 7265       self.col_re
+00018220: 6d6f 7665 286e 616d 6529 0d0a 0d0a 2020  move(name)....  
+00018230: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
 00018240: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00018250: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018260: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018270: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
-00018280: 2063 6f6c 5f67 6574 5f76 616c 7565 2873   col_get_value(s
-00018290: 656c 662c 206e 616d 653a 2073 7472 293a  elf, name: str):
-000182a0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-000182b0: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
-000182c0: 7369 6e67 6c65 2069 7465 6d2e 0d0a 0d0a  single item.....
-000182d0: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
-000182e0: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
-000182f0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00018300: 6e61 6d65 203a 2073 7472 696e 670d 0a20  name : string.. 
-00018310: 2020 2020 2020 2020 2020 2049 7465 6d20             Item 
-00018320: 6e61 6d65 2e0d 0a0d 0a20 2020 2020 2020  name.....       
-00018330: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
-00018340: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
-00018350: 2020 206f 626a 0d0a 2020 2020 2020 2020     obj..        
-00018360: 2020 2020 4974 656d 2066 726f 6d20 6974      Item from it
-00018370: 656d 2063 6f6e 7461 696e 6572 2028 6e6f  em container (no
-00018380: 2061 7474 7269 6275 7465 292e 0d0a 0d0a   attribute).....
-00018390: 2020 2020 2020 2020 5261 6973 6573 0d0a          Raises..
-000183a0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 0d0a          ------..
-000183b0: 2020 2020 2020 2020 4b65 7945 7272 6f72          KeyError
-000183c0: 0d0a 2020 2020 2020 2020 2020 2020 4974  ..            It
-000183d0: 656d 206e 6f74 2066 6f75 6e64 2077 6974  em not found wit
-000183e0: 6820 6769 7665 6e20 606e 616d 6560 2e0d  h given `name`..
-000183f0: 0a0d 0a20 2020 2020 2020 2022 2222 0d0a  ...        """..
-00018400: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00018410: 656c 662e 5f61 6c6c 5f69 7465 6d73 2e69  elf._all_items.i
-00018420: 7465 6d5f 6765 745f 7661 6c75 6528 6e61  tem_get_value(na
-00018430: 6d65 290d 0a0d 0a20 2020 2023 202d 2d2d  me)....    # ---
+00018260: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
+00018270: 2064 6566 2063 6f6c 5f67 6574 5f76 616c   def col_get_val
+00018280: 7565 2873 656c 662c 206e 616d 653a 2073  ue(self, name: s
+00018290: 7472 293a 0d0a 2020 2020 2020 2020 2222  tr):..        ""
+000182a0: 220d 0a20 2020 2020 2020 2052 6574 7572  "..        Retur
+000182b0: 6e20 6120 7369 6e67 6c65 2069 7465 6d2e  n a single item.
+000182c0: 0d0a 0d0a 2020 2020 2020 2020 5061 7261  ....        Para
+000182d0: 6d65 7465 7273 0d0a 2020 2020 2020 2020  meters..        
+000182e0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+000182f0: 2020 2020 6e61 6d65 203a 2073 7472 696e      name : strin
+00018300: 670d 0a20 2020 2020 2020 2020 2020 2049  g..            I
+00018310: 7465 6d20 6e61 6d65 2e0d 0a0d 0a20 2020  tem name.....   
+00018320: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
+00018330: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
+00018340: 2020 2020 2020 206f 626a 0d0a 2020 2020         obj..    
+00018350: 2020 2020 2020 2020 4974 656d 2066 726f          Item fro
+00018360: 6d20 6974 656d 2063 6f6e 7461 696e 6572  m item container
+00018370: 2028 6e6f 2061 7474 7269 6275 7465 292e   (no attribute).
+00018380: 0d0a 0d0a 2020 2020 2020 2020 5261 6973  ....        Rais
+00018390: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+000183a0: 2d2d 0d0a 2020 2020 2020 2020 4b65 7945  --..        KeyE
+000183b0: 7272 6f72 0d0a 2020 2020 2020 2020 2020  rror..          
+000183c0: 2020 4974 656d 206e 6f74 2066 6f75 6e64    Item not found
+000183d0: 2077 6974 6820 6769 7665 6e20 606e 616d   with given `nam
+000183e0: 6560 2e0d 0a0d 0a20 2020 2020 2020 2022  e`.....        "
+000183f0: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
+00018400: 726e 2073 656c 662e 5f61 6c6c 5f69 7465  rn self._all_ite
+00018410: 6d73 2e69 7465 6d5f 6765 745f 7661 6c75  ms.item_get_valu
+00018420: 6528 6e61 6d65 290d 0a0d 0a20 2020 2023  e(name)....    #
+00018430: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
 00018440: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00018450: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018460: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018470: 2d2d 2d2d 0d0a 2020 2020 6465 6620 636f  ----..    def co
-00018480: 6c5f 7365 745f 7661 6c75 6528 7365 6c66  l_set_value(self
-00018490: 2c20 6e61 6d65 3a20 7374 722c 2076 616c  , name: str, val
-000184a0: 7565 293a 0d0a 2020 2020 2020 2020 2222  ue):..        ""
-000184b0: 220d 0a20 2020 2020 2020 2043 6865 636b  "..        Check
-000184c0: 2069 6620 6974 656d 206e 616d 6520 6973   if item name is
-000184d0: 2061 6c6c 6f77 6564 2c20 706f 7373 6962   allowed, possib
-000184e0: 6c79 2065 7363 6170 652e 2053 6574 2074  ly escape. Set t
-000184f0: 6865 2076 616c 7565 2070 6f72 7469 6f6e  he value portion
-00018500: 206f 6620 7468 6520 6974 656d 2074 6f20   of the item to 
-00018510: 7661 6c75 652e 0d0a 0d0a 2020 2020 2020  value.....      
-00018520: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
-00018530: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-00018540: 0d0a 2020 2020 2020 2020 6e61 6d65 203a  ..        name :
-00018550: 2073 7472 0d0a 2020 2020 2020 2020 2020   str..          
-00018560: 2020 4974 656d 206e 616d 652e 0d0a 2020    Item name...  
-00018570: 2020 2020 2020 7661 6c75 6520 3a20 6f62        value : ob
-00018580: 6a65 6374 0d0a 2020 2020 2020 2020 2020  ject..          
-00018590: 2020 466f 7220 7374 7275 6374 732c 206e    For structs, n
-000185a0: 6561 726c 7920 616e 7974 6869 6e67 2e20  early anything. 
-000185b0: 466f 7220 6461 7461 7365 7473 2c20 6172  For datasets, ar
-000185c0: 7261 792e 0d0a 0d0a 2020 2020 2020 2020  ray.....        
-000185d0: 2222 220d 0a20 2020 2020 2020 2069 6620  """..        if 
-000185e0: 6e6f 7420 5374 7275 6374 2e41 6c6c 4e61  not Struct.AllNa
-000185f0: 6d65 7320 616e 6420 6e6f 7420 7365 6c66  mes and not self
-00018600: 2e69 735f 7661 6c69 645f 636f 6c6e 616d  .is_valid_colnam
-00018610: 6528 6e61 6d65 293a 0d0a 2020 2020 2020  e(name):..      
-00018620: 2020 2020 2020 6966 2073 656c 662e 5f5f        if self.__
-00018630: 636c 6173 735f 5f2e 5761 726e 4f6e 496e  class__.WarnOnIn
-00018640: 7661 6c69 644e 616d 6573 3a0d 0a20 2020  validNames:..   
-00018650: 2020 2020 2020 2020 2020 2020 2077 6172               war
-00018660: 6e69 6e67 732e 7761 726e 280d 0a20 2020  nings.warn(..   
-00018670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018680: 2066 2249 6e76 616c 6964 2063 6f6c 756d   f"Invalid colum
-00018690: 6e20 6e61 6d65 207b 6e61 6d65 2172 7d20  n name {name!r} 
-000186a0: 2d2d 2d20 706c 6561 7365 2072 656e 616d  --- please renam
-000186b0: 6520 7468 6520 636f 6c75 6d6e 206f 7220  e the column or 
-000186c0: 7468 6520 636c 6173 7320 6d61 7920 6c6f  the class may lo
-000186d0: 7365 2074 6869 7320 6d65 7468 6f64 2e22  se this method."
-000186e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000186f0: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
-00018700: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00018710: 2020 2020 2020 2020 6966 2073 7472 2e69          if str.i
-00018720: 736c 6f77 6572 286e 616d 655b 305d 293a  slower(name[0]):
-00018730: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00018740: 2020 2020 2020 7761 726e 696e 6773 2e77        warnings.w
-00018750: 6172 6e28 6622 496e 7661 6c69 6420 636f  arn(f"Invalid co
-00018760: 6c75 6d6e 206e 616d 6520 7b6e 616d 6521  lumn name {name!
-00018770: 727d 202d 2d2d 2063 6f6c 756d 6e20 6175  r} --- column au
-00018780: 746f 2063 6170 6974 616c 697a 6564 2074  to capitalized t
-00018790: 6f20 7b6e 616d 652e 6361 7069 7461 6c69  o {name.capitali
-000187a0: 7a65 2829 2172 7d2e 2229 0d0a 2020 2020  ze()!r}.")..    
-000187b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000187c0: 6e61 6d65 203d 206e 616d 652e 6361 7069  name = name.capi
-000187d0: 7461 6c69 7a65 2829 0d0a 2020 2020 2020  talize()..      
-000187e0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-000187f0: 6c66 2e63 6f6c 5f73 6574 5f76 616c 7565  lf.col_set_value
-00018800: 286e 616d 652c 2076 616c 7565 290d 0a0d  (name, value)...
-00018810: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018820: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00018830: 2020 2020 2020 2020 2020 2020 7761 726e              warn
-00018840: 696e 6773 2e77 6172 6e28 6622 4164 6469  ings.warn(f"Addi
-00018850: 6e67 2063 6f6c 756d 6e20 7769 7468 2069  ng column with i
-00018860: 6e76 616c 6964 206e 616d 6520 7b6e 616d  nvalid name {nam
-00018870: 6521 727d 2e22 290d 0a20 2020 2020 2020  e!r}.")..       
-00018880: 2020 2020 2020 2020 2020 2020 2023 2072               # r
-00018890: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
-000188a0: 6627 496e 7661 6c69 6420 636f 6c75 6d6e  f'Invalid column
-000188b0: 206e 616d 6520 7b6e 616d 6521 727d 2729   name {name!r}')
-000188c0: 0d0a 0d0a 2020 2020 2020 2020 2320 616c  ....        # al
-000188d0: 6c20 636f 6c75 6d6e 7320 6172 6520 7365  l columns are se
-000188e0: 7420 6865 7265 0d0a 2020 2020 2020 2020  t here..        
-000188f0: 2320 666f 7220 4661 7374 4172 7261 7973  # for FastArrays
-00018900: 2077 6520 6175 746f 6d61 7469 6361 6c6c   we automaticall
-00018910: 7920 6174 7461 6368 2074 6865 2063 6f6c  y attach the col
-00018920: 756d 6e20 6e61 6d65 2074 6f20 7468 6520  umn name to the 
-00018930: 696e 7374 616e 6365 0d0a 2020 2020 2020  instance..      
-00018940: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00018950: 7661 6c75 652c 2054 7970 6552 6567 6973  value, TypeRegis
-00018960: 7465 722e 4661 7374 4172 7261 7929 3a0d  ter.FastArray):.
-00018970: 0a20 2020 2020 2020 2020 2020 2063 7572  .            cur
-00018980: 6e61 6d65 203d 2076 616c 7565 2e67 6574  name = value.get
-00018990: 5f6e 616d 6528 290d 0a20 2020 2020 2020  _name()..       
-000189a0: 2020 2020 2069 6620 6375 726e 616d 6520       if curname 
-000189b0: 6973 206e 6f74 204e 6f6e 6520 616e 6420  is not None and 
-000189c0: 6375 726e 616d 6520 213d 206e 616d 653a  curname != name:
-000189d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000189e0: 2020 2320 6d61 6b65 2061 206e 6577 2076    # make a new v
-000189f0: 6965 7720 736f 2077 6520 646f 206e 6f74  iew so we do not
-00018a00: 2063 6c6f 6262 6572 206f 6c64 206e 616d   clobber old nam
-00018a10: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
-00018a20: 2020 2023 2054 4a44 2074 6869 7320 6d61     # TJD this ma
-00018a30: 6b65 2061 2073 6861 6c6c 6f77 2063 6f70  ke a shallow cop
-00018a40: 7920 6f66 2074 6865 206f 626a 6563 7427  y of the object'
-00018a50: 7320 6469 6374 0d0a 2020 2020 2020 2020  s dict..        
-00018a60: 2020 2020 2020 2020 2320 5468 6973 2063          # This c
-00018a70: 6f64 6520 6d61 7920 6e65 6564 2072 6576  ode may need rev
-00018a80: 6965 770d 0a20 2020 2020 2020 2020 2020  iew..           
-00018a90: 2020 2020 2076 616c 7565 203d 2076 616c       value = val
-00018aa0: 7565 2e5f 7669 6577 5f69 6e74 6572 6e61  ue._view_interna
-00018ab0: 6c28 7479 7065 2876 616c 7565 2929 0d0a  l(type(value))..
-00018ac0: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
-00018ad0: 652e 7365 745f 6e61 6d65 286e 616d 6529  e.set_name(name)
-00018ae0: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-00018af0: 2e5f 616c 6c5f 6974 656d 732e 6974 656d  ._all_items.item
-00018b00: 5f73 6574 5f76 616c 7565 286e 616d 652c  _set_value(name,
-00018b10: 2076 616c 7565 290d 0a20 2020 2020 2020   value)..       
-00018b20: 2073 656c 662e 5f75 7064 6174 655f 736f   self._update_so
-00018b30: 7274 286e 616d 6529 0d0a 0d0a 2020 2020  rt(name)....    
-00018b40: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+00018460: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 6465  --------..    de
+00018470: 6620 636f 6c5f 7365 745f 7661 6c75 6528  f col_set_value(
+00018480: 7365 6c66 2c20 6e61 6d65 3a20 7374 722c  self, name: str,
+00018490: 2076 616c 7565 293a 0d0a 2020 2020 2020   value):..      
+000184a0: 2020 2222 220d 0a20 2020 2020 2020 2043    """..        C
+000184b0: 6865 636b 2069 6620 6974 656d 206e 616d  heck if item nam
+000184c0: 6520 6973 2061 6c6c 6f77 6564 2c20 706f  e is allowed, po
+000184d0: 7373 6962 6c79 2065 7363 6170 652e 2053  ssibly escape. S
+000184e0: 6574 2074 6865 2076 616c 7565 2070 6f72  et the value por
+000184f0: 7469 6f6e 206f 6620 7468 6520 6974 656d  tion of the item
+00018500: 2074 6f20 7661 6c75 652e 0d0a 0d0a 2020   to value.....  
+00018510: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
+00018520: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+00018530: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6e61  ----..        na
+00018540: 6d65 203a 2073 7472 0d0a 2020 2020 2020  me : str..      
+00018550: 2020 2020 2020 4974 656d 206e 616d 652e        Item name.
+00018560: 0d0a 2020 2020 2020 2020 7661 6c75 6520  ..        value 
+00018570: 3a20 6f62 6a65 6374 0d0a 2020 2020 2020  : object..      
+00018580: 2020 2020 2020 466f 7220 7374 7275 6374        For struct
+00018590: 732c 206e 6561 726c 7920 616e 7974 6869  s, nearly anythi
+000185a0: 6e67 2e20 466f 7220 6461 7461 7365 7473  ng. For datasets
+000185b0: 2c20 6172 7261 792e 0d0a 0d0a 2020 2020  , array.....    
+000185c0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+000185d0: 2069 6620 6e6f 7420 5374 7275 6374 2e41   if not Struct.A
+000185e0: 6c6c 4e61 6d65 7320 616e 6420 6e6f 7420  llNames and not 
+000185f0: 7365 6c66 2e69 735f 7661 6c69 645f 636f  self.is_valid_co
+00018600: 6c6e 616d 6528 6e61 6d65 293a 0d0a 2020  lname(name):..  
+00018610: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
+00018620: 662e 5f5f 636c 6173 735f 5f2e 5761 726e  f.__class__.Warn
+00018630: 4f6e 496e 7661 6c69 644e 616d 6573 3a0d  OnInvalidNames:.
+00018640: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018650: 2077 6172 6e69 6e67 732e 7761 726e 280d   warnings.warn(.
+00018660: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018670: 2020 2020 2066 2249 6e76 616c 6964 2063       f"Invalid c
+00018680: 6f6c 756d 6e20 6e61 6d65 207b 6e61 6d65  olumn name {name
+00018690: 2172 7d20 2d2d 2d20 706c 6561 7365 2072  !r} --- please r
+000186a0: 656e 616d 6520 7468 6520 636f 6c75 6d6e  ename the column
+000186b0: 206f 7220 7468 6520 636c 6173 7320 6d61   or the class ma
+000186c0: 7920 6c6f 7365 2074 6869 7320 6d65 7468  y lose this meth
+000186d0: 6f64 2e22 0d0a 2020 2020 2020 2020 2020  od."..          
+000186e0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+000186f0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00018700: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00018710: 7472 2e69 736c 6f77 6572 286e 616d 655b  tr.islower(name[
+00018720: 305d 293a 0d0a 2020 2020 2020 2020 2020  0]):..          
+00018730: 2020 2020 2020 2020 2020 7761 726e 696e            warnin
+00018740: 6773 2e77 6172 6e28 6622 496e 7661 6c69  gs.warn(f"Invali
+00018750: 6420 636f 6c75 6d6e 206e 616d 6520 7b6e  d column name {n
+00018760: 616d 6521 727d 202d 2d2d 2063 6f6c 756d  ame!r} --- colum
+00018770: 6e20 6175 746f 2063 6170 6974 616c 697a  n auto capitaliz
+00018780: 6564 2074 6f20 7b6e 616d 652e 6361 7069  ed to {name.capi
+00018790: 7461 6c69 7a65 2829 2172 7d2e 2229 0d0a  talize()!r}.")..
+000187a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000187b0: 2020 2020 6e61 6d65 203d 206e 616d 652e      name = name.
+000187c0: 6361 7069 7461 6c69 7a65 2829 0d0a 2020  capitalize()..  
+000187d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000187e0: 2020 7365 6c66 2e63 6f6c 5f73 6574 5f76    self.col_set_v
+000187f0: 616c 7565 286e 616d 652c 2076 616c 7565  alue(name, value
+00018800: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00018810: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00018820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018830: 7761 726e 696e 6773 2e77 6172 6e28 6622  warnings.warn(f"
+00018840: 4164 6469 6e67 2063 6f6c 756d 6e20 7769  Adding column wi
+00018850: 7468 2069 6e76 616c 6964 206e 616d 6520  th invalid name 
+00018860: 7b6e 616d 6521 727d 2e22 290d 0a20 2020  {name!r}.")..   
+00018870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018880: 2023 2072 6169 7365 2056 616c 7565 4572   # raise ValueEr
+00018890: 726f 7228 6627 496e 7661 6c69 6420 636f  ror(f'Invalid co
+000188a0: 6c75 6d6e 206e 616d 6520 7b6e 616d 6521  lumn name {name!
+000188b0: 727d 2729 0d0a 0d0a 2020 2020 2020 2020  r}')....        
+000188c0: 2320 616c 6c20 636f 6c75 6d6e 7320 6172  # all columns ar
+000188d0: 6520 7365 7420 6865 7265 0d0a 2020 2020  e set here..    
+000188e0: 2020 2020 2320 666f 7220 4661 7374 4172      # for FastAr
+000188f0: 7261 7973 2077 6520 6175 746f 6d61 7469  rays we automati
+00018900: 6361 6c6c 7920 6174 7461 6368 2074 6865  cally attach the
+00018910: 2063 6f6c 756d 6e20 6e61 6d65 2074 6f20   column name to 
+00018920: 7468 6520 696e 7374 616e 6365 0d0a 2020  the instance..  
+00018930: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00018940: 6e63 6528 7661 6c75 652c 2054 7970 6552  nce(value, TypeR
+00018950: 6567 6973 7465 722e 4661 7374 4172 7261  egister.FastArra
+00018960: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
+00018970: 2063 7572 6e61 6d65 203d 2076 616c 7565   curname = value
+00018980: 2e67 6574 5f6e 616d 6528 290d 0a20 2020  .get_name()..   
+00018990: 2020 2020 2020 2020 2069 6620 6375 726e           if curn
+000189a0: 616d 6520 6973 206e 6f74 204e 6f6e 6520  ame is not None 
+000189b0: 616e 6420 6375 726e 616d 6520 213d 206e  and curname != n
+000189c0: 616d 653a 0d0a 2020 2020 2020 2020 2020  ame:..          
+000189d0: 2020 2020 2020 2320 6d61 6b65 2061 206e        # make a n
+000189e0: 6577 2076 6965 7720 736f 2077 6520 646f  ew view so we do
+000189f0: 206e 6f74 2063 6c6f 6262 6572 206f 6c64   not clobber old
+00018a00: 206e 616d 650d 0a20 2020 2020 2020 2020   name..         
+00018a10: 2020 2020 2020 2023 2054 4a44 2074 6869         # TJD thi
+00018a20: 7320 6d61 6b65 2061 2073 6861 6c6c 6f77  s make a shallow
+00018a30: 2063 6f70 7920 6f66 2074 6865 206f 626a   copy of the obj
+00018a40: 6563 7427 7320 6469 6374 0d0a 2020 2020  ect's dict..    
+00018a50: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
+00018a60: 6973 2063 6f64 6520 6d61 7920 6e65 6564  is code may need
+00018a70: 2072 6576 6965 770d 0a20 2020 2020 2020   review..       
+00018a80: 2020 2020 2020 2020 2076 616c 7565 203d           value =
+00018a90: 2076 616c 7565 2e5f 7669 6577 5f69 6e74   value._view_int
+00018aa0: 6572 6e61 6c28 7479 7065 2876 616c 7565  ernal(type(value
+00018ab0: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
+00018ac0: 7661 6c75 652e 7365 745f 6e61 6d65 286e  value.set_name(n
+00018ad0: 616d 6529 0d0a 0d0a 2020 2020 2020 2020  ame)....        
+00018ae0: 7365 6c66 2e5f 616c 6c5f 6974 656d 732e  self._all_items.
+00018af0: 6974 656d 5f73 6574 5f76 616c 7565 286e  item_set_value(n
+00018b00: 616d 652c 2076 616c 7565 290d 0a20 2020  ame, value)..   
+00018b10: 2020 2020 2073 656c 662e 5f75 7064 6174       self._updat
+00018b20: 655f 736f 7274 286e 616d 6529 0d0a 0d0a  e_sort(name)....
+00018b30: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00018b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00018b50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018b60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018b70: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
-00018b80: 6566 2063 6f6c 5f67 6574 5f61 7474 7269  ef col_get_attri
-00018b90: 6275 7465 2873 656c 662c 206e 616d 653a  bute(self, name:
-00018ba0: 2073 7472 2c20 6174 7472 6962 5f6e 616d   str, attrib_nam
-00018bb0: 653a 2073 7472 2c20 6465 6661 756c 743d  e: str, default=
-00018bc0: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
-00018bd0: 2222 220d 0a20 2020 2020 2020 2047 6574  """..        Get
-00018be0: 7320 7468 6520 6174 7472 6962 7574 6520  s the attribute 
-00018bf0: 6f66 2074 6865 2073 7065 6369 6669 6564  of the specified
-00018c00: 2063 6f6c 756d 6e2c 2074 6865 2060 6174   column, the `at
-00018c10: 7472 6962 5f6e 616d 6560 206d 7573 7420  trib_name` must 
-00018c20: 6265 2075 7365 6420 746f 2069 6e64 6963  be used to indic
-00018c30: 6174 6520 7768 6963 6820 6174 7472 6962  ate which attrib
-00018c40: 7574 652e 0d0a 0d0a 2020 2020 2020 2020  ute.....        
-00018c50: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
-00018c60: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
-00018c70: 2020 2020 2020 2020 6e61 6d65 203a 2073          name : s
-00018c80: 7472 0d0a 2020 2020 2020 2020 2020 2020  tr..            
-00018c90: 5468 6520 6e61 6d65 206f 6620 7468 6520  The name of the 
-00018ca0: 636f 6c75 6d6e 0d0a 2020 2020 2020 2020  column..        
-00018cb0: 6174 7472 6962 5f6e 616d 6520 3a20 7374  attrib_name : st
-00018cc0: 720d 0a20 2020 2020 2020 2020 2020 2054  r..            T
-00018cd0: 6865 206e 616d 6520 6f66 2074 6865 2061  he name of the a
-00018ce0: 7474 7269 6275 7465 0d0a 2020 2020 2020  ttribute..      
-00018cf0: 2020 6465 6661 756c 740d 0a20 2020 2020    default..     
-00018d00: 2020 2020 2020 2044 6566 6175 6c74 2076         Default v
-00018d10: 616c 7565 2072 6574 7572 6e65 6420 7768  alue returned wh
-00018d20: 656e 2061 7474 7269 6275 7465 206e 6f74  en attribute not
-00018d30: 2066 6f75 6e64 2e0d 0a0d 0a20 2020 2020   found.....     
-00018d40: 2020 2045 7861 6d70 6c65 730d 0a20 2020     Examples..   
-00018d50: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
-00018d60: 2020 2020 2020 203e 3e3e 2064 732e 636f         >>> ds.co
-00018d70: 6c5f 7365 745f 6174 7472 6962 7574 6528  l_set_attribute(
-00018d80: 2763 6f6c 3127 2c20 2754 4553 5427 2c20  'col1', 'TEST', 
-00018d90: 3431 3729 0d0a 2020 2020 2020 2020 3e3e  417)..        >>
-00018da0: 3e20 6473 2e63 6f6c 5f67 6574 5f61 7474  > ds.col_get_att
-00018db0: 7269 6275 7465 2827 636f 6c31 272c 2027  ribute('col1', '
-00018dc0: 5445 5354 2729 0d0a 2020 2020 2020 2020  TEST')..        
-00018dd0: 3431 370d 0a20 2020 2020 2020 203e 3e3e  417..        >>>
-00018de0: 2064 732e 636f 6c5f 6765 745f 6174 7472   ds.col_get_attr
-00018df0: 6962 7574 6528 2763 6f6c 3127 2c20 2754  ibute('col1', 'T
-00018e00: 4553 5427 2c20 6e61 6e29 0d0a 2020 2020  EST', nan)..    
-00018e10: 2020 2020 3431 370d 0a20 2020 2020 2020      417..       
-00018e20: 203e 3e3e 2064 732e 636f 6c5f 6765 745f   >>> ds.col_get_
-00018e30: 6174 7472 6962 7574 6528 2763 6f6c 3127  attribute('col1'
-00018e40: 2c20 2744 4f45 534e 4f54 4558 4953 5427  , 'DOESNOTEXIST'
-00018e50: 2c20 6e61 6e29 0d0a 2020 2020 2020 2020  , nan)..        
-00018e60: 6e61 6e0d 0a20 2020 2020 2020 2022 2222  nan..        """
-00018e70: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00018e80: 2073 656c 662e 5f61 6c6c 5f69 7465 6d73   self._all_items
-00018e90: 2e69 7465 6d5f 6765 745f 6174 7472 6962  .item_get_attrib
-00018ea0: 7574 6528 6e61 6d65 2c20 6174 7472 6962  ute(name, attrib
-00018eb0: 5f6e 616d 652c 2064 6566 6175 6c74 290d  _name, default).
-00018ec0: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+00018b60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
+00018b70: 2020 2064 6566 2063 6f6c 5f67 6574 5f61     def col_get_a
+00018b80: 7474 7269 6275 7465 2873 656c 662c 206e  ttribute(self, n
+00018b90: 616d 653a 2073 7472 2c20 6174 7472 6962  ame: str, attrib
+00018ba0: 5f6e 616d 653a 2073 7472 2c20 6465 6661  _name: str, defa
+00018bb0: 756c 743d 4e6f 6e65 293a 0d0a 2020 2020  ult=None):..    
+00018bc0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00018bd0: 2047 6574 7320 7468 6520 6174 7472 6962   Gets the attrib
+00018be0: 7574 6520 6f66 2074 6865 2073 7065 6369  ute of the speci
+00018bf0: 6669 6564 2063 6f6c 756d 6e2c 2074 6865  fied column, the
+00018c00: 2060 6174 7472 6962 5f6e 616d 6560 206d   `attrib_name` m
+00018c10: 7573 7420 6265 2075 7365 6420 746f 2069  ust be used to i
+00018c20: 6e64 6963 6174 6520 7768 6963 6820 6174  ndicate which at
+00018c30: 7472 6962 7574 652e 0d0a 0d0a 2020 2020  tribute.....    
+00018c40: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
+00018c50: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+00018c60: 2d2d 0d0a 2020 2020 2020 2020 6e61 6d65  --..        name
+00018c70: 203a 2073 7472 0d0a 2020 2020 2020 2020   : str..        
+00018c80: 2020 2020 5468 6520 6e61 6d65 206f 6620      The name of 
+00018c90: 7468 6520 636f 6c75 6d6e 0d0a 2020 2020  the column..    
+00018ca0: 2020 2020 6174 7472 6962 5f6e 616d 6520      attrib_name 
+00018cb0: 3a20 7374 720d 0a20 2020 2020 2020 2020  : str..         
+00018cc0: 2020 2054 6865 206e 616d 6520 6f66 2074     The name of t
+00018cd0: 6865 2061 7474 7269 6275 7465 0d0a 2020  he attribute..  
+00018ce0: 2020 2020 2020 6465 6661 756c 740d 0a20        default.. 
+00018cf0: 2020 2020 2020 2020 2020 2044 6566 6175             Defau
+00018d00: 6c74 2076 616c 7565 2072 6574 7572 6e65  lt value returne
+00018d10: 6420 7768 656e 2061 7474 7269 6275 7465  d when attribute
+00018d20: 206e 6f74 2066 6f75 6e64 2e0d 0a0d 0a20   not found..... 
+00018d30: 2020 2020 2020 2045 7861 6d70 6c65 730d         Examples.
+00018d40: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00018d50: 2d0d 0a20 2020 2020 2020 203e 3e3e 2064  -..        >>> d
+00018d60: 732e 636f 6c5f 7365 745f 6174 7472 6962  s.col_set_attrib
+00018d70: 7574 6528 2763 6f6c 3127 2c20 2754 4553  ute('col1', 'TES
+00018d80: 5427 2c20 3431 3729 0d0a 2020 2020 2020  T', 417)..      
+00018d90: 2020 3e3e 3e20 6473 2e63 6f6c 5f67 6574    >>> ds.col_get
+00018da0: 5f61 7474 7269 6275 7465 2827 636f 6c31  _attribute('col1
+00018db0: 272c 2027 5445 5354 2729 0d0a 2020 2020  ', 'TEST')..    
+00018dc0: 2020 2020 3431 370d 0a20 2020 2020 2020      417..       
+00018dd0: 203e 3e3e 2064 732e 636f 6c5f 6765 745f   >>> ds.col_get_
+00018de0: 6174 7472 6962 7574 6528 2763 6f6c 3127  attribute('col1'
+00018df0: 2c20 2754 4553 5427 2c20 6e61 6e29 0d0a  , 'TEST', nan)..
+00018e00: 2020 2020 2020 2020 3431 370d 0a20 2020          417..   
+00018e10: 2020 2020 203e 3e3e 2064 732e 636f 6c5f       >>> ds.col_
+00018e20: 6765 745f 6174 7472 6962 7574 6528 2763  get_attribute('c
+00018e30: 6f6c 3127 2c20 2744 4f45 534e 4f54 4558  ol1', 'DOESNOTEX
+00018e40: 4953 5427 2c20 6e61 6e29 0d0a 2020 2020  IST', nan)..    
+00018e50: 2020 2020 6e61 6e0d 0a20 2020 2020 2020      nan..       
+00018e60: 2022 2222 0d0a 2020 2020 2020 2020 7265   """..        re
+00018e70: 7475 726e 2073 656c 662e 5f61 6c6c 5f69  turn self._all_i
+00018e80: 7465 6d73 2e69 7465 6d5f 6765 745f 6174  tems.item_get_at
+00018e90: 7472 6962 7574 6528 6e61 6d65 2c20 6174  tribute(name, at
+00018ea0: 7472 6962 5f6e 616d 652c 2064 6566 6175  trib_name, defau
+00018eb0: 6c74 290d 0a0d 0a20 2020 2023 202d 2d2d  lt)....    # ---
+00018ec0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00018ed0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00018ee0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018ef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018f00: 0d0a 2020 2020 6465 6620 636f 6c5f 7365  ..    def col_se
-00018f10: 745f 6174 7472 6962 7574 6528 7365 6c66  t_attribute(self
-00018f20: 2c20 6e61 6d65 3a20 7374 722c 2061 7474  , name: str, att
-00018f30: 7269 625f 6e61 6d65 3a20 7374 722c 2061  rib_name: str, a
-00018f40: 7474 7269 625f 7661 6c75 6529 202d 3e20  ttrib_value) -> 
-00018f50: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2022  None:..        "
-00018f60: 2222 0d0a 2020 2020 2020 2020 5365 7473  ""..        Sets
-00018f70: 2074 6865 2061 7474 7269 6275 7465 206f   the attribute o
-00018f80: 6620 7468 6520 7370 6563 6966 6965 6420  f the specified 
-00018f90: 636f 6c75 6d6e 2c20 7468 6520 6174 7472  column, the attr
-00018fa0: 6962 5f6e 616d 6520 6d75 7374 2062 6520  ib_name must be 
-00018fb0: 7573 6564 2074 6f20 696e 6469 6361 7465  used to indicate
-00018fc0: 2077 6869 6368 2061 7474 7269 6275 7465   which attribute
-00018fd0: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
-00018fe0: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
-00018ff0: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
-00019000: 2020 2020 206e 616d 6520 3a20 7374 720d       name : str.
-00019010: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
-00019020: 206e 616d 6520 6f66 2074 6865 2063 6f6c   name of the col
-00019030: 756d 6e0d 0a20 2020 2020 2020 2061 7474  umn..        att
-00019040: 7269 625f 6e61 6d65 203a 2073 7472 0d0a  rib_name : str..
-00019050: 2020 2020 2020 2020 2020 2020 5468 6520              The 
-00019060: 6e61 6d65 206f 6620 7468 6520 6174 7472  name of the attr
-00019070: 6962 7574 650d 0a20 2020 2020 2020 2061  ibute..        a
-00019080: 7474 7269 625f 7661 6c75 650d 0a20 2020  ttrib_value..   
-00019090: 2020 2020 2020 2020 2054 6865 2076 616c           The val
-000190a0: 7565 206f 6620 7468 6520 6174 7472 6962  ue of the attrib
-000190b0: 7574 650d 0a0d 0a20 2020 2020 2020 2045  ute....        E
-000190c0: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
-000190d0: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
-000190e0: 2020 203e 3e3e 2064 732e 636f 6c5f 7365     >>> ds.col_se
-000190f0: 745f 6174 7472 6962 7574 6528 2763 6f6c  t_attribute('col
-00019100: 3127 2c20 2754 4553 5427 2c20 3431 3729  1', 'TEST', 417)
-00019110: 0d0a 2020 2020 2020 2020 3e3e 3e20 6473  ..        >>> ds
-00019120: 2e63 6f6c 5f67 6574 5f61 7474 7269 6275  .col_get_attribu
-00019130: 7465 2827 636f 6c31 272c 2027 5445 5354  te('col1', 'TEST
-00019140: 2729 0d0a 2020 2020 2020 2020 3431 370d  ')..        417.
-00019150: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00019160: 2020 2020 2020 7365 6c66 2e5f 616c 6c5f        self._all_
-00019170: 6974 656d 732e 6974 656d 5f73 6574 5f61  items.item_set_a
-00019180: 7474 7269 6275 7465 286e 616d 652c 2061  ttribute(name, a
-00019190: 7474 7269 625f 6e61 6d65 2c20 6174 7472  ttrib_name, attr
-000191a0: 6962 5f76 616c 7565 290d 0a0d 0a20 2020  ib_value)....   
-000191b0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+00018ef0: 2d2d 2d2d 0d0a 2020 2020 6465 6620 636f  ----..    def co
+00018f00: 6c5f 7365 745f 6174 7472 6962 7574 6528  l_set_attribute(
+00018f10: 7365 6c66 2c20 6e61 6d65 3a20 7374 722c  self, name: str,
+00018f20: 2061 7474 7269 625f 6e61 6d65 3a20 7374   attrib_name: st
+00018f30: 722c 2061 7474 7269 625f 7661 6c75 6529  r, attrib_value)
+00018f40: 202d 3e20 4e6f 6e65 3a0d 0a20 2020 2020   -> None:..     
+00018f50: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00018f60: 5365 7473 2074 6865 2061 7474 7269 6275  Sets the attribu
+00018f70: 7465 206f 6620 7468 6520 7370 6563 6966  te of the specif
+00018f80: 6965 6420 636f 6c75 6d6e 2c20 7468 6520  ied column, the 
+00018f90: 6174 7472 6962 5f6e 616d 6520 6d75 7374  attrib_name must
+00018fa0: 2062 6520 7573 6564 2074 6f20 696e 6469   be used to indi
+00018fb0: 6361 7465 2077 6869 6368 2061 7474 7269  cate which attri
+00018fc0: 6275 7465 2e0d 0a0d 0a20 2020 2020 2020  bute.....       
+00018fd0: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
+00018fe0: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
+00018ff0: 0a20 2020 2020 2020 206e 616d 6520 3a20  .        name : 
+00019000: 7374 720d 0a20 2020 2020 2020 2020 2020  str..           
+00019010: 2054 6865 206e 616d 6520 6f66 2074 6865   The name of the
+00019020: 2063 6f6c 756d 6e0d 0a20 2020 2020 2020   column..       
+00019030: 2061 7474 7269 625f 6e61 6d65 203a 2073   attrib_name : s
+00019040: 7472 0d0a 2020 2020 2020 2020 2020 2020  tr..            
+00019050: 5468 6520 6e61 6d65 206f 6620 7468 6520  The name of the 
+00019060: 6174 7472 6962 7574 650d 0a20 2020 2020  attribute..     
+00019070: 2020 2061 7474 7269 625f 7661 6c75 650d     attrib_value.
+00019080: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
+00019090: 2076 616c 7565 206f 6620 7468 6520 6174   value of the at
+000190a0: 7472 6962 7574 650d 0a0d 0a20 2020 2020  tribute....     
+000190b0: 2020 2045 7861 6d70 6c65 730d 0a20 2020     Examples..   
+000190c0: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+000190d0: 2020 2020 2020 203e 3e3e 2064 732e 636f         >>> ds.co
+000190e0: 6c5f 7365 745f 6174 7472 6962 7574 6528  l_set_attribute(
+000190f0: 2763 6f6c 3127 2c20 2754 4553 5427 2c20  'col1', 'TEST', 
+00019100: 3431 3729 0d0a 2020 2020 2020 2020 3e3e  417)..        >>
+00019110: 3e20 6473 2e63 6f6c 5f67 6574 5f61 7474  > ds.col_get_att
+00019120: 7269 6275 7465 2827 636f 6c31 272c 2027  ribute('col1', '
+00019130: 5445 5354 2729 0d0a 2020 2020 2020 2020  TEST')..        
+00019140: 3431 370d 0a20 2020 2020 2020 2022 2222  417..        """
+00019150: 0d0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
+00019160: 616c 6c5f 6974 656d 732e 6974 656d 5f73  all_items.item_s
+00019170: 6574 5f61 7474 7269 6275 7465 286e 616d  et_attribute(nam
+00019180: 652c 2061 7474 7269 625f 6e61 6d65 2c20  e, attrib_name, 
+00019190: 6174 7472 6962 5f76 616c 7565 290d 0a0d  attrib_value)...
+000191a0: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+000191b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000191c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000191d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000191e0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-000191f0: 6465 6620 636f 6c5f 6765 745f 6c65 6e28  def col_get_len(
-00019200: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-00019210: 2222 2247 6574 7320 7468 6520 6e75 6d62  """Gets the numb
-00019220: 6572 206f 6620 636f 6c75 6d6e 7320 286f  er of columns (o
-00019230: 7220 6974 656d 7329 2069 6e20 7468 6520  r items) in the 
-00019240: 5374 7275 6374 2222 220d 0a20 2020 2020  Struct"""..     
-00019250: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-00019260: 616c 6c5f 6974 656d 732e 6974 656d 5f67  all_items.item_g
-00019270: 6574 5f6c 656e 2829 0d0a 0d0a 2020 2020  et_len()....    
-00019280: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+000191d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+000191e0: 2020 2020 6465 6620 636f 6c5f 6765 745f      def col_get_
+000191f0: 6c65 6e28 7365 6c66 293a 0d0a 2020 2020  len(self):..    
+00019200: 2020 2020 2222 2247 6574 7320 7468 6520      """Gets the 
+00019210: 6e75 6d62 6572 206f 6620 636f 6c75 6d6e  number of column
+00019220: 7320 286f 7220 6974 656d 7329 2069 6e20  s (or items) in 
+00019230: 7468 6520 5374 7275 6374 2222 220d 0a20  the Struct""".. 
+00019240: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00019250: 6c66 2e5f 616c 6c5f 6974 656d 732e 6974  lf._all_items.it
+00019260: 656d 5f67 6574 5f6c 656e 2829 0d0a 0d0a  em_get_len()....
+00019270: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00019280: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00019290: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000192a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000192b0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
-000192c0: 6566 2063 6f6c 5f65 7869 7374 7328 7365  ef col_exists(se
-000192d0: 6c66 2c20 6e61 6d65 293a 0d0a 2020 2020  lf, name):..    
-000192e0: 2020 2020 2222 2252 6574 7572 6e20 5472      """Return Tr
-000192f0: 7565 2069 6620 7468 6520 636f 6c75 6d6e  ue if the column
-00019300: 206e 616d 6520 616c 7265 6164 7920 6578   name already ex
-00019310: 6973 7473 2222 220d 0a20 2020 2020 2020  ists"""..       
-00019320: 2072 6574 7572 6e20 7365 6c66 2e5f 616c   return self._al
-00019330: 6c5f 6974 656d 732e 6974 656d 5f65 7869  l_items.item_exi
-00019340: 7374 7328 6e61 6d65 290d 0a0d 0a20 2020  sts(name)....   
-00019350: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+000192a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
+000192b0: 2020 2064 6566 2063 6f6c 5f65 7869 7374     def col_exist
+000192c0: 7328 7365 6c66 2c20 6e61 6d65 293a 0d0a  s(self, name):..
+000192d0: 2020 2020 2020 2020 2222 2252 6574 7572          """Retur
+000192e0: 6e20 5472 7565 2069 6620 7468 6520 636f  n True if the co
+000192f0: 6c75 6d6e 206e 616d 6520 616c 7265 6164  lumn name alread
+00019300: 7920 6578 6973 7473 2222 220d 0a20 2020  y exists"""..   
+00019310: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00019320: 2e5f 616c 6c5f 6974 656d 732e 6974 656d  ._all_items.item
+00019330: 5f65 7869 7374 7328 6e61 6d65 290d 0a0d  _exists(name)...
+00019340: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+00019350: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00019360: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00019370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00019380: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-00019390: 6465 6620 636f 6c5f 6669 6c74 6572 2873  def col_filter(s
-000193a0: 656c 662c 2069 7465 6d73 3d4e 6f6e 652c  elf, items=None,
-000193b0: 206c 696b 653d 4e6f 6e65 2c20 7265 6765   like=None, rege
-000193c0: 783a 204f 7074 696f 6e61 6c5b 2272 652e  x: Optional["re.
-000193d0: 5061 7474 6572 6e22 5d20 3d20 4e6f 6e65  Pattern"] = None
-000193e0: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
-000193f0: 0a20 2020 2020 2020 2052 6574 7572 6e20  .        Return 
-00019400: 7468 6520 636f 6c75 6d6e 7320 7370 6563  the columns spec
-00019410: 6966 6965 6420 6279 2069 6e64 6963 6573  ified by indices
-00019420: 206f 7220 6d61 7463 6865 7320 6f6e 2063   or matches on c
-00019430: 6f6c 756d 6e20 6e61 6d65 732e 0d0a 0d0a  olumn names.....
-00019440: 2020 2020 2020 2020 4e6f 7465 2074 6861          Note tha
-00019450: 7420 7468 6973 206d 6574 686f 6420 646f  t this method do
-00019460: 6573 6e27 7420 6669 6c74 6572 2061 2060  esn't filter a `
-00019470: 2e44 6174 6173 6574 6020 6f72 2060 5374  .Dataset` or `St
-00019480: 7275 6374 6020 6f6e 0d0a 2020 2020 2020  ruct` on..      
-00019490: 2020 6974 7320 636f 6e74 656e 7473 2c20    its contents, 
-000194a0: 6f6e 6c79 206f 6e20 7468 6520 636f 6c75  only on the colu
-000194b0: 6d6e 2069 6e64 6578 206f 7220 6e61 6d65  mn index or name
-000194c0: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
-000194d0: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
-000194e0: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
-000194f0: 2020 2020 2069 7465 6d73 203a 206c 6973       items : lis
-00019500: 742c 2064 6566 6175 6c74 204e 6f6e 650d  t, default None.
-00019510: 0a20 2020 2020 2020 2020 2020 204e 616d  .            Nam
-00019520: 6573 206f 7220 696e 6469 6365 7320 6f66  es or indices of
-00019530: 2063 6f6c 756d 6e73 2e20 4966 2060 6974   columns. If `it
-00019540: 656d 7360 2069 7320 7573 6564 2c20 6e65  ems` is used, ne
-00019550: 6974 6865 7220 606c 696b 6560 0d0a 2020  ither `like`..  
-00019560: 2020 2020 2020 2020 2020 6e6f 7220 6072            nor `r
-00019570: 6567 6578 6020 6361 6e20 6265 2075 7365  egex` can be use
-00019580: 642e 0d0a 2020 2020 2020 2020 6c69 6b65  d...        like
-00019590: 203a 2073 7472 2c20 6465 6661 756c 7420   : str, default 
-000195a0: 4e6f 6e65 0d0a 2020 2020 2020 2020 2020  None..          
-000195b0: 2020 5375 6273 7472 696e 6720 746f 206d    Substring to m
-000195c0: 6174 6368 2069 6e20 636f 6c75 6d6e 206e  atch in column n
-000195d0: 616d 6573 2e0d 0a20 2020 2020 2020 2072  ames...        r
-000195e0: 6567 6578 203a 2073 7472 2c20 6465 6661  egex : str, defa
-000195f0: 756c 7420 4e6f 6e65 0d0a 2020 2020 2020  ult None..      
-00019600: 2020 2020 2020 5265 6775 6c61 7220 6578        Regular ex
-00019610: 7072 6573 7369 6f6e 2073 7472 696e 6720  pression string 
-00019620: 746f 206d 6174 6368 2069 6e20 636f 6c75  to match in colu
-00019630: 6d6e 206e 616d 6573 2e0d 0a0d 0a20 2020  mn names.....   
-00019640: 2020 2020 2052 6574 7572 6e73 0d0a 2020       Returns..  
-00019650: 2020 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20        -------.. 
-00019660: 2020 2020 2020 2060 2e44 6174 6173 6574         `.Dataset
-00019670: 6020 6f72 2060 5374 7275 6374 600d 0a20  ` or `Struct`.. 
-00019680: 2020 2020 2020 2020 2020 2053 616d 6520             Same 
-00019690: 7479 7065 2061 7320 7468 6520 696e 7075  type as the inpu
-000196a0: 7420 6f62 6a65 6374 2e0d 0a0d 0a20 2020  t object.....   
-000196b0: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
-000196c0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-000196d0: 0a20 2020 2020 2020 2053 7472 7563 742e  .        Struct.
-000196e0: 5f5f 6765 7469 7465 6d5f 5f0d 0a20 2020  __getitem__..   
-000196f0: 2020 2020 202e 4461 7461 7365 742e 5f5f       .Dataset.__
-00019700: 6765 7469 7465 6d5f 5f0d 0a0d 0a20 2020  getitem__....   
-00019710: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
-00019720: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-00019730: 0a20 2020 2020 2020 2053 656c 6563 7420  .        Select 
-00019740: 636f 6c75 6d6e 7320 6279 206e 616d 653a  columns by name:
-00019750: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
-00019760: 6473 203d 2072 742e 4461 7461 7365 7428  ds = rt.Dataset(
-00019770: 7b22 6f6e 6522 3a20 7274 2e61 7261 6e67  {"one": rt.arang
-00019780: 6528 3329 2c20 2274 776f 223a 2072 742e  e(3), "two": rt.
-00019790: 6172 616e 6765 2833 2920 2520 322c 2022  arange(3) % 2, "
-000197a0: 7468 7265 6522 3a20 7274 2e61 7261 6e67  three": rt.arang
-000197b0: 6528 3329 2025 2033 7d29 0d0a 2020 2020  e(3) % 3})..    
-000197c0: 2020 2020 3e3e 3e20 6473 2e63 6f6c 5f66      >>> ds.col_f
-000197d0: 696c 7465 7228 6974 656d 733d 5b22 6f6e  ilter(items=["on
-000197e0: 6522 2c20 2274 6872 6565 225d 290d 0a20  e", "three"]).. 
-000197f0: 2020 2020 2020 2023 2020 206f 6e65 2020         #   one  
-00019800: 2074 6872 6565 0d0a 2020 2020 2020 2020   three..        
-00019810: 2d20 2020 2d2d 2d20 2020 2d2d 2d2d 2d0d  -   ---   -----.
-00019820: 0a20 2020 2020 2020 2030 2020 2020 2030  .        0     0
-00019830: 2020 2020 2020 2030 0d0a 2020 2020 2020         0..      
-00019840: 2020 3120 2020 2020 3120 2020 2020 2020    1     1       
-00019850: 310d 0a20 2020 2020 2020 2032 2020 2020  1..        2    
-00019860: 2032 2020 2020 2020 2032 0d0a 0d0a 2020   2       2....  
-00019870: 2020 2020 2020 5365 6c65 6374 2063 6f6c        Select col
-00019880: 756d 6e73 2062 7920 696e 6465 783a 0d0a  umns by index:..
-00019890: 0d0a 2020 2020 2020 2020 3e3e 3e20 6473  ..        >>> ds
-000198a0: 2e63 6f6c 5f66 696c 7465 7228 6974 656d  .col_filter(item
-000198b0: 7320 3d20 5b30 2c20 315d 290d 0a20 2020  s = [0, 1])..   
-000198c0: 2020 2020 2023 2020 206f 6e65 2020 2074       #   one   t
-000198d0: 776f 0d0a 2020 2020 2020 2020 2d20 2020  wo..        -   
-000198e0: 2d2d 2d20 2020 2d2d 2d0d 0a20 2020 2020  ---   ---..     
-000198f0: 2020 2030 2020 2020 2030 2020 2020 2030     0     0     0
-00019900: 0d0a 2020 2020 2020 2020 3120 2020 2020  ..        1     
-00019910: 3120 2020 2020 310d 0a20 2020 2020 2020  1     1..       
-00019920: 2032 2020 2020 2032 2020 2020 2030 0d0a   2     2     0..
-00019930: 0d0a 2020 2020 2020 2020 5365 6c65 6374  ..        Select
-00019940: 2063 6f6c 756d 6e73 2062 7920 7375 6273   columns by subs
-00019950: 7472 696e 673a 0d0a 0d0a 2020 2020 2020  tring:....      
-00019960: 2020 3e3e 3e20 6473 2e63 6f6c 5f66 696c    >>> ds.col_fil
-00019970: 7465 7228 6c69 6b65 203d 2022 7468 7222  ter(like = "thr"
-00019980: 290d 0a20 2020 2020 2020 2023 2020 2074  )..        #   t
-00019990: 6872 6565 0d0a 2020 2020 2020 2020 2d20  hree..        - 
-000199a0: 2020 2d2d 2d2d 2d0d 0a20 2020 2020 2020    -----..       
-000199b0: 2030 2020 2020 2020 2030 0d0a 2020 2020   0       0..    
-000199c0: 2020 2020 3120 2020 2020 2020 310d 0a20      1       1.. 
-000199d0: 2020 2020 2020 2032 2020 2020 2020 2032         2       2
-000199e0: 0d0a 0d0a 2020 2020 2020 2020 5365 6c65  ....        Sele
-000199f0: 6374 2063 6f6c 756d 6e73 2062 7920 7265  ct columns by re
-00019a00: 6775 6c61 7220 6578 7072 6573 7369 6f6e  gular expression
-00019a10: 3a0d 0a0d 0a20 2020 2020 2020 203e 3e3e  :....        >>>
-00019a20: 2064 732e 636f 6c5f 6669 6c74 6572 2872   ds.col_filter(r
-00019a30: 6567 6578 203d 2022 6524 2229 0d0a 2020  egex = "e$")..  
-00019a40: 2020 2020 2020 2320 2020 6f6e 6520 2020        #   one   
-00019a50: 7468 7265 650d 0a20 2020 2020 2020 202d  three..        -
-00019a60: 2020 202d 2d2d 2020 202d 2d2d 2d2d 0d0a     ---   -----..
-00019a70: 2020 2020 2020 2020 3020 2020 2020 3020          0     0 
-00019a80: 2020 2020 2020 300d 0a20 2020 2020 2020        0..       
-00019a90: 2031 2020 2020 2031 2020 2020 2020 2031   1     1       1
-00019aa0: 0d0a 2020 2020 2020 2020 3220 2020 2020  ..        2     
-00019ab0: 3220 2020 2020 2020 320d 0a0d 0a20 2020  2       2....   
-00019ac0: 2020 2020 2053 656c 6563 7420 602e 4461       Select `.Da
-00019ad0: 7461 7365 7460 2061 6e64 2060 2e46 6173  taset` and `.Fas
-00019ae0: 7441 7272 6179 6020 6f62 6a65 6374 7320  tArray` objects 
-00019af0: 6672 6f6d 2061 2060 5374 7275 6374 603a  from a `Struct`:
-00019b00: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
-00019b10: 6473 3220 3d20 7274 2e44 6174 6173 6574  ds2 = rt.Dataset
-00019b20: 287b 2266 6f75 7222 3a20 7274 2e61 7261  ({"four": rt.ara
-00019b30: 6e67 6528 3329 2c20 2266 6976 6522 3a20  nge(3), "five": 
-00019b40: 7274 2e61 7261 6e67 6528 3329 2025 2032  rt.arange(3) % 2
-00019b50: 7d29 0d0a 2020 2020 2020 2020 3e3e 3e20  })..        >>> 
-00019b60: 6661 203d 2072 742e 4661 7374 4172 7261  fa = rt.FastArra
-00019b70: 7928 5b31 2c20 322c 2033 5d29 0d0a 2020  y([1, 2, 3])..  
-00019b80: 2020 2020 2020 3e3e 3e20 7320 3d20 7274        >>> s = rt
-00019b90: 2e53 7472 7563 7428 290d 0a20 2020 2020  .Struct()..     
-00019ba0: 2020 203e 3e3e 2073 2e64 7320 3d20 6473     >>> s.ds = ds
-00019bb0: 0d0a 2020 2020 2020 2020 3e3e 3e20 732e  ..        >>> s.
-00019bc0: 6473 3220 3d20 6473 320d 0a20 2020 2020  ds2 = ds2..     
-00019bd0: 2020 203e 3e3e 2073 2e66 6120 3d20 6661     >>> s.fa = fa
-00019be0: 0d0a 2020 2020 2020 2020 3e3e 3e20 732e  ..        >>> s.
-00019bf0: 636f 6c5f 6669 6c74 6572 285b 305d 290d  col_filter([0]).
-00019c00: 0a20 2020 2020 2020 2023 2020 204e 616d  .        #   Nam
-00019c10: 6520 2020 5479 7065 2020 2020 2020 5369  e   Type      Si
-00019c20: 7a65 2020 2020 2020 2020 2020 2020 2020  ze              
-00019c30: 3020 2020 3120 2020 320d 0a20 2020 2020  0   1   2..     
-00019c40: 2020 202d 2020 202d 2d2d 2d20 2020 2d2d     -   ----   --
-00019c50: 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d2d 2d2d  -----   --------
-00019c60: 2d2d 2d2d 2d2d 2d20 2020 2d20 2020 2d20  -------   -   - 
-00019c70: 2020 2d0d 0a20 2020 2020 2020 2030 2020    -..        0  
-00019c80: 2064 7320 2020 2020 4461 7461 7365 7420   ds     Dataset 
-00019c90: 2020 3320 726f 7773 2078 2033 2063 6f6c    3 rows x 3 col
-00019ca0: 730d 0a20 2020 2020 2020 203e 3e3e 2073  s..        >>> s
-00019cb0: 2e63 6f6c 5f66 696c 7465 7228 2266 6122  .col_filter("fa"
-00019cc0: 290d 0a20 2020 2020 2020 2023 2020 204e  )..        #   N
-00019cd0: 616d 6520 2020 5479 7065 2020 2020 5369  ame   Type    Si
-00019ce0: 7a65 2020 2030 2020 2031 2020 2032 0d0a  ze   0   1   2..
-00019cf0: 2020 2020 2020 2020 2d20 2020 2d2d 2d2d          -   ----
-00019d00: 2020 202d 2d2d 2d2d 2020 202d 2d2d 2d20     -----   ---- 
-00019d10: 2020 2d20 2020 2d20 2020 2d0d 0a20 2020    -   -   -..   
-00019d20: 2020 2020 2030 2020 2066 6120 2020 2020       0   fa     
-00019d30: 696e 7433 3220 2020 3320 2020 2020 2031  int32   3      1
-00019d40: 2020 2032 2020 2033 0d0a 2020 2020 2020     2   3..      
-00019d50: 2020 2222 220d 0a20 2020 2020 2020 2069    """..        i
-00019d60: 6d70 6f72 7420 7265 0d0a 0d0a 2020 2020  mport re....    
-00019d70: 2020 2020 6e65 776c 6973 7420 3d20 5b5d      newlist = []
-00019d80: 0d0a 2020 2020 2020 2020 6966 2069 7465  ..        if ite
-00019d90: 6d73 2069 7320 6e6f 7420 4e6f 6e65 3a0d  ms is not None:.
-00019da0: 0a20 2020 2020 2020 2020 2020 206e 6577  .            new
-00019db0: 6c69 7374 203d 2069 7465 6d73 0d0a 2020  list = items..  
-00019dc0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00019dd0: 2069 7369 6e73 7461 6e63 6528 6974 656d   isinstance(item
-00019de0: 732c 206c 6973 7429 3a0d 0a20 2020 2020  s, list):..     
-00019df0: 2020 2020 2020 2020 2020 206e 6577 6c69             newli
-00019e00: 7374 203d 205b 6974 656d 735d 0d0a 0d0a  st = [items]....
-00019e10: 2020 2020 2020 2020 6966 206c 696b 653a          if like:
-00019e20: 0d0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
-00019e30: 7220 6b20 696e 2073 656c 662e 6b65 7973  r k in self.keys
-00019e40: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
-00019e50: 2020 2020 2069 6620 6c69 6b65 2069 6e20       if like in 
-00019e60: 6b3a 0d0a 2020 2020 2020 2020 2020 2020  k:..            
-00019e70: 2020 2020 2020 2020 6e65 776c 6973 742e          newlist.
-00019e80: 6170 7065 6e64 286b 290d 0a20 2020 2020  append(k)..     
-00019e90: 2020 2069 6620 7265 6765 783a 0d0a 2020     if regex:..  
-00019ea0: 2020 2020 2020 2020 2020 6d61 7463 6865            matche
-00019eb0: 7220 3d20 7265 2e63 6f6d 7069 6c65 2872  r = re.compile(r
-00019ec0: 6567 6578 290d 0a20 2020 2020 2020 2020  egex)..         
-00019ed0: 2020 2066 6f72 206b 2069 6e20 7365 6c66     for k in self
-00019ee0: 2e6b 6579 7328 293a 0d0a 2020 2020 2020  .keys():..      
-00019ef0: 2020 2020 2020 2020 2020 6966 206d 6174            if mat
-00019f00: 6368 6572 2e73 6561 7263 6828 6b29 2069  cher.search(k) i
-00019f10: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
-00019f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019f30: 206e 6577 6c69 7374 2e61 7070 656e 6428   newlist.append(
-00019f40: 6b29 0d0a 2020 2020 2020 2020 6966 2028  k)..        if (
-00019f50: 6974 656d 7320 6973 204e 6f6e 6529 2061  items is None) a
-00019f60: 6e64 206e 6f74 206c 696b 6520 616e 6420  nd not like and 
-00019f70: 6e6f 7420 7265 6765 783a 0d0a 2020 2020  not regex:..    
-00019f80: 2020 2020 2020 2020 7261 6973 6520 5479          raise Ty
-00019f90: 7065 4572 726f 7228 224d 7573 7420 7061  peError("Must pa
-00019fa0: 7373 2065 6974 6865 7220 6069 7465 6d73  ss either `items
-00019fb0: 602c 2060 6c69 6b65 602c 206f 7220 6072  `, `like`, or `r
-00019fc0: 6567 6578 6022 290d 0a0d 0a20 2020 2020  egex`")....     
-00019fd0: 2020 2069 6620 6c65 6e28 6e65 776c 6973     if len(newlis
-00019fe0: 7429 203d 3d20 303a 0d0a 2020 2020 2020  t) == 0:..      
-00019ff0: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
-0001a000: 6545 7272 6f72 2822 416c 6c20 636f 6c75  eError("All colu
-0001a010: 6d6e 7320 7765 7265 2072 656d 6f76 6564  mns were removed
-0001a020: 2229 0d0a 0d0a 2020 2020 2020 2020 7265  ")....        re
-0001a030: 7475 726e 2073 656c 665b 6e65 776c 6973  turn self[newlis
-0001a040: 745d 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  t]....    # ----
+00019370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+00019380: 2020 2020 6465 6620 636f 6c5f 6669 6c74      def col_filt
+00019390: 6572 2873 656c 662c 2069 7465 6d73 3d4e  er(self, items=N
+000193a0: 6f6e 652c 206c 696b 653d 4e6f 6e65 2c20  one, like=None, 
+000193b0: 7265 6765 783a 204f 7074 696f 6e61 6c5b  regex: Optional[
+000193c0: 2272 652e 5061 7474 6572 6e22 5d20 3d20  "re.Pattern"] = 
+000193d0: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
+000193e0: 2222 220d 0a20 2020 2020 2020 2052 6574  """..        Ret
+000193f0: 7572 6e20 7468 6520 636f 6c75 6d6e 7320  urn the columns 
+00019400: 7370 6563 6966 6965 6420 6279 2069 6e64  specified by ind
+00019410: 6963 6573 206f 7220 6d61 7463 6865 7320  ices or matches 
+00019420: 6f6e 2063 6f6c 756d 6e20 6e61 6d65 732e  on column names.
+00019430: 0d0a 0d0a 2020 2020 2020 2020 4e6f 7465  ....        Note
+00019440: 2074 6861 7420 7468 6973 206d 6574 686f   that this metho
+00019450: 6420 646f 6573 6e27 7420 6669 6c74 6572  d doesn't filter
+00019460: 2061 2060 2e44 6174 6173 6574 6020 6f72   a `.Dataset` or
+00019470: 2060 5374 7275 6374 6020 6f6e 0d0a 2020   `Struct` on..  
+00019480: 2020 2020 2020 6974 7320 636f 6e74 656e        its conten
+00019490: 7473 2c20 6f6e 6c79 206f 6e20 7468 6520  ts, only on the 
+000194a0: 636f 6c75 6d6e 2069 6e64 6578 206f 7220  column index or 
+000194b0: 6e61 6d65 2e0d 0a0d 0a20 2020 2020 2020  name.....       
+000194c0: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
+000194d0: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
+000194e0: 0a20 2020 2020 2020 2069 7465 6d73 203a  .        items :
+000194f0: 206c 6973 742c 2064 6566 6175 6c74 204e   list, default N
+00019500: 6f6e 650d 0a20 2020 2020 2020 2020 2020  one..           
+00019510: 204e 616d 6573 206f 7220 696e 6469 6365   Names or indice
+00019520: 7320 6f66 2063 6f6c 756d 6e73 2e20 4966  s of columns. If
+00019530: 2060 6974 656d 7360 2069 7320 7573 6564   `items` is used
+00019540: 2c20 6e65 6974 6865 7220 606c 696b 6560  , neither `like`
+00019550: 0d0a 2020 2020 2020 2020 2020 2020 6e6f  ..            no
+00019560: 7220 6072 6567 6578 6020 6361 6e20 6265  r `regex` can be
+00019570: 2075 7365 642e 0d0a 2020 2020 2020 2020   used...        
+00019580: 6c69 6b65 203a 2073 7472 2c20 6465 6661  like : str, defa
+00019590: 756c 7420 4e6f 6e65 0d0a 2020 2020 2020  ult None..      
+000195a0: 2020 2020 2020 5375 6273 7472 696e 6720        Substring 
+000195b0: 746f 206d 6174 6368 2069 6e20 636f 6c75  to match in colu
+000195c0: 6d6e 206e 616d 6573 2e0d 0a20 2020 2020  mn names...     
+000195d0: 2020 2072 6567 6578 203a 2073 7472 2c20     regex : str, 
+000195e0: 6465 6661 756c 7420 4e6f 6e65 0d0a 2020  default None..  
+000195f0: 2020 2020 2020 2020 2020 5265 6775 6c61            Regula
+00019600: 7220 6578 7072 6573 7369 6f6e 2073 7472  r expression str
+00019610: 696e 6720 746f 206d 6174 6368 2069 6e20  ing to match in 
+00019620: 636f 6c75 6d6e 206e 616d 6573 2e0d 0a0d  column names....
+00019630: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+00019640: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+00019650: 2d0d 0a20 2020 2020 2020 2060 2e44 6174  -..        `.Dat
+00019660: 6173 6574 6020 6f72 2060 5374 7275 6374  aset` or `Struct
+00019670: 600d 0a20 2020 2020 2020 2020 2020 2053  `..            S
+00019680: 616d 6520 7479 7065 2061 7320 7468 6520  ame type as the 
+00019690: 696e 7075 7420 6f62 6a65 6374 2e0d 0a0d  input object....
+000196a0: 0a20 2020 2020 2020 2053 6565 2041 6c73  .        See Als
+000196b0: 6f0d 0a20 2020 2020 2020 202d 2d2d 2d2d  o..        -----
+000196c0: 2d2d 2d0d 0a20 2020 2020 2020 2053 7472  ---..        Str
+000196d0: 7563 742e 5f5f 6765 7469 7465 6d5f 5f0d  uct.__getitem__.
+000196e0: 0a20 2020 2020 2020 202e 4461 7461 7365  .        .Datase
+000196f0: 742e 5f5f 6765 7469 7465 6d5f 5f0d 0a0d  t.__getitem__...
+00019700: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
+00019710: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00019720: 2d2d 2d0d 0a20 2020 2020 2020 2053 656c  ---..        Sel
+00019730: 6563 7420 636f 6c75 6d6e 7320 6279 206e  ect columns by n
+00019740: 616d 653a 0d0a 0d0a 2020 2020 2020 2020  ame:....        
+00019750: 3e3e 3e20 6473 203d 2072 742e 4461 7461  >>> ds = rt.Data
+00019760: 7365 7428 7b22 6f6e 6522 3a20 7274 2e61  set({"one": rt.a
+00019770: 7261 6e67 6528 3329 2c20 2274 776f 223a  range(3), "two":
+00019780: 2072 742e 6172 616e 6765 2833 2920 2520   rt.arange(3) % 
+00019790: 322c 2022 7468 7265 6522 3a20 7274 2e61  2, "three": rt.a
+000197a0: 7261 6e67 6528 3329 2025 2033 7d29 0d0a  range(3) % 3})..
+000197b0: 2020 2020 2020 2020 3e3e 3e20 6473 2e63          >>> ds.c
+000197c0: 6f6c 5f66 696c 7465 7228 6974 656d 733d  ol_filter(items=
+000197d0: 5b22 6f6e 6522 2c20 2274 6872 6565 225d  ["one", "three"]
+000197e0: 290d 0a20 2020 2020 2020 2023 2020 206f  )..        #   o
+000197f0: 6e65 2020 2074 6872 6565 0d0a 2020 2020  ne   three..    
+00019800: 2020 2020 2d20 2020 2d2d 2d20 2020 2d2d      -   ---   --
+00019810: 2d2d 2d0d 0a20 2020 2020 2020 2030 2020  ---..        0  
+00019820: 2020 2030 2020 2020 2020 2030 0d0a 2020     0       0..  
+00019830: 2020 2020 2020 3120 2020 2020 3120 2020        1     1   
+00019840: 2020 2020 310d 0a20 2020 2020 2020 2032      1..        2
+00019850: 2020 2020 2032 2020 2020 2020 2032 0d0a       2       2..
+00019860: 0d0a 2020 2020 2020 2020 5365 6c65 6374  ..        Select
+00019870: 2063 6f6c 756d 6e73 2062 7920 696e 6465   columns by inde
+00019880: 783a 0d0a 0d0a 2020 2020 2020 2020 3e3e  x:....        >>
+00019890: 3e20 6473 2e63 6f6c 5f66 696c 7465 7228  > ds.col_filter(
+000198a0: 6974 656d 7320 3d20 5b30 2c20 315d 290d  items = [0, 1]).
+000198b0: 0a20 2020 2020 2020 2023 2020 206f 6e65  .        #   one
+000198c0: 2020 2074 776f 0d0a 2020 2020 2020 2020     two..        
+000198d0: 2d20 2020 2d2d 2d20 2020 2d2d 2d0d 0a20  -   ---   ---.. 
+000198e0: 2020 2020 2020 2030 2020 2020 2030 2020         0     0  
+000198f0: 2020 2030 0d0a 2020 2020 2020 2020 3120     0..        1 
+00019900: 2020 2020 3120 2020 2020 310d 0a20 2020      1     1..   
+00019910: 2020 2020 2032 2020 2020 2032 2020 2020       2     2    
+00019920: 2030 0d0a 0d0a 2020 2020 2020 2020 5365   0....        Se
+00019930: 6c65 6374 2063 6f6c 756d 6e73 2062 7920  lect columns by 
+00019940: 7375 6273 7472 696e 673a 0d0a 0d0a 2020  substring:....  
+00019950: 2020 2020 2020 3e3e 3e20 6473 2e63 6f6c        >>> ds.col
+00019960: 5f66 696c 7465 7228 6c69 6b65 203d 2022  _filter(like = "
+00019970: 7468 7222 290d 0a20 2020 2020 2020 2023  thr")..        #
+00019980: 2020 2074 6872 6565 0d0a 2020 2020 2020     three..      
+00019990: 2020 2d20 2020 2d2d 2d2d 2d0d 0a20 2020    -   -----..   
+000199a0: 2020 2020 2030 2020 2020 2020 2030 0d0a       0       0..
+000199b0: 2020 2020 2020 2020 3120 2020 2020 2020          1       
+000199c0: 310d 0a20 2020 2020 2020 2032 2020 2020  1..        2    
+000199d0: 2020 2032 0d0a 0d0a 2020 2020 2020 2020     2....        
+000199e0: 5365 6c65 6374 2063 6f6c 756d 6e73 2062  Select columns b
+000199f0: 7920 7265 6775 6c61 7220 6578 7072 6573  y regular expres
+00019a00: 7369 6f6e 3a0d 0a0d 0a20 2020 2020 2020  sion:....       
+00019a10: 203e 3e3e 2064 732e 636f 6c5f 6669 6c74   >>> ds.col_filt
+00019a20: 6572 2872 6567 6578 203d 2022 6524 2229  er(regex = "e$")
+00019a30: 0d0a 2020 2020 2020 2020 2320 2020 6f6e  ..        #   on
+00019a40: 6520 2020 7468 7265 650d 0a20 2020 2020  e   three..     
+00019a50: 2020 202d 2020 202d 2d2d 2020 202d 2d2d     -   ---   ---
+00019a60: 2d2d 0d0a 2020 2020 2020 2020 3020 2020  --..        0   
+00019a70: 2020 3020 2020 2020 2020 300d 0a20 2020    0       0..   
+00019a80: 2020 2020 2031 2020 2020 2031 2020 2020       1     1    
+00019a90: 2020 2031 0d0a 2020 2020 2020 2020 3220     1..        2 
+00019aa0: 2020 2020 3220 2020 2020 2020 320d 0a0d      2       2...
+00019ab0: 0a20 2020 2020 2020 2053 656c 6563 7420  .        Select 
+00019ac0: 602e 4461 7461 7365 7460 2061 6e64 2060  `.Dataset` and `
+00019ad0: 2e46 6173 7441 7272 6179 6020 6f62 6a65  .FastArray` obje
+00019ae0: 6374 7320 6672 6f6d 2061 2060 5374 7275  cts from a `Stru
+00019af0: 6374 603a 0d0a 0d0a 2020 2020 2020 2020  ct`:....        
+00019b00: 3e3e 3e20 6473 3220 3d20 7274 2e44 6174  >>> ds2 = rt.Dat
+00019b10: 6173 6574 287b 2266 6f75 7222 3a20 7274  aset({"four": rt
+00019b20: 2e61 7261 6e67 6528 3329 2c20 2266 6976  .arange(3), "fiv
+00019b30: 6522 3a20 7274 2e61 7261 6e67 6528 3329  e": rt.arange(3)
+00019b40: 2025 2032 7d29 0d0a 2020 2020 2020 2020   % 2})..        
+00019b50: 3e3e 3e20 6661 203d 2072 742e 4661 7374  >>> fa = rt.Fast
+00019b60: 4172 7261 7928 5b31 2c20 322c 2033 5d29  Array([1, 2, 3])
+00019b70: 0d0a 2020 2020 2020 2020 3e3e 3e20 7320  ..        >>> s 
+00019b80: 3d20 7274 2e53 7472 7563 7428 290d 0a20  = rt.Struct().. 
+00019b90: 2020 2020 2020 203e 3e3e 2073 2e64 7320         >>> s.ds 
+00019ba0: 3d20 6473 0d0a 2020 2020 2020 2020 3e3e  = ds..        >>
+00019bb0: 3e20 732e 6473 3220 3d20 6473 320d 0a20  > s.ds2 = ds2.. 
+00019bc0: 2020 2020 2020 203e 3e3e 2073 2e66 6120         >>> s.fa 
+00019bd0: 3d20 6661 0d0a 2020 2020 2020 2020 3e3e  = fa..        >>
+00019be0: 3e20 732e 636f 6c5f 6669 6c74 6572 285b  > s.col_filter([
+00019bf0: 305d 290d 0a20 2020 2020 2020 2023 2020  0])..        #  
+00019c00: 204e 616d 6520 2020 5479 7065 2020 2020   Name   Type    
+00019c10: 2020 5369 7a65 2020 2020 2020 2020 2020    Size          
+00019c20: 2020 2020 3020 2020 3120 2020 320d 0a20      0   1   2.. 
+00019c30: 2020 2020 2020 202d 2020 202d 2d2d 2d20         -   ---- 
+00019c40: 2020 2d2d 2d2d 2d2d 2d20 2020 2d2d 2d2d    -------   ----
+00019c50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d20 2020 2d20  -----------   - 
+00019c60: 2020 2d20 2020 2d0d 0a20 2020 2020 2020    -   -..       
+00019c70: 2030 2020 2064 7320 2020 2020 4461 7461   0   ds     Data
+00019c80: 7365 7420 2020 3320 726f 7773 2078 2033  set   3 rows x 3
+00019c90: 2063 6f6c 730d 0a20 2020 2020 2020 203e   cols..        >
+00019ca0: 3e3e 2073 2e63 6f6c 5f66 696c 7465 7228  >> s.col_filter(
+00019cb0: 2266 6122 290d 0a20 2020 2020 2020 2023  "fa")..        #
+00019cc0: 2020 204e 616d 6520 2020 5479 7065 2020     Name   Type  
+00019cd0: 2020 5369 7a65 2020 2030 2020 2031 2020    Size   0   1  
+00019ce0: 2032 0d0a 2020 2020 2020 2020 2d20 2020   2..        -   
+00019cf0: 2d2d 2d2d 2020 202d 2d2d 2d2d 2020 202d  ----   -----   -
+00019d00: 2d2d 2d20 2020 2d20 2020 2d20 2020 2d0d  ---   -   -   -.
+00019d10: 0a20 2020 2020 2020 2030 2020 2066 6120  .        0   fa 
+00019d20: 2020 2020 696e 7433 3220 2020 3320 2020      int32   3   
+00019d30: 2020 2031 2020 2032 2020 2033 0d0a 2020     1   2   3..  
+00019d40: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+00019d50: 2020 2069 6d70 6f72 7420 7265 0d0a 0d0a     import re....
+00019d60: 2020 2020 2020 2020 6e65 776c 6973 7420          newlist 
+00019d70: 3d20 5b5d 0d0a 2020 2020 2020 2020 6966  = []..        if
+00019d80: 2069 7465 6d73 2069 7320 6e6f 7420 4e6f   items is not No
+00019d90: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
+00019da0: 206e 6577 6c69 7374 203d 2069 7465 6d73   newlist = items
+00019db0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00019dc0: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+00019dd0: 6974 656d 732c 206c 6973 7429 3a0d 0a20  items, list):.. 
+00019de0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+00019df0: 6577 6c69 7374 203d 205b 6974 656d 735d  ewlist = [items]
+00019e00: 0d0a 0d0a 2020 2020 2020 2020 6966 206c  ....        if l
+00019e10: 696b 653a 0d0a 2020 2020 2020 2020 2020  ike:..          
+00019e20: 2020 666f 7220 6b20 696e 2073 656c 662e    for k in self.
+00019e30: 6b65 7973 2829 3a0d 0a20 2020 2020 2020  keys():..       
+00019e40: 2020 2020 2020 2020 2069 6620 6c69 6b65           if like
+00019e50: 2069 6e20 6b3a 0d0a 2020 2020 2020 2020   in k:..        
+00019e60: 2020 2020 2020 2020 2020 2020 6e65 776c              newl
+00019e70: 6973 742e 6170 7065 6e64 286b 290d 0a20  ist.append(k).. 
+00019e80: 2020 2020 2020 2069 6620 7265 6765 783a         if regex:
+00019e90: 0d0a 2020 2020 2020 2020 2020 2020 6d61  ..            ma
+00019ea0: 7463 6865 7220 3d20 7265 2e63 6f6d 7069  tcher = re.compi
+00019eb0: 6c65 2872 6567 6578 290d 0a20 2020 2020  le(regex)..     
+00019ec0: 2020 2020 2020 2066 6f72 206b 2069 6e20         for k in 
+00019ed0: 7365 6c66 2e6b 6579 7328 293a 0d0a 2020  self.keys():..  
+00019ee0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00019ef0: 206d 6174 6368 6572 2e73 6561 7263 6828   matcher.search(
+00019f00: 6b29 2069 7320 6e6f 7420 4e6f 6e65 3a0d  k) is not None:.
+00019f10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019f20: 2020 2020 206e 6577 6c69 7374 2e61 7070       newlist.app
+00019f30: 656e 6428 6b29 0d0a 2020 2020 2020 2020  end(k)..        
+00019f40: 6966 2028 6974 656d 7320 6973 204e 6f6e  if (items is Non
+00019f50: 6529 2061 6e64 206e 6f74 206c 696b 6520  e) and not like 
+00019f60: 616e 6420 6e6f 7420 7265 6765 783a 0d0a  and not regex:..
+00019f70: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00019f80: 6520 5479 7065 4572 726f 7228 224d 7573  e TypeError("Mus
+00019f90: 7420 7061 7373 2065 6974 6865 7220 6069  t pass either `i
+00019fa0: 7465 6d73 602c 2060 6c69 6b65 602c 206f  tems`, `like`, o
+00019fb0: 7220 6072 6567 6578 6022 290d 0a0d 0a20  r `regex`").... 
+00019fc0: 2020 2020 2020 2069 6620 6c65 6e28 6e65         if len(ne
+00019fd0: 776c 6973 7429 203d 3d20 303a 0d0a 2020  wlist) == 0:..  
+00019fe0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00019ff0: 5661 6c75 6545 7272 6f72 2822 416c 6c20  ValueError("All 
+0001a000: 636f 6c75 6d6e 7320 7765 7265 2072 656d  columns were rem
+0001a010: 6f76 6564 2229 0d0a 0d0a 2020 2020 2020  oved")....      
+0001a020: 2020 7265 7475 726e 2073 656c 665b 6e65    return self[ne
+0001a030: 776c 6973 745d 0d0a 0d0a 2020 2020 2320  wlist]....    # 
+0001a040: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001a050: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001a060: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001a070: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001a080: 2d2d 2d0d 0a20 2020 2064 6566 206c 6162  ---..    def lab
-0001a090: 656c 5f73 6574 5f6e 616d 6573 2873 656c  el_set_names(sel
-0001a0a0: 662c 206c 6973 746e 616d 6573 293a 0d0a  f, listnames):..
-0001a0b0: 2020 2020 2020 2020 2222 2253 6574 2077          """Set w
-0001a0c0: 6869 6368 2063 6f6c 756d 6e20 6e61 6d65  hich column name
-0001a0d0: 7320 6361 6e20 6265 2075 7365 6420 6173  s can be used as
-0001a0e0: 206c 6162 656c 7320 696e 2064 6973 706c   labels in displ
-0001a0f0: 6179 2222 220d 0a20 2020 2020 2020 2073  ay"""..        s
-0001a100: 656c 662e 5f61 6c6c 5f69 7465 6d73 2e6c  elf._all_items.l
-0001a110: 6162 656c 5f73 6574 5f6e 616d 6573 286c  abel_set_names(l
-0001a120: 6973 746e 616d 6573 290d 0a0d 0a20 2020  istnames)....   
-0001a130: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+0001a070: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
+0001a080: 206c 6162 656c 5f73 6574 5f6e 616d 6573   label_set_names
+0001a090: 2873 656c 662c 206c 6973 746e 616d 6573  (self, listnames
+0001a0a0: 293a 0d0a 2020 2020 2020 2020 2222 2253  ):..        """S
+0001a0b0: 6574 2077 6869 6368 2063 6f6c 756d 6e20  et which column 
+0001a0c0: 6e61 6d65 7320 6361 6e20 6265 2075 7365  names can be use
+0001a0d0: 6420 6173 206c 6162 656c 7320 696e 2064  d as labels in d
+0001a0e0: 6973 706c 6179 2222 220d 0a20 2020 2020  isplay"""..     
+0001a0f0: 2020 2073 656c 662e 5f61 6c6c 5f69 7465     self._all_ite
+0001a100: 6d73 2e6c 6162 656c 5f73 6574 5f6e 616d  ms.label_set_nam
+0001a110: 6573 286c 6973 746e 616d 6573 290d 0a0d  es(listnames)...
+0001a120: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+0001a130: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001a140: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001a150: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001a160: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-0001a170: 6465 6620 6c61 6265 6c5f 6765 745f 6e61  def label_get_na
-0001a180: 6d65 7328 7365 6c66 293a 0d0a 2020 2020  mes(self):..    
-0001a190: 2020 2020 2222 2247 6574 7320 7468 6520      """Gets the 
-0001a1a0: 636f 6c75 6d6e 206e 616d 6573 2075 7365  column names use
-0001a1b0: 6420 6173 206c 6162 656c 7320 696e 2064  d as labels in d
-0001a1c0: 6973 706c 6179 2222 220d 0a20 2020 2020  isplay"""..     
-0001a1d0: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-0001a1e0: 616c 6c5f 6974 656d 732e 6c61 6265 6c5f  all_items.label_
-0001a1f0: 6765 745f 6e61 6d65 7328 290d 0a0d 0a20  get_names().... 
-0001a200: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+0001a150: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+0001a160: 2020 2020 6465 6620 6c61 6265 6c5f 6765      def label_ge
+0001a170: 745f 6e61 6d65 7328 7365 6c66 293a 0d0a  t_names(self):..
+0001a180: 2020 2020 2020 2020 2222 2247 6574 7320          """Gets 
+0001a190: 7468 6520 636f 6c75 6d6e 206e 616d 6573  the column names
+0001a1a0: 2075 7365 6420 6173 206c 6162 656c 7320   used as labels 
+0001a1b0: 696e 2064 6973 706c 6179 2222 220d 0a20  in display""".. 
+0001a1c0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0001a1d0: 6c66 2e5f 616c 6c5f 6974 656d 732e 6c61  lf._all_items.la
+0001a1e0: 6265 6c5f 6765 745f 6e61 6d65 7328 290d  bel_get_names().
+0001a1f0: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+0001a200: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001a210: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001a220: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001a230: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
-0001a240: 2020 6465 6620 6c61 6265 6c5f 6173 5f64    def label_as_d
-0001a250: 6963 7428 7365 6c66 293a 0d0a 2020 2020  ict(self):..    
-0001a260: 2020 2020 2222 2247 6574 7320 7468 6520      """Gets the 
-0001a270: 636f 6c75 6d6e 206e 616d 6573 2075 7365  column names use
-0001a280: 6420 6173 206c 6162 656c 7320 696e 2064  d as labels in d
-0001a290: 6973 706c 6179 2222 220d 0a20 2020 2020  isplay"""..     
-0001a2a0: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-0001a2b0: 616c 6c5f 6974 656d 732e 6c61 6265 6c5f  all_items.label_
-0001a2c0: 6173 5f64 6963 7428 290d 0a0d 0a20 2020  as_dict()....   
-0001a2d0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+0001a230: 0d0a 2020 2020 6465 6620 6c61 6265 6c5f  ..    def label_
+0001a240: 6173 5f64 6963 7428 7365 6c66 293a 0d0a  as_dict(self):..
+0001a250: 2020 2020 2020 2020 2222 2247 6574 7320          """Gets 
+0001a260: 7468 6520 636f 6c75 6d6e 206e 616d 6573  the column names
+0001a270: 2075 7365 6420 6173 206c 6162 656c 7320   used as labels 
+0001a280: 696e 2064 6973 706c 6179 2222 220d 0a20  in display""".. 
+0001a290: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0001a2a0: 6c66 2e5f 616c 6c5f 6974 656d 732e 6c61  lf._all_items.la
+0001a2b0: 6265 6c5f 6173 5f64 6963 7428 290d 0a0d  bel_as_dict()...
+0001a2c0: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+0001a2d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001a2e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001a2f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001a300: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-0001a310: 6465 6620 6c61 6265 6c5f 7265 6d6f 7665  def label_remove
-0001a320: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-0001a330: 2022 2222 5265 6f6d 7665 7320 616e 7920   """Reomves any 
-0001a340: 6c61 6265 6c73 2075 7365 6420 696e 2064  labels used in d
-0001a350: 6973 706c 6179 2222 220d 0a20 2020 2020  isplay"""..     
-0001a360: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-0001a370: 616c 6c5f 6974 656d 732e 6c61 6265 6c5f  all_items.label_
-0001a380: 7265 6d6f 7665 2829 0d0a 0d0a 2020 2020  remove()....    
-0001a390: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+0001a2f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+0001a300: 2020 2020 6465 6620 6c61 6265 6c5f 7265      def label_re
+0001a310: 6d6f 7665 2873 656c 6629 3a0d 0a20 2020  move(self):..   
+0001a320: 2020 2020 2022 2222 5265 6f6d 7665 7320       """Reomves 
+0001a330: 616e 7920 6c61 6265 6c73 2075 7365 6420  any labels used 
+0001a340: 696e 2064 6973 706c 6179 2222 220d 0a20  in display""".. 
+0001a350: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0001a360: 6c66 2e5f 616c 6c5f 6974 656d 732e 6c61  lf._all_items.la
+0001a370: 6265 6c5f 7265 6d6f 7665 2829 0d0a 0d0a  bel_remove()....
+0001a380: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+0001a390: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001a3a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001a3b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001a3c0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
-0001a3d0: 6566 206c 6162 656c 5f66 696c 7465 7228  ef label_filter(
-0001a3e0: 7365 6c66 2c20 6974 656d 733d 4e6f 6e65  self, items=None
-0001a3f0: 2c20 6c69 6b65 3d4e 6f6e 652c 2072 6567  , like=None, reg
-0001a400: 6578 3d4e 6f6e 652c 2061 7869 733d 4e6f  ex=None, axis=No
-0001a410: 6e65 293a 0d0a 2020 2020 2020 2020 2222  ne):..        ""
-0001a420: 220d 0a20 2020 2020 2020 2053 7562 7365  "..        Subse
-0001a430: 7420 726f 7773 206f 6620 6461 7461 7365  t rows of datase
-0001a440: 7420 6163 636f 7264 696e 6720 746f 2076  t according to v
-0001a450: 616c 7565 2069 6e20 6974 7320 6c61 6265  alue in its labe
-0001a460: 6c20 636f 6c75 6d6e 2e0d 0a0d 0a20 2020  l column.....   
-0001a470: 2020 2020 2054 4f44 4f3a 2068 6f77 2073       TODO: how s
-0001a480: 686f 756c 6420 6d75 6c74 696b 6579 2062  hould multikey b
-0001a490: 6520 6861 6e64 6c65 643f 0d0a 0d0a 2020  e handled?....  
-0001a4a0: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
-0001a4b0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-0001a4c0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6974  ----..        it
-0001a4d0: 656d 7320 3a20 6c69 7374 2d6c 696b 650d  ems : list-like.
-0001a4e0: 0a20 2020 2020 2020 2020 2020 204c 6973  .            Lis
-0001a4f0: 7420 6f66 2073 7065 6369 6669 6320 7661  t of specific va
-0001a500: 6c75 6573 2074 6f20 6d61 7463 6820 696e  lues to match in
-0001a510: 206c 6162 656c 2063 6f6c 756d 6e2e 0d0a   label column...
-0001a520: 2020 2020 2020 2020 6c69 6b65 203a 2073          like : s
-0001a530: 7472 696e 670d 0a20 2020 2020 2020 2020  tring..         
-0001a540: 2020 204b 6565 7020 6974 656d 7320 7768     Keep items wh
-0001a550: 6572 6520 276c 696b 6527 206f 6363 7572  ere 'like' occur
-0001a560: 7320 696e 206c 6162 656c 2063 6f6c 756d  s in label colum
-0001a570: 6e2e 0d0a 2020 2020 2020 2020 7265 6765  n...        rege
-0001a580: 7820 3a20 7374 7269 6e67 2028 7265 6775  x : string (regu
-0001a590: 6c61 7220 6578 7072 6573 7369 6f6e 290d  lar expression).
-0001a5a0: 0a20 2020 2020 2020 2020 2020 204b 6565  .            Kee
-0001a5b0: 7020 6178 6973 2077 6974 6820 7265 2e73  p axis with re.s
-0001a5c0: 6561 7263 6828 7265 6765 782c 2063 6f6c  earch(regex, col
-0001a5d0: 2920 3d3d 2054 7275 652e 0d0a 0d0a 2020  ) == True.....  
-0001a5e0: 2020 2020 2020 4578 616d 706c 6573 0d0a        Examples..
-0001a5f0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-0001a600: 0d0a 2020 2020 2020 2020 3e3e 3e20 6473  ..        >>> ds
-0001a610: 0d0a 2020 2020 2020 2020 2023 2020 2063  ..         #   c
-0001a620: 6f6c 5f37 2020 2063 6f6c 5f38 2020 2063  ol_7   col_8   c
-0001a630: 6f6c 5f39 2020 206b 6579 636f 6c0d 0a20  ol_9   keycol.. 
-0001a640: 2020 2020 2020 202d 2d20 2020 2d2d 2d2d         --   ----
-0001a650: 2d20 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d  -   -----   ----
-0001a660: 2d20 2020 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  -   ------------
-0001a670: 2d2d 0d0a 2020 2020 2020 2020 2030 2020  --..         0  
-0001a680: 2020 302e 3533 2020 2020 302e 3532 2020    0.53    0.52  
-0001a690: 2020 302e 3437 2020 2070 6175 6c0d 0a20    0.47   paul.. 
-0001a6a0: 2020 2020 2020 2020 3120 2020 2030 2e31          1    0.1
-0001a6b0: 3020 2020 2030 2e37 3820 2020 2030 2e30  0    0.78    0.0
-0001a6c0: 3920 2020 7261 790d 0a20 2020 2020 2020  9   ray..       
-0001a6d0: 2020 3220 2020 2030 2e35 3020 2020 2030    2    0.50    0
-0001a6e0: 2e37 3920 2020 2030 2e35 3020 2020 7061  .79    0.50   pa
-0001a6f0: 756c 0d0a 2020 2020 2020 2020 2033 2020  ul..         3  
-0001a700: 2020 302e 3831 2020 2020 302e 3638 2020    0.81    0.68  
-0001a710: 2020 302e 3732 2020 2072 6179 0d0a 2020    0.72   ray..  
-0001a720: 2020 2020 2020 2034 2020 2020 302e 3038         4    0.08
-0001a730: 2020 2020 302e 3731 2020 2020 302e 3032      0.71    0.02
-0001a740: 2020 206a 6f68 6e0d 0a20 2020 2020 2020     john..       
-0001a750: 2020 3520 2020 2030 2e33 3820 2020 2030    5    0.38    0
-0001a760: 2e31 3920 2020 2030 2e39 3020 2020 7261  .19    0.90   ra
-0001a770: 790d 0a20 2020 2020 2020 2020 3620 2020  y..         6   
-0001a780: 2030 2e35 3320 2020 2030 2e33 3320 2020   0.53    0.33   
-0001a790: 2030 2e34 3620 2020 6d61 7279 206b 6174   0.46   mary kat
-0001a7a0: 6865 7269 6e65 0d0a 2020 2020 2020 2020  herine..        
-0001a7b0: 2037 2020 2020 302e 3735 2020 2020 302e   7    0.75    0.
-0001a7c0: 3438 2020 2020 302e 3934 2020 206a 6f68  48    0.94   joh
-0001a7d0: 6e0d 0a20 2020 2020 2020 2020 3820 2020  n..         8   
-0001a7e0: 2031 2e30 3020 2020 2030 2e37 3020 2020   1.00    0.70   
-0001a7f0: 2030 2e37 3920 2020 6d61 7279 2061 6e6e   0.79   mary ann
-0001a800: 0d0a 2020 2020 2020 2020 2039 2020 2020  ..         9    
-0001a810: 302e 3437 2020 2020 302e 3634 2020 2020  0.47    0.64    
-0001a820: 302e 3136 2020 2072 6179 0d0a 2020 2020  0.16   ray..    
-0001a830: 2020 2020 3130 2020 2020 302e 3830 2020      10    0.80  
-0001a840: 2020 302e 3433 2020 2020 302e 3038 2020    0.43    0.08  
-0001a850: 206d 6172 7920 616e 6e0d 0a20 2020 2020   mary ann..     
-0001a860: 2020 2031 3120 2020 2030 2e35 3420 2020     11    0.54   
-0001a870: 2030 2e31 3920 2020 2030 2e34 3320 2020   0.19    0.43   
-0001a880: 6a6f 650d 0a20 2020 2020 2020 2031 3220  joe..        12 
-0001a890: 2020 2030 2e38 3920 2020 2030 2e30 3820     0.89    0.08 
-0001a8a0: 2020 2030 2e38 3120 2020 6d61 7279 206b     0.81   mary k
-0001a8b0: 6174 6865 7269 6e65 0d0a 2020 2020 2020  atherine..      
-0001a8c0: 2020 3133 2020 2020 302e 3936 2020 2020    13    0.96    
-0001a8d0: 302e 3931 2020 2020 302e 3333 2020 2070  0.91    0.33   p
-0001a8e0: 6175 6c0d 0a20 2020 2020 2020 2031 3420  aul..        14 
-0001a8f0: 2020 2030 2e31 3820 2020 2030 2e35 3520     0.18    0.55 
-0001a900: 2020 2030 2e34 3420 2020 7261 790d 0a20     0.44   ray.. 
-0001a910: 2020 2020 2020 2031 3520 2020 2030 2e34         15    0.4
-0001a920: 3220 2020 2030 2e34 3920 2020 2030 2e36  2    0.49    0.6
-0001a930: 3620 2020 6d61 7279 2061 6e6e 0d0a 2020  6   mary ann..  
-0001a940: 2020 2020 2020 3136 2020 2020 302e 3035        16    0.05
-0001a950: 2020 2020 302e 3533 2020 2020 302e 3636      0.53    0.66
-0001a960: 2020 2070 6175 6c0d 0a20 2020 2020 2020     paul..       
-0001a970: 2031 3720 2020 2030 2e36 3020 2020 2030   17    0.60    0
-0001a980: 2e35 3620 2020 2030 2e30 3320 2020 6a6f  .56    0.03   jo
-0001a990: 650d 0a20 2020 2020 2020 2031 3820 2020  e..        18   
-0001a9a0: 2030 2e36 3220 2020 2030 2e34 3220 2020   0.62    0.42   
-0001a9b0: 2030 2e35 3620 2020 6d61 7279 2061 6e6e   0.56   mary ann
-0001a9c0: 0d0a 2020 2020 2020 2020 3139 2020 2020  ..        19    
-0001a9d0: 302e 3633 2020 2020 302e 3333 2020 2020  0.63    0.33    
-0001a9e0: 302e 3935 2020 2070 6175 6c0d 0a0d 0a20  0.95   paul.... 
-0001a9f0: 2020 2020 2020 203e 3e3e 2067 6220 3d20         >>> gb = 
-0001aa00: 6473 2e67 6228 276b 6579 636f 6c27 292e  ds.gb('keycol').
-0001aa10: 7375 6d28 290d 0a20 2020 2020 2020 203e  sum()..        >
-0001aa20: 3e3e 2067 622e 6c61 6265 6c5f 6669 6c74  >> gb.label_filt
-0001aa30: 6572 2869 7465 6d73 3d27 6a6f 686e 2729  er(items='john')
-0001aa40: 0d0a 2020 2020 2020 2020 2a6b 6579 636f  ..        *keyco
-0001aa50: 6c20 2020 636f 6c5f 3720 2020 636f 6c5f  l   col_7   col_
-0001aa60: 3820 2020 636f 6c5f 390d 0a20 2020 2020  8   col_9..     
-0001aa70: 2020 202d 2d2d 2d2d 2d2d 2020 202d 2d2d     -------   ---
-0001aa80: 2d2d 2020 202d 2d2d 2d2d 2020 202d 2d2d  --   -----   ---
-0001aa90: 2d2d 0d0a 2020 2020 2020 2020 6a6f 686e  --..        john
-0001aaa0: 2020 2020 2020 2030 2e38 3220 2020 2031         0.82    1
-0001aab0: 2e31 3920 2020 2030 2e39 360d 0a0d 0a20  .19    0.96.... 
-0001aac0: 2020 2020 2020 203e 3e3e 2067 622e 6c61         >>> gb.la
-0001aad0: 6265 6c5f 6669 6c74 6572 286c 696b 653d  bel_filter(like=
-0001aae0: 5b27 6172 272c 2027 7027 5d29 0d0a 2020  ['ar', 'p'])..  
-0001aaf0: 2020 2020 2020 2a6b 6579 636f 6c20 2020        *keycol   
-0001ab00: 2020 2020 2020 2063 6f6c 5f37 2020 2063         col_7   c
-0001ab10: 6f6c 5f38 2020 2063 6f6c 5f39 0d0a 2020  ol_8   col_9..  
-0001ab20: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-0001ab30: 2d2d 2d2d 2020 202d 2d2d 2d2d 2020 202d  ----   -----   -
-0001ab40: 2d2d 2d2d 2020 202d 2d2d 2d2d 0d0a 2020  ----   -----..  
-0001ab50: 2020 2020 2020 6d61 7279 2061 6e6e 2020        mary ann  
-0001ab60: 2020 2020 2020 2020 322e 3835 2020 2020          2.85    
-0001ab70: 322e 3035 2020 2020 322e 3038 0d0a 2020  2.05    2.08..  
-0001ab80: 2020 2020 2020 6d61 7279 206b 6174 6865        mary kathe
-0001ab90: 7269 6e65 2020 2020 312e 3433 2020 2020  rine    1.43    
-0001aba0: 302e 3431 2020 2020 312e 3237 0d0a 2020  0.41    1.27..  
-0001abb0: 2020 2020 2020 7061 756c 2020 2020 2020        paul      
-0001abc0: 2020 2020 2020 2020 322e 3636 2020 2020          2.66    
-0001abd0: 332e 3038 2020 2020 322e 3932 0d0a 0d0a  3.08    2.92....
-0001abe0: 2020 2020 2020 2020 3e3e 3e20 6762 2e6c          >>> gb.l
-0001abf0: 6162 656c 5f66 696c 7465 7228 7265 6765  abel_filter(rege
-0001ac00: 783d 276e 2427 290d 0a20 2020 2020 2020  x='n$')..       
-0001ac10: 202a 6b65 7963 6f6c 2020 2020 636f 6c5f   *keycol    col_
-0001ac20: 3720 2020 636f 6c5f 3820 2020 636f 6c5f  7   col_8   col_
-0001ac30: 390d 0a20 2020 2020 2020 202d 2d2d 2d2d  9..        -----
-0001ac40: 2d2d 2d20 2020 2d2d 2d2d 2d20 2020 2d2d  ---   -----   --
-0001ac50: 2d2d 2d20 2020 2d2d 2d2d 2d0d 0a20 2020  ---   -----..   
-0001ac60: 2020 2020 206a 6f68 6e20 2020 2020 2020       john       
-0001ac70: 2030 2e38 3220 2020 2031 2e31 3920 2020   0.82    1.19   
-0001ac80: 2030 2e39 360d 0a20 2020 2020 2020 206d   0.96..        m
-0001ac90: 6172 7920 616e 6e20 2020 2032 2e38 3520  ary ann    2.85 
-0001aca0: 2020 2032 2e30 3520 2020 2032 2e30 380d     2.05    2.08.
-0001acb0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-0001acc0: 2020 2020 2020 696d 706f 7274 2072 650d        import re.
-0001acd0: 0a0d 0a20 2020 2020 2020 206c 6162 656c  ...        label
-0001ace0: 7320 3d20 7365 6c66 2e6c 6162 656c 5f67  s = self.label_g
-0001acf0: 6574 5f6e 616d 6573 2829 0d0a 2020 2020  et_names()..    
-0001ad00: 2020 2020 6966 206c 6162 656c 7320 6973      if labels is
-0001ad10: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-0001ad20: 2020 2020 7261 6973 6520 5479 7065 4572      raise TypeEr
-0001ad30: 726f 7228 6622 4461 7461 7365 7420 6861  ror(f"Dataset ha
-0001ad40: 7320 6e6f 206c 6162 656c 2063 6f6c 756d  s no label colum
-0001ad50: 6e73 2e20 4361 6e6e 6f74 2066 696c 7465  ns. Cannot filte
-0001ad60: 7220 726f 7773 2066 726f 6d20 6c61 6265  r rows from labe
-0001ad70: 6c20 636f 6c75 6d6e 2e22 290d 0a0d 0a20  l column.").... 
-0001ad80: 2020 2020 2020 2074 656d 7073 756d 203d         tempsum =
-0001ad90: 2073 756d 285b 6974 656d 7320 6973 204e   sum([items is N
-0001ada0: 6f6e 652c 206c 696b 6520 6973 204e 6f6e  one, like is Non
-0001adb0: 652c 2072 6567 6578 2069 7320 4e6f 6e65  e, regex is None
-0001adc0: 5d29 0d0a 0d0a 2020 2020 2020 2020 6966  ])....        if
-0001add0: 2074 656d 7073 756d 2021 3d20 323a 0d0a   tempsum != 2:..
-0001ade0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0001adf0: 6520 5479 7065 4572 726f 7228 0d0a 2020  e TypeError(..  
-0001ae00: 2020 2020 2020 2020 2020 2020 2020 224b                "K
-0001ae10: 6579 776f 7264 2061 7267 756d 656e 7473  eyword arguments
-0001ae20: 2060 6974 656d 7360 2c20 606c 696b 6560   `items`, `like`
-0001ae30: 2c20 6f72 2060 7265 6765 7860 2061 7265  , or `regex` are
-0001ae40: 206d 7574 7561 6c6c 7920 6578 636c 7573   mutually exclus
-0001ae50: 6976 652e 2020 6f6e 6520 6d75 7374 2062  ive.  one must b
-0001ae60: 6520 7375 7070 6c69 6564 220d 0a20 2020  e supplied"..   
-0001ae70: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
-0001ae80: 2020 2020 2020 6c61 6265 6c73 203d 207b        labels = {
-0001ae90: 6b3a 2073 656c 665b 6b5d 2066 6f72 206b  k: self[k] for k
-0001aea0: 2069 6e20 6c61 6265 6c73 7d0d 0a0d 0a20   in labels}.... 
-0001aeb0: 2020 2020 2020 2069 6620 6974 656d 7320         if items 
-0001aec0: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-0001aed0: 2020 2020 2020 2020 2020 6e65 776c 6973            newlis
-0001aee0: 7420 3d20 6974 656d 730d 0a20 2020 2020  t = items..     
-0001aef0: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
-0001af00: 696e 7374 616e 6365 2869 7465 6d73 2c20  instance(items, 
-0001af10: 6c69 7374 293a 0d0a 2020 2020 2020 2020  list):..        
-0001af20: 2020 2020 2020 2020 6e65 776c 6973 7420          newlist 
-0001af30: 3d20 5b69 7465 6d73 5d0d 0a20 2020 2020  = [items]..     
-0001af40: 2020 2020 2020 2066 696c 7465 7220 3d20         filter = 
-0001af50: 5b69 7465 6d20 3d3d 2063 6f6c 2066 6f72  [item == col for
-0001af60: 2063 6f6c 2069 6e20 6c61 6265 6c73 2e76   col in labels.v
-0001af70: 616c 7565 7328 2920 666f 7220 6974 656d  alues() for item
-0001af80: 2069 6e20 6e65 776c 6973 745d 0d0a 2020   in newlist]..  
-0001af90: 2020 2020 2020 2020 2020 6e65 776c 6973            newlis
-0001afa0: 7420 3d20 6d61 736b 5f6f 7269 2866 696c  t = mask_ori(fil
-0001afb0: 7465 7229 0d0a 0d0a 2020 2020 2020 2020  ter)....        
-0001afc0: 656c 6966 206c 696b 653a 0d0a 2020 2020  elif like:..    
-0001afd0: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
-0001afe0: 7369 6e73 7461 6e63 6528 6c69 6b65 2c20  sinstance(like, 
-0001aff0: 6c69 7374 293a 0d0a 2020 2020 2020 2020  list):..        
-0001b000: 2020 2020 2020 2020 6c69 6b65 203d 205b          like = [
-0001b010: 6c69 6b65 5d0d 0a20 2020 2020 2020 2020  like]..         
-0001b020: 2020 206e 6577 6c69 7374 203d 206c 696b     newlist = lik
-0001b030: 650d 0a20 2020 2020 2020 2020 2020 2066  e..            f
-0001b040: 6f72 2069 6478 2c20 6974 656d 2069 6e20  or idx, item in 
-0001b050: 656e 756d 6572 6174 6528 6e65 776c 6973  enumerate(newlis
-0001b060: 7429 3a0d 0a20 2020 2020 2020 2020 2020  t):..           
-0001b070: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-0001b080: 6365 2869 7465 6d2c 2073 7472 293a 0d0a  ce(item, str):..
-0001b090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b0a0: 2020 2020 6974 656d 203d 2069 7465 6d2e      item = item.
-0001b0b0: 656e 636f 6465 2829 0d0a 2020 2020 2020  encode()..      
-0001b0c0: 2020 2020 2020 2320 736c 6f77 2c20 6e65        # slow, ne
-0001b0d0: 6564 2066 6173 7465 7220 7374 7269 6e67  ed faster string
-0001b0e0: 2063 6f6e 7461 696e 7320 6d65 7468 6f64   contains method
-0001b0f0: 0d0a 2020 2020 2020 2020 2020 2020 6e65  ..            ne
-0001b100: 776c 6973 7420 3d20 5b63 6f6c 2e61 7070  wlist = [col.app
-0001b110: 6c79 286c 616d 6264 6120 783a 2069 7465  ly(lambda x: ite
-0001b120: 6d20 696e 2078 2920 666f 7220 636f 6c20  m in x) for col 
-0001b130: 696e 206c 6162 656c 732e 7661 6c75 6573  in labels.values
-0001b140: 2829 2066 6f72 2069 7465 6d20 696e 206e  () for item in n
-0001b150: 6577 6c69 7374 5d0d 0a20 2020 2020 2020  ewlist]..       
-0001b160: 2020 2020 206e 6577 6c69 7374 203d 206d       newlist = m
-0001b170: 6173 6b5f 6f72 6928 6e65 776c 6973 7429  ask_ori(newlist)
-0001b180: 0d0a 0d0a 2020 2020 2020 2020 2320 7265  ....        # re
-0001b190: 6765 7820 616c 736f 2073 6c6f 7720 6265  gex also slow be
-0001b1a0: 6361 7573 6520 6974 2068 6173 2074 6f20  cause it has to 
-0001b1b0: 6265 2061 7070 6c69 6564 2074 6f20 6561  be applied to ea
-0001b1c0: 6368 2072 6f77 2069 7465 6d0d 0a20 2020  ch row item..   
-0001b1d0: 2020 2020 2065 6c69 6620 7265 6765 783a       elif regex:
-0001b1e0: 0d0a 2020 2020 2020 2020 2020 2020 6d61  ..            ma
-0001b1f0: 7463 6865 7220 3d20 7265 2e63 6f6d 7069  tcher = re.compi
-0001b200: 6c65 2872 6567 6578 290d 0a20 2020 2020  le(regex)..     
-0001b210: 2020 2020 2020 206e 6577 6c69 7374 203d         newlist =
-0001b220: 205b 636f 6c2e 6170 706c 7928 6c61 6d62   [col.apply(lamb
-0001b230: 6461 2078 3a20 6d61 7463 6865 722e 7365  da x: matcher.se
-0001b240: 6172 6368 2878 2920 6973 206e 6f74 204e  arch(x) is not N
-0001b250: 6f6e 6529 2066 6f72 2063 6f6c 2069 6e20  one) for col in 
-0001b260: 6c61 6265 6c73 2e76 616c 7565 7328 295d  labels.values()]
-0001b270: 0d0a 2020 2020 2020 2020 2020 2020 6e65  ..            ne
-0001b280: 776c 6973 7420 3d20 6d61 736b 5f6f 7269  wlist = mask_ori
-0001b290: 286e 6577 6c69 7374 290d 0a20 2020 2020  (newlist)..     
-0001b2a0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-0001b2b0: 2020 2020 2020 7261 6973 6520 5479 7065        raise Type
-0001b2c0: 4572 726f 7228 224d 7573 7420 7061 7373  Error("Must pass
-0001b2d0: 2065 6974 6865 7220 6069 7465 6d73 602c   either `items`,
-0001b2e0: 2060 6c69 6b65 602c 206f 7220 6072 6567   `like`, or `reg
-0001b2f0: 6578 6022 290d 0a0d 0a20 2020 2020 2020  ex`")....       
-0001b300: 2023 2069 6620 7375 6d28 6e65 776c 6973   # if sum(newlis
-0001b310: 7429 203d 3d20 303a 0d0a 2020 2020 2020  t) == 0:..      
-0001b320: 2020 2320 2020 2072 6169 7365 2056 616c    #    raise Val
-0001b330: 7565 4572 726f 7228 2741 6c6c 2072 6f77  ueError('All row
-0001b340: 7320 7765 7265 2072 656d 6f76 6564 2729  s were removed')
-0001b350: 0d0a 0d0a 2020 2020 2020 2020 7265 7475  ....        retu
-0001b360: 726e 2073 656c 665b 6e65 776c 6973 742c  rn self[newlist,
-0001b370: 203a 5d0d 0a0d 0a20 2020 2023 202d 2d2d   :]....    # ---
+0001a3b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
+0001a3c0: 2020 2064 6566 206c 6162 656c 5f66 696c     def label_fil
+0001a3d0: 7465 7228 7365 6c66 2c20 6974 656d 733d  ter(self, items=
+0001a3e0: 4e6f 6e65 2c20 6c69 6b65 3d4e 6f6e 652c  None, like=None,
+0001a3f0: 2072 6567 6578 3d4e 6f6e 652c 2061 7869   regex=None, axi
+0001a400: 733d 4e6f 6e65 293a 0d0a 2020 2020 2020  s=None):..      
+0001a410: 2020 2222 220d 0a20 2020 2020 2020 2053    """..        S
+0001a420: 7562 7365 7420 726f 7773 206f 6620 6461  ubset rows of da
+0001a430: 7461 7365 7420 6163 636f 7264 696e 6720  taset according 
+0001a440: 746f 2076 616c 7565 2069 6e20 6974 7320  to value in its 
+0001a450: 6c61 6265 6c20 636f 6c75 6d6e 2e0d 0a0d  label column....
+0001a460: 0a20 2020 2020 2020 2054 4f44 4f3a 2068  .        TODO: h
+0001a470: 6f77 2073 686f 756c 6420 6d75 6c74 696b  ow should multik
+0001a480: 6579 2062 6520 6861 6e64 6c65 643f 0d0a  ey be handled?..
+0001a490: 0d0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
+0001a4a0: 7465 7273 0d0a 2020 2020 2020 2020 2d2d  ters..        --
+0001a4b0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+0001a4c0: 2020 6974 656d 7320 3a20 6c69 7374 2d6c    items : list-l
+0001a4d0: 696b 650d 0a20 2020 2020 2020 2020 2020  ike..           
+0001a4e0: 204c 6973 7420 6f66 2073 7065 6369 6669   List of specifi
+0001a4f0: 6320 7661 6c75 6573 2074 6f20 6d61 7463  c values to matc
+0001a500: 6820 696e 206c 6162 656c 2063 6f6c 756d  h in label colum
+0001a510: 6e2e 0d0a 2020 2020 2020 2020 6c69 6b65  n...        like
+0001a520: 203a 2073 7472 696e 670d 0a20 2020 2020   : string..     
+0001a530: 2020 2020 2020 204b 6565 7020 6974 656d         Keep item
+0001a540: 7320 7768 6572 6520 276c 696b 6527 206f  s where 'like' o
+0001a550: 6363 7572 7320 696e 206c 6162 656c 2063  ccurs in label c
+0001a560: 6f6c 756d 6e2e 0d0a 2020 2020 2020 2020  olumn...        
+0001a570: 7265 6765 7820 3a20 7374 7269 6e67 2028  regex : string (
+0001a580: 7265 6775 6c61 7220 6578 7072 6573 7369  regular expressi
+0001a590: 6f6e 290d 0a20 2020 2020 2020 2020 2020  on)..           
+0001a5a0: 204b 6565 7020 6178 6973 2077 6974 6820   Keep axis with 
+0001a5b0: 7265 2e73 6561 7263 6828 7265 6765 782c  re.search(regex,
+0001a5c0: 2063 6f6c 2920 3d3d 2054 7275 652e 0d0a   col) == True...
+0001a5d0: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
+0001a5e0: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+0001a5f0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
+0001a600: 3e20 6473 0d0a 2020 2020 2020 2020 2023  > ds..         #
+0001a610: 2020 2063 6f6c 5f37 2020 2063 6f6c 5f38     col_7   col_8
+0001a620: 2020 2063 6f6c 5f39 2020 206b 6579 636f     col_9   keyco
+0001a630: 6c0d 0a20 2020 2020 2020 202d 2d20 2020  l..        --   
+0001a640: 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d20 2020  -----   -----   
+0001a650: 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d2d 2d2d  -----   --------
+0001a660: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0001a670: 2030 2020 2020 302e 3533 2020 2020 302e   0    0.53    0.
+0001a680: 3532 2020 2020 302e 3437 2020 2070 6175  52    0.47   pau
+0001a690: 6c0d 0a20 2020 2020 2020 2020 3120 2020  l..         1   
+0001a6a0: 2030 2e31 3020 2020 2030 2e37 3820 2020   0.10    0.78   
+0001a6b0: 2030 2e30 3920 2020 7261 790d 0a20 2020   0.09   ray..   
+0001a6c0: 2020 2020 2020 3220 2020 2030 2e35 3020        2    0.50 
+0001a6d0: 2020 2030 2e37 3920 2020 2030 2e35 3020     0.79    0.50 
+0001a6e0: 2020 7061 756c 0d0a 2020 2020 2020 2020    paul..        
+0001a6f0: 2033 2020 2020 302e 3831 2020 2020 302e   3    0.81    0.
+0001a700: 3638 2020 2020 302e 3732 2020 2072 6179  68    0.72   ray
+0001a710: 0d0a 2020 2020 2020 2020 2034 2020 2020  ..         4    
+0001a720: 302e 3038 2020 2020 302e 3731 2020 2020  0.08    0.71    
+0001a730: 302e 3032 2020 206a 6f68 6e0d 0a20 2020  0.02   john..   
+0001a740: 2020 2020 2020 3520 2020 2030 2e33 3820        5    0.38 
+0001a750: 2020 2030 2e31 3920 2020 2030 2e39 3020     0.19    0.90 
+0001a760: 2020 7261 790d 0a20 2020 2020 2020 2020    ray..         
+0001a770: 3620 2020 2030 2e35 3320 2020 2030 2e33  6    0.53    0.3
+0001a780: 3320 2020 2030 2e34 3620 2020 6d61 7279  3    0.46   mary
+0001a790: 206b 6174 6865 7269 6e65 0d0a 2020 2020   katherine..    
+0001a7a0: 2020 2020 2037 2020 2020 302e 3735 2020       7    0.75  
+0001a7b0: 2020 302e 3438 2020 2020 302e 3934 2020    0.48    0.94  
+0001a7c0: 206a 6f68 6e0d 0a20 2020 2020 2020 2020   john..         
+0001a7d0: 3820 2020 2031 2e30 3020 2020 2030 2e37  8    1.00    0.7
+0001a7e0: 3020 2020 2030 2e37 3920 2020 6d61 7279  0    0.79   mary
+0001a7f0: 2061 6e6e 0d0a 2020 2020 2020 2020 2039   ann..         9
+0001a800: 2020 2020 302e 3437 2020 2020 302e 3634      0.47    0.64
+0001a810: 2020 2020 302e 3136 2020 2072 6179 0d0a      0.16   ray..
+0001a820: 2020 2020 2020 2020 3130 2020 2020 302e          10    0.
+0001a830: 3830 2020 2020 302e 3433 2020 2020 302e  80    0.43    0.
+0001a840: 3038 2020 206d 6172 7920 616e 6e0d 0a20  08   mary ann.. 
+0001a850: 2020 2020 2020 2031 3120 2020 2030 2e35         11    0.5
+0001a860: 3420 2020 2030 2e31 3920 2020 2030 2e34  4    0.19    0.4
+0001a870: 3320 2020 6a6f 650d 0a20 2020 2020 2020  3   joe..       
+0001a880: 2031 3220 2020 2030 2e38 3920 2020 2030   12    0.89    0
+0001a890: 2e30 3820 2020 2030 2e38 3120 2020 6d61  .08    0.81   ma
+0001a8a0: 7279 206b 6174 6865 7269 6e65 0d0a 2020  ry katherine..  
+0001a8b0: 2020 2020 2020 3133 2020 2020 302e 3936        13    0.96
+0001a8c0: 2020 2020 302e 3931 2020 2020 302e 3333      0.91    0.33
+0001a8d0: 2020 2070 6175 6c0d 0a20 2020 2020 2020     paul..       
+0001a8e0: 2031 3420 2020 2030 2e31 3820 2020 2030   14    0.18    0
+0001a8f0: 2e35 3520 2020 2030 2e34 3420 2020 7261  .55    0.44   ra
+0001a900: 790d 0a20 2020 2020 2020 2031 3520 2020  y..        15   
+0001a910: 2030 2e34 3220 2020 2030 2e34 3920 2020   0.42    0.49   
+0001a920: 2030 2e36 3620 2020 6d61 7279 2061 6e6e   0.66   mary ann
+0001a930: 0d0a 2020 2020 2020 2020 3136 2020 2020  ..        16    
+0001a940: 302e 3035 2020 2020 302e 3533 2020 2020  0.05    0.53    
+0001a950: 302e 3636 2020 2070 6175 6c0d 0a20 2020  0.66   paul..   
+0001a960: 2020 2020 2031 3720 2020 2030 2e36 3020       17    0.60 
+0001a970: 2020 2030 2e35 3620 2020 2030 2e30 3320     0.56    0.03 
+0001a980: 2020 6a6f 650d 0a20 2020 2020 2020 2031    joe..        1
+0001a990: 3820 2020 2030 2e36 3220 2020 2030 2e34  8    0.62    0.4
+0001a9a0: 3220 2020 2030 2e35 3620 2020 6d61 7279  2    0.56   mary
+0001a9b0: 2061 6e6e 0d0a 2020 2020 2020 2020 3139   ann..        19
+0001a9c0: 2020 2020 302e 3633 2020 2020 302e 3333      0.63    0.33
+0001a9d0: 2020 2020 302e 3935 2020 2070 6175 6c0d      0.95   paul.
+0001a9e0: 0a0d 0a20 2020 2020 2020 203e 3e3e 2067  ...        >>> g
+0001a9f0: 6220 3d20 6473 2e67 6228 276b 6579 636f  b = ds.gb('keyco
+0001aa00: 6c27 292e 7375 6d28 290d 0a20 2020 2020  l').sum()..     
+0001aa10: 2020 203e 3e3e 2067 622e 6c61 6265 6c5f     >>> gb.label_
+0001aa20: 6669 6c74 6572 2869 7465 6d73 3d27 6a6f  filter(items='jo
+0001aa30: 686e 2729 0d0a 2020 2020 2020 2020 2a6b  hn')..        *k
+0001aa40: 6579 636f 6c20 2020 636f 6c5f 3720 2020  eycol   col_7   
+0001aa50: 636f 6c5f 3820 2020 636f 6c5f 390d 0a20  col_8   col_9.. 
+0001aa60: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2020         -------  
+0001aa70: 202d 2d2d 2d2d 2020 202d 2d2d 2d2d 2020   -----   -----  
+0001aa80: 202d 2d2d 2d2d 0d0a 2020 2020 2020 2020   -----..        
+0001aa90: 6a6f 686e 2020 2020 2020 2030 2e38 3220  john       0.82 
+0001aaa0: 2020 2031 2e31 3920 2020 2030 2e39 360d     1.19    0.96.
+0001aab0: 0a0d 0a20 2020 2020 2020 203e 3e3e 2067  ...        >>> g
+0001aac0: 622e 6c61 6265 6c5f 6669 6c74 6572 286c  b.label_filter(l
+0001aad0: 696b 653d 5b27 6172 272c 2027 7027 5d29  ike=['ar', 'p'])
+0001aae0: 0d0a 2020 2020 2020 2020 2a6b 6579 636f  ..        *keyco
+0001aaf0: 6c20 2020 2020 2020 2020 2063 6f6c 5f37  l          col_7
+0001ab00: 2020 2063 6f6c 5f38 2020 2063 6f6c 5f39     col_8   col_9
+0001ab10: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+0001ab20: 2d2d 2d2d 2d2d 2d2d 2020 202d 2d2d 2d2d  --------   -----
+0001ab30: 2020 202d 2d2d 2d2d 2020 202d 2d2d 2d2d     -----   -----
+0001ab40: 0d0a 2020 2020 2020 2020 6d61 7279 2061  ..        mary a
+0001ab50: 6e6e 2020 2020 2020 2020 2020 322e 3835  nn          2.85
+0001ab60: 2020 2020 322e 3035 2020 2020 322e 3038      2.05    2.08
+0001ab70: 0d0a 2020 2020 2020 2020 6d61 7279 206b  ..        mary k
+0001ab80: 6174 6865 7269 6e65 2020 2020 312e 3433  atherine    1.43
+0001ab90: 2020 2020 302e 3431 2020 2020 312e 3237      0.41    1.27
+0001aba0: 0d0a 2020 2020 2020 2020 7061 756c 2020  ..        paul  
+0001abb0: 2020 2020 2020 2020 2020 2020 322e 3636              2.66
+0001abc0: 2020 2020 332e 3038 2020 2020 322e 3932      3.08    2.92
+0001abd0: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
+0001abe0: 6762 2e6c 6162 656c 5f66 696c 7465 7228  gb.label_filter(
+0001abf0: 7265 6765 783d 276e 2427 290d 0a20 2020  regex='n$')..   
+0001ac00: 2020 2020 202a 6b65 7963 6f6c 2020 2020       *keycol    
+0001ac10: 636f 6c5f 3720 2020 636f 6c5f 3820 2020  col_7   col_8   
+0001ac20: 636f 6c5f 390d 0a20 2020 2020 2020 202d  col_9..        -
+0001ac30: 2d2d 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d20  -------   ----- 
+0001ac40: 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d0d    -----   -----.
+0001ac50: 0a20 2020 2020 2020 206a 6f68 6e20 2020  .        john   
+0001ac60: 2020 2020 2030 2e38 3220 2020 2031 2e31       0.82    1.1
+0001ac70: 3920 2020 2030 2e39 360d 0a20 2020 2020  9    0.96..     
+0001ac80: 2020 206d 6172 7920 616e 6e20 2020 2032     mary ann    2
+0001ac90: 2e38 3520 2020 2032 2e30 3520 2020 2032  .85    2.05    2
+0001aca0: 2e30 380d 0a20 2020 2020 2020 2022 2222  .08..        """
+0001acb0: 0d0a 2020 2020 2020 2020 696d 706f 7274  ..        import
+0001acc0: 2072 650d 0a0d 0a20 2020 2020 2020 206c   re....        l
+0001acd0: 6162 656c 7320 3d20 7365 6c66 2e6c 6162  abels = self.lab
+0001ace0: 656c 5f67 6574 5f6e 616d 6573 2829 0d0a  el_get_names()..
+0001acf0: 2020 2020 2020 2020 6966 206c 6162 656c          if label
+0001ad00: 7320 6973 204e 6f6e 653a 0d0a 2020 2020  s is None:..    
+0001ad10: 2020 2020 2020 2020 7261 6973 6520 5479          raise Ty
+0001ad20: 7065 4572 726f 7228 6622 4461 7461 7365  peError(f"Datase
+0001ad30: 7420 6861 7320 6e6f 206c 6162 656c 2063  t has no label c
+0001ad40: 6f6c 756d 6e73 2e20 4361 6e6e 6f74 2066  olumns. Cannot f
+0001ad50: 696c 7465 7220 726f 7773 2066 726f 6d20  ilter rows from 
+0001ad60: 6c61 6265 6c20 636f 6c75 6d6e 2e22 290d  label column.").
+0001ad70: 0a0d 0a20 2020 2020 2020 2074 656d 7073  ...        temps
+0001ad80: 756d 203d 2073 756d 285b 6974 656d 7320  um = sum([items 
+0001ad90: 6973 204e 6f6e 652c 206c 696b 6520 6973  is None, like is
+0001ada0: 204e 6f6e 652c 2072 6567 6578 2069 7320   None, regex is 
+0001adb0: 4e6f 6e65 5d29 0d0a 0d0a 2020 2020 2020  None])....      
+0001adc0: 2020 6966 2074 656d 7073 756d 2021 3d20    if tempsum != 
+0001add0: 323a 0d0a 2020 2020 2020 2020 2020 2020  2:..            
+0001ade0: 7261 6973 6520 5479 7065 4572 726f 7228  raise TypeError(
+0001adf0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001ae00: 2020 224b 6579 776f 7264 2061 7267 756d    "Keyword argum
+0001ae10: 656e 7473 2060 6974 656d 7360 2c20 606c  ents `items`, `l
+0001ae20: 696b 6560 2c20 6f72 2060 7265 6765 7860  ike`, or `regex`
+0001ae30: 2061 7265 206d 7574 7561 6c6c 7920 6578   are mutually ex
+0001ae40: 636c 7573 6976 652e 2020 6f6e 6520 6d75  clusive.  one mu
+0001ae50: 7374 2062 6520 7375 7070 6c69 6564 220d  st be supplied".
+0001ae60: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+0001ae70: 0d0a 2020 2020 2020 2020 6c61 6265 6c73  ..        labels
+0001ae80: 203d 207b 6b3a 2073 656c 665b 6b5d 2066   = {k: self[k] f
+0001ae90: 6f72 206b 2069 6e20 6c61 6265 6c73 7d0d  or k in labels}.
+0001aea0: 0a0d 0a20 2020 2020 2020 2069 6620 6974  ...        if it
+0001aeb0: 656d 7320 6973 206e 6f74 204e 6f6e 653a  ems is not None:
+0001aec0: 0d0a 2020 2020 2020 2020 2020 2020 6e65  ..            ne
+0001aed0: 776c 6973 7420 3d20 6974 656d 730d 0a20  wlist = items.. 
+0001aee0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+0001aef0: 7420 6973 696e 7374 616e 6365 2869 7465  t isinstance(ite
+0001af00: 6d73 2c20 6c69 7374 293a 0d0a 2020 2020  ms, list):..    
+0001af10: 2020 2020 2020 2020 2020 2020 6e65 776c              newl
+0001af20: 6973 7420 3d20 5b69 7465 6d73 5d0d 0a20  ist = [items].. 
+0001af30: 2020 2020 2020 2020 2020 2066 696c 7465             filte
+0001af40: 7220 3d20 5b69 7465 6d20 3d3d 2063 6f6c  r = [item == col
+0001af50: 2066 6f72 2063 6f6c 2069 6e20 6c61 6265   for col in labe
+0001af60: 6c73 2e76 616c 7565 7328 2920 666f 7220  ls.values() for 
+0001af70: 6974 656d 2069 6e20 6e65 776c 6973 745d  item in newlist]
+0001af80: 0d0a 2020 2020 2020 2020 2020 2020 6e65  ..            ne
+0001af90: 776c 6973 7420 3d20 6d61 736b 5f6f 7269  wlist = mask_ori
+0001afa0: 2866 696c 7465 7229 0d0a 0d0a 2020 2020  (filter)....    
+0001afb0: 2020 2020 656c 6966 206c 696b 653a 0d0a      elif like:..
+0001afc0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+0001afd0: 6f74 2069 7369 6e73 7461 6e63 6528 6c69  ot isinstance(li
+0001afe0: 6b65 2c20 6c69 7374 293a 0d0a 2020 2020  ke, list):..    
+0001aff0: 2020 2020 2020 2020 2020 2020 6c69 6b65              like
+0001b000: 203d 205b 6c69 6b65 5d0d 0a20 2020 2020   = [like]..     
+0001b010: 2020 2020 2020 206e 6577 6c69 7374 203d         newlist =
+0001b020: 206c 696b 650d 0a20 2020 2020 2020 2020   like..         
+0001b030: 2020 2066 6f72 2069 6478 2c20 6974 656d     for idx, item
+0001b040: 2069 6e20 656e 756d 6572 6174 6528 6e65   in enumerate(ne
+0001b050: 776c 6973 7429 3a0d 0a20 2020 2020 2020  wlist):..       
+0001b060: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+0001b070: 7374 616e 6365 2869 7465 6d2c 2073 7472  stance(item, str
+0001b080: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0001b090: 2020 2020 2020 2020 6974 656d 203d 2069          item = i
+0001b0a0: 7465 6d2e 656e 636f 6465 2829 0d0a 2020  tem.encode()..  
+0001b0b0: 2020 2020 2020 2020 2020 2320 736c 6f77            # slow
+0001b0c0: 2c20 6e65 6564 2066 6173 7465 7220 7374  , need faster st
+0001b0d0: 7269 6e67 2063 6f6e 7461 696e 7320 6d65  ring contains me
+0001b0e0: 7468 6f64 0d0a 2020 2020 2020 2020 2020  thod..          
+0001b0f0: 2020 6e65 776c 6973 7420 3d20 5b63 6f6c    newlist = [col
+0001b100: 2e61 7070 6c79 286c 616d 6264 6120 783a  .apply(lambda x:
+0001b110: 2069 7465 6d20 696e 2078 2920 666f 7220   item in x) for 
+0001b120: 636f 6c20 696e 206c 6162 656c 732e 7661  col in labels.va
+0001b130: 6c75 6573 2829 2066 6f72 2069 7465 6d20  lues() for item 
+0001b140: 696e 206e 6577 6c69 7374 5d0d 0a20 2020  in newlist]..   
+0001b150: 2020 2020 2020 2020 206e 6577 6c69 7374           newlist
+0001b160: 203d 206d 6173 6b5f 6f72 6928 6e65 776c   = mask_ori(newl
+0001b170: 6973 7429 0d0a 0d0a 2020 2020 2020 2020  ist)....        
+0001b180: 2320 7265 6765 7820 616c 736f 2073 6c6f  # regex also slo
+0001b190: 7720 6265 6361 7573 6520 6974 2068 6173  w because it has
+0001b1a0: 2074 6f20 6265 2061 7070 6c69 6564 2074   to be applied t
+0001b1b0: 6f20 6561 6368 2072 6f77 2069 7465 6d0d  o each row item.
+0001b1c0: 0a20 2020 2020 2020 2065 6c69 6620 7265  .        elif re
+0001b1d0: 6765 783a 0d0a 2020 2020 2020 2020 2020  gex:..          
+0001b1e0: 2020 6d61 7463 6865 7220 3d20 7265 2e63    matcher = re.c
+0001b1f0: 6f6d 7069 6c65 2872 6567 6578 290d 0a20  ompile(regex).. 
+0001b200: 2020 2020 2020 2020 2020 206e 6577 6c69             newli
+0001b210: 7374 203d 205b 636f 6c2e 6170 706c 7928  st = [col.apply(
+0001b220: 6c61 6d62 6461 2078 3a20 6d61 7463 6865  lambda x: matche
+0001b230: 722e 7365 6172 6368 2878 2920 6973 206e  r.search(x) is n
+0001b240: 6f74 204e 6f6e 6529 2066 6f72 2063 6f6c  ot None) for col
+0001b250: 2069 6e20 6c61 6265 6c73 2e76 616c 7565   in labels.value
+0001b260: 7328 295d 0d0a 2020 2020 2020 2020 2020  s()]..          
+0001b270: 2020 6e65 776c 6973 7420 3d20 6d61 736b    newlist = mask
+0001b280: 5f6f 7269 286e 6577 6c69 7374 290d 0a20  _ori(newlist).. 
+0001b290: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+0001b2a0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0001b2b0: 5479 7065 4572 726f 7228 224d 7573 7420  TypeError("Must 
+0001b2c0: 7061 7373 2065 6974 6865 7220 6069 7465  pass either `ite
+0001b2d0: 6d73 602c 2060 6c69 6b65 602c 206f 7220  ms`, `like`, or 
+0001b2e0: 6072 6567 6578 6022 290d 0a0d 0a20 2020  `regex`")....   
+0001b2f0: 2020 2020 2023 2069 6620 7375 6d28 6e65       # if sum(ne
+0001b300: 776c 6973 7429 203d 3d20 303a 0d0a 2020  wlist) == 0:..  
+0001b310: 2020 2020 2020 2320 2020 2072 6169 7365        #    raise
+0001b320: 2056 616c 7565 4572 726f 7228 2741 6c6c   ValueError('All
+0001b330: 2072 6f77 7320 7765 7265 2072 656d 6f76   rows were remov
+0001b340: 6564 2729 0d0a 0d0a 2020 2020 2020 2020  ed')....        
+0001b350: 7265 7475 726e 2073 656c 665b 6e65 776c  return self[newl
+0001b360: 6973 742c 203a 5d0d 0a0d 0a20 2020 2023  ist, :]....    #
+0001b370: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
 0001b380: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001b390: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001b3a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001b3b0: 2d2d 2d2d 0d0a 2020 2020 6465 6620 7375  ----..    def su
-0001b3c0: 6d6d 6172 795f 7365 745f 6e61 6d65 7328  mmary_set_names(
-0001b3d0: 7365 6c66 2c20 6c69 7374 6e61 6d65 7329  self, listnames)
-0001b3e0: 3a0d 0a20 2020 2020 2020 2022 2222 5365  :..        """Se
-0001b3f0: 7420 7768 6963 6820 636f 6c75 6d6e 206e  t which column n
-0001b400: 616d 6573 2063 616e 2062 6520 7573 6564  ames can be used
-0001b410: 2061 7320 7269 6768 7473 2069 6e20 6469   as rights in di
-0001b420: 7370 6c61 7922 2222 0d0a 2020 2020 2020  splay"""..      
-0001b430: 2020 7365 6c66 2e5f 616c 6c5f 6974 656d    self._all_item
-0001b440: 732e 7375 6d6d 6172 795f 7365 745f 6e61  s.summary_set_na
-0001b450: 6d65 7328 6c69 7374 6e61 6d65 7329 0d0a  mes(listnames)..
-0001b460: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+0001b3a0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 6465  --------..    de
+0001b3b0: 6620 7375 6d6d 6172 795f 7365 745f 6e61  f summary_set_na
+0001b3c0: 6d65 7328 7365 6c66 2c20 6c69 7374 6e61  mes(self, listna
+0001b3d0: 6d65 7329 3a0d 0a20 2020 2020 2020 2022  mes):..        "
+0001b3e0: 2222 5365 7420 7768 6963 6820 636f 6c75  ""Set which colu
+0001b3f0: 6d6e 206e 616d 6573 2063 616e 2062 6520  mn names can be 
+0001b400: 7573 6564 2061 7320 7269 6768 7473 2069  used as rights i
+0001b410: 6e20 6469 7370 6c61 7922 2222 0d0a 2020  n display"""..  
+0001b420: 2020 2020 2020 7365 6c66 2e5f 616c 6c5f        self._all_
+0001b430: 6974 656d 732e 7375 6d6d 6172 795f 7365  items.summary_se
+0001b440: 745f 6e61 6d65 7328 6c69 7374 6e61 6d65  t_names(listname
+0001b450: 7329 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  s)....    # ----
+0001b460: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001b470: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001b480: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001b490: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
-0001b4a0: 0a20 2020 2064 6566 2073 756d 6d61 7279  .    def summary
-0001b4b0: 5f67 6574 5f6e 616d 6573 2873 656c 6629  _get_names(self)
-0001b4c0: 3a0d 0a20 2020 2020 2020 2022 2222 4765  :..        """Ge
-0001b4d0: 7473 2074 6865 2063 6f6c 756d 6e20 6e61  ts the column na
-0001b4e0: 6d65 7320 7573 6564 2061 7320 7269 6768  mes used as righ
-0001b4f0: 7473 2069 6e20 6469 7370 6c61 7922 2222  ts in display"""
-0001b500: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-0001b510: 2073 656c 662e 5f61 6c6c 5f69 7465 6d73   self._all_items
-0001b520: 2e73 756d 6d61 7279 5f67 6574 5f6e 616d  .summary_get_nam
-0001b530: 6573 2829 0d0a 0d0a 2020 2020 2320 2d2d  es()....    # --
+0001b490: 2d2d 2d0d 0a20 2020 2064 6566 2073 756d  ---..    def sum
+0001b4a0: 6d61 7279 5f67 6574 5f6e 616d 6573 2873  mary_get_names(s
+0001b4b0: 656c 6629 3a0d 0a20 2020 2020 2020 2022  elf):..        "
+0001b4c0: 2222 4765 7473 2074 6865 2063 6f6c 756d  ""Gets the colum
+0001b4d0: 6e20 6e61 6d65 7320 7573 6564 2061 7320  n names used as 
+0001b4e0: 7269 6768 7473 2069 6e20 6469 7370 6c61  rights in displa
+0001b4f0: 7922 2222 0d0a 2020 2020 2020 2020 7265  y"""..        re
+0001b500: 7475 726e 2073 656c 662e 5f61 6c6c 5f69  turn self._all_i
+0001b510: 7465 6d73 2e73 756d 6d61 7279 5f67 6574  tems.summary_get
+0001b520: 5f6e 616d 6573 2829 0d0a 0d0a 2020 2020  _names()....    
+0001b530: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
 0001b540: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001b550: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001b560: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001b570: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2073  -----..    def s
-0001b580: 756d 6d61 7279 5f61 735f 6469 6374 2873  ummary_as_dict(s
-0001b590: 656c 6629 3a0d 0a20 2020 2020 2020 2022  elf):..        "
-0001b5a0: 2222 4765 7473 2074 6865 2063 6f6c 756d  ""Gets the colum
-0001b5b0: 6e20 6e61 6d65 7320 7573 6564 2061 7320  n names used as 
-0001b5c0: 7269 6768 7473 2069 6e20 6469 7370 6c61  rights in displa
-0001b5d0: 7922 2222 0d0a 2020 2020 2020 2020 7265  y"""..        re
-0001b5e0: 7475 726e 2073 656c 662e 5f61 6c6c 5f69  turn self._all_i
-0001b5f0: 7465 6d73 2e73 756d 6d61 7279 5f61 735f  tems.summary_as_
-0001b600: 6469 6374 2829 0d0a 0d0a 2020 2020 2320  dict()....    # 
+0001b560: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
+0001b570: 6566 2073 756d 6d61 7279 5f61 735f 6469  ef summary_as_di
+0001b580: 6374 2873 656c 6629 3a0d 0a20 2020 2020  ct(self):..     
+0001b590: 2020 2022 2222 4765 7473 2074 6865 2063     """Gets the c
+0001b5a0: 6f6c 756d 6e20 6e61 6d65 7320 7573 6564  olumn names used
+0001b5b0: 2061 7320 7269 6768 7473 2069 6e20 6469   as rights in di
+0001b5c0: 7370 6c61 7922 2222 0d0a 2020 2020 2020  splay"""..      
+0001b5d0: 2020 7265 7475 726e 2073 656c 662e 5f61    return self._a
+0001b5e0: 6c6c 5f69 7465 6d73 2e73 756d 6d61 7279  ll_items.summary
+0001b5f0: 5f61 735f 6469 6374 2829 0d0a 0d0a 2020  _as_dict()....  
+0001b600: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
 0001b610: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001b620: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001b630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001b640: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
-0001b650: 2073 756d 6d61 7279 5f72 656d 6f76 6528   summary_remove(
-0001b660: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-0001b670: 2222 2252 656f 6d76 6573 2061 6e79 2072  """Reomves any r
-0001b680: 6967 6874 7320 7573 6564 2069 6e20 6469  ights used in di
-0001b690: 7370 6c61 7922 2222 0d0a 2020 2020 2020  splay"""..      
-0001b6a0: 2020 7265 7475 726e 2073 656c 662e 5f61    return self._a
-0001b6b0: 6c6c 5f69 7465 6d73 2e73 756d 6d61 7279  ll_items.summary
-0001b6c0: 5f72 656d 6f76 6528 290d 0a0d 0a20 2020  _remove()....   
-0001b6d0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+0001b630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
+0001b640: 2064 6566 2073 756d 6d61 7279 5f72 656d   def summary_rem
+0001b650: 6f76 6528 7365 6c66 293a 0d0a 2020 2020  ove(self):..    
+0001b660: 2020 2020 2222 2252 656f 6d76 6573 2061      """Reomves a
+0001b670: 6e79 2072 6967 6874 7320 7573 6564 2069  ny rights used i
+0001b680: 6e20 6469 7370 6c61 7922 2222 0d0a 2020  n display"""..  
+0001b690: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0001b6a0: 662e 5f61 6c6c 5f69 7465 6d73 2e73 756d  f._all_items.sum
+0001b6b0: 6d61 7279 5f72 656d 6f76 6528 290d 0a0d  mary_remove()...
+0001b6c0: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+0001b6d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001b6e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001b6f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001b700: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-0001b710: 6465 6620 636f 6c5f 7377 6170 2873 656c  def col_swap(sel
-0001b720: 662c 2066 726f 6d5f 636f 6c73 2c20 746f  f, from_cols, to
-0001b730: 5f63 6f6c 7329 3a0d 0a20 2020 2020 2020  _cols):..       
-0001b740: 2022 2222 0d0a 2020 2020 2020 2020 5377   """..        Sw
-0001b750: 6170 7320 636f 6c75 6d6e 2076 616c 7565  aps column value
-0001b760: 732c 206e 616d 6573 2072 6574 6169 6e20  s, names retain 
-0001b770: 6375 7272 656e 7420 6f72 6465 722e 0d0a  current order...
-0001b780: 0d0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
-0001b790: 7465 7273 0d0a 2020 2020 2020 2020 2d2d  ters..        --
-0001b7a0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
-0001b7b0: 2020 6672 6f6d 5f63 6f6c 733a 206c 6973    from_cols: lis
-0001b7c0: 740d 0a20 2020 2020 2020 2020 2020 2061  t..            a
-0001b7d0: 206c 6973 7420 6f66 2075 6e69 7175 6520   list of unique 
-0001b7e0: 6578 7461 6e74 2063 6f6c 756d 6e20 6e61  extant column na
-0001b7f0: 6d65 730d 0a20 2020 2020 2020 2074 6f5f  mes..        to_
-0001b800: 636f 6c73 3a20 206c 6973 740d 0a20 2020  cols:  list..   
-0001b810: 2020 2020 2020 2020 2061 206c 6973 7420           a list 
-0001b820: 6f66 2075 6e69 7175 6520 6578 7461 6e74  of unique extant
-0001b830: 2063 6f6c 756d 6e20 6e61 6d65 730d 0a0d   column names...
-0001b840: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
-0001b850: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-0001b860: 2d2d 2d0d 0a20 2020 2020 2020 203e 3e3e  ---..        >>>
-0001b870: 2073 7420 3d20 5374 7275 6374 287b 2761   st = Struct({'a
-0001b880: 273a 2031 2c20 2762 273a 2027 6669 7368  ': 1, 'b': 'fish
-0001b890: 272c 2027 6327 3a20 5b35 2e36 2c20 372e  ', 'c': [5.6, 7.
-0001b8a0: 385d 2c20 2764 273a 207b 2741 273a 2027  8], 'd': {'A': '
-0001b8b0: 6461 7669 6427 2c20 2742 273a 2027 6d61  david', 'B': 'ma
-0001b8c0: 7474 6865 7727 7d2c 0d0a 2020 2020 2020  tthew'},..      
-0001b8d0: 2020 2e2e 2e20 2765 273a 206e 702e 6f6e    ... 'e': np.on
-0001b8e0: 6573 2837 2c20 6474 7970 653d 6e70 2e69  es(7, dtype=np.i
-0001b8f0: 6e74 3634 297d 290d 0a20 2020 2020 2020  nt64)})..       
-0001b900: 203e 3e3e 2073 740d 0a20 2020 2020 2020   >>> st..       
-0001b910: 2023 2020 204e 616d 6520 2020 5479 7065   #   Name   Type
-0001b920: 2020 2020 526f 7773 2020 2030 2020 2020      Rows   0    
-0001b930: 2020 3120 2020 2020 320d 0a20 2020 2020    1     2..     
-0001b940: 2020 202d 2020 202d 2d2d 2d20 2020 2d2d     -   ----   --
-0001b950: 2d2d 2d20 2020 2d2d 2d2d 2020 202d 2d2d  ---   ----   ---
-0001b960: 2d20 2020 2d2d 2d20 2020 2d0d 0a20 2020  -   ---   -..   
-0001b970: 2020 2020 2030 2020 2061 2020 2020 2020       0   a      
-0001b980: 696e 7420 2020 2020 3020 2020 2020 2031  int     0      1
-0001b990: 0d0a 2020 2020 2020 2020 3120 2020 6220  ..        1   b 
-0001b9a0: 2020 2020 2073 7472 2020 2020 2030 2020       str     0  
-0001b9b0: 2020 2020 6669 7368 0d0a 2020 2020 2020      fish..      
-0001b9c0: 2020 3220 2020 6320 2020 2020 206c 6973    2   c      lis
-0001b9d0: 7420 2020 2032 2020 2020 2020 352e 3620  t    2      5.6 
-0001b9e0: 2020 2037 2e38 0d0a 2020 2020 2020 2020     7.8..        
-0001b9f0: 3320 2020 6420 2020 2020 2064 6963 7420  3   d      dict 
-0001ba00: 2020 2032 2020 2020 2020 4120 2020 2020     2      A     
-0001ba10: 2042 0d0a 2020 2020 2020 2020 3420 2020   B..        4   
-0001ba20: 6520 2020 2020 2069 6e74 3634 2020 2037  e      int64   7
-0001ba30: 2020 2020 2020 3120 2020 2020 2031 2020        1      1  
-0001ba40: 2020 2031 0d0a 0d0a 2020 2020 2020 2020     1....        
-0001ba50: 3e3e 3e20 7374 2e63 6f6c 5f73 7761 7028  >>> st.col_swap(
-0001ba60: 6c69 7374 2827 6162 6327 292c 206c 6973  list('abc'), lis
-0001ba70: 7428 2763 6261 2729 290d 0a20 2020 2020  t('cba'))..     
-0001ba80: 2020 203e 3e3e 2073 740d 0a20 2020 2020     >>> st..     
-0001ba90: 2020 2023 2020 204e 616d 6520 2020 5479     #   Name   Ty
-0001baa0: 7065 2020 2020 526f 7773 2020 2030 2020  pe    Rows   0  
-0001bab0: 2020 2020 3120 2020 2020 320d 0a20 2020      1     2..   
-0001bac0: 2020 2020 202d 2020 202d 2d2d 2d20 2020       -   ----   
-0001bad0: 2d2d 2d2d 2d20 2020 2d2d 2d2d 2020 202d  -----   ----   -
-0001bae0: 2d2d 2d20 2020 2d2d 2d20 2020 2d0d 0a20  ---   ---   -.. 
-0001baf0: 2020 2020 2020 2030 2020 2061 2020 2020         0   a    
-0001bb00: 2020 6c69 7374 2020 2020 3220 2020 2020    list    2     
-0001bb10: 2035 2e36 2020 2020 372e 380d 0a20 2020   5.6    7.8..   
-0001bb20: 2020 2020 2031 2020 2062 2020 2020 2020       1   b      
-0001bb30: 7374 7220 2020 2020 3020 2020 2020 2066  str     0      f
-0001bb40: 6973 680d 0a20 2020 2020 2020 2032 2020  ish..        2  
-0001bb50: 2063 2020 2020 2020 696e 7420 2020 2020   c      int     
-0001bb60: 3020 2020 2020 2031 0d0a 2020 2020 2020  0      1..      
-0001bb70: 2020 3320 2020 6420 2020 2020 2064 6963    3   d      dic
-0001bb80: 7420 2020 2032 2020 2020 2020 4120 2020  t    2      A   
-0001bb90: 2020 2042 0d0a 2020 2020 2020 2020 3420     B..        4 
-0001bba0: 2020 6520 2020 2020 2069 6e74 3634 2020    e      int64  
-0001bbb0: 2037 2020 2020 2020 3120 2020 2020 2031   7      1      1
-0001bbc0: 2020 2020 2031 0d0a 2020 2020 2020 2020       1..        
-0001bbd0: 2222 220d 0a20 2020 2020 2020 2069 6620  """..        if 
-0001bbe0: 7365 6c66 2e69 735f 6c6f 636b 6564 2829  self.is_locked()
-0001bbf0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-0001bc00: 6169 7365 2041 7474 7269 6275 7465 4572  aise AttributeEr
-0001bc10: 726f 7228 224e 6f74 2061 6c6c 6f77 6564  ror("Not allowed
-0001bc20: 2074 6f20 6361 6c6c 2063 6f6c 5f73 7761   to call col_swa
-0001bc30: 7028 2920 6f6e 206c 6f63 6b65 6420 6f62  p() on locked ob
-0001bc40: 6a65 6374 2e22 290d 0a20 2020 2020 2020  ject.")..       
-0001bc50: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
-0001bc60: 6365 2866 726f 6d5f 636f 6c73 2c20 6c69  ce(from_cols, li
-0001bc70: 7374 2920 616e 6420 7365 7428 6672 6f6d  st) and set(from
-0001bc80: 5f63 6f6c 7329 2e69 7373 7562 7365 7428  _cols).issubset(
-0001bc90: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-0001bca0: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
-0001bcb0: 7272 6f72 2866 227b 7365 6c66 2e5f 5f63  rror(f"{self.__c
-0001bcc0: 6c61 7373 5f5f 2e5f 5f6e 616d 655f 5f7d  lass__.__name__}
-0001bcd0: 2e63 6f6c 5f73 7761 7028 293a 2049 6e76  .col_swap(): Inv
-0001bce0: 616c 6964 2066 726f 6d5f 636f 6c73 2e22  alid from_cols."
-0001bcf0: 290d 0a20 2020 2020 2020 2069 6620 6e6f  )..        if no
-0001bd00: 7420 6973 696e 7374 616e 6365 2874 6f5f  t isinstance(to_
-0001bd10: 636f 6c73 2c20 6c69 7374 2920 616e 6420  cols, list) and 
-0001bd20: 7365 7428 746f 5f63 6f6c 7329 2e69 7373  set(to_cols).iss
-0001bd30: 7562 7365 7428 7365 6c66 293a 0d0a 2020  ubset(self):..  
-0001bd40: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0001bd50: 5661 6c75 6545 7272 6f72 2866 227b 7365  ValueError(f"{se
-0001bd60: 6c66 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e  lf.__class__.__n
-0001bd70: 616d 655f 5f7d 2e63 6f6c 5f73 7761 7028  ame__}.col_swap(
-0001bd80: 293a 2049 6e76 616c 6964 2074 6f5f 636f  ): Invalid to_co
-0001bd90: 6c73 2e22 290d 0a20 2020 2020 2020 2069  ls.")..        i
-0001bda0: 6620 6672 6f6d 5f63 6f6c 7320 3d3d 2074  f from_cols == t
-0001bdb0: 6f5f 636f 6c73 3a0d 0a20 2020 2020 2020  o_cols:..       
-0001bdc0: 2020 2020 2072 6574 7572 6e0d 0a20 2020       return..   
-0001bdd0: 2020 2020 2069 6620 6e6f 7420 286c 656e       if not (len
-0001bde0: 2866 726f 6d5f 636f 6c73 2920 3d3d 206c  (from_cols) == l
-0001bdf0: 656e 2874 6f5f 636f 6c73 2920 3d3d 206c  en(to_cols) == l
-0001be00: 656e 2873 6574 2866 726f 6d5f 636f 6c73  en(set(from_cols
-0001be10: 2929 2061 6e64 2073 6574 2866 726f 6d5f  )) and set(from_
-0001be20: 636f 6c73 2920 3d3d 2073 6574 2874 6f5f  cols) == set(to_
-0001be30: 636f 6c73 2929 3a0d 0a20 2020 2020 2020  cols)):..       
-0001be40: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
-0001be50: 4572 726f 7228 6622 7b73 656c 662e 5f5f  Error(f"{self.__
-0001be60: 636c 6173 735f 5f2e 5f5f 6e61 6d65 5f5f  class__.__name__
-0001be70: 7d2e 636f 6c5f 7377 6170 2829 3a20 546f  }.col_swap(): To
-0001be80: 206c 6973 7420 6d75 7374 2062 6520 6120   list must be a 
-0001be90: 7065 726d 7574 6174 696f 6e20 6f66 2066  permutation of f
-0001bea0: 726f 6d20 6c69 7374 2e22 290d 0a20 2020  rom list.")..   
-0001beb0: 2020 2020 2074 656d 7020 3d20 7b5f 6b3a       temp = {_k:
-0001bec0: 2067 6574 6174 7472 2873 656c 662c 205f   getattr(self, _
-0001bed0: 6b29 2066 6f72 205f 6b20 696e 2066 726f  k) for _k in fro
-0001bee0: 6d5f 636f 6c73 7d0d 0a20 2020 2020 2020  m_cols}..       
-0001bef0: 2066 6f72 205f 6b31 2c20 5f6b 3220 696e   for _k1, _k2 in
-0001bf00: 207a 6970 2874 6f5f 636f 6c73 2c20 6672   zip(to_cols, fr
-0001bf10: 6f6d 5f63 6f6c 7329 3a0d 0a20 2020 2020  om_cols):..     
-0001bf20: 2020 2020 2020 2073 6574 6174 7472 2873         setattr(s
-0001bf30: 656c 662c 205f 6b31 2c20 7465 6d70 5b5f  elf, _k1, temp[_
-0001bf40: 6b32 5d29 0d0a 0d0a 2020 2020 2320 2d2d  k2])....    # --
+0001b6f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+0001b700: 2020 2020 6465 6620 636f 6c5f 7377 6170      def col_swap
+0001b710: 2873 656c 662c 2066 726f 6d5f 636f 6c73  (self, from_cols
+0001b720: 2c20 746f 5f63 6f6c 7329 3a0d 0a20 2020  , to_cols):..   
+0001b730: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+0001b740: 2020 5377 6170 7320 636f 6c75 6d6e 2076    Swaps column v
+0001b750: 616c 7565 732c 206e 616d 6573 2072 6574  alues, names ret
+0001b760: 6169 6e20 6375 7272 656e 7420 6f72 6465  ain current orde
+0001b770: 722e 0d0a 0d0a 2020 2020 2020 2020 5061  r.....        Pa
+0001b780: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+0001b790: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+0001b7a0: 2020 2020 2020 6672 6f6d 5f63 6f6c 733a        from_cols:
+0001b7b0: 206c 6973 740d 0a20 2020 2020 2020 2020   list..         
+0001b7c0: 2020 2061 206c 6973 7420 6f66 2075 6e69     a list of uni
+0001b7d0: 7175 6520 6578 7461 6e74 2063 6f6c 756d  que extant colum
+0001b7e0: 6e20 6e61 6d65 730d 0a20 2020 2020 2020  n names..       
+0001b7f0: 2074 6f5f 636f 6c73 3a20 206c 6973 740d   to_cols:  list.
+0001b800: 0a20 2020 2020 2020 2020 2020 2061 206c  .            a l
+0001b810: 6973 7420 6f66 2075 6e69 7175 6520 6578  ist of unique ex
+0001b820: 7461 6e74 2063 6f6c 756d 6e20 6e61 6d65  tant column name
+0001b830: 730d 0a0d 0a20 2020 2020 2020 2045 7861  s....        Exa
+0001b840: 6d70 6c65 730d 0a20 2020 2020 2020 202d  mples..        -
+0001b850: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0001b860: 203e 3e3e 2073 7420 3d20 5374 7275 6374   >>> st = Struct
+0001b870: 287b 2761 273a 2031 2c20 2762 273a 2027  ({'a': 1, 'b': '
+0001b880: 6669 7368 272c 2027 6327 3a20 5b35 2e36  fish', 'c': [5.6
+0001b890: 2c20 372e 385d 2c20 2764 273a 207b 2741  , 7.8], 'd': {'A
+0001b8a0: 273a 2027 6461 7669 6427 2c20 2742 273a  ': 'david', 'B':
+0001b8b0: 2027 6d61 7474 6865 7727 7d2c 0d0a 2020   'matthew'},..  
+0001b8c0: 2020 2020 2020 2e2e 2e20 2765 273a 206e        ... 'e': n
+0001b8d0: 702e 6f6e 6573 2837 2c20 6474 7970 653d  p.ones(7, dtype=
+0001b8e0: 6e70 2e69 6e74 3634 297d 290d 0a20 2020  np.int64)})..   
+0001b8f0: 2020 2020 203e 3e3e 2073 740d 0a20 2020       >>> st..   
+0001b900: 2020 2020 2023 2020 204e 616d 6520 2020       #   Name   
+0001b910: 5479 7065 2020 2020 526f 7773 2020 2030  Type    Rows   0
+0001b920: 2020 2020 2020 3120 2020 2020 320d 0a20        1     2.. 
+0001b930: 2020 2020 2020 202d 2020 202d 2d2d 2d20         -   ---- 
+0001b940: 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d 2020    -----   ----  
+0001b950: 202d 2d2d 2d20 2020 2d2d 2d20 2020 2d0d   ----   ---   -.
+0001b960: 0a20 2020 2020 2020 2030 2020 2061 2020  .        0   a  
+0001b970: 2020 2020 696e 7420 2020 2020 3020 2020      int     0   
+0001b980: 2020 2031 0d0a 2020 2020 2020 2020 3120     1..        1 
+0001b990: 2020 6220 2020 2020 2073 7472 2020 2020    b      str    
+0001b9a0: 2030 2020 2020 2020 6669 7368 0d0a 2020   0      fish..  
+0001b9b0: 2020 2020 2020 3220 2020 6320 2020 2020        2   c     
+0001b9c0: 206c 6973 7420 2020 2032 2020 2020 2020   list    2      
+0001b9d0: 352e 3620 2020 2037 2e38 0d0a 2020 2020  5.6    7.8..    
+0001b9e0: 2020 2020 3320 2020 6420 2020 2020 2064      3   d      d
+0001b9f0: 6963 7420 2020 2032 2020 2020 2020 4120  ict    2      A 
+0001ba00: 2020 2020 2042 0d0a 2020 2020 2020 2020       B..        
+0001ba10: 3420 2020 6520 2020 2020 2069 6e74 3634  4   e      int64
+0001ba20: 2020 2037 2020 2020 2020 3120 2020 2020     7      1     
+0001ba30: 2031 2020 2020 2031 0d0a 0d0a 2020 2020   1     1....    
+0001ba40: 2020 2020 3e3e 3e20 7374 2e63 6f6c 5f73      >>> st.col_s
+0001ba50: 7761 7028 6c69 7374 2827 6162 6327 292c  wap(list('abc'),
+0001ba60: 206c 6973 7428 2763 6261 2729 290d 0a20   list('cba')).. 
+0001ba70: 2020 2020 2020 203e 3e3e 2073 740d 0a20         >>> st.. 
+0001ba80: 2020 2020 2020 2023 2020 204e 616d 6520         #   Name 
+0001ba90: 2020 5479 7065 2020 2020 526f 7773 2020    Type    Rows  
+0001baa0: 2030 2020 2020 2020 3120 2020 2020 320d   0      1     2.
+0001bab0: 0a20 2020 2020 2020 202d 2020 202d 2d2d  .        -   ---
+0001bac0: 2d20 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d  -   -----   ----
+0001bad0: 2020 202d 2d2d 2d20 2020 2d2d 2d20 2020     ----   ---   
+0001bae0: 2d0d 0a20 2020 2020 2020 2030 2020 2061  -..        0   a
+0001baf0: 2020 2020 2020 6c69 7374 2020 2020 3220        list    2 
+0001bb00: 2020 2020 2035 2e36 2020 2020 372e 380d       5.6    7.8.
+0001bb10: 0a20 2020 2020 2020 2031 2020 2062 2020  .        1   b  
+0001bb20: 2020 2020 7374 7220 2020 2020 3020 2020      str     0   
+0001bb30: 2020 2066 6973 680d 0a20 2020 2020 2020     fish..       
+0001bb40: 2032 2020 2063 2020 2020 2020 696e 7420   2   c      int 
+0001bb50: 2020 2020 3020 2020 2020 2031 0d0a 2020      0      1..  
+0001bb60: 2020 2020 2020 3320 2020 6420 2020 2020        3   d     
+0001bb70: 2064 6963 7420 2020 2032 2020 2020 2020   dict    2      
+0001bb80: 4120 2020 2020 2042 0d0a 2020 2020 2020  A      B..      
+0001bb90: 2020 3420 2020 6520 2020 2020 2069 6e74    4   e      int
+0001bba0: 3634 2020 2037 2020 2020 2020 3120 2020  64   7      1   
+0001bbb0: 2020 2031 2020 2020 2031 0d0a 2020 2020     1     1..    
+0001bbc0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+0001bbd0: 2069 6620 7365 6c66 2e69 735f 6c6f 636b   if self.is_lock
+0001bbe0: 6564 2829 3a0d 0a20 2020 2020 2020 2020  ed():..         
+0001bbf0: 2020 2072 6169 7365 2041 7474 7269 6275     raise Attribu
+0001bc00: 7465 4572 726f 7228 224e 6f74 2061 6c6c  teError("Not all
+0001bc10: 6f77 6564 2074 6f20 6361 6c6c 2063 6f6c  owed to call col
+0001bc20: 5f73 7761 7028 2920 6f6e 206c 6f63 6b65  _swap() on locke
+0001bc30: 6420 6f62 6a65 6374 2e22 290d 0a20 2020  d object.")..   
+0001bc40: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
+0001bc50: 7374 616e 6365 2866 726f 6d5f 636f 6c73  stance(from_cols
+0001bc60: 2c20 6c69 7374 2920 616e 6420 7365 7428  , list) and set(
+0001bc70: 6672 6f6d 5f63 6f6c 7329 2e69 7373 7562  from_cols).issub
+0001bc80: 7365 7428 7365 6c66 293a 0d0a 2020 2020  set(self):..    
+0001bc90: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
+0001bca0: 6c75 6545 7272 6f72 2866 227b 7365 6c66  lueError(f"{self
+0001bcb0: 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e 616d  .__class__.__nam
+0001bcc0: 655f 5f7d 2e63 6f6c 5f73 7761 7028 293a  e__}.col_swap():
+0001bcd0: 2049 6e76 616c 6964 2066 726f 6d5f 636f   Invalid from_co
+0001bce0: 6c73 2e22 290d 0a20 2020 2020 2020 2069  ls.")..        i
+0001bcf0: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
+0001bd00: 2874 6f5f 636f 6c73 2c20 6c69 7374 2920  (to_cols, list) 
+0001bd10: 616e 6420 7365 7428 746f 5f63 6f6c 7329  and set(to_cols)
+0001bd20: 2e69 7373 7562 7365 7428 7365 6c66 293a  .issubset(self):
+0001bd30: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
+0001bd40: 6973 6520 5661 6c75 6545 7272 6f72 2866  ise ValueError(f
+0001bd50: 227b 7365 6c66 2e5f 5f63 6c61 7373 5f5f  "{self.__class__
+0001bd60: 2e5f 5f6e 616d 655f 5f7d 2e63 6f6c 5f73  .__name__}.col_s
+0001bd70: 7761 7028 293a 2049 6e76 616c 6964 2074  wap(): Invalid t
+0001bd80: 6f5f 636f 6c73 2e22 290d 0a20 2020 2020  o_cols.")..     
+0001bd90: 2020 2069 6620 6672 6f6d 5f63 6f6c 7320     if from_cols 
+0001bda0: 3d3d 2074 6f5f 636f 6c73 3a0d 0a20 2020  == to_cols:..   
+0001bdb0: 2020 2020 2020 2020 2072 6574 7572 6e0d           return.
+0001bdc0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+0001bdd0: 286c 656e 2866 726f 6d5f 636f 6c73 2920  (len(from_cols) 
+0001bde0: 3d3d 206c 656e 2874 6f5f 636f 6c73 2920  == len(to_cols) 
+0001bdf0: 3d3d 206c 656e 2873 6574 2866 726f 6d5f  == len(set(from_
+0001be00: 636f 6c73 2929 2061 6e64 2073 6574 2866  cols)) and set(f
+0001be10: 726f 6d5f 636f 6c73 2920 3d3d 2073 6574  rom_cols) == set
+0001be20: 2874 6f5f 636f 6c73 2929 3a0d 0a20 2020  (to_cols)):..   
+0001be30: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
+0001be40: 616c 7565 4572 726f 7228 6622 7b73 656c  alueError(f"{sel
+0001be50: 662e 5f5f 636c 6173 735f 5f2e 5f5f 6e61  f.__class__.__na
+0001be60: 6d65 5f5f 7d2e 636f 6c5f 7377 6170 2829  me__}.col_swap()
+0001be70: 3a20 546f 206c 6973 7420 6d75 7374 2062  : To list must b
+0001be80: 6520 6120 7065 726d 7574 6174 696f 6e20  e a permutation 
+0001be90: 6f66 2066 726f 6d20 6c69 7374 2e22 290d  of from list.").
+0001bea0: 0a20 2020 2020 2020 2074 656d 7020 3d20  .        temp = 
+0001beb0: 7b5f 6b3a 2067 6574 6174 7472 2873 656c  {_k: getattr(sel
+0001bec0: 662c 205f 6b29 2066 6f72 205f 6b20 696e  f, _k) for _k in
+0001bed0: 2066 726f 6d5f 636f 6c73 7d0d 0a20 2020   from_cols}..   
+0001bee0: 2020 2020 2066 6f72 205f 6b31 2c20 5f6b       for _k1, _k
+0001bef0: 3220 696e 207a 6970 2874 6f5f 636f 6c73  2 in zip(to_cols
+0001bf00: 2c20 6672 6f6d 5f63 6f6c 7329 3a0d 0a20  , from_cols):.. 
+0001bf10: 2020 2020 2020 2020 2020 2073 6574 6174             setat
+0001bf20: 7472 2873 656c 662c 205f 6b31 2c20 7465  tr(self, _k1, te
+0001bf30: 6d70 5b5f 6b32 5d29 0d0a 0d0a 2020 2020  mp[_k2])....    
+0001bf40: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
 0001bf50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001bf60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001bf70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001bf80: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2063  -----..    def c
-0001bf90: 6f6c 5f6d 6f76 6528 7365 6c66 2c20 666c  ol_move(self, fl
-0001bfa0: 6973 742c 2062 6c69 7374 293a 0d0a 2020  ist, blist):..  
-0001bfb0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0001bfc0: 2020 204d 6f76 6520 7369 6e67 6c65 2063     Move single c
-0001bfd0: 6f6c 756d 6e20 6f72 2067 726f 7570 206f  olumn or group o
-0001bfe0: 6620 636f 6c75 6d6e 7320 746f 2062 6163  f columns to bac
-0001bff0: 6b20 6f66 206c 6973 7420 666f 7220 6974  k of list for it
-0001c000: 6572 6174 696f 6e2f 696e 6465 7869 6e67  eration/indexing
-0001c010: 2f64 6973 706c 6179 2e0d 0a20 2020 2020  /display...     
-0001c020: 2020 2056 616c 7565 7320 6f66 2063 6f6c     Values of col
-0001c030: 756d 6e73 2077 696c 6c20 7265 6d61 696e  umns will remain
-0001c040: 2075 6e63 6861 6e67 6564 2e0d 0a0d 0a20   unchanged..... 
-0001c050: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
-0001c060: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-0001c070: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2066  -----..        f
-0001c080: 6c69 7374 203a 2060 6c69 7374 6020 6f66  list : `list` of
-0001c090: 2060 7374 7260 0d0a 2020 2020 2020 2020   `str`..        
-0001c0a0: 2020 2020 4974 656d 206e 616d 6573 2074      Item names t
-0001c0b0: 6f20 6d6f 7665 2074 6f20 6672 6f6e 742e  o move to front.
-0001c0c0: 0d0a 2020 2020 2020 2020 626c 6973 7420  ..        blist 
-0001c0d0: 3a20 606c 6973 7460 206f 6620 6073 7472  : `list` of `str
-0001c0e0: 600d 0a20 2020 2020 2020 2020 2020 2049  `..            I
-0001c0f0: 7465 6d20 6e61 6d65 7320 746f 206d 6f76  tem names to mov
-0001c100: 6520 746f 2062 6163 6b2e 0d0a 0d0a 2020  e to back.....  
-0001c110: 2020 2020 2020 5365 6520 416c 736f 0d0a        See Also..
-0001c120: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-0001c130: 0d0a 2020 2020 2020 2020 5374 7275 6374  ..        Struct
-0001c140: 2e63 6f6c 5f6d 6f76 655f 746f 5f66 726f  .col_move_to_fro
-0001c150: 6e74 2c20 5374 7275 6374 2e63 6f6c 5f6d  nt, Struct.col_m
-0001c160: 6f76 655f 746f 5f62 6163 6b0d 0a20 2020  ove_to_back..   
-0001c170: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-0001c180: 2020 7365 6c66 2e63 6f6c 5f6d 6f76 655f    self.col_move_
-0001c190: 746f 5f66 726f 6e74 2866 6c69 7374 290d  to_front(flist).
-0001c1a0: 0a20 2020 2020 2020 2073 656c 662e 636f  .        self.co
-0001c1b0: 6c5f 6d6f 7665 5f74 6f5f 6261 636b 2862  l_move_to_back(b
-0001c1c0: 6c69 7374 290d 0a0d 0a20 2020 2023 202d  list)....    # -
+0001bf70: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
+0001bf80: 6566 2063 6f6c 5f6d 6f76 6528 7365 6c66  ef col_move(self
+0001bf90: 2c20 666c 6973 742c 2062 6c69 7374 293a  , flist, blist):
+0001bfa0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0001bfb0: 2020 2020 2020 204d 6f76 6520 7369 6e67         Move sing
+0001bfc0: 6c65 2063 6f6c 756d 6e20 6f72 2067 726f  le column or gro
+0001bfd0: 7570 206f 6620 636f 6c75 6d6e 7320 746f  up of columns to
+0001bfe0: 2062 6163 6b20 6f66 206c 6973 7420 666f   back of list fo
+0001bff0: 7220 6974 6572 6174 696f 6e2f 696e 6465  r iteration/inde
+0001c000: 7869 6e67 2f64 6973 706c 6179 2e0d 0a20  xing/display... 
+0001c010: 2020 2020 2020 2056 616c 7565 7320 6f66         Values of
+0001c020: 2063 6f6c 756d 6e73 2077 696c 6c20 7265   columns will re
+0001c030: 6d61 696e 2075 6e63 6861 6e67 6564 2e0d  main unchanged..
+0001c040: 0a0d 0a20 2020 2020 2020 2050 6172 616d  ...        Param
+0001c050: 6574 6572 730d 0a20 2020 2020 2020 202d  eters..        -
+0001c060: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020  ---------..     
+0001c070: 2020 2066 6c69 7374 203a 2060 6c69 7374     flist : `list
+0001c080: 6020 6f66 2060 7374 7260 0d0a 2020 2020  ` of `str`..    
+0001c090: 2020 2020 2020 2020 4974 656d 206e 616d          Item nam
+0001c0a0: 6573 2074 6f20 6d6f 7665 2074 6f20 6672  es to move to fr
+0001c0b0: 6f6e 742e 0d0a 2020 2020 2020 2020 626c  ont...        bl
+0001c0c0: 6973 7420 3a20 606c 6973 7460 206f 6620  ist : `list` of 
+0001c0d0: 6073 7472 600d 0a20 2020 2020 2020 2020  `str`..         
+0001c0e0: 2020 2049 7465 6d20 6e61 6d65 7320 746f     Item names to
+0001c0f0: 206d 6f76 6520 746f 2062 6163 6b2e 0d0a   move to back...
+0001c100: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
+0001c110: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
+0001c120: 2d2d 2d2d 0d0a 2020 2020 2020 2020 5374  ----..        St
+0001c130: 7275 6374 2e63 6f6c 5f6d 6f76 655f 746f  ruct.col_move_to
+0001c140: 5f66 726f 6e74 2c20 5374 7275 6374 2e63  _front, Struct.c
+0001c150: 6f6c 5f6d 6f76 655f 746f 5f62 6163 6b0d  ol_move_to_back.
+0001c160: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+0001c170: 2020 2020 2020 7365 6c66 2e63 6f6c 5f6d        self.col_m
+0001c180: 6f76 655f 746f 5f66 726f 6e74 2866 6c69  ove_to_front(fli
+0001c190: 7374 290d 0a20 2020 2020 2020 2073 656c  st)..        sel
+0001c1a0: 662e 636f 6c5f 6d6f 7665 5f74 6f5f 6261  f.col_move_to_ba
+0001c1b0: 636b 2862 6c69 7374 290d 0a0d 0a20 2020  ck(blist)....   
+0001c1c0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
 0001c1d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001c1e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001c1f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001c200: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
-0001c210: 636f 6c5f 6d6f 7665 5f74 6f5f 6672 6f6e  col_move_to_fron
-0001c220: 7428 7365 6c66 2c20 636f 6c73 293a 0d0a  t(self, cols):..
-0001c230: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-0001c240: 2020 2020 204d 6f76 6520 7369 6e67 6c65       Move single
-0001c250: 2063 6f6c 756d 6e20 6f72 2067 726f 7570   column or group
-0001c260: 206f 6620 636f 6c75 6d6e 7320 746f 2066   of columns to f
-0001c270: 726f 6e74 206f 6620 6c69 7374 2066 6f72  ront of list for
-0001c280: 2069 7465 7261 7469 6f6e 2f69 6e64 6578   iteration/index
-0001c290: 696e 672f 6469 7370 6c61 792e 0d0a 2020  ing/display...  
-0001c2a0: 2020 2020 2020 5661 6c75 6573 206f 6620        Values of 
-0001c2b0: 636f 6c75 6d6e 7320 7769 6c6c 2072 656d  columns will rem
-0001c2c0: 6169 6e20 756e 6368 616e 6765 642e 0d0a  ain unchanged...
-0001c2d0: 0d0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
-0001c2e0: 7465 7273 0d0a 2020 2020 2020 2020 2d2d  ters..        --
-0001c2f0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
-0001c300: 2020 666c 6973 7420 3a20 606c 6973 7460    flist : `list`
-0001c310: 206f 6620 6073 7472 600d 0a20 2020 2020   of `str`..     
-0001c320: 2020 2020 2020 2049 7465 6d20 6e61 6d65         Item name
-0001c330: 7320 746f 206d 6f76 6520 746f 2066 726f  s to move to fro
-0001c340: 6e74 2e0d 0a0d 0a20 2020 2020 2020 2045  nt.....        E
-0001c350: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
-0001c360: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
-0001c370: 2020 203e 3e3e 2023 544f 444f 2043 616c     >>> #TODO Cal
-0001c380: 6c20 6e70 2e72 616e 646f 6d2e 7365 6564  l np.random.seed
-0001c390: 2831 3233 3435 2920 6865 7265 2074 6f20  (12345) here to 
-0001c3a0: 6d61 6b65 2074 6865 2065 7861 6d70 6c65  make the example
-0001c3b0: 206f 7574 7075 7420 6465 7465 726d 696e   output determin
-0001c3c0: 6973 7469 630d 0a20 2020 2020 2020 203e  istic..        >
-0001c3d0: 3e3e 2064 7320 3d20 7274 2e44 6174 6173  >> ds = rt.Datas
-0001c3e0: 6574 287b 2763 6f6c 5f27 2b73 7472 2869  et({'col_'+str(i
-0001c3f0: 293a 206e 702e 7261 6e64 6f6d 2e72 616e  ): np.random.ran
-0001c400: 6428 3529 2066 6f72 2069 2069 6e20 7261  d(5) for i in ra
-0001c410: 6e67 6528 3529 7d29 0d0a 2020 2020 2020  nge(5)})..      
-0001c420: 2020 3e3e 3e20 6473 0d0a 2020 2020 2020    >>> ds..      
-0001c430: 2020 2320 2020 636f 6c5f 3020 2020 636f    #   col_0   co
-0001c440: 6c5f 3120 2020 636f 6c5f 3220 2020 636f  l_1   col_2   co
-0001c450: 6c5f 3320 2020 636f 6c5f 340d 0a20 2020  l_3   col_4..   
-0001c460: 2020 2020 202d 2020 202d 2d2d 2d2d 2020       -   -----  
-0001c470: 202d 2d2d 2d2d 2020 202d 2d2d 2d2d 2020   -----   -----  
-0001c480: 202d 2d2d 2d2d 2020 202d 2d2d 2d2d 0d0a   -----   -----..
-0001c490: 2020 2020 2020 2020 3020 2020 2030 2e36          0    0.6
-0001c4a0: 3020 2020 2030 2e35 3020 2020 2030 2e37  0    0.50    0.7
-0001c4b0: 3720 2020 2030 2e37 3220 2020 2030 2e37  7    0.72    0.7
-0001c4c0: 330d 0a20 2020 2020 2020 2031 2020 2020  3..        1    
-0001c4d0: 302e 3438 2020 2020 302e 3635 2020 2020  0.48    0.65    
-0001c4e0: 302e 3936 2020 2020 302e 3137 2020 2020  0.96    0.17    
-0001c4f0: 302e 3939 0d0a 2020 2020 2020 2020 3220  0.99..        2 
-0001c500: 2020 2030 2e30 3620 2020 2030 2e35 3420     0.06    0.54 
-0001c510: 2020 2030 2e38 3120 2020 2030 2e32 3020     0.81    0.20 
-0001c520: 2020 2030 2e33 300d 0a20 2020 2020 2020     0.30..       
-0001c530: 2033 2020 2020 302e 3138 2020 2020 302e   3    0.18    0.
-0001c540: 3835 2020 2020 302e 3234 2020 2020 302e  85    0.24    0.
-0001c550: 3434 2020 2020 302e 3338 0d0a 2020 2020  44    0.38..    
-0001c560: 2020 2020 3420 2020 2030 2e30 3420 2020      4    0.04   
-0001c570: 2030 2e38 3420 2020 2030 2e36 3420 2020   0.84    0.64   
-0001c580: 2030 2e36 3620 2020 2030 2e39 370d 0a0d   0.66    0.97...
-0001c590: 0a20 2020 2020 2020 203e 3e3e 2064 732e  .        >>> ds.
-0001c5a0: 636f 6c5f 6d6f 7665 5f74 6f5f 6672 6f6e  col_move_to_fron
-0001c5b0: 7428 5b27 636f 6c5f 3427 2c20 2763 6f6c  t(['col_4', 'col
-0001c5c0: 5f32 275d 290d 0a20 2020 2020 2020 203e  _2'])..        >
-0001c5d0: 3e3e 2064 730d 0a20 2020 2020 2020 2023  >> ds..        #
-0001c5e0: 2020 2063 6f6c 5f34 2020 2063 6f6c 5f32     col_4   col_2
-0001c5f0: 2020 2063 6f6c 5f30 2020 2063 6f6c 5f31     col_0   col_1
-0001c600: 2020 2063 6f6c 5f33 0d0a 2020 2020 2020     col_3..      
-0001c610: 2020 2d20 2020 2d2d 2d2d 2d20 2020 2d2d    -   -----   --
-0001c620: 2d2d 2d20 2020 2d2d 2d2d 2d20 2020 2d2d  ---   -----   --
-0001c630: 2d2d 2d20 2020 2d2d 2d2d 2d0d 0a20 2020  ---   -----..   
-0001c640: 2020 2020 2030 2020 2020 302e 3733 2020       0    0.73  
-0001c650: 2020 302e 3737 2020 2020 302e 3630 2020    0.77    0.60  
-0001c660: 2020 302e 3530 2020 2020 302e 3732 0d0a    0.50    0.72..
-0001c670: 2020 2020 2020 2020 3120 2020 2030 2e39          1    0.9
-0001c680: 3920 2020 2030 2e39 3620 2020 2030 2e34  9    0.96    0.4
-0001c690: 3820 2020 2030 2e36 3520 2020 2030 2e31  8    0.65    0.1
-0001c6a0: 370d 0a20 2020 2020 2020 2032 2020 2020  7..        2    
-0001c6b0: 302e 3330 2020 2020 302e 3831 2020 2020  0.30    0.81    
-0001c6c0: 302e 3036 2020 2020 302e 3534 2020 2020  0.06    0.54    
-0001c6d0: 302e 3230 0d0a 2020 2020 2020 2020 3320  0.20..        3 
-0001c6e0: 2020 2030 2e33 3820 2020 2030 2e32 3420     0.38    0.24 
-0001c6f0: 2020 2030 2e31 3820 2020 2030 2e38 3520     0.18    0.85 
-0001c700: 2020 2030 2e34 340d 0a20 2020 2020 2020     0.44..       
-0001c710: 2034 2020 2020 302e 3937 2020 2020 302e   4    0.97    0.
-0001c720: 3634 2020 2020 302e 3034 2020 2020 302e  64    0.04    0.
-0001c730: 3834 2020 2020 302e 3636 0d0a 0d0a 2020  84    0.66....  
-0001c740: 2020 2020 2020 5365 6520 416c 736f 0d0a        See Also..
-0001c750: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-0001c760: 0d0a 2020 2020 2020 2020 5374 7275 6374  ..        Struct
-0001c770: 2e63 6f6c 5f6d 6f76 655f 746f 5f66 726f  .col_move_to_fro
-0001c780: 6e74 2c20 5374 7275 6374 2e63 6f6c 5f6d  nt, Struct.col_m
-0001c790: 6f76 650d 0a20 2020 2020 2020 2022 2222  ove..        """
-0001c7a0: 0d0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
-0001c7b0: 662e 6973 5f6c 6f63 6b65 6428 293a 0d0a  f.is_locked():..
-0001c7c0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0001c7d0: 6520 4174 7472 6962 7574 6545 7272 6f72  e AttributeError
-0001c7e0: 2822 4e6f 7420 616c 6c6f 7765 6420 746f  ("Not allowed to
-0001c7f0: 2063 616c 6c20 636f 6c5f 6d6f 7665 5f74   call col_move_t
-0001c800: 6f5f 6672 6f6e 7428 2920 6f6e 206c 6f63  o_front() on loc
-0001c810: 6b65 6420 6f62 6a65 6374 2e22 290d 0a0d  ked object.")...
-0001c820: 0a20 2020 2020 2020 2073 656c 662e 5f61  .        self._a
-0001c830: 6c6c 5f69 7465 6d73 2e69 7465 6d5f 6d6f  ll_items.item_mo
-0001c840: 7665 5f74 6f5f 6672 6f6e 7428 636f 6c73  ve_to_front(cols
-0001c850: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
+0001c1f0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+0001c200: 6465 6620 636f 6c5f 6d6f 7665 5f74 6f5f  def col_move_to_
+0001c210: 6672 6f6e 7428 7365 6c66 2c20 636f 6c73  front(self, cols
+0001c220: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
+0001c230: 0a20 2020 2020 2020 204d 6f76 6520 7369  .        Move si
+0001c240: 6e67 6c65 2063 6f6c 756d 6e20 6f72 2067  ngle column or g
+0001c250: 726f 7570 206f 6620 636f 6c75 6d6e 7320  roup of columns 
+0001c260: 746f 2066 726f 6e74 206f 6620 6c69 7374  to front of list
+0001c270: 2066 6f72 2069 7465 7261 7469 6f6e 2f69   for iteration/i
+0001c280: 6e64 6578 696e 672f 6469 7370 6c61 792e  ndexing/display.
+0001c290: 0d0a 2020 2020 2020 2020 5661 6c75 6573  ..        Values
+0001c2a0: 206f 6620 636f 6c75 6d6e 7320 7769 6c6c   of columns will
+0001c2b0: 2072 656d 6169 6e20 756e 6368 616e 6765   remain unchange
+0001c2c0: 642e 0d0a 0d0a 2020 2020 2020 2020 5061  d.....        Pa
+0001c2d0: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+0001c2e0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+0001c2f0: 2020 2020 2020 666c 6973 7420 3a20 606c        flist : `l
+0001c300: 6973 7460 206f 6620 6073 7472 600d 0a20  ist` of `str`.. 
+0001c310: 2020 2020 2020 2020 2020 2049 7465 6d20             Item 
+0001c320: 6e61 6d65 7320 746f 206d 6f76 6520 746f  names to move to
+0001c330: 2066 726f 6e74 2e0d 0a0d 0a20 2020 2020   front.....     
+0001c340: 2020 2045 7861 6d70 6c65 730d 0a20 2020     Examples..   
+0001c350: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+0001c360: 2020 2020 2020 203e 3e3e 2023 544f 444f         >>> #TODO
+0001c370: 2043 616c 6c20 6e70 2e72 616e 646f 6d2e   Call np.random.
+0001c380: 7365 6564 2831 3233 3435 2920 6865 7265  seed(12345) here
+0001c390: 2074 6f20 6d61 6b65 2074 6865 2065 7861   to make the exa
+0001c3a0: 6d70 6c65 206f 7574 7075 7420 6465 7465  mple output dete
+0001c3b0: 726d 696e 6973 7469 630d 0a20 2020 2020  rministic..     
+0001c3c0: 2020 203e 3e3e 2064 7320 3d20 7274 2e44     >>> ds = rt.D
+0001c3d0: 6174 6173 6574 287b 2763 6f6c 5f27 2b73  ataset({'col_'+s
+0001c3e0: 7472 2869 293a 206e 702e 7261 6e64 6f6d  tr(i): np.random
+0001c3f0: 2e72 616e 6428 3529 2066 6f72 2069 2069  .rand(5) for i i
+0001c400: 6e20 7261 6e67 6528 3529 7d29 0d0a 2020  n range(5)})..  
+0001c410: 2020 2020 2020 3e3e 3e20 6473 0d0a 2020        >>> ds..  
+0001c420: 2020 2020 2020 2320 2020 636f 6c5f 3020        #   col_0 
+0001c430: 2020 636f 6c5f 3120 2020 636f 6c5f 3220    col_1   col_2 
+0001c440: 2020 636f 6c5f 3320 2020 636f 6c5f 340d    col_3   col_4.
+0001c450: 0a20 2020 2020 2020 202d 2020 202d 2d2d  .        -   ---
+0001c460: 2d2d 2020 202d 2d2d 2d2d 2020 202d 2d2d  --   -----   ---
+0001c470: 2d2d 2020 202d 2d2d 2d2d 2020 202d 2d2d  --   -----   ---
+0001c480: 2d2d 0d0a 2020 2020 2020 2020 3020 2020  --..        0   
+0001c490: 2030 2e36 3020 2020 2030 2e35 3020 2020   0.60    0.50   
+0001c4a0: 2030 2e37 3720 2020 2030 2e37 3220 2020   0.77    0.72   
+0001c4b0: 2030 2e37 330d 0a20 2020 2020 2020 2031   0.73..        1
+0001c4c0: 2020 2020 302e 3438 2020 2020 302e 3635      0.48    0.65
+0001c4d0: 2020 2020 302e 3936 2020 2020 302e 3137      0.96    0.17
+0001c4e0: 2020 2020 302e 3939 0d0a 2020 2020 2020      0.99..      
+0001c4f0: 2020 3220 2020 2030 2e30 3620 2020 2030    2    0.06    0
+0001c500: 2e35 3420 2020 2030 2e38 3120 2020 2030  .54    0.81    0
+0001c510: 2e32 3020 2020 2030 2e33 300d 0a20 2020  .20    0.30..   
+0001c520: 2020 2020 2033 2020 2020 302e 3138 2020       3    0.18  
+0001c530: 2020 302e 3835 2020 2020 302e 3234 2020    0.85    0.24  
+0001c540: 2020 302e 3434 2020 2020 302e 3338 0d0a    0.44    0.38..
+0001c550: 2020 2020 2020 2020 3420 2020 2030 2e30          4    0.0
+0001c560: 3420 2020 2030 2e38 3420 2020 2030 2e36  4    0.84    0.6
+0001c570: 3420 2020 2030 2e36 3620 2020 2030 2e39  4    0.66    0.9
+0001c580: 370d 0a0d 0a20 2020 2020 2020 203e 3e3e  7....        >>>
+0001c590: 2064 732e 636f 6c5f 6d6f 7665 5f74 6f5f   ds.col_move_to_
+0001c5a0: 6672 6f6e 7428 5b27 636f 6c5f 3427 2c20  front(['col_4', 
+0001c5b0: 2763 6f6c 5f32 275d 290d 0a20 2020 2020  'col_2'])..     
+0001c5c0: 2020 203e 3e3e 2064 730d 0a20 2020 2020     >>> ds..     
+0001c5d0: 2020 2023 2020 2063 6f6c 5f34 2020 2063     #   col_4   c
+0001c5e0: 6f6c 5f32 2020 2063 6f6c 5f30 2020 2063  ol_2   col_0   c
+0001c5f0: 6f6c 5f31 2020 2063 6f6c 5f33 0d0a 2020  ol_1   col_3..  
+0001c600: 2020 2020 2020 2d20 2020 2d2d 2d2d 2d20        -   ----- 
+0001c610: 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d20    -----   ----- 
+0001c620: 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d0d    -----   -----.
+0001c630: 0a20 2020 2020 2020 2030 2020 2020 302e  .        0    0.
+0001c640: 3733 2020 2020 302e 3737 2020 2020 302e  73    0.77    0.
+0001c650: 3630 2020 2020 302e 3530 2020 2020 302e  60    0.50    0.
+0001c660: 3732 0d0a 2020 2020 2020 2020 3120 2020  72..        1   
+0001c670: 2030 2e39 3920 2020 2030 2e39 3620 2020   0.99    0.96   
+0001c680: 2030 2e34 3820 2020 2030 2e36 3520 2020   0.48    0.65   
+0001c690: 2030 2e31 370d 0a20 2020 2020 2020 2032   0.17..        2
+0001c6a0: 2020 2020 302e 3330 2020 2020 302e 3831      0.30    0.81
+0001c6b0: 2020 2020 302e 3036 2020 2020 302e 3534      0.06    0.54
+0001c6c0: 2020 2020 302e 3230 0d0a 2020 2020 2020      0.20..      
+0001c6d0: 2020 3320 2020 2030 2e33 3820 2020 2030    3    0.38    0
+0001c6e0: 2e32 3420 2020 2030 2e31 3820 2020 2030  .24    0.18    0
+0001c6f0: 2e38 3520 2020 2030 2e34 340d 0a20 2020  .85    0.44..   
+0001c700: 2020 2020 2034 2020 2020 302e 3937 2020       4    0.97  
+0001c710: 2020 302e 3634 2020 2020 302e 3034 2020    0.64    0.04  
+0001c720: 2020 302e 3834 2020 2020 302e 3636 0d0a    0.84    0.66..
+0001c730: 0d0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
+0001c740: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
+0001c750: 2d2d 2d2d 0d0a 2020 2020 2020 2020 5374  ----..        St
+0001c760: 7275 6374 2e63 6f6c 5f6d 6f76 655f 746f  ruct.col_move_to
+0001c770: 5f66 726f 6e74 2c20 5374 7275 6374 2e63  _front, Struct.c
+0001c780: 6f6c 5f6d 6f76 650d 0a20 2020 2020 2020  ol_move..       
+0001c790: 2022 2222 0d0a 2020 2020 2020 2020 6966   """..        if
+0001c7a0: 2073 656c 662e 6973 5f6c 6f63 6b65 6428   self.is_locked(
+0001c7b0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0001c7c0: 7261 6973 6520 4174 7472 6962 7574 6545  raise AttributeE
+0001c7d0: 7272 6f72 2822 4e6f 7420 616c 6c6f 7765  rror("Not allowe
+0001c7e0: 6420 746f 2063 616c 6c20 636f 6c5f 6d6f  d to call col_mo
+0001c7f0: 7665 5f74 6f5f 6672 6f6e 7428 2920 6f6e  ve_to_front() on
+0001c800: 206c 6f63 6b65 6420 6f62 6a65 6374 2e22   locked object."
+0001c810: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
+0001c820: 662e 5f61 6c6c 5f69 7465 6d73 2e69 7465  f._all_items.ite
+0001c830: 6d5f 6d6f 7665 5f74 6f5f 6672 6f6e 7428  m_move_to_front(
+0001c840: 636f 6c73 290d 0a0d 0a20 2020 2023 202d  cols)....    # -
+0001c850: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001c860: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001c870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001c880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001c890: 2d2d 0d0a 2020 2020 6465 6620 636f 6c5f  --..    def col_
-0001c8a0: 6d6f 7665 5f74 6f5f 6261 636b 2873 656c  move_to_back(sel
-0001c8b0: 662c 2063 6f6c 7329 3a0d 0a20 2020 2020  f, cols):..     
-0001c8c0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-0001c8d0: 4d6f 7665 2073 696e 676c 6520 636f 6c75  Move single colu
-0001c8e0: 6d6e 206f 7220 6772 6f75 7020 6f66 2063  mn or group of c
-0001c8f0: 6f6c 756d 6e73 2074 6f20 6672 6f6e 7420  olumns to front 
-0001c900: 6f66 206c 6973 7420 666f 7220 6974 6572  of list for iter
-0001c910: 6174 696f 6e2f 696e 6465 7869 6e67 2f64  ation/indexing/d
-0001c920: 6973 706c 6179 2e0d 0a0d 0a20 2020 2020  isplay.....     
-0001c930: 2020 2056 616c 7565 7320 6f66 2063 6f6c     Values of col
-0001c940: 756d 6e73 2077 696c 6c20 7265 6d61 696e  umns will remain
-0001c950: 2075 6e63 6861 6e67 6564 2e0d 0a0d 0a20   unchanged..... 
-0001c960: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
-0001c970: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-0001c980: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2066  -----..        f
-0001c990: 6c69 7374 203a 2060 6c69 7374 6020 6f66  list : `list` of
-0001c9a0: 2060 7374 7260 0d0a 2020 2020 2020 2020   `str`..        
-0001c9b0: 2020 2020 4974 656d 206e 616d 6573 2074      Item names t
-0001c9c0: 6f20 6d6f 7665 2074 6f20 6261 636b 2e0d  o move to back..
-0001c9d0: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
-0001c9e0: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
-0001c9f0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 203e  -----..        >
-0001ca00: 3e3e 2023 544f 444f 2043 616c 6c20 6e70  >> #TODO Call np
-0001ca10: 2e72 616e 646f 6d2e 7365 6564 2831 3233  .random.seed(123
-0001ca20: 3435 2920 6865 7265 2074 6f20 6d61 6b65  45) here to make
-0001ca30: 2074 6865 2065 7861 6d70 6c65 206f 7574   the example out
-0001ca40: 7075 7420 6465 7465 726d 696e 6973 7469  put deterministi
-0001ca50: 630d 0a20 2020 2020 2020 203e 3e3e 2064  c..        >>> d
-0001ca60: 7320 3d20 7274 2e44 6174 6173 6574 287b  s = rt.Dataset({
-0001ca70: 2763 6f6c 5f27 2b73 7472 2869 293a 206e  'col_'+str(i): n
-0001ca80: 702e 7261 6e64 6f6d 2e72 616e 6428 3529  p.random.rand(5)
-0001ca90: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
-0001caa0: 3529 7d29 0d0a 2020 2020 2020 2020 3e3e  5)})..        >>
-0001cab0: 3e20 6473 0d0a 2020 2020 2020 2020 2320  > ds..        # 
-0001cac0: 2020 636f 6c5f 3020 2020 636f 6c5f 3120    col_0   col_1 
-0001cad0: 2020 636f 6c5f 3220 2020 636f 6c5f 3320    col_2   col_3 
-0001cae0: 2020 636f 6c5f 340d 0a20 2020 2020 2020    col_4..       
-0001caf0: 202d 2020 202d 2d2d 2d2d 2020 202d 2d2d   -   -----   ---
-0001cb00: 2d2d 2020 202d 2d2d 2d2d 2020 202d 2d2d  --   -----   ---
-0001cb10: 2d2d 2020 202d 2d2d 2d2d 0d0a 2020 2020  --   -----..    
-0001cb20: 2020 2020 3020 2020 2030 2e32 3820 2020      0    0.28   
-0001cb30: 2030 2e38 3420 2020 2030 2e32 3420 2020   0.84    0.24   
-0001cb40: 2030 2e37 3220 2020 2030 2e38 310d 0a20   0.72    0.81.. 
-0001cb50: 2020 2020 2020 2031 2020 2020 302e 3732         1    0.72
-0001cb60: 2020 2020 302e 3434 2020 2020 302e 3431      0.44    0.41
-0001cb70: 2020 2020 302e 3533 2020 2020 302e 3137      0.53    0.17
-0001cb80: 0d0a 2020 2020 2020 2020 3220 2020 2030  ..        2    0
-0001cb90: 2e33 3720 2020 2030 2e36 3620 2020 2030  .37    0.66    0
-0001cba0: 2e36 3120 2020 2030 2e35 3220 2020 2030  .61    0.52    0
-0001cbb0: 2e35 300d 0a20 2020 2020 2020 2033 2020  .50..        3  
-0001cbc0: 2020 302e 3038 2020 2020 302e 3331 2020    0.08    0.31  
-0001cbd0: 2020 302e 3135 2020 2020 302e 3635 2020    0.15    0.65  
-0001cbe0: 2020 302e 3938 0d0a 2020 2020 2020 2020    0.98..        
-0001cbf0: 3420 2020 2030 2e36 3320 2020 2030 2e38  4    0.63    0.8
-0001cc00: 3920 2020 2030 2e32 3520 2020 2030 2e31  9    0.25    0.1
-0001cc10: 3320 2020 2030 2e31 360d 0a0d 0a20 2020  3    0.16....   
-0001cc20: 2020 2020 203e 3e3e 2064 732e 636f 6c5f       >>> ds.col_
-0001cc30: 6d6f 7665 5f74 6f5f 6261 636b 285b 2763  move_to_back(['c
-0001cc40: 6f6c 5f32 272c 2763 6f6c 5f30 275d 290d  ol_2','col_0']).
-0001cc50: 0a20 2020 2020 2020 2023 2020 2063 6f6c  .        #   col
-0001cc60: 5f31 2020 2063 6f6c 5f33 2020 2063 6f6c  _1   col_3   col
-0001cc70: 5f34 2020 2063 6f6c 5f32 2020 2063 6f6c  _4   col_2   col
-0001cc80: 5f30 0d0a 2020 2020 2020 2020 2d20 2020  _0..        -   
-0001cc90: 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d20 2020  -----   -----   
-0001cca0: 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d20 2020  -----   -----   
-0001ccb0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2030  -----..        0
-0001ccc0: 2020 2020 302e 3834 2020 2020 302e 3732      0.84    0.72
-0001ccd0: 2020 2020 302e 3831 2020 2020 302e 3234      0.81    0.24
-0001cce0: 2020 2020 302e 3238 0d0a 2020 2020 2020      0.28..      
-0001ccf0: 2020 3120 2020 2030 2e34 3420 2020 2030    1    0.44    0
-0001cd00: 2e35 3320 2020 2030 2e31 3720 2020 2030  .53    0.17    0
-0001cd10: 2e34 3120 2020 2030 2e37 320d 0a20 2020  .41    0.72..   
-0001cd20: 2020 2020 2032 2020 2020 302e 3636 2020       2    0.66  
-0001cd30: 2020 302e 3532 2020 2020 302e 3530 2020    0.52    0.50  
-0001cd40: 2020 302e 3631 2020 2020 302e 3337 0d0a    0.61    0.37..
-0001cd50: 2020 2020 2020 2020 3320 2020 2030 2e33          3    0.3
-0001cd60: 3120 2020 2030 2e36 3520 2020 2030 2e39  1    0.65    0.9
-0001cd70: 3820 2020 2030 2e31 3520 2020 2030 2e30  8    0.15    0.0
-0001cd80: 380d 0a20 2020 2020 2020 2034 2020 2020  8..        4    
-0001cd90: 302e 3839 2020 2020 302e 3133 2020 2020  0.89    0.13    
-0001cda0: 302e 3136 2020 2020 302e 3235 2020 2020  0.16    0.25    
-0001cdb0: 302e 3633 0d0a 0d0a 2020 2020 2020 2020  0.63....        
-0001cdc0: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
-0001cdd0: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-0001cde0: 2020 2020 5374 7275 6374 2e63 6f6c 5f6d      Struct.col_m
-0001cdf0: 6f76 655f 746f 5f62 6163 6b0d 0a20 2020  ove_to_back..   
-0001ce00: 2020 2020 2053 7472 7563 742e 636f 6c5f       Struct.col_
-0001ce10: 6d6f 7665 0d0a 2020 2020 2020 2020 2222  move..        ""
-0001ce20: 220d 0a20 2020 2020 2020 2069 6620 7365  "..        if se
-0001ce30: 6c66 2e69 735f 6c6f 636b 6564 2829 3a0d  lf.is_locked():.
-0001ce40: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-0001ce50: 7365 2041 7474 7269 6275 7465 4572 726f  se AttributeErro
-0001ce60: 7228 224e 6f74 2061 6c6c 6f77 6564 2074  r("Not allowed t
-0001ce70: 6f20 6361 6c6c 2063 6f6c 5f6d 6f76 655f  o call col_move_
-0001ce80: 746f 5f62 6163 6b28 2920 6f6e 206c 6f63  to_back() on loc
-0001ce90: 6b65 6420 6f62 6a65 6374 2e22 290d 0a0d  ked object.")...
-0001cea0: 0a20 2020 2020 2020 2073 656c 662e 5f61  .        self._a
-0001ceb0: 6c6c 5f69 7465 6d73 2e69 7465 6d5f 6d6f  ll_items.item_mo
-0001cec0: 7665 5f74 6f5f 6261 636b 2863 6f6c 7329  ve_to_back(cols)
-0001ced0: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+0001c880: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
+0001c890: 636f 6c5f 6d6f 7665 5f74 6f5f 6261 636b  col_move_to_back
+0001c8a0: 2873 656c 662c 2063 6f6c 7329 3a0d 0a20  (self, cols):.. 
+0001c8b0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+0001c8c0: 2020 2020 4d6f 7665 2073 696e 676c 6520      Move single 
+0001c8d0: 636f 6c75 6d6e 206f 7220 6772 6f75 7020  column or group 
+0001c8e0: 6f66 2063 6f6c 756d 6e73 2074 6f20 6672  of columns to fr
+0001c8f0: 6f6e 7420 6f66 206c 6973 7420 666f 7220  ont of list for 
+0001c900: 6974 6572 6174 696f 6e2f 696e 6465 7869  iteration/indexi
+0001c910: 6e67 2f64 6973 706c 6179 2e0d 0a0d 0a20  ng/display..... 
+0001c920: 2020 2020 2020 2056 616c 7565 7320 6f66         Values of
+0001c930: 2063 6f6c 756d 6e73 2077 696c 6c20 7265   columns will re
+0001c940: 6d61 696e 2075 6e63 6861 6e67 6564 2e0d  main unchanged..
+0001c950: 0a0d 0a20 2020 2020 2020 2050 6172 616d  ...        Param
+0001c960: 6574 6572 730d 0a20 2020 2020 2020 202d  eters..        -
+0001c970: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020  ---------..     
+0001c980: 2020 2066 6c69 7374 203a 2060 6c69 7374     flist : `list
+0001c990: 6020 6f66 2060 7374 7260 0d0a 2020 2020  ` of `str`..    
+0001c9a0: 2020 2020 2020 2020 4974 656d 206e 616d          Item nam
+0001c9b0: 6573 2074 6f20 6d6f 7665 2074 6f20 6261  es to move to ba
+0001c9c0: 636b 2e0d 0a0d 0a20 2020 2020 2020 2045  ck.....        E
+0001c9d0: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
+0001c9e0: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+0001c9f0: 2020 203e 3e3e 2023 544f 444f 2043 616c     >>> #TODO Cal
+0001ca00: 6c20 6e70 2e72 616e 646f 6d2e 7365 6564  l np.random.seed
+0001ca10: 2831 3233 3435 2920 6865 7265 2074 6f20  (12345) here to 
+0001ca20: 6d61 6b65 2074 6865 2065 7861 6d70 6c65  make the example
+0001ca30: 206f 7574 7075 7420 6465 7465 726d 696e   output determin
+0001ca40: 6973 7469 630d 0a20 2020 2020 2020 203e  istic..        >
+0001ca50: 3e3e 2064 7320 3d20 7274 2e44 6174 6173  >> ds = rt.Datas
+0001ca60: 6574 287b 2763 6f6c 5f27 2b73 7472 2869  et({'col_'+str(i
+0001ca70: 293a 206e 702e 7261 6e64 6f6d 2e72 616e  ): np.random.ran
+0001ca80: 6428 3529 2066 6f72 2069 2069 6e20 7261  d(5) for i in ra
+0001ca90: 6e67 6528 3529 7d29 0d0a 2020 2020 2020  nge(5)})..      
+0001caa0: 2020 3e3e 3e20 6473 0d0a 2020 2020 2020    >>> ds..      
+0001cab0: 2020 2320 2020 636f 6c5f 3020 2020 636f    #   col_0   co
+0001cac0: 6c5f 3120 2020 636f 6c5f 3220 2020 636f  l_1   col_2   co
+0001cad0: 6c5f 3320 2020 636f 6c5f 340d 0a20 2020  l_3   col_4..   
+0001cae0: 2020 2020 202d 2020 202d 2d2d 2d2d 2020       -   -----  
+0001caf0: 202d 2d2d 2d2d 2020 202d 2d2d 2d2d 2020   -----   -----  
+0001cb00: 202d 2d2d 2d2d 2020 202d 2d2d 2d2d 0d0a   -----   -----..
+0001cb10: 2020 2020 2020 2020 3020 2020 2030 2e32          0    0.2
+0001cb20: 3820 2020 2030 2e38 3420 2020 2030 2e32  8    0.84    0.2
+0001cb30: 3420 2020 2030 2e37 3220 2020 2030 2e38  4    0.72    0.8
+0001cb40: 310d 0a20 2020 2020 2020 2031 2020 2020  1..        1    
+0001cb50: 302e 3732 2020 2020 302e 3434 2020 2020  0.72    0.44    
+0001cb60: 302e 3431 2020 2020 302e 3533 2020 2020  0.41    0.53    
+0001cb70: 302e 3137 0d0a 2020 2020 2020 2020 3220  0.17..        2 
+0001cb80: 2020 2030 2e33 3720 2020 2030 2e36 3620     0.37    0.66 
+0001cb90: 2020 2030 2e36 3120 2020 2030 2e35 3220     0.61    0.52 
+0001cba0: 2020 2030 2e35 300d 0a20 2020 2020 2020     0.50..       
+0001cbb0: 2033 2020 2020 302e 3038 2020 2020 302e   3    0.08    0.
+0001cbc0: 3331 2020 2020 302e 3135 2020 2020 302e  31    0.15    0.
+0001cbd0: 3635 2020 2020 302e 3938 0d0a 2020 2020  65    0.98..    
+0001cbe0: 2020 2020 3420 2020 2030 2e36 3320 2020      4    0.63   
+0001cbf0: 2030 2e38 3920 2020 2030 2e32 3520 2020   0.89    0.25   
+0001cc00: 2030 2e31 3320 2020 2030 2e31 360d 0a0d   0.13    0.16...
+0001cc10: 0a20 2020 2020 2020 203e 3e3e 2064 732e  .        >>> ds.
+0001cc20: 636f 6c5f 6d6f 7665 5f74 6f5f 6261 636b  col_move_to_back
+0001cc30: 285b 2763 6f6c 5f32 272c 2763 6f6c 5f30  (['col_2','col_0
+0001cc40: 275d 290d 0a20 2020 2020 2020 2023 2020  '])..        #  
+0001cc50: 2063 6f6c 5f31 2020 2063 6f6c 5f33 2020   col_1   col_3  
+0001cc60: 2063 6f6c 5f34 2020 2063 6f6c 5f32 2020   col_4   col_2  
+0001cc70: 2063 6f6c 5f30 0d0a 2020 2020 2020 2020   col_0..        
+0001cc80: 2d20 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d  -   -----   ----
+0001cc90: 2d20 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d  -   -----   ----
+0001cca0: 2d20 2020 2d2d 2d2d 2d0d 0a20 2020 2020  -   -----..     
+0001ccb0: 2020 2030 2020 2020 302e 3834 2020 2020     0    0.84    
+0001ccc0: 302e 3732 2020 2020 302e 3831 2020 2020  0.72    0.81    
+0001ccd0: 302e 3234 2020 2020 302e 3238 0d0a 2020  0.24    0.28..  
+0001cce0: 2020 2020 2020 3120 2020 2030 2e34 3420        1    0.44 
+0001ccf0: 2020 2030 2e35 3320 2020 2030 2e31 3720     0.53    0.17 
+0001cd00: 2020 2030 2e34 3120 2020 2030 2e37 320d     0.41    0.72.
+0001cd10: 0a20 2020 2020 2020 2032 2020 2020 302e  .        2    0.
+0001cd20: 3636 2020 2020 302e 3532 2020 2020 302e  66    0.52    0.
+0001cd30: 3530 2020 2020 302e 3631 2020 2020 302e  50    0.61    0.
+0001cd40: 3337 0d0a 2020 2020 2020 2020 3320 2020  37..        3   
+0001cd50: 2030 2e33 3120 2020 2030 2e36 3520 2020   0.31    0.65   
+0001cd60: 2030 2e39 3820 2020 2030 2e31 3520 2020   0.98    0.15   
+0001cd70: 2030 2e30 380d 0a20 2020 2020 2020 2034   0.08..        4
+0001cd80: 2020 2020 302e 3839 2020 2020 302e 3133      0.89    0.13
+0001cd90: 2020 2020 302e 3136 2020 2020 302e 3235      0.16    0.25
+0001cda0: 2020 2020 302e 3633 0d0a 0d0a 2020 2020      0.63....    
+0001cdb0: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
+0001cdc0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
+0001cdd0: 2020 2020 2020 2020 5374 7275 6374 2e63          Struct.c
+0001cde0: 6f6c 5f6d 6f76 655f 746f 5f62 6163 6b0d  ol_move_to_back.
+0001cdf0: 0a20 2020 2020 2020 2053 7472 7563 742e  .        Struct.
+0001ce00: 636f 6c5f 6d6f 7665 0d0a 2020 2020 2020  col_move..      
+0001ce10: 2020 2222 220d 0a20 2020 2020 2020 2069    """..        i
+0001ce20: 6620 7365 6c66 2e69 735f 6c6f 636b 6564  f self.is_locked
+0001ce30: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
+0001ce40: 2072 6169 7365 2041 7474 7269 6275 7465   raise Attribute
+0001ce50: 4572 726f 7228 224e 6f74 2061 6c6c 6f77  Error("Not allow
+0001ce60: 6564 2074 6f20 6361 6c6c 2063 6f6c 5f6d  ed to call col_m
+0001ce70: 6f76 655f 746f 5f62 6163 6b28 2920 6f6e  ove_to_back() on
+0001ce80: 206c 6f63 6b65 6420 6f62 6a65 6374 2e22   locked object."
+0001ce90: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
+0001cea0: 662e 5f61 6c6c 5f69 7465 6d73 2e69 7465  f._all_items.ite
+0001ceb0: 6d5f 6d6f 7665 5f74 6f5f 6261 636b 2863  m_move_to_back(c
+0001cec0: 6f6c 7329 0d0a 0d0a 2020 2020 2320 2d2d  ols)....    # --
+0001ced0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001cee0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001cef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001cf00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001cf10: 2d0d 0a20 2020 2064 6566 2063 6f6c 5f6d  -..    def col_m
-0001cf20: 6170 2873 656c 662c 2072 656e 616d 655f  ap(self, rename_
-0001cf30: 6469 6374 3a20 4d61 7070 696e 675b 7374  dict: Mapping[st
-0001cf40: 722c 2073 7472 5d29 202d 3e20 4e6f 6e65  r, str]) -> None
-0001cf50: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-0001cf60: 2020 2020 2020 2020 5265 6e61 6d65 2063          Rename c
-0001cf70: 6f6c 756d 6e73 2061 6e64 2072 652d 6172  olumns and re-ar
-0001cf80: 7261 6e67 6520 6e61 6d65 7320 6f66 2063  range names of c
-0001cf90: 6f6c 756d 6e73 2062 6173 6564 206f 6e20  olumns based on 
-0001cfa0: 7468 6520 7275 6c65 7320 7365 7420 666f  the rules set fo
-0001cfb0: 7274 6820 696e 2074 6865 2073 7570 706c  rth in the suppl
-0001cfc0: 6965 6420 6469 6374 696f 6e61 7279 2e0d  ied dictionary..
-0001cfd0: 0a0d 0a20 2020 2020 2020 2050 6172 616d  ...        Param
-0001cfe0: 6574 6572 730d 0a20 2020 2020 2020 202d  eters..        -
-0001cff0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020  ---------..     
-0001d000: 2020 2072 656e 616d 655f 6469 6374 203a     rename_dict :
-0001d010: 2064 6963 740d 0a20 2020 2020 2020 2020   dict..         
-0001d020: 2020 2044 6963 7469 6f6e 6172 7920 6465     Dictionary de
-0001d030: 6669 6e69 6e67 2061 2072 656d 6170 7069  fining a remappi
-0001d040: 6e67 206f 6620 2873 6f6d 652f 616c 6c29  ng of (some/all)
-0001d050: 2063 6f6c 756d 6e20 6e61 6d65 732e 0d0a   column names...
-0001d060: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-0001d070: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-0001d080: 2d2d 0d0a 2020 2020 2020 2020 4e6f 6e65  --..        None
-0001d090: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
-0001d0a0: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
-0001d0b0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0001d0c0: 3e3e 3e20 2354 4f44 4f20 4361 6c6c 206e  >>> #TODO Call n
-0001d0d0: 702e 7261 6e64 6f6d 2e73 6565 6428 3132  p.random.seed(12
-0001d0e0: 3334 3529 2068 6572 6520 746f 206d 616b  345) here to mak
-0001d0f0: 6520 7468 6520 6578 616d 706c 6520 6f75  e the example ou
-0001d100: 7470 7574 2064 6574 6572 6d69 6e69 7374  tput determinist
-0001d110: 6963 0d0a 2020 2020 2020 2020 3e3e 3e20  ic..        >>> 
-0001d120: 6473 203d 2072 742e 4461 7461 7365 7428  ds = rt.Dataset(
-0001d130: 7b27 636f 6c5f 272b 7374 7228 6929 3a20  {'col_'+str(i): 
-0001d140: 6e70 2e72 616e 646f 6d2e 7261 6e64 2835  np.random.rand(5
-0001d150: 2920 666f 7220 6920 696e 2072 616e 6765  ) for i in range
-0001d160: 2835 297d 290d 0a20 2020 2020 2020 203e  (5)})..        >
-0001d170: 3e3e 2064 732e 636f 6c5f 6d61 7028 7b27  >> ds.col_map({'
-0001d180: 636f 6c5f 3127 3a27 4141 4127 2c20 2763  col_1':'AAA', 'c
-0001d190: 6f6c 5f32 273a 2742 4242 277d 290d 0a20  ol_2':'BBB'}).. 
-0001d1a0: 2020 2020 2020 203e 3e3e 2064 730d 0a20         >>> ds.. 
-0001d1b0: 2020 2020 2020 2023 2020 2063 6f6c 5f30         #   col_0
-0001d1c0: 2020 2020 4141 4120 2020 2042 4242 2020      AAA    BBB  
-0001d1d0: 2063 6f6c 5f33 2020 2063 6f6c 5f34 0d0a   col_3   col_4..
-0001d1e0: 2020 2020 2020 2020 2d20 2020 2d2d 2d2d          -   ----
-0001d1f0: 2d20 2020 2d2d 2d2d 2020 202d 2d2d 2d20  -   ----   ---- 
-0001d200: 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d0d    -----   -----.
-0001d210: 0a20 2020 2020 2020 2030 2020 2020 302e  .        0    0.
-0001d220: 3535 2020 2030 2e32 3120 2020 302e 3237  55   0.21   0.27
-0001d230: 2020 2020 302e 3835 2020 2020 302e 3033      0.85    0.03
-0001d240: 0d0a 2020 2020 2020 2020 3120 2020 2030  ..        1    0
-0001d250: 2e37 3720 2020 302e 3735 2020 2030 2e36  .77   0.75   0.6
-0001d260: 3520 2020 2030 2e39 3720 2020 2030 2e32  5    0.97    0.2
-0001d270: 340d 0a20 2020 2020 2020 2032 2020 2020  4..        2    
-0001d280: 302e 3039 2020 2030 2e30 3720 2020 302e  0.09   0.07   0.
-0001d290: 3430 2020 2020 302e 3831 2020 2020 302e  40    0.81    0.
-0001d2a0: 3632 0d0a 2020 2020 2020 2020 3320 2020  62..        3   
-0001d2b0: 2030 2e35 3020 2020 302e 3933 2020 2030   0.50   0.93   0
-0001d2c0: 2e39 3820 2020 2030 2e39 3920 2020 2030  .98    0.99    0
-0001d2d0: 2e39 390d 0a20 2020 2020 2020 2034 2020  .99..        4  
-0001d2e0: 2020 302e 3430 2020 2030 2e34 3520 2020    0.40   0.45   
-0001d2f0: 302e 3533 2020 2020 302e 3439 2020 2020  0.53    0.49    
-0001d300: 302e 3736 0d0a 2020 2020 2020 2020 2222  0.76..        ""
-0001d310: 220d 0a20 2020 2020 2020 2069 6620 7365  "..        if se
-0001d320: 6c66 2e69 735f 6c6f 636b 6564 2829 3a0d  lf.is_locked():.
-0001d330: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-0001d340: 7365 2041 7474 7269 6275 7465 4572 726f  se AttributeErro
-0001d350: 7228 224e 6f74 2061 6c6c 6f77 6564 2074  r("Not allowed t
-0001d360: 6f20 6361 6c6c 2063 6f6c 5f6d 6170 2829  o call col_map()
-0001d370: 206f 6e20 6c6f 636b 6564 206f 626a 6563   on locked objec
-0001d380: 742e 2229 0d0a 2020 2020 2020 2020 2320  t.")..        # 
-0001d390: 7468 6520 6b65 7973 206f 6620 7265 6e61  the keys of rena
-0001d3a0: 6d65 5f64 6963 7420 6172 6520 7468 6520  me_dict are the 
-0001d3b0: 6f6c 6420 636f 6c75 6d6e 206e 616d 6573  old column names
-0001d3c0: 0d0a 2020 2020 2020 2020 2320 7468 6520  ..        # the 
-0001d3d0: 7661 6c75 6573 206f 6620 7265 6e61 6d65  values of rename
-0001d3e0: 5f64 6963 7420 6172 6520 7468 6520 6e65  _dict are the ne
-0001d3f0: 7720 636f 6c75 6d6e 206e 616d 6573 0d0a  w column names..
-0001d400: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-0001d410: 7461 6e63 6528 7265 6e61 6d65 5f64 6963  tance(rename_dic
-0001d420: 742c 2064 6963 7429 3a0d 0a20 2020 2020  t, dict):..     
-0001d430: 2020 2020 2020 2069 6620 6c65 6e28 7365         if len(se
-0001d440: 7428 7265 6e61 6d65 5f64 6963 742e 7661  t(rename_dict.va
-0001d450: 6c75 6573 2829 2929 203c 206c 656e 2873  lues())) < len(s
-0001d460: 6574 2872 656e 616d 655f 6469 6374 2929  et(rename_dict))
-0001d470: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001d480: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
-0001d490: 726f 7228 2243 616e 6e6f 7420 7265 6e61  ror("Cannot rena
-0001d4a0: 6d65 206d 756c 7469 706c 6520 636f 6c75  me multiple colu
-0001d4b0: 6d6e 7320 746f 2073 616d 6520 636f 6c75  mns to same colu
-0001d4c0: 6d6e 206e 616d 652e 2229 0d0a 2020 2020  mn name.")..    
-0001d4d0: 2020 2020 2020 2020 6966 206e 6f74 2028          if not (
-0001d4e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001d4f0: 2020 616c 6c28 6973 696e 7374 616e 6365    all(isinstance
-0001d500: 285f 6b2c 2028 7374 722c 2062 7974 6573  (_k, (str, bytes
-0001d510: 2929 2066 6f72 205f 6b20 696e 2072 656e  )) for _k in ren
-0001d520: 616d 655f 6469 6374 290d 0a20 2020 2020  ame_dict)..     
-0001d530: 2020 2020 2020 2020 2020 2061 6e64 2061             and a
-0001d540: 6c6c 2869 7369 6e73 7461 6e63 6528 5f6b  ll(isinstance(_k
-0001d550: 2c20 2873 7472 2c20 6279 7465 7329 2920  , (str, bytes)) 
-0001d560: 666f 7220 5f6b 2069 6e20 7265 6e61 6d65  for _k in rename
-0001d570: 5f64 6963 742e 7661 6c75 6573 2829 290d  _dict.values()).
-0001d580: 0a20 2020 2020 2020 2020 2020 2029 3a0d  .            ):.
-0001d590: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001d5a0: 2072 6169 7365 2054 7970 6545 7272 6f72   raise TypeError
-0001d5b0: 2822 4e61 6d65 206d 6170 206d 7573 7420  ("Name map must 
-0001d5c0: 6265 2061 2064 6963 7469 6f6e 6172 7920  be a dictionary 
-0001d5d0: 6f66 2073 7472 696e 6720 6964 7320 746f  of string ids to
-0001d5e0: 2073 7472 696e 6720 6964 732e 2229 0d0a   string ids.")..
-0001d5f0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-0001d600: 656e 2873 6574 2872 656e 616d 655f 6469  en(set(rename_di
-0001d610: 6374 2e76 616c 7565 7328 2929 2026 2073  ct.values()) & s
-0001d620: 6574 2873 656c 6629 293a 0d0a 2020 2020  et(self)):..    
-0001d630: 2020 2020 2020 2020 2020 2020 7265 6e61              rena
-0001d640: 6d65 5f64 6963 742c 2073 7761 7073 203d  me_dict, swaps =
-0001d650: 2073 656c 662e 5f73 6166 655f 7265 6f72   self._safe_reor
-0001d660: 6465 7269 6e67 5f6f 665f 7265 6e61 6d65  dering_of_rename
-0001d670: 7328 7265 6e61 6d65 5f64 6963 7429 0d0a  s(rename_dict)..
-0001d680: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0001d690: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001d6a0: 2020 2073 7761 7073 203d 205b 5d0d 0a20     swaps = [].. 
-0001d6b0: 2020 2020 2020 2020 2020 2066 6f72 206f             for o
-0001d6c0: 6c64 2c20 6e65 7720 696e 2072 656e 616d  ld, new in renam
-0001d6d0: 655f 6469 6374 2e69 7465 6d73 2829 3a0d  e_dict.items():.
-0001d6e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001d6f0: 2073 656c 662e 636f 6c5f 7265 6e61 6d65   self.col_rename
-0001d700: 286f 6c64 2c20 6e65 7729 0d0a 2020 2020  (old, new)..    
-0001d710: 2020 2020 2020 2020 666f 7220 6f6c 642c          for old,
-0001d720: 206e 6577 2069 6e20 7377 6170 733a 0d0a   new in swaps:..
-0001d730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d740: 7365 6c66 2e63 6f6c 5f73 7761 7028 6f6c  self.col_swap(ol
-0001d750: 642c 206e 6577 290d 0a20 2020 2020 2020  d, new)..       
-0001d760: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-0001d770: 2020 2020 7261 6973 6520 5479 7065 4572      raise TypeEr
-0001d780: 726f 7228 224e 616d 6520 6d61 7020 6d75  ror("Name map mu
-0001d790: 7374 2062 6520 6120 6469 6374 696f 6e61  st be a dictiona
-0001d7a0: 7279 2e20 5573 6520 7265 6e61 6d65 5f63  ry. Use rename_c
-0001d7b0: 6f6c 2066 6f72 2073 696e 676c 652d 636f  ol for single-co
-0001d7c0: 6c75 6d6e 2072 656e 616d 696e 672e 2229  lumn renaming.")
-0001d7d0: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+0001cf00: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2063  -----..    def c
+0001cf10: 6f6c 5f6d 6170 2873 656c 662c 2072 656e  ol_map(self, ren
+0001cf20: 616d 655f 6469 6374 3a20 4d61 7070 696e  ame_dict: Mappin
+0001cf30: 675b 7374 722c 2073 7472 5d29 202d 3e20  g[str, str]) -> 
+0001cf40: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2022  None:..        "
+0001cf50: 2222 0d0a 2020 2020 2020 2020 5265 6e61  ""..        Rena
+0001cf60: 6d65 2063 6f6c 756d 6e73 2061 6e64 2072  me columns and r
+0001cf70: 652d 6172 7261 6e67 6520 6e61 6d65 7320  e-arrange names 
+0001cf80: 6f66 2063 6f6c 756d 6e73 2062 6173 6564  of columns based
+0001cf90: 206f 6e20 7468 6520 7275 6c65 7320 7365   on the rules se
+0001cfa0: 7420 666f 7274 6820 696e 2074 6865 2073  t forth in the s
+0001cfb0: 7570 706c 6965 6420 6469 6374 696f 6e61  upplied dictiona
+0001cfc0: 7279 2e0d 0a0d 0a20 2020 2020 2020 2050  ry.....        P
+0001cfd0: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
+0001cfe0: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
+0001cff0: 2020 2020 2020 2072 656e 616d 655f 6469         rename_di
+0001d000: 6374 203a 2064 6963 740d 0a20 2020 2020  ct : dict..     
+0001d010: 2020 2020 2020 2044 6963 7469 6f6e 6172         Dictionar
+0001d020: 7920 6465 6669 6e69 6e67 2061 2072 656d  y defining a rem
+0001d030: 6170 7069 6e67 206f 6620 2873 6f6d 652f  apping of (some/
+0001d040: 616c 6c29 2063 6f6c 756d 6e20 6e61 6d65  all) column name
+0001d050: 732e 0d0a 0d0a 2020 2020 2020 2020 5265  s.....        Re
+0001d060: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
+0001d070: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0001d080: 4e6f 6e65 0d0a 0d0a 2020 2020 2020 2020  None....        
+0001d090: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
+0001d0a0: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+0001d0b0: 2020 2020 3e3e 3e20 2354 4f44 4f20 4361      >>> #TODO Ca
+0001d0c0: 6c6c 206e 702e 7261 6e64 6f6d 2e73 6565  ll np.random.see
+0001d0d0: 6428 3132 3334 3529 2068 6572 6520 746f  d(12345) here to
+0001d0e0: 206d 616b 6520 7468 6520 6578 616d 706c   make the exampl
+0001d0f0: 6520 6f75 7470 7574 2064 6574 6572 6d69  e output determi
+0001d100: 6e69 7374 6963 0d0a 2020 2020 2020 2020  nistic..        
+0001d110: 3e3e 3e20 6473 203d 2072 742e 4461 7461  >>> ds = rt.Data
+0001d120: 7365 7428 7b27 636f 6c5f 272b 7374 7228  set({'col_'+str(
+0001d130: 6929 3a20 6e70 2e72 616e 646f 6d2e 7261  i): np.random.ra
+0001d140: 6e64 2835 2920 666f 7220 6920 696e 2072  nd(5) for i in r
+0001d150: 616e 6765 2835 297d 290d 0a20 2020 2020  ange(5)})..     
+0001d160: 2020 203e 3e3e 2064 732e 636f 6c5f 6d61     >>> ds.col_ma
+0001d170: 7028 7b27 636f 6c5f 3127 3a27 4141 4127  p({'col_1':'AAA'
+0001d180: 2c20 2763 6f6c 5f32 273a 2742 4242 277d  , 'col_2':'BBB'}
+0001d190: 290d 0a20 2020 2020 2020 203e 3e3e 2064  )..        >>> d
+0001d1a0: 730d 0a20 2020 2020 2020 2023 2020 2063  s..        #   c
+0001d1b0: 6f6c 5f30 2020 2020 4141 4120 2020 2042  ol_0    AAA    B
+0001d1c0: 4242 2020 2063 6f6c 5f33 2020 2063 6f6c  BB   col_3   col
+0001d1d0: 5f34 0d0a 2020 2020 2020 2020 2d20 2020  _4..        -   
+0001d1e0: 2d2d 2d2d 2d20 2020 2d2d 2d2d 2020 202d  -----   ----   -
+0001d1f0: 2d2d 2d20 2020 2d2d 2d2d 2d20 2020 2d2d  ---   -----   --
+0001d200: 2d2d 2d0d 0a20 2020 2020 2020 2030 2020  ---..        0  
+0001d210: 2020 302e 3535 2020 2030 2e32 3120 2020    0.55   0.21   
+0001d220: 302e 3237 2020 2020 302e 3835 2020 2020  0.27    0.85    
+0001d230: 302e 3033 0d0a 2020 2020 2020 2020 3120  0.03..        1 
+0001d240: 2020 2030 2e37 3720 2020 302e 3735 2020     0.77   0.75  
+0001d250: 2030 2e36 3520 2020 2030 2e39 3720 2020   0.65    0.97   
+0001d260: 2030 2e32 340d 0a20 2020 2020 2020 2032   0.24..        2
+0001d270: 2020 2020 302e 3039 2020 2030 2e30 3720      0.09   0.07 
+0001d280: 2020 302e 3430 2020 2020 302e 3831 2020    0.40    0.81  
+0001d290: 2020 302e 3632 0d0a 2020 2020 2020 2020    0.62..        
+0001d2a0: 3320 2020 2030 2e35 3020 2020 302e 3933  3    0.50   0.93
+0001d2b0: 2020 2030 2e39 3820 2020 2030 2e39 3920     0.98    0.99 
+0001d2c0: 2020 2030 2e39 390d 0a20 2020 2020 2020     0.99..       
+0001d2d0: 2034 2020 2020 302e 3430 2020 2030 2e34   4    0.40   0.4
+0001d2e0: 3520 2020 302e 3533 2020 2020 302e 3439  5   0.53    0.49
+0001d2f0: 2020 2020 302e 3736 0d0a 2020 2020 2020      0.76..      
+0001d300: 2020 2222 220d 0a20 2020 2020 2020 2069    """..        i
+0001d310: 6620 7365 6c66 2e69 735f 6c6f 636b 6564  f self.is_locked
+0001d320: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
+0001d330: 2072 6169 7365 2041 7474 7269 6275 7465   raise Attribute
+0001d340: 4572 726f 7228 224e 6f74 2061 6c6c 6f77  Error("Not allow
+0001d350: 6564 2074 6f20 6361 6c6c 2063 6f6c 5f6d  ed to call col_m
+0001d360: 6170 2829 206f 6e20 6c6f 636b 6564 206f  ap() on locked o
+0001d370: 626a 6563 742e 2229 0d0a 2020 2020 2020  bject.")..      
+0001d380: 2020 2320 7468 6520 6b65 7973 206f 6620    # the keys of 
+0001d390: 7265 6e61 6d65 5f64 6963 7420 6172 6520  rename_dict are 
+0001d3a0: 7468 6520 6f6c 6420 636f 6c75 6d6e 206e  the old column n
+0001d3b0: 616d 6573 0d0a 2020 2020 2020 2020 2320  ames..        # 
+0001d3c0: 7468 6520 7661 6c75 6573 206f 6620 7265  the values of re
+0001d3d0: 6e61 6d65 5f64 6963 7420 6172 6520 7468  name_dict are th
+0001d3e0: 6520 6e65 7720 636f 6c75 6d6e 206e 616d  e new column nam
+0001d3f0: 6573 0d0a 2020 2020 2020 2020 6966 2069  es..        if i
+0001d400: 7369 6e73 7461 6e63 6528 7265 6e61 6d65  sinstance(rename
+0001d410: 5f64 6963 742c 2064 6963 7429 3a0d 0a20  _dict, dict):.. 
+0001d420: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
+0001d430: 6e28 7365 7428 7265 6e61 6d65 5f64 6963  n(set(rename_dic
+0001d440: 742e 7661 6c75 6573 2829 2929 203c 206c  t.values())) < l
+0001d450: 656e 2873 6574 2872 656e 616d 655f 6469  en(set(rename_di
+0001d460: 6374 2929 3a0d 0a20 2020 2020 2020 2020  ct)):..         
+0001d470: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+0001d480: 7565 4572 726f 7228 2243 616e 6e6f 7420  ueError("Cannot 
+0001d490: 7265 6e61 6d65 206d 756c 7469 706c 6520  rename multiple 
+0001d4a0: 636f 6c75 6d6e 7320 746f 2073 616d 6520  columns to same 
+0001d4b0: 636f 6c75 6d6e 206e 616d 652e 2229 0d0a  column name.")..
+0001d4c0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+0001d4d0: 6f74 2028 0d0a 2020 2020 2020 2020 2020  ot (..          
+0001d4e0: 2020 2020 2020 616c 6c28 6973 696e 7374        all(isinst
+0001d4f0: 616e 6365 285f 6b2c 2028 7374 722c 2062  ance(_k, (str, b
+0001d500: 7974 6573 2929 2066 6f72 205f 6b20 696e  ytes)) for _k in
+0001d510: 2072 656e 616d 655f 6469 6374 290d 0a20   rename_dict).. 
+0001d520: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0001d530: 6e64 2061 6c6c 2869 7369 6e73 7461 6e63  nd all(isinstanc
+0001d540: 6528 5f6b 2c20 2873 7472 2c20 6279 7465  e(_k, (str, byte
+0001d550: 7329 2920 666f 7220 5f6b 2069 6e20 7265  s)) for _k in re
+0001d560: 6e61 6d65 5f64 6963 742e 7661 6c75 6573  name_dict.values
+0001d570: 2829 290d 0a20 2020 2020 2020 2020 2020  ())..           
+0001d580: 2029 3a0d 0a20 2020 2020 2020 2020 2020   ):..           
+0001d590: 2020 2020 2072 6169 7365 2054 7970 6545       raise TypeE
+0001d5a0: 7272 6f72 2822 4e61 6d65 206d 6170 206d  rror("Name map m
+0001d5b0: 7573 7420 6265 2061 2064 6963 7469 6f6e  ust be a diction
+0001d5c0: 6172 7920 6f66 2073 7472 696e 6720 6964  ary of string id
+0001d5d0: 7320 746f 2073 7472 696e 6720 6964 732e  s to string ids.
+0001d5e0: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+0001d5f0: 6966 206c 656e 2873 6574 2872 656e 616d  if len(set(renam
+0001d600: 655f 6469 6374 2e76 616c 7565 7328 2929  e_dict.values())
+0001d610: 2026 2073 6574 2873 656c 6629 293a 0d0a   & set(self)):..
+0001d620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d630: 7265 6e61 6d65 5f64 6963 742c 2073 7761  rename_dict, swa
+0001d640: 7073 203d 2073 656c 662e 5f73 6166 655f  ps = self._safe_
+0001d650: 7265 6f72 6465 7269 6e67 5f6f 665f 7265  reordering_of_re
+0001d660: 6e61 6d65 7328 7265 6e61 6d65 5f64 6963  names(rename_dic
+0001d670: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
+0001d680: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+0001d690: 2020 2020 2020 2073 7761 7073 203d 205b         swaps = [
+0001d6a0: 5d0d 0a20 2020 2020 2020 2020 2020 2066  ]..            f
+0001d6b0: 6f72 206f 6c64 2c20 6e65 7720 696e 2072  or old, new in r
+0001d6c0: 656e 616d 655f 6469 6374 2e69 7465 6d73  ename_dict.items
+0001d6d0: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
+0001d6e0: 2020 2020 2073 656c 662e 636f 6c5f 7265       self.col_re
+0001d6f0: 6e61 6d65 286f 6c64 2c20 6e65 7729 0d0a  name(old, new)..
+0001d700: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+0001d710: 6f6c 642c 206e 6577 2069 6e20 7377 6170  old, new in swap
+0001d720: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+0001d730: 2020 2020 7365 6c66 2e63 6f6c 5f73 7761      self.col_swa
+0001d740: 7028 6f6c 642c 206e 6577 290d 0a20 2020  p(old, new)..   
+0001d750: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0001d760: 2020 2020 2020 2020 7261 6973 6520 5479          raise Ty
+0001d770: 7065 4572 726f 7228 224e 616d 6520 6d61  peError("Name ma
+0001d780: 7020 6d75 7374 2062 6520 6120 6469 6374  p must be a dict
+0001d790: 696f 6e61 7279 2e20 5573 6520 7265 6e61  ionary. Use rena
+0001d7a0: 6d65 5f63 6f6c 2066 6f72 2073 696e 676c  me_col for singl
+0001d7b0: 652d 636f 6c75 6d6e 2072 656e 616d 696e  e-column renamin
+0001d7c0: 672e 2229 0d0a 0d0a 2020 2020 2320 2d2d  g.")....    # --
+0001d7d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001d7e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001d7f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001d800: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001d810: 2d0d 0a20 2020 2064 6566 205f 7361 6665  -..    def _safe
-0001d820: 5f72 656f 7264 6572 696e 675f 6f66 5f72  _reordering_of_r
-0001d830: 656e 616d 6573 2873 656c 662c 206f 7269  enames(self, ori
-0001d840: 675f 6469 6374 293a 0d0a 2020 2020 2020  g_dict):..      
-0001d850: 2020 2320 6672 6f6d 636f 6c73 203d 2073    # fromcols = s
-0001d860: 6574 286f 7269 675f 6469 6374 290d 0a20  et(orig_dict).. 
-0001d870: 2020 2020 2020 2023 2074 6f63 6f6c 7320         # tocols 
-0001d880: 3d20 7365 7428 6f72 6967 5f64 6963 742e  = set(orig_dict.
-0001d890: 7661 6c75 6573 2829 290d 0a20 2020 2020  values())..     
-0001d8a0: 2020 2070 726f 7465 6374 6564 203d 2073     protected = s
-0001d8b0: 6574 2873 656c 6629 0d0a 2020 2020 2020  et(self)..      
-0001d8c0: 2020 7265 6e61 6d65 5f64 6963 7420 3d20    rename_dict = 
-0001d8d0: 7b7d 0d0a 2020 2020 2020 2020 7377 6170  {}..        swap
-0001d8e0: 7320 3d20 5b5d 0d0a 2020 2020 2020 2020  s = []..        
-0001d8f0: 7472 616e 7369 7469 6f6e 7320 3d20 5b5d  transitions = []
-0001d900: 0d0a 2020 2020 2020 2020 7365 656e 203d  ..        seen =
-0001d910: 2073 6574 2829 0d0a 2020 2020 2020 2020   set()..        
-0001d920: 666f 7220 5f6f 2c20 5f6e 2069 6e20 6f72  for _o, _n in or
-0001d930: 6967 5f64 6963 742e 6974 656d 7328 293a  ig_dict.items():
-0001d940: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-0001d950: 205f 6f20 696e 2073 6565 6e3a 0d0a 2020   _o in seen:..  
-0001d960: 2020 2020 2020 2020 2020 2020 2020 636f                co
-0001d970: 6e74 696e 7565 0d0a 2020 2020 2020 2020  ntinue..        
-0001d980: 2020 2020 6966 205f 6f20 6e6f 7420 696e      if _o not in
-0001d990: 2070 726f 7465 6374 6564 3a20 2023 206e   protected:  # n
-0001d9a0: 6f2d 6f70 730d 0a20 2020 2020 2020 2020  o-ops..         
-0001d9b0: 2020 2020 2020 2073 6565 6e2e 6164 6428         seen.add(
-0001d9c0: 5f6f 290d 0a20 2020 2020 2020 2020 2020  _o)..           
-0001d9d0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-0001d9e0: 2020 2020 2020 2020 7365 7164 2c20 6973          seqd, is
-0001d9f0: 5f63 7963 6c65 203d 2073 656c 662e 5f67  _cycle = self._g
-0001da00: 6574 5f73 6571 286f 7269 675f 6469 6374  et_seq(orig_dict
-0001da10: 2c20 7072 6f74 6563 7465 642c 205f 6f29  , protected, _o)
-0001da20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001da30: 2020 6966 2069 735f 6379 636c 653a 0d0a    if is_cycle:..
-0001da40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001da50: 2020 2020 7377 6170 732e 6170 7065 6e64      swaps.append
-0001da60: 2828 6c69 7374 2873 6571 6429 2c20 6c69  ((list(seqd), li
-0001da70: 7374 2873 6571 642e 7661 6c75 6573 2829  st(seqd.values()
-0001da80: 2929 290d 0a20 2020 2020 2020 2020 2020  )))..           
-0001da90: 2020 2020 2020 2020 2073 6565 6e2e 7570           seen.up
-0001daa0: 6461 7465 2873 6571 6429 0d0a 2020 2020  date(seqd)..    
-0001dab0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0001dac0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001dad0: 2020 2020 2020 2074 7261 6e73 6974 696f         transitio
-0001dae0: 6e73 2e61 7070 656e 6428 7365 7164 2920  ns.append(seqd) 
-0001daf0: 2023 206e 6f74 2079 6574 2074 6f20 6265   # not yet to be
-0001db00: 206d 6172 6b65 6420 6173 2073 6565 6e0d   marked as seen.
-0001db10: 0a20 2020 2020 2020 2074 7261 6e73 6974  .        transit
-0001db20: 696f 6e73 2e73 6f72 7428 6b65 793d 6c65  ions.sort(key=le
-0001db30: 6e2c 2072 6576 6572 7365 3d54 7275 6529  n, reverse=True)
-0001db40: 0d0a 2020 2020 2020 2020 7768 696c 6520  ..        while 
-0001db50: 7472 616e 7369 7469 6f6e 733a 0d0a 2020  transitions:..  
-0001db60: 2020 2020 2020 2020 2020 7472 616e 7320            trans 
-0001db70: 3d20 7472 616e 7369 7469 6f6e 732e 706f  = transitions.po
-0001db80: 7028 3029 0d0a 2020 2020 2020 2020 2020  p(0)..          
-0001db90: 2020 6966 206c 656e 2873 6565 6e2e 696e    if len(seen.in
-0001dba0: 7465 7273 6563 7469 6f6e 2874 7261 6e73  tersection(trans
-0001dbb0: 2929 203d 3d20 303a 0d0a 2020 2020 2020  )) == 0:..      
-0001dbc0: 2020 2020 2020 2020 2020 2320 6d75 7374            # must
-0001dbd0: 2069 6e73 6572 7420 696e 2072 6576 6572   insert in rever
-0001dbe0: 7365 6420 6f72 6465 7220 6275 7420 6361  sed order but ca
-0001dbf0: 6e6e 6f74 2072 6576 6572 7365 2064 6963  nnot reverse dic
-0001dc00: 7420 6974 6572 6174 6f72 730d 0a20 2020  t iterators..   
-0001dc10: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-0001dc20: 205f 6f2c 205f 6e20 696e 2072 6576 6572   _o, _n in rever
-0001dc30: 7365 6428 6c69 7374 2874 7261 6e73 2e69  sed(list(trans.i
-0001dc40: 7465 6d73 2829 2929 3a0d 0a20 2020 2020  tems())):..     
-0001dc50: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001dc60: 656e 616d 655f 6469 6374 5b5f 6f5d 203d  ename_dict[_o] =
-0001dc70: 205f 6e0d 0a20 2020 2020 2020 2020 2020   _n..           
-0001dc80: 2020 2020 2020 2020 2073 6565 6e2e 6164           seen.ad
-0001dc90: 6428 5f6f 290d 0a20 2020 2020 2020 2069  d(_o)..        i
-0001dca0: 6620 6c65 6e28 7365 656e 2920 213d 206c  f len(seen) != l
-0001dcb0: 656e 286f 7269 675f 6469 6374 293a 0d0a  en(orig_dict):..
-0001dcc0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0001dcd0: 6520 5661 6c75 6545 7272 6f72 2822 4361  e ValueError("Ca
-0001dce0: 6e6e 6f74 2072 656e 616d 6520 636f 6c75  nnot rename colu
-0001dcf0: 6d6e 7320 746f 2065 7874 616e 7420 636f  mns to extant co
-0001dd00: 6c75 6d6e 206e 616d 6573 2e22 290d 0a20  lumn names.").. 
-0001dd10: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-0001dd20: 6e61 6d65 5f64 6963 742c 2073 7761 7073  name_dict, swaps
-0001dd30: 0d0a 0d0a 2020 2020 4073 7461 7469 636d  ....    @staticm
-0001dd40: 6574 686f 640d 0a20 2020 2064 6566 205f  ethod..    def _
-0001dd50: 6765 745f 7365 7128 6d61 702c 2070 726f  get_seq(map, pro
-0001dd60: 7465 6374 6564 2c20 7374 6172 7429 3a0d  tected, start):.
-0001dd70: 0a20 2020 2020 2020 2073 6571 6420 3d20  .        seqd = 
-0001dd80: 7b7d 0d0a 2020 2020 2020 2020 5f66 726f  {}..        _fro
-0001dd90: 6d20 3d20 7374 6172 740d 0a20 2020 2020  m = start..     
-0001dda0: 2020 2077 6869 6c65 205f 6672 6f6d 206e     while _from n
-0001ddb0: 6f74 2069 6e20 7365 7164 3a0d 0a20 2020  ot in seqd:..   
-0001ddc0: 2020 2020 2020 2020 205f 746f 203d 206d           _to = m
-0001ddd0: 6170 5b5f 6672 6f6d 5d0d 0a20 2020 2020  ap[_from]..     
-0001dde0: 2020 2020 2020 2073 6571 645b 5f66 726f         seqd[_fro
-0001ddf0: 6d5d 203d 205f 746f 0d0a 2020 2020 2020  m] = _to..      
-0001de00: 2020 2020 2020 6966 205f 746f 206e 6f74        if _to not
-0001de10: 2069 6e20 7072 6f74 6563 7465 643a 0d0a   in protected:..
-0001de20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001de30: 7265 7475 726e 2073 6571 642c 2046 616c  return seqd, Fal
-0001de40: 7365 0d0a 2020 2020 2020 2020 2020 2020  se..            
-0001de50: 5f66 726f 6d20 3d20 5f74 6f0d 0a20 2020  _from = _to..   
-0001de60: 2020 2020 2072 6574 7572 6e20 7365 7164       return seqd
-0001de70: 2c20 5472 7565 0d0a 0d0a 2020 2020 2320  , True....    # 
+0001d800: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 205f  -----..    def _
+0001d810: 7361 6665 5f72 656f 7264 6572 696e 675f  safe_reordering_
+0001d820: 6f66 5f72 656e 616d 6573 2873 656c 662c  of_renames(self,
+0001d830: 206f 7269 675f 6469 6374 293a 0d0a 2020   orig_dict):..  
+0001d840: 2020 2020 2020 2320 6672 6f6d 636f 6c73        # fromcols
+0001d850: 203d 2073 6574 286f 7269 675f 6469 6374   = set(orig_dict
+0001d860: 290d 0a20 2020 2020 2020 2023 2074 6f63  )..        # toc
+0001d870: 6f6c 7320 3d20 7365 7428 6f72 6967 5f64  ols = set(orig_d
+0001d880: 6963 742e 7661 6c75 6573 2829 290d 0a20  ict.values()).. 
+0001d890: 2020 2020 2020 2070 726f 7465 6374 6564         protected
+0001d8a0: 203d 2073 6574 2873 656c 6629 0d0a 2020   = set(self)..  
+0001d8b0: 2020 2020 2020 7265 6e61 6d65 5f64 6963        rename_dic
+0001d8c0: 7420 3d20 7b7d 0d0a 2020 2020 2020 2020  t = {}..        
+0001d8d0: 7377 6170 7320 3d20 5b5d 0d0a 2020 2020  swaps = []..    
+0001d8e0: 2020 2020 7472 616e 7369 7469 6f6e 7320      transitions 
+0001d8f0: 3d20 5b5d 0d0a 2020 2020 2020 2020 7365  = []..        se
+0001d900: 656e 203d 2073 6574 2829 0d0a 2020 2020  en = set()..    
+0001d910: 2020 2020 666f 7220 5f6f 2c20 5f6e 2069      for _o, _n i
+0001d920: 6e20 6f72 6967 5f64 6963 742e 6974 656d  n orig_dict.item
+0001d930: 7328 293a 0d0a 2020 2020 2020 2020 2020  s():..          
+0001d940: 2020 6966 205f 6f20 696e 2073 6565 6e3a    if _o in seen:
+0001d950: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001d960: 2020 636f 6e74 696e 7565 0d0a 2020 2020    continue..    
+0001d970: 2020 2020 2020 2020 6966 205f 6f20 6e6f          if _o no
+0001d980: 7420 696e 2070 726f 7465 6374 6564 3a20  t in protected: 
+0001d990: 2023 206e 6f2d 6f70 730d 0a20 2020 2020   # no-ops..     
+0001d9a0: 2020 2020 2020 2020 2020 2073 6565 6e2e             seen.
+0001d9b0: 6164 6428 5f6f 290d 0a20 2020 2020 2020  add(_o)..       
+0001d9c0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0001d9d0: 2020 2020 2020 2020 2020 2020 7365 7164              seqd
+0001d9e0: 2c20 6973 5f63 7963 6c65 203d 2073 656c  , is_cycle = sel
+0001d9f0: 662e 5f67 6574 5f73 6571 286f 7269 675f  f._get_seq(orig_
+0001da00: 6469 6374 2c20 7072 6f74 6563 7465 642c  dict, protected,
+0001da10: 205f 6f29 0d0a 2020 2020 2020 2020 2020   _o)..          
+0001da20: 2020 2020 2020 6966 2069 735f 6379 636c        if is_cycl
+0001da30: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0001da40: 2020 2020 2020 2020 7377 6170 732e 6170          swaps.ap
+0001da50: 7065 6e64 2828 6c69 7374 2873 6571 6429  pend((list(seqd)
+0001da60: 2c20 6c69 7374 2873 6571 642e 7661 6c75  , list(seqd.valu
+0001da70: 6573 2829 2929 290d 0a20 2020 2020 2020  es())))..       
+0001da80: 2020 2020 2020 2020 2020 2020 2073 6565               see
+0001da90: 6e2e 7570 6461 7465 2873 6571 6429 0d0a  n.update(seqd)..
+0001daa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dab0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+0001dac0: 2020 2020 2020 2020 2020 2074 7261 6e73             trans
+0001dad0: 6974 696f 6e73 2e61 7070 656e 6428 7365  itions.append(se
+0001dae0: 7164 2920 2023 206e 6f74 2079 6574 2074  qd)  # not yet t
+0001daf0: 6f20 6265 206d 6172 6b65 6420 6173 2073  o be marked as s
+0001db00: 6565 6e0d 0a20 2020 2020 2020 2074 7261  een..        tra
+0001db10: 6e73 6974 696f 6e73 2e73 6f72 7428 6b65  nsitions.sort(ke
+0001db20: 793d 6c65 6e2c 2072 6576 6572 7365 3d54  y=len, reverse=T
+0001db30: 7275 6529 0d0a 2020 2020 2020 2020 7768  rue)..        wh
+0001db40: 696c 6520 7472 616e 7369 7469 6f6e 733a  ile transitions:
+0001db50: 0d0a 2020 2020 2020 2020 2020 2020 7472  ..            tr
+0001db60: 616e 7320 3d20 7472 616e 7369 7469 6f6e  ans = transition
+0001db70: 732e 706f 7028 3029 0d0a 2020 2020 2020  s.pop(0)..      
+0001db80: 2020 2020 2020 6966 206c 656e 2873 6565        if len(see
+0001db90: 6e2e 696e 7465 7273 6563 7469 6f6e 2874  n.intersection(t
+0001dba0: 7261 6e73 2929 203d 3d20 303a 0d0a 2020  rans)) == 0:..  
+0001dbb0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0001dbc0: 6d75 7374 2069 6e73 6572 7420 696e 2072  must insert in r
+0001dbd0: 6576 6572 7365 6420 6f72 6465 7220 6275  eversed order bu
+0001dbe0: 7420 6361 6e6e 6f74 2072 6576 6572 7365  t cannot reverse
+0001dbf0: 2064 6963 7420 6974 6572 6174 6f72 730d   dict iterators.
+0001dc00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001dc10: 2066 6f72 205f 6f2c 205f 6e20 696e 2072   for _o, _n in r
+0001dc20: 6576 6572 7365 6428 6c69 7374 2874 7261  eversed(list(tra
+0001dc30: 6e73 2e69 7465 6d73 2829 2929 3a0d 0a20  ns.items())):.. 
+0001dc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dc50: 2020 2072 656e 616d 655f 6469 6374 5b5f     rename_dict[_
+0001dc60: 6f5d 203d 205f 6e0d 0a20 2020 2020 2020  o] = _n..       
+0001dc70: 2020 2020 2020 2020 2020 2020 2073 6565               see
+0001dc80: 6e2e 6164 6428 5f6f 290d 0a20 2020 2020  n.add(_o)..     
+0001dc90: 2020 2069 6620 6c65 6e28 7365 656e 2920     if len(seen) 
+0001dca0: 213d 206c 656e 286f 7269 675f 6469 6374  != len(orig_dict
+0001dcb0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0001dcc0: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
+0001dcd0: 2822 4361 6e6e 6f74 2072 656e 616d 6520  ("Cannot rename 
+0001dce0: 636f 6c75 6d6e 7320 746f 2065 7874 616e  columns to extan
+0001dcf0: 7420 636f 6c75 6d6e 206e 616d 6573 2e22  t column names."
+0001dd00: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+0001dd10: 6e20 7265 6e61 6d65 5f64 6963 742c 2073  n rename_dict, s
+0001dd20: 7761 7073 0d0a 0d0a 2020 2020 4073 7461  waps....    @sta
+0001dd30: 7469 636d 6574 686f 640d 0a20 2020 2064  ticmethod..    d
+0001dd40: 6566 205f 6765 745f 7365 7128 6d61 702c  ef _get_seq(map,
+0001dd50: 2070 726f 7465 6374 6564 2c20 7374 6172   protected, star
+0001dd60: 7429 3a0d 0a20 2020 2020 2020 2073 6571  t):..        seq
+0001dd70: 6420 3d20 7b7d 0d0a 2020 2020 2020 2020  d = {}..        
+0001dd80: 5f66 726f 6d20 3d20 7374 6172 740d 0a20  _from = start.. 
+0001dd90: 2020 2020 2020 2077 6869 6c65 205f 6672         while _fr
+0001dda0: 6f6d 206e 6f74 2069 6e20 7365 7164 3a0d  om not in seqd:.
+0001ddb0: 0a20 2020 2020 2020 2020 2020 205f 746f  .            _to
+0001ddc0: 203d 206d 6170 5b5f 6672 6f6d 5d0d 0a20   = map[_from].. 
+0001ddd0: 2020 2020 2020 2020 2020 2073 6571 645b             seqd[
+0001dde0: 5f66 726f 6d5d 203d 205f 746f 0d0a 2020  _from] = _to..  
+0001ddf0: 2020 2020 2020 2020 2020 6966 205f 746f            if _to
+0001de00: 206e 6f74 2069 6e20 7072 6f74 6563 7465   not in protecte
+0001de10: 643a 0d0a 2020 2020 2020 2020 2020 2020  d:..            
+0001de20: 2020 2020 7265 7475 726e 2073 6571 642c      return seqd,
+0001de30: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
+0001de40: 2020 2020 5f66 726f 6d20 3d20 5f74 6f0d      _from = _to.
+0001de50: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0001de60: 7365 7164 2c20 5472 7565 0d0a 0d0a 2020  seqd, True....  
+0001de70: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
 0001de80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001de90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001dea0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001deb0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
-0001dec0: 2063 6f6c 5f61 6464 5f70 7265 6669 7828   col_add_prefix(
-0001ded0: 7365 6c66 2c20 7072 6566 6978 3a20 7374  self, prefix: st
-0001dee0: 7229 202d 3e20 4e6f 6e65 3a0d 0a20 2020  r) -> None:..   
-0001def0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-0001df00: 2020 4164 6420 7468 6520 7361 6d65 2070    Add the same p
-0001df10: 7265 6669 7820 746f 2061 6c6c 2069 7465  refix to all ite
-0001df20: 6d73 2069 6e20 7468 6520 5374 7275 6374  ms in the Struct
-0001df30: 2f44 6174 6173 6574 2e0d 0a0d 0a20 2020  /Dataset.....   
-0001df40: 2020 2020 2052 6174 6865 7220 7468 616e       Rather than
-0001df50: 2072 656e 616d 696e 6720 7468 6520 636f   renaming the co
-0001df60: 6c75 6d6e 7320 696e 2061 2063 6f6c 5f72  lumns in a col_r
-0001df70: 656e 616d 6520 6c6f 6f70 202d 2077 6869  ename loop - whi
-0001df80: 6368 2077 6f75 6c64 2068 6176 6520 746f  ch would have to
-0001df90: 2072 6562 7569 6c64 2074 6865 2075 6e64   rebuild the und
-0001dfa0: 6572 6c79 696e 6720 6469 6374 696f 6e61  erlying dictiona
-0001dfb0: 7279 204e 2074 696d 6573 2c0d 0a20 2020  ry N times,..   
-0001dfc0: 2020 2020 2074 6869 7320 636c 6561 7273       this clears
-0001dfd0: 2074 6865 206f 7269 6769 6e61 6c20 6469   the original di
-0001dfe0: 6374 696f 6e61 7279 2c20 616e 6420 7265  ctionary, and re
-0001dff0: 6275 696c 6473 2061 206e 6577 206f 6e65  builds a new one
-0001e000: 206f 6e63 652e 0d0a 2020 2020 2020 2020   once...        
-0001e010: 4c61 6265 6c20 636f 6c75 6d6e 7320 616e  Label columns an
-0001e020: 6420 736f 7274 6279 2063 6f6c 756d 6e73  d sortby columns
-0001e030: 2077 696c 6c20 616c 736f 2062 6520 6669   will also be fi
-0001e040: 7865 6420 746f 206d 6174 6368 2074 6865  xed to match the
-0001e050: 206e 6577 206e 616d 6573 2e0d 0a0d 0a20   new names..... 
-0001e060: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
-0001e070: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-0001e080: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2070  -----..        p
-0001e090: 7265 6669 7820 3a20 7374 720d 0a20 2020  refix : str..   
-0001e0a0: 2020 2020 2020 2020 2053 7472 696e 6720           String 
-0001e0b0: 746f 2061 6464 2062 6566 6f72 6520 6576  to add before ev
-0001e0c0: 6572 7920 6561 6368 2069 7465 6d20 6e61  ery each item na
-0001e0d0: 6d65 0d0a 0d0a 2020 2020 2020 2020 5265  me....        Re
-0001e0e0: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
-0001e0f0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0001e100: 4e6f 6e65 0d0a 0d0a 2020 2020 2020 2020  None....        
-0001e110: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
-0001e120: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-0001e130: 2020 2020 3e3e 3e20 2354 4f44 4f20 4e65      >>> #TODO Ne
-0001e140: 6564 2074 6f20 6361 6c6c 206e 702e 7261  ed to call np.ra
-0001e150: 6e64 6f6d 2e73 6565 6428 3132 3334 3529  ndom.seed(12345)
-0001e160: 2066 6972 7374 2074 6f20 656e 7375 7265   first to ensure
-0001e170: 2065 7861 6d70 6c65 2072 756e 7320 6465   example runs de
-0001e180: 7465 726d 696e 6973 7469 6361 6c6c 790d  terministically.
-0001e190: 0a20 2020 2020 2020 203e 3e3e 2064 7320  .        >>> ds 
-0001e1a0: 3d20 7274 2e44 6174 6173 6574 287b 2763  = rt.Dataset({'c
-0001e1b0: 6f6c 5f27 2b73 7472 2869 293a 6e70 2e72  ol_'+str(i):np.r
-0001e1c0: 616e 646f 6d2e 7261 6e64 2835 2920 666f  andom.rand(5) fo
-0001e1d0: 7220 6920 696e 2072 616e 6765 2835 297d  r i in range(5)}
-0001e1e0: 290d 0a20 2020 2020 2020 203e 3e3e 2064  )..        >>> d
-0001e1f0: 732e 636f 6c5f 6164 645f 7072 6566 6978  s.col_add_prefix
-0001e200: 2827 4e45 575f 2729 0d0a 2020 2020 2020  ('NEW_')..      
-0001e210: 2020 2320 2020 4e45 575f 636f 6c5f 3020    #   NEW_col_0 
-0001e220: 2020 4e45 575f 636f 6c5f 3120 2020 4e45    NEW_col_1   NE
-0001e230: 575f 636f 6c5f 3220 2020 4e45 575f 636f  W_col_2   NEW_co
-0001e240: 6c5f 3320 2020 4e45 575f 636f 6c5f 340d  l_3   NEW_col_4.
-0001e250: 0a20 2020 2020 2020 202d 2020 202d 2d2d  .        -   ---
+0001dea0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
+0001deb0: 2064 6566 2063 6f6c 5f61 6464 5f70 7265   def col_add_pre
+0001dec0: 6669 7828 7365 6c66 2c20 7072 6566 6978  fix(self, prefix
+0001ded0: 3a20 7374 7229 202d 3e20 4e6f 6e65 3a0d  : str) -> None:.
+0001dee0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+0001def0: 2020 2020 2020 4164 6420 7468 6520 7361        Add the sa
+0001df00: 6d65 2070 7265 6669 7820 746f 2061 6c6c  me prefix to all
+0001df10: 2069 7465 6d73 2069 6e20 7468 6520 5374   items in the St
+0001df20: 7275 6374 2f44 6174 6173 6574 2e0d 0a0d  ruct/Dataset....
+0001df30: 0a20 2020 2020 2020 2052 6174 6865 7220  .        Rather 
+0001df40: 7468 616e 2072 656e 616d 696e 6720 7468  than renaming th
+0001df50: 6520 636f 6c75 6d6e 7320 696e 2061 2063  e columns in a c
+0001df60: 6f6c 5f72 656e 616d 6520 6c6f 6f70 202d  ol_rename loop -
+0001df70: 2077 6869 6368 2077 6f75 6c64 2068 6176   which would hav
+0001df80: 6520 746f 2072 6562 7569 6c64 2074 6865  e to rebuild the
+0001df90: 2075 6e64 6572 6c79 696e 6720 6469 6374   underlying dict
+0001dfa0: 696f 6e61 7279 204e 2074 696d 6573 2c0d  ionary N times,.
+0001dfb0: 0a20 2020 2020 2020 2074 6869 7320 636c  .        this cl
+0001dfc0: 6561 7273 2074 6865 206f 7269 6769 6e61  ears the origina
+0001dfd0: 6c20 6469 6374 696f 6e61 7279 2c20 616e  l dictionary, an
+0001dfe0: 6420 7265 6275 696c 6473 2061 206e 6577  d rebuilds a new
+0001dff0: 206f 6e65 206f 6e63 652e 0d0a 2020 2020   one once...    
+0001e000: 2020 2020 4c61 6265 6c20 636f 6c75 6d6e      Label column
+0001e010: 7320 616e 6420 736f 7274 6279 2063 6f6c  s and sortby col
+0001e020: 756d 6e73 2077 696c 6c20 616c 736f 2062  umns will also b
+0001e030: 6520 6669 7865 6420 746f 206d 6174 6368  e fixed to match
+0001e040: 2074 6865 206e 6577 206e 616d 6573 2e0d   the new names..
+0001e050: 0a0d 0a20 2020 2020 2020 2050 6172 616d  ...        Param
+0001e060: 6574 6572 730d 0a20 2020 2020 2020 202d  eters..        -
+0001e070: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020  ---------..     
+0001e080: 2020 2070 7265 6669 7820 3a20 7374 720d     prefix : str.
+0001e090: 0a20 2020 2020 2020 2020 2020 2053 7472  .            Str
+0001e0a0: 696e 6720 746f 2061 6464 2062 6566 6f72  ing to add befor
+0001e0b0: 6520 6576 6572 7920 6561 6368 2069 7465  e every each ite
+0001e0c0: 6d20 6e61 6d65 0d0a 0d0a 2020 2020 2020  m name....      
+0001e0d0: 2020 5265 7475 726e 730d 0a20 2020 2020    Returns..     
+0001e0e0: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
+0001e0f0: 2020 2020 4e6f 6e65 0d0a 0d0a 2020 2020      None....    
+0001e100: 2020 2020 4578 616d 706c 6573 0d0a 2020      Examples..  
+0001e110: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
+0001e120: 2020 2020 2020 2020 3e3e 3e20 2354 4f44          >>> #TOD
+0001e130: 4f20 4e65 6564 2074 6f20 6361 6c6c 206e  O Need to call n
+0001e140: 702e 7261 6e64 6f6d 2e73 6565 6428 3132  p.random.seed(12
+0001e150: 3334 3529 2066 6972 7374 2074 6f20 656e  345) first to en
+0001e160: 7375 7265 2065 7861 6d70 6c65 2072 756e  sure example run
+0001e170: 7320 6465 7465 726d 696e 6973 7469 6361  s deterministica
+0001e180: 6c6c 790d 0a20 2020 2020 2020 203e 3e3e  lly..        >>>
+0001e190: 2064 7320 3d20 7274 2e44 6174 6173 6574   ds = rt.Dataset
+0001e1a0: 287b 2763 6f6c 5f27 2b73 7472 2869 293a  ({'col_'+str(i):
+0001e1b0: 6e70 2e72 616e 646f 6d2e 7261 6e64 2835  np.random.rand(5
+0001e1c0: 2920 666f 7220 6920 696e 2072 616e 6765  ) for i in range
+0001e1d0: 2835 297d 290d 0a20 2020 2020 2020 203e  (5)})..        >
+0001e1e0: 3e3e 2064 732e 636f 6c5f 6164 645f 7072  >> ds.col_add_pr
+0001e1f0: 6566 6978 2827 4e45 575f 2729 0d0a 2020  efix('NEW_')..  
+0001e200: 2020 2020 2020 2320 2020 4e45 575f 636f        #   NEW_co
+0001e210: 6c5f 3020 2020 4e45 575f 636f 6c5f 3120  l_0   NEW_col_1 
+0001e220: 2020 4e45 575f 636f 6c5f 3220 2020 4e45    NEW_col_2   NE
+0001e230: 575f 636f 6c5f 3320 2020 4e45 575f 636f  W_col_3   NEW_co
+0001e240: 6c5f 340d 0a20 2020 2020 2020 202d 2020  l_4..        -  
+0001e250: 202d 2d2d 2d2d 2d2d 2d2d 2020 202d 2d2d   ---------   ---
 0001e260: 2d2d 2d2d 2d2d 2020 202d 2d2d 2d2d 2d2d  ------   -------
 0001e270: 2d2d 2020 202d 2d2d 2d2d 2d2d 2d2d 2020  --   ---------  
-0001e280: 202d 2d2d 2d2d 2d2d 2d2d 2020 202d 2d2d   ---------   ---
-0001e290: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0001e2a0: 3020 2020 2020 2020 2030 2e37 3020 2020  0        0.70   
-0001e2b0: 2020 2020 2030 2e35 3220 2020 2020 2020       0.52       
-0001e2c0: 2030 2e30 3720 2020 2020 2020 2030 2e38   0.07        0.8
-0001e2d0: 3120 2020 2020 2020 2030 2e32 360d 0a20  1        0.26.. 
-0001e2e0: 2020 2020 2020 2031 2020 2020 2020 2020         1        
-0001e2f0: 302e 3133 2020 2020 2020 2020 302e 3433  0.13        0.43
-0001e300: 2020 2020 2020 2020 302e 3031 2020 2020          0.01    
-0001e310: 2020 2020 302e 3436 2020 2020 2020 2020      0.46        
-0001e320: 302e 3435 0d0a 2020 2020 2020 2020 3220  0.45..        2 
-0001e330: 2020 2020 2020 2030 2e33 3420 2020 2020         0.34     
-0001e340: 2020 2030 2e32 3420 2020 2020 2020 2030     0.24        0
-0001e350: 2e38 3720 2020 2020 2020 2030 2e38 3120  .87        0.81 
-0001e360: 2020 2020 2020 2030 2e38 300d 0a20 2020         0.80..   
-0001e370: 2020 2020 2033 2020 2020 2020 2020 302e       3        0.
-0001e380: 3633 2020 2020 2020 2020 302e 3232 2020  63        0.22  
-0001e390: 2020 2020 2020 302e 3835 2020 2020 2020        0.85      
-0001e3a0: 2020 302e 3630 2020 2020 2020 2020 302e    0.60        0.
-0001e3b0: 3931 0d0a 2020 2020 2020 2020 3420 2020  91..        4   
-0001e3c0: 2020 2020 2030 2e34 3620 2020 2020 2020       0.46       
-0001e3d0: 2030 2e37 3020 2020 2020 2020 2030 2e30   0.70        0.0
-0001e3e0: 3220 2020 2020 2020 2030 2e34 3920 2020  2        0.49   
-0001e3f0: 2020 2020 2030 2e33 340d 0a20 2020 2020       0.34..     
-0001e400: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-0001e410: 736f 7274 7320 3d20 7365 6c66 2e5f 636f  sorts = self._co
-0001e420: 6c5f 736f 7274 6c69 7374 0d0a 0d0a 2020  l_sortlist....  
-0001e430: 2020 2020 2020 2320 636c 6561 7220 6974        # clear it
-0001e440: 656d 2064 6963 7420 6669 7273 7420 736f  em dict first so
-0001e450: 2069 6620 7072 6566 6978 202b 206f 6c64   if prefix + old
-0001e460: 6e61 6d65 2065 7869 7374 732c 2064 6174  name exists, dat
-0001e470: 6120 776f 6e27 7420 6265 206f 7665 7277  a won't be overw
-0001e480: 7269 7474 656e 0d0a 2020 2020 2020 2020  ritten..        
-0001e490: 7365 6c66 2e5f 616c 6c5f 6974 656d 732e  self._all_items.
-0001e4a0: 6974 656d 5f61 6464 5f70 7265 6669 7828  item_add_prefix(
-0001e4b0: 7072 6566 6978 290d 0a0d 0a20 2020 2020  prefix)....     
-0001e4c0: 2020 2023 2066 6978 2073 6f72 7473 0d0a     # fix sorts..
-0001e4d0: 2020 2020 2020 2020 6966 2073 6f72 7473          if sorts
-0001e4e0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-0001e4f0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001e500: 5f63 6f6c 5f73 6f72 746c 6973 7420 3d20  _col_sortlist = 
-0001e510: 5b70 7265 6669 7820 2b20 7320 666f 7220  [prefix + s for 
-0001e520: 7320 696e 2073 6f72 7473 5d0d 0a0d 0a20  s in sorts].... 
-0001e530: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+0001e280: 202d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020   ---------..    
+0001e290: 2020 2020 3020 2020 2020 2020 2030 2e37      0        0.7
+0001e2a0: 3020 2020 2020 2020 2030 2e35 3220 2020  0        0.52   
+0001e2b0: 2020 2020 2030 2e30 3720 2020 2020 2020       0.07       
+0001e2c0: 2030 2e38 3120 2020 2020 2020 2030 2e32   0.81        0.2
+0001e2d0: 360d 0a20 2020 2020 2020 2031 2020 2020  6..        1    
+0001e2e0: 2020 2020 302e 3133 2020 2020 2020 2020      0.13        
+0001e2f0: 302e 3433 2020 2020 2020 2020 302e 3031  0.43        0.01
+0001e300: 2020 2020 2020 2020 302e 3436 2020 2020          0.46    
+0001e310: 2020 2020 302e 3435 0d0a 2020 2020 2020      0.45..      
+0001e320: 2020 3220 2020 2020 2020 2030 2e33 3420    2        0.34 
+0001e330: 2020 2020 2020 2030 2e32 3420 2020 2020         0.24     
+0001e340: 2020 2030 2e38 3720 2020 2020 2020 2030     0.87        0
+0001e350: 2e38 3120 2020 2020 2020 2030 2e38 300d  .81        0.80.
+0001e360: 0a20 2020 2020 2020 2033 2020 2020 2020  .        3      
+0001e370: 2020 302e 3633 2020 2020 2020 2020 302e    0.63        0.
+0001e380: 3232 2020 2020 2020 2020 302e 3835 2020  22        0.85  
+0001e390: 2020 2020 2020 302e 3630 2020 2020 2020        0.60      
+0001e3a0: 2020 302e 3931 0d0a 2020 2020 2020 2020    0.91..        
+0001e3b0: 3420 2020 2020 2020 2030 2e34 3620 2020  4        0.46   
+0001e3c0: 2020 2020 2030 2e37 3020 2020 2020 2020       0.70       
+0001e3d0: 2030 2e30 3220 2020 2020 2020 2030 2e34   0.02        0.4
+0001e3e0: 3920 2020 2020 2020 2030 2e33 340d 0a20  9        0.34.. 
+0001e3f0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+0001e400: 2020 2020 736f 7274 7320 3d20 7365 6c66      sorts = self
+0001e410: 2e5f 636f 6c5f 736f 7274 6c69 7374 0d0a  ._col_sortlist..
+0001e420: 0d0a 2020 2020 2020 2020 2320 636c 6561  ..        # clea
+0001e430: 7220 6974 656d 2064 6963 7420 6669 7273  r item dict firs
+0001e440: 7420 736f 2069 6620 7072 6566 6978 202b  t so if prefix +
+0001e450: 206f 6c64 6e61 6d65 2065 7869 7374 732c   oldname exists,
+0001e460: 2064 6174 6120 776f 6e27 7420 6265 206f   data won't be o
+0001e470: 7665 7277 7269 7474 656e 0d0a 2020 2020  verwritten..    
+0001e480: 2020 2020 7365 6c66 2e5f 616c 6c5f 6974      self._all_it
+0001e490: 656d 732e 6974 656d 5f61 6464 5f70 7265  ems.item_add_pre
+0001e4a0: 6669 7828 7072 6566 6978 290d 0a0d 0a20  fix(prefix).... 
+0001e4b0: 2020 2020 2020 2023 2066 6978 2073 6f72         # fix sor
+0001e4c0: 7473 0d0a 2020 2020 2020 2020 6966 2073  ts..        if s
+0001e4d0: 6f72 7473 2069 7320 6e6f 7420 4e6f 6e65  orts is not None
+0001e4e0: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+0001e4f0: 656c 662e 5f63 6f6c 5f73 6f72 746c 6973  elf._col_sortlis
+0001e500: 7420 3d20 5b70 7265 6669 7820 2b20 7320  t = [prefix + s 
+0001e510: 666f 7220 7320 696e 2073 6f72 7473 5d0d  for s in sorts].
+0001e520: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+0001e530: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001e540: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001e550: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001e560: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
-0001e570: 2020 6465 6620 636f 6c5f 6164 645f 7375    def col_add_su
-0001e580: 6666 6978 2873 656c 662c 2073 7566 6669  ffix(self, suffi
-0001e590: 783a 2073 7472 2920 2d3e 204e 6f6e 653a  x: str) -> None:
-0001e5a0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-0001e5b0: 2020 2020 2020 2041 6464 2074 6865 2073         Add the s
-0001e5c0: 616d 6520 7375 6666 6978 2074 6f20 616c  ame suffix to al
-0001e5d0: 6c20 6974 656d 7320 696e 2074 6865 2053  l items in the S
-0001e5e0: 7472 7563 742f 4461 7461 7365 742e 0d0a  truct/Dataset...
-0001e5f0: 0d0a 2020 2020 2020 2020 5261 7468 6572  ..        Rather
-0001e600: 2074 6861 6e20 7265 6e61 6d69 6e67 2074   than renaming t
-0001e610: 6865 2063 6f6c 756d 6e73 2069 6e20 6120  he columns in a 
-0001e620: 636f 6c5f 7265 6e61 6d65 206c 6f6f 7020  col_rename loop 
-0001e630: 2d20 7768 6963 6820 776f 756c 6420 6861  - which would ha
-0001e640: 7665 2074 6f20 7265 6275 696c 6420 7468  ve to rebuild th
-0001e650: 6520 756e 6465 726c 7969 6e67 2064 6963  e underlying dic
-0001e660: 7469 6f6e 6172 7920 4e20 7469 6d65 732c  tionary N times,
-0001e670: 0d0a 2020 2020 2020 2020 7468 6973 2063  ..        this c
-0001e680: 6c65 6172 7320 7468 6520 6f72 6967 696e  lears the origin
-0001e690: 616c 2064 6963 7469 6f6e 6172 792c 2061  al dictionary, a
-0001e6a0: 6e64 2072 6562 7569 6c64 7320 6120 6e65  nd rebuilds a ne
-0001e6b0: 7720 6f6e 6520 6f6e 6365 2e0d 0a20 2020  w one once...   
-0001e6c0: 2020 2020 204c 6162 656c 2063 6f6c 756d       Label colum
-0001e6d0: 6e73 2061 6e64 2073 6f72 7462 7920 636f  ns and sortby co
-0001e6e0: 6c75 6d6e 7320 7769 6c6c 2061 6c73 6f20  lumns will also 
-0001e6f0: 6265 2066 6978 6564 2074 6f20 6d61 7463  be fixed to matc
-0001e700: 6820 7468 6520 6e65 7720 6e61 6d65 732e  h the new names.
-0001e710: 0d0a 0d0a 2020 2020 2020 2020 5061 7261  ....        Para
-0001e720: 6d65 7465 7273 0d0a 2020 2020 2020 2020  meters..        
-0001e730: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-0001e740: 2020 2020 7375 6666 6978 203a 2073 7472      suffix : str
-0001e750: 0d0a 2020 2020 2020 2020 2020 2020 5374  ..            St
-0001e760: 7269 6e67 2074 6f20 6164 6420 6265 666f  ring to add befo
-0001e770: 7265 2065 7665 7279 2065 6163 6820 6974  re every each it
-0001e780: 656d 206e 616d 650d 0a0d 0a20 2020 2020  em name....     
-0001e790: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
-0001e7a0: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
-0001e7b0: 2020 2020 204e 6f6e 650d 0a0d 0a20 2020       None....   
-0001e7c0: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
-0001e7d0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-0001e7e0: 0a20 2020 2020 2020 203e 3e3e 2023 544f  .        >>> #TO
-0001e7f0: 444f 204e 6565 6420 746f 2063 616c 6c20  DO Need to call 
-0001e800: 6e70 2e72 616e 646f 6d2e 7365 6564 2831  np.random.seed(1
-0001e810: 3233 3435 2920 6669 7273 7420 746f 2065  2345) first to e
-0001e820: 6e73 7572 6520 6578 616d 706c 6520 7275  nsure example ru
-0001e830: 6e73 2064 6574 6572 6d69 6e69 7374 6963  ns deterministic
-0001e840: 616c 6c79 0d0a 2020 2020 2020 2020 3e3e  ally..        >>
-0001e850: 3e20 6473 203d 2072 742e 4461 7461 7365  > ds = rt.Datase
-0001e860: 7428 7b27 636f 6c5f 272b 7374 7228 6929  t({'col_'+str(i)
-0001e870: 3a6e 702e 7261 6e64 6f6d 2e72 616e 6428  :np.random.rand(
-0001e880: 3529 2066 6f72 2069 2069 6e20 7261 6e67  5) for i in rang
-0001e890: 6528 3529 7d29 0d0a 2020 2020 2020 2020  e(5)})..        
-0001e8a0: 3e3e 3e20 6473 2e63 6f6c 5f61 6464 5f73  >>> ds.col_add_s
-0001e8b0: 7566 6669 7828 275f 4e45 5727 290d 0a20  uffix('_NEW').. 
-0001e8c0: 2020 2020 2020 2023 2020 2063 6f6c 5f30         #   col_0
-0001e8d0: 5f4e 4557 2020 2063 6f6c 5f31 5f4e 4557  _NEW   col_1_NEW
-0001e8e0: 2020 2063 6f6c 5f32 5f4e 4557 2020 2063     col_2_NEW   c
-0001e8f0: 6f6c 5f33 5f4e 4557 2020 2063 6f6c 5f34  ol_3_NEW   col_4
-0001e900: 5f4e 4557 0d0a 2020 2020 2020 2020 2d20  _NEW..        - 
+0001e560: 0d0a 2020 2020 6465 6620 636f 6c5f 6164  ..    def col_ad
+0001e570: 645f 7375 6666 6978 2873 656c 662c 2073  d_suffix(self, s
+0001e580: 7566 6669 783a 2073 7472 2920 2d3e 204e  uffix: str) -> N
+0001e590: 6f6e 653a 0d0a 2020 2020 2020 2020 2222  one:..        ""
+0001e5a0: 220d 0a20 2020 2020 2020 2041 6464 2074  "..        Add t
+0001e5b0: 6865 2073 616d 6520 7375 6666 6978 2074  he same suffix t
+0001e5c0: 6f20 616c 6c20 6974 656d 7320 696e 2074  o all items in t
+0001e5d0: 6865 2053 7472 7563 742f 4461 7461 7365  he Struct/Datase
+0001e5e0: 742e 0d0a 0d0a 2020 2020 2020 2020 5261  t.....        Ra
+0001e5f0: 7468 6572 2074 6861 6e20 7265 6e61 6d69  ther than renami
+0001e600: 6e67 2074 6865 2063 6f6c 756d 6e73 2069  ng the columns i
+0001e610: 6e20 6120 636f 6c5f 7265 6e61 6d65 206c  n a col_rename l
+0001e620: 6f6f 7020 2d20 7768 6963 6820 776f 756c  oop - which woul
+0001e630: 6420 6861 7665 2074 6f20 7265 6275 696c  d have to rebuil
+0001e640: 6420 7468 6520 756e 6465 726c 7969 6e67  d the underlying
+0001e650: 2064 6963 7469 6f6e 6172 7920 4e20 7469   dictionary N ti
+0001e660: 6d65 732c 0d0a 2020 2020 2020 2020 7468  mes,..        th
+0001e670: 6973 2063 6c65 6172 7320 7468 6520 6f72  is clears the or
+0001e680: 6967 696e 616c 2064 6963 7469 6f6e 6172  iginal dictionar
+0001e690: 792c 2061 6e64 2072 6562 7569 6c64 7320  y, and rebuilds 
+0001e6a0: 6120 6e65 7720 6f6e 6520 6f6e 6365 2e0d  a new one once..
+0001e6b0: 0a20 2020 2020 2020 204c 6162 656c 2063  .        Label c
+0001e6c0: 6f6c 756d 6e73 2061 6e64 2073 6f72 7462  olumns and sortb
+0001e6d0: 7920 636f 6c75 6d6e 7320 7769 6c6c 2061  y columns will a
+0001e6e0: 6c73 6f20 6265 2066 6978 6564 2074 6f20  lso be fixed to 
+0001e6f0: 6d61 7463 6820 7468 6520 6e65 7720 6e61  match the new na
+0001e700: 6d65 732e 0d0a 0d0a 2020 2020 2020 2020  mes.....        
+0001e710: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
+0001e720: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
+0001e730: 2020 2020 2020 2020 7375 6666 6978 203a          suffix :
+0001e740: 2073 7472 0d0a 2020 2020 2020 2020 2020   str..          
+0001e750: 2020 5374 7269 6e67 2074 6f20 6164 6420    String to add 
+0001e760: 6265 666f 7265 2065 7665 7279 2065 6163  before every eac
+0001e770: 6820 6974 656d 206e 616d 650d 0a0d 0a20  h item name.... 
+0001e780: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+0001e790: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+0001e7a0: 0a20 2020 2020 2020 204e 6f6e 650d 0a0d  .        None...
+0001e7b0: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
+0001e7c0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+0001e7d0: 2d2d 2d0d 0a20 2020 2020 2020 203e 3e3e  ---..        >>>
+0001e7e0: 2023 544f 444f 204e 6565 6420 746f 2063   #TODO Need to c
+0001e7f0: 616c 6c20 6e70 2e72 616e 646f 6d2e 7365  all np.random.se
+0001e800: 6564 2831 3233 3435 2920 6669 7273 7420  ed(12345) first 
+0001e810: 746f 2065 6e73 7572 6520 6578 616d 706c  to ensure exampl
+0001e820: 6520 7275 6e73 2064 6574 6572 6d69 6e69  e runs determini
+0001e830: 7374 6963 616c 6c79 0d0a 2020 2020 2020  stically..      
+0001e840: 2020 3e3e 3e20 6473 203d 2072 742e 4461    >>> ds = rt.Da
+0001e850: 7461 7365 7428 7b27 636f 6c5f 272b 7374  taset({'col_'+st
+0001e860: 7228 6929 3a6e 702e 7261 6e64 6f6d 2e72  r(i):np.random.r
+0001e870: 616e 6428 3529 2066 6f72 2069 2069 6e20  and(5) for i in 
+0001e880: 7261 6e67 6528 3529 7d29 0d0a 2020 2020  range(5)})..    
+0001e890: 2020 2020 3e3e 3e20 6473 2e63 6f6c 5f61      >>> ds.col_a
+0001e8a0: 6464 5f73 7566 6669 7828 275f 4e45 5727  dd_suffix('_NEW'
+0001e8b0: 290d 0a20 2020 2020 2020 2023 2020 2063  )..        #   c
+0001e8c0: 6f6c 5f30 5f4e 4557 2020 2063 6f6c 5f31  ol_0_NEW   col_1
+0001e8d0: 5f4e 4557 2020 2063 6f6c 5f32 5f4e 4557  _NEW   col_2_NEW
+0001e8e0: 2020 2063 6f6c 5f33 5f4e 4557 2020 2063     col_3_NEW   c
+0001e8f0: 6f6c 5f34 5f4e 4557 0d0a 2020 2020 2020  ol_4_NEW..      
+0001e900: 2020 2d20 2020 2d2d 2d2d 2d2d 2d2d 2d20    -   --------- 
 0001e910: 2020 2d2d 2d2d 2d2d 2d2d 2d20 2020 2d2d    ---------   --
 0001e920: 2d2d 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d2d  -------   ------
-0001e930: 2d2d 2d20 2020 2d2d 2d2d 2d2d 2d2d 2d20  ---   --------- 
-0001e940: 2020 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020    ---------..   
-0001e950: 2020 2020 2030 2020 2020 2020 2020 302e       0        0.
-0001e960: 3730 2020 2020 2020 2020 302e 3532 2020  70        0.52  
-0001e970: 2020 2020 2020 302e 3037 2020 2020 2020        0.07      
-0001e980: 2020 302e 3831 2020 2020 2020 2020 302e    0.81        0.
-0001e990: 3236 0d0a 2020 2020 2020 2020 3120 2020  26..        1   
-0001e9a0: 2020 2020 2030 2e31 3320 2020 2020 2020       0.13       
-0001e9b0: 2030 2e34 3320 2020 2020 2020 2030 2e30   0.43        0.0
-0001e9c0: 3120 2020 2020 2020 2030 2e34 3620 2020  1        0.46   
-0001e9d0: 2020 2020 2030 2e34 350d 0a20 2020 2020       0.45..     
-0001e9e0: 2020 2032 2020 2020 2020 2020 302e 3334     2        0.34
-0001e9f0: 2020 2020 2020 2020 302e 3234 2020 2020          0.24    
-0001ea00: 2020 2020 302e 3837 2020 2020 2020 2020      0.87        
-0001ea10: 302e 3831 2020 2020 2020 2020 302e 3830  0.81        0.80
-0001ea20: 0d0a 2020 2020 2020 2020 3320 2020 2020  ..        3     
-0001ea30: 2020 2030 2e36 3320 2020 2020 2020 2030     0.63        0
-0001ea40: 2e32 3220 2020 2020 2020 2030 2e38 3520  .22        0.85 
-0001ea50: 2020 2020 2020 2030 2e36 3020 2020 2020         0.60     
-0001ea60: 2020 2030 2e39 310d 0a20 2020 2020 2020     0.91..       
-0001ea70: 2034 2020 2020 2020 2020 302e 3436 2020   4        0.46  
-0001ea80: 2020 2020 2020 302e 3730 2020 2020 2020        0.70      
-0001ea90: 2020 302e 3032 2020 2020 2020 2020 302e    0.02        0.
-0001eaa0: 3439 2020 2020 2020 2020 302e 3334 0d0a  49        0.34..
-0001eab0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-0001eac0: 2020 2020 2073 6f72 7473 203d 2073 656c       sorts = sel
-0001ead0: 662e 5f63 6f6c 5f73 6f72 746c 6973 740d  f._col_sortlist.
-0001eae0: 0a0d 0a20 2020 2020 2020 2023 2063 6c65  ...        # cle
-0001eaf0: 6172 2069 7465 6d20 6469 6374 2066 6972  ar item dict fir
-0001eb00: 7374 2073 6f20 6966 206f 6c64 6e61 6d65  st so if oldname
-0001eb10: 202b 2073 7566 6669 7820 6578 6973 7473   + suffix exists
-0001eb20: 2c20 6461 7461 2077 6f6e 2774 2062 6520  , data won't be 
-0001eb30: 6f76 6572 7772 6974 7465 6e0d 0a20 2020  overwritten..   
-0001eb40: 2020 2020 2073 656c 662e 5f61 6c6c 5f69       self._all_i
-0001eb50: 7465 6d73 2e69 7465 6d5f 6164 645f 7375  tems.item_add_su
-0001eb60: 6666 6978 2873 7566 6669 7829 0d0a 0d0a  ffix(suffix)....
-0001eb70: 2020 2020 2020 2020 2320 6669 7820 736f          # fix so
-0001eb80: 7274 730d 0a20 2020 2020 2020 2069 6620  rts..        if 
-0001eb90: 736f 7274 7320 6973 206e 6f74 204e 6f6e  sorts is not Non
-0001eba0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0001ebb0: 7365 6c66 2e5f 636f 6c5f 736f 7274 6c69  self._col_sortli
-0001ebc0: 7374 203d 205b 7320 2b20 7375 6666 6978  st = [s + suffix
-0001ebd0: 2066 6f72 2073 2069 6e20 736f 7274 735d   for s in sorts]
-0001ebe0: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+0001e930: 2d2d 2d20 2020 2d2d 2d2d 2d2d 2d2d 2d0d  ---   ---------.
+0001e940: 0a20 2020 2020 2020 2030 2020 2020 2020  .        0      
+0001e950: 2020 302e 3730 2020 2020 2020 2020 302e    0.70        0.
+0001e960: 3532 2020 2020 2020 2020 302e 3037 2020  52        0.07  
+0001e970: 2020 2020 2020 302e 3831 2020 2020 2020        0.81      
+0001e980: 2020 302e 3236 0d0a 2020 2020 2020 2020    0.26..        
+0001e990: 3120 2020 2020 2020 2030 2e31 3320 2020  1        0.13   
+0001e9a0: 2020 2020 2030 2e34 3320 2020 2020 2020       0.43       
+0001e9b0: 2030 2e30 3120 2020 2020 2020 2030 2e34   0.01        0.4
+0001e9c0: 3620 2020 2020 2020 2030 2e34 350d 0a20  6        0.45.. 
+0001e9d0: 2020 2020 2020 2032 2020 2020 2020 2020         2        
+0001e9e0: 302e 3334 2020 2020 2020 2020 302e 3234  0.34        0.24
+0001e9f0: 2020 2020 2020 2020 302e 3837 2020 2020          0.87    
+0001ea00: 2020 2020 302e 3831 2020 2020 2020 2020      0.81        
+0001ea10: 302e 3830 0d0a 2020 2020 2020 2020 3320  0.80..        3 
+0001ea20: 2020 2020 2020 2030 2e36 3320 2020 2020         0.63     
+0001ea30: 2020 2030 2e32 3220 2020 2020 2020 2030     0.22        0
+0001ea40: 2e38 3520 2020 2020 2020 2030 2e36 3020  .85        0.60 
+0001ea50: 2020 2020 2020 2030 2e39 310d 0a20 2020         0.91..   
+0001ea60: 2020 2020 2034 2020 2020 2020 2020 302e       4        0.
+0001ea70: 3436 2020 2020 2020 2020 302e 3730 2020  46        0.70  
+0001ea80: 2020 2020 2020 302e 3032 2020 2020 2020        0.02      
+0001ea90: 2020 302e 3439 2020 2020 2020 2020 302e    0.49        0.
+0001eaa0: 3334 0d0a 2020 2020 2020 2020 2222 220d  34..        """.
+0001eab0: 0a20 2020 2020 2020 2073 6f72 7473 203d  .        sorts =
+0001eac0: 2073 656c 662e 5f63 6f6c 5f73 6f72 746c   self._col_sortl
+0001ead0: 6973 740d 0a0d 0a20 2020 2020 2020 2023  ist....        #
+0001eae0: 2063 6c65 6172 2069 7465 6d20 6469 6374   clear item dict
+0001eaf0: 2066 6972 7374 2073 6f20 6966 206f 6c64   first so if old
+0001eb00: 6e61 6d65 202b 2073 7566 6669 7820 6578  name + suffix ex
+0001eb10: 6973 7473 2c20 6461 7461 2077 6f6e 2774  ists, data won't
+0001eb20: 2062 6520 6f76 6572 7772 6974 7465 6e0d   be overwritten.
+0001eb30: 0a20 2020 2020 2020 2073 656c 662e 5f61  .        self._a
+0001eb40: 6c6c 5f69 7465 6d73 2e69 7465 6d5f 6164  ll_items.item_ad
+0001eb50: 645f 7375 6666 6978 2873 7566 6669 7829  d_suffix(suffix)
+0001eb60: 0d0a 0d0a 2020 2020 2020 2020 2320 6669  ....        # fi
+0001eb70: 7820 736f 7274 730d 0a20 2020 2020 2020  x sorts..       
+0001eb80: 2069 6620 736f 7274 7320 6973 206e 6f74   if sorts is not
+0001eb90: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0001eba0: 2020 2020 7365 6c66 2e5f 636f 6c5f 736f      self._col_so
+0001ebb0: 7274 6c69 7374 203d 205b 7320 2b20 7375  rtlist = [s + su
+0001ebc0: 6666 6978 2066 6f72 2073 2069 6e20 736f  ffix for s in so
+0001ebd0: 7274 735d 0d0a 0d0a 2020 2020 2320 2d2d  rts]....    # --
+0001ebe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001ebf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001ec00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001ec10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001ec20: 2d0d 0a20 2020 2064 6566 2063 6f6c 5f72  -..    def col_r
-0001ec30: 656e 616d 6528 7365 6c66 2c20 6f6c 643a  ename(self, old:
-0001ec40: 2073 7472 2c20 6e65 773a 2073 7472 2920   str, new: str) 
-0001ec50: 2d3e 204e 6f6e 653a 0d0a 2020 2020 2020  -> None:..      
-0001ec60: 2020 2222 220d 0a20 2020 2020 2020 2052    """..        R
-0001ec70: 656e 616d 6520 6120 7369 6e67 6c65 2063  ename a single c
-0001ec80: 6f6c 756d 6e2e 0d0a 0d0a 2020 2020 2020  olumn.....      
-0001ec90: 2020 5468 6520 6e65 7720 6e61 6d65 206d    The new name m
-0001eca0: 7573 7420 6265 2061 2076 616c 6964 2063  ust be a valid c
-0001ecb0: 6f6c 756d 6e20 6e61 6d65 3b20 7468 6174  olumn name; that
-0001ecc0: 2069 732c 2069 7420 6d75 7374 206e 6f74   is, it must not
-0001ecd0: 2062 6520 610d 0a20 2020 2020 2020 2050   be a..        P
-0001ece0: 7974 686f 6e20 6b65 7977 6f72 6420 6f72  ython keyword or
-0001ecf0: 2061 2060 5374 7275 6374 6020 6f72 2060   a `Struct` or `
-0001ed00: 2e44 6174 6173 6574 6020 636c 6173 7320  .Dataset` class 
-0001ed10: 6d65 7468 6f64 206e 616d 652e 0d0a 0d0a  method name.....
-0001ed20: 2020 2020 2020 2020 546f 2063 6865 636b          To check
-0001ed30: 2077 6865 7468 6572 2061 206e 616d 6520   whether a name 
-0001ed40: 6973 2076 616c 6964 2c20 7573 6520 6069  is valid, use `i
-0001ed50: 735f 7661 6c69 645f 636f 6c6e 616d 6560  s_valid_colname`
-0001ed60: 2e20 546f 2073 6565 2061 206c 6973 740d  . To see a list.
-0001ed70: 0a20 2020 2020 2020 206f 6620 696e 7661  .        of inva
-0001ed80: 6c69 6420 636f 6c75 6d6e 206e 616d 6573  lid column names
-0001ed90: 2c20 7573 6520 6067 6574 5f72 6573 7472  , use `get_restr
-0001eda0: 6963 7465 645f 6e61 6d65 7360 2e0d 0a0d  icted_names`....
-0001edb0: 0a20 2020 2020 2020 204e 6f74 6520 7468  .        Note th
-0001edc0: 6174 2063 6f6c 756d 6e20 6e61 6d65 7320  at column names 
-0001edd0: 7468 6174 2064 6f6e 2774 206d 6565 7420  that don't meet 
-0001ede0: 5079 7468 6f6e 2773 2072 756c 6573 2066  Python's rules f
-0001edf0: 6f72 2077 656c 6c2d 666f 726d 6564 0d0a  or well-formed..
-0001ee00: 2020 2020 2020 2020 7661 7269 6162 6c65          variable
-0001ee10: 206e 616d 6573 2063 616e 2774 2062 6520   names can't be 
-0001ee20: 6163 6365 7373 6564 2075 7369 6e67 2061  accessed using a
-0001ee30: 7474 7269 6275 7465 2061 6363 6573 732e  ttribute access.
-0001ee40: 2046 6f72 2065 7861 6d70 6c65 2c0d 0a20   For example,.. 
-0001ee50: 2020 2020 2020 2061 2063 6f6c 756d 6e20         a column 
-0001ee60: 6e61 6d65 6420 276d 792d 636f 6c75 6d6e  named 'my-column
-0001ee70: 2720 6361 6e27 7420 6265 2061 6363 6573  ' can't be acces
-0001ee80: 7365 6420 7769 7468 2060 6064 732e 6d79  sed with ``ds.my
-0001ee90: 2d63 6f6c 756d 6e60 602c 2062 7574 0d0a  -column``, but..
-0001eea0: 2020 2020 2020 2020 6361 6e20 6265 2061          can be a
-0001eeb0: 6363 6573 7365 6420 7769 7468 2060 6064  ccessed with ``d
-0001eec0: 735b 276d 792d 636f 6c75 6d6e 275d 6060  s['my-column']``
-0001eed0: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
-0001eee0: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
-0001eef0: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
-0001ef00: 2020 2020 206f 6c64 203a 2073 7472 0d0a       old : str..
-0001ef10: 2020 2020 2020 2020 2020 2020 4375 7272              Curr
-0001ef20: 656e 7420 636f 6c75 6d6e 206e 616d 652e  ent column name.
-0001ef30: 0d0a 2020 2020 2020 2020 6e65 7720 3a20  ..        new : 
-0001ef40: 7374 720d 0a20 2020 2020 2020 2020 2020  str..           
-0001ef50: 204e 6577 2063 6f6c 756d 6e20 6e61 6d65   New column name
-0001ef60: 2e0d 0a0d 0a20 2020 2020 2020 2052 6574  .....        Ret
-0001ef70: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
-0001ef80: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 204e  -----..        N
-0001ef90: 6f6e 650d 0a0d 0a20 2020 2020 2020 2053  one....        S
-0001efa0: 6565 2041 6c73 6f0d 0a20 2020 2020 2020  ee Also..       
-0001efb0: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
-0001efc0: 2020 2069 735f 7661 6c69 645f 636f 6c6e     is_valid_coln
-0001efd0: 616d 6520 3a20 4368 6563 6b20 7768 6574  ame : Check whet
-0001efe0: 6865 7220 6120 7374 7269 6e67 2069 7320  her a string is 
-0001eff0: 6120 7661 6c69 6420 636f 6c75 6d6e 206e  a valid column n
-0001f000: 616d 652e 0d0a 2020 2020 2020 2020 6765  ame...        ge
-0001f010: 745f 7265 7374 7269 6374 6564 5f6e 616d  t_restricted_nam
-0001f020: 6573 203a 2047 6574 2061 206c 6973 7420  es : Get a list 
-0001f030: 6f66 2069 6e76 616c 6964 2063 6f6c 756d  of invalid colum
-0001f040: 6e20 6e61 6d65 732e 0d0a 0d0a 2020 2020  n names.....    
-0001f050: 2020 2020 4578 616d 706c 6573 0d0a 2020      Examples..  
-0001f060: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
-0001f070: 2020 2020 2020 2020 3e3e 3e20 6473 203d          >>> ds =
-0001f080: 2072 742e 4461 7461 7365 7428 7b27 6127   rt.Dataset({'a'
-0001f090: 3a20 5b31 2c20 322c 2033 5d29 2c20 2762  : [1, 2, 3]), 'b
-0001f0a0: 273a 205b 342e 302c 2035 2e30 2c20 362e  ': [4.0, 5.0, 6.
-0001f0b0: 305d 7d29 0d0a 2020 2020 2020 2020 3e3e  0]})..        >>
-0001f0c0: 3e20 6473 0d0a 2020 2020 2020 2020 2320  > ds..        # 
-0001f0d0: 2020 6120 2020 2020 2062 0d0a 2020 2020    a      b..    
-0001f0e0: 2020 2020 2d20 2020 2d20 2020 2d2d 2d2d      -   -   ----
-0001f0f0: 0d0a 2020 2020 2020 2020 3020 2020 3120  ..        0   1 
-0001f100: 2020 342e 3030 0d0a 2020 2020 2020 2020    4.00..        
-0001f110: 3120 2020 3220 2020 352e 3030 0d0a 2020  1   2   5.00..  
-0001f120: 2020 2020 2020 3220 2020 3320 2020 362e        2   3   6.
-0001f130: 3030 0d0a 2020 2020 2020 2020 3e3e 3e20  00..        >>> 
-0001f140: 6473 2e63 6f6c 5f72 656e 616d 6528 2761  ds.col_rename('a
-0001f150: 272c 2027 6e65 775f 6127 290d 0a20 2020  ', 'new_a')..   
-0001f160: 2020 2020 203e 3e3e 2064 730d 0a20 2020       >>> ds..   
-0001f170: 2020 2020 2023 2020 206e 6577 5f61 2020       #   new_a  
-0001f180: 2020 2020 620d 0a20 2020 2020 2020 202d      b..        -
-0001f190: 2020 202d 2d2d 2d2d 2020 202d 2d2d 2d0d     -----   ----.
-0001f1a0: 0a20 2020 2020 2020 2030 2020 2020 2020  .        0      
-0001f1b0: 2031 2020 2034 2e30 300d 0a20 2020 2020   1   4.00..     
-0001f1c0: 2020 2031 2020 2020 2020 2032 2020 2035     1       2   5
-0001f1d0: 2e30 300d 0a20 2020 2020 2020 2032 2020  .00..        2  
-0001f1e0: 2020 2020 2033 2020 2036 2e30 300d 0a20       3   6.00.. 
-0001f1f0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-0001f200: 2020 2020 6966 206f 6c64 203d 3d20 6e65      if old == ne
-0001f210: 773a 0d0a 2020 2020 2020 2020 2020 2020  w:..            
-0001f220: 7265 7475 726e 0d0a 2020 2020 2020 2020  return..        
-0001f230: 6966 2073 656c 662e 6973 5f6c 6f63 6b65  if self.is_locke
-0001f240: 6428 293a 0d0a 2020 2020 2020 2020 2020  d():..          
-0001f250: 2020 7261 6973 6520 4174 7472 6962 7574    raise Attribut
-0001f260: 6545 7272 6f72 2822 4e6f 7420 616c 6c6f  eError("Not allo
-0001f270: 7765 6420 746f 2063 616c 6c20 636f 6c5f  wed to call col_
-0001f280: 7265 6e61 6d65 2829 206f 6e20 6c6f 636b  rename() on lock
-0001f290: 6564 206f 626a 6563 742e 2229 0d0a 2020  ed object.")..  
-0001f2a0: 2020 2020 2020 6966 206e 6f74 2073 656c        if not sel
-0001f2b0: 662e 6973 5f76 616c 6964 5f63 6f6c 6e61  f.is_valid_colna
-0001f2c0: 6d65 286e 6577 293a 0d0a 2020 2020 2020  me(new):..      
-0001f2d0: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
-0001f2e0: 6545 7272 6f72 2822 496e 7661 6c69 6420  eError("Invalid 
-0001f2f0: 636f 6c75 6d6e 206e 616d 653a 207b 7d22  column name: {}"
-0001f300: 2e66 6f72 6d61 7428 6e65 7729 290d 0a0d  .format(new))...
-0001f310: 0a20 2020 2020 2020 2076 616c 7565 203d  .        value =
-0001f320: 2073 656c 662e 5f61 6c6c 5f69 7465 6d73   self._all_items
-0001f330: 2e69 7465 6d5f 7265 6e61 6d65 286f 6c64  .item_rename(old
-0001f340: 2c20 6e65 7729 0d0a 0d0a 2020 2020 2020  , new)....      
-0001f350: 2020 2320 666f 7220 4661 7374 4172 7261    # for FastArra
-0001f360: 7973 2077 6520 6175 746f 6d61 7469 6361  ys we automatica
-0001f370: 6c6c 7920 6174 7461 6368 2074 6865 2063  lly attach the c
-0001f380: 6f6c 756d 6e20 6e61 6d65 2074 6f20 7468  olumn name to th
-0001f390: 6520 696e 7374 616e 6365 0d0a 2020 2020  e instance..    
-0001f3a0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0001f3b0: 6528 7661 6c75 652c 2054 7970 6552 6567  e(value, TypeReg
-0001f3c0: 6973 7465 722e 4661 7374 4172 7261 7929  ister.FastArray)
-0001f3d0: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-0001f3e0: 2072 6566 2063 6f75 6e74 2063 6865 636b   ref count check
-0001f3f0: 3f0d 0a20 2020 2020 2020 2020 2020 2076  ?..            v
-0001f400: 616c 7565 2e73 6574 5f6e 616d 6528 6e65  alue.set_name(ne
-0001f410: 7729 0d0a 0d0a 2020 2020 2020 2020 2320  w)....        # 
-0001f420: 676f 696e 6720 746f 2067 6f20 6177 6179  going to go away
-0001f430: 2077 6865 6e20 7765 2064 6f20 6174 7472   when we do attr
-0001f440: 6962 7574 6573 0d0a 2020 2020 2020 2020  ibutes..        
-0001f450: 2320 7570 6461 7465 2063 6f6c 756d 6e20  # update column 
-0001f460: 736f 7274 206c 6973 7420 6966 206e 6563  sort list if nec
-0001f470: 2e0d 0a20 2020 2020 2020 2069 6620 7365  ...        if se
-0001f480: 6c66 2e5f 636f 6c5f 736f 7274 6c69 7374  lf._col_sortlist
-0001f490: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-0001f4a0: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-0001f4b0: 2c20 636f 6c20 696e 2065 6e75 6d65 7261  , col in enumera
-0001f4c0: 7465 2873 656c 662e 5f63 6f6c 5f73 6f72  te(self._col_sor
-0001f4d0: 746c 6973 7429 3a0d 0a20 2020 2020 2020  tlist):..       
-0001f4e0: 2020 2020 2020 2020 2069 6620 636f 6c20           if col 
-0001f4f0: 3d3d 206f 6c64 3a0d 0a20 2020 2020 2020  == old:..       
-0001f500: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0001f510: 662e 5f63 6f6c 5f73 6f72 746c 6973 745b  f._col_sortlist[
-0001f520: 695d 203d 206e 6577 0d0a 0d0a 2020 2020  i] = new....    
-0001f530: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+0001ec10: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2063  -----..    def c
+0001ec20: 6f6c 5f72 656e 616d 6528 7365 6c66 2c20  ol_rename(self, 
+0001ec30: 6f6c 643a 2073 7472 2c20 6e65 773a 2073  old: str, new: s
+0001ec40: 7472 2920 2d3e 204e 6f6e 653a 0d0a 2020  tr) -> None:..  
+0001ec50: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+0001ec60: 2020 2052 656e 616d 6520 6120 7369 6e67     Rename a sing
+0001ec70: 6c65 2063 6f6c 756d 6e2e 0d0a 0d0a 2020  le column.....  
+0001ec80: 2020 2020 2020 5468 6520 6e65 7720 6e61        The new na
+0001ec90: 6d65 206d 7573 7420 6265 2061 2076 616c  me must be a val
+0001eca0: 6964 2063 6f6c 756d 6e20 6e61 6d65 3b20  id column name; 
+0001ecb0: 7468 6174 2069 732c 2069 7420 6d75 7374  that is, it must
+0001ecc0: 206e 6f74 2062 6520 610d 0a20 2020 2020   not be a..     
+0001ecd0: 2020 2050 7974 686f 6e20 6b65 7977 6f72     Python keywor
+0001ece0: 6420 6f72 2061 2060 5374 7275 6374 6020  d or a `Struct` 
+0001ecf0: 6f72 2060 2e44 6174 6173 6574 6020 636c  or `.Dataset` cl
+0001ed00: 6173 7320 6d65 7468 6f64 206e 616d 652e  ass method name.
+0001ed10: 0d0a 0d0a 2020 2020 2020 2020 546f 2063  ....        To c
+0001ed20: 6865 636b 2077 6865 7468 6572 2061 206e  heck whether a n
+0001ed30: 616d 6520 6973 2076 616c 6964 2c20 7573  ame is valid, us
+0001ed40: 6520 6069 735f 7661 6c69 645f 636f 6c6e  e `is_valid_coln
+0001ed50: 616d 6560 2e20 546f 2073 6565 2061 206c  ame`. To see a l
+0001ed60: 6973 740d 0a20 2020 2020 2020 206f 6620  ist..        of 
+0001ed70: 696e 7661 6c69 6420 636f 6c75 6d6e 206e  invalid column n
+0001ed80: 616d 6573 2c20 7573 6520 6067 6574 5f72  ames, use `get_r
+0001ed90: 6573 7472 6963 7465 645f 6e61 6d65 7360  estricted_names`
+0001eda0: 2e0d 0a0d 0a20 2020 2020 2020 204e 6f74  .....        Not
+0001edb0: 6520 7468 6174 2063 6f6c 756d 6e20 6e61  e that column na
+0001edc0: 6d65 7320 7468 6174 2064 6f6e 2774 206d  mes that don't m
+0001edd0: 6565 7420 5079 7468 6f6e 2773 2072 756c  eet Python's rul
+0001ede0: 6573 2066 6f72 2077 656c 6c2d 666f 726d  es for well-form
+0001edf0: 6564 0d0a 2020 2020 2020 2020 7661 7269  ed..        vari
+0001ee00: 6162 6c65 206e 616d 6573 2063 616e 2774  able names can't
+0001ee10: 2062 6520 6163 6365 7373 6564 2075 7369   be accessed usi
+0001ee20: 6e67 2061 7474 7269 6275 7465 2061 6363  ng attribute acc
+0001ee30: 6573 732e 2046 6f72 2065 7861 6d70 6c65  ess. For example
+0001ee40: 2c0d 0a20 2020 2020 2020 2061 2063 6f6c  ,..        a col
+0001ee50: 756d 6e20 6e61 6d65 6420 276d 792d 636f  umn named 'my-co
+0001ee60: 6c75 6d6e 2720 6361 6e27 7420 6265 2061  lumn' can't be a
+0001ee70: 6363 6573 7365 6420 7769 7468 2060 6064  ccessed with ``d
+0001ee80: 732e 6d79 2d63 6f6c 756d 6e60 602c 2062  s.my-column``, b
+0001ee90: 7574 0d0a 2020 2020 2020 2020 6361 6e20  ut..        can 
+0001eea0: 6265 2061 6363 6573 7365 6420 7769 7468  be accessed with
+0001eeb0: 2060 6064 735b 276d 792d 636f 6c75 6d6e   ``ds['my-column
+0001eec0: 275d 6060 2e0d 0a0d 0a20 2020 2020 2020  ']``.....       
+0001eed0: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
+0001eee0: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
+0001eef0: 0a20 2020 2020 2020 206f 6c64 203a 2073  .        old : s
+0001ef00: 7472 0d0a 2020 2020 2020 2020 2020 2020  tr..            
+0001ef10: 4375 7272 656e 7420 636f 6c75 6d6e 206e  Current column n
+0001ef20: 616d 652e 0d0a 2020 2020 2020 2020 6e65  ame...        ne
+0001ef30: 7720 3a20 7374 720d 0a20 2020 2020 2020  w : str..       
+0001ef40: 2020 2020 204e 6577 2063 6f6c 756d 6e20       New column 
+0001ef50: 6e61 6d65 2e0d 0a0d 0a20 2020 2020 2020  name.....       
+0001ef60: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
+0001ef70: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
+0001ef80: 2020 204e 6f6e 650d 0a0d 0a20 2020 2020     None....     
+0001ef90: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
+0001efa0: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+0001efb0: 2020 2020 2020 2069 735f 7661 6c69 645f         is_valid_
+0001efc0: 636f 6c6e 616d 6520 3a20 4368 6563 6b20  colname : Check 
+0001efd0: 7768 6574 6865 7220 6120 7374 7269 6e67  whether a string
+0001efe0: 2069 7320 6120 7661 6c69 6420 636f 6c75   is a valid colu
+0001eff0: 6d6e 206e 616d 652e 0d0a 2020 2020 2020  mn name...      
+0001f000: 2020 6765 745f 7265 7374 7269 6374 6564    get_restricted
+0001f010: 5f6e 616d 6573 203a 2047 6574 2061 206c  _names : Get a l
+0001f020: 6973 7420 6f66 2069 6e76 616c 6964 2063  ist of invalid c
+0001f030: 6f6c 756d 6e20 6e61 6d65 732e 0d0a 0d0a  olumn names.....
+0001f040: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
+0001f050: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+0001f060: 2d2d 0d0a 2020 2020 2020 2020 3e3e 3e20  --..        >>> 
+0001f070: 6473 203d 2072 742e 4461 7461 7365 7428  ds = rt.Dataset(
+0001f080: 7b27 6127 3a20 5b31 2c20 322c 2033 5d29  {'a': [1, 2, 3])
+0001f090: 2c20 2762 273a 205b 342e 302c 2035 2e30  , 'b': [4.0, 5.0
+0001f0a0: 2c20 362e 305d 7d29 0d0a 2020 2020 2020  , 6.0]})..      
+0001f0b0: 2020 3e3e 3e20 6473 0d0a 2020 2020 2020    >>> ds..      
+0001f0c0: 2020 2320 2020 6120 2020 2020 2062 0d0a    #   a      b..
+0001f0d0: 2020 2020 2020 2020 2d20 2020 2d20 2020          -   -   
+0001f0e0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3020  ----..        0 
+0001f0f0: 2020 3120 2020 342e 3030 0d0a 2020 2020    1   4.00..    
+0001f100: 2020 2020 3120 2020 3220 2020 352e 3030      1   2   5.00
+0001f110: 0d0a 2020 2020 2020 2020 3220 2020 3320  ..        2   3 
+0001f120: 2020 362e 3030 0d0a 2020 2020 2020 2020    6.00..        
+0001f130: 3e3e 3e20 6473 2e63 6f6c 5f72 656e 616d  >>> ds.col_renam
+0001f140: 6528 2761 272c 2027 6e65 775f 6127 290d  e('a', 'new_a').
+0001f150: 0a20 2020 2020 2020 203e 3e3e 2064 730d  .        >>> ds.
+0001f160: 0a20 2020 2020 2020 2023 2020 206e 6577  .        #   new
+0001f170: 5f61 2020 2020 2020 620d 0a20 2020 2020  _a      b..     
+0001f180: 2020 202d 2020 202d 2d2d 2d2d 2020 202d     -   -----   -
+0001f190: 2d2d 2d0d 0a20 2020 2020 2020 2030 2020  ---..        0  
+0001f1a0: 2020 2020 2031 2020 2034 2e30 300d 0a20       1   4.00.. 
+0001f1b0: 2020 2020 2020 2031 2020 2020 2020 2032         1       2
+0001f1c0: 2020 2035 2e30 300d 0a20 2020 2020 2020     5.00..       
+0001f1d0: 2032 2020 2020 2020 2033 2020 2036 2e30   2       3   6.0
+0001f1e0: 300d 0a20 2020 2020 2020 2022 2222 0d0a  0..        """..
+0001f1f0: 2020 2020 2020 2020 6966 206f 6c64 203d          if old =
+0001f200: 3d20 6e65 773a 0d0a 2020 2020 2020 2020  = new:..        
+0001f210: 2020 2020 7265 7475 726e 0d0a 2020 2020      return..    
+0001f220: 2020 2020 6966 2073 656c 662e 6973 5f6c      if self.is_l
+0001f230: 6f63 6b65 6428 293a 0d0a 2020 2020 2020  ocked():..      
+0001f240: 2020 2020 2020 7261 6973 6520 4174 7472        raise Attr
+0001f250: 6962 7574 6545 7272 6f72 2822 4e6f 7420  ibuteError("Not 
+0001f260: 616c 6c6f 7765 6420 746f 2063 616c 6c20  allowed to call 
+0001f270: 636f 6c5f 7265 6e61 6d65 2829 206f 6e20  col_rename() on 
+0001f280: 6c6f 636b 6564 206f 626a 6563 742e 2229  locked object.")
+0001f290: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
+0001f2a0: 2073 656c 662e 6973 5f76 616c 6964 5f63   self.is_valid_c
+0001f2b0: 6f6c 6e61 6d65 286e 6577 293a 0d0a 2020  olname(new):..  
+0001f2c0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0001f2d0: 5661 6c75 6545 7272 6f72 2822 496e 7661  ValueError("Inva
+0001f2e0: 6c69 6420 636f 6c75 6d6e 206e 616d 653a  lid column name:
+0001f2f0: 207b 7d22 2e66 6f72 6d61 7428 6e65 7729   {}".format(new)
+0001f300: 290d 0a0d 0a20 2020 2020 2020 2076 616c  )....        val
+0001f310: 7565 203d 2073 656c 662e 5f61 6c6c 5f69  ue = self._all_i
+0001f320: 7465 6d73 2e69 7465 6d5f 7265 6e61 6d65  tems.item_rename
+0001f330: 286f 6c64 2c20 6e65 7729 0d0a 0d0a 2020  (old, new)....  
+0001f340: 2020 2020 2020 2320 666f 7220 4661 7374        # for Fast
+0001f350: 4172 7261 7973 2077 6520 6175 746f 6d61  Arrays we automa
+0001f360: 7469 6361 6c6c 7920 6174 7461 6368 2074  tically attach t
+0001f370: 6865 2063 6f6c 756d 6e20 6e61 6d65 2074  he column name t
+0001f380: 6f20 7468 6520 696e 7374 616e 6365 0d0a  o the instance..
+0001f390: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+0001f3a0: 7461 6e63 6528 7661 6c75 652c 2054 7970  tance(value, Typ
+0001f3b0: 6552 6567 6973 7465 722e 4661 7374 4172  eRegister.FastAr
+0001f3c0: 7261 7929 3a0d 0a20 2020 2020 2020 2020  ray):..         
+0001f3d0: 2020 2023 2072 6566 2063 6f75 6e74 2063     # ref count c
+0001f3e0: 6865 636b 3f0d 0a20 2020 2020 2020 2020  heck?..         
+0001f3f0: 2020 2076 616c 7565 2e73 6574 5f6e 616d     value.set_nam
+0001f400: 6528 6e65 7729 0d0a 0d0a 2020 2020 2020  e(new)....      
+0001f410: 2020 2320 676f 696e 6720 746f 2067 6f20    # going to go 
+0001f420: 6177 6179 2077 6865 6e20 7765 2064 6f20  away when we do 
+0001f430: 6174 7472 6962 7574 6573 0d0a 2020 2020  attributes..    
+0001f440: 2020 2020 2320 7570 6461 7465 2063 6f6c      # update col
+0001f450: 756d 6e20 736f 7274 206c 6973 7420 6966  umn sort list if
+0001f460: 206e 6563 2e0d 0a20 2020 2020 2020 2069   nec...        i
+0001f470: 6620 7365 6c66 2e5f 636f 6c5f 736f 7274  f self._col_sort
+0001f480: 6c69 7374 2069 7320 6e6f 7420 4e6f 6e65  list is not None
+0001f490: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
+0001f4a0: 6f72 2069 2c20 636f 6c20 696e 2065 6e75  or i, col in enu
+0001f4b0: 6d65 7261 7465 2873 656c 662e 5f63 6f6c  merate(self._col
+0001f4c0: 5f73 6f72 746c 6973 7429 3a0d 0a20 2020  _sortlist):..   
+0001f4d0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001f4e0: 636f 6c20 3d3d 206f 6c64 3a0d 0a20 2020  col == old:..   
+0001f4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f500: 2073 656c 662e 5f63 6f6c 5f73 6f72 746c   self._col_sortl
+0001f510: 6973 745b 695d 203d 206e 6577 0d0a 0d0a  ist[i] = new....
+0001f520: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+0001f530: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001f540: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001f550: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001f560: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-0001f570: 6465 6620 5f65 6e73 7572 655f 6174 6f6d  def _ensure_atom
-0001f580: 6963 2873 656c 662c 2063 6f6c 6e61 6d65  ic(self, colname
-0001f590: 732c 2066 756e 6329 3a0d 0a20 2020 2020  s, func):..     
-0001f5a0: 2020 2022 2222 4f6e 6c79 2070 726f 6365     """Only proce
-0001f5b0: 6564 2077 6974 6820 6365 7274 6169 6e20  ed with certain 
-0001f5c0: 6f70 6572 6174 696f 6e73 2069 6620 616c  operations if al
-0001f5d0: 6c20 636f 6c75 6d6e 7320 6578 6973 7420  l columns exist 
-0001f5e0: 696e 2074 6162 6c65 2e0d 0a20 2020 2020  in table...     
-0001f5f0: 2020 2050 6173 7320 696e 2074 6865 2066     Pass in the f
-0001f600: 756e 6374 696f 6e20 666f 7220 6120 6d6f  unction for a mo
-0001f610: 7265 2069 6e66 6f72 6d61 7469 7665 2065  re informative e
-0001f620: 7272 6f72 2e0d 0a20 2020 2020 2020 2022  rror...        "
-0001f630: 2222 0d0a 2020 2020 2020 2020 6d69 7373  ""..        miss
-0001f640: 696e 6720 3d20 7365 7428 636f 6c6e 616d  ing = set(colnam
-0001f650: 6573 2920 2d20 7365 7428 7365 6c66 290d  es) - set(self).
-0001f660: 0a20 2020 2020 2020 2069 6620 6c65 6e28  .        if len(
-0001f670: 6d69 7373 696e 6729 2021 3d20 303a 0d0a  missing) != 0:..
-0001f680: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0001f690: 6520 496e 6465 7845 7272 6f72 280d 0a20  e IndexError(.. 
-0001f6a0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001f6b0: 2255 6e6b 6e6f 776e 2063 6f6c 756d 6e28  "Unknown column(
-0001f6c0: 7329 207b 6d69 7373 696e 677d 2064 6f28  s) {missing} do(
-0001f6d0: 6573 2920 6e6f 7420 6578 6973 742e 2043  es) not exist. C
-0001f6e0: 616e 6e6f 7420 7072 6f63 6565 6420 7769  annot proceed wi
-0001f6f0: 7468 2066 756e 6374 696f 6e20 7b66 756e  th function {fun
-0001f700: 632e 5f5f 6e61 6d65 5f5f 7d22 0d0a 2020  c.__name__}"..  
-0001f710: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
-0001f720: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+0001f550: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+0001f560: 2020 2020 6465 6620 5f65 6e73 7572 655f      def _ensure_
+0001f570: 6174 6f6d 6963 2873 656c 662c 2063 6f6c  atomic(self, col
+0001f580: 6e61 6d65 732c 2066 756e 6329 3a0d 0a20  names, func):.. 
+0001f590: 2020 2020 2020 2022 2222 4f6e 6c79 2070         """Only p
+0001f5a0: 726f 6365 6564 2077 6974 6820 6365 7274  roceed with cert
+0001f5b0: 6169 6e20 6f70 6572 6174 696f 6e73 2069  ain operations i
+0001f5c0: 6620 616c 6c20 636f 6c75 6d6e 7320 6578  f all columns ex
+0001f5d0: 6973 7420 696e 2074 6162 6c65 2e0d 0a20  ist in table... 
+0001f5e0: 2020 2020 2020 2050 6173 7320 696e 2074         Pass in t
+0001f5f0: 6865 2066 756e 6374 696f 6e20 666f 7220  he function for 
+0001f600: 6120 6d6f 7265 2069 6e66 6f72 6d61 7469  a more informati
+0001f610: 7665 2065 7272 6f72 2e0d 0a20 2020 2020  ve error...     
+0001f620: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+0001f630: 6d69 7373 696e 6720 3d20 7365 7428 636f  missing = set(co
+0001f640: 6c6e 616d 6573 2920 2d20 7365 7428 7365  lnames) - set(se
+0001f650: 6c66 290d 0a20 2020 2020 2020 2069 6620  lf)..        if 
+0001f660: 6c65 6e28 6d69 7373 696e 6729 2021 3d20  len(missing) != 
+0001f670: 303a 0d0a 2020 2020 2020 2020 2020 2020  0:..            
+0001f680: 7261 6973 6520 496e 6465 7845 7272 6f72  raise IndexError
+0001f690: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+0001f6a0: 2020 2066 2255 6e6b 6e6f 776e 2063 6f6c     f"Unknown col
+0001f6b0: 756d 6e28 7329 207b 6d69 7373 696e 677d  umn(s) {missing}
+0001f6c0: 2064 6f28 6573 2920 6e6f 7420 6578 6973   do(es) not exis
+0001f6d0: 742e 2043 616e 6e6f 7420 7072 6f63 6565  t. Cannot procee
+0001f6e0: 6420 7769 7468 2066 756e 6374 696f 6e20  d with function 
+0001f6f0: 7b66 756e 632e 5f5f 6e61 6d65 5f5f 7d22  {func.__name__}"
+0001f700: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
+0001f710: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+0001f720: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001f730: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001f740: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001f750: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
-0001f760: 2020 2064 6566 2063 6f6c 5f72 656d 6f76     def col_remov
-0001f770: 6528 7365 6c66 2c20 666c 6973 7429 3a0d  e(self, flist):.
-0001f780: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-0001f790: 2020 2020 2020 5265 6d6f 7665 2073 696e        Remove sin
-0001f7a0: 676c 6520 636f 6c75 6d6e 206f 7220 6c69  gle column or li
-0001f7b0: 7374 206f 6620 636f 6c75 6d6e 732e 0d0a  st of columns...
-0001f7c0: 0d0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
-0001f7d0: 7465 7273 0d0a 2020 2020 2020 2020 2d2d  ters..        --
-0001f7e0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
-0001f7f0: 2020 666c 6973 7420 3a20 7374 7269 6e67    flist : string
-0001f800: 2c20 6c69 7374 2c20 6f72 2064 6963 740d  , list, or dict.
-0001f810: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
-0001f820: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
-0001f830: 2d2d 2d0d 0a20 2020 2020 2020 204e 6f6e  ---..        Non
-0001f840: 650d 0a0d 0a20 2020 2020 2020 2045 7861  e....        Exa
-0001f850: 6d70 6c65 730d 0a20 2020 2020 2020 202d  mples..        -
-0001f860: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-0001f870: 203e 3e3e 2064 7320 3d20 4461 7461 7365   >>> ds = Datase
-0001f880: 7428 7b27 636f 6c5f 272b 7374 7228 6929  t({'col_'+str(i)
-0001f890: 3a20 7274 2e61 7261 6e67 6528 3529 2066  : rt.arange(5) f
-0001f8a0: 6f72 2069 2069 6e20 7261 6e67 6528 3529  or i in range(5)
-0001f8b0: 7d29 0d0a 2020 2020 2020 2020 3e3e 3e20  })..        >>> 
-0001f8c0: 6473 2e63 6f6c 5f72 656d 6f76 6528 5b27  ds.col_remove(['
-0001f8d0: 636f 6c5f 3227 2c20 2763 6f6c 5f30 275d  col_2', 'col_0']
-0001f8e0: 290d 0a20 2020 2020 2020 203e 3e3e 2064  )..        >>> d
-0001f8f0: 730d 0a20 2020 2020 2020 2023 2020 2063  s..        #   c
-0001f900: 6f6c 5f31 2020 2063 6f6c 5f33 2020 2063  ol_1   col_3   c
-0001f910: 6f6c 5f34 0d0a 2020 2020 2020 2020 2d20  ol_4..        - 
-0001f920: 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d20    -----   ----- 
-0001f930: 2020 2d2d 2d2d 2d0d 0a20 2020 2020 2020    -----..       
-0001f940: 2030 2020 2020 2020 2030 2020 2020 2020   0       0      
-0001f950: 2030 2020 2020 2020 2030 0d0a 2020 2020   0       0..    
-0001f960: 2020 2020 3120 2020 2020 2020 3120 2020      1       1   
-0001f970: 2020 2020 3120 2020 2020 2020 310d 0a20      1       1.. 
-0001f980: 2020 2020 2020 2032 2020 2020 2020 2032         2       2
-0001f990: 2020 2020 2020 2032 2020 2020 2020 2032         2       2
-0001f9a0: 0d0a 2020 2020 2020 2020 3320 2020 2020  ..        3     
-0001f9b0: 2020 3320 2020 2020 2020 3320 2020 2020    3       3     
-0001f9c0: 2020 330d 0a20 2020 2020 2020 2034 2020    3..        4  
-0001f9d0: 2020 2020 2034 2020 2020 2020 2034 2020       4       4  
-0001f9e0: 2020 2020 2034 0d0a 2020 2020 2020 2020       4..        
-0001f9f0: 2222 220d 0a20 2020 2020 2020 2069 6620  """..        if 
-0001fa00: 7365 6c66 2e69 735f 6c6f 636b 6564 2829  self.is_locked()
-0001fa10: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-0001fa20: 6169 7365 2041 7474 7269 6275 7465 4572  aise AttributeEr
-0001fa30: 726f 7228 224e 6f74 2061 6c6c 6f77 6564  ror("Not allowed
-0001fa40: 2074 6f20 6361 6c6c 2063 6f6c 5f72 656d   to call col_rem
-0001fa50: 6f76 6528 2920 6f6e 206c 6f63 6b65 6420  ove() on locked 
-0001fa60: 6f62 6a65 6374 2e22 290d 0a20 2020 2020  object.")..     
-0001fa70: 2020 2023 2066 6c69 7020 7369 6e67 6c65     # flip single
-0001fa80: 2073 7472 696e 6773 2074 6f20 6c69 7374   strings to list
-0001fa90: 7320 746f 2075 7365 2074 6865 2073 616d  s to use the sam
-0001faa0: 6520 726f 7574 696e 650d 0a20 2020 2020  e routine..     
-0001fab0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0001fac0: 2866 6c69 7374 2c20 2873 7472 2c20 6279  (flist, (str, by
-0001fad0: 7465 7329 293a 0d0a 2020 2020 2020 2020  tes)):..        
-0001fae0: 2020 2020 666c 6973 7420 3d20 5b66 6c69      flist = [fli
-0001faf0: 7374 5d0d 0a20 2020 2020 2020 2069 6620  st]..        if 
-0001fb00: 6973 696e 7374 616e 6365 2866 6c69 7374  isinstance(flist
-0001fb10: 2c20 286e 702e 6e64 6172 7261 792c 206c  , (np.ndarray, l
-0001fb20: 6973 742c 2074 7570 6c65 2c20 6469 6374  ist, tuple, dict
-0001fb30: 2929 3a0d 0a20 2020 2020 2020 2020 2020  )):..           
-0001fb40: 2023 2077 616e 7420 746f 2065 6e73 7572   # want to ensur
-0001fb50: 6520 6174 6f6d 6963 2062 6568 6176 696f  e atomic behavio
-0001fb60: 723a 0d0a 2020 2020 2020 2020 2020 2020  r:..            
-0001fb70: 7365 6c66 2e5f 656e 7375 7265 5f61 746f  self._ensure_ato
-0001fb80: 6d69 6328 666c 6973 742c 2073 656c 662e  mic(flist, self.
-0001fb90: 636f 6c5f 7265 6d6f 7665 290d 0a0d 0a20  col_remove).... 
-0001fba0: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-0001fbb0: 2069 6e20 666c 6973 743a 0d0a 2020 2020   in flist:..    
-0001fbc0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001fbd0: 2e5f 6465 6c65 7465 6974 656d 2869 290d  ._deleteitem(i).
-0001fbe0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-0001fbf0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0001fc00: 6520 5479 7065 4572 726f 7228 0d0a 2020  e TypeError(..  
-0001fc10: 2020 2020 2020 2020 2020 2020 2020 2246                "F
-0001fc20: 6965 6c64 7320 6d75 7374 2062 6520 6c69  ields must be li
-0001fc30: 7374 2c20 7475 706c 652c 206e 6461 7272  st, tuple, ndarr
-0001fc40: 6179 2c20 6469 6374 696f 6e61 7279 2028  ay, dictionary (
-0001fc50: 6b65 7973 2920 6f72 2061 2073 696e 676c  keys) or a singl
-0001fc60: 6520 756e 6963 6f64 6520 6f72 2062 7974  e unicode or byt
-0001fc70: 6520 7374 7269 6e67 2e22 0d0a 2020 2020  e string."..    
-0001fc80: 2020 2020 2020 2020 290d 0a0d 0a20 2020          )....   
-0001fc90: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+0001f750: 2d0d 0a20 2020 2064 6566 2063 6f6c 5f72  -..    def col_r
+0001f760: 656d 6f76 6528 7365 6c66 2c20 666c 6973  emove(self, flis
+0001f770: 7429 3a0d 0a20 2020 2020 2020 2022 2222  t):..        """
+0001f780: 0d0a 2020 2020 2020 2020 5265 6d6f 7665  ..        Remove
+0001f790: 2073 696e 676c 6520 636f 6c75 6d6e 206f   single column o
+0001f7a0: 7220 6c69 7374 206f 6620 636f 6c75 6d6e  r list of column
+0001f7b0: 732e 0d0a 0d0a 2020 2020 2020 2020 5061  s.....        Pa
+0001f7c0: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
+0001f7d0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
+0001f7e0: 2020 2020 2020 666c 6973 7420 3a20 7374        flist : st
+0001f7f0: 7269 6e67 2c20 6c69 7374 2c20 6f72 2064  ring, list, or d
+0001f800: 6963 740d 0a0d 0a20 2020 2020 2020 2052  ict....        R
+0001f810: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
+0001f820: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0001f830: 204e 6f6e 650d 0a0d 0a20 2020 2020 2020   None....       
+0001f840: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
+0001f850: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
+0001f860: 2020 2020 203e 3e3e 2064 7320 3d20 4461       >>> ds = Da
+0001f870: 7461 7365 7428 7b27 636f 6c5f 272b 7374  taset({'col_'+st
+0001f880: 7228 6929 3a20 7274 2e61 7261 6e67 6528  r(i): rt.arange(
+0001f890: 3529 2066 6f72 2069 2069 6e20 7261 6e67  5) for i in rang
+0001f8a0: 6528 3529 7d29 0d0a 2020 2020 2020 2020  e(5)})..        
+0001f8b0: 3e3e 3e20 6473 2e63 6f6c 5f72 656d 6f76  >>> ds.col_remov
+0001f8c0: 6528 5b27 636f 6c5f 3227 2c20 2763 6f6c  e(['col_2', 'col
+0001f8d0: 5f30 275d 290d 0a20 2020 2020 2020 203e  _0'])..        >
+0001f8e0: 3e3e 2064 730d 0a20 2020 2020 2020 2023  >> ds..        #
+0001f8f0: 2020 2063 6f6c 5f31 2020 2063 6f6c 5f33     col_1   col_3
+0001f900: 2020 2063 6f6c 5f34 0d0a 2020 2020 2020     col_4..      
+0001f910: 2020 2d20 2020 2d2d 2d2d 2d20 2020 2d2d    -   -----   --
+0001f920: 2d2d 2d20 2020 2d2d 2d2d 2d0d 0a20 2020  ---   -----..   
+0001f930: 2020 2020 2030 2020 2020 2020 2030 2020       0       0  
+0001f940: 2020 2020 2030 2020 2020 2020 2030 0d0a       0       0..
+0001f950: 2020 2020 2020 2020 3120 2020 2020 2020          1       
+0001f960: 3120 2020 2020 2020 3120 2020 2020 2020  1       1       
+0001f970: 310d 0a20 2020 2020 2020 2032 2020 2020  1..        2    
+0001f980: 2020 2032 2020 2020 2020 2032 2020 2020     2       2    
+0001f990: 2020 2032 0d0a 2020 2020 2020 2020 3320     2..        3 
+0001f9a0: 2020 2020 2020 3320 2020 2020 2020 3320        3       3 
+0001f9b0: 2020 2020 2020 330d 0a20 2020 2020 2020        3..       
+0001f9c0: 2034 2020 2020 2020 2034 2020 2020 2020   4       4      
+0001f9d0: 2034 2020 2020 2020 2034 0d0a 2020 2020   4       4..    
+0001f9e0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+0001f9f0: 2069 6620 7365 6c66 2e69 735f 6c6f 636b   if self.is_lock
+0001fa00: 6564 2829 3a0d 0a20 2020 2020 2020 2020  ed():..         
+0001fa10: 2020 2072 6169 7365 2041 7474 7269 6275     raise Attribu
+0001fa20: 7465 4572 726f 7228 224e 6f74 2061 6c6c  teError("Not all
+0001fa30: 6f77 6564 2074 6f20 6361 6c6c 2063 6f6c  owed to call col
+0001fa40: 5f72 656d 6f76 6528 2920 6f6e 206c 6f63  _remove() on loc
+0001fa50: 6b65 6420 6f62 6a65 6374 2e22 290d 0a20  ked object.").. 
+0001fa60: 2020 2020 2020 2023 2066 6c69 7020 7369         # flip si
+0001fa70: 6e67 6c65 2073 7472 696e 6773 2074 6f20  ngle strings to 
+0001fa80: 6c69 7374 7320 746f 2075 7365 2074 6865  lists to use the
+0001fa90: 2073 616d 6520 726f 7574 696e 650d 0a20   same routine.. 
+0001faa0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+0001fab0: 616e 6365 2866 6c69 7374 2c20 2873 7472  ance(flist, (str
+0001fac0: 2c20 6279 7465 7329 293a 0d0a 2020 2020  , bytes)):..    
+0001fad0: 2020 2020 2020 2020 666c 6973 7420 3d20          flist = 
+0001fae0: 5b66 6c69 7374 5d0d 0a20 2020 2020 2020  [flist]..       
+0001faf0: 2069 6620 6973 696e 7374 616e 6365 2866   if isinstance(f
+0001fb00: 6c69 7374 2c20 286e 702e 6e64 6172 7261  list, (np.ndarra
+0001fb10: 792c 206c 6973 742c 2074 7570 6c65 2c20  y, list, tuple, 
+0001fb20: 6469 6374 2929 3a0d 0a20 2020 2020 2020  dict)):..       
+0001fb30: 2020 2020 2023 2077 616e 7420 746f 2065       # want to e
+0001fb40: 6e73 7572 6520 6174 6f6d 6963 2062 6568  nsure atomic beh
+0001fb50: 6176 696f 723a 0d0a 2020 2020 2020 2020  avior:..        
+0001fb60: 2020 2020 7365 6c66 2e5f 656e 7375 7265      self._ensure
+0001fb70: 5f61 746f 6d69 6328 666c 6973 742c 2073  _atomic(flist, s
+0001fb80: 656c 662e 636f 6c5f 7265 6d6f 7665 290d  elf.col_remove).
+0001fb90: 0a0d 0a20 2020 2020 2020 2020 2020 2066  ...            f
+0001fba0: 6f72 2069 2069 6e20 666c 6973 743a 0d0a  or i in flist:..
+0001fbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fbc0: 7365 6c66 2e5f 6465 6c65 7465 6974 656d  self._deleteitem
+0001fbd0: 2869 290d 0a20 2020 2020 2020 2065 6c73  (i)..        els
+0001fbe0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0001fbf0: 7261 6973 6520 5479 7065 4572 726f 7228  raise TypeError(
+0001fc00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001fc10: 2020 2246 6965 6c64 7320 6d75 7374 2062    "Fields must b
+0001fc20: 6520 6c69 7374 2c20 7475 706c 652c 206e  e list, tuple, n
+0001fc30: 6461 7272 6179 2c20 6469 6374 696f 6e61  darray, dictiona
+0001fc40: 7279 2028 6b65 7973 2920 6f72 2061 2073  ry (keys) or a s
+0001fc50: 696e 676c 6520 756e 6963 6f64 6520 6f72  ingle unicode or
+0001fc60: 2062 7974 6520 7374 7269 6e67 2e22 0d0a   byte string."..
+0001fc70: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+0001fc80: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+0001fc90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0001fca0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001fcb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0001fcc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
-0001fcd0: 2064 6566 2063 6f6c 5f70 6f70 2873 656c   def col_pop(sel
-0001fce0: 662c 2063 6f6c 7370 6563 293a 0d0a 2020  f, colspec):..  
-0001fcf0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0001fd00: 2020 2063 6f6c 7370 6563 2069 7320 6173     colspec is as
-0001fd10: 2066 6f72 205b 5d20 2867 6574 6974 656d   for [] (getitem
-0001fd20: 292e 0d0a 2020 2020 2020 2020 4c69 7374  )...        List
-0001fd30: 2069 6e70 7574 2077 696c 6c20 7265 7475   input will retu
-0001fd40: 726e 2061 2073 7562 2d53 7472 7563 742c  rn a sub-Struct,
-0001fd50: 2072 656d 6f76 696e 6720 6974 2066 726f   removing it fro
-0001fd60: 6d20 6375 7272 656e 7420 6f62 6a65 6374  m current object
-0001fd70: 2e0d 0a20 2020 2020 2020 2053 696e 676c  ...        Singl
-0001fd80: 652d 636f 6c75 6d6e 2028 2273 7472 696e  e-column ("strin
-0001fd90: 6722 2c20 7369 6e67 6c65 2069 6e74 6567  g", single integ
-0001fda0: 6572 2920 696e 7075 7420 7769 6c6c 2072  er) input will r
-0001fdb0: 6574 7572 6e20 6120 7369 6e67 6c65 2022  eturn a single "
-0001fdc0: 636f 6c75 6d6e 222e 0d0a 0d0a 2020 2020  column".....    
-0001fdd0: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
-0001fde0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-0001fdf0: 2d2d 0d0a 2020 2020 2020 2020 636f 6c73  --..        cols
-0001fe00: 7065 6320 3a20 6c69 7374 2c20 7374 7269  pec : list, stri
-0001fe10: 6e67 2c20 6f72 2069 6e74 6567 6572 0d0a  ng, or integer..
-0001fe20: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-0001fe30: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-0001fe40: 2d2d 0d0a 2020 2020 2020 2020 6f62 6a0d  --..        obj.
-0001fe50: 0a20 2020 2020 2020 2020 2020 2053 696e  .            Sin
-0001fe60: 676c 6520 7661 6c75 6520 6f72 206e 6577  gle value or new
-0001fe70: 2028 7361 6d65 2d74 7970 6529 206f 626a   (same-type) obj
-0001fe80: 6563 7420 636f 6e74 6169 6e69 6e67 2074  ect containing t
-0001fe90: 6865 2072 656d 6f76 6564 2064 6174 612e  he removed data.
-0001fea0: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
-0001feb0: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
-0001fec0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0001fed0: 3e3e 3e20 6473 203d 2072 742e 4461 7461  >>> ds = rt.Data
-0001fee0: 7365 7428 7b27 636f 6c5f 272b 7374 7228  set({'col_'+str(
-0001fef0: 6929 3a20 7274 2e61 7261 6e67 6528 3529  i): rt.arange(5)
-0001ff00: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
-0001ff10: 3329 7d29 0d0a 2020 2020 2020 2020 3e3e  3)})..        >>
-0001ff20: 3e20 6473 0d0a 2020 2020 2020 2020 2320  > ds..        # 
-0001ff30: 2020 636f 6c5f 3020 2020 636f 6c5f 3120    col_0   col_1 
-0001ff40: 2020 636f 6c5f 320d 0a20 2020 2020 2020    col_2..       
-0001ff50: 202d 2020 202d 2d2d 2d2d 2020 202d 2d2d   -   -----   ---
-0001ff60: 2d2d 2020 202d 2d2d 2d2d 0d0a 2020 2020  --   -----..    
-0001ff70: 2020 2020 3020 2020 2020 2020 3020 2020      0       0   
-0001ff80: 2020 2020 3020 2020 2020 2020 300d 0a20      0       0.. 
-0001ff90: 2020 2020 2020 2031 2020 2020 2020 2031         1       1
-0001ffa0: 2020 2020 2020 2031 2020 2020 2020 2031         1       1
-0001ffb0: 0d0a 2020 2020 2020 2020 3220 2020 2020  ..        2     
-0001ffc0: 2020 3220 2020 2020 2020 3220 2020 2020    2       2     
-0001ffd0: 2020 320d 0a20 2020 2020 2020 2033 2020    2..        3  
-0001ffe0: 2020 2020 2033 2020 2020 2020 2033 2020       3       3  
-0001fff0: 2020 2020 2033 0d0a 2020 2020 2020 2020       3..        
-00020000: 3420 2020 2020 2020 3420 2020 2020 2020  4       4       
-00020010: 3420 2020 2020 2020 340d 0a20 2020 2020  4       4..     
-00020020: 2020 203e 3e3e 2063 6f6c 203d 2064 732e     >>> col = ds.
-00020030: 636f 6c5f 706f 7028 2763 6f6c 5f31 2729  col_pop('col_1')
-00020040: 0d0a 2020 2020 2020 2020 3e3e 3e20 6473  ..        >>> ds
-00020050: 0d0a 2020 2020 2020 2020 2320 2020 636f  ..        #   co
-00020060: 6c5f 3020 2020 636f 6c5f 320d 0a20 2020  l_0   col_2..   
-00020070: 2020 2020 202d 2020 202d 2d2d 2d2d 2020       -   -----  
-00020080: 202d 2d2d 2d2d 0d0a 2020 2020 2020 2020   -----..        
-00020090: 3020 2020 2020 2020 3020 2020 2020 2020  0       0       
-000200a0: 300d 0a20 2020 2020 2020 2031 2020 2020  0..        1    
-000200b0: 2020 2031 2020 2020 2020 2031 0d0a 2020     1       1..  
-000200c0: 2020 2020 2020 3220 2020 2020 2020 3220        2       2 
-000200d0: 2020 2020 2020 320d 0a20 2020 2020 2020        2..       
-000200e0: 2033 2020 2020 2020 2033 2020 2020 2020   3       3      
-000200f0: 2033 0d0a 2020 2020 2020 2020 3420 2020   3..        4   
-00020100: 2020 2020 3420 2020 2020 2020 340d 0a20      4       4.. 
-00020110: 2020 2020 2020 203e 3e3e 2063 6f6c 0d0a         >>> col..
-00020120: 2020 2020 2020 2020 4661 7374 4172 7261          FastArra
-00020130: 7928 5b30 2c20 312c 2032 2c20 332c 2034  y([0, 1, 2, 3, 4
-00020140: 5d29 0d0a 2020 2020 2020 2020 2222 220d  ])..        """.
-00020150: 0a20 2020 2020 2020 2063 6f6c 5f69 6478  .        col_idx
-00020160: 2c20 5f2c 205f 2c20 5f2c 205f 203d 2073  , _, _, _, _ = s
-00020170: 656c 662e 5f65 7874 7261 6374 5f69 6e64  elf._extract_ind
-00020180: 6578 696e 6728 636f 6c73 7065 6329 0d0a  exing(colspec)..
-00020190: 2020 2020 2020 2020 6966 2063 6f6c 5f69          if col_i
-000201a0: 6478 2069 7320 4e6f 6e65 3a0d 0a20 2020  dx is None:..   
-000201b0: 2020 2020 2020 2020 2063 6f6c 5f69 6478           col_idx
-000201c0: 203d 206c 6973 7428 7365 6c66 2e6b 6579   = list(self.key
-000201d0: 7328 2929 0d0a 2020 2020 2020 2020 2320  s())..        # 
-000201e0: 544f 444f 3a20 7573 6520 5f65 6e73 7572  TODO: use _ensur
-000201f0: 655f 6174 6f6d 6963 2068 6572 650d 0a20  e_atomic here.. 
-00020200: 2020 2020 2020 2063 6f6c 5f73 6574 203d         col_set =
-00020210: 2073 6574 2863 6f6c 5f69 6478 2069 6620   set(col_idx if 
-00020220: 6973 5f6c 6973 745f 6c69 6b65 2863 6f6c  is_list_like(col
-00020230: 5f69 6478 2920 656c 7365 205b 636f 6c5f  _idx) else [col_
-00020240: 6964 785d 290d 0a20 2020 2020 2020 206d  idx])..        m
-00020250: 6973 7369 6e67 203d 2063 6f6c 5f73 6574  issing = col_set
-00020260: 202d 2073 6574 2873 656c 662e 6b65 7973   - set(self.keys
-00020270: 2829 290d 0a20 2020 2020 2020 2069 6620  ())..        if 
-00020280: 6d69 7373 696e 673a 0d0a 2020 2020 2020  missing:..      
-00020290: 2020 2020 2020 7261 6973 6520 496e 6465        raise Inde
-000202a0: 7845 7272 6f72 2822 556e 6b6e 6f77 6e20  xError("Unknown 
-000202b0: 636f 6c75 6d6e 2873 2920 7b7d 2064 6f28  column(s) {} do(
-000202c0: 6573 2920 6e6f 7420 6578 6973 7420 616e  es) not exist an
-000202d0: 6420 6361 6e6e 6f74 2062 6520 706f 7070  d cannot be popp
-000202e0: 6564 2e22 2e66 6f72 6d61 7428 736f 7274  ed.".format(sort
-000202f0: 6564 286d 6973 7369 6e67 2929 290d 0a0d  ed(missing)))...
-00020300: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-00020310: 7374 616e 6365 2863 6f6c 5f69 6478 2c20  stance(col_idx, 
-00020320: 6c69 7374 293a 0d0a 2020 2020 2020 2020  list):..        
-00020330: 2020 2020 6e65 7764 7320 3d20 7365 6c66      newds = self
-00020340: 5b63 6f6c 5f69 6478 5d0d 0a20 2020 2020  [col_idx]..     
-00020350: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00020360: 2020 2020 2020 6e65 7764 7320 3d20 6765        newds = ge
-00020370: 7461 7474 7228 7365 6c66 2c20 636f 6c5f  tattr(self, col_
-00020380: 6964 7829 0d0a 2020 2020 2020 2020 7365  idx)..        se
-00020390: 6c66 2e63 6f6c 5f72 656d 6f76 6528 636f  lf.col_remove(co
-000203a0: 6c5f 6964 7829 0d0a 2020 2020 2020 2020  l_idx)..        
-000203b0: 7265 7475 726e 206e 6577 6473 0d0a 0d0a  return newds....
-000203c0: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+0001fcb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
+0001fcc0: 0a20 2020 2064 6566 2063 6f6c 5f70 6f70  .    def col_pop
+0001fcd0: 2873 656c 662c 2063 6f6c 7370 6563 293a  (self, colspec):
+0001fce0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0001fcf0: 2020 2020 2020 2063 6f6c 7370 6563 2069         colspec i
+0001fd00: 7320 6173 2066 6f72 205b 5d20 2867 6574  s as for [] (get
+0001fd10: 6974 656d 292e 0d0a 2020 2020 2020 2020  item)...        
+0001fd20: 4c69 7374 2069 6e70 7574 2077 696c 6c20  List input will 
+0001fd30: 7265 7475 726e 2061 2073 7562 2d53 7472  return a sub-Str
+0001fd40: 7563 742c 2072 656d 6f76 696e 6720 6974  uct, removing it
+0001fd50: 2066 726f 6d20 6375 7272 656e 7420 6f62   from current ob
+0001fd60: 6a65 6374 2e0d 0a20 2020 2020 2020 2053  ject...        S
+0001fd70: 696e 676c 652d 636f 6c75 6d6e 2028 2273  ingle-column ("s
+0001fd80: 7472 696e 6722 2c20 7369 6e67 6c65 2069  tring", single i
+0001fd90: 6e74 6567 6572 2920 696e 7075 7420 7769  nteger) input wi
+0001fda0: 6c6c 2072 6574 7572 6e20 6120 7369 6e67  ll return a sing
+0001fdb0: 6c65 2022 636f 6c75 6d6e 222e 0d0a 0d0a  le "column".....
+0001fdc0: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
+0001fdd0: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
+0001fde0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0001fdf0: 636f 6c73 7065 6320 3a20 6c69 7374 2c20  colspec : list, 
+0001fe00: 7374 7269 6e67 2c20 6f72 2069 6e74 6567  string, or integ
+0001fe10: 6572 0d0a 0d0a 2020 2020 2020 2020 5265  er....        Re
+0001fe20: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
+0001fe30: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0001fe40: 6f62 6a0d 0a20 2020 2020 2020 2020 2020  obj..           
+0001fe50: 2053 696e 676c 6520 7661 6c75 6520 6f72   Single value or
+0001fe60: 206e 6577 2028 7361 6d65 2d74 7970 6529   new (same-type)
+0001fe70: 206f 626a 6563 7420 636f 6e74 6169 6e69   object containi
+0001fe80: 6e67 2074 6865 2072 656d 6f76 6564 2064  ng the removed d
+0001fe90: 6174 612e 0d0a 0d0a 2020 2020 2020 2020  ata.....        
+0001fea0: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
+0001feb0: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+0001fec0: 2020 2020 3e3e 3e20 6473 203d 2072 742e      >>> ds = rt.
+0001fed0: 4461 7461 7365 7428 7b27 636f 6c5f 272b  Dataset({'col_'+
+0001fee0: 7374 7228 6929 3a20 7274 2e61 7261 6e67  str(i): rt.arang
+0001fef0: 6528 3529 2066 6f72 2069 2069 6e20 7261  e(5) for i in ra
+0001ff00: 6e67 6528 3329 7d29 0d0a 2020 2020 2020  nge(3)})..      
+0001ff10: 2020 3e3e 3e20 6473 0d0a 2020 2020 2020    >>> ds..      
+0001ff20: 2020 2320 2020 636f 6c5f 3020 2020 636f    #   col_0   co
+0001ff30: 6c5f 3120 2020 636f 6c5f 320d 0a20 2020  l_1   col_2..   
+0001ff40: 2020 2020 202d 2020 202d 2d2d 2d2d 2020       -   -----  
+0001ff50: 202d 2d2d 2d2d 2020 202d 2d2d 2d2d 0d0a   -----   -----..
+0001ff60: 2020 2020 2020 2020 3020 2020 2020 2020          0       
+0001ff70: 3020 2020 2020 2020 3020 2020 2020 2020  0       0       
+0001ff80: 300d 0a20 2020 2020 2020 2031 2020 2020  0..        1    
+0001ff90: 2020 2031 2020 2020 2020 2031 2020 2020     1       1    
+0001ffa0: 2020 2031 0d0a 2020 2020 2020 2020 3220     1..        2 
+0001ffb0: 2020 2020 2020 3220 2020 2020 2020 3220        2       2 
+0001ffc0: 2020 2020 2020 320d 0a20 2020 2020 2020        2..       
+0001ffd0: 2033 2020 2020 2020 2033 2020 2020 2020   3       3      
+0001ffe0: 2033 2020 2020 2020 2033 0d0a 2020 2020   3       3..    
+0001fff0: 2020 2020 3420 2020 2020 2020 3420 2020      4       4   
+00020000: 2020 2020 3420 2020 2020 2020 340d 0a20      4       4.. 
+00020010: 2020 2020 2020 203e 3e3e 2063 6f6c 203d         >>> col =
+00020020: 2064 732e 636f 6c5f 706f 7028 2763 6f6c   ds.col_pop('col
+00020030: 5f31 2729 0d0a 2020 2020 2020 2020 3e3e  _1')..        >>
+00020040: 3e20 6473 0d0a 2020 2020 2020 2020 2320  > ds..        # 
+00020050: 2020 636f 6c5f 3020 2020 636f 6c5f 320d    col_0   col_2.
+00020060: 0a20 2020 2020 2020 202d 2020 202d 2d2d  .        -   ---
+00020070: 2d2d 2020 202d 2d2d 2d2d 0d0a 2020 2020  --   -----..    
+00020080: 2020 2020 3020 2020 2020 2020 3020 2020      0       0   
+00020090: 2020 2020 300d 0a20 2020 2020 2020 2031      0..        1
+000200a0: 2020 2020 2020 2031 2020 2020 2020 2031         1       1
+000200b0: 0d0a 2020 2020 2020 2020 3220 2020 2020  ..        2     
+000200c0: 2020 3220 2020 2020 2020 320d 0a20 2020    2       2..   
+000200d0: 2020 2020 2033 2020 2020 2020 2033 2020       3       3  
+000200e0: 2020 2020 2033 0d0a 2020 2020 2020 2020       3..        
+000200f0: 3420 2020 2020 2020 3420 2020 2020 2020  4       4       
+00020100: 340d 0a20 2020 2020 2020 203e 3e3e 2063  4..        >>> c
+00020110: 6f6c 0d0a 2020 2020 2020 2020 4661 7374  ol..        Fast
+00020120: 4172 7261 7928 5b30 2c20 312c 2032 2c20  Array([0, 1, 2, 
+00020130: 332c 2034 5d29 0d0a 2020 2020 2020 2020  3, 4])..        
+00020140: 2222 220d 0a20 2020 2020 2020 2063 6f6c  """..        col
+00020150: 5f69 6478 2c20 5f2c 205f 2c20 5f2c 205f  _idx, _, _, _, _
+00020160: 203d 2073 656c 662e 5f65 7874 7261 6374   = self._extract
+00020170: 5f69 6e64 6578 696e 6728 636f 6c73 7065  _indexing(colspe
+00020180: 6329 0d0a 2020 2020 2020 2020 6966 2063  c)..        if c
+00020190: 6f6c 5f69 6478 2069 7320 4e6f 6e65 3a0d  ol_idx is None:.
+000201a0: 0a20 2020 2020 2020 2020 2020 2063 6f6c  .            col
+000201b0: 5f69 6478 203d 206c 6973 7428 7365 6c66  _idx = list(self
+000201c0: 2e6b 6579 7328 2929 0d0a 2020 2020 2020  .keys())..      
+000201d0: 2020 2320 544f 444f 3a20 7573 6520 5f65    # TODO: use _e
+000201e0: 6e73 7572 655f 6174 6f6d 6963 2068 6572  nsure_atomic her
+000201f0: 650d 0a20 2020 2020 2020 2063 6f6c 5f73  e..        col_s
+00020200: 6574 203d 2073 6574 2863 6f6c 5f69 6478  et = set(col_idx
+00020210: 2069 6620 6973 5f6c 6973 745f 6c69 6b65   if is_list_like
+00020220: 2863 6f6c 5f69 6478 2920 656c 7365 205b  (col_idx) else [
+00020230: 636f 6c5f 6964 785d 290d 0a20 2020 2020  col_idx])..     
+00020240: 2020 206d 6973 7369 6e67 203d 2063 6f6c     missing = col
+00020250: 5f73 6574 202d 2073 6574 2873 656c 662e  _set - set(self.
+00020260: 6b65 7973 2829 290d 0a20 2020 2020 2020  keys())..       
+00020270: 2069 6620 6d69 7373 696e 673a 0d0a 2020   if missing:..  
+00020280: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00020290: 496e 6465 7845 7272 6f72 2822 556e 6b6e  IndexError("Unkn
+000202a0: 6f77 6e20 636f 6c75 6d6e 2873 2920 7b7d  own column(s) {}
+000202b0: 2064 6f28 6573 2920 6e6f 7420 6578 6973   do(es) not exis
+000202c0: 7420 616e 6420 6361 6e6e 6f74 2062 6520  t and cannot be 
+000202d0: 706f 7070 6564 2e22 2e66 6f72 6d61 7428  popped.".format(
+000202e0: 736f 7274 6564 286d 6973 7369 6e67 2929  sorted(missing))
+000202f0: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
+00020300: 6973 696e 7374 616e 6365 2863 6f6c 5f69  isinstance(col_i
+00020310: 6478 2c20 6c69 7374 293a 0d0a 2020 2020  dx, list):..    
+00020320: 2020 2020 2020 2020 6e65 7764 7320 3d20          newds = 
+00020330: 7365 6c66 5b63 6f6c 5f69 6478 5d0d 0a20  self[col_idx].. 
+00020340: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00020350: 2020 2020 2020 2020 2020 6e65 7764 7320            newds 
+00020360: 3d20 6765 7461 7474 7228 7365 6c66 2c20  = getattr(self, 
+00020370: 636f 6c5f 6964 7829 0d0a 2020 2020 2020  col_idx)..      
+00020380: 2020 7365 6c66 2e63 6f6c 5f72 656d 6f76    self.col_remov
+00020390: 6528 636f 6c5f 6964 7829 0d0a 2020 2020  e(col_idx)..    
+000203a0: 2020 2020 7265 7475 726e 206e 6577 6473      return newds
+000203b0: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+000203c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000203d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000203e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000203f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
-00020400: 2020 2020 6465 6620 636f 6c5f 7374 725f      def col_str_
-00020410: 6d61 7463 6828 7365 6c66 2c20 6578 7072  match(self, expr
-00020420: 6573 7369 6f6e 2c20 666c 6167 733d 3029  ession, flags=0)
-00020430: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-00020440: 2020 2020 2020 2020 4372 6561 7465 2061          Create a
-00020450: 2062 6f6f 6c65 616e 206d 6173 6b20 7665   boolean mask ve
-00020460: 6374 6f72 2066 6f72 2063 6f6c 756d 6e73  ctor for columns
-00020470: 2077 686f 7365 206e 616d 6573 206d 6174   whose names mat
-00020480: 6368 2074 6865 2072 6567 6578 2e0d 0a0d  ch the regex....
-00020490: 0a20 2020 2020 2020 2055 7365 7320 6060  .        Uses ``
-000204a0: 7265 2e6d 6174 6368 2829 6060 2c20 6e6f  re.match()``, no
-000204b0: 7420 6060 7265 2e73 6561 7263 6828 2960  t ``re.search()`
-000204c0: 602e 0d0a 0d0a 2020 2020 2020 2020 5061  `.....        Pa
-000204d0: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
-000204e0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
-000204f0: 2020 2020 2020 6578 7072 6573 7369 6f6e        expression
-00020500: 203a 2073 7472 0d0a 2020 2020 2020 2020   : str..        
-00020510: 2020 2020 7265 6775 6c61 7220 6578 7072      regular expr
-00020520: 6573 7369 6f6e 0d0a 2020 2020 2020 2020  ession..        
-00020530: 666c 6167 730d 0a20 2020 2020 2020 2020  flags..         
-00020540: 2020 2072 6567 6578 2066 6c61 6773 2028     regex flags (
-00020550: 6672 6f6d 2060 6072 6560 6020 6d6f 6475  from ``re`` modu
-00020560: 6c65 292e 0d0a 0d0a 2020 2020 2020 2020  le).....        
-00020570: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
-00020580: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
-00020590: 2020 4661 7374 4172 7261 790d 0a20 2020    FastArray..   
-000205a0: 2020 2020 2020 2020 2041 7272 6179 206f           Array o
-000205b0: 6620 626f 6f6c 7320 286c 656e 206e 636f  f bools (len nco
-000205c0: 6c73 2920 7768 6963 6820 6973 2074 7275  ls) which is tru
-000205d0: 6520 666f 7220 636f 6c75 6d6e 7320 7768  e for columns wh
-000205e0: 6963 6820 6d61 7463 6820 7468 6520 7265  ich match the re
-000205f0: 6765 782e 0d0a 0d0a 2020 2020 2020 2020  gex.....        
-00020600: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
-00020610: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-00020620: 2020 2020 3e3e 3e20 7374 203d 2072 742e      >>> st = rt.
-00020630: 5374 7275 6374 287b 0d0a 2020 2020 2020  Struct({..      
-00020640: 2020 2e2e 2e20 2770 7269 6365 2720 3a20    ... 'price' : 
-00020650: 6172 616e 6765 2835 292c 0d0a 2020 2020  arange(5),..    
-00020660: 2020 2020 2e2e 2e20 2774 7261 6465 5f74      ... 'trade_t
-00020670: 696d 6527 203a 2072 742e 6172 616e 6765  ime' : rt.arange
-00020680: 2835 2920 2a20 3130 3030 2c20 2020 2020  (5) * 1000,     
-00020690: 2020 2023 2065 7870 6563 7465 6420 746f     # expected to
-000206a0: 2072 6567 6578 206d 6174 6368 2060 2e2a   regex match `.*
-000206b0: 7469 6d65 2e2a 600d 0a20 2020 2020 2020  time.*`..       
-000206c0: 202e 2e2e 2027 6e61 6d65 2720 3a20 7274   ... 'name' : rt
-000206d0: 2e46 4128 5b27 6127 2c27 6227 2c27 6327  .FA(['a','b','c'
-000206e0: 2c27 6427 2c27 6527 5d29 2c0d 0a20 2020  ,'d','e']),..   
-000206f0: 2020 2020 202e 2e2e 2027 6f74 6865 725f       ... 'other_
-00020700: 7472 6164 655f 7469 6d65 2720 3a20 7274  trade_time' : rt
-00020710: 2e61 7261 6e67 6528 3529 202a 2031 3030  .arange(5) * 100
-00020720: 302c 2020 2320 6578 7065 6374 6564 2074  0,  # expected t
-00020730: 6f20 7265 6765 7820 6d61 7463 6820 602e  o regex match `.
-00020740: 2a74 696d 652e 2a60 0d0a 2020 2020 2020  *time.*`..      
-00020750: 2020 2e2e 2e20 7d29 0d0a 2020 2020 2020    ... })..      
-00020760: 2020 3e3e 3e20 7374 2e63 6f6c 5f73 7472    >>> st.col_str
-00020770: 5f6d 6174 6368 2872 272e 2a74 696d 652e  _match(r'.*time.
-00020780: 2a27 290d 0a20 2020 2020 2020 2046 6173  *')..        Fas
-00020790: 7441 7272 6179 285b 4661 6c73 652c 2020  tArray([False,  
-000207a0: 5472 7565 2c20 4661 6c73 652c 2054 7275  True, False, Tru
-000207b0: 655d 290d 0a20 2020 2020 2020 2022 2222  e])..        """
-000207c0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-000207d0: 2054 7970 6552 6567 6973 7465 722e 4661   TypeRegister.Fa
-000207e0: 7374 4172 7261 7928 7365 6c66 2e5f 616c  stArray(self._al
-000207f0: 6c5f 6974 656d 732e 6974 656d 5f73 7472  l_items.item_str
-00020800: 5f6d 6174 6368 2865 7870 7265 7373 696f  _match(expressio
-00020810: 6e2c 2066 6c61 6773 3d66 6c61 6773 2929  n, flags=flags))
-00020820: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+000203f0: 2d2d 0d0a 2020 2020 6465 6620 636f 6c5f  --..    def col_
+00020400: 7374 725f 6d61 7463 6828 7365 6c66 2c20  str_match(self, 
+00020410: 6578 7072 6573 7369 6f6e 2c20 666c 6167  expression, flag
+00020420: 733d 3029 3a0d 0a20 2020 2020 2020 2022  s=0):..        "
+00020430: 2222 0d0a 2020 2020 2020 2020 4372 6561  ""..        Crea
+00020440: 7465 2061 2062 6f6f 6c65 616e 206d 6173  te a boolean mas
+00020450: 6b20 7665 6374 6f72 2066 6f72 2063 6f6c  k vector for col
+00020460: 756d 6e73 2077 686f 7365 206e 616d 6573  umns whose names
+00020470: 206d 6174 6368 2074 6865 2072 6567 6578   match the regex
+00020480: 2e0d 0a0d 0a20 2020 2020 2020 2055 7365  .....        Use
+00020490: 7320 6060 7265 2e6d 6174 6368 2829 6060  s ``re.match()``
+000204a0: 2c20 6e6f 7420 6060 7265 2e73 6561 7263  , not ``re.searc
+000204b0: 6828 2960 602e 0d0a 0d0a 2020 2020 2020  h()``.....      
+000204c0: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
+000204d0: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
+000204e0: 0d0a 2020 2020 2020 2020 6578 7072 6573  ..        expres
+000204f0: 7369 6f6e 203a 2073 7472 0d0a 2020 2020  sion : str..    
+00020500: 2020 2020 2020 2020 7265 6775 6c61 7220          regular 
+00020510: 6578 7072 6573 7369 6f6e 0d0a 2020 2020  expression..    
+00020520: 2020 2020 666c 6167 730d 0a20 2020 2020      flags..     
+00020530: 2020 2020 2020 2072 6567 6578 2066 6c61         regex fla
+00020540: 6773 2028 6672 6f6d 2060 6072 6560 6020  gs (from ``re`` 
+00020550: 6d6f 6475 6c65 292e 0d0a 0d0a 2020 2020  module).....    
+00020560: 2020 2020 5265 7475 726e 730d 0a20 2020      Returns..   
+00020570: 2020 2020 202d 2d2d 2d2d 2d2d 0d0a 2020       -------..  
+00020580: 2020 2020 2020 4661 7374 4172 7261 790d        FastArray.
+00020590: 0a20 2020 2020 2020 2020 2020 2041 7272  .            Arr
+000205a0: 6179 206f 6620 626f 6f6c 7320 286c 656e  ay of bools (len
+000205b0: 206e 636f 6c73 2920 7768 6963 6820 6973   ncols) which is
+000205c0: 2074 7275 6520 666f 7220 636f 6c75 6d6e   true for column
+000205d0: 7320 7768 6963 6820 6d61 7463 6820 7468  s which match th
+000205e0: 6520 7265 6765 782e 0d0a 0d0a 2020 2020  e regex.....    
+000205f0: 2020 2020 4578 616d 706c 6573 0d0a 2020      Examples..  
+00020600: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
+00020610: 2020 2020 2020 2020 3e3e 3e20 7374 203d          >>> st =
+00020620: 2072 742e 5374 7275 6374 287b 0d0a 2020   rt.Struct({..  
+00020630: 2020 2020 2020 2e2e 2e20 2770 7269 6365        ... 'price
+00020640: 2720 3a20 6172 616e 6765 2835 292c 0d0a  ' : arange(5),..
+00020650: 2020 2020 2020 2020 2e2e 2e20 2774 7261          ... 'tra
+00020660: 6465 5f74 696d 6527 203a 2072 742e 6172  de_time' : rt.ar
+00020670: 616e 6765 2835 2920 2a20 3130 3030 2c20  ange(5) * 1000, 
+00020680: 2020 2020 2020 2023 2065 7870 6563 7465         # expecte
+00020690: 6420 746f 2072 6567 6578 206d 6174 6368  d to regex match
+000206a0: 2060 2e2a 7469 6d65 2e2a 600d 0a20 2020   `.*time.*`..   
+000206b0: 2020 2020 202e 2e2e 2027 6e61 6d65 2720       ... 'name' 
+000206c0: 3a20 7274 2e46 4128 5b27 6127 2c27 6227  : rt.FA(['a','b'
+000206d0: 2c27 6327 2c27 6427 2c27 6527 5d29 2c0d  ,'c','d','e']),.
+000206e0: 0a20 2020 2020 2020 202e 2e2e 2027 6f74  .        ... 'ot
+000206f0: 6865 725f 7472 6164 655f 7469 6d65 2720  her_trade_time' 
+00020700: 3a20 7274 2e61 7261 6e67 6528 3529 202a  : rt.arange(5) *
+00020710: 2031 3030 302c 2020 2320 6578 7065 6374   1000,  # expect
+00020720: 6564 2074 6f20 7265 6765 7820 6d61 7463  ed to regex matc
+00020730: 6820 602e 2a74 696d 652e 2a60 0d0a 2020  h `.*time.*`..  
+00020740: 2020 2020 2020 2e2e 2e20 7d29 0d0a 2020        ... })..  
+00020750: 2020 2020 2020 3e3e 3e20 7374 2e63 6f6c        >>> st.col
+00020760: 5f73 7472 5f6d 6174 6368 2872 272e 2a74  _str_match(r'.*t
+00020770: 696d 652e 2a27 290d 0a20 2020 2020 2020  ime.*')..       
+00020780: 2046 6173 7441 7272 6179 285b 4661 6c73   FastArray([Fals
+00020790: 652c 2020 5472 7565 2c20 4661 6c73 652c  e,  True, False,
+000207a0: 2054 7275 655d 290d 0a20 2020 2020 2020   True])..       
+000207b0: 2022 2222 0d0a 2020 2020 2020 2020 7265   """..        re
+000207c0: 7475 726e 2054 7970 6552 6567 6973 7465  turn TypeRegiste
+000207d0: 722e 4661 7374 4172 7261 7928 7365 6c66  r.FastArray(self
+000207e0: 2e5f 616c 6c5f 6974 656d 732e 6974 656d  ._all_items.item
+000207f0: 5f73 7472 5f6d 6174 6368 2865 7870 7265  _str_match(expre
+00020800: 7373 696f 6e2c 2066 6c61 6773 3d66 6c61  ssion, flags=fla
+00020810: 6773 2929 0d0a 0d0a 2020 2020 2320 2d2d  gs))....    # --
+00020820: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00020830: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00020840: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00020850: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00020860: 2d2d 0d0a 2020 2020 6465 6620 636f 6c5f  --..    def col_
-00020870: 7374 725f 7265 706c 6163 6528 7365 6c66  str_replace(self
-00020880: 2c20 6f6c 643a 2073 7472 2c20 6e65 773a  , old: str, new:
-00020890: 2073 7472 2c20 6d61 783a 2069 6e74 203d   str, max: int =
-000208a0: 202d 3129 3a0d 0a20 2020 2020 2020 2022   -1):..        "
-000208b0: 2222 0d0a 2020 2020 2020 2020 4966 2061  ""..        If a
-000208c0: 2063 6f6c 756d 6e20 6e61 6d65 2063 6f6e   column name con
-000208d0: 7461 696e 7320 7468 6520 6f6c 6420 7374  tains the old st
-000208e0: 7269 6e67 2c20 7468 6520 6f6c 6420 7374  ring, the old st
-000208f0: 7269 6e67 2077 696c 6c20 6265 2072 6570  ring will be rep
-00020900: 6c61 6365 6420 7769 7468 2074 6865 206e  laced with the n
-00020910: 6577 206f 6e65 2e0d 0a20 2020 2020 2020  ew one...       
-00020920: 2049 6620 7265 706c 6163 696e 6720 7468   If replacing th
-00020930: 6520 7374 7269 6e67 2077 696c 6c20 636f  e string will co
-00020940: 6e66 6c69 6374 2077 6974 6820 616e 2065  nflict with an e
-00020950: 7869 7374 696e 6720 636f 6c75 6d6e 206e  xisting column n
-00020960: 616d 652c 2061 6e20 6572 726f 7220 7769  ame, an error wi
-00020970: 6c6c 2062 6520 7261 6973 6564 2e0d 0a20  ll be raised... 
-00020980: 2020 2020 2020 204c 6162 656c 7320 2f20         Labels / 
-00020990: 736f 7274 6279 2063 6f6c 756d 6e73 2077  sortby columns w
-000209a0: 696c 6c20 6265 2066 6978 6564 2069 6620  ill be fixed if 
-000209b0: 7468 6569 7220 6e61 6d65 7320 6172 6520  their names are 
-000209c0: 6d6f 6469 6669 6564 2e0d 0a0d 0a20 2020  modified.....   
-000209d0: 2020 2020 2050 6172 616d 6574 6572 730d       Parameters.
-000209e0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-000209f0: 2d2d 2d0d 0a20 2020 2020 2020 206f 6c64  ---..        old
-00020a00: 203a 2073 7472 0d0a 2020 2020 2020 2020   : str..        
-00020a10: 2020 2020 5374 7269 6e67 2074 6f20 6c6f      String to lo
-00020a20: 6f6b 2066 6f72 2077 6974 6869 6e20 696e  ok for within in
-00020a30: 6469 7669 6475 616c 206e 616d 6573 206f  dividual names o
-00020a40: 6620 636f 6c75 6d6e 732e 0d0a 2020 2020  f columns...    
-00020a50: 2020 2020 6e65 7720 3a20 7374 720d 0a20      new : str.. 
-00020a60: 2020 2020 2020 2020 2020 2053 7472 696e             Strin
-00020a70: 6720 746f 2072 6570 6c61 6365 206f 6c64  g to replace old
-00020a80: 2073 7472 696e 6720 696e 2063 6f6c 756d   string in colum
-00020a90: 6e20 6e61 6d65 732e 0d0a 2020 2020 2020  n names...      
-00020aa0: 2020 6d61 7820 3a20 696e 740d 0a20 2020    max : int..   
-00020ab0: 2020 2020 2020 2020 204f 7074 696f 6e61           Optiona
-00020ac0: 6c6c 7920 6c69 6d69 7420 7468 6520 6e75  lly limit the nu
-00020ad0: 6d62 6572 206f 6620 6f63 6375 7272 656e  mber of occurren
-00020ae0: 6365 7320 7065 7220 636f 6c75 6d6e 206e  ces per column n
-00020af0: 616d 6520 746f 2072 6570 6c61 6365 3b20  ame to replace; 
-00020b00: 6465 6661 756c 7473 2074 6f20 2d31 2077  defaults to -1 w
-00020b10: 6869 6368 2077 696c 6c20 7265 706c 6163  hich will replac
-00020b20: 6520 616c 6c2e 0d0a 0d0a 2020 2020 2020  e all.....      
-00020b30: 2020 4578 616d 706c 6573 0d0a 2020 2020    Examples..    
-00020b40: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
-00020b50: 2020 2020 2020 5265 706c 6163 6520 616c        Replace al
-00020b60: 6c20 6f63 6375 7272 656e 6365 7320 696e  l occurrences in
-00020b70: 2065 6163 6820 6e61 6d65 733a 0d0a 0d0a   each names:....
-00020b80: 2020 2020 2020 2020 3e3e 3e20 6473 203d          >>> ds =
-00020b90: 2072 742e 4461 7461 7365 7428 7b0d 0a20   rt.Dataset({.. 
-00020ba0: 2020 2020 2020 202e 2e2e 2027 6161 6127         ... 'aaa'
-00020bb0: 3a20 7274 2e61 7261 6e67 6528 3529 2c0d  : rt.arange(5),.
-00020bc0: 0a20 2020 2020 2020 202e 2e2e 2027 6127  .        ... 'a'
-00020bd0: 203a 2072 742e 6172 616e 6765 2835 292c   : rt.arange(5),
-00020be0: 0d0a 2020 2020 2020 2020 2e2e 2e20 2761  ..        ... 'a
-00020bf0: 6162 273a 2072 742e 6172 616e 6765 2835  ab': rt.arange(5
-00020c00: 290d 0a20 2020 2020 2020 202e 2e2e 207d  )..        ... }
-00020c10: 290d 0a20 2020 2020 2020 203e 3e3e 2064  )..        >>> d
-00020c20: 732e 636f 6c5f 7374 725f 7265 706c 6163  s.col_str_replac
-00020c30: 6528 2761 272c 2027 4127 290d 0a20 2020  e('a', 'A')..   
-00020c40: 2020 2020 203e 3e3e 2064 730d 0a20 2020       >>> ds..   
-00020c50: 2020 2020 2023 2020 2041 4141 2020 2041       #   AAA   A
-00020c60: 2020 2041 4162 0d0a 2020 2020 2020 2020     AAb..        
-00020c70: 2d20 2020 2d2d 2d20 2020 2d20 2020 2d2d  -   ---   -   --
-00020c80: 2d0d 0a20 2020 2020 2020 2030 2020 2020  -..        0    
-00020c90: 2030 2020 2030 2020 2020 2030 0d0a 2020   0   0     0..  
-00020ca0: 2020 2020 2020 3120 2020 2020 3120 2020        1     1   
-00020cb0: 3120 2020 2020 310d 0a20 2020 2020 2020  1     1..       
-00020cc0: 2032 2020 2020 2032 2020 2032 2020 2020   2     2   2    
-00020cd0: 2032 0d0a 2020 2020 2020 2020 3320 2020   2..        3   
-00020ce0: 2020 3320 2020 3320 2020 2020 330d 0a20    3   3     3.. 
-00020cf0: 2020 2020 2020 2034 2020 2020 2034 2020         4     4  
-00020d00: 2034 2020 2020 2034 0d0a 0d0a 2020 2020   4     4....    
-00020d10: 2020 2020 4c69 6d69 7420 6e75 6d62 6572      Limit number
-00020d20: 206f 6620 7265 706c 6163 656d 656e 7473   of replacements
-00020d30: 2070 6572 206e 616d 653a 0d0a 0d0a 2020   per name:....  
-00020d40: 2020 2020 2020 3e3e 3e20 6473 203d 2072        >>> ds = r
-00020d50: 742e 4461 7461 7365 7428 7b0d 0a20 2020  t.Dataset({..   
-00020d60: 2020 2020 202e 2e2e 2027 6161 6127 3a20       ... 'aaa': 
-00020d70: 7274 2e61 7261 6e67 6528 3529 2c0d 0a20  rt.arange(5),.. 
-00020d80: 2020 2020 2020 202e 2e2e 2027 6127 203a         ... 'a' :
-00020d90: 2072 742e 6172 616e 6765 2835 292c 0d0a   rt.arange(5),..
-00020da0: 2020 2020 2020 2020 2e2e 2e20 2761 6162          ... 'aab
-00020db0: 273a 2072 742e 6172 616e 6765 2835 290d  ': rt.arange(5).
-00020dc0: 0a20 2020 2020 2020 202e 2e2e 207d 290d  .        ... }).
-00020dd0: 0a20 2020 2020 2020 203e 3e3e 2064 732e  .        >>> ds.
-00020de0: 636f 6c5f 7374 725f 7265 706c 6163 6528  col_str_replace(
-00020df0: 2761 272c 2741 272c 6d61 783d 3129 0d0a  'a','A',max=1)..
-00020e00: 2020 2020 2020 2020 3e3e 3e20 6473 0d0a          >>> ds..
-00020e10: 2020 2020 2020 2020 2320 2020 4161 6120          #   Aaa 
-00020e20: 2020 4120 2020 4161 620d 0a20 2020 2020    A   Aab..     
-00020e30: 2020 202d 2020 202d 2d2d 2020 202d 2020     -   ---   -  
-00020e40: 202d 2d2d 0d0a 2020 2020 2020 2020 3020   ---..        0 
-00020e50: 2020 2020 3020 2020 3020 2020 2020 300d      0   0     0.
-00020e60: 0a20 2020 2020 2020 2031 2020 2020 2031  .        1     1
-00020e70: 2020 2031 2020 2020 2031 0d0a 2020 2020     1     1..    
-00020e80: 2020 2020 3220 2020 2020 3220 2020 3220      2     2   2 
-00020e90: 2020 2020 320d 0a20 2020 2020 2020 2033      2..        3
-00020ea0: 2020 2020 2033 2020 2033 2020 2020 2033       3   3     3
-00020eb0: 0d0a 2020 2020 2020 2020 3420 2020 2020  ..        4     
-00020ec0: 3420 2020 3420 2020 2020 340d 0a0d 0a20  4   4     4.... 
-00020ed0: 2020 2020 2020 2052 6570 6c61 6369 6e67         Replacing
-00020ee0: 2077 696c 6c20 6372 6561 7465 2061 2063   will create a c
-00020ef0: 6f6e 666c 6963 743a 0d0a 0d0a 2020 2020  onflict:....    
-00020f00: 2020 2020 3e3e 3e20 6473 203d 2072 742e      >>> ds = rt.
-00020f10: 4461 7461 7365 7428 7b27 6127 3a20 7274  Dataset({'a': rt
-00020f20: 2e61 7261 6e67 6528 3529 2c20 2741 273a  .arange(5), 'A':
-00020f30: 2072 742e 6172 616e 6765 2835 297d 290d   rt.arange(5)}).
-00020f40: 0a20 2020 2020 2020 2056 616c 7565 4572  .        ValueEr
-00020f50: 726f 723a 2049 7465 6d20 4120 616c 7265  ror: Item A alre
-00020f60: 6164 7920 6578 6973 7465 642c 2063 616e  ady existed, can
-00020f70: 6e6f 7420 6d61 6b65 2072 6570 6c61 6365  not make replace
-00020f80: 6d65 6e74 2069 6e20 6974 656d 2e0d 0a20  ment in item... 
-00020f90: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00020fa0: 2020 2020 2320 7769 6c6c 2072 6574 7572      # will retur
-00020fb0: 6e20 7472 7565 2069 6620 616e 7920 636f  n true if any co
-00020fc0: 6c75 6d6e 206e 616d 6573 2063 6861 6e67  lumn names chang
-00020fd0: 6564 0d0a 2020 2020 2020 2020 7265 706c  ed..        repl
-00020fe0: 6163 6564 203d 2073 656c 662e 5f61 6c6c  aced = self._all
-00020ff0: 5f69 7465 6d73 2e69 7465 6d5f 7374 725f  _items.item_str_
-00021000: 7265 706c 6163 6528 6f6c 642c 206e 6577  replace(old, new
-00021010: 2c20 6d61 7872 3d6d 6178 290d 0a20 2020  , maxr=max)..   
-00021020: 2020 2020 2069 6620 7265 706c 6163 6564       if replaced
-00021030: 2061 6e64 2073 656c 662e 5f63 6f6c 5f73   and self._col_s
-00021040: 6f72 746c 6973 7420 6973 206e 6f74 204e  ortlist is not N
-00021050: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-00021060: 2020 2320 6669 7820 736f 7274 730d 0a20    # fix sorts.. 
-00021070: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-00021080: 2c20 6e61 6d65 2069 6e20 7365 6c66 2e5f  , name in self._
-00021090: 636f 6c5f 736f 7274 6c69 7374 3a0d 0a20  col_sortlist:.. 
-000210a0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000210b0: 203d 206e 616d 652e 7265 706c 6163 6528   = name.replace(
-000210c0: 6f6c 642c 206e 6577 2c20 6d61 7829 0d0a  old, new, max)..
-000210d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000210e0: 6966 2072 2021 3d20 6e61 6d65 3a0d 0a20  if r != name:.. 
-000210f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021100: 2020 2073 656c 662e 5f63 6f6c 5f73 6f72     self._col_sor
-00021110: 746c 6973 745b 695d 203d 2072 0d0a 0d0a  tlist[i] = r....
-00021120: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00020850: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
+00020860: 636f 6c5f 7374 725f 7265 706c 6163 6528  col_str_replace(
+00020870: 7365 6c66 2c20 6f6c 643a 2073 7472 2c20  self, old: str, 
+00020880: 6e65 773a 2073 7472 2c20 6d61 783a 2069  new: str, max: i
+00020890: 6e74 203d 202d 3129 3a0d 0a20 2020 2020  nt = -1):..     
+000208a0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+000208b0: 4966 2061 2063 6f6c 756d 6e20 6e61 6d65  If a column name
+000208c0: 2063 6f6e 7461 696e 7320 7468 6520 6f6c   contains the ol
+000208d0: 6420 7374 7269 6e67 2c20 7468 6520 6f6c  d string, the ol
+000208e0: 6420 7374 7269 6e67 2077 696c 6c20 6265  d string will be
+000208f0: 2072 6570 6c61 6365 6420 7769 7468 2074   replaced with t
+00020900: 6865 206e 6577 206f 6e65 2e0d 0a20 2020  he new one...   
+00020910: 2020 2020 2049 6620 7265 706c 6163 696e       If replacin
+00020920: 6720 7468 6520 7374 7269 6e67 2077 696c  g the string wil
+00020930: 6c20 636f 6e66 6c69 6374 2077 6974 6820  l conflict with 
+00020940: 616e 2065 7869 7374 696e 6720 636f 6c75  an existing colu
+00020950: 6d6e 206e 616d 652c 2061 6e20 6572 726f  mn name, an erro
+00020960: 7220 7769 6c6c 2062 6520 7261 6973 6564  r will be raised
+00020970: 2e0d 0a20 2020 2020 2020 204c 6162 656c  ...        Label
+00020980: 7320 2f20 736f 7274 6279 2063 6f6c 756d  s / sortby colum
+00020990: 6e73 2077 696c 6c20 6265 2066 6978 6564  ns will be fixed
+000209a0: 2069 6620 7468 6569 7220 6e61 6d65 7320   if their names 
+000209b0: 6172 6520 6d6f 6469 6669 6564 2e0d 0a0d  are modified....
+000209c0: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
+000209d0: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
+000209e0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+000209f0: 206f 6c64 203a 2073 7472 0d0a 2020 2020   old : str..    
+00020a00: 2020 2020 2020 2020 5374 7269 6e67 2074          String t
+00020a10: 6f20 6c6f 6f6b 2066 6f72 2077 6974 6869  o look for withi
+00020a20: 6e20 696e 6469 7669 6475 616c 206e 616d  n individual nam
+00020a30: 6573 206f 6620 636f 6c75 6d6e 732e 0d0a  es of columns...
+00020a40: 2020 2020 2020 2020 6e65 7720 3a20 7374          new : st
+00020a50: 720d 0a20 2020 2020 2020 2020 2020 2053  r..            S
+00020a60: 7472 696e 6720 746f 2072 6570 6c61 6365  tring to replace
+00020a70: 206f 6c64 2073 7472 696e 6720 696e 2063   old string in c
+00020a80: 6f6c 756d 6e20 6e61 6d65 732e 0d0a 2020  olumn names...  
+00020a90: 2020 2020 2020 6d61 7820 3a20 696e 740d        max : int.
+00020aa0: 0a20 2020 2020 2020 2020 2020 204f 7074  .            Opt
+00020ab0: 696f 6e61 6c6c 7920 6c69 6d69 7420 7468  ionally limit th
+00020ac0: 6520 6e75 6d62 6572 206f 6620 6f63 6375  e number of occu
+00020ad0: 7272 656e 6365 7320 7065 7220 636f 6c75  rrences per colu
+00020ae0: 6d6e 206e 616d 6520 746f 2072 6570 6c61  mn name to repla
+00020af0: 6365 3b20 6465 6661 756c 7473 2074 6f20  ce; defaults to 
+00020b00: 2d31 2077 6869 6368 2077 696c 6c20 7265  -1 which will re
+00020b10: 706c 6163 6520 616c 6c2e 0d0a 0d0a 2020  place all.....  
+00020b20: 2020 2020 2020 4578 616d 706c 6573 0d0a        Examples..
+00020b30: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+00020b40: 0d0a 2020 2020 2020 2020 5265 706c 6163  ..        Replac
+00020b50: 6520 616c 6c20 6f63 6375 7272 656e 6365  e all occurrence
+00020b60: 7320 696e 2065 6163 6820 6e61 6d65 733a  s in each names:
+00020b70: 0d0a 0d0a 2020 2020 2020 2020 3e3e 3e20  ....        >>> 
+00020b80: 6473 203d 2072 742e 4461 7461 7365 7428  ds = rt.Dataset(
+00020b90: 7b0d 0a20 2020 2020 2020 202e 2e2e 2027  {..        ... '
+00020ba0: 6161 6127 3a20 7274 2e61 7261 6e67 6528  aaa': rt.arange(
+00020bb0: 3529 2c0d 0a20 2020 2020 2020 202e 2e2e  5),..        ...
+00020bc0: 2027 6127 203a 2072 742e 6172 616e 6765   'a' : rt.arange
+00020bd0: 2835 292c 0d0a 2020 2020 2020 2020 2e2e  (5),..        ..
+00020be0: 2e20 2761 6162 273a 2072 742e 6172 616e  . 'aab': rt.aran
+00020bf0: 6765 2835 290d 0a20 2020 2020 2020 202e  ge(5)..        .
+00020c00: 2e2e 207d 290d 0a20 2020 2020 2020 203e  .. })..        >
+00020c10: 3e3e 2064 732e 636f 6c5f 7374 725f 7265  >> ds.col_str_re
+00020c20: 706c 6163 6528 2761 272c 2027 4127 290d  place('a', 'A').
+00020c30: 0a20 2020 2020 2020 203e 3e3e 2064 730d  .        >>> ds.
+00020c40: 0a20 2020 2020 2020 2023 2020 2041 4141  .        #   AAA
+00020c50: 2020 2041 2020 2041 4162 0d0a 2020 2020     A   AAb..    
+00020c60: 2020 2020 2d20 2020 2d2d 2d20 2020 2d20      -   ---   - 
+00020c70: 2020 2d2d 2d0d 0a20 2020 2020 2020 2030    ---..        0
+00020c80: 2020 2020 2030 2020 2030 2020 2020 2030       0   0     0
+00020c90: 0d0a 2020 2020 2020 2020 3120 2020 2020  ..        1     
+00020ca0: 3120 2020 3120 2020 2020 310d 0a20 2020  1   1     1..   
+00020cb0: 2020 2020 2032 2020 2020 2032 2020 2032       2     2   2
+00020cc0: 2020 2020 2032 0d0a 2020 2020 2020 2020       2..        
+00020cd0: 3320 2020 2020 3320 2020 3320 2020 2020  3     3   3     
+00020ce0: 330d 0a20 2020 2020 2020 2034 2020 2020  3..        4    
+00020cf0: 2034 2020 2034 2020 2020 2034 0d0a 0d0a   4   4     4....
+00020d00: 2020 2020 2020 2020 4c69 6d69 7420 6e75          Limit nu
+00020d10: 6d62 6572 206f 6620 7265 706c 6163 656d  mber of replacem
+00020d20: 656e 7473 2070 6572 206e 616d 653a 0d0a  ents per name:..
+00020d30: 0d0a 2020 2020 2020 2020 3e3e 3e20 6473  ..        >>> ds
+00020d40: 203d 2072 742e 4461 7461 7365 7428 7b0d   = rt.Dataset({.
+00020d50: 0a20 2020 2020 2020 202e 2e2e 2027 6161  .        ... 'aa
+00020d60: 6127 3a20 7274 2e61 7261 6e67 6528 3529  a': rt.arange(5)
+00020d70: 2c0d 0a20 2020 2020 2020 202e 2e2e 2027  ,..        ... '
+00020d80: 6127 203a 2072 742e 6172 616e 6765 2835  a' : rt.arange(5
+00020d90: 292c 0d0a 2020 2020 2020 2020 2e2e 2e20  ),..        ... 
+00020da0: 2761 6162 273a 2072 742e 6172 616e 6765  'aab': rt.arange
+00020db0: 2835 290d 0a20 2020 2020 2020 202e 2e2e  (5)..        ...
+00020dc0: 207d 290d 0a20 2020 2020 2020 203e 3e3e   })..        >>>
+00020dd0: 2064 732e 636f 6c5f 7374 725f 7265 706c   ds.col_str_repl
+00020de0: 6163 6528 2761 272c 2741 272c 6d61 783d  ace('a','A',max=
+00020df0: 3129 0d0a 2020 2020 2020 2020 3e3e 3e20  1)..        >>> 
+00020e00: 6473 0d0a 2020 2020 2020 2020 2320 2020  ds..        #   
+00020e10: 4161 6120 2020 4120 2020 4161 620d 0a20  Aaa   A   Aab.. 
+00020e20: 2020 2020 2020 202d 2020 202d 2d2d 2020         -   ---  
+00020e30: 202d 2020 202d 2d2d 0d0a 2020 2020 2020   -   ---..      
+00020e40: 2020 3020 2020 2020 3020 2020 3020 2020    0     0   0   
+00020e50: 2020 300d 0a20 2020 2020 2020 2031 2020    0..        1  
+00020e60: 2020 2031 2020 2031 2020 2020 2031 0d0a     1   1     1..
+00020e70: 2020 2020 2020 2020 3220 2020 2020 3220          2     2 
+00020e80: 2020 3220 2020 2020 320d 0a20 2020 2020    2     2..     
+00020e90: 2020 2033 2020 2020 2033 2020 2033 2020     3     3   3  
+00020ea0: 2020 2033 0d0a 2020 2020 2020 2020 3420     3..        4 
+00020eb0: 2020 2020 3420 2020 3420 2020 2020 340d      4   4     4.
+00020ec0: 0a0d 0a20 2020 2020 2020 2052 6570 6c61  ...        Repla
+00020ed0: 6369 6e67 2077 696c 6c20 6372 6561 7465  cing will create
+00020ee0: 2061 2063 6f6e 666c 6963 743a 0d0a 0d0a   a conflict:....
+00020ef0: 2020 2020 2020 2020 3e3e 3e20 6473 203d          >>> ds =
+00020f00: 2072 742e 4461 7461 7365 7428 7b27 6127   rt.Dataset({'a'
+00020f10: 3a20 7274 2e61 7261 6e67 6528 3529 2c20  : rt.arange(5), 
+00020f20: 2741 273a 2072 742e 6172 616e 6765 2835  'A': rt.arange(5
+00020f30: 297d 290d 0a20 2020 2020 2020 2056 616c  )})..        Val
+00020f40: 7565 4572 726f 723a 2049 7465 6d20 4120  ueError: Item A 
+00020f50: 616c 7265 6164 7920 6578 6973 7465 642c  already existed,
+00020f60: 2063 616e 6e6f 7420 6d61 6b65 2072 6570   cannot make rep
+00020f70: 6c61 6365 6d65 6e74 2069 6e20 6974 656d  lacement in item
+00020f80: 2e0d 0a20 2020 2020 2020 2022 2222 0d0a  ...        """..
+00020f90: 2020 2020 2020 2020 2320 7769 6c6c 2072          # will r
+00020fa0: 6574 7572 6e20 7472 7565 2069 6620 616e  eturn true if an
+00020fb0: 7920 636f 6c75 6d6e 206e 616d 6573 2063  y column names c
+00020fc0: 6861 6e67 6564 0d0a 2020 2020 2020 2020  hanged..        
+00020fd0: 7265 706c 6163 6564 203d 2073 656c 662e  replaced = self.
+00020fe0: 5f61 6c6c 5f69 7465 6d73 2e69 7465 6d5f  _all_items.item_
+00020ff0: 7374 725f 7265 706c 6163 6528 6f6c 642c  str_replace(old,
+00021000: 206e 6577 2c20 6d61 7872 3d6d 6178 290d   new, maxr=max).
+00021010: 0a20 2020 2020 2020 2069 6620 7265 706c  .        if repl
+00021020: 6163 6564 2061 6e64 2073 656c 662e 5f63  aced and self._c
+00021030: 6f6c 5f73 6f72 746c 6973 7420 6973 206e  ol_sortlist is n
+00021040: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00021050: 2020 2020 2020 2320 6669 7820 736f 7274        # fix sort
+00021060: 730d 0a20 2020 2020 2020 2020 2020 2066  s..            f
+00021070: 6f72 2069 2c20 6e61 6d65 2069 6e20 7365  or i, name in se
+00021080: 6c66 2e5f 636f 6c5f 736f 7274 6c69 7374  lf._col_sortlist
+00021090: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000210a0: 2020 2072 203d 206e 616d 652e 7265 706c     r = name.repl
+000210b0: 6163 6528 6f6c 642c 206e 6577 2c20 6d61  ace(old, new, ma
+000210c0: 7829 0d0a 2020 2020 2020 2020 2020 2020  x)..            
+000210d0: 2020 2020 6966 2072 2021 3d20 6e61 6d65      if r != name
+000210e0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000210f0: 2020 2020 2020 2073 656c 662e 5f63 6f6c         self._col
+00021100: 5f73 6f72 746c 6973 745b 695d 203d 2072  _sortlist[i] = r
+00021110: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+00021120: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00021130: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00021140: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021150: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021160: 2d2d 0d0a 2020 2020 6465 6620 5f61 735f  --..    def _as_
-00021170: 6469 6374 696f 6e61 7279 2873 656c 662c  dictionary(self,
-00021180: 2063 6f70 793d 4661 6c73 652c 2072 6f77   copy=False, row
-00021190: 733d 4e6f 6e65 2c20 636f 6c73 3d4e 6f6e  s=None, cols=Non
-000211a0: 6529 3a0d 0a20 2020 2020 2020 2022 2222  e):..        """
-000211b0: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-000211c0: 2061 2064 6963 7469 6f6e 6172 7920 6f66   a dictionary of
-000211d0: 206e 756d 7079 2061 7272 6179 732e 0d0a   numpy arrays...
-000211e0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-000211f0: 2020 2020 2023 2069 6620 7468 6572 6520       # if there 
-00021200: 6973 2061 2067 726f 7570 6279 2077 6974  is a groupby wit
-00021210: 6820 6b65 7920 636f 6c75 6d6e 730d 0a20  h key columns.. 
-00021220: 2020 2020 2020 2023 2054 4a44 2066 6173         # TJD fas
-00021230: 7420 7761 7920 746f 2072 6574 7572 6e20  t way to return 
-00021240: 6469 6374 0d0a 2020 2020 2020 2020 6966  dict..        if
-00021250: 2028 6e6f 7420 636f 7079 2920 616e 6420   (not copy) and 
-00021260: 726f 7773 2069 7320 4e6f 6e65 2061 6e64  rows is None and
-00021270: 2063 6f6c 7320 6973 204e 6f6e 653a 0d0a   cols is None:..
-00021280: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00021290: 726e 2073 656c 662e 5f61 6c6c 5f69 7465  rn self._all_ite
-000212a0: 6d73 2e69 7465 6d73 5f61 735f 6469 6374  ms.items_as_dict
-000212b0: 2829 0d0a 0d0a 2020 2020 2020 2020 6966  ()....        if
-000212c0: 2063 6f6c 7320 6973 206e 6f74 204e 6f6e   cols is not Non
-000212d0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-000212e0: 636f 6c5f 7365 6c65 6374 696f 6e20 3d20  col_selection = 
-000212f0: 636f 6c73 0d0a 2020 2020 2020 2020 656c  cols..        el
-00021300: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00021310: 2063 6f6c 5f73 656c 6563 7469 6f6e 203d   col_selection =
-00021320: 2073 656c 662e 6b65 7973 2829 0d0a 2020   self.keys()..  
-00021330: 2020 2020 2020 736f 7572 6365 5f64 6963        source_dic
-00021340: 7420 3d20 7b7d 0d0a 2020 2020 2020 2020  t = {}..        
-00021350: 666f 7220 6b20 696e 2063 6f6c 5f73 656c  for k in col_sel
-00021360: 6563 7469 6f6e 3a0d 0a20 2020 2020 2020  ection:..       
-00021370: 2020 2020 2073 6f75 7263 655f 6469 6374       source_dict
-00021380: 5b6b 5d20 3d20 6765 7461 7474 7228 7365  [k] = getattr(se
-00021390: 6c66 2c20 6b29 0d0a 0d0a 2020 2020 2020  lf, k)....      
-000213a0: 2020 7265 7475 726e 2073 656c 662e 5f63    return self._c
-000213b0: 6f70 795f 6672 6f6d 5f64 6963 7428 736f  opy_from_dict(so
-000213c0: 7572 6365 5f64 6963 742c 2063 6f70 792c  urce_dict, copy,
-000213d0: 2072 6f77 732c 2063 6f6c 7329 0d0a 0d0a   rows, cols)....
-000213e0: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00021150: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
+00021160: 5f61 735f 6469 6374 696f 6e61 7279 2873  _as_dictionary(s
+00021170: 656c 662c 2063 6f70 793d 4661 6c73 652c  elf, copy=False,
+00021180: 2072 6f77 733d 4e6f 6e65 2c20 636f 6c73   rows=None, cols
+00021190: 3d4e 6f6e 6529 3a0d 0a20 2020 2020 2020  =None):..       
+000211a0: 2022 2222 0d0a 2020 2020 2020 2020 5265   """..        Re
+000211b0: 7475 726e 2061 2064 6963 7469 6f6e 6172  turn a dictionar
+000211c0: 7920 6f66 206e 756d 7079 2061 7272 6179  y of numpy array
+000211d0: 732e 0d0a 2020 2020 2020 2020 2222 220d  s...        """.
+000211e0: 0a20 2020 2020 2020 2023 2069 6620 7468  .        # if th
+000211f0: 6572 6520 6973 2061 2067 726f 7570 6279  ere is a groupby
+00021200: 2077 6974 6820 6b65 7920 636f 6c75 6d6e   with key column
+00021210: 730d 0a20 2020 2020 2020 2023 2054 4a44  s..        # TJD
+00021220: 2066 6173 7420 7761 7920 746f 2072 6574   fast way to ret
+00021230: 7572 6e20 6469 6374 0d0a 2020 2020 2020  urn dict..      
+00021240: 2020 6966 2028 6e6f 7420 636f 7079 2920    if (not copy) 
+00021250: 616e 6420 726f 7773 2069 7320 4e6f 6e65  and rows is None
+00021260: 2061 6e64 2063 6f6c 7320 6973 204e 6f6e   and cols is Non
+00021270: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00021280: 7265 7475 726e 2073 656c 662e 5f61 6c6c  return self._all
+00021290: 5f69 7465 6d73 2e69 7465 6d73 5f61 735f  _items.items_as_
+000212a0: 6469 6374 2829 0d0a 0d0a 2020 2020 2020  dict()....      
+000212b0: 2020 6966 2063 6f6c 7320 6973 206e 6f74    if cols is not
+000212c0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+000212d0: 2020 2020 636f 6c5f 7365 6c65 6374 696f      col_selectio
+000212e0: 6e20 3d20 636f 6c73 0d0a 2020 2020 2020  n = cols..      
+000212f0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00021300: 2020 2020 2063 6f6c 5f73 656c 6563 7469       col_selecti
+00021310: 6f6e 203d 2073 656c 662e 6b65 7973 2829  on = self.keys()
+00021320: 0d0a 2020 2020 2020 2020 736f 7572 6365  ..        source
+00021330: 5f64 6963 7420 3d20 7b7d 0d0a 2020 2020  _dict = {}..    
+00021340: 2020 2020 666f 7220 6b20 696e 2063 6f6c      for k in col
+00021350: 5f73 656c 6563 7469 6f6e 3a0d 0a20 2020  _selection:..   
+00021360: 2020 2020 2020 2020 2073 6f75 7263 655f           source_
+00021370: 6469 6374 5b6b 5d20 3d20 6765 7461 7474  dict[k] = getatt
+00021380: 7228 7365 6c66 2c20 6b29 0d0a 0d0a 2020  r(self, k)....  
+00021390: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+000213a0: 662e 5f63 6f70 795f 6672 6f6d 5f64 6963  f._copy_from_dic
+000213b0: 7428 736f 7572 6365 5f64 6963 742c 2063  t(source_dict, c
+000213c0: 6f70 792c 2072 6f77 732c 2063 6f6c 7329  opy, rows, cols)
+000213d0: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+000213e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000213f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00021400: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021410: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00021420: 2d2d 0d0a 2020 2020 6465 6620 6173 5f6f  --..    def as_o
-00021430: 7264 6572 6564 5f64 6963 7469 6f6e 6172  rdered_dictionar
-00021440: 7928 7365 6c66 2c20 7375 626c 6973 743a  y(self, sublist:
-00021450: 204c 6973 745b 7374 725d 203d 204e 6f6e   List[str] = Non
-00021460: 6529 3a0d 0a20 2020 2020 2020 2022 2222  e):..        """
-00021470: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-00021480: 7320 636f 6e74 656e 7473 206f 6620 5374  s contents of St
-00021490: 7275 6374 2061 7320 6120 636f 6c6c 6563  ruct as a collec
-000214a0: 7469 6f6e 732e 4f72 6465 7265 6444 6963  tions.OrderedDic
-000214b0: 7420 696e 7374 616e 6365 2e0d 0a0d 0a20  t instance..... 
-000214c0: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
-000214d0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-000214e0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2073  -----..        s
-000214f0: 7562 6c69 7374 203a 206c 6973 7420 6f66  ublist : list of
-00021500: 2073 7472 0d0a 2020 2020 2020 2020 2020   str..          
-00021510: 2020 4f70 7469 6f6e 616c 206c 6973 7420    Optional list 
-00021520: 7265 7374 7269 6374 696e 6720 636f 6c75  restricting colu
-00021530: 6d6e 7320 746f 2072 6574 7572 6e2e 0d0a  mns to return...
-00021540: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-00021550: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-00021560: 2d2d 0d0a 2020 2020 2020 2020 4f72 6465  --..        Orde
-00021570: 7265 6444 6963 740d 0a20 2020 2020 2020  redDict..       
-00021580: 2022 2222 0d0a 2020 2020 2020 2020 6672   """..        fr
-00021590: 6f6d 2063 6f6c 6c65 6374 696f 6e73 2069  om collections i
-000215a0: 6d70 6f72 7420 4f72 6465 7265 6444 6963  mport OrderedDic
-000215b0: 740d 0a0d 0a20 2020 2020 2020 206f 6469  t....        odi
-000215c0: 6374 203d 204f 7264 6572 6564 4469 6374  ct = OrderedDict
-000215d0: 2829 0d0a 2020 2020 2020 2020 6966 2073  ()..        if s
-000215e0: 7562 6c69 7374 2069 7320 4e6f 6e65 3a0d  ublist is None:.
-000215f0: 0a20 2020 2020 2020 2020 2020 2073 7562  .            sub
-00021600: 6c69 7374 203d 2073 656c 662e 5f61 6c6c  list = self._all
-00021610: 5f69 7465 6d73 0d0a 2020 2020 2020 2020  _items..        
-00021620: 666f 7220 6b20 696e 2073 7562 6c69 7374  for k in sublist
-00021630: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-00021640: 2069 6620 6b20 696e 2073 656c 662e 5f5f   if k in self.__
-00021650: 6469 6374 5f5f 3a0d 0a20 2020 2020 2020  dict__:..       
-00021660: 2020 2020 2023 2020 2020 6f64 6963 745b       #    odict[
-00021670: 6b5d 203d 2073 656c 662e 5f5f 6469 6374  k] = self.__dict
-00021680: 5f5f 5b6b 5d0d 0a20 2020 2020 2020 2020  __[k]..         
-00021690: 2020 2023 2065 6c73 653a 0d0a 2020 2020     # else:..    
-000216a0: 2020 2020 2020 2020 2320 2020 2072 6169          #    rai
-000216b0: 7365 2056 616c 7565 4572 726f 7228 6b2c  se ValueError(k,
-000216c0: 2022 6973 206e 6f74 2061 2076 616c 6964   "is not a valid
-000216d0: 206b 6579 2069 6e20 5f5f 6469 6374 5f5f   key in __dict__
-000216e0: 2e22 290d 0a20 2020 2020 2020 2020 2020  .")..           
-000216f0: 2069 6620 7365 6c66 2e63 6f6c 5f65 7869   if self.col_exi
-00021700: 7374 7328 6b29 3a0d 0a20 2020 2020 2020  sts(k):..       
-00021710: 2020 2020 2020 2020 206f 6469 6374 5b6b           odict[k
-00021720: 5d20 3d20 7365 6c66 2e63 6f6c 5f67 6574  ] = self.col_get
-00021730: 5f76 616c 7565 286b 290d 0a20 2020 2020  _value(k)..     
-00021740: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00021750: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-00021760: 6973 6520 5661 6c75 6545 7272 6f72 286b  ise ValueError(k
-00021770: 2c20 2269 7320 6e6f 7420 6120 7661 6c69  , "is not a vali
-00021780: 6420 6b65 7920 696e 205f 616c 6c5f 6974  d key in _all_it
-00021790: 656d 732e 2229 0d0a 2020 2020 2020 2020  ems.")..        
-000217a0: 7265 7475 726e 206f 6469 6374 0d0a 0d0a  return odict....
-000217b0: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00021410: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
+00021420: 6173 5f6f 7264 6572 6564 5f64 6963 7469  as_ordered_dicti
+00021430: 6f6e 6172 7928 7365 6c66 2c20 7375 626c  onary(self, subl
+00021440: 6973 743a 204c 6973 745b 7374 725d 203d  ist: List[str] =
+00021450: 204e 6f6e 6529 3a0d 0a20 2020 2020 2020   None):..       
+00021460: 2022 2222 0d0a 2020 2020 2020 2020 5265   """..        Re
+00021470: 7475 726e 7320 636f 6e74 656e 7473 206f  turns contents o
+00021480: 6620 5374 7275 6374 2061 7320 6120 636f  f Struct as a co
+00021490: 6c6c 6563 7469 6f6e 732e 4f72 6465 7265  llections.Ordere
+000214a0: 6444 6963 7420 696e 7374 616e 6365 2e0d  dDict instance..
+000214b0: 0a0d 0a20 2020 2020 2020 2050 6172 616d  ...        Param
+000214c0: 6574 6572 730d 0a20 2020 2020 2020 202d  eters..        -
+000214d0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020  ---------..     
+000214e0: 2020 2073 7562 6c69 7374 203a 206c 6973     sublist : lis
+000214f0: 7420 6f66 2073 7472 0d0a 2020 2020 2020  t of str..      
+00021500: 2020 2020 2020 4f70 7469 6f6e 616c 206c        Optional l
+00021510: 6973 7420 7265 7374 7269 6374 696e 6720  ist restricting 
+00021520: 636f 6c75 6d6e 7320 746f 2072 6574 7572  columns to retur
+00021530: 6e2e 0d0a 0d0a 2020 2020 2020 2020 5265  n.....        Re
+00021540: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
+00021550: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00021560: 4f72 6465 7265 6444 6963 740d 0a20 2020  OrderedDict..   
+00021570: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00021580: 2020 6672 6f6d 2063 6f6c 6c65 6374 696f    from collectio
+00021590: 6e73 2069 6d70 6f72 7420 4f72 6465 7265  ns import Ordere
+000215a0: 6444 6963 740d 0a0d 0a20 2020 2020 2020  dDict....       
+000215b0: 206f 6469 6374 203d 204f 7264 6572 6564   odict = Ordered
+000215c0: 4469 6374 2829 0d0a 2020 2020 2020 2020  Dict()..        
+000215d0: 6966 2073 7562 6c69 7374 2069 7320 4e6f  if sublist is No
+000215e0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
+000215f0: 2073 7562 6c69 7374 203d 2073 656c 662e   sublist = self.
+00021600: 5f61 6c6c 5f69 7465 6d73 0d0a 2020 2020  _all_items..    
+00021610: 2020 2020 666f 7220 6b20 696e 2073 7562      for k in sub
+00021620: 6c69 7374 3a0d 0a20 2020 2020 2020 2020  list:..         
+00021630: 2020 2023 2069 6620 6b20 696e 2073 656c     # if k in sel
+00021640: 662e 5f5f 6469 6374 5f5f 3a0d 0a20 2020  f.__dict__:..   
+00021650: 2020 2020 2020 2020 2023 2020 2020 6f64           #    od
+00021660: 6963 745b 6b5d 203d 2073 656c 662e 5f5f  ict[k] = self.__
+00021670: 6469 6374 5f5f 5b6b 5d0d 0a20 2020 2020  dict__[k]..     
+00021680: 2020 2020 2020 2023 2065 6c73 653a 0d0a         # else:..
+00021690: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+000216a0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
+000216b0: 7228 6b2c 2022 6973 206e 6f74 2061 2076  r(k, "is not a v
+000216c0: 616c 6964 206b 6579 2069 6e20 5f5f 6469  alid key in __di
+000216d0: 6374 5f5f 2e22 290d 0a20 2020 2020 2020  ct__.")..       
+000216e0: 2020 2020 2069 6620 7365 6c66 2e63 6f6c       if self.col
+000216f0: 5f65 7869 7374 7328 6b29 3a0d 0a20 2020  _exists(k):..   
+00021700: 2020 2020 2020 2020 2020 2020 206f 6469               odi
+00021710: 6374 5b6b 5d20 3d20 7365 6c66 2e63 6f6c  ct[k] = self.col
+00021720: 5f67 6574 5f76 616c 7565 286b 290d 0a20  _get_value(k).. 
+00021730: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00021740: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00021750: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+00021760: 6f72 286b 2c20 2269 7320 6e6f 7420 6120  or(k, "is not a 
+00021770: 7661 6c69 6420 6b65 7920 696e 205f 616c  valid key in _al
+00021780: 6c5f 6974 656d 732e 2229 0d0a 2020 2020  l_items.")..    
+00021790: 2020 2020 7265 7475 726e 206f 6469 6374      return odict
+000217a0: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+000217b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000217c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000217d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000217e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
-000217f0: 2020 2064 6566 2065 7175 616c 7328 7365     def equals(se
-00021800: 6c66 2c20 6f74 6865 7229 3a0d 0a20 2020  lf, other):..   
-00021810: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00021820: 2020 5465 7374 2077 6865 7468 6572 2074    Test whether t
-00021830: 776f 2053 7472 7563 7473 2063 6f6e 7461  wo Structs conta
-00021840: 696e 2074 6865 2073 616d 6520 656c 656d  in the same elem
-00021850: 656e 7473 2069 6e20 6561 6368 2063 6f6c  ents in each col
-00021860: 756d 6e2e 0d0a 2020 2020 2020 2020 4e61  umn...        Na
-00021870: 4e73 2069 6e20 7468 6520 7361 6d65 206c  Ns in the same l
-00021880: 6f63 6174 696f 6e20 6172 6520 636f 6e73  ocation are cons
-00021890: 6964 6572 6564 2065 7175 616c 2e0d 0a0d  idered equal....
-000218a0: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
-000218b0: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
-000218c0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-000218d0: 206f 7468 6572 3a20 616e 6f74 6865 7220   other: another 
-000218e0: 5374 7275 6374 206f 7220 6469 6374 2074  Struct or dict t
-000218f0: 6f20 636f 6d70 6172 6520 746f 0d0a 0d0a  o compare to....
-00021900: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
-00021910: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00021920: 0d0a 2020 2020 2020 2020 626f 6f6c 0d0a  ..        bool..
-00021930: 0d0a 2020 2020 2020 2020 5365 6520 616c  ..        See al
-00021940: 736f 0d0a 2020 2020 2020 2020 2d2d 2d2d  so..        ----
-00021950: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4461  ----..        Da
-00021960: 7461 7365 742e 6372 632c 203d 3d2c 203e  taset.crc, ==, >
-00021970: 3d2c 203c 3d2c 203e 2c20 203c 0d0a 0d0a  =, <=, >,  <....
-00021980: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
-00021990: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-000219a0: 2d2d 0d0a 2020 2020 2020 2020 3e3e 3e20  --..        >>> 
-000219b0: 7331 203d 2072 742e 5374 7275 6374 287b  s1 = rt.Struct({
-000219c0: 2774 273a 2035 342c 2027 7465 7374 273a  't': 54, 'test':
-000219d0: 206e 702e 696e 7436 3428 3334 292c 2027   np.int64(34), '
-000219e0: 7465 7374 3227 3a20 7274 2e61 7261 6e67  test2': rt.arang
-000219f0: 6528 3230 3029 7d29 0d0a 2020 2020 2020  e(200)})..      
-00021a00: 2020 3e3e 3e20 7332 203d 2072 742e 5374    >>> s2 = rt.St
-00021a10: 7275 6374 287b 2774 273a 2035 342c 2027  ruct({'t': 54, '
-00021a20: 7465 7374 273a 206e 702e 696e 7436 3428  test': np.int64(
-00021a30: 3334 292c 2027 7465 7374 3227 3a20 7274  34), 'test2': rt
-00021a40: 2e61 7261 6e67 6528 3230 3029 7d29 0d0a  .arange(200)})..
-00021a50: 2020 2020 2020 2020 3e3e 3e20 7331 2e65          >>> s1.e
-00021a60: 7175 616c 7328 7332 290d 0a20 2020 2020  quals(s2)..     
-00021a70: 2020 2054 7275 650d 0a20 2020 2020 2020     True..       
-00021a80: 2022 2222 0d0a 2020 2020 2020 2020 6966   """..        if
-00021a90: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
-00021aa0: 6f74 6865 722c 2053 7472 7563 7429 3a0d  other, Struct):.
-00021ab0: 0a20 2020 2020 2020 2020 2020 2023 2074  .            # t
-00021ac0: 7279 2074 6f20 6d61 6b65 2069 7420 6120  ry to make it a 
-00021ad0: 6461 7461 7365 740d 0a20 2020 2020 2020  dataset..       
-00021ae0: 2020 2020 206f 7468 6572 203d 2053 7472       other = Str
-00021af0: 7563 7428 6f74 6865 7229 0d0a 0d0a 2020  uct(other)....  
-00021b00: 2020 2020 2020 6966 2073 656c 662e 5f6e        if self._n
-00021b10: 636f 6c73 2021 3d20 6f74 6865 722e 5f6e  cols != other._n
-00021b20: 636f 6c73 3a0d 0a20 2020 2020 2020 2020  cols:..         
-00021b30: 2020 2070 7269 6e74 2822 5468 6520 7374     print("The st
-00021b40: 7275 6374 7320 6172 6520 6e6f 7420 7468  ructs are not th
-00021b50: 6520 7361 6d65 2073 697a 6522 290d 0a20  e same size").. 
-00021b60: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00021b70: 6e20 4661 6c73 650d 0a0d 0a20 2020 2020  n False....     
-00021b80: 2020 2066 6f72 2063 312c 2063 3220 696e     for c1, c2 in
-00021b90: 207a 6970 2873 656c 662c 206f 7468 6572   zip(self, other
-00021ba0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00021bb0: 6966 2063 3120 3d3d 2063 323a 0d0a 2020  if c1 == c2:..  
-00021bc0: 2020 2020 2020 2020 2020 2020 2020 7631                v1
-00021bd0: 203d 2073 656c 665b 6331 5d0d 0a20 2020   = self[c1]..   
-00021be0: 2020 2020 2020 2020 2020 2020 2076 3220               v2 
-00021bf0: 3d20 6f74 6865 725b 6332 5d0d 0a20 2020  = other[c2]..   
-00021c00: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00021c10: 6973 696e 7374 616e 6365 2876 312c 206e  isinstance(v1, n
-00021c20: 702e 6e64 6172 7261 7929 3a0d 0a20 2020  p.ndarray):..   
-00021c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021c40: 2069 6620 6973 696e 7374 616e 6365 2876   if isinstance(v
-00021c50: 322c 206e 702e 6e64 6172 7261 7929 3a0d  2, np.ndarray):.
-00021c60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00021c70: 2020 2020 2020 2020 2069 6620 7263 2e43           if rc.C
-00021c80: 616c 6375 6c61 7465 4352 4328 7632 2920  alculateCRC(v2) 
-00021c90: 213d 2072 632e 4361 6c63 756c 6174 6543  != rc.CalculateC
-00021ca0: 5243 2876 3129 3a0d 0a20 2020 2020 2020  RC(v1):..       
-00021cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021cc0: 2020 2020 2070 7269 6e74 2866 2254 6865       print(f"The
-00021cd0: 2063 6f6c 756d 6e73 207b 6331 2172 7d20   columns {c1!r} 
-00021ce0: 616e 6420 7b63 3221 727d 2064 6f20 6e6f  and {c2!r} do no
-00021cf0: 7420 6372 6320 6368 6563 6b22 290d 0a20  t crc check").. 
-00021d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021d10: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00021d20: 6e20 4661 6c73 650d 0a20 2020 2020 2020  n False..       
-00021d30: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00021d40: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00021d50: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00021d60: 7428 6622 5468 6520 636f 6c75 6d6e 7320  t(f"The columns 
-00021d70: 7b63 3121 727d 2061 6e64 207b 6332 2172  {c1!r} and {c2!r
-00021d80: 7d20 6172 6520 6e6f 7420 7468 6520 7361  } are not the sa
-00021d90: 6d65 2074 7970 6522 290d 0a20 2020 2020  me type")..     
-00021da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021db0: 2020 2072 6574 7572 6e20 4661 6c73 650d     return False.
-00021dc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00021dd0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00021de0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00021df0: 6f74 2069 7369 6e73 7461 6e63 6528 7632  ot isinstance(v2
-00021e00: 2c20 6e70 2e6e 6461 7272 6179 293a 0d0a  , np.ndarray):..
-00021e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021e20: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00021e30: 7461 6e63 6528 7632 2c20 5374 7275 6374  tance(v2, Struct
-00021e40: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00021e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021e60: 636f 6d70 7465 7374 203d 2076 312e 6571  comptest = v1.eq
-00021e70: 7561 6c73 2876 3229 0d0a 2020 2020 2020  uals(v2)..      
-00021e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021e90: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00021ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021eb0: 2020 2020 2063 6f6d 7074 6573 7420 3d20       comptest = 
-00021ec0: 7631 203d 3d20 7632 0d0a 2020 2020 2020  v1 == v2..      
-00021ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021ee0: 2020 6966 206e 6f74 2063 6f6d 7074 6573    if not comptes
-00021ef0: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
-00021f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021f10: 7072 696e 7428 6622 5468 6520 636f 6c75  print(f"The colu
-00021f20: 6d6e 7320 7b63 3121 727d 2061 6e64 207b  mns {c1!r} and {
-00021f30: 6332 2172 7d20 646f 206e 6f74 2063 6f6d  c2!r} do not com
-00021f40: 7061 7265 2074 6865 2073 616d 6522 290d  pare the same").
-00021f50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00021f60: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00021f70: 7572 6e20 4661 6c73 650d 0a20 2020 2020  urn False..     
-00021f80: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00021f90: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00021fa0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00021fb0: 696e 7428 6622 5468 6520 636f 6c75 6d6e  int(f"The column
-00021fc0: 7320 7b63 3121 727d 2061 6e64 207b 6332  s {c1!r} and {c2
-00021fd0: 2172 7d20 6172 6520 6e6f 7420 7468 6520  !r} are not the 
-00021fe0: 7361 6d65 2074 7970 6522 290d 0a20 2020  same type")..   
-00021ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022000: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
-00022010: 650d 0a20 2020 2020 2020 2020 2020 2065  e..            e
-00022020: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00022030: 2020 2020 2020 7072 696e 7428 6622 5468        print(f"Th
-00022040: 6520 636f 6c75 6d6e 206e 616d 6573 207b  e column names {
-00022050: 6331 2172 7d20 616e 6420 7b63 3221 727d  c1!r} and {c2!r}
-00022060: 2064 6f20 6e6f 7420 6d61 7463 6820 696e   do not match in
-00022070: 2074 6865 2073 616d 6520 6f72 6465 7222   the same order"
-00022080: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00022090: 2020 2072 6574 7572 6e20 4661 6c73 650d     return False.
-000220a0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000220b0: 5472 7565 0d0a 0d0a 2020 2020 2320 2d2d  True....    # --
+000217e0: 2d0d 0a20 2020 2064 6566 2065 7175 616c  -..    def equal
+000217f0: 7328 7365 6c66 2c20 6f74 6865 7229 3a0d  s(self, other):.
+00021800: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00021810: 2020 2020 2020 5465 7374 2077 6865 7468        Test wheth
+00021820: 6572 2074 776f 2053 7472 7563 7473 2063  er two Structs c
+00021830: 6f6e 7461 696e 2074 6865 2073 616d 6520  ontain the same 
+00021840: 656c 656d 656e 7473 2069 6e20 6561 6368  elements in each
+00021850: 2063 6f6c 756d 6e2e 0d0a 2020 2020 2020   column...      
+00021860: 2020 4e61 4e73 2069 6e20 7468 6520 7361    NaNs in the sa
+00021870: 6d65 206c 6f63 6174 696f 6e20 6172 6520  me location are 
+00021880: 636f 6e73 6964 6572 6564 2065 7175 616c  considered equal
+00021890: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
+000218a0: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
+000218b0: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
+000218c0: 2020 2020 206f 7468 6572 3a20 616e 6f74       other: anot
+000218d0: 6865 7220 5374 7275 6374 206f 7220 6469  her Struct or di
+000218e0: 6374 2074 6f20 636f 6d70 6172 6520 746f  ct to compare to
+000218f0: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
+00021900: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
+00021910: 2d2d 2d2d 0d0a 2020 2020 2020 2020 626f  ----..        bo
+00021920: 6f6c 0d0a 0d0a 2020 2020 2020 2020 5365  ol....        Se
+00021930: 6520 616c 736f 0d0a 2020 2020 2020 2020  e also..        
+00021940: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+00021950: 2020 4461 7461 7365 742e 6372 632c 203d    Dataset.crc, =
+00021960: 3d2c 203e 3d2c 203c 3d2c 203e 2c20 203c  =, >=, <=, >,  <
+00021970: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
+00021980: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
+00021990: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+000219a0: 3e3e 3e20 7331 203d 2072 742e 5374 7275  >>> s1 = rt.Stru
+000219b0: 6374 287b 2774 273a 2035 342c 2027 7465  ct({'t': 54, 'te
+000219c0: 7374 273a 206e 702e 696e 7436 3428 3334  st': np.int64(34
+000219d0: 292c 2027 7465 7374 3227 3a20 7274 2e61  ), 'test2': rt.a
+000219e0: 7261 6e67 6528 3230 3029 7d29 0d0a 2020  range(200)})..  
+000219f0: 2020 2020 2020 3e3e 3e20 7332 203d 2072        >>> s2 = r
+00021a00: 742e 5374 7275 6374 287b 2774 273a 2035  t.Struct({'t': 5
+00021a10: 342c 2027 7465 7374 273a 206e 702e 696e  4, 'test': np.in
+00021a20: 7436 3428 3334 292c 2027 7465 7374 3227  t64(34), 'test2'
+00021a30: 3a20 7274 2e61 7261 6e67 6528 3230 3029  : rt.arange(200)
+00021a40: 7d29 0d0a 2020 2020 2020 2020 3e3e 3e20  })..        >>> 
+00021a50: 7331 2e65 7175 616c 7328 7332 290d 0a20  s1.equals(s2).. 
+00021a60: 2020 2020 2020 2054 7275 650d 0a20 2020         True..   
+00021a70: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00021a80: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
+00021a90: 6e63 6528 6f74 6865 722c 2053 7472 7563  nce(other, Struc
+00021aa0: 7429 3a0d 0a20 2020 2020 2020 2020 2020  t):..           
+00021ab0: 2023 2074 7279 2074 6f20 6d61 6b65 2069   # try to make i
+00021ac0: 7420 6120 6461 7461 7365 740d 0a20 2020  t a dataset..   
+00021ad0: 2020 2020 2020 2020 206f 7468 6572 203d           other =
+00021ae0: 2053 7472 7563 7428 6f74 6865 7229 0d0a   Struct(other)..
+00021af0: 0d0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
+00021b00: 662e 5f6e 636f 6c73 2021 3d20 6f74 6865  f._ncols != othe
+00021b10: 722e 5f6e 636f 6c73 3a0d 0a20 2020 2020  r._ncols:..     
+00021b20: 2020 2020 2020 2070 7269 6e74 2822 5468         print("Th
+00021b30: 6520 7374 7275 6374 7320 6172 6520 6e6f  e structs are no
+00021b40: 7420 7468 6520 7361 6d65 2073 697a 6522  t the same size"
+00021b50: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
+00021b60: 6574 7572 6e20 4661 6c73 650d 0a0d 0a20  eturn False.... 
+00021b70: 2020 2020 2020 2066 6f72 2063 312c 2063         for c1, c
+00021b80: 3220 696e 207a 6970 2873 656c 662c 206f  2 in zip(self, o
+00021b90: 7468 6572 293a 0d0a 2020 2020 2020 2020  ther):..        
+00021ba0: 2020 2020 6966 2063 3120 3d3d 2063 323a      if c1 == c2:
+00021bb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00021bc0: 2020 7631 203d 2073 656c 665b 6331 5d0d    v1 = self[c1].
+00021bd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00021be0: 2076 3220 3d20 6f74 6865 725b 6332 5d0d   v2 = other[c2].
+00021bf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00021c00: 2069 6620 6973 696e 7374 616e 6365 2876   if isinstance(v
+00021c10: 312c 206e 702e 6e64 6172 7261 7929 3a0d  1, np.ndarray):.
+00021c20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00021c30: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00021c40: 6365 2876 322c 206e 702e 6e64 6172 7261  ce(v2, np.ndarra
+00021c50: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
+00021c60: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00021c70: 7263 2e43 616c 6375 6c61 7465 4352 4328  rc.CalculateCRC(
+00021c80: 7632 2920 213d 2072 632e 4361 6c63 756c  v2) != rc.Calcul
+00021c90: 6174 6543 5243 2876 3129 3a0d 0a20 2020  ateCRC(v1):..   
+00021ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021cb0: 2020 2020 2020 2020 2070 7269 6e74 2866           print(f
+00021cc0: 2254 6865 2063 6f6c 756d 6e73 207b 6331  "The columns {c1
+00021cd0: 2172 7d20 616e 6420 7b63 3221 727d 2064  !r} and {c2!r} d
+00021ce0: 6f20 6e6f 7420 6372 6320 6368 6563 6b22  o not crc check"
+00021cf0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00021d00: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00021d10: 6574 7572 6e20 4661 6c73 650d 0a20 2020  eturn False..   
+00021d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021d30: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00021d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021d50: 7072 696e 7428 6622 5468 6520 636f 6c75  print(f"The colu
+00021d60: 6d6e 7320 7b63 3121 727d 2061 6e64 207b  mns {c1!r} and {
+00021d70: 6332 2172 7d20 6172 6520 6e6f 7420 7468  c2!r} are not th
+00021d80: 6520 7361 6d65 2074 7970 6522 290d 0a20  e same type").. 
+00021d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021da0: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+00021db0: 6c73 650d 0a20 2020 2020 2020 2020 2020  lse..           
+00021dc0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00021dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021de0: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
+00021df0: 6528 7632 2c20 6e70 2e6e 6461 7272 6179  e(v2, np.ndarray
+00021e00: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00021e10: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00021e20: 7369 6e73 7461 6e63 6528 7632 2c20 5374  sinstance(v2, St
+00021e30: 7275 6374 293a 0d0a 2020 2020 2020 2020  ruct):..        
+00021e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021e50: 2020 2020 636f 6d70 7465 7374 203d 2076      comptest = v
+00021e60: 312e 6571 7561 6c73 2876 3229 0d0a 2020  1.equals(v2)..  
+00021e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021e80: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00021e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021ea0: 2020 2020 2020 2020 2063 6f6d 7074 6573           comptes
+00021eb0: 7420 3d20 7631 203d 3d20 7632 0d0a 2020  t = v1 == v2..  
+00021ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021ed0: 2020 2020 2020 6966 206e 6f74 2063 6f6d        if not com
+00021ee0: 7074 6573 743a 0d0a 2020 2020 2020 2020  ptest:..        
+00021ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021f00: 2020 2020 7072 696e 7428 6622 5468 6520      print(f"The 
+00021f10: 636f 6c75 6d6e 7320 7b63 3121 727d 2061  columns {c1!r} a
+00021f20: 6e64 207b 6332 2172 7d20 646f 206e 6f74  nd {c2!r} do not
+00021f30: 2063 6f6d 7061 7265 2074 6865 2073 616d   compare the sam
+00021f40: 6522 290d 0a20 2020 2020 2020 2020 2020  e")..           
+00021f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021f60: 2072 6574 7572 6e20 4661 6c73 650d 0a20   return False.. 
+00021f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021f80: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+00021f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021fa0: 2020 7072 696e 7428 6622 5468 6520 636f    print(f"The co
+00021fb0: 6c75 6d6e 7320 7b63 3121 727d 2061 6e64  lumns {c1!r} and
+00021fc0: 207b 6332 2172 7d20 6172 6520 6e6f 7420   {c2!r} are not 
+00021fd0: 7468 6520 7361 6d65 2074 7970 6522 290d  the same type").
+00021fe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00021ff0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00022000: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
+00022010: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+00022020: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+00022030: 6622 5468 6520 636f 6c75 6d6e 206e 616d  f"The column nam
+00022040: 6573 207b 6331 2172 7d20 616e 6420 7b63  es {c1!r} and {c
+00022050: 3221 727d 2064 6f20 6e6f 7420 6d61 7463  2!r} do not matc
+00022060: 6820 696e 2074 6865 2073 616d 6520 6f72  h in the same or
+00022070: 6465 7222 290d 0a20 2020 2020 2020 2020  der")..         
+00022080: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+00022090: 6c73 650d 0a20 2020 2020 2020 2072 6574  lse..        ret
+000220a0: 7572 6e20 5472 7565 0d0a 0d0a 2020 2020  urn True....    
+000220b0: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
 000220c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000220d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000220e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000220f0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-00022100: 2320 6361 6e20 6265 2075 7365 6420 746f  # can be used to
-00022110: 2063 6f70 7920 6b65 796c 6973 7473 2061   copy keylists a
-00022120: 7320 7765 6c6c 0d0a 2020 2020 2320 6765  s well..    # ge
-00022130: 6e65 7269 6320 726f 7574 696e 6520 746f  neric routine to
-00022140: 2063 6f70 7920 6672 6f6d 2061 6e20 6f72   copy from an or
-00022150: 6465 7265 6420 6469 6374 2074 6f20 616e  dered dict to an
-00022160: 206f 7264 6572 6564 2064 6963 740d 0a20   ordered dict.. 
-00022170: 2020 2064 6566 205f 636f 7079 5f66 726f     def _copy_fro
-00022180: 6d5f 6469 6374 2873 656c 662c 2073 6f75  m_dict(self, sou
-00022190: 7263 655f 6469 6374 2c20 636f 7079 3d46  rce_dict, copy=F
-000221a0: 616c 7365 2c20 726f 7773 3d4e 6f6e 652c  alse, rows=None,
-000221b0: 2063 6f6c 733d 4e6f 6e65 293a 0d0a 2020   cols=None):..  
-000221c0: 2020 2020 2020 2320 544f 444f 3a20 4164        # TODO: Ad
-000221d0: 6420 6368 6563 6b20 746f 2072 6f77 732c  d check to rows,
-000221e0: 2065 2e67 2e2c 2063 6865 636b 2061 7272   e.g., check arr
-000221f0: 6179 2073 6861 7065 732d 2d28 6e72 6f77  ay shapes--(nrow
-00022200: 732c 3129 2c20 2831 2c6e 726f 7773 292c  s,1), (1,nrows),
-00022210: 2028 6e72 6f77 732c 290d 0a20 2020 2020   (nrows,)..     
-00022220: 2020 2023 2054 4f44 4f3a 2043 6c65 616e     # TODO: Clean
-00022230: 2074 6869 7320 7570 2061 6674 6572 2077   this up after w
-00022240: 7269 7469 6e67 206d 6f72 6520 6765 6e65  riting more gene
-00022250: 7261 6c20 696e 6465 7865 720d 0a20 2020  ral indexer..   
-00022260: 2020 2020 206e 7064 6963 7420 3d20 7b7d       npdict = {}
-00022270: 0d0a 0d0a 2020 2020 2020 2020 726f 776d  ....        rowm
-00022280: 6173 6b20 3d20 4e6f 6e65 0d0a 2020 2020  ask = None..    
-00022290: 2020 2020 6966 2072 6f77 7320 6973 206e      if rows is n
-000222a0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
-000222b0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-000222c0: 6e63 6528 726f 7773 2c20 2869 6e74 2c20  nce(rows, (int, 
-000222d0: 6e70 2e69 6e74 6567 6572 2929 3a0d 0a20  np.integer)):.. 
-000222e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000222f0: 6620 726f 7773 203e 2030 3a0d 0a20 2020  f rows > 0:..   
-00022300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022310: 2023 2074 616b 6520 6120 6865 6164 2073   # take a head s
-00022320: 6c69 6365 0d0a 2020 2020 2020 2020 2020  lice..          
-00022330: 2020 2020 2020 2020 2020 726f 776d 6173            rowmas
-00022340: 6b20 3d20 736c 6963 6528 302c 2072 6f77  k = slice(0, row
-00022350: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
-00022360: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00022370: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00022380: 2074 616b 6520 6120 7461 696c 2073 6c69   take a tail sli
-00022390: 6365 0d0a 2020 2020 2020 2020 2020 2020  ce..            
-000223a0: 2020 2020 2020 2020 726f 776d 6173 6b20          rowmask 
-000223b0: 3d20 736c 6963 6528 726f 7773 2c20 4e6f  = slice(rows, No
-000223c0: 6e65 290d 0a20 2020 2020 2020 2020 2020  ne)..           
-000223d0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-000223e0: 2020 2020 2020 2020 2320 636f 756c 6420          # could 
-000223f0: 6265 2061 2062 6f6f 6c65 616e 206d 6173  be a boolean mas
-00022400: 6b0d 0a20 2020 2020 2020 2020 2020 2020  k..             
-00022410: 2020 2072 6f77 6d61 736b 203d 2072 6f77     rowmask = row
-00022420: 730d 0a0d 0a20 2020 2020 2020 2066 6f72  s....        for
-00022430: 206b 2c20 6172 7220 696e 2073 6f75 7263   k, arr in sourc
-00022440: 655f 6469 6374 2e69 7465 6d73 2829 3a0d  e_dict.items():.
-00022450: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00022460: 726f 776d 6173 6b20 6973 206e 6f74 204e  rowmask is not N
-00022470: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-00022480: 2020 2020 2020 2320 636f 756c 6420 6265        # could be
-00022490: 2061 2073 6c69 6365 2c20 626f 6f6c 206d   a slice, bool m
-000224a0: 6173 6b2c 206f 7220 6661 6e63 7920 696e  ask, or fancy in
-000224b0: 6465 780d 0a20 2020 2020 2020 2020 2020  dex..           
-000224c0: 2020 2020 2061 7272 203d 2061 7272 5b72       arr = arr[r
-000224d0: 6f77 6d61 736b 5d0d 0a20 2020 2020 2020  owmask]..       
-000224e0: 2020 2020 2069 6620 636f 7079 3a0d 0a20       if copy:.. 
-000224f0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00022500: 2042 5547 2048 4552 452c 2063 616e 6e6f   BUG HERE, canno
-00022510: 7420 6a75 7374 2063 6f70 7920 616e 2061  t just copy an a
-00022520: 7272 6179 2061 7320 7468 6520 6172 7261  rray as the arra
-00022530: 7920 6d69 6768 7420 6265 2061 2043 6174  y might be a Cat
-00022540: 6567 6f72 6963 616c 206f 7220 736f 6d65  egorical or some
-00022550: 206f 7468 6572 2063 6c61 7373 0d0a 2020   other class..  
-00022560: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00022570: 4144 4449 5449 4f4e 414c 2042 5547 2048  ADDITIONAL BUG H
-00022580: 4552 4520 4d55 5354 2041 4249 4445 2042  ERE MUST ABIDE B
-00022590: 5920 534f 5254 0d0a 2020 2020 2020 2020  Y SORT..        
-000225a0: 2020 2020 2020 2020 2320 6172 722e 636f          # arr.co
-000225b0: 7079 2829 2020 2020 6172 725b 534f 5254  py()    arr[SORT
-000225c0: 494e 4445 585d 0d0a 2020 2020 2020 2020  INDEX]..        
-000225d0: 2020 2020 2020 2020 6e70 6469 6374 5b6b          npdict[k
-000225e0: 5d20 3d20 6172 722e 636f 7079 2829 0d0a  ] = arr.copy()..
-000225f0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00022600: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00022610: 2020 206e 7064 6963 745b 6b5d 203d 2061     npdict[k] = a
-00022620: 7272 0d0a 2020 2020 2020 2020 7265 7475  rr..        retu
-00022630: 726e 206e 7064 6963 740d 0a0d 0a20 2020  rn npdict....   
-00022640: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+000220e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+000220f0: 2020 2020 2320 6361 6e20 6265 2075 7365      # can be use
+00022100: 6420 746f 2063 6f70 7920 6b65 796c 6973  d to copy keylis
+00022110: 7473 2061 7320 7765 6c6c 0d0a 2020 2020  ts as well..    
+00022120: 2320 6765 6e65 7269 6320 726f 7574 696e  # generic routin
+00022130: 6520 746f 2063 6f70 7920 6672 6f6d 2061  e to copy from a
+00022140: 6e20 6f72 6465 7265 6420 6469 6374 2074  n ordered dict t
+00022150: 6f20 616e 206f 7264 6572 6564 2064 6963  o an ordered dic
+00022160: 740d 0a20 2020 2064 6566 205f 636f 7079  t..    def _copy
+00022170: 5f66 726f 6d5f 6469 6374 2873 656c 662c  _from_dict(self,
+00022180: 2073 6f75 7263 655f 6469 6374 2c20 636f   source_dict, co
+00022190: 7079 3d46 616c 7365 2c20 726f 7773 3d4e  py=False, rows=N
+000221a0: 6f6e 652c 2063 6f6c 733d 4e6f 6e65 293a  one, cols=None):
+000221b0: 0d0a 2020 2020 2020 2020 2320 544f 444f  ..        # TODO
+000221c0: 3a20 4164 6420 6368 6563 6b20 746f 2072  : Add check to r
+000221d0: 6f77 732c 2065 2e67 2e2c 2063 6865 636b  ows, e.g., check
+000221e0: 2061 7272 6179 2073 6861 7065 732d 2d28   array shapes--(
+000221f0: 6e72 6f77 732c 3129 2c20 2831 2c6e 726f  nrows,1), (1,nro
+00022200: 7773 292c 2028 6e72 6f77 732c 290d 0a20  ws), (nrows,).. 
+00022210: 2020 2020 2020 2023 2054 4f44 4f3a 2043         # TODO: C
+00022220: 6c65 616e 2074 6869 7320 7570 2061 6674  lean this up aft
+00022230: 6572 2077 7269 7469 6e67 206d 6f72 6520  er writing more 
+00022240: 6765 6e65 7261 6c20 696e 6465 7865 720d  general indexer.
+00022250: 0a20 2020 2020 2020 206e 7064 6963 7420  .        npdict 
+00022260: 3d20 7b7d 0d0a 0d0a 2020 2020 2020 2020  = {}....        
+00022270: 726f 776d 6173 6b20 3d20 4e6f 6e65 0d0a  rowmask = None..
+00022280: 2020 2020 2020 2020 6966 2072 6f77 7320          if rows 
+00022290: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+000222a0: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+000222b0: 6e73 7461 6e63 6528 726f 7773 2c20 2869  nstance(rows, (i
+000222c0: 6e74 2c20 6e70 2e69 6e74 6567 6572 2929  nt, np.integer))
+000222d0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000222e0: 2020 2069 6620 726f 7773 203e 2030 3a0d     if rows > 0:.
+000222f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00022300: 2020 2020 2023 2074 616b 6520 6120 6865       # take a he
+00022310: 6164 2073 6c69 6365 0d0a 2020 2020 2020  ad slice..      
+00022320: 2020 2020 2020 2020 2020 2020 2020 726f                ro
+00022330: 776d 6173 6b20 3d20 736c 6963 6528 302c  wmask = slice(0,
+00022340: 2072 6f77 7329 0d0a 2020 2020 2020 2020   rows)..        
+00022350: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00022360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022370: 2020 2023 2074 616b 6520 6120 7461 696c     # take a tail
+00022380: 2073 6c69 6365 0d0a 2020 2020 2020 2020   slice..        
+00022390: 2020 2020 2020 2020 2020 2020 726f 776d              rowm
+000223a0: 6173 6b20 3d20 736c 6963 6528 726f 7773  ask = slice(rows
+000223b0: 2c20 4e6f 6e65 290d 0a20 2020 2020 2020  , None)..       
+000223c0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+000223d0: 2020 2020 2020 2020 2020 2020 2320 636f              # co
+000223e0: 756c 6420 6265 2061 2062 6f6f 6c65 616e  uld be a boolean
+000223f0: 206d 6173 6b0d 0a20 2020 2020 2020 2020   mask..         
+00022400: 2020 2020 2020 2072 6f77 6d61 736b 203d         rowmask =
+00022410: 2072 6f77 730d 0a0d 0a20 2020 2020 2020   rows....       
+00022420: 2066 6f72 206b 2c20 6172 7220 696e 2073   for k, arr in s
+00022430: 6f75 7263 655f 6469 6374 2e69 7465 6d73  ource_dict.items
+00022440: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
+00022450: 2069 6620 726f 776d 6173 6b20 6973 206e   if rowmask is n
+00022460: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00022470: 2020 2020 2020 2020 2020 2320 636f 756c            # coul
+00022480: 6420 6265 2061 2073 6c69 6365 2c20 626f  d be a slice, bo
+00022490: 6f6c 206d 6173 6b2c 206f 7220 6661 6e63  ol mask, or fanc
+000224a0: 7920 696e 6465 780d 0a20 2020 2020 2020  y index..       
+000224b0: 2020 2020 2020 2020 2061 7272 203d 2061           arr = a
+000224c0: 7272 5b72 6f77 6d61 736b 5d0d 0a20 2020  rr[rowmask]..   
+000224d0: 2020 2020 2020 2020 2069 6620 636f 7079           if copy
+000224e0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000224f0: 2020 2023 2042 5547 2048 4552 452c 2063     # BUG HERE, c
+00022500: 616e 6e6f 7420 6a75 7374 2063 6f70 7920  annot just copy 
+00022510: 616e 2061 7272 6179 2061 7320 7468 6520  an array as the 
+00022520: 6172 7261 7920 6d69 6768 7420 6265 2061  array might be a
+00022530: 2043 6174 6567 6f72 6963 616c 206f 7220   Categorical or 
+00022540: 736f 6d65 206f 7468 6572 2063 6c61 7373  some other class
+00022550: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00022560: 2020 2320 4144 4449 5449 4f4e 414c 2042    # ADDITIONAL B
+00022570: 5547 2048 4552 4520 4d55 5354 2041 4249  UG HERE MUST ABI
+00022580: 4445 2042 5920 534f 5254 0d0a 2020 2020  DE BY SORT..    
+00022590: 2020 2020 2020 2020 2020 2020 2320 6172              # ar
+000225a0: 722e 636f 7079 2829 2020 2020 6172 725b  r.copy()    arr[
+000225b0: 534f 5254 494e 4445 585d 0d0a 2020 2020  SORTINDEX]..    
+000225c0: 2020 2020 2020 2020 2020 2020 6e70 6469              npdi
+000225d0: 6374 5b6b 5d20 3d20 6172 722e 636f 7079  ct[k] = arr.copy
+000225e0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+000225f0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00022600: 2020 2020 2020 206e 7064 6963 745b 6b5d         npdict[k]
+00022610: 203d 2061 7272 0d0a 2020 2020 2020 2020   = arr..        
+00022620: 7265 7475 726e 206e 7064 6963 740d 0a0d  return npdict...
+00022630: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+00022640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00022650: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00022660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00022670: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-00022680: 6465 6620 6173 6469 6374 2873 656c 662c  def asdict(self,
-00022690: 2073 7562 6c69 7374 3a20 4c69 7374 5b73   sublist: List[s
-000226a0: 7472 5d20 3d20 4e6f 6e65 2c20 636f 7079  tr] = None, copy
-000226b0: 3a20 626f 6f6c 203d 2046 616c 7365 293a  : bool = False):
-000226c0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-000226d0: 2020 2020 2020 2052 6574 7572 6e20 636f         Return co
-000226e0: 6e74 656e 7473 206f 6620 5374 7275 6374  ntents of Struct
-000226f0: 2061 7320 6120 6469 6374 696f 6e61 7279   as a dictionary
-00022700: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
-00022710: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
-00022720: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
-00022730: 2020 2020 2073 7562 6c69 7374 203a 206c       sublist : l
-00022740: 6973 7420 6f66 2073 7472 0d0a 2020 2020  ist of str..    
-00022750: 2020 2020 2020 2020 4f70 7469 6f6e 616c          Optional
-00022760: 206c 6973 7420 7265 7374 7269 6374 696e   list restrictin
-00022770: 6720 636f 6c75 6d6e 7320 746f 2072 6574  g columns to ret
-00022780: 7572 6e2e 0d0a 2020 2020 2020 2020 636f  urn...        co
-00022790: 7079 203a 2062 6f6f 6c0d 0a20 2020 2020  py : bool..     
-000227a0: 2020 2020 2020 2049 6620 7365 7420 746f         If set to
-000227b0: 2054 7275 6520 7468 656e 2063 6f70 7928   True then copy(
-000227c0: 2920 7769 6c6c 2062 6520 6361 6c6c 6564  ) will be called
-000227d0: 206f 6e20 636f 6c75 6d6e 7320 7768 6572   on columns wher
-000227e0: 6520 6170 7072 6f70 7269 6174 652e 0d0a  e appropriate...
-000227f0: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-00022800: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-00022810: 2d2d 0d0a 2020 2020 2020 2020 6469 6374  --..        dict
-00022820: 0d0a 0d0a 2020 2020 2020 2020 4578 616d  ....        Exam
-00022830: 706c 6573 0d0a 2020 2020 2020 2020 2d2d  ples..        --
-00022840: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00022850: 5468 6973 2069 7320 7573 6566 756c 2069  This is useful i
-00022860: 662c 2066 6f72 2077 6861 7465 7665 7220  f, for whatever 
-00022870: 7265 6173 6f6e 2c20 6120 7269 7074 6162  reason, a riptab
-00022880: 6c65 2044 6174 6173 6574 206e 6565 6473  le Dataset needs
-00022890: 2074 6f20 676f 2069 6e74 6f20 6120 7061   to go into a pa
-000228a0: 6e64 6173 2044 6174 6146 7261 6d65 3a0d  ndas DataFrame:.
-000228b0: 0a0d 0a20 2020 2020 2020 203e 3e3e 2064  ...        >>> d
-000228c0: 7320 3d20 7274 2e44 6174 6173 6574 287b  s = rt.Dataset({
-000228d0: 2763 6f6c 5f27 2b73 7472 2869 293a 2072  'col_'+str(i): r
-000228e0: 742e 6172 616e 6765 2835 2920 666f 7220  t.arange(5) for 
-000228f0: 6920 696e 2072 616e 6765 2835 297d 290d  i in range(5)}).
-00022900: 0a20 2020 2020 2020 203e 3e3e 2064 6620  .        >>> df 
-00022910: 3d20 7064 2e44 6174 6146 7261 6d65 2864  = pd.DataFrame(d
-00022920: 732e 6173 6469 6374 2829 290d 0a20 2020  s.asdict())..   
-00022930: 2020 2020 203e 3e3e 2064 660d 0a20 2020       >>> df..   
-00022940: 2020 2020 2020 2020 636f 6c5f 3020 2063          col_0  c
-00022950: 6f6c 5f31 2020 636f 6c5f 3220 2063 6f6c  ol_1  col_2  col
-00022960: 5f33 2020 636f 6c5f 340d 0a20 2020 2020  _3  col_4..     
-00022970: 2020 2030 2020 2020 2020 3020 2020 2020     0      0     
-00022980: 2030 2020 2020 2020 3020 2020 2020 2030   0      0      0
-00022990: 2020 2020 2020 300d 0a20 2020 2020 2020        0..       
-000229a0: 2031 2020 2020 2020 3120 2020 2020 2031   1      1      1
-000229b0: 2020 2020 2020 3120 2020 2020 2031 2020        1      1  
-000229c0: 2020 2020 310d 0a20 2020 2020 2020 2032      1..        2
-000229d0: 2020 2020 2020 3220 2020 2020 2032 2020        2      2  
-000229e0: 2020 2020 3220 2020 2020 2032 2020 2020      2      2    
-000229f0: 2020 320d 0a20 2020 2020 2020 2033 2020    2..        3  
-00022a00: 2020 2020 3320 2020 2020 2033 2020 2020      3      3    
-00022a10: 2020 3320 2020 2020 2033 2020 2020 2020    3      3      
-00022a20: 330d 0a20 2020 2020 2020 2034 2020 2020  3..        4    
-00022a30: 2020 3420 2020 2020 2034 2020 2020 2020    4      4      
-00022a40: 3420 2020 2020 2034 2020 2020 2020 340d  4      4      4.
-00022a50: 0a0d 0a20 2020 2020 2020 2043 6572 7461  ...        Certa
-00022a60: 696e 2069 7465 6d73 2063 616e 2062 6520  in items can be 
-00022a70: 7265 7175 6573 7465 6420 7769 7468 2074  requested with t
-00022a80: 6865 2060 7375 626c 6973 7460 206b 6579  he `sublist` key
-00022a90: 776f 7264 3a0d 0a0d 0a20 2020 2020 2020  word:....       
-00022aa0: 203e 3e3e 2064 732e 6173 6469 6374 2873   >>> ds.asdict(s
-00022ab0: 7562 6c69 7374 3d5b 2763 6f6c 5f31 272c  ublist=['col_1',
-00022ac0: 2763 6f6c 5f33 275d 290d 0a20 2020 2020  'col_3'])..     
-00022ad0: 2020 207b 2763 6f6c 5f31 273a 2046 6173     {'col_1': Fas
-00022ae0: 7441 7272 6179 285b 302c 2031 2c20 322c  tArray([0, 1, 2,
-00022af0: 2033 2c20 345d 292c 2027 636f 6c5f 3327   3, 4]), 'col_3'
-00022b00: 3a20 4661 7374 4172 7261 7928 5b30 2c20  : FastArray([0, 
-00022b10: 312c 2032 2c20 332c 2034 5d29 7d0d 0a0d  1, 2, 3, 4])}...
-00022b20: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00022b30: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00022b40: 662e 5f61 735f 6469 6374 696f 6e61 7279  f._as_dictionary
-00022b50: 2863 6f70 793d 636f 7079 2c20 636f 6c73  (copy=copy, cols
-00022b60: 3d73 7562 6c69 7374 290d 0a0d 0a20 2020  =sublist)....   
-00022b70: 2064 6566 205f 5f62 6f6f 6c5f 5f28 7365   def __bool__(se
-00022b80: 6c66 293a 0d0a 2020 2020 2020 2020 7261  lf):..        ra
-00022b90: 6973 6520 5661 6c75 6545 7272 6f72 280d  ise ValueError(.
-00022ba0: 0a20 2020 2020 2020 2020 2020 2066 2254  .            f"T
-00022bb0: 6865 2074 7275 7468 2076 616c 7565 206f  he truth value o
-00022bc0: 6620 6120 7b73 656c 662e 5f5f 636c 6173  f a {self.__clas
-00022bd0: 735f 5f2e 5f5f 6e61 6d65 5f5f 7d20 7769  s__.__name__} wi
-00022be0: 7468 206d 6f72 6520 7468 616e 206f 6e65  th more than one
-00022bf0: 2065 6c65 6d65 6e74 2069 7320 616d 6269   element is ambi
-00022c00: 6775 6f75 732e 2055 7365 2061 2e61 6e79  guous. Use a.any
-00022c10: 2829 206f 7220 612e 616c 6c28 2922 0d0a  () or a.all()"..
-00022c20: 2020 2020 2020 2020 290d 0a0d 0a20 2020          )....   
-00022c30: 2064 6566 2074 6f6c 6973 7428 7365 6c66   def tolist(self
-00022c40: 2920 2d3e 206c 6973 743a 0d0a 2020 2020  ) -> list:..    
-00022c50: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00022c60: 2052 6574 7572 6e73 2064 6174 6120 7661   Returns data va
-00022c70: 6c75 6573 2069 6e20 6120 6c69 7374 2e20  lues in a list. 
-00022c80: 204f 7574 7075 7420 6571 7569 7661 6c65   Output equivale
-00022c90: 6e74 2074 6f20 6c69 7374 2873 742e 7661  nt to list(st.va
-00022ca0: 6c75 6573 2829 292e 0d0a 0d0a 2020 2020  lues()).....    
-00022cb0: 2020 2020 3a72 6574 7572 6e3a 206c 6973      :return: lis
-00022cc0: 740d 0a20 2020 2020 2020 2022 2222 0d0a  t..        """..
-00022cd0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00022ce0: 656c 662e 5f61 6c6c 5f69 7465 6d73 2e69  elf._all_items.i
-00022cf0: 7465 6d73 5f74 6f6c 6973 7428 290d 0a0d  tems_tolist()...
-00022d00: 0a20 2020 2064 6566 2061 6e79 2873 656c  .    def any(sel
-00022d10: 6629 3a0d 0a20 2020 2020 2020 2022 2222  f):..        """
-00022d20: 0d0a 2020 2020 2020 2020 466f 7220 7573  ..        For us
-00022d30: 6520 696e 2062 6f6f 6c65 616e 2063 6f6e  e in boolean con
-00022d40: 7465 7874 733a 2044 6f65 7320 7468 6572  texts: Does ther
-00022d50: 6520 6578 6973 7420 616e 2065 6c65 6d65  e exist an eleme
-00022d60: 6e74 2028 7661 6c29 2077 6869 6368 2065  nt (val) which e
-00022d70: 6974 6865 723a 0d0a 0d0a 2020 2020 2020  ither:....      
-00022d80: 2020 312e 2076 616c 2063 6173 7473 2074    1. val casts t
-00022d90: 6f20 5472 7565 2c20 6f72 0d0a 2020 2020  o True, or..    
-00022da0: 2020 2020 322e 2072 6574 7572 6e73 2054      2. returns T
-00022db0: 7275 6520 666f 7220 7661 6c2e 616e 7928  rue for val.any(
-00022dc0: 2920 6f72 2061 6e79 2876 616c 290d 0a0d  ) or any(val)...
-00022dd0: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
-00022de0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-00022df0: 2d0d 0a20 2020 2020 2020 2062 6f6f 6c0d  -..        bool.
-00022e00: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
-00022e10: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
-00022e20: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 203e  -----..        >
-00022e30: 3e3e 2073 3d72 742e 5374 7275 6374 2829  >> s=rt.Struct()
-00022e40: 0d0a 2020 2020 2020 2020 3e3e 3e20 732e  ..        >>> s.
-00022e50: 613d 7274 2e44 6174 6173 6574 2829 0d0a  a=rt.Dataset()..
-00022e60: 2020 2020 2020 2020 3e3e 3e20 732e 616e          >>> s.an
-00022e70: 7928 290d 0a20 2020 2020 2020 2046 616c  y()..        Fal
-00022e80: 7365 0d0a 0d0a 2020 2020 2020 2020 2222  se....        ""
-00022e90: 220d 0a20 2020 2020 2020 2023 2057 616e  "..        # Wan
-00022ea0: 7420 7468 6520 666f 6c6c 6f77 696e 672c  t the following,
-00022eb0: 2062 7574 206e 6565 6420 746f 2068 616e   but need to han
-00022ec0: 646c 6520 7370 6563 6961 6c20 6361 7365  dle special case
-00022ed0: 7320 2873 7472 696e 6773 2069 6e20 6172  s (strings in ar
-00022ee0: 7261 7973 292e 0d0a 2020 2020 2020 2020  rays)...        
-00022ef0: 666f 7220 5f76 2069 6e20 7365 6c66 2e76  for _v in self.v
-00022f00: 616c 7565 7328 293a 0d0a 2020 2020 2020  alues():..      
-00022f10: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00022f20: 6e63 6528 5f76 2c20 5374 7275 6374 293a  nce(_v, Struct):
-00022f30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00022f40: 2020 2320 6176 6f69 6420 6361 6c6c 696e    # avoid callin
-00022f50: 6720 4461 7461 7365 742e 616e 7928 290d  g Dataset.any().
-00022f60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00022f70: 2069 6620 5374 7275 6374 2e61 6e79 285f   if Struct.any(_
-00022f80: 7629 3a0d 0a20 2020 2020 2020 2020 2020  v):..           
-00022f90: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00022fa0: 5472 7565 0d0a 2020 2020 2020 2020 2020  True..          
-00022fb0: 2020 656c 6966 2068 6173 6174 7472 285f    elif hasattr(_
-00022fc0: 762c 2022 616e 7922 293a 0d0a 2020 2020  v, "any"):..    
-00022fd0: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-00022fe0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00022ff0: 2020 2020 2020 6966 205f 762e 616e 7928        if _v.any(
-00023000: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00023010: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00023020: 726e 2054 7275 650d 0a20 2020 2020 2020  rn True..       
-00023030: 2020 2020 2020 2020 2065 7863 6570 7420           except 
-00023040: 5479 7065 4572 726f 723a 0d0a 2020 2020  TypeError:..    
-00023050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023060: 6966 2061 6e79 285f 7629 3a0d 0a20 2020  if any(_v):..   
-00023070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023080: 2020 2020 2072 6574 7572 6e20 5472 7565       return True
-00023090: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
-000230a0: 6966 2068 6173 6174 7472 285f 762c 2022  if hasattr(_v, "
-000230b0: 5f5f 6974 6572 5f5f 2229 3a0d 0a20 2020  __iter__"):..   
-000230c0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000230d0: 616e 7928 5f76 293a 0d0a 2020 2020 2020  any(_v):..      
-000230e0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000230f0: 7475 726e 2054 7275 650d 0a20 2020 2020  turn True..     
-00023100: 2020 2020 2020 2065 6c69 6620 626f 6f6c         elif bool
-00023110: 285f 7629 3a0d 0a20 2020 2020 2020 2020  (_v):..         
-00023120: 2020 2020 2020 2072 6574 7572 6e20 5472         return Tr
-00023130: 7565 0d0a 2020 2020 2020 2020 7265 7475  ue..        retu
-00023140: 726e 2046 616c 7365 0d0a 0d0a 2020 2020  rn False....    
-00023150: 6465 6620 616c 6c28 7365 6c66 293a 0d0a  def all(self):..
-00023160: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-00023170: 2020 2020 2046 6f72 2075 7365 2069 6e20       For use in 
-00023180: 626f 6f6c 6561 6e20 636f 6e74 6578 7473  boolean contexts
-00023190: 3a20 4973 2069 7420 7472 7565 2074 6861  : Is it true tha
-000231a0: 7420 666f 7220 616c 6c20 656c 656d 656e  t for all elemen
-000231b0: 7473 2028 7661 6c29 2065 6974 6865 723a  ts (val) either:
-000231c0: 0d0a 0d0a 2020 2020 2020 2020 312e 2076  ....        1. v
-000231d0: 616c 2063 6173 7473 2074 6f20 5472 7565  al casts to True
-000231e0: 2c20 6f72 0d0a 2020 2020 2020 2020 322e  , or..        2.
-000231f0: 2072 6574 7572 6e73 2054 7275 6520 666f   returns True fo
-00023200: 7220 7661 6c2e 616c 6c28 2920 6f72 2061  r val.all() or a
-00023210: 6c6c 2876 616c 290d 0a0d 0a20 2020 2020  ll(val)....     
-00023220: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
-00023230: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
-00023240: 2020 2020 2062 6f6f 6c0d 0a20 2020 2020       bool..     
-00023250: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00023260: 2320 5761 6e74 2074 6865 2066 6f6c 6c6f  # Want the follo
-00023270: 7769 6e67 2c20 6275 7420 6e65 6564 2074  wing, but need t
-00023280: 6f20 6861 6e64 6c65 2073 7065 6369 616c  o handle special
-00023290: 2063 6173 6573 2028 7374 7269 6e67 7320   cases (strings 
-000232a0: 696e 2061 7272 6179 7329 2e0d 0a20 2020  in arrays)...   
-000232b0: 2020 2020 2023 2072 6574 7572 6e20 616c       # return al
-000232c0: 6c28 6765 7461 7474 7228 7365 6c66 2c20  l(getattr(self, 
-000232d0: 5f63 6e29 2066 6f72 205f 636e 2069 6e20  _cn) for _cn in 
-000232e0: 7365 6c66 2e5f 616c 6c5f 6974 656d 7329  self._all_items)
-000232f0: 0d0a 2020 2020 2020 2020 666f 7220 5f76  ..        for _v
-00023300: 2069 6e20 7365 6c66 2e76 616c 7565 7328   in self.values(
-00023310: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00023320: 6966 2069 7369 6e73 7461 6e63 6528 5f76  if isinstance(_v
-00023330: 2c20 5374 7275 6374 293a 0d0a 2020 2020  , Struct):..    
-00023340: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00023350: 6f74 2053 7472 7563 742e 616c 6c28 5f76  ot Struct.all(_v
-00023360: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00023370: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-00023380: 616c 7365 0d0a 2020 2020 2020 2020 2020  alse..          
-00023390: 2020 656c 6966 2068 6173 6174 7472 285f    elif hasattr(_
-000233a0: 762c 2022 616c 6c22 293a 0d0a 2020 2020  v, "all"):..    
-000233b0: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-000233c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000233d0: 2020 2020 2020 6966 206e 6f74 205f 762e        if not _v.
-000233e0: 616c 6c28 293a 0d0a 2020 2020 2020 2020  all():..        
-000233f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023400: 7265 7475 726e 2046 616c 7365 0d0a 2020  return False..  
-00023410: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-00023420: 6365 7074 2054 7970 6545 7272 6f72 3a0d  cept TypeError:.
-00023430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023440: 2020 2020 2069 6620 6e6f 7420 616c 6c28       if not all(
-00023450: 5f76 293a 0d0a 2020 2020 2020 2020 2020  _v):..          
-00023460: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00023470: 7475 726e 2046 616c 7365 0d0a 2020 2020  turn False..    
-00023480: 2020 2020 2020 2020 656c 6966 2068 6173          elif has
-00023490: 6174 7472 285f 762c 2022 5f5f 6974 6572  attr(_v, "__iter
-000234a0: 5f5f 2229 3a0d 0a20 2020 2020 2020 2020  __"):..         
-000234b0: 2020 2020 2020 2069 6620 6e6f 7420 616c         if not al
-000234c0: 6c28 5f76 293a 0d0a 2020 2020 2020 2020  l(_v):..        
-000234d0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000234e0: 726e 2046 616c 7365 0d0a 2020 2020 2020  rn False..      
-000234f0: 2020 2020 2020 656c 6966 206e 6f74 2062        elif not b
-00023500: 6f6f 6c28 5f76 293a 0d0a 2020 2020 2020  ool(_v):..      
-00023510: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00023520: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
-00023530: 7265 7475 726e 2054 7275 650d 0a0d 0a20  return True.... 
-00023540: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-00023550: 0d0a 2020 2020 6465 6620 5f73 697a 656f  ..    def _sizeo
-00023560: 665f 666d 7428 6e75 6d2c 2073 7566 6669  f_fmt(num, suffi
-00023570: 783d 2242 2229 3a0d 0a20 2020 2020 2020  x="B"):..       
-00023580: 2066 6f72 2075 6e69 7420 696e 205b 2222   for unit in [""
-00023590: 2c20 224b 222c 2022 4d22 2c20 2247 222c  , "K", "M", "G",
-000235a0: 2022 5422 2c20 2250 222c 2022 4522 2c20   "T", "P", "E", 
-000235b0: 225a 225d 3a0d 0a20 2020 2020 2020 2020  "Z"]:..         
-000235c0: 2020 2069 6620 6162 7328 6e75 6d29 203c     if abs(num) <
-000235d0: 2031 3032 342e 303a 0d0a 2020 2020 2020   1024.0:..      
-000235e0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000235f0: 2022 2533 2e31 6620 2573 2573 2220 2520   "%3.1f %s%s" % 
-00023600: 286e 756d 2c20 756e 6974 2c20 7375 6666  (num, unit, suff
-00023610: 6978 290d 0a20 2020 2020 2020 2020 2020  ix)..           
-00023620: 206e 756d 202f 3d20 3130 3234 2e30 0d0a   num /= 1024.0..
-00023630: 2020 2020 2020 2020 7265 7475 726e 2022          return "
-00023640: 252e 3166 2025 7325 7322 2025 2028 6e75  %.1f %s%s" % (nu
-00023650: 6d2c 2022 5922 2c20 7375 6666 6978 290d  m, "Y", suffix).
-00023660: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+00022660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+00022670: 2020 2020 6465 6620 6173 6469 6374 2873      def asdict(s
+00022680: 656c 662c 2073 7562 6c69 7374 3a20 4c69  elf, sublist: Li
+00022690: 7374 5b73 7472 5d20 3d20 4e6f 6e65 2c20  st[str] = None, 
+000226a0: 636f 7079 3a20 626f 6f6c 203d 2046 616c  copy: bool = Fal
+000226b0: 7365 293a 0d0a 2020 2020 2020 2020 2222  se):..        ""
+000226c0: 220d 0a20 2020 2020 2020 2052 6574 7572  "..        Retur
+000226d0: 6e20 636f 6e74 656e 7473 206f 6620 5374  n contents of St
+000226e0: 7275 6374 2061 7320 6120 6469 6374 696f  ruct as a dictio
+000226f0: 6e61 7279 2e0d 0a0d 0a20 2020 2020 2020  nary.....       
+00022700: 2050 6172 616d 6574 6572 730d 0a20 2020   Parameters..   
+00022710: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d       ----------.
+00022720: 0a20 2020 2020 2020 2073 7562 6c69 7374  .        sublist
+00022730: 203a 206c 6973 7420 6f66 2073 7472 0d0a   : list of str..
+00022740: 2020 2020 2020 2020 2020 2020 4f70 7469              Opti
+00022750: 6f6e 616c 206c 6973 7420 7265 7374 7269  onal list restri
+00022760: 6374 696e 6720 636f 6c75 6d6e 7320 746f  cting columns to
+00022770: 2072 6574 7572 6e2e 0d0a 2020 2020 2020   return...      
+00022780: 2020 636f 7079 203a 2062 6f6f 6c0d 0a20    copy : bool.. 
+00022790: 2020 2020 2020 2020 2020 2049 6620 7365             If se
+000227a0: 7420 746f 2054 7275 6520 7468 656e 2063  t to True then c
+000227b0: 6f70 7928 2920 7769 6c6c 2062 6520 6361  opy() will be ca
+000227c0: 6c6c 6564 206f 6e20 636f 6c75 6d6e 7320  lled on columns 
+000227d0: 7768 6572 6520 6170 7072 6f70 7269 6174  where appropriat
+000227e0: 652e 0d0a 0d0a 2020 2020 2020 2020 5265  e.....        Re
+000227f0: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
+00022800: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+00022810: 6469 6374 0d0a 0d0a 2020 2020 2020 2020  dict....        
+00022820: 4578 616d 706c 6573 0d0a 2020 2020 2020  Examples..      
+00022830: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
+00022840: 2020 2020 5468 6973 2069 7320 7573 6566      This is usef
+00022850: 756c 2069 662c 2066 6f72 2077 6861 7465  ul if, for whate
+00022860: 7665 7220 7265 6173 6f6e 2c20 6120 7269  ver reason, a ri
+00022870: 7074 6162 6c65 2044 6174 6173 6574 206e  ptable Dataset n
+00022880: 6565 6473 2074 6f20 676f 2069 6e74 6f20  eeds to go into 
+00022890: 6120 7061 6e64 6173 2044 6174 6146 7261  a pandas DataFra
+000228a0: 6d65 3a0d 0a0d 0a20 2020 2020 2020 203e  me:....        >
+000228b0: 3e3e 2064 7320 3d20 7274 2e44 6174 6173  >> ds = rt.Datas
+000228c0: 6574 287b 2763 6f6c 5f27 2b73 7472 2869  et({'col_'+str(i
+000228d0: 293a 2072 742e 6172 616e 6765 2835 2920  ): rt.arange(5) 
+000228e0: 666f 7220 6920 696e 2072 616e 6765 2835  for i in range(5
+000228f0: 297d 290d 0a20 2020 2020 2020 203e 3e3e  )})..        >>>
+00022900: 2064 6620 3d20 7064 2e44 6174 6146 7261   df = pd.DataFra
+00022910: 6d65 2864 732e 6173 6469 6374 2829 290d  me(ds.asdict()).
+00022920: 0a20 2020 2020 2020 203e 3e3e 2064 660d  .        >>> df.
+00022930: 0a20 2020 2020 2020 2020 2020 636f 6c5f  .           col_
+00022940: 3020 2063 6f6c 5f31 2020 636f 6c5f 3220  0  col_1  col_2 
+00022950: 2063 6f6c 5f33 2020 636f 6c5f 340d 0a20   col_3  col_4.. 
+00022960: 2020 2020 2020 2030 2020 2020 2020 3020         0      0 
+00022970: 2020 2020 2030 2020 2020 2020 3020 2020       0      0   
+00022980: 2020 2030 2020 2020 2020 300d 0a20 2020     0      0..   
+00022990: 2020 2020 2031 2020 2020 2020 3120 2020       1      1   
+000229a0: 2020 2031 2020 2020 2020 3120 2020 2020     1      1     
+000229b0: 2031 2020 2020 2020 310d 0a20 2020 2020   1      1..     
+000229c0: 2020 2032 2020 2020 2020 3220 2020 2020     2      2     
+000229d0: 2032 2020 2020 2020 3220 2020 2020 2032   2      2      2
+000229e0: 2020 2020 2020 320d 0a20 2020 2020 2020        2..       
+000229f0: 2033 2020 2020 2020 3320 2020 2020 2033   3      3      3
+00022a00: 2020 2020 2020 3320 2020 2020 2033 2020        3      3  
+00022a10: 2020 2020 330d 0a20 2020 2020 2020 2034      3..        4
+00022a20: 2020 2020 2020 3420 2020 2020 2034 2020        4      4  
+00022a30: 2020 2020 3420 2020 2020 2034 2020 2020      4      4    
+00022a40: 2020 340d 0a0d 0a20 2020 2020 2020 2043    4....        C
+00022a50: 6572 7461 696e 2069 7465 6d73 2063 616e  ertain items can
+00022a60: 2062 6520 7265 7175 6573 7465 6420 7769   be requested wi
+00022a70: 7468 2074 6865 2060 7375 626c 6973 7460  th the `sublist`
+00022a80: 206b 6579 776f 7264 3a0d 0a0d 0a20 2020   keyword:....   
+00022a90: 2020 2020 203e 3e3e 2064 732e 6173 6469       >>> ds.asdi
+00022aa0: 6374 2873 7562 6c69 7374 3d5b 2763 6f6c  ct(sublist=['col
+00022ab0: 5f31 272c 2763 6f6c 5f33 275d 290d 0a20  _1','col_3']).. 
+00022ac0: 2020 2020 2020 207b 2763 6f6c 5f31 273a         {'col_1':
+00022ad0: 2046 6173 7441 7272 6179 285b 302c 2031   FastArray([0, 1
+00022ae0: 2c20 322c 2033 2c20 345d 292c 2027 636f  , 2, 3, 4]), 'co
+00022af0: 6c5f 3327 3a20 4661 7374 4172 7261 7928  l_3': FastArray(
+00022b00: 5b30 2c20 312c 2032 2c20 332c 2034 5d29  [0, 1, 2, 3, 4])
+00022b10: 7d0d 0a0d 0a20 2020 2020 2020 2022 2222  }....        """
+00022b20: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00022b30: 2073 656c 662e 5f61 735f 6469 6374 696f   self._as_dictio
+00022b40: 6e61 7279 2863 6f70 793d 636f 7079 2c20  nary(copy=copy, 
+00022b50: 636f 6c73 3d73 7562 6c69 7374 290d 0a0d  cols=sublist)...
+00022b60: 0a20 2020 2064 6566 205f 5f62 6f6f 6c5f  .    def __bool_
+00022b70: 5f28 7365 6c66 293a 0d0a 2020 2020 2020  _(self):..      
+00022b80: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+00022b90: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
+00022ba0: 2066 2254 6865 2074 7275 7468 2076 616c   f"The truth val
+00022bb0: 7565 206f 6620 6120 7b73 656c 662e 5f5f  ue of a {self.__
+00022bc0: 636c 6173 735f 5f2e 5f5f 6e61 6d65 5f5f  class__.__name__
+00022bd0: 7d20 7769 7468 206d 6f72 6520 7468 616e  } with more than
+00022be0: 206f 6e65 2065 6c65 6d65 6e74 2069 7320   one element is 
+00022bf0: 616d 6269 6775 6f75 732e 2055 7365 2061  ambiguous. Use a
+00022c00: 2e61 6e79 2829 206f 7220 612e 616c 6c28  .any() or a.all(
+00022c10: 2922 0d0a 2020 2020 2020 2020 290d 0a0d  )"..        )...
+00022c20: 0a20 2020 2064 6566 2074 6f6c 6973 7428  .    def tolist(
+00022c30: 7365 6c66 2920 2d3e 206c 6973 743a 0d0a  self) -> list:..
+00022c40: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+00022c50: 2020 2020 2052 6574 7572 6e73 2064 6174       Returns dat
+00022c60: 6120 7661 6c75 6573 2069 6e20 6120 6c69  a values in a li
+00022c70: 7374 2e20 204f 7574 7075 7420 6571 7569  st.  Output equi
+00022c80: 7661 6c65 6e74 2074 6f20 6c69 7374 2873  valent to list(s
+00022c90: 742e 7661 6c75 6573 2829 292e 0d0a 0d0a  t.values()).....
+00022ca0: 2020 2020 2020 2020 3a72 6574 7572 6e3a          :return:
+00022cb0: 206c 6973 740d 0a20 2020 2020 2020 2022   list..        "
+00022cc0: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
+00022cd0: 726e 2073 656c 662e 5f61 6c6c 5f69 7465  rn self._all_ite
+00022ce0: 6d73 2e69 7465 6d73 5f74 6f6c 6973 7428  ms.items_tolist(
+00022cf0: 290d 0a0d 0a20 2020 2064 6566 2061 6e79  )....    def any
+00022d00: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+00022d10: 2022 2222 0d0a 2020 2020 2020 2020 466f   """..        Fo
+00022d20: 7220 7573 6520 696e 2062 6f6f 6c65 616e  r use in boolean
+00022d30: 2063 6f6e 7465 7874 733a 2044 6f65 7320   contexts: Does 
+00022d40: 7468 6572 6520 6578 6973 7420 616e 2065  there exist an e
+00022d50: 6c65 6d65 6e74 2028 7661 6c29 2077 6869  lement (val) whi
+00022d60: 6368 2065 6974 6865 723a 0d0a 0d0a 2020  ch either:....  
+00022d70: 2020 2020 2020 312e 2076 616c 2063 6173        1. val cas
+00022d80: 7473 2074 6f20 5472 7565 2c20 6f72 0d0a  ts to True, or..
+00022d90: 2020 2020 2020 2020 322e 2072 6574 7572          2. retur
+00022da0: 6e73 2054 7275 6520 666f 7220 7661 6c2e  ns True for val.
+00022db0: 616e 7928 2920 6f72 2061 6e79 2876 616c  any() or any(val
+00022dc0: 290d 0a0d 0a20 2020 2020 2020 2052 6574  )....        Ret
+00022dd0: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
+00022de0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2062  -----..        b
+00022df0: 6f6f 6c0d 0a0d 0a20 2020 2020 2020 2045  ool....        E
+00022e00: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
+00022e10: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+00022e20: 2020 203e 3e3e 2073 3d72 742e 5374 7275     >>> s=rt.Stru
+00022e30: 6374 2829 0d0a 2020 2020 2020 2020 3e3e  ct()..        >>
+00022e40: 3e20 732e 613d 7274 2e44 6174 6173 6574  > s.a=rt.Dataset
+00022e50: 2829 0d0a 2020 2020 2020 2020 3e3e 3e20  ()..        >>> 
+00022e60: 732e 616e 7928 290d 0a20 2020 2020 2020  s.any()..       
+00022e70: 2046 616c 7365 0d0a 0d0a 2020 2020 2020   False....      
+00022e80: 2020 2222 220d 0a20 2020 2020 2020 2023    """..        #
+00022e90: 2057 616e 7420 7468 6520 666f 6c6c 6f77   Want the follow
+00022ea0: 696e 672c 2062 7574 206e 6565 6420 746f  ing, but need to
+00022eb0: 2068 616e 646c 6520 7370 6563 6961 6c20   handle special 
+00022ec0: 6361 7365 7320 2873 7472 696e 6773 2069  cases (strings i
+00022ed0: 6e20 6172 7261 7973 292e 0d0a 2020 2020  n arrays)...    
+00022ee0: 2020 2020 666f 7220 5f76 2069 6e20 7365      for _v in se
+00022ef0: 6c66 2e76 616c 7565 7328 293a 0d0a 2020  lf.values():..  
+00022f00: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+00022f10: 6e73 7461 6e63 6528 5f76 2c20 5374 7275  nstance(_v, Stru
+00022f20: 6374 293a 0d0a 2020 2020 2020 2020 2020  ct):..          
+00022f30: 2020 2020 2020 2320 6176 6f69 6420 6361        # avoid ca
+00022f40: 6c6c 696e 6720 4461 7461 7365 742e 616e  lling Dataset.an
+00022f50: 7928 290d 0a20 2020 2020 2020 2020 2020  y()..           
+00022f60: 2020 2020 2069 6620 5374 7275 6374 2e61       if Struct.a
+00022f70: 6e79 285f 7629 3a0d 0a20 2020 2020 2020  ny(_v):..       
+00022f80: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00022f90: 7572 6e20 5472 7565 0d0a 2020 2020 2020  urn True..      
+00022fa0: 2020 2020 2020 656c 6966 2068 6173 6174        elif hasat
+00022fb0: 7472 285f 762c 2022 616e 7922 293a 0d0a  tr(_v, "any"):..
+00022fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022fd0: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+00022fe0: 2020 2020 2020 2020 2020 6966 205f 762e            if _v.
+00022ff0: 616e 7928 293a 0d0a 2020 2020 2020 2020  any():..        
+00023000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023010: 7265 7475 726e 2054 7275 650d 0a20 2020  return True..   
+00023020: 2020 2020 2020 2020 2020 2020 2065 7863               exc
+00023030: 6570 7420 5479 7065 4572 726f 723a 0d0a  ept TypeError:..
+00023040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023050: 2020 2020 6966 2061 6e79 285f 7629 3a0d      if any(_v):.
+00023060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00023070: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00023080: 5472 7565 0d0a 2020 2020 2020 2020 2020  True..          
+00023090: 2020 656c 6966 2068 6173 6174 7472 285f    elif hasattr(_
+000230a0: 762c 2022 5f5f 6974 6572 5f5f 2229 3a0d  v, "__iter__"):.
+000230b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000230c0: 2069 6620 616e 7928 5f76 293a 0d0a 2020   if any(_v):..  
+000230d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000230e0: 2020 7265 7475 726e 2054 7275 650d 0a20    return True.. 
+000230f0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00023100: 626f 6f6c 285f 7629 3a0d 0a20 2020 2020  bool(_v):..     
+00023110: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00023120: 6e20 5472 7565 0d0a 2020 2020 2020 2020  n True..        
+00023130: 7265 7475 726e 2046 616c 7365 0d0a 0d0a  return False....
+00023140: 2020 2020 6465 6620 616c 6c28 7365 6c66      def all(self
+00023150: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
+00023160: 0a20 2020 2020 2020 2046 6f72 2075 7365  .        For use
+00023170: 2069 6e20 626f 6f6c 6561 6e20 636f 6e74   in boolean cont
+00023180: 6578 7473 3a20 4973 2069 7420 7472 7565  exts: Is it true
+00023190: 2074 6861 7420 666f 7220 616c 6c20 656c   that for all el
+000231a0: 656d 656e 7473 2028 7661 6c29 2065 6974  ements (val) eit
+000231b0: 6865 723a 0d0a 0d0a 2020 2020 2020 2020  her:....        
+000231c0: 312e 2076 616c 2063 6173 7473 2074 6f20  1. val casts to 
+000231d0: 5472 7565 2c20 6f72 0d0a 2020 2020 2020  True, or..      
+000231e0: 2020 322e 2072 6574 7572 6e73 2054 7275    2. returns Tru
+000231f0: 6520 666f 7220 7661 6c2e 616c 6c28 2920  e for val.all() 
+00023200: 6f72 2061 6c6c 2876 616c 290d 0a0d 0a20  or all(val).... 
+00023210: 2020 2020 2020 2052 6574 7572 6e73 0d0a         Returns..
+00023220: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0d          -------.
+00023230: 0a20 2020 2020 2020 2062 6f6f 6c0d 0a20  .        bool.. 
+00023240: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00023250: 2020 2020 2320 5761 6e74 2074 6865 2066      # Want the f
+00023260: 6f6c 6c6f 7769 6e67 2c20 6275 7420 6e65  ollowing, but ne
+00023270: 6564 2074 6f20 6861 6e64 6c65 2073 7065  ed to handle spe
+00023280: 6369 616c 2063 6173 6573 2028 7374 7269  cial cases (stri
+00023290: 6e67 7320 696e 2061 7272 6179 7329 2e0d  ngs in arrays)..
+000232a0: 0a20 2020 2020 2020 2023 2072 6574 7572  .        # retur
+000232b0: 6e20 616c 6c28 6765 7461 7474 7228 7365  n all(getattr(se
+000232c0: 6c66 2c20 5f63 6e29 2066 6f72 205f 636e  lf, _cn) for _cn
+000232d0: 2069 6e20 7365 6c66 2e5f 616c 6c5f 6974   in self._all_it
+000232e0: 656d 7329 0d0a 2020 2020 2020 2020 666f  ems)..        fo
+000232f0: 7220 5f76 2069 6e20 7365 6c66 2e76 616c  r _v in self.val
+00023300: 7565 7328 293a 0d0a 2020 2020 2020 2020  ues():..        
+00023310: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00023320: 6528 5f76 2c20 5374 7275 6374 293a 0d0a  e(_v, Struct):..
+00023330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023340: 6966 206e 6f74 2053 7472 7563 742e 616c  if not Struct.al
+00023350: 6c28 5f76 293a 0d0a 2020 2020 2020 2020  l(_v):..        
+00023360: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00023370: 726e 2046 616c 7365 0d0a 2020 2020 2020  rn False..      
+00023380: 2020 2020 2020 656c 6966 2068 6173 6174        elif hasat
+00023390: 7472 285f 762c 2022 616c 6c22 293a 0d0a  tr(_v, "all"):..
+000233a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000233b0: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+000233c0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+000233d0: 205f 762e 616c 6c28 293a 0d0a 2020 2020   _v.all():..    
+000233e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000233f0: 2020 2020 7265 7475 726e 2046 616c 7365      return False
+00023400: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00023410: 2020 6578 6365 7074 2054 7970 6545 7272    except TypeErr
+00023420: 6f72 3a0d 0a20 2020 2020 2020 2020 2020  or:..           
+00023430: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00023440: 616c 6c28 5f76 293a 0d0a 2020 2020 2020  all(_v):..      
+00023450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023460: 2020 7265 7475 726e 2046 616c 7365 0d0a    return False..
+00023470: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00023480: 2068 6173 6174 7472 285f 762c 2022 5f5f   hasattr(_v, "__
+00023490: 6974 6572 5f5f 2229 3a0d 0a20 2020 2020  iter__"):..     
+000234a0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+000234b0: 7420 616c 6c28 5f76 293a 0d0a 2020 2020  t all(_v):..    
+000234c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000234d0: 7265 7475 726e 2046 616c 7365 0d0a 2020  return False..  
+000234e0: 2020 2020 2020 2020 2020 656c 6966 206e            elif n
+000234f0: 6f74 2062 6f6f 6c28 5f76 293a 0d0a 2020  ot bool(_v):..  
+00023500: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00023510: 7475 726e 2046 616c 7365 0d0a 2020 2020  turn False..    
+00023520: 2020 2020 7265 7475 726e 2054 7275 650d      return True.
+00023530: 0a0d 0a20 2020 2040 7374 6174 6963 6d65  ...    @staticme
+00023540: 7468 6f64 0d0a 2020 2020 6465 6620 5f73  thod..    def _s
+00023550: 697a 656f 665f 666d 7428 6e75 6d2c 2073  izeof_fmt(num, s
+00023560: 7566 6669 783d 2242 2229 3a0d 0a20 2020  uffix="B"):..   
+00023570: 2020 2020 2066 6f72 2075 6e69 7420 696e       for unit in
+00023580: 205b 2222 2c20 224b 222c 2022 4d22 2c20   ["", "K", "M", 
+00023590: 2247 222c 2022 5422 2c20 2250 222c 2022  "G", "T", "P", "
+000235a0: 4522 2c20 225a 225d 3a0d 0a20 2020 2020  E", "Z"]:..     
+000235b0: 2020 2020 2020 2069 6620 6162 7328 6e75         if abs(nu
+000235c0: 6d29 203c 2031 3032 342e 303a 0d0a 2020  m) < 1024.0:..  
+000235d0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000235e0: 7475 726e 2022 2533 2e31 6620 2573 2573  turn "%3.1f %s%s
+000235f0: 2220 2520 286e 756d 2c20 756e 6974 2c20  " % (num, unit, 
+00023600: 7375 6666 6978 290d 0a20 2020 2020 2020  suffix)..       
+00023610: 2020 2020 206e 756d 202f 3d20 3130 3234       num /= 1024
+00023620: 2e30 0d0a 2020 2020 2020 2020 7265 7475  .0..        retu
+00023630: 726e 2022 252e 3166 2025 7325 7322 2025  rn "%.1f %s%s" %
+00023640: 2028 6e75 6d2c 2022 5922 2c20 7375 6666   (num, "Y", suff
+00023650: 6978 290d 0a0d 0a20 2020 2023 202d 2d2d  ix)....    # ---
+00023660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00023670: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00023680: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00023690: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000236a0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 205f  -----..    def _
-000236b0: 6c61 7374 5f72 6f77 5f73 7461 7473 2873  last_row_stats(s
-000236c0: 656c 6629 3a0d 0a20 2020 2020 2020 2072  elf):..        r
-000236d0: 6574 7572 6e20 6622 5b7b 7365 6c66 2e5f  eturn f"[{self._
-000236e0: 6e63 6f6c 737d 2063 6f6c 756d 6e73 5d22  ncols} columns]"
-000236f0: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+00023690: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064  ---------..    d
+000236a0: 6566 205f 6c61 7374 5f72 6f77 5f73 7461  ef _last_row_sta
+000236b0: 7473 2873 656c 6629 3a0d 0a20 2020 2020  ts(self):..     
+000236c0: 2020 2072 6574 7572 6e20 6622 5b7b 7365     return f"[{se
+000236d0: 6c66 2e5f 6e63 6f6c 737d 2063 6f6c 756d  lf._ncols} colum
+000236e0: 6e73 5d22 0d0a 0d0a 2020 2020 2320 2d2d  ns]"....    # --
+000236f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00023700: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00023710: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00023720: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00023730: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
-00023740: 7472 6565 2873 656c 662c 206e 616d 653d  tree(self, name=
-00023750: 4e6f 6e65 2c20 7368 6f77 7061 7468 733d  None, showpaths=
-00023760: 4661 6c73 652c 2069 6e66 6f3d 4661 6c73  False, info=Fals
-00023770: 6529 3a0d 0a20 2020 2020 2020 2022 2222  e):..        """
-00023780: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-00023790: 7320 6120 6869 6572 6172 6368 6963 616c  s a hierarchical
-000237a0: 2076 6965 7720 6f66 2074 6865 2053 7472   view of the Str
-000237b0: 7563 742e 0d0a 0d0a 2020 2020 2020 2020  uct.....        
-000237c0: 5061 7261 6d65 7465 7273 0d0a 2020 2020  Parameters..    
-000237d0: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a      ----------..
-000237e0: 2020 2020 2020 2020 6e61 6d65 203a 2073          name : s
-000237f0: 7472 0d0a 2020 2020 2020 2020 2020 2020  tr..            
-00023800: 4f70 7469 6f6e 616c 206e 616d 6520 666f  Optional name fo
-00023810: 7220 7468 6520 746f 7020 6f66 2074 6865  r the top of the
-00023820: 2074 7265 650d 0a20 2020 2020 2020 2073   tree..        s
-00023830: 686f 7770 6174 6873 0d0a 2020 2020 2020  howpaths..      
-00023840: 2020 2020 2020 544f 444f 2070 7572 706f        TODO purpo
-00023850: 7365 2075 6e6b 6e6f 776e 2c20 6d61 7920  se unknown, may 
-00023860: 7261 6973 6520 6572 726f 7220 6966 2074  raise error if t
-00023870: 7275 650d 0a20 2020 2020 2020 2069 6e66  rue..        inf
-00023880: 6f0d 0a20 2020 2020 2020 2020 2020 2054  o..            T
-00023890: 4f44 4f20 7075 7270 6f73 6520 756e 6b6e  ODO purpose unkn
-000238a0: 6f77 6e0d 0a0d 0a20 2020 2020 2020 2052  own....        R
-000238b0: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
-000238c0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-000238d0: 2074 7265 6520 3a20 7374 720d 0a20 2020   tree : str..   
-000238e0: 2020 2020 2020 2020 2041 2068 6965 7261           A hiera
-000238f0: 7263 6869 6361 6c20 7669 6577 206f 6620  rchical view of 
-00023900: 7468 6520 5374 7275 6374 0d0a 0d0a 2020  the Struct....  
-00023910: 2020 2020 2020 4578 616d 706c 6573 0d0a        Examples..
-00023920: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
-00023930: 0d0a 2020 2020 2020 2020 3e3e 3e20 7374  ..        >>> st
-00023940: 3120 3d20 7274 2e53 7472 7563 7428 7b27  1 = rt.Struct({'
-00023950: 4127 3a20 7274 2e46 4128 5b31 2c20 322c  A': rt.FA([1, 2,
-00023960: 2033 5d29 2c20 2742 273a 2072 742e 4641   3]), 'B': rt.FA
-00023970: 285b 342c 2035 5d29 7d29 0d0a 2020 2020  ([4, 5])})..    
-00023980: 2020 2020 3e3e 3e20 7374 3220 3d20 7274      >>> st2 = rt
-00023990: 2e53 7472 7563 7428 7b27 4327 3a20 7374  .Struct({'C': st
-000239a0: 312c 2027 4427 3a20 7274 2e46 4128 5b36  1, 'D': rt.FA([6
-000239b0: 2c20 372c 2038 5d29 7d29 0d0a 2020 2020  , 7, 8])})..    
-000239c0: 2020 2020 3e3e 3e20 7374 322e 7472 6565      >>> st2.tree
-000239d0: 2829 0d0a 2020 2020 2020 2020 5374 7275  ()..        Stru
-000239e0: 6374 0d0a 2020 2020 2020 2020 20e2 949c  ct..         ...
-000239f0: e294 80e2 9480 e294 80e2 9480 2043 2028  ............ C (
-00023a00: 5374 7275 6374 290d 0a20 2020 2020 2020  Struct)..       
-00023a10: 2020 e294 8220 2020 2020 e294 9ce2 9480    ...     ......
-00023a20: e294 80e2 9480 e294 8020 4120 696e 7433  ......... A int3
-00023a30: 3220 2833 2c29 2034 0d0a 2020 2020 2020  2 (3,) 4..      
-00023a40: 2020 20e2 9482 2020 2020 20e2 9494 e294     ...     .....
-00023a50: 80e2 9480 e294 80e2 9480 2042 2069 6e74  .......... B int
-00023a60: 3332 2028 322c 2920 340d 0a20 2020 2020  32 (2,) 4..     
-00023a70: 2020 2020 e294 94e2 9480 e294 80e2 9480      ............
-00023a80: e294 8020 4420 696e 7433 3220 2833 2c29  ... D int32 (3,)
-00023a90: 2034 0d0a 2020 2020 2020 2020 3e3e 3e20   4..        >>> 
-00023aa0: 7374 322e 7472 6565 286e 616d 653d 2766  st2.tree(name='f
-00023ab0: 6f6f 2729 0d0a 2020 2020 2020 2020 666f  oo')..        fo
-00023ac0: 6f0d 0a20 2020 2020 2020 2020 e294 9ce2  o..         ....
-00023ad0: 9480 e294 80e2 9480 e294 8020 4320 2853  ........... C (S
-00023ae0: 7472 7563 7429 0d0a 2020 2020 2020 2020  truct)..        
-00023af0: 20e2 9482 2020 2020 20e2 949c e294 80e2   ...     .......
-00023b00: 9480 e294 80e2 9480 2041 2069 6e74 3332  ........ A int32
-00023b10: 2028 332c 2920 340d 0a20 2020 2020 2020   (3,) 4..       
-00023b20: 2020 e294 8220 2020 2020 e294 94e2 9480    ...     ......
-00023b30: e294 80e2 9480 e294 8020 4220 696e 7433  ......... B int3
-00023b40: 3220 2832 2c29 2034 0d0a 2020 2020 2020  2 (2,) 4..      
-00023b50: 2020 20e2 9494 e294 80e2 9480 e294 80e2     .............
-00023b60: 9480 2044 2069 6e74 3332 2028 332c 2920  .. D int32 (3,) 
-00023b70: 340d 0a20 2020 2020 2020 2022 2222 0d0a  4..        """..
-00023b80: 2020 2020 2020 2020 6966 206e 616d 6520          if name 
-00023b90: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
-00023ba0: 2020 2020 2020 6e61 6d65 203d 2074 7970        name = typ
-00023bb0: 6528 7365 6c66 292e 5f5f 6e61 6d65 5f5f  e(self).__name__
-00023bc0: 0d0a 0d0a 2020 2020 2020 2020 6e65 7374  ....        nest
-00023bd0: 6564 203d 2044 6973 706c 6179 4e65 7374  ed = DisplayNest
-00023be0: 6564 2829 0d0a 2020 2020 2020 2020 6966  ed()..        if
-00023bf0: 2054 7970 6552 6567 6973 7465 722e 4469   TypeRegister.Di
-00023c00: 7370 6c61 7944 6574 6563 742e 4d6f 6465  splayDetect.Mode
-00023c10: 203d 3d20 4469 7370 6c61 7944 6574 6563   == DisplayDetec
-00023c20: 744d 6f64 6573 2e48 544d 4c3a 0d0a 2020  tModes.HTML:..  
-00023c30: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00023c40: 206e 6573 7465 642e 6275 696c 645f 6e65   nested.build_ne
-00023c50: 7374 6564 5f68 746d 6c28 7365 6c66 2c20  sted_html(self, 
-00023c60: 6e61 6d65 3d6e 616d 6529 0d0a 2020 2020  name=name)..    
-00023c70: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00023c80: 2020 2020 2020 2072 6574 7572 6e20 6e65         return ne
-00023c90: 7374 6564 2e62 7569 6c64 5f6e 6573 7465  sted.build_neste
-00023ca0: 645f 7374 7269 6e67 2873 656c 662c 206e  d_string(self, n
-00023cb0: 616d 653d 6e61 6d65 2c20 7368 6f77 7061  ame=name, showpa
-00023cc0: 7468 733d 7368 6f77 7061 7468 732c 2069  ths=showpaths, i
-00023cd0: 6e66 6f3d 696e 666f 290d 0a0d 0a20 2020  nfo=info)....   
-00023ce0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+00023720: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+00023730: 6465 6620 7472 6565 2873 656c 662c 206e  def tree(self, n
+00023740: 616d 653d 4e6f 6e65 2c20 7368 6f77 7061  ame=None, showpa
+00023750: 7468 733d 4661 6c73 652c 2069 6e66 6f3d  ths=False, info=
+00023760: 4661 6c73 6529 3a0d 0a20 2020 2020 2020  False):..       
+00023770: 2022 2222 0d0a 2020 2020 2020 2020 5265   """..        Re
+00023780: 7475 726e 7320 6120 6869 6572 6172 6368  turns a hierarch
+00023790: 6963 616c 2076 6965 7720 6f66 2074 6865  ical view of the
+000237a0: 2053 7472 7563 742e 0d0a 0d0a 2020 2020   Struct.....    
+000237b0: 2020 2020 5061 7261 6d65 7465 7273 0d0a      Parameters..
+000237c0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+000237d0: 2d2d 0d0a 2020 2020 2020 2020 6e61 6d65  --..        name
+000237e0: 203a 2073 7472 0d0a 2020 2020 2020 2020   : str..        
+000237f0: 2020 2020 4f70 7469 6f6e 616c 206e 616d      Optional nam
+00023800: 6520 666f 7220 7468 6520 746f 7020 6f66  e for the top of
+00023810: 2074 6865 2074 7265 650d 0a20 2020 2020   the tree..     
+00023820: 2020 2073 686f 7770 6174 6873 0d0a 2020     showpaths..  
+00023830: 2020 2020 2020 2020 2020 544f 444f 2070            TODO p
+00023840: 7572 706f 7365 2075 6e6b 6e6f 776e 2c20  urpose unknown, 
+00023850: 6d61 7920 7261 6973 6520 6572 726f 7220  may raise error 
+00023860: 6966 2074 7275 650d 0a20 2020 2020 2020  if true..       
+00023870: 2069 6e66 6f0d 0a20 2020 2020 2020 2020   info..         
+00023880: 2020 2054 4f44 4f20 7075 7270 6f73 6520     TODO purpose 
+00023890: 756e 6b6e 6f77 6e0d 0a0d 0a20 2020 2020  unknown....     
+000238a0: 2020 2052 6574 7572 6e73 0d0a 2020 2020     Returns..    
+000238b0: 2020 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020      -------..   
+000238c0: 2020 2020 2074 7265 6520 3a20 7374 720d       tree : str.
+000238d0: 0a20 2020 2020 2020 2020 2020 2041 2068  .            A h
+000238e0: 6965 7261 7263 6869 6361 6c20 7669 6577  ierarchical view
+000238f0: 206f 6620 7468 6520 5374 7275 6374 0d0a   of the Struct..
+00023900: 0d0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
+00023910: 6573 0d0a 2020 2020 2020 2020 2d2d 2d2d  es..        ----
+00023920: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3e3e  ----..        >>
+00023930: 3e20 7374 3120 3d20 7274 2e53 7472 7563  > st1 = rt.Struc
+00023940: 7428 7b27 4127 3a20 7274 2e46 4128 5b31  t({'A': rt.FA([1
+00023950: 2c20 322c 2033 5d29 2c20 2742 273a 2072  , 2, 3]), 'B': r
+00023960: 742e 4641 285b 342c 2035 5d29 7d29 0d0a  t.FA([4, 5])})..
+00023970: 2020 2020 2020 2020 3e3e 3e20 7374 3220          >>> st2 
+00023980: 3d20 7274 2e53 7472 7563 7428 7b27 4327  = rt.Struct({'C'
+00023990: 3a20 7374 312c 2027 4427 3a20 7274 2e46  : st1, 'D': rt.F
+000239a0: 4128 5b36 2c20 372c 2038 5d29 7d29 0d0a  A([6, 7, 8])})..
+000239b0: 2020 2020 2020 2020 3e3e 3e20 7374 322e          >>> st2.
+000239c0: 7472 6565 2829 0d0a 2020 2020 2020 2020  tree()..        
+000239d0: 5374 7275 6374 0d0a 2020 2020 2020 2020  Struct..        
+000239e0: 20e2 949c e294 80e2 9480 e294 80e2 9480   ...............
+000239f0: 2043 2028 5374 7275 6374 290d 0a20 2020   C (Struct)..   
+00023a00: 2020 2020 2020 e294 8220 2020 2020 e294        ...     ..
+00023a10: 9ce2 9480 e294 80e2 9480 e294 8020 4120  ............. A 
+00023a20: 696e 7433 3220 2833 2c29 2034 0d0a 2020  int32 (3,) 4..  
+00023a30: 2020 2020 2020 20e2 9482 2020 2020 20e2         ...     .
+00023a40: 9494 e294 80e2 9480 e294 80e2 9480 2042  .............. B
+00023a50: 2069 6e74 3332 2028 322c 2920 340d 0a20   int32 (2,) 4.. 
+00023a60: 2020 2020 2020 2020 e294 94e2 9480 e294          ........
+00023a70: 80e2 9480 e294 8020 4420 696e 7433 3220  ....... D int32 
+00023a80: 2833 2c29 2034 0d0a 2020 2020 2020 2020  (3,) 4..        
+00023a90: 3e3e 3e20 7374 322e 7472 6565 286e 616d  >>> st2.tree(nam
+00023aa0: 653d 2766 6f6f 2729 0d0a 2020 2020 2020  e='foo')..      
+00023ab0: 2020 666f 6f0d 0a20 2020 2020 2020 2020    foo..         
+00023ac0: e294 9ce2 9480 e294 80e2 9480 e294 8020  ............... 
+00023ad0: 4320 2853 7472 7563 7429 0d0a 2020 2020  C (Struct)..    
+00023ae0: 2020 2020 20e2 9482 2020 2020 20e2 949c       ...     ...
+00023af0: e294 80e2 9480 e294 80e2 9480 2041 2069  ............ A i
+00023b00: 6e74 3332 2028 332c 2920 340d 0a20 2020  nt32 (3,) 4..   
+00023b10: 2020 2020 2020 e294 8220 2020 2020 e294        ...     ..
+00023b20: 94e2 9480 e294 80e2 9480 e294 8020 4220  ............. B 
+00023b30: 696e 7433 3220 2832 2c29 2034 0d0a 2020  int32 (2,) 4..  
+00023b40: 2020 2020 2020 20e2 9494 e294 80e2 9480         .........
+00023b50: e294 80e2 9480 2044 2069 6e74 3332 2028  ...... D int32 (
+00023b60: 332c 2920 340d 0a20 2020 2020 2020 2022  3,) 4..        "
+00023b70: 2222 0d0a 2020 2020 2020 2020 6966 206e  ""..        if n
+00023b80: 616d 6520 6973 204e 6f6e 653a 0d0a 2020  ame is None:..  
+00023b90: 2020 2020 2020 2020 2020 6e61 6d65 203d            name =
+00023ba0: 2074 7970 6528 7365 6c66 292e 5f5f 6e61   type(self).__na
+00023bb0: 6d65 5f5f 0d0a 0d0a 2020 2020 2020 2020  me__....        
+00023bc0: 6e65 7374 6564 203d 2044 6973 706c 6179  nested = Display
+00023bd0: 4e65 7374 6564 2829 0d0a 2020 2020 2020  Nested()..      
+00023be0: 2020 6966 2054 7970 6552 6567 6973 7465    if TypeRegiste
+00023bf0: 722e 4469 7370 6c61 7944 6574 6563 742e  r.DisplayDetect.
+00023c00: 4d6f 6465 203d 3d20 4469 7370 6c61 7944  Mode == DisplayD
+00023c10: 6574 6563 744d 6f64 6573 2e48 544d 4c3a  etectModes.HTML:
+00023c20: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+00023c30: 7475 726e 206e 6573 7465 642e 6275 696c  turn nested.buil
+00023c40: 645f 6e65 7374 6564 5f68 746d 6c28 7365  d_nested_html(se
+00023c50: 6c66 2c20 6e61 6d65 3d6e 616d 6529 0d0a  lf, name=name)..
+00023c60: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00023c70: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00023c80: 6e20 6e65 7374 6564 2e62 7569 6c64 5f6e  n nested.build_n
+00023c90: 6573 7465 645f 7374 7269 6e67 2873 656c  ested_string(sel
+00023ca0: 662c 206e 616d 653d 6e61 6d65 2c20 7368  f, name=name, sh
+00023cb0: 6f77 7061 7468 733d 7368 6f77 7061 7468  owpaths=showpath
+00023cc0: 732c 2069 6e66 6f3d 696e 666f 290d 0a0d  s, info=info)...
+00023cd0: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+00023ce0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00023cf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00023d00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00023d10: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-00023d20: 6465 6620 6474 7261 6e73 706f 7365 2873  def dtranspose(s
-00023d30: 656c 662c 2070 6c61 696e 3d46 616c 7365  elf, plain=False
-00023d40: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
-00023d50: 0a20 2020 2020 2020 2046 6f72 2064 6973  .        For dis
-00023d60: 706c 6179 206f 6e6c 792e 0d0a 2020 2020  play only...    
-00023d70: 2020 2020 5265 7475 726e 2061 2074 7261      Return a tra
-00023d80: 6e73 706f 7365 6420 7665 7273 696f 6e20  nsposed version 
-00023d90: 6f66 2074 6865 2063 6f6e 7461 696e 6572  of the container
-00023da0: 2773 2073 7472 696e 6720 7265 7072 6573  's string repres
-00023db0: 656e 7461 7469 6f6e 2e0d 0a0d 0a20 2020  entation.....   
-00023dc0: 2020 2020 2050 6172 616d 6574 6572 730d       Parameters.
-00023dd0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00023de0: 2d2d 2d0d 0a20 2020 2020 2020 2070 6c61  ---..        pla
-00023df0: 696e 3a20 626f 6f6c 2c20 4661 6c73 650d  in: bool, False.
-00023e00: 0a20 2020 2020 2020 2020 2020 2049 6620  .            If 
-00023e10: 7472 7565 2074 6865 6e20 7368 6f75 6c64  true then should
-00023e20: 206e 6f74 2062 6520 636f 6c6f 7265 642e   not be colored.
-00023e30: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
-00023e40: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
-00023e50: 2d2d 2d2d 0d0a 2020 2020 2020 2020 7374  ----..        st
-00023e60: 7269 6e67 0d0a 2020 2020 2020 2020 2020  ring..          
-00023e70: 2020 466f 726d 6174 7465 642c 2074 7261    Formatted, tra
-00023e80: 6e73 706f 7365 6420 7665 7273 696f 6e20  nsposed version 
-00023e90: 6f66 2074 6869 7320 696e 7374 616e 6365  of this instance
-00023ea0: 3b20 696e 7465 6e64 6564 2066 6f72 2064  ; intended for d
-00023eb0: 6973 706c 6179 2e0d 0a0d 0a20 2020 2020  isplay.....     
-00023ec0: 2020 2045 7861 6d70 6c65 730d 0a20 2020     Examples..   
-00023ed0: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
-00023ee0: 2020 2020 2020 203e 3e3e 2073 7420 3d20         >>> st = 
-00023ef0: 7274 2e53 7472 7563 7428 7b27 6127 3a20  rt.Struct({'a': 
-00023f00: 312c 2027 6227 3a20 2766 6973 6827 2c20  1, 'b': 'fish', 
-00023f10: 2763 273a 205b 352e 362c 2037 2e38 5d2c  'c': [5.6, 7.8],
-00023f20: 2027 6427 3a20 7b27 4127 3a20 2764 6176   'd': {'A': 'dav
-00023f30: 6964 272c 2027 4227 3a20 276d 6174 7468  id', 'B': 'matth
-00023f40: 6577 277d 2c0d 0a20 2020 2020 2020 202e  ew'},..        .
-00023f50: 2e2e 2027 6527 3a20 6e70 2e6f 6e65 7328  .. 'e': np.ones(
-00023f60: 372c 2064 7479 7065 3d6e 702e 696e 7436  7, dtype=np.int6
-00023f70: 3429 7d29 0d0a 2020 2020 2020 2020 3e3e  4)})..        >>
-00023f80: 3e20 7374 0d0a 2020 2020 2020 2020 2320  > st..        # 
-00023f90: 2020 4e61 6d65 2020 2020 5479 7065 2020    Name    Type  
-00023fa0: 2053 697a 6520 2020 2020 2030 2020 2020   Size      0    
-00023fb0: 2031 2020 2032 0d0a 2020 2020 2020 2020   1   2..        
-00023fc0: 2d20 2020 2d2d 2d2d 2020 202d 2d2d 2d2d  -   ----   -----
-00023fd0: 2020 202d 2d2d 2d20 2020 2d2d 2d2d 2020     ----   ----  
-00023fe0: 202d 2d2d 2020 202d 0d0a 2020 2020 2020   ---   -..      
-00023ff0: 2020 3020 2020 2020 2061 2020 2020 2069    0      a     i
-00024000: 6e74 2020 2020 2020 3020 2020 2020 2031  nt      0      1
-00024010: 0d0a 2020 2020 2020 2020 3120 2020 2020  ..        1     
-00024020: 2062 2020 2020 2073 7472 2020 2020 2020   b     str      
-00024030: 3020 2020 6669 7368 0d0a 2020 2020 2020  0   fish..      
-00024040: 2020 3220 2020 2020 2063 2020 2020 6c69    2      c    li
-00024050: 7374 2020 2020 2020 3220 2020 2035 2e36  st      2    5.6
-00024060: 2020 2037 2e38 0d0a 2020 2020 2020 2020     7.8..        
-00024070: 3320 2020 2020 2064 2020 2020 6469 6374  3      d    dict
-00024080: 2020 2020 2020 3220 2020 2020 2041 2020        2      A  
-00024090: 2020 2042 0d0a 2020 2020 2020 2020 3420     B..        4 
-000240a0: 2020 2020 2065 2020 2069 6e74 3634 2020       e   int64  
-000240b0: 2020 2020 3720 2020 2020 2031 2020 2020      7      1    
-000240c0: 2031 2020 2031 0d0a 2020 2020 2020 2020   1   1..        
-000240d0: 5b35 2063 6f6c 756d 6e73 5d0d 0a20 2020  [5 columns]..   
-000240e0: 2020 2020 203e 3e3e 2073 742e 6474 7261       >>> st.dtra
-000240f0: 6e73 706f 7365 2829 0d0a 2020 2020 2020  nspose()..      
-00024100: 2020 4669 656c 6473 3a20 2020 2020 3020    Fields:     0 
-00024110: 2020 2020 2031 2020 2020 2020 3220 2020       1      2   
-00024120: 2020 2033 2020 2020 2020 2034 0d0a 2020     3       4..  
-00024130: 2020 2020 2020 2d2d 2d2d 2d2d 2d20 2020        -------   
-00024140: 2d2d 2d20 2020 2d2d 2d2d 2020 202d 2d2d  ---   ----   ---
-00024150: 2d20 2020 2d2d 2d2d 2020 202d 2d2d 2d2d  -   ----   -----
-00024160: 0d0a 2020 2020 2020 2020 2020 204e 616d  ..           Nam
-00024170: 6520 2020 2020 6120 2020 2020 2062 2020  e     a      b  
-00024180: 2020 2020 6320 2020 2020 2064 2020 2020      c      d    
-00024190: 2020 2065 0d0a 2020 2020 2020 2020 2020     e..          
-000241a0: 2054 7970 6520 2020 696e 7420 2020 2073   Type   int    s
-000241b0: 7472 2020 206c 6973 7420 2020 6469 6374  tr   list   dict
-000241c0: 2020 2069 6e74 3634 0d0a 2020 2020 2020     int64..      
-000241d0: 2020 2020 2053 697a 6520 2020 2020 3020       Size     0 
-000241e0: 2020 2020 2030 2020 2020 2020 3220 2020       0      2   
-000241f0: 2020 2032 2020 2020 2020 2037 0d0a 2020     2       7..  
-00024200: 2020 2020 2020 2020 2020 2020 3020 2020              0   
-00024210: 2020 3120 2020 6669 7368 2020 2020 352e    1   fish    5.
-00024220: 3620 2020 2020 2041 2020 2020 2020 2031  6      A       1
-00024230: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00024240: 3120 2020 2020 2020 2020 2020 2020 2020  1               
-00024250: 2020 372e 3820 2020 2020 2042 2020 2020    7.8      B    
-00024260: 2020 2031 0d0a 2020 2020 2020 2020 2020     1..          
-00024270: 2020 2020 3220 2020 2020 2020 2020 2020      2           
-00024280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024290: 2020 2020 2020 2031 0d0a 2020 2020 2020         1..      
-000242a0: 2020 5b35 2063 6f6c 756d 6e73 5d0d 0a20    [5 columns].. 
-000242b0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-000242c0: 2020 2020 7072 6576 5f74 5f73 7461 7465      prev_t_state
-000242d0: 203d 2073 656c 662e 5f74 7261 6e73 706f   = self._transpo
-000242e0: 7365 5f6f 6e0d 0a0d 0a20 2020 2020 2020  se_on....       
-000242f0: 2023 2066 6f72 6365 2074 7261 6e73 706f   # force transpo
-00024300: 7365 0d0a 2020 2020 2020 2020 7365 6c66  se..        self
-00024310: 2e5f 7472 616e 7370 6f73 655f 6f6e 203d  ._transpose_on =
-00024320: 2054 7275 650d 0a0d 0a20 2020 2020 2020   True....       
-00024330: 2064 6973 706c 6179 5f74 7970 6520 3d20   display_type = 
-00024340: 7365 6c66 2e5f 6765 745f 6669 6e61 6c5f  self._get_final_
-00024350: 6469 7370 6c61 795f 6d6f 6465 2870 6c61  display_mode(pla
-00024360: 696e 3d70 6c61 696e 290d 0a0d 0a20 2020  in=plain)....   
-00024370: 2020 2020 2072 6573 756c 745f 7461 626c       result_tabl
-00024380: 6520 3d20 7365 6c66 2e6d 616b 655f 7461  e = self.make_ta
-00024390: 626c 6528 6469 7370 6c61 795f 7479 7065  ble(display_type
-000243a0: 290d 0a20 2020 2020 2020 2074 6162 6c65  )..        table
-000243b0: 5f73 7472 696e 6720 3d20 4469 7370 6c61  _string = Displa
-000243c0: 7953 7472 696e 6728 7265 7375 6c74 5f74  yString(result_t
-000243d0: 6162 6c65 290d 0a0d 0a20 2020 2020 2020  able)....       
-000243e0: 2073 656c 662e 5f74 7261 6e73 706f 7365   self._transpose
-000243f0: 5f6f 6e20 3d20 7072 6576 5f74 5f73 7461  _on = prev_t_sta
-00024400: 7465 0d0a 0d0a 2020 2020 2020 2020 7265  te....        re
-00024410: 7475 726e 2074 6162 6c65 5f73 7472 696e  turn table_strin
-00024420: 670d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  g....    # -----
+00023d00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+00023d10: 2020 2020 6465 6620 6474 7261 6e73 706f      def dtranspo
+00023d20: 7365 2873 656c 662c 2070 6c61 696e 3d46  se(self, plain=F
+00023d30: 616c 7365 293a 0d0a 2020 2020 2020 2020  alse):..        
+00023d40: 2222 220d 0a20 2020 2020 2020 2046 6f72  """..        For
+00023d50: 2064 6973 706c 6179 206f 6e6c 792e 0d0a   display only...
+00023d60: 2020 2020 2020 2020 5265 7475 726e 2061          Return a
+00023d70: 2074 7261 6e73 706f 7365 6420 7665 7273   transposed vers
+00023d80: 696f 6e20 6f66 2074 6865 2063 6f6e 7461  ion of the conta
+00023d90: 696e 6572 2773 2073 7472 696e 6720 7265  iner's string re
+00023da0: 7072 6573 656e 7461 7469 6f6e 2e0d 0a0d  presentation....
+00023db0: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
+00023dc0: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
+00023dd0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+00023de0: 2070 6c61 696e 3a20 626f 6f6c 2c20 4661   plain: bool, Fa
+00023df0: 6c73 650d 0a20 2020 2020 2020 2020 2020  lse..           
+00023e00: 2049 6620 7472 7565 2074 6865 6e20 7368   If true then sh
+00023e10: 6f75 6c64 206e 6f74 2062 6520 636f 6c6f  ould not be colo
+00023e20: 7265 642e 0d0a 0d0a 2020 2020 2020 2020  red.....        
+00023e30: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
+00023e40: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
+00023e50: 2020 7374 7269 6e67 0d0a 2020 2020 2020    string..      
+00023e60: 2020 2020 2020 466f 726d 6174 7465 642c        Formatted,
+00023e70: 2074 7261 6e73 706f 7365 6420 7665 7273   transposed vers
+00023e80: 696f 6e20 6f66 2074 6869 7320 696e 7374  ion of this inst
+00023e90: 616e 6365 3b20 696e 7465 6e64 6564 2066  ance; intended f
+00023ea0: 6f72 2064 6973 706c 6179 2e0d 0a0d 0a20  or display..... 
+00023eb0: 2020 2020 2020 2045 7861 6d70 6c65 730d         Examples.
+00023ec0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00023ed0: 2d0d 0a20 2020 2020 2020 203e 3e3e 2073  -..        >>> s
+00023ee0: 7420 3d20 7274 2e53 7472 7563 7428 7b27  t = rt.Struct({'
+00023ef0: 6127 3a20 312c 2027 6227 3a20 2766 6973  a': 1, 'b': 'fis
+00023f00: 6827 2c20 2763 273a 205b 352e 362c 2037  h', 'c': [5.6, 7
+00023f10: 2e38 5d2c 2027 6427 3a20 7b27 4127 3a20  .8], 'd': {'A': 
+00023f20: 2764 6176 6964 272c 2027 4227 3a20 276d  'david', 'B': 'm
+00023f30: 6174 7468 6577 277d 2c0d 0a20 2020 2020  atthew'},..     
+00023f40: 2020 202e 2e2e 2027 6527 3a20 6e70 2e6f     ... 'e': np.o
+00023f50: 6e65 7328 372c 2064 7479 7065 3d6e 702e  nes(7, dtype=np.
+00023f60: 696e 7436 3429 7d29 0d0a 2020 2020 2020  int64)})..      
+00023f70: 2020 3e3e 3e20 7374 0d0a 2020 2020 2020    >>> st..      
+00023f80: 2020 2320 2020 4e61 6d65 2020 2020 5479    #   Name    Ty
+00023f90: 7065 2020 2053 697a 6520 2020 2020 2030  pe   Size      0
+00023fa0: 2020 2020 2031 2020 2032 0d0a 2020 2020       1   2..    
+00023fb0: 2020 2020 2d20 2020 2d2d 2d2d 2020 202d      -   ----   -
+00023fc0: 2d2d 2d2d 2020 202d 2d2d 2d20 2020 2d2d  ----   ----   --
+00023fd0: 2d2d 2020 202d 2d2d 2020 202d 0d0a 2020  --   ---   -..  
+00023fe0: 2020 2020 2020 3020 2020 2020 2061 2020        0      a  
+00023ff0: 2020 2069 6e74 2020 2020 2020 3020 2020     int      0   
+00024000: 2020 2031 0d0a 2020 2020 2020 2020 3120     1..        1 
+00024010: 2020 2020 2062 2020 2020 2073 7472 2020       b     str  
+00024020: 2020 2020 3020 2020 6669 7368 0d0a 2020      0   fish..  
+00024030: 2020 2020 2020 3220 2020 2020 2063 2020        2      c  
+00024040: 2020 6c69 7374 2020 2020 2020 3220 2020    list      2   
+00024050: 2035 2e36 2020 2037 2e38 0d0a 2020 2020   5.6   7.8..    
+00024060: 2020 2020 3320 2020 2020 2064 2020 2020      3      d    
+00024070: 6469 6374 2020 2020 2020 3220 2020 2020  dict      2     
+00024080: 2041 2020 2020 2042 0d0a 2020 2020 2020   A     B..      
+00024090: 2020 3420 2020 2020 2065 2020 2069 6e74    4      e   int
+000240a0: 3634 2020 2020 2020 3720 2020 2020 2031  64      7      1
+000240b0: 2020 2020 2031 2020 2031 0d0a 2020 2020       1   1..    
+000240c0: 2020 2020 5b35 2063 6f6c 756d 6e73 5d0d      [5 columns].
+000240d0: 0a20 2020 2020 2020 203e 3e3e 2073 742e  .        >>> st.
+000240e0: 6474 7261 6e73 706f 7365 2829 0d0a 2020  dtranspose()..  
+000240f0: 2020 2020 2020 4669 656c 6473 3a20 2020        Fields:   
+00024100: 2020 3020 2020 2020 2031 2020 2020 2020    0      1      
+00024110: 3220 2020 2020 2033 2020 2020 2020 2034  2      3       4
+00024120: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+00024130: 2d20 2020 2d2d 2d20 2020 2d2d 2d2d 2020  -   ---   ----  
+00024140: 202d 2d2d 2d20 2020 2d2d 2d2d 2020 202d   ----   ----   -
+00024150: 2d2d 2d2d 0d0a 2020 2020 2020 2020 2020  ----..          
+00024160: 204e 616d 6520 2020 2020 6120 2020 2020   Name     a     
+00024170: 2062 2020 2020 2020 6320 2020 2020 2064   b      c      d
+00024180: 2020 2020 2020 2065 0d0a 2020 2020 2020         e..      
+00024190: 2020 2020 2054 7970 6520 2020 696e 7420       Type   int 
+000241a0: 2020 2073 7472 2020 206c 6973 7420 2020     str   list   
+000241b0: 6469 6374 2020 2069 6e74 3634 0d0a 2020  dict   int64..  
+000241c0: 2020 2020 2020 2020 2053 697a 6520 2020           Size   
+000241d0: 2020 3020 2020 2020 2030 2020 2020 2020    0      0      
+000241e0: 3220 2020 2020 2032 2020 2020 2020 2037  2      2       7
+000241f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00024200: 3020 2020 2020 3120 2020 6669 7368 2020  0     1   fish  
+00024210: 2020 352e 3620 2020 2020 2041 2020 2020    5.6      A    
+00024220: 2020 2031 0d0a 2020 2020 2020 2020 2020     1..          
+00024230: 2020 2020 3120 2020 2020 2020 2020 2020      1           
+00024240: 2020 2020 2020 372e 3820 2020 2020 2042        7.8      B
+00024250: 2020 2020 2020 2031 0d0a 2020 2020 2020         1..      
+00024260: 2020 2020 2020 2020 3220 2020 2020 2020          2       
+00024270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024280: 2020 2020 2020 2020 2020 2031 0d0a 2020             1..  
+00024290: 2020 2020 2020 5b35 2063 6f6c 756d 6e73        [5 columns
+000242a0: 5d0d 0a20 2020 2020 2020 2022 2222 0d0a  ]..        """..
+000242b0: 2020 2020 2020 2020 7072 6576 5f74 5f73          prev_t_s
+000242c0: 7461 7465 203d 2073 656c 662e 5f74 7261  tate = self._tra
+000242d0: 6e73 706f 7365 5f6f 6e0d 0a0d 0a20 2020  nspose_on....   
+000242e0: 2020 2020 2023 2066 6f72 6365 2074 7261       # force tra
+000242f0: 6e73 706f 7365 0d0a 2020 2020 2020 2020  nspose..        
+00024300: 7365 6c66 2e5f 7472 616e 7370 6f73 655f  self._transpose_
+00024310: 6f6e 203d 2054 7275 650d 0a0d 0a20 2020  on = True....   
+00024320: 2020 2020 2064 6973 706c 6179 5f74 7970       display_typ
+00024330: 6520 3d20 7365 6c66 2e5f 6765 745f 6669  e = self._get_fi
+00024340: 6e61 6c5f 6469 7370 6c61 795f 6d6f 6465  nal_display_mode
+00024350: 2870 6c61 696e 3d70 6c61 696e 290d 0a0d  (plain=plain)...
+00024360: 0a20 2020 2020 2020 2072 6573 756c 745f  .        result_
+00024370: 7461 626c 6520 3d20 7365 6c66 2e6d 616b  table = self.mak
+00024380: 655f 7461 626c 6528 6469 7370 6c61 795f  e_table(display_
+00024390: 7479 7065 290d 0a20 2020 2020 2020 2074  type)..        t
+000243a0: 6162 6c65 5f73 7472 696e 6720 3d20 4469  able_string = Di
+000243b0: 7370 6c61 7953 7472 696e 6728 7265 7375  splayString(resu
+000243c0: 6c74 5f74 6162 6c65 290d 0a0d 0a20 2020  lt_table)....   
+000243d0: 2020 2020 2073 656c 662e 5f74 7261 6e73       self._trans
+000243e0: 706f 7365 5f6f 6e20 3d20 7072 6576 5f74  pose_on = prev_t
+000243f0: 5f73 7461 7465 0d0a 0d0a 2020 2020 2020  _state....      
+00024400: 2020 7265 7475 726e 2074 6162 6c65 5f73    return table_s
+00024410: 7472 696e 670d 0a0d 0a20 2020 2023 202d  tring....    # -
+00024420: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00024430: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00024440: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024450: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024460: 2d2d 0d0a 2020 2020 4070 726f 7065 7274  --..    @propert
-00024470: 790d 0a20 2020 2064 6566 205f 5428 7365  y..    def _T(se
-00024480: 6c66 293a 0d0a 2020 2020 2020 2020 2222  lf):..        ""
-00024490: 220d 0a20 2020 2020 2020 2044 6973 706c  "..        Displ
-000244a0: 6179 2061 2074 7261 6e73 706f 7365 6420  ay a transposed 
-000244b0: 7669 6577 206f 6620 7468 6520 602e 4461  view of the `.Da
-000244c0: 7461 7365 7460 206f 7220 6053 7472 7563  taset` or `Struc
-000244d0: 7460 2e0d 0a0d 0a20 2020 2020 2020 2041  t`.....        A
-000244e0: 6c6c 2063 6f6c 756d 6e73 2061 7265 2073  ll columns are s
-000244f0: 686f 776e 2061 7320 726f 7773 2061 6e64  hown as rows and
-00024500: 2076 6963 652d 7665 7273 612e 2053 7472   vice-versa. Str
-00024510: 696e 6773 2075 7020 746f 2033 320d 0a20  ings up to 32.. 
-00024520: 2020 2020 2020 2063 6861 7261 6374 6572         character
-00024530: 7320 6172 6520 6675 6c6c 7920 6469 7370  s are fully disp
-00024540: 6c61 7965 642e 0d0a 0d0a 2020 2020 2020  layed.....      
-00024550: 2020 5265 7475 726e 730d 0a20 2020 2020    Returns..     
-00024560: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
-00024570: 2020 2020 4469 7370 6c61 7953 7472 696e      DisplayStrin
-00024580: 670d 0a20 2020 2020 2020 2020 2020 2041  g..            A
-00024590: 2077 7261 7070 6572 2066 6f72 2064 6973   wrapper for dis
-000245a0: 706c 6179 206f 7065 7261 7469 6f6e 7320  play operations 
-000245b0: 7468 6174 2064 6f6e 2774 2072 6574 7572  that don't retur
-000245c0: 6e20 6120 602e 4461 7461 7365 7460 206f  n a `.Dataset` o
-000245d0: 7220 6053 7472 7563 7460 2e0d 0a0d 0a20  r `Struct`..... 
-000245e0: 2020 2020 2020 2053 6565 2041 6c73 6f0d         See Also.
-000245f0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-00024600: 2d0d 0a20 2020 2020 2020 2053 7472 7563  -..        Struc
-00024610: 742e 6474 7261 6e73 706f 7365 203a 2043  t.dtranspose : C
-00024620: 616c 6c65 6420 6279 2074 6869 7320 6d65  alled by this me
-00024630: 7468 6f64 2e0d 0a20 2020 2020 2020 2053  thod...        S
-00024640: 7472 7563 742e 5f56 203a 2053 686f 7720  truct._V : Show 
-00024650: 616c 6c20 726f 7773 206f 6620 6120 602e  all rows of a `.
-00024660: 4461 7461 7365 7460 206f 7220 6053 7472  Dataset` or `Str
-00024670: 7563 7460 2e0d 0a20 2020 2020 2020 2053  uct`...        S
-00024680: 7472 7563 742e 5f48 203a 2053 686f 7720  truct._H : Show 
-00024690: 616c 6c20 636f 6c75 6d6e 7320 616e 6420  all columns and 
-000246a0: 6c6f 6e67 2073 7472 696e 6773 206f 6620  long strings of 
-000246b0: 6120 602e 4461 7461 7365 7460 206f 7220  a `.Dataset` or 
-000246c0: 6053 7472 7563 7460 2e0d 0a20 2020 2020  `Struct`...     
-000246d0: 2020 2053 7472 7563 742e 5f41 203a 2053     Struct._A : S
-000246e0: 686f 7720 616c 6c20 636f 6c75 6d6e 732c  how all columns,
-000246f0: 2072 6f77 732c 2061 6e64 206c 6f6e 6720   rows, and long 
-00024700: 7374 7269 6e67 7320 6f66 2061 2060 2e44  strings of a `.D
-00024710: 6174 6173 6574 6020 6f72 2060 5374 7275  ataset` or `Stru
-00024720: 6374 602e 0d0a 2020 2020 2020 2020 5374  ct`...        St
-00024730: 7275 6374 2e5f 4720 3a20 5368 6f77 2061  ruct._G : Show a
-00024740: 6c6c 2063 6f6c 756d 6e73 206f 6620 6120  ll columns of a 
-00024750: 602e 4461 7461 7365 7460 206f 7220 6053  `.Dataset` or `S
-00024760: 7472 7563 7460 2c20 7772 6170 7069 6e67  truct`, wrapping
-00024770: 2074 6865 2074 6162 6c65 2061 7320 6e65   the table as ne
-00024780: 6564 6564 2e0d 0a0d 0a20 2020 2020 2020  eded.....       
-00024790: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
-000247a0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-000247b0: 2020 2020 203e 3e3e 2064 7320 3d20 7274       >>> ds = rt
-000247c0: 2e44 6174 6173 6574 287b 2761 273a 205b  .Dataset({'a': [
-000247d0: 312c 2032 2c20 335d 2c20 2762 2720 3a20  1, 2, 3], 'b' : 
-000247e0: 5b27 6c6f 6e67 7374 7269 6e67 5f6c 6f6e  ['longstring_lon
-000247f0: 6773 7472 696e 675f 6c6f 6e67 7374 7269  gstring_longstri
-00024800: 6e67 5f6c 6f6e 6773 7472 696e 6727 2c0d  ng_longstring',.
-00024810: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
-00024820: 2020 2020 2020 2020 2020 2020 2020 2766                'f
-00024830: 6973 6827 2c20 2764 6176 6964 275d 7d29  ish', 'david']})
-00024840: 0d0a 2020 2020 2020 2020 3e3e 3e20 6473  ..        >>> ds
-00024850: 0d0a 2020 2020 2020 2020 2320 2020 6120  ..        #   a 
-00024860: 2020 620d 0a20 2020 2020 2020 202d 2020    b..        -  
-00024870: 202d 2020 202d 2d2d 2d2d 2d2d 2d2d 2d2d   -   -----------
-00024880: 2d2d 2d2d 0d0a 2020 2020 2020 2020 3020  ----..        0 
-00024890: 2020 3120 2020 6c6f 6e67 7374 7269 6e67    1   longstring
-000248a0: 5f6c 6f6e 670d 0a20 2020 2020 2020 2031  _long..        1
-000248b0: 2020 2032 2020 2066 6973 680d 0a20 2020     2   fish..   
-000248c0: 2020 2020 2032 2020 2033 2020 2064 6176       2   3   dav
-000248d0: 6964 0d0a 2020 2020 2020 2020 3e3e 3e20  id..        >>> 
-000248e0: 6473 2e5f 540d 0a20 2020 2020 2020 2046  ds._T..        F
-000248f0: 6965 6c64 733a 2020 2020 2020 2020 2020  ields:          
-00024900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024910: 2020 2020 2020 3020 2020 2020 3120 2020        0     1   
-00024920: 2020 2032 0d0a 2020 2020 2020 2020 2020     2..          
-00024930: 2020 2020 6120 2020 2020 2020 2020 2020      a           
-00024940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024950: 2020 2020 2031 2020 2020 2032 2020 2020       1     2    
-00024960: 2020 330d 0a20 2020 2020 2020 2020 2020    3..           
-00024970: 2020 2062 2020 6c6f 6e67 7374 7269 6e67     b  longstring
-00024980: 5f6c 6f6e 6773 7472 696e 675f 6c6f 6e73  _longstring_lons
-00024990: 7472 696e 6720 2066 6973 6820 2064 6176  tring  fish  dav
-000249a0: 6964 0d0a 2020 2020 2020 2020 2222 220d  id..        """.
-000249b0: 0a20 2020 2020 2020 206f 6c64 6d61 7877  .        oldmaxw
-000249c0: 6964 7468 203d 2054 7970 6552 6567 6973  idth = TypeRegis
-000249d0: 7465 722e 4469 7370 6c61 794f 7074 696f  ter.DisplayOptio
-000249e0: 6e73 2e4d 4158 5f53 5452 494e 475f 5749  ns.MAX_STRING_WI
-000249f0: 4454 480d 0a20 2020 2020 2020 2069 6620  DTH..        if 
-00024a00: 6f6c 646d 6178 7769 6474 6820 3c20 3332  oldmaxwidth < 32
-00024a10: 3a0d 0a20 2020 2020 2020 2020 2020 2054  :..            T
-00024a20: 7970 6552 6567 6973 7465 722e 4469 7370  ypeRegister.Disp
-00024a30: 6c61 794f 7074 696f 6e73 2e4d 4158 5f53  layOptions.MAX_S
-00024a40: 5452 494e 475f 5749 4454 4820 3d20 3332  TRING_WIDTH = 32
-00024a50: 0d0a 2020 2020 2020 2020 7265 7375 6c74  ..        result
-00024a60: 203d 2073 656c 662e 6474 7261 6e73 706f   = self.dtranspo
-00024a70: 7365 2829 0d0a 2020 2020 2020 2020 5479  se()..        Ty
-00024a80: 7065 5265 6769 7374 6572 2e44 6973 706c  peRegister.Displ
-00024a90: 6179 4f70 7469 6f6e 732e 4d41 585f 5354  ayOptions.MAX_ST
-00024aa0: 5249 4e47 5f57 4944 5448 203d 206f 6c64  RING_WIDTH = old
-00024ab0: 6d61 7877 6964 7468 0d0a 2020 2020 2020  maxwidth..      
-00024ac0: 2020 7265 7475 726e 2072 6573 756c 740d    return result.
-00024ad0: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+00024450: 2d2d 2d2d 2d2d 0d0a 2020 2020 4070 726f  ------..    @pro
+00024460: 7065 7274 790d 0a20 2020 2064 6566 205f  perty..    def _
+00024470: 5428 7365 6c66 293a 0d0a 2020 2020 2020  T(self):..      
+00024480: 2020 2222 220d 0a20 2020 2020 2020 2044    """..        D
+00024490: 6973 706c 6179 2061 2074 7261 6e73 706f  isplay a transpo
+000244a0: 7365 6420 7669 6577 206f 6620 7468 6520  sed view of the 
+000244b0: 602e 4461 7461 7365 7460 206f 7220 6053  `.Dataset` or `S
+000244c0: 7472 7563 7460 2e0d 0a0d 0a20 2020 2020  truct`.....     
+000244d0: 2020 2041 6c6c 2063 6f6c 756d 6e73 2061     All columns a
+000244e0: 7265 2073 686f 776e 2061 7320 726f 7773  re shown as rows
+000244f0: 2061 6e64 2076 6963 652d 7665 7273 612e   and vice-versa.
+00024500: 2053 7472 696e 6773 2075 7020 746f 2033   Strings up to 3
+00024510: 320d 0a20 2020 2020 2020 2063 6861 7261  2..        chara
+00024520: 6374 6572 7320 6172 6520 6675 6c6c 7920  cters are fully 
+00024530: 6469 7370 6c61 7965 642e 0d0a 0d0a 2020  displayed.....  
+00024540: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
+00024550: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
+00024560: 2020 2020 2020 2020 4469 7370 6c61 7953          DisplayS
+00024570: 7472 696e 670d 0a20 2020 2020 2020 2020  tring..         
+00024580: 2020 2041 2077 7261 7070 6572 2066 6f72     A wrapper for
+00024590: 2064 6973 706c 6179 206f 7065 7261 7469   display operati
+000245a0: 6f6e 7320 7468 6174 2064 6f6e 2774 2072  ons that don't r
+000245b0: 6574 7572 6e20 6120 602e 4461 7461 7365  eturn a `.Datase
+000245c0: 7460 206f 7220 6053 7472 7563 7460 2e0d  t` or `Struct`..
+000245d0: 0a0d 0a20 2020 2020 2020 2053 6565 2041  ...        See A
+000245e0: 6c73 6f0d 0a20 2020 2020 2020 202d 2d2d  lso..        ---
+000245f0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2053  -----..        S
+00024600: 7472 7563 742e 6474 7261 6e73 706f 7365  truct.dtranspose
+00024610: 203a 2043 616c 6c65 6420 6279 2074 6869   : Called by thi
+00024620: 7320 6d65 7468 6f64 2e0d 0a20 2020 2020  s method...     
+00024630: 2020 2053 7472 7563 742e 5f56 203a 2053     Struct._V : S
+00024640: 686f 7720 616c 6c20 726f 7773 206f 6620  how all rows of 
+00024650: 6120 602e 4461 7461 7365 7460 206f 7220  a `.Dataset` or 
+00024660: 6053 7472 7563 7460 2e0d 0a20 2020 2020  `Struct`...     
+00024670: 2020 2053 7472 7563 742e 5f48 203a 2053     Struct._H : S
+00024680: 686f 7720 616c 6c20 636f 6c75 6d6e 7320  how all columns 
+00024690: 616e 6420 6c6f 6e67 2073 7472 696e 6773  and long strings
+000246a0: 206f 6620 6120 602e 4461 7461 7365 7460   of a `.Dataset`
+000246b0: 206f 7220 6053 7472 7563 7460 2e0d 0a20   or `Struct`... 
+000246c0: 2020 2020 2020 2053 7472 7563 742e 5f41         Struct._A
+000246d0: 203a 2053 686f 7720 616c 6c20 636f 6c75   : Show all colu
+000246e0: 6d6e 732c 2072 6f77 732c 2061 6e64 206c  mns, rows, and l
+000246f0: 6f6e 6720 7374 7269 6e67 7320 6f66 2061  ong strings of a
+00024700: 2060 2e44 6174 6173 6574 6020 6f72 2060   `.Dataset` or `
+00024710: 5374 7275 6374 602e 0d0a 2020 2020 2020  Struct`...      
+00024720: 2020 5374 7275 6374 2e5f 4720 3a20 5368    Struct._G : Sh
+00024730: 6f77 2061 6c6c 2063 6f6c 756d 6e73 206f  ow all columns o
+00024740: 6620 6120 602e 4461 7461 7365 7460 206f  f a `.Dataset` o
+00024750: 7220 6053 7472 7563 7460 2c20 7772 6170  r `Struct`, wrap
+00024760: 7069 6e67 2074 6865 2074 6162 6c65 2061  ping the table a
+00024770: 7320 6e65 6564 6564 2e0d 0a0d 0a20 2020  s needed.....   
+00024780: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
+00024790: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+000247a0: 0a20 2020 2020 2020 203e 3e3e 2064 7320  .        >>> ds 
+000247b0: 3d20 7274 2e44 6174 6173 6574 287b 2761  = rt.Dataset({'a
+000247c0: 273a 205b 312c 2032 2c20 335d 2c20 2762  ': [1, 2, 3], 'b
+000247d0: 2720 3a20 5b27 6c6f 6e67 7374 7269 6e67  ' : ['longstring
+000247e0: 5f6c 6f6e 6773 7472 696e 675f 6c6f 6e67  _longstring_long
+000247f0: 7374 7269 6e67 5f6c 6f6e 6773 7472 696e  string_longstrin
+00024800: 6727 2c0d 0a20 2020 2020 2020 202e 2e2e  g',..        ...
+00024810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024820: 2020 2766 6973 6827 2c20 2764 6176 6964    'fish', 'david
+00024830: 275d 7d29 0d0a 2020 2020 2020 2020 3e3e  ']})..        >>
+00024840: 3e20 6473 0d0a 2020 2020 2020 2020 2320  > ds..        # 
+00024850: 2020 6120 2020 620d 0a20 2020 2020 2020    a   b..       
+00024860: 202d 2020 202d 2020 202d 2d2d 2d2d 2d2d   -   -   -------
+00024870: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
+00024880: 2020 3020 2020 3120 2020 6c6f 6e67 7374    0   1   longst
+00024890: 7269 6e67 5f6c 6f6e 670d 0a20 2020 2020  ring_long..     
+000248a0: 2020 2031 2020 2032 2020 2066 6973 680d     1   2   fish.
+000248b0: 0a20 2020 2020 2020 2032 2020 2033 2020  .        2   3  
+000248c0: 2064 6176 6964 0d0a 2020 2020 2020 2020   david..        
+000248d0: 3e3e 3e20 6473 2e5f 540d 0a20 2020 2020  >>> ds._T..     
+000248e0: 2020 2046 6965 6c64 733a 2020 2020 2020     Fields:      
+000248f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024900: 2020 2020 2020 2020 2020 3020 2020 2020            0     
+00024910: 3120 2020 2020 2032 0d0a 2020 2020 2020  1      2..      
+00024920: 2020 2020 2020 2020 6120 2020 2020 2020          a       
+00024930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024940: 2020 2020 2020 2020 2031 2020 2020 2032           1     2
+00024950: 2020 2020 2020 330d 0a20 2020 2020 2020        3..       
+00024960: 2020 2020 2020 2062 2020 6c6f 6e67 7374         b  longst
+00024970: 7269 6e67 5f6c 6f6e 6773 7472 696e 675f  ring_longstring_
+00024980: 6c6f 6e73 7472 696e 6720 2066 6973 6820  lonstring  fish 
+00024990: 2064 6176 6964 0d0a 2020 2020 2020 2020   david..        
+000249a0: 2222 220d 0a20 2020 2020 2020 206f 6c64  """..        old
+000249b0: 6d61 7877 6964 7468 203d 2054 7970 6552  maxwidth = TypeR
+000249c0: 6567 6973 7465 722e 4469 7370 6c61 794f  egister.DisplayO
+000249d0: 7074 696f 6e73 2e4d 4158 5f53 5452 494e  ptions.MAX_STRIN
+000249e0: 475f 5749 4454 480d 0a20 2020 2020 2020  G_WIDTH..       
+000249f0: 2069 6620 6f6c 646d 6178 7769 6474 6820   if oldmaxwidth 
+00024a00: 3c20 3332 3a0d 0a20 2020 2020 2020 2020  < 32:..         
+00024a10: 2020 2054 7970 6552 6567 6973 7465 722e     TypeRegister.
+00024a20: 4469 7370 6c61 794f 7074 696f 6e73 2e4d  DisplayOptions.M
+00024a30: 4158 5f53 5452 494e 475f 5749 4454 4820  AX_STRING_WIDTH 
+00024a40: 3d20 3332 0d0a 2020 2020 2020 2020 7265  = 32..        re
+00024a50: 7375 6c74 203d 2073 656c 662e 6474 7261  sult = self.dtra
+00024a60: 6e73 706f 7365 2829 0d0a 2020 2020 2020  nspose()..      
+00024a70: 2020 5479 7065 5265 6769 7374 6572 2e44    TypeRegister.D
+00024a80: 6973 706c 6179 4f70 7469 6f6e 732e 4d41  isplayOptions.MA
+00024a90: 585f 5354 5249 4e47 5f57 4944 5448 203d  X_STRING_WIDTH =
+00024aa0: 206f 6c64 6d61 7877 6964 7468 0d0a 2020   oldmaxwidth..  
+00024ab0: 2020 2020 2020 7265 7475 726e 2072 6573        return res
+00024ac0: 756c 740d 0a0d 0a20 2020 2023 202d 2d2d  ult....    # ---
+00024ad0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00024ae0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00024af0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024b00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00024b10: 0d0a 2020 2020 4070 726f 7065 7274 790d  ..    @property.
-00024b20: 0a20 2020 2064 6566 205f 5628 7365 6c66  .    def _V(self
-00024b30: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
-00024b40: 0a20 2020 2020 2020 2044 6973 706c 6179  .        Display
-00024b50: 2061 6c6c 2072 6f77 7320 2875 7020 746f   all rows (up to
-00024b60: 2031 302c 3030 3029 206f 6620 6120 602e   10,000) of a `.
-00024b70: 4461 7461 7365 7460 206f 7220 6053 7472  Dataset` or `Str
-00024b80: 7563 7460 2e0d 0a0d 0a20 2020 2020 2020  uct`.....       
-00024b90: 2057 6974 686f 7574 2074 6869 7320 7072   Without this pr
-00024ba0: 6f70 6572 7479 2c20 726f 7773 2061 7265  operty, rows are
-00024bb0: 2065 6c69 6465 6420 7768 656e 2074 6865   elided when the
-00024bc0: 7265 2061 7265 206d 6f72 6520 7468 616e  re are more than
-00024bd0: 2033 3020 746f 2064 6973 706c 6179 2e0d   30 to display..
-00024be0: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
-00024bf0: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
-00024c00: 2d2d 2d0d 0a20 2020 2020 2020 2044 6973  ---..        Dis
-00024c10: 706c 6179 5374 7269 6e67 0d0a 2020 2020  playString..    
-00024c20: 2020 2020 2020 2020 4120 7772 6170 7065          A wrappe
-00024c30: 7220 666f 7220 6469 7370 6c61 7920 6f70  r for display op
-00024c40: 6572 6174 696f 6e73 2074 6861 7420 646f  erations that do
-00024c50: 6e27 7420 7265 7475 726e 2061 2060 2e44  n't return a `.D
-00024c60: 6174 6173 6574 6020 6f72 2060 5374 7275  ataset` or `Stru
-00024c70: 6374 602e 0d0a 0d0a 2020 2020 2020 2020  ct`.....        
-00024c80: 5365 6520 416c 736f 0d0a 2020 2020 2020  See Also..      
-00024c90: 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020    --------..    
-00024ca0: 2020 2020 5374 7275 6374 2e5f 4820 3a20      Struct._H : 
-00024cb0: 4469 7370 6c61 7920 616c 6c20 636f 6c75  Display all colu
-00024cc0: 6d6e 7320 616e 6420 6c6f 6e67 2073 7472  mns and long str
-00024cd0: 696e 6773 206f 6620 6120 602e 4461 7461  ings of a `.Data
-00024ce0: 7365 7460 206f 7220 6053 7472 7563 7460  set` or `Struct`
-00024cf0: 2e0d 0a20 2020 2020 2020 2053 7472 7563  ...        Struc
-00024d00: 742e 5f41 203a 2044 6973 706c 6179 2061  t._A : Display a
-00024d10: 6c6c 2063 6f6c 756d 6e73 2c20 726f 7773  ll columns, rows
-00024d20: 2c20 616e 6420 6c6f 6e67 2073 7472 696e  , and long strin
-00024d30: 6773 206f 6620 6120 602e 4461 7461 7365  gs of a `.Datase
-00024d40: 7460 206f 7220 6053 7472 7563 7460 2e0d  t` or `Struct`..
-00024d50: 0a20 2020 2020 2020 2053 7472 7563 742e  .        Struct.
-00024d60: 5f47 203a 2044 6973 706c 6179 2061 6c6c  _G : Display all
-00024d70: 2063 6f6c 756d 6e73 206f 6620 6120 602e   columns of a `.
-00024d80: 4461 7461 7365 7460 206f 7220 6053 7472  Dataset` or `Str
-00024d90: 7563 7460 2c20 7772 6170 7069 6e67 2074  uct`, wrapping t
-00024da0: 6865 2074 6162 6c65 2061 7320 6e65 6564  he table as need
-00024db0: 6564 2e0d 0a20 2020 2020 2020 2053 7472  ed...        Str
-00024dc0: 7563 742e 5f54 203a 2044 6973 706c 6179  uct._T : Display
-00024dd0: 2061 2074 7261 6e73 706f 7365 6420 7669   a transposed vi
-00024de0: 6577 206f 6620 6120 602e 4461 7461 7365  ew of a `.Datase
-00024df0: 7460 206f 7220 6053 7472 7563 7460 2e0d  t` or `Struct`..
-00024e00: 0a0d 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
-00024e10: 6c65 730d 0a20 2020 2020 2020 202d 2d2d  les..        ---
-00024e20: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2042  -----..        B
-00024e30: 7920 6465 6661 756c 742c 2072 6f77 7320  y default, rows 
-00024e40: 6172 6520 656c 6964 6564 2077 6865 6e20  are elided when 
-00024e50: 7468 6572 6520 6172 6520 6d6f 7265 2074  there are more t
-00024e60: 6861 6e20 3330 2074 6f20 6469 7370 6c61  han 30 to displa
-00024e70: 792e 0d0a 0d0a 2020 2020 2020 2020 3e3e  y.....        >>
-00024e80: 3e20 6473 203d 2072 742e 4461 7461 7365  > ds = rt.Datase
-00024e90: 7428 7b27 6127 203a 2072 742e 6172 616e  t({'a' : rt.aran
-00024ea0: 6765 2833 3129 7d29 0d0a 2020 2020 2020  ge(31)})..      
-00024eb0: 2020 3e3e 3e20 6473 0d0a 2020 2020 2020    >>> ds..      
-00024ec0: 2020 2020 2320 2020 2020 610d 0a20 2020      #     a..   
-00024ed0: 2020 2020 202d 2d2d 2020 202d 2d2d 0d0a       ---   ---..
-00024ee0: 2020 2020 2020 2020 2020 3020 2020 2020            0     
-00024ef0: 300d 0a20 2020 2020 2020 2020 2031 2020  0..          1  
-00024f00: 2020 2031 0d0a 2020 2020 2020 2020 2020     1..          
-00024f10: 3220 2020 2020 320d 0a20 2020 2020 2020  2     2..       
-00024f20: 2020 2033 2020 2020 2033 0d0a 2020 2020     3     3..    
-00024f30: 2020 2020 2020 3420 2020 2020 340d 0a20        4     4.. 
-00024f40: 2020 2020 2020 2020 2035 2020 2020 2035           5     5
-00024f50: 0d0a 2020 2020 2020 2020 2020 3620 2020  ..          6   
-00024f60: 2020 360d 0a20 2020 2020 2020 2020 2037    6..          7
-00024f70: 2020 2020 2037 0d0a 2020 2020 2020 2020       7..        
-00024f80: 2020 3820 2020 2020 380d 0a20 2020 2020    8     8..     
-00024f90: 2020 2020 2039 2020 2020 2039 0d0a 2020       9     9..  
-00024fa0: 2020 2020 2020 2031 3020 2020 2031 300d         10    10.
-00024fb0: 0a20 2020 2020 2020 2020 3131 2020 2020  .         11    
-00024fc0: 3131 0d0a 2020 2020 2020 2020 2031 3220  11..         12 
-00024fd0: 2020 2031 320d 0a20 2020 2020 2020 2020     12..         
-00024fe0: 3133 2020 2020 3133 0d0a 2020 2020 2020  13    13..      
-00024ff0: 2020 2031 3420 2020 2031 340d 0a20 2020     14    14..   
-00025000: 2020 2020 202e 2e2e 2020 202e 2e2e 0d0a       ...   .....
-00025010: 2020 2020 2020 2020 2031 3620 2020 2031           16    1
-00025020: 360d 0a20 2020 2020 2020 2020 3137 2020  6..         17  
-00025030: 2020 3137 0d0a 2020 2020 2020 2020 2031    17..         1
-00025040: 3820 2020 2031 380d 0a20 2020 2020 2020  8    18..       
-00025050: 2020 3139 2020 2020 3139 0d0a 2020 2020    19    19..    
-00025060: 2020 2020 2032 3020 2020 2032 300d 0a20       20    20.. 
-00025070: 2020 2020 2020 2020 3231 2020 2020 3231          21    21
-00025080: 0d0a 2020 2020 2020 2020 2032 3220 2020  ..         22   
-00025090: 2032 320d 0a20 2020 2020 2020 2020 3233   22..         23
-000250a0: 2020 2020 3233 0d0a 2020 2020 2020 2020      23..        
-000250b0: 2032 3420 2020 2032 340d 0a20 2020 2020   24    24..     
-000250c0: 2020 2020 3235 2020 2020 3235 0d0a 2020      25    25..  
-000250d0: 2020 2020 2020 2032 3620 2020 2032 360d         26    26.
-000250e0: 0a20 2020 2020 2020 2020 3237 2020 2020  .         27    
-000250f0: 3237 0d0a 2020 2020 2020 2020 2032 3820  27..         28 
-00025100: 2020 2032 380d 0a20 2020 2020 2020 2020     28..         
-00025110: 3239 2020 2020 3239 0d0a 2020 2020 2020  29    29..      
-00025120: 2020 2033 3020 2020 2033 300d 0a0d 0a20     30    30.... 
-00025130: 2020 2020 2020 2044 6973 706c 6179 2061         Display a
-00025140: 6c6c 2072 6f77 733a 0d0a 0d0a 2020 2020  ll rows:....    
-00025150: 2020 2020 3e3e 3e20 6473 2e5f 560d 0a20      >>> ds._V.. 
-00025160: 2020 2020 2020 2020 2023 2020 2020 2061           #     a
-00025170: 0d0a 2020 2020 2020 2020 2d2d 2d20 2020  ..        ---   
-00025180: 2d2d 2d0d 0a20 2020 2020 2020 2020 2030  ---..          0
-00025190: 2020 2020 2030 0d0a 2020 2020 2020 2020       0..        
-000251a0: 2020 3120 2020 2020 310d 0a20 2020 2020    1     1..     
-000251b0: 2020 2020 2032 2020 2020 2032 0d0a 2020       2     2..  
-000251c0: 2020 2020 2020 2020 3320 2020 2020 330d          3     3.
-000251d0: 0a20 2020 2020 2020 2020 2034 2020 2020  .          4    
-000251e0: 2034 0d0a 2020 2020 2020 2020 2020 3520   4..          5 
-000251f0: 2020 2020 350d 0a20 2020 2020 2020 2020      5..         
-00025200: 2036 2020 2020 2036 0d0a 2020 2020 2020   6     6..      
-00025210: 2020 2020 3720 2020 2020 370d 0a20 2020      7     7..   
-00025220: 2020 2020 2020 2038 2020 2020 2038 0d0a         8     8..
-00025230: 2020 2020 2020 2020 2020 3920 2020 2020            9     
-00025240: 390d 0a20 2020 2020 2020 2020 3130 2020  9..         10  
-00025250: 2020 3130 0d0a 2020 2020 2020 2020 2031    10..         1
-00025260: 3120 2020 2031 310d 0a20 2020 2020 2020  1    11..       
-00025270: 2020 3132 2020 2020 3132 0d0a 2020 2020    12    12..    
-00025280: 2020 2020 2031 3320 2020 2031 330d 0a20       13    13.. 
-00025290: 2020 2020 2020 2020 3134 2020 2020 3134          14    14
-000252a0: 0d0a 2020 2020 2020 2020 2031 3520 2020  ..         15   
-000252b0: 2031 350d 0a20 2020 2020 2020 2020 3136   15..         16
-000252c0: 2020 2020 3136 0d0a 2020 2020 2020 2020      16..        
-000252d0: 2031 3720 2020 2031 370d 0a20 2020 2020   17    17..     
-000252e0: 2020 2020 3138 2020 2020 3138 0d0a 2020      18    18..  
-000252f0: 2020 2020 2020 2031 3920 2020 2031 390d         19    19.
-00025300: 0a20 2020 2020 2020 2020 3230 2020 2020  .         20    
-00025310: 3230 0d0a 2020 2020 2020 2020 2032 3120  20..         21 
-00025320: 2020 2032 310d 0a20 2020 2020 2020 2020     21..         
-00025330: 3232 2020 2020 3232 0d0a 2020 2020 2020  22    22..      
-00025340: 2020 2032 3320 2020 2032 330d 0a20 2020     23    23..   
-00025350: 2020 2020 2020 3234 2020 2020 3234 0d0a        24    24..
-00025360: 2020 2020 2020 2020 2032 3520 2020 2032           25    2
-00025370: 350d 0a20 2020 2020 2020 2020 3236 2020  5..         26  
-00025380: 2020 3236 0d0a 2020 2020 2020 2020 2032    26..         2
-00025390: 3720 2020 2032 370d 0a20 2020 2020 2020  7    27..       
-000253a0: 2020 3238 2020 2020 3238 0d0a 2020 2020    28    28..    
-000253b0: 2020 2020 2032 3920 2020 2032 390d 0a20       29    29.. 
-000253c0: 2020 2020 2020 2020 3330 2020 2020 3330          30    30
-000253d0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-000253e0: 2020 2020 2020 206d 6178 726f 7773 203d         maxrows =
-000253f0: 2031 305f 3030 300d 0a20 2020 2020 2020   10_000..       
-00025400: 206e 756d 726f 7773 203d 2073 656c 662e   numrows = self.
-00025410: 5f6e 726f 7773 2069 6620 6861 7361 7474  _nrows if hasatt
-00025420: 7228 7365 6c66 2c20 225f 6e72 6f77 7322  r(self, "_nrows"
-00025430: 2920 656c 7365 206c 656e 2873 656c 6629  ) else len(self)
-00025440: 0d0a 2020 2020 2020 2020 6966 206e 756d  ..        if num
-00025450: 726f 7773 203c 206d 6178 726f 7773 3a0d  rows < maxrows:.
-00025460: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00025470: 7572 6e20 7365 6c66 2e5f 7465 6d70 5f64  urn self._temp_d
-00025480: 6973 706c 6179 2822 524f 575f 414c 4c22  isplay("ROW_ALL"
-00025490: 2c20 5472 7565 290d 0a20 2020 2020 2020  , True)..       
-000254a0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-000254b0: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
-000254c0: 7272 6f72 280d 0a20 2020 2020 2020 2020  rror(..         
-000254d0: 2020 2020 2020 2066 2244 6174 6173 6574         f"Dataset
-000254e0: 2068 6173 206d 6f72 6520 7468 616e 2031   has more than 1
-000254f0: 302c 3030 3020 726f 7773 2e20 4361 6e6e  0,000 rows. Cann
-00025500: 6f74 2064 6973 706c 6179 2061 6c6c 2072  ot display all r
-00025510: 6f77 732e 2028 746f 206f 7665 7272 6964  ows. (to overrid
-00025520: 652c 2073 6574 2044 6973 706c 6179 2e6f  e, set Display.o
-00025530: 7074 696f 6e73 2e52 4f57 5f41 4c4c 203d  ptions.ROW_ALL =
-00025540: 2054 7275 6520 616e 6420 7072 696e 7420   True and print 
-00025550: 7769 7468 2072 6570 7229 220d 0a20 2020  with repr)"..   
-00025560: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
-00025570: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
+00024b00: 2d2d 2d2d 0d0a 2020 2020 4070 726f 7065  ----..    @prope
+00024b10: 7274 790d 0a20 2020 2064 6566 205f 5628  rty..    def _V(
+00024b20: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+00024b30: 2222 220d 0a20 2020 2020 2020 2044 6973  """..        Dis
+00024b40: 706c 6179 2061 6c6c 2072 6f77 7320 2875  play all rows (u
+00024b50: 7020 746f 2031 302c 3030 3029 206f 6620  p to 10,000) of 
+00024b60: 6120 602e 4461 7461 7365 7460 206f 7220  a `.Dataset` or 
+00024b70: 6053 7472 7563 7460 2e0d 0a0d 0a20 2020  `Struct`.....   
+00024b80: 2020 2020 2057 6974 686f 7574 2074 6869       Without thi
+00024b90: 7320 7072 6f70 6572 7479 2c20 726f 7773  s property, rows
+00024ba0: 2061 7265 2065 6c69 6465 6420 7768 656e   are elided when
+00024bb0: 2074 6865 7265 2061 7265 206d 6f72 6520   there are more 
+00024bc0: 7468 616e 2033 3020 746f 2064 6973 706c  than 30 to displ
+00024bd0: 6179 2e0d 0a0d 0a20 2020 2020 2020 2052  ay.....        R
+00024be0: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
+00024bf0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+00024c00: 2044 6973 706c 6179 5374 7269 6e67 0d0a   DisplayString..
+00024c10: 2020 2020 2020 2020 2020 2020 4120 7772              A wr
+00024c20: 6170 7065 7220 666f 7220 6469 7370 6c61  apper for displa
+00024c30: 7920 6f70 6572 6174 696f 6e73 2074 6861  y operations tha
+00024c40: 7420 646f 6e27 7420 7265 7475 726e 2061  t don't return a
+00024c50: 2060 2e44 6174 6173 6574 6020 6f72 2060   `.Dataset` or `
+00024c60: 5374 7275 6374 602e 0d0a 0d0a 2020 2020  Struct`.....    
+00024c70: 2020 2020 5365 6520 416c 736f 0d0a 2020      See Also..  
+00024c80: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a        --------..
+00024c90: 2020 2020 2020 2020 5374 7275 6374 2e5f          Struct._
+00024ca0: 4820 3a20 4469 7370 6c61 7920 616c 6c20  H : Display all 
+00024cb0: 636f 6c75 6d6e 7320 616e 6420 6c6f 6e67  columns and long
+00024cc0: 2073 7472 696e 6773 206f 6620 6120 602e   strings of a `.
+00024cd0: 4461 7461 7365 7460 206f 7220 6053 7472  Dataset` or `Str
+00024ce0: 7563 7460 2e0d 0a20 2020 2020 2020 2053  uct`...        S
+00024cf0: 7472 7563 742e 5f41 203a 2044 6973 706c  truct._A : Displ
+00024d00: 6179 2061 6c6c 2063 6f6c 756d 6e73 2c20  ay all columns, 
+00024d10: 726f 7773 2c20 616e 6420 6c6f 6e67 2073  rows, and long s
+00024d20: 7472 696e 6773 206f 6620 6120 602e 4461  trings of a `.Da
+00024d30: 7461 7365 7460 206f 7220 6053 7472 7563  taset` or `Struc
+00024d40: 7460 2e0d 0a20 2020 2020 2020 2053 7472  t`...        Str
+00024d50: 7563 742e 5f47 203a 2044 6973 706c 6179  uct._G : Display
+00024d60: 2061 6c6c 2063 6f6c 756d 6e73 206f 6620   all columns of 
+00024d70: 6120 602e 4461 7461 7365 7460 206f 7220  a `.Dataset` or 
+00024d80: 6053 7472 7563 7460 2c20 7772 6170 7069  `Struct`, wrappi
+00024d90: 6e67 2074 6865 2074 6162 6c65 2061 7320  ng the table as 
+00024da0: 6e65 6564 6564 2e0d 0a20 2020 2020 2020  needed...       
+00024db0: 2053 7472 7563 742e 5f54 203a 2044 6973   Struct._T : Dis
+00024dc0: 706c 6179 2061 2074 7261 6e73 706f 7365  play a transpose
+00024dd0: 6420 7669 6577 206f 6620 6120 602e 4461  d view of a `.Da
+00024de0: 7461 7365 7460 206f 7220 6053 7472 7563  taset` or `Struc
+00024df0: 7460 2e0d 0a0d 0a20 2020 2020 2020 2045  t`.....        E
+00024e00: 7861 6d70 6c65 730d 0a20 2020 2020 2020  xamples..       
+00024e10: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
+00024e20: 2020 2042 7920 6465 6661 756c 742c 2072     By default, r
+00024e30: 6f77 7320 6172 6520 656c 6964 6564 2077  ows are elided w
+00024e40: 6865 6e20 7468 6572 6520 6172 6520 6d6f  hen there are mo
+00024e50: 7265 2074 6861 6e20 3330 2074 6f20 6469  re than 30 to di
+00024e60: 7370 6c61 792e 0d0a 0d0a 2020 2020 2020  splay.....      
+00024e70: 2020 3e3e 3e20 6473 203d 2072 742e 4461    >>> ds = rt.Da
+00024e80: 7461 7365 7428 7b27 6127 203a 2072 742e  taset({'a' : rt.
+00024e90: 6172 616e 6765 2833 3129 7d29 0d0a 2020  arange(31)})..  
+00024ea0: 2020 2020 2020 3e3e 3e20 6473 0d0a 2020        >>> ds..  
+00024eb0: 2020 2020 2020 2020 2320 2020 2020 610d          #     a.
+00024ec0: 0a20 2020 2020 2020 202d 2d2d 2020 202d  .        ---   -
+00024ed0: 2d2d 0d0a 2020 2020 2020 2020 2020 3020  --..          0 
+00024ee0: 2020 2020 300d 0a20 2020 2020 2020 2020      0..         
+00024ef0: 2031 2020 2020 2031 0d0a 2020 2020 2020   1     1..      
+00024f00: 2020 2020 3220 2020 2020 320d 0a20 2020      2     2..   
+00024f10: 2020 2020 2020 2033 2020 2020 2033 0d0a         3     3..
+00024f20: 2020 2020 2020 2020 2020 3420 2020 2020            4     
+00024f30: 340d 0a20 2020 2020 2020 2020 2035 2020  4..          5  
+00024f40: 2020 2035 0d0a 2020 2020 2020 2020 2020     5..          
+00024f50: 3620 2020 2020 360d 0a20 2020 2020 2020  6     6..       
+00024f60: 2020 2037 2020 2020 2037 0d0a 2020 2020     7     7..    
+00024f70: 2020 2020 2020 3820 2020 2020 380d 0a20        8     8.. 
+00024f80: 2020 2020 2020 2020 2039 2020 2020 2039           9     9
+00024f90: 0d0a 2020 2020 2020 2020 2031 3020 2020  ..         10   
+00024fa0: 2031 300d 0a20 2020 2020 2020 2020 3131   10..         11
+00024fb0: 2020 2020 3131 0d0a 2020 2020 2020 2020      11..        
+00024fc0: 2031 3220 2020 2031 320d 0a20 2020 2020   12    12..     
+00024fd0: 2020 2020 3133 2020 2020 3133 0d0a 2020      13    13..  
+00024fe0: 2020 2020 2020 2031 3420 2020 2031 340d         14    14.
+00024ff0: 0a20 2020 2020 2020 202e 2e2e 2020 202e  .        ...   .
+00025000: 2e2e 0d0a 2020 2020 2020 2020 2031 3620  ....         16 
+00025010: 2020 2031 360d 0a20 2020 2020 2020 2020     16..         
+00025020: 3137 2020 2020 3137 0d0a 2020 2020 2020  17    17..      
+00025030: 2020 2031 3820 2020 2031 380d 0a20 2020     18    18..   
+00025040: 2020 2020 2020 3139 2020 2020 3139 0d0a        19    19..
+00025050: 2020 2020 2020 2020 2032 3020 2020 2032           20    2
+00025060: 300d 0a20 2020 2020 2020 2020 3231 2020  0..         21  
+00025070: 2020 3231 0d0a 2020 2020 2020 2020 2032    21..         2
+00025080: 3220 2020 2032 320d 0a20 2020 2020 2020  2    22..       
+00025090: 2020 3233 2020 2020 3233 0d0a 2020 2020    23    23..    
+000250a0: 2020 2020 2032 3420 2020 2032 340d 0a20       24    24.. 
+000250b0: 2020 2020 2020 2020 3235 2020 2020 3235          25    25
+000250c0: 0d0a 2020 2020 2020 2020 2032 3620 2020  ..         26   
+000250d0: 2032 360d 0a20 2020 2020 2020 2020 3237   26..         27
+000250e0: 2020 2020 3237 0d0a 2020 2020 2020 2020      27..        
+000250f0: 2032 3820 2020 2032 380d 0a20 2020 2020   28    28..     
+00025100: 2020 2020 3239 2020 2020 3239 0d0a 2020      29    29..  
+00025110: 2020 2020 2020 2033 3020 2020 2033 300d         30    30.
+00025120: 0a0d 0a20 2020 2020 2020 2044 6973 706c  ...        Displ
+00025130: 6179 2061 6c6c 2072 6f77 733a 0d0a 0d0a  ay all rows:....
+00025140: 2020 2020 2020 2020 3e3e 3e20 6473 2e5f          >>> ds._
+00025150: 560d 0a20 2020 2020 2020 2020 2023 2020  V..          #  
+00025160: 2020 2061 0d0a 2020 2020 2020 2020 2d2d     a..        --
+00025170: 2d20 2020 2d2d 2d0d 0a20 2020 2020 2020  -   ---..       
+00025180: 2020 2030 2020 2020 2030 0d0a 2020 2020     0     0..    
+00025190: 2020 2020 2020 3120 2020 2020 310d 0a20        1     1.. 
+000251a0: 2020 2020 2020 2020 2032 2020 2020 2032           2     2
+000251b0: 0d0a 2020 2020 2020 2020 2020 3320 2020  ..          3   
+000251c0: 2020 330d 0a20 2020 2020 2020 2020 2034    3..          4
+000251d0: 2020 2020 2034 0d0a 2020 2020 2020 2020       4..        
+000251e0: 2020 3520 2020 2020 350d 0a20 2020 2020    5     5..     
+000251f0: 2020 2020 2036 2020 2020 2036 0d0a 2020       6     6..  
+00025200: 2020 2020 2020 2020 3720 2020 2020 370d          7     7.
+00025210: 0a20 2020 2020 2020 2020 2038 2020 2020  .          8    
+00025220: 2038 0d0a 2020 2020 2020 2020 2020 3920   8..          9 
+00025230: 2020 2020 390d 0a20 2020 2020 2020 2020      9..         
+00025240: 3130 2020 2020 3130 0d0a 2020 2020 2020  10    10..      
+00025250: 2020 2031 3120 2020 2031 310d 0a20 2020     11    11..   
+00025260: 2020 2020 2020 3132 2020 2020 3132 0d0a        12    12..
+00025270: 2020 2020 2020 2020 2031 3320 2020 2031           13    1
+00025280: 330d 0a20 2020 2020 2020 2020 3134 2020  3..         14  
+00025290: 2020 3134 0d0a 2020 2020 2020 2020 2031    14..         1
+000252a0: 3520 2020 2031 350d 0a20 2020 2020 2020  5    15..       
+000252b0: 2020 3136 2020 2020 3136 0d0a 2020 2020    16    16..    
+000252c0: 2020 2020 2031 3720 2020 2031 370d 0a20       17    17.. 
+000252d0: 2020 2020 2020 2020 3138 2020 2020 3138          18    18
+000252e0: 0d0a 2020 2020 2020 2020 2031 3920 2020  ..         19   
+000252f0: 2031 390d 0a20 2020 2020 2020 2020 3230   19..         20
+00025300: 2020 2020 3230 0d0a 2020 2020 2020 2020      20..        
+00025310: 2032 3120 2020 2032 310d 0a20 2020 2020   21    21..     
+00025320: 2020 2020 3232 2020 2020 3232 0d0a 2020      22    22..  
+00025330: 2020 2020 2020 2032 3320 2020 2032 330d         23    23.
+00025340: 0a20 2020 2020 2020 2020 3234 2020 2020  .         24    
+00025350: 3234 0d0a 2020 2020 2020 2020 2032 3520  24..         25 
+00025360: 2020 2032 350d 0a20 2020 2020 2020 2020     25..         
+00025370: 3236 2020 2020 3236 0d0a 2020 2020 2020  26    26..      
+00025380: 2020 2032 3720 2020 2032 370d 0a20 2020     27    27..   
+00025390: 2020 2020 2020 3238 2020 2020 3238 0d0a        28    28..
+000253a0: 2020 2020 2020 2020 2032 3920 2020 2032           29    2
+000253b0: 390d 0a20 2020 2020 2020 2020 3330 2020  9..         30  
+000253c0: 2020 3330 0d0a 2020 2020 2020 2020 2222    30..        ""
+000253d0: 220d 0a20 2020 2020 2020 206d 6178 726f  "..        maxro
+000253e0: 7773 203d 2031 305f 3030 300d 0a20 2020  ws = 10_000..   
+000253f0: 2020 2020 206e 756d 726f 7773 203d 2073       numrows = s
+00025400: 656c 662e 5f6e 726f 7773 2069 6620 6861  elf._nrows if ha
+00025410: 7361 7474 7228 7365 6c66 2c20 225f 6e72  sattr(self, "_nr
+00025420: 6f77 7322 2920 656c 7365 206c 656e 2873  ows") else len(s
+00025430: 656c 6629 0d0a 2020 2020 2020 2020 6966  elf)..        if
+00025440: 206e 756d 726f 7773 203c 206d 6178 726f   numrows < maxro
+00025450: 7773 3a0d 0a20 2020 2020 2020 2020 2020  ws:..           
+00025460: 2072 6574 7572 6e20 7365 6c66 2e5f 7465   return self._te
+00025470: 6d70 5f64 6973 706c 6179 2822 524f 575f  mp_display("ROW_
+00025480: 414c 4c22 2c20 5472 7565 290d 0a20 2020  ALL", True)..   
+00025490: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+000254a0: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
+000254b0: 6c75 6545 7272 6f72 280d 0a20 2020 2020  lueError(..     
+000254c0: 2020 2020 2020 2020 2020 2066 2244 6174             f"Dat
+000254d0: 6173 6574 2068 6173 206d 6f72 6520 7468  aset has more th
+000254e0: 616e 2031 302c 3030 3020 726f 7773 2e20  an 10,000 rows. 
+000254f0: 4361 6e6e 6f74 2064 6973 706c 6179 2061  Cannot display a
+00025500: 6c6c 2072 6f77 732e 2028 746f 206f 7665  ll rows. (to ove
+00025510: 7272 6964 652c 2073 6574 2044 6973 706c  rride, set Displ
+00025520: 6179 2e6f 7074 696f 6e73 2e52 4f57 5f41  ay.options.ROW_A
+00025530: 4c4c 203d 2054 7275 6520 616e 6420 7072  LL = True and pr
+00025540: 696e 7420 7769 7468 2072 6570 7229 220d  int with repr)".
+00025550: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+00025560: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+00025570: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00025580: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00025590: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000255a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
-000255b0: 2040 7072 6f70 6572 7479 0d0a 2020 2020   @property..    
-000255c0: 6465 6620 5f48 2873 656c 6629 3a0d 0a20  def _H(self):.. 
-000255d0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-000255e0: 2020 2020 4469 7370 6c61 7920 616c 6c20      Display all 
-000255f0: 636f 6c75 6d6e 7320 616e 6420 6c6f 6e67  columns and long
-00025600: 2073 7472 696e 6773 206f 6620 6120 602e   strings of a `.
-00025610: 4461 7461 7365 7460 206f 7220 6053 7472  Dataset` or `Str
-00025620: 7563 7460 2e0d 0a0d 0a20 2020 2020 2020  uct`.....       
-00025630: 2057 6974 686f 7574 2074 6869 7320 7072   Without this pr
-00025640: 6f70 6572 7479 2c20 636f 6c75 6d6e 7320  operty, columns 
-00025650: 6172 6520 656c 6964 6564 2077 6865 6e20  are elided when 
-00025660: 7468 6520 6d61 7869 6d75 6d20 6469 7370  the maximum disp
-00025670: 6c61 790d 0a20 2020 2020 2020 2077 6964  lay..        wid
-00025680: 7468 2069 7320 7265 6163 6865 642c 2061  th is reached, a
-00025690: 6e64 2073 7472 696e 6773 2061 7265 2074  nd strings are t
-000256a0: 7275 6e63 6174 6564 2061 6674 6572 2031  runcated after 1
-000256b0: 3520 6368 6172 6163 7465 7273 2e0d 0a0d  5 characters....
-000256c0: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
-000256d0: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-000256e0: 2d0d 0a20 2020 2020 2020 2044 6973 706c  -..        Displ
-000256f0: 6179 5374 7269 6e67 0d0a 2020 2020 2020  ayString..      
-00025700: 2020 2020 2020 4120 7772 6170 7065 7220        A wrapper 
-00025710: 666f 7220 6469 7370 6c61 7920 6f70 6572  for display oper
-00025720: 6174 696f 6e73 2074 6861 7420 646f 6e27  ations that don'
-00025730: 7420 7265 7475 726e 2061 2060 2e44 6174  t return a `.Dat
-00025740: 6173 6574 6020 6f72 2060 5374 7275 6374  aset` or `Struct
-00025750: 602e 0d0a 0d0a 2020 2020 2020 2020 5365  `.....        Se
-00025760: 6520 416c 736f 0d0a 2020 2020 2020 2020  e Also..        
-00025770: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020  --------..      
-00025780: 2020 5374 7275 6374 2e5f 5620 3a20 4469    Struct._V : Di
-00025790: 7370 6c61 7920 616c 6c20 726f 7773 206f  splay all rows o
-000257a0: 6620 6120 602e 4461 7461 7365 7460 206f  f a `.Dataset` o
-000257b0: 7220 6053 7472 7563 7460 2e0d 0a20 2020  r `Struct`...   
-000257c0: 2020 2020 2053 7472 7563 742e 5f41 203a       Struct._A :
-000257d0: 2044 6973 706c 6179 2061 6c6c 2063 6f6c   Display all col
-000257e0: 756d 6e73 2c20 726f 7773 2c20 616e 6420  umns, rows, and 
-000257f0: 6c6f 6e67 2073 7472 696e 6773 206f 6620  long strings of 
-00025800: 6120 602e 4461 7461 7365 7460 206f 7220  a `.Dataset` or 
-00025810: 6053 7472 7563 7460 2e0d 0a20 2020 2020  `Struct`...     
-00025820: 2020 2053 7472 7563 742e 5f47 203a 2044     Struct._G : D
-00025830: 6973 706c 6179 2061 6c6c 2063 6f6c 756d  isplay all colum
-00025840: 6e73 206f 6620 6120 602e 4461 7461 7365  ns of a `.Datase
-00025850: 7460 206f 7220 6053 7472 7563 7460 2c20  t` or `Struct`, 
-00025860: 7772 6170 7069 6e67 2074 6865 2074 6162  wrapping the tab
-00025870: 6c65 2061 7320 6e65 6564 6564 2e0d 0a20  le as needed... 
-00025880: 2020 2020 2020 2053 7472 7563 742e 5f54         Struct._T
-00025890: 203a 2044 6973 706c 6179 2061 2074 7261   : Display a tra
-000258a0: 6e73 706f 7365 6420 7669 6577 206f 6620  nsposed view of 
-000258b0: 6120 602e 4461 7461 7365 7460 206f 7220  a `.Dataset` or 
-000258c0: 6053 7472 7563 7460 2e0d 0a0d 0a20 2020  `Struct`.....   
-000258d0: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
-000258e0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
-000258f0: 0a20 2020 2020 2020 2042 7920 6465 6661  .        By defa
-00025900: 756c 742c 2063 6f6c 756d 6e73 2061 7265  ult, columns are
-00025910: 2065 6c69 6465 6420 7768 656e 2074 6865   elided when the
-00025920: 206d 6178 696d 756d 2064 6973 706c 6179   maximum display
-00025930: 2077 6964 7468 2069 7320 7265 6163 6865   width is reache
-00025940: 642c 2061 6e64 2073 7472 696e 6773 2061  d, and strings a
-00025950: 7265 2074 7275 6e63 6174 6564 2061 6674  re truncated aft
-00025960: 6572 2031 3520 6368 6172 6163 7465 7273  er 15 characters
-00025970: 2e0d 0a0d 0a20 2020 2020 2020 203e 3e3e  .....        >>>
-00025980: 2064 7320 3d20 7274 2e44 6174 6173 6574   ds = rt.Dataset
-00025990: 287b 6b65 7920 3a20 7274 2e46 4128 5b69  ({key : rt.FA([i
-000259a0: 2c20 322a 692c 2033 2a69 2c20 342a 695d  , 2*i, 3*i, 4*i]
-000259b0: 2925 3320 3d3d 2030 2066 6f72 2069 2c20  )%3 == 0 for i, 
-000259c0: 6b65 7920 696e 2065 6e75 6d65 7261 7465  key in enumerate
-000259d0: 2827 6162 6364 6566 6768 696a 6b6c 6d27  ('abcdefghijklm'
-000259e0: 297d 290d 0a20 2020 2020 2020 203e 3e3e  )})..        >>>
-000259f0: 2064 735b 305d 203d 2072 742e 4641 2827   ds[0] = rt.FA('
-00025a00: 6c6f 6e67 5f73 7472 696e 675f 6c6f 6e67  long_string_long
-00025a10: 5f73 7472 696e 6727 290d 0a20 2020 2020  _string')..     
-00025a20: 2020 203e 3e3e 2064 730d 0a20 2020 2020     >>> ds..     
-00025a30: 2020 2023 2020 2061 2020 2020 2020 2020     #   a        
-00025a40: 2020 2020 2020 2020 2020 2020 2062 2020               b  
-00025a50: 2020 2020 2063 2020 2020 2020 6420 2020       c      d   
-00025a60: 2020 2020 6520 2020 2020 2020 6620 2020      e       f   
-00025a70: 2e2e 2e20 2020 2020 2020 6820 2020 2020  ...       h     
-00025a80: 2020 6920 2020 2020 206a 2020 2020 2020    i      j      
-00025a90: 206b 2020 2020 2020 206c 2020 2020 2020   k       l      
-00025aa0: 6d0d 0a20 2020 2020 2020 202d 2020 202d  m..        -   -
-00025ab0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2020  --------------  
-00025ac0: 202d 2d2d 2d2d 2020 202d 2d2d 2d2d 2020   -----   -----  
-00025ad0: 202d 2d2d 2d20 2020 2d2d 2d2d 2d20 2020   ----   -----   
-00025ae0: 2d2d 2d2d 2d20 2020 2d2d 2d20 2020 2d2d  -----   ---   --
-00025af0: 2d2d 2d20 2020 2d2d 2d2d 2d20 2020 2d2d  ---   -----   --
-00025b00: 2d2d 2020 202d 2d2d 2d2d 2020 202d 2d2d  --   -----   ---
-00025b10: 2d2d 2020 202d 2d2d 2d0d 0a20 2020 2020  --   ----..     
-00025b20: 2020 2030 2020 206c 6f6e 675f 7374 7269     0   long_stri
-00025b30: 6e67 5f6c 6f6e 2020 2046 616c 7365 2020  ng_lon   False  
-00025b40: 2046 616c 7365 2020 2054 7275 6520 2020   False   True   
-00025b50: 4661 6c73 6520 2020 4661 6c73 6520 2020  False   False   
-00025b60: 2e2e 2e20 2020 4661 6c73 6520 2020 4661  ...   False   Fa
-00025b70: 6c73 6520 2020 5472 7565 2020 2046 616c  lse   True   Fal
-00025b80: 7365 2020 2046 616c 7365 2020 2054 7275  se   False   Tru
-00025b90: 650d 0a20 2020 2020 2020 2031 2020 206c  e..        1   l
-00025ba0: 6f6e 675f 7374 7269 6e67 5f6c 6f6e 2020  ong_string_lon  
-00025bb0: 2046 616c 7365 2020 2046 616c 7365 2020   False   False  
-00025bc0: 2054 7275 6520 2020 4661 6c73 6520 2020   True   False   
-00025bd0: 4661 6c73 6520 2020 2e2e 2e20 2020 4661  False   ...   Fa
-00025be0: 6c73 6520 2020 4661 6c73 6520 2020 5472  lse   False   Tr
-00025bf0: 7565 2020 2046 616c 7365 2020 2046 616c  ue   False   Fal
-00025c00: 7365 2020 2054 7275 650d 0a20 2020 2020  se   True..     
-00025c10: 2020 2032 2020 206c 6f6e 675f 7374 7269     2   long_stri
-00025c20: 6e67 5f6c 6f6e 2020 2020 5472 7565 2020  ng_lon    True  
-00025c30: 2020 5472 7565 2020 2054 7275 6520 2020    True   True   
-00025c40: 2054 7275 6520 2020 2054 7275 6520 2020   True    True   
-00025c50: 2e2e 2e20 2020 2054 7275 6520 2020 2054  ...    True    T
-00025c60: 7275 6520 2020 5472 7565 2020 2020 5472  rue   True    Tr
-00025c70: 7565 2020 2020 5472 7565 2020 2054 7275  ue    True   Tru
-00025c80: 650d 0a20 2020 2020 2020 2033 2020 206c  e..        3   l
-00025c90: 6f6e 675f 7374 7269 6e67 5f6c 6f6e 2020  ong_string_lon  
-00025ca0: 2046 616c 7365 2020 2046 616c 7365 2020   False   False  
-00025cb0: 2054 7275 6520 2020 4661 6c73 6520 2020   True   False   
-00025cc0: 4661 6c73 6520 2020 2e2e 2e20 2020 4661  False   ...   Fa
-00025cd0: 6c73 6520 2020 4661 6c73 6520 2020 5472  lse   False   Tr
-00025ce0: 7565 2020 2046 616c 7365 2020 2046 616c  ue   False   Fal
-00025cf0: 7365 2020 2054 7275 650d 0a0d 0a20 2020  se   True....   
-00025d00: 2020 2020 2044 6973 706c 6179 2061 6c6c       Display all
-00025d10: 2063 6f6c 756d 6e73 2061 6e64 206c 6f6e   columns and lon
-00025d20: 6720 7374 7269 6e67 733a 0d0a 0d0a 2020  g strings:....  
-00025d30: 2020 2020 2020 3e3e 3e20 6473 2e5f 480d        >>> ds._H.
-00025d40: 0a20 2020 2020 2020 2023 2020 2061 2020  .        #   a  
-00025d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025d60: 2020 2020 2020 2020 2020 2062 2020 2020             b    
-00025d70: 2020 2063 2020 2020 2020 6420 2020 2020     c      d     
-00025d80: 2020 6520 2020 2020 2020 6620 2020 2020    e       f     
-00025d90: 2067 2020 2020 2020 2068 2020 2020 2020   g       h      
-00025da0: 2069 2020 2020 2020 6a20 2020 2020 2020   i      j       
-00025db0: 6b20 2020 2020 2020 6c20 2020 2020 206d  k       l      m
-00025dc0: 0d0a 2020 2020 2020 2020 2d20 2020 2d2d  ..        -   --
-00025dd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00025de0: 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d20 2020  -----   -----   
-00025df0: 2d2d 2d2d 2d20 2020 2d2d 2d2d 2020 202d  -----   ----   -
-00025e00: 2d2d 2d2d 2020 202d 2d2d 2d2d 2020 202d  ----   -----   -
-00025e10: 2d2d 2d20 2020 2d2d 2d2d 2d20 2020 2d2d  ---   -----   --
-00025e20: 2d2d 2d20 2020 2d2d 2d2d 2020 202d 2d2d  ---   ----   ---
-00025e30: 2d2d 2020 202d 2d2d 2d2d 2020 202d 2d2d  --   -----   ---
-00025e40: 2d0d 0a20 2020 2020 2020 2030 2020 206c  -..        0   l
-00025e50: 6f6e 675f 7374 7269 6e67 5f6c 6f6e 675f  ong_string_long_
-00025e60: 7374 7269 6e67 2020 2046 616c 7365 2020  string   False  
-00025e70: 2046 616c 7365 2020 2054 7275 6520 2020   False   True   
-00025e80: 4661 6c73 6520 2020 4661 6c73 6520 2020  False   False   
-00025e90: 5472 7565 2020 2046 616c 7365 2020 2046  True   False   F
-00025ea0: 616c 7365 2020 2054 7275 6520 2020 4661  alse   True   Fa
-00025eb0: 6c73 6520 2020 4661 6c73 6520 2020 5472  lse   False   Tr
-00025ec0: 7565 0d0a 2020 2020 2020 2020 3120 2020  ue..        1   
-00025ed0: 6c6f 6e67 5f73 7472 696e 675f 6c6f 6e67  long_string_long
-00025ee0: 5f73 7472 696e 6720 2020 4661 6c73 6520  _string   False 
-00025ef0: 2020 4661 6c73 6520 2020 5472 7565 2020    False   True  
-00025f00: 2046 616c 7365 2020 2046 616c 7365 2020   False   False  
-00025f10: 2054 7275 6520 2020 4661 6c73 6520 2020   True   False   
-00025f20: 4661 6c73 6520 2020 5472 7565 2020 2046  False   True   F
-00025f30: 616c 7365 2020 2046 616c 7365 2020 2054  alse   False   T
-00025f40: 7275 650d 0a20 2020 2020 2020 2032 2020  rue..        2  
-00025f50: 206c 6f6e 675f 7374 7269 6e67 5f6c 6f6e   long_string_lon
-00025f60: 675f 7374 7269 6e67 2020 2020 5472 7565  g_string    True
-00025f70: 2020 2020 5472 7565 2020 2054 7275 6520      True   True 
-00025f80: 2020 2054 7275 6520 2020 2054 7275 6520     True    True 
-00025f90: 2020 5472 7565 2020 2020 5472 7565 2020    True    True  
-00025fa0: 2020 5472 7565 2020 2054 7275 6520 2020    True   True   
-00025fb0: 2054 7275 6520 2020 2054 7275 6520 2020   True    True   
-00025fc0: 5472 7565 0d0a 2020 2020 2020 2020 3320  True..        3 
-00025fd0: 2020 6c6f 6e67 5f73 7472 696e 675f 6c6f    long_string_lo
-00025fe0: 6e67 5f73 7472 696e 6720 2020 4661 6c73  ng_string   Fals
-00025ff0: 6520 2020 4661 6c73 6520 2020 5472 7565  e   False   True
-00026000: 2020 2046 616c 7365 2020 2046 616c 7365     False   False
-00026010: 2020 2054 7275 6520 2020 4661 6c73 6520     True   False 
-00026020: 2020 4661 6c73 6520 2020 5472 7565 2020    False   True  
-00026030: 2046 616c 7365 2020 2046 616c 7365 2020   False   False  
-00026040: 2054 7275 650d 0a20 2020 2020 2020 2022   True..        "
-00026050: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
-00026060: 726e 2073 656c 662e 5f74 656d 705f 6469  rn self._temp_di
-00026070: 7370 6c61 7928 5b22 434f 4c5f 414c 4c22  splay(["COL_ALL"
-00026080: 2c20 224d 4158 5f53 5452 494e 475f 5749  , "MAX_STRING_WI
-00026090: 4454 4822 5d2c 205b 5472 7565 2c20 3130  DTH"], [True, 10
-000260a0: 3030 5d29 0d0a 0d0a 2020 2020 2320 2d2d  00])....    # --
+00025590: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
+000255a0: 0a20 2020 2040 7072 6f70 6572 7479 0d0a  .    @property..
+000255b0: 2020 2020 6465 6620 5f48 2873 656c 6629      def _H(self)
+000255c0: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+000255d0: 2020 2020 2020 2020 4469 7370 6c61 7920          Display 
+000255e0: 616c 6c20 636f 6c75 6d6e 7320 616e 6420  all columns and 
+000255f0: 6c6f 6e67 2073 7472 696e 6773 206f 6620  long strings of 
+00025600: 6120 602e 4461 7461 7365 7460 206f 7220  a `.Dataset` or 
+00025610: 6053 7472 7563 7460 2e0d 0a0d 0a20 2020  `Struct`.....   
+00025620: 2020 2020 2057 6974 686f 7574 2074 6869       Without thi
+00025630: 7320 7072 6f70 6572 7479 2c20 636f 6c75  s property, colu
+00025640: 6d6e 7320 6172 6520 656c 6964 6564 2077  mns are elided w
+00025650: 6865 6e20 7468 6520 6d61 7869 6d75 6d20  hen the maximum 
+00025660: 6469 7370 6c61 790d 0a20 2020 2020 2020  display..       
+00025670: 2077 6964 7468 2069 7320 7265 6163 6865   width is reache
+00025680: 642c 2061 6e64 2073 7472 696e 6773 2061  d, and strings a
+00025690: 7265 2074 7275 6e63 6174 6564 2061 6674  re truncated aft
+000256a0: 6572 2031 3520 6368 6172 6163 7465 7273  er 15 characters
+000256b0: 2e0d 0a0d 0a20 2020 2020 2020 2052 6574  .....        Ret
+000256c0: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
+000256d0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 2044  -----..        D
+000256e0: 6973 706c 6179 5374 7269 6e67 0d0a 2020  isplayString..  
+000256f0: 2020 2020 2020 2020 2020 4120 7772 6170            A wrap
+00025700: 7065 7220 666f 7220 6469 7370 6c61 7920  per for display 
+00025710: 6f70 6572 6174 696f 6e73 2074 6861 7420  operations that 
+00025720: 646f 6e27 7420 7265 7475 726e 2061 2060  don't return a `
+00025730: 2e44 6174 6173 6574 6020 6f72 2060 5374  .Dataset` or `St
+00025740: 7275 6374 602e 0d0a 0d0a 2020 2020 2020  ruct`.....      
+00025750: 2020 5365 6520 416c 736f 0d0a 2020 2020    See Also..    
+00025760: 2020 2020 2d2d 2d2d 2d2d 2d2d 0d0a 2020      --------..  
+00025770: 2020 2020 2020 5374 7275 6374 2e5f 5620        Struct._V 
+00025780: 3a20 4469 7370 6c61 7920 616c 6c20 726f  : Display all ro
+00025790: 7773 206f 6620 6120 602e 4461 7461 7365  ws of a `.Datase
+000257a0: 7460 206f 7220 6053 7472 7563 7460 2e0d  t` or `Struct`..
+000257b0: 0a20 2020 2020 2020 2053 7472 7563 742e  .        Struct.
+000257c0: 5f41 203a 2044 6973 706c 6179 2061 6c6c  _A : Display all
+000257d0: 2063 6f6c 756d 6e73 2c20 726f 7773 2c20   columns, rows, 
+000257e0: 616e 6420 6c6f 6e67 2073 7472 696e 6773  and long strings
+000257f0: 206f 6620 6120 602e 4461 7461 7365 7460   of a `.Dataset`
+00025800: 206f 7220 6053 7472 7563 7460 2e0d 0a20   or `Struct`... 
+00025810: 2020 2020 2020 2053 7472 7563 742e 5f47         Struct._G
+00025820: 203a 2044 6973 706c 6179 2061 6c6c 2063   : Display all c
+00025830: 6f6c 756d 6e73 206f 6620 6120 602e 4461  olumns of a `.Da
+00025840: 7461 7365 7460 206f 7220 6053 7472 7563  taset` or `Struc
+00025850: 7460 2c20 7772 6170 7069 6e67 2074 6865  t`, wrapping the
+00025860: 2074 6162 6c65 2061 7320 6e65 6564 6564   table as needed
+00025870: 2e0d 0a20 2020 2020 2020 2053 7472 7563  ...        Struc
+00025880: 742e 5f54 203a 2044 6973 706c 6179 2061  t._T : Display a
+00025890: 2074 7261 6e73 706f 7365 6420 7669 6577   transposed view
+000258a0: 206f 6620 6120 602e 4461 7461 7365 7460   of a `.Dataset`
+000258b0: 206f 7220 6053 7472 7563 7460 2e0d 0a0d   or `Struct`....
+000258c0: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
+000258d0: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+000258e0: 2d2d 2d0d 0a20 2020 2020 2020 2042 7920  ---..        By 
+000258f0: 6465 6661 756c 742c 2063 6f6c 756d 6e73  default, columns
+00025900: 2061 7265 2065 6c69 6465 6420 7768 656e   are elided when
+00025910: 2074 6865 206d 6178 696d 756d 2064 6973   the maximum dis
+00025920: 706c 6179 2077 6964 7468 2069 7320 7265  play width is re
+00025930: 6163 6865 642c 2061 6e64 2073 7472 696e  ached, and strin
+00025940: 6773 2061 7265 2074 7275 6e63 6174 6564  gs are truncated
+00025950: 2061 6674 6572 2031 3520 6368 6172 6163   after 15 charac
+00025960: 7465 7273 2e0d 0a0d 0a20 2020 2020 2020  ters.....       
+00025970: 203e 3e3e 2064 7320 3d20 7274 2e44 6174   >>> ds = rt.Dat
+00025980: 6173 6574 287b 6b65 7920 3a20 7274 2e46  aset({key : rt.F
+00025990: 4128 5b69 2c20 322a 692c 2033 2a69 2c20  A([i, 2*i, 3*i, 
+000259a0: 342a 695d 2925 3320 3d3d 2030 2066 6f72  4*i])%3 == 0 for
+000259b0: 2069 2c20 6b65 7920 696e 2065 6e75 6d65   i, key in enume
+000259c0: 7261 7465 2827 6162 6364 6566 6768 696a  rate('abcdefghij
+000259d0: 6b6c 6d27 297d 290d 0a20 2020 2020 2020  klm')})..       
+000259e0: 203e 3e3e 2064 735b 305d 203d 2072 742e   >>> ds[0] = rt.
+000259f0: 4641 2827 6c6f 6e67 5f73 7472 696e 675f  FA('long_string_
+00025a00: 6c6f 6e67 5f73 7472 696e 6727 290d 0a20  long_string').. 
+00025a10: 2020 2020 2020 203e 3e3e 2064 730d 0a20         >>> ds.. 
+00025a20: 2020 2020 2020 2023 2020 2061 2020 2020         #   a    
+00025a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025a40: 2062 2020 2020 2020 2063 2020 2020 2020   b       c      
+00025a50: 6420 2020 2020 2020 6520 2020 2020 2020  d       e       
+00025a60: 6620 2020 2e2e 2e20 2020 2020 2020 6820  f   ...       h 
+00025a70: 2020 2020 2020 6920 2020 2020 206a 2020        i      j  
+00025a80: 2020 2020 206b 2020 2020 2020 206c 2020       k       l  
+00025a90: 2020 2020 6d0d 0a20 2020 2020 2020 202d      m..        -
+00025aa0: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d     -------------
+00025ab0: 2d2d 2020 202d 2d2d 2d2d 2020 202d 2d2d  --   -----   ---
+00025ac0: 2d2d 2020 202d 2d2d 2d20 2020 2d2d 2d2d  --   ----   ----
+00025ad0: 2d20 2020 2d2d 2d2d 2d20 2020 2d2d 2d20  -   -----   --- 
+00025ae0: 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d20    -----   ----- 
+00025af0: 2020 2d2d 2d2d 2020 202d 2d2d 2d2d 2020    ----   -----  
+00025b00: 202d 2d2d 2d2d 2020 202d 2d2d 2d0d 0a20   -----   ----.. 
+00025b10: 2020 2020 2020 2030 2020 206c 6f6e 675f         0   long_
+00025b20: 7374 7269 6e67 5f6c 6f6e 2020 2046 616c  string_lon   Fal
+00025b30: 7365 2020 2046 616c 7365 2020 2054 7275  se   False   Tru
+00025b40: 6520 2020 4661 6c73 6520 2020 4661 6c73  e   False   Fals
+00025b50: 6520 2020 2e2e 2e20 2020 4661 6c73 6520  e   ...   False 
+00025b60: 2020 4661 6c73 6520 2020 5472 7565 2020    False   True  
+00025b70: 2046 616c 7365 2020 2046 616c 7365 2020   False   False  
+00025b80: 2054 7275 650d 0a20 2020 2020 2020 2031   True..        1
+00025b90: 2020 206c 6f6e 675f 7374 7269 6e67 5f6c     long_string_l
+00025ba0: 6f6e 2020 2046 616c 7365 2020 2046 616c  on   False   Fal
+00025bb0: 7365 2020 2054 7275 6520 2020 4661 6c73  se   True   Fals
+00025bc0: 6520 2020 4661 6c73 6520 2020 2e2e 2e20  e   False   ... 
+00025bd0: 2020 4661 6c73 6520 2020 4661 6c73 6520    False   False 
+00025be0: 2020 5472 7565 2020 2046 616c 7365 2020    True   False  
+00025bf0: 2046 616c 7365 2020 2054 7275 650d 0a20   False   True.. 
+00025c00: 2020 2020 2020 2032 2020 206c 6f6e 675f         2   long_
+00025c10: 7374 7269 6e67 5f6c 6f6e 2020 2020 5472  string_lon    Tr
+00025c20: 7565 2020 2020 5472 7565 2020 2054 7275  ue    True   Tru
+00025c30: 6520 2020 2054 7275 6520 2020 2054 7275  e    True    Tru
+00025c40: 6520 2020 2e2e 2e20 2020 2054 7275 6520  e   ...    True 
+00025c50: 2020 2054 7275 6520 2020 5472 7565 2020     True   True  
+00025c60: 2020 5472 7565 2020 2020 5472 7565 2020    True    True  
+00025c70: 2054 7275 650d 0a20 2020 2020 2020 2033   True..        3
+00025c80: 2020 206c 6f6e 675f 7374 7269 6e67 5f6c     long_string_l
+00025c90: 6f6e 2020 2046 616c 7365 2020 2046 616c  on   False   Fal
+00025ca0: 7365 2020 2054 7275 6520 2020 4661 6c73  se   True   Fals
+00025cb0: 6520 2020 4661 6c73 6520 2020 2e2e 2e20  e   False   ... 
+00025cc0: 2020 4661 6c73 6520 2020 4661 6c73 6520    False   False 
+00025cd0: 2020 5472 7565 2020 2046 616c 7365 2020    True   False  
+00025ce0: 2046 616c 7365 2020 2054 7275 650d 0a0d   False   True...
+00025cf0: 0a20 2020 2020 2020 2044 6973 706c 6179  .        Display
+00025d00: 2061 6c6c 2063 6f6c 756d 6e73 2061 6e64   all columns and
+00025d10: 206c 6f6e 6720 7374 7269 6e67 733a 0d0a   long strings:..
+00025d20: 0d0a 2020 2020 2020 2020 3e3e 3e20 6473  ..        >>> ds
+00025d30: 2e5f 480d 0a20 2020 2020 2020 2023 2020  ._H..        #  
+00025d40: 2061 2020 2020 2020 2020 2020 2020 2020   a              
+00025d50: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+00025d60: 2020 2020 2020 2063 2020 2020 2020 6420         c      d 
+00025d70: 2020 2020 2020 6520 2020 2020 2020 6620        e       f 
+00025d80: 2020 2020 2067 2020 2020 2020 2068 2020       g       h  
+00025d90: 2020 2020 2069 2020 2020 2020 6a20 2020       i      j   
+00025da0: 2020 2020 6b20 2020 2020 2020 6c20 2020      k       l   
+00025db0: 2020 206d 0d0a 2020 2020 2020 2020 2d20     m..        - 
+00025dc0: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    --------------
+00025dd0: 2d2d 2d2d 2d2d 2d2d 2d20 2020 2d2d 2d2d  ---------   ----
+00025de0: 2d20 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d  -   -----   ----
+00025df0: 2020 202d 2d2d 2d2d 2020 202d 2d2d 2d2d     -----   -----
+00025e00: 2020 202d 2d2d 2d20 2020 2d2d 2d2d 2d20     ----   ----- 
+00025e10: 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d 2020    -----   ----  
+00025e20: 202d 2d2d 2d2d 2020 202d 2d2d 2d2d 2020   -----   -----  
+00025e30: 202d 2d2d 2d0d 0a20 2020 2020 2020 2030   ----..        0
+00025e40: 2020 206c 6f6e 675f 7374 7269 6e67 5f6c     long_string_l
+00025e50: 6f6e 675f 7374 7269 6e67 2020 2046 616c  ong_string   Fal
+00025e60: 7365 2020 2046 616c 7365 2020 2054 7275  se   False   Tru
+00025e70: 6520 2020 4661 6c73 6520 2020 4661 6c73  e   False   Fals
+00025e80: 6520 2020 5472 7565 2020 2046 616c 7365  e   True   False
+00025e90: 2020 2046 616c 7365 2020 2054 7275 6520     False   True 
+00025ea0: 2020 4661 6c73 6520 2020 4661 6c73 6520    False   False 
+00025eb0: 2020 5472 7565 0d0a 2020 2020 2020 2020    True..        
+00025ec0: 3120 2020 6c6f 6e67 5f73 7472 696e 675f  1   long_string_
+00025ed0: 6c6f 6e67 5f73 7472 696e 6720 2020 4661  long_string   Fa
+00025ee0: 6c73 6520 2020 4661 6c73 6520 2020 5472  lse   False   Tr
+00025ef0: 7565 2020 2046 616c 7365 2020 2046 616c  ue   False   Fal
+00025f00: 7365 2020 2054 7275 6520 2020 4661 6c73  se   True   Fals
+00025f10: 6520 2020 4661 6c73 6520 2020 5472 7565  e   False   True
+00025f20: 2020 2046 616c 7365 2020 2046 616c 7365     False   False
+00025f30: 2020 2054 7275 650d 0a20 2020 2020 2020     True..       
+00025f40: 2032 2020 206c 6f6e 675f 7374 7269 6e67   2   long_string
+00025f50: 5f6c 6f6e 675f 7374 7269 6e67 2020 2020  _long_string    
+00025f60: 5472 7565 2020 2020 5472 7565 2020 2054  True    True   T
+00025f70: 7275 6520 2020 2054 7275 6520 2020 2054  rue    True    T
+00025f80: 7275 6520 2020 5472 7565 2020 2020 5472  rue   True    Tr
+00025f90: 7565 2020 2020 5472 7565 2020 2054 7275  ue    True   Tru
+00025fa0: 6520 2020 2054 7275 6520 2020 2054 7275  e    True    Tru
+00025fb0: 6520 2020 5472 7565 0d0a 2020 2020 2020  e   True..      
+00025fc0: 2020 3320 2020 6c6f 6e67 5f73 7472 696e    3   long_strin
+00025fd0: 675f 6c6f 6e67 5f73 7472 696e 6720 2020  g_long_string   
+00025fe0: 4661 6c73 6520 2020 4661 6c73 6520 2020  False   False   
+00025ff0: 5472 7565 2020 2046 616c 7365 2020 2046  True   False   F
+00026000: 616c 7365 2020 2054 7275 6520 2020 4661  alse   True   Fa
+00026010: 6c73 6520 2020 4661 6c73 6520 2020 5472  lse   False   Tr
+00026020: 7565 2020 2046 616c 7365 2020 2046 616c  ue   False   Fal
+00026030: 7365 2020 2054 7275 650d 0a20 2020 2020  se   True..     
+00026040: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00026050: 7265 7475 726e 2073 656c 662e 5f74 656d  return self._tem
+00026060: 705f 6469 7370 6c61 7928 5b22 434f 4c5f  p_display(["COL_
+00026070: 414c 4c22 2c20 224d 4158 5f53 5452 494e  ALL", "MAX_STRIN
+00026080: 475f 5749 4454 4822 5d2c 205b 5472 7565  G_WIDTH"], [True
+00026090: 2c20 3130 3030 5d29 0d0a 0d0a 2020 2020  , 1000])....    
+000260a0: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
 000260b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000260c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000260d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000260e0: 2d2d 2d2d 2d0d 0a20 2020 2040 7072 6f70  -----..    @prop
-000260f0: 6572 7479 0d0a 2020 2020 6465 6620 5f47  erty..    def _G
-00026100: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-00026110: 2022 2222 0d0a 2020 2020 2020 2020 4469   """..        Di
-00026120: 7370 6c61 7920 616c 6c20 636f 6c75 6d6e  splay all column
-00026130: 7320 6f66 2061 2060 2e44 6174 6173 6574  s of a `.Dataset
-00026140: 6020 6f72 2060 5374 7275 6374 602c 2077  ` or `Struct`, w
-00026150: 7261 7070 696e 6720 7468 6520 7461 626c  rapping the tabl
-00026160: 650d 0a20 2020 2020 2020 2061 6674 6572  e..        after
-00026170: 2074 6865 206d 6178 696d 756d 2064 6973   the maximum dis
-00026180: 706c 6179 2077 6964 7468 2069 7320 7265  play width is re
-00026190: 6163 6865 642e 0d0a 0d0a 2020 2020 2020  ached.....      
-000261a0: 2020 4e6f 7465 3a20 5468 6520 7461 626c    Note: The tabl
-000261b0: 6520 6973 2064 6973 706c 6179 6564 2061  e is displayed a
-000261c0: 7320 7465 7874 2c20 6e6f 7420 4854 4d4c  s text, not HTML
-000261d0: 2e0d 0a0d 0a20 2020 2020 2020 2052 6574  .....        Ret
-000261e0: 7572 6e73 0d0a 2020 2020 2020 2020 2d2d  urns..        --
-000261f0: 2d2d 2d2d 2d0d 0a20 2020 2020 2020 204e  -----..        N
-00026200: 6f6e 650d 0a0d 0a20 2020 2020 2020 2053  one....        S
-00026210: 6565 2041 6c73 6f0d 0a20 2020 2020 2020  ee Also..       
-00026220: 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020   --------..     
-00026230: 2020 2053 7472 7563 742e 5f56 203a 2044     Struct._V : D
-00026240: 6973 706c 6179 2061 6c6c 2072 6f77 7320  isplay all rows 
-00026250: 6f66 2061 2060 2e44 6174 6173 6574 6020  of a `.Dataset` 
-00026260: 6f72 2060 5374 7275 6374 602e 0d0a 2020  or `Struct`...  
-00026270: 2020 2020 2020 5374 7275 6374 2e5f 4820        Struct._H 
-00026280: 3a20 4469 7370 6c61 7920 616c 6c20 636f  : Display all co
-00026290: 6c75 6d6e 7320 616e 6420 6c6f 6e67 2073  lumns and long s
-000262a0: 7472 696e 6773 206f 6620 6120 602e 4461  trings of a `.Da
-000262b0: 7461 7365 7460 206f 7220 6053 7472 7563  taset` or `Struc
-000262c0: 7460 2e0d 0a20 2020 2020 2020 2053 7472  t`...        Str
-000262d0: 7563 742e 5f41 203a 2044 6973 706c 6179  uct._A : Display
-000262e0: 2061 6c6c 2063 6f6c 756d 6e73 2c20 726f   all columns, ro
-000262f0: 7773 2c20 616e 6420 6c6f 6e67 2073 7472  ws, and long str
-00026300: 696e 6773 206f 6620 6120 602e 4461 7461  ings of a `.Data
-00026310: 7365 7460 206f 7220 6053 7472 7563 7460  set` or `Struct`
-00026320: 2e0d 0a20 2020 2020 2020 2053 7472 7563  ...        Struc
-00026330: 742e 5f54 203a 2044 6973 706c 6179 2061  t._T : Display a
-00026340: 2074 7261 6e73 706f 7365 6420 7669 6577   transposed view
-00026350: 206f 6620 6120 602e 4461 7461 7365 7460   of a `.Dataset`
-00026360: 206f 7220 6053 7472 7563 7460 2e0d 0a0d   or `Struct`....
-00026370: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
-00026380: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-00026390: 2d2d 2d0d 0a20 2020 2020 2020 203e 3e3e  ---..        >>>
-000263a0: 2064 7320 3d20 7274 2e44 6174 6173 6574   ds = rt.Dataset
-000263b0: 280d 0a20 2020 2020 2020 202e 2e2e 2020  (..        ...  
-000263c0: 2020 207b 6b65 793a 2072 742e 4641 285b     {key: rt.FA([
-000263d0: 692c 2032 202a 2069 2c20 3320 2a20 692c  i, 2 * i, 3 * i,
-000263e0: 2034 202a 2069 5d29 2025 2033 203d 3d20   4 * i]) % 3 == 
-000263f0: 3020 666f 7220 692c 206b 6579 2069 6e20  0 for i, key in 
-00026400: 656e 756d 6572 6174 6528 2761 6263 6465  enumerate('abcde
-00026410: 6667 6869 6a6b 6c6d 6e6f 2729 7d0d 0a20  fghijklmno')}.. 
-00026420: 2020 2020 2020 202e 2e2e 2029 0d0a 0d0a         ... )....
-00026430: 2020 2020 2020 2020 4465 6661 756c 7420          Default 
-00026440: 6265 6861 7669 6f72 3a0d 0a0d 0a20 2020  behavior:....   
-00026450: 2020 2020 203e 3e3e 2064 730d 0a20 2020       >>> ds..   
-00026460: 2020 2020 2023 2020 2020 2020 6120 2020       #      a   
-00026470: 2020 2020 6220 2020 2020 2020 6320 2020      b       c   
-00026480: 2020 2064 2020 2020 2020 2065 2020 2020     d       e    
-00026490: 2020 2066 2020 2020 2020 6720 2020 2e2e     f      g   ..
-000264a0: 2e20 2020 2020 206a 2020 2020 2020 206b  .      j       k
-000264b0: 2020 2020 2020 206c 2020 2020 2020 6d20         l      m 
-000264c0: 2020 2020 2020 6e20 2020 2020 2020 6f0d        n       o.
-000264d0: 0a20 2020 2020 2020 202d 2020 202d 2d2d  .        -   ---
-000264e0: 2d20 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d  -   -----   ----
-000264f0: 2d20 2020 2d2d 2d2d 2020 202d 2d2d 2d2d  -   ----   -----
-00026500: 2020 202d 2d2d 2d2d 2020 202d 2d2d 2d20     -----   ---- 
-00026510: 2020 2d2d 2d20 2020 2d2d 2d2d 2020 202d    ---   ----   -
-00026520: 2d2d 2d2d 2020 202d 2d2d 2d2d 2020 202d  ----   -----   -
-00026530: 2d2d 2d20 2020 2d2d 2d2d 2d20 2020 2d2d  ---   -----   --
-00026540: 2d2d 2d0d 0a20 2020 2020 2020 2030 2020  ---..        0  
-00026550: 2054 7275 6520 2020 4661 6c73 6520 2020   True   False   
-00026560: 4661 6c73 6520 2020 5472 7565 2020 2046  False   True   F
-00026570: 616c 7365 2020 2046 616c 7365 2020 2054  alse   False   T
-00026580: 7275 6520 2020 2e2e 2e20 2020 5472 7565  rue   ...   True
-00026590: 2020 2046 616c 7365 2020 2046 616c 7365     False   False
-000265a0: 2020 2054 7275 6520 2020 4661 6c73 6520     True   False 
-000265b0: 2020 4661 6c73 650d 0a20 2020 2020 2020    False..       
-000265c0: 2031 2020 2054 7275 6520 2020 4661 6c73   1   True   Fals
-000265d0: 6520 2020 4661 6c73 6520 2020 5472 7565  e   False   True
-000265e0: 2020 2046 616c 7365 2020 2046 616c 7365     False   False
-000265f0: 2020 2054 7275 6520 2020 2e2e 2e20 2020     True   ...   
-00026600: 5472 7565 2020 2046 616c 7365 2020 2046  True   False   F
-00026610: 616c 7365 2020 2054 7275 6520 2020 4661  alse   True   Fa
-00026620: 6c73 6520 2020 4661 6c73 650d 0a20 2020  lse   False..   
-00026630: 2020 2020 2032 2020 2054 7275 6520 2020       2   True   
-00026640: 2054 7275 6520 2020 2054 7275 6520 2020   True    True   
-00026650: 5472 7565 2020 2020 5472 7565 2020 2020  True    True    
-00026660: 5472 7565 2020 2054 7275 6520 2020 2e2e  True   True   ..
-00026670: 2e20 2020 5472 7565 2020 2020 5472 7565  .   True    True
-00026680: 2020 2020 5472 7565 2020 2054 7275 6520      True   True 
-00026690: 2020 2054 7275 6520 2020 2054 7275 650d     True    True.
-000266a0: 0a20 2020 2020 2020 2033 2020 2054 7275  .        3   Tru
-000266b0: 6520 2020 4661 6c73 6520 2020 4661 6c73  e   False   Fals
-000266c0: 6520 2020 5472 7565 2020 2046 616c 7365  e   True   False
-000266d0: 2020 2046 616c 7365 2020 2054 7275 6520     False   True 
-000266e0: 2020 2e2e 2e20 2020 5472 7565 2020 2046    ...   True   F
-000266f0: 616c 7365 2020 2046 616c 7365 2020 2054  alse   False   T
-00026700: 7275 6520 2020 4661 6c73 6520 2020 4661  rue   False   Fa
-00026710: 6c73 650d 0a0d 0a20 2020 2020 2020 2053  lse....        S
-00026720: 686f 7720 616c 6c20 726f 7773 2c20 7772  how all rows, wr
-00026730: 6170 7069 6e67 2074 6865 2074 6162 6c65  apping the table
-00026740: 2061 7320 6e65 6564 6564 3a0d 0a0d 0a20   as needed:.... 
-00026750: 2020 2020 2020 203e 3e3e 2064 732e 5f47         >>> ds._G
-00026760: 0d0a 2020 2020 2020 2020 2320 2020 2020  ..        #     
-00026770: 2061 2020 2020 2020 2062 2020 2020 2020   a       b      
-00026780: 2063 2020 2020 2020 6420 2020 2020 2020   c      d       
-00026790: 6520 2020 2020 2020 6620 2020 2020 2067  e       f      g
-000267a0: 2020 2020 2020 2068 2020 2020 2020 2069         h       i
-000267b0: 2020 2020 2020 6a20 2020 2020 2020 6b20        j       k 
-000267c0: 2020 2020 2020 6c20 2020 2020 206d 0d0a        l      m..
-000267d0: 2020 2020 2020 2020 2d20 2020 2d2d 2d2d          -   ----
-000267e0: 2020 202d 2d2d 2d2d 2020 202d 2d2d 2d2d     -----   -----
-000267f0: 2020 202d 2d2d 2d20 2020 2d2d 2d2d 2d20     ----   ----- 
-00026800: 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d 2020    -----   ----  
-00026810: 202d 2d2d 2d2d 2020 202d 2d2d 2d2d 2020   -----   -----  
-00026820: 202d 2d2d 2d20 2020 2d2d 2d2d 2d20 2020   ----   -----   
-00026830: 2d2d 2d2d 2d20 2020 2d2d 2d2d 0d0a 2020  -----   ----..  
-00026840: 2020 2020 2020 3020 2020 5472 7565 2020        0   True  
-00026850: 2046 616c 7365 2020 2046 616c 7365 2020   False   False  
-00026860: 2054 7275 6520 2020 4661 6c73 6520 2020   True   False   
-00026870: 4661 6c73 6520 2020 5472 7565 2020 2046  False   True   F
-00026880: 616c 7365 2020 2046 616c 7365 2020 2054  alse   False   T
-00026890: 7275 6520 2020 4661 6c73 6520 2020 4661  rue   False   Fa
-000268a0: 6c73 6520 2020 5472 7565 0d0a 2020 2020  lse   True..    
-000268b0: 2020 2020 3120 2020 5472 7565 2020 2046      1   True   F
-000268c0: 616c 7365 2020 2046 616c 7365 2020 2054  alse   False   T
-000268d0: 7275 6520 2020 4661 6c73 6520 2020 4661  rue   False   Fa
-000268e0: 6c73 6520 2020 5472 7565 2020 2046 616c  lse   True   Fal
-000268f0: 7365 2020 2046 616c 7365 2020 2054 7275  se   False   Tru
-00026900: 6520 2020 4661 6c73 6520 2020 4661 6c73  e   False   Fals
-00026910: 6520 2020 5472 7565 0d0a 2020 2020 2020  e   True..      
-00026920: 2020 3220 2020 5472 7565 2020 2020 5472    2   True    Tr
-00026930: 7565 2020 2020 5472 7565 2020 2054 7275  ue    True   Tru
-00026940: 6520 2020 2054 7275 6520 2020 2054 7275  e    True    Tru
-00026950: 6520 2020 5472 7565 2020 2020 5472 7565  e   True    True
-00026960: 2020 2020 5472 7565 2020 2054 7275 6520      True   True 
-00026970: 2020 2054 7275 6520 2020 2054 7275 6520     True    True 
-00026980: 2020 5472 7565 0d0a 2020 2020 2020 2020    True..        
-00026990: 3320 2020 5472 7565 2020 2046 616c 7365  3   True   False
-000269a0: 2020 2046 616c 7365 2020 2054 7275 6520     False   True 
-000269b0: 2020 4661 6c73 6520 2020 4661 6c73 6520    False   False 
-000269c0: 2020 5472 7565 2020 2046 616c 7365 2020    True   False  
-000269d0: 2046 616c 7365 2020 2054 7275 6520 2020   False   True   
-000269e0: 4661 6c73 6520 2020 4661 6c73 6520 2020  False   False   
-000269f0: 5472 7565 0d0a 2020 2020 2020 2020 3c42  True..        <B
-00026a00: 4c41 4e4b 4c49 4e45 3e0d 0a20 2020 2020  LANKLINE>..     
-00026a10: 2020 2023 2020 2020 2020 206e 2020 2020     #       n    
-00026a20: 2020 206f 0d0a 2020 2020 2020 2020 2d20     o..        - 
-00026a30: 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d0d    -----   -----.
-00026a40: 0a20 2020 2020 2020 2030 2020 2046 616c  .        0   Fal
-00026a50: 7365 2020 2046 616c 7365 0d0a 2020 2020  se   False..    
-00026a60: 2020 2020 3120 2020 4661 6c73 6520 2020      1   False   
-00026a70: 4661 6c73 650d 0a20 2020 2020 2020 2032  False..        2
-00026a80: 2020 2020 5472 7565 2020 2020 5472 7565      True    True
-00026a90: 0d0a 2020 2020 2020 2020 3320 2020 4661  ..        3   Fa
-00026aa0: 6c73 6520 2020 4661 6c73 650d 0a20 2020  lse   False..   
-00026ab0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00026ac0: 2020 7361 7665 6d6f 6465 203d 2028 4469    savemode = (Di
-00026ad0: 7370 6c61 7954 6162 6c65 2e6f 7074 696f  splayTable.optio
-00026ae0: 6e73 2e43 4f4c 5f41 4c4c 2c20 4469 7370  ns.COL_ALL, Disp
-00026af0: 6c61 7954 6162 6c65 2e6f 7074 696f 6e73  layTable.options
-00026b00: 2e43 4f4e 534f 4c45 5f58 5f48 544d 4c29  .CONSOLE_X_HTML)
-00026b10: 0d0a 2020 2020 2020 2020 4469 7370 6c61  ..        Displa
-00026b20: 7954 6162 6c65 2e6f 7074 696f 6e73 2e43  yTable.options.C
-00026b30: 4f4c 5f41 4c4c 203d 2054 7275 650d 0a20  OL_ALL = True.. 
-00026b40: 2020 2020 2020 2044 6973 706c 6179 5461         DisplayTa
-00026b50: 626c 652e 6f70 7469 6f6e 732e 434f 4e53  ble.options.CONS
-00026b60: 4f4c 455f 585f 4854 4d4c 203d 2031 3530  OLE_X_HTML = 150
-00026b70: 0d0a 2020 2020 2020 2020 7072 696e 7428  ..        print(
-00026b80: 7365 6c66 290d 0a20 2020 2020 2020 2044  self)..        D
-00026b90: 6973 706c 6179 5461 626c 652e 6f70 7469  isplayTable.opti
-00026ba0: 6f6e 732e 434f 4c5f 414c 4c20 3d20 7361  ons.COL_ALL = sa
-00026bb0: 7665 6d6f 6465 5b30 5d0d 0a20 2020 2020  vemode[0]..     
-00026bc0: 2020 2044 6973 706c 6179 5461 626c 652e     DisplayTable.
-00026bd0: 6f70 7469 6f6e 732e 434f 4e53 4f4c 455f  options.CONSOLE_
-00026be0: 585f 4854 4d4c 203d 2073 6176 656d 6f64  X_HTML = savemod
-00026bf0: 655b 315d 0d0a 2020 2020 2020 2020 7265  e[1]..        re
-00026c00: 7475 726e 204e 6f6e 650d 0a0d 0a20 2020  turn None....   
-00026c10: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+000260d0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2040  ---------..    @
+000260e0: 7072 6f70 6572 7479 0d0a 2020 2020 6465  property..    de
+000260f0: 6620 5f47 2873 656c 6629 3a0d 0a20 2020  f _G(self):..   
+00026100: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00026110: 2020 4469 7370 6c61 7920 616c 6c20 636f    Display all co
+00026120: 6c75 6d6e 7320 6f66 2061 2060 2e44 6174  lumns of a `.Dat
+00026130: 6173 6574 6020 6f72 2060 5374 7275 6374  aset` or `Struct
+00026140: 602c 2077 7261 7070 696e 6720 7468 6520  `, wrapping the 
+00026150: 7461 626c 650d 0a20 2020 2020 2020 2061  table..        a
+00026160: 6674 6572 2074 6865 206d 6178 696d 756d  fter the maximum
+00026170: 2064 6973 706c 6179 2077 6964 7468 2069   display width i
+00026180: 7320 7265 6163 6865 642e 0d0a 0d0a 2020  s reached.....  
+00026190: 2020 2020 2020 4e6f 7465 3a20 5468 6520        Note: The 
+000261a0: 7461 626c 6520 6973 2064 6973 706c 6179  table is display
+000261b0: 6564 2061 7320 7465 7874 2c20 6e6f 7420  ed as text, not 
+000261c0: 4854 4d4c 2e0d 0a0d 0a20 2020 2020 2020  HTML.....       
+000261d0: 2052 6574 7572 6e73 0d0a 2020 2020 2020   Returns..      
+000261e0: 2020 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020    -------..     
+000261f0: 2020 204e 6f6e 650d 0a0d 0a20 2020 2020     None....     
+00026200: 2020 2053 6565 2041 6c73 6f0d 0a20 2020     See Also..   
+00026210: 2020 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20       --------.. 
+00026220: 2020 2020 2020 2053 7472 7563 742e 5f56         Struct._V
+00026230: 203a 2044 6973 706c 6179 2061 6c6c 2072   : Display all r
+00026240: 6f77 7320 6f66 2061 2060 2e44 6174 6173  ows of a `.Datas
+00026250: 6574 6020 6f72 2060 5374 7275 6374 602e  et` or `Struct`.
+00026260: 0d0a 2020 2020 2020 2020 5374 7275 6374  ..        Struct
+00026270: 2e5f 4820 3a20 4469 7370 6c61 7920 616c  ._H : Display al
+00026280: 6c20 636f 6c75 6d6e 7320 616e 6420 6c6f  l columns and lo
+00026290: 6e67 2073 7472 696e 6773 206f 6620 6120  ng strings of a 
+000262a0: 602e 4461 7461 7365 7460 206f 7220 6053  `.Dataset` or `S
+000262b0: 7472 7563 7460 2e0d 0a20 2020 2020 2020  truct`...       
+000262c0: 2053 7472 7563 742e 5f41 203a 2044 6973   Struct._A : Dis
+000262d0: 706c 6179 2061 6c6c 2063 6f6c 756d 6e73  play all columns
+000262e0: 2c20 726f 7773 2c20 616e 6420 6c6f 6e67  , rows, and long
+000262f0: 2073 7472 696e 6773 206f 6620 6120 602e   strings of a `.
+00026300: 4461 7461 7365 7460 206f 7220 6053 7472  Dataset` or `Str
+00026310: 7563 7460 2e0d 0a20 2020 2020 2020 2053  uct`...        S
+00026320: 7472 7563 742e 5f54 203a 2044 6973 706c  truct._T : Displ
+00026330: 6179 2061 2074 7261 6e73 706f 7365 6420  ay a transposed 
+00026340: 7669 6577 206f 6620 6120 602e 4461 7461  view of a `.Data
+00026350: 7365 7460 206f 7220 6053 7472 7563 7460  set` or `Struct`
+00026360: 2e0d 0a0d 0a20 2020 2020 2020 2045 7861  .....        Exa
+00026370: 6d70 6c65 730d 0a20 2020 2020 2020 202d  mples..        -
+00026380: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+00026390: 203e 3e3e 2064 7320 3d20 7274 2e44 6174   >>> ds = rt.Dat
+000263a0: 6173 6574 280d 0a20 2020 2020 2020 202e  aset(..        .
+000263b0: 2e2e 2020 2020 207b 6b65 793a 2072 742e  ..     {key: rt.
+000263c0: 4641 285b 692c 2032 202a 2069 2c20 3320  FA([i, 2 * i, 3 
+000263d0: 2a20 692c 2034 202a 2069 5d29 2025 2033  * i, 4 * i]) % 3
+000263e0: 203d 3d20 3020 666f 7220 692c 206b 6579   == 0 for i, key
+000263f0: 2069 6e20 656e 756d 6572 6174 6528 2761   in enumerate('a
+00026400: 6263 6465 6667 6869 6a6b 6c6d 6e6f 2729  bcdefghijklmno')
+00026410: 7d0d 0a20 2020 2020 2020 202e 2e2e 2029  }..        ... )
+00026420: 0d0a 0d0a 2020 2020 2020 2020 4465 6661  ....        Defa
+00026430: 756c 7420 6265 6861 7669 6f72 3a0d 0a0d  ult behavior:...
+00026440: 0a20 2020 2020 2020 203e 3e3e 2064 730d  .        >>> ds.
+00026450: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00026460: 6120 2020 2020 2020 6220 2020 2020 2020  a       b       
+00026470: 6320 2020 2020 2064 2020 2020 2020 2065  c      d       e
+00026480: 2020 2020 2020 2066 2020 2020 2020 6720         f      g 
+00026490: 2020 2e2e 2e20 2020 2020 206a 2020 2020    ...      j    
+000264a0: 2020 206b 2020 2020 2020 206c 2020 2020     k       l    
+000264b0: 2020 6d20 2020 2020 2020 6e20 2020 2020    m       n     
+000264c0: 2020 6f0d 0a20 2020 2020 2020 202d 2020    o..        -  
+000264d0: 202d 2d2d 2d20 2020 2d2d 2d2d 2d20 2020   ----   -----   
+000264e0: 2d2d 2d2d 2d20 2020 2d2d 2d2d 2020 202d  -----   ----   -
+000264f0: 2d2d 2d2d 2020 202d 2d2d 2d2d 2020 202d  ----   -----   -
+00026500: 2d2d 2d20 2020 2d2d 2d20 2020 2d2d 2d2d  ---   ---   ----
+00026510: 2020 202d 2d2d 2d2d 2020 202d 2d2d 2d2d     -----   -----
+00026520: 2020 202d 2d2d 2d20 2020 2d2d 2d2d 2d20     ----   ----- 
+00026530: 2020 2d2d 2d2d 2d0d 0a20 2020 2020 2020    -----..       
+00026540: 2030 2020 2054 7275 6520 2020 4661 6c73   0   True   Fals
+00026550: 6520 2020 4661 6c73 6520 2020 5472 7565  e   False   True
+00026560: 2020 2046 616c 7365 2020 2046 616c 7365     False   False
+00026570: 2020 2054 7275 6520 2020 2e2e 2e20 2020     True   ...   
+00026580: 5472 7565 2020 2046 616c 7365 2020 2046  True   False   F
+00026590: 616c 7365 2020 2054 7275 6520 2020 4661  alse   True   Fa
+000265a0: 6c73 6520 2020 4661 6c73 650d 0a20 2020  lse   False..   
+000265b0: 2020 2020 2031 2020 2054 7275 6520 2020       1   True   
+000265c0: 4661 6c73 6520 2020 4661 6c73 6520 2020  False   False   
+000265d0: 5472 7565 2020 2046 616c 7365 2020 2046  True   False   F
+000265e0: 616c 7365 2020 2054 7275 6520 2020 2e2e  alse   True   ..
+000265f0: 2e20 2020 5472 7565 2020 2046 616c 7365  .   True   False
+00026600: 2020 2046 616c 7365 2020 2054 7275 6520     False   True 
+00026610: 2020 4661 6c73 6520 2020 4661 6c73 650d    False   False.
+00026620: 0a20 2020 2020 2020 2032 2020 2054 7275  .        2   Tru
+00026630: 6520 2020 2054 7275 6520 2020 2054 7275  e    True    Tru
+00026640: 6520 2020 5472 7565 2020 2020 5472 7565  e   True    True
+00026650: 2020 2020 5472 7565 2020 2054 7275 6520      True   True 
+00026660: 2020 2e2e 2e20 2020 5472 7565 2020 2020    ...   True    
+00026670: 5472 7565 2020 2020 5472 7565 2020 2054  True    True   T
+00026680: 7275 6520 2020 2054 7275 6520 2020 2054  rue    True    T
+00026690: 7275 650d 0a20 2020 2020 2020 2033 2020  rue..        3  
+000266a0: 2054 7275 6520 2020 4661 6c73 6520 2020   True   False   
+000266b0: 4661 6c73 6520 2020 5472 7565 2020 2046  False   True   F
+000266c0: 616c 7365 2020 2046 616c 7365 2020 2054  alse   False   T
+000266d0: 7275 6520 2020 2e2e 2e20 2020 5472 7565  rue   ...   True
+000266e0: 2020 2046 616c 7365 2020 2046 616c 7365     False   False
+000266f0: 2020 2054 7275 6520 2020 4661 6c73 6520     True   False 
+00026700: 2020 4661 6c73 650d 0a0d 0a20 2020 2020    False....     
+00026710: 2020 2053 686f 7720 616c 6c20 726f 7773     Show all rows
+00026720: 2c20 7772 6170 7069 6e67 2074 6865 2074  , wrapping the t
+00026730: 6162 6c65 2061 7320 6e65 6564 6564 3a0d  able as needed:.
+00026740: 0a0d 0a20 2020 2020 2020 203e 3e3e 2064  ...        >>> d
+00026750: 732e 5f47 0d0a 2020 2020 2020 2020 2320  s._G..        # 
+00026760: 2020 2020 2061 2020 2020 2020 2062 2020       a       b  
+00026770: 2020 2020 2063 2020 2020 2020 6420 2020       c      d   
+00026780: 2020 2020 6520 2020 2020 2020 6620 2020      e       f   
+00026790: 2020 2067 2020 2020 2020 2068 2020 2020     g       h    
+000267a0: 2020 2069 2020 2020 2020 6a20 2020 2020     i      j     
+000267b0: 2020 6b20 2020 2020 2020 6c20 2020 2020    k       l     
+000267c0: 206d 0d0a 2020 2020 2020 2020 2d20 2020   m..        -   
+000267d0: 2d2d 2d2d 2020 202d 2d2d 2d2d 2020 202d  ----   -----   -
+000267e0: 2d2d 2d2d 2020 202d 2d2d 2d20 2020 2d2d  ----   ----   --
+000267f0: 2d2d 2d20 2020 2d2d 2d2d 2d20 2020 2d2d  ---   -----   --
+00026800: 2d2d 2020 202d 2d2d 2d2d 2020 202d 2d2d  --   -----   ---
+00026810: 2d2d 2020 202d 2d2d 2d20 2020 2d2d 2d2d  --   ----   ----
+00026820: 2d20 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d  -   -----   ----
+00026830: 0d0a 2020 2020 2020 2020 3020 2020 5472  ..        0   Tr
+00026840: 7565 2020 2046 616c 7365 2020 2046 616c  ue   False   Fal
+00026850: 7365 2020 2054 7275 6520 2020 4661 6c73  se   True   Fals
+00026860: 6520 2020 4661 6c73 6520 2020 5472 7565  e   False   True
+00026870: 2020 2046 616c 7365 2020 2046 616c 7365     False   False
+00026880: 2020 2054 7275 6520 2020 4661 6c73 6520     True   False 
+00026890: 2020 4661 6c73 6520 2020 5472 7565 0d0a    False   True..
+000268a0: 2020 2020 2020 2020 3120 2020 5472 7565          1   True
+000268b0: 2020 2046 616c 7365 2020 2046 616c 7365     False   False
+000268c0: 2020 2054 7275 6520 2020 4661 6c73 6520     True   False 
+000268d0: 2020 4661 6c73 6520 2020 5472 7565 2020    False   True  
+000268e0: 2046 616c 7365 2020 2046 616c 7365 2020   False   False  
+000268f0: 2054 7275 6520 2020 4661 6c73 6520 2020   True   False   
+00026900: 4661 6c73 6520 2020 5472 7565 0d0a 2020  False   True..  
+00026910: 2020 2020 2020 3220 2020 5472 7565 2020        2   True  
+00026920: 2020 5472 7565 2020 2020 5472 7565 2020    True    True  
+00026930: 2054 7275 6520 2020 2054 7275 6520 2020   True    True   
+00026940: 2054 7275 6520 2020 5472 7565 2020 2020   True   True    
+00026950: 5472 7565 2020 2020 5472 7565 2020 2054  True    True   T
+00026960: 7275 6520 2020 2054 7275 6520 2020 2054  rue    True    T
+00026970: 7275 6520 2020 5472 7565 0d0a 2020 2020  rue   True..    
+00026980: 2020 2020 3320 2020 5472 7565 2020 2046      3   True   F
+00026990: 616c 7365 2020 2046 616c 7365 2020 2054  alse   False   T
+000269a0: 7275 6520 2020 4661 6c73 6520 2020 4661  rue   False   Fa
+000269b0: 6c73 6520 2020 5472 7565 2020 2046 616c  lse   True   Fal
+000269c0: 7365 2020 2046 616c 7365 2020 2054 7275  se   False   Tru
+000269d0: 6520 2020 4661 6c73 6520 2020 4661 6c73  e   False   Fals
+000269e0: 6520 2020 5472 7565 0d0a 2020 2020 2020  e   True..      
+000269f0: 2020 3c42 4c41 4e4b 4c49 4e45 3e0d 0a20    <BLANKLINE>.. 
+00026a00: 2020 2020 2020 2023 2020 2020 2020 206e         #       n
+00026a10: 2020 2020 2020 206f 0d0a 2020 2020 2020         o..      
+00026a20: 2020 2d20 2020 2d2d 2d2d 2d20 2020 2d2d    -   -----   --
+00026a30: 2d2d 2d0d 0a20 2020 2020 2020 2030 2020  ---..        0  
+00026a40: 2046 616c 7365 2020 2046 616c 7365 0d0a   False   False..
+00026a50: 2020 2020 2020 2020 3120 2020 4661 6c73          1   Fals
+00026a60: 6520 2020 4661 6c73 650d 0a20 2020 2020  e   False..     
+00026a70: 2020 2032 2020 2020 5472 7565 2020 2020     2    True    
+00026a80: 5472 7565 0d0a 2020 2020 2020 2020 3320  True..        3 
+00026a90: 2020 4661 6c73 6520 2020 4661 6c73 650d    False   False.
+00026aa0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00026ab0: 2020 2020 2020 7361 7665 6d6f 6465 203d        savemode =
+00026ac0: 2028 4469 7370 6c61 7954 6162 6c65 2e6f   (DisplayTable.o
+00026ad0: 7074 696f 6e73 2e43 4f4c 5f41 4c4c 2c20  ptions.COL_ALL, 
+00026ae0: 4469 7370 6c61 7954 6162 6c65 2e6f 7074  DisplayTable.opt
+00026af0: 696f 6e73 2e43 4f4e 534f 4c45 5f58 5f48  ions.CONSOLE_X_H
+00026b00: 544d 4c29 0d0a 2020 2020 2020 2020 4469  TML)..        Di
+00026b10: 7370 6c61 7954 6162 6c65 2e6f 7074 696f  splayTable.optio
+00026b20: 6e73 2e43 4f4c 5f41 4c4c 203d 2054 7275  ns.COL_ALL = Tru
+00026b30: 650d 0a20 2020 2020 2020 2044 6973 706c  e..        Displ
+00026b40: 6179 5461 626c 652e 6f70 7469 6f6e 732e  ayTable.options.
+00026b50: 434f 4e53 4f4c 455f 585f 4854 4d4c 203d  CONSOLE_X_HTML =
+00026b60: 2031 3530 0d0a 2020 2020 2020 2020 7072   150..        pr
+00026b70: 696e 7428 7365 6c66 290d 0a20 2020 2020  int(self)..     
+00026b80: 2020 2044 6973 706c 6179 5461 626c 652e     DisplayTable.
+00026b90: 6f70 7469 6f6e 732e 434f 4c5f 414c 4c20  options.COL_ALL 
+00026ba0: 3d20 7361 7665 6d6f 6465 5b30 5d0d 0a20  = savemode[0].. 
+00026bb0: 2020 2020 2020 2044 6973 706c 6179 5461         DisplayTa
+00026bc0: 626c 652e 6f70 7469 6f6e 732e 434f 4e53  ble.options.CONS
+00026bd0: 4f4c 455f 585f 4854 4d4c 203d 2073 6176  OLE_X_HTML = sav
+00026be0: 656d 6f64 655b 315d 0d0a 2020 2020 2020  emode[1]..      
+00026bf0: 2020 7265 7475 726e 204e 6f6e 650d 0a0d    return None...
+00026c00: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+00026c10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00026c20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00026c30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00026c40: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-00026c50: 4070 726f 7065 7274 790d 0a20 2020 2064  @property..    d
-00026c60: 6566 205f 4128 7365 6c66 293a 0d0a 2020  ef _A(self):..  
-00026c70: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00026c80: 2020 2044 6973 706c 6179 2061 6c6c 2063     Display all c
-00026c90: 6f6c 756d 6e73 2c20 616c 6c20 726f 7773  olumns, all rows
-00026ca0: 2028 7570 2074 6f20 3130 2c30 3030 292c   (up to 10,000),
-00026cb0: 2061 6e64 206c 6f6e 6720 7374 7269 6e67   and long string
-00026cc0: 7320 6f66 2061 0d0a 2020 2020 2020 2020  s of a..        
-00026cd0: 602e 4461 7461 7365 7460 206f 7220 6053  `.Dataset` or `S
-00026ce0: 7472 7563 7460 2e0d 0a0d 0a20 2020 2020  truct`.....     
-00026cf0: 2020 2057 6974 686f 7574 2074 6869 7320     Without this 
-00026d00: 7072 6f70 6572 7479 2c20 636f 6c75 6d6e  property, column
-00026d10: 7320 6172 6520 656c 6964 6564 2077 6865  s are elided whe
-00026d20: 6e20 7468 6520 6d61 7869 6d75 6d20 6469  n the maximum di
-00026d30: 7370 6c61 7920 7769 6474 680d 0a20 2020  splay width..   
-00026d40: 2020 2020 2069 7320 7265 6163 6865 642c       is reached,
-00026d50: 2072 6f77 7320 6172 6520 656c 6964 6564   rows are elided
-00026d60: 2077 6865 6e20 7468 6572 6520 6172 6520   when there are 
-00026d70: 6d6f 7265 2074 6865 6e20 3330 2074 6f20  more then 30 to 
-00026d80: 6469 7370 6c61 792c 0d0a 2020 2020 2020  display,..      
-00026d90: 2020 616e 6420 7374 7269 6e67 7320 6172    and strings ar
-00026da0: 6520 7472 756e 6361 7465 6420 6166 7465  e truncated afte
-00026db0: 7220 3135 2063 6861 7261 6374 6572 732e  r 15 characters.
-00026dc0: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
-00026dd0: 726e 730d 0a20 2020 2020 2020 202d 2d2d  rns..        ---
-00026de0: 2d2d 2d2d 0d0a 2020 2020 2020 2020 4469  ----..        Di
-00026df0: 7370 6c61 7953 7472 696e 670d 0a20 2020  splayString..   
-00026e00: 2020 2020 2020 2020 2041 2077 7261 7070           A wrapp
-00026e10: 6572 2066 6f72 2064 6973 706c 6179 206f  er for display o
-00026e20: 7065 7261 7469 6f6e 7320 7468 6174 2064  perations that d
-00026e30: 6f6e 2774 2072 6574 7572 6e20 6120 602e  on't return a `.
-00026e40: 4461 7461 7365 7460 206f 7220 6053 7472  Dataset` or `Str
-00026e50: 7563 7460 2e0d 0a0d 0a20 2020 2020 2020  uct`.....       
-00026e60: 2053 6565 2041 6c73 6f0d 0a20 2020 2020   See Also..     
-00026e70: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-00026e80: 2020 2020 2053 7472 7563 742e 5f56 203a       Struct._V :
-00026e90: 2044 6973 706c 6179 2061 6c6c 2072 6f77   Display all row
-00026ea0: 7320 6f66 2061 2060 2e44 6174 6173 6574  s of a `.Dataset
-00026eb0: 6020 6f72 2060 5374 7275 6374 602e 0d0a  ` or `Struct`...
-00026ec0: 2020 2020 2020 2020 5374 7275 6374 2e5f          Struct._
-00026ed0: 4820 3a20 4469 7370 6c61 7920 616c 6c20  H : Display all 
-00026ee0: 636f 6c75 6d6e 7320 616e 6420 6c6f 6e67  columns and long
-00026ef0: 2073 7472 696e 6773 206f 6620 6120 602e   strings of a `.
-00026f00: 4461 7461 7365 7460 206f 7220 6053 7472  Dataset` or `Str
-00026f10: 7563 7460 2e0d 0a20 2020 2020 2020 2053  uct`...        S
-00026f20: 7472 7563 742e 5f47 203a 2044 6973 706c  truct._G : Displ
-00026f30: 6179 2061 6c6c 2063 6f6c 756d 6e73 206f  ay all columns o
-00026f40: 6620 6120 602e 4461 7461 7365 7460 206f  f a `.Dataset` o
-00026f50: 7220 6053 7472 7563 7460 2c20 7772 6170  r `Struct`, wrap
-00026f60: 7069 6e67 2074 6865 2074 6162 6c65 2061  ping the table a
-00026f70: 7320 6e65 6564 6564 2e0d 0a20 2020 2020  s needed...     
-00026f80: 2020 2053 7472 7563 742e 5f54 203a 2044     Struct._T : D
-00026f90: 6973 706c 6179 2061 2074 7261 6e73 706f  isplay a transpo
-00026fa0: 7365 6420 7669 6577 206f 6620 6120 602e  sed view of a `.
-00026fb0: 4461 7461 7365 7460 206f 7220 6053 7472  Dataset` or `Str
-00026fc0: 7563 7460 2e0d 0a0d 0a20 2020 2020 2020  uct`.....       
-00026fd0: 2045 7861 6d70 6c65 730d 0a20 2020 2020   Examples..     
-00026fe0: 2020 202d 2d2d 2d2d 2d2d 2d0d 0a20 2020     --------..   
-00026ff0: 2020 2020 203e 3e3e 2064 7320 3d20 7274       >>> ds = rt
-00027000: 2e44 6174 6173 6574 287b 2763 6f6c 5f27  .Dataset({'col_'
-00027010: 2b73 7472 2869 293a 7274 2e61 7261 6e67  +str(i):rt.arang
-00027020: 6528 3331 2920 666f 7220 6920 696e 2072  e(31) for i in r
-00027030: 616e 6765 2831 3229 7d29 0d0a 2020 2020  ange(12)})..    
-00027040: 2020 2020 3e3e 3e20 6473 5b30 5d20 3d20      >>> ds[0] = 
-00027050: 276c 6f6e 675f 7374 7269 6e67 5f6c 6f6e  'long_string_lon
-00027060: 675f 7374 7269 6e67 270d 0a0d 0a20 2020  g_string'....   
-00027070: 2020 2020 2042 7920 6465 6661 756c 742c       By default,
-00027080: 2063 6f6c 756d 6e73 2061 7265 2065 6c69   columns are eli
-00027090: 6465 6420 7768 656e 2074 6865 206d 6178  ded when the max
-000270a0: 696d 756d 2064 6973 706c 6179 2077 6964  imum display wid
-000270b0: 7468 2069 730d 0a20 2020 2020 2020 2072  th is..        r
-000270c0: 6561 6368 6564 2c20 726f 7773 2061 7265  eached, rows are
-000270d0: 2065 6c69 6465 6420 7768 656e 2074 6865   elided when the
-000270e0: 7265 2061 7265 206d 6f72 6520 7468 656e  re are more then
-000270f0: 2033 3020 746f 2064 6973 706c 6179 2c20   30 to display, 
-00027100: 616e 640d 0a20 2020 2020 2020 2073 7472  and..        str
-00027110: 696e 6773 2061 7265 2074 7275 6e63 6174  ings are truncat
-00027120: 6564 2061 6674 6572 2031 3520 6368 6172  ed after 15 char
-00027130: 6163 7465 7273 3a0d 0a0d 0a20 2020 2020  acters:....     
-00027140: 2020 203e 3e3e 2064 730d 0a20 2020 2020     >>> ds..     
-00027150: 2020 2020 2023 2020 2063 6f6c 5f30 2020       #   col_0  
-00027160: 2020 2020 2020 2020 2020 2063 6f6c 5f31             col_1
-00027170: 2020 2063 6f6c 5f32 2020 2063 6f6c 5f33     col_2   col_3
-00027180: 2020 2063 6f6c 5f34 2020 2063 6f6c 5f35     col_4   col_5
-00027190: 2020 202e 2e2e 2020 2063 6f6c 5f37 2020     ...   col_7  
-000271a0: 2063 6f6c 5f38 2020 2063 6f6c 5f39 2020   col_8   col_9  
-000271b0: 2063 6f6c 5f31 3020 2020 636f 6c5f 3131   col_10   col_11
-000271c0: 0d0a 2020 2020 2020 2020 2d2d 2d20 2020  ..        ---   
-000271d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d20  --------------- 
-000271e0: 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d20    -----   ----- 
-000271f0: 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d20    -----   ----- 
-00027200: 2020 2d2d 2d2d 2d20 2020 2d2d 2d20 2020    -----   ---   
-00027210: 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d20 2020  -----   -----   
-00027220: 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d2d 2020  -----   ------  
-00027230: 202d 2d2d 2d2d 2d0d 0a20 2020 2020 2020   ------..       
-00027240: 2020 2030 2020 206c 6f6e 675f 7374 7269     0   long_stri
-00027250: 6e67 5f6c 6f6e 2020 2020 2020 2030 2020  ng_lon       0  
-00027260: 2020 2020 2030 2020 2020 2020 2030 2020       0       0  
-00027270: 2020 2020 2030 2020 2020 2020 2030 2020       0       0  
-00027280: 202e 2e2e 2020 2020 2020 2030 2020 2020   ...       0    
-00027290: 2020 2030 2020 2020 2020 2030 2020 2020     0       0    
-000272a0: 2020 2020 3020 2020 2020 2020 2030 0d0a      0        0..
-000272b0: 2020 2020 2020 2020 2020 3120 2020 6c6f            1   lo
-000272c0: 6e67 5f73 7472 696e 675f 6c6f 6e20 2020  ng_string_lon   
-000272d0: 2020 2020 3120 2020 2020 2020 3120 2020      1       1   
-000272e0: 2020 2020 3120 2020 2020 2020 3120 2020      1       1   
-000272f0: 2020 2020 3120 2020 2e2e 2e20 2020 2020      1   ...     
-00027300: 2020 3120 2020 2020 2020 3120 2020 2020    1       1     
-00027310: 2020 3120 2020 2020 2020 2031 2020 2020    1        1    
-00027320: 2020 2020 310d 0a20 2020 2020 2020 2020      1..         
-00027330: 2032 2020 206c 6f6e 675f 7374 7269 6e67   2   long_string
-00027340: 5f6c 6f6e 2020 2020 2020 2032 2020 2020  _lon       2    
-00027350: 2020 2032 2020 2020 2020 2032 2020 2020     2       2    
-00027360: 2020 2032 2020 2020 2020 2032 2020 202e     2       2   .
-00027370: 2e2e 2020 2020 2020 2032 2020 2020 2020  ..       2      
-00027380: 2032 2020 2020 2020 2032 2020 2020 2020   2       2      
-00027390: 2020 3220 2020 2020 2020 2032 0d0a 2020    2        2..  
-000273a0: 2020 2020 2020 2020 3320 2020 6c6f 6e67          3   long
-000273b0: 5f73 7472 696e 675f 6c6f 6e20 2020 2020  _string_lon     
-000273c0: 2020 3320 2020 2020 2020 3320 2020 2020    3       3     
-000273d0: 2020 3320 2020 2020 2020 3320 2020 2020    3       3     
-000273e0: 2020 3320 2020 2e2e 2e20 2020 2020 2020    3   ...       
-000273f0: 3320 2020 2020 2020 3320 2020 2020 2020  3       3       
-00027400: 3320 2020 2020 2020 2033 2020 2020 2020  3        3      
-00027410: 2020 330d 0a20 2020 2020 2020 2020 2034    3..          4
-00027420: 2020 206c 6f6e 675f 7374 7269 6e67 5f6c     long_string_l
-00027430: 6f6e 2020 2020 2020 2034 2020 2020 2020  on       4      
-00027440: 2034 2020 2020 2020 2034 2020 2020 2020   4       4      
-00027450: 2034 2020 2020 2020 2034 2020 202e 2e2e   4       4   ...
-00027460: 2020 2020 2020 2034 2020 2020 2020 2034         4       4
-00027470: 2020 2020 2020 2034 2020 2020 2020 2020         4        
-00027480: 3420 2020 2020 2020 2034 0d0a 2020 2020  4        4..    
-00027490: 2020 2020 2020 3520 2020 6c6f 6e67 5f73        5   long_s
-000274a0: 7472 696e 675f 6c6f 6e20 2020 2020 2020  tring_lon       
-000274b0: 3520 2020 2020 2020 3520 2020 2020 2020  5       5       
-000274c0: 3520 2020 2020 2020 3520 2020 2020 2020  5       5       
-000274d0: 3520 2020 2e2e 2e20 2020 2020 2020 3520  5   ...       5 
-000274e0: 2020 2020 2020 3520 2020 2020 2020 3520        5       5 
-000274f0: 2020 2020 2020 2035 2020 2020 2020 2020         5        
-00027500: 350d 0a20 2020 2020 2020 2020 2036 2020  5..          6  
-00027510: 206c 6f6e 675f 7374 7269 6e67 5f6c 6f6e   long_string_lon
-00027520: 2020 2020 2020 2036 2020 2020 2020 2036         6       6
-00027530: 2020 2020 2020 2036 2020 2020 2020 2036         6       6
-00027540: 2020 2020 2020 2036 2020 202e 2e2e 2020         6   ...  
-00027550: 2020 2020 2036 2020 2020 2020 2036 2020       6       6  
-00027560: 2020 2020 2036 2020 2020 2020 2020 3620       6        6 
-00027570: 2020 2020 2020 2036 0d0a 2020 2020 2020         6..      
-00027580: 2020 2020 3720 2020 6c6f 6e67 5f73 7472      7   long_str
-00027590: 696e 675f 6c6f 6e20 2020 2020 2020 3720  ing_lon       7 
-000275a0: 2020 2020 2020 3720 2020 2020 2020 3720        7       7 
-000275b0: 2020 2020 2020 3720 2020 2020 2020 3720        7       7 
-000275c0: 2020 2e2e 2e20 2020 2020 2020 3720 2020    ...       7   
-000275d0: 2020 2020 3720 2020 2020 2020 3720 2020      7       7   
-000275e0: 2020 2020 2037 2020 2020 2020 2020 370d       7        7.
-000275f0: 0a20 2020 2020 2020 2020 2038 2020 206c  .          8   l
-00027600: 6f6e 675f 7374 7269 6e67 5f6c 6f6e 2020  ong_string_lon  
-00027610: 2020 2020 2038 2020 2020 2020 2038 2020       8       8  
-00027620: 2020 2020 2038 2020 2020 2020 2038 2020       8       8  
-00027630: 2020 2020 2038 2020 202e 2e2e 2020 2020       8   ...    
-00027640: 2020 2038 2020 2020 2020 2038 2020 2020     8       8    
-00027650: 2020 2038 2020 2020 2020 2020 3820 2020     8        8   
-00027660: 2020 2020 2038 0d0a 2020 2020 2020 2020       8..        
-00027670: 2020 3920 2020 6c6f 6e67 5f73 7472 696e    9   long_strin
-00027680: 675f 6c6f 6e20 2020 2020 2020 3920 2020  g_lon       9   
-00027690: 2020 2020 3920 2020 2020 2020 3920 2020      9       9   
-000276a0: 2020 2020 3920 2020 2020 2020 3920 2020      9       9   
-000276b0: 2e2e 2e20 2020 2020 2020 3920 2020 2020  ...       9     
-000276c0: 2020 3920 2020 2020 2020 3920 2020 2020    9       9     
-000276d0: 2020 2039 2020 2020 2020 2020 390d 0a20     9        9.. 
-000276e0: 2020 2020 2020 2020 3130 2020 206c 6f6e          10   lon
-000276f0: 675f 7374 7269 6e67 5f6c 6f6e 2020 2020  g_string_lon    
-00027700: 2020 3130 2020 2020 2020 3130 2020 2020    10      10    
-00027710: 2020 3130 2020 2020 2020 3130 2020 2020    10      10    
-00027720: 2020 3130 2020 202e 2e2e 2020 2020 2020    10   ...      
-00027730: 3130 2020 2020 2020 3130 2020 2020 2020  10      10      
-00027740: 3130 2020 2020 2020 2031 3020 2020 2020  10       10     
-00027750: 2020 3130 0d0a 2020 2020 2020 2020 2031    10..         1
-00027760: 3120 2020 6c6f 6e67 5f73 7472 696e 675f  1   long_string_
-00027770: 6c6f 6e20 2020 2020 2031 3120 2020 2020  lon      11     
-00027780: 2031 3120 2020 2020 2031 3120 2020 2020   11      11     
-00027790: 2031 3120 2020 2020 2031 3120 2020 2e2e   11      11   ..
-000277a0: 2e20 2020 2020 2031 3120 2020 2020 2031  .      11      1
-000277b0: 3120 2020 2020 2031 3120 2020 2020 2020  1      11       
-000277c0: 3131 2020 2020 2020 2031 310d 0a20 2020  11       11..   
-000277d0: 2020 2020 2020 3132 2020 206c 6f6e 675f        12   long_
-000277e0: 7374 7269 6e67 5f6c 6f6e 2020 2020 2020  string_lon      
-000277f0: 3132 2020 2020 2020 3132 2020 2020 2020  12      12      
-00027800: 3132 2020 2020 2020 3132 2020 2020 2020  12      12      
-00027810: 3132 2020 202e 2e2e 2020 2020 2020 3132  12   ...      12
-00027820: 2020 2020 2020 3132 2020 2020 2020 3132        12      12
-00027830: 2020 2020 2020 2031 3220 2020 2020 2020         12       
-00027840: 3132 0d0a 2020 2020 2020 2020 2031 3320  12..         13 
-00027850: 2020 6c6f 6e67 5f73 7472 696e 675f 6c6f    long_string_lo
-00027860: 6e20 2020 2020 2031 3320 2020 2020 2031  n      13      1
-00027870: 3320 2020 2020 2031 3320 2020 2020 2031  3      13      1
-00027880: 3320 2020 2020 2031 3320 2020 2e2e 2e20  3      13   ... 
-00027890: 2020 2020 2031 3320 2020 2020 2031 3320       13      13 
-000278a0: 2020 2020 2031 3320 2020 2020 2020 3133       13       13
-000278b0: 2020 2020 2020 2031 330d 0a20 2020 2020         13..     
-000278c0: 2020 2020 3134 2020 206c 6f6e 675f 7374      14   long_st
-000278d0: 7269 6e67 5f6c 6f6e 2020 2020 2020 3134  ring_lon      14
-000278e0: 2020 2020 2020 3134 2020 2020 2020 3134        14      14
-000278f0: 2020 2020 2020 3134 2020 2020 2020 3134        14      14
-00027900: 2020 202e 2e2e 2020 2020 2020 3134 2020     ...      14  
-00027910: 2020 2020 3134 2020 2020 2020 3134 2020      14      14  
-00027920: 2020 2020 2031 3420 2020 2020 2020 3134       14       14
-00027930: 0d0a 2020 2020 2020 2020 2e2e 2e20 2020  ..        ...   
-00027940: 2e2e 2e20 2020 2020 2020 2020 2020 2020  ...             
-00027950: 2020 2020 2e2e 2e20 2020 2020 2e2e 2e20      ...     ... 
-00027960: 2020 2020 2e2e 2e20 2020 2020 2e2e 2e20      ...     ... 
-00027970: 2020 2020 2e2e 2e20 2020 2e2e 2e20 2020      ...   ...   
-00027980: 2020 2e2e 2e20 2020 2020 2e2e 2e20 2020    ...     ...   
-00027990: 2020 2e2e 2e20 2020 2020 202e 2e2e 2020    ...      ...  
-000279a0: 2020 2020 2e2e 2e0d 0a20 2020 2020 2020      .....       
-000279b0: 2020 3136 2020 206c 6f6e 675f 7374 7269    16   long_stri
-000279c0: 6e67 5f6c 6f6e 2020 2020 2020 3136 2020  ng_lon      16  
-000279d0: 2020 2020 3136 2020 2020 2020 3136 2020      16      16  
-000279e0: 2020 2020 3136 2020 2020 2020 3136 2020      16      16  
-000279f0: 202e 2e2e 2020 2020 2020 3136 2020 2020   ...      16    
-00027a00: 2020 3136 2020 2020 2020 3136 2020 2020    16      16    
-00027a10: 2020 2031 3620 2020 2020 2020 3136 0d0a     16       16..
-00027a20: 2020 2020 2020 2020 2031 3720 2020 6c6f           17   lo
-00027a30: 6e67 5f73 7472 696e 675f 6c6f 6e20 2020  ng_string_lon   
-00027a40: 2020 2031 3720 2020 2020 2031 3720 2020     17      17   
-00027a50: 2020 2031 3720 2020 2020 2031 3720 2020     17      17   
-00027a60: 2020 2031 3720 2020 2e2e 2e20 2020 2020     17   ...     
-00027a70: 2031 3720 2020 2020 2031 3720 2020 2020   17      17     
-00027a80: 2031 3720 2020 2020 2020 3137 2020 2020   17       17    
-00027a90: 2020 2031 370d 0a20 2020 2020 2020 2020     17..         
-00027aa0: 3138 2020 206c 6f6e 675f 7374 7269 6e67  18   long_string
-00027ab0: 5f6c 6f6e 2020 2020 2020 3138 2020 2020  _lon      18    
-00027ac0: 2020 3138 2020 2020 2020 3138 2020 2020    18      18    
-00027ad0: 2020 3138 2020 2020 2020 3138 2020 202e    18      18   .
-00027ae0: 2e2e 2020 2020 2020 3138 2020 2020 2020  ..      18      
-00027af0: 3138 2020 2020 2020 3138 2020 2020 2020  18      18      
-00027b00: 2031 3820 2020 2020 2020 3138 0d0a 2020   18       18..  
-00027b10: 2020 2020 2020 2031 3920 2020 6c6f 6e67         19   long
-00027b20: 5f73 7472 696e 675f 6c6f 6e20 2020 2020  _string_lon     
-00027b30: 2031 3920 2020 2020 2031 3920 2020 2020   19      19     
-00027b40: 2031 3920 2020 2020 2031 3920 2020 2020   19      19     
-00027b50: 2031 3920 2020 2e2e 2e20 2020 2020 2031   19   ...      1
-00027b60: 3920 2020 2020 2031 3920 2020 2020 2031  9      19      1
-00027b70: 3920 2020 2020 2020 3139 2020 2020 2020  9       19      
-00027b80: 2031 390d 0a20 2020 2020 2020 2020 3230   19..         20
-00027b90: 2020 206c 6f6e 675f 7374 7269 6e67 5f6c     long_string_l
-00027ba0: 6f6e 2020 2020 2020 3230 2020 2020 2020  on      20      
-00027bb0: 3230 2020 2020 2020 3230 2020 2020 2020  20      20      
-00027bc0: 3230 2020 2020 2020 3230 2020 202e 2e2e  20      20   ...
-00027bd0: 2020 2020 2020 3230 2020 2020 2020 3230        20      20
-00027be0: 2020 2020 2020 3230 2020 2020 2020 2032        20       2
-00027bf0: 3020 2020 2020 2020 3230 0d0a 2020 2020  0       20..    
-00027c00: 2020 2020 2032 3120 2020 6c6f 6e67 5f73       21   long_s
-00027c10: 7472 696e 675f 6c6f 6e20 2020 2020 2032  tring_lon      2
-00027c20: 3120 2020 2020 2032 3120 2020 2020 2032  1      21      2
-00027c30: 3120 2020 2020 2032 3120 2020 2020 2032  1      21      2
-00027c40: 3120 2020 2e2e 2e20 2020 2020 2032 3120  1   ...      21 
-00027c50: 2020 2020 2032 3120 2020 2020 2032 3120       21      21 
-00027c60: 2020 2020 2020 3231 2020 2020 2020 2032        21       2
-00027c70: 310d 0a20 2020 2020 2020 2020 3232 2020  1..         22  
-00027c80: 206c 6f6e 675f 7374 7269 6e67 5f6c 6f6e   long_string_lon
-00027c90: 2020 2020 2020 3232 2020 2020 2020 3232        22      22
-00027ca0: 2020 2020 2020 3232 2020 2020 2020 3232        22      22
-00027cb0: 2020 2020 2020 3232 2020 202e 2e2e 2020        22   ...  
-00027cc0: 2020 2020 3232 2020 2020 2020 3232 2020      22      22  
-00027cd0: 2020 2020 3232 2020 2020 2020 2032 3220      22       22 
-00027ce0: 2020 2020 2020 3232 0d0a 2020 2020 2020        22..      
-00027cf0: 2020 2032 3320 2020 6c6f 6e67 5f73 7472     23   long_str
-00027d00: 696e 675f 6c6f 6e20 2020 2020 2032 3320  ing_lon      23 
-00027d10: 2020 2020 2032 3320 2020 2020 2032 3320       23      23 
-00027d20: 2020 2020 2032 3320 2020 2020 2032 3320       23      23 
-00027d30: 2020 2e2e 2e20 2020 2020 2032 3320 2020    ...      23   
-00027d40: 2020 2032 3320 2020 2020 2032 3320 2020     23      23   
-00027d50: 2020 2020 3233 2020 2020 2020 2032 330d      23       23.
-00027d60: 0a20 2020 2020 2020 2020 3234 2020 206c  .         24   l
-00027d70: 6f6e 675f 7374 7269 6e67 5f6c 6f6e 2020  ong_string_lon  
-00027d80: 2020 2020 3234 2020 2020 2020 3234 2020      24      24  
-00027d90: 2020 2020 3234 2020 2020 2020 3234 2020      24      24  
-00027da0: 2020 2020 3234 2020 202e 2e2e 2020 2020      24   ...    
-00027db0: 2020 3234 2020 2020 2020 3234 2020 2020    24      24    
-00027dc0: 2020 3234 2020 2020 2020 2032 3420 2020    24       24   
-00027dd0: 2020 2020 3234 0d0a 2020 2020 2020 2020      24..        
-00027de0: 2032 3520 2020 6c6f 6e67 5f73 7472 696e   25   long_strin
-00027df0: 675f 6c6f 6e20 2020 2020 2032 3520 2020  g_lon      25   
-00027e00: 2020 2032 3520 2020 2020 2032 3520 2020     25      25   
-00027e10: 2020 2032 3520 2020 2020 2032 3520 2020     25      25   
-00027e20: 2e2e 2e20 2020 2020 2032 3520 2020 2020  ...      25     
-00027e30: 2032 3520 2020 2020 2032 3520 2020 2020   25      25     
-00027e40: 2020 3235 2020 2020 2020 2032 350d 0a20    25       25.. 
-00027e50: 2020 2020 2020 2020 3236 2020 206c 6f6e          26   lon
-00027e60: 675f 7374 7269 6e67 5f6c 6f6e 2020 2020  g_string_lon    
-00027e70: 2020 3236 2020 2020 2020 3236 2020 2020    26      26    
-00027e80: 2020 3236 2020 2020 2020 3236 2020 2020    26      26    
-00027e90: 2020 3236 2020 202e 2e2e 2020 2020 2020    26   ...      
-00027ea0: 3236 2020 2020 2020 3236 2020 2020 2020  26      26      
-00027eb0: 3236 2020 2020 2020 2032 3620 2020 2020  26       26     
-00027ec0: 2020 3236 0d0a 2020 2020 2020 2020 2032    26..         2
-00027ed0: 3720 2020 6c6f 6e67 5f73 7472 696e 675f  7   long_string_
-00027ee0: 6c6f 6e20 2020 2020 2032 3720 2020 2020  lon      27     
-00027ef0: 2032 3720 2020 2020 2032 3720 2020 2020   27      27     
-00027f00: 2032 3720 2020 2020 2032 3720 2020 2e2e   27      27   ..
-00027f10: 2e20 2020 2020 2032 3720 2020 2020 2032  .      27      2
-00027f20: 3720 2020 2020 2032 3720 2020 2020 2020  7      27       
-00027f30: 3237 2020 2020 2020 2032 370d 0a20 2020  27       27..   
-00027f40: 2020 2020 2020 3238 2020 206c 6f6e 675f        28   long_
-00027f50: 7374 7269 6e67 5f6c 6f6e 2020 2020 2020  string_lon      
-00027f60: 3238 2020 2020 2020 3238 2020 2020 2020  28      28      
-00027f70: 3238 2020 2020 2020 3238 2020 2020 2020  28      28      
-00027f80: 3238 2020 202e 2e2e 2020 2020 2020 3238  28   ...      28
-00027f90: 2020 2020 2020 3238 2020 2020 2020 3238        28      28
-00027fa0: 2020 2020 2020 2032 3820 2020 2020 2020         28       
-00027fb0: 3238 0d0a 2020 2020 2020 2020 2032 3920  28..         29 
-00027fc0: 2020 6c6f 6e67 5f73 7472 696e 675f 6c6f    long_string_lo
-00027fd0: 6e20 2020 2020 2032 3920 2020 2020 2032  n      29      2
-00027fe0: 3920 2020 2020 2032 3920 2020 2020 2032  9      29      2
-00027ff0: 3920 2020 2020 2032 3920 2020 2e2e 2e20  9      29   ... 
-00028000: 2020 2020 2032 3920 2020 2020 2032 3920       29      29 
-00028010: 2020 2020 2032 3920 2020 2020 2020 3239       29       29
-00028020: 2020 2020 2020 2032 390d 0a20 2020 2020         29..     
-00028030: 2020 2020 3330 2020 206c 6f6e 675f 7374      30   long_st
-00028040: 7269 6e67 5f6c 6f6e 2020 2020 2020 3330  ring_lon      30
-00028050: 2020 2020 2020 3330 2020 2020 2020 3330        30      30
-00028060: 2020 2020 2020 3330 2020 2020 2020 3330        30      30
-00028070: 2020 202e 2e2e 2020 2020 2020 3330 2020     ...      30  
-00028080: 2020 2020 3330 2020 2020 2020 3330 2020      30      30  
-00028090: 2020 2020 2033 3020 2020 2020 2020 3330       30       30
-000280a0: 0d0a 0d0a 2020 2020 2020 2020 4469 7370  ....        Disp
-000280b0: 6c61 7920 616c 6c20 636f 6c75 6d6e 732c  lay all columns,
-000280c0: 2072 6f77 732c 2061 6e64 206c 6f6e 6720   rows, and long 
-000280d0: 7374 7269 6e67 733a 0d0a 0d0a 2020 2020  strings:....    
-000280e0: 2020 2020 3e3e 3e20 6473 2e5f 410d 0a20      >>> ds._A.. 
-000280f0: 2020 2020 2020 2020 2023 2020 2063 6f6c           #   col
-00028100: 5f30 2020 2020 2020 2020 2020 2020 2020  _0              
-00028110: 2020 2020 2020 2063 6f6c 5f31 2020 2063         col_1   c
-00028120: 6f6c 5f32 2020 2063 6f6c 5f33 2020 2063  ol_2   col_3   c
-00028130: 6f6c 5f34 2020 2063 6f6c 5f35 2020 2063  ol_4   col_5   c
-00028140: 6f6c 5f36 2020 2063 6f6c 5f37 2020 2063  ol_6   col_7   c
-00028150: 6f6c 5f38 2020 2063 6f6c 5f39 2020 2063  ol_8   col_9   c
-00028160: 6f6c 5f31 3020 2020 636f 6c5f 3131 0d0a  ol_10   col_11..
-00028170: 2020 2020 2020 2020 2d2d 2d20 2020 2d2d          ---   --
-00028180: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00028190: 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d20 2020  -----   -----   
-000281a0: 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d20 2020  -----   -----   
-000281b0: 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d20 2020  -----   -----   
-000281c0: 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d20 2020  -----   -----   
-000281d0: 2d2d 2d2d 2d20 2020 2d2d 2d2d 2d20 2020  -----   -----   
-000281e0: 2d2d 2d2d 2d2d 2020 202d 2d2d 2d2d 2d0d  ------   ------.
-000281f0: 0a20 2020 2020 2020 2020 2030 2020 206c  .          0   l
-00028200: 6f6e 675f 7374 7269 6e67 5f6c 6f6e 675f  ong_string_long_
-00028210: 7374 7269 6e67 2020 2020 2020 2030 2020  string       0  
-00028220: 2020 2020 2030 2020 2020 2020 2030 2020       0       0  
-00028230: 2020 2020 2030 2020 2020 2020 2030 2020       0       0  
-00028240: 2020 2020 2030 2020 2020 2020 2030 2020       0       0  
-00028250: 2020 2020 2030 2020 2020 2020 2030 2020       0       0  
-00028260: 2020 2020 2020 3020 2020 2020 2020 2030        0        0
-00028270: 0d0a 2020 2020 2020 2020 2020 3120 2020  ..          1   
-00028280: 6c6f 6e67 5f73 7472 696e 675f 6c6f 6e67  long_string_long
-00028290: 5f73 7472 696e 6720 2020 2020 2020 3120  _string       1 
-000282a0: 2020 2020 2020 3120 2020 2020 2020 3120        1       1 
-000282b0: 2020 2020 2020 3120 2020 2020 2020 3120        1       1 
-000282c0: 2020 2020 2020 3120 2020 2020 2020 3120        1       1 
-000282d0: 2020 2020 2020 3120 2020 2020 2020 3120        1       1 
-000282e0: 2020 2020 2020 2031 2020 2020 2020 2020         1        
-000282f0: 310d 0a20 2020 2020 2020 2020 2032 2020  1..          2  
-00028300: 206c 6f6e 675f 7374 7269 6e67 5f6c 6f6e   long_string_lon
-00028310: 675f 7374 7269 6e67 2020 2020 2020 2032  g_string       2
-00028320: 2020 2020 2020 2032 2020 2020 2020 2032         2       2
-00028330: 2020 2020 2020 2032 2020 2020 2020 2032         2       2
-00028340: 2020 2020 2020 2032 2020 2020 2020 2032         2       2
-00028350: 2020 2020 2020 2032 2020 2020 2020 2032         2       2
-00028360: 2020 2020 2020 2020 3220 2020 2020 2020          2       
-00028370: 2032 0d0a 2020 2020 2020 2020 2020 3320   2..          3 
-00028380: 2020 6c6f 6e67 5f73 7472 696e 675f 6c6f    long_string_lo
-00028390: 6e67 5f73 7472 696e 6720 2020 2020 2020  ng_string       
-000283a0: 3320 2020 2020 2020 3320 2020 2020 2020  3       3       
-000283b0: 3320 2020 2020 2020 3320 2020 2020 2020  3       3       
-000283c0: 3320 2020 2020 2020 3320 2020 2020 2020  3       3       
-000283d0: 3320 2020 2020 2020 3320 2020 2020 2020  3       3       
-000283e0: 3320 2020 2020 2020 2033 2020 2020 2020  3        3      
-000283f0: 2020 330d 0a20 2020 2020 2020 2020 2034    3..          4
-00028400: 2020 206c 6f6e 675f 7374 7269 6e67 5f6c     long_string_l
-00028410: 6f6e 675f 7374 7269 6e67 2020 2020 2020  ong_string      
-00028420: 2034 2020 2020 2020 2034 2020 2020 2020   4       4      
-00028430: 2034 2020 2020 2020 2034 2020 2020 2020   4       4      
-00028440: 2034 2020 2020 2020 2034 2020 2020 2020   4       4      
-00028450: 2034 2020 2020 2020 2034 2020 2020 2020   4       4      
-00028460: 2034 2020 2020 2020 2020 3420 2020 2020   4        4     
-00028470: 2020 2034 0d0a 2020 2020 2020 2020 2020     4..          
-00028480: 3520 2020 6c6f 6e67 5f73 7472 696e 675f  5   long_string_
-00028490: 6c6f 6e67 5f73 7472 696e 6720 2020 2020  long_string     
-000284a0: 2020 3520 2020 2020 2020 3520 2020 2020    5       5     
-000284b0: 2020 3520 2020 2020 2020 3520 2020 2020    5       5     
-000284c0: 2020 3520 2020 2020 2020 3520 2020 2020    5       5     
-000284d0: 2020 3520 2020 2020 2020 3520 2020 2020    5       5     
-000284e0: 2020 3520 2020 2020 2020 2035 2020 2020    5        5    
-000284f0: 2020 2020 350d 0a20 2020 2020 2020 2020      5..         
-00028500: 2036 2020 206c 6f6e 675f 7374 7269 6e67   6   long_string
-00028510: 5f6c 6f6e 675f 7374 7269 6e67 2020 2020  _long_string    
-00028520: 2020 2036 2020 2020 2020 2036 2020 2020     6       6    
-00028530: 2020 2036 2020 2020 2020 2036 2020 2020     6       6    
-00028540: 2020 2036 2020 2020 2020 2036 2020 2020     6       6    
-00028550: 2020 2036 2020 2020 2020 2036 2020 2020     6       6    
-00028560: 2020 2036 2020 2020 2020 2020 3620 2020     6        6   
-00028570: 2020 2020 2036 0d0a 2020 2020 2020 2020       6..        
-00028580: 2020 3720 2020 6c6f 6e67 5f73 7472 696e    7   long_strin
-00028590: 675f 6c6f 6e67 5f73 7472 696e 6720 2020  g_long_string   
-000285a0: 2020 2020 3720 2020 2020 2020 3720 2020      7       7   
-000285b0: 2020 2020 3720 2020 2020 2020 3720 2020      7       7   
-000285c0: 2020 2020 3720 2020 2020 2020 3720 2020      7       7   
-000285d0: 2020 2020 3720 2020 2020 2020 3720 2020      7       7   
-000285e0: 2020 2020 3720 2020 2020 2020 2037 2020      7        7  
-000285f0: 2020 2020 2020 370d 0a20 2020 2020 2020        7..       
-00028600: 2020 2038 2020 206c 6f6e 675f 7374 7269     8   long_stri
-00028610: 6e67 5f6c 6f6e 675f 7374 7269 6e67 2020  ng_long_string  
-00028620: 2020 2020 2038 2020 2020 2020 2038 2020       8       8  
-00028630: 2020 2020 2038 2020 2020 2020 2038 2020       8       8  
-00028640: 2020 2020 2038 2020 2020 2020 2038 2020       8       8  
-00028650: 2020 2020 2038 2020 2020 2020 2038 2020       8       8  
-00028660: 2020 2020 2038 2020 2020 2020 2020 3820       8        8 
-00028670: 2020 2020 2020 2038 0d0a 2020 2020 2020         8..      
-00028680: 2020 2020 3920 2020 6c6f 6e67 5f73 7472      9   long_str
-00028690: 696e 675f 6c6f 6e67 5f73 7472 696e 6720  ing_long_string 
-000286a0: 2020 2020 2020 3920 2020 2020 2020 3920        9       9 
-000286b0: 2020 2020 2020 3920 2020 2020 2020 3920        9       9 
-000286c0: 2020 2020 2020 3920 2020 2020 2020 3920        9       9 
-000286d0: 2020 2020 2020 3920 2020 2020 2020 3920        9       9 
-000286e0: 2020 2020 2020 3920 2020 2020 2020 2039        9        9
-000286f0: 2020 2020 2020 2020 390d 0a20 2020 2020          9..     
-00028700: 2020 2020 3130 2020 206c 6f6e 675f 7374      10   long_st
-00028710: 7269 6e67 5f6c 6f6e 675f 7374 7269 6e67  ring_long_string
-00028720: 2020 2020 2020 3130 2020 2020 2020 3130        10      10
-00028730: 2020 2020 2020 3130 2020 2020 2020 3130        10      10
-00028740: 2020 2020 2020 3130 2020 2020 2020 3130        10      10
-00028750: 2020 2020 2020 3130 2020 2020 2020 3130        10      10
-00028760: 2020 2020 2020 3130 2020 2020 2020 2031        10       1
-00028770: 3020 2020 2020 2020 3130 0d0a 2020 2020  0       10..    
-00028780: 2020 2020 2031 3120 2020 6c6f 6e67 5f73       11   long_s
-00028790: 7472 696e 675f 6c6f 6e67 5f73 7472 696e  tring_long_strin
-000287a0: 6720 2020 2020 2031 3120 2020 2020 2031  g      11      1
-000287b0: 3120 2020 2020 2031 3120 2020 2020 2031  1      11      1
-000287c0: 3120 2020 2020 2031 3120 2020 2020 2031  1      11      1
-000287d0: 3120 2020 2020 2031 3120 2020 2020 2031  1      11      1
-000287e0: 3120 2020 2020 2031 3120 2020 2020 2020  1      11       
-000287f0: 3131 2020 2020 2020 2031 310d 0a20 2020  11       11..   
-00028800: 2020 2020 2020 3132 2020 206c 6f6e 675f        12   long_
-00028810: 7374 7269 6e67 5f6c 6f6e 675f 7374 7269  string_long_stri
-00028820: 6e67 2020 2020 2020 3132 2020 2020 2020  ng      12      
-00028830: 3132 2020 2020 2020 3132 2020 2020 2020  12      12      
-00028840: 3132 2020 2020 2020 3132 2020 2020 2020  12      12      
-00028850: 3132 2020 2020 2020 3132 2020 2020 2020  12      12      
-00028860: 3132 2020 2020 2020 3132 2020 2020 2020  12      12      
-00028870: 2031 3220 2020 2020 2020 3132 0d0a 2020   12       12..  
-00028880: 2020 2020 2020 2031 3320 2020 6c6f 6e67         13   long
-00028890: 5f73 7472 696e 675f 6c6f 6e67 5f73 7472  _string_long_str
-000288a0: 696e 6720 2020 2020 2031 3320 2020 2020  ing      13     
-000288b0: 2031 3320 2020 2020 2031 3320 2020 2020   13      13     
-000288c0: 2031 3320 2020 2020 2031 3320 2020 2020   13      13     
-000288d0: 2031 3320 2020 2020 2031 3320 2020 2020   13      13     
-000288e0: 2031 3320 2020 2020 2031 3320 2020 2020   13      13     
-000288f0: 2020 3133 2020 2020 2020 2031 330d 0a20    13       13.. 
-00028900: 2020 2020 2020 2020 3134 2020 206c 6f6e          14   lon
-00028910: 675f 7374 7269 6e67 5f6c 6f6e 675f 7374  g_string_long_st
-00028920: 7269 6e67 2020 2020 2020 3134 2020 2020  ring      14    
-00028930: 2020 3134 2020 2020 2020 3134 2020 2020    14      14    
-00028940: 2020 3134 2020 2020 2020 3134 2020 2020    14      14    
-00028950: 2020 3134 2020 2020 2020 3134 2020 2020    14      14    
-00028960: 2020 3134 2020 2020 2020 3134 2020 2020    14      14    
-00028970: 2020 2031 3420 2020 2020 2020 3134 0d0a     14       14..
-00028980: 2020 2020 2020 2020 2031 3520 2020 6c6f           15   lo
-00028990: 6e67 5f73 7472 696e 675f 6c6f 6e67 5f73  ng_string_long_s
-000289a0: 7472 696e 6720 2020 2020 2031 3520 2020  tring      15   
-000289b0: 2020 2031 3520 2020 2020 2031 3520 2020     15      15   
-000289c0: 2020 2031 3520 2020 2020 2031 3520 2020     15      15   
-000289d0: 2020 2031 3520 2020 2020 2031 3520 2020     15      15   
-000289e0: 2020 2031 3520 2020 2020 2031 3520 2020     15      15   
-000289f0: 2020 2020 3135 2020 2020 2020 2031 350d      15       15.
-00028a00: 0a20 2020 2020 2020 2020 3136 2020 206c  .         16   l
-00028a10: 6f6e 675f 7374 7269 6e67 5f6c 6f6e 675f  ong_string_long_
-00028a20: 7374 7269 6e67 2020 2020 2020 3136 2020  string      16  
-00028a30: 2020 2020 3136 2020 2020 2020 3136 2020      16      16  
-00028a40: 2020 2020 3136 2020 2020 2020 3136 2020      16      16  
-00028a50: 2020 2020 3136 2020 2020 2020 3136 2020      16      16  
-00028a60: 2020 2020 3136 2020 2020 2020 3136 2020      16      16  
-00028a70: 2020 2020 2031 3620 2020 2020 2020 3136       16       16
-00028a80: 0d0a 2020 2020 2020 2020 2031 3720 2020  ..         17   
-00028a90: 6c6f 6e67 5f73 7472 696e 675f 6c6f 6e67  long_string_long
-00028aa0: 5f73 7472 696e 6720 2020 2020 2031 3720  _string      17 
-00028ab0: 2020 2020 2031 3720 2020 2020 2031 3720       17      17 
-00028ac0: 2020 2020 2031 3720 2020 2020 2031 3720       17      17 
-00028ad0: 2020 2020 2031 3720 2020 2020 2031 3720       17      17 
-00028ae0: 2020 2020 2031 3720 2020 2020 2031 3720       17      17 
-00028af0: 2020 2020 2020 3137 2020 2020 2020 2031        17       1
-00028b00: 370d 0a20 2020 2020 2020 2020 3138 2020  7..         18  
-00028b10: 206c 6f6e 675f 7374 7269 6e67 5f6c 6f6e   long_string_lon
-00028b20: 675f 7374 7269 6e67 2020 2020 2020 3138  g_string      18
-00028b30: 2020 2020 2020 3138 2020 2020 2020 3138        18      18
-00028b40: 2020 2020 2020 3138 2020 2020 2020 3138        18      18
-00028b50: 2020 2020 2020 3138 2020 2020 2020 3138        18      18
-00028b60: 2020 2020 2020 3138 2020 2020 2020 3138        18      18
-00028b70: 2020 2020 2020 2031 3820 2020 2020 2020         18       
-00028b80: 3138 0d0a 2020 2020 2020 2020 2031 3920  18..         19 
-00028b90: 2020 6c6f 6e67 5f73 7472 696e 675f 6c6f    long_string_lo
-00028ba0: 6e67 5f73 7472 696e 6720 2020 2020 2031  ng_string      1
-00028bb0: 3920 2020 2020 2031 3920 2020 2020 2031  9      19      1
-00028bc0: 3920 2020 2020 2031 3920 2020 2020 2031  9      19      1
-00028bd0: 3920 2020 2020 2031 3920 2020 2020 2031  9      19      1
-00028be0: 3920 2020 2020 2031 3920 2020 2020 2031  9      19      1
-00028bf0: 3920 2020 2020 2020 3139 2020 2020 2020  9       19      
-00028c00: 2031 390d 0a20 2020 2020 2020 2020 3230   19..         20
-00028c10: 2020 206c 6f6e 675f 7374 7269 6e67 5f6c     long_string_l
-00028c20: 6f6e 675f 7374 7269 6e67 2020 2020 2020  ong_string      
-00028c30: 3230 2020 2020 2020 3230 2020 2020 2020  20      20      
-00028c40: 3230 2020 2020 2020 3230 2020 2020 2020  20      20      
-00028c50: 3230 2020 2020 2020 3230 2020 2020 2020  20      20      
-00028c60: 3230 2020 2020 2020 3230 2020 2020 2020  20      20      
-00028c70: 3230 2020 2020 2020 2032 3020 2020 2020  20       20     
-00028c80: 2020 3230 0d0a 2020 2020 2020 2020 2032    20..         2
-00028c90: 3120 2020 6c6f 6e67 5f73 7472 696e 675f  1   long_string_
-00028ca0: 6c6f 6e67 5f73 7472 696e 6720 2020 2020  long_string     
-00028cb0: 2032 3120 2020 2020 2032 3120 2020 2020   21      21     
-00028cc0: 2032 3120 2020 2020 2032 3120 2020 2020   21      21     
-00028cd0: 2032 3120 2020 2020 2032 3120 2020 2020   21      21     
-00028ce0: 2032 3120 2020 2020 2032 3120 2020 2020   21      21     
-00028cf0: 2032 3120 2020 2020 2020 3231 2020 2020   21       21    
-00028d00: 2020 2032 310d 0a20 2020 2020 2020 2020     21..         
-00028d10: 3232 2020 206c 6f6e 675f 7374 7269 6e67  22   long_string
-00028d20: 5f6c 6f6e 675f 7374 7269 6e67 2020 2020  _long_string    
-00028d30: 2020 3232 2020 2020 2020 3232 2020 2020    22      22    
-00028d40: 2020 3232 2020 2020 2020 3232 2020 2020    22      22    
-00028d50: 2020 3232 2020 2020 2020 3232 2020 2020    22      22    
-00028d60: 2020 3232 2020 2020 2020 3232 2020 2020    22      22    
-00028d70: 2020 3232 2020 2020 2020 2032 3220 2020    22       22   
-00028d80: 2020 2020 3232 0d0a 2020 2020 2020 2020      22..        
-00028d90: 2032 3320 2020 6c6f 6e67 5f73 7472 696e   23   long_strin
-00028da0: 675f 6c6f 6e67 5f73 7472 696e 6720 2020  g_long_string   
-00028db0: 2020 2032 3320 2020 2020 2032 3320 2020     23      23   
-00028dc0: 2020 2032 3320 2020 2020 2032 3320 2020     23      23   
-00028dd0: 2020 2032 3320 2020 2020 2032 3320 2020     23      23   
-00028de0: 2020 2032 3320 2020 2020 2032 3320 2020     23      23   
-00028df0: 2020 2032 3320 2020 2020 2020 3233 2020     23       23  
-00028e00: 2020 2020 2032 330d 0a20 2020 2020 2020       23..       
-00028e10: 2020 3234 2020 206c 6f6e 675f 7374 7269    24   long_stri
-00028e20: 6e67 5f6c 6f6e 675f 7374 7269 6e67 2020  ng_long_string  
-00028e30: 2020 2020 3234 2020 2020 2020 3234 2020      24      24  
-00028e40: 2020 2020 3234 2020 2020 2020 3234 2020      24      24  
-00028e50: 2020 2020 3234 2020 2020 2020 3234 2020      24      24  
-00028e60: 2020 2020 3234 2020 2020 2020 3234 2020      24      24  
-00028e70: 2020 2020 3234 2020 2020 2020 2032 3420      24       24 
-00028e80: 2020 2020 2020 3234 0d0a 2020 2020 2020        24..      
-00028e90: 2020 2032 3520 2020 6c6f 6e67 5f73 7472     25   long_str
-00028ea0: 696e 675f 6c6f 6e67 5f73 7472 696e 6720  ing_long_string 
-00028eb0: 2020 2020 2032 3520 2020 2020 2032 3520       25      25 
-00028ec0: 2020 2020 2032 3520 2020 2020 2032 3520       25      25 
-00028ed0: 2020 2020 2032 3520 2020 2020 2032 3520       25      25 
-00028ee0: 2020 2020 2032 3520 2020 2020 2032 3520       25      25 
-00028ef0: 2020 2020 2032 3520 2020 2020 2020 3235       25       25
-00028f00: 2020 2020 2020 2032 350d 0a20 2020 2020         25..     
-00028f10: 2020 2020 3236 2020 206c 6f6e 675f 7374      26   long_st
-00028f20: 7269 6e67 5f6c 6f6e 675f 7374 7269 6e67  ring_long_string
-00028f30: 2020 2020 2020 3236 2020 2020 2020 3236        26      26
-00028f40: 2020 2020 2020 3236 2020 2020 2020 3236        26      26
-00028f50: 2020 2020 2020 3236 2020 2020 2020 3236        26      26
-00028f60: 2020 2020 2020 3236 2020 2020 2020 3236        26      26
-00028f70: 2020 2020 2020 3236 2020 2020 2020 2032        26       2
-00028f80: 3620 2020 2020 2020 3236 0d0a 2020 2020  6       26..    
-00028f90: 2020 2020 2032 3720 2020 6c6f 6e67 5f73       27   long_s
-00028fa0: 7472 696e 675f 6c6f 6e67 5f73 7472 696e  tring_long_strin
-00028fb0: 6720 2020 2020 2032 3720 2020 2020 2032  g      27      2
-00028fc0: 3720 2020 2020 2032 3720 2020 2020 2032  7      27      2
-00028fd0: 3720 2020 2020 2032 3720 2020 2020 2032  7      27      2
-00028fe0: 3720 2020 2020 2032 3720 2020 2020 2032  7      27      2
-00028ff0: 3720 2020 2020 2032 3720 2020 2020 2020  7      27       
-00029000: 3237 2020 2020 2020 2032 370d 0a20 2020  27       27..   
-00029010: 2020 2020 2020 3238 2020 206c 6f6e 675f        28   long_
-00029020: 7374 7269 6e67 5f6c 6f6e 675f 7374 7269  string_long_stri
-00029030: 6e67 2020 2020 2020 3238 2020 2020 2020  ng      28      
-00029040: 3238 2020 2020 2020 3238 2020 2020 2020  28      28      
-00029050: 3238 2020 2020 2020 3238 2020 2020 2020  28      28      
-00029060: 3238 2020 2020 2020 3238 2020 2020 2020  28      28      
-00029070: 3238 2020 2020 2020 3238 2020 2020 2020  28      28      
-00029080: 2032 3820 2020 2020 2020 3238 0d0a 2020   28       28..  
-00029090: 2020 2020 2020 2032 3920 2020 6c6f 6e67         29   long
-000290a0: 5f73 7472 696e 675f 6c6f 6e67 5f73 7472  _string_long_str
-000290b0: 696e 6720 2020 2020 2032 3920 2020 2020  ing      29     
-000290c0: 2032 3920 2020 2020 2032 3920 2020 2020   29      29     
-000290d0: 2032 3920 2020 2020 2032 3920 2020 2020   29      29     
-000290e0: 2032 3920 2020 2020 2032 3920 2020 2020   29      29     
-000290f0: 2032 3920 2020 2020 2032 3920 2020 2020   29      29     
-00029100: 2020 3239 2020 2020 2020 2032 390d 0a20    29       29.. 
-00029110: 2020 2020 2020 2020 3330 2020 206c 6f6e          30   lon
-00029120: 675f 7374 7269 6e67 5f6c 6f6e 675f 7374  g_string_long_st
-00029130: 7269 6e67 2020 2020 2020 3330 2020 2020  ring      30    
-00029140: 2020 3330 2020 2020 2020 3330 2020 2020    30      30    
-00029150: 2020 3330 2020 2020 2020 3330 2020 2020    30      30    
-00029160: 2020 3330 2020 2020 2020 3330 2020 2020    30      30    
-00029170: 2020 3330 2020 2020 2020 3330 2020 2020    30      30    
-00029180: 2020 2033 3020 2020 2020 2020 3330 0d0a     30       30..
-00029190: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-000291a0: 2020 2020 206d 6178 726f 7773 203d 2031       maxrows = 1
-000291b0: 305f 3030 300d 0a20 2020 2020 2020 206e  0_000..        n
-000291c0: 756d 726f 7773 203d 2073 656c 662e 5f6e  umrows = self._n
-000291d0: 726f 7773 0d0a 2020 2020 2020 2020 6966  rows..        if
-000291e0: 206e 756d 726f 7773 203e 206d 6178 726f   numrows > maxro
-000291f0: 7773 3a0d 0a20 2020 2020 2020 2020 2020  ws:..           
-00029200: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-00029210: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
-00029220: 2020 2020 6622 4461 7461 7365 7420 6861      f"Dataset ha
-00029230: 7320 6d6f 7265 2074 6861 6e20 3130 2c30  s more than 10,0
-00029240: 3030 2072 6f77 732e 2043 616e 6e6f 7420  00 rows. Cannot 
-00029250: 6469 7370 6c61 7920 616c 6c20 726f 7773  display all rows
-00029260: 2e20 546f 206f 7665 7272 6964 652c 2073  . To override, s
-00029270: 6574 2044 6973 706c 6179 2e6f 7074 696f  et Display.optio
-00029280: 6e73 2e52 4f57 5f41 4c4c 203d 2054 7275  ns.ROW_ALL = Tru
-00029290: 6520 616e 6420 7072 696e 7428 6473 2922  e and print(ds)"
-000292a0: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
-000292b0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000292c0: 7365 6c66 2e5f 7465 6d70 5f64 6973 706c  self._temp_displ
-000292d0: 6179 285b 2243 4f4c 5f41 4c4c 222c 2022  ay(["COL_ALL", "
-000292e0: 524f 575f 414c 4c22 2c20 224d 4158 5f53  ROW_ALL", "MAX_S
-000292f0: 5452 494e 475f 5749 4454 4822 5d2c 205b  TRING_WIDTH"], [
-00029300: 5472 7565 2c20 5472 7565 2c20 3130 3030  True, True, 1000
-00029310: 5d29 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  ])....    # ----
+00026c30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+00026c40: 2020 2020 4070 726f 7065 7274 790d 0a20      @property.. 
+00026c50: 2020 2064 6566 205f 4128 7365 6c66 293a     def _A(self):
+00026c60: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00026c70: 2020 2020 2020 2044 6973 706c 6179 2061         Display a
+00026c80: 6c6c 2063 6f6c 756d 6e73 2c20 616c 6c20  ll columns, all 
+00026c90: 726f 7773 2028 7570 2074 6f20 3130 2c30  rows (up to 10,0
+00026ca0: 3030 292c 2061 6e64 206c 6f6e 6720 7374  00), and long st
+00026cb0: 7269 6e67 7320 6f66 2061 0d0a 2020 2020  rings of a..    
+00026cc0: 2020 2020 602e 4461 7461 7365 7460 206f      `.Dataset` o
+00026cd0: 7220 6053 7472 7563 7460 2e0d 0a0d 0a20  r `Struct`..... 
+00026ce0: 2020 2020 2020 2057 6974 686f 7574 2074         Without t
+00026cf0: 6869 7320 7072 6f70 6572 7479 2c20 636f  his property, co
+00026d00: 6c75 6d6e 7320 6172 6520 656c 6964 6564  lumns are elided
+00026d10: 2077 6865 6e20 7468 6520 6d61 7869 6d75   when the maximu
+00026d20: 6d20 6469 7370 6c61 7920 7769 6474 680d  m display width.
+00026d30: 0a20 2020 2020 2020 2069 7320 7265 6163  .        is reac
+00026d40: 6865 642c 2072 6f77 7320 6172 6520 656c  hed, rows are el
+00026d50: 6964 6564 2077 6865 6e20 7468 6572 6520  ided when there 
+00026d60: 6172 6520 6d6f 7265 2074 6865 6e20 3330  are more then 30
+00026d70: 2074 6f20 6469 7370 6c61 792c 0d0a 2020   to display,..  
+00026d80: 2020 2020 2020 616e 6420 7374 7269 6e67        and string
+00026d90: 7320 6172 6520 7472 756e 6361 7465 6420  s are truncated 
+00026da0: 6166 7465 7220 3135 2063 6861 7261 6374  after 15 charact
+00026db0: 6572 732e 0d0a 0d0a 2020 2020 2020 2020  ers.....        
+00026dc0: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
+00026dd0: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
+00026de0: 2020 4469 7370 6c61 7953 7472 696e 670d    DisplayString.
+00026df0: 0a20 2020 2020 2020 2020 2020 2041 2077  .            A w
+00026e00: 7261 7070 6572 2066 6f72 2064 6973 706c  rapper for displ
+00026e10: 6179 206f 7065 7261 7469 6f6e 7320 7468  ay operations th
+00026e20: 6174 2064 6f6e 2774 2072 6574 7572 6e20  at don't return 
+00026e30: 6120 602e 4461 7461 7365 7460 206f 7220  a `.Dataset` or 
+00026e40: 6053 7472 7563 7460 2e0d 0a0d 0a20 2020  `Struct`.....   
+00026e50: 2020 2020 2053 6565 2041 6c73 6f0d 0a20       See Also.. 
+00026e60: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+00026e70: 0a20 2020 2020 2020 2053 7472 7563 742e  .        Struct.
+00026e80: 5f56 203a 2044 6973 706c 6179 2061 6c6c  _V : Display all
+00026e90: 2072 6f77 7320 6f66 2061 2060 2e44 6174   rows of a `.Dat
+00026ea0: 6173 6574 6020 6f72 2060 5374 7275 6374  aset` or `Struct
+00026eb0: 602e 0d0a 2020 2020 2020 2020 5374 7275  `...        Stru
+00026ec0: 6374 2e5f 4820 3a20 4469 7370 6c61 7920  ct._H : Display 
+00026ed0: 616c 6c20 636f 6c75 6d6e 7320 616e 6420  all columns and 
+00026ee0: 6c6f 6e67 2073 7472 696e 6773 206f 6620  long strings of 
+00026ef0: 6120 602e 4461 7461 7365 7460 206f 7220  a `.Dataset` or 
+00026f00: 6053 7472 7563 7460 2e0d 0a20 2020 2020  `Struct`...     
+00026f10: 2020 2053 7472 7563 742e 5f47 203a 2044     Struct._G : D
+00026f20: 6973 706c 6179 2061 6c6c 2063 6f6c 756d  isplay all colum
+00026f30: 6e73 206f 6620 6120 602e 4461 7461 7365  ns of a `.Datase
+00026f40: 7460 206f 7220 6053 7472 7563 7460 2c20  t` or `Struct`, 
+00026f50: 7772 6170 7069 6e67 2074 6865 2074 6162  wrapping the tab
+00026f60: 6c65 2061 7320 6e65 6564 6564 2e0d 0a20  le as needed... 
+00026f70: 2020 2020 2020 2053 7472 7563 742e 5f54         Struct._T
+00026f80: 203a 2044 6973 706c 6179 2061 2074 7261   : Display a tra
+00026f90: 6e73 706f 7365 6420 7669 6577 206f 6620  nsposed view of 
+00026fa0: 6120 602e 4461 7461 7365 7460 206f 7220  a `.Dataset` or 
+00026fb0: 6053 7472 7563 7460 2e0d 0a0d 0a20 2020  `Struct`.....   
+00026fc0: 2020 2020 2045 7861 6d70 6c65 730d 0a20       Examples.. 
+00026fd0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0d         --------.
+00026fe0: 0a20 2020 2020 2020 203e 3e3e 2064 7320  .        >>> ds 
+00026ff0: 3d20 7274 2e44 6174 6173 6574 287b 2763  = rt.Dataset({'c
+00027000: 6f6c 5f27 2b73 7472 2869 293a 7274 2e61  ol_'+str(i):rt.a
+00027010: 7261 6e67 6528 3331 2920 666f 7220 6920  range(31) for i 
+00027020: 696e 2072 616e 6765 2831 3229 7d29 0d0a  in range(12)})..
+00027030: 2020 2020 2020 2020 3e3e 3e20 6473 5b30          >>> ds[0
+00027040: 5d20 3d20 276c 6f6e 675f 7374 7269 6e67  ] = 'long_string
+00027050: 5f6c 6f6e 675f 7374 7269 6e67 270d 0a0d  _long_string'...
+00027060: 0a20 2020 2020 2020 2042 7920 6465 6661  .        By defa
+00027070: 756c 742c 2063 6f6c 756d 6e73 2061 7265  ult, columns are
+00027080: 2065 6c69 6465 6420 7768 656e 2074 6865   elided when the
+00027090: 206d 6178 696d 756d 2064 6973 706c 6179   maximum display
+000270a0: 2077 6964 7468 2069 730d 0a20 2020 2020   width is..     
+000270b0: 2020 2072 6561 6368 6564 2c20 726f 7773     reached, rows
+000270c0: 2061 7265 2065 6c69 6465 6420 7768 656e   are elided when
+000270d0: 2074 6865 7265 2061 7265 206d 6f72 6520   there are more 
+000270e0: 7468 656e 2033 3020 746f 2064 6973 706c  then 30 to displ
+000270f0: 6179 2c20 616e 640d 0a20 2020 2020 2020  ay, and..       
+00027100: 2073 7472 696e 6773 2061 7265 2074 7275   strings are tru
+00027110: 6e63 6174 6564 2061 6674 6572 2031 3520  ncated after 15 
+00027120: 6368 6172 6163 7465 7273 3a0d 0a0d 0a20  characters:.... 
+00027130: 2020 2020 2020 203e 3e3e 2064 730d 0a20         >>> ds.. 
+00027140: 2020 2020 2020 2020 2023 2020 2063 6f6c           #   col
+00027150: 5f30 2020 2020 2020 2020 2020 2020 2063  _0             c
+00027160: 6f6c 5f31 2020 2063 6f6c 5f32 2020 2063  ol_1   col_2   c
+00027170: 6f6c 5f33 2020 2063 6f6c 5f34 2020 2063  ol_3   col_4   c
+00027180: 6f6c 5f35 2020 202e 2e2e 2020 2063 6f6c  ol_5   ...   col
+00027190: 5f37 2020 2063 6f6c 5f38 2020 2063 6f6c  _7   col_8   col
+000271a0: 5f39 2020 2063 6f6c 5f31 3020 2020 636f  _9   col_10   co
+000271b0: 6c5f 3131 0d0a 2020 2020 2020 2020 2d2d  l_11..        --
+000271c0: 2d20 2020 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  -   ------------
+000271d0: 2d2d 2d20 2020 2d2d 2d2d 2d20 2020 2d2d  ---   -----   --
+000271e0: 2d2d 2d20 2020 2d2d 2d2d 2d20 2020 2d2d  ---   -----   --
+000271f0: 2d2d 2d20 2020 2d2d 2d2d 2d20 2020 2d2d  ---   -----   --
+00027200: 2d20 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d  -   -----   ----
+00027210: 2d20 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d  -   -----   ----
+00027220: 2d2d 2020 202d 2d2d 2d2d 2d0d 0a20 2020  --   ------..   
+00027230: 2020 2020 2020 2030 2020 206c 6f6e 675f         0   long_
+00027240: 7374 7269 6e67 5f6c 6f6e 2020 2020 2020  string_lon      
+00027250: 2030 2020 2020 2020 2030 2020 2020 2020   0       0      
+00027260: 2030 2020 2020 2020 2030 2020 2020 2020   0       0      
+00027270: 2030 2020 202e 2e2e 2020 2020 2020 2030   0   ...       0
+00027280: 2020 2020 2020 2030 2020 2020 2020 2030         0       0
+00027290: 2020 2020 2020 2020 3020 2020 2020 2020          0       
+000272a0: 2030 0d0a 2020 2020 2020 2020 2020 3120   0..          1 
+000272b0: 2020 6c6f 6e67 5f73 7472 696e 675f 6c6f    long_string_lo
+000272c0: 6e20 2020 2020 2020 3120 2020 2020 2020  n       1       
+000272d0: 3120 2020 2020 2020 3120 2020 2020 2020  1       1       
+000272e0: 3120 2020 2020 2020 3120 2020 2e2e 2e20  1       1   ... 
+000272f0: 2020 2020 2020 3120 2020 2020 2020 3120        1       1 
+00027300: 2020 2020 2020 3120 2020 2020 2020 2031        1        1
+00027310: 2020 2020 2020 2020 310d 0a20 2020 2020          1..     
+00027320: 2020 2020 2032 2020 206c 6f6e 675f 7374       2   long_st
+00027330: 7269 6e67 5f6c 6f6e 2020 2020 2020 2032  ring_lon       2
+00027340: 2020 2020 2020 2032 2020 2020 2020 2032         2       2
+00027350: 2020 2020 2020 2032 2020 2020 2020 2032         2       2
+00027360: 2020 202e 2e2e 2020 2020 2020 2032 2020     ...       2  
+00027370: 2020 2020 2032 2020 2020 2020 2032 2020       2       2  
+00027380: 2020 2020 2020 3220 2020 2020 2020 2032        2        2
+00027390: 0d0a 2020 2020 2020 2020 2020 3320 2020  ..          3   
+000273a0: 6c6f 6e67 5f73 7472 696e 675f 6c6f 6e20  long_string_lon 
+000273b0: 2020 2020 2020 3320 2020 2020 2020 3320        3       3 
+000273c0: 2020 2020 2020 3320 2020 2020 2020 3320        3       3 
+000273d0: 2020 2020 2020 3320 2020 2e2e 2e20 2020        3   ...   
+000273e0: 2020 2020 3320 2020 2020 2020 3320 2020      3       3   
+000273f0: 2020 2020 3320 2020 2020 2020 2033 2020      3        3  
+00027400: 2020 2020 2020 330d 0a20 2020 2020 2020        3..       
+00027410: 2020 2034 2020 206c 6f6e 675f 7374 7269     4   long_stri
+00027420: 6e67 5f6c 6f6e 2020 2020 2020 2034 2020  ng_lon       4  
+00027430: 2020 2020 2034 2020 2020 2020 2034 2020       4       4  
+00027440: 2020 2020 2034 2020 2020 2020 2034 2020       4       4  
+00027450: 202e 2e2e 2020 2020 2020 2034 2020 2020   ...       4    
+00027460: 2020 2034 2020 2020 2020 2034 2020 2020     4       4    
+00027470: 2020 2020 3420 2020 2020 2020 2034 0d0a      4        4..
+00027480: 2020 2020 2020 2020 2020 3520 2020 6c6f            5   lo
+00027490: 6e67 5f73 7472 696e 675f 6c6f 6e20 2020  ng_string_lon   
+000274a0: 2020 2020 3520 2020 2020 2020 3520 2020      5       5   
+000274b0: 2020 2020 3520 2020 2020 2020 3520 2020      5       5   
+000274c0: 2020 2020 3520 2020 2e2e 2e20 2020 2020      5   ...     
+000274d0: 2020 3520 2020 2020 2020 3520 2020 2020    5       5     
+000274e0: 2020 3520 2020 2020 2020 2035 2020 2020    5        5    
+000274f0: 2020 2020 350d 0a20 2020 2020 2020 2020      5..         
+00027500: 2036 2020 206c 6f6e 675f 7374 7269 6e67   6   long_string
+00027510: 5f6c 6f6e 2020 2020 2020 2036 2020 2020  _lon       6    
+00027520: 2020 2036 2020 2020 2020 2036 2020 2020     6       6    
+00027530: 2020 2036 2020 2020 2020 2036 2020 202e     6       6   .
+00027540: 2e2e 2020 2020 2020 2036 2020 2020 2020  ..       6      
+00027550: 2036 2020 2020 2020 2036 2020 2020 2020   6       6      
+00027560: 2020 3620 2020 2020 2020 2036 0d0a 2020    6        6..  
+00027570: 2020 2020 2020 2020 3720 2020 6c6f 6e67          7   long
+00027580: 5f73 7472 696e 675f 6c6f 6e20 2020 2020  _string_lon     
+00027590: 2020 3720 2020 2020 2020 3720 2020 2020    7       7     
+000275a0: 2020 3720 2020 2020 2020 3720 2020 2020    7       7     
+000275b0: 2020 3720 2020 2e2e 2e20 2020 2020 2020    7   ...       
+000275c0: 3720 2020 2020 2020 3720 2020 2020 2020  7       7       
+000275d0: 3720 2020 2020 2020 2037 2020 2020 2020  7        7      
+000275e0: 2020 370d 0a20 2020 2020 2020 2020 2038    7..          8
+000275f0: 2020 206c 6f6e 675f 7374 7269 6e67 5f6c     long_string_l
+00027600: 6f6e 2020 2020 2020 2038 2020 2020 2020  on       8      
+00027610: 2038 2020 2020 2020 2038 2020 2020 2020   8       8      
+00027620: 2038 2020 2020 2020 2038 2020 202e 2e2e   8       8   ...
+00027630: 2020 2020 2020 2038 2020 2020 2020 2038         8       8
+00027640: 2020 2020 2020 2038 2020 2020 2020 2020         8        
+00027650: 3820 2020 2020 2020 2038 0d0a 2020 2020  8        8..    
+00027660: 2020 2020 2020 3920 2020 6c6f 6e67 5f73        9   long_s
+00027670: 7472 696e 675f 6c6f 6e20 2020 2020 2020  tring_lon       
+00027680: 3920 2020 2020 2020 3920 2020 2020 2020  9       9       
+00027690: 3920 2020 2020 2020 3920 2020 2020 2020  9       9       
+000276a0: 3920 2020 2e2e 2e20 2020 2020 2020 3920  9   ...       9 
+000276b0: 2020 2020 2020 3920 2020 2020 2020 3920        9       9 
+000276c0: 2020 2020 2020 2039 2020 2020 2020 2020         9        
+000276d0: 390d 0a20 2020 2020 2020 2020 3130 2020  9..         10  
+000276e0: 206c 6f6e 675f 7374 7269 6e67 5f6c 6f6e   long_string_lon
+000276f0: 2020 2020 2020 3130 2020 2020 2020 3130        10      10
+00027700: 2020 2020 2020 3130 2020 2020 2020 3130        10      10
+00027710: 2020 2020 2020 3130 2020 202e 2e2e 2020        10   ...  
+00027720: 2020 2020 3130 2020 2020 2020 3130 2020      10      10  
+00027730: 2020 2020 3130 2020 2020 2020 2031 3020      10       10 
+00027740: 2020 2020 2020 3130 0d0a 2020 2020 2020        10..      
+00027750: 2020 2031 3120 2020 6c6f 6e67 5f73 7472     11   long_str
+00027760: 696e 675f 6c6f 6e20 2020 2020 2031 3120  ing_lon      11 
+00027770: 2020 2020 2031 3120 2020 2020 2031 3120       11      11 
+00027780: 2020 2020 2031 3120 2020 2020 2031 3120       11      11 
+00027790: 2020 2e2e 2e20 2020 2020 2031 3120 2020    ...      11   
+000277a0: 2020 2031 3120 2020 2020 2031 3120 2020     11      11   
+000277b0: 2020 2020 3131 2020 2020 2020 2031 310d      11       11.
+000277c0: 0a20 2020 2020 2020 2020 3132 2020 206c  .         12   l
+000277d0: 6f6e 675f 7374 7269 6e67 5f6c 6f6e 2020  ong_string_lon  
+000277e0: 2020 2020 3132 2020 2020 2020 3132 2020      12      12  
+000277f0: 2020 2020 3132 2020 2020 2020 3132 2020      12      12  
+00027800: 2020 2020 3132 2020 202e 2e2e 2020 2020      12   ...    
+00027810: 2020 3132 2020 2020 2020 3132 2020 2020    12      12    
+00027820: 2020 3132 2020 2020 2020 2031 3220 2020    12       12   
+00027830: 2020 2020 3132 0d0a 2020 2020 2020 2020      12..        
+00027840: 2031 3320 2020 6c6f 6e67 5f73 7472 696e   13   long_strin
+00027850: 675f 6c6f 6e20 2020 2020 2031 3320 2020  g_lon      13   
+00027860: 2020 2031 3320 2020 2020 2031 3320 2020     13      13   
+00027870: 2020 2031 3320 2020 2020 2031 3320 2020     13      13   
+00027880: 2e2e 2e20 2020 2020 2031 3320 2020 2020  ...      13     
+00027890: 2031 3320 2020 2020 2031 3320 2020 2020   13      13     
+000278a0: 2020 3133 2020 2020 2020 2031 330d 0a20    13       13.. 
+000278b0: 2020 2020 2020 2020 3134 2020 206c 6f6e          14   lon
+000278c0: 675f 7374 7269 6e67 5f6c 6f6e 2020 2020  g_string_lon    
+000278d0: 2020 3134 2020 2020 2020 3134 2020 2020    14      14    
+000278e0: 2020 3134 2020 2020 2020 3134 2020 2020    14      14    
+000278f0: 2020 3134 2020 202e 2e2e 2020 2020 2020    14   ...      
+00027900: 3134 2020 2020 2020 3134 2020 2020 2020  14      14      
+00027910: 3134 2020 2020 2020 2031 3420 2020 2020  14       14     
+00027920: 2020 3134 0d0a 2020 2020 2020 2020 2e2e    14..        ..
+00027930: 2e20 2020 2e2e 2e20 2020 2020 2020 2020  .   ...         
+00027940: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
+00027950: 2e2e 2e20 2020 2020 2e2e 2e20 2020 2020  ...     ...     
+00027960: 2e2e 2e20 2020 2020 2e2e 2e20 2020 2e2e  ...     ...   ..
+00027970: 2e20 2020 2020 2e2e 2e20 2020 2020 2e2e  .     ...     ..
+00027980: 2e20 2020 2020 2e2e 2e20 2020 2020 202e  .     ...      .
+00027990: 2e2e 2020 2020 2020 2e2e 2e0d 0a20 2020  ..      .....   
+000279a0: 2020 2020 2020 3136 2020 206c 6f6e 675f        16   long_
+000279b0: 7374 7269 6e67 5f6c 6f6e 2020 2020 2020  string_lon      
+000279c0: 3136 2020 2020 2020 3136 2020 2020 2020  16      16      
+000279d0: 3136 2020 2020 2020 3136 2020 2020 2020  16      16      
+000279e0: 3136 2020 202e 2e2e 2020 2020 2020 3136  16   ...      16
+000279f0: 2020 2020 2020 3136 2020 2020 2020 3136        16      16
+00027a00: 2020 2020 2020 2031 3620 2020 2020 2020         16       
+00027a10: 3136 0d0a 2020 2020 2020 2020 2031 3720  16..         17 
+00027a20: 2020 6c6f 6e67 5f73 7472 696e 675f 6c6f    long_string_lo
+00027a30: 6e20 2020 2020 2031 3720 2020 2020 2031  n      17      1
+00027a40: 3720 2020 2020 2031 3720 2020 2020 2031  7      17      1
+00027a50: 3720 2020 2020 2031 3720 2020 2e2e 2e20  7      17   ... 
+00027a60: 2020 2020 2031 3720 2020 2020 2031 3720       17      17 
+00027a70: 2020 2020 2031 3720 2020 2020 2020 3137       17       17
+00027a80: 2020 2020 2020 2031 370d 0a20 2020 2020         17..     
+00027a90: 2020 2020 3138 2020 206c 6f6e 675f 7374      18   long_st
+00027aa0: 7269 6e67 5f6c 6f6e 2020 2020 2020 3138  ring_lon      18
+00027ab0: 2020 2020 2020 3138 2020 2020 2020 3138        18      18
+00027ac0: 2020 2020 2020 3138 2020 2020 2020 3138        18      18
+00027ad0: 2020 202e 2e2e 2020 2020 2020 3138 2020     ...      18  
+00027ae0: 2020 2020 3138 2020 2020 2020 3138 2020      18      18  
+00027af0: 2020 2020 2031 3820 2020 2020 2020 3138       18       18
+00027b00: 0d0a 2020 2020 2020 2020 2031 3920 2020  ..         19   
+00027b10: 6c6f 6e67 5f73 7472 696e 675f 6c6f 6e20  long_string_lon 
+00027b20: 2020 2020 2031 3920 2020 2020 2031 3920       19      19 
+00027b30: 2020 2020 2031 3920 2020 2020 2031 3920       19      19 
+00027b40: 2020 2020 2031 3920 2020 2e2e 2e20 2020       19   ...   
+00027b50: 2020 2031 3920 2020 2020 2031 3920 2020     19      19   
+00027b60: 2020 2031 3920 2020 2020 2020 3139 2020     19       19  
+00027b70: 2020 2020 2031 390d 0a20 2020 2020 2020       19..       
+00027b80: 2020 3230 2020 206c 6f6e 675f 7374 7269    20   long_stri
+00027b90: 6e67 5f6c 6f6e 2020 2020 2020 3230 2020  ng_lon      20  
+00027ba0: 2020 2020 3230 2020 2020 2020 3230 2020      20      20  
+00027bb0: 2020 2020 3230 2020 2020 2020 3230 2020      20      20  
+00027bc0: 202e 2e2e 2020 2020 2020 3230 2020 2020   ...      20    
+00027bd0: 2020 3230 2020 2020 2020 3230 2020 2020    20      20    
+00027be0: 2020 2032 3020 2020 2020 2020 3230 0d0a     20       20..
+00027bf0: 2020 2020 2020 2020 2032 3120 2020 6c6f           21   lo
+00027c00: 6e67 5f73 7472 696e 675f 6c6f 6e20 2020  ng_string_lon   
+00027c10: 2020 2032 3120 2020 2020 2032 3120 2020     21      21   
+00027c20: 2020 2032 3120 2020 2020 2032 3120 2020     21      21   
+00027c30: 2020 2032 3120 2020 2e2e 2e20 2020 2020     21   ...     
+00027c40: 2032 3120 2020 2020 2032 3120 2020 2020   21      21     
+00027c50: 2032 3120 2020 2020 2020 3231 2020 2020   21       21    
+00027c60: 2020 2032 310d 0a20 2020 2020 2020 2020     21..         
+00027c70: 3232 2020 206c 6f6e 675f 7374 7269 6e67  22   long_string
+00027c80: 5f6c 6f6e 2020 2020 2020 3232 2020 2020  _lon      22    
+00027c90: 2020 3232 2020 2020 2020 3232 2020 2020    22      22    
+00027ca0: 2020 3232 2020 2020 2020 3232 2020 202e    22      22   .
+00027cb0: 2e2e 2020 2020 2020 3232 2020 2020 2020  ..      22      
+00027cc0: 3232 2020 2020 2020 3232 2020 2020 2020  22      22      
+00027cd0: 2032 3220 2020 2020 2020 3232 0d0a 2020   22       22..  
+00027ce0: 2020 2020 2020 2032 3320 2020 6c6f 6e67         23   long
+00027cf0: 5f73 7472 696e 675f 6c6f 6e20 2020 2020  _string_lon     
+00027d00: 2032 3320 2020 2020 2032 3320 2020 2020   23      23     
+00027d10: 2032 3320 2020 2020 2032 3320 2020 2020   23      23     
+00027d20: 2032 3320 2020 2e2e 2e20 2020 2020 2032   23   ...      2
+00027d30: 3320 2020 2020 2032 3320 2020 2020 2032  3      23      2
+00027d40: 3320 2020 2020 2020 3233 2020 2020 2020  3       23      
+00027d50: 2032 330d 0a20 2020 2020 2020 2020 3234   23..         24
+00027d60: 2020 206c 6f6e 675f 7374 7269 6e67 5f6c     long_string_l
+00027d70: 6f6e 2020 2020 2020 3234 2020 2020 2020  on      24      
+00027d80: 3234 2020 2020 2020 3234 2020 2020 2020  24      24      
+00027d90: 3234 2020 2020 2020 3234 2020 202e 2e2e  24      24   ...
+00027da0: 2020 2020 2020 3234 2020 2020 2020 3234        24      24
+00027db0: 2020 2020 2020 3234 2020 2020 2020 2032        24       2
+00027dc0: 3420 2020 2020 2020 3234 0d0a 2020 2020  4       24..    
+00027dd0: 2020 2020 2032 3520 2020 6c6f 6e67 5f73       25   long_s
+00027de0: 7472 696e 675f 6c6f 6e20 2020 2020 2032  tring_lon      2
+00027df0: 3520 2020 2020 2032 3520 2020 2020 2032  5      25      2
+00027e00: 3520 2020 2020 2032 3520 2020 2020 2032  5      25      2
+00027e10: 3520 2020 2e2e 2e20 2020 2020 2032 3520  5   ...      25 
+00027e20: 2020 2020 2032 3520 2020 2020 2032 3520       25      25 
+00027e30: 2020 2020 2020 3235 2020 2020 2020 2032        25       2
+00027e40: 350d 0a20 2020 2020 2020 2020 3236 2020  5..         26  
+00027e50: 206c 6f6e 675f 7374 7269 6e67 5f6c 6f6e   long_string_lon
+00027e60: 2020 2020 2020 3236 2020 2020 2020 3236        26      26
+00027e70: 2020 2020 2020 3236 2020 2020 2020 3236        26      26
+00027e80: 2020 2020 2020 3236 2020 202e 2e2e 2020        26   ...  
+00027e90: 2020 2020 3236 2020 2020 2020 3236 2020      26      26  
+00027ea0: 2020 2020 3236 2020 2020 2020 2032 3620      26       26 
+00027eb0: 2020 2020 2020 3236 0d0a 2020 2020 2020        26..      
+00027ec0: 2020 2032 3720 2020 6c6f 6e67 5f73 7472     27   long_str
+00027ed0: 696e 675f 6c6f 6e20 2020 2020 2032 3720  ing_lon      27 
+00027ee0: 2020 2020 2032 3720 2020 2020 2032 3720       27      27 
+00027ef0: 2020 2020 2032 3720 2020 2020 2032 3720       27      27 
+00027f00: 2020 2e2e 2e20 2020 2020 2032 3720 2020    ...      27   
+00027f10: 2020 2032 3720 2020 2020 2032 3720 2020     27      27   
+00027f20: 2020 2020 3237 2020 2020 2020 2032 370d      27       27.
+00027f30: 0a20 2020 2020 2020 2020 3238 2020 206c  .         28   l
+00027f40: 6f6e 675f 7374 7269 6e67 5f6c 6f6e 2020  ong_string_lon  
+00027f50: 2020 2020 3238 2020 2020 2020 3238 2020      28      28  
+00027f60: 2020 2020 3238 2020 2020 2020 3238 2020      28      28  
+00027f70: 2020 2020 3238 2020 202e 2e2e 2020 2020      28   ...    
+00027f80: 2020 3238 2020 2020 2020 3238 2020 2020    28      28    
+00027f90: 2020 3238 2020 2020 2020 2032 3820 2020    28       28   
+00027fa0: 2020 2020 3238 0d0a 2020 2020 2020 2020      28..        
+00027fb0: 2032 3920 2020 6c6f 6e67 5f73 7472 696e   29   long_strin
+00027fc0: 675f 6c6f 6e20 2020 2020 2032 3920 2020  g_lon      29   
+00027fd0: 2020 2032 3920 2020 2020 2032 3920 2020     29      29   
+00027fe0: 2020 2032 3920 2020 2020 2032 3920 2020     29      29   
+00027ff0: 2e2e 2e20 2020 2020 2032 3920 2020 2020  ...      29     
+00028000: 2032 3920 2020 2020 2032 3920 2020 2020   29      29     
+00028010: 2020 3239 2020 2020 2020 2032 390d 0a20    29       29.. 
+00028020: 2020 2020 2020 2020 3330 2020 206c 6f6e          30   lon
+00028030: 675f 7374 7269 6e67 5f6c 6f6e 2020 2020  g_string_lon    
+00028040: 2020 3330 2020 2020 2020 3330 2020 2020    30      30    
+00028050: 2020 3330 2020 2020 2020 3330 2020 2020    30      30    
+00028060: 2020 3330 2020 202e 2e2e 2020 2020 2020    30   ...      
+00028070: 3330 2020 2020 2020 3330 2020 2020 2020  30      30      
+00028080: 3330 2020 2020 2020 2033 3020 2020 2020  30       30     
+00028090: 2020 3330 0d0a 0d0a 2020 2020 2020 2020    30....        
+000280a0: 4469 7370 6c61 7920 616c 6c20 636f 6c75  Display all colu
+000280b0: 6d6e 732c 2072 6f77 732c 2061 6e64 206c  mns, rows, and l
+000280c0: 6f6e 6720 7374 7269 6e67 733a 0d0a 0d0a  ong strings:....
+000280d0: 2020 2020 2020 2020 3e3e 3e20 6473 2e5f          >>> ds._
+000280e0: 410d 0a20 2020 2020 2020 2020 2023 2020  A..          #  
+000280f0: 2063 6f6c 5f30 2020 2020 2020 2020 2020   col_0          
+00028100: 2020 2020 2020 2020 2020 2063 6f6c 5f31             col_1
+00028110: 2020 2063 6f6c 5f32 2020 2063 6f6c 5f33     col_2   col_3
+00028120: 2020 2063 6f6c 5f34 2020 2063 6f6c 5f35     col_4   col_5
+00028130: 2020 2063 6f6c 5f36 2020 2063 6f6c 5f37     col_6   col_7
+00028140: 2020 2063 6f6c 5f38 2020 2063 6f6c 5f39     col_8   col_9
+00028150: 2020 2063 6f6c 5f31 3020 2020 636f 6c5f     col_10   col_
+00028160: 3131 0d0a 2020 2020 2020 2020 2d2d 2d20  11..        --- 
+00028170: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    --------------
+00028180: 2d2d 2d2d 2d2d 2d2d 2d20 2020 2d2d 2d2d  ---------   ----
+00028190: 2d20 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d  -   -----   ----
+000281a0: 2d20 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d  -   -----   ----
+000281b0: 2d20 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d  -   -----   ----
+000281c0: 2d20 2020 2d2d 2d2d 2d20 2020 2d2d 2d2d  -   -----   ----
+000281d0: 2d20 2020 2d2d 2d2d 2d2d 2020 202d 2d2d  -   ------   ---
+000281e0: 2d2d 2d0d 0a20 2020 2020 2020 2020 2030  ---..          0
+000281f0: 2020 206c 6f6e 675f 7374 7269 6e67 5f6c     long_string_l
+00028200: 6f6e 675f 7374 7269 6e67 2020 2020 2020  ong_string      
+00028210: 2030 2020 2020 2020 2030 2020 2020 2020   0       0      
+00028220: 2030 2020 2020 2020 2030 2020 2020 2020   0       0      
+00028230: 2030 2020 2020 2020 2030 2020 2020 2020   0       0      
+00028240: 2030 2020 2020 2020 2030 2020 2020 2020   0       0      
+00028250: 2030 2020 2020 2020 2020 3020 2020 2020   0        0     
+00028260: 2020 2030 0d0a 2020 2020 2020 2020 2020     0..          
+00028270: 3120 2020 6c6f 6e67 5f73 7472 696e 675f  1   long_string_
+00028280: 6c6f 6e67 5f73 7472 696e 6720 2020 2020  long_string     
+00028290: 2020 3120 2020 2020 2020 3120 2020 2020    1       1     
+000282a0: 2020 3120 2020 2020 2020 3120 2020 2020    1       1     
+000282b0: 2020 3120 2020 2020 2020 3120 2020 2020    1       1     
+000282c0: 2020 3120 2020 2020 2020 3120 2020 2020    1       1     
+000282d0: 2020 3120 2020 2020 2020 2031 2020 2020    1        1    
+000282e0: 2020 2020 310d 0a20 2020 2020 2020 2020      1..         
+000282f0: 2032 2020 206c 6f6e 675f 7374 7269 6e67   2   long_string
+00028300: 5f6c 6f6e 675f 7374 7269 6e67 2020 2020  _long_string    
+00028310: 2020 2032 2020 2020 2020 2032 2020 2020     2       2    
+00028320: 2020 2032 2020 2020 2020 2032 2020 2020     2       2    
+00028330: 2020 2032 2020 2020 2020 2032 2020 2020     2       2    
+00028340: 2020 2032 2020 2020 2020 2032 2020 2020     2       2    
+00028350: 2020 2032 2020 2020 2020 2020 3220 2020     2        2   
+00028360: 2020 2020 2032 0d0a 2020 2020 2020 2020       2..        
+00028370: 2020 3320 2020 6c6f 6e67 5f73 7472 696e    3   long_strin
+00028380: 675f 6c6f 6e67 5f73 7472 696e 6720 2020  g_long_string   
+00028390: 2020 2020 3320 2020 2020 2020 3320 2020      3       3   
+000283a0: 2020 2020 3320 2020 2020 2020 3320 2020      3       3   
+000283b0: 2020 2020 3320 2020 2020 2020 3320 2020      3       3   
+000283c0: 2020 2020 3320 2020 2020 2020 3320 2020      3       3   
+000283d0: 2020 2020 3320 2020 2020 2020 2033 2020      3        3  
+000283e0: 2020 2020 2020 330d 0a20 2020 2020 2020        3..       
+000283f0: 2020 2034 2020 206c 6f6e 675f 7374 7269     4   long_stri
+00028400: 6e67 5f6c 6f6e 675f 7374 7269 6e67 2020  ng_long_string  
+00028410: 2020 2020 2034 2020 2020 2020 2034 2020       4       4  
+00028420: 2020 2020 2034 2020 2020 2020 2034 2020       4       4  
+00028430: 2020 2020 2034 2020 2020 2020 2034 2020       4       4  
+00028440: 2020 2020 2034 2020 2020 2020 2034 2020       4       4  
+00028450: 2020 2020 2034 2020 2020 2020 2020 3420       4        4 
+00028460: 2020 2020 2020 2034 0d0a 2020 2020 2020         4..      
+00028470: 2020 2020 3520 2020 6c6f 6e67 5f73 7472      5   long_str
+00028480: 696e 675f 6c6f 6e67 5f73 7472 696e 6720  ing_long_string 
+00028490: 2020 2020 2020 3520 2020 2020 2020 3520        5       5 
+000284a0: 2020 2020 2020 3520 2020 2020 2020 3520        5       5 
+000284b0: 2020 2020 2020 3520 2020 2020 2020 3520        5       5 
+000284c0: 2020 2020 2020 3520 2020 2020 2020 3520        5       5 
+000284d0: 2020 2020 2020 3520 2020 2020 2020 2035        5        5
+000284e0: 2020 2020 2020 2020 350d 0a20 2020 2020          5..     
+000284f0: 2020 2020 2036 2020 206c 6f6e 675f 7374       6   long_st
+00028500: 7269 6e67 5f6c 6f6e 675f 7374 7269 6e67  ring_long_string
+00028510: 2020 2020 2020 2036 2020 2020 2020 2036         6       6
+00028520: 2020 2020 2020 2036 2020 2020 2020 2036         6       6
+00028530: 2020 2020 2020 2036 2020 2020 2020 2036         6       6
+00028540: 2020 2020 2020 2036 2020 2020 2020 2036         6       6
+00028550: 2020 2020 2020 2036 2020 2020 2020 2020         6        
+00028560: 3620 2020 2020 2020 2036 0d0a 2020 2020  6        6..    
+00028570: 2020 2020 2020 3720 2020 6c6f 6e67 5f73        7   long_s
+00028580: 7472 696e 675f 6c6f 6e67 5f73 7472 696e  tring_long_strin
+00028590: 6720 2020 2020 2020 3720 2020 2020 2020  g       7       
+000285a0: 3720 2020 2020 2020 3720 2020 2020 2020  7       7       
+000285b0: 3720 2020 2020 2020 3720 2020 2020 2020  7       7       
+000285c0: 3720 2020 2020 2020 3720 2020 2020 2020  7       7       
+000285d0: 3720 2020 2020 2020 3720 2020 2020 2020  7       7       
+000285e0: 2037 2020 2020 2020 2020 370d 0a20 2020   7        7..   
+000285f0: 2020 2020 2020 2038 2020 206c 6f6e 675f         8   long_
+00028600: 7374 7269 6e67 5f6c 6f6e 675f 7374 7269  string_long_stri
+00028610: 6e67 2020 2020 2020 2038 2020 2020 2020  ng       8      
+00028620: 2038 2020 2020 2020 2038 2020 2020 2020   8       8      
+00028630: 2038 2020 2020 2020 2038 2020 2020 2020   8       8      
+00028640: 2038 2020 2020 2020 2038 2020 2020 2020   8       8      
+00028650: 2038 2020 2020 2020 2038 2020 2020 2020   8       8      
+00028660: 2020 3820 2020 2020 2020 2038 0d0a 2020    8        8..  
+00028670: 2020 2020 2020 2020 3920 2020 6c6f 6e67          9   long
+00028680: 5f73 7472 696e 675f 6c6f 6e67 5f73 7472  _string_long_str
+00028690: 696e 6720 2020 2020 2020 3920 2020 2020  ing       9     
+000286a0: 2020 3920 2020 2020 2020 3920 2020 2020    9       9     
+000286b0: 2020 3920 2020 2020 2020 3920 2020 2020    9       9     
+000286c0: 2020 3920 2020 2020 2020 3920 2020 2020    9       9     
+000286d0: 2020 3920 2020 2020 2020 3920 2020 2020    9       9     
+000286e0: 2020 2039 2020 2020 2020 2020 390d 0a20     9        9.. 
+000286f0: 2020 2020 2020 2020 3130 2020 206c 6f6e          10   lon
+00028700: 675f 7374 7269 6e67 5f6c 6f6e 675f 7374  g_string_long_st
+00028710: 7269 6e67 2020 2020 2020 3130 2020 2020  ring      10    
+00028720: 2020 3130 2020 2020 2020 3130 2020 2020    10      10    
+00028730: 2020 3130 2020 2020 2020 3130 2020 2020    10      10    
+00028740: 2020 3130 2020 2020 2020 3130 2020 2020    10      10    
+00028750: 2020 3130 2020 2020 2020 3130 2020 2020    10      10    
+00028760: 2020 2031 3020 2020 2020 2020 3130 0d0a     10       10..
+00028770: 2020 2020 2020 2020 2031 3120 2020 6c6f           11   lo
+00028780: 6e67 5f73 7472 696e 675f 6c6f 6e67 5f73  ng_string_long_s
+00028790: 7472 696e 6720 2020 2020 2031 3120 2020  tring      11   
+000287a0: 2020 2031 3120 2020 2020 2031 3120 2020     11      11   
+000287b0: 2020 2031 3120 2020 2020 2031 3120 2020     11      11   
+000287c0: 2020 2031 3120 2020 2020 2031 3120 2020     11      11   
+000287d0: 2020 2031 3120 2020 2020 2031 3120 2020     11      11   
+000287e0: 2020 2020 3131 2020 2020 2020 2031 310d      11       11.
+000287f0: 0a20 2020 2020 2020 2020 3132 2020 206c  .         12   l
+00028800: 6f6e 675f 7374 7269 6e67 5f6c 6f6e 675f  ong_string_long_
+00028810: 7374 7269 6e67 2020 2020 2020 3132 2020  string      12  
+00028820: 2020 2020 3132 2020 2020 2020 3132 2020      12      12  
+00028830: 2020 2020 3132 2020 2020 2020 3132 2020      12      12  
+00028840: 2020 2020 3132 2020 2020 2020 3132 2020      12      12  
+00028850: 2020 2020 3132 2020 2020 2020 3132 2020      12      12  
+00028860: 2020 2020 2031 3220 2020 2020 2020 3132       12       12
+00028870: 0d0a 2020 2020 2020 2020 2031 3320 2020  ..         13   
+00028880: 6c6f 6e67 5f73 7472 696e 675f 6c6f 6e67  long_string_long
+00028890: 5f73 7472 696e 6720 2020 2020 2031 3320  _string      13 
+000288a0: 2020 2020 2031 3320 2020 2020 2031 3320       13      13 
+000288b0: 2020 2020 2031 3320 2020 2020 2031 3320       13      13 
+000288c0: 2020 2020 2031 3320 2020 2020 2031 3320       13      13 
+000288d0: 2020 2020 2031 3320 2020 2020 2031 3320       13      13 
+000288e0: 2020 2020 2020 3133 2020 2020 2020 2031        13       1
+000288f0: 330d 0a20 2020 2020 2020 2020 3134 2020  3..         14  
+00028900: 206c 6f6e 675f 7374 7269 6e67 5f6c 6f6e   long_string_lon
+00028910: 675f 7374 7269 6e67 2020 2020 2020 3134  g_string      14
+00028920: 2020 2020 2020 3134 2020 2020 2020 3134        14      14
+00028930: 2020 2020 2020 3134 2020 2020 2020 3134        14      14
+00028940: 2020 2020 2020 3134 2020 2020 2020 3134        14      14
+00028950: 2020 2020 2020 3134 2020 2020 2020 3134        14      14
+00028960: 2020 2020 2020 2031 3420 2020 2020 2020         14       
+00028970: 3134 0d0a 2020 2020 2020 2020 2031 3520  14..         15 
+00028980: 2020 6c6f 6e67 5f73 7472 696e 675f 6c6f    long_string_lo
+00028990: 6e67 5f73 7472 696e 6720 2020 2020 2031  ng_string      1
+000289a0: 3520 2020 2020 2031 3520 2020 2020 2031  5      15      1
+000289b0: 3520 2020 2020 2031 3520 2020 2020 2031  5      15      1
+000289c0: 3520 2020 2020 2031 3520 2020 2020 2031  5      15      1
+000289d0: 3520 2020 2020 2031 3520 2020 2020 2031  5      15      1
+000289e0: 3520 2020 2020 2020 3135 2020 2020 2020  5       15      
+000289f0: 2031 350d 0a20 2020 2020 2020 2020 3136   15..         16
+00028a00: 2020 206c 6f6e 675f 7374 7269 6e67 5f6c     long_string_l
+00028a10: 6f6e 675f 7374 7269 6e67 2020 2020 2020  ong_string      
+00028a20: 3136 2020 2020 2020 3136 2020 2020 2020  16      16      
+00028a30: 3136 2020 2020 2020 3136 2020 2020 2020  16      16      
+00028a40: 3136 2020 2020 2020 3136 2020 2020 2020  16      16      
+00028a50: 3136 2020 2020 2020 3136 2020 2020 2020  16      16      
+00028a60: 3136 2020 2020 2020 2031 3620 2020 2020  16       16     
+00028a70: 2020 3136 0d0a 2020 2020 2020 2020 2031    16..         1
+00028a80: 3720 2020 6c6f 6e67 5f73 7472 696e 675f  7   long_string_
+00028a90: 6c6f 6e67 5f73 7472 696e 6720 2020 2020  long_string     
+00028aa0: 2031 3720 2020 2020 2031 3720 2020 2020   17      17     
+00028ab0: 2031 3720 2020 2020 2031 3720 2020 2020   17      17     
+00028ac0: 2031 3720 2020 2020 2031 3720 2020 2020   17      17     
+00028ad0: 2031 3720 2020 2020 2031 3720 2020 2020   17      17     
+00028ae0: 2031 3720 2020 2020 2020 3137 2020 2020   17       17    
+00028af0: 2020 2031 370d 0a20 2020 2020 2020 2020     17..         
+00028b00: 3138 2020 206c 6f6e 675f 7374 7269 6e67  18   long_string
+00028b10: 5f6c 6f6e 675f 7374 7269 6e67 2020 2020  _long_string    
+00028b20: 2020 3138 2020 2020 2020 3138 2020 2020    18      18    
+00028b30: 2020 3138 2020 2020 2020 3138 2020 2020    18      18    
+00028b40: 2020 3138 2020 2020 2020 3138 2020 2020    18      18    
+00028b50: 2020 3138 2020 2020 2020 3138 2020 2020    18      18    
+00028b60: 2020 3138 2020 2020 2020 2031 3820 2020    18       18   
+00028b70: 2020 2020 3138 0d0a 2020 2020 2020 2020      18..        
+00028b80: 2031 3920 2020 6c6f 6e67 5f73 7472 696e   19   long_strin
+00028b90: 675f 6c6f 6e67 5f73 7472 696e 6720 2020  g_long_string   
+00028ba0: 2020 2031 3920 2020 2020 2031 3920 2020     19      19   
+00028bb0: 2020 2031 3920 2020 2020 2031 3920 2020     19      19   
+00028bc0: 2020 2031 3920 2020 2020 2031 3920 2020     19      19   
+00028bd0: 2020 2031 3920 2020 2020 2031 3920 2020     19      19   
+00028be0: 2020 2031 3920 2020 2020 2020 3139 2020     19       19  
+00028bf0: 2020 2020 2031 390d 0a20 2020 2020 2020       19..       
+00028c00: 2020 3230 2020 206c 6f6e 675f 7374 7269    20   long_stri
+00028c10: 6e67 5f6c 6f6e 675f 7374 7269 6e67 2020  ng_long_string  
+00028c20: 2020 2020 3230 2020 2020 2020 3230 2020      20      20  
+00028c30: 2020 2020 3230 2020 2020 2020 3230 2020      20      20  
+00028c40: 2020 2020 3230 2020 2020 2020 3230 2020      20      20  
+00028c50: 2020 2020 3230 2020 2020 2020 3230 2020      20      20  
+00028c60: 2020 2020 3230 2020 2020 2020 2032 3020      20       20 
+00028c70: 2020 2020 2020 3230 0d0a 2020 2020 2020        20..      
+00028c80: 2020 2032 3120 2020 6c6f 6e67 5f73 7472     21   long_str
+00028c90: 696e 675f 6c6f 6e67 5f73 7472 696e 6720  ing_long_string 
+00028ca0: 2020 2020 2032 3120 2020 2020 2032 3120       21      21 
+00028cb0: 2020 2020 2032 3120 2020 2020 2032 3120       21      21 
+00028cc0: 2020 2020 2032 3120 2020 2020 2032 3120       21      21 
+00028cd0: 2020 2020 2032 3120 2020 2020 2032 3120       21      21 
+00028ce0: 2020 2020 2032 3120 2020 2020 2020 3231       21       21
+00028cf0: 2020 2020 2020 2032 310d 0a20 2020 2020         21..     
+00028d00: 2020 2020 3232 2020 206c 6f6e 675f 7374      22   long_st
+00028d10: 7269 6e67 5f6c 6f6e 675f 7374 7269 6e67  ring_long_string
+00028d20: 2020 2020 2020 3232 2020 2020 2020 3232        22      22
+00028d30: 2020 2020 2020 3232 2020 2020 2020 3232        22      22
+00028d40: 2020 2020 2020 3232 2020 2020 2020 3232        22      22
+00028d50: 2020 2020 2020 3232 2020 2020 2020 3232        22      22
+00028d60: 2020 2020 2020 3232 2020 2020 2020 2032        22       2
+00028d70: 3220 2020 2020 2020 3232 0d0a 2020 2020  2       22..    
+00028d80: 2020 2020 2032 3320 2020 6c6f 6e67 5f73       23   long_s
+00028d90: 7472 696e 675f 6c6f 6e67 5f73 7472 696e  tring_long_strin
+00028da0: 6720 2020 2020 2032 3320 2020 2020 2032  g      23      2
+00028db0: 3320 2020 2020 2032 3320 2020 2020 2032  3      23      2
+00028dc0: 3320 2020 2020 2032 3320 2020 2020 2032  3      23      2
+00028dd0: 3320 2020 2020 2032 3320 2020 2020 2032  3      23      2
+00028de0: 3320 2020 2020 2032 3320 2020 2020 2020  3      23       
+00028df0: 3233 2020 2020 2020 2032 330d 0a20 2020  23       23..   
+00028e00: 2020 2020 2020 3234 2020 206c 6f6e 675f        24   long_
+00028e10: 7374 7269 6e67 5f6c 6f6e 675f 7374 7269  string_long_stri
+00028e20: 6e67 2020 2020 2020 3234 2020 2020 2020  ng      24      
+00028e30: 3234 2020 2020 2020 3234 2020 2020 2020  24      24      
+00028e40: 3234 2020 2020 2020 3234 2020 2020 2020  24      24      
+00028e50: 3234 2020 2020 2020 3234 2020 2020 2020  24      24      
+00028e60: 3234 2020 2020 2020 3234 2020 2020 2020  24      24      
+00028e70: 2032 3420 2020 2020 2020 3234 0d0a 2020   24       24..  
+00028e80: 2020 2020 2020 2032 3520 2020 6c6f 6e67         25   long
+00028e90: 5f73 7472 696e 675f 6c6f 6e67 5f73 7472  _string_long_str
+00028ea0: 696e 6720 2020 2020 2032 3520 2020 2020  ing      25     
+00028eb0: 2032 3520 2020 2020 2032 3520 2020 2020   25      25     
+00028ec0: 2032 3520 2020 2020 2032 3520 2020 2020   25      25     
+00028ed0: 2032 3520 2020 2020 2032 3520 2020 2020   25      25     
+00028ee0: 2032 3520 2020 2020 2032 3520 2020 2020   25      25     
+00028ef0: 2020 3235 2020 2020 2020 2032 350d 0a20    25       25.. 
+00028f00: 2020 2020 2020 2020 3236 2020 206c 6f6e          26   lon
+00028f10: 675f 7374 7269 6e67 5f6c 6f6e 675f 7374  g_string_long_st
+00028f20: 7269 6e67 2020 2020 2020 3236 2020 2020  ring      26    
+00028f30: 2020 3236 2020 2020 2020 3236 2020 2020    26      26    
+00028f40: 2020 3236 2020 2020 2020 3236 2020 2020    26      26    
+00028f50: 2020 3236 2020 2020 2020 3236 2020 2020    26      26    
+00028f60: 2020 3236 2020 2020 2020 3236 2020 2020    26      26    
+00028f70: 2020 2032 3620 2020 2020 2020 3236 0d0a     26       26..
+00028f80: 2020 2020 2020 2020 2032 3720 2020 6c6f           27   lo
+00028f90: 6e67 5f73 7472 696e 675f 6c6f 6e67 5f73  ng_string_long_s
+00028fa0: 7472 696e 6720 2020 2020 2032 3720 2020  tring      27   
+00028fb0: 2020 2032 3720 2020 2020 2032 3720 2020     27      27   
+00028fc0: 2020 2032 3720 2020 2020 2032 3720 2020     27      27   
+00028fd0: 2020 2032 3720 2020 2020 2032 3720 2020     27      27   
+00028fe0: 2020 2032 3720 2020 2020 2032 3720 2020     27      27   
+00028ff0: 2020 2020 3237 2020 2020 2020 2032 370d      27       27.
+00029000: 0a20 2020 2020 2020 2020 3238 2020 206c  .         28   l
+00029010: 6f6e 675f 7374 7269 6e67 5f6c 6f6e 675f  ong_string_long_
+00029020: 7374 7269 6e67 2020 2020 2020 3238 2020  string      28  
+00029030: 2020 2020 3238 2020 2020 2020 3238 2020      28      28  
+00029040: 2020 2020 3238 2020 2020 2020 3238 2020      28      28  
+00029050: 2020 2020 3238 2020 2020 2020 3238 2020      28      28  
+00029060: 2020 2020 3238 2020 2020 2020 3238 2020      28      28  
+00029070: 2020 2020 2032 3820 2020 2020 2020 3238       28       28
+00029080: 0d0a 2020 2020 2020 2020 2032 3920 2020  ..         29   
+00029090: 6c6f 6e67 5f73 7472 696e 675f 6c6f 6e67  long_string_long
+000290a0: 5f73 7472 696e 6720 2020 2020 2032 3920  _string      29 
+000290b0: 2020 2020 2032 3920 2020 2020 2032 3920       29      29 
+000290c0: 2020 2020 2032 3920 2020 2020 2032 3920       29      29 
+000290d0: 2020 2020 2032 3920 2020 2020 2032 3920       29      29 
+000290e0: 2020 2020 2032 3920 2020 2020 2032 3920       29      29 
+000290f0: 2020 2020 2020 3239 2020 2020 2020 2032        29       2
+00029100: 390d 0a20 2020 2020 2020 2020 3330 2020  9..         30  
+00029110: 206c 6f6e 675f 7374 7269 6e67 5f6c 6f6e   long_string_lon
+00029120: 675f 7374 7269 6e67 2020 2020 2020 3330  g_string      30
+00029130: 2020 2020 2020 3330 2020 2020 2020 3330        30      30
+00029140: 2020 2020 2020 3330 2020 2020 2020 3330        30      30
+00029150: 2020 2020 2020 3330 2020 2020 2020 3330        30      30
+00029160: 2020 2020 2020 3330 2020 2020 2020 3330        30      30
+00029170: 2020 2020 2020 2033 3020 2020 2020 2020         30       
+00029180: 3330 0d0a 2020 2020 2020 2020 2222 220d  30..        """.
+00029190: 0a20 2020 2020 2020 206d 6178 726f 7773  .        maxrows
+000291a0: 203d 2031 305f 3030 300d 0a20 2020 2020   = 10_000..     
+000291b0: 2020 206e 756d 726f 7773 203d 2073 656c     numrows = sel
+000291c0: 662e 5f6e 726f 7773 0d0a 2020 2020 2020  f._nrows..      
+000291d0: 2020 6966 206e 756d 726f 7773 203e 206d    if numrows > m
+000291e0: 6178 726f 7773 3a0d 0a20 2020 2020 2020  axrows:..       
+000291f0: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
+00029200: 4572 726f 7228 0d0a 2020 2020 2020 2020  Error(..        
+00029210: 2020 2020 2020 2020 6622 4461 7461 7365          f"Datase
+00029220: 7420 6861 7320 6d6f 7265 2074 6861 6e20  t has more than 
+00029230: 3130 2c30 3030 2072 6f77 732e 2043 616e  10,000 rows. Can
+00029240: 6e6f 7420 6469 7370 6c61 7920 616c 6c20  not display all 
+00029250: 726f 7773 2e20 546f 206f 7665 7272 6964  rows. To overrid
+00029260: 652c 2073 6574 2044 6973 706c 6179 2e6f  e, set Display.o
+00029270: 7074 696f 6e73 2e52 4f57 5f41 4c4c 203d  ptions.ROW_ALL =
+00029280: 2054 7275 6520 616e 6420 7072 696e 7428   True and print(
+00029290: 6473 2922 0d0a 2020 2020 2020 2020 2020  ds)"..          
+000292a0: 2020 290d 0a20 2020 2020 2020 2072 6574    )..        ret
+000292b0: 7572 6e20 7365 6c66 2e5f 7465 6d70 5f64  urn self._temp_d
+000292c0: 6973 706c 6179 285b 2243 4f4c 5f41 4c4c  isplay(["COL_ALL
+000292d0: 222c 2022 524f 575f 414c 4c22 2c20 224d  ", "ROW_ALL", "M
+000292e0: 4158 5f53 5452 494e 475f 5749 4454 4822  AX_STRING_WIDTH"
+000292f0: 5d2c 205b 5472 7565 2c20 5472 7565 2c20  ], [True, True, 
+00029300: 3130 3030 5d29 0d0a 0d0a 2020 2020 2320  1000])....    # 
+00029310: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00029320: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00029330: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00029340: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00029350: 2d2d 2d0d 0a20 2020 2064 6566 205f 7465  ---..    def _te
-00029360: 6d70 5f64 6973 706c 6179 2873 656c 662c  mp_display(self,
-00029370: 206f 7074 696f 6e2c 2076 616c 7565 293a   option, value):
-00029380: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00029390: 2020 2020 2020 2054 656d 706f 7261 7269         Temporari
-000293a0: 6c79 206d 6f64 6966 7920 6120 6469 7370  ly modify a disp
-000293b0: 6c61 7920 6f70 7469 6f6e 2077 6865 6e20  lay option when 
-000293c0: 6765 6e65 7261 7469 6e67 2064 6174 6173  generating datas
-000293d0: 6574 2064 6973 706c 6179 2e0d 0a20 2020  et display...   
-000293e0: 2020 2020 2055 7365 7220 636f 6e66 6967       User config
-000293f0: 7572 6564 206f 7074 696f 6e20 286f 7220  ured option (or 
-00029400: 6465 6661 756c 7429 2077 696c 6c20 6265  default) will be
-00029410: 2072 6573 746f 7265 6420 6166 7465 7220   restored after 
-00029420: 6469 7370 6c61 7920 7374 7269 6e67 2069  display string i
-00029430: 7320 6765 6e65 7261 7465 642e 0d0a 2020  s generated...  
-00029440: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00029450: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
-00029460: 616e 6365 286f 7074 696f 6e2c 206c 6973  ance(option, lis
-00029470: 7429 3a0d 0a20 2020 2020 2020 2020 2020  t):..           
-00029480: 206f 7074 696f 6e20 3d20 5b6f 7074 696f   option = [optio
-00029490: 6e5d 0d0a 2020 2020 2020 2020 6966 206e  n]..        if n
-000294a0: 6f74 2069 7369 6e73 7461 6e63 6528 7661  ot isinstance(va
-000294b0: 6c75 652c 206c 6973 7429 3a0d 0a20 2020  lue, list):..   
-000294c0: 2020 2020 2020 2020 2076 616c 7565 203d           value =
-000294d0: 205b 7661 6c75 655d 0d0a 0d0a 2020 2020   [value]....    
-000294e0: 2020 2020 2320 7374 6f72 6520 7365 7474      # store sett
-000294f0: 696e 670d 0a20 2020 2020 2020 2072 6576  ing..        rev
-00029500: 6572 7420 3d20 5b67 6574 6174 7472 2854  ert = [getattr(T
-00029510: 7970 6552 6567 6973 7465 722e 4469 7370  ypeRegister.Disp
-00029520: 6c61 794f 7074 696f 6e73 2c20 6f70 7429  layOptions, opt)
-00029530: 2066 6f72 206f 7074 2069 6e20 6f70 7469   for opt in opti
-00029540: 6f6e 5d0d 0a20 2020 2020 2020 2066 6f72  on]..        for
-00029550: 2069 2c20 7620 696e 2065 6e75 6d65 7261   i, v in enumera
-00029560: 7465 2876 616c 7565 293a 0d0a 2020 2020  te(value):..    
-00029570: 2020 2020 2020 2020 7365 7461 7474 7228          setattr(
-00029580: 5479 7065 5265 6769 7374 6572 2e44 6973  TypeRegister.Dis
-00029590: 706c 6179 4f70 7469 6f6e 732c 206f 7074  playOptions, opt
-000295a0: 696f 6e5b 695d 2c20 7629 0d0a 0d0a 2020  ion[i], v)....  
-000295b0: 2020 2020 2020 2320 6275 696c 6420 7374        # build st
-000295c0: 7269 6e67 2028 7265 7072 206f 7220 6874  ring (repr or ht
-000295d0: 6d6c 290d 0a20 2020 2020 2020 2064 6973  ml)..        dis
-000295e0: 706c 6179 5f74 7970 6520 3d20 7365 6c66  play_type = self
-000295f0: 2e5f 6765 745f 6669 6e61 6c5f 6469 7370  ._get_final_disp
-00029600: 6c61 795f 6d6f 6465 2829 0d0a 2020 2020  lay_mode()..    
-00029610: 2020 2020 6f75 7470 7574 203d 2073 656c      output = sel
-00029620: 662e 6d61 6b65 5f74 6162 6c65 2864 6973  f.make_table(dis
-00029630: 706c 6179 5f74 7970 6529 0d0a 0d0a 2020  play_type)....  
-00029640: 2020 2020 2020 2320 7265 7374 6f72 6520        # restore 
-00029650: 7365 7474 696e 670d 0a20 2020 2020 2020  setting..       
-00029660: 2066 6f72 2069 2c20 7265 7620 696e 2065   for i, rev in e
-00029670: 6e75 6d65 7261 7465 2872 6576 6572 7429  numerate(revert)
-00029680: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-00029690: 6574 6174 7472 2854 7970 6552 6567 6973  etattr(TypeRegis
-000296a0: 7465 722e 4469 7370 6c61 794f 7074 696f  ter.DisplayOptio
-000296b0: 6e73 2c20 6f70 7469 6f6e 5b69 5d2c 2072  ns, option[i], r
-000296c0: 6576 290d 0a20 2020 2020 2020 2072 6574  ev)..        ret
-000296d0: 7572 6e20 5479 7065 5265 6769 7374 6572  urn TypeRegister
-000296e0: 2e44 6973 706c 6179 5374 7269 6e67 286f  .DisplayString(o
-000296f0: 7574 7075 7429 0d0a 0d0a 2020 2020 2320  utput)....    # 
+00029340: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
+00029350: 205f 7465 6d70 5f64 6973 706c 6179 2873   _temp_display(s
+00029360: 656c 662c 206f 7074 696f 6e2c 2076 616c  elf, option, val
+00029370: 7565 293a 0d0a 2020 2020 2020 2020 2222  ue):..        ""
+00029380: 220d 0a20 2020 2020 2020 2054 656d 706f  "..        Tempo
+00029390: 7261 7269 6c79 206d 6f64 6966 7920 6120  rarily modify a 
+000293a0: 6469 7370 6c61 7920 6f70 7469 6f6e 2077  display option w
+000293b0: 6865 6e20 6765 6e65 7261 7469 6e67 2064  hen generating d
+000293c0: 6174 6173 6574 2064 6973 706c 6179 2e0d  ataset display..
+000293d0: 0a20 2020 2020 2020 2055 7365 7220 636f  .        User co
+000293e0: 6e66 6967 7572 6564 206f 7074 696f 6e20  nfigured option 
+000293f0: 286f 7220 6465 6661 756c 7429 2077 696c  (or default) wil
+00029400: 6c20 6265 2072 6573 746f 7265 6420 6166  l be restored af
+00029410: 7465 7220 6469 7370 6c61 7920 7374 7269  ter display stri
+00029420: 6e67 2069 7320 6765 6e65 7261 7465 642e  ng is generated.
+00029430: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00029440: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
+00029450: 696e 7374 616e 6365 286f 7074 696f 6e2c  instance(option,
+00029460: 206c 6973 7429 3a0d 0a20 2020 2020 2020   list):..       
+00029470: 2020 2020 206f 7074 696f 6e20 3d20 5b6f       option = [o
+00029480: 7074 696f 6e5d 0d0a 2020 2020 2020 2020  ption]..        
+00029490: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
+000294a0: 6528 7661 6c75 652c 206c 6973 7429 3a0d  e(value, list):.
+000294b0: 0a20 2020 2020 2020 2020 2020 2076 616c  .            val
+000294c0: 7565 203d 205b 7661 6c75 655d 0d0a 0d0a  ue = [value]....
+000294d0: 2020 2020 2020 2020 2320 7374 6f72 6520          # store 
+000294e0: 7365 7474 696e 670d 0a20 2020 2020 2020  setting..       
+000294f0: 2072 6576 6572 7420 3d20 5b67 6574 6174   revert = [getat
+00029500: 7472 2854 7970 6552 6567 6973 7465 722e  tr(TypeRegister.
+00029510: 4469 7370 6c61 794f 7074 696f 6e73 2c20  DisplayOptions, 
+00029520: 6f70 7429 2066 6f72 206f 7074 2069 6e20  opt) for opt in 
+00029530: 6f70 7469 6f6e 5d0d 0a20 2020 2020 2020  option]..       
+00029540: 2066 6f72 2069 2c20 7620 696e 2065 6e75   for i, v in enu
+00029550: 6d65 7261 7465 2876 616c 7565 293a 0d0a  merate(value):..
+00029560: 2020 2020 2020 2020 2020 2020 7365 7461              seta
+00029570: 7474 7228 5479 7065 5265 6769 7374 6572  ttr(TypeRegister
+00029580: 2e44 6973 706c 6179 4f70 7469 6f6e 732c  .DisplayOptions,
+00029590: 206f 7074 696f 6e5b 695d 2c20 7629 0d0a   option[i], v)..
+000295a0: 0d0a 2020 2020 2020 2020 2320 6275 696c  ..        # buil
+000295b0: 6420 7374 7269 6e67 2028 7265 7072 206f  d string (repr o
+000295c0: 7220 6874 6d6c 290d 0a20 2020 2020 2020  r html)..       
+000295d0: 2064 6973 706c 6179 5f74 7970 6520 3d20   display_type = 
+000295e0: 7365 6c66 2e5f 6765 745f 6669 6e61 6c5f  self._get_final_
+000295f0: 6469 7370 6c61 795f 6d6f 6465 2829 0d0a  display_mode()..
+00029600: 2020 2020 2020 2020 6f75 7470 7574 203d          output =
+00029610: 2073 656c 662e 6d61 6b65 5f74 6162 6c65   self.make_table
+00029620: 2864 6973 706c 6179 5f74 7970 6529 0d0a  (display_type)..
+00029630: 0d0a 2020 2020 2020 2020 2320 7265 7374  ..        # rest
+00029640: 6f72 6520 7365 7474 696e 670d 0a20 2020  ore setting..   
+00029650: 2020 2020 2066 6f72 2069 2c20 7265 7620       for i, rev 
+00029660: 696e 2065 6e75 6d65 7261 7465 2872 6576  in enumerate(rev
+00029670: 6572 7429 3a0d 0a20 2020 2020 2020 2020  ert):..         
+00029680: 2020 2073 6574 6174 7472 2854 7970 6552     setattr(TypeR
+00029690: 6567 6973 7465 722e 4469 7370 6c61 794f  egister.DisplayO
+000296a0: 7074 696f 6e73 2c20 6f70 7469 6f6e 5b69  ptions, option[i
+000296b0: 5d2c 2072 6576 290d 0a20 2020 2020 2020  ], rev)..       
+000296c0: 2072 6574 7572 6e20 5479 7065 5265 6769   return TypeRegi
+000296d0: 7374 6572 2e44 6973 706c 6179 5374 7269  ster.DisplayStri
+000296e0: 6e67 286f 7574 7075 7429 0d0a 0d0a 2020  ng(output)....  
+000296f0: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
 00029700: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00029710: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00029720: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00029730: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
-00029740: 205f 6765 745f 6669 6e61 6c5f 6469 7370   _get_final_disp
-00029750: 6c61 795f 6d6f 6465 2873 656c 662c 2070  lay_mode(self, p
-00029760: 6c61 696e 3d46 616c 7365 293a 0d0a 2020  lain=False):..  
-00029770: 2020 2020 2020 6966 2054 7970 6552 6567        if TypeReg
-00029780: 6973 7465 722e 4469 7370 6c61 794f 7074  ister.DisplayOpt
-00029790: 696f 6e73 2e48 544d 4c5f 4449 5350 4c41  ions.HTML_DISPLA
-000297a0: 5920 6973 2046 616c 7365 3a0d 0a20 2020  Y is False:..   
-000297b0: 2020 2020 2020 2020 2064 6973 706c 6179           display
-000297c0: 5f74 7970 6520 3d20 4453 5f44 4953 504c  _type = DS_DISPL
-000297d0: 4159 5f54 5950 4553 2e53 5452 0d0a 2020  AY_TYPES.STR..  
-000297e0: 2020 2020 2020 656c 6966 2070 6c61 696e        elif plain
-000297f0: 206f 7220 5479 7065 5265 6769 7374 6572   or TypeRegister
-00029800: 2e44 6973 706c 6179 4465 7465 6374 2e4d  .DisplayDetect.M
-00029810: 6f64 6520 3d3d 2044 6973 706c 6179 4465  ode == DisplayDe
-00029820: 7465 6374 4d6f 6465 732e 436f 6e73 6f6c  tectModes.Consol
-00029830: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00029840: 6469 7370 6c61 795f 7479 7065 203d 2044  display_type = D
-00029850: 535f 4449 5350 4c41 595f 5459 5045 532e  S_DISPLAY_TYPES.
-00029860: 5354 520d 0a20 2020 2020 2020 2065 6c69  STR..        eli
-00029870: 6620 5479 7065 5265 6769 7374 6572 2e44  f TypeRegister.D
-00029880: 6973 706c 6179 4465 7465 6374 2e4d 6f64  isplayDetect.Mod
-00029890: 6520 3d3d 2044 6973 706c 6179 4465 7465  e == DisplayDete
-000298a0: 6374 4d6f 6465 732e 4854 4d4c 3a0d 0a20  ctModes.HTML:.. 
-000298b0: 2020 2020 2020 2020 2020 2064 6973 706c             displ
-000298c0: 6179 5f74 7970 6520 3d20 4453 5f44 4953  ay_type = DS_DIS
-000298d0: 504c 4159 5f54 5950 4553 2e48 544d 4c0d  PLAY_TYPES.HTML.
-000298e0: 0a20 2020 2020 2020 2065 6c69 6620 5479  .        elif Ty
-000298f0: 7065 5265 6769 7374 6572 2e44 6973 706c  peRegister.Displ
-00029900: 6179 4465 7465 6374 2e4d 6f64 6520 3d3d  ayDetect.Mode ==
-00029910: 2044 6973 706c 6179 4465 7465 6374 4d6f   DisplayDetectMo
-00029920: 6465 732e 4a75 7079 7465 723a 0d0a 2020  des.Jupyter:..  
-00029930: 2020 2020 2020 2020 2020 6469 7370 6c61            displa
-00029940: 795f 7479 7065 203d 2044 535f 4449 5350  y_type = DS_DISP
-00029950: 4c41 595f 5459 5045 532e 4854 4d4c 0d0a  LAY_TYPES.HTML..
-00029960: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00029970: 2020 2020 2020 2020 2020 2064 6973 706c             displ
-00029980: 6179 5f74 7970 6520 3d20 4453 5f44 4953  ay_type = DS_DIS
-00029990: 504c 4159 5f54 5950 4553 2e52 4550 520d  PLAY_TYPES.REPR.
-000299a0: 0a0d 0a20 2020 2020 2020 2072 6574 7572  ...        retur
-000299b0: 6e20 6469 7370 6c61 795f 7479 7065 0d0a  n display_type..
-000299c0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+00029720: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
+00029730: 2064 6566 205f 6765 745f 6669 6e61 6c5f   def _get_final_
+00029740: 6469 7370 6c61 795f 6d6f 6465 2873 656c  display_mode(sel
+00029750: 662c 2070 6c61 696e 3d46 616c 7365 293a  f, plain=False):
+00029760: 0d0a 2020 2020 2020 2020 6966 2054 7970  ..        if Typ
+00029770: 6552 6567 6973 7465 722e 4469 7370 6c61  eRegister.Displa
+00029780: 794f 7074 696f 6e73 2e48 544d 4c5f 4449  yOptions.HTML_DI
+00029790: 5350 4c41 5920 6973 2046 616c 7365 3a0d  SPLAY is False:.
+000297a0: 0a20 2020 2020 2020 2020 2020 2064 6973  .            dis
+000297b0: 706c 6179 5f74 7970 6520 3d20 4453 5f44  play_type = DS_D
+000297c0: 4953 504c 4159 5f54 5950 4553 2e53 5452  ISPLAY_TYPES.STR
+000297d0: 0d0a 2020 2020 2020 2020 656c 6966 2070  ..        elif p
+000297e0: 6c61 696e 206f 7220 5479 7065 5265 6769  lain or TypeRegi
+000297f0: 7374 6572 2e44 6973 706c 6179 4465 7465  ster.DisplayDete
+00029800: 6374 2e4d 6f64 6520 3d3d 2044 6973 706c  ct.Mode == Displ
+00029810: 6179 4465 7465 6374 4d6f 6465 732e 436f  ayDetectModes.Co
+00029820: 6e73 6f6c 653a 0d0a 2020 2020 2020 2020  nsole:..        
+00029830: 2020 2020 6469 7370 6c61 795f 7479 7065      display_type
+00029840: 203d 2044 535f 4449 5350 4c41 595f 5459   = DS_DISPLAY_TY
+00029850: 5045 532e 5354 520d 0a20 2020 2020 2020  PES.STR..       
+00029860: 2065 6c69 6620 5479 7065 5265 6769 7374   elif TypeRegist
+00029870: 6572 2e44 6973 706c 6179 4465 7465 6374  er.DisplayDetect
+00029880: 2e4d 6f64 6520 3d3d 2044 6973 706c 6179  .Mode == Display
+00029890: 4465 7465 6374 4d6f 6465 732e 4854 4d4c  DetectModes.HTML
+000298a0: 3a0d 0a20 2020 2020 2020 2020 2020 2064  :..            d
+000298b0: 6973 706c 6179 5f74 7970 6520 3d20 4453  isplay_type = DS
+000298c0: 5f44 4953 504c 4159 5f54 5950 4553 2e48  _DISPLAY_TYPES.H
+000298d0: 544d 4c0d 0a20 2020 2020 2020 2065 6c69  TML..        eli
+000298e0: 6620 5479 7065 5265 6769 7374 6572 2e44  f TypeRegister.D
+000298f0: 6973 706c 6179 4465 7465 6374 2e4d 6f64  isplayDetect.Mod
+00029900: 6520 3d3d 2044 6973 706c 6179 4465 7465  e == DisplayDete
+00029910: 6374 4d6f 6465 732e 4a75 7079 7465 723a  ctModes.Jupyter:
+00029920: 0d0a 2020 2020 2020 2020 2020 2020 6469  ..            di
+00029930: 7370 6c61 795f 7479 7065 203d 2044 535f  splay_type = DS_
+00029940: 4449 5350 4c41 595f 5459 5045 532e 4854  DISPLAY_TYPES.HT
+00029950: 4d4c 0d0a 2020 2020 2020 2020 656c 7365  ML..        else
+00029960: 3a0d 0a20 2020 2020 2020 2020 2020 2064  :..            d
+00029970: 6973 706c 6179 5f74 7970 6520 3d20 4453  isplay_type = DS
+00029980: 5f44 4953 504c 4159 5f54 5950 4553 2e52  _DISPLAY_TYPES.R
+00029990: 4550 520d 0a0d 0a20 2020 2020 2020 2072  EPR....        r
+000299a0: 6574 7572 6e20 6469 7370 6c61 795f 7479  eturn display_ty
+000299b0: 7065 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  pe....    # ----
+000299c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000299d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000299e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000299f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
-00029a00: 0a20 2020 2064 6566 2064 6973 706c 6179  .    def display
-00029a10: 5f61 7474 7269 6275 7465 7328 7365 6c66  _attributes(self
-00029a20: 293a 0d0a 2020 2020 2020 2020 2222 220d  ):..        """.
-00029a30: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
-00029a40: 2061 2064 6963 7420 6f66 2064 6973 706c   a dict of displ
-00029a50: 6179 2061 7474 7269 6275 7465 732c 2063  ay attributes, c
-00029a60: 7572 7265 6e74 6c79 2063 6f6e 7369 7374  urrently consist
-00029a70: 696e 6720 6f66 0d0a 2020 2020 2020 2020  ing of..        
-00029a80: 4e75 6d62 6572 4f66 466f 6f74 6572 526f  NumberOfFooterRo
-00029a90: 7773 2061 6e64 2061 206c 6973 7420 6f66  ws and a list of
-00029aa0: 204d 6172 6769 6e43 6f6c 756d 6e73 2e0d   MarginColumns..
-00029ab0: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
-00029ac0: 6e73 0d0a 2020 2020 2020 2020 2d2d 2d2d  ns..        ----
-00029ad0: 2d2d 2d0d 0a20 2020 2020 2020 2064 203a  ---..        d :
-00029ae0: 2064 6963 740d 0a20 2020 2020 2020 2020   dict..         
-00029af0: 2020 2041 2064 6963 7469 6f6e 6172 7920     A dictionary 
-00029b00: 6f66 2064 6973 706c 6179 2061 7474 7269  of display attri
-00029b10: 6275 7465 730d 0a20 2020 2020 2020 2022  butes..        "
-00029b20: 2222 0d0a 2020 2020 2020 2020 6174 7472  ""..        attr
-00029b30: 6962 7320 3d20 6469 6374 2829 0d0a 2020  ibs = dict()..  
-00029b40: 2020 2020 2020 2320 466f 6f74 6572 2072        # Footer r
-00029b50: 6f77 730d 0a20 2020 2020 2020 2061 7474  ows..        att
-00029b60: 7269 6273 5b54 7970 6552 6567 6973 7465  ribs[TypeRegiste
-00029b70: 722e 4469 7370 6c61 7941 7474 7269 6275  r.DisplayAttribu
-00029b80: 7465 732e 4e55 4d42 4552 5f4f 465f 464f  tes.NUMBER_OF_FO
-00029b90: 4f54 4552 5f52 4f57 535d 203d 2067 6574  OTER_ROWS] = get
-00029ba0: 6174 7472 280d 0a20 2020 2020 2020 2020  attr(..         
-00029bb0: 2020 2073 656c 662e 5f61 6c6c 5f69 7465     self._all_ite
-00029bc0: 6d73 2c20 4154 5452 4942 5554 455f 4e55  ms, ATTRIBUTE_NU
-00029bd0: 4d42 4552 5f4f 465f 464f 4f54 4552 5f52  MBER_OF_FOOTER_R
-00029be0: 4f57 532c 2030 0d0a 2020 2020 2020 2020  OWS, 0..        
-00029bf0: 290d 0a20 2020 2020 2020 2023 204d 6172  )..        # Mar
-00029c00: 6769 6e20 636f 6c75 6d6e 730d 0a20 2020  gin columns..   
-00029c10: 2020 2020 2063 6f6c 7320 3d20 5b5d 0d0a       cols = []..
-00029c20: 2020 2020 2020 2020 666f 7220 6e61 6d65          for name
-00029c30: 2069 6e20 7365 6c66 2e5f 616c 6c5f 6974   in self._all_it
-00029c40: 656d 732e 6b65 7973 2829 3a0d 0a20 2020  ems.keys():..   
-00029c50: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-00029c60: 2e5f 616c 6c5f 6974 656d 732e 6974 656d  ._all_items.item
-00029c70: 5f67 6574 5f61 7474 7269 6275 7465 286e  _get_attribute(n
-00029c80: 616d 652c 2041 5454 5249 4255 5445 5f4d  ame, ATTRIBUTE_M
-00029c90: 4152 4749 4e5f 434f 4c55 4d4e 293a 0d0a  ARGIN_COLUMN):..
-00029ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029cb0: 636f 6c73 2e61 7070 656e 6428 6e61 6d65  cols.append(name
-00029cc0: 290d 0a20 2020 2020 2020 2061 7474 7269  )..        attri
-00029cd0: 6273 5b54 7970 6552 6567 6973 7465 722e  bs[TypeRegister.
-00029ce0: 4469 7370 6c61 7941 7474 7269 6275 7465  DisplayAttribute
-00029cf0: 732e 4d41 5247 494e 5f43 4f4c 554d 4e53  s.MARGIN_COLUMNS
-00029d00: 5d20 3d20 636f 6c73 0d0a 0d0a 2020 2020  ] = cols....    
-00029d10: 2020 2020 7265 7475 726e 2061 7474 7269      return attri
-00029d20: 6273 0d0a 0d0a 2020 2020 2320 2d2d 2d2d  bs....    # ----
+000299f0: 2d2d 2d0d 0a20 2020 2064 6566 2064 6973  ---..    def dis
+00029a00: 706c 6179 5f61 7474 7269 6275 7465 7328  play_attributes(
+00029a10: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+00029a20: 2222 220d 0a20 2020 2020 2020 2052 6574  """..        Ret
+00029a30: 7572 6e73 2061 2064 6963 7420 6f66 2064  urns a dict of d
+00029a40: 6973 706c 6179 2061 7474 7269 6275 7465  isplay attribute
+00029a50: 732c 2063 7572 7265 6e74 6c79 2063 6f6e  s, currently con
+00029a60: 7369 7374 696e 6720 6f66 0d0a 2020 2020  sisting of..    
+00029a70: 2020 2020 4e75 6d62 6572 4f66 466f 6f74      NumberOfFoot
+00029a80: 6572 526f 7773 2061 6e64 2061 206c 6973  erRows and a lis
+00029a90: 7420 6f66 204d 6172 6769 6e43 6f6c 756d  t of MarginColum
+00029aa0: 6e73 2e0d 0a0d 0a20 2020 2020 2020 2052  ns.....        R
+00029ab0: 6574 7572 6e73 0d0a 2020 2020 2020 2020  eturns..        
+00029ac0: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+00029ad0: 2064 203a 2064 6963 740d 0a20 2020 2020   d : dict..     
+00029ae0: 2020 2020 2020 2041 2064 6963 7469 6f6e         A diction
+00029af0: 6172 7920 6f66 2064 6973 706c 6179 2061  ary of display a
+00029b00: 7474 7269 6275 7465 730d 0a20 2020 2020  ttributes..     
+00029b10: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00029b20: 6174 7472 6962 7320 3d20 6469 6374 2829  attribs = dict()
+00029b30: 0d0a 2020 2020 2020 2020 2320 466f 6f74  ..        # Foot
+00029b40: 6572 2072 6f77 730d 0a20 2020 2020 2020  er rows..       
+00029b50: 2061 7474 7269 6273 5b54 7970 6552 6567   attribs[TypeReg
+00029b60: 6973 7465 722e 4469 7370 6c61 7941 7474  ister.DisplayAtt
+00029b70: 7269 6275 7465 732e 4e55 4d42 4552 5f4f  ributes.NUMBER_O
+00029b80: 465f 464f 4f54 4552 5f52 4f57 535d 203d  F_FOOTER_ROWS] =
+00029b90: 2067 6574 6174 7472 280d 0a20 2020 2020   getattr(..     
+00029ba0: 2020 2020 2020 2073 656c 662e 5f61 6c6c         self._all
+00029bb0: 5f69 7465 6d73 2c20 4154 5452 4942 5554  _items, ATTRIBUT
+00029bc0: 455f 4e55 4d42 4552 5f4f 465f 464f 4f54  E_NUMBER_OF_FOOT
+00029bd0: 4552 5f52 4f57 532c 2030 0d0a 2020 2020  ER_ROWS, 0..    
+00029be0: 2020 2020 290d 0a20 2020 2020 2020 2023      )..        #
+00029bf0: 204d 6172 6769 6e20 636f 6c75 6d6e 730d   Margin columns.
+00029c00: 0a20 2020 2020 2020 2063 6f6c 7320 3d20  .        cols = 
+00029c10: 5b5d 0d0a 2020 2020 2020 2020 666f 7220  []..        for 
+00029c20: 6e61 6d65 2069 6e20 7365 6c66 2e5f 616c  name in self._al
+00029c30: 6c5f 6974 656d 732e 6b65 7973 2829 3a0d  l_items.keys():.
+00029c40: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00029c50: 7365 6c66 2e5f 616c 6c5f 6974 656d 732e  self._all_items.
+00029c60: 6974 656d 5f67 6574 5f61 7474 7269 6275  item_get_attribu
+00029c70: 7465 286e 616d 652c 2041 5454 5249 4255  te(name, ATTRIBU
+00029c80: 5445 5f4d 4152 4749 4e5f 434f 4c55 4d4e  TE_MARGIN_COLUMN
+00029c90: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00029ca0: 2020 2020 636f 6c73 2e61 7070 656e 6428      cols.append(
+00029cb0: 6e61 6d65 290d 0a20 2020 2020 2020 2061  name)..        a
+00029cc0: 7474 7269 6273 5b54 7970 6552 6567 6973  ttribs[TypeRegis
+00029cd0: 7465 722e 4469 7370 6c61 7941 7474 7269  ter.DisplayAttri
+00029ce0: 6275 7465 732e 4d41 5247 494e 5f43 4f4c  butes.MARGIN_COL
+00029cf0: 554d 4e53 5d20 3d20 636f 6c73 0d0a 0d0a  UMNS] = cols....
+00029d00: 2020 2020 2020 2020 7265 7475 726e 2061          return a
+00029d10: 7474 7269 6273 0d0a 0d0a 2020 2020 2320  ttribs....    # 
+00029d20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00029d30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00029d40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00029d50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00029d60: 2d2d 2d0d 0a20 2020 2064 6566 206d 616b  ---..    def mak
-00029d70: 655f 7461 626c 6528 7365 6c66 2c20 6469  e_table(self, di
-00029d80: 7370 6c61 795f 7479 7065 293a 0d0a 2020  splay_type):..  
-00029d90: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00029da0: 2020 2050 7265 7474 792d 7072 696e 7420     Pretty-print 
-00029db0: 636f 6465 2075 7365 6420 6279 2069 6e66  code used by inf
-00029dc0: 7261 7374 7275 6374 7572 652e 0d0a 0d0a  rastructure.....
-00029dd0: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
-00029de0: 7273 0d0a 2020 2020 2020 2020 2d2d 2d2d  rs..        ----
-00029df0: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-00029e00: 6469 7370 6c61 795f 7479 7065 203a 2072  display_type : r
-00029e10: 742e 7274 5f65 6e75 6d2e 4453 5f44 4953  t.rt_enum.DS_DIS
-00029e20: 504c 4159 5f54 5950 4553 0d0a 0d0a 2020  PLAY_TYPES....  
-00029e30: 2020 2020 2020 5265 7475 726e 730d 0a20        Returns.. 
-00029e40: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0d0a         -------..
-00029e50: 2020 2020 2020 2020 6f62 6a20 6f72 2073          obj or s
-00029e60: 7472 0d0a 2020 2020 2020 2020 2020 2020  tr..            
-00029e70: 4469 7370 6c61 7920 6f62 6a65 6374 206f  Display object o
-00029e80: 7220 7374 7269 6e67 2e0d 0a20 2020 2020  r string...     
-00029e90: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00029ea0: 2320 5f5f 7374 725f 5f2c 205f 5f72 6570  # __str__, __rep
-00029eb0: 725f 5f2c 205f 7265 7072 5f68 746d 6c5f  r__, _repr_html_
-00029ec0: 2c20 5420 7769 6c6c 2061 6c6c 2066 756e  , T will all fun
-00029ed0: 6e65 6c20 696e 746f 2074 6869 730d 0a20  nel into this.. 
-00029ee0: 2020 2020 2020 2023 2070 7265 7061 7265         # prepare
-00029ef0: 7320 726f 7720 736f 7274 7320 616e 6420  s row sorts and 
-00029f00: 6865 6164 6572 2074 7570 6c65 7320 666f  header tuples fo
-00029f10: 7220 7274 5f64 6973 706c 6179 0d0a 2020  r rt_display..  
-00029f20: 2020 2020 2020 7461 626c 6520 3d20 5479        table = Ty
-00029f30: 7065 5265 6769 7374 6572 2e44 6973 706c  peRegister.Displ
-00029f40: 6179 5461 626c 6528 6174 7472 6962 733d  ayTable(attribs=
-00029f50: 7365 6c66 2e64 6973 706c 6179 5f61 7474  self.display_att
-00029f60: 7269 6275 7465 7328 2929 0d0a 2020 2020  ributes())..    
-00029f70: 2020 2020 6672 6f6d 5f73 7472 203d 2046      from_str = F
-00029f80: 616c 7365 0d0a 2020 2020 2020 2020 726f  alse..        ro
-00029f90: 775f 7374 6174 7320 3d20 2222 0d0a 0d0a  w_stats = ""....
-00029fa0: 2020 2020 2020 2020 2320 5f72 6570 725f          # _repr_
-00029fb0: 6874 6d6c 5f0d 0a20 2020 2020 2020 2069  html_..        i
-00029fc0: 6620 6469 7370 6c61 795f 7479 7065 203d  f display_type =
-00029fd0: 3d20 4453 5f44 4953 504c 4159 5f54 5950  = DS_DISPLAY_TYP
-00029fe0: 4553 2e48 544d 4c3a 0d0a 2020 2020 2020  ES.HTML:..      
-00029ff0: 2020 2020 2020 6966 2054 7970 6552 6567        if TypeReg
-0002a000: 6973 7465 722e 4469 7370 6c61 7954 6162  ister.DisplayTab
-0002a010: 6c65 2e46 4f52 4345 5f52 4550 5220 6973  le.FORCE_REPR is
-0002a020: 2046 616c 7365 3a0d 0a20 2020 2020 2020   False:..       
-0002a030: 2020 2020 2020 2020 2054 7970 6552 6567           TypeReg
-0002a040: 6973 7465 722e 4469 7370 6c61 7944 6574  ister.DisplayDet
-0002a050: 6563 742e 4d6f 6465 203d 2044 6973 706c  ect.Mode = Displ
-0002a060: 6179 4465 7465 6374 4d6f 6465 732e 4854  ayDetectModes.HT
-0002a070: 4d4c 0d0a 2020 2020 2020 2020 2020 2020  ML..            
-0002a080: 7461 626c 652e 5f64 6973 706c 6179 5f6d  table._display_m
-0002a090: 6f64 6520 3d20 4469 7370 6c61 7944 6574  ode = DisplayDet
-0002a0a0: 6563 744d 6f64 6573 2e48 544d 4c0d 0a20  ectModes.HTML.. 
-0002a0b0: 2020 2020 2020 2020 2020 2066 726f 6d5f             from_
-0002a0c0: 7374 7220 3d20 4661 6c73 650d 0a20 2020  str = False..   
-0002a0d0: 2020 2020 2020 2020 2072 6f77 5f73 7461           row_sta
-0002a0e0: 7473 203d 2022 5c6e 5c6e 2220 2b20 7365  ts = "\n\n" + se
-0002a0f0: 6c66 2e5f 6c61 7374 5f72 6f77 5f73 7461  lf._last_row_sta
-0002a100: 7473 2829 0d0a 0d0a 2020 2020 2020 2020  ts()....        
-0002a110: 2320 5f5f 7265 7072 5f5f 0d0a 2020 2020  # __repr__..    
-0002a120: 2020 2020 656c 6966 2064 6973 706c 6179      elif display
-0002a130: 5f74 7970 6520 3d3d 2044 535f 4449 5350  _type == DS_DISP
-0002a140: 4c41 595f 5459 5045 532e 5245 5052 3a0d  LAY_TYPES.REPR:.
-0002a150: 0a20 2020 2020 2020 2020 2020 2023 2074  .            # t
-0002a160: 6869 7320 7265 7072 2077 696c 6c20 6265  his repr will be
-0002a170: 2063 616c 6c65 6420 6265 666f 7265 205f   called before _
-0002a180: 7265 7072 5f68 746d 6c5f 2069 6e20 6a75  repr_html_ in ju
-0002a190: 7079 7465 720d 0a20 2020 2020 2020 2020  pyter..         
-0002a1a0: 2020 2069 6620 5479 7065 5265 6769 7374     if TypeRegist
-0002a1b0: 6572 2e44 6973 706c 6179 4465 7465 6374  er.DisplayDetect
-0002a1c0: 2e4d 6f64 6520 3d3d 2044 6973 706c 6179  .Mode == Display
-0002a1d0: 4465 7465 6374 4d6f 6465 732e 4854 4d4c  DetectModes.HTML
-0002a1e0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002a1f0: 2020 2069 6620 5479 7065 5265 6769 7374     if TypeRegist
-0002a200: 6572 2e44 6973 706c 6179 5461 626c 652e  er.DisplayTable.
-0002a210: 464f 5243 455f 5245 5052 2069 7320 4661  FORCE_REPR is Fa
-0002a220: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-0002a230: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0002a240: 2022 220d 0a0d 0a20 2020 2020 2020 2020   ""....         
-0002a250: 2020 2065 6c69 6620 5479 7065 5265 6769     elif TypeRegi
-0002a260: 7374 6572 2e44 6973 706c 6179 4465 7465  ster.DisplayDete
-0002a270: 6374 2e4d 6f64 6520 3d3d 2044 6973 706c  ct.Mode == Displ
-0002a280: 6179 4465 7465 6374 4d6f 6465 732e 436f  ayDetectModes.Co
-0002a290: 6e73 6f6c 653a 0d0a 2020 2020 2020 2020  nsole:..        
-0002a2a0: 2020 2020 2020 2020 6672 6f6d 5f73 7472          from_str
-0002a2b0: 203d 2054 7275 650d 0a0d 0a20 2020 2020   = True....     
-0002a2c0: 2020 2020 2020 2072 6f77 5f73 7461 7473         row_stats
-0002a2d0: 203d 2022 5c6e 5c6e 2220 2b20 7365 6c66   = "\n\n" + self
-0002a2e0: 2e5f 6c61 7374 5f72 6f77 5f73 7461 7473  ._last_row_stats
-0002a2f0: 2829 0d0a 0d0a 2020 2020 2020 2020 2320  ()....        # 
-0002a300: 5f5f 7374 725f 5f0d 0a20 2020 2020 2020  __str__..       
-0002a310: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-0002a320: 2020 2020 2320 6e6f 2072 6f77 2f63 6f6c      # no row/col
-0002a330: 756d 6e2f 6d65 6d6f 7279 2073 7461 7473  umn/memory stats
-0002a340: 2077 696c 6c20 6265 2064 6973 706c 6179   will be display
-0002a350: 6564 0d0a 2020 2020 2020 2020 2020 2020  ed..            
-0002a360: 6672 6f6d 5f73 7472 203d 2054 7275 650d  from_str = True.
-0002a370: 0a0d 0a20 2020 2020 2020 2023 206f 6e6c  ...        # onl
-0002a380: 7920 6461 7461 7365 7420 6861 7320 736f  y dataset has so
-0002a390: 7274 5f76 6965 772c 2069 7420 6973 206f  rt_view, it is o
-0002a3a0: 6666 2062 7920 6465 6661 756c 740d 0a20  ff by default.. 
-0002a3b0: 2020 2020 2020 2023 2069 7420 6361 6e20         # it can 
-0002a3c0: 6265 2074 7572 6e65 6420 6f6e 2077 6974  be turned on wit
-0002a3d0: 6820 6120 6361 6c6c 2074 6f20 736f 7274  h a call to sort
-0002a3e0: 5f76 6965 770d 0a20 2020 2020 2020 2069  _view..        i
-0002a3f0: 6620 7365 6c66 2e5f 736f 7274 5f64 6973  f self._sort_dis
-0002a400: 706c 6179 2069 7320 5472 7565 3a0d 0a20  play is True:.. 
-0002a410: 2020 2020 2020 2020 2020 2023 2063 6865             # che
-0002a420: 636b 2074 6f20 7365 6520 6966 2061 6c72  ck to see if alr
-0002a430: 6561 6479 2069 6e20 7468 6520 736f 7274  eady in the sort
-0002a440: 2063 6163 6865 0d0a 2020 2020 2020 2020   cache..        
-0002a450: 2020 2020 736f 7274 5f69 6420 3d20 7365      sort_id = se
-0002a460: 6c66 2e67 6574 5f72 6f77 5f73 6f72 745f  lf.get_row_sort_
-0002a470: 696e 666f 2829 0d0a 2020 2020 2020 2020  info()..        
-0002a480: 2020 2020 736f 7274 6564 5f72 6f77 5f69      sorted_row_i
-0002a490: 6478 203d 2054 7970 6552 6567 6973 7465  dx = TypeRegiste
-0002a4a0: 722e 536f 7274 4361 6368 652e 6765 745f  r.SortCache.get_
-0002a4b0: 736f 7274 6564 5f72 6f77 5f69 6e64 6578  sorted_row_index
-0002a4c0: 282a 736f 7274 5f69 6429 0d0a 2020 2020  (*sort_id)..    
-0002a4d0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-0002a4e0: 5f73 6f72 745f 6173 6365 6e64 696e 6720  _sort_ascending 
-0002a4f0: 6973 2046 616c 7365 3a0d 0a20 2020 2020  is False:..     
-0002a500: 2020 2020 2020 2020 2020 2073 6f72 7465             sorte
-0002a510: 645f 726f 775f 6964 7820 3d20 736f 7274  d_row_idx = sort
-0002a520: 6564 5f72 6f77 5f69 6478 5b3a 3a2d 315d  ed_row_idx[::-1]
-0002a530: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
-0002a540: 0a20 2020 2020 2020 2020 2020 2023 2072  .            # r
-0002a550: 656d 6f76 6520 616c 6c20 726f 7720 736f  emove all row so
-0002a560: 7274 730d 0a20 2020 2020 2020 2020 2020  rts..           
-0002a570: 2073 6f72 7465 645f 726f 775f 6964 7820   sorted_row_idx 
-0002a580: 3d20 4e6f 6e65 0d0a 0d0a 2020 2020 2020  = None....      
-0002a590: 2020 6c61 6265 6c5f 6b65 7973 203d 2073    label_keys = s
-0002a5a0: 656c 662e 6c61 6265 6c5f 6173 5f64 6963  elf.label_as_dic
-0002a5b0: 7428 290d 0a20 2020 2020 2020 2073 756d  t()..        sum
-0002a5c0: 6d61 7279 5f63 6f6c 7320 3d20 7365 6c66  mary_cols = self
-0002a5d0: 2e73 756d 6d61 7279 5f61 735f 6469 6374  .summary_as_dict
-0002a5e0: 2829 0d0a 2020 2020 2020 2020 6865 6164  ()..        head
-0002a5f0: 6572 5f74 7570 732c 206d 6169 6e5f 6461  er_tups, main_da
-0002a600: 7461 2c20 666f 6f74 6572 5f74 7570 7320  ta, footer_tups 
-0002a610: 3d20 7365 6c66 2e5f 7072 6570 6172 655f  = self._prepare_
-0002a620: 6469 7370 6c61 795f 6461 7461 2829 0d0a  display_data()..
-0002a630: 0d0a 2020 2020 2020 2020 7265 7374 6f72  ..        restor
-0002a640: 655f 7374 725f 7769 6474 6820 3d20 5479  e_str_width = Ty
-0002a650: 7065 5265 6769 7374 6572 2e44 6973 706c  peRegister.Displ
-0002a660: 6179 4f70 7469 6f6e 732e 4d41 585f 5354  ayOptions.MAX_ST
-0002a670: 5249 4e47 5f57 4944 5448 0d0a 2020 2020  RING_WIDTH..    
-0002a680: 2020 2020 6966 2068 6173 6174 7472 2873      if hasattr(s
-0002a690: 656c 662c 2022 5f6e 726f 7773 2229 3a0d  elf, "_nrows"):.
-0002a6a0: 0a20 2020 2020 2020 2020 2020 206e 726f  .            nro
-0002a6b0: 7773 203d 2073 656c 662e 5f6e 726f 7773  ws = self._nrows
-0002a6c0: 0d0a 2020 2020 2020 2020 2320 6e75 6d62  ..        # numb
-0002a6d0: 6572 206f 6620 726f 7773 2069 7320 7365  er of rows is se
-0002a6e0: 7420 746f 206e 756d 6265 7220 6f66 2063  t to number of c
-0002a6f0: 6f6c 756d 6e73 2066 6f72 2073 7472 7563  olumns for struc
-0002a700: 7473 0d0a 2020 2020 2020 2020 656c 7365  ts..        else
-0002a710: 3a0d 0a20 2020 2020 2020 2020 2020 206e  :..            n
-0002a720: 726f 7773 203d 2073 656c 662e 5f6e 636f  rows = self._nco
-0002a730: 6c73 0d0a 2020 2020 2020 2020 2020 2020  ls..            
-0002a740: 2320 696e 6372 6561 7365 206d 6178 2073  # increase max s
-0002a750: 7472 696e 6720 7769 6474 6820 666f 7220  tring width for 
-0002a760: 7374 7275 6374 730d 0a20 2020 2020 2020  structs..       
-0002a770: 2020 2020 2054 7970 6552 6567 6973 7465       TypeRegiste
-0002a780: 722e 4469 7370 6c61 794f 7074 696f 6e73  r.DisplayOptions
-0002a790: 2e4d 4158 5f53 5452 494e 475f 5749 4454  .MAX_STRING_WIDT
-0002a7a0: 4820 3d20 3332 0d0a 0d0a 2020 2020 2020  H = 32....      
-0002a7b0: 2020 2320 6368 6563 6b20 6966 2061 6363    # check if acc
-0002a7c0: 756d 3220 6861 6420 616e 7920 6261 6463  um2 had any badc
-0002a7d0: 6f6c 730d 0a20 2020 2020 2020 2062 6164  ols..        bad
-0002a7e0: 636f 6c73 203d 204e 6f6e 650d 0a20 2020  cols = None..   
-0002a7f0: 2020 2020 2069 6620 7365 6c66 2e5f 6261       if self._ba
-0002a800: 6463 6f6c 7320 6973 206e 6f74 204e 6f6e  dcols is not Non
-0002a810: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0002a820: 6261 645f 636f 6c6f 7220 3d20 7461 626c  bad_color = tabl
-0002a830: 652e 6765 745f 6261 645f 636f 6c6f 7228  e.get_bad_color(
-0002a840: 290d 0a20 2020 2020 2020 2020 2020 2062  )..            b
-0002a850: 6164 636f 6c73 203d 207b 6b3a 2062 6164  adcols = {k: bad
-0002a860: 5f63 6f6c 6f72 2066 6f72 206b 2069 6e20  _color for k in 
-0002a870: 7365 6c66 2e5f 6261 6463 6f6c 737d 0d0a  self._badcols}..
-0002a880: 0d0a 2020 2020 2020 2020 6261 6472 6f77  ..        badrow
-0002a890: 7320 3d20 4e6f 6e65 0d0a 2020 2020 2020  s = None..      
-0002a8a0: 2020 6966 2073 656c 662e 5f62 6164 726f    if self._badro
-0002a8b0: 7773 2069 7320 6e6f 7420 4e6f 6e65 3a0d  ws is not None:.
-0002a8c0: 0a20 2020 2020 2020 2020 2020 2062 6164  .            bad
-0002a8d0: 5f63 6f6c 6f72 203d 2074 6162 6c65 2e67  _color = table.g
-0002a8e0: 6574 5f62 6164 5f63 6f6c 6f72 2829 0d0a  et_bad_color()..
-0002a8f0: 2020 2020 2020 2020 2020 2020 6261 6472              badr
-0002a900: 6f77 7320 3d20 7b6b 3a20 6261 645f 636f  ows = {k: bad_co
-0002a910: 6c6f 7220 666f 7220 6b20 696e 2073 656c  lor for k in sel
-0002a920: 662e 5f62 6164 726f 7773 7d0d 0a0d 0a20  f._badrows}.... 
-0002a930: 2020 2020 2020 2023 2073 656e 6420 746f         # send to
-0002a940: 2072 745f 6469 7370 6c61 7920 746f 2062   rt_display to b
-0002a950: 7569 6c64 2061 2072 6573 756c 7420 7374  uild a result st
-0002a960: 7269 6e67 2066 6f72 2063 6f6e 736f 6c65  ring for console
-0002a970: 206f 7220 6874 6d6c 0d0a 2020 2020 2020   or html..      
-0002a980: 2020 7265 7375 6c74 203d 2074 6162 6c65    result = table
-0002a990: 2e62 7569 6c64 5f72 6573 756c 745f 7461  .build_result_ta
-0002a9a0: 626c 6528 0d0a 2020 2020 2020 2020 2020  ble(..          
-0002a9b0: 2020 6865 6164 6572 5f74 7570 732c 2020    header_tups,  
-0002a9c0: 2320 6c69 7374 206f 6620 6c69 7374 7320  # list of lists 
-0002a9d0: 6f66 2043 6f6c 4865 6164 6572 2074 7570  of ColHeader tup
-0002a9e0: 6c65 730d 0a20 2020 2020 2020 2020 2020  les..           
-0002a9f0: 206d 6169 6e5f 6461 7461 2c20 2023 206c   main_data,  # l
-0002aa00: 6973 7420 6f66 2063 6f6c 756d 6e20 6172  ist of column ar
-0002aa10: 7261 7973 0d0a 2020 2020 2020 2020 2020  rays..          
-0002aa20: 2020 6e72 6f77 732c 2020 2320 6e75 6d62    nrows,  # numb
-0002aa30: 6572 206f 6620 726f 7773 2028 2064 6174  er of rows ( dat
-0002aa40: 6173 6574 206f 6e6c 7920 290d 0a20 2020  aset only )..   
-0002aa50: 2020 2020 2020 2020 206b 6579 733d 6c61           keys=la
-0002aa60: 6265 6c5f 6b65 7973 2c20 2023 2064 6963  bel_keys,  # dic
-0002aa70: 7469 6f6e 6172 7920 6f66 2067 726f 7570  tionary of group
-0002aa80: 6279 206b 6579 7320 7461 6874 2077 696c  by keys taht wil
-0002aa90: 6c20 6170 7065 6172 206f 6e20 7468 6520  l appear on the 
-0002aaa0: 6661 7220 6c65 6674 0d0a 2020 2020 2020  far left..      
-0002aab0: 2020 2020 2020 726f 775f 6e75 6d62 6572        row_number
-0002aac0: 733d 7365 6c66 2e5f 726f 775f 6e75 6d62  s=self._row_numb
-0002aad0: 6572 732c 2020 2320 6361 6c6c 6261 636b  ers,  # callback
-0002aae0: 2066 756e 6374 696f 6e20 746f 2072 6574   function to ret
-0002aaf0: 7572 6e20 6375 7374 6f6d 206c 6566 742d  urn custom left-
-0002ab00: 6861 6e64 2074 6162 6c65 0d0a 2020 2020  hand table..    
-0002ab10: 2020 2020 2020 2020 7269 6768 745f 636f          right_co
-0002ab20: 6c73 3d73 756d 6d61 7279 5f63 6f6c 732c  ls=summary_cols,
-0002ab30: 2020 2320 6469 6374 696f 6e61 7279 206f    # dictionary o
-0002ab40: 6620 6b65 7973 2d3e 6172 7261 7973 2074  f keys->arrays t
-0002ab50: 6861 7420 7769 6c6c 2061 7070 6561 7220  hat will appear 
-0002ab60: 6f6e 2074 6865 2066 6172 2072 6967 6874  on the far right
-0002ab70: 0d0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
-0002ab80: 6f74 6572 5f74 7570 733d 666f 6f74 6572  oter_tups=footer
-0002ab90: 5f74 7570 732c 2020 2320 6c69 7374 206f  _tups,  # list o
-0002aba0: 6620 6c69 7374 7320 6f66 2043 6f6c 4865  f lists of ColHe
-0002abb0: 6164 6572 2074 7570 6c65 730d 0a20 2020  ader tuples..   
-0002abc0: 2020 2020 2020 2020 2073 6f72 746b 6579           sortkey
-0002abd0: 733d 7365 6c66 2e5f 636f 6c5f 736f 7274  s=self._col_sort
-0002abe0: 6c69 7374 2c20 2023 206c 6973 7420 6f66  list,  # list of
-0002abf0: 206e 616d 6573 206f 6620 636f 6c75 6d6e   names of column
-0002ac00: 7320 7468 6520 7461 626c 6520 7761 7320  s the table was 
-0002ac10: 736f 7274 6564 2062 790d 0a20 2020 2020  sorted by..     
-0002ac20: 2020 2020 2020 2073 6f72 7465 645f 726f         sorted_ro
-0002ac30: 775f 6964 783d 736f 7274 6564 5f72 6f77  w_idx=sorted_row
-0002ac40: 5f69 6478 2c20 2023 2066 616e 6379 2069  _idx,  # fancy i
-0002ac50: 6e64 6578 2066 6f72 2073 6f72 7420 7768  ndex for sort wh
-0002ac60: 656e 2074 6162 6c65 2068 6173 2061 2073  en table has a s
-0002ac70: 6f72 7465 6420 7669 6577 0d0a 2020 2020  orted view..    
-0002ac80: 2020 2020 2020 2020 6672 6f6d 5f73 7472          from_str
-0002ac90: 3d66 726f 6d5f 7374 722c 2020 2320 6469  =from_str,  # di
-0002aca0: 7370 6c61 7920 6361 6c6c 6564 2066 726f  splay called fro
-0002acb0: 6d20 7374 7228 2920 6f72 2070 6c61 696e  m str() or plain
-0002acc0: 2063 6f6e 736f 6c65 0d0a 2020 2020 2020   console..      
-0002acd0: 2020 2020 2020 7472 616e 7370 6f73 655f        transpose_
-0002ace0: 6f6e 3d73 656c 662e 5f74 7261 6e73 706f  on=self._transpo
-0002acf0: 7365 5f6f 6e2c 2020 2320 6469 7370 6c61  se_on,  # displa
-0002ad00: 7920 6361 6c6c 6564 2066 726f 6d20 2e5f  y called from ._
-0002ad10: 540d 0a20 2020 2020 2020 2020 2020 2062  T..            b
-0002ad20: 6164 726f 7773 3d62 6164 726f 7773 2c0d  adrows=badrows,.
-0002ad30: 0a20 2020 2020 2020 2020 2020 2062 6164  .            bad
-0002ad40: 636f 6c73 3d62 6164 636f 6c73 2c0d 0a20  cols=badcols,.. 
-0002ad50: 2020 2020 2020 2020 2020 2073 7479 6c65             style
-0002ad60: 733d 7365 6c66 2e5f 7374 796c 6573 2c20  s=self._styles, 
-0002ad70: 2023 2064 6963 7469 6f6e 6172 7920 6f66   # dictionary of
-0002ad80: 2063 6f6c 756d 6e20 6e61 6d65 202d 3e20   column name -> 
-0002ad90: 436f 6c75 6d6e 5374 796c 6520 6f62 6a65  ColumnStyle obje
-0002ada0: 6374 202a 2a6e 6f74 2069 6d70 6c65 6d65  ct **not impleme
-0002adb0: 6e74 6564 0d0a 2020 2020 2020 2020 2020  nted..          
-0002adc0: 2020 6361 6c6c 6261 636b 3d67 6574 6174    callback=getat
-0002add0: 7472 2873 656c 662c 2022 5f64 6973 706c  tr(self, "_displ
-0002ade0: 6179 5f63 616c 6c62 6163 6b22 2c20 4e6f  ay_callback", No
-0002adf0: 6e65 292c 0d0a 2020 2020 2020 2020 2920  ne),..        ) 
-0002ae00: 2023 2075 7365 7220 6361 6e20 7370 6563   # user can spec
-0002ae10: 6966 7920 7468 6569 7220 6f77 6e20 6361  ify their own ca
-0002ae20: 6c6c 6261 636b 0d0a 2020 2020 2020 2020  llback..        
-0002ae30: 2320 6361 6c6c 6261 636b 2073 6967 6e61  # callback signa
-0002ae40: 7475 7265 206d 7573 7420 6265 2063 616c  ture must be cal
-0002ae50: 6c62 6163 6b28 636f 6c73 2c20 7374 796c  lback(cols, styl
-0002ae60: 6566 756e 632c 2072 6f77 733d 5472 7565  efunc, rows=True
-0002ae70: 290d 0a20 2020 2020 2020 2023 2066 726f  )..        # fro
-0002ae80: 6d20 7269 7074 6162 6c65 2e72 745f 6469  m riptable.rt_di
-0002ae90: 7370 6c61 7920 696d 706f 7274 2044 6973  splay import Dis
-0002aea0: 706c 6179 436f 6c75 6d6e 436f 6c6f 7273  playColumnColors
-0002aeb0: 0d0a 2020 2020 2020 2020 2320 6361 6c6c  ..        # call
-0002aec0: 6261 636b 286c 6973 7420 6f66 2044 6973  back(list of Dis
-0002aed0: 706c 6179 436f 6c75 6d6e 732c 2073 7479  playColumns, sty
-0002aee0: 6c65 6675 6e63 2c20 726f 7773 3d54 7275  lefunc, rows=Tru
-0002aef0: 6529 0d0a 2020 2020 2020 2020 2320 4578  e)..        # Ex
-0002af00: 616d 706c 653a 0d0a 2020 2020 2020 2020  ample:..        
-0002af10: 2320 6465 6620 6d61 6b65 7265 6428 636f  # def makered(co
-0002af20: 6c73 2c20 7374 796c 6566 756e 632c 2072  ls, stylefunc, r
-0002af30: 6f77 733d 5472 7565 293a 0d0a 2020 2020  ows=True):..    
-0002af40: 2020 2020 2320 2020 2066 6f72 2063 6f6c      #    for col
-0002af50: 2069 6e20 636f 6c73 3a0d 0a20 2020 2020   in cols:..     
-0002af60: 2020 2023 2020 2020 2020 2020 666f 7220     #        for 
-0002af70: 6365 6c6c 2069 6e20 636f 6c3a 0d0a 2020  cell in col:..  
-0002af80: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0002af90: 2020 2069 6620 6365 6c6c 2e73 7472 696e     if cell.strin
-0002afa0: 672e 7374 6172 7473 7769 7468 2827 2d27  g.startswith('-'
-0002afb0: 293a 2063 656c 6c2e 636f 6c6f 723d 4469  ): cell.color=Di
-0002afc0: 7370 6c61 7943 6f6c 756d 6e43 6f6c 6f72  splayColumnColor
-0002afd0: 732e 5265 640d 0a20 2020 2020 2020 2023  s.Red..        #
-0002afe0: 2064 732e 5f64 6973 706c 6179 5f63 616c   ds._display_cal
-0002aff0: 6c62 6163 6b20 3d20 6d61 6b65 7265 640d  lback = makered.
-0002b000: 0a0d 0a20 2020 2020 2020 2054 7970 6552  ...        TypeR
-0002b010: 6567 6973 7465 722e 4469 7370 6c61 794f  egister.DisplayO
-0002b020: 7074 696f 6e73 2e4d 4158 5f53 5452 494e  ptions.MAX_STRIN
-0002b030: 475f 5749 4454 4820 3d20 7265 7374 6f72  G_WIDTH = restor
-0002b040: 655f 7374 725f 7769 6474 680d 0a0d 0a20  e_str_width.... 
-0002b050: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-0002b060: 7375 6c74 202b 2072 6f77 5f73 7461 7473  sult + row_stats
-0002b070: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+00029d50: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
+00029d60: 206d 616b 655f 7461 626c 6528 7365 6c66   make_table(self
+00029d70: 2c20 6469 7370 6c61 795f 7479 7065 293a  , display_type):
+00029d80: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00029d90: 2020 2020 2020 2050 7265 7474 792d 7072         Pretty-pr
+00029da0: 696e 7420 636f 6465 2075 7365 6420 6279  int code used by
+00029db0: 2069 6e66 7261 7374 7275 6374 7572 652e   infrastructure.
+00029dc0: 0d0a 0d0a 2020 2020 2020 2020 5061 7261  ....        Para
+00029dd0: 6d65 7465 7273 0d0a 2020 2020 2020 2020  meters..        
+00029de0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+00029df0: 2020 2020 6469 7370 6c61 795f 7479 7065      display_type
+00029e00: 203a 2072 742e 7274 5f65 6e75 6d2e 4453   : rt.rt_enum.DS
+00029e10: 5f44 4953 504c 4159 5f54 5950 4553 0d0a  _DISPLAY_TYPES..
+00029e20: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+00029e30: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
+00029e40: 2d2d 0d0a 2020 2020 2020 2020 6f62 6a20  --..        obj 
+00029e50: 6f72 2073 7472 0d0a 2020 2020 2020 2020  or str..        
+00029e60: 2020 2020 4469 7370 6c61 7920 6f62 6a65      Display obje
+00029e70: 6374 206f 7220 7374 7269 6e67 2e0d 0a20  ct or string... 
+00029e80: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00029e90: 2020 2020 2320 5f5f 7374 725f 5f2c 205f      # __str__, _
+00029ea0: 5f72 6570 725f 5f2c 205f 7265 7072 5f68  _repr__, _repr_h
+00029eb0: 746d 6c5f 2c20 5420 7769 6c6c 2061 6c6c  tml_, T will all
+00029ec0: 2066 756e 6e65 6c20 696e 746f 2074 6869   funnel into thi
+00029ed0: 730d 0a20 2020 2020 2020 2023 2070 7265  s..        # pre
+00029ee0: 7061 7265 7320 726f 7720 736f 7274 7320  pares row sorts 
+00029ef0: 616e 6420 6865 6164 6572 2074 7570 6c65  and header tuple
+00029f00: 7320 666f 7220 7274 5f64 6973 706c 6179  s for rt_display
+00029f10: 0d0a 2020 2020 2020 2020 7461 626c 6520  ..        table 
+00029f20: 3d20 5479 7065 5265 6769 7374 6572 2e44  = TypeRegister.D
+00029f30: 6973 706c 6179 5461 626c 6528 6174 7472  isplayTable(attr
+00029f40: 6962 733d 7365 6c66 2e64 6973 706c 6179  ibs=self.display
+00029f50: 5f61 7474 7269 6275 7465 7328 2929 0d0a  _attributes())..
+00029f60: 2020 2020 2020 2020 6672 6f6d 5f73 7472          from_str
+00029f70: 203d 2046 616c 7365 0d0a 2020 2020 2020   = False..      
+00029f80: 2020 726f 775f 7374 6174 7320 3d20 2222    row_stats = ""
+00029f90: 0d0a 0d0a 2020 2020 2020 2020 2320 5f72  ....        # _r
+00029fa0: 6570 725f 6874 6d6c 5f0d 0a20 2020 2020  epr_html_..     
+00029fb0: 2020 2069 6620 6469 7370 6c61 795f 7479     if display_ty
+00029fc0: 7065 203d 3d20 4453 5f44 4953 504c 4159  pe == DS_DISPLAY
+00029fd0: 5f54 5950 4553 2e48 544d 4c3a 0d0a 2020  _TYPES.HTML:..  
+00029fe0: 2020 2020 2020 2020 2020 6966 2054 7970            if Typ
+00029ff0: 6552 6567 6973 7465 722e 4469 7370 6c61  eRegister.Displa
+0002a000: 7954 6162 6c65 2e46 4f52 4345 5f52 4550  yTable.FORCE_REP
+0002a010: 5220 6973 2046 616c 7365 3a0d 0a20 2020  R is False:..   
+0002a020: 2020 2020 2020 2020 2020 2020 2054 7970               Typ
+0002a030: 6552 6567 6973 7465 722e 4469 7370 6c61  eRegister.Displa
+0002a040: 7944 6574 6563 742e 4d6f 6465 203d 2044  yDetect.Mode = D
+0002a050: 6973 706c 6179 4465 7465 6374 4d6f 6465  isplayDetectMode
+0002a060: 732e 4854 4d4c 0d0a 2020 2020 2020 2020  s.HTML..        
+0002a070: 2020 2020 7461 626c 652e 5f64 6973 706c      table._displ
+0002a080: 6179 5f6d 6f64 6520 3d20 4469 7370 6c61  ay_mode = Displa
+0002a090: 7944 6574 6563 744d 6f64 6573 2e48 544d  yDetectModes.HTM
+0002a0a0: 4c0d 0a20 2020 2020 2020 2020 2020 2066  L..            f
+0002a0b0: 726f 6d5f 7374 7220 3d20 4661 6c73 650d  rom_str = False.
+0002a0c0: 0a20 2020 2020 2020 2020 2020 2072 6f77  .            row
+0002a0d0: 5f73 7461 7473 203d 2022 5c6e 5c6e 2220  _stats = "\n\n" 
+0002a0e0: 2b20 7365 6c66 2e5f 6c61 7374 5f72 6f77  + self._last_row
+0002a0f0: 5f73 7461 7473 2829 0d0a 0d0a 2020 2020  _stats()....    
+0002a100: 2020 2020 2320 5f5f 7265 7072 5f5f 0d0a      # __repr__..
+0002a110: 2020 2020 2020 2020 656c 6966 2064 6973          elif dis
+0002a120: 706c 6179 5f74 7970 6520 3d3d 2044 535f  play_type == DS_
+0002a130: 4449 5350 4c41 595f 5459 5045 532e 5245  DISPLAY_TYPES.RE
+0002a140: 5052 3a0d 0a20 2020 2020 2020 2020 2020  PR:..           
+0002a150: 2023 2074 6869 7320 7265 7072 2077 696c   # this repr wil
+0002a160: 6c20 6265 2063 616c 6c65 6420 6265 666f  l be called befo
+0002a170: 7265 205f 7265 7072 5f68 746d 6c5f 2069  re _repr_html_ i
+0002a180: 6e20 6a75 7079 7465 720d 0a20 2020 2020  n jupyter..     
+0002a190: 2020 2020 2020 2069 6620 5479 7065 5265         if TypeRe
+0002a1a0: 6769 7374 6572 2e44 6973 706c 6179 4465  gister.DisplayDe
+0002a1b0: 7465 6374 2e4d 6f64 6520 3d3d 2044 6973  tect.Mode == Dis
+0002a1c0: 706c 6179 4465 7465 6374 4d6f 6465 732e  playDetectModes.
+0002a1d0: 4854 4d4c 3a0d 0a20 2020 2020 2020 2020  HTML:..         
+0002a1e0: 2020 2020 2020 2069 6620 5479 7065 5265         if TypeRe
+0002a1f0: 6769 7374 6572 2e44 6973 706c 6179 5461  gister.DisplayTa
+0002a200: 626c 652e 464f 5243 455f 5245 5052 2069  ble.FORCE_REPR i
+0002a210: 7320 4661 6c73 653a 0d0a 2020 2020 2020  s False:..      
+0002a220: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0002a230: 7475 726e 2022 220d 0a0d 0a20 2020 2020  turn ""....     
+0002a240: 2020 2020 2020 2065 6c69 6620 5479 7065         elif Type
+0002a250: 5265 6769 7374 6572 2e44 6973 706c 6179  Register.Display
+0002a260: 4465 7465 6374 2e4d 6f64 6520 3d3d 2044  Detect.Mode == D
+0002a270: 6973 706c 6179 4465 7465 6374 4d6f 6465  isplayDetectMode
+0002a280: 732e 436f 6e73 6f6c 653a 0d0a 2020 2020  s.Console:..    
+0002a290: 2020 2020 2020 2020 2020 2020 6672 6f6d              from
+0002a2a0: 5f73 7472 203d 2054 7275 650d 0a0d 0a20  _str = True.... 
+0002a2b0: 2020 2020 2020 2020 2020 2072 6f77 5f73             row_s
+0002a2c0: 7461 7473 203d 2022 5c6e 5c6e 2220 2b20  tats = "\n\n" + 
+0002a2d0: 7365 6c66 2e5f 6c61 7374 5f72 6f77 5f73  self._last_row_s
+0002a2e0: 7461 7473 2829 0d0a 0d0a 2020 2020 2020  tats()....      
+0002a2f0: 2020 2320 5f5f 7374 725f 5f0d 0a20 2020    # __str__..   
+0002a300: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0002a310: 2020 2020 2020 2020 2320 6e6f 2072 6f77          # no row
+0002a320: 2f63 6f6c 756d 6e2f 6d65 6d6f 7279 2073  /column/memory s
+0002a330: 7461 7473 2077 696c 6c20 6265 2064 6973  tats will be dis
+0002a340: 706c 6179 6564 0d0a 2020 2020 2020 2020  played..        
+0002a350: 2020 2020 6672 6f6d 5f73 7472 203d 2054      from_str = T
+0002a360: 7275 650d 0a0d 0a20 2020 2020 2020 2023  rue....        #
+0002a370: 206f 6e6c 7920 6461 7461 7365 7420 6861   only dataset ha
+0002a380: 7320 736f 7274 5f76 6965 772c 2069 7420  s sort_view, it 
+0002a390: 6973 206f 6666 2062 7920 6465 6661 756c  is off by defaul
+0002a3a0: 740d 0a20 2020 2020 2020 2023 2069 7420  t..        # it 
+0002a3b0: 6361 6e20 6265 2074 7572 6e65 6420 6f6e  can be turned on
+0002a3c0: 2077 6974 6820 6120 6361 6c6c 2074 6f20   with a call to 
+0002a3d0: 736f 7274 5f76 6965 770d 0a20 2020 2020  sort_view..     
+0002a3e0: 2020 2069 6620 7365 6c66 2e5f 736f 7274     if self._sort
+0002a3f0: 5f64 6973 706c 6179 2069 7320 5472 7565  _display is True
+0002a400: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
+0002a410: 2063 6865 636b 2074 6f20 7365 6520 6966   check to see if
+0002a420: 2061 6c72 6561 6479 2069 6e20 7468 6520   already in the 
+0002a430: 736f 7274 2063 6163 6865 0d0a 2020 2020  sort cache..    
+0002a440: 2020 2020 2020 2020 736f 7274 5f69 6420          sort_id 
+0002a450: 3d20 7365 6c66 2e67 6574 5f72 6f77 5f73  = self.get_row_s
+0002a460: 6f72 745f 696e 666f 2829 0d0a 2020 2020  ort_info()..    
+0002a470: 2020 2020 2020 2020 736f 7274 6564 5f72          sorted_r
+0002a480: 6f77 5f69 6478 203d 2054 7970 6552 6567  ow_idx = TypeReg
+0002a490: 6973 7465 722e 536f 7274 4361 6368 652e  ister.SortCache.
+0002a4a0: 6765 745f 736f 7274 6564 5f72 6f77 5f69  get_sorted_row_i
+0002a4b0: 6e64 6578 282a 736f 7274 5f69 6429 0d0a  ndex(*sort_id)..
+0002a4c0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0002a4d0: 656c 662e 5f73 6f72 745f 6173 6365 6e64  elf._sort_ascend
+0002a4e0: 696e 6720 6973 2046 616c 7365 3a0d 0a20  ing is False:.. 
+0002a4f0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0002a500: 6f72 7465 645f 726f 775f 6964 7820 3d20  orted_row_idx = 
+0002a510: 736f 7274 6564 5f72 6f77 5f69 6478 5b3a  sorted_row_idx[:
+0002a520: 3a2d 315d 0d0a 2020 2020 2020 2020 656c  :-1]..        el
+0002a530: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+0002a540: 2023 2072 656d 6f76 6520 616c 6c20 726f   # remove all ro
+0002a550: 7720 736f 7274 730d 0a20 2020 2020 2020  w sorts..       
+0002a560: 2020 2020 2073 6f72 7465 645f 726f 775f       sorted_row_
+0002a570: 6964 7820 3d20 4e6f 6e65 0d0a 0d0a 2020  idx = None....  
+0002a580: 2020 2020 2020 6c61 6265 6c5f 6b65 7973        label_keys
+0002a590: 203d 2073 656c 662e 6c61 6265 6c5f 6173   = self.label_as
+0002a5a0: 5f64 6963 7428 290d 0a20 2020 2020 2020  _dict()..       
+0002a5b0: 2073 756d 6d61 7279 5f63 6f6c 7320 3d20   summary_cols = 
+0002a5c0: 7365 6c66 2e73 756d 6d61 7279 5f61 735f  self.summary_as_
+0002a5d0: 6469 6374 2829 0d0a 2020 2020 2020 2020  dict()..        
+0002a5e0: 6865 6164 6572 5f74 7570 732c 206d 6169  header_tups, mai
+0002a5f0: 6e5f 6461 7461 2c20 666f 6f74 6572 5f74  n_data, footer_t
+0002a600: 7570 7320 3d20 7365 6c66 2e5f 7072 6570  ups = self._prep
+0002a610: 6172 655f 6469 7370 6c61 795f 6461 7461  are_display_data
+0002a620: 2829 0d0a 0d0a 2020 2020 2020 2020 7265  ()....        re
+0002a630: 7374 6f72 655f 7374 725f 7769 6474 6820  store_str_width 
+0002a640: 3d20 5479 7065 5265 6769 7374 6572 2e44  = TypeRegister.D
+0002a650: 6973 706c 6179 4f70 7469 6f6e 732e 4d41  isplayOptions.MA
+0002a660: 585f 5354 5249 4e47 5f57 4944 5448 0d0a  X_STRING_WIDTH..
+0002a670: 2020 2020 2020 2020 6966 2068 6173 6174          if hasat
+0002a680: 7472 2873 656c 662c 2022 5f6e 726f 7773  tr(self, "_nrows
+0002a690: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
+0002a6a0: 206e 726f 7773 203d 2073 656c 662e 5f6e   nrows = self._n
+0002a6b0: 726f 7773 0d0a 2020 2020 2020 2020 2320  rows..        # 
+0002a6c0: 6e75 6d62 6572 206f 6620 726f 7773 2069  number of rows i
+0002a6d0: 7320 7365 7420 746f 206e 756d 6265 7220  s set to number 
+0002a6e0: 6f66 2063 6f6c 756d 6e73 2066 6f72 2073  of columns for s
+0002a6f0: 7472 7563 7473 0d0a 2020 2020 2020 2020  tructs..        
+0002a700: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+0002a710: 2020 206e 726f 7773 203d 2073 656c 662e     nrows = self.
+0002a720: 5f6e 636f 6c73 0d0a 2020 2020 2020 2020  _ncols..        
+0002a730: 2020 2020 2320 696e 6372 6561 7365 206d      # increase m
+0002a740: 6178 2073 7472 696e 6720 7769 6474 6820  ax string width 
+0002a750: 666f 7220 7374 7275 6374 730d 0a20 2020  for structs..   
+0002a760: 2020 2020 2020 2020 2054 7970 6552 6567           TypeReg
+0002a770: 6973 7465 722e 4469 7370 6c61 794f 7074  ister.DisplayOpt
+0002a780: 696f 6e73 2e4d 4158 5f53 5452 494e 475f  ions.MAX_STRING_
+0002a790: 5749 4454 4820 3d20 3332 0d0a 0d0a 2020  WIDTH = 32....  
+0002a7a0: 2020 2020 2020 2320 6368 6563 6b20 6966        # check if
+0002a7b0: 2061 6363 756d 3220 6861 6420 616e 7920   accum2 had any 
+0002a7c0: 6261 6463 6f6c 730d 0a20 2020 2020 2020  badcols..       
+0002a7d0: 2062 6164 636f 6c73 203d 204e 6f6e 650d   badcols = None.
+0002a7e0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+0002a7f0: 2e5f 6261 6463 6f6c 7320 6973 206e 6f74  ._badcols is not
+0002a800: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0002a810: 2020 2020 6261 645f 636f 6c6f 7220 3d20      bad_color = 
+0002a820: 7461 626c 652e 6765 745f 6261 645f 636f  table.get_bad_co
+0002a830: 6c6f 7228 290d 0a20 2020 2020 2020 2020  lor()..         
+0002a840: 2020 2062 6164 636f 6c73 203d 207b 6b3a     badcols = {k:
+0002a850: 2062 6164 5f63 6f6c 6f72 2066 6f72 206b   bad_color for k
+0002a860: 2069 6e20 7365 6c66 2e5f 6261 6463 6f6c   in self._badcol
+0002a870: 737d 0d0a 0d0a 2020 2020 2020 2020 6261  s}....        ba
+0002a880: 6472 6f77 7320 3d20 4e6f 6e65 0d0a 2020  drows = None..  
+0002a890: 2020 2020 2020 6966 2073 656c 662e 5f62        if self._b
+0002a8a0: 6164 726f 7773 2069 7320 6e6f 7420 4e6f  adrows is not No
+0002a8b0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
+0002a8c0: 2062 6164 5f63 6f6c 6f72 203d 2074 6162   bad_color = tab
+0002a8d0: 6c65 2e67 6574 5f62 6164 5f63 6f6c 6f72  le.get_bad_color
+0002a8e0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+0002a8f0: 6261 6472 6f77 7320 3d20 7b6b 3a20 6261  badrows = {k: ba
+0002a900: 645f 636f 6c6f 7220 666f 7220 6b20 696e  d_color for k in
+0002a910: 2073 656c 662e 5f62 6164 726f 7773 7d0d   self._badrows}.
+0002a920: 0a0d 0a20 2020 2020 2020 2023 2073 656e  ...        # sen
+0002a930: 6420 746f 2072 745f 6469 7370 6c61 7920  d to rt_display 
+0002a940: 746f 2062 7569 6c64 2061 2072 6573 756c  to build a resul
+0002a950: 7420 7374 7269 6e67 2066 6f72 2063 6f6e  t string for con
+0002a960: 736f 6c65 206f 7220 6874 6d6c 0d0a 2020  sole or html..  
+0002a970: 2020 2020 2020 7265 7375 6c74 203d 2074        result = t
+0002a980: 6162 6c65 2e62 7569 6c64 5f72 6573 756c  able.build_resul
+0002a990: 745f 7461 626c 6528 0d0a 2020 2020 2020  t_table(..      
+0002a9a0: 2020 2020 2020 6865 6164 6572 5f74 7570        header_tup
+0002a9b0: 732c 2020 2320 6c69 7374 206f 6620 6c69  s,  # list of li
+0002a9c0: 7374 7320 6f66 2043 6f6c 4865 6164 6572  sts of ColHeader
+0002a9d0: 2074 7570 6c65 730d 0a20 2020 2020 2020   tuples..       
+0002a9e0: 2020 2020 206d 6169 6e5f 6461 7461 2c20       main_data, 
+0002a9f0: 2023 206c 6973 7420 6f66 2063 6f6c 756d   # list of colum
+0002aa00: 6e20 6172 7261 7973 0d0a 2020 2020 2020  n arrays..      
+0002aa10: 2020 2020 2020 6e72 6f77 732c 2020 2320        nrows,  # 
+0002aa20: 6e75 6d62 6572 206f 6620 726f 7773 2028  number of rows (
+0002aa30: 2064 6174 6173 6574 206f 6e6c 7920 290d   dataset only ).
+0002aa40: 0a20 2020 2020 2020 2020 2020 206b 6579  .            key
+0002aa50: 733d 6c61 6265 6c5f 6b65 7973 2c20 2023  s=label_keys,  #
+0002aa60: 2064 6963 7469 6f6e 6172 7920 6f66 2067   dictionary of g
+0002aa70: 726f 7570 6279 206b 6579 7320 7461 6874  roupby keys taht
+0002aa80: 2077 696c 6c20 6170 7065 6172 206f 6e20   will appear on 
+0002aa90: 7468 6520 6661 7220 6c65 6674 0d0a 2020  the far left..  
+0002aaa0: 2020 2020 2020 2020 2020 726f 775f 6e75            row_nu
+0002aab0: 6d62 6572 733d 7365 6c66 2e5f 726f 775f  mbers=self._row_
+0002aac0: 6e75 6d62 6572 732c 2020 2320 6361 6c6c  numbers,  # call
+0002aad0: 6261 636b 2066 756e 6374 696f 6e20 746f  back function to
+0002aae0: 2072 6574 7572 6e20 6375 7374 6f6d 206c   return custom l
+0002aaf0: 6566 742d 6861 6e64 2074 6162 6c65 0d0a  eft-hand table..
+0002ab00: 2020 2020 2020 2020 2020 2020 7269 6768              righ
+0002ab10: 745f 636f 6c73 3d73 756d 6d61 7279 5f63  t_cols=summary_c
+0002ab20: 6f6c 732c 2020 2320 6469 6374 696f 6e61  ols,  # dictiona
+0002ab30: 7279 206f 6620 6b65 7973 2d3e 6172 7261  ry of keys->arra
+0002ab40: 7973 2074 6861 7420 7769 6c6c 2061 7070  ys that will app
+0002ab50: 6561 7220 6f6e 2074 6865 2066 6172 2072  ear on the far r
+0002ab60: 6967 6874 0d0a 2020 2020 2020 2020 2020  ight..          
+0002ab70: 2020 666f 6f74 6572 5f74 7570 733d 666f    footer_tups=fo
+0002ab80: 6f74 6572 5f74 7570 732c 2020 2320 6c69  oter_tups,  # li
+0002ab90: 7374 206f 6620 6c69 7374 7320 6f66 2043  st of lists of C
+0002aba0: 6f6c 4865 6164 6572 2074 7570 6c65 730d  olHeader tuples.
+0002abb0: 0a20 2020 2020 2020 2020 2020 2073 6f72  .            sor
+0002abc0: 746b 6579 733d 7365 6c66 2e5f 636f 6c5f  tkeys=self._col_
+0002abd0: 736f 7274 6c69 7374 2c20 2023 206c 6973  sortlist,  # lis
+0002abe0: 7420 6f66 206e 616d 6573 206f 6620 636f  t of names of co
+0002abf0: 6c75 6d6e 7320 7468 6520 7461 626c 6520  lumns the table 
+0002ac00: 7761 7320 736f 7274 6564 2062 790d 0a20  was sorted by.. 
+0002ac10: 2020 2020 2020 2020 2020 2073 6f72 7465             sorte
+0002ac20: 645f 726f 775f 6964 783d 736f 7274 6564  d_row_idx=sorted
+0002ac30: 5f72 6f77 5f69 6478 2c20 2023 2066 616e  _row_idx,  # fan
+0002ac40: 6379 2069 6e64 6578 2066 6f72 2073 6f72  cy index for sor
+0002ac50: 7420 7768 656e 2074 6162 6c65 2068 6173  t when table has
+0002ac60: 2061 2073 6f72 7465 6420 7669 6577 0d0a   a sorted view..
+0002ac70: 2020 2020 2020 2020 2020 2020 6672 6f6d              from
+0002ac80: 5f73 7472 3d66 726f 6d5f 7374 722c 2020  _str=from_str,  
+0002ac90: 2320 6469 7370 6c61 7920 6361 6c6c 6564  # display called
+0002aca0: 2066 726f 6d20 7374 7228 2920 6f72 2070   from str() or p
+0002acb0: 6c61 696e 2063 6f6e 736f 6c65 0d0a 2020  lain console..  
+0002acc0: 2020 2020 2020 2020 2020 7472 616e 7370            transp
+0002acd0: 6f73 655f 6f6e 3d73 656c 662e 5f74 7261  ose_on=self._tra
+0002ace0: 6e73 706f 7365 5f6f 6e2c 2020 2320 6469  nspose_on,  # di
+0002acf0: 7370 6c61 7920 6361 6c6c 6564 2066 726f  splay called fro
+0002ad00: 6d20 2e5f 540d 0a20 2020 2020 2020 2020  m ._T..         
+0002ad10: 2020 2062 6164 726f 7773 3d62 6164 726f     badrows=badro
+0002ad20: 7773 2c0d 0a20 2020 2020 2020 2020 2020  ws,..           
+0002ad30: 2062 6164 636f 6c73 3d62 6164 636f 6c73   badcols=badcols
+0002ad40: 2c0d 0a20 2020 2020 2020 2020 2020 2073  ,..            s
+0002ad50: 7479 6c65 733d 7365 6c66 2e5f 7374 796c  tyles=self._styl
+0002ad60: 6573 2c20 2023 2064 6963 7469 6f6e 6172  es,  # dictionar
+0002ad70: 7920 6f66 2063 6f6c 756d 6e20 6e61 6d65  y of column name
+0002ad80: 202d 3e20 436f 6c75 6d6e 5374 796c 6520   -> ColumnStyle 
+0002ad90: 6f62 6a65 6374 202a 2a6e 6f74 2069 6d70  object **not imp
+0002ada0: 6c65 6d65 6e74 6564 0d0a 2020 2020 2020  lemented..      
+0002adb0: 2020 2020 2020 6361 6c6c 6261 636b 3d67        callback=g
+0002adc0: 6574 6174 7472 2873 656c 662c 2022 5f64  etattr(self, "_d
+0002add0: 6973 706c 6179 5f63 616c 6c62 6163 6b22  isplay_callback"
+0002ade0: 2c20 4e6f 6e65 292c 0d0a 2020 2020 2020  , None),..      
+0002adf0: 2020 2920 2023 2075 7365 7220 6361 6e20    )  # user can 
+0002ae00: 7370 6563 6966 7920 7468 6569 7220 6f77  specify their ow
+0002ae10: 6e20 6361 6c6c 6261 636b 0d0a 2020 2020  n callback..    
+0002ae20: 2020 2020 2320 6361 6c6c 6261 636b 2073      # callback s
+0002ae30: 6967 6e61 7475 7265 206d 7573 7420 6265  ignature must be
+0002ae40: 2063 616c 6c62 6163 6b28 636f 6c73 2c20   callback(cols, 
+0002ae50: 7374 796c 6566 756e 632c 2072 6f77 733d  stylefunc, rows=
+0002ae60: 5472 7565 290d 0a20 2020 2020 2020 2023  True)..        #
+0002ae70: 2066 726f 6d20 7269 7074 6162 6c65 2e72   from riptable.r
+0002ae80: 745f 6469 7370 6c61 7920 696d 706f 7274  t_display import
+0002ae90: 2044 6973 706c 6179 436f 6c75 6d6e 436f   DisplayColumnCo
+0002aea0: 6c6f 7273 0d0a 2020 2020 2020 2020 2320  lors..        # 
+0002aeb0: 6361 6c6c 6261 636b 286c 6973 7420 6f66  callback(list of
+0002aec0: 2044 6973 706c 6179 436f 6c75 6d6e 732c   DisplayColumns,
+0002aed0: 2073 7479 6c65 6675 6e63 2c20 726f 7773   stylefunc, rows
+0002aee0: 3d54 7275 6529 0d0a 2020 2020 2020 2020  =True)..        
+0002aef0: 2320 4578 616d 706c 653a 0d0a 2020 2020  # Example:..    
+0002af00: 2020 2020 2320 6465 6620 6d61 6b65 7265      # def makere
+0002af10: 6428 636f 6c73 2c20 7374 796c 6566 756e  d(cols, stylefun
+0002af20: 632c 2072 6f77 733d 5472 7565 293a 0d0a  c, rows=True):..
+0002af30: 2020 2020 2020 2020 2320 2020 2066 6f72          #    for
+0002af40: 2063 6f6c 2069 6e20 636f 6c73 3a0d 0a20   col in cols:.. 
+0002af50: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0002af60: 666f 7220 6365 6c6c 2069 6e20 636f 6c3a  for cell in col:
+0002af70: 0d0a 2020 2020 2020 2020 2320 2020 2020  ..        #     
+0002af80: 2020 2020 2020 2069 6620 6365 6c6c 2e73         if cell.s
+0002af90: 7472 696e 672e 7374 6172 7473 7769 7468  tring.startswith
+0002afa0: 2827 2d27 293a 2063 656c 6c2e 636f 6c6f  ('-'): cell.colo
+0002afb0: 723d 4469 7370 6c61 7943 6f6c 756d 6e43  r=DisplayColumnC
+0002afc0: 6f6c 6f72 732e 5265 640d 0a20 2020 2020  olors.Red..     
+0002afd0: 2020 2023 2064 732e 5f64 6973 706c 6179     # ds._display
+0002afe0: 5f63 616c 6c62 6163 6b20 3d20 6d61 6b65  _callback = make
+0002aff0: 7265 640d 0a0d 0a20 2020 2020 2020 2054  red....        T
+0002b000: 7970 6552 6567 6973 7465 722e 4469 7370  ypeRegister.Disp
+0002b010: 6c61 794f 7074 696f 6e73 2e4d 4158 5f53  layOptions.MAX_S
+0002b020: 5452 494e 475f 5749 4454 4820 3d20 7265  TRING_WIDTH = re
+0002b030: 7374 6f72 655f 7374 725f 7769 6474 680d  store_str_width.
+0002b040: 0a0d 0a20 2020 2020 2020 2072 6574 7572  ...        retur
+0002b050: 6e20 7265 7375 6c74 202b 2072 6f77 5f73  n result + row_s
+0002b060: 7461 7473 0d0a 0d0a 2020 2020 2320 2d2d  tats....    # --
+0002b070: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002b080: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002b090: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002b0a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002b0b0: 2d0d 0a20 2020 2064 6566 2073 6574 5f64  -..    def set_d
-0002b0c0: 6973 706c 6179 5f63 616c 6c62 6163 6b28  isplay_callback(
-0002b0d0: 7365 6c66 2c20 7573 6572 6675 6e63 2c20  self, userfunc, 
-0002b0e0: 7363 6f70 653d 4e6f 6e65 293a 0d0a 2020  scope=None):..  
-0002b0f0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0002b100: 2020 2053 6574 2074 6865 2075 7365 7220     Set the user 
-0002b110: 6469 7370 6c61 7920 6361 6c6c 6261 636b  display callback
-0002b120: 2066 6f72 2073 7479 6c69 6e67 2074 6578   for styling tex
-0002b130: 742e 0d0a 0d0a 2020 2020 2020 2020 5061  t.....        Pa
-0002b140: 7261 6d65 7465 7273 0d0a 2020 2020 2020  rameters..      
-0002b150: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020    ----------..  
-0002b160: 2020 2020 2020 7573 6572 6675 6e63 3a20        userfunc: 
-0002b170: 6675 6e63 7469 6f6e 0d0a 2020 2020 2020  function..      
-0002b180: 2020 2020 2020 5468 6973 2066 756e 6374        This funct
-0002b190: 696f 6e20 6d75 7374 2074 616b 6520 7477  ion must take tw
-0002b1a0: 6f20 6172 6775 6d65 6e74 732c 2060 6075  o arguments, ``u
-0002b1b0: 7365 7266 756e 6328 636f 6c73 2c20 2a2a  serfunc(cols, **
-0002b1c0: 6b77 6172 6773 2960 602e 0d0a 0d0a 2020  kwargs)``.....  
-0002b1d0: 2020 2020 2020 7363 6f70 653a 2064 6566        scope: def
-0002b1e0: 6175 6c74 204e 6f6e 650d 0a20 2020 2020  ault None..     
-0002b1f0: 2020 2020 2020 2054 6865 2063 616c 6c62         The callb
-0002b200: 6163 6b20 666f 7220 6a75 7374 2074 6869  ack for just thi
-0002b210: 7320 4461 7461 7365 742c 206f 7220 616c  s Dataset, or al
-0002b220: 6c20 4461 7461 7365 7473 2e20 4361 6e20  l Datasets. Can 
-0002b230: 6265 204e 6f6e 652c 0d0a 2020 2020 2020  be None,..      
-0002b240: 2020 2020 2020 6044 6174 6173 6574 602c        `Dataset`,
-0002b250: 206f 7220 6053 7472 7563 7460 2e0d 0a0d   or `Struct`....
-0002b260: 0a20 2020 2020 2020 2045 7861 6d70 6c65  .        Example
-0002b270: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-0002b280: 2d2d 2d0d 0a20 2020 2020 2020 203e 3e3e  ---..        >>>
-0002b290: 2066 726f 6d20 7269 7074 6162 6c65 2e72   from riptable.r
-0002b2a0: 745f 6469 7370 6c61 7920 696d 706f 7274  t_display import
-0002b2b0: 2044 6973 706c 6179 436f 6c75 6d6e 436f   DisplayColumnCo
-0002b2c0: 6c6f 7273 0d0a 2020 2020 2020 2020 3e3e  lors..        >>
-0002b2d0: 3e20 6465 6620 6d61 6b65 5f72 6564 2863  > def make_red(c
-0002b2e0: 6f6c 732c 202a 2a6b 7761 7267 7329 3a0d  ols, **kwargs):.
-0002b2f0: 0a20 2020 2020 2020 202e 2e2e 2020 2020  .        ...    
-0002b300: 206c 6f63 6174 696f 6e20 3d20 6b77 6172   location = kwar
-0002b310: 6773 5b27 6c6f 6361 7469 6f6e 275d 2020  gs['location']  
-0002b320: 2320 636f 756c 6420 6c65 6674 2c20 7269  # could left, ri
-0002b330: 6768 742c 206f 7220 6d61 696e 0d0a 2020  ght, or main..  
-0002b340: 2020 2020 2020 2e2e 2e20 2020 2020 6966        ...     if
-0002b350: 206c 6f63 6174 696f 6e20 3d3d 2027 6d61   location == 'ma
-0002b360: 696e 273a 0d0a 2020 2020 2020 2020 2e2e  in':..        ..
-0002b370: 2e20 2020 2020 2020 2020 666f 7220 636f  .         for co
-0002b380: 6c20 696e 2063 6f6c 733a 0d0a 2020 2020  l in cols:..    
-0002b390: 2020 2020 2e2e 2e20 2020 2020 2020 2020      ...         
-0002b3a0: 2020 2020 666f 7220 6365 6c6c 2069 6e20      for cell in 
-0002b3b0: 636f 6c3a 0d0a 2020 2020 2020 2020 2e2e  col:..        ..
-0002b3c0: 2e20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b3d0: 2020 6966 2063 656c 6c2e 7374 7269 6e67    if cell.string
-0002b3e0: 2e73 7461 7274 7377 6974 6828 272d 2729  .startswith('-')
-0002b3f0: 3a20 6365 6c6c 2e73 7472 696e 6720 3d20  : cell.string = 
-0002b400: 2728 2720 2b20 6365 6c6c 2e73 7472 696e  '(' + cell.strin
-0002b410: 675b 313a 5d20 2b20 2729 273b 2063 656c  g[1:] + ')'; cel
-0002b420: 6c2e 636f 6c6f 723d 4469 7370 6c61 7943  l.color=DisplayC
-0002b430: 6f6c 756d 6e43 6f6c 6f72 732e 5265 640d  olumnColors.Red.
-0002b440: 0a20 2020 2020 2020 203e 3e3e 2064 733d  .        >>> ds=
-0002b450: 7274 2e44 6174 6173 6574 287b 2774 6573  rt.Dataset({'tes
-0002b460: 7427 3a72 742e 6172 616e 6765 2835 292d  t':rt.arange(5)-
-0002b470: 332c 2027 616e 6f74 6865 7227 3a72 742e  3, 'another':rt.
-0002b480: 6172 616e 6765 2835 2e30 292d 327d 290d  arange(5.0)-2}).
-0002b490: 0a20 2020 2020 2020 203e 3e3e 2064 732e  .        >>> ds.
-0002b4a0: 7365 745f 6469 7370 6c61 795f 6361 6c6c  set_display_call
-0002b4b0: 6261 636b 286d 616b 655f 7265 6429 0d0a  back(make_red)..
-0002b4c0: 2020 2020 2020 2020 3e3e 3e20 6473 0d0a          >>> ds..
-0002b4d0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-0002b4e0: 2020 2020 2020 2069 6620 6e6f 7420 6361         if not ca
-0002b4f0: 6c6c 6162 6c65 2875 7365 7266 756e 6329  llable(userfunc)
-0002b500: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-0002b510: 6169 7365 2054 7970 6545 7272 6f72 2822  aise TypeError("
-0002b520: 5468 6520 7573 6572 6675 6e63 2070 6173  The userfunc pas
-0002b530: 7365 6420 6d75 7374 2062 6520 6120 6361  sed must be a ca
-0002b540: 6c6c 6162 6c65 2066 756e 6374 696f 6e2e  llable function.
-0002b550: 2229 0d0a 2020 2020 2020 2020 6966 2073  ")..        if s
-0002b560: 636f 7065 2069 7320 4e6f 6e65 3a0d 0a20  cope is None:.. 
-0002b570: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0002b580: 5f64 6973 706c 6179 5f63 616c 6c62 6163  _display_callbac
-0002b590: 6b20 3d20 7573 6572 6675 6e63 0d0a 2020  k = userfunc..  
-0002b5a0: 2020 2020 2020 656c 6966 2073 636f 7065        elif scope
-0002b5b0: 203d 3d20 2244 6174 6173 6574 223a 0d0a   == "Dataset":..
-0002b5c0: 2020 2020 2020 2020 2020 2020 5479 7065              Type
-0002b5d0: 5265 6769 7374 6572 2e44 6174 6173 6574  Register.Dataset
-0002b5e0: 2e5f 6469 7370 6c61 795f 6361 6c6c 6261  ._display_callba
-0002b5f0: 636b 203d 2075 7365 7266 756e 630d 0a20  ck = userfunc.. 
-0002b600: 2020 2020 2020 2065 6c69 6620 7363 6f70         elif scop
-0002b610: 6520 3d3d 2022 5374 7275 6374 223a 0d0a  e == "Struct":..
-0002b620: 2020 2020 2020 2020 2020 2020 5479 7065              Type
-0002b630: 5265 6769 7374 6572 2e53 7472 7563 742e  Register.Struct.
-0002b640: 5f64 6973 706c 6179 5f63 616c 6c62 6163  _display_callbac
-0002b650: 6b20 3d20 7573 6572 6675 6e63 0d0a 2020  k = userfunc..  
-0002b660: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-0002b670: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
-0002b680: 616c 7565 4572 726f 7228 2254 6865 2027  alueError("The '
-0002b690: 7363 6f70 6527 206d 7573 7420 6265 204e  scope' must be N
-0002b6a0: 6f6e 652c 2027 4461 7461 7365 7427 2c20  one, 'Dataset', 
-0002b6b0: 6f72 2027 5374 7275 6374 2722 290d 0a0d  or 'Struct'")...
-0002b6c0: 0a20 2020 2023 202d 2d2d 2d2d 2d2d 2d2d  .    # ---------
+0002b0a0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 2073  -----..    def s
+0002b0b0: 6574 5f64 6973 706c 6179 5f63 616c 6c62  et_display_callb
+0002b0c0: 6163 6b28 7365 6c66 2c20 7573 6572 6675  ack(self, userfu
+0002b0d0: 6e63 2c20 7363 6f70 653d 4e6f 6e65 293a  nc, scope=None):
+0002b0e0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0002b0f0: 2020 2020 2020 2053 6574 2074 6865 2075         Set the u
+0002b100: 7365 7220 6469 7370 6c61 7920 6361 6c6c  ser display call
+0002b110: 6261 636b 2066 6f72 2073 7479 6c69 6e67  back for styling
+0002b120: 2074 6578 742e 0d0a 0d0a 2020 2020 2020   text.....      
+0002b130: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
+0002b140: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
+0002b150: 0d0a 2020 2020 2020 2020 7573 6572 6675  ..        userfu
+0002b160: 6e63 3a20 6675 6e63 7469 6f6e 0d0a 2020  nc: function..  
+0002b170: 2020 2020 2020 2020 2020 5468 6973 2066            This f
+0002b180: 756e 6374 696f 6e20 6d75 7374 2074 616b  unction must tak
+0002b190: 6520 7477 6f20 6172 6775 6d65 6e74 732c  e two arguments,
+0002b1a0: 2060 6075 7365 7266 756e 6328 636f 6c73   ``userfunc(cols
+0002b1b0: 2c20 2a2a 6b77 6172 6773 2960 602e 0d0a  , **kwargs)``...
+0002b1c0: 0d0a 2020 2020 2020 2020 7363 6f70 653a  ..        scope:
+0002b1d0: 2064 6566 6175 6c74 204e 6f6e 650d 0a20   default None.. 
+0002b1e0: 2020 2020 2020 2020 2020 2054 6865 2063             The c
+0002b1f0: 616c 6c62 6163 6b20 666f 7220 6a75 7374  allback for just
+0002b200: 2074 6869 7320 4461 7461 7365 742c 206f   this Dataset, o
+0002b210: 7220 616c 6c20 4461 7461 7365 7473 2e20  r all Datasets. 
+0002b220: 4361 6e20 6265 204e 6f6e 652c 0d0a 2020  Can be None,..  
+0002b230: 2020 2020 2020 2020 2020 6044 6174 6173            `Datas
+0002b240: 6574 602c 206f 7220 6053 7472 7563 7460  et`, or `Struct`
+0002b250: 2e0d 0a0d 0a20 2020 2020 2020 2045 7861  .....        Exa
+0002b260: 6d70 6c65 730d 0a20 2020 2020 2020 202d  mples..        -
+0002b270: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0002b280: 203e 3e3e 2066 726f 6d20 7269 7074 6162   >>> from riptab
+0002b290: 6c65 2e72 745f 6469 7370 6c61 7920 696d  le.rt_display im
+0002b2a0: 706f 7274 2044 6973 706c 6179 436f 6c75  port DisplayColu
+0002b2b0: 6d6e 436f 6c6f 7273 0d0a 2020 2020 2020  mnColors..      
+0002b2c0: 2020 3e3e 3e20 6465 6620 6d61 6b65 5f72    >>> def make_r
+0002b2d0: 6564 2863 6f6c 732c 202a 2a6b 7761 7267  ed(cols, **kwarg
+0002b2e0: 7329 3a0d 0a20 2020 2020 2020 202e 2e2e  s):..        ...
+0002b2f0: 2020 2020 206c 6f63 6174 696f 6e20 3d20       location = 
+0002b300: 6b77 6172 6773 5b27 6c6f 6361 7469 6f6e  kwargs['location
+0002b310: 275d 2020 2320 636f 756c 6420 6c65 6674  ']  # could left
+0002b320: 2c20 7269 6768 742c 206f 7220 6d61 696e  , right, or main
+0002b330: 0d0a 2020 2020 2020 2020 2e2e 2e20 2020  ..        ...   
+0002b340: 2020 6966 206c 6f63 6174 696f 6e20 3d3d    if location ==
+0002b350: 2027 6d61 696e 273a 0d0a 2020 2020 2020   'main':..      
+0002b360: 2020 2e2e 2e20 2020 2020 2020 2020 666f    ...         fo
+0002b370: 7220 636f 6c20 696e 2063 6f6c 733a 0d0a  r col in cols:..
+0002b380: 2020 2020 2020 2020 2e2e 2e20 2020 2020          ...     
+0002b390: 2020 2020 2020 2020 666f 7220 6365 6c6c          for cell
+0002b3a0: 2069 6e20 636f 6c3a 0d0a 2020 2020 2020   in col:..      
+0002b3b0: 2020 2e2e 2e20 2020 2020 2020 2020 2020    ...           
+0002b3c0: 2020 2020 2020 6966 2063 656c 6c2e 7374        if cell.st
+0002b3d0: 7269 6e67 2e73 7461 7274 7377 6974 6828  ring.startswith(
+0002b3e0: 272d 2729 3a20 6365 6c6c 2e73 7472 696e  '-'): cell.strin
+0002b3f0: 6720 3d20 2728 2720 2b20 6365 6c6c 2e73  g = '(' + cell.s
+0002b400: 7472 696e 675b 313a 5d20 2b20 2729 273b  tring[1:] + ')';
+0002b410: 2063 656c 6c2e 636f 6c6f 723d 4469 7370   cell.color=Disp
+0002b420: 6c61 7943 6f6c 756d 6e43 6f6c 6f72 732e  layColumnColors.
+0002b430: 5265 640d 0a20 2020 2020 2020 203e 3e3e  Red..        >>>
+0002b440: 2064 733d 7274 2e44 6174 6173 6574 287b   ds=rt.Dataset({
+0002b450: 2774 6573 7427 3a72 742e 6172 616e 6765  'test':rt.arange
+0002b460: 2835 292d 332c 2027 616e 6f74 6865 7227  (5)-3, 'another'
+0002b470: 3a72 742e 6172 616e 6765 2835 2e30 292d  :rt.arange(5.0)-
+0002b480: 327d 290d 0a20 2020 2020 2020 203e 3e3e  2})..        >>>
+0002b490: 2064 732e 7365 745f 6469 7370 6c61 795f   ds.set_display_
+0002b4a0: 6361 6c6c 6261 636b 286d 616b 655f 7265  callback(make_re
+0002b4b0: 6429 0d0a 2020 2020 2020 2020 3e3e 3e20  d)..        >>> 
+0002b4c0: 6473 0d0a 0d0a 2020 2020 2020 2020 2222  ds....        ""
+0002b4d0: 220d 0a20 2020 2020 2020 2069 6620 6e6f  "..        if no
+0002b4e0: 7420 6361 6c6c 6162 6c65 2875 7365 7266  t callable(userf
+0002b4f0: 756e 6329 3a0d 0a20 2020 2020 2020 2020  unc):..         
+0002b500: 2020 2072 6169 7365 2054 7970 6545 7272     raise TypeErr
+0002b510: 6f72 2822 5468 6520 7573 6572 6675 6e63  or("The userfunc
+0002b520: 2070 6173 7365 6420 6d75 7374 2062 6520   passed must be 
+0002b530: 6120 6361 6c6c 6162 6c65 2066 756e 6374  a callable funct
+0002b540: 696f 6e2e 2229 0d0a 2020 2020 2020 2020  ion.")..        
+0002b550: 6966 2073 636f 7065 2069 7320 4e6f 6e65  if scope is None
+0002b560: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+0002b570: 656c 662e 5f64 6973 706c 6179 5f63 616c  elf._display_cal
+0002b580: 6c62 6163 6b20 3d20 7573 6572 6675 6e63  lback = userfunc
+0002b590: 0d0a 2020 2020 2020 2020 656c 6966 2073  ..        elif s
+0002b5a0: 636f 7065 203d 3d20 2244 6174 6173 6574  cope == "Dataset
+0002b5b0: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+0002b5c0: 5479 7065 5265 6769 7374 6572 2e44 6174  TypeRegister.Dat
+0002b5d0: 6173 6574 2e5f 6469 7370 6c61 795f 6361  aset._display_ca
+0002b5e0: 6c6c 6261 636b 203d 2075 7365 7266 756e  llback = userfun
+0002b5f0: 630d 0a20 2020 2020 2020 2065 6c69 6620  c..        elif 
+0002b600: 7363 6f70 6520 3d3d 2022 5374 7275 6374  scope == "Struct
+0002b610: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+0002b620: 5479 7065 5265 6769 7374 6572 2e53 7472  TypeRegister.Str
+0002b630: 7563 742e 5f64 6973 706c 6179 5f63 616c  uct._display_cal
+0002b640: 6c62 6163 6b20 3d20 7573 6572 6675 6e63  lback = userfunc
+0002b650: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
+0002b660: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+0002b670: 7365 2056 616c 7565 4572 726f 7228 2254  se ValueError("T
+0002b680: 6865 2027 7363 6f70 6527 206d 7573 7420  he 'scope' must 
+0002b690: 6265 204e 6f6e 652c 2027 4461 7461 7365  be None, 'Datase
+0002b6a0: 7427 2c20 6f72 2027 5374 7275 6374 2722  t', or 'Struct'"
+0002b6b0: 290d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  )....    # -----
+0002b6c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002b6d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002b6e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002b6f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
-0002b700: 2020 2020 6465 6620 5f73 6f72 745f 636f      def _sort_co
-0002b710: 6c75 6d6e 5f73 7479 6c65 7328 7365 6c66  lumn_styles(self
-0002b720: 2c20 7374 796c 6529 3a0d 0a20 2020 2020  , style):..     
-0002b730: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-0002b740: 4361 6c6c 6261 636b 2074 6f20 7265 7475  Callback to retu
-0002b750: 726e 2073 6f72 742d 6279 2063 6f6c 756d  rn sort-by colum
-0002b760: 6e73 2e0d 0a0d 0a20 2020 2020 2020 2073  ns.....        s
-0002b770: 7479 6c65 203a 2064 6566 6175 6c74 2073  tyle : default s
-0002b780: 6f72 7420 7374 796c 6520 6672 6f6d 2064  ort style from d
-0002b790: 6973 706c 6179 0d0a 0d0a 2020 2020 2020  isplay....      
-0002b7a0: 2020 5265 7475 726e 7320 6469 6374 696f    Returns dictio
-0002b7b0: 6e61 7279 206f 6620 636f 6c75 6d6e 206e  nary of column n
-0002b7c0: 616d 6520 2d3e 2074 7570 6c65 2820 6172  ame -> tuple( ar
-0002b7d0: 7261 792c 2043 6f6c 756d 6e53 7479 6c65  ray, ColumnStyle
-0002b7e0: 2029 0d0a 2020 2020 2020 2020 5468 6573   )..        Thes
-0002b7f0: 6520 636f 6c75 6d6e 7320 7769 6c6c 2062  e columns will b
-0002b800: 6520 6d6f 7665 6420 746f 2074 6865 206c  e moved to the l
-0002b810: 6566 7420 6f66 2074 6865 2074 6162 6c65  eft of the table
-0002b820: 2e0d 0a20 2020 2020 2020 2022 2222 0d0a  ...        """..
-0002b830: 2020 2020 2020 2020 636f 6c73 203d 207b          cols = {
-0002b840: 7d0d 0a20 2020 2020 2020 2073 6f72 745f  }..        sort_
-0002b850: 7374 796c 6520 3d20 436f 6c75 6d6e 5374  style = ColumnSt
-0002b860: 796c 6528 636f 6c6f 723d 4469 7370 6c61  yle(color=Displa
-0002b870: 7943 6f6c 756d 6e43 6f6c 6f72 732e 536f  yColumnColors.So
-0002b880: 7274 290d 0a20 2020 2020 2020 2066 6f72  rt)..        for
-0002b890: 206e 616d 6520 696e 2073 656c 662e 5f63   name in self._c
-0002b8a0: 6f6c 5f73 6f72 746c 6973 743a 0d0a 2020  ol_sortlist:..  
-0002b8b0: 2020 2020 2020 2020 2020 636f 6c73 5b6e            cols[n
-0002b8c0: 616d 655d 203d 2028 7365 6c66 5b6e 616d  ame] = (self[nam
-0002b8d0: 655d 2c20 736f 7274 5f73 7479 6c65 290d  e], sort_style).
-0002b8e0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0002b8f0: 636f 6c73 0d0a 0d0a 2020 2020 2320 2d2d  cols....    # --
+0002b6f0: 2d2d 0d0a 2020 2020 6465 6620 5f73 6f72  --..    def _sor
+0002b700: 745f 636f 6c75 6d6e 5f73 7479 6c65 7328  t_column_styles(
+0002b710: 7365 6c66 2c20 7374 796c 6529 3a0d 0a20  self, style):.. 
+0002b720: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+0002b730: 2020 2020 4361 6c6c 6261 636b 2074 6f20      Callback to 
+0002b740: 7265 7475 726e 2073 6f72 742d 6279 2063  return sort-by c
+0002b750: 6f6c 756d 6e73 2e0d 0a0d 0a20 2020 2020  olumns.....     
+0002b760: 2020 2073 7479 6c65 203a 2064 6566 6175     style : defau
+0002b770: 6c74 2073 6f72 7420 7374 796c 6520 6672  lt sort style fr
+0002b780: 6f6d 2064 6973 706c 6179 0d0a 0d0a 2020  om display....  
+0002b790: 2020 2020 2020 5265 7475 726e 7320 6469        Returns di
+0002b7a0: 6374 696f 6e61 7279 206f 6620 636f 6c75  ctionary of colu
+0002b7b0: 6d6e 206e 616d 6520 2d3e 2074 7570 6c65  mn name -> tuple
+0002b7c0: 2820 6172 7261 792c 2043 6f6c 756d 6e53  ( array, ColumnS
+0002b7d0: 7479 6c65 2029 0d0a 2020 2020 2020 2020  tyle )..        
+0002b7e0: 5468 6573 6520 636f 6c75 6d6e 7320 7769  These columns wi
+0002b7f0: 6c6c 2062 6520 6d6f 7665 6420 746f 2074  ll be moved to t
+0002b800: 6865 206c 6566 7420 6f66 2074 6865 2074  he left of the t
+0002b810: 6162 6c65 2e0d 0a20 2020 2020 2020 2022  able...        "
+0002b820: 2222 0d0a 2020 2020 2020 2020 636f 6c73  ""..        cols
+0002b830: 203d 207b 7d0d 0a20 2020 2020 2020 2073   = {}..        s
+0002b840: 6f72 745f 7374 796c 6520 3d20 436f 6c75  ort_style = Colu
+0002b850: 6d6e 5374 796c 6528 636f 6c6f 723d 4469  mnStyle(color=Di
+0002b860: 7370 6c61 7943 6f6c 756d 6e43 6f6c 6f72  splayColumnColor
+0002b870: 732e 536f 7274 290d 0a20 2020 2020 2020  s.Sort)..       
+0002b880: 2066 6f72 206e 616d 6520 696e 2073 656c   for name in sel
+0002b890: 662e 5f63 6f6c 5f73 6f72 746c 6973 743a  f._col_sortlist:
+0002b8a0: 0d0a 2020 2020 2020 2020 2020 2020 636f  ..            co
+0002b8b0: 6c73 5b6e 616d 655d 203d 2028 7365 6c66  ls[name] = (self
+0002b8c0: 5b6e 616d 655d 2c20 736f 7274 5f73 7479  [name], sort_sty
+0002b8d0: 6c65 290d 0a20 2020 2020 2020 2072 6574  le)..        ret
+0002b8e0: 7572 6e20 636f 6c73 0d0a 0d0a 2020 2020  urn cols....    
+0002b8f0: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
 0002b900: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002b910: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002b920: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002b930: 2d2d 2d2d 2d0d 0a20 2020 2040 7072 6f70  -----..    @prop
-0002b940: 6572 7479 0d0a 2020 2020 6465 6620 5f73  erty..    def _s
-0002b950: 7479 6c65 7328 7365 6c66 293a 0d0a 2020  tyles(self):..  
-0002b960: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0002b970: 2020 2053 7562 636c 6173 7365 7320 6361     Subclasses ca
-0002b980: 6e20 7265 7475 726e 2061 2063 616c 6c62  n return a callb
-0002b990: 6163 6b20 6675 6e63 7469 6f6e 2077 6869  ack function whi
-0002b9a0: 6368 2074 616b 6573 206e 6f20 6172 6775  ch takes no argu
-0002b9b0: 6d65 6e74 730d 0a20 2020 2020 2020 2052  ments..        R
-0002b9c0: 6574 7572 6e73 2064 6963 7469 6f6e 6172  eturns dictionar
-0002b9d0: 7920 6f66 2063 6f6c 756d 6e20 6e61 6d65  y of column name
-0002b9e0: 7320 2d3e 2043 6f6c 756d 6e53 7479 6c65  s -> ColumnStyle
-0002b9f0: 206f 626a 6563 7473 0d0a 2020 2020 2020   objects..      
-0002ba00: 2020 2222 220d 0a20 2020 2020 2020 2069    """..        i
-0002ba10: 6620 6861 7361 7474 7228 7365 6c66 2c20  f hasattr(self, 
-0002ba20: 225f 636f 6c75 6d6e 5f73 7479 6c65 7322  "_column_styles"
-0002ba30: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0002ba40: 7265 7475 726e 2073 656c 662e 5f63 6f6c  return self._col
-0002ba50: 756d 6e5f 7374 796c 6573 0d0a 0d0a 2020  umn_styles....  
-0002ba60: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
+0002b920: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2040  ---------..    @
+0002b930: 7072 6f70 6572 7479 0d0a 2020 2020 6465  property..    de
+0002b940: 6620 5f73 7479 6c65 7328 7365 6c66 293a  f _styles(self):
+0002b950: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0002b960: 2020 2020 2020 2053 7562 636c 6173 7365         Subclasse
+0002b970: 7320 6361 6e20 7265 7475 726e 2061 2063  s can return a c
+0002b980: 616c 6c62 6163 6b20 6675 6e63 7469 6f6e  allback function
+0002b990: 2077 6869 6368 2074 616b 6573 206e 6f20   which takes no 
+0002b9a0: 6172 6775 6d65 6e74 730d 0a20 2020 2020  arguments..     
+0002b9b0: 2020 2052 6574 7572 6e73 2064 6963 7469     Returns dicti
+0002b9c0: 6f6e 6172 7920 6f66 2063 6f6c 756d 6e20  onary of column 
+0002b9d0: 6e61 6d65 7320 2d3e 2043 6f6c 756d 6e53  names -> ColumnS
+0002b9e0: 7479 6c65 206f 626a 6563 7473 0d0a 2020  tyle objects..  
+0002b9f0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+0002ba00: 2020 2069 6620 6861 7361 7474 7228 7365     if hasattr(se
+0002ba10: 6c66 2c20 225f 636f 6c75 6d6e 5f73 7479  lf, "_column_sty
+0002ba20: 6c65 7322 293a 0d0a 2020 2020 2020 2020  les"):..        
+0002ba30: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+0002ba40: 5f63 6f6c 756d 6e5f 7374 796c 6573 0d0a  _column_styles..
+0002ba50: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+0002ba60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002ba70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002ba80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002ba90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
-0002baa0: 2040 7072 6f70 6572 7479 0d0a 2020 2020   @property..    
-0002bab0: 6465 6620 5f72 6f77 5f6e 756d 6265 7273  def _row_numbers
-0002bac0: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-0002bad0: 2022 2222 0d0a 2020 2020 2020 2020 5375   """..        Su
-0002bae0: 6263 6c61 7373 6573 2063 616e 2064 6566  bclasses can def
-0002baf0: 696e 6520 7468 6569 7220 6f77 6e20 6361  ine their own ca
-0002bb00: 6c6c 6261 636b 2066 756e 6374 696f 6e20  llback function 
-0002bb10: 746f 2063 7573 746f 6d69 7a65 2074 6865  to customize the
-0002bb20: 206c 6566 7420 7369 6465 206f 6620 7468   left side of th
-0002bb30: 6520 7461 626c 652e 0d0a 2020 2020 2020  e table...      
-0002bb40: 2020 4966 206e 6f74 2064 6566 696e 6564    If not defined
-0002bb50: 2c20 6e6f 726d 616c 2072 6f77 206e 756d  , normal row num
-0002bb60: 6265 7273 2077 696c 6c20 6265 2064 6973  bers will be dis
-0002bb70: 706c 6179 6564 0d0a 0d0a 2020 2020 2020  played....      
-0002bb80: 2020 5061 7261 6d65 7465 7273 0d0a 2020    Parameters..  
-0002bb90: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-0002bba0: 0d0a 2020 2020 2020 2020 6172 7220 3a20  ..        arr : 
-0002bbb0: 6172 7261 790d 0a20 2020 2020 2020 2020  array..         
-0002bbc0: 2020 2046 616e 6379 2069 6e64 6578 2061     Fancy index a
-0002bbd0: 7272 6179 206f 6620 726f 7720 6e75 6d62  rray of row numb
-0002bbe0: 6572 730d 0a20 2020 2020 2020 2073 7479  ers..        sty
-0002bbf0: 6c65 203a 2060 436f 6c75 6d6e 5374 796c  le : `ColumnStyl
-0002bc00: 6560 0d0a 2020 2020 2020 2020 2020 2020  e`..            
-0002bc10: 4465 6661 756c 7420 7374 796c 6520 6f62  Default style ob
-0002bc20: 6a65 6374 2066 6f72 2066 696e 616c 2072  ject for final r
-0002bc30: 6f77 206e 756d 6265 7273 2063 6f6c 756d  ow numbers colum
-0002bc40: 6e2e 0d0a 0d0a 2020 2020 2020 2020 5265  n.....        Re
-0002bc50: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
-0002bc60: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
-0002bc70: 6865 6164 6572 203a 2073 7472 696e 670d  header : string.
-0002bc80: 0a20 2020 2020 2020 206c 6162 656c 5f61  .        label_a
-0002bc90: 7272 6179 203a 206e 6461 7272 6179 0d0a  rray : ndarray..
-0002bca0: 2020 2020 2020 2020 7374 796c 6520 3a20          style : 
-0002bcb0: 6043 6f6c 756d 6e53 7479 6c65 600d 0a20  `ColumnStyle`.. 
-0002bcc0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-0002bcd0: 2020 2020 7265 7475 726e 204e 6f6e 650d      return None.
-0002bce0: 0a0d 0a20 2020 2023 202d 2d2d 2d2d 2d2d  ...    # -------
+0002ba80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
+0002ba90: 0a20 2020 2040 7072 6f70 6572 7479 0d0a  .    @property..
+0002baa0: 2020 2020 6465 6620 5f72 6f77 5f6e 756d      def _row_num
+0002bab0: 6265 7273 2873 656c 6629 3a0d 0a20 2020  bers(self):..   
+0002bac0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+0002bad0: 2020 5375 6263 6c61 7373 6573 2063 616e    Subclasses can
+0002bae0: 2064 6566 696e 6520 7468 6569 7220 6f77   define their ow
+0002baf0: 6e20 6361 6c6c 6261 636b 2066 756e 6374  n callback funct
+0002bb00: 696f 6e20 746f 2063 7573 746f 6d69 7a65  ion to customize
+0002bb10: 2074 6865 206c 6566 7420 7369 6465 206f   the left side o
+0002bb20: 6620 7468 6520 7461 626c 652e 0d0a 2020  f the table...  
+0002bb30: 2020 2020 2020 4966 206e 6f74 2064 6566        If not def
+0002bb40: 696e 6564 2c20 6e6f 726d 616c 2072 6f77  ined, normal row
+0002bb50: 206e 756d 6265 7273 2077 696c 6c20 6265   numbers will be
+0002bb60: 2064 6973 706c 6179 6564 0d0a 0d0a 2020   displayed....  
+0002bb70: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
+0002bb80: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
+0002bb90: 2d2d 2d2d 0d0a 2020 2020 2020 2020 6172  ----..        ar
+0002bba0: 7220 3a20 6172 7261 790d 0a20 2020 2020  r : array..     
+0002bbb0: 2020 2020 2020 2046 616e 6379 2069 6e64         Fancy ind
+0002bbc0: 6578 2061 7272 6179 206f 6620 726f 7720  ex array of row 
+0002bbd0: 6e75 6d62 6572 730d 0a20 2020 2020 2020  numbers..       
+0002bbe0: 2073 7479 6c65 203a 2060 436f 6c75 6d6e   style : `Column
+0002bbf0: 5374 796c 6560 0d0a 2020 2020 2020 2020  Style`..        
+0002bc00: 2020 2020 4465 6661 756c 7420 7374 796c      Default styl
+0002bc10: 6520 6f62 6a65 6374 2066 6f72 2066 696e  e object for fin
+0002bc20: 616c 2072 6f77 206e 756d 6265 7273 2063  al row numbers c
+0002bc30: 6f6c 756d 6e2e 0d0a 0d0a 2020 2020 2020  olumn.....      
+0002bc40: 2020 5265 7475 726e 730d 0a20 2020 2020    Returns..     
+0002bc50: 2020 202d 2d2d 2d2d 2d2d 0d0a 2020 2020     -------..    
+0002bc60: 2020 2020 6865 6164 6572 203a 2073 7472      header : str
+0002bc70: 696e 670d 0a20 2020 2020 2020 206c 6162  ing..        lab
+0002bc80: 656c 5f61 7272 6179 203a 206e 6461 7272  el_array : ndarr
+0002bc90: 6179 0d0a 2020 2020 2020 2020 7374 796c  ay..        styl
+0002bca0: 6520 3a20 6043 6f6c 756d 6e53 7479 6c65  e : `ColumnStyle
+0002bcb0: 600d 0a20 2020 2020 2020 2022 2222 0d0a  `..        """..
+0002bcc0: 2020 2020 2020 2020 7265 7475 726e 204e          return N
+0002bcd0: 6f6e 650d 0a0d 0a20 2020 2023 202d 2d2d  one....    # ---
+0002bce0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002bcf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002bd00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002bd10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002bd20: 0d0a 2020 2020 4070 726f 7065 7274 790d  ..    @property.
-0002bd30: 0a20 2020 2064 6566 205f 736f 7274 5f63  .    def _sort_c
-0002bd40: 6f6c 756d 6e73 2873 656c 6629 3a0d 0a20  olumns(self):.. 
-0002bd50: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-0002bd60: 2020 2020 5375 6263 6c61 7373 6573 2063      Subclasses c
-0002bd70: 616e 2064 6566 696e 6520 7468 6569 7220  an define their 
-0002bd80: 6f77 6e20 6361 6c6c 6261 636b 2066 756e  own callback fun
-0002bd90: 6374 696f 6e20 746f 2072 6574 7572 6e20  ction to return 
-0002bda0: 636f 6c75 6d6e 7320 7468 6579 2077 6572  columns they wer
-0002bdb0: 6520 736f 7274 6564 2062 792c 2061 6e64  e sorted by, and
-0002bdc0: 2073 7479 6c65 732e 0d0a 2020 2020 2020   styles...      
-0002bdd0: 2020 4361 6c6c 6261 636b 2066 756e 6374    Callback funct
-0002bde0: 696f 6e20 7769 6c6c 2072 6563 6569 7665  ion will receive
-0002bdf0: 2074 7269 6d6d 6564 2066 616e 6379 2069   trimmed fancy i
-0002be00: 6e64 6578 2028 6261 7365 6420 6f6e 2073  ndex (based on s
-0002be10: 6f72 7420 696e 6465 7829 2061 6e64 2072  ort index) and r
-0002be20: 6574 7572 6e20 6120 6469 6374 696f 6e61  eturn a dictiona
-0002be30: 7279 206f 6620 636f 6c75 6d6e 2068 6561  ry of column hea
-0002be40: 6465 7273 202d 3e20 286d 6173 6b65 645f  ders -> (masked_
-0002be50: 6172 7261 792c 2043 6f6c 756d 6e53 7479  array, ColumnSty
-0002be60: 6c65 206f 626a 6563 7473 290d 0a20 2020  le objects)..   
-0002be70: 2020 2020 2054 6865 7365 2063 6f6c 756d       These colum
-0002be80: 6e73 2077 696c 6c20 6265 206d 6f76 6564  ns will be moved
-0002be90: 2074 6f20 7468 6520 6c65 6674 2073 6964   to the left sid
-0002bea0: 6520 6f66 2074 6865 2074 6162 6c65 2028  e of the table (
-0002beb0: 6275 7420 746f 2074 6865 2072 6967 6874  but to the right
-0002bec0: 206f 6620 726f 7720 6c61 6265 6c73 2c20   of row labels, 
-0002bed0: 6772 6f75 7062 796b 6579 732c 2072 6f77  groupbykeys, row
-0002bee0: 206e 756d 6265 7273 2c20 6574 632e 290d   numbers, etc.).
-0002bef0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-0002bf00: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
-0002bf10: 650d 0a0d 0a20 2020 2023 202d 2d2d 2d2d  e....    # -----
+0002bd10: 2d2d 2d2d 0d0a 2020 2020 4070 726f 7065  ----..    @prope
+0002bd20: 7274 790d 0a20 2020 2064 6566 205f 736f  rty..    def _so
+0002bd30: 7274 5f63 6f6c 756d 6e73 2873 656c 6629  rt_columns(self)
+0002bd40: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
+0002bd50: 2020 2020 2020 2020 5375 6263 6c61 7373          Subclass
+0002bd60: 6573 2063 616e 2064 6566 696e 6520 7468  es can define th
+0002bd70: 6569 7220 6f77 6e20 6361 6c6c 6261 636b  eir own callback
+0002bd80: 2066 756e 6374 696f 6e20 746f 2072 6574   function to ret
+0002bd90: 7572 6e20 636f 6c75 6d6e 7320 7468 6579  urn columns they
+0002bda0: 2077 6572 6520 736f 7274 6564 2062 792c   were sorted by,
+0002bdb0: 2061 6e64 2073 7479 6c65 732e 0d0a 2020   and styles...  
+0002bdc0: 2020 2020 2020 4361 6c6c 6261 636b 2066        Callback f
+0002bdd0: 756e 6374 696f 6e20 7769 6c6c 2072 6563  unction will rec
+0002bde0: 6569 7665 2074 7269 6d6d 6564 2066 616e  eive trimmed fan
+0002bdf0: 6379 2069 6e64 6578 2028 6261 7365 6420  cy index (based 
+0002be00: 6f6e 2073 6f72 7420 696e 6465 7829 2061  on sort index) a
+0002be10: 6e64 2072 6574 7572 6e20 6120 6469 6374  nd return a dict
+0002be20: 696f 6e61 7279 206f 6620 636f 6c75 6d6e  ionary of column
+0002be30: 2068 6561 6465 7273 202d 3e20 286d 6173   headers -> (mas
+0002be40: 6b65 645f 6172 7261 792c 2043 6f6c 756d  ked_array, Colum
+0002be50: 6e53 7479 6c65 206f 626a 6563 7473 290d  nStyle objects).
+0002be60: 0a20 2020 2020 2020 2054 6865 7365 2063  .        These c
+0002be70: 6f6c 756d 6e73 2077 696c 6c20 6265 206d  olumns will be m
+0002be80: 6f76 6564 2074 6f20 7468 6520 6c65 6674  oved to the left
+0002be90: 2073 6964 6520 6f66 2074 6865 2074 6162   side of the tab
+0002bea0: 6c65 2028 6275 7420 746f 2074 6865 2072  le (but to the r
+0002beb0: 6967 6874 206f 6620 726f 7720 6c61 6265  ight of row labe
+0002bec0: 6c73 2c20 6772 6f75 7062 796b 6579 732c  ls, groupbykeys,
+0002bed0: 2072 6f77 206e 756d 6265 7273 2c20 6574   row numbers, et
+0002bee0: 632e 290d 0a20 2020 2020 2020 2022 2222  c.)..        """
+0002bef0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+0002bf00: 204e 6f6e 650d 0a0d 0a20 2020 2023 202d   None....    # -
+0002bf10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002bf20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002bf30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002bf40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002bf50: 2d2d 0d0a 2020 2020 6465 6620 5f5f 7374  --..    def __st
-0002bf60: 725f 5f28 7365 6c66 293a 0d0a 2020 2020  r__(self):..    
-0002bf70: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-0002bf80: 6d61 6b65 5f74 6162 6c65 2844 535f 4449  make_table(DS_DI
-0002bf90: 5350 4c41 595f 5459 5045 532e 5354 5229  SPLAY_TYPES.STR)
-0002bfa0: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+0002bf40: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
+0002bf50: 5f5f 7374 725f 5f28 7365 6c66 293a 0d0a  __str__(self):..
+0002bf60: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0002bf70: 656c 662e 6d61 6b65 5f74 6162 6c65 2844  elf.make_table(D
+0002bf80: 535f 4449 5350 4c41 595f 5459 5045 532e  S_DISPLAY_TYPES.
+0002bf90: 5354 5229 0d0a 0d0a 2020 2020 2320 2d2d  STR)....    # --
+0002bfa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002bfb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002bfc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002bfd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002bfe0: 2d0d 0a20 2020 2064 6566 205f 5f72 6570  -..    def __rep
-0002bff0: 725f 5f28 7365 6c66 293a 0d0a 2020 2020  r__(self):..    
-0002c000: 2020 2020 5374 7275 6374 2e5f 6c61 7374      Struct._last
-0002c010: 7265 7072 203d 2047 6574 5453 4328 290d  repr = GetTSC().
-0002c020: 0a20 2020 2020 2020 2069 6620 6861 7361  .        if hasa
-0002c030: 7474 7228 7365 6c66 2c20 225f 7265 7072  ttr(self, "_repr
-0002c040: 5f6f 7665 7272 6964 6522 293a 0d0a 2020  _override"):..  
-0002c050: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0002c060: 2073 656c 662e 5f72 6570 725f 6f76 6572   self._repr_over
-0002c070: 7269 6465 2873 656c 6629 0d0a 2020 2020  ride(self)..    
-0002c080: 2020 2020 6966 2054 7970 6552 6567 6973      if TypeRegis
-0002c090: 7465 722e 4469 7370 6c61 794f 7074 696f  ter.DisplayOptio
-0002c0a0: 6e73 2e48 544d 4c5f 4449 5350 4c41 5920  ns.HTML_DISPLAY 
-0002c0b0: 6973 2046 616c 7365 3a0d 0a20 2020 2020  is False:..     
-0002c0c0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0002c0d0: 6c66 2e6d 616b 655f 7461 626c 6528 4453  lf.make_table(DS
-0002c0e0: 5f44 4953 504c 4159 5f54 5950 4553 2e53  _DISPLAY_TYPES.S
-0002c0f0: 5452 290d 0a20 2020 2020 2020 2023 2074  TR)..        # t
-0002c100: 6869 7320 7769 6c6c 2062 6520 6361 6c6c  his will be call
-0002c110: 6564 2062 6566 6f72 6520 5f72 6570 725f  ed before _repr_
-0002c120: 6874 6d6c 5f20 696e 206a 7570 7974 6572  html_ in jupyter
-0002c130: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-0002c140: 2073 656c 662e 6d61 6b65 5f74 6162 6c65   self.make_table
-0002c150: 2844 535f 4449 5350 4c41 595f 5459 5045  (DS_DISPLAY_TYPE
-0002c160: 532e 5245 5052 290d 0a0d 0a20 2020 2023  S.REPR)....    #
-0002c170: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+0002bfd0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 205f  -----..    def _
+0002bfe0: 5f72 6570 725f 5f28 7365 6c66 293a 0d0a  _repr__(self):..
+0002bff0: 2020 2020 2020 2020 5374 7275 6374 2e5f          Struct._
+0002c000: 6c61 7374 7265 7072 203d 2047 6574 5453  lastrepr = GetTS
+0002c010: 4328 290d 0a20 2020 2020 2020 2069 6620  C()..        if 
+0002c020: 6861 7361 7474 7228 7365 6c66 2c20 225f  hasattr(self, "_
+0002c030: 7265 7072 5f6f 7665 7272 6964 6522 293a  repr_override"):
+0002c040: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+0002c050: 7475 726e 2073 656c 662e 5f72 6570 725f  turn self._repr_
+0002c060: 6f76 6572 7269 6465 2873 656c 6629 0d0a  override(self)..
+0002c070: 2020 2020 2020 2020 6966 2054 7970 6552          if TypeR
+0002c080: 6567 6973 7465 722e 4469 7370 6c61 794f  egister.DisplayO
+0002c090: 7074 696f 6e73 2e48 544d 4c5f 4449 5350  ptions.HTML_DISP
+0002c0a0: 4c41 5920 6973 2046 616c 7365 3a0d 0a20  LAY is False:.. 
+0002c0b0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0002c0c0: 6e20 7365 6c66 2e6d 616b 655f 7461 626c  n self.make_tabl
+0002c0d0: 6528 4453 5f44 4953 504c 4159 5f54 5950  e(DS_DISPLAY_TYP
+0002c0e0: 4553 2e53 5452 290d 0a20 2020 2020 2020  ES.STR)..       
+0002c0f0: 2023 2074 6869 7320 7769 6c6c 2062 6520   # this will be 
+0002c100: 6361 6c6c 6564 2062 6566 6f72 6520 5f72  called before _r
+0002c110: 6570 725f 6874 6d6c 5f20 696e 206a 7570  epr_html_ in jup
+0002c120: 7974 6572 0d0a 2020 2020 2020 2020 7265  yter..        re
+0002c130: 7475 726e 2073 656c 662e 6d61 6b65 5f74  turn self.make_t
+0002c140: 6162 6c65 2844 535f 4449 5350 4c41 595f  able(DS_DISPLAY_
+0002c150: 5459 5045 532e 5245 5052 290d 0a0d 0a20  TYPES.REPR).... 
+0002c160: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+0002c170: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002c180: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002c190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002c1a0: 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020 6465  --------..    de
-0002c1b0: 6620 5f72 6570 725f 6874 6d6c 5f28 7365  f _repr_html_(se
-0002c1c0: 6c66 293a 0d0a 2020 2020 2020 2020 5374  lf):..        St
-0002c1d0: 7275 6374 2e5f 6c61 7374 7265 7072 6874  ruct._lastreprht
-0002c1e0: 6d6c 203d 2047 6574 5453 4328 290d 0a20  ml = GetTSC().. 
-0002c1f0: 2020 2020 2020 2069 6620 5479 7065 5265         if TypeRe
-0002c200: 6769 7374 6572 2e44 6973 706c 6179 4f70  gister.DisplayOp
-0002c210: 7469 6f6e 732e 4854 4d4c 5f44 4953 504c  tions.HTML_DISPL
-0002c220: 4159 2069 7320 4661 6c73 653a 0d0a 2020  AY is False:..  
-0002c230: 2020 2020 2020 2020 2020 706c 6169 6e73            plains
-0002c240: 7472 696e 6720 3d20 7365 6c66 2e6d 616b  tring = self.mak
-0002c250: 655f 7461 626c 6528 4453 5f44 4953 504c  e_table(DS_DISPL
-0002c260: 4159 5f54 5950 4553 2e53 5452 290d 0a20  AY_TYPES.STR).. 
-0002c270: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-0002c280: 2844 6973 706c 6179 5374 7269 6e67 2870  (DisplayString(p
-0002c290: 6c61 696e 7374 7269 6e67 2929 0d0a 2020  lainstring))..  
-0002c2a0: 2020 2020 2020 2020 2020 2320 6a75 7079            # jupy
-0002c2b0: 7465 7220 6c61 6220 7769 6c6c 2074 7572  ter lab will tur
-0002c2c0: 6e20 706c 6169 6e20 7374 7269 6e67 2069  n plain string i
-0002c2d0: 6e74 6f20 6e6f 6e2d 6d6f 6e6f 7370 6163  nto non-monospac
-0002c2e0: 6520 666f 6e74 0d0a 2020 2020 2020 2020  e font..        
-0002c2f0: 2020 2020 7265 7475 726e 2022 220d 0a20      return "".. 
-0002c300: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0002c310: 6c66 2e6d 616b 655f 7461 626c 6528 4453  lf.make_table(DS
-0002c320: 5f44 4953 504c 4159 5f54 5950 4553 2e48  _DISPLAY_TYPES.H
-0002c330: 544d 4c29 0d0a 0d0a 2020 2020 2320 2d2d  TML)....    # --
+0002c190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020  ------------..  
+0002c1a0: 2020 6465 6620 5f72 6570 725f 6874 6d6c    def _repr_html
+0002c1b0: 5f28 7365 6c66 293a 0d0a 2020 2020 2020  _(self):..      
+0002c1c0: 2020 5374 7275 6374 2e5f 6c61 7374 7265    Struct._lastre
+0002c1d0: 7072 6874 6d6c 203d 2047 6574 5453 4328  prhtml = GetTSC(
+0002c1e0: 290d 0a20 2020 2020 2020 2069 6620 5479  )..        if Ty
+0002c1f0: 7065 5265 6769 7374 6572 2e44 6973 706c  peRegister.Displ
+0002c200: 6179 4f70 7469 6f6e 732e 4854 4d4c 5f44  ayOptions.HTML_D
+0002c210: 4953 504c 4159 2069 7320 4661 6c73 653a  ISPLAY is False:
+0002c220: 0d0a 2020 2020 2020 2020 2020 2020 706c  ..            pl
+0002c230: 6169 6e73 7472 696e 6720 3d20 7365 6c66  ainstring = self
+0002c240: 2e6d 616b 655f 7461 626c 6528 4453 5f44  .make_table(DS_D
+0002c250: 4953 504c 4159 5f54 5950 4553 2e53 5452  ISPLAY_TYPES.STR
+0002c260: 290d 0a20 2020 2020 2020 2020 2020 2070  )..            p
+0002c270: 7269 6e74 2844 6973 706c 6179 5374 7269  rint(DisplayStri
+0002c280: 6e67 2870 6c61 696e 7374 7269 6e67 2929  ng(plainstring))
+0002c290: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0002c2a0: 6a75 7079 7465 7220 6c61 6220 7769 6c6c  jupyter lab will
+0002c2b0: 2074 7572 6e20 706c 6169 6e20 7374 7269   turn plain stri
+0002c2c0: 6e67 2069 6e74 6f20 6e6f 6e2d 6d6f 6e6f  ng into non-mono
+0002c2d0: 7370 6163 6520 666f 6e74 0d0a 2020 2020  space font..    
+0002c2e0: 2020 2020 2020 2020 7265 7475 726e 2022          return "
+0002c2f0: 220d 0a20 2020 2020 2020 2072 6574 7572  "..        retur
+0002c300: 6e20 7365 6c66 2e6d 616b 655f 7461 626c  n self.make_tabl
+0002c310: 6528 4453 5f44 4953 504c 4159 5f54 5950  e(DS_DISPLAY_TYP
+0002c320: 4553 2e48 544d 4c29 0d0a 0d0a 2020 2020  ES.HTML)....    
+0002c330: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
 0002c340: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002c350: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002c360: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002c370: 2d2d 2d2d 2d0d 0a20 2020 2040 7072 6f70  -----..    @prop
-0002c380: 6572 7479 0d0a 2020 2020 6465 6620 666f  erty..    def fo
-0002c390: 6f74 6572 7328 7365 6c66 293a 0d0a 2020  oters(self):..  
-0002c3a0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0002c3b0: 2020 2052 6574 7572 6e73 2074 6865 2066     Returns the f
-0002c3c0: 6f6f 7465 7220 6174 7472 6962 7574 6573  ooter attributes
-0002c3d0: 2e0d 0a0d 0a20 2020 2020 2020 2046 6f72  .....        For
-0002c3e0: 2065 7861 6d70 6c65 2c20 4163 6375 6d32   example, Accum2
-0002c3f0: 2061 6e64 2041 6363 756d 5461 626c 6520   and AccumTable 
-0002c400: 6f62 6a65 6374 7320 6361 6e20 6861 7665  objects can have
-0002c410: 2066 6f6f 7465 7273 2e0d 0a20 2020 2020   footers...     
-0002c420: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-0002c430: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
-0002c440: 2020 666f 6f74 6572 7320 3d20 6765 7461    footers = geta
-0002c450: 7474 7228 7365 6c66 2c20 225f 666f 6f74  ttr(self, "_foot
-0002c460: 6572 7322 290d 0a20 2020 2020 2020 2065  ers")..        e
-0002c470: 7863 6570 743a 0d0a 2020 2020 2020 2020  xcept:..        
-0002c480: 2020 2020 666f 6f74 6572 7320 3d20 4e6f      footers = No
-0002c490: 6e65 0d0a 2020 2020 2020 2020 7265 7475  ne..        retu
-0002c4a0: 726e 2066 6f6f 7465 7273 0d0a 0d0a 2020  rn footers....  
-0002c4b0: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
+0002c360: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2040  ---------..    @
+0002c370: 7072 6f70 6572 7479 0d0a 2020 2020 6465  property..    de
+0002c380: 6620 666f 6f74 6572 7328 7365 6c66 293a  f footers(self):
+0002c390: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0002c3a0: 2020 2020 2020 2052 6574 7572 6e73 2074         Returns t
+0002c3b0: 6865 2066 6f6f 7465 7220 6174 7472 6962  he footer attrib
+0002c3c0: 7574 6573 2e0d 0a0d 0a20 2020 2020 2020  utes.....       
+0002c3d0: 2046 6f72 2065 7861 6d70 6c65 2c20 4163   For example, Ac
+0002c3e0: 6375 6d32 2061 6e64 2041 6363 756d 5461  cum2 and AccumTa
+0002c3f0: 626c 6520 6f62 6a65 6374 7320 6361 6e20  ble objects can 
+0002c400: 6861 7665 2066 6f6f 7465 7273 2e0d 0a20  have footers... 
+0002c410: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+0002c420: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+0002c430: 2020 2020 2020 666f 6f74 6572 7320 3d20        footers = 
+0002c440: 6765 7461 7474 7228 7365 6c66 2c20 225f  getattr(self, "_
+0002c450: 666f 6f74 6572 7322 290d 0a20 2020 2020  footers")..     
+0002c460: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
+0002c470: 2020 2020 2020 2020 666f 6f74 6572 7320          footers 
+0002c480: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+0002c490: 7265 7475 726e 2066 6f6f 7465 7273 0d0a  return footers..
+0002c4a0: 0d0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
+0002c4b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002c4c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002c4d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002c4e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
-0002c4f0: 2064 6566 205f 7072 6570 6172 655f 6469   def _prepare_di
-0002c500: 7370 6c61 795f 6461 7461 2873 656c 6629  splay_data(self)
-0002c510: 3a0d 0a20 2020 2020 2020 2022 2222 0d0a  :..        """..
-0002c520: 2020 2020 2020 2020 5265 7475 726e 7320          Returns 
-0002c530: 6120 6c69 7374 206f 6620 6c69 7374 7320  a list of lists 
-0002c540: 2861 6c6c 2063 6f6c 756d 6e20 6461 7461  (all column data
-0002c550: 2920 616e 6420 6120 6c69 7374 206f 6620  ) and a list of 
-0002c560: 6865 6164 6572 2074 7570 6c65 7320 666f  header tuples fo
-0002c570: 7220 6469 7370 6c61 792e 0d0a 0d0a 2020  r display.....  
-0002c580: 2020 2020 2020 3a72 6574 7572 6e3a 206c        :return: l
-0002c590: 6973 7428 6c69 7374 292c 206c 6973 7428  ist(list), list(
-0002c5a0: 7475 706c 6529 0d0a 2020 2020 2020 2020  tuple)..        
-0002c5b0: 2222 220d 0a20 2020 2020 2020 2023 206d  """..        # m
-0002c5c0: 6f76 6520 7468 6973 2074 6f20 6120 636c  ove this to a cl
-0002c5d0: 6173 7320 6465 6661 756c 7420 7661 7269  ass default vari
-0002c5e0: 6162 6c65 206f 7220 6469 7370 6c61 7920  able or display 
-0002c5f0: 6f70 7469 6f6e 0d0a 2020 2020 2020 2020  option..        
-0002c600: 6974 656d 5f6e 756d 6265 7273 203d 205b  item_numbers = [
-0002c610: 7374 7228 6929 2066 6f72 2069 2069 6e20  str(i) for i in 
-0002c620: 7261 6e67 6528 7365 6c66 2e5f 7375 6d6d  range(self._summ
-0002c630: 6172 795f 6c65 6e29 5d0d 0a20 2020 2020  ary_len)]..     
-0002c640: 2020 2073 756d 6d61 7279 5f6c 6162 656c     summary_label
-0002c650: 7320 3d20 5b22 4e61 6d65 222c 2022 5479  s = ["Name", "Ty
-0002c660: 7065 222c 2022 5369 7a65 225d 0d0a 2020  pe", "Size"]..  
-0002c670: 2020 2020 2020 7375 6d6d 6172 795f 6865        summary_he
-0002c680: 6164 6572 7320 3d20 7375 6d6d 6172 795f  aders = summary_
-0002c690: 6c61 6265 6c73 202b 2069 7465 6d5f 6e75  labels + item_nu
-0002c6a0: 6d62 6572 730d 0a20 2020 2020 2020 2068  mbers..        h
-0002c6b0: 6561 6465 725f 7475 7073 203d 205b 6275  eader_tups = [bu
-0002c6c0: 696c 645f 6865 6164 6572 5f74 7570 6c65  ild_header_tuple
-0002c6d0: 7328 7375 6d6d 6172 795f 6865 6164 6572  s(summary_header
-0002c6e0: 732c 2031 2c20 3029 5d0d 0a20 2020 2020  s, 1, 0)]..     
-0002c6f0: 2020 2023 2073 7472 7563 7473 2077 696c     # structs wil
-0002c700: 6c20 616c 7761 7973 2073 686f 7720 726f  l always show ro
-0002c710: 7720 6e75 6d62 6572 730d 0a20 2020 2020  w numbers..     
-0002c720: 2020 2068 6561 6465 725f 7475 7073 5b2d     header_tups[-
-0002c730: 315d 2e69 6e73 6572 7428 302c 2043 6f6c  1].insert(0, Col
-0002c740: 4865 6164 6572 2822 2322 2c20 312c 2030  Header("#", 1, 0
-0002c750: 2929 0d0a 0d0a 2020 2020 2020 2020 666f  ))....        fo
-0002c760: 6f74 6572 5f74 7570 7320 3d20 7365 6c66  oter_tups = self
-0002c770: 2e66 6f6f 7465 7273 0d0a 0d0a 2020 2020  .footers....    
-0002c780: 2020 2020 6e61 6d65 7320 3d20 6e70 2e61      names = np.a
-0002c790: 7272 6179 286c 6973 7428 7365 6c66 2e6b  rray(list(self.k
-0002c7a0: 6579 7328 2929 290d 0a20 2020 2020 2020  eys()))..       
-0002c7b0: 2074 7970 6573 203d 206e 702e 6172 7261   types = np.arra
-0002c7c0: 7928 5b74 7970 6528 6129 2e5f 5f6e 616d  y([type(a).__nam
-0002c7d0: 655f 5f20 666f 7220 6120 696e 206e 616d  e__ for a in nam
-0002c7e0: 6573 5d29 0d0a 0d0a 2020 2020 2020 2020  es])....        
-0002c7f0: 7479 7065 7320 3d20 5b5d 0d0a 2020 2020  types = []..    
-0002c800: 2020 2020 7369 7a65 7320 3d20 5b5d 0d0a      sizes = []..
-0002c810: 2020 2020 2020 2020 7375 6d6d 6172 795f          summary_
-0002c820: 6974 656d 7320 3d20 5b5d 0d0a 2020 2020  items = []..    
-0002c830: 2020 2020 666f 7220 6120 696e 206e 616d      for a in nam
-0002c840: 6573 3a0d 0a20 2020 2020 2020 2020 2020  es:..           
-0002c850: 2069 7465 6d5f 7479 7065 203d 2022 220d   item_type = "".
-0002c860: 0a20 2020 2020 2020 2020 2020 2073 697a  .            siz
-0002c870: 6520 3d20 300d 0a20 2020 2020 2020 2020  e = 0..         
-0002c880: 2020 2069 7465 6d73 203d 205b 2222 2c20     items = ["", 
-0002c890: 2222 2c20 2222 5d0d 0a20 2020 2020 2020  "", ""]..       
-0002c8a0: 2020 2020 2064 6174 6120 3d20 7365 6c66       data = self
-0002c8b0: 2e5f 5f67 6574 6174 7472 5f5f 2861 290d  .__getattr__(a).
-0002c8c0: 0a0d 0a20 2020 2020 2020 2020 2020 2069  ...            i
-0002c8d0: 6620 6973 696e 7374 616e 6365 2864 6174  f isinstance(dat
-0002c8e0: 612c 206e 702e 6e64 6172 7261 7929 3a0d  a, np.ndarray):.
-0002c8f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c900: 2023 2069 6620 6461 7461 2e6e 6469 6d21   # if data.ndim!
-0002c910: 3d31 3a70 7269 6e74 2866 277b 617d 2064  =1:print(f'{a} d
-0002c920: 6964 206e 6f74 2068 6176 6520 3220 6469  id not have 2 di
-0002c930: 6d73 2067 6f74 207b 6461 7461 2e6e 6469  ms got {data.ndi
-0002c940: 6d7d 2729 0d0a 2020 2020 2020 2020 2020  m}')..          
-0002c950: 2020 2020 2020 6974 656d 5f74 7970 6520        item_type 
-0002c960: 3d20 7374 7228 6461 7461 2e64 7479 7065  = str(data.dtype
-0002c970: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0002c980: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-0002c990: 2020 2020 2020 2020 2020 2020 2073 697a               siz
-0002c9a0: 6520 3d20 6c65 6e28 6461 7461 290d 0a20  e = len(data).. 
-0002c9b0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0002c9c0: 7863 6570 743a 0d0a 2020 2020 2020 2020  xcept:..        
-0002c9d0: 2020 2020 2020 2020 2020 2020 2320 6861              # ha
-0002c9e0: 6e64 6c65 2075 6e73 697a 6564 206f 626a  ndle unsized obj
-0002c9f0: 6563 7473 2068 6170 7065 6e73 2077 6974  ects happens wit
-0002ca00: 6820 783d 6e70 2e61 7361 6e79 6172 7261  h x=np.asanyarra
-0002ca10: 7928 2774 6573 7427 290d 0a20 2020 2020  y('test')..     
-0002ca20: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0002ca30: 6174 6120 3d20 6e70 2e61 7361 6e79 6172  ata = np.asanyar
-0002ca40: 7261 7928 5b64 6174 615d 290d 0a20 2020  ray([data])..   
-0002ca50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ca60: 2073 697a 6520 3d20 6c65 6e28 6461 7461   size = len(data
-0002ca70: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0002ca80: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-0002ca90: 6365 2864 6174 612c 2054 7970 6552 6567  ce(data, TypeReg
-0002caa0: 6973 7465 722e 4361 7465 676f 7269 6361  ister.Categorica
-0002cab0: 6c29 3a0d 0a20 2020 2020 2020 2020 2020  l):..           
-0002cac0: 2020 2020 2020 2020 2069 7465 6d73 203d           items =
-0002cad0: 206e 702e 6172 7261 7928 5b73 7472 2869   np.array([str(i
-0002cae0: 2920 666f 7220 6920 696e 2064 6174 615b  ) for i in data[
-0002caf0: 3a20 7365 6c66 2e5f 7375 6d6d 6172 795f  : self._summary_
-0002cb00: 6c65 6e5d 5d29 0d0a 2020 2020 2020 2020  len]])..        
-0002cb10: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-0002cb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cb30: 2020 2023 2062 7567 2077 6865 6e20 7365     # bug when se
-0002cb40: 6e64 696e 6720 3264 696d 2063 6f6c 756d  nding 2dim colum
-0002cb50: 6e73 2074 6f20 7374 7275 6374 2064 6973  ns to struct dis
-0002cb60: 706c 6179 0d0a 2020 2020 2020 2020 2020  play..          
-0002cb70: 2020 2020 2020 2020 2020 2320 6361 6e6e            # cann
-0002cb80: 6f74 2068 7374 6163 6b20 7374 7269 6e67  ot hstack string
-0002cb90: 2072 6570 7220 7769 7468 2063 6f6c 756d   repr with colum
-0002cba0: 6e20 6e61 6d65 0d0a 2020 2020 2020 2020  n name..        
-0002cbb0: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-0002cbc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002cbd0: 2020 2020 2020 2020 2020 6966 2064 6174            if dat
-0002cbe0: 612e 6e64 696d 203d 3d20 313a 0d0a 2020  a.ndim == 1:..  
-0002cbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cc00: 2020 2020 2020 2020 2020 6974 656d 7320            items 
-0002cc10: 3d20 6461 7461 5b3a 2073 656c 662e 5f73  = data[: self._s
-0002cc20: 756d 6d61 7279 5f6c 656e 5d2e 6173 7479  ummary_len].asty
-0002cc30: 7065 2873 7472 290d 0a20 2020 2020 2020  pe(str)..       
-0002cc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cc50: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-0002cc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cc70: 2020 2020 6974 656d 7320 3d20 6e70 2e61      items = np.a
-0002cc80: 7272 6179 285b 7374 7228 6929 2066 6f72  rray([str(i) for
-0002cc90: 2069 2069 6e20 6461 7461 5b3a 2073 656c   i in data[: sel
-0002cca0: 662e 5f73 756d 6d61 7279 5f6c 656e 5d5d  f._summary_len]]
-0002ccb0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0002ccc0: 2020 2020 2020 2065 7863 6570 743a 0d0a         except:..
-0002ccd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cce0: 2020 2020 2020 2020 2320 6669 7820 6275          # fix bu
-0002ccf0: 6720 696e 2072 6563 6f72 6420 6172 7261  g in record arra
-0002cd00: 7973 0d0a 2020 2020 2020 2020 2020 2020  ys..            
-0002cd10: 2020 2020 2020 2020 2020 2020 6974 656d              item
-0002cd20: 7320 3d20 6e70 2e61 7272 6179 285b 7374  s = np.array([st
-0002cd30: 7228 6929 2066 6f72 2069 2069 6e20 6461  r(i) for i in da
-0002cd40: 7461 5b3a 2073 656c 662e 5f73 756d 6d61  ta[: self._summa
-0002cd50: 7279 5f6c 656e 5d5d 290d 0a0d 0a20 2020  ry_len]])....   
-0002cd60: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002cd70: 7369 7a65 203c 2073 656c 662e 5f73 756d  size < self._sum
-0002cd80: 6d61 7279 5f6c 656e 3a0d 0a20 2020 2020  mary_len:..     
-0002cd90: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0002cda0: 2066 696c 6c20 7468 6520 7265 7374 2077   fill the rest w
-0002cdb0: 6974 6820 656d 7074 7920 7374 7269 6e67  ith empty string
-0002cdc0: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
-0002cdd0: 2020 2020 2020 2072 6967 6874 203d 206e         right = n
-0002cde0: 702e 6675 6c6c 2873 656c 662e 5f73 756d  p.full(self._sum
-0002cdf0: 6d61 7279 5f6c 656e 202d 2073 697a 652c  mary_len - size,
-0002ce00: 2022 2229 0d0a 2020 2020 2020 2020 2020   "")..          
-0002ce10: 2020 2020 2020 2020 2020 6974 656d 7320            items 
-0002ce20: 3d20 6e70 2e68 7374 6163 6b28 2869 7465  = np.hstack((ite
-0002ce30: 6d73 2c20 7269 6768 7429 290d 0a0d 0a20  ms, right)).... 
-0002ce40: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0002ce50: 6973 696e 7374 616e 6365 2864 6174 612c  isinstance(data,
-0002ce60: 2054 7970 6552 6567 6973 7465 722e 4461   TypeRegister.Da
-0002ce70: 7461 7365 7429 3a0d 0a20 2020 2020 2020  taset):..       
-0002ce80: 2020 2020 2020 2020 2069 7465 6d5f 7479           item_ty
-0002ce90: 7065 203d 2074 7970 6528 6461 7461 292e  pe = type(data).
-0002cea0: 5f5f 6e61 6d65 5f5f 0d0a 2020 2020 2020  __name__..      
-0002ceb0: 2020 2020 2020 2020 2020 6e75 6d5f 726f            num_ro
-0002cec0: 7773 203d 2073 7472 2864 6174 612e 5f6e  ws = str(data._n
-0002ced0: 726f 7773 290d 0a20 2020 2020 2020 2020  rows)..         
-0002cee0: 2020 2020 2020 206e 756d 5f63 6f6c 7320         num_cols 
-0002cef0: 3d20 7374 7228 6461 7461 2e5f 6e63 6f6c  = str(data._ncol
-0002cf00: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
-0002cf10: 2020 2020 7369 7a65 203d 206e 756d 5f72      size = num_r
-0002cf20: 6f77 7320 2b20 2220 726f 7773 2078 2022  ows + " rows x "
-0002cf30: 202b 206e 756d 5f63 6f6c 7320 2b20 2220   + num_cols + " 
-0002cf40: 636f 6c73 220d 0a20 2020 2020 2020 2020  cols"..         
-0002cf50: 2020 2020 2020 2069 7465 6d73 203d 206e         items = n
-0002cf60: 702e 6675 6c6c 2873 656c 662e 5f73 756d  p.full(self._sum
-0002cf70: 6d61 7279 5f6c 656e 2c20 2222 290d 0a0d  mary_len, "")...
-0002cf80: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-0002cf90: 6620 6973 696e 7374 616e 6365 2864 6174  f isinstance(dat
-0002cfa0: 612c 2053 7472 7563 7429 3a0d 0a20 2020  a, Struct):..   
-0002cfb0: 2020 2020 2020 2020 2020 2020 2069 7465               ite
-0002cfc0: 6d5f 7479 7065 203d 2074 7970 6528 6461  m_type = type(da
-0002cfd0: 7461 292e 5f5f 6e61 6d65 5f5f 0d0a 2020  ta).__name__..  
-0002cfe0: 2020 2020 2020 2020 2020 2020 2020 7369                si
-0002cff0: 7a65 203d 2064 6174 612e 5f6e 636f 6c73  ze = data._ncols
-0002d000: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002d010: 2020 6461 7461 203d 206c 6973 7428 6461    data = list(da
-0002d020: 7461 2e6b 6579 7328 2929 0d0a 2020 2020  ta.keys())..    
-0002d030: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-0002d040: 697a 6520 3e3d 2073 656c 662e 5f73 756d  ize >= self._sum
-0002d050: 6d61 7279 5f6c 656e 3a0d 0a20 2020 2020  mary_len:..     
-0002d060: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0002d070: 6174 6120 3d20 6461 7461 5b3a 2073 656c  ata = data[: sel
-0002d080: 662e 5f73 756d 6d61 7279 5f6c 656e 5d0d  f._summary_len].
-0002d090: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d0a0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-0002d0b0: 2020 2020 2020 2020 2020 2020 6c65 6674              left
-0002d0c0: 203d 206e 702e 6172 7261 7928 6461 7461   = np.array(data
-0002d0d0: 2c20 6474 7970 653d 7374 7229 0d0a 2020  , dtype=str)..  
-0002d0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d0f0: 2020 7269 6768 7420 3d20 6e70 2e66 756c    right = np.ful
-0002d100: 6c28 7365 6c66 2e5f 7375 6d6d 6172 795f  l(self._summary_
-0002d110: 6c65 6e20 2d20 7369 7a65 2c20 2222 290d  len - size, "").
-0002d120: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d130: 2020 2020 2069 7465 6d73 203d 206e 702e       items = np.
-0002d140: 6873 7461 636b 2828 6c65 6674 2c20 7269  hstack((left, ri
-0002d150: 6768 7429 290d 0a0d 0a20 2020 2020 2020  ght))....       
-0002d160: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-0002d170: 2020 2020 2020 2020 2020 2020 6974 656d              item
-0002d180: 5f74 7970 6520 3d20 7479 7065 2864 6174  _type = type(dat
-0002d190: 6129 2e5f 5f6e 616d 655f 5f0d 0a20 2020  a).__name__..   
-0002d1a0: 2020 2020 2020 2020 2020 2020 2023 2063               # c
-0002d1b0: 6f6e 7665 7274 2064 6963 7420 6b65 7973  onvert dict keys
-0002d1c0: 2061 6e64 2073 6574 7320 746f 206c 6973   and sets to lis
-0002d1d0: 7420 666f 7220 736c 6963 696e 670d 0a20  t for slicing.. 
-0002d1e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002d1f0: 6620 6973 696e 7374 616e 6365 2864 6174  f isinstance(dat
-0002d200: 612c 2064 6963 7429 3a0d 0a20 2020 2020  a, dict):..     
-0002d210: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0002d220: 6174 6120 3d20 6c69 7374 2864 6174 612e  ata = list(data.
-0002d230: 6b65 7973 2829 290d 0a20 2020 2020 2020  keys())..       
-0002d240: 2020 2020 2020 2020 2065 6c69 6620 6973           elif is
-0002d250: 696e 7374 616e 6365 2864 6174 612c 2028  instance(data, (
-0002d260: 7365 742c 2074 7570 6c65 2929 3a0d 0a20  set, tuple)):.. 
-0002d270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d280: 2020 2064 6174 6120 3d20 6c69 7374 2864     data = list(d
-0002d290: 6174 6129 0d0a 0d0a 2020 2020 2020 2020  ata)....        
-0002d2a0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-0002d2b0: 7461 6e63 6528 6461 7461 2c20 6c69 7374  tance(data, list
-0002d2c0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0002d2d0: 2020 2020 2020 2020 7369 7a65 203d 206c          size = l
-0002d2e0: 656e 2864 6174 6129 0d0a 2020 2020 2020  en(data)..      
-0002d2f0: 2020 2020 2020 2020 2020 2020 2020 6974                it
-0002d300: 656d 7320 3d20 6461 7461 5b3a 2073 656c  ems = data[: sel
-0002d310: 662e 5f73 756d 6d61 7279 5f6c 656e 5d0d  f._summary_len].
-0002d320: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d330: 2020 2020 2069 6620 7369 7a65 203c 2073       if size < s
-0002d340: 656c 662e 5f73 756d 6d61 7279 5f6c 656e  elf._summary_len
-0002d350: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002d360: 2020 2020 2020 2020 2020 2064 6966 6620             diff 
-0002d370: 3d20 7365 6c66 2e5f 7375 6d6d 6172 795f  = self._summary_
-0002d380: 6c65 6e20 2d20 7369 7a65 0d0a 2020 2020  len - size..    
-0002d390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d3a0: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
-0002d3b0: 6765 2864 6966 6629 3a0d 0a20 2020 2020  ge(diff):..     
-0002d3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d3d0: 2020 2020 2020 2069 7465 6d73 2e61 7070         items.app
-0002d3e0: 656e 6428 2222 290d 0a0d 0a20 2020 2020  end("")....     
-0002d3f0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0002d400: 6e70 2e69 7373 6361 6c61 7228 6461 7461  np.isscalar(data
-0002d410: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0002d420: 2020 2020 2020 2020 6c65 6674 203d 205b          left = [
-0002d430: 7374 7228 6461 7461 295d 0d0a 2020 2020  str(data)]..    
-0002d440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d450: 7269 6768 7420 3d20 5b22 225d 202a 2028  right = [""] * (
-0002d460: 7365 6c66 2e5f 7375 6d6d 6172 795f 6c65  self._summary_le
-0002d470: 6e20 2d20 3129 0d0a 2020 2020 2020 2020  n - 1)..        
-0002d480: 2020 2020 2020 2020 2020 2020 6974 656d              item
-0002d490: 7320 3d20 6c65 6674 202b 2072 6967 6874  s = left + right
-0002d4a0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0002d4b0: 7479 7065 732e 6170 7065 6e64 2869 7465  types.append(ite
-0002d4c0: 6d5f 7479 7065 290d 0a20 2020 2020 2020  m_type)..       
-0002d4d0: 2020 2020 2073 697a 6573 2e61 7070 656e       sizes.appen
-0002d4e0: 6428 7369 7a65 290d 0a20 2020 2020 2020  d(size)..       
-0002d4f0: 2020 2020 2073 756d 6d61 7279 5f69 7465       summary_ite
-0002d500: 6d73 2e61 7070 656e 6428 6974 656d 7329  ms.append(items)
-0002d510: 0d0a 0d0a 2020 2020 2020 2020 6d61 696e  ....        main
-0002d520: 5f64 6174 6120 3d20 5b6e 702e 6172 7261  _data = [np.arra
-0002d530: 7928 6e61 6d65 732c 2064 7479 7065 3d73  y(names, dtype=s
-0002d540: 7472 292c 206e 702e 6172 7261 7928 7479  tr), np.array(ty
-0002d550: 7065 732c 2064 7479 7065 3d73 7472 292c  pes, dtype=str),
-0002d560: 206e 702e 6172 7261 7928 7369 7a65 732c   np.array(sizes,
-0002d570: 2064 7479 7065 3d73 7472 295d 0d0a 0d0a   dtype=str)]....
-0002d580: 2020 2020 2020 2020 7375 6d6d 6172 795f          summary_
-0002d590: 6974 656d 7320 3d20 6e70 2e61 7272 6179  items = np.array
-0002d5a0: 2873 756d 6d61 7279 5f69 7465 6d73 290d  (summary_items).
-0002d5b0: 0a0d 0a20 2020 2020 2020 2073 756d 6d61  ...        summa
-0002d5c0: 7279 5f69 7465 6d73 203d 2073 756d 6d61  ry_items = summa
-0002d5d0: 7279 5f69 7465 6d73 2e74 7261 6e73 706f  ry_items.transpo
-0002d5e0: 7365 2829 0d0a 2020 2020 2020 2020 666f  se()..        fo
-0002d5f0: 7220 7320 696e 2073 756d 6d61 7279 5f69  r s in summary_i
-0002d600: 7465 6d73 3a0d 0a20 2020 2020 2020 2020  tems:..         
-0002d610: 2020 206d 6169 6e5f 6461 7461 2e61 7070     main_data.app
-0002d620: 656e 6428 7329 0d0a 0d0a 2020 2020 2020  end(s)....      
-0002d630: 2020 7265 7475 726e 2068 6561 6465 725f    return header_
-0002d640: 7475 7073 2c20 6d61 696e 5f64 6174 612c  tups, main_data,
-0002d650: 2066 6f6f 7465 725f 7475 7073 0d0a 0d0a   footer_tups....
-0002d660: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+0002c4d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
+0002c4e0: 0a20 2020 2064 6566 205f 7072 6570 6172  .    def _prepar
+0002c4f0: 655f 6469 7370 6c61 795f 6461 7461 2873  e_display_data(s
+0002c500: 656c 6629 3a0d 0a20 2020 2020 2020 2022  elf):..        "
+0002c510: 2222 0d0a 2020 2020 2020 2020 5265 7475  ""..        Retu
+0002c520: 726e 7320 6120 6c69 7374 206f 6620 6c69  rns a list of li
+0002c530: 7374 7320 2861 6c6c 2063 6f6c 756d 6e20  sts (all column 
+0002c540: 6461 7461 2920 616e 6420 6120 6c69 7374  data) and a list
+0002c550: 206f 6620 6865 6164 6572 2074 7570 6c65   of header tuple
+0002c560: 7320 666f 7220 6469 7370 6c61 792e 0d0a  s for display...
+0002c570: 0d0a 2020 2020 2020 2020 3a72 6574 7572  ..        :retur
+0002c580: 6e3a 206c 6973 7428 6c69 7374 292c 206c  n: list(list), l
+0002c590: 6973 7428 7475 706c 6529 0d0a 2020 2020  ist(tuple)..    
+0002c5a0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+0002c5b0: 2023 206d 6f76 6520 7468 6973 2074 6f20   # move this to 
+0002c5c0: 6120 636c 6173 7320 6465 6661 756c 7420  a class default 
+0002c5d0: 7661 7269 6162 6c65 206f 7220 6469 7370  variable or disp
+0002c5e0: 6c61 7920 6f70 7469 6f6e 0d0a 2020 2020  lay option..    
+0002c5f0: 2020 2020 6974 656d 5f6e 756d 6265 7273      item_numbers
+0002c600: 203d 205b 7374 7228 6929 2066 6f72 2069   = [str(i) for i
+0002c610: 2069 6e20 7261 6e67 6528 7365 6c66 2e5f   in range(self._
+0002c620: 7375 6d6d 6172 795f 6c65 6e29 5d0d 0a20  summary_len)].. 
+0002c630: 2020 2020 2020 2073 756d 6d61 7279 5f6c         summary_l
+0002c640: 6162 656c 7320 3d20 5b22 4e61 6d65 222c  abels = ["Name",
+0002c650: 2022 5479 7065 222c 2022 5369 7a65 225d   "Type", "Size"]
+0002c660: 0d0a 2020 2020 2020 2020 7375 6d6d 6172  ..        summar
+0002c670: 795f 6865 6164 6572 7320 3d20 7375 6d6d  y_headers = summ
+0002c680: 6172 795f 6c61 6265 6c73 202b 2069 7465  ary_labels + ite
+0002c690: 6d5f 6e75 6d62 6572 730d 0a20 2020 2020  m_numbers..     
+0002c6a0: 2020 2068 6561 6465 725f 7475 7073 203d     header_tups =
+0002c6b0: 205b 6275 696c 645f 6865 6164 6572 5f74   [build_header_t
+0002c6c0: 7570 6c65 7328 7375 6d6d 6172 795f 6865  uples(summary_he
+0002c6d0: 6164 6572 732c 2031 2c20 3029 5d0d 0a20  aders, 1, 0)].. 
+0002c6e0: 2020 2020 2020 2023 2073 7472 7563 7473         # structs
+0002c6f0: 2077 696c 6c20 616c 7761 7973 2073 686f   will always sho
+0002c700: 7720 726f 7720 6e75 6d62 6572 730d 0a20  w row numbers.. 
+0002c710: 2020 2020 2020 2068 6561 6465 725f 7475         header_tu
+0002c720: 7073 5b2d 315d 2e69 6e73 6572 7428 302c  ps[-1].insert(0,
+0002c730: 2043 6f6c 4865 6164 6572 2822 2322 2c20   ColHeader("#", 
+0002c740: 312c 2030 2929 0d0a 0d0a 2020 2020 2020  1, 0))....      
+0002c750: 2020 666f 6f74 6572 5f74 7570 7320 3d20    footer_tups = 
+0002c760: 7365 6c66 2e66 6f6f 7465 7273 0d0a 0d0a  self.footers....
+0002c770: 2020 2020 2020 2020 6e61 6d65 7320 3d20          names = 
+0002c780: 6e70 2e61 7272 6179 286c 6973 7428 7365  np.array(list(se
+0002c790: 6c66 2e6b 6579 7328 2929 290d 0a20 2020  lf.keys()))..   
+0002c7a0: 2020 2020 2074 7970 6573 203d 206e 702e       types = np.
+0002c7b0: 6172 7261 7928 5b74 7970 6528 6129 2e5f  array([type(a)._
+0002c7c0: 5f6e 616d 655f 5f20 666f 7220 6120 696e  _name__ for a in
+0002c7d0: 206e 616d 6573 5d29 0d0a 0d0a 2020 2020   names])....    
+0002c7e0: 2020 2020 7479 7065 7320 3d20 5b5d 0d0a      types = []..
+0002c7f0: 2020 2020 2020 2020 7369 7a65 7320 3d20          sizes = 
+0002c800: 5b5d 0d0a 2020 2020 2020 2020 7375 6d6d  []..        summ
+0002c810: 6172 795f 6974 656d 7320 3d20 5b5d 0d0a  ary_items = []..
+0002c820: 2020 2020 2020 2020 666f 7220 6120 696e          for a in
+0002c830: 206e 616d 6573 3a0d 0a20 2020 2020 2020   names:..       
+0002c840: 2020 2020 2069 7465 6d5f 7479 7065 203d       item_type =
+0002c850: 2022 220d 0a20 2020 2020 2020 2020 2020   ""..           
+0002c860: 2073 697a 6520 3d20 300d 0a20 2020 2020   size = 0..     
+0002c870: 2020 2020 2020 2069 7465 6d73 203d 205b         items = [
+0002c880: 2222 2c20 2222 2c20 2222 5d0d 0a20 2020  "", "", ""]..   
+0002c890: 2020 2020 2020 2020 2064 6174 6120 3d20           data = 
+0002c8a0: 7365 6c66 2e5f 5f67 6574 6174 7472 5f5f  self.__getattr__
+0002c8b0: 2861 290d 0a0d 0a20 2020 2020 2020 2020  (a)....         
+0002c8c0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0002c8d0: 2864 6174 612c 206e 702e 6e64 6172 7261  (data, np.ndarra
+0002c8e0: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
+0002c8f0: 2020 2020 2023 2069 6620 6461 7461 2e6e       # if data.n
+0002c900: 6469 6d21 3d31 3a70 7269 6e74 2866 277b  dim!=1:print(f'{
+0002c910: 617d 2064 6964 206e 6f74 2068 6176 6520  a} did not have 
+0002c920: 3220 6469 6d73 2067 6f74 207b 6461 7461  2 dims got {data
+0002c930: 2e6e 6469 6d7d 2729 0d0a 2020 2020 2020  .ndim}')..      
+0002c940: 2020 2020 2020 2020 2020 6974 656d 5f74            item_t
+0002c950: 7970 6520 3d20 7374 7228 6461 7461 2e64  ype = str(data.d
+0002c960: 7479 7065 290d 0a20 2020 2020 2020 2020  type)..         
+0002c970: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+0002c980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c990: 2073 697a 6520 3d20 6c65 6e28 6461 7461   size = len(data
+0002c9a0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0002c9b0: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
+0002c9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c9d0: 2320 6861 6e64 6c65 2075 6e73 697a 6564  # handle unsized
+0002c9e0: 206f 626a 6563 7473 2068 6170 7065 6e73   objects happens
+0002c9f0: 2077 6974 6820 783d 6e70 2e61 7361 6e79   with x=np.asany
+0002ca00: 6172 7261 7928 2774 6573 7427 290d 0a20  array('test').. 
+0002ca10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ca20: 2020 2064 6174 6120 3d20 6e70 2e61 7361     data = np.asa
+0002ca30: 6e79 6172 7261 7928 5b64 6174 615d 290d  nyarray([data]).
+0002ca40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002ca50: 2020 2020 2073 697a 6520 3d20 6c65 6e28       size = len(
+0002ca60: 6461 7461 290d 0a0d 0a20 2020 2020 2020  data)....       
+0002ca70: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+0002ca80: 7374 616e 6365 2864 6174 612c 2054 7970  stance(data, Typ
+0002ca90: 6552 6567 6973 7465 722e 4361 7465 676f  eRegister.Catego
+0002caa0: 7269 6361 6c29 3a0d 0a20 2020 2020 2020  rical):..       
+0002cab0: 2020 2020 2020 2020 2020 2020 2069 7465               ite
+0002cac0: 6d73 203d 206e 702e 6172 7261 7928 5b73  ms = np.array([s
+0002cad0: 7472 2869 2920 666f 7220 6920 696e 2064  tr(i) for i in d
+0002cae0: 6174 615b 3a20 7365 6c66 2e5f 7375 6d6d  ata[: self._summ
+0002caf0: 6172 795f 6c65 6e5d 5d29 0d0a 2020 2020  ary_len]])..    
+0002cb00: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0002cb10: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002cb20: 2020 2020 2020 2023 2062 7567 2077 6865         # bug whe
+0002cb30: 6e20 7365 6e64 696e 6720 3264 696d 2063  n sending 2dim c
+0002cb40: 6f6c 756d 6e73 2074 6f20 7374 7275 6374  olumns to struct
+0002cb50: 2064 6973 706c 6179 0d0a 2020 2020 2020   display..      
+0002cb60: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002cb70: 6361 6e6e 6f74 2068 7374 6163 6b20 7374  cannot hstack st
+0002cb80: 7269 6e67 2072 6570 7220 7769 7468 2063  ring repr with c
+0002cb90: 6f6c 756d 6e20 6e61 6d65 0d0a 2020 2020  olumn name..    
+0002cba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cbb0: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+0002cbc0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002cbd0: 2064 6174 612e 6e64 696d 203d 3d20 313a   data.ndim == 1:
+0002cbe0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002cbf0: 2020 2020 2020 2020 2020 2020 2020 6974                it
+0002cc00: 656d 7320 3d20 6461 7461 5b3a 2073 656c  ems = data[: sel
+0002cc10: 662e 5f73 756d 6d61 7279 5f6c 656e 5d2e  f._summary_len].
+0002cc20: 6173 7479 7065 2873 7472 290d 0a20 2020  astype(str)..   
+0002cc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cc40: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0002cc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cc60: 2020 2020 2020 2020 6974 656d 7320 3d20          items = 
+0002cc70: 6e70 2e61 7272 6179 285b 7374 7228 6929  np.array([str(i)
+0002cc80: 2066 6f72 2069 2069 6e20 6461 7461 5b3a   for i in data[:
+0002cc90: 2073 656c 662e 5f73 756d 6d61 7279 5f6c   self._summary_l
+0002cca0: 656e 5d5d 290d 0a20 2020 2020 2020 2020  en]])..         
+0002ccb0: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+0002ccc0: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+0002ccd0: 2020 2020 2020 2020 2020 2020 2320 6669              # fi
+0002cce0: 7820 6275 6720 696e 2072 6563 6f72 6420  x bug in record 
+0002ccf0: 6172 7261 7973 0d0a 2020 2020 2020 2020  arrays..        
+0002cd00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cd10: 6974 656d 7320 3d20 6e70 2e61 7272 6179  items = np.array
+0002cd20: 285b 7374 7228 6929 2066 6f72 2069 2069  ([str(i) for i i
+0002cd30: 6e20 6461 7461 5b3a 2073 656c 662e 5f73  n data[: self._s
+0002cd40: 756d 6d61 7279 5f6c 656e 5d5d 290d 0a0d  ummary_len]])...
+0002cd50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002cd60: 2069 6620 7369 7a65 203c 2073 656c 662e   if size < self.
+0002cd70: 5f73 756d 6d61 7279 5f6c 656e 3a0d 0a20  _summary_len:.. 
+0002cd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cd90: 2020 2023 2066 696c 6c20 7468 6520 7265     # fill the re
+0002cda0: 7374 2077 6974 6820 656d 7074 7920 7374  st with empty st
+0002cdb0: 7269 6e67 730d 0a20 2020 2020 2020 2020  rings..         
+0002cdc0: 2020 2020 2020 2020 2020 2072 6967 6874             right
+0002cdd0: 203d 206e 702e 6675 6c6c 2873 656c 662e   = np.full(self.
+0002cde0: 5f73 756d 6d61 7279 5f6c 656e 202d 2073  _summary_len - s
+0002cdf0: 697a 652c 2022 2229 0d0a 2020 2020 2020  ize, "")..      
+0002ce00: 2020 2020 2020 2020 2020 2020 2020 6974                it
+0002ce10: 656d 7320 3d20 6e70 2e68 7374 6163 6b28  ems = np.hstack(
+0002ce20: 2869 7465 6d73 2c20 7269 6768 7429 290d  (items, right)).
+0002ce30: 0a0d 0a20 2020 2020 2020 2020 2020 2065  ...            e
+0002ce40: 6c69 6620 6973 696e 7374 616e 6365 2864  lif isinstance(d
+0002ce50: 6174 612c 2054 7970 6552 6567 6973 7465  ata, TypeRegiste
+0002ce60: 722e 4461 7461 7365 7429 3a0d 0a20 2020  r.Dataset):..   
+0002ce70: 2020 2020 2020 2020 2020 2020 2069 7465               ite
+0002ce80: 6d5f 7479 7065 203d 2074 7970 6528 6461  m_type = type(da
+0002ce90: 7461 292e 5f5f 6e61 6d65 5f5f 0d0a 2020  ta).__name__..  
+0002cea0: 2020 2020 2020 2020 2020 2020 2020 6e75                nu
+0002ceb0: 6d5f 726f 7773 203d 2073 7472 2864 6174  m_rows = str(dat
+0002cec0: 612e 5f6e 726f 7773 290d 0a20 2020 2020  a._nrows)..     
+0002ced0: 2020 2020 2020 2020 2020 206e 756d 5f63             num_c
+0002cee0: 6f6c 7320 3d20 7374 7228 6461 7461 2e5f  ols = str(data._
+0002cef0: 6e63 6f6c 7329 0d0a 2020 2020 2020 2020  ncols)..        
+0002cf00: 2020 2020 2020 2020 7369 7a65 203d 206e          size = n
+0002cf10: 756d 5f72 6f77 7320 2b20 2220 726f 7773  um_rows + " rows
+0002cf20: 2078 2022 202b 206e 756d 5f63 6f6c 7320   x " + num_cols 
+0002cf30: 2b20 2220 636f 6c73 220d 0a20 2020 2020  + " cols"..     
+0002cf40: 2020 2020 2020 2020 2020 2069 7465 6d73             items
+0002cf50: 203d 206e 702e 6675 6c6c 2873 656c 662e   = np.full(self.
+0002cf60: 5f73 756d 6d61 7279 5f6c 656e 2c20 2222  _summary_len, ""
+0002cf70: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0002cf80: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+0002cf90: 2864 6174 612c 2053 7472 7563 7429 3a0d  (data, Struct):.
+0002cfa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002cfb0: 2069 7465 6d5f 7479 7065 203d 2074 7970   item_type = typ
+0002cfc0: 6528 6461 7461 292e 5f5f 6e61 6d65 5f5f  e(data).__name__
+0002cfd0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002cfe0: 2020 7369 7a65 203d 2064 6174 612e 5f6e    size = data._n
+0002cff0: 636f 6c73 0d0a 2020 2020 2020 2020 2020  cols..          
+0002d000: 2020 2020 2020 6461 7461 203d 206c 6973        data = lis
+0002d010: 7428 6461 7461 2e6b 6579 7328 2929 0d0a  t(data.keys())..
+0002d020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d030: 6966 2073 697a 6520 3e3d 2073 656c 662e  if size >= self.
+0002d040: 5f73 756d 6d61 7279 5f6c 656e 3a0d 0a20  _summary_len:.. 
+0002d050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d060: 2020 2064 6174 6120 3d20 6461 7461 5b3a     data = data[:
+0002d070: 2073 656c 662e 5f73 756d 6d61 7279 5f6c   self._summary_l
+0002d080: 656e 5d0d 0a20 2020 2020 2020 2020 2020  en]..           
+0002d090: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0002d0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d0b0: 6c65 6674 203d 206e 702e 6172 7261 7928  left = np.array(
+0002d0c0: 6461 7461 2c20 6474 7970 653d 7374 7229  data, dtype=str)
+0002d0d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002d0e0: 2020 2020 2020 7269 6768 7420 3d20 6e70        right = np
+0002d0f0: 2e66 756c 6c28 7365 6c66 2e5f 7375 6d6d  .full(self._summ
+0002d100: 6172 795f 6c65 6e20 2d20 7369 7a65 2c20  ary_len - size, 
+0002d110: 2222 290d 0a20 2020 2020 2020 2020 2020  "")..           
+0002d120: 2020 2020 2020 2020 2069 7465 6d73 203d           items =
+0002d130: 206e 702e 6873 7461 636b 2828 6c65 6674   np.hstack((left
+0002d140: 2c20 7269 6768 7429 290d 0a0d 0a20 2020  , right))....   
+0002d150: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+0002d160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d170: 6974 656d 5f74 7970 6520 3d20 7479 7065  item_type = type
+0002d180: 2864 6174 6129 2e5f 5f6e 616d 655f 5f0d  (data).__name__.
+0002d190: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d1a0: 2023 2063 6f6e 7665 7274 2064 6963 7420   # convert dict 
+0002d1b0: 6b65 7973 2061 6e64 2073 6574 7320 746f  keys and sets to
+0002d1c0: 206c 6973 7420 666f 7220 736c 6963 696e   list for slicin
+0002d1d0: 670d 0a20 2020 2020 2020 2020 2020 2020  g..             
+0002d1e0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0002d1f0: 2864 6174 612c 2064 6963 7429 3a0d 0a20  (data, dict):.. 
+0002d200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d210: 2020 2064 6174 6120 3d20 6c69 7374 2864     data = list(d
+0002d220: 6174 612e 6b65 7973 2829 290d 0a20 2020  ata.keys())..   
+0002d230: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+0002d240: 6620 6973 696e 7374 616e 6365 2864 6174  f isinstance(dat
+0002d250: 612c 2028 7365 742c 2074 7570 6c65 2929  a, (set, tuple))
+0002d260: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002d270: 2020 2020 2020 2064 6174 6120 3d20 6c69         data = li
+0002d280: 7374 2864 6174 6129 0d0a 0d0a 2020 2020  st(data)....    
+0002d290: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0002d2a0: 7369 6e73 7461 6e63 6528 6461 7461 2c20  sinstance(data, 
+0002d2b0: 6c69 7374 293a 0d0a 2020 2020 2020 2020  list):..        
+0002d2c0: 2020 2020 2020 2020 2020 2020 7369 7a65              size
+0002d2d0: 203d 206c 656e 2864 6174 6129 0d0a 2020   = len(data)..  
+0002d2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d2f0: 2020 6974 656d 7320 3d20 6461 7461 5b3a    items = data[:
+0002d300: 2073 656c 662e 5f73 756d 6d61 7279 5f6c   self._summary_l
+0002d310: 656e 5d0d 0a20 2020 2020 2020 2020 2020  en]..           
+0002d320: 2020 2020 2020 2020 2069 6620 7369 7a65           if size
+0002d330: 203c 2073 656c 662e 5f73 756d 6d61 7279   < self._summary
+0002d340: 5f6c 656e 3a0d 0a20 2020 2020 2020 2020  _len:..         
+0002d350: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+0002d360: 6966 6620 3d20 7365 6c66 2e5f 7375 6d6d  iff = self._summ
+0002d370: 6172 795f 6c65 6e20 2d20 7369 7a65 0d0a  ary_len - size..
+0002d380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d390: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+0002d3a0: 2072 616e 6765 2864 6966 6629 3a0d 0a20   range(diff):.. 
+0002d3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d3c0: 2020 2020 2020 2020 2020 2069 7465 6d73             items
+0002d3d0: 2e61 7070 656e 6428 2222 290d 0a0d 0a20  .append("").... 
+0002d3e0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0002d3f0: 6c69 6620 6e70 2e69 7373 6361 6c61 7228  lif np.isscalar(
+0002d400: 6461 7461 293a 0d0a 2020 2020 2020 2020  data):..        
+0002d410: 2020 2020 2020 2020 2020 2020 6c65 6674              left
+0002d420: 203d 205b 7374 7228 6461 7461 295d 0d0a   = [str(data)]..
+0002d430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d440: 2020 2020 7269 6768 7420 3d20 5b22 225d      right = [""]
+0002d450: 202a 2028 7365 6c66 2e5f 7375 6d6d 6172   * (self._summar
+0002d460: 795f 6c65 6e20 2d20 3129 0d0a 2020 2020  y_len - 1)..    
+0002d470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d480: 6974 656d 7320 3d20 6c65 6674 202b 2072  items = left + r
+0002d490: 6967 6874 0d0a 0d0a 2020 2020 2020 2020  ight....        
+0002d4a0: 2020 2020 7479 7065 732e 6170 7065 6e64      types.append
+0002d4b0: 2869 7465 6d5f 7479 7065 290d 0a20 2020  (item_type)..   
+0002d4c0: 2020 2020 2020 2020 2073 697a 6573 2e61           sizes.a
+0002d4d0: 7070 656e 6428 7369 7a65 290d 0a20 2020  ppend(size)..   
+0002d4e0: 2020 2020 2020 2020 2073 756d 6d61 7279           summary
+0002d4f0: 5f69 7465 6d73 2e61 7070 656e 6428 6974  _items.append(it
+0002d500: 656d 7329 0d0a 0d0a 2020 2020 2020 2020  ems)....        
+0002d510: 6d61 696e 5f64 6174 6120 3d20 5b6e 702e  main_data = [np.
+0002d520: 6172 7261 7928 6e61 6d65 732c 2064 7479  array(names, dty
+0002d530: 7065 3d73 7472 292c 206e 702e 6172 7261  pe=str), np.arra
+0002d540: 7928 7479 7065 732c 2064 7479 7065 3d73  y(types, dtype=s
+0002d550: 7472 292c 206e 702e 6172 7261 7928 7369  tr), np.array(si
+0002d560: 7a65 732c 2064 7479 7065 3d73 7472 295d  zes, dtype=str)]
+0002d570: 0d0a 0d0a 2020 2020 2020 2020 7375 6d6d  ....        summ
+0002d580: 6172 795f 6974 656d 7320 3d20 6e70 2e61  ary_items = np.a
+0002d590: 7272 6179 2873 756d 6d61 7279 5f69 7465  rray(summary_ite
+0002d5a0: 6d73 290d 0a0d 0a20 2020 2020 2020 2073  ms)....        s
+0002d5b0: 756d 6d61 7279 5f69 7465 6d73 203d 2073  ummary_items = s
+0002d5c0: 756d 6d61 7279 5f69 7465 6d73 2e74 7261  ummary_items.tra
+0002d5d0: 6e73 706f 7365 2829 0d0a 2020 2020 2020  nspose()..      
+0002d5e0: 2020 666f 7220 7320 696e 2073 756d 6d61    for s in summa
+0002d5f0: 7279 5f69 7465 6d73 3a0d 0a20 2020 2020  ry_items:..     
+0002d600: 2020 2020 2020 206d 6169 6e5f 6461 7461         main_data
+0002d610: 2e61 7070 656e 6428 7329 0d0a 0d0a 2020  .append(s)....  
+0002d620: 2020 2020 2020 7265 7475 726e 2068 6561        return hea
+0002d630: 6465 725f 7475 7073 2c20 6d61 696e 5f64  der_tups, main_d
+0002d640: 6174 612c 2066 6f6f 7465 725f 7475 7073  ata, footer_tups
+0002d650: 0d0a 0d0a 2020 2020 2320 2d2d 2d2d 2d2d  ....    # ------
+0002d660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002d670: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002d680: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002d690: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002d6a0: 2d2d 0d0a 2020 2020 6465 6620 6170 706c  --..    def appl
-0002d6b0: 795f 7363 6865 6d61 2873 656c 662c 2073  y_schema(self, s
-0002d6c0: 6368 656d 6129 3a0d 0a20 2020 2020 2020  chema):..       
-0002d6d0: 2022 2222 4170 706c 7920 6120 7363 6865   """Apply a sche
-0002d6e0: 6d61 2063 6f6e 7461 696e 696e 6720 6465  ma containing de
-0002d6f0: 7363 7269 7074 6976 6520 696e 666f 726d  scriptive inform
-0002d700: 6174 696f 6e20 7265 6375 7273 6976 656c  ation recursivel
-0002d710: 7920 746f 0d0a 2020 2020 2020 2020 7468  y to..        th
-0002d720: 6520 5374 7275 6374 2e0d 0a0d 0a20 2020  e Struct.....   
-0002d730: 2020 2020 2050 6172 616d 6574 6572 730d       Parameters.
-0002d740: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
-0002d750: 2d2d 2d0d 0a20 2020 2020 2020 2073 6368  ---..        sch
-0002d760: 656d 6120 3a20 6469 6374 0d0a 2020 2020  ema : dict..    
-0002d770: 2020 2020 2020 2020 4120 6469 6374 696f          A dictio
-0002d780: 6e61 7279 206f 6620 7363 6865 6d61 2069  nary of schema i
-0002d790: 6e66 6f72 6d61 7469 6f6e 2e20 2053 6565  nformation.  See
-0002d7a0: 0d0a 2020 2020 2020 2020 2020 2020 3a66  ..            :f
-0002d7b0: 756e 633a 602e 7274 5f6d 6574 612e 6170  unc:`.rt_meta.ap
-0002d7c0: 706c 795f 7363 6865 6d61 6020 666f 7220  ply_schema` for 
-0002d7d0: 6d6f 7265 0d0a 2020 2020 2020 2020 2020  more..          
-0002d7e0: 2020 696e 666f 726d 6174 696f 6e20 6f6e    information on
-0002d7f0: 2074 6865 2066 6f72 6d61 7420 6f66 2074   the format of t
-0002d800: 6865 2064 6963 7469 6f6e 6172 792e 0d0a  he dictionary...
-0002d810: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-0002d820: 730d 0a20 2020 2020 2020 202d 2d2d 2d2d  s..        -----
-0002d830: 2d2d 0d0a 2020 2020 2020 2020 7265 7320  --..        res 
-0002d840: 3a20 6469 6374 0d0a 2020 2020 2020 2020  : dict..        
-0002d850: 2020 2020 4469 6374 696f 6e61 7279 206f      Dictionary o
-0002d860: 6620 6465 7669 6174 696f 6e73 2066 726f  f deviations fro
-0002d870: 6d20 7468 6520 7363 6865 6d61 0d0a 0d0a  m the schema....
-0002d880: 2020 2020 2020 2020 5365 6520 416c 736f          See Also
-0002d890: 0d0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  ..        ------
-0002d8a0: 2d2d 0d0a 2020 2020 2020 2020 696e 666f  --..        info
-0002d8b0: 2c20 646f 632c 203a 6675 6e63 3a60 2e72  , doc, :func:`.r
-0002d8c0: 745f 6d65 7461 2e61 7070 6c79 5f73 6368  t_meta.apply_sch
-0002d8d0: 656d 6160 0d0a 2020 2020 2020 2020 2222  ema`..        ""
-0002d8e0: 220d 0a20 2020 2020 2020 2066 726f 6d20  "..        from 
-0002d8f0: 2e72 745f 6d65 7461 2069 6d70 6f72 7420  .rt_meta import 
-0002d900: 6170 706c 795f 7363 6865 6d61 2061 7320  apply_schema as 
-0002d910: 5f61 7070 6c79 5f73 6368 656d 610d 0a0d  _apply_schema...
-0002d920: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0002d930: 5f61 7070 6c79 5f73 6368 656d 6128 7365  _apply_schema(se
-0002d940: 6c66 2c20 7363 6865 6d61 290d 0a0d 0a20  lf, schema).... 
-0002d950: 2020 2064 6566 2069 6e66 6f28 7365 6c66     def info(self
-0002d960: 2c20 2a2a 6b77 6172 6773 293a 0d0a 2020  , **kwargs):..  
-0002d970: 2020 2020 2020 2222 2252 6574 7572 6e20        """Return 
-0002d980: 616e 206f 626a 6563 7420 636f 6e74 6169  an object contai
-0002d990: 6e69 6e67 2061 2064 6573 6372 6970 7469  ning a descripti
-0002d9a0: 6f6e 206f 6620 7468 6520 7374 7275 6374  on of the struct
-0002d9b0: 7572 6527 7320 636f 6e74 656e 7473 2e0d  ure's contents..
-0002d9c0: 0a0d 0a20 2020 2020 2020 2050 6172 616d  ...        Param
-0002d9d0: 6574 6572 730d 0a20 2020 2020 2020 202d  eters..        -
-0002d9e0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020  ---------..     
-0002d9f0: 2020 206b 7761 7267 7320 3a20 6469 6374     kwargs : dict
-0002da00: 0d0a 2020 2020 2020 2020 2020 2020 4f70  ..            Op
-0002da10: 7469 6f6e 616c 206b 6579 776f 7264 2061  tional keyword a
-0002da20: 7267 756d 656e 7473 2070 6173 7365 6420  rguments passed 
-0002da30: 746f 203a 6675 6e63 3a60 2e72 745f 6d65  to :func:`.rt_me
-0002da40: 7461 2e69 6e66 6f60 0d0a 0d0a 2020 2020  ta.info`....    
-0002da50: 2020 2020 5265 7475 726e 730d 0a20 2020      Returns..   
-0002da60: 2020 2020 202d 2d2d 2d2d 2d2d 0d0a 2020       -------..  
-0002da70: 2020 2020 2020 696e 666f 203a 203a 636c        info : :cl
-0002da80: 6173 733a 602e 7274 5f6d 6574 612e 496e  ass:`.rt_meta.In
-0002da90: 666f 600d 0a20 2020 2020 2020 2020 2020  fo`..           
-0002daa0: 2041 2064 6573 6372 6970 7469 6f6e 206f   A description o
-0002dab0: 6620 7468 6520 7374 7275 6374 7572 6527  f the structure'
-0002dac0: 7320 636f 6e74 656e 7473 2e0d 0a0d 0a20  s contents..... 
-0002dad0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-0002dae0: 2020 2020 6672 6f6d 202e 7274 5f6d 6574      from .rt_met
-0002daf0: 6120 696d 706f 7274 2069 6e66 6f20 6173  a import info as
-0002db00: 205f 696e 666f 0d0a 0d0a 2020 2020 2020   _info....      
-0002db10: 2020 7265 7475 726e 205f 696e 666f 2873    return _info(s
-0002db20: 656c 662c 202a 2a6b 7761 7267 7329 0d0a  elf, **kwargs)..
-0002db30: 0d0a 2020 2020 4070 726f 7065 7274 790d  ..    @property.
-0002db40: 0a20 2020 2064 6566 2064 6f63 2873 656c  .    def doc(sel
-0002db50: 6629 3a0d 0a20 2020 2020 2020 2022 2222  f):..        """
-0002db60: 3a63 6c61 7373 3a60 2e72 745f 6d65 7461  :class:`.rt_meta
-0002db70: 2e44 6f63 6020 5468 6520 6465 7363 7269  .Doc` The descri
-0002db80: 7074 6976 6520 646f 6375 6d65 6e74 6174  ptive documentat
-0002db90: 696f 6e20 6f62 6a65 6374 2066 6f72 2074  ion object for t
-0002dba0: 6865 2073 7472 7563 7475 7265 2e22 2222  he structure."""
-0002dbb0: 0d0a 2020 2020 2020 2020 6672 6f6d 202e  ..        from .
-0002dbc0: 7274 5f6d 6574 6120 696d 706f 7274 2064  rt_meta import d
-0002dbd0: 6f63 2061 7320 5f64 6f63 0d0a 0d0a 2020  oc as _doc....  
-0002dbe0: 2020 2020 2020 7265 7475 726e 205f 646f        return _do
-0002dbf0: 6328 7365 6c66 290d 0a0d 0a20 2020 2023  c(self)....    #
-0002dc00: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+0002d690: 2d2d 2d2d 2d2d 0d0a 2020 2020 6465 6620  ------..    def 
+0002d6a0: 6170 706c 795f 7363 6865 6d61 2873 656c  apply_schema(sel
+0002d6b0: 662c 2073 6368 656d 6129 3a0d 0a20 2020  f, schema):..   
+0002d6c0: 2020 2020 2022 2222 4170 706c 7920 6120       """Apply a 
+0002d6d0: 7363 6865 6d61 2063 6f6e 7461 696e 696e  schema containin
+0002d6e0: 6720 6465 7363 7269 7074 6976 6520 696e  g descriptive in
+0002d6f0: 666f 726d 6174 696f 6e20 7265 6375 7273  formation recurs
+0002d700: 6976 656c 7920 746f 0d0a 2020 2020 2020  ively to..      
+0002d710: 2020 7468 6520 5374 7275 6374 2e0d 0a0d    the Struct....
+0002d720: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
+0002d730: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
+0002d740: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
+0002d750: 2073 6368 656d 6120 3a20 6469 6374 0d0a   schema : dict..
+0002d760: 2020 2020 2020 2020 2020 2020 4120 6469              A di
+0002d770: 6374 696f 6e61 7279 206f 6620 7363 6865  ctionary of sche
+0002d780: 6d61 2069 6e66 6f72 6d61 7469 6f6e 2e20  ma information. 
+0002d790: 2053 6565 0d0a 2020 2020 2020 2020 2020   See..          
+0002d7a0: 2020 3a66 756e 633a 602e 7274 5f6d 6574    :func:`.rt_met
+0002d7b0: 612e 6170 706c 795f 7363 6865 6d61 6020  a.apply_schema` 
+0002d7c0: 666f 7220 6d6f 7265 0d0a 2020 2020 2020  for more..      
+0002d7d0: 2020 2020 2020 696e 666f 726d 6174 696f        informatio
+0002d7e0: 6e20 6f6e 2074 6865 2066 6f72 6d61 7420  n on the format 
+0002d7f0: 6f66 2074 6865 2064 6963 7469 6f6e 6172  of the dictionar
+0002d800: 792e 0d0a 0d0a 2020 2020 2020 2020 5265  y.....        Re
+0002d810: 7475 726e 730d 0a20 2020 2020 2020 202d  turns..        -
+0002d820: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0002d830: 7265 7320 3a20 6469 6374 0d0a 2020 2020  res : dict..    
+0002d840: 2020 2020 2020 2020 4469 6374 696f 6e61          Dictiona
+0002d850: 7279 206f 6620 6465 7669 6174 696f 6e73  ry of deviations
+0002d860: 2066 726f 6d20 7468 6520 7363 6865 6d61   from the schema
+0002d870: 0d0a 0d0a 2020 2020 2020 2020 5365 6520  ....        See 
+0002d880: 416c 736f 0d0a 2020 2020 2020 2020 2d2d  Also..        --
+0002d890: 2d2d 2d2d 2d2d 0d0a 2020 2020 2020 2020  ------..        
+0002d8a0: 696e 666f 2c20 646f 632c 203a 6675 6e63  info, doc, :func
+0002d8b0: 3a60 2e72 745f 6d65 7461 2e61 7070 6c79  :`.rt_meta.apply
+0002d8c0: 5f73 6368 656d 6160 0d0a 2020 2020 2020  _schema`..      
+0002d8d0: 2020 2222 220d 0a20 2020 2020 2020 2066    """..        f
+0002d8e0: 726f 6d20 2e72 745f 6d65 7461 2069 6d70  rom .rt_meta imp
+0002d8f0: 6f72 7420 6170 706c 795f 7363 6865 6d61  ort apply_schema
+0002d900: 2061 7320 5f61 7070 6c79 5f73 6368 656d   as _apply_schem
+0002d910: 610d 0a0d 0a20 2020 2020 2020 2072 6574  a....        ret
+0002d920: 7572 6e20 5f61 7070 6c79 5f73 6368 656d  urn _apply_schem
+0002d930: 6128 7365 6c66 2c20 7363 6865 6d61 290d  a(self, schema).
+0002d940: 0a0d 0a20 2020 2064 6566 2069 6e66 6f28  ...    def info(
+0002d950: 7365 6c66 2c20 2a2a 6b77 6172 6773 293a  self, **kwargs):
+0002d960: 0d0a 2020 2020 2020 2020 2222 2252 6574  ..        """Ret
+0002d970: 7572 6e20 616e 206f 626a 6563 7420 636f  urn an object co
+0002d980: 6e74 6169 6e69 6e67 2061 2064 6573 6372  ntaining a descr
+0002d990: 6970 7469 6f6e 206f 6620 7468 6520 7374  iption of the st
+0002d9a0: 7275 6374 7572 6527 7320 636f 6e74 656e  ructure's conten
+0002d9b0: 7473 2e0d 0a0d 0a20 2020 2020 2020 2050  ts.....        P
+0002d9c0: 6172 616d 6574 6572 730d 0a20 2020 2020  arameters..     
+0002d9d0: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20     ----------.. 
+0002d9e0: 2020 2020 2020 206b 7761 7267 7320 3a20         kwargs : 
+0002d9f0: 6469 6374 0d0a 2020 2020 2020 2020 2020  dict..          
+0002da00: 2020 4f70 7469 6f6e 616c 206b 6579 776f    Optional keywo
+0002da10: 7264 2061 7267 756d 656e 7473 2070 6173  rd arguments pas
+0002da20: 7365 6420 746f 203a 6675 6e63 3a60 2e72  sed to :func:`.r
+0002da30: 745f 6d65 7461 2e69 6e66 6f60 0d0a 0d0a  t_meta.info`....
+0002da40: 2020 2020 2020 2020 5265 7475 726e 730d          Returns.
+0002da50: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0002da60: 0d0a 2020 2020 2020 2020 696e 666f 203a  ..        info :
+0002da70: 203a 636c 6173 733a 602e 7274 5f6d 6574   :class:`.rt_met
+0002da80: 612e 496e 666f 600d 0a20 2020 2020 2020  a.Info`..       
+0002da90: 2020 2020 2041 2064 6573 6372 6970 7469       A descripti
+0002daa0: 6f6e 206f 6620 7468 6520 7374 7275 6374  on of the struct
+0002dab0: 7572 6527 7320 636f 6e74 656e 7473 2e0d  ure's contents..
+0002dac0: 0a0d 0a20 2020 2020 2020 2022 2222 0d0a  ...        """..
+0002dad0: 2020 2020 2020 2020 6672 6f6d 202e 7274          from .rt
+0002dae0: 5f6d 6574 6120 696d 706f 7274 2069 6e66  _meta import inf
+0002daf0: 6f20 6173 205f 696e 666f 0d0a 0d0a 2020  o as _info....  
+0002db00: 2020 2020 2020 7265 7475 726e 205f 696e        return _in
+0002db10: 666f 2873 656c 662c 202a 2a6b 7761 7267  fo(self, **kwarg
+0002db20: 7329 0d0a 0d0a 2020 2020 4070 726f 7065  s)....    @prope
+0002db30: 7274 790d 0a20 2020 2064 6566 2064 6f63  rty..    def doc
+0002db40: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+0002db50: 2022 2222 3a63 6c61 7373 3a60 2e72 745f   """:class:`.rt_
+0002db60: 6d65 7461 2e44 6f63 6020 5468 6520 6465  meta.Doc` The de
+0002db70: 7363 7269 7074 6976 6520 646f 6375 6d65  scriptive docume
+0002db80: 6e74 6174 696f 6e20 6f62 6a65 6374 2066  ntation object f
+0002db90: 6f72 2074 6865 2073 7472 7563 7475 7265  or the structure
+0002dba0: 2e22 2222 0d0a 2020 2020 2020 2020 6672  ."""..        fr
+0002dbb0: 6f6d 202e 7274 5f6d 6574 6120 696d 706f  om .rt_meta impo
+0002dbc0: 7274 2064 6f63 2061 7320 5f64 6f63 0d0a  rt doc as _doc..
+0002dbd0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+0002dbe0: 205f 646f 6328 7365 6c66 290d 0a0d 0a20   _doc(self).... 
+0002dbf0: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+0002dc00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002dc10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0002dc20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0002dc30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20  -------------.. 
-0002dc40: 2020 2023 2063 616e 6e6f 7420 6265 2063     # cannot be c
-0002dc50: 6c61 7373 206d 6574 686f 6420 6865 7265  lass method here
-0002dc60: 0d0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
-0002dc70: 686f 640d 0a20 2020 2064 6566 2073 6574  hod..    def set
-0002dc80: 5f66 6173 745f 6172 7261 7928 7661 6c3a  _fast_array(val:
-0002dc90: 2062 6f6f 6c29 3a0d 0a20 2020 2020 2020   bool):..       
-0002dca0: 2022 2222 5365 7420 746f 2074 7275 6520   """Set to true 
-0002dcb0: 746f 2066 6f72 6365 2074 6865 2063 6173  to force the cas
-0002dcc0: 7469 6e67 206f 6620 6e75 6d70 7920 6172  ting of numpy ar
-0002dcd0: 7261 7973 2074 6f20 4661 7374 4172 7261  rays to FastArra
-0002dce0: 7920 7768 656e 0d0a 2020 2020 2020 2020  y when..        
-0002dcf0: 636f 6e73 7472 7563 7469 6e67 2061 2053  constructing a S
-0002dd00: 7472 7563 7420 6f72 2061 6464 696e 6720  truct or adding 
-0002dd10: 6120 6e65 7720 636f 6c75 6d6e 2e0d 0a0d  a new column....
-0002dd20: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
-0002dd30: 6572 730d 0a20 2020 2020 2020 202d 2d2d  ers..        ---
-0002dd40: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2020 2020  -------..       
-0002dd50: 2076 616c 203a 2062 6f6f 6c0d 0a20 2020   val : bool..   
-0002dd60: 2020 2020 2020 2020 2054 7275 6520 6f72           True or
-0002dd70: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
-0002dd80: 2222 220d 0a20 2020 2020 2020 2053 7472  """..        Str
-0002dd90: 7563 742e 5573 6546 6173 7441 7272 6179  uct.UseFastArray
-0002dda0: 203d 2076 616c 0d0a 0d0a 2020 2020 4070   = val....    @p
-0002ddb0: 726f 7065 7274 790d 0a20 2020 2064 6566  roperty..    def
-0002ddc0: 2074 6f74 616c 5f73 697a 6573 2873 656c   total_sizes(sel
-0002ddd0: 6629 202d 3e20 5475 706c 655b 696e 742c  f) -> Tuple[int,
-0002dde0: 2069 6e74 5d3a 0d0a 2020 2020 2020 2020   int]:..        
-0002ddf0: 2222 220d 0a20 2020 2020 2020 2054 6865  """..        The
-0002de00: 2074 6f74 616c 2070 6879 7369 6361 6c20   total physical 
-0002de10: 616e 6420 6c6f 6769 6361 6c20 7369 7a65  and logical size
-0002de20: 206f 6620 616c 6c20 2863 6f6c 756d 6e61   of all (columna
-0002de30: 7229 2064 6174 6120 696e 2062 7974 6573  r) data in bytes
-0002de40: 2077 6974 6869 6e20 7468 6973 2053 7472   within this Str
-0002de50: 7563 742e 0d0a 0d0a 2020 2020 2020 2020  uct.....        
-0002de60: 5265 7475 726e 730d 0a20 2020 2020 2020  Returns..       
-0002de70: 202d 2d2d 2d2d 2d2d 0d0a 2020 2020 2020   -------..      
-0002de80: 2020 746f 7461 6c5f 7068 7973 6963 616c    total_physical
-0002de90: 5f73 697a 6520 3a20 696e 740d 0a20 2020  _size : int..   
-0002dea0: 2020 2020 2020 2020 2054 6865 2074 6f74           The tot
-0002deb0: 616c 2073 697a 652c 2069 6e20 6279 7465  al size, in byte
-0002dec0: 732c 206f 6620 616c 6c20 636f 6c75 6d6e  s, of all column
-0002ded0: 6172 2064 6174 6120 696e 2074 6869 7320  ar data in this 
-0002dee0: 696e 7374 616e 6365 2c20 6e6f 7420 636f  instance, not co
-0002def0: 756e 7469 6e67 2061 6e79 2064 7570 6c69  unting any dupli
-0002df00: 6361 7465 2f61 6c69 6173 206f 626a 6563  cate/alias objec
-0002df10: 7420 696e 7374 616e 6365 732e 0d0a 2020  t instances...  
-0002df20: 2020 2020 2020 746f 7461 6c5f 6c6f 6769        total_logi
-0002df30: 6361 6c5f 7369 7a65 203a 2069 6e74 0d0a  cal_size : int..
-0002df40: 2020 2020 2020 2020 2020 2020 5468 6520              The 
-0002df50: 746f 7461 6c20 7369 7a65 2c20 696e 2062  total size, in b
-0002df60: 7974 6573 2c20 6f66 2061 6c6c 2063 6f6c  ytes, of all col
-0002df70: 756d 6e61 7220 6461 7461 2069 6e20 7468  umnar data in th
-0002df80: 6973 2069 6e73 7461 6e63 652c 2069 6e63  is instance, inc
-0002df90: 6c75 6469 6e67 2064 7570 6c69 6361 7465  luding duplicate
-0002dfa0: 2f61 6c69 6173 206f 626a 6563 7420 696e  /alias object in
-0002dfb0: 7374 616e 6365 732e 0d0a 2020 2020 2020  stances...      
-0002dfc0: 2020 2020 2020 5468 6973 2076 616c 7565        This value
-0002dfd0: 2069 7320 616c 7761 7973 2061 7420 6c65   is always at le
-0002dfe0: 6173 7420 6173 206c 6172 6765 2061 7320  ast as large as 
-0002dff0: 6074 6f74 616c 5f70 6879 7369 6361 6c5f  `total_physical_
-0002e000: 7369 7a65 602e 0d0a 2020 2020 2020 2020  size`...        
-0002e010: 2222 220d 0a0d 0a20 2020 2020 2020 2069  """....        i
-0002e020: 6d70 6f72 7420 6e75 6d62 6572 730d 0a20  mport numbers.. 
-0002e030: 2020 2020 2020 2066 726f 6d20 636f 6c6c         from coll
-0002e040: 6563 7469 6f6e 732e 6162 6320 696d 706f  ections.abc impo
-0002e050: 7274 2048 6173 6861 626c 650d 0a0d 0a20  rt Hashable.... 
-0002e060: 2020 2020 2020 2063 6c61 7373 2049 6457         class IdW
-0002e070: 7261 7070 6572 2848 6173 6861 626c 6529  rapper(Hashable)
-0002e080: 3a0d 0a20 2020 2020 2020 2020 2020 2022  :..            "
-0002e090: 2222 0d0a 2020 2020 2020 2020 2020 2020  ""..            
-0002e0a0: 5772 6170 7065 7220 7479 7065 2061 726f  Wrapper type aro
-0002e0b0: 756e 6420 616e 206f 626a 6563 7420 696e  und an object in
-0002e0c0: 7374 616e 6365 2077 6869 6368 2075 7365  stance which use
-0002e0d0: 7320 7068 7973 6963 616c 2065 7175 616c  s physical equal
-0002e0e0: 6974 7920 746f 2063 6865 636b 2077 6865  ity to check whe
-0002e0f0: 7468 6572 0d0a 2020 2020 2020 2020 2020  ther..          
-0002e100: 2020 616e 206f 626a 6563 7420 6973 2074    an object is t
-0002e110: 6865 205f 7361 6d65 5f20 286e 6f74 2065  he _same_ (not e
-0002e120: 7175 6976 616c 656e 742c 2062 7574 2074  quivalent, but t
-0002e130: 6865 2073 616d 6529 2069 6e73 7461 6e63  he same) instanc
-0002e140: 6520 6173 2061 6e6f 7468 6572 2e0d 0a20  e as another... 
-0002e150: 2020 2020 2020 2020 2020 2055 7365 6420             Used 
-0002e160: 666f 7220 6465 7465 6374 696e 6720 6475  for detecting du
-0002e170: 706c 6963 6174 652f 616c 6961 7365 6420  plicate/aliased 
-0002e180: 6f62 6a65 6374 732e 0d0a 2020 2020 2020  objects...      
-0002e190: 2020 2020 2020 2222 220d 0a0d 0a20 2020        """....   
-0002e1a0: 2020 2020 2020 2020 205f 5f73 6c6f 7473           __slots
-0002e1b0: 5f5f 203d 205b 226f 626a 225d 0d0a 0d0a  __ = ["obj"]....
-0002e1c0: 2020 2020 2020 2020 2020 2020 6465 6620              def 
-0002e1d0: 5f5f 696e 6974 5f5f 2873 656c 662c 206f  __init__(self, o
-0002e1e0: 626a 293a 0d0a 2020 2020 2020 2020 2020  bj):..          
-0002e1f0: 2020 2020 2020 7365 6c66 2e6f 626a 203d        self.obj =
-0002e200: 206f 626a 0d0a 0d0a 2020 2020 2020 2020   obj....        
-0002e210: 2020 2020 6465 6620 5f5f 6861 7368 5f5f      def __hash__
-0002e220: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-0002e230: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0002e240: 6964 2873 656c 662e 6f62 6a29 0d0a 0d0a  id(self.obj)....
-0002e250: 2020 2020 2020 2020 2020 2020 6465 6620              def 
-0002e260: 5f5f 6571 5f5f 2873 656c 662c 206f 7468  __eq__(self, oth
-0002e270: 6572 293a 0d0a 2020 2020 2020 2020 2020  er):..          
-0002e280: 2020 2020 2020 7265 7475 726e 2069 7369        return isi
-0002e290: 6e73 7461 6e63 6528 6f74 6865 722c 2049  nstance(other, I
-0002e2a0: 6457 7261 7070 6572 2920 616e 6420 6964  dWrapper) and id
-0002e2b0: 2873 656c 662e 6f62 6a29 203d 3d20 6964  (self.obj) == id
-0002e2c0: 286f 7468 6572 2e6f 626a 290d 0a0d 0a20  (other.obj).... 
-0002e2d0: 2020 2020 2020 2023 2041 206c 6973 7420         # A list 
-0002e2e0: 6f66 206f 626a 6563 7473 2077 6869 6368  of objects which
-0002e2f0: 2073 7469 6c6c 206e 6565 6420 746f 2062   still need to b
-0002e300: 6520 7072 6f63 6573 7365 642e 0d0a 2020  e processed...  
-0002e310: 2020 2020 2020 2320 5468 6520 616c 676f        # The algo
-0002e320: 7269 7468 6d20 6265 6c6f 7720 646f 6573  rithm below does
-0002e330: 6e27 7420 6361 7265 206d 7563 6820 6162  n't care much ab
-0002e340: 6f75 7420 7472 6176 6572 7361 6c20 6f72  out traversal or
-0002e350: 6465 722c 2061 6e64 2075 7369 6e67 2074  der, and using t
-0002e360: 6869 7320 6c69 7374 2074 6f0d 0a20 2020  his list to..   
-0002e370: 2020 2020 2023 2068 616e 646c 6520 6e65       # handle ne
-0002e380: 7374 6564 206f 626a 6563 7473 2028 652e  sted objects (e.
-0002e390: 672e 2053 7472 7563 742c 206c 6973 742c  g. Struct, list,
-0002e3a0: 2064 6963 7429 2061 766f 6964 7320 7468   dict) avoids th
-0002e3b0: 6520 6e65 6564 2066 6f72 2061 2072 6563  e need for a rec
-0002e3c0: 7572 7369 7665 2073 6f6c 7574 696f 6e20  ursive solution 
-0002e3d0: 7468 6174 2764 2065 6e66 6f72 6365 2061  that'd enforce a
-0002e3e0: 2073 7472 6963 7420 4446 5320 7472 6176   strict DFS trav
-0002e3f0: 6572 7361 6c20 6f72 6465 722e 0d0a 2020  ersal order...  
-0002e400: 2020 2020 2020 7065 6e64 696e 675f 6f62        pending_ob
-0002e410: 6a65 6374 7320 3d20 5b73 656c 665d 0d0a  jects = [self]..
-0002e420: 0d0a 2020 2020 2020 2020 2320 4120 7365  ..        # A se
-0002e430: 7420 6f66 206f 626a 6563 7473 2077 6527  t of objects we'
-0002e440: 7665 2073 6565 6e20 7768 696c 6520 7472  ve seen while tr
-0002e450: 6176 6572 7369 6e67 2074 6865 2053 7472  aversing the Str
-0002e460: 7563 7427 7320 636f 6e74 656e 7473 2e0d  uct's contents..
-0002e470: 0a20 2020 2020 2020 2023 204f 6e6c 7920  .        # Only 
-0002e480: 2263 6f6d 706c 6578 2220 6f62 6a65 6374  "complex" object
-0002e490: 7320 6172 6520 696e 636c 7564 6564 2068  s are included h
-0002e4a0: 6572 6520 2d2d 206f 626a 6563 7473 206f  ere -- objects o
-0002e4b0: 6620 7363 616c 6172 2074 7970 6573 206c  f scalar types l
-0002e4c0: 696b 6520 696e 7465 6765 7220 616e 6420  ike integer and 
-0002e4d0: 666c 6f61 7420 7661 6c75 6573 2077 6f6e  float values won
-0002e4e0: 2774 2062 6520 696e 636c 7564 6564 0d0a  't be included..
-0002e4f0: 2020 2020 2020 2020 2320 6265 6361 7573          # becaus
-0002e500: 6520 7468 6572 6527 7320 6e6f 7468 696e  e there's nothin
-0002e510: 6720 6d65 616e 696e 6766 756c 2077 6520  g meaningful we 
-0002e520: 636f 756c 6420 646f 2074 6f20 6465 2d64  could do to de-d
-0002e530: 7570 6c69 6361 7465 2074 6865 6d2e 0d0a  uplicate them...
-0002e540: 2020 2020 2020 2020 7365 656e 5f6f 626a          seen_obj
-0002e550: 6563 7473 3a20 5365 745b 4964 5772 6170  ects: Set[IdWrap
-0002e560: 7065 725d 203d 2073 6574 2829 0d0a 0d0a  per] = set()....
-0002e570: 2020 2020 2020 2020 2320 5068 7973 6963          # Physic
-0002e580: 616c 2073 697a 653a 2074 6865 2061 6374  al size: the act
-0002e590: 7561 6c20 7369 7a65 2c20 696e 2062 7974  ual size, in byt
-0002e5a0: 6573 2c20 7468 6520 6461 7461 2069 7320  es, the data is 
-0002e5b0: 7461 6b69 6e67 2075 7020 696e 206d 656d  taking up in mem
-0002e5c0: 6f72 792e 0d0a 2020 2020 2020 2020 2320  ory...        # 
-0002e5d0: 692e 652e 2c20 6475 706c 6963 6174 652f  i.e., duplicate/
-0002e5e0: 616c 6961 7365 6420 6f62 6a65 6374 7320  aliased objects 
-0002e5f0: 6172 6520 6e6f 7420 696e 636c 7564 6564  are not included
-0002e600: 2069 6e20 7468 6973 2074 616c 6c79 2e0d   in this tally..
-0002e610: 0a20 2020 2020 2020 2074 6f74 616c 5f70  .        total_p
-0002e620: 6879 7369 6361 6c5f 7369 7a65 203d 2030  hysical_size = 0
-0002e630: 0d0a 0d0a 2020 2020 2020 2020 2320 4c6f  ....        # Lo
-0002e640: 6769 6361 6c20 7369 7a65 3a20 7468 6520  gical size: the 
-0002e650: 7369 7a65 2c20 696e 2062 7974 6573 2c20  size, in bytes, 
-0002e660: 7468 6520 6461 7461 2069 7320 226c 6f67  the data is "log
-0002e670: 6963 616c 6c79 2220 7461 6b69 6e67 2075  ically" taking u
-0002e680: 7020 696e 206d 656d 6f72 793b 0d0a 2020  p in memory;..  
-0002e690: 2020 2020 2020 2320 692e 652e 2074 6865        # i.e. the
-0002e6a0: 2073 697a 6520 7468 6174 2077 6f75 6c64   size that would
-0002e6b0: 2062 6520 6f63 6375 7069 6564 2062 7920   be occupied by 
-0002e6c0: 7468 6520 5374 7275 6374 2069 6e20 6d65  the Struct in me
-0002e6d0: 6d6f 7279 2069 6620 616e 7920 6475 706c  mory if any dupl
-0002e6e0: 6963 6174 6564 2f61 6c69 6173 6564 0d0a  icated/aliased..
-0002e6f0: 2020 2020 2020 2020 2320 6f62 6a65 6374          # object
-0002e700: 7320 7765 7265 2074 6f20 6265 2072 6570  s were to be rep
-0002e710: 6c61 6365 6420 6279 2061 2064 6565 702d  laced by a deep-
-0002e720: 636f 7079 2028 6174 2077 6869 6368 2070  copy (at which p
-0002e730: 6f69 6e74 2061 6c6c 206f 626a 6563 7473  oint all objects
-0002e740: 2077 6974 6869 6e20 7468 6520 7374 7275   within the stru
-0002e750: 6374 0d0a 2020 2020 2020 2020 2320 776f  ct..        # wo
-0002e760: 756c 6420 6265 2075 6e69 7175 6520 696e  uld be unique in
-0002e770: 7374 616e 6365 7329 2e0d 0a20 2020 2020  stances)...     
-0002e780: 2020 2074 6f74 616c 5f6c 6f67 6963 616c     total_logical
-0002e790: 5f73 697a 6520 3d20 300d 0a0d 0a20 2020  _size = 0....   
-0002e7a0: 2020 2020 2023 2049 7465 7261 7465 2075       # Iterate u
-0002e7b0: 6e74 696c 2077 6527 7665 2070 726f 6365  ntil we've proce
-0002e7c0: 7373 6564 2061 6c6c 2074 6865 2053 7472  ssed all the Str
-0002e7d0: 7563 7420 696e 7374 616e 6365 7320 2877  uct instances (w
-0002e7e0: 6869 6368 2069 6e63 6c75 6465 7320 616e  hich includes an
-0002e7f0: 7920 696e 7374 616e 6365 7320 6f66 2064  y instances of d
-0002e800: 6572 6976 6564 2063 6c61 7373 6573 290d  erived classes).
-0002e810: 0a20 2020 2020 2020 2077 6869 6c65 206c  .        while l
-0002e820: 656e 2870 656e 6469 6e67 5f6f 626a 6563  en(pending_objec
-0002e830: 7473 2920 3e20 303a 0d0a 2020 2020 2020  ts) > 0:..      
-0002e840: 2020 2020 2020 6375 7272 656e 745f 6f62        current_ob
-0002e850: 6a20 3d20 7065 6e64 696e 675f 6f62 6a65  j = pending_obje
-0002e860: 6374 732e 706f 7028 290d 0a20 2020 2020  cts.pop()..     
-0002e870: 2020 2020 2020 2066 6f72 206e 616d 652c         for name,
-0002e880: 206f 626a 2069 6e20 6375 7272 656e 745f   obj in current_
-0002e890: 6f62 6a2e 6974 656d 7328 293a 0d0a 2020  obj.items():..  
-0002e8a0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002e8b0: 206f 626a 2069 7320 4e6f 6e65 3a0d 0a20   obj is None:.. 
-0002e8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e8d0: 2020 2070 6173 730d 0a20 2020 2020 2020     pass..       
-0002e8e0: 2020 2020 2020 2020 2065 6c69 6620 6973           elif is
-0002e8f0: 696e 7374 616e 6365 286f 626a 2c20 5479  instance(obj, Ty
-0002e900: 7065 5265 6769 7374 6572 2e43 6174 6567  peRegister.Categ
-0002e910: 6f72 6963 616c 293a 0d0a 2020 2020 2020  orical):..      
-0002e920: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0002e930: 4361 7465 676f 7269 6361 6c20 6e65 6564  Categorical need
-0002e940: 7320 746f 2069 6e63 6c75 6465 2074 6865  s to include the
-0002e950: 2073 746f 7261 6765 2066 6f72 2063 6174   storage for cat
-0002e960: 6567 6f72 6965 732e 0d0a 2020 2020 2020  egories...      
-0002e970: 2020 2020 2020 2020 2020 2020 2020 7369                si
-0002e980: 7a65 203d 206f 626a 2e5f 746f 7461 6c5f  ze = obj._total_
-0002e990: 7369 7a65 0d0a 2020 2020 2020 2020 2020  size..          
-0002e9a0: 2020 2020 2020 2020 2020 746f 7461 6c5f            total_
-0002e9b0: 6c6f 6769 6361 6c5f 7369 7a65 202b 3d20  logical_size += 
-0002e9c0: 7369 7a65 0d0a 2020 2020 2020 2020 2020  size..          
-0002e9d0: 2020 2020 2020 2020 2020 7768 696c 6520            while 
-0002e9e0: 6f62 6a2e 6261 7365 2069 7320 6e6f 7420  obj.base is not 
-0002e9f0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-0002ea00: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-0002ea10: 626a 203d 206f 626a 2e62 6173 650d 0a20  bj = obj.base.. 
-0002ea20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ea30: 2020 2063 6f6c 5f69 6477 7261 7070 6572     col_idwrapper
-0002ea40: 203d 2049 6457 7261 7070 6572 286f 626a   = IdWrapper(obj
-0002ea50: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0002ea60: 2020 2020 2020 2069 6620 636f 6c5f 6964         if col_id
-0002ea70: 7772 6170 7065 7220 6e6f 7420 696e 2073  wrapper not in s
-0002ea80: 6565 6e5f 6f62 6a65 6374 733a 0d0a 2020  een_objects:..  
-0002ea90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002eaa0: 2020 2020 2020 7365 656e 5f6f 626a 6563        seen_objec
-0002eab0: 7473 2e61 6464 2863 6f6c 5f69 6477 7261  ts.add(col_idwra
-0002eac0: 7070 6572 290d 0a20 2020 2020 2020 2020  pper)..         
-0002ead0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0002eae0: 6f74 616c 5f70 6879 7369 6361 6c5f 7369  otal_physical_si
-0002eaf0: 7a65 202b 3d20 7369 7a65 0d0a 2020 2020  ze += size..    
-0002eb00: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-0002eb10: 2069 7369 6e73 7461 6e63 6528 6f62 6a2c   isinstance(obj,
-0002eb20: 2054 7970 6552 6567 6973 7465 722e 4661   TypeRegister.Fa
-0002eb30: 7374 4172 7261 7929 3a0d 0a20 2020 2020  stArray):..     
-0002eb40: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0002eb50: 2046 6f72 2046 6173 7441 7272 6179 2c20   For FastArray, 
-0002eb60: 7765 2063 616e 2068 6176 6520 6469 6666  we can have diff
-0002eb70: 6572 656e 7420 4661 7374 4172 7261 7920  erent FastArray 
-0002eb80: 696e 7374 616e 6365 7320 7768 6963 6820  instances which 
-0002eb90: 7772 6170 2074 6865 2073 616d 6520 756e  wrap the same un
-0002eba0: 6465 726c 7969 6e67 206d 656d 6f72 793b  derlying memory;
-0002ebb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002ebc0: 2020 2020 2020 2320 7369 6e63 6520 7468        # since th
-0002ebd0: 6174 2773 2072 6561 6c6c 7920 7768 6174  at's really what
-0002ebe0: 2077 6527 7265 2061 6674 6572 2068 6572   we're after her
-0002ebf0: 6520 2d2d 2074 6f20 7365 6520 7768 6572  e -- to see wher
-0002ec00: 6520 7765 2068 6176 6520 616c 6961 7365  e we have aliase
-0002ec10: 6420 6172 7261 7973 202d 2d20 7765 2063  d arrays -- we c
-0002ec20: 6865 636b 0d0a 2020 2020 2020 2020 2020  heck..          
-0002ec30: 2020 2020 2020 2020 2020 2320 7468 6174            # that
-0002ec40: 2075 6e64 6572 6c79 696e 6720 6172 7261   underlying arra
-0002ec50: 7920 6f62 6a65 6374 2066 6f72 2075 6e69  y object for uni
-0002ec60: 7175 656e 6573 7320 7261 7468 6572 2074  queness rather t
-0002ec70: 6861 6e20 7468 6520 4661 7374 4172 7261  han the FastArra
-0002ec80: 7920 6974 7365 6c66 2e0d 0a20 2020 2020  y itself...     
-0002ec90: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0002eca0: 7272 6179 5f64 6174 6120 3d20 6f62 6a2e  rray_data = obj.
-0002ecb0: 5f6e 700d 0a0d 0a20 2020 2020 2020 2020  _np....         
-0002ecc0: 2020 2020 2020 2020 2020 2023 2048 616e             # Han
-0002ecd0: 646c 6520 6172 7261 7920 7669 6577 7320  dle array views 
-0002ece0: 6279 2073 6561 7263 6869 6e67 2075 6e74  by searching unt
-0002ecf0: 696c 2077 6520 6669 6e64 2074 6865 2022  il we find the "
-0002ed00: 726f 6f74 2220 6261 7365 2061 7272 6179  root" base array
-0002ed10: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0002ed20: 2020 2020 2020 2023 2041 6e20 6e64 6172         # An ndar
-0002ed30: 7261 7920 6973 2061 2076 6965 7720 6966  ray is a view if
-0002ed40: 2069 7420 7265 7475 726e 7320 6120 6e6f   it returns a no
-0002ed50: 6e2d 4e6f 6e65 2069 6e73 7461 6e63 6520  n-None instance 
-0002ed60: 6672 6f6d 2069 7427 7320 2e62 6173 6520  from it's .base 
-0002ed70: 7072 6f70 6572 7479 2e0d 0a20 2020 2020  property...     
-0002ed80: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-0002ed90: 6869 6c65 2061 7272 6179 5f64 6174 612e  hile array_data.
-0002eda0: 6261 7365 2069 7320 6e6f 7420 4e6f 6e65  base is not None
-0002edb0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002edc0: 2020 2020 2020 2020 2020 2061 7272 6179             array
-0002edd0: 5f64 6174 6120 3d20 6172 7261 795f 6461  _data = array_da
-0002ede0: 7461 2e62 6173 650d 0a0d 0a20 2020 2020  ta.base....     
-0002edf0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0002ee00: 2043 7265 6174 6520 616e 2049 6457 7261   Create an IdWra
-0002ee10: 7070 6572 2061 726f 756e 6420 7468 6520  pper around the 
-0002ee20: 636f 6c75 6d6e 2064 6174 612e 0d0a 2020  column data...  
-0002ee30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ee40: 2020 636f 6c5f 6964 7772 6170 7065 7220    col_idwrapper 
-0002ee50: 3d20 4964 5772 6170 7065 7228 6172 7261  = IdWrapper(arra
-0002ee60: 795f 6461 7461 290d 0a0d 0a20 2020 2020  y_data)....     
-0002ee70: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0002ee80: 2041 6c77 6179 7320 6164 6420 7468 6973   Always add this
-0002ee90: 206f 626a 6563 7427 7320 7369 7a65 2074   object's size t
-0002eea0: 6f20 7468 6520 746f 7461 6c20 6c6f 6769  o the total logi
-0002eeb0: 6361 6c20 7369 7a65 206f 6620 7468 6520  cal size of the 
-0002eec0: 5374 7275 6374 2064 6174 610d 0a20 2020  Struct data..   
-0002eed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002eee0: 2023 2028 7769 7468 6f75 7420 7265 6761   # (without rega
-0002eef0: 7264 2074 6f20 7768 6574 6865 7220 7468  rd to whether th
-0002ef00: 6973 2069 7320 6120 6475 706c 6963 6174  is is a duplicat
-0002ef10: 652f 616c 6961 7365 6420 6f62 6a65 6374  e/aliased object
-0002ef20: 292e 0d0a 2020 2020 2020 2020 2020 2020  )...            
-0002ef30: 2020 2020 2020 2020 746f 7461 6c5f 6c6f          total_lo
-0002ef40: 6769 6361 6c5f 7369 7a65 202b 3d20 6172  gical_size += ar
-0002ef50: 7261 795f 6461 7461 2e6e 6279 7465 7320  ray_data.nbytes 
-0002ef60: 2023 2061 7373 756d 6573 2064 6174 6120   # assumes data 
-0002ef70: 6973 2061 6e20 6e70 2e6e 6461 7272 6179  is an np.ndarray
-0002ef80: 206f 7220 6120 7375 6263 6c61 7373 206f   or a subclass o
-0002ef90: 6620 6974 0d0a 0d0a 2020 2020 2020 2020  f it....        
-0002efa0: 2020 2020 2020 2020 2020 2020 2320 4966              # If
-0002efb0: 2074 6865 2064 6174 6120 6861 736e 2774   the data hasn't
-0002efc0: 2062 6565 6e20 7365 656e 2079 6574 2028   been seen yet (
-0002efd0: 692e 652e 2069 7427 7320 6e6f 7420 616e  i.e. it's not an
-0002efe0: 2061 6c69 6173 206f 6620 736f 6d65 206f   alias of some o
-0002eff0: 7468 6572 2064 6174 6120 7765 2776 6520  ther data we've 
-0002f000: 7365 656e 2062 6566 6f72 6529 0d0a 2020  seen before)..  
-0002f010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f020: 2020 2320 6164 6420 6974 2074 6f20 7468    # add it to th
-0002f030: 6520 2273 6565 6e20 6f62 6a65 6374 7322  e "seen objects"
-0002f040: 2073 6574 2061 6e64 2061 6464 2069 7427   set and add it'
-0002f050: 7320 7369 7a65 2074 6f20 7468 6520 746f  s size to the to
-0002f060: 7461 6c20 7068 7973 6963 616c 2073 697a  tal physical siz
-0002f070: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-0002f080: 2020 2020 2020 2020 6966 2063 6f6c 5f69          if col_i
-0002f090: 6477 7261 7070 6572 206e 6f74 2069 6e20  dwrapper not in 
-0002f0a0: 7365 656e 5f6f 626a 6563 7473 3a0d 0a20  seen_objects:.. 
-0002f0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f0c0: 2020 2020 2020 2073 6565 6e5f 6f62 6a65         seen_obje
-0002f0d0: 6374 732e 6164 6428 636f 6c5f 6964 7772  cts.add(col_idwr
-0002f0e0: 6170 7065 7229 0d0a 2020 2020 2020 2020  apper)..        
-0002f0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f100: 746f 7461 6c5f 7068 7973 6963 616c 5f73  total_physical_s
-0002f110: 697a 6520 2b3d 2061 7272 6179 5f64 6174  ize += array_dat
-0002f120: 612e 6e62 7974 6573 0d0a 0d0a 2020 2020  a.nbytes....    
-0002f130: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-0002f140: 2069 7369 6e73 7461 6e63 6528 6f62 6a2c   isinstance(obj,
-0002f150: 206e 702e 6e64 6172 7261 7929 3a0d 0a20   np.ndarray):.. 
-0002f160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f170: 2020 2023 2048 616e 646c 6520 6172 7261     # Handle arra
-0002f180: 7920 7669 6577 7320 6279 2073 6561 7263  y views by searc
-0002f190: 6869 6e67 2075 6e74 696c 2077 6520 6669  hing until we fi
-0002f1a0: 6e64 2074 6865 2022 726f 6f74 2220 6261  nd the "root" ba
-0002f1b0: 7365 2061 7272 6179 2e0d 0a20 2020 2020  se array...     
-0002f1c0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0002f1d0: 2041 6e20 6e64 6172 7261 7920 6973 2061   An ndarray is a
-0002f1e0: 2076 6965 7720 6966 2069 7420 7265 7475   view if it retu
-0002f1f0: 726e 7320 6120 6e6f 6e2d 4e6f 6e65 2069  rns a non-None i
-0002f200: 6e73 7461 6e63 6520 6672 6f6d 2069 7427  nstance from it'
-0002f210: 7320 2e62 6173 6520 7072 6f70 6572 7479  s .base property
-0002f220: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0002f230: 2020 2020 2020 2077 6869 6c65 206f 626a         while obj
-0002f240: 2e62 6173 6520 6973 206e 6f74 204e 6f6e  .base is not Non
-0002f250: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0002f260: 2020 2020 2020 2020 2020 2020 6f62 6a20              obj 
-0002f270: 3d20 6f62 6a2e 6261 7365 0d0a 0d0a 2020  = obj.base....  
-0002f280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f290: 2020 2320 4372 6561 7465 2061 6e20 4964    # Create an Id
-0002f2a0: 5772 6170 7065 7220 6172 6f75 6e64 2074  Wrapper around t
-0002f2b0: 6865 2063 6f6c 756d 6e20 6461 7461 2e0d  he column data..
-0002f2c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002f2d0: 2020 2020 2063 6f6c 5f69 6477 7261 7070       col_idwrapp
-0002f2e0: 6572 203d 2049 6457 7261 7070 6572 286f  er = IdWrapper(o
-0002f2f0: 626a 290d 0a0d 0a20 2020 2020 2020 2020  bj)....         
-0002f300: 2020 2020 2020 2020 2020 2023 2041 6c77             # Alw
-0002f310: 6179 7320 6164 6420 7468 6973 206f 626a  ays add this obj
-0002f320: 6563 7427 7320 7369 7a65 2074 6f20 7468  ect's size to th
-0002f330: 6520 746f 7461 6c20 6c6f 6769 6361 6c20  e total logical 
-0002f340: 7369 7a65 206f 6620 7468 6520 5374 7275  size of the Stru
-0002f350: 6374 2064 6174 610d 0a20 2020 2020 2020  ct data..       
-0002f360: 2020 2020 2020 2020 2020 2020 2023 2028               # (
-0002f370: 7769 7468 6f75 7420 7265 6761 7264 2074  without regard t
-0002f380: 6f20 7768 6574 6865 7220 7468 6973 2069  o whether this i
-0002f390: 7320 6120 6475 706c 6963 6174 652f 616c  s a duplicate/al
-0002f3a0: 6961 7365 6420 6f62 6a65 6374 292e 0d0a  iased object)...
-0002f3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f3c0: 2020 2020 746f 7461 6c5f 6c6f 6769 6361      total_logica
-0002f3d0: 6c5f 7369 7a65 202b 3d20 6f62 6a2e 6e62  l_size += obj.nb
-0002f3e0: 7974 6573 2020 2320 6173 7375 6d65 7320  ytes  # assumes 
-0002f3f0: 6461 7461 2069 7320 616e 206e 702e 6e64  data is an np.nd
-0002f400: 6172 7261 7920 6f72 2061 2073 7562 636c  array or a subcl
-0002f410: 6173 7320 6f66 2069 740d 0a0d 0a20 2020  ass of it....   
-0002f420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f430: 2023 2049 6620 7468 6520 6461 7461 2068   # If the data h
-0002f440: 6173 6e27 7420 6265 656e 2073 6565 6e20  asn't been seen 
-0002f450: 7965 7420 2869 2e65 2e20 6974 2773 206e  yet (i.e. it's n
-0002f460: 6f74 2061 6e20 616c 6961 7320 6f66 2073  ot an alias of s
-0002f470: 6f6d 6520 6f74 6865 7220 6461 7461 2077  ome other data w
-0002f480: 6527 7665 2073 6565 6e20 6265 666f 7265  e've seen before
-0002f490: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0002f4a0: 2020 2020 2020 2023 2061 6464 2069 7420         # add it 
-0002f4b0: 746f 2074 6865 2022 7365 656e 206f 626a  to the "seen obj
-0002f4c0: 6563 7473 2220 7365 7420 616e 6420 6164  ects" set and ad
-0002f4d0: 6420 6974 2773 2073 697a 6520 746f 2074  d it's size to t
-0002f4e0: 6865 2074 6f74 616c 2070 6879 7369 6361  he total physica
-0002f4f0: 6c20 7369 7a65 2e0d 0a20 2020 2020 2020  l size...       
-0002f500: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002f510: 636f 6c5f 6964 7772 6170 7065 7220 6e6f  col_idwrapper no
-0002f520: 7420 696e 2073 6565 6e5f 6f62 6a65 6374  t in seen_object
-0002f530: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-0002f540: 2020 2020 2020 2020 2020 2020 7365 656e              seen
-0002f550: 5f6f 626a 6563 7473 2e61 6464 2863 6f6c  _objects.add(col
-0002f560: 5f69 6477 7261 7070 6572 290d 0a20 2020  _idwrapper)..   
-0002f570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f580: 2020 2020 2074 6f74 616c 5f70 6879 7369       total_physi
-0002f590: 6361 6c5f 7369 7a65 202b 3d20 6f62 6a2e  cal_size += obj.
-0002f5a0: 6e62 7974 6573 0d0a 0d0a 2020 2020 2020  nbytes....      
-0002f5b0: 2020 2020 2020 2020 2020 2320 4966 2074            # If t
-0002f5c0: 6865 2063 7572 7265 6e74 2069 7465 6d20  he current item 
-0002f5d0: 6973 2061 2053 7472 7563 742c 2072 6563  is a Struct, rec
-0002f5e0: 7572 7365 2064 6f77 6e77 6172 6473 2e0d  urse downwards..
-0002f5f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002f600: 2023 2054 6869 7320 5f6d 7573 745f 2062   # This _must_ b
-0002f610: 6520 7468 6520 6c61 7374 2063 6173 6520  e the last case 
-0002f620: 6265 666f 7265 2074 6865 2066 616c 6c74  before the fallt
-0002f630: 6872 6f75 6768 2073 6f20 7468 6174 2061  hrough so that a
-0002f640: 6e79 2063 6c61 7373 6573 0d0a 2020 2020  ny classes..    
-0002f650: 2020 2020 2020 2020 2020 2020 2320 6465              # de
-0002f660: 7269 7665 6420 6672 6f6d 2053 7472 7563  rived from Struc
-0002f670: 7420 6172 6520 6861 6e64 6c65 6420 696e  t are handled in
-0002f680: 2073 6f6d 6520 6d6f 7265 2d73 7065 6369   some more-speci
-0002f690: 6669 6320 7761 7920 6265 666f 7265 2074  fic way before t
-0002f6a0: 616b 696e 670d 0a20 2020 2020 2020 2020  aking..         
-0002f6b0: 2020 2020 2020 2023 2074 6865 2067 656e         # the gen
-0002f6c0: 6572 616c 2063 6173 6520 666f 7220 5374  eral case for St
-0002f6d0: 7275 6374 2e0d 0a20 2020 2020 2020 2020  ruct...         
-0002f6e0: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
-0002f6f0: 7374 616e 6365 286f 626a 2c20 5374 7275  stance(obj, Stru
-0002f700: 6374 293a 0d0a 2020 2020 2020 2020 2020  ct):..          
-0002f710: 2020 2020 2020 2020 2020 2320 4372 6561            # Crea
-0002f720: 7465 2061 6e20 4964 5772 6170 7065 7220  te an IdWrapper 
-0002f730: 6172 6f75 6e64 2074 6865 2063 6f6c 756d  around the colum
-0002f740: 6e20 6461 7461 2e0d 0a20 2020 2020 2020  n data...       
-0002f750: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
-0002f760: 5f69 6477 7261 7070 6572 203d 2049 6457  _idwrapper = IdW
-0002f770: 7261 7070 6572 286f 626a 290d 0a0d 0a20  rapper(obj).... 
-0002f780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f790: 2020 2023 2049 6620 7468 6520 6461 7461     # If the data
-0002f7a0: 2068 6173 6e27 7420 6265 656e 2073 6565   hasn't been see
-0002f7b0: 6e20 7965 7420 2869 2e65 2e20 6974 2773  n yet (i.e. it's
-0002f7c0: 206e 6f74 2061 6e20 616c 6961 7320 6f66   not an alias of
-0002f7d0: 2073 6f6d 6520 6f74 6865 7220 6461 7461   some other data
-0002f7e0: 2077 6527 7665 2073 6565 6e20 6265 666f   we've seen befo
-0002f7f0: 7265 290d 0a20 2020 2020 2020 2020 2020  re)..           
-0002f800: 2020 2020 2020 2020 2023 2061 6464 2069           # add i
-0002f810: 7420 746f 2074 6865 2022 7365 656e 206f  t to the "seen o
-0002f820: 626a 6563 7473 2220 7365 7420 616e 6420  bjects" set and 
-0002f830: 6164 6420 746f 2074 6865 206c 6973 7420  add to the list 
-0002f840: 6f66 2070 656e 6469 6e67 2053 7472 7563  of pending Struc
-0002f850: 7420 696e 7374 616e 6365 7320 746f 2070  t instances to p
-0002f860: 726f 6365 7373 2e0d 0a20 2020 2020 2020  rocess...       
-0002f870: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002f880: 636f 6c5f 6964 7772 6170 7065 7220 6e6f  col_idwrapper no
-0002f890: 7420 696e 2073 6565 6e5f 6f62 6a65 6374  t in seen_object
-0002f8a0: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-0002f8b0: 2020 2020 2020 2020 2020 2020 7365 656e              seen
-0002f8c0: 5f6f 626a 6563 7473 2e61 6464 2863 6f6c  _objects.add(col
-0002f8d0: 5f69 6477 7261 7070 6572 290d 0a20 2020  _idwrapper)..   
-0002f8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f8f0: 2020 2020 2070 656e 6469 6e67 5f6f 626a       pending_obj
-0002f900: 6563 7473 2e61 7070 656e 6428 6f62 6a29  ects.append(obj)
-0002f910: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0002f920: 2020 2020 2320 4861 6e64 6c65 2073 6f6d      # Handle som
-0002f930: 6520 7363 616c 6172 2074 7970 6573 0d0a  e scalar types..
-0002f940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f950: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
-0002f960: 6f62 6a2c 206e 756d 6265 7273 2e49 6e74  obj, numbers.Int
-0002f970: 6567 7261 6c29 3a0d 0a20 2020 2020 2020  egral):..       
-0002f980: 2020 2020 2020 2020 2020 2020 2023 2054               # T
-0002f990: 4f44 4f3a 2044 6f20 7765 206e 6565 6420  ODO: Do we need 
-0002f9a0: 746f 2068 616e 646c 6520 696e 7465 6765  to handle intege
-0002f9b0: 7220 7369 7a65 7320 6f74 6865 7220 7468  r sizes other th
-0002f9c0: 616e 2033 322d 6269 7420 6865 7265 3f0d  an 32-bit here?.
-0002f9d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002f9e0: 2020 2020 2023 2020 2020 2020 2057 6520       #       We 
-0002f9f0: 6d61 7920 6e65 6564 2074 6f20 6966 2060  may need to if `
-0002fa00: 6f62 6a60 2069 7320 6120 6e75 6d70 7920  obj` is a numpy 
-0002fa10: 6172 7261 7920 7363 616c 6172 2e0d 0a20  array scalar... 
-0002fa20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002fa30: 2020 2074 6f74 616c 5f70 6879 7369 6361     total_physica
-0002fa40: 6c5f 7369 7a65 202b 3d20 340d 0a20 2020  l_size += 4..   
-0002fa50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002fa60: 2074 6f74 616c 5f6c 6f67 6963 616c 5f73   total_logical_s
-0002fa70: 697a 6520 2b3d 2034 0d0a 0d0a 2020 2020  ize += 4....    
-0002fa80: 2020 2020 2020 2020 2020 2020 2320 5072              # Pr
-0002fa90: 6f63 6573 7320 6c69 7374 2061 6e64 2073  ocess list and s
-0002faa0: 6574 7320 6279 206a 7573 7420 636f 6e63  ets by just conc
-0002fab0: 6174 656e 6174 696e 6720 7468 6569 7220  atenating their 
-0002fac0: 6974 656d 7320 746f 2074 6865 206c 6973  items to the lis
-0002fad0: 7420 6f66 2070 656e 6469 6e67 2069 7465  t of pending ite
-0002fae0: 6d73 2e0d 0a20 2020 2020 2020 2020 2020  ms...           
-0002faf0: 2020 2020 2023 2054 4f44 4f3a 204e 6565       # TODO: Nee
-0002fb00: 6420 746f 2069 6d70 6c65 6d65 6e74 2074  d to implement t
-0002fb10: 6869 7320 2d2d 2077 6527 6c6c 206e 6565  his -- we'll nee
-0002fb20: 6420 746f 2072 6573 7472 7563 7475 7265  d to restructure
-0002fb30: 206f 7572 2077 6f72 6b20 6c6f 6f70 2061   our work loop a
-0002fb40: 2062 6974 2074 6f20 6163 636f 6d6d 6f64   bit to accommod
-0002fb50: 6174 6520 7468 656d 2e0d 0a20 2020 2020  ate them...     
-0002fb60: 2020 2020 2020 2020 2020 2023 2065 6c69             # eli
-0002fb70: 6620 6973 696e 7374 616e 6365 286f 626a  f isinstance(obj
-0002fb80: 2c20 286c 6973 742c 2073 6574 2929 3a0d  , (list, set)):.
-0002fb90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002fba0: 2023 2020 2020 2070 656e 6469 6e67 5f6f   #     pending_o
-0002fbb0: 626a 6563 7473 2e65 7874 656e 6428 6f62  bjects.extend(ob
-0002fbc0: 6a29 0d0a 0d0a 2020 2020 2020 2020 2020  j)....          
-0002fbd0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-0002fbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002fbf0: 2023 204c 6f67 2074 6865 206f 626a 6563   # Log the objec
-0002fc00: 7420 7479 7065 2073 6f20 7765 206b 6e6f  t type so we kno
-0002fc10: 7720 7768 6174 2773 206e 6f74 2062 6569  w what's not bei
-0002fc20: 6e67 2068 616e 646c 6564 2e0d 0a20 2020  ng handled...   
-0002fc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002fc40: 206c 6f67 6765 722e 6465 6275 6728 6622   logger.debug(f"
-0002fc50: 7365 745f 6d65 6d6f 7279 5f73 7461 7473  set_memory_stats
-0002fc60: 3a20 556e 6861 6e64 6c65 6420 6f62 6a65  : Unhandled obje
-0002fc70: 6374 2027 7b6e 616d 657d 2720 6f66 2074  ct '{name}' of t
-0002fc80: 7970 6520 277b 7479 7065 286f 626a 297d  ype '{type(obj)}
-0002fc90: 272e 2229 0d0a 0d0a 2020 2020 2020 2020  '.")....        
-0002fca0: 7265 7475 726e 2028 746f 7461 6c5f 7068  return (total_ph
-0002fcb0: 7973 6963 616c 5f73 697a 652c 2074 6f74  ysical_size, tot
-0002fcc0: 616c 5f6c 6f67 6963 616c 5f73 697a 6529  al_logical_size)
-0002fcd0: 0d0a 0d0a 2020 2020 6465 6620 6b65 795f  ....    def key_
-0002fce0: 7365 6172 6368 2873 656c 662c 2072 6567  search(self, reg
-0002fcf0: 6578 2c20 6361 7365 5f73 656e 7369 7469  ex, case_sensiti
-0002fd00: 7665 3d46 616c 7365 2c20 7265 6375 7273  ve=False, recurs
-0002fd10: 6976 653d 5472 7565 2c20 7061 7468 3d22  ive=True, path="
-0002fd20: 2229 3a0d 0a20 2020 2020 2020 2069 6620  "):..        if 
-0002fd30: 6361 7365 5f73 656e 7369 7469 7665 3a0d  case_sensitive:.
-0002fd40: 0a20 2020 2020 2020 2020 2020 2070 6174  .            pat
-0002fd50: 7465 726e 203d 2072 652e 636f 6d70 696c  tern = re.compil
-0002fd60: 6528 7265 6765 7829 0d0a 2020 2020 2020  e(regex)..      
-0002fd70: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-0002fd80: 2020 2020 2070 6174 7465 726e 203d 2072       pattern = r
-0002fd90: 652e 636f 6d70 696c 6528 7265 6765 782c  e.compile(regex,
-0002fda0: 2072 652e 4947 4e4f 5245 4341 5345 290d   re.IGNORECASE).
-0002fdb0: 0a20 2020 2020 2020 206f 7574 7075 7420  .        output 
-0002fdc0: 3d20 5b70 6174 6820 2b20 7320 666f 7220  = [path + s for 
-0002fdd0: 7320 696e 2073 656c 662e 6b65 7973 2829  s in self.keys()
-0002fde0: 2069 6620 7061 7474 6572 6e2e 7365 6172   if pattern.sear
-0002fdf0: 6368 2873 295d 0d0a 2020 2020 2020 2020  ch(s)]..        
-0002fe00: 6966 2072 6563 7572 7369 7665 3a0d 0a20  if recursive:.. 
-0002fe10: 2020 2020 2020 2020 2020 2066 6f72 2073             for s
-0002fe20: 2069 6e20 7365 6c66 2e6b 6579 7328 293a   in self.keys():
-0002fe30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002fe40: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0002fe50: 7365 6c66 5b73 5d2c 2053 7472 7563 7429  self[s], Struct)
-0002fe60: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002fe70: 2020 2020 2020 206f 7574 7075 7420 3d20         output = 
-0002fe80: 6f75 7470 7574 202b 2073 656c 665b 735d  output + self[s]
-0002fe90: 2e6b 6579 5f73 6561 7263 6828 0d0a 2020  .key_search(..  
-0002fea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002feb0: 2020 2020 2020 7265 6765 782c 2063 6173        regex, cas
-0002fec0: 655f 7365 6e73 6974 6976 653d 6361 7365  e_sensitive=case
-0002fed0: 5f73 656e 7369 7469 7665 2c20 7265 6375  _sensitive, recu
-0002fee0: 7273 6976 653d 7265 6375 7273 6976 652c  rsive=recursive,
-0002fef0: 2070 6174 683d 7061 7468 202b 2073 202b   path=path + s +
-0002ff00: 2022 2e22 0d0a 2020 2020 2020 2020 2020   "."..          
-0002ff10: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-0002ff20: 2020 2020 2072 6574 7572 6e20 6f75 7470       return outp
-0002ff30: 7574 0d0a 0d0a 0d0a 2320 6b65 6570 2074  ut......# keep t
-0002ff40: 6869 7320 6173 2074 6865 206c 6173 7420  his as the last 
-0002ff50: 6c69 6e65 0d0a 5479 7065 5265 6769 7374  line..TypeRegist
-0002ff60: 6572 2e53 7472 7563 7420 3d20 5374 7275  er.Struct = Stru
-0002ff70: 6374 0d0a                                ct..
+0002dc30: 2d0d 0a20 2020 2023 2063 616e 6e6f 7420  -..    # cannot 
+0002dc40: 6265 2063 6c61 7373 206d 6574 686f 6420  be class method 
+0002dc50: 6865 7265 0d0a 2020 2020 4073 7461 7469  here..    @stati
+0002dc60: 636d 6574 686f 640d 0a20 2020 2064 6566  cmethod..    def
+0002dc70: 2073 6574 5f66 6173 745f 6172 7261 7928   set_fast_array(
+0002dc80: 7661 6c3a 2062 6f6f 6c29 3a0d 0a20 2020  val: bool):..   
+0002dc90: 2020 2020 2022 2222 5365 7420 746f 2074       """Set to t
+0002dca0: 7275 6520 746f 2066 6f72 6365 2074 6865  rue to force the
+0002dcb0: 2063 6173 7469 6e67 206f 6620 6e75 6d70   casting of nump
+0002dcc0: 7920 6172 7261 7973 2074 6f20 4661 7374  y arrays to Fast
+0002dcd0: 4172 7261 7920 7768 656e 0d0a 2020 2020  Array when..    
+0002dce0: 2020 2020 636f 6e73 7472 7563 7469 6e67      constructing
+0002dcf0: 2061 2053 7472 7563 7420 6f72 2061 6464   a Struct or add
+0002dd00: 696e 6720 6120 6e65 7720 636f 6c75 6d6e  ing a new column
+0002dd10: 2e0d 0a0d 0a20 2020 2020 2020 2050 6172  .....        Par
+0002dd20: 616d 6574 6572 730d 0a20 2020 2020 2020  ameters..       
+0002dd30: 202d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020   ----------..   
+0002dd40: 2020 2020 2076 616c 203a 2062 6f6f 6c0d       val : bool.
+0002dd50: 0a20 2020 2020 2020 2020 2020 2054 7275  .            Tru
+0002dd60: 6520 6f72 2046 616c 7365 0d0a 2020 2020  e or False..    
+0002dd70: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+0002dd80: 2053 7472 7563 742e 5573 6546 6173 7441   Struct.UseFastA
+0002dd90: 7272 6179 203d 2076 616c 0d0a 0d0a 2020  rray = val....  
+0002dda0: 2020 4070 726f 7065 7274 790d 0a20 2020    @property..   
+0002ddb0: 2064 6566 2074 6f74 616c 5f73 697a 6573   def total_sizes
+0002ddc0: 2873 656c 6629 202d 3e20 5475 706c 655b  (self) -> Tuple[
+0002ddd0: 696e 742c 2069 6e74 5d3a 0d0a 2020 2020  int, int]:..    
+0002dde0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+0002ddf0: 2054 6865 2074 6f74 616c 2070 6879 7369   The total physi
+0002de00: 6361 6c20 616e 6420 6c6f 6769 6361 6c20  cal and logical 
+0002de10: 7369 7a65 206f 6620 616c 6c20 2863 6f6c  size of all (col
+0002de20: 756d 6e61 7229 2064 6174 6120 696e 2062  umnar) data in b
+0002de30: 7974 6573 2077 6974 6869 6e20 7468 6973  ytes within this
+0002de40: 2053 7472 7563 742e 0d0a 0d0a 2020 2020   Struct.....    
+0002de50: 2020 2020 5265 7475 726e 730d 0a20 2020      Returns..   
+0002de60: 2020 2020 202d 2d2d 2d2d 2d2d 0d0a 2020       -------..  
+0002de70: 2020 2020 2020 746f 7461 6c5f 7068 7973        total_phys
+0002de80: 6963 616c 5f73 697a 6520 3a20 696e 740d  ical_size : int.
+0002de90: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
+0002dea0: 2074 6f74 616c 2073 697a 652c 2069 6e20   total size, in 
+0002deb0: 6279 7465 732c 206f 6620 616c 6c20 636f  bytes, of all co
+0002dec0: 6c75 6d6e 6172 2064 6174 6120 696e 2074  lumnar data in t
+0002ded0: 6869 7320 696e 7374 616e 6365 2c20 6e6f  his instance, no
+0002dee0: 7420 636f 756e 7469 6e67 2061 6e79 2064  t counting any d
+0002def0: 7570 6c69 6361 7465 2f61 6c69 6173 206f  uplicate/alias o
+0002df00: 626a 6563 7420 696e 7374 616e 6365 732e  bject instances.
+0002df10: 0d0a 2020 2020 2020 2020 746f 7461 6c5f  ..        total_
+0002df20: 6c6f 6769 6361 6c5f 7369 7a65 203a 2069  logical_size : i
+0002df30: 6e74 0d0a 2020 2020 2020 2020 2020 2020  nt..            
+0002df40: 5468 6520 746f 7461 6c20 7369 7a65 2c20  The total size, 
+0002df50: 696e 2062 7974 6573 2c20 6f66 2061 6c6c  in bytes, of all
+0002df60: 2063 6f6c 756d 6e61 7220 6461 7461 2069   columnar data i
+0002df70: 6e20 7468 6973 2069 6e73 7461 6e63 652c  n this instance,
+0002df80: 2069 6e63 6c75 6469 6e67 2064 7570 6c69   including dupli
+0002df90: 6361 7465 2f61 6c69 6173 206f 626a 6563  cate/alias objec
+0002dfa0: 7420 696e 7374 616e 6365 732e 0d0a 2020  t instances...  
+0002dfb0: 2020 2020 2020 2020 2020 5468 6973 2076            This v
+0002dfc0: 616c 7565 2069 7320 616c 7761 7973 2061  alue is always a
+0002dfd0: 7420 6c65 6173 7420 6173 206c 6172 6765  t least as large
+0002dfe0: 2061 7320 6074 6f74 616c 5f70 6879 7369   as `total_physi
+0002dff0: 6361 6c5f 7369 7a65 602e 0d0a 2020 2020  cal_size`...    
+0002e000: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
+0002e010: 2020 2069 6d70 6f72 7420 6e75 6d62 6572     import number
+0002e020: 730d 0a20 2020 2020 2020 2066 726f 6d20  s..        from 
+0002e030: 636f 6c6c 6563 7469 6f6e 732e 6162 6320  collections.abc 
+0002e040: 696d 706f 7274 2048 6173 6861 626c 650d  import Hashable.
+0002e050: 0a0d 0a20 2020 2020 2020 2063 6c61 7373  ...        class
+0002e060: 2049 6457 7261 7070 6572 2848 6173 6861   IdWrapper(Hasha
+0002e070: 626c 6529 3a0d 0a20 2020 2020 2020 2020  ble):..         
+0002e080: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+0002e090: 2020 2020 5772 6170 7065 7220 7479 7065      Wrapper type
+0002e0a0: 2061 726f 756e 6420 616e 206f 626a 6563   around an objec
+0002e0b0: 7420 696e 7374 616e 6365 2077 6869 6368  t instance which
+0002e0c0: 2075 7365 7320 7068 7973 6963 616c 2065   uses physical e
+0002e0d0: 7175 616c 6974 7920 746f 2063 6865 636b  quality to check
+0002e0e0: 2077 6865 7468 6572 0d0a 2020 2020 2020   whether..      
+0002e0f0: 2020 2020 2020 616e 206f 626a 6563 7420        an object 
+0002e100: 6973 2074 6865 205f 7361 6d65 5f20 286e  is the _same_ (n
+0002e110: 6f74 2065 7175 6976 616c 656e 742c 2062  ot equivalent, b
+0002e120: 7574 2074 6865 2073 616d 6529 2069 6e73  ut the same) ins
+0002e130: 7461 6e63 6520 6173 2061 6e6f 7468 6572  tance as another
+0002e140: 2e0d 0a20 2020 2020 2020 2020 2020 2055  ...            U
+0002e150: 7365 6420 666f 7220 6465 7465 6374 696e  sed for detectin
+0002e160: 6720 6475 706c 6963 6174 652f 616c 6961  g duplicate/alia
+0002e170: 7365 6420 6f62 6a65 6374 732e 0d0a 2020  sed objects...  
+0002e180: 2020 2020 2020 2020 2020 2222 220d 0a0d            """...
+0002e190: 0a20 2020 2020 2020 2020 2020 205f 5f73  .            __s
+0002e1a0: 6c6f 7473 5f5f 203d 205b 226f 626a 225d  lots__ = ["obj"]
+0002e1b0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0002e1c0: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+0002e1d0: 662c 206f 626a 293a 0d0a 2020 2020 2020  f, obj):..      
+0002e1e0: 2020 2020 2020 2020 2020 7365 6c66 2e6f            self.o
+0002e1f0: 626a 203d 206f 626a 0d0a 0d0a 2020 2020  bj = obj....    
+0002e200: 2020 2020 2020 2020 6465 6620 5f5f 6861          def __ha
+0002e210: 7368 5f5f 2873 656c 6629 3a0d 0a20 2020  sh__(self):..   
+0002e220: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0002e230: 7572 6e20 6964 2873 656c 662e 6f62 6a29  urn id(self.obj)
+0002e240: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0002e250: 6465 6620 5f5f 6571 5f5f 2873 656c 662c  def __eq__(self,
+0002e260: 206f 7468 6572 293a 0d0a 2020 2020 2020   other):..      
+0002e270: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0002e280: 2069 7369 6e73 7461 6e63 6528 6f74 6865   isinstance(othe
+0002e290: 722c 2049 6457 7261 7070 6572 2920 616e  r, IdWrapper) an
+0002e2a0: 6420 6964 2873 656c 662e 6f62 6a29 203d  d id(self.obj) =
+0002e2b0: 3d20 6964 286f 7468 6572 2e6f 626a 290d  = id(other.obj).
+0002e2c0: 0a0d 0a20 2020 2020 2020 2023 2041 206c  ...        # A l
+0002e2d0: 6973 7420 6f66 206f 626a 6563 7473 2077  ist of objects w
+0002e2e0: 6869 6368 2073 7469 6c6c 206e 6565 6420  hich still need 
+0002e2f0: 746f 2062 6520 7072 6f63 6573 7365 642e  to be processed.
+0002e300: 0d0a 2020 2020 2020 2020 2320 5468 6520  ..        # The 
+0002e310: 616c 676f 7269 7468 6d20 6265 6c6f 7720  algorithm below 
+0002e320: 646f 6573 6e27 7420 6361 7265 206d 7563  doesn't care muc
+0002e330: 6820 6162 6f75 7420 7472 6176 6572 7361  h about traversa
+0002e340: 6c20 6f72 6465 722c 2061 6e64 2075 7369  l order, and usi
+0002e350: 6e67 2074 6869 7320 6c69 7374 2074 6f0d  ng this list to.
+0002e360: 0a20 2020 2020 2020 2023 2068 616e 646c  .        # handl
+0002e370: 6520 6e65 7374 6564 206f 626a 6563 7473  e nested objects
+0002e380: 2028 652e 672e 2053 7472 7563 742c 206c   (e.g. Struct, l
+0002e390: 6973 742c 2064 6963 7429 2061 766f 6964  ist, dict) avoid
+0002e3a0: 7320 7468 6520 6e65 6564 2066 6f72 2061  s the need for a
+0002e3b0: 2072 6563 7572 7369 7665 2073 6f6c 7574   recursive solut
+0002e3c0: 696f 6e20 7468 6174 2764 2065 6e66 6f72  ion that'd enfor
+0002e3d0: 6365 2061 2073 7472 6963 7420 4446 5320  ce a strict DFS 
+0002e3e0: 7472 6176 6572 7361 6c20 6f72 6465 722e  traversal order.
+0002e3f0: 0d0a 2020 2020 2020 2020 7065 6e64 696e  ..        pendin
+0002e400: 675f 6f62 6a65 6374 7320 3d20 5b73 656c  g_objects = [sel
+0002e410: 665d 0d0a 0d0a 2020 2020 2020 2020 2320  f]....        # 
+0002e420: 4120 7365 7420 6f66 206f 626a 6563 7473  A set of objects
+0002e430: 2077 6527 7665 2073 6565 6e20 7768 696c   we've seen whil
+0002e440: 6520 7472 6176 6572 7369 6e67 2074 6865  e traversing the
+0002e450: 2053 7472 7563 7427 7320 636f 6e74 656e   Struct's conten
+0002e460: 7473 2e0d 0a20 2020 2020 2020 2023 204f  ts...        # O
+0002e470: 6e6c 7920 2263 6f6d 706c 6578 2220 6f62  nly "complex" ob
+0002e480: 6a65 6374 7320 6172 6520 696e 636c 7564  jects are includ
+0002e490: 6564 2068 6572 6520 2d2d 206f 626a 6563  ed here -- objec
+0002e4a0: 7473 206f 6620 7363 616c 6172 2074 7970  ts of scalar typ
+0002e4b0: 6573 206c 696b 6520 696e 7465 6765 7220  es like integer 
+0002e4c0: 616e 6420 666c 6f61 7420 7661 6c75 6573  and float values
+0002e4d0: 2077 6f6e 2774 2062 6520 696e 636c 7564   won't be includ
+0002e4e0: 6564 0d0a 2020 2020 2020 2020 2320 6265  ed..        # be
+0002e4f0: 6361 7573 6520 7468 6572 6527 7320 6e6f  cause there's no
+0002e500: 7468 696e 6720 6d65 616e 696e 6766 756c  thing meaningful
+0002e510: 2077 6520 636f 756c 6420 646f 2074 6f20   we could do to 
+0002e520: 6465 2d64 7570 6c69 6361 7465 2074 6865  de-duplicate the
+0002e530: 6d2e 0d0a 2020 2020 2020 2020 7365 656e  m...        seen
+0002e540: 5f6f 626a 6563 7473 3a20 5365 745b 4964  _objects: Set[Id
+0002e550: 5772 6170 7065 725d 203d 2073 6574 2829  Wrapper] = set()
+0002e560: 0d0a 0d0a 2020 2020 2020 2020 2320 5068  ....        # Ph
+0002e570: 7973 6963 616c 2073 697a 653a 2074 6865  ysical size: the
+0002e580: 2061 6374 7561 6c20 7369 7a65 2c20 696e   actual size, in
+0002e590: 2062 7974 6573 2c20 7468 6520 6461 7461   bytes, the data
+0002e5a0: 2069 7320 7461 6b69 6e67 2075 7020 696e   is taking up in
+0002e5b0: 206d 656d 6f72 792e 0d0a 2020 2020 2020   memory...      
+0002e5c0: 2020 2320 692e 652e 2c20 6475 706c 6963    # i.e., duplic
+0002e5d0: 6174 652f 616c 6961 7365 6420 6f62 6a65  ate/aliased obje
+0002e5e0: 6374 7320 6172 6520 6e6f 7420 696e 636c  cts are not incl
+0002e5f0: 7564 6564 2069 6e20 7468 6973 2074 616c  uded in this tal
+0002e600: 6c79 2e0d 0a20 2020 2020 2020 2074 6f74  ly...        tot
+0002e610: 616c 5f70 6879 7369 6361 6c5f 7369 7a65  al_physical_size
+0002e620: 203d 2030 0d0a 0d0a 2020 2020 2020 2020   = 0....        
+0002e630: 2320 4c6f 6769 6361 6c20 7369 7a65 3a20  # Logical size: 
+0002e640: 7468 6520 7369 7a65 2c20 696e 2062 7974  the size, in byt
+0002e650: 6573 2c20 7468 6520 6461 7461 2069 7320  es, the data is 
+0002e660: 226c 6f67 6963 616c 6c79 2220 7461 6b69  "logically" taki
+0002e670: 6e67 2075 7020 696e 206d 656d 6f72 793b  ng up in memory;
+0002e680: 0d0a 2020 2020 2020 2020 2320 692e 652e  ..        # i.e.
+0002e690: 2074 6865 2073 697a 6520 7468 6174 2077   the size that w
+0002e6a0: 6f75 6c64 2062 6520 6f63 6375 7069 6564  ould be occupied
+0002e6b0: 2062 7920 7468 6520 5374 7275 6374 2069   by the Struct i
+0002e6c0: 6e20 6d65 6d6f 7279 2069 6620 616e 7920  n memory if any 
+0002e6d0: 6475 706c 6963 6174 6564 2f61 6c69 6173  duplicated/alias
+0002e6e0: 6564 0d0a 2020 2020 2020 2020 2320 6f62  ed..        # ob
+0002e6f0: 6a65 6374 7320 7765 7265 2074 6f20 6265  jects were to be
+0002e700: 2072 6570 6c61 6365 6420 6279 2061 2064   replaced by a d
+0002e710: 6565 702d 636f 7079 2028 6174 2077 6869  eep-copy (at whi
+0002e720: 6368 2070 6f69 6e74 2061 6c6c 206f 626a  ch point all obj
+0002e730: 6563 7473 2077 6974 6869 6e20 7468 6520  ects within the 
+0002e740: 7374 7275 6374 0d0a 2020 2020 2020 2020  struct..        
+0002e750: 2320 776f 756c 6420 6265 2075 6e69 7175  # would be uniqu
+0002e760: 6520 696e 7374 616e 6365 7329 2e0d 0a20  e instances)... 
+0002e770: 2020 2020 2020 2074 6f74 616c 5f6c 6f67         total_log
+0002e780: 6963 616c 5f73 697a 6520 3d20 300d 0a0d  ical_size = 0...
+0002e790: 0a20 2020 2020 2020 2023 2049 7465 7261  .        # Itera
+0002e7a0: 7465 2075 6e74 696c 2077 6527 7665 2070  te until we've p
+0002e7b0: 726f 6365 7373 6564 2061 6c6c 2074 6865  rocessed all the
+0002e7c0: 2053 7472 7563 7420 696e 7374 616e 6365   Struct instance
+0002e7d0: 7320 2877 6869 6368 2069 6e63 6c75 6465  s (which include
+0002e7e0: 7320 616e 7920 696e 7374 616e 6365 7320  s any instances 
+0002e7f0: 6f66 2064 6572 6976 6564 2063 6c61 7373  of derived class
+0002e800: 6573 290d 0a20 2020 2020 2020 2077 6869  es)..        whi
+0002e810: 6c65 206c 656e 2870 656e 6469 6e67 5f6f  le len(pending_o
+0002e820: 626a 6563 7473 2920 3e20 303a 0d0a 2020  bjects) > 0:..  
+0002e830: 2020 2020 2020 2020 2020 6375 7272 656e            curren
+0002e840: 745f 6f62 6a20 3d20 7065 6e64 696e 675f  t_obj = pending_
+0002e850: 6f62 6a65 6374 732e 706f 7028 290d 0a20  objects.pop().. 
+0002e860: 2020 2020 2020 2020 2020 2066 6f72 206e             for n
+0002e870: 616d 652c 206f 626a 2069 6e20 6375 7272  ame, obj in curr
+0002e880: 656e 745f 6f62 6a2e 6974 656d 7328 293a  ent_obj.items():
+0002e890: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002e8a0: 2020 6966 206f 626a 2069 7320 4e6f 6e65    if obj is None
+0002e8b0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002e8c0: 2020 2020 2020 2070 6173 730d 0a20 2020         pass..   
+0002e8d0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+0002e8e0: 6620 6973 696e 7374 616e 6365 286f 626a  f isinstance(obj
+0002e8f0: 2c20 5479 7065 5265 6769 7374 6572 2e43  , TypeRegister.C
+0002e900: 6174 6567 6f72 6963 616c 293a 0d0a 2020  ategorical):..  
+0002e910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e920: 2020 2320 4361 7465 676f 7269 6361 6c20    # Categorical 
+0002e930: 6e65 6564 7320 746f 2069 6e63 6c75 6465  needs to include
+0002e940: 2074 6865 2073 746f 7261 6765 2066 6f72   the storage for
+0002e950: 2063 6174 6567 6f72 6965 732e 0d0a 2020   categories...  
+0002e960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e970: 2020 7369 7a65 203d 206f 626a 2e5f 746f    size = obj._to
+0002e980: 7461 6c5f 7369 7a65 0d0a 2020 2020 2020  tal_size..      
+0002e990: 2020 2020 2020 2020 2020 2020 2020 746f                to
+0002e9a0: 7461 6c5f 6c6f 6769 6361 6c5f 7369 7a65  tal_logical_size
+0002e9b0: 202b 3d20 7369 7a65 0d0a 2020 2020 2020   += size..      
+0002e9c0: 2020 2020 2020 2020 2020 2020 2020 7768                wh
+0002e9d0: 696c 6520 6f62 6a2e 6261 7365 2069 7320  ile obj.base is 
+0002e9e0: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+0002e9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ea00: 2020 206f 626a 203d 206f 626a 2e62 6173     obj = obj.bas
+0002ea10: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+0002ea20: 2020 2020 2020 2063 6f6c 5f69 6477 7261         col_idwra
+0002ea30: 7070 6572 203d 2049 6457 7261 7070 6572  pper = IdWrapper
+0002ea40: 286f 626a 290d 0a20 2020 2020 2020 2020  (obj)..         
+0002ea50: 2020 2020 2020 2020 2020 2069 6620 636f             if co
+0002ea60: 6c5f 6964 7772 6170 7065 7220 6e6f 7420  l_idwrapper not 
+0002ea70: 696e 2073 6565 6e5f 6f62 6a65 6374 733a  in seen_objects:
+0002ea80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002ea90: 2020 2020 2020 2020 2020 7365 656e 5f6f            seen_o
+0002eaa0: 626a 6563 7473 2e61 6464 2863 6f6c 5f69  bjects.add(col_i
+0002eab0: 6477 7261 7070 6572 290d 0a20 2020 2020  dwrapper)..     
+0002eac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ead0: 2020 2074 6f74 616c 5f70 6879 7369 6361     total_physica
+0002eae0: 6c5f 7369 7a65 202b 3d20 7369 7a65 0d0a  l_size += size..
+0002eaf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eb00: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
+0002eb10: 6f62 6a2c 2054 7970 6552 6567 6973 7465  obj, TypeRegiste
+0002eb20: 722e 4661 7374 4172 7261 7929 3a0d 0a20  r.FastArray):.. 
+0002eb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eb40: 2020 2023 2046 6f72 2046 6173 7441 7272     # For FastArr
+0002eb50: 6179 2c20 7765 2063 616e 2068 6176 6520  ay, we can have 
+0002eb60: 6469 6666 6572 656e 7420 4661 7374 4172  different FastAr
+0002eb70: 7261 7920 696e 7374 616e 6365 7320 7768  ray instances wh
+0002eb80: 6963 6820 7772 6170 2074 6865 2073 616d  ich wrap the sam
+0002eb90: 6520 756e 6465 726c 7969 6e67 206d 656d  e underlying mem
+0002eba0: 6f72 793b 0d0a 2020 2020 2020 2020 2020  ory;..          
+0002ebb0: 2020 2020 2020 2020 2020 2320 7369 6e63            # sinc
+0002ebc0: 6520 7468 6174 2773 2072 6561 6c6c 7920  e that's really 
+0002ebd0: 7768 6174 2077 6527 7265 2061 6674 6572  what we're after
+0002ebe0: 2068 6572 6520 2d2d 2074 6f20 7365 6520   here -- to see 
+0002ebf0: 7768 6572 6520 7765 2068 6176 6520 616c  where we have al
+0002ec00: 6961 7365 6420 6172 7261 7973 202d 2d20  iased arrays -- 
+0002ec10: 7765 2063 6865 636b 0d0a 2020 2020 2020  we check..      
+0002ec20: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002ec30: 7468 6174 2075 6e64 6572 6c79 696e 6720  that underlying 
+0002ec40: 6172 7261 7920 6f62 6a65 6374 2066 6f72  array object for
+0002ec50: 2075 6e69 7175 656e 6573 7320 7261 7468   uniqueness rath
+0002ec60: 6572 2074 6861 6e20 7468 6520 4661 7374  er than the Fast
+0002ec70: 4172 7261 7920 6974 7365 6c66 2e0d 0a20  Array itself... 
+0002ec80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ec90: 2020 2061 7272 6179 5f64 6174 6120 3d20     array_data = 
+0002eca0: 6f62 6a2e 5f6e 700d 0a0d 0a20 2020 2020  obj._np....     
+0002ecb0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0002ecc0: 2048 616e 646c 6520 6172 7261 7920 7669   Handle array vi
+0002ecd0: 6577 7320 6279 2073 6561 7263 6869 6e67  ews by searching
+0002ece0: 2075 6e74 696c 2077 6520 6669 6e64 2074   until we find t
+0002ecf0: 6865 2022 726f 6f74 2220 6261 7365 2061  he "root" base a
+0002ed00: 7272 6179 2e0d 0a20 2020 2020 2020 2020  rray...         
+0002ed10: 2020 2020 2020 2020 2020 2023 2041 6e20             # An 
+0002ed20: 6e64 6172 7261 7920 6973 2061 2076 6965  ndarray is a vie
+0002ed30: 7720 6966 2069 7420 7265 7475 726e 7320  w if it returns 
+0002ed40: 6120 6e6f 6e2d 4e6f 6e65 2069 6e73 7461  a non-None insta
+0002ed50: 6e63 6520 6672 6f6d 2069 7427 7320 2e62  nce from it's .b
+0002ed60: 6173 6520 7072 6f70 6572 7479 2e0d 0a20  ase property... 
+0002ed70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ed80: 2020 2077 6869 6c65 2061 7272 6179 5f64     while array_d
+0002ed90: 6174 612e 6261 7365 2069 7320 6e6f 7420  ata.base is not 
+0002eda0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+0002edb0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0002edc0: 7272 6179 5f64 6174 6120 3d20 6172 7261  rray_data = arra
+0002edd0: 795f 6461 7461 2e62 6173 650d 0a0d 0a20  y_data.base.... 
+0002ede0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002edf0: 2020 2023 2043 7265 6174 6520 616e 2049     # Create an I
+0002ee00: 6457 7261 7070 6572 2061 726f 756e 6420  dWrapper around 
+0002ee10: 7468 6520 636f 6c75 6d6e 2064 6174 612e  the column data.
+0002ee20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002ee30: 2020 2020 2020 636f 6c5f 6964 7772 6170        col_idwrap
+0002ee40: 7065 7220 3d20 4964 5772 6170 7065 7228  per = IdWrapper(
+0002ee50: 6172 7261 795f 6461 7461 290d 0a0d 0a20  array_data).... 
+0002ee60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ee70: 2020 2023 2041 6c77 6179 7320 6164 6420     # Always add 
+0002ee80: 7468 6973 206f 626a 6563 7427 7320 7369  this object's si
+0002ee90: 7a65 2074 6f20 7468 6520 746f 7461 6c20  ze to the total 
+0002eea0: 6c6f 6769 6361 6c20 7369 7a65 206f 6620  logical size of 
+0002eeb0: 7468 6520 5374 7275 6374 2064 6174 610d  the Struct data.
+0002eec0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002eed0: 2020 2020 2023 2028 7769 7468 6f75 7420       # (without 
+0002eee0: 7265 6761 7264 2074 6f20 7768 6574 6865  regard to whethe
+0002eef0: 7220 7468 6973 2069 7320 6120 6475 706c  r this is a dupl
+0002ef00: 6963 6174 652f 616c 6961 7365 6420 6f62  icate/aliased ob
+0002ef10: 6a65 6374 292e 0d0a 2020 2020 2020 2020  ject)...        
+0002ef20: 2020 2020 2020 2020 2020 2020 746f 7461              tota
+0002ef30: 6c5f 6c6f 6769 6361 6c5f 7369 7a65 202b  l_logical_size +
+0002ef40: 3d20 6172 7261 795f 6461 7461 2e6e 6279  = array_data.nby
+0002ef50: 7465 7320 2023 2061 7373 756d 6573 2064  tes  # assumes d
+0002ef60: 6174 6120 6973 2061 6e20 6e70 2e6e 6461  ata is an np.nda
+0002ef70: 7272 6179 206f 7220 6120 7375 6263 6c61  rray or a subcla
+0002ef80: 7373 206f 6620 6974 0d0a 0d0a 2020 2020  ss of it....    
+0002ef90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002efa0: 2320 4966 2074 6865 2064 6174 6120 6861  # If the data ha
+0002efb0: 736e 2774 2062 6565 6e20 7365 656e 2079  sn't been seen y
+0002efc0: 6574 2028 692e 652e 2069 7427 7320 6e6f  et (i.e. it's no
+0002efd0: 7420 616e 2061 6c69 6173 206f 6620 736f  t an alias of so
+0002efe0: 6d65 206f 7468 6572 2064 6174 6120 7765  me other data we
+0002eff0: 2776 6520 7365 656e 2062 6566 6f72 6529  've seen before)
+0002f000: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002f010: 2020 2020 2020 2320 6164 6420 6974 2074        # add it t
+0002f020: 6f20 7468 6520 2273 6565 6e20 6f62 6a65  o the "seen obje
+0002f030: 6374 7322 2073 6574 2061 6e64 2061 6464  cts" set and add
+0002f040: 2069 7427 7320 7369 7a65 2074 6f20 7468   it's size to th
+0002f050: 6520 746f 7461 6c20 7068 7973 6963 616c  e total physical
+0002f060: 2073 697a 652e 0d0a 2020 2020 2020 2020   size...        
+0002f070: 2020 2020 2020 2020 2020 2020 6966 2063              if c
+0002f080: 6f6c 5f69 6477 7261 7070 6572 206e 6f74  ol_idwrapper not
+0002f090: 2069 6e20 7365 656e 5f6f 626a 6563 7473   in seen_objects
+0002f0a0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002f0b0: 2020 2020 2020 2020 2020 2073 6565 6e5f             seen_
+0002f0c0: 6f62 6a65 6374 732e 6164 6428 636f 6c5f  objects.add(col_
+0002f0d0: 6964 7772 6170 7065 7229 0d0a 2020 2020  idwrapper)..    
+0002f0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f0f0: 2020 2020 746f 7461 6c5f 7068 7973 6963      total_physic
+0002f100: 616c 5f73 697a 6520 2b3d 2061 7272 6179  al_size += array
+0002f110: 5f64 6174 612e 6e62 7974 6573 0d0a 0d0a  _data.nbytes....
+0002f120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f130: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
+0002f140: 6f62 6a2c 206e 702e 6e64 6172 7261 7929  obj, np.ndarray)
+0002f150: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002f160: 2020 2020 2020 2023 2048 616e 646c 6520         # Handle 
+0002f170: 6172 7261 7920 7669 6577 7320 6279 2073  array views by s
+0002f180: 6561 7263 6869 6e67 2075 6e74 696c 2077  earching until w
+0002f190: 6520 6669 6e64 2074 6865 2022 726f 6f74  e find the "root
+0002f1a0: 2220 6261 7365 2061 7272 6179 2e0d 0a20  " base array... 
+0002f1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f1c0: 2020 2023 2041 6e20 6e64 6172 7261 7920     # An ndarray 
+0002f1d0: 6973 2061 2076 6965 7720 6966 2069 7420  is a view if it 
+0002f1e0: 7265 7475 726e 7320 6120 6e6f 6e2d 4e6f  returns a non-No
+0002f1f0: 6e65 2069 6e73 7461 6e63 6520 6672 6f6d  ne instance from
+0002f200: 2069 7427 7320 2e62 6173 6520 7072 6f70   it's .base prop
+0002f210: 6572 7479 2e0d 0a20 2020 2020 2020 2020  erty...         
+0002f220: 2020 2020 2020 2020 2020 2077 6869 6c65             while
+0002f230: 206f 626a 2e62 6173 6520 6973 206e 6f74   obj.base is not
+0002f240: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0002f250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f260: 6f62 6a20 3d20 6f62 6a2e 6261 7365 0d0a  obj = obj.base..
+0002f270: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002f280: 2020 2020 2020 2320 4372 6561 7465 2061        # Create a
+0002f290: 6e20 4964 5772 6170 7065 7220 6172 6f75  n IdWrapper arou
+0002f2a0: 6e64 2074 6865 2063 6f6c 756d 6e20 6461  nd the column da
+0002f2b0: 7461 2e0d 0a20 2020 2020 2020 2020 2020  ta...           
+0002f2c0: 2020 2020 2020 2020 2063 6f6c 5f69 6477           col_idw
+0002f2d0: 7261 7070 6572 203d 2049 6457 7261 7070  rapper = IdWrapp
+0002f2e0: 6572 286f 626a 290d 0a0d 0a20 2020 2020  er(obj)....     
+0002f2f0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0002f300: 2041 6c77 6179 7320 6164 6420 7468 6973   Always add this
+0002f310: 206f 626a 6563 7427 7320 7369 7a65 2074   object's size t
+0002f320: 6f20 7468 6520 746f 7461 6c20 6c6f 6769  o the total logi
+0002f330: 6361 6c20 7369 7a65 206f 6620 7468 6520  cal size of the 
+0002f340: 5374 7275 6374 2064 6174 610d 0a20 2020  Struct data..   
+0002f350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f360: 2023 2028 7769 7468 6f75 7420 7265 6761   # (without rega
+0002f370: 7264 2074 6f20 7768 6574 6865 7220 7468  rd to whether th
+0002f380: 6973 2069 7320 6120 6475 706c 6963 6174  is is a duplicat
+0002f390: 652f 616c 6961 7365 6420 6f62 6a65 6374  e/aliased object
+0002f3a0: 292e 0d0a 2020 2020 2020 2020 2020 2020  )...            
+0002f3b0: 2020 2020 2020 2020 746f 7461 6c5f 6c6f          total_lo
+0002f3c0: 6769 6361 6c5f 7369 7a65 202b 3d20 6f62  gical_size += ob
+0002f3d0: 6a2e 6e62 7974 6573 2020 2320 6173 7375  j.nbytes  # assu
+0002f3e0: 6d65 7320 6461 7461 2069 7320 616e 206e  mes data is an n
+0002f3f0: 702e 6e64 6172 7261 7920 6f72 2061 2073  p.ndarray or a s
+0002f400: 7562 636c 6173 7320 6f66 2069 740d 0a0d  ubclass of it...
+0002f410: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002f420: 2020 2020 2023 2049 6620 7468 6520 6461       # If the da
+0002f430: 7461 2068 6173 6e27 7420 6265 656e 2073  ta hasn't been s
+0002f440: 6565 6e20 7965 7420 2869 2e65 2e20 6974  een yet (i.e. it
+0002f450: 2773 206e 6f74 2061 6e20 616c 6961 7320  's not an alias 
+0002f460: 6f66 2073 6f6d 6520 6f74 6865 7220 6461  of some other da
+0002f470: 7461 2077 6527 7665 2073 6565 6e20 6265  ta we've seen be
+0002f480: 666f 7265 290d 0a20 2020 2020 2020 2020  fore)..         
+0002f490: 2020 2020 2020 2020 2020 2023 2061 6464             # add
+0002f4a0: 2069 7420 746f 2074 6865 2022 7365 656e   it to the "seen
+0002f4b0: 206f 626a 6563 7473 2220 7365 7420 616e   objects" set an
+0002f4c0: 6420 6164 6420 6974 2773 2073 697a 6520  d add it's size 
+0002f4d0: 746f 2074 6865 2074 6f74 616c 2070 6879  to the total phy
+0002f4e0: 7369 6361 6c20 7369 7a65 2e0d 0a20 2020  sical size...   
+0002f4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f500: 2069 6620 636f 6c5f 6964 7772 6170 7065   if col_idwrappe
+0002f510: 7220 6e6f 7420 696e 2073 6565 6e5f 6f62  r not in seen_ob
+0002f520: 6a65 6374 733a 0d0a 2020 2020 2020 2020  jects:..        
+0002f530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f540: 7365 656e 5f6f 626a 6563 7473 2e61 6464  seen_objects.add
+0002f550: 2863 6f6c 5f69 6477 7261 7070 6572 290d  (col_idwrapper).
+0002f560: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002f570: 2020 2020 2020 2020 2074 6f74 616c 5f70           total_p
+0002f580: 6879 7369 6361 6c5f 7369 7a65 202b 3d20  hysical_size += 
+0002f590: 6f62 6a2e 6e62 7974 6573 0d0a 0d0a 2020  obj.nbytes....  
+0002f5a0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002f5b0: 4966 2074 6865 2063 7572 7265 6e74 2069  If the current i
+0002f5c0: 7465 6d20 6973 2061 2053 7472 7563 742c  tem is a Struct,
+0002f5d0: 2072 6563 7572 7365 2064 6f77 6e77 6172   recurse downwar
+0002f5e0: 6473 2e0d 0a20 2020 2020 2020 2020 2020  ds...           
+0002f5f0: 2020 2020 2023 2054 6869 7320 5f6d 7573       # This _mus
+0002f600: 745f 2062 6520 7468 6520 6c61 7374 2063  t_ be the last c
+0002f610: 6173 6520 6265 666f 7265 2074 6865 2066  ase before the f
+0002f620: 616c 6c74 6872 6f75 6768 2073 6f20 7468  allthrough so th
+0002f630: 6174 2061 6e79 2063 6c61 7373 6573 0d0a  at any classes..
+0002f640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f650: 2320 6465 7269 7665 6420 6672 6f6d 2053  # derived from S
+0002f660: 7472 7563 7420 6172 6520 6861 6e64 6c65  truct are handle
+0002f670: 6420 696e 2073 6f6d 6520 6d6f 7265 2d73  d in some more-s
+0002f680: 7065 6369 6669 6320 7761 7920 6265 666f  pecific way befo
+0002f690: 7265 2074 616b 696e 670d 0a20 2020 2020  re taking..     
+0002f6a0: 2020 2020 2020 2020 2020 2023 2074 6865             # the
+0002f6b0: 2067 656e 6572 616c 2063 6173 6520 666f   general case fo
+0002f6c0: 7220 5374 7275 6374 2e0d 0a20 2020 2020  r Struct...     
+0002f6d0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0002f6e0: 6973 696e 7374 616e 6365 286f 626a 2c20  isinstance(obj, 
+0002f6f0: 5374 7275 6374 293a 0d0a 2020 2020 2020  Struct):..      
+0002f700: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002f710: 4372 6561 7465 2061 6e20 4964 5772 6170  Create an IdWrap
+0002f720: 7065 7220 6172 6f75 6e64 2074 6865 2063  per around the c
+0002f730: 6f6c 756d 6e20 6461 7461 2e0d 0a20 2020  olumn data...   
+0002f740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f750: 2063 6f6c 5f69 6477 7261 7070 6572 203d   col_idwrapper =
+0002f760: 2049 6457 7261 7070 6572 286f 626a 290d   IdWrapper(obj).
+0002f770: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0002f780: 2020 2020 2020 2023 2049 6620 7468 6520         # If the 
+0002f790: 6461 7461 2068 6173 6e27 7420 6265 656e  data hasn't been
+0002f7a0: 2073 6565 6e20 7965 7420 2869 2e65 2e20   seen yet (i.e. 
+0002f7b0: 6974 2773 206e 6f74 2061 6e20 616c 6961  it's not an alia
+0002f7c0: 7320 6f66 2073 6f6d 6520 6f74 6865 7220  s of some other 
+0002f7d0: 6461 7461 2077 6527 7665 2073 6565 6e20  data we've seen 
+0002f7e0: 6265 666f 7265 290d 0a20 2020 2020 2020  before)..       
+0002f7f0: 2020 2020 2020 2020 2020 2020 2023 2061               # a
+0002f800: 6464 2069 7420 746f 2074 6865 2022 7365  dd it to the "se
+0002f810: 656e 206f 626a 6563 7473 2220 7365 7420  en objects" set 
+0002f820: 616e 6420 6164 6420 746f 2074 6865 206c  and add to the l
+0002f830: 6973 7420 6f66 2070 656e 6469 6e67 2053  ist of pending S
+0002f840: 7472 7563 7420 696e 7374 616e 6365 7320  truct instances 
+0002f850: 746f 2070 726f 6365 7373 2e0d 0a20 2020  to process...   
+0002f860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f870: 2069 6620 636f 6c5f 6964 7772 6170 7065   if col_idwrappe
+0002f880: 7220 6e6f 7420 696e 2073 6565 6e5f 6f62  r not in seen_ob
+0002f890: 6a65 6374 733a 0d0a 2020 2020 2020 2020  jects:..        
+0002f8a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f8b0: 7365 656e 5f6f 626a 6563 7473 2e61 6464  seen_objects.add
+0002f8c0: 2863 6f6c 5f69 6477 7261 7070 6572 290d  (col_idwrapper).
+0002f8d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002f8e0: 2020 2020 2020 2020 2070 656e 6469 6e67           pending
+0002f8f0: 5f6f 626a 6563 7473 2e61 7070 656e 6428  _objects.append(
+0002f900: 6f62 6a29 0d0a 0d0a 2020 2020 2020 2020  obj)....        
+0002f910: 2020 2020 2020 2020 2320 4861 6e64 6c65          # Handle
+0002f920: 2073 6f6d 6520 7363 616c 6172 2074 7970   some scalar typ
+0002f930: 6573 0d0a 2020 2020 2020 2020 2020 2020  es..            
+0002f940: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+0002f950: 6e63 6528 6f62 6a2c 206e 756d 6265 7273  nce(obj, numbers
+0002f960: 2e49 6e74 6567 7261 6c29 3a0d 0a20 2020  .Integral):..   
+0002f970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f980: 2023 2054 4f44 4f3a 2044 6f20 7765 206e   # TODO: Do we n
+0002f990: 6565 6420 746f 2068 616e 646c 6520 696e  eed to handle in
+0002f9a0: 7465 6765 7220 7369 7a65 7320 6f74 6865  teger sizes othe
+0002f9b0: 7220 7468 616e 2033 322d 6269 7420 6865  r than 32-bit he
+0002f9c0: 7265 3f0d 0a20 2020 2020 2020 2020 2020  re?..           
+0002f9d0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+0002f9e0: 2057 6520 6d61 7920 6e65 6564 2074 6f20   We may need to 
+0002f9f0: 6966 2060 6f62 6a60 2069 7320 6120 6e75  if `obj` is a nu
+0002fa00: 6d70 7920 6172 7261 7920 7363 616c 6172  mpy array scalar
+0002fa10: 2e0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0002fa20: 2020 2020 2020 2074 6f74 616c 5f70 6879         total_phy
+0002fa30: 7369 6361 6c5f 7369 7a65 202b 3d20 340d  sical_size += 4.
+0002fa40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002fa50: 2020 2020 2074 6f74 616c 5f6c 6f67 6963       total_logic
+0002fa60: 616c 5f73 697a 6520 2b3d 2034 0d0a 0d0a  al_size += 4....
+0002fa70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fa80: 2320 5072 6f63 6573 7320 6c69 7374 2061  # Process list a
+0002fa90: 6e64 2073 6574 7320 6279 206a 7573 7420  nd sets by just 
+0002faa0: 636f 6e63 6174 656e 6174 696e 6720 7468  concatenating th
+0002fab0: 6569 7220 6974 656d 7320 746f 2074 6865  eir items to the
+0002fac0: 206c 6973 7420 6f66 2070 656e 6469 6e67   list of pending
+0002fad0: 2069 7465 6d73 2e0d 0a20 2020 2020 2020   items...       
+0002fae0: 2020 2020 2020 2020 2023 2054 4f44 4f3a           # TODO:
+0002faf0: 204e 6565 6420 746f 2069 6d70 6c65 6d65   Need to impleme
+0002fb00: 6e74 2074 6869 7320 2d2d 2077 6527 6c6c  nt this -- we'll
+0002fb10: 206e 6565 6420 746f 2072 6573 7472 7563   need to restruc
+0002fb20: 7475 7265 206f 7572 2077 6f72 6b20 6c6f  ture our work lo
+0002fb30: 6f70 2061 2062 6974 2074 6f20 6163 636f  op a bit to acco
+0002fb40: 6d6d 6f64 6174 6520 7468 656d 2e0d 0a20  mmodate them... 
+0002fb50: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0002fb60: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+0002fb70: 286f 626a 2c20 286c 6973 742c 2073 6574  (obj, (list, set
+0002fb80: 2929 3a0d 0a20 2020 2020 2020 2020 2020  )):..           
+0002fb90: 2020 2020 2023 2020 2020 2070 656e 6469       #     pendi
+0002fba0: 6e67 5f6f 626a 6563 7473 2e65 7874 656e  ng_objects.exten
+0002fbb0: 6428 6f62 6a29 0d0a 0d0a 2020 2020 2020  d(obj)....      
+0002fbc0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+0002fbd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002fbe0: 2020 2020 2023 204c 6f67 2074 6865 206f       # Log the o
+0002fbf0: 626a 6563 7420 7479 7065 2073 6f20 7765  bject type so we
+0002fc00: 206b 6e6f 7720 7768 6174 2773 206e 6f74   know what's not
+0002fc10: 2062 6569 6e67 2068 616e 646c 6564 2e0d   being handled..
+0002fc20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002fc30: 2020 2020 206c 6f67 6765 722e 6465 6275       logger.debu
+0002fc40: 6728 6622 7365 745f 6d65 6d6f 7279 5f73  g(f"set_memory_s
+0002fc50: 7461 7473 3a20 556e 6861 6e64 6c65 6420  tats: Unhandled 
+0002fc60: 6f62 6a65 6374 2027 7b6e 616d 657d 2720  object '{name}' 
+0002fc70: 6f66 2074 7970 6520 277b 7479 7065 286f  of type '{type(o
+0002fc80: 626a 297d 272e 2229 0d0a 0d0a 2020 2020  bj)}'.")....    
+0002fc90: 2020 2020 7265 7475 726e 2028 746f 7461      return (tota
+0002fca0: 6c5f 7068 7973 6963 616c 5f73 697a 652c  l_physical_size,
+0002fcb0: 2074 6f74 616c 5f6c 6f67 6963 616c 5f73   total_logical_s
+0002fcc0: 697a 6529 0d0a 0d0a 2020 2020 6465 6620  ize)....    def 
+0002fcd0: 6b65 795f 7365 6172 6368 2873 656c 662c  key_search(self,
+0002fce0: 2072 6567 6578 2c20 6361 7365 5f73 656e   regex, case_sen
+0002fcf0: 7369 7469 7665 3d46 616c 7365 2c20 7265  sitive=False, re
+0002fd00: 6375 7273 6976 653d 5472 7565 2c20 7061  cursive=True, pa
+0002fd10: 7468 3d22 2229 3a0d 0a20 2020 2020 2020  th=""):..       
+0002fd20: 2069 6620 6361 7365 5f73 656e 7369 7469   if case_sensiti
+0002fd30: 7665 3a0d 0a20 2020 2020 2020 2020 2020  ve:..           
+0002fd40: 2070 6174 7465 726e 203d 2072 652e 636f   pattern = re.co
+0002fd50: 6d70 696c 6528 7265 6765 7829 0d0a 2020  mpile(regex)..  
+0002fd60: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0002fd70: 2020 2020 2020 2020 2070 6174 7465 726e           pattern
+0002fd80: 203d 2072 652e 636f 6d70 696c 6528 7265   = re.compile(re
+0002fd90: 6765 782c 2072 652e 4947 4e4f 5245 4341  gex, re.IGNORECA
+0002fda0: 5345 290d 0a20 2020 2020 2020 206f 7574  SE)..        out
+0002fdb0: 7075 7420 3d20 5b70 6174 6820 2b20 7320  put = [path + s 
+0002fdc0: 666f 7220 7320 696e 2073 656c 662e 6b65  for s in self.ke
+0002fdd0: 7973 2829 2069 6620 7061 7474 6572 6e2e  ys() if pattern.
+0002fde0: 7365 6172 6368 2873 295d 0d0a 2020 2020  search(s)]..    
+0002fdf0: 2020 2020 6966 2072 6563 7572 7369 7665      if recursive
+0002fe00: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
+0002fe10: 6f72 2073 2069 6e20 7365 6c66 2e6b 6579  or s in self.key
+0002fe20: 7328 293a 0d0a 2020 2020 2020 2020 2020  s():..          
+0002fe30: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+0002fe40: 6e63 6528 7365 6c66 5b73 5d2c 2053 7472  nce(self[s], Str
+0002fe50: 7563 7429 3a0d 0a20 2020 2020 2020 2020  uct):..         
+0002fe60: 2020 2020 2020 2020 2020 206f 7574 7075             outpu
+0002fe70: 7420 3d20 6f75 7470 7574 202b 2073 656c  t = output + sel
+0002fe80: 665b 735d 2e6b 6579 5f73 6561 7263 6828  f[s].key_search(
+0002fe90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002fea0: 2020 2020 2020 2020 2020 7265 6765 782c            regex,
+0002feb0: 2063 6173 655f 7365 6e73 6974 6976 653d   case_sensitive=
+0002fec0: 6361 7365 5f73 656e 7369 7469 7665 2c20  case_sensitive, 
+0002fed0: 7265 6375 7273 6976 653d 7265 6375 7273  recursive=recurs
+0002fee0: 6976 652c 2070 6174 683d 7061 7468 202b  ive, path=path +
+0002fef0: 2073 202b 2022 2e22 0d0a 2020 2020 2020   s + "."..      
+0002ff00: 2020 2020 2020 2020 2020 2020 2020 290d                ).
+0002ff10: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0002ff20: 6f75 7470 7574 0d0a 0d0a 0d0a 2320 6b65  output......# ke
+0002ff30: 6570 2074 6869 7320 6173 2074 6865 206c  ep this as the l
+0002ff40: 6173 7420 6c69 6e65 0d0a 5479 7065 5265  ast line..TypeRe
+0002ff50: 6769 7374 6572 2e53 7472 7563 7420 3d20  gister.Struct = 
+0002ff60: 5374 7275 6374 0d0a                      Struct..
```

### Comparing `riptable-1.8.0/riptable/rt_timers.py` & `riptable-1.8.1/riptable/rt_timers.py`

 * *Files 0% similar despite different names*

```diff
@@ -338,15 +338,14 @@
     #        self.total_calls += nc
     #        self.prim_calls  += cc
     #        self.total_tt    += tt
 
     # call information
     # NOTE consider cython or C since this can be huge
     for entry in entries:
-
         code = entry.code
         if isinstance(code, str):
             func = ("~", 0, code)  # built-in functions ('~' sorts at the end)
         else:
             func = (code.co_filename, code.co_firstlineno, code.co_name)
 
         nc = entry.callcount  # ncalls column of pstats (before '/')s
```

### Comparing `riptable-1.8.0/riptable/rt_timezone.py` & `riptable-1.8.1/riptable/rt_timezone.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/rt_utils.py` & `riptable-1.8.1/riptable/rt_utils.py`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -36,14 +36,15 @@
 
     from .rt_dataset import Dataset
     from .rt_struct import Struct
 
 
 _T = TypeVar("_T")
 
+
 # -----------------------------------------------------------------------------------------
 def load_h5(
     filepath: Union[str, os.PathLike],
     name: str = "/",
     columns: Union[Sequence[str], "re.Pattern", Callable[..., Sequence[str]]] = "",
     format=None,
     fixblocks: bool = False,
@@ -420,15 +421,14 @@
         print("check_key keys", key1, key2)
 
     arrays1 = []
     arrays2 = []
 
     # convert to common dtype
     for arr1, arr2 in zip(key1, key2):
-
         # if either one is Categorical or both are, make sure they are aligned
         if isinstance(arr1, TypeRegister.Categorical) or isinstance(arr2, TypeRegister.Categorical):
             arr1, arr2 = TypeRegister.Categorical.align([arr1, arr2])
             # even if categoricals were aligned we might have int16 vs int32 (so fall thru to check)
 
         # possibly convert common numpy dtypes
         common_dtype = get_common_dtype(arr1, arr2)
```

### Comparing `riptable-1.8.0/riptable/test_tooling_integration/ipykernel_integration_test.py` & `riptable-1.8.1/riptable/test_tooling_integration/ipykernel_integration_test.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/test_tooling_integration/ipython_compatibility_test.py` & `riptable-1.8.1/riptable/test_tooling_integration/ipython_compatibility_test.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/test_tooling_integration/ipython_integration_test.py` & `riptable-1.8.1/riptable/test_tooling_integration/ipython_integration_test.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/test_tooling_integration/run.py` & `riptable-1.8.1/riptable/test_tooling_integration/run.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/test_tooling_integration/test_display/test_display.py` & `riptable-1.8.1/riptable/test_tooling_integration/test_display/test_display.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/test_tooling_integration/test_display/vnu_checker.py` & `riptable-1.8.1/riptable/test_tooling_integration/test_display/vnu_checker.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/testing/array_assert.py` & `riptable-1.8.1/riptable/testing/array_assert.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/testing/randgen.py` & `riptable-1.8.1/riptable/testing/randgen.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/generator_categorical_unit_test.py` & `riptable-1.8.1/riptable/tests/generator_categorical_unit_test.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,12 +1,11 @@
 from .groupby_categorical_unit_test_parameters import *
 
 
 def generate(n):
-
     PARAMETERS = categorical_parameters()
     epsilon = 0.00003
 
     def str_filename():
         return "test_sfw_categorical_autotest_aggregated_functions.py"
 
     # TODO use relative import for riptable
```

### Comparing `riptable-1.8.0/riptable/tests/generator_groupby_unit_test.py` & `riptable-1.8.1/riptable/tests/generator_groupby_unit_test.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,12 +1,11 @@
 from .groupby_unit_test_parameters import *
 
 
 def generate(numb_tests):
-
     PARAMETERS = groupby_parameters()
 
     def concat_list(lst):
         string = ""
         for s in lst:
             string += "_" + s
         return string
@@ -61,15 +60,14 @@
     def str_threads_off():
         return "\n\t\trt.FastArray._TOFF()"
 
     def str_threads_on():
         return "\n\t\trt.FastArray._TON()"
 
     def str_standard_test():
-
         s = "\n\tdef test_multikey_" + trait_str() + "(self):"
         s += "\n\t\taggs = " + str_agg_params()
         s += "\n\t\ttest_class = groupby_everything(" + str_params() + " )"
         s += "\n\t\tpd_out = pd.DataFrame(test_class.data).groupby(KEY_COLUMN_NAMES[:test_class.key_columns]).agg(test_class.aggregation_functions)"
         s += "\n\t\tsf_out = rt.Dataset(test_class.data).groupby(KEY_COLUMN_NAMES[:test_class.key_columns]).agg(test_class.aggregation_functions)"
 
         s += "\n\t\tfor func in aggs:"
```

### Comparing `riptable-1.8.0/riptable/tests/groupby_categorical_unit_test_parameters.py` & `riptable-1.8.1/riptable/tests/groupby_categorical_unit_test_parameters.py`

 * *Files 1% similar despite different names*

```diff
@@ -33,15 +33,14 @@
 
 
 def isNaN(num):
     return num != num
 
 
 def safe_assert(ary1, ary2):
-
     if len(ary1) != len(ary2):
         print("mismatch lengths-", len(ary1), len(ary2))
         assert len(ary1) == len(ary2)
     epsilon = 0.00000005  ##diference must be in range of this
 
     for a, b in zip(ary1, ary2):
         assert abs(a - b) < epsilon or (isNaN(a) and isNaN(b))
@@ -103,15 +102,14 @@
                 "vals": update_val_cols,
             }
             switch[parameter](self)
 
 
 class categorical_base:
     def __init__(self, val_cols, symbol_ratio, aggs):
-
         self.val_cols = val_cols
         self.symbol_ratio = symbol_ratio
         self.numb_keys = int(SIZE_DEFAULT * self.symbol_ratio)
         self.aggs = aggs
         self.generate_bin_data()
         self.data = self.generate_dummy_data()
```

### Comparing `riptable-1.8.0/riptable/tests/groupby_unit_test_parameters.py` & `riptable-1.8.1/riptable/tests/groupby_unit_test_parameters.py`

 * *Files 1% similar despite different names*

```diff
@@ -122,15 +122,14 @@
             ###---------------------------------------------
 
 
 ###---------------------------------------------------------------------------
 
 
 class groupby_everything:
-
     val_columns = VAL_COLUMNS_MIN
     key_columns = KEY_COLUMNS_MIN
     size = SIZE_DEFAULT
     symbol_ratio = SYMBOL_RATIO_MIN
 
     aggregation_functions_count = AGGREGATION_MIN
     symbol_ratio_count = int(
```

### Comparing `riptable-1.8.0/riptable/tests/run.py` & `riptable-1.8.1/riptable/tests/run.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/runall.py` & `riptable-1.8.1/riptable/tests/runall.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_accum2.py` & `riptable-1.8.1/riptable/tests/test_accum2.py`

 * *Files 0% similar despite different names*

```diff
@@ -523,15 +523,14 @@
 
 
 class AccumTable_Test(unittest.TestCase):
     @pytest.mark.skip(
         reason="Test needs to be re-written to remove the np.random.seed usage -- it's not stable across numpy versions."
     )
     def test_accum_table(self):
-
         # Create the test data
 
         def unpivot(frame):
             N, K = frame.shape
             data = {
                 "value": frame.values.ravel("F"),
                 "variable": np.asarray(frame.columns).repeat(N),
```

### Comparing `riptable-1.8.0/riptable/tests/test_accumtable.py` & `riptable-1.8.1/riptable/tests/test_accumtable.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,15 +1,14 @@
 import unittest
 
 import riptable as rt
 
 
 class AccumTable_Test(unittest.TestCase):
     def test_accum_cols(self):
-
         num_rows = 10
         data = rt.Dataset(
             {
                 "Symb": rt.Cat(["A", "B"] * int(num_rows / 2)),
                 "Count": rt.full(num_rows, 1.0),
                 "PlusMinus": [1.0, -1.0] * int(num_rows / 2),  # Added to handle edge case of zero footer
             }
@@ -17,15 +16,14 @@
 
         accum = rt.accum_cols(data.Symb, [data.Count, data.PlusMinus], ["Count", "PlusMinus"])
         accum_expected = rt.Dataset({"Symb": ["A", "B"], "Count": [5.0, 5.0], "PlusMinus": [5.0, -5.0]})
         accum_expected.footer_set_values("Total", {"Symb": "Total", "Count": 10.0, "PlusMinus": 0.0})
         self.assertTrue((accum == accum_expected).all(axis=None))
 
     def test_accum_cols_ratio(self):
-
         num_rows = 4
         data = rt.Dataset(
             {
                 "Symb": rt.Cat(["A", "B"] * int(num_rows / 2)),
                 "Count": rt.full(num_rows, num_rows * num_rows),
                 "PlusMinus": [2, -4] * int(num_rows / 2),  # Added to handle edge case of zero footer
             }
@@ -71,15 +69,14 @@
         accum_expected = rt.Dataset({"YLabel": [0, 1], "col0": [5.0, 5.0]})
         accum_expected.footer_set_values("Total", {"YLabel": "Total", "col0": 10.0})
 
         self.assertTrue((accum == accum_expected).all(axis=None))
 
     # Test basic accum_ratiop
     def test_accum_ratiop(self):
-
         num_rows = 12
         data = rt.Dataset(
             {
                 "Symb": rt.Cat(["A", "A", "A", "B"] * int(num_rows / 4)),
                 "Exch": rt.Cat(["Z", "Z", "X", "X"] * int(num_rows / 4)),
                 "Count": rt.full(num_rows, 1.0),
             }
```

### Comparing `riptable-1.8.0/riptable/tests/test_apply.py` & `riptable-1.8.1/riptable/tests/test_apply.py`

 * *Files 0% similar despite different names*

```diff
@@ -48,15 +48,14 @@
                 acol = f(ds_sorted[colname])
                 bcol = gb_result[i]
                 self.assertTrue(isinstance(bcol, np.ndarray))
                 for idx, item in enumerate(acol):
                     self.assertAlmostEqual(item, bcol[idx], msg=f"{item} {bcol[idx]} {f.__name__}")
 
     def test_docstring_examples(self):
-
         ds = Dataset({"A": "a a b".split(), "B": [1, 2, 3], "C": [4, 6, 5]})
         g = GroupBy(ds, "A")
 
         result = g.apply(lambda x: x.sum())
         self.assertTrue(isinstance(result, Dataset))
         self.assertEqual(result._ncols, 3)
         self.assertTrue(arr_eq(result.A, FA(["a", "b"])))
@@ -91,15 +90,14 @@
         self.assertEqual(result._ncols, 4)
         self.assertTrue(arr_eq(ds.A, result.A))
         self.assertTrue(arr_eq(ds.B, result.B))
         self.assertTrue(arr_eq(ds.C, result.C))
         self.assertTrue(arr_eq(result.Sub, FA([3, 4, 2])))
 
     def test_apply_catcol_filter(self):
-
         ds = Dataset({"keycol": FA(["a", "a", "b", "b", "a"]), "data": np.random.rand(5)})
         ds.keycol = Categorical(ds.keycol)
         f = FA([False, False, True, True, True])
 
         result_prefilter = ds.gb("keycol", filter=f).apply(sum)
         result_postfilter = ds.gb("keycol").apply(sum, filter=f)
         self.assertTrue(result_prefilter.equals(result_postfilter))
@@ -207,15 +205,14 @@
         aggfunc = lambda x: {"Mean": x.data.mean(), "Sum": x.data.sum()}
         app_result = c.apply(aggfunc, data)
 
         self.assertTrue(arr_eq(agg_result.Mean.data, app_result.Mean))
         self.assertTrue(arr_eq(agg_result.Sum.data, app_result.Sum))
 
     def test_apply_errors(self):
-
         st_arr = np.random.choice(["a", "b", "c"], 25)
         c = Categorical(st_arr)
 
         # no data
         with self.assertRaises(ValueError):
             _ = c.apply(sum)
 
@@ -235,15 +232,14 @@
         result = Cat(data.id).apply_nonreduce(func_nr, (data.val, data.id))
         self.assertTrue(arr_eq(result["val"], [0, 10, 21, 51]))
 
         result = Cat(data.id).apply_reduce(func_r, (data.val, data.id))
         self.assertTrue(arr_eq(result["val"], [10, 51]))
 
     def test_apply_ema(self):
-
         correct = FastArray(
             [
                 150.63090515,
                 -3.11271882,
                 0.0,
                 -43.95726776,
                 -36.96357727,
```

### Comparing `riptable-1.8.0/riptable/tests/test_base_function.py` & `riptable-1.8.1/riptable/tests/test_base_function.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_bitcount.py` & `riptable-1.8.1/riptable/tests/test_bitcount.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_categorical.py` & `riptable-1.8.1/riptable/tests/test_categorical.py`

 * *Files 0% similar despite different names*

```diff
@@ -483,14 +483,27 @@
 
     def test_getitem_enum(self):
         self._notimpl()
 
     def test_setitem_enum(self):
         self._notimpl()
 
+    def test_isin_set(self):
+        cat_list = ["a", "a", "b", "a", "c", "c", "b", "d", "d", "a", "b", "e", "d", "c"]
+        c = Cat(cat_list)
+        single_set_results = c.isin({b"a"})
+        single_list_results = c.isin([b"a"])
+        assert (single_set_results == rt.FA([val == "a" for val in cat_list])).all(), "Failed check 1, .isin(set())"
+        assert (single_set_results == single_list_results).all(), "Failed check 2, .isin(set())"
+
+        multi_set_results = c.isin({"a", "c"})
+        multi_list_results = c.isin(["a", "c"])
+
+        assert (multi_set_results == multi_list_results).all(), "Failed check 3, .isin(set())"
+
     # -------------------------------------------- MATLAB ----------------------------------
     def test_ctor_matlab(self):
         idx_list = [1.0, 2.0, 3.0, 4.0, 5.0]
         str_list = ["a", "b", "c", "d", "e"]
         with pytest.raises(TypeError):
             c = Categorical(idx_list, str_list)
```

### Comparing `riptable-1.8.0/riptable/tests/test_categorical_autotest_aggregated_functions.py` & `riptable-1.8.1/riptable/tests/test_categorical_autotest_aggregated_functions.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_categorical_base_index.py` & `riptable-1.8.1/riptable/tests/test_categorical_base_index.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_categorical_dtype.py` & `riptable-1.8.1/riptable/tests/test_categorical_dtype.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_categorical_filter_invalid.py` & `riptable-1.8.1/riptable/tests/test_categorical_filter_invalid.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_categorical_functions.py` & `riptable-1.8.1/riptable/tests/test_categorical_functions.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_categorical_groupby.py` & `riptable-1.8.1/riptable/tests/test_categorical_groupby.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_categorical_keywords.py` & `riptable-1.8.1/riptable/tests/test_categorical_keywords.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_categorical_modify.py` & `riptable-1.8.1/riptable/tests/test_categorical_modify.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_categorical_ordered.py` & `riptable-1.8.1/riptable/tests/test_categorical_ordered.py`

 * *Files 0% similar despite different names*

```diff
@@ -20,15 +20,14 @@
 
 def arr_equal(a, b):
     return bool(np.all(a == b))
 
 
 class TestCategoricalOrdered:
     def test_single_values(self):
-
         # -------------SINGLE STRINGS----------------------------
         c = Categorical(str_list)
         ds = c.sum(data)
         assert arr_equal(c.category_array, str_sorted)
         assert arr_equal(ds[GROUPBY_KEY_PREFIX + "_0"], str_sorted)
         assert arr_equal(ds.col_0, datasum_sorted)
 
@@ -187,15 +186,14 @@
         c = Categorical(flt_list, ordered=False, sort_gb=False)
         ds = c.sum(data)
         assert arr_equal(c.category_array, flt_unsorted)
         assert arr_equal(ds[GROUPBY_KEY_PREFIX + "_0"], flt_unsorted)
         assert arr_equal(ds.col_0, datasum_unsorted)
 
     def test_multikey(self):
-
         c = Categorical([FA(str_list), FA(int_list)])
         ds = c.sum(data)
         assert arr_equal(ds[GROUPBY_KEY_PREFIX + "_0"], str_unsorted)
         assert arr_equal(ds[GROUPBY_KEY_PREFIX + "_1"], int_unsorted)
         assert arr_equal(ds.col_0, datasum_unsorted)
 
         # 5/9/2019 - multikey will now hold uniques in sorted order if requested, behaves like single key
@@ -245,15 +243,14 @@
         c = Categorical([FA(str_list), FA(int_list)], ordered=False, sort_gb=False)
         ds = c.sum(data)
         assert arr_equal(ds[GROUPBY_KEY_PREFIX + "_0"], str_unsorted)
         assert arr_equal(ds[GROUPBY_KEY_PREFIX + "_1"], int_unsorted)
         assert arr_equal(ds.col_0, datasum_unsorted)
 
     def test_values_cats(self):
-
         c = Categorical(str_list, str_unsorted)
         assert arr_equal(c.category_array, str_unsorted)
         c = Categorical(str_list, str_unsorted, ordered=True)
         assert arr_equal(c.category_array, str_unsorted)
         c = Categorical(str_list, str_unsorted, ordered=False)
         assert arr_equal(c.category_array, str_unsorted)
```

### Comparing `riptable-1.8.0/riptable/tests/test_categorical_setitem.py` & `riptable-1.8.1/riptable/tests/test_categorical_setitem.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_categorical_sort_order.py` & `riptable-1.8.1/riptable/tests/test_categorical_sort_order.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_categorical_values.py` & `riptable-1.8.1/riptable/tests/test_categorical_values.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_conversion_utils.py` & `riptable-1.8.1/riptable/tests/test_conversion_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_csv.py` & `riptable-1.8.1/riptable/tests/test_csv.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_cut.py` & `riptable-1.8.1/riptable/tests/test_cut.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_dataset.py` & `riptable-1.8.1/riptable/tests/test_dataset.py`

 * *Files 0% similar despite different names*

```diff
@@ -30,15 +30,14 @@
 from riptable.rt_numpy import arange, isnan, logical, tile
 from riptable.rt_utils import describe
 
 from .test_utils import get_all_categorical_data
 
 
 def almost_eq(ds, arr, places=5, rtol=1e-5, atol=1e-5, equal_nan=True):
-
     epsilon = 10 ** (-places)
     rtol = epsilon
 
     if ds.shape != arr.shape:
         return False
     for _j, _col in enumerate(ds):
         _dsc = ds[_col]
@@ -387,15 +386,14 @@
         ds.G[1:3] = c
         ds.C[1:3] = g
         self.assertEqual(ds.G.tolist(), [-1.6, 6.2, 19.2])
         self.assertEqual(ds.C.tolist(), [2.4, 2.7, 4.6])
         # self.col_swap
 
     def test_add_remove_column(self):
-
         tempsave = Struct.AllowAnyName
         Struct.AllowAnyName = False
 
         ds = Dataset({"a": [0], "b": [1], "c": [2], "": [3]})
         ds.d = [4]
         self.assertEqual(list(ds.keys()), ["a", "b", "c", "", "d"])
         self.assertEqual(ds.d, [4])
@@ -498,35 +496,29 @@
         self.assertTrue((ds[rows, :].a == rows).all())
         sel = np.zeros(ds.shape[0], dtype=bool)
         sel[rows] = True
         srows = [1, 5, 6, 8]
         with self.assertRaises(IndexError):
             _ = ds[[]]
         with self.assertRaises(IndexError):
-            _ = ds[
-                5,
-            ]
+            _ = ds[5,]
         with self.assertRaises(TypeError):
             _ = ds[0.0, :]
         with self.assertRaises(IndexError):
             _ = ds[["1"], :]
         with self.assertRaises(IndexError):
             _ = ds["1", :]
         with self.assertRaises(TypeError):
             _ = ds[[complex(1)], :]
         with self.assertRaises(TypeError):
             _ = ds[complex(1), :]
         with self.assertRaises(IndexError):
-            _ = ds[
-                rows,
-            ]
+            _ = ds[rows,]
         with self.assertRaises(IndexError):
-            _ = ds[
-                sel,
-            ]
+            _ = ds[sel,]
         with self.assertRaises(IndexError):
             _ = ds[ds.get_nrows(), :]
         with self.assertRaises(TypeError):
             _ = ds[None, :]
         self.assertTrue((ds[sel, :].a == srows).all())
         self.assertTrue((ds[sel.tolist(), :].a == srows).all())
 
@@ -766,15 +758,14 @@
                 self.assertTrue((_v == np.hstack((dset1[_k], dset2[_k]))).all())
             elif _k in dset1:
                 self.assertTrue((_v[:nr1] == dset1[_k]).all())
             else:
                 self.assertTrue((_v[nr1:] == dset2[_k]).all())
 
     def test_copy_names(self):
-
         ds = Dataset({"col_" + str(i): arange(5) for i in range(5)})
         ds2 = ds[:2, :]
         for k, v in ds.items():
             cp = ds2[k]
             self.assertEqual(v.get_name(), cp.get_name())
 
     def test_concat_rows_with_categoricals(self):
@@ -1574,15 +1565,14 @@
             )
 
             return ds, zero_rows, nan_rows, mixed_rows
 
         N = 200
 
         for rows_first in [True, False]:
-
             ds, zero_rows, nan_rows, mixed_rows = create_and_add_filtered(N, rows_first)
             all_cols = ds.keys()
 
             for zeros, nans, columns, rows in itertools.product((False, True), repeat=4):
                 if not zeros and not nans:
                     with self.assertRaises(ValueError):
                         ds.trim(zeros=zeros, nans=nans, columns=columns, rows=rows)
@@ -1817,30 +1807,30 @@
         df["B"] = df["A"].astype("category")
         codes = [0, 1, 0, 2]
         df["C"] = pd.Categorical.from_codes(codes, list("qwe"))
         df["D"] = pd.Categorical.from_codes(codes, np.arange(3) ** 2)
         df["E"] = pd.Categorical.from_codes(codes, np.arange(0, 0.3, 0.1))
         df["F"] = pd.Categorical.from_codes(codes, np.arange(3, dtype="float32") ** 2)
         df["G"] = pd.Series(pd.date_range("20190101", periods=4))
-        for (key, tz) in [
+        for key, tz in [
             ("H", "UTC"),
             ("I", "GMT"),
             ("J", "US/Eastern"),
             ("K", "Europe/Dublin"),
         ]:
             df[key] = pd.Series(pd.date_range("20190101", periods=4, tz=tz))
 
         # Create a Dataset from the DataFrame and compare
         ds = Dataset.from_pandas(df)
         self.assertIsInstance(ds.B, TypeRegister.Categorical)
         self.assertIsInstance(ds.C, TypeRegister.Categorical)
         self.assertTrue((df.A == ds.A.astype(str)).all())
         for key in "BCDEF":
             self.assertTrue((df[key] == _bytes_to_string(ds[key].expand_array)).all())
-        for (key, tz) in [
+        for key, tz in [
             ("G", "UTC"),
             ("H", "UTC"),
             ("I", "GMT"),
             ("J", "NYC"),
             ("K", "DUBLIN"),
         ]:
             self.assertTrue((_datetime_to_int(df[key]) == ds[key].yyyymmdd).all())
```

### Comparing `riptable-1.8.0/riptable/tests/test_dataset_slicing.py` & `riptable-1.8.1/riptable/tests/test_dataset_slicing.py`

 * *Files 0% similar despite different names*

```diff
@@ -365,15 +365,14 @@
 }
 
 # change to True for printouts of slice input
 ShowSliceInfo = False
 
 
 class Dataset_Slice_Accuracy(unittest.TestCase):
-
     # ------------------GENERAL COMPARE FUNCTIONS-------------------------------
     # --------------------------------------------------------------------------
     def try_conversions(self, ds_item, dict_item):
         # nan != nan, and strings get converted from unicode to bytes
         # make sure these aren't the same values in a different form
         nans = False
         try:
```

### Comparing `riptable-1.8.0/riptable/tests/test_date.py` & `riptable-1.8.1/riptable/tests/test_date.py`

 * *Files 0% similar despite different names*

```diff
@@ -191,15 +191,14 @@
         self.assertTrue(isinstance(result, DateTimeNano))
 
         val = TimeSpan(1, unit="h")
         result = d + val
         self.assertTrue(isinstance(result, TimeSpan))
 
     def test_math_errors(self):
-
         d = Date(1)
         val = Date(1)
         with self.assertRaises(TypeError):
             result = d + val
         with self.assertRaises(TypeError):
             d += val
         with self.assertRaises(TypeError):
```

### Comparing `riptable-1.8.0/riptable/tests/test_datetime.py` & `riptable-1.8.1/riptable/tests/test_datetime.py`

 * *Files 0% similar despite different names*

```diff
@@ -482,15 +482,14 @@
 
         dtn = DateTimeNano([1541239200000000000, 1541325600000000000], from_tz="GMT", to_tz="NYC")
         correct = FastArray([6.0, 5.0])
         result = dtn.hour
         self.assertTrue(bool(np.all(correct == result)))
 
     def test_to_iso_dst_fall(self):
-
         # test a daylight savings day change
         # 3 hours were added to the underlying array, but only two hours changed because of time change
 
         # NYC
         correct1 = b"2018-11-03T23:59:00.000000000"
         dtn = DateTimeNano(["2018-11-03 23:59"], from_tz="NYC", to_tz="NYC")
         stamp1 = dtn.to_iso()[0]
@@ -2248,15 +2247,14 @@
 
     #    maxtime = dtn.max()
     #    self.assertTrue(isinstance(maxtime, DateTimeNano))
     #    self.assertEqual(len(maxtime),1)
     #    self.assertTrue(bool(np.all(maxtime==dtn[4])))
 
     def test_start_date(self):
-
         dtn = DateTimeNano(
             NANOS_PER_HOUR * arange(5),
             from_tz="NYC",
             to_tz="NYC",
             start_date="20190201",
         )
         self.assertTrue(bool(np.all(dtn.hour == arange(5))))
@@ -2295,15 +2293,14 @@
 
         # create future timestamps from start dates
         future = DateTimeNano(arange(50), start_date=today, from_tz="NYC", to_tz="NYC")
         future = Date(future)
         self.assertTrue(np.all(today == future))
 
     def test_copy(self):
-
         dtn = DateTimeNano.random(5)
         dtn2 = dtn.copy()
         self.assertTrue(isinstance(dtn2, DateTimeNano))
 
         d = Date(5)
         d2 = d.copy()
         self.assertTrue(isinstance(d2, Date))
```

### Comparing `riptable-1.8.0/riptable/tests/test_datetime_math.py` & `riptable-1.8.1/riptable/tests/test_datetime_math.py`

 * *Files 0% similar despite different names*

```diff
@@ -441,15 +441,14 @@
         arr = arr.astype(np.int64)
         result = ts + arr
         self.assertTrue(isinstance(result, TimeSpan))
         self.assertTrue(isnan(result._fa[4]))
         self.assertTrue(isnan(result._fa[0]))
 
     def test_dtn_compare_date(self):
-
         dtn = DateTimeNano(["20190227"], from_tz="NYC", to_tz="NYC").repeat(24)
         dtn = dtn + TimeSpan(arange(24), unit="h")
         self.assertTrue(bool(np.all(dtn.hour == arange(24))))
 
         LT = dtn < Date("20190228")
         self.assertTrue(bool(np.all(LT)))
```

### Comparing `riptable-1.8.0/riptable/tests/test_fastarray.py` & `riptable-1.8.1/riptable/tests/test_fastarray.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_fastarray_bn.py` & `riptable-1.8.1/riptable/tests/test_fastarray_bn.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_fastarray_constructor.py` & `riptable-1.8.1/riptable/tests/test_fastarray_constructor.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_fastarray_functions.py` & `riptable-1.8.1/riptable/tests/test_fastarray_functions.py`

 * *Files 0% similar despite different names*

```diff
@@ -413,25 +413,23 @@
             b = np.array(B_array, dtype=type_)
 
             x = rt.FastArray(np.array(A_array, dtype=type_))
             y = rt.FastArray(np.array(B_array, dtype=type_))
 
             for function_set in binary_functions:
                 for function in function_set:
-
                     # print('function - ', function)
                     if not np.issubdtype(a.dtype, np.integer) and function == "__truediv__":
                         np_out = getattr(a, function)(b)
                         sf_out = getattr(x, function)(y)
 
                         self.assert_equal(np_out, sf_out)
 
             for function_set in unary_functions:
                 for function in function_set:
-
                     ##these require 'resets' due to division
                     a = copy.copy(A_array)
                     b = copy.copy(B_array)
 
                     x = rt.FastArray(copy.copy(A_array))
                     y = rt.FastArray(copy.copy(B_array))
 
@@ -474,17 +472,15 @@
     #
     #     roll_a = a.rolling(window).std()
     #     roll_x = x.rolling_std(window)
     #     self.assert_equal(roll_a[window:], roll_x[window:])
 
     # TODO pytest parameterize type_list
     def test_reductions(self):
-
         for type_ in type_list:
-
             A_array = np.array(
                 np.random.randint(100, size=TEST_SIZE) + np.array(np.random.rand(TEST_SIZE)),
                 dtype=type_,
             )
             B_array = np.copy(A_array)
 
             a = A_array  ##copy.copy(A_array)
@@ -600,15 +596,14 @@
         self.test_reductions()
         rt.FastArray._TON()
         rt.FastArray._RON()
 
 
 def rolling_quantile_params_generator(dtypes, max_N, with_nans, with_infs):
     for dtype in dtypes:
-
         # N = 1 case
         N = 1
         window = 1
         for quantile in [0.81, 0.44, 0.321]:
             curr_frac_options = [(0, 0, 0)]
             if with_nans:
                 curr_frac_options += [(1, 0, 0)]
```

### Comparing `riptable-1.8.0/riptable/tests/test_files/groupby1_ex3.pickle` & `riptable-1.8.1/riptable/tests/test_files/groupby1_ex3.pickle`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_files/unicode_ex1.csv` & `riptable-1.8.1/riptable/tests/test_files/unicode_ex1.csv`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_files/unicode_ex2.csv` & `riptable-1.8.1/riptable/tests/test_files/unicode_ex2.csv`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_files/unicode_ex3.csv` & `riptable-1.8.1/riptable/tests/test_files/unicode_ex3.csv`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_flatten.py` & `riptable-1.8.1/riptable/tests/test_flatten.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_groupby.py` & `riptable-1.8.1/riptable/tests/test_groupby.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_groupby_autotest_aggregated_functions.py` & `riptable-1.8.1/riptable/tests/test_groupby_autotest_aggregated_functions.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_groupby_functions.py` & `riptable-1.8.1/riptable/tests/test_groupby_functions.py`

 * *Files 1% similar despite different names*

```diff
@@ -66,32 +66,29 @@
 
 
 class GroupbyFunctions_Test(unittest.TestCase):
     def groupby_func(self, df, fn):
         return getattr(df, functions_str[fn])
 
     def test_single_col_groupby_tests(self):
-
         Values = [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0]
         Keys = ["a", "b", "c", "a", "b", "c", "d", "e", "f"]
         for type_ in type_list:
-
             data = {"Vs": rt.FastArray(Values, dtype=type_), "Ks": Keys}
 
             pd_data = pd.DataFrame(data)
             sfw_data = rt.Dataset(data)
 
             key = "Ks"
             val = "Vs"
 
             pd_gb = pd_data.groupby(key)
             sfw_gb = sfw_data.groupby(key)
 
             for name in functions_str:
-
                 pd_func = getattr(pd_gb, name)
                 sfw_func = getattr(sfw_gb, name)
 
                 pd_kwargs = {}
                 sfw_kwargs = {}
 
                 if name in functions_kwargs:
@@ -120,15 +117,14 @@
     def test_multi_col_groupby_tests(self, numb_keys_and_values=5, numb_rows=20):
         col_val_names = ["alpha", "beta", "gamma", "sigma", "zeta"]
         col_key_names = ["lions", "tigers", "bears", "oh", "my"]
 
         MAX_LENGTH = min(len(col_val_names), len(col_key_names))
         assert numb_keys_and_values <= MAX_LENGTH
         for type_ in type_list:
-
             vals = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0]
             keys = "a b c d e f g".split(" ")
 
             vs = []
             ks = []
 
             for i in range(0, numb_keys_and_values):
```

### Comparing `riptable-1.8.0/riptable/tests/test_groupby_simple_multikey.py` & `riptable-1.8.1/riptable/tests/test_groupby_simple_multikey.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_groupbyops.py` & `riptable-1.8.1/riptable/tests/test_groupbyops.py`

 * *Files 0% similar despite different names*

```diff
@@ -230,19 +230,17 @@
 
         for colname, idx in d1.items():
             for d in (d2, d3, d4):
                 self.assertTrue(bool(np.all(d[colname] == idx)))
 
 
 def quantile_params_generator(dtypes, max_N, windowed, with_cats, with_nans, with_infs, seed, scrunity_level=1):
-
     rng = default_rng(seed)
 
     for dtype in dtypes:
-
         # N = 1 case
         N = 1
         N_cat = 1
         window = 1
         for quantile in [round(x, 4) for x in rng.random(3 * scrunity_level)]:
             curr_frac_options = [(0, 0, 0)]
             if with_nans:
@@ -1142,15 +1140,14 @@
         assert old_multi_cat_fill_f_second_call.keys() == new_multi_cat_fill_f_second_call.keys()
 
     @pytest.mark.parametrize(
         "N, N_cat, nan_fraction, types, limit, fill_val",
         fills_params_generator(),
     )
     def test_groupbyops_fills(self, N, N_cat, nan_fraction, types, limit, fill_val):
-
         this_seed = N * N_cat * int(nan_fraction * 1000) % 10_000
         rng = default_rng(this_seed)
 
         def err_msg(**kwargs):
             base = f"""
 seed = {this_seed}
 N = {N}
```

### Comparing `riptable-1.8.0/riptable/tests/test_grouping.py` & `riptable-1.8.1/riptable/tests/test_grouping.py`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -8,14 +8,15 @@
 from riptable import *
 from riptable.rt_enum import GROUPBY_KEY_PREFIX
 from riptable.rt_sds import SDSMakeDirsOn
 
 # change to true since we write into /tests directory
 SDSMakeDirsOn()
 
+
 # TODO: Replace these two functions with calls to assert_array_equal to get better diagnostics if the assertion fails.
 def arr_all(a):
     return bool(np.all(a))
 
 
 def arr_eq(a, b):
     return arr_all(a == b)
@@ -47,15 +48,14 @@
     def test_head(self):
         pytest.skip("This test is not yet implemented.")
 
     def test_tail(self):
         pytest.skip("This test is not yet implemented.")
 
     def test_single_key(self):
-
         for vals in [randi, rands, randu, randf]:
             vals = vals.view(FA)
             vals.set_name(keyname)
             ds = Dataset({keyname: vals}, unicode=True)
             gb = ds.gb(keyname)
             gb_result = gb.sum(d)
```

### Comparing `riptable-1.8.0/riptable/tests/test_interop_pyarrow.py` & `riptable-1.8.1/riptable/tests/test_interop_pyarrow.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_ismember.py` & `riptable-1.8.1/riptable/tests/test_ismember.py`

 * *Files 0% similar despite different names*

```diff
@@ -158,15 +158,14 @@
     # with pytest.raises(TypeError, msg=f"Failed to raise error between {a.dtype} and {b.dtype} when unable to convert unicode."):
     #    bool_arr, idx_arr = ismember(a,b)
 
 
 def test_ismember_categorical():
     for b_index_c in [0, 1]:
         for b_index_d in [0, 1]:
-
             # string values, both base indices
             c = TypeRegister.Categorical(
                 np.random.choice(["a", "b", "c", "d", "e", "f"], 15),
                 base_index=b_index_c,
             )
             d = TypeRegister.Categorical(np.random.choice(["a", "b", "c"], 10), base_index=b_index_d)
             cs, ds = c.as_string_array, d.as_string_array
```

### Comparing `riptable-1.8.0/riptable/tests/test_lexsort.py` & `riptable-1.8.1/riptable/tests/test_lexsort.py`

 * *Files 1% similar despite different names*

```diff
@@ -15,28 +15,26 @@
     """
     TODO: add more tests for different types
     also include string types
     """
 
     # TODO pytest parameterize arr_end
     def test_numeric_multikey(self):
-
         arr_len = 1_000_000
         d = {
             "int8": np.random.randint(0, 120, arr_len, dtype=np.int8),
             "int16": np.random.randint(0, 32000, arr_len, dtype=np.int16),
             "int32": np.random.randint(0, arr_len, arr_len, dtype=np.int32),
             "int64": np.random.randint(0, arr_len, arr_len, dtype=np.int64),
             "float32": np.random.rand(arr_len).astype(np.float64),
             "float64": np.random.rand(arr_len),
             "bytes": np.random.choice(["AAPL\u2080", "AMZN\u2082", "IBM\u2081"], arr_len),
         }
 
         for arr_end in [100, 1000, 10_000, 100_000, 1_000_000]:
-
             arr = list(a[:arr_end] for a in d.values())
             np_result = np.lexsort(arr)
             sfw_result = lexsort(arr)
             diff = np_result - sfw_result
             self.assertEqual(
                 0,
                 sum(diff),
```

### Comparing `riptable-1.8.0/riptable/tests/test_merge.py` & `riptable-1.8.1/riptable/tests/test_merge.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_merge_asof.py` & `riptable-1.8.1/riptable/tests/test_merge_asof.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_meta.py` & `riptable-1.8.1/riptable/tests/test_meta.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_multiset.py` & `riptable-1.8.1/riptable/tests/test_multiset.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_pandas_utils.py` & `riptable-1.8.1/riptable/tests/test_pandas_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_pdataset.py` & `riptable-1.8.1/riptable/tests/test_pdataset.py`

 * *Files 0% similar despite different names*

```diff
@@ -281,15 +281,14 @@
         ds3 = Dataset({"col_" + str(i): arange(9) for i in range(5)})
         dlist = [ds1, ds2, ds3]
         pds = PDataset(dlist)
         with self.assertRaises(NotImplementedError):
             pds.psave()
 
     def test_partition_rename(self):
-
         ds = Dataset({"col_" + str(i): arange(5) for i in range(5)})
         pds = PDataset([ds, ds, ds])
         newnames = ["part1", "part2", "part3"]
         pds.set_pnames(newnames)
 
         self.assertTrue(bool(np.all(pds.pnames == newnames)))
```

### Comparing `riptable-1.8.0/riptable/tests/test_pgroupby.py` & `riptable-1.8.1/riptable/tests/test_pgroupby.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_restore_subclass.py` & `riptable-1.8.1/riptable/tests/test_restore_subclass.py`

 * *Files 0% similar despite different names*

```diff
@@ -41,15 +41,14 @@
         c = Categorical(["a", "a", "b", "c", "a"])
         c2 = tile(c, 2)
         nptile = tile(c._np, 2)
         self.assertTrue(isinstance(c2, Categorical))
         self.assertTrue(arr_eq(nptile, c2._fa))
 
     def test_repeat(self):
-
         dtn = DateTimeNano.random(5)
         dtn2 = repeat(dtn, 2)
         nprep = repeat(dtn._np, 2)
         self.assertTrue(isinstance(dtn2, DateTimeNano))
         self.assertTrue(bool(np.all(dtn2._fa == nprep)))
         dtn2 = dtn.repeat(2)
         nprep = dtn._np.repeat(2)
```

### Comparing `riptable-1.8.0/riptable/tests/test_riptide_cpp.py` & `riptable-1.8.1/riptable/tests/test_riptide_cpp.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_rtnumpy.py` & `riptable-1.8.1/riptable/tests/test_rtnumpy.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_rtutils.py` & `riptable-1.8.1/riptable/tests/test_rtutils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_saveload.py` & `riptable-1.8.1/riptable/tests/test_saveload.py`

 * *Files 14% similar despite different names*

```diff
@@ -1,12 +1,13 @@
 import os
 import pathlib
 import shutil
 import sys
 import unittest
+import tempfile
 from typing import Optional
 
 import pytest
 from numpy.random import default_rng
 
 import riptable as rt
 from riptable import *
@@ -45,350 +46,353 @@
         # SDSVerboseOn()
         pass
 
     def test_save_arrays(self):
         pass
 
     def test_save_numeric(self):
-        ds = Dataset({dt.__name__: arange(10, dtype=dt) for dt in arr_types})
-        ds.save(r"riptable/tests/temp/tempsave")
-        ds2 = Dataset.load(r"riptable/tests/temp/tempsave")
-
-        # name, column order matches
-        loadkeys = list(ds2.keys())
-        for i, k in enumerate(ds.keys()):
-            self.assertEqual(loadkeys[i], k)
-
-        # dtype
-        for i, c in enumerate(ds2.values()):
-            self.assertEqual(arr_types[i], c.dtype)
-
-        os.remove(r"riptable/tests/temp/tempsave.sds")
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset({dt.__name__: arange(10, dtype=dt) for dt in arr_types})
+            ds.save(f"{tmpdirname}/tempsave")
+            ds2 = Dataset.load(f"{tmpdirname}/tempsave")
+
+            # name, column order matches
+            loadkeys = list(ds2.keys())
+            for i, k in enumerate(ds.keys()):
+                self.assertEqual(loadkeys[i], k)
+
+            # dtype
+            for i, c in enumerate(ds2.values()):
+                self.assertEqual(arr_types[i], c.dtype)
 
     def test_save_strings(self):
-        uni = FastArray(["a", "b", "c", "d", "e"], unicode=True)
-        b = FastArray(["a", "b", "c", "d", "e"])
-        ds = Dataset({"unicode": uni, "bytes": b}, unicode=True)
-        ds.save(r"riptable/tests/temp/tempsave")
-        ds2 = Dataset.load(r"riptable/tests/temp/tempsave")
-
-        self.assertTrue(ds2.unicode.dtype.char, "U")
-        self.assertTrue(ds2.bytes.dtype.char, "S")
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            uni = FastArray(["a", "b", "c", "d", "e"], unicode=True)
+            b = FastArray(["a", "b", "c", "d", "e"])
+            ds = Dataset({"unicode": uni, "bytes": b}, unicode=True)
+            ds.save(f"{tmpdirname}/tempsave")
+            ds2 = Dataset.load(f"{tmpdirname}/tempsave")
 
-        os.remove(r"riptable/tests/temp/tempsave.sds")
+            self.assertTrue(ds2.unicode.dtype.char, "U")
+            self.assertTrue(ds2.bytes.dtype.char, "S")
 
     def test_save_categorical(self):
-        # stringlike
-        cstr = Categorical(["a", "b", "c", "d", "e"])
-
-        # numeric
-        cnum = Categorical(FastArray([1, 2, 3, 4, 5]), FastArray([10, 20, 30, 40, 50]))
-
-        # enum
-        cmap = Categorical([10, 20, 30, 40, 50], {10: "a", 20: "b", 30: "c", 40: "d", 50: "e"})
-
-        # multikey
-        cmk = Categorical([FastArray(["a", "b", "c", "d", "e"]), arange(5)])
-
-        ds = Dataset({"cstr": cstr, "cnum": cnum, "cmap": cmap, "cmk": cmk})
-        ds.save(r"riptable/tests/temp/tempsave")
-        ds2 = Dataset.load(r"riptable/tests/temp/tempsave")
-
-        self.assertEqual(ds2.cstr.category_mode, CategoryMode.StringArray)
-        self.assertEqual(ds2.cnum.category_mode, CategoryMode.NumericArray)
-        self.assertEqual(ds2.cmap.category_mode, CategoryMode.Dictionary)
-        self.assertEqual(ds2.cmk.category_mode, CategoryMode.MultiKey)
-
-        os.remove(r"riptable/tests/temp/tempsave.sds")
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            # stringlike
+            cstr = Categorical(["a", "b", "c", "d", "e"])
+
+            # numeric
+            cnum = Categorical(FastArray([1, 2, 3, 4, 5]), FastArray([10, 20, 30, 40, 50]))
+
+            # enum
+            cmap = Categorical([10, 20, 30, 40, 50], {10: "a", 20: "b", 30: "c", 40: "d", 50: "e"})
+
+            # multikey
+            cmk = Categorical([FastArray(["a", "b", "c", "d", "e"]), arange(5)])
+
+            ds = Dataset({"cstr": cstr, "cnum": cnum, "cmap": cmap, "cmk": cmk})
+            ds.save(f"{tmpdirname}/tempsave")
+            ds2 = Dataset.load(f"{tmpdirname}/tempsave")
+
+            self.assertEqual(ds2.cstr.category_mode, CategoryMode.StringArray)
+            self.assertEqual(ds2.cnum.category_mode, CategoryMode.NumericArray)
+            self.assertEqual(ds2.cmap.category_mode, CategoryMode.Dictionary)
+            self.assertEqual(ds2.cmk.category_mode, CategoryMode.MultiKey)
 
     def test_load_single_item(self):
-        st = Struct(
-            {"ds": Dataset({dt.__name__: arange(10, dtype=dt) for dt in arr_types}), "col1": arange(5), "num": 13}
-        )
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            st = Struct(
+                {"ds": Dataset({dt.__name__: arange(10, dtype=dt) for dt in arr_types}), "col1": arange(5), "num": 13}
+            )
 
-        st.save(r"riptable/tests/temp/tempsavestruct")
-        ds = Struct.load(r"riptable/tests/temp/tempsavestruct", name="ds")
+            st.save(f"{tmpdirname}/tempsavestruct")
+            ds = Struct.load(f"{tmpdirname}/tempsavestruct", name="ds")
 
-        for k, model_col in st.ds.items():
-            self.assertTrue(bool(np.all(model_col == ds[k])))
+            for k, model_col in st.ds.items():
+                self.assertTrue(bool(np.all(model_col == ds[k])))
 
-        shutil.rmtree(r"riptable/tests/temp/tempsavestruct")
+    def test_name_kwarg(self):
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            arr = rt.FA([1, 2, 3])
+            arr.save(tmpdirname, name="tempsave_fa")
+            arr2 = rt.load_sds(f"{tmpdirname}/tempsave_fa.sds")
+            assert_array_or_cat_equal(arr, arr2)
+
+            ds = rt.Dataset({"a": ["a", "b", "c"]})
+            ds.save(tmpdirname, name="tempsave_ds")
+            ds2 = rt.load_sds(f"{tmpdirname}/tempsave_ds.sds")
+            assert_array_or_cat_equal(ds.a, ds2.a)
+
+            # Test .sds
+            arr3 = rt.FA(["a", "b", "c"])
+            arr3.save(f"{tmpdirname}/test.sds", name="tempsave_fa2")
+            arr4 = rt.load_sds(f"{tmpdirname}/test.sds/tempsave_fa2.sds")
+            assert_array_or_cat_equal(arr3, arr4)
 
     def test_sharedmem_save(self):
-        # need to write different routine to remove temporary save from linux shared memory
-        if False:
-            if sys.platform == "windows":
-                ds = Dataset({"col_" + str(i): np.random.rand(5) for i in range(5)})
-                ds.save(r"riptable/tests/temp/temp_save_shared", share="test_save_shared")
-
-                # make sure the dataset is only shared in shared memory
-                self.assertFalse(os.path.exists(r"riptable/tests/temp/temp_save_shared.sds"))
-
-                # after loading, compare dataset to original
-                ds2 = Dataset.load(r"riptable/tests/temp/temp_save_shared", share="test_save_shared")
-                for k, v in ds2.items():
-                    self.assertTrue(bool(np.all(v == ds[k])))
-
-                # test with a garbage filepath
-                ds.save(r"Z:::/riptable/tests/temp/temp_save_shared", share="test_save_shared")
-                ds2 = Dataset.load(r"Y::::::/differentfilepath/samename/temp_save_shared", share="test_save_shared")
-                for k, v in ds2.items():
-                    self.assertTrue(bool(np.all(v == ds[k])))
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            # need to write different routine to remove temporary save from linux shared memory
+            if False:
+                if sys.platform == "windows":
+                    ds = Dataset({"col_" + str(i): np.random.rand(5) for i in range(5)})
+                    ds.save(f"{tmpdirname}/temp_save_shared", share="test_save_shared")
+
+                    # make sure the dataset is only shared in shared memory
+                    self.assertFalse(os.path.exists(f"{tmpdirname}/temp_save_shared.sds"))
+
+                    # after loading, compare dataset to original
+                    ds2 = Dataset.load(f"{tmpdirname}/temp_save_shared", share="test_save_shared")
+                    for k, v in ds2.items():
+                        self.assertTrue(bool(np.all(v == ds[k])))
+
+                    # test with a garbage filepath
+                    ds.save(f"Z:::/riptable/tests/temp_save_shared", share="test_save_shared")
+                    ds2 = Dataset.load(r"Y::::::/differentfilepath/samename/temp_save_shared", share="test_save_shared")
+                    for k, v in ds2.items():
+                        self.assertTrue(bool(np.all(v == ds[k])))
 
     def test_sharedmem_load(self):
-        ds = Dataset({"col_" + str(i): np.random.rand(5) for i in range(5)})
-        ds.save(r"riptable/tests/temp/ds_to_file")
-
-        # NOTE: shared memory on Windows requires admin privs and currently disabled
-        if False:
-            ds2 = load_sds(r"riptable/tests/temp/ds_to_file", share="test_load_shared")
-            # remove file on disk
-            os.remove(r"riptable/tests/temp/ds_to_file.sds")
-            # load only from share
-            ds3 = load_sds(r"riptable/tests/temp/ds_to_file", share="test_load_shared")
-
-            for d in [ds, ds3]:
-                for k, v in d.items():
-                    self.assertTrue(bool(np.all(v == ds[k])))
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset({"col_" + str(i): np.random.rand(5) for i in range(5)})
+            ds.save(f"{tmpdirname}/ds_to_file")
+
+            # NOTE: shared memory on Windows requires admin privs and currently disabled
+            if False:
+                ds2 = load_sds(f"{tmpdirname}/ds_to_file", share="test_load_shared")
+                # remove file on disk
+
+                # load only from share
+                ds3 = load_sds(f"{tmpdirname}/ds_to_file", share="test_load_shared")
+
+                for d in [ds, ds3]:
+                    for k, v in d.items():
+                        self.assertTrue(bool(np.all(v == ds[k])))
 
     def test_uncompressed_save(self):
-        ds = Dataset({"col_" + str(i): zeros(100_000, dtype=np.int32) for i in range(50)})
-        ds.save(r"riptable/tests/temp/tempsave_compressed.sds")
-        ds.save(r"riptable/tests/temp/tempsave_uncompressed.sds", compress=False)
-
-        compsize = os.stat(r"riptable/tests/temp/tempsave_compressed.sds").st_size
-        uncompsize = os.stat(r"riptable/tests/temp/tempsave_uncompressed.sds").st_size
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset({"col_" + str(i): zeros(100_000, dtype=np.int32) for i in range(50)})
+            ds.save(f"{tmpdirname}/tempsave_compressed.sds")
+            ds.save(f"{tmpdirname}/tempsave_uncompressed.sds", compress=False)
 
-        # make sure the file was smaller (this is full of zeros, so compression should be extreme)
-        self.assertTrue(compsize < uncompsize)
+            compsize = os.stat(f"{tmpdirname}/tempsave_compressed.sds").st_size
+            uncompsize = os.stat(f"{tmpdirname}/tempsave_uncompressed.sds").st_size
 
-        compds = Dataset.load(r"riptable/tests/temp/tempsave_compressed.sds")
-        uncompds = Dataset.load(r"riptable/tests/temp/tempsave_uncompressed.sds")
+            # make sure the file was smaller (this is full of zeros, so compression should be extreme)
+            self.assertTrue(compsize < uncompsize)
 
-        for ds2 in [compds, uncompds]:
-            for k, v in ds2.items():
-                self.assertTrue(bool(np.all(v == ds[k])))
+            compds = Dataset.load(f"{tmpdirname}/tempsave_compressed.sds")
+            uncompds = Dataset.load(f"{tmpdirname}/tempsave_uncompressed.sds")
 
-        os.remove(r"riptable/tests/temp/tempsave_compressed.sds")
-        os.remove(r"riptable/tests/temp/tempsave_uncompressed.sds")
+            for ds2 in [compds, uncompds]:
+                for k, v in ds2.items():
+                    self.assertTrue(bool(np.all(v == ds[k])))
 
     def test_meta_tuples(self):
-        # test meta tuples for all fastarray / subclasses
-        dtn = DateTimeNano(["2018-01-09", "2000-02-29", "2000-03-01", "2019-12-31"], from_tz="NYC")
-        span = dtn.hour_span
-        c = Categorical(["b", "a", "c", "a"])
-        norm = arange(4)
-
-        ds = Dataset({"norm": arange(4), "dtn": dtn, "Cat": Categorical(["b", "a", "c", "a"]), "span": dtn.hour_span})
-        ds.save(r"riptable/tests/temp/tempsave_ds.sds")
-        # only load the meta tuples
-        correct_ds = [(b"norm", 3), (b"dtn", 3), (b"Cat", 1), (b"span", 3), (b"Cat!col_0", 2)]
-        ds_tups = decompress_dataset_internal(r"riptable/tests/temp/tempsave_ds.sds")[0][2]
-        for idx, correct in enumerate(correct_ds):
-            result_tup = ds_tups[idx]
-            self.assertEqual(correct[0], result_tup[0])
-            self.assertEqual(correct[1], result_tup[1])
-
-        os.remove(r"riptable/tests/temp/tempsave_ds.sds")
-
-        st = Struct(ds.asdict())
-        st.save(r"riptable/tests/temp/tempsave_st")
-        correct_st = [(b"norm", 1), (b"dtn", 1), (b"Cat", 1), (b"span", 1), (b"Cat!col_0", 0)]
-        st_tups = decompress_dataset_internal(r"riptable/tests/temp/tempsave_st.sds")[0][2]
-        for idx, correct in enumerate(correct_st):
-            result_tup = st_tups[idx]
-            self.assertEqual(correct[0], result_tup[0])
-            self.assertEqual(correct[1], result_tup[1])
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            # test meta tuples for all fastarray / subclasses
+            dtn = DateTimeNano(["2018-01-09", "2000-02-29", "2000-03-01", "2019-12-31"], from_tz="NYC")
+            span = dtn.hour_span
+            c = Categorical(["b", "a", "c", "a"])
+            norm = arange(4)
 
-        os.remove(r"riptable/tests/temp/tempsave_st.sds")
+            ds = Dataset(
+                {"norm": arange(4), "dtn": dtn, "Cat": Categorical(["b", "a", "c", "a"]), "span": dtn.hour_span}
+            )
+            ds.save(f"{tmpdirname}/tempsave_ds.sds")
+            # only load the meta tuples
+            correct_ds = [(b"norm", 3), (b"dtn", 3), (b"Cat", 1), (b"span", 3), (b"Cat!col_0", 2)]
+            ds_tups = decompress_dataset_internal(f"{tmpdirname}/tempsave_ds.sds")[0][2]
+            for idx, correct in enumerate(correct_ds):
+                result_tup = ds_tups[idx]
+                self.assertEqual(correct[0], result_tup[0])
+                self.assertEqual(correct[1], result_tup[1])
+
+            st = Struct(ds.asdict())
+            st.save(f"{tmpdirname}/tempsave_st")
+            correct_st = [(b"norm", 1), (b"dtn", 1), (b"Cat", 1), (b"span", 1), (b"Cat!col_0", 0)]
+            st_tups = decompress_dataset_internal(f"{tmpdirname}/tempsave_st.sds")[0][2]
+            for idx, correct in enumerate(correct_st):
+                result_tup = st_tups[idx]
+                self.assertEqual(correct[0], result_tup[0])
+                self.assertEqual(correct[1], result_tup[1])
 
     def test_struct_no_arrays(self):
-        ds1 = Dataset({"col_" + str(i): arange(5) for i in range(3)})
-        ds2 = Dataset({"col_" + str(i): arange(5) for i in range(3)})
-        ds3 = Dataset({"col_" + str(i): arange(5) for i in range(3)})
-
-        st = Struct({"ds1": ds1, "ds2": ds2, "ds3": ds3})
-        st.save(r"riptable/tests/temp/tempsave_st")
-        st2 = Struct.load(r"riptable/tests/temp/tempsave_st")
-
-        shutil.rmtree(r"riptable/tests/temp/tempsave_st")
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds1 = Dataset({"col_" + str(i): arange(5) for i in range(3)})
+            ds2 = Dataset({"col_" + str(i): arange(5) for i in range(3)})
+            ds3 = Dataset({"col_" + str(i): arange(5) for i in range(3)})
+
+            st = Struct({"ds1": ds1, "ds2": ds2, "ds3": ds3})
+            st.save(f"{tmpdirname}/tempsave_st")
+            st2 = Struct.load(f"{tmpdirname}/tempsave_st")
 
     def test_corrupt_sds(self):
-        f = open(r"riptable/tests/temp/garbage.sds", "w")
-        f.close()
-        with self.assertRaises(ValueError):
-            ds = Dataset.load(r"riptable/tests/temp/garbage.sds")
-        os.remove(r"riptable/tests/temp/garbage.sds")
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            f = open(f"{tmpdirname}/garbage.sds", "w")
+            f.close()
+            with self.assertRaises(ValueError):
+                ds = Dataset.load(f"{tmpdirname}/garbage.sds")
 
     def test_scalar_overflow(self):
-        large_val = 0xFFFFFFFFFFFFFFFFF
-        large_val_arr = np.asarray([large_val])
-        # will make an object when put in array
-        self.assertEqual(large_val_arr.dtype.char, "O")
-
-        st = Struct({"val": large_val})
-        with self.assertWarns(UserWarning):
-            st.save(r"riptable/tests/temp/tempsave_st")
-
-        st2 = Struct.load(r"riptable/tests/temp/tempsave_st")
-        val = st2.val
-        self.assertTrue(isinstance(val, bytes))
-
-        os.remove(r"riptable/tests/temp/tempsave_st.sds")
-        # shutil.rmtree(r'riptable/tests/temp/tempsave_st')
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            large_val = 0xFFFFFFFFFFFFFFFFF
+            large_val_arr = np.asarray([large_val])
+            # will make an object when put in array
+            self.assertEqual(large_val_arr.dtype.char, "O")
+
+            st = Struct({"val": large_val})
+            with self.assertWarns(UserWarning):
+                st.save(f"{tmpdirname}/tempsave_st")
+
+            st2 = Struct.load(f"{tmpdirname}/tempsave_st")
+            val = st2.val
+            self.assertTrue(isinstance(val, bytes))
 
     def test_meta_tuples_new(self):
-        st = Struct(
-            {
-                "sc1": 1,
-                "arr1": arange(5),
-                "ds1": Dataset({"col1": arange(5)}),
-                "cat1": Categorical(["a", "b", "c"]),
-                "arr2": arange(5),
-                "sc2": 2,
-                "ds2": Struct({"test": 1}),
-            }
-        )
-        correct_order = ["sc1", "arr1", "ds1", "cat1", "arr2", "sc2", "ds2"]
-        correct_tuples = [
-            (b"sc1", (SDSFlag.OriginalContainer | SDSFlag.Scalar)),
-            (b"arr1", (SDSFlag.OriginalContainer)),
-            (b"ds1", (SDSFlag.OriginalContainer | SDSFlag.Nested)),
-            (b"cat1", (SDSFlag.OriginalContainer)),
-            (b"arr2", (SDSFlag.OriginalContainer)),
-            (b"sc2", (SDSFlag.OriginalContainer | SDSFlag.Scalar)),
-            (b"ds2", (SDSFlag.OriginalContainer | SDSFlag.Nested)),
-            (b"cat1!col_0", 0),
-        ]
-
-        st.save(r"riptable/tests/temp/tempsave_st")
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            st = Struct(
+                {
+                    "sc1": 1,
+                    "arr1": arange(5),
+                    "ds1": Dataset({"col1": arange(5)}),
+                    "cat1": Categorical(["a", "b", "c"]),
+                    "arr2": arange(5),
+                    "sc2": 2,
+                    "ds2": Struct({"test": 1}),
+                }
+            )
+            correct_order = ["sc1", "arr1", "ds1", "cat1", "arr2", "sc2", "ds2"]
+            correct_tuples = [
+                (b"sc1", (SDSFlag.OriginalContainer | SDSFlag.Scalar)),
+                (b"arr1", (SDSFlag.OriginalContainer)),
+                (b"ds1", (SDSFlag.OriginalContainer | SDSFlag.Nested)),
+                (b"cat1", (SDSFlag.OriginalContainer)),
+                (b"arr2", (SDSFlag.OriginalContainer)),
+                (b"sc2", (SDSFlag.OriginalContainer | SDSFlag.Scalar)),
+                (b"ds2", (SDSFlag.OriginalContainer | SDSFlag.Nested)),
+                (b"cat1!col_0", 0),
+            ]
 
-        _, _, tups, _ = decompress_dataset_internal(r"riptable/tests/temp/tempsave_st/_root.sds")[0]
-        for t, correct_t in zip(tups, correct_tuples):
-            self.assertEqual(t[0], correct_t[0])
-            self.assertEqual(t[1], correct_t[1])
+            st.save(f"{tmpdirname}/tempsave_st")
 
-        shutil.rmtree(r"riptable/tests/temp/tempsave_st")
+            _, _, tups, _ = decompress_dataset_internal(f"{tmpdirname}/tempsave_st/_root.sds")[0]
+            for t, correct_t in zip(tups, correct_tuples):
+                self.assertEqual(t[0], correct_t[0])
+                self.assertEqual(t[1], correct_t[1])
 
     def test_load_extra_files(self):
-        ds = Dataset({"col_" + str(i): arange(5) for i in range(5)})
-        st = Struct({"ds1": ds, "ds2": ds, "ds3": ds})
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset({"col_" + str(i): arange(5) for i in range(5)})
+            st = Struct({"ds1": ds, "ds2": ds, "ds3": ds})
 
-        st.save(r"riptable/tests/temp/tempsave_st")
-        ds.save(r"riptable/tests/temp/tempsave_st/ds4")
+            st.save(f"{tmpdirname}/tempsave_st")
+            ds.save(f"{tmpdirname}/tempsave_st/ds4")
 
-        st2 = Struct.load(r"riptable/tests/temp/tempsave_st", include_all_sds=True)
-        self.assertTrue("ds4" in st2)
+            st2 = Struct.load(f"{tmpdirname}/tempsave_st", include_all_sds=True)
+            self.assertTrue("ds4" in st2)
 
-        st2 = load_sds(r"riptable/tests/temp/tempsave_st", include_all_sds=True)
-        self.assertTrue("ds4" in st2)
-
-        shutil.rmtree(r"riptable/tests/temp/tempsave_st")
+            st2 = load_sds(f"{tmpdirname}/tempsave_st", include_all_sds=True)
+            self.assertTrue("ds4" in st2)
 
     def test_missing_item(self):
-        ds = Dataset({"col_" + str(i): arange(5) for i in range(5)})
-        st = Struct({"ds1": ds, "ds2": ds, "ds3": ds})
-
-        st.save(r"riptable/tests/temp/tempsave_st")
-        os.remove(r"riptable/tests/temp/tempsave_st/ds2.sds")
-
-        with self.assertWarns(UserWarning):
-            st2 = load_sds(r"riptable/tests/temp/tempsave_st")
-        self.assertTrue("ds2" not in st2)
-
-        shutil.rmtree(r"riptable/tests/temp/tempsave_st")
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset({"col_" + str(i): arange(5) for i in range(5)})
+            st = Struct({"ds1": ds, "ds2": ds, "ds3": ds})
+
+            st.save(f"{tmpdirname}/tempsave_st")
+            os.remove(f"{tmpdirname}/tempsave_st/ds2.sds")
+
+            with self.assertWarns(UserWarning):
+                st2 = load_sds(f"{tmpdirname}/tempsave_st")
+            self.assertTrue("ds2" not in st2)
 
     def test_single_items(self):
-        arr = arange(5)
-        save_sds(pathlib.PurePath(r"riptable/tests/temp/temparray"), arr)
-        arr2 = load_sds(pathlib.PurePath(r"riptable/tests/temp/temparray"))
-        self.assertTrue(bool(np.all(arr == arr2)))
-        os.remove(pathlib.PurePath(r"riptable/tests/temp/temparray.sds"))
-
-        cat = Categorical(["a", "a", "b", "c", "a"])
-        save_sds(r"riptable/tests/temp/tempcat", cat)
-        cat2 = load_sds(r"riptable/tests/temp/tempcat")
-        self.assertTrue(isinstance(cat2, Categorical))
-        self.assertTrue(bool(np.all(cat._fa == cat2._fa)))
-        self.assertTrue(bool(np.all(cat.category_array == cat2.category_array)))
-        os.remove(r"riptable/tests/temp/tempcat.sds")
-
-        dtn = DateTimeNano(
-            ["1992-02-01 12:34", "1995-05-12 12:34", "1956-02-07 12:34", "1959-12-30 12:34"], from_tz="NYC", to_tz="NYC"
-        )
-        save_sds(r"riptable/tests/temp/tempdtn", dtn)
-        dtn2 = load_sds(r"riptable/tests/temp/tempdtn")
-        self.assertTrue(isinstance(dtn2, DateTimeNano))
-        self.assertTrue(bool(np.all(dtn._fa == dtn2._fa)))
-        self.assertTrue(dtn._timezone._to_tz == dtn2._timezone._to_tz)
-        os.remove(r"riptable/tests/temp/tempdtn.sds")
-
-        arr = arange(24)
-        arr = arr.reshape((2, 2, 2, 3))
-        save_sds(r"riptable/tests/temp/temp4dims", arr)
-        arr2 = load_sds(r"riptable/tests/temp/temp4dims")
-        self.assertTrue(arr.dtype == arr2.dtype)
-        self.assertTrue(arr.shape == arr2.shape)
-        self.assertTrue(arr[1][1][1][1] == arr2[1][1][1][1])
-        os.remove(r"riptable/tests/temp/temp4dims.sds")
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            arr = arange(5)
+            save_sds(pathlib.PurePath(f"{tmpdirname}/temparray"), arr)
+            arr2 = load_sds(pathlib.PurePath(f"{tmpdirname}/temparray"))
+            self.assertTrue(bool(np.all(arr == arr2)))
+
+            cat = Categorical(["a", "a", "b", "c", "a"])
+            save_sds(f"{tmpdirname}/tempcat", cat)
+            cat2 = load_sds(f"{tmpdirname}/tempcat")
+            self.assertTrue(isinstance(cat2, Categorical))
+            self.assertTrue(bool(np.all(cat._fa == cat2._fa)))
+            self.assertTrue(bool(np.all(cat.category_array == cat2.category_array)))
+
+            dtn = DateTimeNano(
+                ["1992-02-01 12:34", "1995-05-12 12:34", "1956-02-07 12:34", "1959-12-30 12:34"],
+                from_tz="NYC",
+                to_tz="NYC",
+            )
+            save_sds(f"{tmpdirname}/tempdtn", dtn)
+            dtn2 = load_sds(f"{tmpdirname}/tempdtn")
+            self.assertTrue(isinstance(dtn2, DateTimeNano))
+            self.assertTrue(bool(np.all(dtn._fa == dtn2._fa)))
+            self.assertTrue(dtn._timezone._to_tz == dtn2._timezone._to_tz)
+
+            arr = arange(24)
+            arr = arr.reshape((2, 2, 2, 3))
+            save_sds(f"{tmpdirname}/temp4dims", arr)
+            arr2 = load_sds(f"{tmpdirname}/temp4dims")
+            self.assertTrue(arr.dtype == arr2.dtype)
+            self.assertTrue(arr.shape == arr2.shape)
+            self.assertTrue(arr[1][1][1][1] == arr2[1][1][1][1])
 
     def test_shared_mem_errors(self):
-        with self.assertRaises(ValueError):
-            ds = load_sds(r"riptable/tests/temp/invalidfile.sds", share="invalidname")
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            with self.assertRaises(ValueError):
+                ds = load_sds(f"{tmpdirname}/invalidfile.sds", share="invalidname")
 
-        with self.assertRaises(ValueError):
-            ds = load_sds_mem(r"riptable/tests/temp/invalidfile.sds", "invalidname")
+            with self.assertRaises(ValueError):
+                ds = load_sds_mem(f"{tmpdirname}/invalidfile.sds", "invalidname")
 
     def test_include_dataset(self):
-        ds = Dataset({"col_" + str(i): arange(5) for i in range(5)})
-        inc = ["col_1", "col_3"]
-        ds.save(r"riptable/tests/temp/tempds")
-        ds2 = load_sds(r"riptable/tests/temp/tempds", include=inc)
-        self.assertEqual(ds2.shape[1], 2)
-        self.assertTrue(list(ds2) == inc)
-        self.assertTrue(isinstance(ds2, Dataset))
-        os.remove(r"riptable/tests/temp/tempds.sds")
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset({"col_" + str(i): arange(5) for i in range(5)})
+            inc = ["col_1", "col_3"]
+            ds.save(f"{tmpdirname}/tempds")
+            ds2 = load_sds(f"{tmpdirname}/tempds", include=inc)
+            self.assertEqual(ds2.shape[1], 2)
+            self.assertTrue(list(ds2) == inc)
+            self.assertTrue(isinstance(ds2, Dataset))
 
     def test_multistack_string_width(self):
-        ds1 = Dataset({"strings": FastArray(["a", "b", "c", "d", "e"])})
-        ds2 = Dataset({"strings": FastArray(["aa", "bb", "cc", "dd", "ee"])})
-        files = [r"riptable/tests/temp/len1.sds", r"riptable/tests/temp/len2.sds"]
-        ds1.save(files[0])
-        ds2.save(files[1])
-
-        arrays, _, _, _, _, _ = ds3 = rc.MultiStackFiles(files)
-        stacked = arrays[0]
-        self.assertTrue(isinstance(stacked, FastArray))
-        self.assertEqual(stacked.itemsize, 2)
-        self.assertEqual(stacked.dtype.name, "bytes16")
-
-        for f in files:
-            os.remove(f)
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds1 = Dataset({"strings": FastArray(["a", "b", "c", "d", "e"])})
+            ds2 = Dataset({"strings": FastArray(["aa", "bb", "cc", "dd", "ee"])})
+            files = [f"{tmpdirname}/len1.sds", f"{tmpdirname}/len2.sds"]
+            ds1.save(files[0])
+            ds2.save(files[1])
+
+            arrays, _, _, _, _, _ = ds3 = rc.MultiStackFiles(files)
+            stacked = arrays[0]
+            self.assertTrue(isinstance(stacked, FastArray))
+            self.assertEqual(stacked.itemsize, 2)
+            self.assertEqual(stacked.dtype.name, "bytes16")
 
     def test_stack_missing_string(self):
-        ds1 = Dataset({"col1": arange(5), "strings": FA(["a", "b", "c", "d", "e"], unicode=True)})
-        ds2 = Dataset({"col1": arange(5)})
-        files = [r"riptable/tests/temp/ds1.sds", r"riptable/tests/temp/ds2.sds"]
-        ds1.save(files[0])
-        ds2.save(files[1])
-
-        ds3 = load_sds(files, stack=True)
-        self.assertTrue(isinstance(ds3, Dataset))
-        self.assertTrue(ds3._nrows, 10)
-        self.assertTrue(ds3._ncols, 2)
-        self.assertTrue(ds3.strings.dtype.char == "U")
-        self.assertTrue(ds3.strings.itemsize == 4)
-
-        for f in files:
-            os.remove(f)
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds1 = Dataset({"col1": arange(5), "strings": FA(["a", "b", "c", "d", "e"], unicode=True)})
+            ds2 = Dataset({"col1": arange(5)})
+            files = [f"{tmpdirname}/ds1.sds", f"{tmpdirname}/ds2.sds"]
+            ds1.save(files[0])
+            ds2.save(files[1])
+
+            ds3 = load_sds(files, stack=True)
+            self.assertTrue(isinstance(ds3, Dataset))
+            self.assertTrue(ds3._nrows, 10)
+            self.assertTrue(ds3._ncols, 2)
+            self.assertTrue(ds3.strings.dtype.char == "U")
+            self.assertTrue(ds3.strings.itemsize == 4)
 
     # def test_stack_files(self):
     #    ds1 = Dataset({'col_'+str(i):np.random.rand(5) for i in range(5)})
     #    ds2 = Dataset({'col_'+str(i):np.random.rand(5) for i in range(5)})
-    #    files = [ r'riptable/tests/temp/ds1.sds', r'riptable/tests/temp/ds2.sds' ]
+    #    files = [ r'riptable/tests/ds1.sds', r'riptable/tests/ds2.sds' ]
     #    ds1.save(files[0])
     #    ds2.save(files[1])
 
     #    ds3 = load_sds(files, stack=True)
     #    self.assertTrue(isinstance(ds3, Dataset))
     #    self.assertEqual(ds3._nrows, 10)
     #    self.assertEqual(ds3._ncols, 5)
@@ -399,669 +403,657 @@
     #        self.assertTrue(bool(np.all(col)))
 
     #    btm = ds3[5:,:]
     #    eq = btm == ds2
     #    for col in eq.values():
     #        self.assertTrue(bool(np.all(col)))
 
-    #    for f in files:
-    #        os.remove(f)
-
     def test_stack_files_include(self):
-        ds1 = Dataset({"col_" + str(i): np.random.rand(5) for i in range(5)})
-        ds2 = Dataset({"col_" + str(i): np.random.rand(5) for i in range(5)})
-        files = [r"riptable/tests/temp/ds1.sds", r"riptable/tests/temp/ds2.sds"]
-        ds1.save(files[0])
-        ds2.save(files[1])
-
-        inc = ["col_3", "col_4"]
-
-        ds3 = load_sds(files, include=inc, stack=True)
-        self.assertTrue(isinstance(ds3, Dataset))
-        self.assertEqual(ds3._nrows, 10)
-        self.assertEqual(ds3._ncols, 2)
-        self.assertTrue(bool(np.all(inc == list(ds3))))
-
-        for f in files:
-            os.remove(f)
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds1 = Dataset({"col_" + str(i): np.random.rand(5) for i in range(5)})
+            ds2 = Dataset({"col_" + str(i): np.random.rand(5) for i in range(5)})
+            files = [f"{tmpdirname}/ds1.sds", f"{tmpdirname}/ds2.sds"]
+            ds1.save(files[0])
+            ds2.save(files[1])
+
+            inc = ["col_3", "col_4"]
+
+            ds3 = load_sds(files, include=inc, stack=True)
+            self.assertTrue(isinstance(ds3, Dataset))
+            self.assertEqual(ds3._nrows, 10)
+            self.assertEqual(ds3._ncols, 2)
+            self.assertTrue(bool(np.all(inc == list(ds3))))
 
     # def test_stack_files_error(self):
     #    ds1 = Dataset({'nums':arange(5)})
     #    ds2 = Dataset({'nums':arange(5,dtype=np.int8)})
-    #    files = [ r'riptable/tests/temp/ds1.sds', r'riptable/tests/temp/ds2.sds' ]
+    #    files = [ r'riptable/tests/ds1.sds', r'riptable/tests/ds2.sds' ]
     #    ds1.save(files[0])
     #    ds2.save(files[1])
 
     #    with self.assertRaises(ValueError):
     #        ds3 = load_sds(files, stack=True)
 
     #    with self.assertRaises(TypeError):
-    #        ds3 = load_sds( [ r'riptable/tests/temp/ds1.sds', r'riptable/tests/temp' ], stack=True )
+    #        ds3 = load_sds( [ r'riptable/tests/ds1.sds', r'riptable/tests/temp' ], stack=True )
 
     #    for f in files:
     #        os.remove(f)
 
     def test_stack_dir(self):
-        ds1 = Dataset({"col_" + str(i): np.random.rand(5) for i in range(5)})
-        ds2 = Dataset({"col_" + str(i): np.random.rand(5) for i in range(5)})
-        files1 = [r"riptable/tests/temp/dir1/ds1.sds", r"riptable/tests/temp/dir2/ds1.sds"]
-        files2 = [r"riptable/tests/temp/dir1/ds2.sds", r"riptable/tests/temp/dir2/ds2.sds"]
-        for f in files1:
-            ds1.save(f)
-        for f in files2:
-            ds2.save(f)
-
-        dirs = [r"riptable/tests/temp/dir1", r"riptable/tests/temp/dir2"]
-        inc = ["ds1", "ds2"]
-
-        st = load_sds(dirs, include=inc, stack=True)
-
-        self.assertTrue(isinstance(st, Struct))
-        self.assertTrue(bool(np.all(inc == list(st))))
-        for v in st.values():
-            self.assertTrue(isinstance(v, Dataset))
-            self.assertEqual(v._nrows, 10)
-            self.assertEqual(v._ncols, 5)
-
-        for d in dirs:
-            shutil.rmtree(d)
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds1 = Dataset({"col_" + str(i): np.random.rand(5) for i in range(5)})
+            ds2 = Dataset({"col_" + str(i): np.random.rand(5) for i in range(5)})
+            files1 = [f"{tmpdirname}/dir1/ds1.sds", f"{tmpdirname}/dir2/ds1.sds"]
+            files2 = [f"{tmpdirname}/dir1/ds2.sds", f"{tmpdirname}/dir2/ds2.sds"]
+            for f in files1:
+                ds1.save(f)
+            for f in files2:
+                ds2.save(f)
+
+            dirs = [f"{tmpdirname}/dir1", f"{tmpdirname}/dir2"]
+            inc = ["ds1", "ds2"]
+
+            st = load_sds(dirs, include=inc, stack=True)
+
+            self.assertTrue(isinstance(st, Struct))
+            self.assertTrue(bool(np.all(inc == list(st))))
+            for v in st.values():
+                self.assertTrue(isinstance(v, Dataset))
+                self.assertEqual(v._nrows, 10)
+                self.assertEqual(v._ncols, 5)
 
     def test_stack_dir_error(self):
-        ds1 = Dataset({"nums": arange(5)})
-        ds2 = Dataset({"nums": arange(5, dtype=np.int8)})
-        files = [r"riptable/tests/temp/ds1.sds", r"riptable/tests/temp/ds2.sds"]
-        ds1.save(files[0])
-        ds2.save(files[1])
-
-        with self.assertRaises(ValueError):
-            _ = load_sds([r"riptable/tests/temp"], stack=True)
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds1 = Dataset({"nums": arange(5)})
+            ds2 = Dataset({"nums": arange(5, dtype=np.int8)})
+            files = [f"{tmpdirname}/temp/ds1.sds", f"{tmpdirname}/temp/ds2.sds"]
+            ds1.save(files[0])
+            ds2.save(files[1])
 
-        for f in files:
-            os.remove(f)
+            with self.assertRaises(ValueError):
+                _ = load_sds([f"{tmpdirname}/temp"], stack=True)
 
     def test_stack_upcast(self):
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            correct = tile(arange(5), 2)
 
-        correct = tile(arange(5), 2)
+            for dt in arr_types:
+                ds = Dataset({"nums": arange(5, dtype=dt)})
+                ds.save(f"{tmpdirname}/upcast/" + np.dtype(dt).name)
+
+            int_dt = [np.int8, np.int16, np.int32, np.int64]
+            uint_dt = [np.uint8, np.uint16, np.uint32, np.uint64]
+            flt_dt = [np.float32, np.float64]
+
+            # float64
+            flt64 = f"{tmpdirname}/upcast/float64"
+            for dt in int_dt + uint_dt + flt_dt:
+                files = [flt64, f"{tmpdirname}/upcast/" + np.dtype(dt).name]
+                ds = load_sds(files, stack=True)
+                self.assertTrue(isinstance(ds, Dataset))
+                self.assertTrue(
+                    bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: float64 and {np.dtype(dt).name}"
+                )
+                self.assertTrue(
+                    ds.nums.dtype == np.float64, msg=f"Failure in stacking: float64 and {np.dtype(dt).name}"
+                )
 
-        for dt in arr_types:
-            ds = Dataset({"nums": arange(5, dtype=dt)})
-            ds.save(r"riptable/tests/temp/upcast/" + np.dtype(dt).name)
-
-        int_dt = [np.int8, np.int16, np.int32, np.int64]
-        uint_dt = [np.uint8, np.uint16, np.uint32, np.uint64]
-        flt_dt = [np.float32, np.float64]
-
-        # float64
-        flt64 = r"riptable/tests/temp/upcast/float64"
-        for dt in int_dt + uint_dt + flt_dt:
-            files = [flt64, r"riptable/tests/temp/upcast/" + np.dtype(dt).name]
-            ds = load_sds(files, stack=True)
-            self.assertTrue(isinstance(ds, Dataset))
-            self.assertTrue(
-                bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: float64 and {np.dtype(dt).name}"
-            )
-            self.assertTrue(ds.nums.dtype == np.float64, msg=f"Failure in stacking: float64 and {np.dtype(dt).name}")
+            # float32
+            flt32 = f"{tmpdirname}/upcast/float32"
+            for dt in int_dt[:2] + uint_dt[:2]:
+                files = [flt32, f"{tmpdirname}/upcast/" + np.dtype(dt).name]
+                ds = load_sds(files, stack=True)
+                self.assertTrue(isinstance(ds, Dataset))
+                self.assertTrue(
+                    bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: float32 and {np.dtype(dt).name}"
+                )
+                self.assertTrue(
+                    ds.nums.dtype == np.float32, msg=f"Failure in stacking: float32 and {np.dtype(dt).name}"
+                )
+            for dt in int_dt[2:] + uint_dt[2:]:
+                files = [flt32, f"{tmpdirname}/upcast/" + np.dtype(dt).name]
+                ds = load_sds(files, stack=True)
+                self.assertTrue(isinstance(ds, Dataset))
+                self.assertTrue(
+                    bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: float32 and {np.dtype(dt).name}"
+                )
+                self.assertTrue(
+                    ds.nums.dtype == np.float64, msg=f"Failure in stacking: float32 and {np.dtype(dt).name}"
+                )
+            for dt in [int_dt[-1], uint_dt[-1], flt_dt[-1]]:
+                files = [flt32, f"{tmpdirname}/upcast/" + np.dtype(dt).name]
+                ds = load_sds(files, stack=True)
+                self.assertTrue(isinstance(ds, Dataset))
+                self.assertTrue(
+                    bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: float32 and {np.dtype(dt).name}"
+                )
+                self.assertTrue(
+                    ds.nums.dtype == np.float64, msg=f"Failure in stacking: float32 and {np.dtype(dt).name}"
+                )
 
-        # float32
-        flt32 = r"riptable/tests/temp/upcast/float32"
-        for dt in int_dt[:2] + uint_dt[:2]:
-            files = [flt32, r"riptable/tests/temp/upcast/" + np.dtype(dt).name]
-            ds = load_sds(files, stack=True)
-            self.assertTrue(isinstance(ds, Dataset))
-            self.assertTrue(
-                bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: float32 and {np.dtype(dt).name}"
-            )
-            self.assertTrue(ds.nums.dtype == np.float32, msg=f"Failure in stacking: float32 and {np.dtype(dt).name}")
-        for dt in int_dt[2:] + uint_dt[2:]:
-            files = [flt32, r"riptable/tests/temp/upcast/" + np.dtype(dt).name]
-            ds = load_sds(files, stack=True)
-            self.assertTrue(isinstance(ds, Dataset))
-            self.assertTrue(
-                bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: float32 and {np.dtype(dt).name}"
-            )
-            self.assertTrue(ds.nums.dtype == np.float64, msg=f"Failure in stacking: float32 and {np.dtype(dt).name}")
-        for dt in [int_dt[-1], uint_dt[-1], flt_dt[-1]]:
-            files = [flt32, r"riptable/tests/temp/upcast/" + np.dtype(dt).name]
-            ds = load_sds(files, stack=True)
-            self.assertTrue(isinstance(ds, Dataset))
-            self.assertTrue(
-                bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: float32 and {np.dtype(dt).name}"
-            )
-            self.assertTrue(ds.nums.dtype == np.float64, msg=f"Failure in stacking: float32 and {np.dtype(dt).name}")
+            # int64
+            i64 = f"{tmpdirname}/upcast/int64"
+            for dt in int_dt + uint_dt[:-1]:
+                files = [i64, f"{tmpdirname}/upcast/" + np.dtype(dt).name]
+                ds = load_sds(files, stack=True)
+                self.assertTrue(isinstance(ds, Dataset))
+                self.assertTrue(
+                    bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: int64 and {np.dtype(dt).name}"
+                )
+                self.assertTrue(ds.nums.dtype == np.int64, msg=f"Failure in stacking: int64 and {np.dtype(dt).name}")
+            for dt in flt_dt:
+                files = [i64, f"{tmpdirname}/upcast/" + np.dtype(dt).name]
+                ds = load_sds(files, stack=True)
+                self.assertTrue(isinstance(ds, Dataset))
+                self.assertTrue(
+                    bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: int64 and {np.dtype(dt).name}"
+                )
+                self.assertTrue(ds.nums.dtype == np.float64, msg=f"Failure in stacking: int64 and {np.dtype(dt).name}")
 
-        # int64
-        i64 = r"riptable/tests/temp/upcast/int64"
-        for dt in int_dt + uint_dt[:-1]:
-            files = [i64, r"riptable/tests/temp/upcast/" + np.dtype(dt).name]
-            ds = load_sds(files, stack=True)
-            self.assertTrue(isinstance(ds, Dataset))
-            self.assertTrue(bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: int64 and {np.dtype(dt).name}")
-            self.assertTrue(ds.nums.dtype == np.int64, msg=f"Failure in stacking: int64 and {np.dtype(dt).name}")
-        for dt in flt_dt:
-            files = [i64, r"riptable/tests/temp/upcast/" + np.dtype(dt).name]
-            ds = load_sds(files, stack=True)
-            self.assertTrue(isinstance(ds, Dataset))
-            self.assertTrue(bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: int64 and {np.dtype(dt).name}")
-            self.assertTrue(ds.nums.dtype == np.float64, msg=f"Failure in stacking: int64 and {np.dtype(dt).name}")
+            # int32
+            i32 = f"{tmpdirname}/upcast/int32"
+            for dt in int_dt[:-1] + uint_dt[:2]:
+                files = [i32, f"{tmpdirname}/upcast/" + np.dtype(dt).name]
+                ds = load_sds(files, stack=True)
+                self.assertTrue(isinstance(ds, Dataset))
+                self.assertTrue(
+                    bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: int32 and {np.dtype(dt).name}"
+                )
+                self.assertTrue(ds.nums.dtype == np.int32, msg=f"Failure in stacking: int32 and {np.dtype(dt).name}")
+            for dt in flt_dt:
+                files = [i32, f"{tmpdirname}/upcast/" + np.dtype(dt).name]
+                ds = load_sds(files, stack=True)
+                self.assertTrue(isinstance(ds, Dataset))
+                self.assertTrue(
+                    bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: int32 and {np.dtype(dt).name}"
+                )
+                self.assertTrue(ds.nums.dtype == np.float64, msg=f"Failure in stacking: int32 and {np.dtype(dt).name}")
 
-        # int32
-        i32 = r"riptable/tests/temp/upcast/int32"
-        for dt in int_dt[:-1] + uint_dt[:2]:
-            files = [i32, r"riptable/tests/temp/upcast/" + np.dtype(dt).name]
-            ds = load_sds(files, stack=True)
-            self.assertTrue(isinstance(ds, Dataset))
-            self.assertTrue(bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: int32 and {np.dtype(dt).name}")
-            self.assertTrue(ds.nums.dtype == np.int32, msg=f"Failure in stacking: int32 and {np.dtype(dt).name}")
-        for dt in flt_dt:
-            files = [i32, r"riptable/tests/temp/upcast/" + np.dtype(dt).name]
-            ds = load_sds(files, stack=True)
-            self.assertTrue(isinstance(ds, Dataset))
-            self.assertTrue(bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: int32 and {np.dtype(dt).name}")
-            self.assertTrue(ds.nums.dtype == np.float64, msg=f"Failure in stacking: int32 and {np.dtype(dt).name}")
+            # int16
+            i16 = f"{tmpdirname}/upcast/int16"
+            for dt in int_dt[:2] + uint_dt[:1]:
+                files = [i16, f"{tmpdirname}/upcast/" + np.dtype(dt).name]
+                ds = load_sds(files, stack=True)
+                self.assertTrue(isinstance(ds, Dataset))
+                self.assertTrue(
+                    bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: int16 and {np.dtype(dt).name}"
+                )
+                self.assertTrue(ds.nums.dtype == np.int16, msg=f"Failure in stacking: int16 and {np.dtype(dt).name}")
+            for dt in flt_dt:
+                files = [i16, f"{tmpdirname}/upcast/" + np.dtype(dt).name]
+                ds = load_sds(files, stack=True)
+                self.assertTrue(isinstance(ds, Dataset))
+                self.assertTrue(
+                    bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: int16 and {np.dtype(dt).name}"
+                )
+                self.assertTrue(ds.nums.dtype == dt, msg=f"Failure in stacking: int16 and {np.dtype(dt).name}")
 
-        # int16
-        i16 = r"riptable/tests/temp/upcast/int16"
-        for dt in int_dt[:2] + uint_dt[:1]:
-            files = [i16, r"riptable/tests/temp/upcast/" + np.dtype(dt).name]
-            ds = load_sds(files, stack=True)
-            self.assertTrue(isinstance(ds, Dataset))
-            self.assertTrue(bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: int16 and {np.dtype(dt).name}")
-            self.assertTrue(ds.nums.dtype == np.int16, msg=f"Failure in stacking: int16 and {np.dtype(dt).name}")
-        for dt in flt_dt:
-            files = [i16, r"riptable/tests/temp/upcast/" + np.dtype(dt).name]
-            ds = load_sds(files, stack=True)
-            self.assertTrue(isinstance(ds, Dataset))
-            self.assertTrue(bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: int16 and {np.dtype(dt).name}")
-            self.assertTrue(ds.nums.dtype == dt, msg=f"Failure in stacking: int16 and {np.dtype(dt).name}")
+            # int8
+            i8 = f"{tmpdirname}/upcast/int8"
+            for dt in int_dt + flt_dt:
+                files = [i8, f"{tmpdirname}/upcast/" + np.dtype(dt).name]
+                ds = load_sds(files, stack=True)
+                self.assertTrue(isinstance(ds, Dataset))
+                self.assertTrue(
+                    bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: int8 and {np.dtype(dt).name}"
+                )
+                self.assertTrue(ds.nums.dtype == dt, msg=f"Failure in stacking: int8 and {np.dtype(dt).name}")
 
-        # int8
-        i8 = r"riptable/tests/temp/upcast/int8"
-        for dt in int_dt + flt_dt:
-            files = [i8, r"riptable/tests/temp/upcast/" + np.dtype(dt).name]
-            ds = load_sds(files, stack=True)
-            self.assertTrue(isinstance(ds, Dataset))
-            self.assertTrue(bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: int8 and {np.dtype(dt).name}")
-            self.assertTrue(ds.nums.dtype == dt, msg=f"Failure in stacking: int8 and {np.dtype(dt).name}")
+            # uint64
+            ui64 = f"{tmpdirname}/upcast/uint64"
+            for dt in uint_dt:
+                files = [ui64, f"{tmpdirname}/upcast/" + np.dtype(dt).name]
+                ds = load_sds(files, stack=True)
+                self.assertTrue(isinstance(ds, Dataset))
+                self.assertTrue(
+                    bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: uint64 and {np.dtype(dt).name}"
+                )
+                self.assertTrue(ds.nums.dtype == np.uint64, msg=f"Failure in stacking: uint64 and {np.dtype(dt).name}")
+            for dt in int_dt[:-1]:
+                files = [ui64, f"{tmpdirname}/upcast/" + np.dtype(dt).name]
+                ds = load_sds(files, stack=True)
+                self.assertTrue(isinstance(ds, Dataset))
+                self.assertTrue(
+                    bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: uint64 and {np.dtype(dt).name}"
+                )
+                self.assertTrue(ds.nums.dtype == np.int64, msg=f"Failure in stacking: uint64 and {np.dtype(dt).name}")
 
-        # uint64
-        ui64 = r"riptable/tests/temp/upcast/uint64"
-        for dt in uint_dt:
-            files = [ui64, r"riptable/tests/temp/upcast/" + np.dtype(dt).name]
-            ds = load_sds(files, stack=True)
-            self.assertTrue(isinstance(ds, Dataset))
-            self.assertTrue(
-                bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: uint64 and {np.dtype(dt).name}"
-            )
-            self.assertTrue(ds.nums.dtype == np.uint64, msg=f"Failure in stacking: uint64 and {np.dtype(dt).name}")
-        for dt in int_dt[:-1]:
-            files = [ui64, r"riptable/tests/temp/upcast/" + np.dtype(dt).name]
-            ds = load_sds(files, stack=True)
-            self.assertTrue(isinstance(ds, Dataset))
-            self.assertTrue(
-                bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: uint64 and {np.dtype(dt).name}"
-            )
-            self.assertTrue(ds.nums.dtype == np.int64, msg=f"Failure in stacking: uint64 and {np.dtype(dt).name}")
+            # uint32
+            ui32 = f"{tmpdirname}/upcast/uint32"
+            for dt in int_dt[:-2]:
+                files = [ui32, f"{tmpdirname}/upcast/" + np.dtype(dt).name]
+                ds = load_sds(files, stack=True)
+                self.assertTrue(isinstance(ds, Dataset))
+                self.assertTrue(
+                    bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: uint32 and {np.dtype(dt).name}"
+                )
+                self.assertTrue(ds.nums.dtype == np.int64, msg=f"Failure in stacking: uint32 and {np.dtype(dt).name}")
+            for dt in uint_dt[:-1]:
+                files = [ui32, f"{tmpdirname}/upcast/" + np.dtype(dt).name]
+                ds = load_sds(files, stack=True)
+                self.assertTrue(isinstance(ds, Dataset))
+                self.assertTrue(
+                    bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: uint32 and {np.dtype(dt).name}"
+                )
+                self.assertTrue(ds.nums.dtype == np.uint32, msg=f"Failure in stacking: uint32 and {np.dtype(dt).name}")
 
-        # uint32
-        ui32 = r"riptable/tests/temp/upcast/uint32"
-        for dt in int_dt[:-2]:
-            files = [ui32, r"riptable/tests/temp/upcast/" + np.dtype(dt).name]
-            ds = load_sds(files, stack=True)
-            self.assertTrue(isinstance(ds, Dataset))
-            self.assertTrue(
-                bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: uint32 and {np.dtype(dt).name}"
-            )
-            self.assertTrue(ds.nums.dtype == np.int64, msg=f"Failure in stacking: uint32 and {np.dtype(dt).name}")
-        for dt in uint_dt[:-1]:
-            files = [ui32, r"riptable/tests/temp/upcast/" + np.dtype(dt).name]
-            ds = load_sds(files, stack=True)
-            self.assertTrue(isinstance(ds, Dataset))
-            self.assertTrue(
-                bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: uint32 and {np.dtype(dt).name}"
-            )
-            self.assertTrue(ds.nums.dtype == np.uint32, msg=f"Failure in stacking: uint32 and {np.dtype(dt).name}")
+            # uint16
+            ui16 = f"{tmpdirname}/upcast/uint16"
+            for dt in int_dt[:-3]:
+                files = [ui16, f"{tmpdirname}/upcast/" + np.dtype(dt).name]
+                ds = load_sds(files, stack=True)
+                self.assertTrue(isinstance(ds, Dataset))
+                self.assertTrue(
+                    bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: uint16 and {np.dtype(dt).name}"
+                )
+                self.assertTrue(ds.nums.dtype == np.int32, msg=f"Failure in stacking: uint16 and {np.dtype(dt).name}")
+            for dt in uint_dt[:2]:
+                files = [ui16, f"{tmpdirname}/upcast/" + np.dtype(dt).name]
+                ds = load_sds(files, stack=True)
+                self.assertTrue(isinstance(ds, Dataset))
+                self.assertTrue(
+                    bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: uint16 and {np.dtype(dt).name}"
+                )
+                self.assertTrue(ds.nums.dtype == np.uint16, msg=f"Failure in stacking: uint16 and {np.dtype(dt).name}")
 
-        # uint16
-        ui16 = r"riptable/tests/temp/upcast/uint16"
-        for dt in int_dt[:-3]:
-            files = [ui16, r"riptable/tests/temp/upcast/" + np.dtype(dt).name]
+            # int + uint to larger itemsize
+            # 32 -> 64
+            files = [i32, ui32]
             ds = load_sds(files, stack=True)
             self.assertTrue(isinstance(ds, Dataset))
-            self.assertTrue(
-                bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: uint16 and {np.dtype(dt).name}"
-            )
-            self.assertTrue(ds.nums.dtype == np.int32, msg=f"Failure in stacking: uint16 and {np.dtype(dt).name}")
-        for dt in uint_dt[:2]:
-            files = [ui16, r"riptable/tests/temp/upcast/" + np.dtype(dt).name]
+            self.assertTrue(bool(np.all(ds.nums == correct)), msg=f"Failed to upcast int32/uint32 -> int64")
+            self.assertTrue(ds.nums.dtype == np.int64, msg="Failed to upcast int32/uint32 -> int64")
+
+            # 16 -> 32
+            files = [i16, ui16]
             ds = load_sds(files, stack=True)
             self.assertTrue(isinstance(ds, Dataset))
-            self.assertTrue(
-                bool(np.all(ds.nums == correct)), msg=f"Failure in stacking: uint16 and {np.dtype(dt).name}"
-            )
-            self.assertTrue(ds.nums.dtype == np.uint16, msg=f"Failure in stacking: uint16 and {np.dtype(dt).name}")
+            self.assertTrue(bool(np.all(ds.nums == correct)), msg=f"Failed to upcast int16/uint16 -> int32")
+            self.assertTrue(ds.nums.dtype == np.int32, msg="Failed to upcast int16/uint16 -> int32")
 
-        # int + uint to larger itemsize
-        # 32 -> 64
-        files = [i32, ui32]
-        ds = load_sds(files, stack=True)
-        self.assertTrue(isinstance(ds, Dataset))
-        self.assertTrue(bool(np.all(ds.nums == correct)), msg=f"Failed to upcast int32/uint32 -> int64")
-        self.assertTrue(ds.nums.dtype == np.int64, msg="Failed to upcast int32/uint32 -> int64")
-
-        # 16 -> 32
-        files = [i16, ui16]
-        ds = load_sds(files, stack=True)
-        self.assertTrue(isinstance(ds, Dataset))
-        self.assertTrue(bool(np.all(ds.nums == correct)), msg=f"Failed to upcast int16/uint16 -> int32")
-        self.assertTrue(ds.nums.dtype == np.int32, msg="Failed to upcast int16/uint16 -> int32")
-
-        ui8 = r"riptable/tests/temp/upcast/uint8"
-
-        # 8 -> 16
-        files = [i8, ui8]
-        ds = load_sds(files, stack=True)
-        self.assertTrue(isinstance(ds, Dataset))
-        self.assertTrue(bool(np.all(ds.nums == correct)), msg=f"Failed to upcast int8/uint8 -> int16")
-        self.assertTrue(ds.nums.dtype == np.int16, msg="Failed to upcast int8/uint8 -> int16")
+            ui8 = f"{tmpdirname}/upcast/uint8"
 
-        shutil.rmtree(r"riptable/tests/temp/upcast")
+            # 8 -> 16
+            files = [i8, ui8]
+            ds = load_sds(files, stack=True)
+            self.assertTrue(isinstance(ds, Dataset))
+            self.assertTrue(bool(np.all(ds.nums == correct)), msg=f"Failed to upcast int8/uint8 -> int16")
+            self.assertTrue(ds.nums.dtype == np.int16, msg="Failed to upcast int8/uint8 -> int16")
 
     def test_save_classname(self):
-        files = [
-            r"riptable/tests/temp/tempsave/cat",
-            r"riptable/tests/temp/tempsave/dtn",
-            r"riptable/tests/temp/tempsave/ts",
-            r"riptable/tests/temp/tempsave/d",
-            r"riptable/tests/temp/tempsave/dspan",
-        ]
-        c = Categorical(["a", "a", "b", "c", "a"])
-        c.save(files[0])
-        dtn = DateTimeNano.random(5)
-        dtn.save(files[1])
-        ts = TimeSpan(arange(100))
-        ts.save(files[2])
-        d = Date.range(20190202, 20191231)
-        d.save(files[3])
-        dspan = DateSpan(arange(100))
-        dspan.save(files[4])
-
-        types = [Categorical, DateTimeNano, TimeSpan, Date, DateSpan]
-        typenames = [cls.__name__ for cls in types]
-
-        # pull all the single items, compare typenames
-        for i, t_name in enumerate(typenames):
-            meta = MetaData(decompress_dataset_internal(files[i])[0][0])
-            meta = MetaData(meta["item_meta"][0])
-            self.assertEqual(meta["classname"], t_name)
-
-        files = [
-            r"riptable/tests/temp/tempsave/ds",
-            r"riptable/tests/temp/tempsave/st",
-            r"riptable/tests/temp/tempsave/pds",
-        ]
-
-        # test containers
-        ds = Dataset({dt.__name__: arange(10, dtype=dt) for dt in arr_types})
-        ds.save(files[0])
-        st = Struct({"singlearr": arange(5)})
-        st.save(files[1])
-        pds = PDataset([ds, ds])
-        pds.save(files[2])
-
-        typenames = ["Dataset", "Struct", "PDataset"]
-        for i, t_name in enumerate(typenames):
-            meta = MetaData(decompress_dataset_internal(files[i])[0][0])
-            self.assertEqual(typenames[i], meta["classname"])
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            files = [
+                f"{tmpdirname}/tempsave/cat",
+                f"{tmpdirname}/tempsave/dtn",
+                f"{tmpdirname}/tempsave/ts",
+                f"{tmpdirname}/tempsave/d",
+                f"{tmpdirname}/tempsave/dspan",
+            ]
+            c = Categorical(["a", "a", "b", "c", "a"])
+            c.save(files[0])
+            dtn = DateTimeNano.random(5)
+            dtn.save(files[1])
+            ts = TimeSpan(arange(100))
+            ts.save(files[2])
+            d = Date.range(20190202, 20191231)
+            d.save(files[3])
+            dspan = DateSpan(arange(100))
+            dspan.save(files[4])
+
+            types = [Categorical, DateTimeNano, TimeSpan, Date, DateSpan]
+            typenames = [cls.__name__ for cls in types]
+
+            # pull all the single items, compare typenames
+            for i, t_name in enumerate(typenames):
+                meta = MetaData(decompress_dataset_internal(files[i])[0][0])
+                meta = MetaData(meta["item_meta"][0])
+                self.assertEqual(meta["classname"], t_name)
+
+            files = [
+                f"{tmpdirname}/tempsave/ds",
+                f"{tmpdirname}/tempsave/st",
+                f"{tmpdirname}/tempsave/pds",
+            ]
 
-        shutil.rmtree(r"riptable/tests/temp/tempsave")
+            # test containers
+            ds = Dataset({dt.__name__: arange(10, dtype=dt) for dt in arr_types})
+            ds.save(files[0])
+            st = Struct({"singlearr": arange(5)})
+            st.save(files[1])
+            pds = PDataset([ds, ds])
+            pds.save(files[2])
+
+            typenames = ["Dataset", "Struct", "PDataset"]
+            for i, t_name in enumerate(typenames):
+                meta = MetaData(decompress_dataset_internal(files[i])[0][0])
+                self.assertEqual(typenames[i], meta["classname"])
 
     def test_load_list(self):
-        files = [
-            pathlib.PurePath(x)
-            for x in [
-                r"riptable/tests/temp/tempsave/ds",
-                r"riptable/tests/temp/tempsave/st",
-                r"riptable/tests/temp/tempsave/cat",
-                r"riptable/tests/temp/tempsave/fa",
-                r"riptable/tests/temp/tempsave/dtn",
-                r"riptable/tests/temp/tempsave/ts",
-                r"riptable/tests/temp/tempsave/d",
-                r"riptable/tests/temp/tempsave/dspan",
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            files = [
+                pathlib.PurePath(x)
+                for x in [
+                    f"{tmpdirname}/tempsave/ds",
+                    f"{tmpdirname}/tempsave/st",
+                    f"{tmpdirname}/tempsave/cat",
+                    f"{tmpdirname}/tempsave/fa",
+                    f"{tmpdirname}/tempsave/dtn",
+                    f"{tmpdirname}/tempsave/ts",
+                    f"{tmpdirname}/tempsave/d",
+                    f"{tmpdirname}/tempsave/dspan",
+                ]
             ]
-        ]
-
-        ds = Dataset({dt.__name__: arange(10, dtype=dt) for dt in arr_types})
-        ds.save(files[0])
-        st = Struct({"ds1": ds, "ds2": ds})
-        st.save(files[1])
-        c = Categorical(["a", "a", "b", "c", "a"])
-        c.save(files[2])
-        a = arange(1000)
-        a.save(files[3])
-        dtn = DateTimeNano.random(5)
-        dtn.save(files[4])
-        ts = TimeSpan(arange(100))
-        ts.save(files[5])
-        d = Date.range(20190202, 20191231)
-        d.save(files[6])
-        dspan = DateSpan(arange(100))
-        dspan.save(files[7])
 
-        reload = load_sds(files)
-        types = [Dataset, Struct, Categorical, FastArray, DateTimeNano, TimeSpan, Date, DateSpan]
+            ds = Dataset({dt.__name__: arange(10, dtype=dt) for dt in arr_types})
+            ds.save(files[0])
+            st = Struct({"ds1": ds, "ds2": ds})
+            st.save(files[1])
+            c = Categorical(["a", "a", "b", "c", "a"])
+            c.save(files[2])
+            a = arange(1000)
+            a.save(files[3])
+            dtn = DateTimeNano.random(5)
+            dtn.save(files[4])
+            ts = TimeSpan(arange(100))
+            ts.save(files[5])
+            d = Date.range(20190202, 20191231)
+            d.save(files[6])
+            dspan = DateSpan(arange(100))
+            dspan.save(files[7])
 
-        for i, item in enumerate(reload):
-            self.assertTrue(isinstance(item, types[i]), msg=f"expected {types[i]} got {type(item)}")
+            reload = load_sds(files)
+            types = [Dataset, Struct, Categorical, FastArray, DateTimeNano, TimeSpan, Date, DateSpan]
 
-        shutil.rmtree(r"riptable/tests/temp/tempsave")
+            for i, item in enumerate(reload):
+                self.assertTrue(isinstance(item, types[i]), msg=f"expected {types[i]} got {type(item)}")
 
     def test_load_list_include(self):
-        ds = Dataset({"col_" + str(i): arange(5) for i in range(5)})
-        ds.save(r"riptable/tests/temp/tempsave/ds1")
-        ds.save(r"riptable/tests/temp/tempsave/ds2")
-        files = [
-            pathlib.PurePath(x) for x in [r"riptable/tests/temp/tempsave/ds1", r"riptable/tests/temp/tempsave/ds2"]
-        ]
-        inc = ["col_2", "col_3"]
-        reload = load_sds(files, include=inc)
-        for d in reload:
-            self.assertTrue(isinstance(d, Dataset))
-            self.assertTrue(bool(np.all(list(d) == inc)))
-
-        shutil.rmtree(r"riptable/tests/temp/tempsave")
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset({"col_" + str(i): arange(5) for i in range(5)})
+            ds.save(f"{tmpdirname}/tempsave/ds1")
+            ds.save(f"{tmpdirname}/tempsave/ds2")
+            files = [pathlib.PurePath(x) for x in [f"{tmpdirname}/tempsave/ds1", f"{tmpdirname}/tempsave/ds2"]]
+            inc = ["col_2", "col_3"]
+            reload = load_sds(files, include=inc)
+            for d in reload:
+                self.assertTrue(isinstance(d, Dataset))
+                self.assertTrue(bool(np.all(list(d) == inc)))
 
     def test_fix_strides(self):
-        arr = arange(20, dtype=np.int32)
-        arr = arr[::2]
-        self.assertEqual(arr.strides[0], 8)
-        arr.save(r"riptable/tests/temp/arr")
-
-        arr2 = load_sds(r"riptable/tests/temp/arr")
-        self.assertEqual(arr2.strides[0], 4, msg=f"{arr2}")
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            arr = arange(20, dtype=np.int32)
+            arr = arr[::2]
+            self.assertEqual(arr.strides[0], 8)
+            arr.save(f"{tmpdirname}/arr")
 
-        self.assertTrue(bool(np.all(arr == arr2)))
+            arr2 = load_sds(f"{tmpdirname}/arr")
+            self.assertEqual(arr2.strides[0], 4, msg=f"{arr2}")
 
-        os.remove(r"riptable/tests/temp/arr.sds")
+            self.assertTrue(bool(np.all(arr == arr2)))
 
     def test_stack_fa_subclass(self):
-        ds = Dataset(
-            {
-                "CAT": Categorical(np.random.choice(["a", "b", "c"], 1000)),
-                "DTN": DateTimeNano.random(1000),
-                "DATE": Date(np.random.randint(15000, 20000, 1000)),
-                "TSPAN": TimeSpan(np.random.randint(0, 1_000_000_000 * 60 * 60 * 24, 1000, dtype=np.int64)),
-                "DSPAN": DateSpan(np.random.randint(0, 365, 1000)),
-            }
-        )
-        files = [r"riptable/tests/temp/ds" + str(i) + ".sds" for i in range(3)]
-        for f in files:
-            ds.save(f)
-
-        pds = load_sds(files, stack=True)
-        self.assertTrue(isinstance(pds, PDataset))
-        for k, v in pds.items():
-            self.assertEqual(type(v), type(ds[k]))
-
-        for f in files:
-            os.remove(f)
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset(
+                {
+                    "CAT": Categorical(np.random.choice(["a", "b", "c"], 1000)),
+                    "DTN": DateTimeNano.random(1000),
+                    "DATE": Date(np.random.randint(15000, 20000, 1000)),
+                    "TSPAN": TimeSpan(np.random.randint(0, 1_000_000_000 * 60 * 60 * 24, 1000, dtype=np.int64)),
+                    "DSPAN": DateSpan(np.random.randint(0, 365, 1000)),
+                }
+            )
+            files = [f"{tmpdirname}/ds" + str(i) + ".sds" for i in range(3)]
+            for f in files:
+                ds.save(f)
+
+            pds = load_sds(files, stack=True)
+            self.assertTrue(isinstance(pds, PDataset))
+            for k, v in pds.items():
+                self.assertEqual(type(v), type(ds[k]))
 
     def test_stack_multikey(self):
-        paths = [r"riptable/tests/temp/ds1.sds", r"riptable/tests/temp/ds2.sds"]
-
-        a_strings = FA(["b", "a", "c", "a"])
-        a_nums = FA([1, 1, 3, 1])
-        mkcat_a = Cat([a_strings, a_nums])
-        single_a = Cat(FA(["b1", "a1", "c3", "a1"]))
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            paths = [f"{tmpdirname}/ds1.sds", f"{tmpdirname}/ds2.sds"]
 
-        b_strings = FA(["a", "b", "a", "c"])
-        b_nums = FA([1, 2, 1, 3])
-        single_b = Cat(FA(["a1", "b2", "a1", "c3"]))
-        mkcat_b = Cat([b_strings, b_nums])
+            a_strings = FA(["b", "a", "c", "a"])
+            a_nums = FA([1, 1, 3, 1])
+            mkcat_a = Cat([a_strings, a_nums])
+            single_a = Cat(FA(["b1", "a1", "c3", "a1"]))
 
-        ds1 = Dataset({"mkcat": mkcat_a, "singlecat": single_a})
-        ds1.save(paths[0])
+            b_strings = FA(["a", "b", "a", "c"])
+            b_nums = FA([1, 2, 1, 3])
+            single_b = Cat(FA(["a1", "b2", "a1", "c3"]))
+            mkcat_b = Cat([b_strings, b_nums])
 
-        ds2 = Dataset({"mkcat": mkcat_b, "singlecat": single_b})
-        ds2.save(paths[1])
+            ds1 = Dataset({"mkcat": mkcat_a, "singlecat": single_a})
+            ds1.save(paths[0])
 
-        ds3 = load_sds(paths, stack=True)
+            ds2 = Dataset({"mkcat": mkcat_b, "singlecat": single_b})
+            ds2.save(paths[1])
 
-        self.assertTrue(isinstance(ds3, PDataset))
+            ds3 = load_sds(paths, stack=True)
 
-        correct_single = FA(["b1", "a1", "c3", "a1", "a1", "b2", "a1", "c3"])
-        self.assertTrue(arr_eq(correct_single, ds3.singlecat.expand_array))
+            self.assertTrue(isinstance(ds3, PDataset))
 
-        correct_mk_ikey = FastArray([1, 2, 3, 2, 2, 4, 2, 3])
-        self.assertTrue(arr_eq(correct_mk_ikey, ds3.mkcat._fa))
+            correct_single = FA(["b1", "a1", "c3", "a1", "a1", "b2", "a1", "c3"])
+            self.assertTrue(arr_eq(correct_single, ds3.singlecat.expand_array))
 
-        correct_mk_strings = FA(["b", "a", "c", "b"])
-        correct_mk_nums = FA([1, 1, 3, 2])
-        mk_cols = [correct_mk_strings, correct_mk_nums]
-        result_cols = list(ds3.mkcat.category_dict.values())
-        for i, col in enumerate(mk_cols):
-            self.assertTrue(arr_eq(result_cols[i], col))
+            correct_mk_ikey = FastArray([1, 2, 3, 2, 2, 4, 2, 3])
+            self.assertTrue(arr_eq(correct_mk_ikey, ds3.mkcat._fa))
 
-        for p in paths:
-            os.remove(p)
+            correct_mk_strings = FA(["b", "a", "c", "b"])
+            correct_mk_nums = FA([1, 1, 3, 2])
+            mk_cols = [correct_mk_strings, correct_mk_nums]
+            result_cols = list(ds3.mkcat.category_dict.values())
+            for i, col in enumerate(mk_cols):
+                self.assertTrue(arr_eq(result_cols[i], col))
 
     # def test_include_dataset_shared(self):
     #    ds = Dataset({'col_'+str(i):arange(5) for i in range(5)})
     #    inc = ['col_1', 'col_3']
-    #    ds.save(r'riptable/tests/temp/tempds', share='testshare1')
-    #    ds2 = load_sds(r'riptable/tests/temp/tempds', share='testshare1', include=inc)
+    #    ds.save(r'riptable/tests/tempds', share='testshare1')
+    #    ds2 = load_sds(r'riptable/tests/tempds', share='testshare1', include=inc)
     #    self.assertEqual(len(ds2), 2)
     #    self.assertTrue(list(ds2)==inc)
     #    self.assertTrue(isinstance(ds2, Dataset))
     #    with self.assertRaises(FileNotFoundError):
-    #        os.remove(r'riptable/tests/temp/tempds.sds')
+    #        os.remove(r'riptable/tests/tempds.sds')
 
     # include keyword works differently with multi-file load
     # def test_include_struct(self):
     #    ds = Dataset({'col_'+str(i):arange(5) for i in range(5)})
     #    st = Struct({'ds1':ds, 'ds2':ds, 'ds3':ds, 'arr':arange(5)})
     #    inc = ['ds1','ds3','col_0','col_1','col_2','col_3','col_4']
-    #    st.save(r'riptable/tests/temp/temp_st')
-    #    st2 = load_sds(r'riptable/tests/temp/temp_st', include=inc)
+    #    st.save(r'riptable/tests/temp_st')
+    #    st2 = load_sds(r'riptable/tests/temp_st', include=inc)
     #    self.assertEqual(len(st2), 2)
     #    self.assertTrue(list(st2)==inc)
     #    self.assertTrue(isinstance(st2, Struct))
     #    self.assertFalse(isinstance(st2, Dataset))
     #    self.assertTrue(list(st.ds1) == list(st2.ds1))
 
     #    inc = ['ds2', 'arr','col_0','col_1','col_2','col_3','col_4']
-    #    st2 = load_sds(r'riptable/tests/temp/temp_st', include=inc)
+    #    st2 = load_sds(r'riptable/tests/temp_st', include=inc)
     #    self.assertEqual(len(st2), 2)
     #    self.assertTrue(list(st2)==inc)
     #    self.assertTrue(isinstance(st2, Struct))
     #    self.assertFalse(isinstance(st2, Dataset))
     #    self.assertTrue(list(st.ds2) == list(st2.ds2))
 
-    #    shutil.rmtree(r'riptable/tests/temp/temp_st')
-
     # def test_include_struct_shared(self):
     #    ds = Dataset({'col_'+str(i):arange(5) for i in range(5)})
     #    st = Struct({'ds1':ds, 'ds2':ds, 'ds3':ds, 'arr':arange(5)})
     #    inc = ['ds1','ds3']
-    #    st.save(r'riptable/tests/temp/temp_st', share='testshare2')
-    #    st2 = load_sds(r'riptable/tests/temp/temp_st', share='testshare2', include=inc)
+    #    st.save(r'riptable/tests/temp_st', share='testshare2')
+    #    st2 = load_sds(r'riptable/tests/temp_st', share='testshare2', include=inc)
     #    self.assertEqual(len(st2), 2)
     #    self.assertTrue(list(st2)==inc)
     #    self.assertTrue(isinstance(st2, Struct))
     #    self.assertFalse(isinstance(st2, Dataset))
     #    self.assertTrue(list(st.ds1) == list(st2.ds1))
 
     #    inc = ['ds2', 'arr']
-    #    st2 = load_sds(r'riptable/tests/temp/temp_st', share='testshare2', include=inc)
+    #    st2 = load_sds(r'riptable/tests/temp_st', share='testshare2', include=inc)
     #    self.assertEqual(len(st2), 2)
     #    self.assertTrue(list(st2)==inc)
     #    self.assertTrue(isinstance(st2, Struct))
     #    self.assertFalse(isinstance(st2, Dataset))
     #    self.assertTrue(list(st.ds2) == list(st2.ds2))
-    #    with self.assertRaises(FileNotFoundError):
-    #        shutil.rmtree(r'riptable/tests/temp/temp_st')
 
     def test_include_categorical(self):
-        ds = Dataset({"arr": arange(5), "cat_col": Categorical(["a", "a", "b", "c", "a"])})
-        ds.save(r"riptable/tests/temp/temp_cat")
-
-        ds2 = load_sds(r"riptable/tests/temp/temp_cat", include=["cat_col"])
-        self.assertTrue(list(ds2) == ["cat_col"])
-        self.assertTrue(isinstance(ds2.cat_col, Categorical))
-        self.assertTrue(bool(np.all(ds.cat_col == ds2.cat_col)))
-
-        os.remove(r"riptable/tests/temp/temp_cat.sds")
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset({"arr": arange(5), "cat_col": Categorical(["a", "a", "b", "c", "a"])})
+            ds.save(f"{tmpdirname}/temp_cat")
+
+            ds2 = load_sds(f"{tmpdirname}/temp_cat", include=["cat_col"])
+            self.assertTrue(list(ds2) == ["cat_col"])
+            self.assertTrue(isinstance(ds2.cat_col, Categorical))
+            self.assertTrue(bool(np.all(ds.cat_col == ds2.cat_col)))
 
     def test_include_categorical_multi(self):
-        ds = Dataset({"arr": arange(5), "cat_col": Categorical([np.array(["a", "a", "b", "c", "a"]), arange(5)])})
-        ds.save(r"riptable/tests/temp/temp_cat")
-
-        ds2 = load_sds(r"riptable/tests/temp/temp_cat", include=["cat_col"])
-        self.assertTrue(list(ds2) == ["cat_col"])
-        self.assertTrue(isinstance(ds2.cat_col, Categorical))
-
-        os.remove(r"riptable/tests/temp/temp_cat.sds")
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset({"arr": arange(5), "cat_col": Categorical([np.array(["a", "a", "b", "c", "a"]), arange(5)])})
+            ds.save(f"{tmpdirname}/temp_cat")
+
+            ds2 = load_sds(f"{tmpdirname}/temp_cat", include=["cat_col"])
+            self.assertTrue(list(ds2) == ["cat_col"])
+            self.assertTrue(isinstance(ds2.cat_col, Categorical))
 
     def test_sections(self):
-        f = r"riptable/tests/temp/temp_cat.sds"
-        ds = Dataset({"arr": arange(5), "cat_col": Categorical([np.array(["a", "a", "b", "c", "a"]), arange(5)])})
-        for i in range(3):
-            ds.save(f, append=str(i))
-            ds.arr += 5
-        ds2 = load_sds(f, stack=True)
-        self.assertTrue(np.all(ds2.arr == arange(15)))
-
-        # now add the section later (save first with no section name)
-        ds = Dataset({"arr": arange(5), "cat_col": Categorical([np.array(["a", "a", "b", "c", "a"]), arange(5)])})
-        ds.save(f)
-        # remove catcol, change dataset length
-        ds = Dataset({"arr": arange(15) + 5})
-        ds.save(f, append="test")
-        ds.arr += 15
-        ds.save(f, append="test")
-
-        # now read the data vertically using stack=True
-        # can it auto gap fill a categorical?
-        ds2 = load_sds(f, stack=True)
-        self.assertTrue(np.all(ds2.arr == arange(35)))
-
-        ds2 = load_sds(f, include=["cat_col"], stack=True)
-        self.assertTrue(list(ds2) == ["cat_col"])
-        self.assertTrue(isinstance(ds2.cat_col, Categorical))
-        # make sure it dropped arr
-        self.assertFalse(list(ds2) == ["arr"])
-
-        # now do multiple files that have append section
-        ds2 = load_sds([f, f], stack=True)
-        # it should have stacked 6 sections total
-        self.assertTrue(np.all(ds2.arr == hstack([np.arange(35), np.arange(35)])))
-
-        # now read the data horizontal by removing stack=True
-        ds2 = load_sds(f, include="arr", stack=False)
-        # make sure there are 3 datasets
-        self.assertTrue(len(ds2) == 3, msg=f"got {ds2}")
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            f = f"{tmpdirname}/temp_cat.sds"
+            ds = Dataset({"arr": arange(5), "cat_col": Categorical([np.array(["a", "a", "b", "c", "a"]), arange(5)])})
+            for i in range(3):
+                ds.save(f, append=str(i))
+                ds.arr += 5
+            ds2 = load_sds(f, stack=True)
+            self.assertTrue(np.all(ds2.arr == arange(15)))
 
-        # make sure the first dataset is the first dataset we saved
-        self.assertTrue(np.all(ds2[0].arr == arange(5)))
+            # now add the section later (save first with no section name)
+            ds = Dataset({"arr": arange(5), "cat_col": Categorical([np.array(["a", "a", "b", "c", "a"]), arange(5)])})
+            ds.save(f)
+            # remove catcol, change dataset length
+            ds = Dataset({"arr": arange(15) + 5})
+            ds.save(f, append="test")
+            ds.arr += 15
+            ds.save(f, append="test")
+
+            # now read the data vertically using stack=True
+            # can it auto gap fill a categorical?
+            ds2 = load_sds(f, stack=True)
+            self.assertTrue(np.all(ds2.arr == arange(35)))
+
+            ds2 = load_sds(f, include=["cat_col"], stack=True)
+            self.assertTrue(list(ds2) == ["cat_col"])
+            self.assertTrue(isinstance(ds2.cat_col, Categorical))
+            # make sure it dropped arr
+            self.assertFalse(list(ds2) == ["arr"])
+
+            # now do multiple files that have append section
+            ds2 = load_sds([f, f], stack=True)
+            # it should have stacked 6 sections total
+            self.assertTrue(np.all(ds2.arr == hstack([np.arange(35), np.arange(35)])))
+
+            # now read the data horizontal by removing stack=True
+            ds2 = load_sds(f, include="arr", stack=False)
+            # make sure there are 3 datasets
+            self.assertTrue(len(ds2) == 3, msg=f"got {ds2}")
 
-        os.remove(f)
+            # make sure the first dataset is the first dataset we saved
+            self.assertTrue(np.all(ds2[0].arr == arange(5)))
 
     def test_fix_path(self):
-        ds = Dataset({"col_" + str(i): arange(5) for i in range(5)})
-        st = Struct({"ds1": ds, "ds2": ds, "ds3": ds, "arr": arange(5)})
-        st.save(r"riptable/tests/temp/save_st_dir")
-        # auto remove .sds extension
-        st2 = Struct.load(r"riptable/tests/temp/save_st_dir.sds")
-        self.assertTrue(isinstance(st2, Struct))
-        st2 = load_sds(r"riptable/tests/temp/save_st_dir.sds")
-        self.assertTrue(isinstance(st2, Struct))
-        shutil.rmtree(r"riptable/tests/temp/save_st_dir")
-
-        # auto add .sds extension
-        ds.save(r"riptable/tests/temp/temp_save_ds")
-        ds2 = Dataset.load(r"riptable/tests/temp/temp_save_ds")
-        self.assertTrue(isinstance(ds2, Dataset))
-        ds2 = load_sds(r"riptable/tests/temp/temp_save_ds")
-        self.assertTrue(isinstance(ds2, Dataset))
-        os.remove(r"riptable/tests/temp/temp_save_ds.sds")
-
-        # not file or directory (.sds added)
-        with self.assertRaises(ValueError):
-            ds = Dataset.load(r"riptable/tests/temp/tempgarbagenamewithext.sds")
-        with self.assertRaises(ValueError):
-            st = Struct.load(r"riptable/tests/temp/tempgarbagenamewithext.sds")
-
-        # not file or directory (without .sds)
-        with self.assertRaises(ValueError):
-            ds = Dataset.load(r"riptable/tests/temp/tempgarbagenamewihtoutext")
-        with self.assertRaises(ValueError):
-            ds = Struct.load(r"riptable/tests/temp/tempgarbagenamewihtoutext")
-
-        # st.save(r'riptable/tests/temp/struct_with_ext.sds')
-        # self.assertTrue(os.path.isdir(r'riptable/tests/temp/struct_with_ext'))
-        # shutil.rmtree(r'riptable/tests/temp/struct_with_ext')
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset({"col_" + str(i): arange(5) for i in range(5)})
+            st = Struct({"ds1": ds, "ds2": ds, "ds3": ds, "arr": arange(5)})
+            st.save(f"{tmpdirname}/save_st_dir")
+            # auto remove .sds extension
+            st2 = Struct.load(f"{tmpdirname}/save_st_dir.sds")
+            self.assertTrue(isinstance(st2, Struct))
+            st2 = load_sds(f"{tmpdirname}/save_st_dir.sds")
+            self.assertTrue(isinstance(st2, Struct))
+
+            # auto add .sds extension
+            ds.save(f"{tmpdirname}/temp_save_ds")
+            ds2 = Dataset.load(f"{tmpdirname}/temp_save_ds")
+            self.assertTrue(isinstance(ds2, Dataset))
+            ds2 = load_sds(f"{tmpdirname}/temp_save_ds")
+            self.assertTrue(isinstance(ds2, Dataset))
+            os.remove(f"{tmpdirname}/temp_save_ds.sds")
+
+            # not file or directory (.sds added)
+            with self.assertRaises(ValueError):
+                ds = Dataset.load(f"{tmpdirname}/tempgarbagenamewithext.sds")
+            with self.assertRaises(ValueError):
+                st = Struct.load(f"{tmpdirname}/tempgarbagenamewithext.sds")
+
+            # not file or directory (without .sds)
+            with self.assertRaises(ValueError):
+                ds = Dataset.load(f"{tmpdirname}/tempgarbagenamewihtoutext")
+            with self.assertRaises(ValueError):
+                ds = Struct.load(f"{tmpdirname}/tempgarbagenamewihtoutext")
+
+        # st.save(r'riptable/tests/struct_with_ext.sds')
+        # self.assertTrue(os.path.isdir(r'riptable/tests/struct_with_ext'))
+        #
 
     def test_double_nested(self):
-        st = Struct({"nested": Struct({"ds": Dataset({"arr": arange(5)})})})
-        st.save(r"riptable/tests/temp/save_st")
-        st2 = load_sds(r"riptable/tests/temp/save_st")
-        self.assertTrue(isinstance(st2, Struct))
-        # struct, not dictionary
-        self.assertTrue(isinstance(st2.nested, Struct))
-        self.assertTrue(isinstance(st2.nested.ds, Dataset))
-        # also make sure no file was created
-        self.assertFalse(os.path.exists(r"riptable/tests/temp/save_st/nested.sds"))
-
-        shutil.rmtree(r"riptable/tests/temp/save_st")
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            st = Struct({"nested": Struct({"ds": Dataset({"arr": arange(5)})})})
+            st.save(f"{tmpdirname}/save_st")
+            st2 = load_sds(f"{tmpdirname}/save_st")
+            self.assertTrue(isinstance(st2, Struct))
+            # struct, not dictionary
+            self.assertTrue(isinstance(st2.nested, Struct))
+            self.assertTrue(isinstance(st2.nested.ds, Dataset))
+            # also make sure no file was created
+            self.assertFalse(os.path.exists(f"{tmpdirname}/save_st/nested.sds"))
 
     def test_sds_flatten(self):
-        ds = Dataset({"col_" + str(i): arange(5) for i in range(5)})
-        st = Struct({"ds1": ds, "ds2": ds, "ds3": ds, "arr": arange(5)})
-        shutil.rmtree(r"riptable/tests/temp")
-        os.makedirs(r"riptable/tests/temp")
-        st.save(r"riptable/tests/temp/root_temp")
-        st.save(r"riptable/tests/temp/root_temp/st1")
-
-        # garbage directory in nest
-        st.save(r"riptable/tests/temp/root_temp/st2")
-
-        try:
-            os.makedirs(r"riptable/tests/temp/root_temp/st2/garbagedir")
-        except FileExistsError:
-            pass
-
-        # garbage file in nest
-        st.save(r"riptable/tests/temp/root_temp/st3")
-        ds.save(r"riptable/tests/temp/root_temp/st3/garbagefile.sds")
-
-        try:
-            os.rename(
-                r"riptable/tests/temp/root_temp/st3/garbagefile.sds", r"riptable/tests/temp/root_temp/st3/garbagefile"
-            )
-        except FileExistsError:
-            pass
-
-        sds_flatten(r"riptable/tests/temp/root_temp")
-        self.assertFalse(os.path.isdir(r"riptable/tests/temp/root_temp/st1"))
-        self.assertTrue(os.path.isfile(r"riptable/tests/temp/root_temp/st1.sds"))
-        self.assertTrue(os.path.isfile(r"riptable/tests/temp/root_temp/st1!ds1.sds"))
-        self.assertTrue(os.path.isfile(r"riptable/tests/temp/root_temp/st1!ds2.sds"))
-        self.assertTrue(os.path.isfile(r"riptable/tests/temp/root_temp/st1!ds3.sds"))
-        self.assertTrue(os.path.isdir(r"riptable/tests/temp/root_temp/st2"))
-        self.assertTrue(os.path.isdir(r"riptable/tests/temp/root_temp/st3"))
-
-        new_st = load_sds(r"riptable/tests/temp/root_temp", include_all_sds=True)
-
-        s = Struct()
-        s["a"] = Dataset({"a": [1, 2, 3]})
-        s["b"] = Struct()
-        s.save(r"riptable/tests/temp/st4.sds", onefile=True)
-        s4 = load_sds([r"riptable/tests/temp/st4.sds", r"riptable/tests/temp/st4.sds"], stack=True)
-        self.assertTrue(np.all(s4.a.a == [1, 2, 3, 1, 2, 3]))
-
-        shutil.rmtree(r"riptable/tests/temp/root_temp")
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset({"col_" + str(i): arange(5) for i in range(5)})
+            st = Struct({"ds1": ds, "ds2": ds, "ds3": ds, "arr": arange(5)})
+            st.save(f"{tmpdirname}/root_temp")
+            st.save(f"{tmpdirname}/root_temp/st1")
+
+            # garbage directory in nest
+            st.save(f"{tmpdirname}/root_temp/st2")
+
+            try:
+                os.makedirs(f"{tmpdirname}/root_temp/st2/garbagedir")
+            except FileExistsError:
+                pass
+
+            # garbage file in nest
+            st.save(f"{tmpdirname}/root_temp/st3")
+            ds.save(f"{tmpdirname}/root_temp/st3/garbagefile.sds")
+
+            try:
+                os.rename(f"{tmpdirname}/root_temp/st3/garbagefile.sds", f"{tmpdirname}/root_temp/st3/garbagefile")
+            except FileExistsError:
+                pass
+
+            sds_flatten(f"{tmpdirname}/root_temp")
+            self.assertFalse(os.path.isdir(f"{tmpdirname}/root_temp/st1"))
+            self.assertTrue(os.path.isfile(f"{tmpdirname}/root_temp/st1.sds"))
+            self.assertTrue(os.path.isfile(f"{tmpdirname}/root_temp/st1!ds1.sds"))
+            self.assertTrue(os.path.isfile(f"{tmpdirname}/root_temp/st1!ds2.sds"))
+            self.assertTrue(os.path.isfile(f"{tmpdirname}/root_temp/st1!ds3.sds"))
+            self.assertTrue(os.path.isdir(f"{tmpdirname}/root_temp/st2"))
+            self.assertTrue(os.path.isdir(f"{tmpdirname}/root_temp/st3"))
+
+            new_st = load_sds(f"{tmpdirname}/root_temp", include_all_sds=True)
+
+            s = Struct()
+            s["a"] = Dataset({"a": [1, 2, 3]})
+            s["b"] = Struct()
+            s.save(f"{tmpdirname}/st4.sds", onefile=True)
+            s4 = load_sds([f"{tmpdirname}/st4.sds", f"{tmpdirname}/st4.sds"], stack=True)
+            self.assertTrue(np.all(s4.a.a == [1, 2, 3, 1, 2, 3]))
 
         # ADD TESTS FOR:
         # conflict with temp root
         # conflict with existing file
 
     # def test_load_h5(self):
     #    try:
@@ -1076,256 +1068,246 @@
 
     #        # load 1 struct
     #        xtra = load_h5(r'riptable/tests/test_files/h5data.h5', name='xtra')
     #        self.assertTrue(isinstance(xtra, Struct))
     #        self.assertTrue(len(xtra), 4)
 
     #        # roundtrip h5 -> riptable -> sds -> riptable
-    #        xtra.save(r'riptable/tests/temp/testsaveh5')
-    #        xtra2 = Struct.load(r'riptable/tests/temp/testsaveh5')
+    #        xtra.save(r'riptable/tests/testsaveh5')
+    #        xtra2 = Struct.load(r'riptable/tests/testsaveh5')
     #        for k,v in xtra.items():
     #            self.assertTrue(bool(np.all(v == xtra2[k])))
-    #        shutil.rmtree(r'riptable/tests/temp/testsaveh5')
+    #
 
     #        # drop short columns
     #        with self.assertWarns(UserWarning):
     #            xtra_ds = load_h5(r'riptable/tests/test_files/h5data.h5', name='xtra', drop_short=True)
     #            self.assertTrue(isinstance(xtra_ds, Dataset))
     #            self.assertTrue(len(xtra_ds), 1)
 
     def test_all_types(self):
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            test_len = 20_000
 
-        test_len = 20_000
-
-        ds = Dataset(
-            {
-                "int8": np.random.randint(low=-128, high=127, size=(test_len), dtype=np.int8),
-                "uint8": np.random.randint(low=0, high=255, size=(test_len), dtype=np.uint8),
-                "int16": np.random.randint(low=-32768, high=32767, size=(test_len), dtype=np.int16),
-                "uint16": np.random.randint(low=0, high=65535, size=(test_len), dtype=np.uint16),
-                "int32": np.random.randint(low=-2147483648, high=2147483647, size=(test_len), dtype=np.int32),
-                "uint32": np.random.randint(low=0, high=4294967295, size=(test_len), dtype=np.uint32),
-                "int64": np.random.randint(
-                    low=-9223372036854775808, high=9223372036854775807, size=(test_len), dtype=np.int64
-                ),
-                "uint64": np.random.randint(low=0, high=18446744073709551615, size=(test_len), dtype=np.uint64),
-                "float32": np.random.rand(test_len).astype(np.float32) * 10e9,
-                "float64": np.random.rand(test_len).astype(np.float64) * 10e-9,
-                "unicode_str": FastArray(np.random.choice(["a", "b", "c"], test_len), unicode=True),
-                "bytes_str": np.random.choice([b"a", b"b", b"c"], test_len),
-            }
-        )
-
-        path = r"riptable/tests/temp/alltypes.sds"
+            ds = Dataset(
+                {
+                    "int8": np.random.randint(low=-128, high=127, size=(test_len), dtype=np.int8),
+                    "uint8": np.random.randint(low=0, high=255, size=(test_len), dtype=np.uint8),
+                    "int16": np.random.randint(low=-32768, high=32767, size=(test_len), dtype=np.int16),
+                    "uint16": np.random.randint(low=0, high=65535, size=(test_len), dtype=np.uint16),
+                    "int32": np.random.randint(low=-2147483648, high=2147483647, size=(test_len), dtype=np.int32),
+                    "uint32": np.random.randint(low=0, high=4294967295, size=(test_len), dtype=np.uint32),
+                    "int64": np.random.randint(
+                        low=-9223372036854775808, high=9223372036854775807, size=(test_len), dtype=np.int64
+                    ),
+                    "uint64": np.random.randint(low=0, high=18446744073709551615, size=(test_len), dtype=np.uint64),
+                    "float32": np.random.rand(test_len).astype(np.float32) * 10e9,
+                    "float64": np.random.rand(test_len).astype(np.float64) * 10e-9,
+                    "unicode_str": FastArray(np.random.choice(["a", "b", "c"], test_len), unicode=True),
+                    "bytes_str": np.random.choice([b"a", b"b", b"c"], test_len),
+                }
+            )
 
-        ds.save(path)
-        ds2 = load_sds(path)
-        self.assertTrue(list(ds) == list(ds2))
-        for k, col in ds2.items():
-            self.assertTrue(col.dtype == ds[k].dtype)
-            self.assertTrue(bool(np.all(col == ds[k])))
-
-        os.remove(path)
-
-        ds.save(path, compress=False)
-        ds2 = load_sds(path)
-        self.assertTrue(list(ds) == list(ds2))
-        for k, col in ds2.items():
-            self.assertTrue(col.dtype == ds[k].dtype)
-            self.assertTrue(bool(np.all(col == ds[k])))
+            path = f"{tmpdirname}/alltypes.sds"
 
-        os.remove(path)
+            ds.save(path)
+            ds2 = load_sds(path)
+            self.assertTrue(list(ds) == list(ds2))
+            for k, col in ds2.items():
+                self.assertTrue(col.dtype == ds[k].dtype)
+                self.assertTrue(bool(np.all(col == ds[k])))
+
+            os.remove(path)
+
+            ds.save(path, compress=False)
+            ds2 = load_sds(path)
+            self.assertTrue(list(ds) == list(ds2))
+            for k, col in ds2.items():
+                self.assertTrue(col.dtype == ds[k].dtype)
+                self.assertTrue(bool(np.all(col == ds[k])))
 
     def test_type_flip(self):
         # unless they can't be converted to a non-object single-item numpy array, all python
         # scalars will flip to numpy scalars.
         # any objects will be stored as their string representation.
-        st = Struct(
-            {
-                "empty_unicode": "",
-                "empty_bytes": b"",
-                "empty_unicode_arr": np.array([""]),
-                "empty_bytes_arr": np.array([b""]),
-                "nan": np.nan,
-                "empty_numeric_array": arange(0),
-                "npint8": np.int8(0),
-                "npint8": np.uint8(0),
-                "npint16": np.int16(0),
-                "npuint16": np.uint16(0),
-                "npint32": np.int32(0),
-                "npuint32": np.uint32(0),
-                "npint64": np.int64(0),
-                "npuint64": np.uint64(0),
-                "npfloat32": np.float32(0),
-                "npfloat64": np.float64(0),
-                "pyint": 0xFFFFFFFFFFFFFFFFF,  # stored as string, warns
-                "pyflt": 3.14,
-                "bool": True,
-                "npbool": np.bool_(True),
-                "npstr_scalar": np.str_("test"),
-                "npbytes_scalar": np.bytes_("test"),
-                "none": None,
-            }
-        )
-        path = r"riptable/tests/temp/alltypes"
-        with self.assertWarns(UserWarning):
-            save_sds(path, st)
-        st2 = load_sds(path)
 
-        s = st2.empty_unicode
-        self.assertEqual(s.__class__.__name__, "str_")
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            st = Struct(
+                {
+                    "empty_unicode": "",
+                    "empty_bytes": b"",
+                    "empty_unicode_arr": np.array([""]),
+                    "empty_bytes_arr": np.array([b""]),
+                    "nan": np.nan,
+                    "empty_numeric_array": arange(0),
+                    "npint8": np.int8(0),
+                    "npint8": np.uint8(0),
+                    "npint16": np.int16(0),
+                    "npuint16": np.uint16(0),
+                    "npint32": np.int32(0),
+                    "npuint32": np.uint32(0),
+                    "npint64": np.int64(0),
+                    "npuint64": np.uint64(0),
+                    "npfloat32": np.float32(0),
+                    "npfloat64": np.float64(0),
+                    "pyint": 0xFFFFFFFFFFFFFFFFF,  # stored as string, warns
+                    "pyflt": 3.14,
+                    "bool": True,
+                    "npbool": np.bool_(True),
+                    "npstr_scalar": np.str_("test"),
+                    "npbytes_scalar": np.bytes_("test"),
+                    "none": None,
+                }
+            )
+            path = f"{tmpdirname}/alltypes"
+            with self.assertWarns(UserWarning):
+                save_sds(path, st)
+            st2 = load_sds(path)
 
-        s = st2.empty_bytes
-        self.assertEqual(s.__class__.__name__, "bytes_")
+            s = st2.empty_unicode
+            self.assertEqual(s.__class__.__name__, "str_")
 
-        s = st2.pyflt
-        self.assertEqual(s.__class__, np.float64)
+            s = st2.empty_bytes
+            self.assertEqual(s.__class__.__name__, "bytes_")
 
-        s = st2.bool
-        self.assertEqual(s.__class__, np.bool_)
+            s = st2.pyflt
+            self.assertEqual(s.__class__, np.float64)
 
-        s = st2.pyint
-        self.assertEqual(s, b"295147905179352825855")
+            s = st2.bool
+            self.assertEqual(s.__class__, np.bool_)
 
-        os.remove(r"riptable/tests/temp/alltypes.sds")
+            s = st2.pyint
+            self.assertEqual(s, b"295147905179352825855")
 
     # leave this test here until pdataset has its own save / load
     def test_pdataset_save_warning(self):
-        ds = Dataset({"col_" + str(i): np.random.rand(5) for i in range(7)})
-        pds = PDataset([ds, ds])
-        path = r"riptable/tests/temp/pds.sds"
-        with self.assertWarns(UserWarning):
-            pds.save(path)
-
-        pds2 = load_sds(path)
-        self.assertTrue(pds2.__class__ == Dataset)
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset({"col_" + str(i): np.random.rand(5) for i in range(7)})
+            pds = PDataset([ds, ds])
+            path = f"{tmpdirname}/pds.sds"
+            with self.assertWarns(UserWarning):
+                pds.save(path)
 
-        os.remove(path)
+            pds2 = load_sds(path)
+            self.assertTrue(pds2.__class__ == Dataset)
 
     def test_stack_cat_invalid_index(self):
-        c = Categorical(["a", "a", "b", "c", "a"])
-        c._fa[0] = -128
-        ds = Dataset({"catcol": c})
-        path = r"riptable/tests/temp/ds1.sds"
-        ds.save(path)
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            c = Categorical(["a", "a", "b", "c", "a"])
+            c._fa[0] = -128
+            ds = Dataset({"catcol": c})
+            path = f"{tmpdirname}/ds1.sds"
+            ds.save(path)
 
-        ds2 = load_sds([path, path], stack=True)
+            ds2 = load_sds([path, path], stack=True)
 
-        self.assertTrue(isinstance(ds2.catcol, Categorical))
-        self.assertEqual(ds2.catcol._fa[0], 0)
-
-        os.remove(path)
+            self.assertTrue(isinstance(ds2.catcol, Categorical))
+            self.assertEqual(ds2.catcol._fa[0], 0)
 
     def test_load_multikey_base_0(self):
-        arr = np.random.choice(["a", "b", "c"], 10)
-        c = Categorical([arr, arr], base_index=0)
-        self.assertTrue(isinstance(c, Categorical))
-        self.assertTrue(c.ismultikey)
-        self.assertEqual(c.base_index, 0)
-
-        path = r"riptable/tests/temp/ds1.sds"
-        ds1 = Dataset({"catcol": c})
-        ds1.save(path)
-
-        ds2 = load_sds(path)
-        c2 = ds2.catcol
-        self.assertTrue(isinstance(c2, Categorical))
-        self.assertTrue(c2.ismultikey)
-        self.assertEqual(c2.base_index, 0)
-
-        self.assertTrue(ds1.catcol.count().equals(ds2.catcol.count()))
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            arr = np.random.choice(["a", "b", "c"], 10)
+            c = Categorical([arr, arr], base_index=0)
+            self.assertTrue(isinstance(c, Categorical))
+            self.assertTrue(c.ismultikey)
+            self.assertEqual(c.base_index, 0)
+
+            path = f"{tmpdirname}/ds1.sds"
+            ds1 = Dataset({"catcol": c})
+            ds1.save(path)
+
+            ds2 = load_sds(path)
+            c2 = ds2.catcol
+            self.assertTrue(isinstance(c2, Categorical))
+            self.assertTrue(c2.ismultikey)
+            self.assertEqual(c2.base_index, 0)
 
-        os.remove(path)
+            self.assertTrue(ds1.catcol.count().equals(ds2.catcol.count()))
 
     def test_onefile(self):
-        ds = Dataset({"arr1": arange(5), "arr2": arange(5)})
-        st = Struct({"ds": ds, "arr3": arange(5)})
-
-        folderpath = r"riptable/tests/temp/stfolder"
-        st.save(folderpath, onefile=False)
-        self.assertTrue(os.path.isdir(folderpath))
-        shutil.rmtree(folderpath)
-
-        singlepath = r"riptable/tests/temp/stfile.sds"
-        st.save(singlepath, onefile=True)
-        self.assertTrue(os.path.isfile(singlepath))
-        os.remove(singlepath)
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset({"arr1": arange(5), "arr2": arange(5)})
+            st = Struct({"ds": ds, "arr3": arange(5)})
+
+            folderpath = f"{tmpdirname}/stfolder"
+            st.save(folderpath, onefile=False)
+            self.assertTrue(os.path.isdir(folderpath))
+
+            singlepath = f"{tmpdirname}/stfile.sds"
+            st.save(singlepath, onefile=True)
+            self.assertTrue(os.path.isfile(singlepath))
 
     def test_onefile_folder(self):
-        ds = Dataset({"arr1": arange(5), "arr2": arange(5)})
-        st = Struct({"ds1": ds, "arr3": arange(5)})
-
-        singlepath = r"riptable/tests/temp/stfile.sds"
-        st.save(singlepath, onefile=True)
-        ds1 = load_sds(singlepath, folders=["ds1/"])
-        self.assertTrue(isinstance(ds1, Dataset))
-        self.assertTrue(ds1.equals(ds))
-
-        os.remove(singlepath)
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset({"arr1": arange(5), "arr2": arange(5)})
+            st = Struct({"ds1": ds, "arr3": arange(5)})
+
+            singlepath = f"{tmpdirname}/stfile.sds"
+            st.save(singlepath, onefile=True)
+            ds1 = load_sds(singlepath, folders=["ds1/"])
+            self.assertTrue(isinstance(ds1, Dataset))
+            self.assertTrue(ds1.equals(ds))
 
     # these tests are muted until root rebuild is committed
     def _test_rebuild_root(self):
-        ds = Dataset({"arr1": arange(5), "arr2": arange(5)})
-        st = Struct({"ds1": ds, "arr3": arange(5)})
-
-        folderpath = r"riptable/tests/temp/stfolder"
-        st.save(folderpath)
-        ds.save(os.path.join(folderpath, "ds2"))
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset({"arr1": arange(5), "arr2": arange(5)})
+            st = Struct({"ds1": ds, "arr3": arange(5)})
+
+            folderpath = f"{tmpdirname}/stfolder"
+            st.save(folderpath)
+            ds.save(os.path.join(folderpath, "ds2"))
 
-        st2 = load_sds(folderpath)
+            st2 = load_sds(folderpath)
 
-        self.assertTrue("ds2" in st2)
-        self.assertTrue(isinstance(st2.ds2, Dataset))
-
-        shutil.rmtree(folderpath)
+            self.assertTrue("ds2" in st2)
+            self.assertTrue(isinstance(st2.ds2, Dataset))
 
     def _test_rebuild_root_onefile(self):
-        ds = Dataset({"arr1": arange(5), "arr2": arange(5)})
-        st = Struct({"ds1": ds, "arr3": arange(5)})
-
-        folderpath = r"riptable/tests/temp/stfolder"
-        st.save(folderpath)
-        st.save(os.path.join(folderpath, "st2"), onefile=True)
-
-        st2 = load_sds(folderpath)
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset({"arr1": arange(5), "arr2": arange(5)})
+            st = Struct({"ds1": ds, "arr3": arange(5)})
+
+            folderpath = f"{tmpdirname}/stfolder"
+            st.save(folderpath)
+            st.save(os.path.join(folderpath, "st2"), onefile=True)
 
-        self.assertTrue("st2" in st2)
-        self.assertTrue(isinstance(st2.st2, Struct))
+            st2 = load_sds(folderpath)
 
-        shutil.rmtree(folderpath)
+            self.assertTrue("st2" in st2)
+            self.assertTrue(isinstance(st2.st2, Struct))
 
     def _test_rebuild_root_name(self):
-        ds = Dataset({"arr1": arange(5), "arr2": arange(5)})
-        st = Struct({"ds1": ds, "arr3": arange(5)})
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset({"arr1": arange(5), "arr2": arange(5)})
+            st = Struct({"ds1": ds, "arr3": arange(5)})
+
+            folderpath = f"{tmpdirname}/stfolder"
+            st.save(folderpath)
+            st.save(folderpath, name="st2")
 
-        folderpath = r"riptable/tests/temp/stfolder"
-        st.save(folderpath)
-        st.save(folderpath, name="st2")
+            st2 = load_sds(folderpath)
 
-        st2 = load_sds(folderpath)
-
-        self.assertTrue("st2" in st2)
-        self.assertTrue(isinstance(st2.st2, Struct))
-
-        shutil.rmtree(folderpath)
+            self.assertTrue("st2" in st2)
+            self.assertTrue(isinstance(st2.st2, Struct))
 
     def test_load_filter(self):
-        ds = Dataset({_k: list(range(_i * 10, (_i + 1) * 10)) for _i, _k in enumerate(["a", "b", "c", "d", "e"])})
-        singlepath = r"riptable/tests/temp/stfile.sds"
-        ds.save(singlepath)
-        ds1 = load_sds(singlepath, filter=[False, False, True, True, True, False, False, False, False, False])
-        ds2 = load_sds(singlepath, filter=arange(2, 5))
-        self.assertTrue(np.all(ds1.crc.imatrix_make() == ds2.crc.imatrix_make()))
-        os.remove(singlepath)
+        with tempfile.TemporaryDirectory() as tmpdirname:
+            ds = Dataset({_k: list(range(_i * 10, (_i + 1) * 10)) for _i, _k in enumerate(["a", "b", "c", "d", "e"])})
+            singlepath = f"{tmpdirname}/stfile.sds"
+            ds.save(singlepath)
+            ds1 = load_sds(singlepath, filter=[False, False, True, True, True, False, False, False, False, False])
+            ds2 = load_sds(singlepath, filter=arange(2, 5))
+            self.assertTrue(np.all(ds1.crc.imatrix_make() == ds2.crc.imatrix_make()))
 
     # def test_onefile_stack(self):
     #    ds = Dataset({'arr1':arange(5), 'arr2':arange(5)})
     #    st = Struct({'ds1':ds, 'arr3':arange(5)})
 
-    #    paths = [ r'riptable/tests/temp/stfile'+str(i)+'.sds' for i in range(3) ]
+    #    paths = [ r'riptable/tests/stfile'+str(i)+'.sds' for i in range(3) ]
     #    for p in paths:
     #        st.save(p, onefile=True)
 
     #    # disabled, names don't match after stack
 
     #    stacked = load_sds(paths, folders=['ds1/'], stack=True)
     #    # are we popping this item automatically?
@@ -1342,43 +1324,44 @@
 # TODO fold test_sds_stack_with_categorical into the more general test_sds_stack
 # We will still want to test across various container types, but rt_test_data module should be responsible for that detail
 @pytest.mark.parametrize("container_type", [Dataset, Struct])
 @pytest.mark.parametrize("stack", [True, False])
 @pytest.mark.parametrize("stack_count", [1])  # TODO consider stack_count 0 and 2
 @pytest.mark.parametrize("data", [get_all_categorical_data()])
 def test_sds_stack_with_categorical(container_type, data, stack, stack_count, tmpdir):
-    fn = "test_sds_stack_with_categorical"
-
-    # one SDS file per each container per each data element
-    for i, exp in enumerate(data):
-        key = f"{container_type.__name__}_{name(exp)}_{i}"
-        filename = str(tmpdir.join(key))
-
-        expected = container_type({key: exp})
-        save_sds(filename, expected)
-
-        # TODO stack across SDS files that are not identical
-        # TODO add case where data is sliced to same length and stored in one container
-        actual: Optional[PDataset] = None
-        if stack:
-            actual = load_sds([filename] * stack_count, stack=stack)
-        else:
-            actual = load_sds(filename, stack=stack)
+    with tempfile.TemporaryDirectory() as tmpdirname:
+        fn = "test_sds_stack_with_categorical"
 
-        act = actual[key]
-        if isinstance(exp, Categorical):
-            assert_categorical_equal(act, exp, verbose=True)
-        elif isinstance(exp, Struct):
-            assert act.equals(exp)
-        else:
-            pytest.fail(
-                f"{fn}: assertions not implemented for data type {type(data)}\n"
-                + f"expected of type {type(exp)}\n{repr(exp)}"
-                + f"actual of type {type(act)}\n{repr(act)}"
-            )
+        # one SDS file per each container per each data element
+        for i, exp in enumerate(data):
+            key = f"{container_type.__name__}_{name(exp)}_{i}"
+            filename = str(tmpdir.join(key))
+
+            expected = container_type({key: exp})
+            save_sds(filename, expected)
+
+            # TODO stack across SDS files that are not identical
+            # TODO add case where data is sliced to same length and stored in one container
+            actual: Optional[PDataset] = None
+            if stack:
+                actual = load_sds([filename] * stack_count, stack=stack)
+            else:
+                actual = load_sds(filename, stack=stack)
+
+            act = actual[key]
+            if isinstance(exp, Categorical):
+                assert_categorical_equal(act, exp, verbose=True)
+            elif isinstance(exp, Struct):
+                assert act.equals(exp)
+            else:
+                pytest.fail(
+                    f"{fn}: assertions not implemented for data type {type(data)}\n"
+                    + f"expected of type {type(exp)}\n{repr(exp)}"
+                    + f"actual of type {type(act)}\n{repr(act)}"
+                )
 
 
 @pytest.mark.parametrize(
     "stack",
     [
         pytest.param(
             True,
@@ -1406,45 +1389,46 @@
                 reason="RIP-482 - Saving a Struct that contains a Categorical with stacking set to `False` and `stack_count=2` modifies the publically accessible category_dict by modifying the key from `CAT` to `categorical_bytes`. To reproduce, remove this `pytest.mark.xfail`."
             ),
         ),
     ],
 )
 @pytest.mark.parametrize("data", [load_test_data()])
 def test_sds_stack(data, stack, stack_count, tmpdir):
-    fn = "test_sds_stack"
+    with tempfile.TemporaryDirectory() as tmpdirname:
+        fn = "test_sds_stack"
 
-    # one SDS file per each container per each data element
-    key = f"{fn}_{id(data)}"
-    filename = str(tmpdir.join(key))
-
-    save_sds(filename, data)
-
-    # TODO stack across SDS files that are not identical
-    # TODO add case where data is sliced to same length and stored in one container
-    actual: Optional[PDataset] = None
-    if stack:
-        actual = load_sds([filename] * stack_count, stack=stack)
-    else:
-        actual = load_sds(filename, stack=stack)
-
-    for k, v in data.items():
-        exp, act = data[k], actual[k]
-        err_msg = (
-            f"{fn}: failed equality check for {k}\n"
-            + f"expected of type {type(data)}\n{repr(data)}"
-            + f"actual of type {type(act)}\n{repr(act)}"
-        )
-        if isinstance(exp, Categorical):
-            assert_categorical_equal(act, exp, verbose=True)
-        elif isinstance(exp, FastArray):
-            assert_array_equal_(act, exp, err_msg=err_msg)
-        elif isinstance(data, Struct):
-            assert act.equals(exp), err_msg
+        # one SDS file per each container per each data element
+        key = f"{fn}_{id(data)}"
+        filename = str(tmpdir.join(key))
+
+        save_sds(filename, data)
+
+        # TODO stack across SDS files that are not identical
+        # TODO add case where data is sliced to same length and stored in one container
+        actual: Optional[PDataset] = None
+        if stack:
+            actual = load_sds([filename] * stack_count, stack=stack)
         else:
-            pytest.fail(f"{fn}: assertions not implemented for data type {type(exp)}\n" + err_msg)
+            actual = load_sds(filename, stack=stack)
+
+        for k, v in data.items():
+            exp, act = data[k], actual[k]
+            err_msg = (
+                f"{fn}: failed equality check for {k}\n"
+                + f"expected of type {type(data)}\n{repr(data)}"
+                + f"actual of type {type(act)}\n{repr(act)}"
+            )
+            if isinstance(exp, Categorical):
+                assert_categorical_equal(act, exp, verbose=True)
+            elif isinstance(exp, FastArray):
+                assert_array_equal_(act, exp, err_msg=err_msg)
+            elif isinstance(data, Struct):
+                assert act.equals(exp), err_msg
+            else:
+                pytest.fail(f"{fn}: assertions not implemented for data type {type(exp)}\n" + err_msg)
 
 
 @pytest.mark.parametrize(
     "data",
     [
         Struct(),
         Struct(Struct()),
@@ -1458,20 +1442,21 @@
         pytest.param(
             Multiset({"d": Dataset()}),
             marks=pytest.mark.xfail(reason="_sds_from_tree: 'NoneType' object cannot be interpreted as an integer"),
         ),
     ],
 )
 def test_empty_roundtrip(data, tmpdir):
-    dir = tmpdir.mkdir("test_empty_roundtrip")
-    p = str(dir.join(f"tmp_{id(data)}.sds"))
-    save_sds(p, data)
-    data2 = load_sds(p)
-    assert isinstance(data2, data.__class__)
-    assert data.shape == data2.shape, f"saved shape should equal original shape"
+    with tempfile.TemporaryDirectory() as tmpdirname:
+        dir = tmpdir.mkdir("test_empty_roundtrip")
+        p = str(dir.join(f"tmp_{id(data)}.sds"))
+        save_sds(p, data)
+        data2 = load_sds(p)
+        assert isinstance(data2, data.__class__)
+        assert data.shape == data2.shape, f"saved shape should equal original shape"
 
 
 @pytest.mark.parametrize("rng_seed", [590518374])
 @pytest.mark.parametrize(
     "include_date",
     [
         pytest.param(
@@ -1496,100 +1481,101 @@
     Test that loading a column(s) from a single SDS file containing multiple 'sections'
     (due to appending or using rt.sds_concat()) works as expected.
     The column(s) should have the correct length and be gap-filled wherever the column(s) do(es)
     not appear in some section(s) of the file.
 
     This test is a repro/test for https://github.com/rtosholdings/riptable/issues/138
     """
-    rng = default_rng(rng_seed)
+    with tempfile.TemporaryDirectory() as tmpdirname:
+        rng = default_rng(rng_seed)
 
-    # Randomly generate the rowcounts for the test datasets we'll generate.
-    ds_count = 10
-    min_rowcount = 5
-    max_rowcount = 20
-    ds_rowcounts = rng.integers(low=min_rowcount, high=max_rowcount, size=ds_count, endpoint=True)
-
-    # Generate the test datasets.
-    test_dss = [
-        create_test_dataset(rng=rng, rowcount=int(x), include_dict_cat=True, include_date=include_date)
-        for x in ds_rowcounts
-    ]
-    test_ds_keys = set(test_dss[0].keys())
-
-    # For some of the test datasets, drop one or more columns --
-    # this lets us test SDS performs gap-filling as expected when loading.
-    drop_cat_col_prob = 0.3
-    fa_col_name = "open_price"
-    cat_col_name = "deliverable_symbol"
-    dropped_col_names = [fa_col_name, cat_col_name]
-    for dropped_col_name in dropped_col_names:
-        assert (
-            dropped_col_name in test_dss[0]
-        )  # sanity check to make sure we don't attempt to drop a non-existent column.
-    drop_cat_col = rng.choice(
-        2, size=len(test_dss), replace=True, p=[drop_cat_col_prob, 1.0 - drop_cat_col_prob]
-    ).astype(np.bool_)
-    assert 0 < drop_cat_col.sum() < len(test_dss), "Bad random data for drop-column flags."
-
-    for do_drop_cat, test_ds in zip(drop_cat_col, test_dss):
-        if do_drop_cat:
-            test_ds.col_remove(dropped_col_names)
-
-    # Save the datasets to a single SDS file by creating the file then appending to it.
-    data_path = tmp_path / f"{request.node.originalname}-{rng_seed}.sds"
-    test_dss[0].save(data_path, overwrite=True)
-    for i in range(1, len(test_dss)):
-        test_dss[i].save(data_path, append=f"test_section_{i}")
-
-    # Row-concat the in-memory Datasets so we have an expected result
-    # to compare the output of rt.load_sds(..., stack=True) against.
-    inmem_stacked_ds = rt.Dataset.concat_rows(test_dss)
-    assert test_ds_keys == set(inmem_stacked_ds.keys())
-
-    # First, check whether the dropped column(s) is gap-filled as expected when we load the entire Dataset.
-    include_keys = inmem_stacked_ds.keys() if explicit_col_load_list else None
-    sds_stacked_allcols_ds = rt.load_sds(data_path, include=include_keys, stack=True)
-    assert test_ds_keys == set(sds_stacked_allcols_ds.keys())
-    assert inmem_stacked_ds.get_nrows() == sds_stacked_allcols_ds.get_nrows()
-    for col_name in test_ds_keys:
-        inmem_col = inmem_stacked_ds[col_name]
-        sds_loaded_col = sds_stacked_allcols_ds[col_name]
-
-        # Verify the columns match up.
-        assert_array_or_cat_equal(
-            inmem_col,
-            sds_loaded_col,
-            err_msg=f"The array data for column '{col_name}' does not match the expected result.",
-            # Categorical equality comparison options.
-            relaxed_cat_check=True,
-        )
+        # Randomly generate the rowcounts for the test datasets we'll generate.
+        ds_count = 10
+        min_rowcount = 5
+        max_rowcount = 20
+        ds_rowcounts = rng.integers(low=min_rowcount, high=max_rowcount, size=ds_count, endpoint=True)
+
+        # Generate the test datasets.
+        test_dss = [
+            create_test_dataset(rng=rng, rowcount=int(x), include_dict_cat=True, include_date=include_date)
+            for x in ds_rowcounts
+        ]
+        test_ds_keys = set(test_dss[0].keys())
 
-    # For debugging purposes, determine how many rows are in the datasets where the column was dropped.
-    dropped_row_count = sum(map(lambda do_drop, ds: ds.get_nrows() if do_drop else 0, drop_cat_col, test_dss))
-    print(f"Datasets where the target column was dropped account for {dropped_row_count} rows.")
-
-    # Try to load the column(s) we randomly dropped from some of the Datasets.
-    dropped_col_name_lists = []
-    # First try loading all of the dropped columns plus one column present in all sections.
-    dropped_col_name_lists.append(["close_price", *dropped_col_names])
-    dropped_col_name_lists.append(dropped_col_names)
-    dropped_col_name_lists.extend([[x] for x in dropped_col_names])
-    for dropped_col_name_list in dropped_col_name_lists:
-        with rt.load_sds(data_path, include=dropped_col_name_list, stack=True) as sds_stacked_dropcol_ds:
-            assert sds_stacked_dropcol_ds.get_ncols() == len(dropped_col_name_list)
-            for dropped_col_name in dropped_col_name_list:
-                assert dropped_col_name in sds_stacked_dropcol_ds
-            for dropped_col_name in dropped_col_name_list:
-                assert_array_or_cat_equal(
-                    inmem_stacked_ds[dropped_col_name],
-                    sds_stacked_dropcol_ds[dropped_col_name],
-                    err_msg=f"The array data for column '{dropped_col_name}' does not match the expected result.\tDropped columns: {dropped_col_name_list}",
-                    # Categorical equality comparison options.
-                    relaxed_cat_check=True,
-                )
+        # For some of the test datasets, drop one or more columns --
+        # this lets us test SDS performs gap-filling as expected when loading.
+        drop_cat_col_prob = 0.3
+        fa_col_name = "open_price"
+        cat_col_name = "deliverable_symbol"
+        dropped_col_names = [fa_col_name, cat_col_name]
+        for dropped_col_name in dropped_col_names:
+            assert (
+                dropped_col_name in test_dss[0]
+            )  # sanity check to make sure we don't attempt to drop a non-existent column.
+        drop_cat_col = rng.choice(
+            2, size=len(test_dss), replace=True, p=[drop_cat_col_prob, 1.0 - drop_cat_col_prob]
+        ).astype(np.bool_)
+        assert 0 < drop_cat_col.sum() < len(test_dss), "Bad random data for drop-column flags."
+
+        for do_drop_cat, test_ds in zip(drop_cat_col, test_dss):
+            if do_drop_cat:
+                test_ds.col_remove(dropped_col_names)
+
+        # Save the datasets to a single SDS file by creating the file then appending to it.
+        data_path = tmp_path / f"{request.node.originalname}-{rng_seed}.sds"
+        test_dss[0].save(data_path, overwrite=True)
+        for i in range(1, len(test_dss)):
+            test_dss[i].save(data_path, append=f"test_section_{i}")
+
+        # Row-concat the in-memory Datasets so we have an expected result
+        # to compare the output of rt.load_sds(..., stack=True) against.
+        inmem_stacked_ds = rt.Dataset.concat_rows(test_dss)
+        assert test_ds_keys == set(inmem_stacked_ds.keys())
+
+        # First, check whether the dropped column(s) is gap-filled as expected when we load the entire Dataset.
+        include_keys = inmem_stacked_ds.keys() if explicit_col_load_list else None
+        sds_stacked_allcols_ds = rt.load_sds(data_path, include=include_keys, stack=True)
+        assert test_ds_keys == set(sds_stacked_allcols_ds.keys())
+        assert inmem_stacked_ds.get_nrows() == sds_stacked_allcols_ds.get_nrows()
+        for col_name in test_ds_keys:
+            inmem_col = inmem_stacked_ds[col_name]
+            sds_loaded_col = sds_stacked_allcols_ds[col_name]
+
+            # Verify the columns match up.
+            assert_array_or_cat_equal(
+                inmem_col,
+                sds_loaded_col,
+                err_msg=f"The array data for column '{col_name}' does not match the expected result.",
+                # Categorical equality comparison options.
+                relaxed_cat_check=True,
+            )
+
+        # For debugging purposes, determine how many rows are in the datasets where the column was dropped.
+        dropped_row_count = sum(map(lambda do_drop, ds: ds.get_nrows() if do_drop else 0, drop_cat_col, test_dss))
+        print(f"Datasets where the target column was dropped account for {dropped_row_count} rows.")
+
+        # Try to load the column(s) we randomly dropped from some of the Datasets.
+        dropped_col_name_lists = []
+        # First try loading all of the dropped columns plus one column present in all sections.
+        dropped_col_name_lists.append(["close_price", *dropped_col_names])
+        dropped_col_name_lists.append(dropped_col_names)
+        dropped_col_name_lists.extend([[x] for x in dropped_col_names])
+        for dropped_col_name_list in dropped_col_name_lists:
+            with rt.load_sds(data_path, include=dropped_col_name_list, stack=True) as sds_stacked_dropcol_ds:
+                assert sds_stacked_dropcol_ds.get_ncols() == len(dropped_col_name_list)
+                for dropped_col_name in dropped_col_name_list:
+                    assert dropped_col_name in sds_stacked_dropcol_ds
+                for dropped_col_name in dropped_col_name_list:
+                    assert_array_or_cat_equal(
+                        inmem_stacked_ds[dropped_col_name],
+                        sds_stacked_dropcol_ds[dropped_col_name],
+                        err_msg=f"The array data for column '{dropped_col_name}' does not match the expected result.\tDropped columns: {dropped_col_name_list}",
+                        # Categorical equality comparison options.
+                        relaxed_cat_check=True,
+                    )
 
 
 @pytest.mark.parametrize("rng_seed", [558902840])
 @pytest.mark.parametrize(
     "include_date",
     [
         pytest.param(
@@ -1633,133 +1619,134 @@
     (due to appending or using rt.sds_concat()) works as expected when a mask/filter is provided
     to `rt.load_sds()`.
     The column(s) should have the correct length and be gap-filled wherever the column(s) do(es)
     not appear in some section(s) of the file.
 
     This test is a repro/test for https://github.com/rtosholdings/riptable/issues/163
     """
-    rng = default_rng(rng_seed)
+    with tempfile.TemporaryDirectory() as tmpdirname:
+        rng = default_rng(rng_seed)
+
+        # Randomly generate the rowcounts for the test datasets we'll generate.
+        ds_count = 10
+        min_rowcount = 5
+        max_rowcount = 20
+        ds_rowcounts = rng.integers(low=min_rowcount, high=max_rowcount, size=ds_count, endpoint=True)
+
+        # Generate the test datasets.
+        test_dss = [
+            create_test_dataset(rng=rng, rowcount=int(x), include_dict_cat=True, include_date=include_date)
+            for x in ds_rowcounts
+        ]
+        test_ds_keys = set(test_dss[0].keys())
 
-    # Randomly generate the rowcounts for the test datasets we'll generate.
-    ds_count = 10
-    min_rowcount = 5
-    max_rowcount = 20
-    ds_rowcounts = rng.integers(low=min_rowcount, high=max_rowcount, size=ds_count, endpoint=True)
-
-    # Generate the test datasets.
-    test_dss = [
-        create_test_dataset(rng=rng, rowcount=int(x), include_dict_cat=True, include_date=include_date)
-        for x in ds_rowcounts
-    ]
-    test_ds_keys = set(test_dss[0].keys())
-
-    # For some of the test datasets, drop one or more columns --
-    # this lets us test SDS performs gap-filling as expected when loading.
-    drop_cat_col_prob = 0.3
-    fa_col_name = "open_price"
-    cat_col_name = "deliverable_symbol"
-    dropped_col_names = [fa_col_name, cat_col_name]
-    for dropped_col_name in dropped_col_names:
-        assert (
-            dropped_col_name in test_dss[0]
-        )  # sanity check to make sure we don't attempt to drop a non-existent column.
-    drop_cat_col = rng.choice(
-        2, size=len(test_dss), replace=True, p=[drop_cat_col_prob, 1.0 - drop_cat_col_prob]
-    ).astype(np.bool_)
-    assert 0 < drop_cat_col.sum() < len(test_dss), "Bad random data for drop-column flags."
-
-    for do_drop_cat, test_ds in zip(drop_cat_col, test_dss):
-        if do_drop_cat:
-            test_ds.col_remove(dropped_col_names)
-
-    # Save the datasets to a single SDS file by creating the file then appending to it.
-    data_path = tmp_path / f"{request.node.originalname}-{rng_seed}.sds"
-    test_dss[0].save(data_path, overwrite=True)
-    for i in range(1, len(test_dss)):
-        test_dss[i].save(data_path, append=f"test_section_{i}")
-
-    # Create the mask we'll use to filter the data -- both in-memory and when we call rt.load_sds().
-    fully_masked_section_flags = rt.ones(len(test_dss), dtype=np.bool_)
-    if mask_dropped_section_prop is not None:
-        dropped_section_idxs = np.where(drop_cat_col)
-        maskout_dropped_section_count = int(np.ceil(mask_dropped_section_prop * len(dropped_section_idxs)))
-        maskout_dropped_section_idxs = rng.choice(dropped_section_idxs, size=maskout_dropped_section_count)
-        fully_masked_section_flags[maskout_dropped_section_idxs] = False
-
-    if mask_undropped_section_prop is not None:
-        undropped_section_idxs = np.where(np.logical_not(drop_cat_col))
-        maskout_undropped_section_count = int(np.ceil(mask_undropped_section_prop * len(undropped_section_idxs)))
-        maskout_undropped_section_idxs = rng.choice(undropped_section_idxs, size=maskout_undropped_section_count)
-        fully_masked_section_flags[maskout_undropped_section_idxs] = False
-
-    data_mask = np.repeat(fully_masked_section_flags, ds_rowcounts)
-    if randomize_start_mask:
-        total_rowcount = sum(ds.get_nrows() for ds in test_dss)
-        row_maskout_prob = 0.2  # probability for each row that it's masked OUT
-        overlay_mask = rng.choice(
-            2, size=total_rowcount, replace=True, p=[row_maskout_prob, 1.0 - row_maskout_prob]
+        # For some of the test datasets, drop one or more columns --
+        # this lets us test SDS performs gap-filling as expected when loading.
+        drop_cat_col_prob = 0.3
+        fa_col_name = "open_price"
+        cat_col_name = "deliverable_symbol"
+        dropped_col_names = [fa_col_name, cat_col_name]
+        for dropped_col_name in dropped_col_names:
+            assert (
+                dropped_col_name in test_dss[0]
+            )  # sanity check to make sure we don't attempt to drop a non-existent column.
+        drop_cat_col = rng.choice(
+            2, size=len(test_dss), replace=True, p=[drop_cat_col_prob, 1.0 - drop_cat_col_prob]
         ).astype(np.bool_)
-        rt.mask_andi(data_mask, overlay_mask)
+        assert 0 < drop_cat_col.sum() < len(test_dss), "Bad random data for drop-column flags."
 
-    # Row-concat the in-memory Datasets so we have an expected result
-    # to compare the output of rt.load_sds(..., stack=True) against.
-    inmem_stacked_ds = rt.Dataset.concat_rows(test_dss)
-    inmem_stacked_ds = inmem_stacked_ds[data_mask, :]
-    assert test_ds_keys == set(inmem_stacked_ds.keys())
-
-    # First, check whether the dropped column(s) is gap-filled as expected when we load the entire Dataset.
-    include_keys = inmem_stacked_ds.keys() if explicit_col_load_list else None
-    sds_stacked_allcols_ds = rt.load_sds(data_path, include=include_keys, stack=True, filter=data_mask)
-    assert test_ds_keys == set(sds_stacked_allcols_ds.keys())
-    assert inmem_stacked_ds.get_nrows() == sds_stacked_allcols_ds.get_nrows()
-    for col_name in test_ds_keys:
-        inmem_col = inmem_stacked_ds[col_name]
-        sds_loaded_col = sds_stacked_allcols_ds[col_name]
-
-        # Verify the columns match up.
-        assert_array_or_cat_equal(
-            inmem_col,
-            sds_loaded_col,
-            err_msg=f"The array data for column '{col_name}' does not match the expected result.",
-            # Categorical equality comparison options.
-            relaxed_cat_check=True,
-            # Don't bother checking category names until SDS round-trips them.
-            check_cat_names=False,
-            # TEMP: assert_array_or_cat_equal() still checks names right now, unless check_cat_types is disabled.
-            check_cat_types=False,
+        for do_drop_cat, test_ds in zip(drop_cat_col, test_dss):
+            if do_drop_cat:
+                test_ds.col_remove(dropped_col_names)
+
+        # Save the datasets to a single SDS file by creating the file then appending to it.
+        data_path = tmp_path / f"{request.node.originalname}-{rng_seed}.sds"
+        test_dss[0].save(data_path, overwrite=True)
+        for i in range(1, len(test_dss)):
+            test_dss[i].save(data_path, append=f"test_section_{i}")
+
+        # Create the mask we'll use to filter the data -- both in-memory and when we call rt.load_sds().
+        fully_masked_section_flags = rt.ones(len(test_dss), dtype=np.bool_)
+        if mask_dropped_section_prop is not None:
+            dropped_section_idxs = np.where(drop_cat_col)
+            maskout_dropped_section_count = int(np.ceil(mask_dropped_section_prop * len(dropped_section_idxs)))
+            maskout_dropped_section_idxs = rng.choice(dropped_section_idxs, size=maskout_dropped_section_count)
+            fully_masked_section_flags[maskout_dropped_section_idxs] = False
+
+        if mask_undropped_section_prop is not None:
+            undropped_section_idxs = np.where(np.logical_not(drop_cat_col))
+            maskout_undropped_section_count = int(np.ceil(mask_undropped_section_prop * len(undropped_section_idxs)))
+            maskout_undropped_section_idxs = rng.choice(undropped_section_idxs, size=maskout_undropped_section_count)
+            fully_masked_section_flags[maskout_undropped_section_idxs] = False
+
+        data_mask = np.repeat(fully_masked_section_flags, ds_rowcounts)
+        if randomize_start_mask:
+            total_rowcount = sum(ds.get_nrows() for ds in test_dss)
+            row_maskout_prob = 0.2  # probability for each row that it's masked OUT
+            overlay_mask = rng.choice(
+                2, size=total_rowcount, replace=True, p=[row_maskout_prob, 1.0 - row_maskout_prob]
+            ).astype(np.bool_)
+            rt.mask_andi(data_mask, overlay_mask)
+
+        # Row-concat the in-memory Datasets so we have an expected result
+        # to compare the output of rt.load_sds(..., stack=True) against.
+        inmem_stacked_ds = rt.Dataset.concat_rows(test_dss)
+        inmem_stacked_ds = inmem_stacked_ds[data_mask, :]
+        assert test_ds_keys == set(inmem_stacked_ds.keys())
+
+        # First, check whether the dropped column(s) is gap-filled as expected when we load the entire Dataset.
+        include_keys = inmem_stacked_ds.keys() if explicit_col_load_list else None
+        sds_stacked_allcols_ds = rt.load_sds(data_path, include=include_keys, stack=True, filter=data_mask)
+        assert test_ds_keys == set(sds_stacked_allcols_ds.keys())
+        assert inmem_stacked_ds.get_nrows() == sds_stacked_allcols_ds.get_nrows()
+        for col_name in test_ds_keys:
+            inmem_col = inmem_stacked_ds[col_name]
+            sds_loaded_col = sds_stacked_allcols_ds[col_name]
+
+            # Verify the columns match up.
+            assert_array_or_cat_equal(
+                inmem_col,
+                sds_loaded_col,
+                err_msg=f"The array data for column '{col_name}' does not match the expected result.",
+                # Categorical equality comparison options.
+                relaxed_cat_check=True,
+                # Don't bother checking category names until SDS round-trips them.
+                check_cat_names=False,
+                # TEMP: assert_array_or_cat_equal() still checks names right now, unless check_cat_types is disabled.
+                check_cat_types=False,
+            )
+
+        # For debugging purposes, determine how many rows are in the datasets where the column was dropped.
+        dropped_row_count = sum(map(lambda do_drop, ds: ds.get_nrows() if do_drop else 0, drop_cat_col, test_dss))
+        print(
+            f"Datasets where the target column was dropped account for {dropped_row_count}/{ds_rowcounts.sum()} rows. (Mask selected {data_mask.sum()}/{len(data_mask)} rows.)"
         )
 
-    # For debugging purposes, determine how many rows are in the datasets where the column was dropped.
-    dropped_row_count = sum(map(lambda do_drop, ds: ds.get_nrows() if do_drop else 0, drop_cat_col, test_dss))
-    print(
-        f"Datasets where the target column was dropped account for {dropped_row_count}/{ds_rowcounts.sum()} rows. (Mask selected {data_mask.sum()}/{len(data_mask)} rows.)"
-    )
-
-    # Try to load the column(s) we randomly dropped from some of the Datasets.
-    dropped_col_name_lists = []
-    # First try loading all of the dropped columns plus one column present in all sections.
-    dropped_col_name_lists.append(["close_price", *dropped_col_names])
-    dropped_col_name_lists.append(dropped_col_names)
-    dropped_col_name_lists.extend([[x] for x in dropped_col_names])
-    for dropped_col_name_list in dropped_col_name_lists:
-        with rt.load_sds(
-            data_path, include=dropped_col_name_list, stack=True, filter=data_mask
-        ) as sds_stacked_dropcol_ds:
-            assert sds_stacked_dropcol_ds.get_ncols() == len(dropped_col_name_list)
-            for dropped_col_name in dropped_col_name_list:
-                assert dropped_col_name in sds_stacked_dropcol_ds
-            for dropped_col_name in dropped_col_name_list:
-                assert_array_or_cat_equal(
-                    inmem_stacked_ds[dropped_col_name],
-                    sds_stacked_dropcol_ds[dropped_col_name],
-                    err_msg=f"The array data for column '{dropped_col_name}' does not match the expected result.\tDropped columns: {dropped_col_name_list}",
-                    # Categorical equality comparison options.
-                    relaxed_cat_check=True,
-                    # Don't bother checking category names until SDS round-trips them.
-                    check_cat_names=False,
-                    # TEMP: assert_array_or_cat_equal() still checks names right now, unless check_cat_types is disabled.
-                    check_cat_types=False,
-                )
+        # Try to load the column(s) we randomly dropped from some of the Datasets.
+        dropped_col_name_lists = []
+        # First try loading all of the dropped columns plus one column present in all sections.
+        dropped_col_name_lists.append(["close_price", *dropped_col_names])
+        dropped_col_name_lists.append(dropped_col_names)
+        dropped_col_name_lists.extend([[x] for x in dropped_col_names])
+        for dropped_col_name_list in dropped_col_name_lists:
+            with rt.load_sds(
+                data_path, include=dropped_col_name_list, stack=True, filter=data_mask
+            ) as sds_stacked_dropcol_ds:
+                assert sds_stacked_dropcol_ds.get_ncols() == len(dropped_col_name_list)
+                for dropped_col_name in dropped_col_name_list:
+                    assert dropped_col_name in sds_stacked_dropcol_ds
+                for dropped_col_name in dropped_col_name_list:
+                    assert_array_or_cat_equal(
+                        inmem_stacked_ds[dropped_col_name],
+                        sds_stacked_dropcol_ds[dropped_col_name],
+                        err_msg=f"The array data for column '{dropped_col_name}' does not match the expected result.\tDropped columns: {dropped_col_name_list}",
+                        # Categorical equality comparison options.
+                        relaxed_cat_check=True,
+                        # Don't bother checking category names until SDS round-trips them.
+                        check_cat_names=False,
+                        # TEMP: assert_array_or_cat_equal() still checks names right now, unless check_cat_types is disabled.
+                        check_cat_types=False,
+                    )
 
 
 if __name__ == "__main__":
     tester = unittest.main()
```

### Comparing `riptable-1.8.0/riptable/tests/test_scalar.py` & `riptable-1.8.1/riptable/tests/test_scalar.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_sds.py` & `riptable-1.8.1/riptable/tests/test_sds.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_sprint_fastarray.py` & `riptable-1.8.1/riptable/tests/test_sprint_fastarray.py`

 * *Files 1% similar despite different names*

```diff
@@ -29,14 +29,16 @@
     np.int_,
     np.int64,
     np.uint64,
 ]
 string_types = [np.bytes_, np.str_]
 warning_types = [object, np.complex64, np.complex128, np.float16]
 
+_numpy_version = tuple(int(x) for x in np.version.version.split("."))
+
 # nan_funcs   = [ np.nanargmax, np.nanargmin, np.nancumprod, np.nancumsum, np.nanmax,
 #                np.nanmean, np.nanmedian, np.nanmin, np.nanpercentile, np.nanprod,
 #                np.nanstd, np.nansum, np.nanvar ]
 # nan_results = []
 
 nan_funcs = [nansum, nanmean, nanmin, nanmax]
 no_negatives = [np.log, np.log2, np.log10, np.sqrt]
@@ -71,15 +73,14 @@
                 return False
         except TypeError:
             return False
     return True
 
 
 class FastArray_Test(unittest.TestCase):
-
     # --------VALID CONSTRUCTORS-------------------
     """
     BUGS:
     when initializing from a scalar, the requested dtype is ignored
     it will default to the type of the scalar OR the default numpy type for the python type
 
     Numpy does not ignore the dtype keyword arg.
@@ -788,38 +789,56 @@
 
     # ----------------TEST LOGICAL FOR STRING------------------------
     def test_string_compare(self):
         """
         FastArray currently does not support bytestring array comparison with ufuncs - numpy also prints notimplemented
         However operators <=, <, ==, !=, >, >= will return the correct result (boolean array)
         """
+        is_numpy_1_24 = _numpy_version >= (1, 24, 0)
         f_arr = FA(["a", "b", "c"])
-        invalid_funcs = [
+        funcs = [
             np.less_equal,
             np.less,
             np.equal,
             np.not_equal,
             np.greater,
             np.greater_equal,
         ]
+        func_results = [
+            [True, True, True],
+            [False, False, False],
+            [True, True, True],
+            [False, False, False],
+            [False, False, False],
+            [True, True, True],
+        ]
         valid_func_names = ["__ne__", "__eq__", "__ge__", "__gt__", "__le__", "__lt__"]
         correct_results = [
             [False, False, False],
             [True, True, True],
             [True, True, True],
             [False, False, False],
             [True, True, True],
             [False, False, False],
         ]
         correct_dict = dict(zip(valid_func_names, correct_results))
 
         # ufunc comparisons will not work for strings (should we implement this on our own?)
-        for func in invalid_funcs:
-            with self.assertRaises(TypeError, msg=f"String comparison did not raise TypeError for {func}"):
+        for func, correct in zip(funcs, func_results):
+            if is_numpy_1_24:
                 result = func(f_arr, f_arr)
+                for i in range(len(result)):
+                    self.assertEqual(
+                        result[i],
+                        correct[i],
+                        msg=f"String comparison failed for function {func}",
+                    )
+            else:
+                with self.assertRaises(TypeError, msg=f"String comparison did not raise TypeError for {func}"):
+                    result = func(f_arr, f_arr)
 
         # strings need to be compared this way
         for f_name in valid_func_names:
             func = f_arr.__getattribute__(f_name)
             result = func(f_arr)
             correct = correct_dict[f_name]
             for i in range(len(result)):
```

### Comparing `riptable-1.8.0/riptable/tests/test_str.py` & `riptable-1.8.1/riptable/tests/test_str.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_struct.py` & `riptable-1.8.1/riptable/tests/test_struct.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_timewindow.py` & `riptable-1.8.1/riptable/tests/test_timewindow.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_ufunc2.py` & `riptable-1.8.1/riptable/tests/test_ufunc2.py`

 * *Files 0% similar despite different names*

```diff
@@ -491,15 +491,14 @@
         for tc in "bhilqBHILQefdgFDG":
             dt = np.dtype(tc)
             aa = a.astype(dt)
             bb = b.astype(dt)
 
             # Check result value and dtype.
             for x, y in itertools.product([aa, -aa], [bb, -bb]):
-
                 # Check with no output type specified
                 if tc in "FDG":
                     tgt = complex(x) / complex(y)
                 else:
                     tgt = float(x) / float(y)
 
                 res = np.true_divide(x, y)
@@ -1285,23 +1284,23 @@
         # Checks that in-place accumulates work, see also gh-7402
         arr = np.ones(4, dtype=object)
         arr = FA(arr)
         arr[:] = [[1] for i in range(4)]
         # Twice reproduced also for tuples:
         np.add.accumulate(arr, out=arr)
         np.add.accumulate(arr, out=arr)
-        assert_array_equal(arr, np.array([[1] * i for i in [1, 3, 6, 10]]))
+        assert_array_equal(arr, np.array([[1] * i for i in [1, 3, 6, 10]], dtype=object))
 
         # And the same if the axis argument is used
         arr = np.ones((2, 4), dtype=object)
         arr = FA(arr)
         arr[0, :] = [[2] for i in range(4)]
         np.add.accumulate(arr, out=arr, axis=-1)
         np.add.accumulate(arr, out=arr, axis=-1)
-        assert_array_equal(arr[0, :], np.array([[2] * i for i in [1, 3, 6, 10]]))
+        assert_array_equal(arr[0, :], np.array([[2] * i for i in [1, 3, 6, 10]], dtype=object))
 
     # FA ready
     def test_object_array_reduceat_inplace(self):
         # Checks that in-place reduceats work, see also gh-7465
         arr = np.empty(4, dtype=object)
         arr = FA(arr)
         arr[:] = [[1] for i in range(4)]
@@ -1846,15 +1845,14 @@
 
         np.float64(5) * MyThing((3, 3))
         assert_(MyThing.rmul_count == 1, MyThing.rmul_count)
         assert_(MyThing.getitem_count <= 2, MyThing.getitem_count)
 
     # FA ready (partially)
     def test_inplace_fancy_indexing(self):
-
         a = np.arange(10)
         a = FA(a)
         np.add.at(a, [2, 5, 2], 1)
         assert_equal(a, [0, 1, 4, 3, 4, 6, 6, 7, 8, 9])
 
         a = np.arange(10)
         a = FA(a)
```

### Comparing `riptable-1.8.0/riptable/tests/test_unique.py` & `riptable-1.8.1/riptable/tests/test_unique.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/test_utils.py` & `riptable-1.8.1/riptable/tests/test_utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable/tests/utils.py` & `riptable-1.8.1/riptable/tests/utils.py`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/riptable.egg-info/PKG-INFO` & `riptable-1.8.1/riptable.egg-info/PKG-INFO`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: riptable
-Version: 1.8.0
+Version: 1.8.1
 Summary: Python Package for riptable studies framework
 Home-page: https://github.com/rtosholdings/riptable
 Author: RTOS Holdings
 Author-email: rtosholdings-bot@sig.com
 Classifier: Development Status :: 4 - Beta
 Classifier: Programming Language :: Python :: 3
 Classifier: Programming Language :: Python :: 3.8
```

### Comparing `riptable-1.8.0/riptable.egg-info/SOURCES.txt` & `riptable-1.8.1/riptable.egg-info/SOURCES.txt`

 * *Files identical despite different names*

### Comparing `riptable-1.8.0/setup.py` & `riptable-1.8.1/setup.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 from setuptools import setup
 
 package_name = "riptable"
 
 install_requires = [
     "ansi2html >=1.5.2",
     "numba >=0.56.2",
-    "numpy >=1.22",
+    "numpy >=1.23",
     "pandas >=1.0,<3.0",
     "python-dateutil",
     "riptide_cpp >=1.12.2,<2",
 ]
 
 setup(
     name=package_name,
```

